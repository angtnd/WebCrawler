/*! favorite 2014-10-28 */
KISSY.add("tbc/favorite/1.0.8/index",function(a,b,c,d,e){function f(b){var c=this;c.config=a.merge({hook:".J_TDialogTrigger",closeClass:"J_Del",showEvent:!0,hideEvent:!0,url:"",callback:null},b),b.url&&(c.useUserUrl=!0),c._init(c.config),window.favoriteCallBackFromIframe||(window.favoriteCallBackFromIframe=c.config.callback)}return window.ua&&window.UA_Opt&&window.UA_Opt.reload||(window.ua="",window.temp_ua="",window.UA_Opt=new Object,UA_Opt.isSendError=1,UA_Opt.LogVal="ua",UA_Opt.SendMethod=8,UA_Opt.MaxKSLog=10,UA_Opt.MaxMCLog=10,UA_Opt.MaxMPLog=10,UA_Opt.MPInterval=50,UA_Opt.MaxFocusLog=10,UA_Opt.MaxGPLog=10,UA_Opt.MaxTcLog=10,UA_Opt.Flag=97422,a.getScript("http://uaction.aliyuncdn.com/js/uab.js",{success:function(){window.temp_ua=window.ua,UA_Opt.Token=(new Date).getTime()+":"+Math.random(),UA_Opt.reload&&UA_Opt.reload()}})),a.augment(f,a.EventTarget,{_init:function(){var a=this,b=location.href,c=/net/,d=c.test(b);document.domain=!d&&"taobao.com"||"taobao.net",window.favoriteHasInitOverlay||a._initOverlay(),a._bindEvent()},_bindEvent:function(){var a=this;a.config.showEvent&&c.delegate(document,"click",a.config.hook,function(b){b.halt(),a.show(b.currentTarget)}),a.config.hideEvent&&c.delegate(document,"click","."+a.config.closeClass,function(b){b.halt(),a.hide()})},_initOverlay:function(){window.favoriteHasInitOverlay=!0,window.favoritePopup2014=new e({prefixCls:"favorate-",width:440,height:260,closable:!1,elStyle:{position:6==d.ie?"absolute":"fixed"},effect:{effect:"fade",duration:.5}}),window.favoritePopup2014.show(),window.favoritePopup2014.hide(),window.favoritePopup2014.set("align",{points:["cc","cc"]}),b.attr(".favorate-overlay","id","popupPanel"),6==d.ie&&b.remove(b.get("iframe",b.get("#popupPanel")))},show:function(a){var c=this;window.thisFavoriteBtn=a,window.temp_ua=window.ua,UA_Opt.Token=(new Date).getTime()+":"+Math.random(),UA_Opt.reload&&UA_Opt.reload(),c.useUserUrl||(c.config.url=b.attr(a,"href"));var d='<iframe src="'+c.config.url+"&ua="+encodeURIComponent(window.temp_ua)+"&t="+Math.random()+'" width="440px" height="260px" name="popupIframe" frameborder="0" scrolling="no"></iframe><a class="'+c.config.closeClass+' close-btn" href="#">X</a><div class="tb-canvas"></div>';window.favoritePopup2014.set("content",d),window.favoritePopup2014.show(),b.css(".favorate-overlay","display","block")},hide:function(){window.favoritePopup2014.hide(),window.favoritePopup2014.set("content","")}}),f},{requires:["dom","event","ua","overlay","tbc/favorite/1.0.8/index.css"]});