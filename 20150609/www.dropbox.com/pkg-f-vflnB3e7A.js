define("modules/clean/business/business_login_modal",["jquery","modules/clean/dbmodal"],function(e,t){var n;return n=function(){function n(){var n;n=new t.DBModal({element_id:"business-sign-in-modal"}),e("#sign-in").on("click",function(e){return e.preventDefault(),n.show()})}return n}()});var __bind=function(e,t){return function(){return e.apply(t,arguments)}};define("modules/clean/business/business_page",["jquery","modules/clean/analytics"],function(e,t){var n;return n=function(){function n(){this._track_scrolling=__bind(this._track_scrolling,this),this.win=e(window),this.win.on("scroll",this._track_scrolling)}return n.prototype._track_scrolling=function(){return this.win.scrollTop()>200?(t.TeamsWebActionsLogger.log("business_page_scrolled"),this.win.off("scroll",this._track_scrolling)):void 0},n}()});var __bind=function(e,t){return function(){return e.apply(t,arguments)}};define("modules/clean/business/components/snap_engage_link",["jquery","modules/clean/snapengage"],function(e,t){var n;return n=function(){function e(e){this.$root=e,this._snapLinkClicked=__bind(this._snapLinkClicked,this),this.$root.on("click",this._snapLinkClicked)}return e.prototype._snapLinkClicked=function(e){return e.preventDefault(),t.DropboxSnapEngage.startReactiveChat()},e}()});var __bind=function(e,t){return function(){return e.apply(t,arguments)}};define("modules/clean/business/landing",["jquery","modules/clean/analytics","modules/core/browser","modules/clean/dbmodal"],function(e,t,n,i){var o;return o=function(){function o(t){this._onClickTrackingLink=__bind(this._onClickTrackingLink,this),this._moveBackground=__bind(this._moveBackground,this);var n;this.$landing_header=e(".business-landing.business-header"),this.starting_position=parseInt(this.$landing_header.css("background-position-y")),this.$window=e(window),this.$window.on("scroll",this._moveBackground),t&&(n=new i.DBModal({element_id:"business-plans-modal",restrict_width:!0}),n.vertical_offset=100,n.show()),e("#business-plans-modal a[data-event-table='web_teams']").click(this._onClickTrackingLink)}return o.prototype._moveBackground=function(){var e,t;return t=this.$window.scrollTop(),e=this.starting_position+.55*t,this.$landing_header.css("background-position-y",e+"px")},o.prototype._onClickTrackingLink=function(i){var o,a;return i.preventDefault(),o=e(i.target),a=o.attr("data-event-name"),t.TeamsWebActionsLogger.log(a,void 0,function(){return n.redirect(o.attr("href"))})},o}()}),define("modules/clean/business/modal_helper",["jquery"],function(e){var t;return t=function(){function t(){}return t.centerModal=function(t){var n,i,o;return o=t.width(),n=t.height(),i=n<e(window).height()?{position:"fixed",top:"50%","margin-top":-n/2,left:"50%","margin-left":-o/2}:{position:"absolute",top:e(document).scrollTop()+20,left:"50%","margin-left":-o/2},t.css(i)},t}()}),define("modules/clean/components/expanding_section",["jquery","modules/clean/analytics"],function(e,t){var n;return n=function(){function n(t,n,i,o){this.$parent=e("#"+t),n&&(this.$scrollElement=e(""+n)),this.scrollElementOffset=i||0,this.expandingSectionAnalyticsId=o,this.defaultOffset=95,this.toggledState=!1,this.$toggleButton=this.$parent.find(".expanding-section__button"),this.closeButton=this.$parent.find(".expanding-section__button-close"),this._setupClickHandlers()}return n.prototype._setupClickHandlers=function(){var e,t;return e=function(e){return function(t){return t.preventDefault(),e._scrollToSection(),e._expandSection(),e.expandingSectionAnalyticsId&&e._logAnalyticsTracking(),!0}}(this),t=function(e){return function(t){return t.preventDefault(),e._expandSection(),!0}}(this),this.$toggleButton.on("click",e),this.closeButton.length>0&&this.closeButton.on("click",t),!0},n.prototype._scrollToSection=function(){var t;return t=this.$parent.offset().top-this.scrollElementOffset-this.defaultOffset,this.$scrollElement&&(t=this.$parent.find(this.$scrollElement).offset().top-this.scrollElementOffset+"px"),this.toggledState||e("html, body").animate({scrollTop:t}),t},n.prototype._expandSection=function(){var e;return e=0,this.toggledState?(e=0,this.toggledState=!1):(e=this.$parent.find(".expanding-section__content-container").outerHeight(!0),this.toggledState=!0),this.$parent.find(".expanding-section__content").css("max-height",e),this.$toggleButton.blur().toggleClass("button-toggled"),this},n.prototype._logAnalyticsTracking=function(){t.TeamsWebActionsLogger.log(this.expandingSectionAnalyticsId)},n}()});var __bind=function(e,t){return function(){return e.apply(t,arguments)}};define("modules/clean/components/locale_selector",["jquery","modules/core/cookies","modules/clean/business/modal_helper"],function(e,t,n){var i;return i=function(){function i(t){this._localeSelected=__bind(this._localeSelected,this),this._keydownHandler=__bind(this._keydownHandler,this),this._hideModal=__bind(this._hideModal,this),this._showModal=__bind(this._showModal,this);var n,i;this.$document=e(document),n=e(t),i=n.find("#locale-link"),this.$modal_holder=n.find("#db-modal-locale-selector-modal"),this.$db_modal_x=this.$modal_holder.find(".db-modal-x"),this.$db_modal_overlay=this.$modal_holder.find(".db-modal-overlay"),this.$modal=this.$modal_holder.find(".db-modal"),this.$locale_links=this.$modal.find(".locale-option"),i.on("click",this._showModal)}return i.prototype._showModal=function(e){return e.preventDefault(),this.$db_modal_x.one("click",this._hideModal),this.$db_modal_overlay.one("click",this._hideModal),this.$document.one("keydown",this._keydownHandler),this.$modal_holder.show(),n.centerModal(this.$modal),this.$locale_links.one("click",this._localeSelected)},i.prototype._hideModal=function(e){return e.preventDefault(),this.$modal_holder.hide()},i.prototype._keydownHandler=function(e){return 27===e.keyCode?this._hideModal(e):void 0},i.prototype._localeSelected=function(n){return this._hideModal(n),e("<form/>",{action:"/set_locale",method:"POST"}).append(this._hiddenField("locale",e(n.target).data("locale"))).append(this._hiddenField("locale_cont",window.location.pathname)).append(this._hiddenField("t",t.read(Constants.JS_CSRF_COOKIE))).appendTo("body").submit(),!1},i.prototype._hiddenField=function(t,n){return e("<input/>",{type:"hidden",name:t,value:n})},i}()}),define("modules/clean/index_2015",["jquery","external/underscore","modules/clean/dbmodal","modules/clean/analytics"],function(e,t,n,i){var o,a;return a=i.UserActivityLogger,o=function(){function i(){this._onScrollHandler(),e(window).scroll(t.throttle(this._onScrollHandler,33,{leading:!0,trailing:!0})),this._setupClickHandlers()}return i.prototype._onScrollHandler=function(){return e(window).scrollTop()>350?(e("#dropbox-logo").addClass("fade-out"),e(".button-toggler").addClass("show-sign-up")):(e("#dropbox-logo").removeClass("fade-out"),e(".button-toggler").removeClass("show-sign-up"))},i.prototype._setupClickHandlers=function(){var t;return t=new n.DBModal({element_id:"sign-up-modal"}),e("#sign-in").on("click",function(){return a.log("","web_login")}),e("#sign-up, .sign-up").on("click",function(e){return e.preventDefault(),a.log("","web_register"),t.show()})},i}()}),define("modules/clean/snapengage",["jquery","modules/clean/analytics"],function(e,t){var n,i;return i=t.TeamsWebActionsLogger,n=function(){function t(){}return t.chatRequested=!1,t.chatData={},t.SNAPENGAGE_IFRAME_ORIGIN=null,t.init=function(e,n,i,o,a,s,r,l){var c,d;return this.SNAPENGAGE_IFRAME_ORIGIN=a,this.chatRequested=!1,this.chatData={FirstName:e,LastName:n,Email:i,SessionID:o,Country:s,MktoInfo:r,auPriceVersion:l,proactiveMessage:"",proactiveAgentName:"",visitorFirstTimeVisitor:"",visitorAmountOfPreviousChats:"",visitorAmountOfPagesVisited:"",visitorTimeOnSite:"",visitorTimeOnPage:""},d=t.getIframeURL(),c=t.createIframe(d),window.addEventListener("message",t.receiveMessage,!1),c.addEventListener("load",function(){return t.checkChatStatus()}),setInterval(t.checkChatStatus,13e4)},t.createIframe=function(e){var t;return t=document.createElement("iframe"),t.src=e,t.setAttribute("sandbox","allow-scripts allow-same-origin"),t.setAttribute("class","snapengage-iframe"),t.setAttribute("id","snapengage-iframe"),t.setAttribute("allowTransparency","true"),document.body.insertBefore(t,document.body.childNodes[0]),t},t.checkChatStatus=function(){return this.chatRequested?void 0:t.sendMessage({message_type:"CheckChatStatus",chatData:this.chatData})},t.getIframeURL=function(){var e;return e=this.SNAPENGAGE_IFRAME_ORIGIN,e+window.location.pathname+window.location.search},t.updateChatStatus=function(t){return e("[data-snap-engage-visibility]").hide(),t?e('[data-snap-engage-visibility="online"]').show():e('[data-snap-engage-visibility="offline"]').show()},t.startReactiveChat=function(){return this.chatRequested?void 0:(this.chatRequested=!0,i.log("chat_initiated"),t.showSnapEngageIframe(),t.sendMessage({message_type:"StartChat",chatData:this.chatData}))},t.getSnapEngageIframe=function(){return document.getElementById("snapengage-iframe")},t.sendMessage=function(e){var n;return n=t.getSnapEngageIframe().contentWindow,n.postMessage(e,this.SNAPENGAGE_IFRAME_ORIGIN)},t.closeChat=function(){return t.hideSnapEngageIframe(),this.chatRequested=!1},t.logStartChat=function(e,t,n){return"proactive"===n?i.log("proactive_chat_initiated"):"manual"===n?i.log("reactive_chat_initiated"):void 0},t.openProactiveChat=function(){return this.chatRequested=!0,t.showSnapEngageIframe()},t.hideSnapEngageIframe=function(){return e(t.getSnapEngageIframe()).hide()},t.showSnapEngageIframe=function(){return e(t.getSnapEngageIframe()).show()},t.receiveMessage=function(e){var n;if(t.validOriginURL(e.origin))switch(n=e.data,n.message_type){case"Close":return t.closeChat(n.type,n.agent_status);case"ChatMessageReceived":return t.showSnapEngageIframe();case"Open":return this.chatRequested=!0,t.showSnapEngageIframe(),t.updateChatStatus(!0);case"OpenProactive":return t.openProactiveChat(n.agent,n.msg);case"StartChat":return t.logStartChat(n.email,n.msg,n.type);case"UpdateChatStatus":return t.updateChatStatus(n.online)}},t.validOriginURL=function(e){return e===this.SNAPENGAGE_IFRAME_ORIGIN},t}(),{DropboxSnapEngage:n}});