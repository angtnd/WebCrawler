if(typeof deconcept=="undefined"){var deconcept=new Object();
}if(typeof deconcept.util=="undefined"){deconcept.util=new Object();
}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();
}deconcept.SWFObject=function(swf,id,w,h,ver,c,quality,xiRedirectUrl,redirectUrl,detectKey){if(!document.getElementById){return;
}this.DETECT_KEY=detectKey?detectKey:"detectflash";
this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);
this.params=new Object();
this.variables=new Object();
this.attributes=new Array();
if(swf){this.setAttribute("swf",swf);
}if(id){this.setAttribute("id",id);
}if(w){this.setAttribute("width",w);
}if(h){this.setAttribute("height",h);
}if(ver){this.setAttribute("version",new deconcept.PlayerVersion(ver.toString().split(".")));
}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();
if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true;
}if(c){this.addParam("bgcolor",c);
}var q=quality?quality:"high";
this.addParam("quality",q);
this.setAttribute("useExpressInstall",false);
this.setAttribute("doExpressInstall",false);
var xir=(xiRedirectUrl)?xiRedirectUrl:window.location;
this.setAttribute("xiRedirectUrl",xir);
this.setAttribute("redirectUrl","");
if(redirectUrl){this.setAttribute("redirectUrl",redirectUrl);
}};
deconcept.SWFObject.prototype={useExpressInstall:function(path){this.xiSWFPath=!path?"expressinstall.swf":path;
this.setAttribute("useExpressInstall",true);
},setAttribute:function(name,value){this.attributes[name]=value;
},getAttribute:function(name){return this.attributes[name];
},addParam:function(name,value){this.params[name]=value;
},getParams:function(){return this.params;
},addVariable:function(name,value){this.variables[name]=value;
},getVariable:function(name){return this.variables[name];
},getVariables:function(){return this.variables;
},getVariablePairs:function(){var variablePairs=new Array();
var key;
var variables=this.getVariables();
for(key in variables){variablePairs[variablePairs.length]=key+"="+variables[key];
}return variablePairs;
},getSWFHTML:function(){var swfNode="";
if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");
this.setAttribute("swf",this.xiSWFPath);
}swfNode='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"';
swfNode+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';
var params=this.getParams();
for(var key in params){swfNode+=[key]+'="'+params[key]+'" ';
}var pairs=this.getVariablePairs().join("&");
if(pairs.length>0){swfNode+='flashvars="'+pairs+'"';
}swfNode+="/>";
}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");
this.setAttribute("swf",this.xiSWFPath);
}swfNode='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'">';
swfNode+='<param name="movie" value="'+this.getAttribute("swf")+'" />';
var params=this.getParams();
for(var key in params){swfNode+='<param name="'+key+'" value="'+params[key]+'" />';
}var pairs=this.getVariablePairs().join("&");
if(pairs.length>0){swfNode+='<param name="flashvars" value="'+pairs+'" />';
}swfNode+="</object>";
}return swfNode;
},write:function(elementId){if(this.getAttribute("useExpressInstall")){var expressInstallReqVer=new deconcept.PlayerVersion([6,0,65]);
if(this.installedVer.versionIsValid(expressInstallReqVer)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);
this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));
document.title=document.title.slice(0,47)+" - Flash Player Installation";
this.addVariable("MMdoctitle",document.title);
}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof elementId=="string")?document.getElementById(elementId):elementId;
n.innerHTML=this.getSWFHTML();
return true;
}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));
}}return false;
}};
deconcept.SWFObjectUtil.getPlayerVersion=function(){var PlayerVersion=new deconcept.PlayerVersion([0,0,0]);
if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];
if(x&&x.description){PlayerVersion=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));
}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;
var counter=3;
while(axo){try{counter++;
axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+counter);
PlayerVersion=new deconcept.PlayerVersion([counter,0,0]);
}catch(e){axo=null;
}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");
}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");
PlayerVersion=new deconcept.PlayerVersion([6,0,21]);
axo.AllowScriptAccess="always";
}catch(e){if(PlayerVersion.major==6){return PlayerVersion;
}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
}catch(e){}}if(axo!=null){PlayerVersion=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));
}}}return PlayerVersion;
};
deconcept.PlayerVersion=function(arrVersion){this.major=arrVersion[0]!=null?parseInt(arrVersion[0]):0;
this.minor=arrVersion[1]!=null?parseInt(arrVersion[1]):0;
this.rev=arrVersion[2]!=null?parseInt(arrVersion[2]):0;
};
deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;
}if(this.major>fv.major){return true;
}if(this.minor<fv.minor){return false;
}if(this.minor>fv.minor){return true;
}if(this.rev<fv.rev){return false;
}return true;
};
deconcept.util={getRequestParameter:function(param){var q=document.location.search||document.location.hash;
if(param==null){return q;
}if(q){var pairs=q.substring(1).split("&");
for(var i=0;
i<pairs.length;
i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return pairs[i].substring((pairs[i].indexOf("=")+1));
}}}return"";
}};
deconcept.SWFObjectUtil.cleanupSWFs=function(){var objects=document.getElementsByTagName("OBJECT");
for(var i=objects.length-1;
i>=0;
i--){objects[i].style.display="none";
for(var x in objects[i]){if(typeof objects[i][x]=="function"){objects[i][x]=function(){};
}}}};
if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};
__flash_savedUnloadHandler=function(){};
window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs);
};
window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);
deconcept.unloadSet=true;
}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];
};
}var getQueryParamValue=deconcept.util.getRequestParameter;
var FlashObject=deconcept.SWFObject;
var SWFObject=deconcept.SWFObject;
amzn.sx.utils.jsDepMgr.register("swfobjectJS",function(){return SWFObject;
});
amzn.sx.utils.jsDepMgr.when("jQuery","init search-js-trackplayer",function(jQuery){jQuery(function(){window.a2z_1p_AMPlayerProd_DoFSCommand=function(command,args){var argArray=new Array();
argArray=args.split("\t");
if(command=="TrackStateChanged"){a2z_1p_setTrackPreviewState(argArray[0],argArray[1]);
}};
window.fe_a2z_1p_AMPlayerProd_DoFSCommand=function(command,args){a2z_1p_AMPlayerProd_DoFSCommand(command,args);
};
window.a2z_1p_getFlashMovieObject=function(objectId){var obj=window.document[objectId];
if(obj){if(navigator.userAgent.indexOf("Safari")!=-1){if(obj instanceof HTMLEmbedElement){return obj;
}else{return obj[0];
}}return obj;
}if(navigator.appName.indexOf("Microsoft Internet")==-1){if(document.embeds&&document.embeds[objectId]){return document.embeds[objectId];
}}else{return document.getElementById(objectId);
}};
window.a2z_1p_trackPreviewPressed=function(asin){var flashContentDiv=document.getElementById("a2z_1p_chiDiv");
if(flashContentDiv==null){flashContentDiv=document.getElementById("fe_a2z_1p_chiDiv");
}if(flashContentDiv!=null){if(document.getElementById("a2z_1p_flash_not_installed")!=null){return true;
}}var trackPreviewImage=document.getElementById("a2z_1p_trackPreview"+asin);
if(trackPreviewImage==null){trackPreviewImage=document.getElementById("fe_a2z_1p_trackPreview"+asin);
}var albumSampler=a2z_1p_getFlashMovieObject("a2z_1p_AMPlayerProd");
if(albumSampler==null){albumSampler=a2z_1p_getFlashMovieObject("fe_a2z_1p_AMPlayerProd");
}if(trackPreviewImage&&albumSampler){var currentState=trackPreviewImage["state"];
switch(currentState){case a2z_1p_STATEID_PLAYING:case a2z_1p_STATEID_LOADING:albumSampler.TCallLabel("/","PausePlayback");
break;
case a2z_1p_STATEID_STOPPED:case a2z_1p_STATEID_PAUSED:case a2z_1p_STATEID_ERROR:case undefined:albumSampler.SetVariable("_root.asinToPlay",asin);
albumSampler.TCallLabel("/","PlayTrackASIN");
break;
}}return false;
};
window.a2z_1p_STATEID_LOADING=1;
window.a2z_1p_STATEID_STOPPED=2;
window.a2z_1p_STATEID_PAUSED=3;
window.a2z_1p_STATEID_PLAYING=4;
window.a2z_1p_STATEID_ERROR=5;
window.a2z_1p_TrackPlayerImages=new Array();
if(typeof entityData!="undefined"){a2z_1p_TrackPlayerImages[a2z_1p_STATEID_LOADING]=entityData.loading_img;
a2z_1p_TrackPlayerImages[a2z_1p_STATEID_STOPPED]=entityData.stopped_img;
a2z_1p_TrackPlayerImages[a2z_1p_STATEID_PAUSED]=entityData.paused_img;
a2z_1p_TrackPlayerImages[a2z_1p_STATEID_PLAYING]=entityData.playing_img;
a2z_1p_TrackPlayerImages[a2z_1p_STATEID_ERROR]=entityData.error_img;
}window.a2z_1p_setTrackPreviewState=function(asin,state){var trackPreviewImage=document.getElementById("a2z_1p_trackPreview"+asin);
if(trackPreviewImage==null){trackPreviewImage=document.getElementById("fe_a2z_1p_trackPreview"+asin);
}if(trackPreviewImage){var newStateImage=a2z_1p_TrackPlayerImages[state];
if(newStateImage!=undefined){trackPreviewImage["src"]=a2z_1p_TrackPlayerImages[state];
trackPreviewImage["state"]=parseInt(state);
}}};
window.a2z_1p_stopPlayer=function(){var albumSampler=a2z_1p_getFlashMovieObject("a2z_1p_AMPlayerProd");
if(albumSampler==null){albumSampler=a2z_1p_getFlashMovieObject("fe_a2z_1p_AMPlayerProd");
}if(albumSampler){albumSampler.TCallLabel("/","PausePlayback");
}};
window.a2z_1p_setPlaylistURL=function(playlistURL){var albumSampler=a2z_1p_getFlashMovieObject("a2z_1p_AMPlayerProd");
if(albumSampler==null){albumSampler=a2z_1p_getFlashMovieObject("fe_a2z_1p_AMPlayerProd");
}if(albumSampler){albumSampler.SetVariable("_root.playlistToSet",playlistURL);
albumSampler.TCallLabel("/","SetPlaylist");
}};
window.a2z_1p_oldWidth;
window.a2z_1p_setVisible=function(isVisible){var albumSampler=a2z_1p_getFlashMovieObject("a2z_1p_AMPlayerProd");
if(albumSampler==null){albumSampler=a2z_1p_getFlashMovieObject("fe_a2z_1p_AMPlayerProd");
}if(albumSampler){if(isVisible){albumSampler.width=a2z_1p_oldWidth;
}else{a2z_1p_oldWidth=albumSampler.width;
albumSampler.width=1;
}}};
window.a2z_1p_setAMDCookieValue=function(value){var albumSampler=a2z_1p_getFlashMovieObject("a2z_1p_AMPlayerProd");
if(albumSampler==null){albumSampler=a2z_1p_getFlashMovieObject("fe_a2z_1p_AMPlayerProd");
}if(albumSampler){albumSampler.SetVariable("_root.AMDCookieValue",value);
albumSampler.TCallLabel("/","SetAMDCookieValue");
}};
window.a2z_1p_getAMDCookieValue=function(){var flashAMDCookieValue=null;
var albumSampler=a2z_1p_getFlashMovieObject("a2z_1p_AMPlayerProd");
if(albumSampler==null){albumSampler=a2z_1p_getFlashMovieObject("fe_a2z_1p_AMPlayerProd");
}if(albumSampler&&typeof ActiveXObject!=="undefined"&&albumSampler instanceof ActiveXObject){try{flashAMDCookieValue=albumSampler.GetVariable("_root.AMDCookieValue");
}catch(e){}}return flashAMDCookieValue;
};
window.varIsUndef=function(v){return((v==undefined)||(v==null)||(v=="undefined")||(v=="null"));
};
window.syncFlashAndHTTPCookies=function(){var cookieSync="normal";
var flashAMDCookieValue=undefined;
if(cookieSync!="install"&&cookieSync!="uninstall"){flashAMDCookieValue=a2z_1p_getAMDCookieValue();
}var httpAMDCookieValue;
var httpAMDCookieName="dmusic_download_manager_enabled=";
var domain=".amazon.com";
if(document.cookie!=null){var ca=document.cookie.split(";");
for(var i=0;
i<ca.length;
i++){var c=ca[i];
while(c.charAt(0)==" "){c=c.substring(1,c.length);
}if(c.indexOf(httpAMDCookieName)==0){httpAMDCookieValue=c.substring(httpAMDCookieName.length,c.length);
break;
}}}var vals="flashAMDCookieValue: "+flashAMDCookieValue+", httpAMDCookieValue: "+httpAMDCookieValue+", cookieSync: "+cookieSync;
if(cookieSync=="uninstall"){vals+=" action: uninstall flashCookie";
a2z_1p_setAMDCookieValue("uninstalled");
}else{if(cookieSync=="install"){vals+=" action: install flashCookie";
a2z_1p_setAMDCookieValue(httpAMDCookieValue);
}else{if(varIsUndef(flashAMDCookieValue)&&!varIsUndef(httpAMDCookieValue)){vals+=" action: httpCookie -> flashCookie";
a2z_1p_setAMDCookieValue(httpAMDCookieValue);
}else{if(flashAMDCookieValue=="uninstalled"){vals+=" action: delete httpCookie";
var expires="; expires=Thu, 01-Jan-1970 00:00:01 GMT";
document.cookie=httpAMDCookieName+flashAMDCookieValue+expires+"; path=/; domain="+domain;
}else{if(!varIsUndef(flashAMDCookieValue)&&flashAMDCookieValue!="uninstalled"&&varIsUndef(httpAMDCookieValue)){vals+=" action: httpCookie <- flashCookie";
var date=new Date();
date.setTime(date.getTime()+(10*365*24*60*60*1000));
var expires="; expires="+date.toGMTString();
document.cookie=httpAMDCookieName+flashAMDCookieValue+expires+"; path=/; domain="+domain;
}}}}}var flashHTTPCookieDiv=document.getElementById("a2z_1p_amdCookie");
if(flashHTTPCookieDiv){flashHTTPCookieDiv.innerHTML=vals;
}};
if(window.addEventListener){window.addEventListener("load",syncFlashAndHTTPCookies,false);
}else{if(window.attachEvent){window.attachEvent("onload",syncFlashAndHTTPCookies);
}}if(window.onunload==undefined){window.onunload=function(){return false;
};
}window.fp_resizePlayerSpace=function(nsPrefix,w,h){try{var ifrm=parent.document.getElementById(nsPrefix+"movieFrameID");
if(ifrm){var h2=h+35;
ifrm.style.height=h2;
}}catch(err){}if(h>0){document.getElementById(nsPrefix+"clipDiv").style.height=h;
document.getElementById(nsPrefix+"videoPlaceholder").style.height=h;
}else{document.getElementById(nsPrefix+"clipDiv").style.height="";
document.getElementById(nsPrefix+"videoPlaceholder").style.height="";
}};
window.fp_rewriteDiv=function(nsPrefix,divName,html){document.getElementById(nsPrefix+divName).innerHTML=html;
};
window.embeddingPopup=function(nsPrefix){alert("placeholder function for embedding code");
};
window.a2z_1p_embeddingPopup=function(){alert("Embedding code will be displayed here.");
};
window.a2z_1p_textString='<div id="a2z_1p_videoPlaceholder" style="position:relative;"><div id="a2z_1p_clipDiv" style="position:relative; overflow:visible; "><div id="a2z_1p_flashcontent"><span id="a2z_1p_flash_not_installed" style="font-size: 10px;">To view this content, download <a href="http://get.adobe.com/flashplayer">Flash player</a> (version 8.0.0.0 or higher)</span></div></div></div>';
window.a2z_1p_so;
window.a2z_1p_loadSwf_Core=function(swfLocation,swfWidth,swfHeight,flashVersion,bgColor,swfParams,flashParams,embedAttributes){try{a2z_1p_so=new SWFObject(swfLocation,"a2z_1p_AMPlayerProd",swfWidth,swfHeight,flashVersion,bgColor);
for(var v in swfParams){a2z_1p_so.addVariable(v,encodeURIComponent(swfParams[v]));
}for(var v in flashParams){a2z_1p_so.addParam(v,flashParams[v]);
}for(var v in embedAttributes){a2z_1p_so.setAttribute(v,embedAttributes[v]);
}a2z_1p_so.addVariable("swfEmbedTime",new Date().getTime());
var agt=navigator.userAgent;
var reFirefox=new RegExp("firefox/","i");
var regx=agt.split(reFirefox);
var ffVersion=8;
if(regx[1]){var pts=regx[1].split(/[.]/);
ffVersion=parseFloat(pts[0]+"."+pts[1]);
}var minorVersion=parseFloat(navigator.ap);
if((navigator.appVersion.indexOf("Mac")!=-1)||(ffVersion<1.5)){a2z_1p_so.setAttribute("height",swfHeight);
a2z_1p_so.setAttribute("width",swfWidth);
a2z_1p_so.addVariable("oldFirefox","1");
}if(a2z_1p_so.write("a2z_1p_flashcontent")){fp_resizePlayerSpace("a2z_1p_",1,1);
}else{var nsPrefix="a2z_1p_";
fp_resizePlayerSpace(nsPrefix,0,0);
}}catch(err){fp_resizePlayerSpace("a2z_1p_",0,0);
}return false;
};
window.getPlaylistTracks=function(){var asinsList=jQuery(".srTrack").map(function(){return jQuery(this).attr("name");
});
return jQuery.makeArray(asinsList).join("");
};
window._a2z_1p_loadSwf=function(movieID,playerVersion){var playlist=getPlaylistTracks();
var location=entityData.swfLocation.replace("ASIN.List",playlist);
fp_rewriteDiv("a2z_1p_","chiDiv",a2z_1p_textString);
var swfLocation=location;
var swfWidth="1";
var swfHeight="1";
var flashVersion="8.0.0.0";
var bgColor="#d8d8d8";
var swfParams={};
var flashParams={};
var embedAttributes={};
swfParams.amazonPort=entityData.amazonPort;
swfParams.sessionId=entityData.sessionId;
swfParams.amazonServer=entityData.amazonServer;
swfParams.amazonAmbLink="";
swfParams.swfLocation=location;
flashParams.salign="LT";
flashParams.bgcolor="#d8d8d8";
flashParams.allowScriptAccess="always";
flashParams.quality="high";
flashParams.wmode="transparent";
embedAttributes.width="1";
embedAttributes.height="1";
if(movieID){if(playerVersion=="3"){swfLocation=entityData.playerUrl;
swfParams.mediaObjectIDList=movieID;
}else{swfLocation=entityData.legacyPlayerUrl;
}swfParams.xmlUrl=entityData.swfXmlDomain+movieID+"/"+entityID.sessionID;
flashParams.wmode="transparent";
swfParams.autoPlay="1";
}if(document.getElementById("a2z_1p_duration")){document.getElementById("a2z_1p_duration").style.display="none";
}a2z_1p_loadSwf_Core(swfLocation,swfWidth,swfHeight,flashVersion,bgColor,swfParams,flashParams,embedAttributes);
return false;
};
window.a2z_1p_loadSwf=function(movieID,playerVersion){return _a2z_1p_loadSwf(movieID,playerVersion);
};
amzn.sx.utils.jsDepMgr.register("search-js-trackplayer",function(){return{a2z_1p_loadSwf:_a2z_1p_loadSwf};
});
});
});
