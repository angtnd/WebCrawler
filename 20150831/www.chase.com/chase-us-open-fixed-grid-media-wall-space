<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7" lang="en-us" xmlns:fb="http://ogp.me/ns/fb#"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8" lang="en-us" xmlns:fb="http://ogp.me/ns/fb#"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie10 lt-ie9" lang="en-us" xmlns:fb="http://ogp.me/ns/fb#"> <![endif]-->
<!--[if IE 9]> <html class="no-js lt-ie10" lang="en-us" xmlns:fb="http://ogp.me/ns/fb#"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en-us" xmlns:fb="http://ogp.me/ns/fb#"> <!--<![endif]-->
  <head>
    <!--[if lt IE 9]>
    <script src="//chase-trial.massrel.io/template-static-a139be124a05ee5aa51b63fd038ed0c6467d27dd/js/html5-shiv.js"></script>
    <script src="//chase-trial.massrel.io/template-static-a139be124a05ee5aa51b63fd038ed0c6467d27dd/js/css3-mediaqueries.js"></script>
    <![endif]-->
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />

    <base target="_blank">

    <title>Media Wall</title>

    
  <link id="compiled-template-less" href="//chase-trial.massrel.io/main.cbd8b6e98819582d993bb3de4b3dc14f3f8fa5c7.css" type="text/css" rel="stylesheet"/>

  </head>
  <body  >
    
    

    <div class="main-container">
      <div class="action-bar    ">
        <div class="primary-buttons"><div id="photo-share-button" class="mr-component mr-component-type-photo-share-button-2 mr-component-instance-photo-share-button" data-mr-component-id="photo-share-button" data-mr-component-type="photo-share-button-2"></div></div>
        <div class="secondary-buttons"></div>
      </div>

      <section id="media-grid">
        <div id="noNewContent">No content available.</div>
        <div class="grid">
          <div class="grid-body">

          </div>
        </div>
      </section>
    </div>

    <div class="footer ">
      <a id="mr-logo" class="mr-component mr-component-type-logo-1 mr-component-instance-mr-logo" data-mr-component-id="mr-logo" data-mr-component-type="logo-1"></a>
    </div>

    <section id="modal" class="mr-component mr-component-type-modal-2 mr-component-instance-modal" data-mr-component-id="modal" data-mr-component-type="modal-2"></section>

    
  <script src="//chase-trial.massrel.io/loader.024fbf3fbf766bd2a6d57d9b00498ab246a55b56.js"></script>
  <script>//! moment.js
//! version : 2.8.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*!
 * Fine Uploader
 *
 * Copyright 2013, Widen Enterprises, Inc. info@fineuploader.com
 *
 * Version: 3.9.0-3
 *
 * Homepage: http://fineuploader.com
 *
 * Repository: git://github.com/Widen/fine-uploader.git
 *
 * Licensed under GNU GPL v3, see LICENSE
 */

/*! 2013-09-18 */

/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */

window.MR=window.MR||{},function(define,require,requirejs){define("lib/BaseComponent",["require","backbone-amd","lodash","ENV","lib/analytics/main"],function(e){var t=e("backbone-amd"),n=e("lodash"),i=e("ENV"),a=e("lib/analytics/main"),o=t.Model.extend({create:function(){},render:function(){},exports:{},deprecated:!1,constructor:function(e){if(t.Model.apply(this,arguments),this.deprecated&&window.MR&&MR.spaceConfig&&"dev"===MR.spaceConfig.env&&window.console&&window.console.warn){var n=e&&e.type?e.type:this.get("id"),i="The '"+n+"' component version you're using is "+"deprecated! Upgrade it to the latest version to get new "+"features and improvements. See "+"https://github.com/MassRelevance/builder-sdk/tree/master/dev/components "+"for all available components and versions.";setTimeout(function(){window.console.warn(i)},5e3)}},initialize:function(){var e=this.get("config")||{},t=this.get("id");this.set("dispatcher",i.scope(t,e.type)),this.set("analytics",new a({scope:"component",componentID:t,componentType:e.type}));var n=this.styles;n&&n.render&&n.render(e)},hasElement:function(){var e=this.get("config")||{};return!(!e.$el||!e.$el.length)}}),r=o.extend;return o.extend=function(){var e=r.apply(o,arguments);return e.exports=function(){var t=n.extend({},e.prototype.exports);return t.create=function(t,i){var a={id:t,config:i},o=new e(a),r=o.create();return n.extend({},a,r,{render:function(){o.render()}})},t},e},o}),define("components/sponsor-bar-1/models/SponsorBarModel",["require","lodash","backbone-amd"],function(e){var t=e("lodash"),n=e("backbone-amd"),i=n.Model.extend({defaults:{url:"",image_url:"",width:""},initialize:function(e){this.set(t.extend({},this.defaults,t.pick(e.config,t.keys(this.defaults))))}});return i}),function(){var e=function(){function e(e){return e=e||"",/^\//.test(e)||(e=(t[""]||"/static/")+e),Object.prototype.hasOwnProperty.call(t,e)?t[e]:/^\/[^/]/.test(e)?n+e:e}var t={"/components/photo-share-button-2/static/loader.gif":"//massrel-all.massrel.io/static/loader.806ea8a06eb29c46cd9526449bae2fe4f5bb3f32.gif","/bower_components/slick/slick/ajax-loader.gif":"//massrel-all.massrel.io/static/ajax-loader.cbaaf95d6d5deeba0a91daf32211cf2322a6b17a.gif","/bower_components/background-size-polyfill/backgroundsize.htc":"//massrel-all.massrel.io/static/backgroundsize.b2ff01ef7655fd1530917b80515fd9e0314b61a7.htc","/bower_components/background-size-polyfill/backgroundsize.min.htc":"//massrel-all.massrel.io/static/backgroundsize.min.b0d1854ee9ebbd813a6b51f532ee73e0ce8efd51.htc","/bower_components/background-size-polyfill/src/intro.htc":"//massrel-all.massrel.io/static/intro.0c14d48d70564e8ffa48ee33e2921b8218db405d.htc","/bower_components/background-size-polyfill/src/outro.htc":"//massrel-all.massrel.io/static/outro.36f6a8a39a184d57a5702cadd67b724349a169ce.htc","/bower_components/background-size-polyfill/src/outro.min.htc":"//massrel-all.massrel.io/static/outro.min.a1b29828ed01b4cbb8f535ed4f043533546d6fc6.htc","/bower_components/background-size-polyfill/images/pattern.png":"//massrel-all.massrel.io/static/pattern.9b07f090653ce990ab10dfedcf1a96691b3bacc0.png","/bower_components/q/q.png":"//massrel-all.massrel.io/static/q.258d66f8de01d842f625aa30760a1e554be8c5e5.png","/bower_components/background-size-polyfill/images/algeria.jpg":"//massrel-all.massrel.io/static/algeria.8fba62617211caf29109e87ce78891879722f7b9.jpg","/bower_components/background-size-polyfill/images/algerian1.jpg":"//massrel-all.massrel.io/static/algerian1.5367f7f1990e616e0d250f33f514c61efab22bb2.jpg","/bower_components/background-size-polyfill/images/algerian2.jpg":"//massrel-all.massrel.io/static/algerian2.c16f28605fe02294c344952bdd85d447cf28ea41.jpg","/bower_components/background-size-polyfill/images/jar1.jpg":"//massrel-all.massrel.io/static/jar1.81059f90ef0f79d947601a5b35d874920dd502f6.jpg","/bower_components/background-size-polyfill/images/jar2.jpg":"//massrel-all.massrel.io/static/jar2.494a9249331a960aed0b0a587dad07adf0697c4d.jpg","/bower_components/background-size-polyfill/images/parthenon.jpg":"//massrel-all.massrel.io/static/parthenon.41f0bb0e566a150afca4c169b035eb1423b418ff.jpg","/bower_components/background-size-polyfill/images/propylaea.jpg":"//massrel-all.massrel.io/static/propylaea.99b5c36e446ffa9bd712d04b50ddd271516829c7.jpg","/bower_components/slick/slick/fonts/slick.eot":"//massrel-all.massrel.io/static/slick.2dc80ee445f351c8c621d093f9d8e2a0e631217c.eot","/bower_components/socialite-0/fonts/socialite-0-10-0.eot":"//massrel-all.massrel.io/static/socialite-0-10-0.e0b6d033433fc63db4fd0d1c748202fa2a7f31e3.eot","/bower_components/socialite/fonts/socialite-1-3-0.eot":"//massrel-all.massrel.io/static/socialite-1-3-0.60376793ec647da389365bf925042ccc224ea06b.eot","/bower_components/slick/slick/fonts/slick.ttf":"//massrel-all.massrel.io/static/slick.edd0d35f739ec686c398e773c644bcc05f73e5f6.ttf","/bower_components/socialite-0/fonts/socialite-0-10-0.ttf":"//massrel-all.massrel.io/static/socialite-0-10-0.a07d1d52df74a641e6d76bd0cce050290acd2395.ttf","/bower_components/socialite/fonts/socialite-1-3-0.ttf":"//massrel-all.massrel.io/static/socialite-1-3-0.d527c56c03e60766243f2c71005715f8fdcf4e7b.ttf","/bower_components/slick/slick/fonts/slick.woff":"//massrel-all.massrel.io/static/slick.27f38483a2a6a9a19cd7571b6158edcfd292b8a1.woff","/bower_components/socialite-0/fonts/socialite-0-10-0.woff":"//massrel-all.massrel.io/static/socialite-0-10-0.4443caa85e461cf7a2a4c590e9027f9f050b06e0.woff","/bower_components/socialite/fonts/socialite-1-3-0.woff":"//massrel-all.massrel.io/static/socialite-1-3-0.b4e92c7d1a1065d164bf50e0dd0d54e7e55c4d9f.woff","/bower_components/q/q.svg":"//massrel-all.massrel.io/static/q.d9845f22bbf9fdc8f4a44850d38de16bdf882062.svg","/bower_components/slick/slick/fonts/slick.svg":"//massrel-all.massrel.io/static/slick.17f63c6f6131389462ba3d814b7ddf83344705f9.svg","/bower_components/socialite-0/fonts/socialite-0-10-0.svg":"//massrel-all.massrel.io/static/socialite-0-10-0.ee4be9874092bb6798559770bee8a96b96683771.svg","/bower_components/socialite/fonts/socialite-1-3-0.svg":"//massrel-all.massrel.io/static/socialite-1-3-0.dc31ca70d9d082bbff62cf46382b56809b150319.svg","/static/img/video-play.png":"//chase-trial.massrel.io/template-static-a139be124a05ee5aa51b63fd038ed0c6467d27dd/img/video-play.png","/static/js/css3-mediaqueries.js":"//chase-trial.massrel.io/template-static-a139be124a05ee5aa51b63fd038ed0c6467d27dd/js/css3-mediaqueries.js","/static/js/html5-shiv.js":"//chase-trial.massrel.io/template-static-a139be124a05ee5aa51b63fd038ed0c6467d27dd/js/html5-shiv.js","/static/js/index.js":"//chase-trial.massrel.io/template-static-a139be124a05ee5aa51b63fd038ed0c6467d27dd/js/index.js","":"//chase-trial.massrel.io/template-static-a139be124a05ee5aa51b63fd038ed0c6467d27dd/"},n="";return e.setPrefix=function(e){n=e},e},t=e();"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("staticPath",[],function(){return t}):module.exports=t,"object"==typeof MR&&(MR.staticPath=t)}(),define("templateCompiler",["require","lodash","TemplateStore","staticPath"],function(e){var t=e("lodash"),n=e("TemplateStore"),i=e("staticPath"),a={staticPath:i},o=function(e){return function(i){i=i||{};var o=e.fn;if(e.metadata.customizable){var r=n.get(this.componentId&&this.componentId(),this.componentType&&this.componentType(),e.name);o=r||o}var s=t.merge({},a,i),l=Array.prototype.slice.call(arguments);return l[0]=s,o.apply(null,l)}};return{compile:o}}),define("tmpl",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("tmpl!sponsor-bar",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<a href="'+__e(url)+'">\n  <div class="sponsor-bar">\n    <img src="'+__e(image_url)+'" style="width: '+__e(width)+'">\n  </div>\n</a>';return __p},metadata:{customizable:!0},name:"sponsor-bar"})}),define("components/sponsor-bar-1/views/SponsorBarView",["require","lodash","lib/views/BaseView","tmpl!sponsor-bar"],function(e){var t=e("lodash"),n=e("lib/views/BaseView"),i=e("tmpl!sponsor-bar"),a=n.extend({className:"sponsor-bar",template:i,events:{click:"trackAnalyticsClick"},initialize:function(){this.listenTo(this.model,"change",t.bind(this.render,this))},trackAnalyticsClick:function(e){var t=e.target.closest("a").href;return this.analytics().trackEvent({category:"viz:sponsor",action:t}),this}});return a}),define("componentStyle",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("componentStyle!sponsor-bar-1",{render:function(){}}),define("components/sponsor-bar-1/main",["require","jquery","lib/BaseComponent","components/sponsor-bar-1/models/SponsorBarModel","components/sponsor-bar-1/views/SponsorBarView","componentStyle!sponsor-bar-1"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("components/sponsor-bar-1/models/SponsorBarModel"),a=e("components/sponsor-bar-1/views/SponsorBarView"),o=e("componentStyle!sponsor-bar-1");return n.extend({styles:o,create:function(){var e=this.get("id"),n=this.get("config"),o=this.get("dispatcher"),r=new i({id:e,dispatcher:o,config:n.settings}),s=new a({analytics:this.get("analytics"),el:t("#"+e),componentId:e,componentType:n.type,model:r});return this.set("model",r),this.set("view",s),{model:r,view:s}},render:function(){if(this.hasElement()){this.get("view").render();var e=this.attributes.config.settings.image_url.length;0===e&&t(".sponsor-bar").find("img").remove()}}}).exports()}),define("components/modal-2/models/ModalModel",["require","lodash","backbone-amd"],function(e){var t=e("lodash"),n=e("backbone-amd"),i=n.Model.extend({defaults:{open:!1,model:null,View:null},initialize:function(e){this.id=e.id,this.config=e.config,this.dispatcher=e.dispatcher,this.set(t.extend({},this.defaults,t.pick(e.config,t.keys(this.defaults))))},show:function(e,t){if(!e&&t||!t&&e)throw new Error("Modal#show requires both a model and a view, or neither!");return e&&t&&this.set({model:e,View:t}),this.toggle(!0),this},hide:function(){return this.toggle(!1),this},toggle:function(e){return e=0===arguments.length?!this.get("open"):!!e,this.set("open",e),this}});return i}),define("tmpl!modal-content",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+='<div class="modal-content">\n  <i class="mr-action-click modal-close icon-close-x" data-action="close"></i>\n  '+(null==(__t=subview("modal-content",model))?"":__t)+"\n</div>\n";return __p},metadata:{customizable:!0},name:"modal-content"})}),define("components/modal-2/views/ModalView",["require","lodash","jquery","lib/views/BaseView","tmpl!modal-content"],function(e){var t=e("lodash"),n=e("jquery"),i=e("lib/views/BaseView"),a=e("tmpl!modal-content"),o=i.extend({template:a,classes:{modal_open:"modal-open"},subviews:{"modal-content":null},events:{click:"handleClose","click .modal-close":"handleClose"},initialize:function(){this._escapeCloseHandler=t.bind(this.handleEscapeClose,this),n(document).on("keydown",this._escapeCloseHandler),this.listenTo(this.model,"change:open",this.toggleOpen),this.listenTo(this.model,"change:open",this._removeSubviewsIfClosed)},_updateSubview:function(e){return this.subviews["modal-content"]=e,this},_removeSubviewsIfClosed:function(){return this.model.get("open")||t.each(this.renderedSubviews,function(e){e.remove()}),this},handleClose:function(e){return e.target===e.currentTarget&&(e.preventDefault(),this.model.hide()),this},handleEscapeClose:function(e){var t=e.keyCode||e.which;27===t&&this.model.hide()},toggleOpen:function(e){return this.$el.toggleClass(this.classes.modal_open,e),this.render(),this.dispatcher().trigger(this.model.get("open")?"open":"close"),this.analytics().trackEvent({category:this.model.get("open")?"viz:expand":"viz:collapse",action:"modal"}),this},remove:function(){return n(document).off("keydown",this._escapeCloseHandler),this},render:function(){return(this.model.get("open")||!this._rendered)&&(this._updateSubview(this.model.get("View")),i.prototype.render.apply(this,arguments),this._rendered=!0),this},replaceSubviews:function(e,t){e.replaceWith(t.$el),t.render()},renderTemplate:function(e){if(this.template){var t=n("<div>").html(this.template(e));this.$el.empty().append(t.contents()),this.renderSubviews(this.$el)}}});return o}),define("componentStyle!modal-2",{render:function(){}}),define("components/modal-2/main",["require","jquery","./models/ModalModel","./views/ModalView","lib/BaseComponent","componentStyle!modal-2"],function(e){var t=e("jquery"),n=e("./models/ModalModel"),i=e("./views/ModalView"),a=e("lib/BaseComponent"),o=e("componentStyle!modal-2");return a.extend({styles:o,create:function(){var e=this.get("id"),a=this.get("config"),o=this.get("dispatcher"),r=new n({dispatcher:o,config:a.settings}),s=new i({analytics:this.get("analytics"),dispatcher:o,el:t("#"+e),componentId:e,componentType:a.type,model:r});return this.set("model",r),this.set("view",s),o.on("#"+e+":show",function(e){var t=e&&e.payload?e.payload:{};r.show(t.model,t.View)}),{model:r,view:s}}}).exports()}),define("massrel-js-backbone-2/backbone",["require","backbone-amd"],function(e){var t=e("backbone-amd");return(window["massrel-js-backbone"]||window).Backbone||t}),define("massrel-js-backbone-2/MediaModel",["require","./backbone","lodash"],function(e){var t=e("./backbone"),n=e("lodash");return t.Model.extend({defaults:function(){return{type:{},size:"large",provider:{},providerName:"",photo_urls:{},embed_url:"",embed_html:"",caption:"",description:"",link:"",duration:0,videos:{}}},toJSON:function(){var e=t.Model.prototype.toJSON.apply(this,arguments);if(e.size&&e.photo_urls[e.size])e.photo_url=e.photo_urls[e.size].url;else{var i=n.first(n.values(e.photo_urls));e.photo_url=i?i.url:""}return e}})}),define("massrel-js/globals",{host:"api.massrelevance.com",timeout:1e4,protocol:"https:"===document.location.protocol?"https":"http",min_poll_interval:5e3,max_backoff_interval:6e4,backoff_rate:1.8,jsonp_param:"jsonp"}),define("massrel-js/helpers",["./globals"],function(e){var t={},n=encodeURIComponent;t.step_through=function(e,n,i){e=t.is_array(e)?e:[e];var a=e.length-1;if(a>=0)for(;a>=0;a--)for(var o=e[a],r=0,s=n.length;s>r;r++)n[r].call(i,o)},t.extend=function(e,t){var n;for(n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e},t.api_url=function(t,n){n=n||e.host;var i=e.port,a=e.protocol+"://"+n+(i?":"+i:"");return a+t},t.req={},t.req.supportsXhr2=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,t.req.supportsCors=t.req.supportsXhr2||"XDomainRequest"in window,t.req.supportsJSON="JSON"in window,t.req.xdr=function(n,i,a,o,r,s,l,u){var c,d,p=!1;l||(l="GET");var h=function(e){p=!0;var n,i=!1;try{n=JSON.parse(e)}catch(a){i=!0,f(new Error("JSON parse error"))}i||("function"==typeof r?r(n):t.is_array(r)&&r.length>0&&t.step_through(n,r,o))},f=function(e){p=!0,"function"==typeof s&&s(e)};window.XMLHttpRequest&&t.req.supportsXhr2?c=new XMLHttpRequest:window.XDomainRequest&&(c=new XDomainRequest),c?(c.open(l,n+"?"+t.to_qs(i)),c.timeout=e.timeout,c.onerror=f,c.onprogress=function(){},c.ontimeout=f,c.onload=function(){h(c.responseText)},c.send(u),d=setTimeout(function(){p||(c.onerror=function(){},c.onprogress=function(){},c.ontimeout=function(){},c.onload=function(){},c.abort&&c.abort(),f())},e.timeout)):f(new Error("CORS not supported"))},t.req.jsonp=function(n,a,o,r,s,l){var u,c=o+ ++i,d=!1;e._json_callbacks[c]=function(n){"function"==typeof s?s(n):t.is_array(s)&&s.length>0&&t.step_through(n,s,r),delete e._json_callbacks[c],d=!0,clearTimeout(u)},a.push([e.jsonp_param,"massrel._json_callbacks."+c]);var p=t.load(n+"?"+t.to_qs(a));u=setTimeout(function(){d||(e._json_callbacks[c]=function(){delete e._json_callbacks[c]},"function"==typeof l&&l(),p.stop())},e.timeout)},t.jsonp_factory=t.req.jsonp;var i=0;e._json_callbacks={},t.request_factory=function(e,n,i,a,o,r){t.req.supportsCors&&t.req.supportsJSON?t.req.xdr(e,n,i,a,o,r):t.req.jsonp(e,n,i,a,o,r)},t.post_factory=function(e,n,i,a,o,r,s){if(!t.req.supportsCors||!t.req.supportsJSON)throw"POST not supported";t.req.xdr(e,n,a,o,r,s,"POST",i)},t.is_array=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.is_number=function(e){return"[object Number]"===Object.prototype.toString.call(e)};var a=document.getElementsByTagName("head")[0]||document.body;t.load=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e;var i=!1;return n.onload=n.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,n.onload=n.onreadystatechange=null,a&&n.parentNode&&a.removeChild(n),"function"==typeof t&&t())},a.insertBefore(n,a.firstChild),{stop:function(){n.onload=n.onreadystatechange=null,a&&n.parentNode&&a.removeChild(n),n.src="#"}}},t.to_qs=function(e){var i,a=[];if(e&&e.length){for(var o=0,r=e.length;r>o;o++){if(i=e[o][1],t.is_array(i)){for(var s=[],l=0,u=i.length;u>l;l++)s[l]=n(i[l]||"");i=s.join(",")}else i=void 0!==i&&null!==i?n(i):"";a.push(n(e[o][0])+"="+i)}return a.join("&")}return""};var o=/\+\d{4} \d{4}$/,r=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+\d{4})$/,s=/^(\d{4})-(\d\d)-(\d\d)T(\d\d)\:(\d\d)\:(\d\d)\.(\d{3})Z$/;return t.fix_date=t.fix_twitter_date=function(e){if(e=e.toString(),o.test(e)){e=e.split(" ");var t=e.pop();e.splice(3,0,t),e=e.join(" ")}else r.test(e)?e=e.replace(r,"$1/$2/$3 $4:$5:$6 $7"):s.test(e)&&(e=e.replace(s,"$1/$2/$3 $4:$5:$6 +0000"));return e},t.parse_params=function(e){e=e||window.location.search.substring(1);var t={};if("?"===e.charAt(0)&&(e=e.substring(1)),e.length>0){e=e.replace(/\+/g," ");for(var n=e.split(/[&;]/g),i=0;i<n.length;i++){var a=n[i].split("="),o=decodeURIComponent(a[0]),r=a.length>1?decodeURIComponent(a[1]):"";if(o in t){var s=t[o];"string"!=typeof s?t[o].push(r):(t[o]=[],t[o].push(s),t[o].push(r))}else t[o]=r}}return t},t.poll_interval=function(t){var n=e.min_poll_interval;return Math.max(t||n,n)},t.poll_backoff=function(t,n){var i=e.max_backoff_interval;return i>t&&(n=Math.max(n-1,0),t*=Math.pow(e.backoff_rate,n),t=Math.min(t||i,i)),t},t.callback_group=function(e){e=e||1;var t=0,n=!0,i=function(i,a){return function(){if(n){if(e>=t)return i.apply(a||this,arguments);throw new Error("Callback group max call count exceeded")}}};return i.deactivate=function(){n=!1},i},t.timeParam=function(e,t,n,i){"undefined"!=typeof e&&(e.getTime&&(e=e.getTime()/1e3),e=+e,!isNaN(e)&&e>0?(e=60*Math.floor(e/60),n.push([t,e])):!isNaN(e)&&i&&0>=e&&n.push([t,e]))},t.always=function(e){var t=new $.Deferred;if(void 0===e)return t.resolve(),t.promise();void 0===e.length&&(e=[e]);var n=e.length,i=function(){n--,0===n&&t.resolve()};return $.each(e,function(){this.always(i)}),t.promise()},t}),define("massrel-js/generic_poller_cycle",["./helpers"],function(e){function t(t,n,i){this.cg=e.callback_group(),this.skip=this.cg(t),this.callback=this.cg(n),this.errback=this.cg(i),this._enabled=!0}return t.prototype.enabled=function(){return this._enabled},t.prototype.disable=function(){this.cg.deactivate(),this._enabled=!1},t}),define("massrel-js/generic_poller",["./helpers","./generic_poller_cycle"],function(e,t){function n(i,a){var o,r=this,s=function(){if(c){var a=e.callback_group(),o=a(l),s=function(t){if(r.consecutive_errors=0,n.failure_mode=r.failure_mode=!1,c){for(var i=0,a=r._filters.length;a>i;i++)t=r._filters[i].call(r,t);e.step_through([t],r._listeners,r),c&&o()}},d=function(){r.consecutive_errors+=1,n.failure_mode=r.failure_mode=!0,o(!0)};u=new t(o,s,d),r.fetch(i,r.opts,u)}},l=function(t){var n=e.poll_interval(1e3*r.frequency);t&&(n=e.poll_backoff(n,r.consecutive_errors)),o=setTimeout(s,n)},u=null,c=!1;this._listeners=[],this._filters=[],this.object=i,this.opts=a||{},this.frequency=this.opts.frequency||30,this.alive_count=0,this.consecutive_errors=0,this.failure_mode=!1,this.start=function(){return c||(c=!0,s()),this},this.stop=function(){return u&&(u.disable(),u=null),clearTimeout(o),c=!1,this}}return n.prototype.fetch=function(e,t,n){return e.load(t,n.callback,n.errback),this},n.prototype.data=function(e){return this._listeners.push(e),this},n.prototype.filter=function(e){return this._filters.push(e),this},n.failure_mode=!1,n}),define("massrel-js/poller_queue",["./helpers"],function(e){function t(t,n){function i(){if(!r&&a.length>0&&"function"==typeof o){var e=++s;l.enqueued-=1,l.count+=1;var t=a.shift();r=!0,o.call(l,t,function(){e===s&&(r=!1,setTimeout(i,0))})}}this.poller=t,n=e.extend(n||{},{});var a=[],o=null,r=!1,s=0;this.total=0,this.enqueued=0,this.count=0;var l=this;t.batch(function(e){for(var t=e.length,n=t-1;n>=0;n--)a.push(e[n]);l.total+=t,l.enqueued+=t,i()}),this.next=function(e){r||"function"!=typeof e||(o=e,i())}}return t}),define("massrel-js/poller",["./helpers","./generic_poller","./poller_queue"],function(e,t,n){function i(e,n){t.call(this,e,n),this.stream=this.object,this.filter(this.filter_newer),n=this.opts,this.newest_timestamp=n.newest_timestamp||null,this.stay_realtime="stay_realtime"in n?!!n.stay_realtime:!0,this.hail_mary_mode=!!n.hail_mary_mode,this.first=!0}return e.extend(i.prototype,t.prototype),i.prototype.fetch=function(t,n,i){var a=this,o={start_id:null},r=this.stay_realtime?"since_id":"from_id";return o[r]=a.since_id,n=e.extend({},n),this.first&&(n=e.extend(n.initial||{},n),delete n.initial),o=e.extend(o,n),this.cursorable()||delete o.since_id,t.load(o,function(e){i.enabled()&&(e&&e.length>0&&(a.since_id=e[0].entity_id,a.start_id||(a.start_id=e[e.length-1].entity_id)),i.callback(e),o.timeframe&&a.first&&a.stop(),a.first=!1)},i.errback),this},i.prototype.batch=function(e){return this.data(i.createEnumerator(e,!1))},i.prototype.each=function(e){return this.data(i.createEnumerator(e,!0))},i.prototype.queue=function(e){var t=new n(this);return t.next(e),this},i.prototype.more=function(t,n){var i=this,a=function(){i.object.load(e.extend({start_id:i.start_id,since_id:null},i.opts),function(e){e.length>0&&(i.start_id=e[e.length-1].entity_id,i.since_id||(i.since_id=e[0].entity_id)),t.call(i,e)},function(){"function"==typeof n&&n()})};return a(),this},i.prototype.cursorable=function(){return!(t.failure_mode||this.failure_mode||this.hail_mary_mode)},i.prototype.filter_newer=function(e){return e=i.filter_newer(e,this.newest_timestamp),e&&e.length>0&&(this.newest_timestamp=e[0].queued_at),e},i.prototype.poke=function(){return this},i.createEnumerator=function(t,n){return n?function(n){n&&n.length>0&&e.step_through(n,[t],this)}:function(e){e&&e.length>0&&t.call(this,e)}},i.filter_newer=function(e,t){var n="queued_at";if(e&&e.length>0){var i=this.limit||1/0;if(t)if(e[0][n]<=t)e=[];else if(e[e.length-1][n]>t)e.length>i&&e.splice(this.limit,e.length-i);else{for(var a=[],o=0,r=e.length;r>o&&a.length<i;o++){var s=e[o];if(!(s[n]>t))break;a.push(s)}e=a}else e.length>i&&e.splice(this.limit,e.length-i)}return e},i}),define("massrel-js/meta_poller",["./helpers","./generic_poller"],function(e,t){function n(){t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return e.meta(t,n.callback,n.errback),this},n.prototype.each=n.prototype.data,n}),define("massrel-js/top_things_poller",["./helpers","./generic_poller"],function(e,t){function n(e,n){n.thing=n.thing||"hashtags","number"==typeof n.resolution&&(n.resolution=n.resolution+"s"),t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return"number"==typeof t.resolution&&(t.resolution=t.resolution+"s"),e.topThings(t,n.callback,n.errback),this},n.mostRecentBucket=function(e){if(e.data&&e.data.length>0){for(var t=e.data.length-1;t>=0;t--)if(e.data[t].things&&e.data[t].things.length>0)return e.data[t];if(-1===t)return e.data[e.data.length-1]}return null},n.prototype.each=n.prototype.data,n}),define("massrel-js/stream_keyword_insights",["./helpers","./generic_poller"],function(e,t){function n(e,t){this.stream=e,this.defaults=t||{}}return n.prototype.url=function(){return this.stream.keyword_insights_url()},n.prototype.fetch=function(t,n,i){t=e.extend({},t||{}),t=e.extend(t,this.defaults);var a=this.params(t);return e.request_factory(this.url(),a,"_",this,function(){"function"==typeof n&&n.apply(this,arguments)},i),this},n.prototype.poller=function(e){var n=new t(this,e);return n.fetch=function(e,t,n){return e.fetch(t,n.callback,n.errback)},n},n.prototype.params=function(e){e=e||{};var t=[];return e.topics&&t.push(["topics","1"]),"start"in e&&t.push(["start",e.start]),"finish"in e&&t.push(["finish",e.finish]),e.resolution&&t.push(["resolution",e.resolution]),e.countries&&t.push(["countries",e.countries]),t},n}),define("massrel-js/stream_activity",["./helpers","./generic_poller"],function(e,t){function n(e,t){this.stream=e,this.defaults=t||{}}var i=encodeURIComponent;n.prototype.url=function(){return e.api_url("/"+i(this.stream.account)+"/"+i(this.stream.stream_name)+"/activity.json")},n.prototype.fetch=function(t,n,i){t=e.extend({},t||{}),t=e.extend(t,this.defaults);var a=this.params(t);return e.request_factory(this.url(),a,"_",this,function(i){if(i&&(!t.verbose||"0"===t.verbose)&&e.is_array(i.activity))for(var a=i.activity,o=0,r=a.length;r>o;o++){var s=i.start+i.period_size*o;a[o]=e.extend(a[o],{start:s,finish:Math.min(s+i.period_size,i.finish)})}"function"==typeof n&&n.apply(this,arguments)},i),this},n.prototype.poller=function(e){var n=new t(this,e);return n.fetch=function(e,t,n){return e.fetch(t,n.callback,n.errback)},n},n.prototype.params=function(t){t=t||{};var n=[];return t.view?n.push(["view",t.view]):t.topic&&n.push(["topic",t.topic]),e.timeParam(t.start,"start",n,!0),e.timeParam(t.finish,"finish",n,!0),"periods"in t&&n.push(["periods",t.periods]),t.resolution&&n.push(["resolution",t.resolution]),"tz_offset"in t&&n.push(["tz_offset",t.tz_offset]),t.encode&&n.push(["encode",t.encode]),n.push(["verbose",0]),n};var a=function(e,t,i){n.prototype[e]=function(){return this.defaults[t]=i,this}};return a("approved","view","approved"),a("pending","view","pending"),a("rejected","view","rejected"),a("minutes","resolution","1m"),a("ten_minutes","resolution","10m"),a("hours","resolution","1h"),a("days","resolution","1d"),n}),define("massrel-js/stream",["./helpers","./poller","./meta_poller","./top_things_poller","./stream_keyword_insights","./stream_activity"],function(e,t,n,i,a,o){function r(){var e=1===arguments.length?arguments[0].split("/"):arguments;this.account=e[0],this.stream_name=e[1],this._enumerators=[]}var s=encodeURIComponent;return r.prototype.stream_url=function(){return e.api_url("/"+s(this.account)+"/"+s(this.stream_name)+".json")},r.prototype.meta_url=function(){return e.api_url("/"+s(this.account)+"/"+s(this.stream_name)+"/meta.json")},r.prototype.top_things_url=function(t){return e.api_url("/"+s(this.account)+"/"+s(this.stream_name)+"/top_"+t+".json")},r.prototype.keyword_insights_url=function(){return e.api_url("/"+s(this.account)+"/"+s(this.stream_name)+"/keyword_insights.json")},r.prototype.load=function(t,n,i){t=e.extend(t||{},{});var a=this.buildParams(t);return e.request_factory(this.stream_url(),a,"_",this,n||this._enumerators,i),this},r.prototype.buildParams=function(t){t=t||{};var n=[];return t.limit&&n.push(["limit",t.limit]),t.since_id?n.push(["since_id",t.since_id]):t.from_id?n.push(["from_id",t.from_id]):(t.start_id||t.start)&&n.push(["start",t.start_id||t.start]),t.replies&&n.push(["replies","1"]),t.geo_hint&&n.push(["geo_hint","1"]),t.from&&n.push(["from",t.from]),t.keywords&&n.push(["keywords",t.keywords]),t.lang&&n.push(["lang",t.lang]),t.network&&n.push(["network",t.network]),t.timeline_search&&n.push(["timeline_search","1"]),t.page_links&&n.push(["page_links","1"]),t.klout&&n.push(["klout","1"]),t.timeframe&&(e.timeParam(t.timeframe.start,"timeframe[start]",n),e.timeParam(t.timeframe.finish,"timeframe[finish]",n)),n},r.prototype.each=function(e){return this._enumerators.push(e),this},r.prototype.poller=function(e){return new t(this,e)},r.prototype.meta=function(){var t,n,i;if("function"==typeof arguments[0])n=arguments[0],i=arguments[1],t={};else{if("object"!=typeof arguments[0])throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],i=arguments[2]}var a=this.buildMetaParams(t);return e.request_factory(this.meta_url(),a,"meta_",this,n,i),this},r.prototype.buildMetaParams=function(e){e=e||{};var t=[];return e.disregard&&t.push(["disregard",e.disregard]),e.num_minutes&&t.push(["num_minutes",e.num_minutes]),e.num_hours&&t.push(["num_hours",e.num_hours]),e.num_days&&t.push(["num_days",e.num_days]),e.num_trends&&t.push(["num_trends",e.num_trends]),e.num_links&&t.push(["num_links",e.num_links]),e.num_hashtags&&t.push(["num_hashtags",e.num_hashtags]),e.num_contributors&&t.push(["num_contributors",e.num_contributors]),e.top_periods&&t.push(["top_periods",e.top_periods]),e.top_periods_relative&&t.push(["top_periods_relative",e.top_periods_relative]),e.top_count&&t.push(["top_count",e.top_count]),e.finish&&t.push(["finish",e.finish]),e.networks&&t.push(["networks","1"]),(e.activity||0===e.activity)&&t.push(["activity",e.activity]),t},r.prototype.metaPoller=function(e){return new n(this,e)},r.prototype.keywordInsights=function(e){return new a(this,e)},r.prototype.topThings=function(){var t,n,i;if("function"==typeof arguments[0])n=arguments[0],i=arguments[1],t={};else{if("object"!=typeof arguments[0])throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],i=arguments[2]}var a=this.buildTopThingsParams(t);return e.request_factory(this.top_things_url(t.thing),a,"top_things_",this,n,i),this},r.prototype.buildTopThingsParams=function(t){t=t||{};var n=[];if(t.resolution){var i;i=e.is_number(t.resolution)?t.resolution+"s":t.resolution,n.push(["resolution",i])}return t.start&&n.push(["start",t.start]),t.finish&&n.push(["finish",t.finish]),t.limit&&n.push(["limit",t.limit]),t.percent&&n.push(["percent","1"]),n},r.prototype.topThingsPoller=function(e){return new i(this,e)},r.prototype.activity=function(e){return new o(this,e)},r}),define("massrel-js/account",["./helpers","./meta_poller"],function(e,t){function n(e){this.user=e}var i=encodeURIComponent;return n.prototype.meta_url=function(){return e.api_url("/"+i(this.user)+".json")},n.prototype.meta=function(){var t,n,i;if("function"==typeof arguments[0])n=arguments[0],i=arguments[1],t={};else{if("object"!=typeof arguments[0])throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],i=arguments[2]}var a=this.buildMetaParams(t);return e.request_factory(this.meta_url(),a,"meta_",this,n,i),this},n.prototype.buildMetaParams=function(t){t=t||{};var n=[];if(t.quick_stats&&n.push(["quick_stats","1"]),t.streams){var i=e.is_array(t.streams)?t.streams:[t.streams];n.push(["streams",i.join(",")])}return t.num_minutes&&n.push(["num_minutes",t.num_minutes]),t.num_trends&&n.push(["num_trends",t.num_trends]),t.start&&n.push(["start",t.start]),t.finish&&n.push(["finish",t.finish]),n},n.prototype.metaPoller=function(e){return new t(this,e)},n.prototype.toString=function(){return this.user},n}),define("massrel-js/context",["./helpers"],function(e){function t(e){this.status=e,this.source={facebook:!1,twitter:!1,getglue:!1,google:!1,instagram:!1,rss:!1,message:!1},this.known=!1,this.intents=!0}return t.create=function(n,i){n=n||{};var a=new t(n);return i=e.extend(i||{},{intents:!0,retweeted_by:!0}),a.intents=i.intents,"undefined"!=typeof a.source[n.network]&&(a.source[n.network]=a.known=!0,a.sourceName=n.network),"google_plus"===n.network&&(a.source.google=a.known=!0,a.sourceName="google"),"massrelevance"===n.network&&(a.source.message=a.known=!0,a.sourceName="message"),a.source.twitter&&n.retweeted_status&&i.retweeted_by&&(a.retweet=!0,a.retweeted_by_user=n.user,a.status=n.retweeted_status),a},t.prototype.getPhotoUrl=function(){if(void 0!==this.photo_url)return this.photo_url;var e=!1;if(this.status&&this.known)if(this.source.twitter)if(this.status.entities.media&&this.status.entities.media.length){var t=this.status.entities.media[0];
e={url:t.media_url,width:t.sizes.medium.w,height:t.sizes.medium.h,link_url:t.url||t.expanded_url}}else this.status.entities.urls&&this.status.entities.urls.length&&(e={url:this.status.entities.urls[0].expanded_url||this.status.entities.urls[0].url});else this.source.facebook&&(this.status.type&&"photo"===this.status.type||this.status.kind&&"photo"===this.status.kind)?e={url:this.status.picture.replace(/_[st]./,"_n.")}:this.source.google&&this.status.object.attachments.length&&"photo"===this.status.object.attachments[0].objectType?e={url:this.status.object.attachments[0].fullImage.url}:this.source.instagram&&"image"===this.status.type&&(e={url:this.status.images.standard_resolution.url});return this.photo_url=e,e},t}),define("massrel-js/compare_poller",["./helpers","./generic_poller"],function(e,t){function n(){t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return e.load(t,n.callback,n.errback),this},n.prototype.each=n.prototype.data,n}),define("massrel-js/compare",["./helpers","./compare_poller"],function(e,t){function n(t){this.streams=e.is_array(t)?t.slice(0):"string"==typeof t?[t]:[]}return n.prototype.compare_url=function(){return e.api_url("/compare.json")},n.prototype.buildParams=function(e){var t=[];return e=e||{},e.streams&&t.push(["streams",e.streams]),(e.target||e.target>=0)&&t.push("target",e.target.toString()),t},n.prototype.load=function(t,n,i){"function"==typeof t&&(i=n,n=t,t=null);var a=this.buildParams(e.extend({streams:this.streams},t||{}));return e.request_factory(this.compare_url(),a,"meta_",this,n,i),this},n.prototype.poller=function(e){return new t(this,e)},n}),define("massrel-js/intents",["./helpers"],function(e){var t={base_url:"https://twitter.com/intent/",params:{text:"(string): default text, for tweet/reply",url:"(string): prefill url, for tweet/reply",hashtags:"(string): hashtag (or list with ,) without #, for tweet/reply",related:"(string): screen name (or list with ,) without @, available for all",in_reply_to:"(number): tweet id, only for reply",via:"(string): screen name without @, tweet/reply",tweet_id:"(number): tweet id, for retweet and favorite",screen_name:"(string): only for user/profile",user_id:"(number): only for user/profile",original_referer:'(string): url to display with related ("www.yahoo.com suggests you follow:")'},original_referer:window.top!==window.self&&document.referrer||null};return t.url=function(n,i){if(i=e.extend({},i||{}),void 0===i.original_referer&&t.original_referer&&(i.original_referer=t.original_referer),i.original_referer&&!/^https?:\/\//.test(i.original_referer)&&(i.original_referer="http://"+i.original_referer),i.hashtags&&navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/)){var a=i.text?[i.text]:[];i.url&&(a.push(i.url),delete i.url),a.push("#"+i.hashtags.split(/\s*,\s*/).join(" #").replace(/^\s+|\s+$/gm,"")),delete i.hashtags,i.text=a.join(" ")}var o=[];for(var r in i)o.push([r,i[r]]);return t.base_url+encodeURIComponent(n)+"?"+e.to_qs(o)},t.tweet=function(e){return t.url("tweet",e)},t.reply=function(e,n){return n=n||{},n.in_reply_to=e,t.tweet(n)},t.retweet=function(e,n){return n=n||{},n.tweet_id=e,t.url("retweet",n)},t.favorite=function(e,n){return n=n||{},n.tweet_id=e,t.url("favorite",n)},t.user=function(e,n){return n=n||{},/^\d+$/.test(e+"")?n.user_id=e:n.screen_name=e,t.url("user",n)},t.profile=t.user,t}),define("massrel-js/search",["require","./helpers"],function(e){var t=e("./helpers"),n=function(e){this.apiToken=e};return n.prototype.url=function(){return t.api_url("/search/search.json")},n.prototype.fetch=function(e,n,i){return e=this.buildQueryString(e),t.request_factory(this.url(),e,"_",this,n,i),this},n.prototype.buildQueryString=function(e){var t=[];if("string"==typeof e.q&&t.push(["q",e.q]),e.filters&&(t=t.concat(this.buildParams(e.filters,"filter."))),e.views){var n,i;for(n in e.views)i=e.views[n],"boolean"==typeof i?t.push(["view."+n,i?"1":"0"]):t=t.concat(this.buildParams(i,"view."+n+"."))}return t},n.prototype.buildParams=function(e,n){n=n||"";var i,a,o,r=[];for(i in e)for(a=e[i],t.is_array(a)||(a=[a]),o=0,len=a.length;len>o;o++){var s=a[o];"boolean"==typeof s&&(s=s?"1":"0"),r.push([n+i,s])}return r},n}),define("massrel-js/massrel",["./globals","./helpers","./stream","./account","./stream_keyword_insights","./stream_activity","./generic_poller","./generic_poller_cycle","./poller","./meta_poller","./top_things_poller","./poller_queue","./context","./compare","./compare_poller","./intents","./search"],function(e,t,n,i,a,o,r,s,l,u,c,d,p,h,f,m,g){e.Stream=n,e.Account=i,e.StreamKeywordInsights=a,e.StreamActivity=o,e.GenericPoller=r,e.GenericPollerCycle=s,e.Poller=l,e.MetaPoller=u,e.TopThingsPoller=c,e.PollerQueue=d,e.Context=p,e.Compare=h,e.ComparePoller=f,e.helpers=t,e.intents=m,e.Search=g;var _=t.parse_params();return _["massrel[host]"]&&(e.host=_["massrel[host]"]),e}),define("massrel-js",["massrel-js/massrel"],function(e){return e}),define("embedly/js/main",["jquery","massrel-js"],function(e,t){function n(e){this.data={key:"fd577f7497bf11e0b95d4040d3dc5c07",secure:i,url:e,maxwidth:"500"}}var i="https:"===location.protocol,a="embedly.massrelevance.com",o="d1gbi9ec0ujnws.cloudfront.net",r="//"+(i?o:a)+"/1/";return n.prototype.task=function(n,i){var a=new e.Deferred;return t.helpers.request_factory(r+n,[["key",this.data.key],["secure",this.data.secure?"true":"false"],["url",this.data.url],["maxwidth",this.data.maxwidth]],"_",this,function(e){a.resolve(e),e&&"function"==typeof i&&i(e)},function(){a.reject()}),a.promise()},n.prototype.oembed=function(e){return this.task("oembed",e)},n.prototype.preview=function(e){return this.task("preview",e)},function(e){return new n(e)}}),define("embedly/index",["./js/main"],function(e){return e}),define("embedly",["embedly/index"],function(e){return e}),define("media-meta/js/embedly-widget",["require","lodash"],function(e){var t=e("lodash"),n="//cdn.embedly.com/widgets/media.html?",i={url:"",image:"",video:"",video_secure:"true",type:"video/mp4",schema:"instagram"},a=function(e){var n=[];return t.each(e,function(e,t){n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),n.join("&")},o=t.template('<iframe src="<%= src %>" scrolling="no" frameborder="0"></iframe>');return function(e,r){e=t.extend({},i,e),r=r||{},r.autoplay_video&&(e.autoplay="true"),r.loop_video&&(e.loop="1");var s=n+a(e);return o({src:s})}}),define("placeholder-image-generator/templates/base",["require","lodash"],function(e){var t=e("lodash");return t.template('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="<%= width %>" height="<%= height %>"><rect width="100%" height="100%" fill="<%= color %>"></rect><%= template %></svg>')}),define("placeholder-image-generator/templates/youtube",["require","lodash"],function(e){var t=e("lodash");return t.template('<svg version="1.1" x="<%= (19 / 32) * width %>" y="<%= (5 / 8) * height %>" width="<%= width / 2 %>" height="<%= height / 2%>"      viewBox="0 0 792 1224" enable-background="new 0 0 792 1224"><path fill="#FFFFFF" d="M599.3,594.6c-4.6,0-9.9,2.4-14.6,7.1l0,93.8c4.7,4.7,10,7.1,14.6,7.1c8.1,0,11.7-5.9,11.7-21.4v-66.5    C611,599.2,607.4,594.6,599.3,594.6z"/><path fill="#FFFFFF" d="M297,726h-29.4v-17c-11.1,12.8-20.6,19.2-30.9,19.2c-9,0-15.3-4.3-18.4-12c-1.9-4.7-3.3-12-3.3-22.7V569.8    h29.4v116c0,6.6,0,9.3,0,10.8c0.7,4.3,2.5,5.9,6.3,5.9c5.6,0,10.7-4.9,16.9-13.7V569.8H297L297,726L297,726z"/><path fill="#FFFFFF" d="M164,679.6c1.5,15.5-3.3,23.1-12.4,23.1s-13.9-7.7-12.4-23.1v-61.9c-1.5-15.5,3.2-22.7,12.4-22.7    c9.1,0,13.9,7.3,12.4,22.7L164,679.6L164,679.6z M193.3,620.8c0-16.7-3.4-29.2-9.3-37.1c-7.8-10.7-20.1-15.1-32.5-15.1    c-14,0-24.7,4.4-32.5,15.1c-6,7.9-9.3,20.6-9.3,37.3l0,55.6c0,16.6,2.9,28.1,8.9,35.9c7.8,10.7,20.5,16.3,32.9,16.3    s25.3-5.6,33.1-16.3c5.9-7.8,8.7-19.3,8.7-35.9V620.8L193.3,620.8z"/><path fill="#FFFFFF" d="M77.3,640.9V726H46.4v-85.1c0,0-32.1-104.3-38.7-123.8h32.5l21.7,81.5l21.6-81.5H116L77.3,640.9L77.3,640.9z    "/><g>    <path fill="#FFFFFF" d="M778.1,534c0,0-4.5-31.7-18.4-45.6c-17.6-18.3-37.3-18.4-46.3-19.5c-64.6-4.7-161.6-4.7-161.6-4.7h-0.2        c0,0-97,0-161.6,4.7c-9,1.1-28.7,1.2-46.3,19.5c-13.9,14-18.4,45.6-18.4,45.6s-4.6,37.2-4.6,74.4v34.9c0,37.2,4.6,74.4,4.6,74.4        s4.5,31.7,18.4,45.6c17.6,18.3,40.7,17.7,50.9,19.7c37,3.5,157,4.6,157,4.6s97.1-0.1,161.7-4.8c9-1.1,28.7-1.2,46.3-19.5        c13.8-14,18.4-45.6,18.4-45.6s4.6-37.2,4.6-74.4v-34.9C782.7,571.3,778.1,534,778.1,534z M422.3,726h-30.9V548.1h-32.5v-29.4        l97.5,0v29.4h-34V726z M533.7,726h-29.4v-17c-11.1,12.8-20.6,19.2-30.9,19.2c-9,0-15.3-4.3-18.4-12c-1.9-4.7-3.3-12-3.3-22.7V571.3        h29.4v114.5c0,6.6,0,9.3,0,10.8c0.7,4.3,2.5,5.9,6.3,5.9c5.6,0,10.7-4.9,16.9-13.7V571.3h29.4V726z M640.4,679.6        c0,14.3-1.2,24.4-3.1,30.9c-3.7,11.5-11.9,17.5-23,17.5c-10,0-20.2-6-29.5-17.6l0,15.6h-27.8V518.7h27.8l0,67.6        c9-11.1,19.3-17.5,29.6-17.5c11.2,0,18.6,6.4,22.4,18c1.9,6.2,3.7,16.2,3.7,30.9V679.6z M701.9,702.5c6.9,0,10.9-3.7,12.5-11.2        c0.3-1.5,0.2-8.2,0.2-19.4H744v4.4c0,9-0.7,15.4-1,18.2c-0.9,6.2-3.1,11.8-6.5,16.8c-7.7,11.2-19.2,16.8-33.9,16.8        c-14.7,0-25.8-5.3-33.9-15.8c-5.9-7.7-9.8-19.2-9.8-35.7v-54.1c0-16.5,3.5-29.3,9.4-37.1c8.1-10.6,19.3-16.2,33.5-16.2        c14,0,25.2,5.6,33.1,16.2c5.9,7.8,9.1,19.9,9.1,36.4l0,31.6h-55.7v27.8C688.2,695.4,692.3,702.5,701.9,702.5z"/>    <path fill="#FFFFFF" d="M714.6,613.2c0-14.3-3.7-18.6-13-18.6c-9.4,0-13.3,3.9-13.3,18.4v17.1l26.3,0V613.2z"/></g></svg>')}),define("placeholder-image-generator/js/main",["require","lodash","../templates/base","../templates/youtube"],function(e){var t=e("lodash"),n="data:image/svg+xml;charset=utf-8,",i={width:480,height:360,color:"#333333",template:""},a=e("../templates/base"),o={youtube:e("../templates/youtube")};return function(e){if(e=t.extend({},i,e),""!==e.template){var r=o[e.template];e.template=r?r(e):""}return n+encodeURIComponent(a(e))}}),define("placeholder-image-generator/index",["./js/main"],function(e){return e}),define("placeholder-image-generator",["placeholder-image-generator/index"],function(e){return e}),define("media-meta/js/main",["require","lodash","embedly","q","massrel-js","./embedly-widget","placeholder-image-generator"],function(e){var t=e("lodash"),n=e("embedly"),i=e("q");e("massrel-js");var a=e("./embedly-widget"),o=e("placeholder-image-generator");i.stopUnhandledRejectionTracking();var r={promise:function(e,n){var a,o;return n=t.extend({},s,n),e&&t.isFunction(k[e.sourceName])?o=k[e.sourceName](e,n):(a=i.defer(),a.reject(),o=a.promise),o},embedlyPromise:function(e,a){var r=i.defer();if(a&&!a.use_embedly)r.reject();else{var s=[];n(e).preview().then(function(e){if(!e.error_code&&e.object){var n=q(e.object.type),i=w(e.provider_name);if(n.photo||n.video){var l={};!i.youtube||e.images&&e.images.length||(e.images=[{caption:null,height:360,size:16076,url:o({width:480,height:360,template:"youtube"}),width:480}]),e.images&&e.images.length&&t.each(p,function(t){l[t]=e.images[0]});var u={type:n,provider:i,providerName:d[e.provider_name]||e.provider_name,photo_urls:l,author:e.author_name};if(n.video&&e.object.html){var c=e.object.html.match(/src=\"(.*?)\"/);if(a.autoplay_video&&c&&c.length>1&&c[1]){var h=c[1]+"&autoplay=true";u.embed_html=e.object.html.replace(c[1],h)}else u.embed_html=e.object.html}s.push(u)}}0===s.length?r.reject():r.resolve(s)}).fail(function(){r.reject()})}return r.promise}},s={autoplay_video:!1,prefetch:!1,loop_video:!1,muted:!1,secure:!1,use_embedly:!0},l={link:!1,video:!1,photo:!1},u={image:"photo",animated_gif:"video",youtube_video_media:"video"},c={vine:!1,twitter:!1,facebook:!1,google:!1,getglue:!1,youtube:!1,instagram:!1,vimeo:!1},d={YouTube:"youtube",Vine:"vine",Twitter:"twitter",Facebook:"facebook",GetGlue:"getglue","Google+":"google",Instagram:"instagram",Vimeo:"vimeo"},p=["huge","large","medium","small","thumb"],h={huge:"_n.",large:"_n.",medium:"_a.",small:"_s.",thumb:"_t."},f={huge:"w1500-h1500",large:"w800-h800",medium:"w400-h400",small:"w200-h200",thumb:"w75-h75"},m={huge:"large",large:"large",medium:"medium",small:"small",thumb:"thumb"},g={huge:"standard_resolution",large:"standard_resolution",medium:"low_resolution",small:"thumbnail",thumb:"thumbnail"},_={huge:"maxres",large:"standard",medium:"high",small:"medium",thumb:"default"},v=/https?:\/\/[^/]*googleusercontent.com\/.*\/w[0-9]+-h[0-9]+\/.*/,b=/https?:\/\/[^/]*fbcdn.*\/[^/]*_[nast]\.[a-zA-Z]+$/,y=/https?:\/\/video.twimg.com\/ext_tw_video\/.*?\/pu\/vid\/(.*?)x(.*?)\/.*?.mp4/,q=function(e,n){var i=e;e=u[e]||e;var a=t.extend({},l);return t.has(a,e)&&(a[e]=!0),n&&n.sourceNetwork&&n.sourceNetwork.facebook&&n.picture&&(a.photo=!0),a._originalType=i,a},w=function(e){e=d[e]||e;var n=t.extend({},c);return t.has(n,e)&&(n[e]=!0),n},x=function(e){return e&&e.user?"https://twitter.com/"+e.user.screen_name+"/status/"+e.id_str:""},k={twitter:function(e,n){var o=!1,s=!1,l=[],u=i.defer();if(e.entities&&(e.entities.media&&e.entities.media.length&&(o=!0,t.each(e.entities.media,function(i){var o,r={},s=q(i.type);if(t.each(m,function(e,t){o=i.sizes[e],r[t]={url:(n.secure?i.media_url_https:i.media_url)+":"+e,short_url:i.url,width:o.w,height:o.h}}),s.photo)l.push({provider:w("twitter"),providerName:"twitter",type:s,link:x(e),photo_urls:r,author:e.user.screen_name});else if(s.video){var u=t(i.video_info.variants).filter(function(e){return"video/mp4"===e.content_type}).map(function(e){var t=r.huge.width,n=r.huge.height,i=y.exec(e.url);return i&&(t=parseInt(i[1],10),n=parseInt(i[2],10)),{url:e.url,content_type:e.content_type,bitrate:e.bitrate,width:t,height:n}}).sortBy(function(e){return e.height*e.width}).reverse().value();"animated_gif"===s._originalType&&(n=t.extend({},n,{loop_video:!0}));var c=a({video:u[0].url,image:r.huge.url,url:x(e)},n);l.push({provider:w("twitter"),providerName:"twitter",type:s,link:x(e),photo_urls:r,embed_html:c,author:e.user.screen_name,duration:i.video_info.duration_millis,video:u})}})),e.entities.urls&&e.entities.urls.length)){o=!0,s=!0;var c=[];t.each(e.entities.urls,function(e){var t=r.embedlyPromise(e.expanded_url,n);c.push(t),t.then(function(e){l=l.concat(e)})}),i.allSettled(c).then(function(){0===l.length?u.reject():(t.each(l,function(t){t.link=x(e)}),u.resolve(l))})}return s||(o&&0!==l.length?u.resolve(l):u.reject()),u.promise},facebook:function(e){var n=i.defer(),a=q(e.type||e.kind,e);if("comment"===e.kind&&e.attachment&&"photo"===e.attachment.type&&(e.picture=e.attachment.media.image.src,a.photo=!0),a.photo||a.link){var o={};if(e.images){var r=t.sortBy(e.images,"height"),s=p.slice().reverse();if(7===r.length)for(var l=[0,1,3,5,6],u=0;u<l.length;u++){var c=s[u],d=r[l[u]];o[c]={url:d.source,height:d.height,width:d.width}}else for(var u=0;u<s.length;u++){var d,c=s[u];d=u<r.length?r[u]:r[r.length-1],o[c]={url:d.source,height:d.height,width:d.width}}}else if(e.picture){var f=e.picture.replace(/v\/(.\/)?t1.0-\d*\/[p|s]\d*x\d*\//,"");f=f.replace(/v?\/t1.0-\d*(\/q\d*)?\/[p|s]\d*x\d*/,""),f=f.replace(/t1.0-\d*\/[p|s]\d*x\d*\//,"");var m=b.test(f);t.each(h,function(e,t){o[t]={url:m?f.replace(/_[nast]\./,e):f}})}var g;g=t.has(e,"from")?e.from.name:e.user.screen_name,n.resolve([{provider:w("facebook"),providerName:"facebook",type:a,photo_urls:o,link:e.link,name:e.name,caption:e.caption,description:e.description,author:g}]),n.author=t.has(e,"from")?e.from.name:e.user.screen_name}else n.reject();return n.promise},instagram:function(e,n){var a=i.defer();if(e.images){var o=q(e.type);if(o.photo||o.video){var s={};t.each(p,function(t){s[t]=e.images[g[t]],s[t].url=s[t].url.replace(/^https?:/,"")});var l=w("instagram"),u="instagram";if(o.photo)a.resolve([{provider:l,providerName:u,type:o,link:e.link,photo_urls:s,author:e.user.username}]);else if(o.video){var c=r.embedlyPromise(e.link,n);c.then(function(e){a.resolve(e)},function(){a.reject()})}}}else a.reject();return a.promise},google:function(e){var n=i.defer(),a=[];if(e.object&&e.object.attachments&&e.object.attachments.length){var o,r,s;t.each(e.object.attachments,function(n){o=q(n.objectType),o.photo&&(s=v.test(n.image.url),r={},t.each(p,function(e){r[e]=s?t.extend({},n.image,{url:n.image.url.replace(/w[0-9]+-h[0-9]+/,f[e])}):t.extend({},n.fullImage,{url:n.fullImage.url})}),a.push({provider:w("google"),providerName:"google",type:o,link:e.url,photo_urls:r,author:e.actor.displayName}))})}return 0===a.length?n.reject():n.resolve(a),n.promise},youtube:function(e,n){var a=i.defer();if(e.snippet){var r,s=q(e.kind),l={};t.each(p,function(t){var n=e.snippet.thumbnails[_[t]];n&&(l[t]=n,l[t].url=l[t].url.replace(/^https?:/,""),r||(r=l[t]))}),t.each(p,function(t){var n=e.snippet.thumbnails[_[t]];n||(l[t]=r,l[t].url=l[t].url.replace(/^https?:/,""))});var u=w("youtube"),c="youtube",d="//www.youtube.com/embed/"+e.youtube_video_id+"?rel=0";n.autoplay_video&&(d+="&autoplay=1");var h=t.map(l,function(e,t){var n=i.defer(),a=new Image;return a.onload=function(){this.width!==e.width&&this.height!==e.height?n.resolve([t,{width:e.width,height:e.height,url:o({width:e.width,height:e.height,template:"youtube"})}]):n.resolve([t,e])},a.src=e.url,n.promise});i.all(h).then(function(n){var i=t.zipObject(n);a.resolve([{provider:u,providerName:c,type:s,link:e.link,photo_urls:i,author:e.channelTitle,embed_url:d}])})}else a.reject();return a.promise},getglue:function(e){var n=i.defer(),a=[];if(e.object){var o=q(e.object.objectType),r={},s=w("getglue"),l="getglue";o.photo?(t.each(p,function(t){r[t]={url:e.object.link}}),a.push({provider:s,providerName:l,type:o,photo_urls:r,link:e.object.link})):o.video&&(t.each(p,function(t){r[t]={url:e.object.image}}),a.push({provider:s,providerName:l,type:o,photo_urls:r,link:e.object.link,author:e.user.username}))}return a.length>0?n.resolve(a):n.reject(),n.promise}};return r}),define("media-meta/index",["./js/main"],function(e){return e}),define("media-meta",["media-meta/index"],function(e){return e}),define("massrel-js-backbone-2/MediaCollection",["./backbone","./MediaModel","media-meta"],function(e,t){return e.Collection.extend({model:t})}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return St.call(e,t)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(e){bt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function o(e,t){var n=!0;return p(function(){return n&&(a(e),n=!1),t.apply(this,arguments)},t)}function r(e,t){_n[e]||(a(t),_n[e]=!0)}function s(e,t){return function(n){return m(e.call(this,n),t)}}function l(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function u(){}function c(e,t){t!==!1&&U(e),h(this,e),this._d=new Date(+e._d)}function d(e){var t=k(e),n=t.year||0,i=t.quarter||0,a=t.month||0,o=t.week||0,r=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*s,this._days=+r+7*o,this._months=+a+3*i+12*n,this._data={},this._locale=bt.localeData(),this._bubble()}function p(e,t){for(var i in t)n(t,i)&&(e[i]=t[i]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t){var n,i,a;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Et.length>0)for(n in Et)i=Et[n],a=t[i],"undefined"!=typeof a&&(e[i]=a);return e}function f(e){return 0>e?Math.ceil(e):Math.floor(e)}function m(e,t,n){for(var i=""+Math.abs(e),a=e>=0;i.length<t;)i="0"+i;return(a?n?"+":"":"-")+i}function g(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function _(e,t){var n;return t=A(t,e),e.isBefore(t)?n=g(e,t):(n=g(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function v(e,t){return function(n,i){var a,o;return null===i||isNaN(+i)||(r(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,a=bt.duration(n,i),b(this,a,e),this}}function b(e,t,n,i){var a=t._milliseconds,o=t._days,r=t._months;i=null==i?!0:i,a&&e._d.setTime(+e._d+a*n),o&&ht(e,"Date",pt(e,"Date")+o*n),r&&dt(e,pt(e,"Month")+r*n),i&&bt.updateOffset(e,o||r)}function y(e){return"[object Array]"===Object.prototype.toString.call(e)}function q(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function w(e,t,n){var i,a=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),r=0;for(i=0;a>i;i++)(n&&e[i]!==t[i]||!n&&C(e[i])!==C(t[i]))&&r++;return r+o}function x(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=cn[e]||dn[t]||t}return e}function k(e){var t,i,a={};for(i in e)n(e,i)&&(t=x(i),t&&(a[t]=e[i]));return a}function S(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}bt[t]=function(a,o){var r,s,l=bt._locale[t],u=[];if("number"==typeof a&&(o=a,a=e),s=function(e){var t=bt().utc().set(i,e);return l.call(bt._locale,t,a||"")},null!=o)return s(o);for(r=0;n>r;r++)u.push(s(r));return u}}function C(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function D(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function F(e,t,n){return st(bt([e,11,31+t-n]),t,n).week}function M(e){return T(e)?366:365}function T(e){return 0===e%4&&0!==e%100||0===e%400}function U(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Dt]<0||e._a[Dt]>11?Dt:e._a[Ft]<1||e._a[Ft]>D(e._a[Ct],e._a[Dt])?Ft:e._a[Mt]<0||e._a[Mt]>24||24===e._a[Mt]&&(0!==e._a[Tt]||0!==e._a[Ut]||0!==e._a[It])?Mt:e._a[Tt]<0||e._a[Tt]>59?Tt:e._a[Ut]<0||e._a[Ut]>59?Ut:e._a[It]<0||e._a[It]>999?It:-1,e._pf._overflowDayOfYear&&(Ct>t||t>Ft)&&(t=Ft),e._pf.overflow=t)}function I(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function j(e){return e?e.toLowerCase().replace("_","-"):e}function E(e){for(var t,n,i,a,o=0;o<e.length;){for(a=j(e[o]).split("-"),t=a.length,n=j(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=P(a.slice(0,t).join("-")))return i;if(n&&n.length>=t&&w(a,n,!0)>=t-1)break;t--}o++}return null}function P(e){var t=null;if(!jt[e]&&Pt)try{t=bt.locale(),require("./locale/"+e),bt.locale(t)}catch(n){}return jt[e]}function A(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(bt.isMoment(e)||q(e)?+e:+bt(e))-+n,n._d.setTime(+n._d+i),bt.updateOffset(n,!1),n):bt(e).local()}function z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function R(e){var t,n,i=e.match(Bt);for(t=0,n=i.length;n>t;t++)i[t]=gn[i[t]]?gn[i[t]]:z(i[t]);return function(a){var o="";for(t=0;n>t;t++)o+=i[t]instanceof Function?i[t].call(a,e):i[t];return o}}function B(e,t){return e.isValid()?(t=O(t,e.localeData()),pn[t]||(pn[t]=R(t)),pn[t](e)):e.localeData().invalidDate()}function O(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Ot.lastIndex=0;i>=0&&Ot.test(e);)e=e.replace(Ot,n),Ot.lastIndex=0,i-=1;return e}function N(e,t){var n,i=t._strict;switch(e){case"Q":return Kt;case"DDDD":return Qt;case"YYYY":case"GGGG":case"gggg":return i?en:Ht;case"Y":case"G":case"g":return nn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?tn:Vt;case"S":if(i)return Kt;case"SS":if(i)return Jt;case"SSS":if(i)return Qt;case"DDD":return Lt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return $t;case"a":case"A":return t._locale._meridiemParse;case"x":return Xt;case"X":return Zt;case"Z":case"ZZ":return Wt;case"T":return Gt;case"SSSS":return Yt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Jt:Nt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Nt;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(Z(X(e.replace("\\","")),"i"))}}function L(e){e=e||"";var t=e.match(Wt)||[],n=t[t.length-1]||[],i=(n+"").match(ln)||["-",0,0],a=+(60*i[1])+C(i[2]);return"+"===i[0]?-a:a}function H(e,t,n){var i,a=n._a;switch(e){case"Q":null!=t&&(a[Dt]=3*(C(t)-1));break;case"M":case"MM":null!=t&&(a[Dt]=C(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),null!=i?a[Dt]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(a[Ft]=C(t));break;case"Do":null!=t&&(a[Ft]=C(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=C(t));break;case"YY":a[Ct]=bt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":a[Ct]=C(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":a[Mt]=C(t);break;case"m":case"mm":a[Tt]=C(t);break;case"s":case"ss":a[Ut]=C(t);break;case"S":case"SS":case"SSS":case"SSSS":a[It]=C(1e3*("0."+t));break;case"x":n._d=new Date(C(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=L(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=C(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=bt.parseTwoDigitYear(t)}}function V(e){var n,i,a,o,r,s,l;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(r=1,s=4,i=t(n.GG,e._a[Ct],st(bt(),1,4).year),a=t(n.W,1),o=t(n.E,1)):(r=e._locale._week.dow,s=e._locale._week.doy,i=t(n.gg,e._a[Ct],st(bt(),r,s).year),a=t(n.w,1),null!=n.d?(o=n.d,r>o&&++a):o=null!=n.e?n.e+r:r),l=lt(i,a,o,s,r),e._a[Ct]=l.year,e._dayOfYear=l.dayOfYear}function Y(e){var n,i,a,o,r=[];if(!e._d){for(a=W(e),e._w&&null==e._a[Ft]&&null==e._a[Dt]&&V(e),e._dayOfYear&&(o=t(e._a[Ct],a[Ct]),e._dayOfYear>M(o)&&(e._pf._overflowDayOfYear=!0),i=it(o,0,e._dayOfYear),e._a[Dt]=i.getUTCMonth(),e._a[Ft]=i.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=r[n]=a[n];for(;7>n;n++)e._a[n]=r[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[Mt]&&0===e._a[Tt]&&0===e._a[Ut]&&0===e._a[It]&&(e._nextDay=!0,e._a[Mt]=0),e._d=(e._useUTC?it:nt).apply(null,r),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[Mt]=24)}}function $(e){var t;e._d||(t=k(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],Y(e))}function W(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function G(t){if(t._f===bt.ISO_8601)return J(t),void 0;t._a=[],t._pf.empty=!0;var n,i,a,o,r,s=""+t._i,l=s.length,u=0;for(a=O(t._f,t._locale).match(Bt)||[],n=0;n<a.length;n++)o=a[n],i=(s.match(N(o,t))||[])[0],i&&(r=s.substr(0,s.indexOf(i)),r.length>0&&t._pf.unusedInput.push(r),s=s.slice(s.indexOf(i)+i.length),u+=i.length),gn[o]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(o),H(o,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(o);t._pf.charsLeftOver=l-u,s.length>0&&t._pf.unusedInput.push(s),t._pf.bigHour===!0&&t._a[Mt]<=12&&(t._pf.bigHour=e),t._isPm&&t._a[Mt]<12&&(t._a[Mt]+=12),t._isPm===!1&&12===t._a[Mt]&&(t._a[Mt]=0),Y(t),U(t)}function X(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,a){return t||n||i||a})}function Z(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(e){var t,n,a,o,r;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(0/0),void 0;for(o=0;o<e._f.length;o++)r=0,t=h({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=i(),t._f=e._f[o],G(t),I(t)&&(r+=t._pf.charsLeftOver,r+=10*t._pf.unusedTokens.length,t._pf.score=r,(null==a||a>r)&&(a=r,n=t));p(e,n||t)}function J(e){var t,n,i=e._i,a=an.exec(i);if(a){for(e._pf.iso=!0,t=0,n=rn.length;n>t;t++)if(rn[t][1].exec(i)){e._f=rn[t][0]+(a[6]||" ");break}for(t=0,n=sn.length;n>t;t++)if(sn[t][1].exec(i)){e._f+=sn[t][0];break}i.match(Wt)&&(e._f+="Z"),G(e)}else e._isValid=!1}function Q(e){J(e),e._isValid===!1&&(delete e._isValid,bt.createFromInputFallback(e))}function et(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function tt(t){var n,i=t._i;i===e?t._d=new Date:q(i)?t._d=new Date(+i):null!==(n=At.exec(i))?t._d=new Date(+n[1]):"string"==typeof i?Q(t):y(i)?(t._a=et(i.slice(0),function(e){return parseInt(e,10)}),Y(t)):"object"==typeof i?$(t):"number"==typeof i?t._d=new Date(i):bt.createFromInputFallback(t)}function nt(e,t,n,i,a,o,r){var s=new Date(e,t,n,i,a,o,r);return 1970>e&&s.setFullYear(e),s}function it(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function at(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ot(e,t,n,i,a){return a.relativeTime(t||1,!!n,e,i)}function rt(e,t,n){var i=bt.duration(e).abs(),a=kt(i.as("s")),o=kt(i.as("m")),r=kt(i.as("h")),s=kt(i.as("d")),l=kt(i.as("M")),u=kt(i.as("y")),c=a<hn.s&&["s",a]||1===o&&["m"]||o<hn.m&&["mm",o]||1===r&&["h"]||r<hn.h&&["hh",r]||1===s&&["d"]||s<hn.d&&["dd",s]||1===l&&["M"]||l<hn.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=n,ot.apply({},c)}function st(e,t,n){var i,a=n-t,o=n-e.day();return o>a&&(o-=7),a-7>o&&(o+=7),i=bt(e).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function lt(e,t,n,i,a){var o,r,s=it(e,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:a,o=a-s+(s>i?7:0)-(a>s?7:0),r=7*(t-1)+(n-a)+o+1,{year:r>0?e:e-1,dayOfYear:r>0?r:M(e-1)+r}}function ut(t){var n,i=t._i,a=t._f;return t._locale=t._locale||bt.localeData(t._l),null===i||a===e&&""===i?bt.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),bt.isMoment(i)?new c(i,!0):(a?y(a)?K(t):G(t):tt(t),n=new c(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function ct(e,t){var n,i;if(1===t.length&&y(t[0])&&(t=t[0]),!t.length)return bt();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function dt(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),D(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function pt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ht(e,t,n){return"Month"===t?dt(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function ft(e,t){return function(n){return null!=n?(ht(this,e,n),bt.updateOffset(this,t),this):pt(this,e)}}function mt(e){return 400*e/146097}function gt(e){return 146097*e/400}function _t(e){bt.duration.fn[e]=function(){return this._data[e]}}function vt(e){"undefined"==typeof ender&&(yt=xt.moment,xt.moment=e?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",bt):bt)}for(var bt,yt,qt,wt="2.8.4",xt="undefined"!=typeof global?global:this,kt=Math.round,St=Object.prototype.hasOwnProperty,Ct=0,Dt=1,Ft=2,Mt=3,Tt=4,Ut=5,It=6,jt={},Et=[],Pt="undefined"!=typeof module&&module&&module.exports,At=/^\/?Date\((\-?\d+)/i,zt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Rt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Bt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Ot=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Nt=/\d\d?/,Lt=/\d{1,3}/,Ht=/\d{1,4}/,Vt=/[+\-]?\d{1,6}/,Yt=/\d+/,$t=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Wt=/Z|[\+\-]\d\d:?\d\d/gi,Gt=/T/i,Xt=/[\+\-]?\d+/,Zt=/[\+\-]?\d+(\.\d{1,3})?/,Kt=/\d/,Jt=/\d\d/,Qt=/\d{3}/,en=/\d{4}/,tn=/[+-]?\d{6}/,nn=/[+-]?\d+/,an=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,on="YYYY-MM-DDTHH:mm:ssZ",rn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],sn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ln=/([\+\-]|\d\d)/gi,un=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),cn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},dn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},pn={},hn={s:45,m:45,h:22,d:26,M:11},fn="DDD w W M D d".split(" "),mn="M D H h m s w W".split(" "),gn={M:function(){return this.month()+1
},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return m(this.year()%100,2)},YYYY:function(){return m(this.year(),4)},YYYYY:function(){return m(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+m(Math.abs(e),6)},gg:function(){return m(this.weekYear()%100,2)},gggg:function(){return m(this.weekYear(),4)},ggggg:function(){return m(this.weekYear(),5)},GG:function(){return m(this.isoWeekYear()%100,2)},GGGG:function(){return m(this.isoWeekYear(),4)},GGGGG:function(){return m(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return C(this.milliseconds()/100)},SS:function(){return m(C(this.milliseconds()/10),2)},SSS:function(){return m(this.milliseconds(),3)},SSSS:function(){return m(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+m(C(e/60),2)+":"+m(C(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+m(C(e/60),2)+m(C(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},_n={},vn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];fn.length;)qt=fn.pop(),gn[qt+"o"]=l(gn[qt],qt);for(;mn.length;)qt=mn.pop(),gn[qt+qt]=s(gn[qt],2);gn.DDDD=s(gn.DDD,3),p(u.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,a,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(a=bt.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=bt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.apply(t,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var a=this._relativeTime[n];return"function"==typeof a?a(e,t,n,i):a.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return st(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),bt=function(t,n,a,o){var r;return"boolean"==typeof a&&(o=a,a=e),r={},r._isAMomentObject=!0,r._i=t,r._f=n,r._l=a,r._strict=o,r._isUTC=!1,r._pf=i(),ut(r)},bt.suppressDeprecationWarnings=!1,bt.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),bt.min=function(){var e=[].slice.call(arguments,0);return ct("isBefore",e)},bt.max=function(){var e=[].slice.call(arguments,0);return ct("isAfter",e)},bt.utc=function(t,n,a,o){var r;return"boolean"==typeof a&&(o=a,a=e),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=a,r._i=t,r._f=n,r._strict=o,r._pf=i(),ut(r).utc()},bt.unix=function(e){return bt(1e3*e)},bt.duration=function(e,t){var i,a,o,r,s=e,l=null;return bt.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(l=zt.exec(e))?(i="-"===l[1]?-1:1,s={y:0,d:C(l[Ft])*i,h:C(l[Mt])*i,m:C(l[Tt])*i,s:C(l[Ut])*i,ms:C(l[It])*i}):(l=Rt.exec(e))?(i="-"===l[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},s={y:o(l[2]),M:o(l[3]),d:o(l[4]),h:o(l[5]),m:o(l[6]),s:o(l[7]),w:o(l[8])}):"object"==typeof s&&("from"in s||"to"in s)&&(r=_(bt(s.from),bt(s.to)),s={},s.ms=r.milliseconds,s.M=r.months),a=new d(s),bt.isDuration(e)&&n(e,"_locale")&&(a._locale=e._locale),a},bt.version=wt,bt.defaultFormat=on,bt.ISO_8601=function(){},bt.momentProperties=Et,bt.updateOffset=function(){},bt.relativeTimeThreshold=function(t,n){return hn[t]===e?!1:n===e?hn[t]:(hn[t]=n,!0)},bt.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return bt.locale(e,t)}),bt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?bt.defineLocale(e,t):bt.localeData(e),n&&(bt.duration._locale=bt._locale=n)),bt._locale._abbr},bt.defineLocale=function(e,t){return null!==t?(t.abbr=e,jt[e]||(jt[e]=new u),jt[e].set(t),bt.locale(e),jt[e]):(delete jt[e],null)},bt.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(e){return bt.localeData(e)}),bt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return bt._locale;if(!y(e)){if(t=P(e))return t;e=[e]}return E(e)},bt.isMoment=function(e){return e instanceof c||null!=e&&n(e,"_isAMomentObject")},bt.isDuration=function(e){return e instanceof d};for(qt=vn.length-1;qt>=0;--qt)S(vn[qt]);bt.normalizeUnits=function(e){return x(e)},bt.invalid=function(e){var t=bt.utc(0/0);return null!=e?p(t._pf,e):t._pf.userInvalidated=!0,t},bt.parseZone=function(){return bt.apply(null,arguments).parseZone()},bt.parseTwoDigitYear=function(e){return C(e)+(C(e)>68?1900:2e3)},p(bt.fn=c.prototype,{clone:function(){return bt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=bt(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():B(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):B(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return I(this)},isDSTShifted:function(){return this._a?this.isValid()&&w(this._a,(this._isUTC?bt.utc(this._a):bt(this._a)).toArray())>0:!1},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=B(this,e||bt.defaultFormat);return this.localeData().postformat(t)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(e,t,n){var i,a,o,r=A(e,this),s=6e4*(this.zone()-r.zone());return t=x(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+r.daysInMonth()),a=12*(this.year()-r.year())+(this.month()-r.month()),o=this-bt(this).startOf("month")-(r-bt(r).startOf("month")),o-=6e4*(this.zone()-bt(this).startOf("month").zone()-(r.zone()-bt(r).startOf("month").zone())),a+=o/i,"year"===t&&(a/=12)):(i=this-r,a="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-s)/864e5:"week"===t?(i-s)/6048e5:i),n?a:f(a)},from:function(e,t){return bt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(bt(),e)},calendar:function(e){var t=e||bt(),n=A(t,this).startOf("day"),i=this.diff(n,"days",!0),a=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this,bt(t)))},isLeapYear:function(){return T(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=at(e,this.localeData()),this.add(e-t,"d")):t},month:ft("Month",!0),startOf:function(e){switch(e=x(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=x(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this>+e):(n=bt.isMoment(e)?+e:+bt(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+e>+this):(n=bt.isMoment(e)?+e:+bt(e),+this.clone().endOf(t)<n)},isSame:function(e,t){var n;return t=x(t||"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this===+e):(n=+bt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),this>e?this:e}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,i=this._offset||0;return null==e?this._isUTC?i:this._dateTzOffset():("string"==typeof e&&(e=L(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==e&&(!t||this._changeInProgress?b(this,bt.duration(i-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,bt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?bt(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(e){var t=kt((bt(this).startOf("day")-bt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=st(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=st(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=st(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return F(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return F(this.year(),e.dow,e.doy)},get:function(e){return e=x(e),this[e]()},set:function(e,t){return e=x(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var n;return t===e?this._locale._abbr:(n=bt.localeData(t),null!=n&&(this._locale=n),this)},lang:o("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),bt.fn.millisecond=bt.fn.milliseconds=ft("Milliseconds",!1),bt.fn.second=bt.fn.seconds=ft("Seconds",!1),bt.fn.minute=bt.fn.minutes=ft("Minutes",!1),bt.fn.hour=bt.fn.hours=ft("Hours",!0),bt.fn.date=ft("Date",!0),bt.fn.dates=o("dates accessor is deprecated. Use date instead.",ft("Date",!0)),bt.fn.year=ft("FullYear",!0),bt.fn.years=o("years accessor is deprecated. Use year instead.",ft("FullYear",!0)),bt.fn.days=bt.fn.day,bt.fn.months=bt.fn.month,bt.fn.weeks=bt.fn.week,bt.fn.isoWeeks=bt.fn.isoWeek,bt.fn.quarters=bt.fn.quarter,bt.fn.toJSON=bt.fn.toISOString,p(bt.duration.fn=d.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,a=this._days,o=this._months,r=this._data,s=0;r.milliseconds=i%1e3,e=f(i/1e3),r.seconds=e%60,t=f(e/60),r.minutes=t%60,n=f(t/60),r.hours=n%24,a+=f(n/24),s=f(mt(a)),a-=f(gt(s)),o+=f(a/30),a%=30,s+=f(o/12),o%=12,r.days=a,r.months=o,r.years=s},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return f(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*C(this._months/12)},humanize:function(e){var t=rt(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=bt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=bt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=x(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=x(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*mt(t),"month"===e?n:n/12;switch(t=this._days+Math.round(gt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 60*24*t+this._milliseconds/6e4;case"second":return 60*60*24*t+this._milliseconds/1e3;case"millisecond":return Math.floor(1e3*60*60*24*t)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:bt.fn.lang,locale:bt.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),a=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||a||o?"T":"")+(i?i+"H":"")+(a?a+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale}}),bt.duration.fn.toString=bt.duration.fn.toISOString;for(qt in un)n(un,qt)&&_t(qt.toLowerCase());bt.duration.fn.asMilliseconds=function(){return this.as("ms")},bt.duration.fn.asSeconds=function(){return this.as("s")},bt.duration.fn.asMinutes=function(){return this.as("m")},bt.duration.fn.asHours=function(){return this.as("h")},bt.duration.fn.asDays=function(){return this.as("d")},bt.duration.fn.asWeeks=function(){return this.as("weeks")},bt.duration.fn.asMonths=function(){return this.as("M")},bt.duration.fn.asYears=function(){return this.as("y")},bt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===C(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Pt?module.exports=bt:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(xt.moment=yt),bt}),vt(!0)):vt()}.call(this),define("massrel-js-backbone-2/StatusModel",["require","./backbone","./MediaCollection","lodash","moment"],function(e){var t=e("./backbone"),n=e("./MediaCollection"),i=e("lodash"),a=e("moment"),o=new RegExp("(https?:)?//i\\.embed\\.ly/\\d+/image"),r={minute:a.duration(1,"minute").asMilliseconds(),hour:a.duration(1,"hour").asMilliseconds(),day:a.duration(1,"day").asMilliseconds(),week:a.duration(1,"week").asMilliseconds(),month:a.duration(1,"month").asMilliseconds()};return t.Model.extend({idAttribute:"_id",defaults:function(){return{retweet:!1,formattedDate:"",relativeDateFormat:"display",formattedText:"",klout:null,formattedStory:"",config:{},place:null,media:new n}},constructor:function(e,n){n=n||{},n.parse=!0,t.Model.call(this,e,n),this.generateFormattedDates()},embedlyImageProxyUrl:function(e){return o.test(e)||(e="//i.embed.ly/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&url="+window.encodeURIComponent(e)),e},parse:function(e){return e.raw=i.cloneDeep(e),e._id=i.uniqueId(),e.klout=this.kloutData(e),e},kloutData:function(e){var t=e.massrel&&e.massrel.klout||null;return t&&t.score&&(t.score_floor=Math.floor(window.parseInt(t.score))),t},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_at")))},formattedDates:function(e,t){var n={display:e,"short":e,full:e,timestamp:e},i=a(e,t);return i.isValid()&&(n={display:this.displayDate(i),"short":this.shortDate(i),full:this.fullDate(i),timestamp:this.timestamp(i)}),n},displayDate:function(e){return e.fromNow()},shortDate:function(e){var t,n=a().diff(e),i=a.duration(n);return t=n<r.minute?i.seconds()+"s":n<r.hour?i.minutes()+"m":n<r.day?i.hours()+"h":n<r.week?i.days()+"d":n<r.month?i.weeks()+"w":e.format("M/D/YY")},fullDate:function(e){return e.format("lll")},timestamp:function(e){return e.toISOString()}})}),function(){function e(e,t){return t=t||"","string"!=typeof e&&(e.global&&t.indexOf("g")<0&&(t+="g"),e.ignoreCase&&t.indexOf("i")<0&&(t+="i"),e.multiline&&t.indexOf("m")<0&&(t+="m"),e=e.source),new RegExp(e.replace(/#\{(\w+)\}/g,function(e,t){var n=o.txt.regexen[t]||"";return"string"!=typeof n&&(n=n.source),n}),t)}function t(e,t){return e.replace(/#\{(\w+)\}/g,function(e,n){return t[n]||""})}function n(e,t,n){var i=String.fromCharCode(t);return n!==t&&(i+="-"+String.fromCharCode(n)),e.push(i),e}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function a(e,t,n){return n?!e||e.match(t)&&RegExp["$&"]===e:"string"==typeof e&&e.match(t)&&RegExp["$&"]===e}if("undefined"==typeof o||null===o)var o={};o.txt={},o.txt.regexen={};var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};o.txt.htmlEscape=function(e){return e&&e.replace(/[&"'><]/g,function(e){return r[e]})},o.txt.regexSupplant=e,o.txt.stringSupplant=t,o.txt.addCharsToCharClass=n;var s=String.fromCharCode,l=[s(32),s(133),s(160),s(5760),s(6158),s(8232),s(8233),s(8239),s(8287),s(12288)];n(l,9,13),n(l,8192,8202);var u=[s(65534),s(65279),s(65535)];n(u,8234,8238),o.txt.regexen.spaces_group=e(l.join("")),o.txt.regexen.spaces=e("["+l.join("")+"]"),o.txt.regexen.invalid_chars_group=e(u.join("")),o.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,o.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm,o.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm;var c=[];n(c,1024,1279),n(c,1280,1319),n(c,11744,11775),n(c,42560,42655),n(c,1425,1471),n(c,1473,1474),n(c,1476,1477),n(c,1479,1479),n(c,1488,1514),n(c,1520,1524),n(c,64274,64296),n(c,64298,64310),n(c,64312,64316),n(c,64318,64318),n(c,64320,64321),n(c,64323,64324),n(c,64326,64335),n(c,1552,1562),n(c,1568,1631),n(c,1646,1747),n(c,1749,1756),n(c,1758,1768),n(c,1770,1775),n(c,1786,1788),n(c,1791,1791),n(c,1872,1919),n(c,2208,2208),n(c,2210,2220),n(c,2276,2302),n(c,64336,64433),n(c,64467,64829),n(c,64848,64911),n(c,64914,64967),n(c,65008,65019),n(c,65136,65140),n(c,65142,65276),n(c,8204,8204),n(c,3585,3642),n(c,3648,3662),n(c,4352,4607),n(c,12592,12677),n(c,43360,43391),n(c,44032,55215),n(c,55216,55295),n(c,65441,65500),n(c,12449,12538),n(c,12540,12542),n(c,65382,65439),n(c,65392,65392),n(c,65296,65305),n(c,65313,65338),n(c,65345,65370),n(c,12353,12438),n(c,12441,12446),n(c,13312,19903),n(c,19968,40959),n(c,173824,177983),n(c,177984,178207),n(c,194560,195103),n(c,12291,12291),n(c,12293,12293),n(c,12347,12347),o.txt.regexen.nonLatinHashtagChars=e(c.join(""));var d=[];n(d,192,214),n(d,216,246),n(d,248,255),n(d,256,591),n(d,595,596),n(d,598,599),n(d,601,601),n(d,603,603),n(d,611,611),n(d,616,616),n(d,623,623),n(d,626,626),n(d,649,649),n(d,651,651),n(d,699,699),n(d,768,879),n(d,7680,7935),o.txt.regexen.latinAccentChars=e(d.join("")),o.txt.regexen.hashSigns=/[#ï¼]/,o.txt.regexen.hashtagAlpha=e(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i),o.txt.regexen.hashtagAlphaNumeric=e(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i),o.txt.regexen.endHashtagMatch=e(/^(?:#{hashSigns}|:\/\/)/),o.txt.regexen.hashtagBoundary=e(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/),o.txt.regexen.validHashtag=e(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),o.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@ï¼ ]|(?:rt|RT|rT|Rt):?)/,o.txt.regexen.atSigns=/[@ï¼ ]/,o.txt.regexen.validMentionOrList=e("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),o.txt.regexen.validReply=e(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),o.txt.regexen.endMentionMatch=e(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),o.txt.regexen.validUrlPrecedingChars=e(/(?:[^A-Za-z0-9@ï¼ $#ï¼#{invalid_chars_group}]|^)/),o.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,o.txt.regexen.invalidDomainChars=t("#{punct}#{spaces_group}#{invalid_chars_group}",o.txt.regexen),o.txt.regexen.validDomainChars=e(/[^#{invalidDomainChars}]/),o.txt.regexen.validSubdomain=e(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),o.txt.regexen.validDomainName=e(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),o.txt.regexen.validGTLD=e(RegExp("(?:(?:abogado|academy|accountants|active|actor|aero|agency|airforce|allfinanz|alsace|archi|army|arpa|asia|associates|attorney|auction|audio|autos|axa|band|bar|bargains|bayern|beer|berlin|best|bid|bike|bio|biz|black|blackfriday|blue|bmw|bnpparibas|boo|boutique|brussels|budapest|build|builders|business|buzz|bzh|cab|cal|camera|camp|cancerresearch|capetown|capital|caravan|cards|care|career|careers|casa|cash|cat|catering|center|ceo|cern|channel|cheap|christmas|chrome|church|citic|city|claims|cleaning|click|clinic|clothing|club|codes|coffee|college|cologne|com|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|credit|creditcard|crs|cruises|cuisinella|cymru|dad|dance|dating|day|deals|degree|democrat|dental|dentist|desi|diamonds|diet|digital|direct|directory|discount|dnp|domains|durban|dvag|eat|edu|education|email|emerck|engineer|engineering|enterprises|equipment|esq|estate|eus|events|exchange|expert|exposed|fail|farm|feedback|finance|financial|fish|fishing|fitness|flights|florist|flsmidth|fly|foo|forsale|foundation|frl|frogans|fund|furniture|futbol|gal|gallery|gbiz|gent|gift|gifts|gives|glass|gle|global|globo|gmail|gmo|gmx|google|gop|gov|graphics|gratis|green|gripe|guide|guitars|guru|hamburg|haus|healthcare|help|here|hiphop|hiv|holdings|holiday|homes|horse|host|hosting|house|how|ibm|immo|immobilien|industries|info|ing|ink|institute|insure|int|international|investments|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|krd|kred|lacaixa|land|lawyer|lease|lgbt|life|lighting|limited|limo|link|loans|london|lotto|ltda|luxe|luxury|maison|management|mango|market|marketing|media|meet|melbourne|meme|menu|miami|mil|mini|mobi|moda|moe|monash|mortgage|moscow|motorcycles|mov|museum|nagoya|name|navy|net|network|neustar|new|nexus|ngo|nhk|ninja|nra|nrw|nyc|okinawa|ong|onl|ooo|org|organic|otsuka|ovh|paris|partners|parts|pharmacy|photo|photography|photos|physio|pics|pictures|pink|pizza|place|plumbing|pohl|poker|post|praxi|press|pro|prod|productions|prof|properties|property|pub|qpon|quebec|realtor|recipes|red|rehab|reise|reisen|ren|rentals|repair|report|republican|rest|restaurant|reviews|rich|rio|rip|rocks|rodeo|rsvp|ruhr|ryukyu|saarland|sarl|sca|scb|schmidt|schule|scot|services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|supplies|supply|support|surf|surgery|suzuki|systems|taipei|tatar|tattoo|tax|technology|tel|tienda|tips|tirol|today|tokyo|tools|top|town|toys|trade|training|travel|tui|university|uno|uol|vacations|vegas|ventures|vermÃ¶gensberater|vermÃ¶gensberatung|versicherung|vet|viajes|villas|vision|vlaanderen|vodka|vote|voting|voto|voyage|wales|wang|watch|webcam|website|wed|wedding|whoswho|wien|wiki|williamhill|wme|work|works|world|wtc|wtf|xxx|xyz|yachts|yandex|yoga|yokohama|youtube|zip|zone|Ð´ÐµÑÐ¸|Ð¼Ð¾ÑÐºÐ²Ð°|Ð¾Ð½Ð»Ð°Ð¹Ð½|Ð¾ÑÐ³|ÑÑÑ|ÑÐ°Ð¹Ñ|Ø¨Ø§Ø²Ø§Ø±|Ø´Ø¨ÙØ©|ÙÙÙØ¹|à¤¸à¤à¤à¤ à¤¨|ã¿ããª|ä¸ç|ä¸­ä¿¡|ä¸­æç½|ä¼ä¸|ä½å±±|å¬å¸|å¬ç|åå|åæ |å¨çº¿|å¹¿ä¸|æç±ä½ |ææº|æ¿å¡|æºæ|æ¸¸æ|ç§»å¨|ç»ç»æºæ|ç½å|ç½ç»|éå¢|ì¼ì±)(?=[^0-9a-zA-Z@]|$))")),o.txt.regexen.validCCTLD=e(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|Ð±ÐµÐ»|Ð¼ÐºÐ´|Ð¼Ð¾Ð½|ÑÑ|ÑÑÐ±|ÑÐºÑ|ÒÐ°Ð·|Ø§ÙØ§Ø±Ø¯Ù|Ø§ÙØ¬Ø²Ø§Ø¦Ø±|Ø§ÙØ³Ø¹ÙØ¯ÙØ©|Ø§ÙÙØºØ±Ø¨|Ø§ÙØ§Ø±Ø§Øª|Ø§ÛØ±Ø§Ù|Ø¨Ú¾Ø§Ø±Øª|ØªÙÙØ³|Ø³ÙØ¯Ø§Ù|Ø³ÙØ±ÙØ©|Ø¹Ø±Ø§Ù|Ø¹ÙØ§Ù|ÙÙØ³Ø·ÙÙ|ÙØ·Ø±|ÙØµØ±|ÙÙÙØ³ÙØ§|Ù¾Ø§Ú©Ø³ØªØ§Ù|à¤­à¤¾à¤°à¤¤|à¦¬à¦¾à¦à¦²à¦¾|à¦­à¦¾à¦°à¦¤|à¨­à¨¾à¨°à¨¤|àª­àª¾àª°àª¤|à®à®¨à¯à®¤à®¿à®¯à®¾|à®à®²à®à¯à®à¯|à®à®¿à®à¯à®à®ªà¯à®ªà¯à®°à¯|à°­à°¾à°°à°¤à±|à¶½à¶à¶à·|à¹à¸à¸¢|áá|ä¸­å½|ä¸­å|å°æ¹¾|å°ç£|æ°å å¡|é¦æ¸¯|íêµ­)(?=[^0-9a-zA-Z@]|$))")),o.txt.regexen.validPunycode=e(/(?:xn--[0-9a-z]+)/),o.txt.regexen.validSpecialCCTLD=e(RegExp("(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))")),o.txt.regexen.validDomain=e(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),o.txt.regexen.validAsciiDomain=e(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),o.txt.regexen.invalidShortDomain=e(/^#{validDomainName}#{validCCTLD}$/i),o.txt.regexen.validSpecialShortDomain=e(/^#{validDomainName}#{validSpecialCCTLD}$/i),o.txt.regexen.validPortNumber=e(/[0-9]+/),o.txt.regexen.validGeneralUrlPathChars=e(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),o.txt.regexen.validUrlBalancedParens=e("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),o.txt.regexen.validUrlPathEndingChars=e(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),o.txt.regexen.validUrlPath=e("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),o.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,o.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,o.txt.regexen.extractUrl=e("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),o.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,o.txt.regexen.urlHasProtocol=/^https?:\/\//i,o.txt.regexen.urlHasHttps=/^https:\/\//i,o.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,o.txt.regexen.validCashtag=e("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),o.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,o.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,o.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,o.txt.regexen.validateUrlPchar=e("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),o.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,o.txt.regexen.validateUrlUserinfo=e("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),o.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,o.txt.regexen.validateUrlIpv4=e(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),o.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,o.txt.regexen.validateUrlIp=e("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),o.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,o.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,o.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,o.txt.regexen.validateUrlDomain=e(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),o.txt.regexen.validateUrlHost=e("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),o.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,o.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,o.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,o.txt.regexen.validateUrlUnicodeDomain=e(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),o.txt.regexen.validateUrlUnicodeHost=e("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),o.txt.regexen.validateUrlPort=/[0-9]{1,5}/,o.txt.regexen.validateUrlUnicodeAuthority=e("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),o.txt.regexen.validateUrlAuthority=e("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),o.txt.regexen.validateUrlPath=e(/(\/#{validateUrlPchar}*)*/i),o.txt.regexen.validateUrlQuery=e(/(#{validateUrlPchar}|\/|\?)*/i),o.txt.regexen.validateUrlFragment=e(/(#{validateUrlPchar}|\/|\?)*/i),o.txt.regexen.validateUrlUnencoded=e("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");
var p="tweet-url list-slug",h="tweet-url username",f="tweet-url hashtag",m="tweet-url cashtag",g={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},_={disabled:!0,readonly:!0,multiple:!0,checked:!0};o.txt.tagAttrs=function(e){var t="";for(var n in e){var i=e[n];_[n]&&(i=i?n:null),null!=i&&(t+=" "+o.txt.htmlEscape(n)+'="'+o.txt.htmlEscape(i.toString())+'"')}return t},o.txt.linkToText=function(e,n,i,a){a.suppressNoFollow||(i.rel="nofollow"),a.linkAttributeBlock&&a.linkAttributeBlock(e,i),a.linkTextBlock&&(n=a.linkTextBlock(e,n));var r={text:n,attr:o.txt.tagAttrs(i)};return t("<a#{attr}>#{text}</a>",r)},o.txt.linkToTextWithSymbol=function(e,t,n,i,a){var r=a.symbolTag?"<"+a.symbolTag+">"+t+"</"+a.symbolTag+">":t;n=o.txt.htmlEscape(n);var s=a.textWithSymbolTag?"<"+a.textWithSymbolTag+">"+n+"</"+a.textWithSymbolTag+">":n;return a.usernameIncludeSymbol||!t.match(o.txt.regexen.atSigns)?o.txt.linkToText(e,r+s,i,a):r+o.txt.linkToText(e,s,i,a)},o.txt.linkToHashtag=function(e,t,n){var a=t.substring(e.indices[0],e.indices[0]+1),r=o.txt.htmlEscape(e.hashtag),s=i(n.htmlAttrs||{});return s.href=n.hashtagUrlBase+r,s.title="#"+r,s["class"]=n.hashtagClass,r.charAt(0).match(o.txt.regexen.rtl_chars)&&(s["class"]+=" rtl"),n.targetBlank&&(s.target="_blank"),o.txt.linkToTextWithSymbol(e,a,r,s,n)},o.txt.linkToCashtag=function(e,t,n){var a=o.txt.htmlEscape(e.cashtag),r=i(n.htmlAttrs||{});return r.href=n.cashtagUrlBase+a,r.title="$"+a,r["class"]=n.cashtagClass,n.targetBlank&&(r.target="_blank"),o.txt.linkToTextWithSymbol(e,"$",a,r,n)},o.txt.linkToMentionAndList=function(e,t,n){var a=t.substring(e.indices[0],e.indices[0]+1),r=o.txt.htmlEscape(e.screenName),s=o.txt.htmlEscape(e.listSlug),l=e.listSlug&&!n.suppressLists,u=i(n.htmlAttrs||{});return u["class"]=l?n.listClass:n.usernameClass,u.href=l?n.listUrlBase+r+s:n.usernameUrlBase+r,l||n.suppressDataScreenName||(u["data-screen-name"]=r),n.targetBlank&&(u.target="_blank"),o.txt.linkToTextWithSymbol(e,a,l?r+s:r,u,n)},o.txt.linkToUrl=function(e,t,n){var a=e.url,r=a,s=o.txt.htmlEscape(r),l=n.urlEntities&&n.urlEntities[a]||e;l.display_url&&(s=o.txt.linkTextWithEntity(l,n));var u=i(n.htmlAttrs||{});return a.match(o.txt.regexen.urlHasProtocol)||(a="http://"+a),u.href=a,n.targetBlank&&(u.target="_blank"),n.urlClass&&(u["class"]=n.urlClass),n.urlTarget&&(u.target=n.urlTarget),!n.title&&l.display_url&&(u.title=l.expanded_url),o.txt.linkToText(e,s,u,n)},o.txt.linkTextWithEntity=function(e,n){var i=e.display_url,a=e.expanded_url,r=i.replace(/â¦/g,"");if(-1!=a.indexOf(r)){var s=a.indexOf(r),l={displayUrlSansEllipses:r,beforeDisplayUrl:a.substr(0,s),afterDisplayUrl:a.substr(s+r.length),precedingEllipsis:i.match(/^â¦/)?"â¦":"",followingEllipsis:i.match(/â¦$/)?"â¦":""};for(var u in l)l.hasOwnProperty(u)&&(l[u]=o.txt.htmlEscape(l[u]));return l.invisible=n.invisibleTagAttrs,t("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",l)}return i},o.txt.autoLinkEntities=function(e,t,n){n=i(n||{}),n.hashtagClass=n.hashtagClass||f,n.hashtagUrlBase=n.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",n.cashtagClass=n.cashtagClass||m,n.cashtagUrlBase=n.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",n.listClass=n.listClass||p,n.usernameClass=n.usernameClass||h,n.usernameUrlBase=n.usernameUrlBase||"https://twitter.com/",n.listUrlBase=n.listUrlBase||"https://twitter.com/",n.htmlAttrs=o.txt.extractHtmlAttrsFromOptions(n),n.invisibleTagAttrs=n.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var a,r,s;if(n.urlEntities){for(a={},r=0,s=n.urlEntities.length;s>r;r++)a[n.urlEntities[r].url]=n.urlEntities[r];n.urlEntities=a}var l="",u=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var c=n.htmlEscapeNonEntities?o.txt.htmlEscape:function(e){return e},r=0;r<t.length;r++){var d=t[r];l+=c(e.substring(u,d.indices[0])),d.url?l+=o.txt.linkToUrl(d,e,n):d.hashtag?l+=o.txt.linkToHashtag(d,e,n):d.screenName?l+=o.txt.linkToMentionAndList(d,e,n):d.cashtag&&(l+=o.txt.linkToCashtag(d,e,n)),u=d.indices[1]}return l+=c(e.substring(u,e.length))},o.txt.autoLinkWithJSON=function(e,t,n){if(t.user_mentions)for(var i=0;i<t.user_mentions.length;i++)t.user_mentions[i].screenName=t.user_mentions[i].screen_name;if(t.hashtags)for(var i=0;i<t.hashtags.length;i++)t.hashtags[i].hashtag=t.hashtags[i].text;if(t.symbols)for(var i=0;i<t.symbols.length;i++)t.symbols[i].cashtag=t.symbols[i].text;var a=[];for(var r in t)a=a.concat(t[r]);return o.txt.modifyIndicesFromUnicodeToUTF16(e,a),o.txt.autoLinkEntities(e,a,n)},o.txt.extractHtmlAttrsFromOptions=function(e){var t={};for(var n in e){var i=e[n];g[n]||(_[n]&&(i=i?n:null),null!=i&&(t[n]=i))}return t},o.txt.autoLink=function(e,t){var n=o.txt.extractEntitiesWithIndices(e,{extractUrlsWithoutProtocol:!1});return o.txt.autoLinkEntities(e,n,t)},o.txt.autoLinkUsernamesOrLists=function(e,t){var n=o.txt.extractMentionsOrListsWithIndices(e);return o.txt.autoLinkEntities(e,n,t)},o.txt.autoLinkHashtags=function(e,t){var n=o.txt.extractHashtagsWithIndices(e);return o.txt.autoLinkEntities(e,n,t)},o.txt.autoLinkCashtags=function(e,t){var n=o.txt.extractCashtagsWithIndices(e);return o.txt.autoLinkEntities(e,n,t)},o.txt.autoLinkUrlsCustom=function(e,t){var n=o.txt.extractUrlsWithIndices(e,{extractUrlsWithoutProtocol:!1});return o.txt.autoLinkEntities(e,n,t)},o.txt.removeOverlappingEntities=function(e){e.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var t=e[0],n=1;n<e.length;n++)t.indices[1]>e[n].indices[0]?(e.splice(n,1),n--):t=e[n]},o.txt.extractEntitiesWithIndices=function(e,t){var n=o.txt.extractUrlsWithIndices(e,t).concat(o.txt.extractMentionsOrListsWithIndices(e)).concat(o.txt.extractHashtagsWithIndices(e,{checkUrlOverlap:!1})).concat(o.txt.extractCashtagsWithIndices(e));return 0==n.length?[]:(o.txt.removeOverlappingEntities(n),n)},o.txt.extractMentions=function(e){for(var t=[],n=o.txt.extractMentionsWithIndices(e),i=0;i<n.length;i++){var a=n[i].screenName;t.push(a)}return t},o.txt.extractMentionsWithIndices=function(e){for(var t,n=[],i=o.txt.extractMentionsOrListsWithIndices(e),a=0;a<i.length;a++)t=i[a],""==t.listSlug&&n.push({screenName:t.screenName,indices:t.indices});return n},o.txt.extractMentionsOrListsWithIndices=function(e){if(!e||!e.match(o.txt.regexen.atSigns))return[];var t=[];return e.replace(o.txt.regexen.validMentionOrList,function(e,n,i,a,r,s,l){var u=l.slice(s+e.length);if(!u.match(o.txt.regexen.endMentionMatch)){r=r||"";var c=s+n.length,d=c+a.length+r.length+1;t.push({screenName:a,listSlug:r,indices:[c,d]})}}),t},o.txt.extractReplies=function(e){if(!e)return null;var t=e.match(o.txt.regexen.validReply);return!t||RegExp.rightContext.match(o.txt.regexen.endMentionMatch)?null:t[1]},o.txt.extractUrls=function(e,t){for(var n=[],i=o.txt.extractUrlsWithIndices(e,t),a=0;a<i.length;a++)n.push(i[a].url);return n},o.txt.extractUrlsWithIndices=function(e,t){if(t||(t={extractUrlsWithoutProtocol:!0}),!e||(t.extractUrlsWithoutProtocol?!e.match(/\./):!e.match(/:/)))return[];for(var n=[];o.txt.regexen.extractUrl.exec(e);){var i=RegExp.$2,a=RegExp.$3,r=RegExp.$4,s=RegExp.$5,l=RegExp.$7,u=o.txt.regexen.extractUrl.lastIndex,c=u-a.length;if(r)a.match(o.txt.regexen.validTcoUrl)&&(a=RegExp.lastMatch,u=c+a.length),n.push({url:a,indices:[c,u]});else{if(!t.extractUrlsWithoutProtocol||i.match(o.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var d=null,p=0;if(s.replace(o.txt.regexen.validAsciiDomain,function(e){var t=s.indexOf(e,p);p=t+e.length,d={url:e,indices:[c+t,c+p]},(l||e.match(o.txt.regexen.validSpecialShortDomain)||!e.match(o.txt.regexen.invalidShortDomain))&&n.push(d)}),null==d)continue;l&&(d.url=a.replace(s,d.url),d.indices[1]=u)}}return n},o.txt.extractHashtags=function(e){for(var t=[],n=o.txt.extractHashtagsWithIndices(e),i=0;i<n.length;i++)t.push(n[i].hashtag);return t},o.txt.extractHashtagsWithIndices=function(e,t){if(t||(t={checkUrlOverlap:!0}),!e||!e.match(o.txt.regexen.hashSigns))return[];var n=[];if(e.replace(o.txt.regexen.validHashtag,function(e,t,i,a,r,s){var l=s.slice(r+e.length);if(!l.match(o.txt.regexen.endHashtagMatch)){var u=r+t.length,c=u+a.length+1;n.push({hashtag:a,indices:[u,c]})}}),t.checkUrlOverlap){var i=o.txt.extractUrlsWithIndices(e);if(i.length>0){var a=n.concat(i);o.txt.removeOverlappingEntities(a),n=[];for(var r=0;r<a.length;r++)a[r].hashtag&&n.push(a[r])}}return n},o.txt.extractCashtags=function(e){for(var t=[],n=o.txt.extractCashtagsWithIndices(e),i=0;i<n.length;i++)t.push(n[i].cashtag);return t},o.txt.extractCashtagsWithIndices=function(e){if(!e||-1==e.indexOf("$"))return[];var t=[];return e.replace(o.txt.regexen.validCashtag,function(e,n,i,a,o){var r=o+n.length,s=r+a.length+1;t.push({cashtag:a,indices:[r,s]})}),t},o.txt.modifyIndicesFromUnicodeToUTF16=function(e,t){o.txt.convertUnicodeIndices(e,t,!1)},o.txt.modifyIndicesFromUTF16ToUnicode=function(e,t){o.txt.convertUnicodeIndices(e,t,!0)},o.txt.getUnicodeTextLength=function(e){return e.replace(o.txt.regexen.non_bmp_code_pairs," ").length},o.txt.convertUnicodeIndices=function(e,t,n){if(0!=t.length){var i=0,a=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var o=0,r=t[0];i<e.length;){if(r.indices[0]==(n?i:a)){var s=r.indices[1]-r.indices[0];if(r.indices[0]=n?a:i,r.indices[1]=r.indices[0]+s,o++,o==t.length)break;r=t[o]}var l=e.charCodeAt(i);l>=55296&&56319>=l&&i<e.length-1&&(l=e.charCodeAt(i+1),l>=56320&&57343>=l&&i++),a++,i++}}},o.txt.splitTags=function(e){for(var t,n,i=e.split("<"),a=[],o=0;o<i.length;o+=1)if(n=i[o]){t=n.split(">");for(var r=0;r<t.length;r+=1)a.push(t[r])}else a.push("");return a},o.txt.hitHighlight=function(e,t,n){var i="em";if(t=t||[],n=n||{},0===t.length)return e;var a,r,s,l,u,c,d,p=n.tag||i,h=["<"+p+">","</"+p+">"],f=o.txt.splitTags(e),m="",g=0,_=f[0],v=0,b=0,y=!1,q=_,w=[];for(a=0;a<t.length;a+=1)for(r=0;r<t[a].length;r+=1)w.push(t[a][r]);for(s=0;s<w.length;s+=1){for(l=w[s],u=h[s%2],c=!1;null!=_&&l>=v+_.length;)m+=q.slice(b),y&&l===v+q.length&&(m+=u,c=!0),f[g+1]&&(m+="<"+f[g+1]+">"),v+=q.length,b=0,g+=2,_=f[g],q=_,y=!1;c||null==_?c||(c=!0,m+=u):(d=l-v,m+=q.slice(b,d)+u,b=d,y=0===s%2?!0:!1)}if(null!=_)for(b<q.length&&(m+=q.slice(b)),s=g+1;s<f.length;s+=1)m+=0===s%2?f[s]:"<"+f[s]+">";return m};var v=140,b=[s(65534),s(65279),s(65535),s(8234),s(8235),s(8236),s(8237),s(8238)];o.txt.getTweetLength=function(e,t){t||(t={short_url_length:22,short_url_length_https:23});var n=o.txt.getUnicodeTextLength(e),i=o.txt.extractUrlsWithIndices(e);o.txt.modifyIndicesFromUTF16ToUnicode(e,i);for(var a=0;a<i.length;a++)n+=i[a].indices[0]-i[a].indices[1],n+=i[a].url.toLowerCase().match(o.txt.regexen.urlHasHttps)?t.short_url_length_https:t.short_url_length;return n},o.txt.isInvalidTweet=function(e){if(!e)return"empty";if(o.txt.getTweetLength(e)>v)return"too_long";for(var t=0;t<b.length;t++)if(e.indexOf(b[t])>=0)return"invalid_characters";return!1},o.txt.isValidTweetText=function(e){return!o.txt.isInvalidTweet(e)},o.txt.isValidUsername=function(e){if(!e)return!1;var t=o.txt.extractMentions(e);return 1===t.length&&t[0]===e.slice(1)};var y=e(/^#{validMentionOrList}$/);if(o.txt.isValidList=function(e){var t=e.match(y);return!(!t||""!=t[1]||!t[4])},o.txt.isValidHashtag=function(e){if(!e)return!1;var t=o.txt.extractHashtags(e);return 1===t.length&&t[0]===e.slice(1)},o.txt.isValidUrl=function(e,t,n){if(null==t&&(t=!0),null==n&&(n=!0),!e)return!1;var i=e.match(o.txt.regexen.validateUrlUnencoded);if(!i||i[0]!==e)return!1;var r=i[1],s=i[2],l=i[3],u=i[4],c=i[5];return(!n||a(r,o.txt.regexen.validateUrlScheme)&&r.match(/^https?$/i))&&a(l,o.txt.regexen.validateUrlPath)&&a(u,o.txt.regexen.validateUrlQuery,!0)&&a(c,o.txt.regexen.validateUrlFragment,!0)?t&&a(s,o.txt.regexen.validateUrlUnicodeAuthority)||!t&&a(s,o.txt.regexen.validateUrlAuthority):!1},"undefined"!=typeof module&&module.exports&&(module.exports=o.txt),"function"==typeof define&&define.amd&&define("twitter-text/twitter-text",[],o.txt),"undefined"!=typeof window)if(window.twttr)for(var q in o)window.twttr[q]=o[q];else window.twttr=o}(),define("twitter-text",["twitter-text/twitter-text"],function(e){return e}),define("massrel-js-backbone-2/TwitterStatusModel",["require","massrel-js","./StatusModel","twitter-text","lodash"],function(e){var t=e("massrel-js"),n=e("./StatusModel"),i=e("twitter-text"),a=e("lodash"),o={thumb:"_normal",small:"_normal",medium:"_bigger",large:"_reasonably_small",huge:""},r=["network","sourceNetwork","sourceName","massrel"],s=["original_referer"],l={video:!0,animated_gif:!0},u="ddd MMM DD HH:mm:ss ZZ YYYY";return n.extend({defaults:a.extend(a.result(n.prototype,"defaults"),{original_referer:t.intents.original_referer,relativeDateFormat:"short"}),parse:function(e){if(e=n.prototype.parse.apply(this,arguments),e.retweeted_status){var t=e;e=e.retweeted_status,e.original_status=t,e.raw=t.raw,delete e.original_status.retweeted_status,delete e.original_status.raw,e.retweet=!0,e.retweeted_by_user=e.original_status.user,a.extend(e,a.pick(e.original_status,r)),e.klout=this.kloutData(e)}e.extended_entities&&e.extended_entities.media&&e.extended_entities.media.length>0&&a.each(e.entities.media,function(t,n){var i=a.find(e.extended_entities.media,{id:t.id});i&&l[i.type]===!0&&(e.entities.media[n]=i)});var o=[];e.entities&&(e.entities.urls&&e.entities.urls.length>0&&(o=o.concat(e.entities.urls)),e.entities.media&&e.entities.media.length>0&&(o=o.concat(e.entities.media))),e.formattedText=i.autoLink(e.text,{usernameIncludeSymbol:!0,urlEntities:o});var s=e.geo||e.geo_hint;return s&&(e.coordinates=s.coordinates),e},constructor:function(){n.apply(this,arguments),this.generateIntentUrls(),this.generateAvatarUrl(),this.on("change:original_referer",a.bind(this.generateIntentUrls,this)),this.on("change:avatar_resolution",a.bind(this.generateAvatarUrl,this))},generateAvatarUrl:function(){var e=this.get("avatar_resolution"),t=this.get("user"),n=o[e];if(n){var i=t.profile_image_url_https.replace("_normal",n);t.profile_image_url_https=i}},generateIntentUrls:function(){var e=a.pick(this.toJSON(),s),n=this.get("id_str");this.set("replyUrl",t.intents.reply(n,e)),this.set("retweetUrl",t.intents.retweet(n,e)),this.set("favUrl",t.intents.favorite(n,e))},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_at"),u))}})}),define("massrel-js-backbone-2/FacebookStatusModel",["require","./StatusModel","twitter-text","lodash"],function(e){var t=e("./StatusModel"),n=e("twitter-text"),i=e("lodash");return t.extend({parse:function(e){e=t.prototype.parse.apply(this,arguments);var n="https://www.facebook.com/",a=e.facebook_id.split("_"),o=e.type;return i.contains(["photo","video","link","post"],o)?n+=[a[0],"posts",a[1]].join("/"):"comment"===e.kind?2===a.length?n+=a[0]+"?comment_id="+a[1]:(n+=[a[0],"posts",a[1]].join("/"),a[2]&&(n+="?comment_id="+a[2])):n+=e.facebook_id,e.permalink=n,e.action_available={comment:!0,share:!1,like:!1},"comment"===e.kind&&(e.action_available.comment=!1),e.share_text&&e.story&&(e.formattedStory=this.autoLink(e.story)),e.originalStatus=i.extend({},e),"string"==typeof e.originalStatus.id&&(e.originalStatus.id=e.originalStatus.id.replace("facebook:","")),(e.message||e.name)&&(e.formattedText=this.autoLink(e.message||e.name)),e.hide_app_cards&&e.fbapp_id&&e.application&&e.fbapp_id===e.application.id&&(e.mediaHtml=""),e.author?e.action_available.like=e.author.is_page>0?!0:!1:e.from&&e.from.broadcast_name&&(e.author={name:e.from.broadcast_name,is_page:!0},e.action_available.like=!0),e},autoLink:function(e){var t=n.extractUrlsWithIndices(e).concat(n.extractHashtagsWithIndices(e,{checkUrlOverlap:!1}));return n.removeOverlappingEntities(t),n.autoLinkEntities(e,t,{hashtagClass:"facebook-hashtag",urlClass:"facebook-url",hashtagUrlBase:"https://www.facebook.com/hashtag/",targetBlank:!0})},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_time")))}})}),define("massrel-js-backbone-2/InstagramStatusModel",["require","./StatusModel","twitter-text"],function(e){var t=e("./StatusModel"),n=e("twitter-text");return t.extend({parse:function(e){if(e=t.prototype.parse.apply(this,arguments),e.user.profile_picture&&(e.user.profile_picture=this.embedlyImageProxyUrl(e.user.profile_picture),e.caption&&e.caption.from.profile_picture&&(e.caption.from.profile_picture=this.embedlyImageProxyUrl(e.caption.from.profile_picture))),e.caption){var i=e.caption.text,a=String.fromCharCode(133)+"#",o=this.getHashtagRuns(i);i=_.reduce(o,function(e,t){var n=t.replace(/#/g,a).slice(1);return e.replace(t,n)},i);var r=n.extractUrlsWithIndices(i),s=n.extractMentionsWithIndices(i),l=n.extractHashtagsWithIndices(i,{checkUrlOverlap:!1}),u=r.concat(l).concat(s);n.removeOverlappingEntities(u);var c={hashtagUrlBase:"//instagram.com/explore/tags/",usernameUrlBase:"//instagram.com/"},d=n.autoLinkEntities(i,u,c);e.caption.text=d}return e.location&&_.isNumber(e.location.latitude)&&_.isNumber(e.location.longitude)&&(e.coordinates=[e.location.latitude,e.location.longitude]),e.place=e.location,delete e.location,e},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("created_time"),"X"))},getHashtagRuns:function(e){for(var t=/(?:#|^|\s)((?:#[^#\s]+){2,})(?:#|$|\s)/gi,n=[],i=t.exec(e);i;)t.lastIndex=i.index+1,n.push(i[1]),i=t.exec(e);return _.sortBy(n,"length").reverse()}})}),define("massrel-js-backbone-2/GoogleStatusModel",["require","./StatusModel","twitter-text"],function(e){var t=e("./StatusModel"),n=e("twitter-text");return t.extend({parse:function(e){return e=t.prototype.parse.apply(this,arguments),e.title&&(e.title=n.autoLinkUrlsCustom(e.title)),e.place=e.location,delete e.location,e.formattedText=e.title,e.object&&e.object.content&&(e.formattedText=e.object.content),e},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("published")))}})}),define("massrel-js-backbone-2/GetglueStatusModel",["require","./StatusModel","twitter-text","lodash"],function(e){var t=e("./StatusModel"),n=e("twitter-text"),i=e("lodash"),a={thumb:"tiny_",small:"tiny_",medium:"",large:"large_",huge:"large_"},o=/\/[a-z_]*tile\./;return t.extend({defaults:i.extend(i.result(t.prototype,"defaults"),{relativeDateFormat:"short"}),parse:function(e){return e=t.prototype.parse.apply(this,arguments),e.actor&&e.actor.image&&(e.actor.image=this.embedlyImageProxyUrl(e.actor.image)),e.canonical_link=e.link,i.isUndefined(e.inReplyTo)||(e.canonical_link=e.inReplyTo.link),e.body=n.autoLinkUrlsCustom(e.body),e},initialize:function(){t.prototype.initialize.apply(this,arguments),this.generateAvatarUrl()},generateAvatarUrl:function(){var e=this.get("actor"),t=this.get("avatar_resolution"),n=a[t];if(n){var i=e.image.replace(o,"/"+n+"tile.");e.image=i}},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("publishTime")))}})}),define("massrel-js-backbone-2/RssStatusModel",["./StatusModel","twitter-text"],function(e,t){return e.extend({parse:function(n){return n=e.prototype.parse.apply(this,arguments),n.description&&(n.raw_description=n.description,n.description=t.autoLinkUrlsCustom(n.description)),n},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("pub_date")))}})}),define("massrel-js-backbone-2/YoutubeStatusModel",["./StatusModel","twitter-text","./MediaCollection","./MediaModel","lodash","moment"],function(e,t,n,i,a,o){return e.extend({defaults:a.extend(a.result(e.prototype,"defaults"),{relativeDurationFormat:"display",formattedDuration:"",relativeDateFormat:"short"}),initialize:function(){e.prototype.initialize.apply(this,arguments),this.on("change:relativeDurationFormat",a.bind(this.generateFormattedDurations,this)),this.generateFormattedDurations()},parse:function(t){return t=e.prototype.parse.apply(this,arguments),t.title=t.snippet.title,t.description=t.snippet.description,t.link="//youtu.be/"+t.youtube_video_id,t.channelTitle=t.snippet.channelTitle,t},generateFormattedDates:function(){this.set("formattedDate",this.formattedDates(this.get("snippet").publishedAt))},generateFormattedDurations:function(){var e=this.computeDuration(this.get("contentDetails").duration),t=this.get("relativeDurationFormat");a.isFunction(t)?this.set("formattedDuration",t(e)):this[t+"Duration"]&&this.set("formattedDuration",this[t+"Duration"](e))},computeDuration:function(e){var t=o.duration(e);return{hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),totalSeconds:t.asSeconds()}},displayDuration:function(e){function t(e){return 10>e?"0"+e:e}var n=":"+t(e.seconds);return n=e.hours?e.hours+":"+t(e.minutes)+n:e.minutes+n},secondsDuration:function(e){return e.totalSeconds}})}),define("massrel-js-backbone-2/statusModelFactory",["./StatusModel","./TwitterStatusModel","./FacebookStatusModel","./InstagramStatusModel","./GoogleStatusModel","./GetglueStatusModel","./RssStatusModel","./YoutubeStatusModel"],function(e,t,n,i,a,o,r,s){var l=function(t,n,i){var a;return l.detectSource(t),"undefined"==typeof i&&(i=l.constructors),a=void 0!==i[t.sourceName]?i[t.sourceName]:e,new a(t,n)};return l.constructors={twitter:t,facebook:n,instagram:i,google:a,getglue:o,rss:r,youtube:s},l.detectSource=function(e){return e.sourceNetwork={facebook:!1,twitter:!1,getglue:!1,google:!1,instagram:!1,rss:!1,youtube:!1,message:!1},"undefined"!=typeof e.sourceNetwork[e.network]&&(e.sourceNetwork[e.network]=!0,e.sourceName=e.network),"google_plus"===e.network&&(e.sourceNetwork.google=!0,e.sourceName="google"),"youtube"===e.network&&(e.sourceNetwork.youtube=!0,e.sourceName="youtube"),"massrelevance"===e.network&&(e.sourceNetwork.message=!0,e.sourceName="message"),e},l}),define("massrel-js-backbone-2/mediaCollectionFactory",["q","./MediaCollection","media-meta"],function(e,t,n){var i=function(i,a){var o=e.defer(),r=n.promise(i.toJSON(),a);return r.done(function(e){o.resolve(new t(e))},function(){o.reject()}),o.promise};return i}),define("massrel-js-backbone-2/StreamPoller",["require","lodash","q","./backbone","./statusModelFactory","./mediaCollectionFactory","massrel-js"],function(e){var t=e("lodash"),n=e("q"),i=e("./backbone"),a=e("./statusModelFactory"),o=e("./mediaCollectionFactory"),r=e("massrel-js"),s="https"===r.protocol;return i.Model.extend({defaults:{embed_media:!1,avatar_resolution:"small",total:0,media_config:{secure:s,autoplay_video:!1,loop_video:!1}},initialize:function(){var e=this;e.filters=[],e.asyncFilters=[],e.queue=new i.Collection,e.moreQueue=new i.Collection;var n=e.toJSON();e.stream=new r.Stream(n.stream_name),e.poller=e.stream.poller(n),e.poller.data(function(t){var n=e.get("total")+t.length;e.set("total",n),0===n&&e.trigger("no-data"),0===t.length&&e.trigger("no-new-data")}),e.poller.batch(t.bind(e.handleBatch,e))},start:function(){var e=this;return this.get("stream_name")&&e.poller.start(),e},handleBatch:function(e){var t=this;t.createModels(e).done(function(e){t.queue.add(e,{at:0}),t.trigger("loaded-batch",e.length)})},createModels:function(e){var i=this,r=n.defer(),s=i.get("embed_media"),l=i.get("avatar_resolution"),u=i.get("media_config"),c=[],d=[];if(t.each(e,function(e){if(e.in_reply_to){var t=a(e.in_reply_to);c.push(t)}var n=a(e);c.push(n),e.in_reply_to&&(t.set("reply",n),n.set("in_reply_to",t))}),t.each(c,function(e){if(l&&e.set("avatar_resolution",l),s){var t=o(e,u);t.then(function(t){e.set("media",t)}).fail(function(){}),d.push(t)}}),s)n.allSettled(d).done(function(){var e=i.applyFilters(c);i.applyAsyncFilters(e).then(function(e){r.resolve(e)})});else{var p=i.applyFilters(c);i.applyAsyncFilters(p).then(function(e){r.resolve(e)})}return r.promise},stop:function(){var e=this;return e.poller.stop(),e},filter:function(e){var t=this;return t.filters.push(e),t.queue.remove(t.queue.reject(e)),t.moreQueue.remove(t.moreQueue.reject(e)),t},asyncFilter:function(e){var n=this;n.asyncFilters.push(e);var i=t.clone(n.queue.models),a=t.clone(n.moreQueue.models);return n.applyAsyncFilters(n.queue.models).then(function(e){var a=t.difference(i,e);n.queue.remove(a)}),n.applyAsyncFilters(n.moreQueue.models).then(function(e){var i=t.difference(a,e);n.moreQueue.remove(i)}),n},applyFilters:function(e){var n=this;return t.each(n.filters,function(n){e=t.filter(e,n)}),e},applyAsyncFilters:function(e){var i=n.defer(),a=function(e){i.resolve(e)};if(this.asyncFilters.length){var o=n(e);t.each(this.asyncFilters,function(e){o=o.then(e)}),o.then(a)}else i.resolve(e);return i.promise},more:function(){var e=this;return e.trigger("loading-more"),e.poller.more(t.bind(e.loadedMore,e)),e},loadedMore:function(e){var t=this;0===e.length?t.trigger("end-of-data"):t.createModels(e).done(function(e){t.moreQueue.add(e),t.trigger("loaded-more",e.length)})}})}),define("massrel-js-backbone-2/Filters",["require","./backbone","q","jquery","lodash"],function(e){function t(e){var t=r("head"),n=o.defer(),i=r("<img/>");return i.on("load",function(){i.remove(),n.resolve()}).on("error",function(){i.remove(),n.reject()}),t.append(i),i.attr("src",e),n.promise}function n(e,n){var i=[],a=[],r=o.defer();return s.each(e,function(e){var r=o.defer();i.push(r.promise);var l=e.get("media");if(l&&l.length>0){var u=l.at(0),c=u.get("photo_urls"),d=[];s.each(c,function(e){d.push(t(e.url))}),o.all(d).then(function(){a.push(e),r.resolve()},function(){r.resolve()})}else n&&n.includeText&&a.push(e),r.resolve()}),o.allSettled(i).then(function(){r.resolve(s.intersection(e,a))}),r.promise}function i(e){return n(e,{includeText:!0})}function a(e){return String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),e.get("formattedText")&&e.get("formattedText").trim().length>0?!0:"instagram"===e.get("network")&&e.get("caption")&&e.get("caption").text&&e.get("caption").text.trim().length>0?!0:"rss"===e.get("network")&&(e.get("title")&&e.get("title").trim().length>0||e.get("description")&&e.get("description").trim().length>0)?!0:!1}e("./backbone");var o=e("q"),r=e("jquery"),s=e("lodash");return{sync:{hasTextStatus:a},async:{hasValidImages:n,hasValidImagesOrText:i}}}),define("massrel-js-backbone-2/ComparePoller",["./backbone","massrel-js"],function(e,t){return e.Model.extend({defaults:function(){return{streams:[],frequency:20}},initialize:function(){var e=this,n=e.toJSON();e.compare=new t.Compare(n.streams),e.poller=e.compare.poller(n)},start:function(){var e=this;this.get("streams")&&this.get("streams").length>0&&(e.set("loading",!0),e.poller.data(function(t){e.set("data",t),e.set("loading",!1)}),e.poller.start())},stop:function(){this.poller.stop()}})}),define("massrel-js-backbone-2/MetaPoller",["require","./backbone","massrel-js"],function(e){var t=e("./backbone"),n=e("massrel-js");return t.Model.extend({defaults:function(){return{stream_name:"",networks:1,disregard:"",frequency:20,loading:!1,activity:{},count:{},networks:{}}},initialize:function(){var e=this,t=e.toJSON();e.stream=new n.Stream(t.stream_name),e.poller=e.stream.metaPoller(t)},start:function(){var e=this;this.get("stream_name")&&(e.set("loading",!0),e.poller.data(function(t){e.set(t),e.set("loading",!1)}),e.poller.start())},stop:function(){var e=this;e.poller.stop()}})}),define("massrel-js-backbone-2/TopThingsPoller",["require","./backbone","massrel-js","lodash"],function(e){var t=e("./backbone"),n=e("massrel-js"),i=e("lodash");return t.Model.extend({defaults:function(){return{stream_name:"",networks:1,frequency:20,resolution:"1h",start:"-1h",finish:"",thing:"",limit:50,loading:!1,data:{}}},start:function(){if(this.stop(),this.get("stream_name")){var e=i.pick(this.toJSON(),["thing","resolution","start","finish","limit","stream_name"]);this.stream=new n.Stream(e.stream_name),this.poller=this.stream.topThingsPoller(e),this.set("loading",!0),this.poller.data(i.bind(function(e){this.set("data",e),this.set("loading",!1)},this)),this.poller.start()}},stop:function(){this.poller&&this.poller.stop()}})}),define("massrel-js-backbone-2/main",["require","./StreamPoller","./Filters","./ComparePoller","./MetaPoller","./TopThingsPoller","./statusModelFactory","./StatusModel","./TwitterStatusModel","./FacebookStatusModel","./GoogleStatusModel","./GetglueStatusModel","./InstagramStatusModel","./RssStatusModel","./mediaCollectionFactory","./MediaCollection","./MediaModel"],function(e){var t=e("./StreamPoller"),n=e("./Filters"),i=e("./ComparePoller"),a=e("./MetaPoller"),o=e("./TopThingsPoller"),r=e("./statusModelFactory"),s=e("./StatusModel"),l=e("./TwitterStatusModel"),u=e("./FacebookStatusModel"),c=e("./GoogleStatusModel"),d=e("./GetglueStatusModel"),p=e("./InstagramStatusModel"),h=e("./RssStatusModel"),f=e("./mediaCollectionFactory"),m=e("./MediaCollection"),g=e("./MediaModel");return{StreamPoller:t,ComparePoller:i,MetaPoller:a,TopThingsPoller:o,statusModelFactory:r,StatusModel:s,TwitterStatusModel:l,FacebookStatusModel:u,GoogleStatusModel:c,GetglueStatusModel:d,InstagramStatusModel:p,RssStatusModel:h,mediaCollectionFactory:f,MediaCollection:m,MediaModel:g,Filters:n}}),define("massrel-js-backbone-2",["massrel-js-backbone-2/main"],function(e){return e}),define("tmpl!media",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)type.photo&&(__p+='\n  <a href="'+__e(link)+'" target="_blank">\n    <img src="'+__e(photo_url)+'" />\n  </a>\n'),__p+="\n\n",type.video&&(__p+="\n  ",embed_url?__p+='\n    <iframe src="'+__e(embed_url)+'" seamless></iframe>\n  ':embed_html&&(__p+="\n    "+(null==(__t=embed_html)?"":__t)+"\n  "),__p+="\n"),__p+="\n\n",type.link&&(__p+="\n"),__p+="\n";return __p},metadata:{customizable:!0},name:"media"})}),define("lib/views/MediaView",["require","lodash","lib/views/BaseView","tmpl!media"],function(e){var t=e("lodash"),n=e("lib/views/BaseView"),i=e("tmpl!media");return n.extend({template:i,className:"media",initialize:function(){t.each(this.model.get("type"),function(e,t){this.$el.toggleClass("embed-type-"+t,e)},this)}})}),define("tmpl!klout",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="klout">\n  ',__p+=profile_url?'\n  <a href="'+__e(profile_url)+'" class="klout-score" data-score="'+__e(score)+'" title="Klout Score is '+__e(score_floor)+'">'+__e(score_floor)+"</a>\n  ":'\n  <span class="klout-score" data-score="'+__e(score)+'" title="Klout Score is '+__e(score_floor)+'">'+__e(score_floor)+"</span>\n  ",__p+="\n</div>\n";return __p},metadata:{},name:"klout"})}),define("lib/views/StatusView",["require","lib/views/BaseView","lib/views/MediaView","lodash","tmpl!klout","moment"],function(e){var t=e("lib/views/BaseView"),n=e("lib/views/MediaView"),i=e("lodash"),a=e("tmpl!klout"),o=e("moment");return t.extend({className:"status",type:"status",$timestamp:null,subviews:{media:n},initialize:function(){t.prototype.initialize.apply(this,arguments);var e=this.dispatcher();e&&this.listenTo(e,"update-relative-dates",this.updateRelativeDates),this.listenTo(this.model,"change:relativeDateFormat",this.updateRelativeDates)},render:function(){var e=this.model&&this.model.get("klout");return e&&this.model.set("kloutHtml",a(e)),t.prototype.render.apply(this,arguments),e&&this.$el.addClass("has-klout"),this.$timestamp=this.$el.find(".timestamp"),this.updateRelativeDates(),this},updateRelativeDates:function(){if(this.model.generateFormattedDates(),this.$timestamp&&this.$timestamp.length>0){var e,t=this.model.get("formattedDate"),n=this.model.get("relativeDateFormat");
e=i.has(t,n)?t[n]:i.isFunction(n)?n.call(null,o(t.timestamp),i.extend({},t)):o(t.timestamp).format(n),this.$timestamp.text(e)}}})}),define("tmpl!status-twitter",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="body">\n  ',klout&&(__p+="\n    "+(null==(__t=kloutHtml)?"":__t)+"\n  "),__p+='\n  <a href="https://twitter.com/intent/user?screen_name='+__e(user.screen_name)+'" class="avatar">\n    <img src="'+__e(user.profile_image_url_https)+'" alt="" />\n  </a>\n  <div class="content">\n    <a href="https://twitter.com/'+__e(user.screen_name)+"/status/"+__e(id_str)+'" class="permalink">\n      <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n        <i class="permalink-logo icon-twitter-logo"></i> <span class="timestamp"></span>\n      </span>\n    </a>\n    <a class="author" href="https://twitter.com/intent/user?screen_name='+__e(user.screen_name)+'">\n      <span class="primary-name">'+__e(user.name),user.verified&&(__p+='<span class="verified"><i class="icon-twitter-verified-bg"></i><i class="icon-twitter-verified-check" title="Verified profile"></i></span>'),__p+='</span>\n      <span class="secondary-name"><span class="prefix">@</span>'+__e(user.screen_name)+'</span>\n    </a>\n    <div class="text">'+(null==(__t=formattedText)?"":__t)+"</div>\n\n    ",media.length>0&&(__p+="\n     "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+="\n\n    ",retweet&&(__p+='\n      <div class="retweeted-by"><i class="retweeted-by-icon icon-twitter-retweet"></i> <span class="retweeted-by-label" title="Retweeted">Retweeted</span> by <a href="https://twitter.com/intent/user?screen_name='+__e(retweeted_by_user.screen_name)+'" class="retweeted-by-user">',print(retweeted_by_user.name||retweeted_by_user.screen_name),__p+="</a></div>\n    "),__p+='\n\n    <div class="meta">\n      ',place&&(__p+='\n        <span class="place"><i class="icon-place"></i> '+__e(place.full_name)+"</span>\n      "),__p+='\n\n      <div class="intents">\n        <a href="'+__e(replyUrl)+'" class="intent intent-reply" title="Reply"><i class="intent-icon intent-icon-reply icon-twitter-reply"></i> <span class="intent-text">Reply</span></a>\n        <a href="'+__e(retweetUrl)+'" class="intent intent-retweet" title="Retweet"><i class="intent-icon intent-icon-retweet icon-twitter-retweet"></i> <span class="intent-text">Retweet</span></a>\n        <a href="'+__e(favUrl)+'" class="intent intent-favorite" title="Favorite"><i class="intent-icon intent-icon-favorite icon-twitter-favorite"></i> <span class="intent-text">Favorite</span></a>\n      </div>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-twitter"})}),define("lib/views/TwitterStatusView",["require","lib/views/StatusView","tmpl!status-twitter"],function(e){var t=e("lib/views/StatusView"),n=e("tmpl!status-twitter");return e(["twitter-widgets","twitter-impressions"]),t.extend({template:n,className:t.prototype.className+" twitter twitter-custom-tweet",hasLoggedImpression:!1,attributes:function(){return{"data-network":"twt","data-network-id":this.model.get("id_str")}},render:function(){return t.prototype.render.apply(this,arguments),this.renderImpressionTracking(),this},renderImpressionTracking:function(){var t=this;return this.$el.attr("data-twitter-tweet-id",this.model.get("entity_id")),this.$el.attr("data-twitter-tweet-context",""),this.$el.attr("data-partner","spredfast"),e(["twitter-impressions"],function(){twttr.impressions.ready(function(){t.hasLoggedImpression||(t.hasLoggedImpression=!0,twttr.impressions.logTweets(t.el))})}),this}})}),define("tmpl!status-facebook",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <a href="https://www.facebook.com/'+__e(from.id)+'" class="avatar"><img src="https://api.massrelevance.com/avatar/facebook?user_id='+__e(from.id)+'" alt="" /></a>\n  <div class="content">\n    <a href="'+__e(permalink)+'" class="permalink">\n      <i class="permalink-logo icon-facebook-logo"></i>\n    </a>\n    <div class="author">\n      ',__p+=formattedStory?'\n        <div class="fb-story">'+(null==(__t=formattedStory)?"":__t)+"</div>\n      ":'\n        <a href="https://www.facebook.com/'+__e(from.id)+'" class="primary-name">'+__e(from.name)+"</a>\n      ",__p+='\n    </div>\n\n    <div class="text">'+(null==(__t=formattedText)?"":__t)+"</div>\n\n    ",media.length>0&&(__p+="\n      "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+='\n\n    <div class="meta">\n      <span class="intents">\n        ',obj.action_available.comment&&(__p+='\n          <a href="'+__e(permalink)+'/comments"\n            data-app_id="'+__e(config.fbapp_id)+'"\n            data-post_id="'+__e(facebook_id)+'"\n            data-message="'+__e(originalStatus.message)+'"\n            data-name="'+__e(originalStatus.name)+'"\n            data-caption="'+__e(originalStatus.caption)+'"\n            data-link="'+__e(originalStatus.link)+'"\n            data-picture="'+__e(originalStatus.picture)+'"\n            data-photourl="'+__e(originalStatus.photo_url)+'"\n            data-description="'+__e(originalStatus.description)+'"\n            data-post_type="'+__e(originalStatus.type)+'"\n            data-author_id="'+__e(from.id)+'"\n            data-author="'+__e(from.name)+'"\n            data-permalink="'+__e(permalink)+'"\n            class="intent fb-intent intent-comment fb-comment-intent mr-action-click"\n            data-action="fb-comment"\n            data-timestamp="'+__e(formattedDate.timestamp)+'"\n            title="Comment">Comment</a> â¢\n        '),__p+="\n\n        ",obj.author&&author.is_page>0&&(__p+='\n          <a href="'+__e(permalink)+'/likes" data-id="'+__e(facebook_id)+'" data-liked="false" class="intent fb-intent intent-like mr-action-click" data-action="fb-like" title="Like">Like</a> â¢\n        '),__p+='\n\n        <a href="'+__e(permalink)+'/share" data-link="'+__e(permalink)+'" data-name="'+__e(originalStatus.message||permalink)+'" class="intent fb-intent intent-share mr-action-click" data-action="fb-share" title="Share">Share</a> â¢\n      </span>\n      <a href="'+__e(permalink)+'" class="timestamp permalink"></a>\n      ',place&&(__p+='\n        <span class="location">near '+__e(place.full_name)+"</span>\n      "),__p+="\n    </div>\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-facebook"})}),define("lib/views/FacebookStatusView",["require","lib/views/StatusView","lib/facebookApi","tmpl!status-facebook"],function(e){var t=e("lib/views/StatusView"),n=e("lib/facebookApi"),i=e("tmpl!status-facebook");return t.extend({template:i,className:t.prototype.className+" facebook",attributes:function(){return{"data-network":"fb","data-network-id":this.model.get("facebook_id")}},initialize:function(){t.prototype.initialize.apply(this,arguments),this.on("liked",function(e){e.text("Unlike")}),this.on("unliked",function(e){e.text("Like")}),n.init()},render:function(){return t.prototype.render.apply(this,arguments),this}})}),define("lib/instagramApi",["require","jquery","lodash","backbone-amd","q","./RespondingWindow"],function(e){var t=e("jquery"),n=e("lodash"),i=e("backbone-amd"),a=e("q"),o=e("./RespondingWindow"),r=i.Model.extend({defaults:function(){return{instagramApiUrl:"https://api.instagram.com/v1",intentDomain:"//massrelevance.com",accessToken:null}},initialize:function(){this.$body=t("body"),this.setAccessToken(),this.$body.trigger("instagram:ready")},setAccessToken:function(e){e?document.cookie="mr_inst_token="+encodeURIComponent(e):this.set("accessToken",document.cookie.replace(/(?:(?:^|.*;\s*)mr_inst_token\s*\=\s*([^;]*).*$)|^.*$/,"$1"))},likeIntent:function(e){var t=this,n=a.defer();return e=e||{},this.authenticate().then(function(n){return t._postLike(n,e)}).then(function(e){n.resolve(e)}).fail(function(){n.reject()}),n.promise},authenticate:function(){var e=this,t=a.defer();return this.get("accessToken")?t.resolve(this.get("accessToken")):o.getClient().open(this.get("intentDomain")+"/intents/instagram_auth?response_type=code&origin=viz&scope=likes").then(function(n){if(n.error)t.reject(n);else{var i=n.accessToken;e.set("accessToken",i),e.setAccessToken(i),t.resolve(i)}}).fail(function(){t.reject()}),t.promise},_postLike:function(e,i){var o=this,r=a.defer(),s="true"===i.liked,l=n.extend({"delete":s},i);return l.access_token=e,a(t.ajax({crossDomain:!0,dataType:"jsonp",url:this.get("intentDomain")+"/intents/instagram_like.json",data:l})).then(function(t){if(t.meta&&400===t.meta.code){if("OAuthParameterException"===t.meta.error_type)return o.deauthenticate(),o.authenticate().then(function(){return o._postLike(e,i)}).then(function(e){r.resolve(e)}).fail(function(){r.reject()})}else{var n=i.id||"unknown";o.trigger(s?"unlike":"like",n),r.resolve(!s)}}).fail(function(){r.reject()}),r.promise},deauthenticate:function(){this.set("accessToken",""),document.cookie="mr_inst_token=; expires=Thu, 01 Jan 1970 00:00:00 GMT;"}});o.init();var s;return{getClient:function(){if(!s)throw new Error("You must call instagramApi.init() before calling getClient()");return s},init:function(){s||(s=new r)}}}),define("tmpl!status-instagram",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <div class="left-content">\n    <a href="https://instagram.com/'+__e(user.username)+'" class="avatar">\n      <img src="'+__e(user.profile_picture)+'" alt="" />\n    </a>\n\n    <div class="author">\n      <a href="https://instagram.com/'+__e(user.username)+'" class="primary-name">'+__e(user.username)+'</a>\n\n      <a href="'+__e(link)+'" class="timestamp permalink"></a>\n    </div>\n\n    ',place&&place.name&&(__p+='\n      <div class="place"><i class="icon-place"></i>'+__e(place.name)+"</div>\n    "),__p+='\n  </div>\n\n  <div class="content">\n\n    <div class="media-container">\n      <a href="'+__e(link)+'" class="permalink">\n        <i class="permalink-logo icon-instagram-logo"></i>\n      </a>\n\n      ',media.length>0&&(__p+="\n        "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n      "),__p+='\n    </div>\n\n    <div class="text">',caption&&(__p+=null==(__t=caption.text)?"":__t),__p+='</div>\n\n    <div class="meta">\n      <span class="intents">\n        <a href="#" data-id="'+__e(id)+'" data-liked="false" class="intent instagram-intent intent-like mr-action-click" data-action="instagram-like" data-link="'+__e(link)+'" title="Like">\n          <i class="icon icon-instagram-like"></i>\n          Like\n        </a>\n      </span>\n      ',place&&place.name&&(__p+='\n        <span class="location">near '+__e(place.name)+"</span>\n      "),__p+="\n    </div>\n\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-instagram"})}),define("lib/views/InstagramStatusView",["require","lodash","jquery","lib/views/StatusView","lib/instagramApi","tmpl!status-instagram"],function(e){var t=e("lodash"),n=e("jquery"),i=e("lib/views/StatusView"),a=e("lib/instagramApi"),o=e("tmpl!status-instagram");return i.extend({template:o,className:i.prototype.className+" instagram",_positionAndShowIconHandler:null,_hideIconHandler:null,attributes:function(){return{"data-network":"inst","data-network-id":this.model.get("id")}},initialize:function(){i.prototype.initialize.apply(this,arguments),a.init()},render:function(){return i.prototype.render.apply(this,arguments),this.$icon=this.$(".permalink"),this.$container=this.$(".media-container"),this.$img=this.$(".media img"),this.positionAndShowIcon(),this._hideIconHandler=t.debounce(t.bind(this.hideIcon,this),50),this._positionAndShowIconHandler=t.debounce(t.bind(this.positionAndShowIcon,this),50),this.$img.one("load",this._positionAndShowIconHandler),n(window).on("resize",this._hideIconHandler),n(window).on("resize",this._positionAndShowIconHandler),this},hideIcon:function(){this.$icon.css("visibility","hidden")},positionAndShowIcon:function(){var e=2;this.$img.length>0&&(e=this.$container.width()-this.$img.position().left-this.$img.width()+2),this.$icon.css({right:e+"px",visibility:"visible"})},remove:function(){return i.prototype.remove.apply(this,arguments),this.$img.off("load",this._positionAndShowIconHandler),n(window).off("resize",this._positionAndShowIconHandler),n(window).off("resize",this._hideIconHandler),this}})}),define("tmpl!status-google",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <div class="author">\n    <a href="'+__e(url)+'" class="permalink">\n      <i class="permalink-logo icon-google-plus-logo"></i>\n    </a>\n    <a href="'+__e(actor.url)+'" class="avatar">\n      <img src="'+__e(actor.image.url)+'" alt="" />\n    </a>\n    <a href="'+__e(actor.url)+'" class="primary-name">'+__e(actor.displayName)+'</a>\n    <a href="'+__e(url)+'" class="timestamp permalink"></a>\n    ',place&&(__p+='\n      <div class="place"><i class="icon-place"></i>'+__e(place.name)+"</div>\n    "),__p+='\n  </div>\n\n  <div class="content">\n    <div class="text">'+(null==(__t=formattedText)?"":__t)+"</div>\n    \n    ",media.length>0&&(__p+="\n      "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+='\n\n    <div class="meta">\n      <span class="details">\n      </span>\n    </div>\n\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-google"})}),define("lib/views/GoogleStatusView",["require","lib/views/StatusView","tmpl!status-google"],function(e){var t=e("lib/views/StatusView"),n=e("tmpl!status-google");return t.extend({template:n,className:t.prototype.className+" google",attributes:function(){return{"data-network":"ggl","data-network-id":this.model.get("id")}},render:function(){return t.prototype.render.apply(this,arguments),this}})}),define("tmpl!status-getglue",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <a href="'+__e(actor.link)+'" class="avatar">\n    <img src="'+__e(actor.image)+'" alt="" />\n  </a>\n  <div class="content">\n    <a href="'+__e(canonical_link)+'" class="permalink">\n      <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n        <span class="timestamp"></span> <i class="permalink-logo permalink-logo-getglue icon-getglue-logo"></i>\n      </span>\n    </a>\n\n    <div class="author">\n      <a href="'+__e(actor.link)+'" class="primary-name">'+__e(actor.displayName)+'</a>\n      <a href="'+__e(actor.link)+'" class="secondary-name">'+__e(actor.preferredUsername)+'</a>\n    </div>\n\n    <div class="text">\n      <p class="text-header text-getglue-'+__e(verb)+'">'+__e(displayName)+"</p>\n      ",status.body&&(__p+=null==(__t=body)?"":__t),__p+="\n    </div>\n\n    ",media.length>0&&(__p+="\n      "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+='\n\n    <div class="meta">\n      <span class="details">\n        <a href="'+__e(canonical_link)+'" class="details-created-at" title="'+__e(formattedDate.full)+'"><i class="details-logo details-logo-getglue icon-getglue-logo"></i>'+__e(formattedDate.full)+"</a>\n        ",status.location&&(__p+='\n          <a href="'+__e(canonical_link)+'" class="place">from '+__e(location.name)+"</a>\n        "),__p+="\n      </span>\n    </div>\n\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-getglue"})}),define("lib/views/GetglueStatusView",["require","lib/views/StatusView","tmpl!status-getglue"],function(e){var t=e("lib/views/StatusView"),n=e("tmpl!status-getglue");return t.extend({template:n,className:t.prototype.className+" getglue",attributes:function(){return{"data-network":"glue","data-network-id":this.model.get("id")}},render:function(){return t.prototype.render.apply(this,arguments),this}})}),define("tmpl!status-rss",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <div class="content">\n    <a href="'+__e(link)+'" class="permalink">\n      <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n        <span class="timestamp"></span><i class="permalink-logo permalink-logo-rss icon-rss-logo"></i>\n      </span>\n    </a>\n\n    <div class="title"><a href="'+__e(link)+'">'+__e(title)+'</a></div>\n    <div class="author">\n      <span class="primary-name">'+__e(author)+'</span>\n    </div>\n    <div class="text">'+(null==(__t=description)?"":__t)+"</div>\n\n    ",media.length>0&&(__p+="\n     "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+='\n\n    <div class="meta">\n      <span class="details">\n        <a href="'+__e(link)+'" class="details-created-at" title="'+__e(formattedDate.full)+'"><i class="details-logo details-logo-rss icon-rss-logo"></i>'+__e(formattedDate.full)+"</a>\n        ",status.location&&(__p+='\n          <a href="'+__e(link)+'" class="place">from '+__e(location.name)+"</a>\n        "),__p+="\n      </span>\n    </div>\n\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-rss"})}),define("lib/views/RssStatusView",["require","lib/views/StatusView","tmpl!status-rss"],function(e){var t=e("lib/views/StatusView"),n=e("tmpl!status-rss");return t.extend({template:n,className:t.prototype.className+" rss",attributes:function(){return{"data-network":"rss","data-network-id":this.model.get("id")}},render:function(){return t.prototype.render.apply(this,arguments),this}})}),define("tmpl!status-youtube",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <a href="'+__e(link)+'" class="permalink">\n    <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n      <i class="permalink-logo icon-youtube-logo"></i> <span class="timestamp"></span>\n    </span>\n  </a>\n\n  <div class="title">"'+__e(title)+'"</div>\n\n  <div class="player">\n    ',media.length>0&&(__p+="\n     "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n    "),__p+='\n\n    <span class="attribution">\n      <span class="attribution-label">by</span>\n      <a class="author" href="//youtube.com/channel/'+__e(snippet.channelId)+'">'+__e(channelTitle)+'</a>\n    </span>\n\n    <span class="duration">'+__e(formattedDuration)+"</span>\n  </div> \n</div>";return __p},metadata:{customizable:!0},name:"status-youtube"})}),define("lib/views/YoutubeStatusView",["require","lib/views/StatusView","tmpl!status-youtube"],function(e){var t=e("lib/views/StatusView"),n=e("tmpl!status-youtube");return t.extend({template:n,className:t.prototype.className+" youtube",attributes:function(){return{"data-network":"youtube","data-network-id":this.model.get("id")}},render:function(){return t.prototype.render.apply(this,arguments),this}})}),define("lib/views/statusViewFactory",["lib/views/StatusView","lib/views/TwitterStatusView","lib/views/FacebookStatusView","lib/views/InstagramStatusView","lib/views/GoogleStatusView","lib/views/GetglueStatusView","lib/views/RssStatusView","lib/views/YoutubeStatusView"],function(e,t,n,i,a,o,r,s){var l=function(t,n){var i;if("undefined"==typeof n&&(n=l.constructors),t){var a=t.get("sourceName");void 0!==n[a]&&(i=n[a])}return void 0===i&&(i=e),i};return l.constructors={twitter:t,facebook:n,instagram:i,google:a,getglue:o,rss:r,youtube:s},l.factory=function(e){return function(){return l.apply(this,arguments).extend({defaults:e||{}})}},l}),define("componentStyle!status-1",{render:function(){}}),define("tmpl!status-facebook-media-first",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+="\n  "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n"),__p+='\n\n<div class="status-overlay">\n  <div class="mr-action-click toggle-status open" data-allow-default="false" data-action="toggleDrawer" onclick>\n    <i class="icon-chevron-down"></i>\n    <i class="icon-chevron-up"></i>\n  </div>\n  <div class="status-drawer">\n    <div class="body">\n      <a href="https://www.facebook.com/'+__e(from.id)+'" class="avatar"><img src="https://api.massrelevance.com/avatar/facebook?user_id='+__e(from.id)+'" alt="" /></a>\n      <div class="content">\n        <a href="'+__e(permalink)+'" class="permalink">\n          <i class="permalink-logo icon-facebook-logo"></i>\n        </a>\n        <div class="author">\n          ',__p+=formattedStory?'\n            <div class="fb-story">'+(null==(__t=formattedStory)?"":__t)+"</div>\n          ":'\n            <a href="https://www.facebook.com/'+__e(from.id)+'" class="primary-name">'+__e(from.name)+"</a>\n          ",__p+='\n        </div>\n\n        <div class="text">'+(null==(__t=formattedText)?"":__t)+'</div>\n\n        <div class="meta">\n          <span class="intents">\n          ',obj.action_available.comment&&(__p+='\n            <a href="'+__e(permalink)+'/comments"\n              data-app_id="'+__e(config.fbapp_id)+'"\n              data-post_id="'+__e(facebook_id)+'"\n              data-message="'+__e(originalStatus.message)+'"\n              data-name="'+__e(originalStatus.name)+'"\n              data-caption="'+__e(originalStatus.caption)+'"\n              data-link="'+__e(originalStatus.link)+'"\n              data-picture="'+__e(originalStatus.picture)+'"\n              data-photourl="'+__e(originalStatus.photo_url)+'"\n              data-description="'+__e(originalStatus.description)+'"\n              data-post_type="'+__e(originalStatus.type)+'"\n              data-author_id="'+__e(from.id)+'"\n              data-author="'+__e(from.name)+'"\n              data-permalink="'+__e(permalink)+'"\n              data-timestamp="'+__e(formattedDate.timestamp)+'"\n              class="intent fb-intent intent-comment fb-comment-intent mr-action-click"\n              data-action="fb-comment"\n              title="Comment">Comment</a> â¢\n            '),__p+="\n            ",obj.author&&author.is_page>0&&(__p+='\n              <a href="'+__e(permalink)+'/likes" data-id="'+__e(facebook_id)+'" data-liked="false" class="intent fb-intent intent-like mr-action-click" data-action="fb-like" title="Like">Like</a> â¢\n            '),__p+='\n            <a href="'+__e(permalink)+'/share" data-link="'+__e(permalink)+'" data-name="'+__e(originalStatus.message||permalink)+'" class="intent fb-intent intent-share mr-action-click" data-action="fb-share" title="Share">Share</a> â¢\n          </span>\n          <a href="'+__e(permalink)+'" class="timestamp permalink"></a>\n          ',place&&(__p+='\n            <span class="location">near '+__e(place.full_name)+"</span>\n          "),__p+="\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-facebook-media-first"})}),define("lib/views/mixins/MediaFirstViewMixin",["require","jquery"],function(e){var t=e("jquery");return{handlers:{toggleDrawer:function(e){e.preventDefault(),this.toggleStatusDrawer(t(e.currentTarget))}},toggleStatusDrawer:function(e){var t=this.$el.find(".status-drawer"),n=t.get(0);n&&(this.statusDrawerClosed=!!this.statusDrawerClosed,this.statusDrawerClosed?(e.removeClass("closed").addClass("open"),t.animate({height:n.scrollHeight},{done:function(){t.height("auto")}})):(e.removeClass("open").addClass("closed"),t.animate({height:0})),this.analytics().trackEvent({category:"viz:toggle",action:"drawer",label:this.statusDrawerClosed?"open":"close"}),this.statusDrawerClosed=!this.statusDrawerClosed)}}}),define("lib/views/FacebookMediaFirstStatusView",["require","lib/views/FacebookStatusView","tmpl!status-facebook-media-first","lib/views/mixins/MediaFirstViewMixin"],function(e){var t=e("lib/views/FacebookStatusView"),n=e("tmpl!status-facebook-media-first"),i=e("lib/views/mixins/MediaFirstViewMixin");return t.extend({template:n}).extend(i)}),define("tmpl!status-getglue-media-first",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+="\n  "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n"),__p+='\n\n<div class="status-overlay">\n  <div class="mr-action-click toggle-status open" data-allow-default="false" data-action="toggleDrawer" onclick>\n    <i class="icon-chevron-down"></i>\n    <i class="icon-chevron-up"></i>\n  </div>\n  <div class="status-drawer">\n    <div class="body">\n      <a href="'+__e(actor.link)+'" class="avatar">\n        <img src="'+__e(actor.image)+'" alt="" />\n      </a>\n      <div class="content">\n        <a href="'+__e(canonical_link)+'" class="permalink">\n          <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n            <span class="timestamp"></span> <i class="permalink-logo permalink-logo-getglue icon-getglue-logo"></i>\n          </span>\n        </a>\n\n        <div class="author">\n          <a href="'+__e(actor.link)+'" class="primary-name">'+__e(actor.displayName)+'</a>\n          <a href="'+__e(actor.link)+'" class="secondary-name">'+__e(actor.preferredUsername)+'</a>\n        </div>\n\n        <div class="text">\n          <p class="text-header text-getglue-'+__e(verb)+'">'+__e(displayName)+"</p>\n          ",status.body&&(__p+=null==(__t=body)?"":__t),__p+='\n        </div>\n\n        <div class="meta">\n          <span class="details">\n            <a href="'+__e(canonical_link)+'" class="details-created-at" title="'+__e(formattedDate.full)+'"><i class="details-logo details-logo-getglue icon-getglue-logo"></i>'+__e(formattedDate.full)+"</a>\n            ",status.location&&(__p+='\n              <a href="'+__e(canonical_link)+'" class="place">from '+__e(location.name)+"</a>\n            "),__p+="\n          </span>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-getglue-media-first"})}),define("lib/views/GetglueMediaFirstStatusView",["require","lib/views/GetglueStatusView","tmpl!status-getglue-media-first","lib/views/mixins/MediaFirstViewMixin"],function(e){var t=e("lib/views/GetglueStatusView"),n=e("tmpl!status-getglue-media-first"),i=e("lib/views/mixins/MediaFirstViewMixin");return t.extend({template:n}).extend(i)}),define("tmpl!status-google-media-first",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+="\n  "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n"),__p+='\n\n<div class="status-overlay">\n  <div class="mr-action-click toggle-status open" data-allow-default="false" data-action="toggleDrawer" onclick>\n    <i class="icon-chevron-down"></i>\n    <i class="icon-chevron-up"></i>\n  </div>\n  <div class="status-drawer">\n    <div class="body">\n      <div class="author">\n        <a href="'+__e(url)+'" class="permalink">\n          <i class="permalink-logo icon-google-plus-logo"></i>\n        </a>\n        <a href="'+__e(actor.url)+'" class="avatar">\n          <img src="'+__e(actor.image.url)+'" alt="" />\n        </a>\n        <a href="'+__e(actor.url)+'" class="primary-name">'+__e(actor.displayName)+'</a>\n        <a href="'+__e(url)+'" class="timestamp permalink"></a>\n        ',place&&(__p+='\n          <div class="place"><i class="icon-place"></i>'+__e(place.name)+"</div>\n        "),__p+='\n      </div>\n\n      <div class="content">\n        <div class="text">'+(null==(__t=formattedText)?"":__t)+'</div>\n\n        <div class="meta">\n          <span class="details">\n          </span>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-google-media-first"})}),define("lib/views/GoogleMediaFirstStatusView",["require","lib/views/GoogleStatusView","tmpl!status-google-media-first","lib/views/mixins/MediaFirstViewMixin"],function(e){var t=e("lib/views/GoogleStatusView"),n=e("tmpl!status-google-media-first"),i=e("lib/views/mixins/MediaFirstViewMixin");return t.extend({template:n}).extend(i)}),define("tmpl!status-instagram-media-first",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="media-container">\n  ',media.length>0&&(__p+="\n    "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n  "),__p+='\n</div>\n\n<div class="status-overlay">\n  <div class="mr-action-click toggle-status open" data-allow-default="false" data-action="toggleDrawer" onclick>\n    <i class="icon-chevron-down"></i>\n    <i class="icon-chevron-up"></i>\n  </div>\n  <div class="status-drawer">\n    <div class="body">\n      <div class="left-content">\n        <a href="https://instagram.com/'+__e(user.username)+'" class="avatar">\n          <img src="'+__e(user.profile_picture)+'" alt="" />\n        </a>\n\n        <div class="author">\n          <a href="https://instagram.com/'+__e(user.username)+'" class="primary-name">'+__e(user.username)+'</a>\n\n          <a href="'+__e(link)+'" class="timestamp permalink"></a>\n        </div>\n\n        ',place&&place.name&&(__p+='\n          <div class="place"><i class="icon-place"></i>'+__e(place.name)+"</div>\n        "),__p+='\n\n        <a href="'+__e(link)+'" class="network-permalink">\n          <i class="instagram-logo icon-instagram-logo"></i>\n        </a>\n      </div>\n      <div class="content">\n\n        <div class="text">',caption&&(__p+=null==(__t=caption.text)?"":__t),__p+='</div>\n\n        <div class="meta">\n          <span class="intents">\n            <a href="#" data-id="'+__e(id)+'" data-liked="false" class="intent instagram-intent intent-like mr-action-click" data-action="instagram-like" data-link="'+__e(link)+'" title="Like">\n              <i class="icon icon-instagram-like"></i>\n              Like\n            </a>\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-instagram-media-first"})}),define("lib/views/InstagramMediaFirstStatusView",["require","lib/views/InstagramStatusView","tmpl!status-instagram-media-first","lib/views/mixins/MediaFirstViewMixin"],function(e){var t=e("lib/views/InstagramStatusView"),n=e("tmpl!status-instagram-media-first"),i=e("lib/views/mixins/MediaFirstViewMixin");return t.extend({template:n}).extend(i)}),define("tmpl!status-rss-media-first",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+="\n "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n"),__p+='\n\n<div class="status-overlay">\n  <div class="mr-action-click toggle-status open" data-allow-default="false" data-action="toggleDrawer" onclick>\n    <i class="icon-chevron-down"></i>\n    <i class="icon-chevron-up"></i>\n  </div>\n  <div class="status-drawer">\n    <div class="body">\n      <div class="content">\n        <a href="'+__e(link)+'" class="permalink">\n          <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n            <span class="timestamp"></span><i class="permalink-logo permalink-logo-rss icon-rss-logo"></i>\n          </span>\n        </a>\n\n        <div class="title"><a href="'+__e(link)+'">'+__e(title)+'</a></div>\n        <div class="author">\n          <span class="primary-name">'+__e(author)+'</span>\n        </div>\n        <div class="text">'+(null==(__t=description)?"":__t)+'</div>\n\n        <div class="meta">\n          <span class="details">\n            <a href="'+__e(link)+'" class="details-created-at" title="'+__e(formattedDate.full)+'"><i class="details-logo details-logo-rss icon-rss-logo"></i>'+__e(formattedDate.full)+"</a>\n            ",status.location&&(__p+='\n              <a href="'+__e(link)+'" class="place">from '+__e(location.name)+"</a>\n            "),__p+="\n          </span>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>\n";
return __p},metadata:{customizable:!0},name:"status-rss-media-first"})}),define("lib/views/RssMediaFirstStatusView",["require","lib/views/RssStatusView","tmpl!status-rss-media-first","lib/views/mixins/MediaFirstViewMixin"],function(e){var t=e("lib/views/RssStatusView"),n=e("tmpl!status-rss-media-first"),i=e("lib/views/mixins/MediaFirstViewMixin");return t.extend({template:n}).extend(i)}),define("tmpl!status-twitter-media-first",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)media.length>0&&(__p+="\n "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n"),__p+='\n\n<div class="status-overlay">\n  <div class="mr-action-click toggle-status open" data-allow-default="false" data-action="toggleDrawer" onclick>\n    <i class="icon-chevron-down"></i>\n    <i class="icon-chevron-up"></i>\n  </div>\n  <div class="status-drawer">\n    <div class="body">\n      ',klout&&(__p+="\n        "+(null==(__t=kloutHtml)?"":__t)+"\n      "),__p+='\n      <a href="https://twitter.com/intent/user?screen_name='+__e(user.screen_name)+'" class="avatar">\n        <img src="'+__e(user.profile_image_url_https)+'" alt="" />\n      </a>\n      <div class="content">\n        <a href="https://twitter.com/'+__e(user.screen_name)+"/status/"+__e(id_str)+'" class="permalink">\n          <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n            <i class="permalink-logo icon-twitter-logo"></i> <span class="timestamp"></span>\n          </span>\n        </a>\n        <a class="author" href="https://twitter.com/intent/user?screen_name='+__e(user.screen_name)+'">\n          <span class="primary-name">'+__e(user.name),user.verified&&(__p+='<span class="verified"><i class="icon-twitter-verified-bg"></i><i class="icon-twitter-verified-check" title="Verified profile"></i></span>'),__p+='</span>\n          <span class="secondary-name"><span class="prefix">@</span>'+__e(user.screen_name)+'</span>\n        </a>\n        <div class="text">'+(null==(__t=formattedText)?"":__t)+"</div>\n\n        ",retweet&&(__p+='\n          <div class="retweeted-by"><i class="retweeted-by-icon icon-twitter-retweet"></i> <span class="retweeted-by-label" title="Retweeted">Retweeted</span> by <a href="https://twitter.com/intent/user?screen_name='+__e(retweeted_by_user.screen_name)+'" class="retweeted-by-user">',print(retweeted_by_user.name||retweeted_by_user.screen_name),__p+="</a></div>\n        "),__p+='\n\n        <div class="meta">\n          ',place&&(__p+='\n            <span class="place"><i class="icon-place"></i> '+__e(place.full_name)+"</span>\n          "),__p+='\n\n          <div class="intents">\n            <a href="'+__e(replyUrl)+'" class="intent intent-reply" title="Reply"><i class="intent-icon intent-icon-reply icon-twitter-reply"></i> <span class="intent-text">Reply</span></a>\n            <a href="'+__e(retweetUrl)+'" class="intent intent-retweet" title="Retweet"><i class="intent-icon intent-icon-retweet icon-twitter-retweet"></i> <span class="intent-text">Retweet</span></a>\n            <a href="'+__e(favUrl)+'" class="intent intent-favorite" title="Favorite"><i class="intent-icon intent-icon-favorite icon-twitter-favorite"></i> <span class="intent-text">Favorite</span></a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-twitter-media-first"})}),define("lib/views/TwitterMediaFirstStatusView",["require","lib/views/TwitterStatusView","tmpl!status-twitter-media-first","lib/views/mixins/MediaFirstViewMixin"],function(e){var t=e("lib/views/TwitterStatusView"),n=e("tmpl!status-twitter-media-first"),i=e("lib/views/mixins/MediaFirstViewMixin");return t.extend({template:n}).extend(i)}),define("tmpl!status-youtube-media-first",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="body">\n  <a href="'+__e(link)+'" class="permalink content-permalink">\n    <span class="permalink-created-at" title="'+__e(formattedDate.full)+'">\n      <i class="permalink-logo icon-youtube-logo"></i> <span class="timestamp"></span>\n    </span>\n  </a>\n\n  ',media.length>0&&(__p+="\n   "+(null==(__t=subview("media",media.at(media.length-1)))?"":__t)+"\n  "),__p+='\n\n  <a href="'+__e(link)+'" class="permalink modal-permalink">\n    <i class="icon-youtube-logo-copy permalink-logo"></i>\n  </a>\n\n  <span class="attribution">\n    <span class="attribution-label">by</span>\n    <a class="author" href="//youtube.com/channel/'+__e(snippet.channelId)+'">'+__e(channelTitle)+'</a>\n  </span>\n\n  <span class="duration">'+__e(formattedDuration)+"</span>\n</div>";return __p},metadata:{customizable:!0},name:"status-youtube-media-first"})}),define("lib/views/YoutubeMediaFirstStatusView",["require","lib/views/YoutubeStatusView","tmpl!status-youtube-media-first","lib/views/mixins/MediaFirstViewMixin"],function(e){var t=e("lib/views/YoutubeStatusView"),n=e("tmpl!status-youtube-media-first"),i=e("lib/views/mixins/MediaFirstViewMixin");return t.extend({template:n}).extend(i)}),define("components/media-first-status-1/main",["require","lodash","massrel-js-backbone-2","lib/views/statusViewFactory","lib/BaseComponent","componentStyle!status-1","lib/views/FacebookMediaFirstStatusView","lib/views/GetglueMediaFirstStatusView","lib/views/GoogleMediaFirstStatusView","lib/views/InstagramMediaFirstStatusView","lib/views/RssMediaFirstStatusView","lib/views/TwitterMediaFirstStatusView","lib/views/YoutubeMediaFirstStatusView"],function(e){var t=e("lodash"),n=e("massrel-js-backbone-2"),i=e("lib/views/statusViewFactory"),a=e("lib/BaseComponent"),o=e("componentStyle!status-1"),r=e("lib/views/FacebookMediaFirstStatusView"),s=e("lib/views/GetglueMediaFirstStatusView"),l=e("lib/views/GoogleMediaFirstStatusView"),u=e("lib/views/InstagramMediaFirstStatusView"),c=e("lib/views/RssMediaFirstStatusView"),d=e("lib/views/TwitterMediaFirstStatusView"),p=e("lib/views/YoutubeMediaFirstStatusView"),h=t.extend({},i.constructors,{facebook:r,getglue:s,google:l,instagram:u,rss:c,twitter:d,youtube:p});return a.extend({styles:o,initialize:function(){a.prototype.initialize.apply(this,arguments);var e=this.get("config");this._statusViewFactory=i.factory({componentId:e.id,componentType:e.type,analytics:this.get("analytics"),dispatcher:this.get("dispatcher")})},mediaFirstStatusViewFactory:function(e,t){return this._statusViewFactory(e,t||h)},create:function(){return{modelFactory:n.statusModelFactory,viewFactory:t.bind(this.mediaFirstStatusViewFactory,this)}},render:function(){this.setupEvents()},setupEvents:function(){var e=this.get("dispatcher");this.listenTo(e,"#"+this.id+":findStatusView",function(t){var n,i=t.payload&&t.payload.model;i&&(n=this.mediaFirstStatusViewFactory(i)),i&&n&&e.trigger("showStatusAndView",{model:i,view:n})})}}).exports()}),define("lib/views/BaseButtonView",["require","lib/views/BaseView"],function(e){var t=e("lib/views/BaseView"),n=t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:disabled",function(e,t){this.$el.toggleClass("disabled",t)})}});return n}),define("components/follow-button-1/models/FollowButtonModel",["require","lodash","backbone-amd","massrel-js"],function(e){var t=e("lodash"),n=e("backbone-amd"),i=e("massrel-js");return n.Model.extend({defaults:{buttonStyle:"silver",buttonBorderRadius:3,buttonText:"+",original_referer:i.intents.original_referer,screen_name:"spredfast",disabled:!1},initialize:function(e){this.set(t.pick(e.config,t.keys(this.defaults))),this.on({"change:screen_name":this.generateUrl,"change:original_referer":this.generateUrl}),this.generateUrl()},generateUrl:function(){var e={},t=this.get("original_referer");return t&&(e.original_referer=t),this.set("url",i.intents.user(this.get("screen_name"),e)),this}})}),define("tmpl!follow-button",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<i class="icon icon-twitter-logo"></i>\n<span class="button-text">'+__e(buttonText)+"</span>\n";return __p},metadata:{},name:"follow-button"})}),define("components/follow-button-1/views/FollowButtonView",["lib/views/BaseButtonView","components/follow-button-1/models/FollowButtonModel","tmpl!follow-button"],function(e,t,n){return require(["twitter-widgets"],function(){}),e.extend({template:n,className:function(){var e=this.model.get("buttonStyle");return"button twitter follow-button"+(e?" button-style-"+e:"")},tagName:"a",attributes:{href:""},events:{click:function(){return this.$el.hasClass("disabled")||this.model.get("disabled")?!1:void 0}},initialize:function(n){var i=this;void 0===n.model&&(i.model=new t),e.prototype.initialize.apply(this,arguments),i.model.on("change:url",function(){i.$el.attr("href",i.model.get("url"))})},render:function(){var t=this;return e.prototype.render.apply(t,arguments),t.$el.attr("href",t.model.get("url")),t.$el.css("border-radius",this.model.get("buttonBorderRadius")+"px"),t}})}),define("componentStyle!follow-button-1",{render:function(){}}),define("components/follow-button-1/main",["jquery","lib/BaseComponent","components/follow-button-1/views/FollowButtonView","components/follow-button-1/models/FollowButtonModel","componentStyle!follow-button-1"],function(e,t,n,i,a){var o=function(t,a,o){var r=this;r.config=t,r.id=a,r.dispatcher=o,r.$el=e("#"+a),r.model=new i(r.config.settings),r.view=new n({dispatcher:o,componentType:t.type,componentId:a,model:r.model})};return o.prototype.render=function(){var e=this;e.$el.html(e.view.render().el)},t.extend({styles:a,exports:{FollowButton:o,FollowButtonView:n,FollowButtonModel:i},create:function(){var e=new o(this.get("config"),this.get("id"),this.get("dispatcher"));return this.set("followButton",e),{followButton:e}},render:function(){this.hasElement()&&this.get("followButton").render()}}).exports()}),define("components/fb-like-button-1/models/FbLikeButtonModel",["require","backbone-amd"],function(e){var t=e("backbone-amd");return t.Model.extend({defaults:function(){return{action:"like",colorscheme:"light",href:"",kid_directed_site:!1,layout:"button",ref:"spredfast",share:!1,show_faces:!1,width:null}}})}),define("tmpl!fb-like-button",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="fb-like"\n    data-action="'+__e(action)+'"\n    data-colorscheme="'+__e(colorscheme)+'"\n    data-href="'+__e(href)+'"\n    data-layout="'+__e(layout)+'"\n    data-share="'+__e(share)+'"\n    data-show-faces="'+__e(show_faces)+'"\n    data-width="'+__e(width)+'"\n    data-ref="'+__e(ref)+'"\n></div>\n';return __p},metadata:{},name:"fb-like-button"})}),define("components/fb-like-button-1/views/FbLikeButtonView",["require","lodash","lib/views/BaseView","../models/FbLikeButtonModel","tmpl!fb-like-button","lib/facebookApi"],function(e){var t=e("lodash"),n=e("lib/views/BaseView"),i=e("../models/FbLikeButtonModel"),a=e("tmpl!fb-like-button"),o=e("lib/facebookApi");return n.extend({tagName:"span",className:"button facebook fb-like-button",template:a,initialize:function(e){e.model||(this.model=new i),this.listenTo(this.model,"change",this.render)},renderFacebookParse:function(){return window.FB.XFBML.parse(),this},render:function(){return n.prototype.render.apply(this,arguments),o.init(t.bind(this.renderFacebookParse,this)),this}})}),define("componentStyle!fb-like-button-1",{render:function(){}}),define("components/fb-like-button-1/main",["require","jquery","lib/BaseComponent","./models/FbLikeButtonModel","./views/FbLikeButtonView","componentStyle!fb-like-button-1"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("./models/FbLikeButtonModel"),a=e("./views/FbLikeButtonView"),o=e("componentStyle!fb-like-button-1"),r=function(e,n,o){this.config=e,this.id=n,this.dispatcher=o,"standard"===e.settings.layout&&(e.settings.layout="button"),this.$el=t("#"+n),this.model=new i(this.config.settings),this.view=new a({dispatcher:o,componentType:e.type,componentId:n,model:this.model})};return r.prototype.render=function(){this.$el.html(this.view.render().el)},n.extend({styles:o,exports:{FbLikeButton:r,FbLikeButtonView:a,FbLikeButtonModel:i},create:function(){var e=new r(this.get("config"),this.get("id"),this.get("dispatcher"));return this.set("likeButton",e),{likeButton:e}},render:function(){this.hasElement()&&this.get("likeButton").render()}}).exports()}),define("components/photo-share-button-2/js/models/PhotoShareButtonModel",["require","backbone-amd"],function(e){var t=e("backbone-amd");return t.Model.extend({defaults:{buttonStyle:"color",buttonText:"Share Photo",buttonBorderRadius:3}})}),define("tmpl!photo-share-button",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<i class="icon icon-camera"></i>\n<span class="button-text">'+__e(buttonText)+"</span>\n";return __p},metadata:{},name:"photo-share-button"})}),define("components/photo-share-button-2/js/views/PhotoShareButtonView",["require","jquery","lodash","lib/views/BaseView","tmpl!photo-share-button"],function(e){var t=e("jquery"),n=e("lodash"),i=e("lib/views/BaseView"),a=e("tmpl!photo-share-button");return i.extend({attributes:{href:"","data-action":"showUploadView"},tagName:"a",className:function(){var e=this.model.get("buttonStyle");return"button mr-action-click photo-share-button"+(e?" button-style-"+e:"")},template:a,handlers:{showUploadView:function(e){e.preventDefault();var i=this.options.showUploadViewHandler;n.isFunction(i)&&i(),this.dispatcher().trigger("showUploadView");var a,o,r=navigator.userAgent;-1!==(a=r.indexOf("Chrome"))&&(o="Chrome"),"Chrome"===o&&t(".upload-button input").css("font-size","0px")}},render:function(){var e=this;return i.prototype.render.apply(e,arguments),e.$el.css("border-radius",this.model.get("buttonBorderRadius")+"px"),this}})}),define("components/photo-share-button-2/js/utils",["require","lodash","jquery"],function(e){function t(e,t){var n=(e||"").split(/\s|,/);return n=o.map(n,function(e){for(e=r.trim(e);"#"===e.charAt(0);)e=e.substring(1);return e}),n=o.reject(n,function(e){return 0===e.length}),t&&(n=o.map(n,function(e){return"#"+e})),n}function n(e){return s-l-(e||"").length}function i(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function a(e,t){var n=r.now(),i=n+t;return function(){var t=arguments;o.delay(function(){e.apply(this,t)},Math.max(i-r.now(),0))}}var o=e("lodash"),r=e("jquery"),s=140,l=23;return{emptyPromise:function(){return{then:r.noop,call:r.noop}},getCookie:i,minDelayedExecutor:a,parseHashtags:t,tweetCharacterCount:n}}),define("components/photo-share-button-2/js/models/PhotoShareDialogModel",["require","lodash","../utils","backbone-amd"],function(e){var t=e("lodash"),n=e("../utils"),i=e("backbone-amd");return i.Model.extend({defaults:{errors:new i.Collection,facebookMessage:"",networks:["twitter","facebook"],step:"file-select",successfulShares:0,twitterMessage:""},initialize:function(e){var i=t.select(["facebook","twitter"],function(t){return!!e[t]});this.set("networks",i);var a=e.twitterSettings||{},o=n.parseHashtags(a.hashtags,!0).join(" "),r=a.text;return this.set("twitterMessage",r+" "+o),this}})}),define("tmpl!photo-share-dialog",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)__p+='<h2>Share your photo</h2>\n\n<div class="file-select">\n  <div class="upload-target"></div>\n</div>\n\n<div class="share '+(null==(__t=1===networks.length?"single-network":"")?"":__t)+'">\n\n  <div class="preview-content image-preview">\n    <div class="image-preview-wrapper">\n      <div class="button change-image">change picture</div>\n      <div class="loading-indicator"></div>\n      <div class="loading-text">Loading image preview</div>\n    </div>\n  </div>\n\n  <div class="preview-content post-info">\n    ',facebook&&(__p+='\n      <div class="facebook-share-block share-block '+(null==(__t=twitter?"":"open")?"":__t)+'">\n        ',1!==networks.length&&(__p+='\n          <label>\n            <input type="checkbox" class="share-block-toggle" data-network="facebook" name="facebook-post-option"/>\n            <i class="icon-facebook-logo network-logo"></i>\n            <span class="facebook-label">Share on Facebook</span>\n          </label>\n        '),__p+='\n        <div class="share-form">\n          <div class="facebook-header facebook-text">\n            Post to Facebook\n          </div>\n          <textarea class="message-area facebook-message" data-network="facebook" placeholder="Write something...">'+(null==(__t=facebook.message)?"":__t)+'</textarea>\n          <a href="#" class="share-action facebook-text clearfix" data-network="facebook">Post</a>\n        </div>\n        <div class="share-thanks">\n          <h3>Thanks for sharing</h3>\n          ',twitter&&(__p+="\n            <p>You can also share this photo to Twitter below, or close this window if you're done.</p>\n          "),__p+='\n          <a href="#" class="button modal-close mr-action-click" data-action="close">I\'m Done.</a>\n        </div>\n        <div class="waiting-overlay">\n          <span class="overlay-text authorizing">Authorizing...</span>\n          <span class="overlay-text uploading">Uploading your image</span>\n        </div>\n      </div>\n    '),__p+="\n\n    ",twitter&&(__p+='\n    <div class="twitter-share-block share-block '+(null==(__t=facebook?"":"open")?"":__t)+'">\n      ',1!==networks.length&&(__p+='\n        <label>\n          <input type="checkbox" class="share-block-toggle" data-network="twitter" name="twitter-post-option"/>\n          <i class="icon-twitter-logo network-logo"></i>\n          <span class="twitter-label">Share on Twitter</span>\n        </label>\n      '),__p+='\n      <div class="share-form">\n        <div class="twitter-header">\n          Post to Twitter\n        </div>\n        <textarea class="message-area twitter-message" data-network="twitter" placeholder="Write something...">'+(null==(__t=twitter.message)?"":__t)+'</textarea>\n        <a href="#" class="share-action twitter-share-action clearfix" data-network="twitter">Tweet</a>\n        <span class="character-counter clearfix">'+(null==(__t=twitter.initial_character_count)?"":__t)+'</span>\n      </div>\n      <div class="share-thanks">\n        <h3>Thanks for sharing</h3>\n        ',facebook&&(__p+="\n          <p>You can also share this photo to Facebook above, or close this window if you're done.</p>\n        "),__p+='\n        <a href="#" class="button modal-close mr-action-click" data-action="close">I\'m Done.</a>\n      </div>\n      <div class="waiting-overlay">\n        <span class="overlay-text authorizing">Authorizing...</span>\n        <span class="overlay-text uploading">Uploading your image</span>\n      </div>\n    </div>\n    '),__p+='\n  </div>\n</div>\n\n<div class="errors"></div>\n';return __p},metadata:{},name:"photo-share-dialog"})}),define("tmpl!photo-share-upload-zone",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<div class="qq-uploader">\n  <div class="qq-upload-drop-area">\n    <i class="icon-upload"></i>\n    <p>Drop your image here.</p>\n  </div>\n  <div class="qq-upload-button upload-button">\n    <i class="icon-upload"></i>\n    <p class="drag-and-drop">Drag and drop an image, or click to select a photo.</p>\n    <p class="click-only">Click to select a photo.</p>\n  </div>\n  <span class="qq-drop-processing">\n    <span>Processing file.</span>\n    <span class="qq-drop-processing-spinner"></span>\n  </span>\n  <ul class="qq-upload-list"></ul>\n</div>\n\n';return __p},metadata:{},name:"photo-share-upload-zone"})}),define("fine-uploader/s3.fineuploader",["require"],function(require){var qq=function(e){return{hide:function(){return e.style.display="none",this},attach:function(t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),function(){qq(e).detach(t,n)}},detach:function(t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n),this},contains:function(t){return t?e===t?!0:e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e)):!1},insertBefore:function(t){return t.parentNode.insertBefore(e,t),this},remove:function(){return e.parentNode.removeChild(e),this},css:function(t){if(null!=t.opacity){var n=typeof e.filters;"string"!=typeof e.style.opacity&&"undefined"!==n&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")")}return qq.extend(e.style,t),this},hasClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return n.test(e.className)},addClass:function(t){return qq(e).hasClass(t)||(e.className+=" "+t),this},removeClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(t){var n,i=[];return e.querySelectorAll?e.querySelectorAll("."+t):(n=e.getElementsByTagName("*"),qq.each(n,function(e,n){qq(n).hasClass(t)&&i.push(n)}),i)},children:function(){for(var t=[],n=e.firstChild;n;)1===n.nodeType&&t.push(n),n=n.nextSibling;return t},setText:function(t){return e.innerText=t,e.textContent=t,this},clearText:function(){return qq(e).setText("")}}};return qq.log=function(e,t){window.console&&(t&&"info"!==t?window.console[t]?window.console[t](e):window.console.log("<"+t+"> "+e):window.console.log(e))},qq.isObject=function(e){return e&&!e.nodeType&&"[object Object]"===Object.prototype.toString.call(e)},qq.isFunction=function(e){return"function"==typeof e},qq.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},qq.isItemList=function(e){return"[object DataTransferItemList]"===Object.prototype.toString.call(e)},qq.isNodeList=function(e){return"[object NodeList]"===Object.prototype.toString.call(e)||e.item&&e.namedItem},qq.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},qq.trimStr=function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},qq.format=function(e){var t=Array.prototype.slice.call(arguments,1),n=e;return qq.each(t,function(e,t){n=n.replace(/{}/,t)}),n},qq.isFile=function(e){return window.File&&"[object File]"===Object.prototype.toString.call(e)},qq.isFileList=function(e){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(e)},qq.isFileOrInput=function(e){return qq.isFile(e)||qq.isInput(e)},qq.isInput=function(e){return window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(e)&&e.type&&"file"===e.type.toLowerCase()?!0:e.tagName&&"input"===e.tagName.toLowerCase()&&e.type&&"file"===e.type.toLowerCase()?!0:!1},qq.isBlob=function(e){return window.Blob&&"[object Blob]"===Object.prototype.toString.call(e)},qq.isXhrUploadSupported=function(){var e=document.createElement("input");return e.type="file",void 0!==e.multiple&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&"undefined"!=typeof qq.createXhrInstance().upload},qq.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return qq.log("Neither XHR or ActiveX are supported!","error"),null}},qq.isFolderDropSupported=function(e){return e.items&&e.items[0].webkitGetAsEntry},qq.isFileChunkingSupported=function(){return!qq.android()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)},qq.extend=function(e,t,n){return qq.each(t,function(t,i){n&&qq.isObject(i)?(void 0===e[t]&&(e[t]={}),qq.extend(e[t],i,!0)):e[t]=i}),e},qq.override=function(e,t){var n={},i=t(n);return qq.each(i,function(t,i){void 0!==e[t]&&(n[t]=e[t]),e[t]=i}),e},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var i=e.length;for(0>n&&(n+=i);i>n;n+=1)if(e.hasOwnProperty(n)&&e[n]===t)return n;return-1},qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"==e?t:8|3&t;return n.toString(16)})},qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")},qq.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")},qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")},qq.ie11=function(){return-1!==navigator.userAgent.indexOf("Trident")&&-1!==navigator.userAgent.indexOf("rv:11")},qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")},qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")},qq.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")},qq.firefox=function(){return!qq.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor},qq.windows=function(){return"Win32"===navigator.platform},qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")},qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0},qq.ios7=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")},qq.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n),n}}(),qq.each=function(e,t){var n,i;if(e)if(window.Storage&&e.constructor===window.Storage)for(n=0;n<e.length&&(i=t(e.key(n),e.getItem(e.key(n))),i!==!1);n++);else if(qq.isArray(e)||qq.isItemList(e)||qq.isNodeList(e))for(n=0;n<e.length&&(i=t(n,e[n]),i!==!1);n++);else if(qq.isString(e))for(n=0;n<e.length&&(i=t(n,e.charAt(n)),i!==!1);n++);else for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&(i=t(n,e[n]),i===!1))break},qq.bind=function(e,t){if(qq.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return function(){var i=qq.extend([],n);return arguments.length&&(i=i.concat(Array.prototype.slice.call(arguments))),e.apply(t,i)}}throw new Error("first parameter must be a function!")},qq.obj2url=function(e,t,n){var i=[],a="&",o=function(e,n){var a=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;"undefined"!==a&&"undefined"!==n&&i.push("object"==typeof e?qq.obj2url(e,a,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(a)+"="+encodeURIComponent(e()):encodeURIComponent(a)+"="+encodeURIComponent(e))};return!n&&t?(a=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",i.push(t),i.push(qq.obj2url(e))):"[object Array]"===Object.prototype.toString.call(e)&&"undefined"!=typeof e?qq.each(e,function(e,t){o(t,e)}):"undefined"!=typeof e&&null!==e&&"object"==typeof e?qq.each(e,function(e,t){o(t,e)}):i.push(encodeURIComponent(t)+"="+encodeURIComponent(e)),t?i.join(a):i.join(a).replace(/^&/,"").replace(/%20/g,"+")},qq.obj2FormData=function(e,t,n){return t||(t=new FormData),qq.each(e,function(e,i){e=n?n+"["+e+"]":e,qq.isObject(i)?qq.obj2FormData(i,t,e):qq.isFunction(i)?t.append(e,i()):t.append(e,i)}),t},qq.obj2Inputs=function(e,t){var n;return t||(t=document.createElement("form")),qq.obj2FormData(e,{append:function(e,i){n=document.createElement("input"),n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)}}),t},qq.setCookie=function(e,t,n){var i=new Date,a="";n&&(i.setTime(i.getTime()+1e3*60*60*24*n),a="; expires="+i.toGMTString()),document.cookie=e+"="+t+a+"; path=/"},qq.getCookie=function(e){var t,n=e+"=",i=document.cookie.split(";");return qq.each(i,function(e,i){for(var a=i;" "==a.charAt(0);)a=a.substring(1,a.length);return 0===a.indexOf(n)?(t=a.substring(n.length,a.length),!1):void 0}),t},qq.getCookieNames=function(e){var t=document.cookie.split(";"),n=[];return qq.each(t,function(t,i){i=qq.trimStr(i);var a=i.indexOf("=");i.match(e)&&n.push(i.substr(0,a))}),n},qq.deleteCookie=function(e){qq.setCookie(e,"",-1)},qq.areCookiesEnabled=function(){var e=1e5*Math.random(),t="qqCookieTest:"+e;return qq.setCookie(t,1),qq.getCookie(t)?(qq.deleteCookie(t),!0):!1},qq.parseJson=function(json){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(json):eval("("+json+")")},qq.getExtension=function(e){var t=e.lastIndexOf(".")+1;return t>0?e.substr(t,e.length-t):void 0},qq.DisposeSupport=function(){var e=[];return{dispose:function(){var t;do t=e.shift(),t&&t();while(t)},attach:function(){var e=arguments;this.addDisposer(qq(e[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){e.push(t)}}},qq.version="3.9.0-3",qq.supportedFeatures=function(){function e(){var e,t=!0;try{e=document.createElement("input"),e.type="file",qq(e).hide(),e.disabled&&(t=!1)}catch(n){t=!1}return t}function t(){return qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)}function n(){return qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)}function i(){if(window.XMLHttpRequest){var e=qq.createXhrInstance();return void 0!==e.withCredentials}return!1}function a(){return void 0!==window.XDomainRequest}function o(){return i()?!0:a()}function r(){return void 0!==document.createElement("input").webkitdirectory}var s,l,u,c,d,p,h,f,m,g,_;return s=e(),l=s&&qq.isXhrUploadSupported(),u=l&&t(),c=l&&qq.isFileChunkingSupported(),d=l&&c&&qq.areCookiesEnabled(),p=l&&n(),h=s&&(void 0!==window.postMessage||l),m=i(),f=a(),g=o(),_=r(),{uploading:s,ajaxUploading:l,fileDrop:l,folderDrop:u,chunking:c,resume:d,uploadCustomHeaders:l,uploadNonMultipart:l,itemSizeValidation:l,uploadViaPaste:p,progressBar:l,uploadCors:h,deleteFileCorsXhr:m,deleteFileCorsXdr:f,deleteFileCors:g,canDetermineSize:l,folderSelection:_}}(),qq.Promise=function(){var e,t,n=[],i=[],a=[],o=0;return{then:function(a,r){return 0===o?(a&&n.push(a),r&&i.push(r)):-1===o&&r?r.apply(null,t):a&&a.apply(null,e),this},done:function(n){return 0===o?a.push(n):n.apply(null,void 0===t?e:t),this},success:function(){return o=1,e=arguments,n.length&&qq.each(n,function(t,n){n.apply(null,e)}),a.length&&qq.each(a,function(t,n){n.apply(null,e)}),this},failure:function(){return o=-1,t=arguments,i.length&&qq.each(i,function(e,n){n.apply(null,t)}),a.length&&qq.each(a,function(e,n){n.apply(null,t)}),this}}},qq.isPromise=function(e){return e&&e.then&&e.done},qq.UploadButton=function(e){function t(){var e=document.createElement("input");return e.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,i),o.multiple&&e.setAttribute("multiple",""),o.folders&&qq.supportedFeatures.folderSelection&&e.setAttribute("webkitdirectory",""),o.acceptFiles&&e.setAttribute("accept",o.acceptFiles),e.setAttribute("type","file"),e.setAttribute("name",o.name),qq(e).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),o.element.appendChild(e),a.attach(e,"change",function(){o.onChange(e)}),a.attach(e,"mouseover",function(){qq(o.element).addClass(o.hoverClass)}),a.attach(e,"mouseout",function(){qq(o.element).removeClass(o.hoverClass)}),a.attach(e,"focus",function(){qq(o.element).addClass(o.focusClass)}),a.attach(e,"blur",function(){qq(o.element).removeClass(o.focusClass)}),window.attachEvent&&e.setAttribute("tabIndex","-1"),e}var n,i,a=new qq.DisposeSupport,o={element:null,multiple:!1,acceptFiles:null,folders:!1,name:"qqfile",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};
return qq.extend(o,e),i=qq.getUniqueId(),qq(o.element).css({position:"relative",overflow:"hidden",direction:"ltr"}),n=t(),{getInput:function(){return n},getButtonId:function(){return i},setMultiple:function(e){e!==o.multiple&&(e?n.setAttribute("multiple",""):n.removeAttribute("multiple"))},setAcceptFiles:function(e){e!==o.acceptFiles&&n.setAttribute("accept",e)},reset:function(){n.parentNode&&qq(n).remove(),qq(o.element).removeClass(o.focusClass),n=t()}}},qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id",qq.UploadData=function(e){function t(e){if(qq.isArray(e)){var t=[];return qq.each(e,function(e,n){t.push(o[r[n]])}),t}return o[r[e]]}function n(e){if(qq.isArray(e)){var t=[];return qq.each(e,function(e,n){t.push(o[s[n]])}),t}return o[s[e]]}function i(e){var t=[],n=[].concat(e);return qq.each(n,function(e,n){var i=l[n];void 0!==i&&qq.each(i,function(e,n){t.push(o[n])})}),t}var a,o=[],r={},s={},l={};return a={added:function(t){var n=e.getUuid(t),i=e.getName(t),a=e.getSize(t),u=qq.status.SUBMITTING,c=o.push({id:t,name:i,originalName:i,uuid:n,size:a,status:u})-1;r[t]=c,s[n]=c,void 0===l[u]&&(l[u]=[]),l[u].push(c),e.onStatusChange(t,void 0,u)},retrieve:function(e){return qq.isObject(e)&&o.length?void 0!==e.id?t(e.id):void 0!==e.uuid?n(e.uuid):e.status?i(e.status):void 0:qq.extend([],o,!0)},reset:function(){o=[],r={},s={},l={}},setStatus:function(t,n){var i=r[t],a=o[i].status,s=qq.indexOf(l[a],i);l[a].splice(s,1),o[i].status=n,void 0===l[n]&&(l[n]=[]),l[n].push(i),e.onStatusChange(t,a,n)},uuidChanged:function(e,t){var n=r[e],i=o[n].uuid;o[n].uuid=t,s[t]=n,delete s[i]},nameChanged:function(e,t){var n=r[e];o[n].name=t}}},qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"},qq.basePublicApi={log:function(e,t){!this._options.debug||t&&"info"!==t?t&&"info"!==t&&qq.log("[FineUploader "+qq.version+"] "+e,t):qq.log("[FineUploader "+qq.version+"] "+e)},setParams:function(e,t){null==t?this._options.request.params=e:this._paramsStore.setParams(e,t)},setDeleteFileParams:function(e,t){null==t?this._options.deleteFile.params=e:this._deleteFileParamsStore.setParams(e,t)},setEndpoint:function(e,t){null==t?this._options.request.endpoint=e:this._endpointStore.setEndpoint(e,t)},getInProgress:function(){return this._filesInProgress.length},getNetUploads:function(){return this._netUploaded},uploadStoredFiles:function(){var e;if(0===this._storedIds.length)this._itemError("noFilesError");else for(;this._storedIds.length;)e=this._storedIds.shift(),this._filesInProgress.push(e),this._handler.upload(e)},clearStoredFiles:function(){this._storedIds=[]},retry:function(e){return this._manualRetry(e)},cancel:function(e){this._handler.cancel(e)},cancelAll:function(){var e=[],t=this;qq.extend(e,this._storedIds),qq.each(e,function(e,n){t.cancel(n)}),this._handler.cancelAll()},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._filesInProgress=[],this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],qq.each(this._buttons,function(e,t){t.reset()}),this._paramsStore.reset(),this._endpointStore.reset(),this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData.reset(),this._buttonIdsForFileIds=[],this._pasteHandler&&this._pasteHandler.reset()},addFiles:function(e,t,n){var i,a,o,r=this,s=[];if(e){for(qq.isFileList(e)||(e=[].concat(e)),i=0;i<e.length;i+=1)if(a=e[i],qq.isFileOrInput(a))if(qq.isInput(a)&&qq.supportedFeatures.ajaxUploading)for(o=0;o<a.files.length;o++)s.push(a.files[o]);else s.push(a);else r.log(a+" is not a File or INPUT element!  Ignoring!","warn");this.log("Received "+s.length+" files or inputs."),this._prepareItemsForUpload(s,t,n)}},addBlobs:function(e,t,n){if(e){var i=[].concat(e),a=[],o=this;qq.each(i,function(e,t){qq.isBlob(t)&&!qq.isFileOrInput(t)?a.push({blob:t,name:o._options.blobs.defaultName}):qq.isObject(t)&&t.blob&&t.name?a.push(t):o.log("addBlobs: entry at index "+e+" is not a Blob or a BlobData object","error")}),this._prepareItemsForUpload(a,t,n)}else this.log("undefined or non-array parameter passed into addBlobs","error")},getUuid:function(e){return this._handler.getUuid(e)},setUuid:function(e,t){return this._handler.setUuid(e,t)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(e){return this._handler.getSize(e)},getName:function(e){return this._handler.getName(e)},setName:function(e,t){this._handler.setName(e,t),this._uploadData.nameChanged(e,t)},getFile:function(e){return this._handler.getFile(e)},deleteFile:function(e){this._onSubmitDelete(e)},setDeleteFileEndpoint:function(e,t){null==t?this._options.deleteFile.endpoint=e:this._deleteFileEndpointStore.setEndpoint(e,t)},doesExist:function(e){return this._handler.isValid(e)},getUploads:function(e){return this._uploadData.retrieve(e)},getButton:function(e){return this._getButton(this._buttonIdsForFileIds[e])}},qq.basePrivateApi={_generateExtraButtonSpecs:function(){var e=this;this._extraButtonSpecs={},qq.each(this._options.extraButtons,function(t,n){var i=n.multiple,a=qq.extend({},e._options.validation,!0),o=qq.extend({},n);void 0===i&&(i=e._options.multiple),o.validation&&qq.extend(a,n.validation,!0),qq.extend(o,{multiple:i,validation:a},!0),e._initExtraButton(o)})},_initExtraButton:function(e){var t=this._createUploadButton({element:e.element,multiple:e.multiple,accept:e.validation.acceptFiles,folders:e.folders});this._extraButtonSpecs[t.getButtonId()]=e},_getButtonId:function(e){var t,n;if(e&&!e.blob&&!qq.isBlob(e)){if(qq.isFile(e))return e.qqButtonId;if("input"===e.tagName.toLowerCase()&&"file"===e.type.toLowerCase())return e.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);if(t=e.getElementsByTagName("input"),qq.each(t,function(e,t){return"file"===t.getAttribute("type")?(n=t,!1):void 0}),n)return n.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}},_annotateWithButtonId:function(e,t){qq.isFile(e)&&(e.qqButtonId=this._getButtonId(t))},_getButton:function(e){var t=this._extraButtonSpecs[e];return t?t.element:e===this._defaultButtonId?this._options.button:void 0},_handleCheckedCallback:function(e){var t=this,n=e.callback();return qq.isPromise(n)?(this.log(e.name+" - waiting for "+e.name+" promise to be fulfilled for "+e.identifier),n.then(function(n){t.log(e.name+" promise success for "+e.identifier),e.onSuccess(n)},function(){e.onFailure?(t.log(e.name+" promise failure for "+e.identifier),e.onFailure()):t.log(e.name+" promise failure for "+e.identifier)})):(n!==!1?e.onSuccess(n):e.onFailure?(this.log(e.name+" - return value was 'false' for "+e.identifier+".  Invoking failure callback."),e.onFailure()):this.log(e.name+" - return value was 'false' for "+e.identifier+".  Will not proceed."),n)},_createUploadButton:function(e){var t=this,n=void 0===e.multiple?this._options.multiple:e.multiple,i=e.accept||this._options.validation.acceptFiles,a=new qq.UploadButton({element:e.element,folders:e.folders,name:this._options.request.inputName,multiple:n&&qq.supportedFeatures.ajaxUploading,acceptFiles:i,onChange:function(e){t._onInputChange(e)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});return this._disposeSupport.addDisposer(function(){a.dispose()}),t._buttons.push(a),a},_createUploadHandler:function(e,t){var n=this,i={debug:this._options.debug,maxConnections:this._options.maxConnections,inputName:this._options.request.inputName,cors:this._options.cors,demoMode:this._options.demoMode,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:function(e,t){n.log(e,t)},onProgress:function(e,t,i,a){n._onProgress(e,t,i,a),n._options.callbacks.onProgress(e,t,i,a)},onComplete:function(e,t,i,a){var o=n._onComplete(e,t,i,a);qq.isPromise(o)?o.done(function(){n._options.callbacks.onComplete(e,t,i,a)}):n._options.callbacks.onComplete(e,t,i,a)},onCancel:function(e,t){return n._handleCheckedCallback({name:"onCancel",callback:qq.bind(n._options.callbacks.onCancel,n,e,t),onSuccess:qq.bind(n._onCancel,n,e,t),identifier:e})},onUpload:function(e,t){n._onUpload(e,t),n._options.callbacks.onUpload(e,t)},onUploadChunk:function(e,t,i){n._options.callbacks.onUploadChunk(e,t,i)},onResume:function(e,t,i){return n._options.callbacks.onResume(e,t,i)},onAutoRetry:function(){return n._onAutoRetry.apply(n,arguments)},onUuidChanged:function(e,t){n._uploadData.uuidChanged(e,t)}};return qq.each(this._options.request,function(e,t){i[e]=t}),e&&qq.each(e,function(e,t){i[e]=t}),new qq.UploadHandler(i,t)},_createDeleteHandler:function(){var e=this;return new qq.DeleteFileAjaxRequestor({method:this._options.deleteFile.method,maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._options.deleteFile.customHeaders,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:function(t,n){e.log(t,n)},onDelete:function(t){e._onDelete(t),e._options.callbacks.onDelete(t)},onDeleteComplete:function(t,n,i){e._onDeleteComplete(t,n,i),e._options.callbacks.onDeleteComplete(t,n,i)}})},_createPasteHandler:function(){var e=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:function(t,n){e.log(t,n)},pasteReceived:function(t){e._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(e._options.callbacks.onPasteReceived,e,t),onSuccess:qq.bind(e._handlePasteSuccess,e,t),identifier:"pasted image"})}}})},_createUploadDataTracker:function(){var e=this;return new qq.UploadData({getName:function(t){return e.getName(t)},getUuid:function(t){return e.getUuid(t)},getSize:function(t){return e.getSize(t)},onStatusChange:function(t,n,i){e._onUploadStatusChange(t,n,i),e._options.callbacks.onStatusChange(t,n,i)}})},_onUploadStatusChange:function(){},_handlePasteSuccess:function(e,t){var n=e.type.split("/")[1],i=t;null==i&&(i=this._options.paste.defaultName),i+="."+n,this.addBlobs({name:i,blob:e})},_preventLeaveInProgress:function(){},_onSubmit:function(e){this._netUploadedOrQueued++,this._options.autoUpload&&this._filesInProgress.push(e)},_onProgress:function(){},_onComplete:function(e,t,n,i){return n.success?(this._netUploaded++,this._uploadData.setStatus(e,qq.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(e,qq.status.UPLOAD_FAILED)),this._removeFromFilesInProgress(e),this._maybeParseAndSendUploadError(e,t,n,i),n.success?!0:!1},_onCancel:function(e){this._netUploadedOrQueued--,this._removeFromFilesInProgress(e),clearTimeout(this._retryTimeouts[e]);var t=qq.indexOf(this._storedIds,e);!this._options.autoUpload&&t>=0&&this._storedIds.splice(t,1),this._uploadData.setStatus(e,qq.status.CANCELED)},_isDeletePossible:function(){return this._options.deleteFile.enabled?this._options.cors.expected?qq.supportedFeatures.deleteFileCorsXhr?!0:qq.supportedFeatures.deleteFileCorsXdr&&this._options.cors.allowXdr?!0:!1:!0:!1},_onSubmitDelete:function(e,t,n){var i,a=this.getUuid(e);return t&&(i=qq.bind(t,this,e,a,n)),this._isDeletePossible()?this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,e),onSuccess:i||qq.bind(this._deleteHandler.sendDelete,this,e,a,n),identifier:e}):(this.log("Delete request ignored for ID "+e+", delete feature is disabled or request not possible "+"due to CORS on a user agent that does not support pre-flighting.","warn"),!1)},_onDelete:function(e){this._uploadData.setStatus(e,qq.status.DELETING)},_onDeleteComplete:function(e,t,n){var i=this._handler.getName(e);n?(this._uploadData.setStatus(e,qq.status.DELETE_FAILED),this.log("Delete request for '"+i+"' has failed.","error"),void 0===t.withCredentials?this._options.callbacks.onError(e,i,"Delete request failed",t):this._options.callbacks.onError(e,i,"Delete request failed with response code "+t.status,t)):(this._netUploadedOrQueued--,this._netUploaded--,this._handler.expunge(e),this._uploadData.setStatus(e,qq.status.DELETED),this.log("Delete request for '"+i+"' has succeeded."))},_removeFromFilesInProgress:function(e){var t=qq.indexOf(this._filesInProgress,e);t>=0&&this._filesInProgress.splice(t,1)},_onUpload:function(e){this._uploadData.setStatus(e,qq.status.UPLOADING)},_onInputChange:function(e){var t;if(qq.supportedFeatures.ajaxUploading){for(t=0;t<e.files.length;t++)this._annotateWithButtonId(e.files[t],e);this.addFiles(e.files)}else this.addFiles(e);qq.each(this._buttons,function(e,t){t.reset()})},_onBeforeAutoRetry:function(e,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onAutoRetry:function(e,t,n,i,a){var o=this;return o._preventRetries[e]=n[o._options.retry.preventRetryResponseProperty],o._shouldAutoRetry(e,t,n)?(o._maybeParseAndSendUploadError.apply(o,arguments),o._options.callbacks.onAutoRetry(e,t,o._autoRetries[e]+1),o._onBeforeAutoRetry(e,t),o._retryTimeouts[e]=setTimeout(function(){o.log("Retrying "+t+"..."),o._autoRetries[e]++,o._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),a?a(e):o._handler.retry(e)},1e3*o._options.retry.autoAttemptDelay),!0):void 0},_shouldAutoRetry:function(e){return!this._preventRetries[e]&&this._options.retry.enableAuto?(void 0===this._autoRetries[e]&&(this._autoRetries[e]=0),this._autoRetries[e]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(e){var t=this._options.validation.itemLimit;if(this._preventRetries[e])return this.log("Retries are forbidden for id "+e,"warn"),!1;if(this._handler.isValid(e)){var n=this._handler.getName(e);return this._options.callbacks.onManualRetry(e,n)===!1?!1:t>0&&this._netUploadedOrQueued+1>t?(this._itemError("retryFailTooManyItems"),!1):(this.log("Retrying upload for '"+n+"' (id: "+e+")..."),this._filesInProgress.push(e),!0)}return this.log("'"+e+"' is not a valid file ID","error"),!1},_manualRetry:function(e,t){return this._onBeforeManualRetry(e)?(this._netUploadedOrQueued++,this._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),t?t(e):this._handler.retry(e),!0):void 0},_maybeParseAndSendUploadError:function(e,t,n,i){if(!n.success)if(i&&200!==i.status&&!n.error)this._options.callbacks.onError(e,t,"XHR returned response code "+i.status,i);else{var a=n.error?n.error:this._options.text.defaultResponseError;this._options.callbacks.onError(e,t,a,i)}},_prepareItemsForUpload:function(e,t,n){var i=this._getValidationDescriptors(e),a=this._getButtonId(e[0]),o=this._getButton(a);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,i,o),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,i,e,t,n,o),identifier:"batch validation"})},_upload:function(e,t,n){var i=this._handler.add(e),a=this._handler.getName(i);this._uploadData.added(i),t&&this.setParams(t,i),n&&this.setEndpoint(n,i),this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,i,a),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,i,a),onFailure:qq.bind(this._fileOrBlobRejected,this,i,a),identifier:i})},_onSubmitCallbackSuccess:function(e){var t;this._uploadData.setStatus(e,qq.status.SUBMITTED),t=qq.supportedFeatures.ajaxUploading?this._handler.getFile(e).qqButtonId:this._getButtonId(this._handler.getInput(e)),t&&(this._buttonIdsForFileIds[e]=t),this._onSubmit.apply(this,arguments),this._onSubmitted.apply(this,arguments),this._options.callbacks.onSubmitted.apply(this,arguments),this._options.autoUpload?this._handler.upload(e)||this._uploadData.setStatus(e,qq.status.QUEUED):this._storeForLater(e)},_onSubmitted:function(){},_storeForLater:function(e){this._storedIds.push(e)},_onValidateBatchCallbackSuccess:function(e,t,n,i,a){var o,r=this._options.validation.itemLimit,s=this._netUploadedOrQueued+e.length;0===r||r>=s?t.length>0?this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,e[0],a),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,t,0,n,i),onFailure:qq.bind(this._onValidateCallbackFailure,this,t,0,n,i),identifier:"Item '"+t[0].name+"', size: "+t[0].size}):this._itemError("noFilesError"):(o=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,s).replace(/\{itemLimit\}/g,r),this._batchError(o))},_onValidateCallbackSuccess:function(e,t,n,i){var a=t+1,o=this._getValidationDescriptor(e[t]),r=!1;this._validateFileOrBlobData(e[t],o)&&(r=!0,this._upload(e[t],n,i)),this._maybeProcessNextItemAfterOnValidateCallback(r,e,a,n,i)},_onValidateCallbackFailure:function(e,t,n,i){var a=t+1;this._fileOrBlobRejected(void 0,e[0].name),this._maybeProcessNextItemAfterOnValidateCallback(!1,e,a,n,i)},_maybeProcessNextItemAfterOnValidateCallback:function(e,t,n,i,a){var o=this;t.length>n&&(e||!this._options.validation.stopOnFirstInvalidFile)&&setTimeout(function(){var e=o._getValidationDescriptor(t[n]);o._handleCheckedCallback({name:"onValidate",callback:qq.bind(o._options.callbacks.onValidate,o,t[n]),onSuccess:qq.bind(o._onValidateCallbackSuccess,o,t,n,i,a),onFailure:qq.bind(o._onValidateCallbackFailure,o,t,n,i,a),identifier:"Item '"+e.name+"', size: "+e.size})},0)},_validateFileOrBlobData:function(e,t){var n=t.name,i=t.size,a=this._getButtonId(e),o=this._extraButtonSpecs[a],r=o?o.validation:this._options.validation,s=!0;return qq.isFileOrInput(e)&&!this._isAllowedExtension(r.allowedExtensions,n)?(this._itemError("typeError",n,e),s=!1):0===i?(this._itemError("emptyError",n,e),s=!1):i&&r.sizeLimit&&i>r.sizeLimit?(this._itemError("sizeError",n,e),s=!1):i&&i<r.minSizeLimit&&(this._itemError("minSizeError",n,e),s=!1),s||this._fileOrBlobRejected(void 0,n),s},_fileOrBlobRejected:function(e){void 0!==e&&this._uploadData.setStatus(e,qq.status.REJECTED)},_itemError:function(e,t,n){function i(e,t){r=r.replace(e,t)}var a,o,r=this._options.messages[e],s=[],l=[].concat(t),u=l[0],c=this._getButtonId(n),d=this._extraButtonSpecs[c],p=d?d.validation:this._options.validation;return qq.each(p.allowedExtensions,function(e,t){qq.isString(t)&&s.push(t)}),a=s.join(", ").toLowerCase(),i("{file}",this._options.formatFileName(u)),i("{extensions}",a),i("{sizeLimit}",this._formatSize(p.sizeLimit)),i("{minSizeLimit}",this._formatSize(p.minSizeLimit)),o=r.match(/(\{\w+\})/g),null!==o&&qq.each(o,function(e,t){i(t,l[e])}),this._options.callbacks.onError(null,u,r,void 0),r},_batchError:function(e){this._options.callbacks.onError(null,null,e,void 0)},_isAllowedExtension:function(e,t){var n=!1;return e.length?(qq.each(e,function(e,i){if(qq.isString(i)){var a=new RegExp("\\."+i+"$","i");if(null!=t.match(a))return n=!0,!1}}),n):!0},_formatSize:function(e){var t=-1;do e/=1e3,t++;while(e>999);return Math.max(e,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_wrapCallbacks:function(){var e,t;e=this,t=function(t,n,i){try{return n.apply(e,i)}catch(a){e.log("Caught exception in '"+t+"' callback - "+a.message,"error")}};for(var n in this._options.callbacks)!function(){var i,a;i=n,a=e._options.callbacks[i],e._options.callbacks[i]=function(){return t(i,a,arguments)}}()},_parseFileOrBlobDataName:function(e){var t;return t=qq.isFileOrInput(e)?e.value?e.value.replace(/.*(\/|\\)/,""):null!==e.fileName&&void 0!==e.fileName?e.fileName:e.name:e.name},_parseFileOrBlobDataSize:function(e){var t;return qq.isFileOrInput(e)?e.value||(t=null!==e.fileSize&&void 0!==e.fileSize?e.fileSize:e.size):t=e.blob.size,t},_getValidationDescriptor:function(e){var t={},n=this._parseFileOrBlobDataName(e),i=this._parseFileOrBlobDataSize(e);return t.name=n,void 0!==i&&(t.size=i),t},_getValidationDescriptors:function(e){var t=this,n=[];return qq.each(e,function(e,i){n.push(t._getValidationDescriptor(i))}),n},_createParamsStore:function(e){var t={},n=this;return{setParams:function(e,n){var i={};qq.extend(i,e),t[n]=i},getParams:function(i){var a={};return null!=i&&t[i]?qq.extend(a,t[i]):qq.extend(a,n._options[e].params),a},remove:function(e){return delete t[e]},reset:function(){t={}}}},_createEndpointStore:function(e){var t={},n=this;return{setEndpoint:function(e,n){t[n]=e},getEndpoint:function(i){return null!=i&&t[i]?t[i]:n._options[e].endpoint},remove:function(e){return delete t[e]},reset:function(){t={}}}},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var e="image/*;capture=camera",t=this._options.camera.button,n=t?this._getButtonId(t):this._defaultButtonId,i=n?this._extraButtonSpecs[n]:this._options;i.multiple=!1,null===i.validation.acceptFiles?i.validation.acceptFiles=e:i.validation.acceptFiles+=","+e,qq.each(this._buttons,function(e,t){return t.getButtonId()===n?(t.setMultiple(i.multiple),t.setAcceptFiles(i.acceptFiles),!1):void 0})}}},qq.FineUploaderBasic=function(e){this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize",filenameParam:"qqfilename"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null},callbacks:{onSubmit:function(){},onSubmitted:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onResume:function(){},onProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){},onSubmitDelete:function(){},onDelete:function(){},onDeleteComplete:function(){},onPasteReceived:function(){},onStatusChange:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(e){return void 0!==e&&e.length>33&&(e=e.slice(0,19)+"..."+e.slice(-14)),e},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[]},qq.extend(this._options,e,!0),this._buttons=[],this._extraButtonSpecs={},this._buttonIdsForFileIds=[],this._wrapCallbacks(),this._disposeSupport=new qq.DisposeSupport,this._filesInProgress=[],this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData=this._createUploadDataTracker(),this._paramsStore=this._createParamsStore("request"),this._deleteFileParamsStore=this._createParamsStore("deleteFile"),this._endpointStore=this._createEndpointStore("request"),this._deleteFileEndpointStore=this._createEndpointStore("deleteFile"),this._handler=this._createUploadHandler(),this._deleteHandler=this._createDeleteHandler(),this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button}).getButtonId()),this._generateExtraButtonSpecs(),this._handleCameraAccess(),this._options.paste.targetElement&&(this._pasteHandler=this._createPasteHandler()),this._preventLeaveInProgress()},qq.FineUploaderBasic.prototype=qq.basePublicApi,qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi),qq.uiPublicApi={clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments),this._listElement.innerHTML=""},addExtraDropzone:function(e){this._dnd.setupExtraDropzone(e)},removeExtraDropzone:function(e){return this._dnd.removeDropzone(e)},getItemByFileId:function(e){for(var t=this._listElement.firstChild;t;){if(t.qqFileId==e)return t;t=t.nextSibling}},reset:function(){this._parent.prototype.reset.apply(this,arguments),this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._options.button||(this._defaultButtonId=this._createUploadButton({element:this._find(this._element,"button")}).getButtonId()),this._dnd.dispose(),this._dnd=this._setupDragAndDrop(),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0,this._setupClickAndEditEventHandlers()}},qq.uiPrivateApi={_getButton:function(e){var t=this._parent.prototype._getButton.apply(this,arguments);return t||e===this._defaultButtonId&&(t=this._find(this._element,"button")),t},_removeFileItem:function(e){var t=this.getItemByFileId(e);qq(t).remove()},_setupClickAndEditEventHandlers:function(){this._deleteRetryOrCancelClickHandler=this._bindDeleteRetryOrCancelClickEvent(),this._focusinEventSupported=!qq.firefox(),this._isEditFilenameEnabled()&&(this._filenameClickHandler=this._bindFilenameClickEvent(),this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent(),this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent())},_setupDragAndDrop:function(){var e,t=this,n=this._find(this._element,"dropProcessing"),i=this._options.dragAndDrop.extraDropzones;return e=function(e){e.preventDefault()},this._options.dragAndDrop.disableDefaultDropzone||i.push(this._find(this._options.element,"drop")),new qq.DragAndDrop({dropZoneElements:i,hideDropZonesBeforeEnter:this._options.dragAndDrop.hideDropzones,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){qq(n).css({display:"block"})},processingDroppedFilesComplete:function(e){qq(n).hide(),e&&t.addFiles(e)},dropError:function(e,n){t._itemError(e,n)},dropLog:function(e,n){t.log(e,n)}}})},_bindDeleteRetryOrCancelClickEvent:function(){var e=this;return new qq.DeleteRetryOrCancelClickHandler({listElement:this._listElement,classes:this._classes,log:function(t,n){e.log(t,n)},onDeleteFile:function(t){e.deleteFile(t)},onCancel:function(t){e.cancel(t)},onRetry:function(t){var n=e.getItemByFileId(t);qq(n).removeClass(e._classes.retryable),e.retry(t)},onGetName:function(t){return e.getName(t)}})},_isEditFilenameEnabled:function(){return this._options.editFilename.enabled&&!this._options.autoUpload},_filenameEditHandler:function(){var e=this;return{listElement:this._listElement,classes:this._classes,log:function(t,n){e.log(t,n)},onGetUploadStatus:function(t){return e.getUploads({id:t}).status},onGetName:function(t){return e.getName(t)},onSetName:function(t,n){var i=e.getItemByFileId(t),a=qq(e._find(i,"file")),o=e._options.formatFileName(n);a.setText(o),e.setName(t,n)},onGetInput:function(t){return e._find(t,"editFilenameInput")},onEditingStatusChange:function(t,n){var i=e.getItemByFileId(t),a=qq(e._find(i,"editFilenameInput")),o=qq(e._find(i,"file")),r=qq(e._find(i,"editNameIcon")),s=e._classes.editable;n?(a.addClass("qq-editing"),o.hide(),r.removeClass(s)):(a.removeClass("qq-editing"),o.css({display:""}),r.addClass(s)),qq(i).addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(e,t,n){if(this._isEditFilenameEnabled()){var i,a,o=this.getItemByFileId(e),r=this._classes.editable;o&&n!==qq.status.SUBMITTED&&(i=qq(this._find(o,"file")),a=qq(this._find(o,"editNameIcon")),i.removeClass(r),a.removeClass(r))}},_bindFilenameInputFocusInEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusInHandler(e)},_bindFilenameInputFocusEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusHandler(e)},_bindFilenameClickEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameClickHandler(e)},_leaving_document_out:function(e){return(qq.chrome()||qq.safari()&&qq.windows())&&0==e.clientX&&0==e.clientY||qq.firefox()&&!e.relatedTarget},_storeForLater:function(e){this._parent.prototype._storeForLater.apply(this,arguments);var t=this.getItemByFileId(e);qq(this._find(t,"spinner")).hide()},_find:function(e,t){var n=qq(e).getByClass(this._options.classes[t])[0];if(!n)throw new Error("element not found "+t);return n},_onSubmit:function(e,t){this._parent.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onSubmitted:function(e){if(this._isEditFilenameEnabled()){var t=this.getItemByFileId(e),n=qq(this._find(t,"file")),i=qq(this._find(t,"editNameIcon")),a=this._classes.editable;n.addClass(a),i.addClass(a),this._focusinEventSupported||this._filenameInputFocusHandler.addHandler(this._find(t,"editFilenameInput"))}},_onProgress:function(e,t,n,i){this._parent.prototype._onProgress.apply(this,arguments);var a,o,r,s;a=this.getItemByFileId(e),o=this._find(a,"progressBar"),r=Math.round(100*(n/i)),n===i?(s=this._find(a,"cancel"),qq(s).hide(),qq(o).hide(),qq(this._find(a,"statusText")).setText(this._options.text.waitingForResponse),this._displayFileSize(e)):(this._displayFileSize(e,n,i),qq(o).css({display:"block"})),qq(o).css({width:r+"%"})},_onComplete:function(e,t,n){function i(t){var n=o.getItemByFileId(e);qq(o._find(n,"statusText")).clearText(),qq(n).removeClass(o._classes.retrying),qq(o._find(n,"progressBar")).hide(),(!o._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)&&qq(o._find(n,"cancel")).hide(),qq(o._find(n,"spinner")).hide(),t.success?(o._isDeletePossible()&&o._showDeleteLink(e),qq(n).addClass(o._classes.success),o._classes.successIcon&&(o._find(n,"finished").style.display="inline-block",qq(n).addClass(o._classes.successIcon))):(qq(n).addClass(o._classes.fail),o._classes.failIcon&&(o._find(n,"finished").style.display="inline-block",qq(n).addClass(o._classes.failIcon)),o._options.retry.showButton&&!o._preventRetries[e]&&qq(n).addClass(o._classes.retryable),o._controlFailureTextDisplay(n,t))}var a=this._parent.prototype._onComplete.apply(this,arguments),o=this;return qq.isPromise(a)?a.done(function(e){i(e)}):i(n),a},_onUpload:function(e){var t=this._parent.prototype._onUpload.apply(this,arguments);return this._showSpinner(e),t},_onCancel:function(e){this._parent.prototype._onCancel.apply(this,arguments),this._removeFileItem(e)},_onBeforeAutoRetry:function(e){var t,n,i,a,o,r;this._parent.prototype._onBeforeAutoRetry.apply(this,arguments),t=this.getItemByFileId(e),n=this._find(t,"progressBar"),this._showCancelLink(t),n.style.width=0,qq(n).hide(),this._options.retry.showAutoRetryNote&&(i=this._find(t,"statusText"),a=this._autoRetries[e]+1,o=this._options.retry.maxAutoAttempts,r=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,a),r=r.replace(/\{maxAuto\}/g,o),qq(i).setText(r),1===a&&qq(t).addClass(this._classes.retrying))},_onBeforeManualRetry:function(e){var t=this.getItemByFileId(e);return this._parent.prototype._onBeforeManualRetry.apply(this,arguments)?(this._find(t,"progressBar").style.width=0,qq(t).removeClass(this._classes.fail),qq(this._find(t,"statusText")).clearText(),this._showSpinner(e),this._showCancelLink(t),!0):(qq(t).addClass(this._classes.retryable),!1)},_onSubmitDelete:function(e){var t=qq.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,e,t)},_onSubmitDeleteSuccess:function(){this._options.deleteFile.forceConfirm?this._showDeleteConfirm.apply(this,arguments):this._sendDeleteRequest.apply(this,arguments)
},_onDeleteComplete:function(e,t,n){this._parent.prototype._onDeleteComplete.apply(this,arguments);var i=this.getItemByFileId(e),a=this._find(i,"spinner"),o=this._find(i,"statusText");qq(a).hide(),n?(qq(o).setText(this._options.deleteFile.deletingFailedText),this._showDeleteLink(e)):this._removeFileItem(e)},_sendDeleteRequest:function(e){var t=this.getItemByFileId(e),n=this._find(t,"deleteButton"),i=this._find(t,"statusText");qq(n).hide(),this._showSpinner(e),qq(i).setText(this._options.deleteFile.deletingStatusText),this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(e){var t,n=this._handler.getName(e),i=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,n),a=(this.getUuid(e),arguments),o=this;t=this._options.showConfirm(i),qq.isPromise(t)?t.then(function(){o._sendDeleteRequest.apply(o,a)}):t!==!1&&o._sendDeleteRequest.apply(o,a)},_addToList:function(e,t){var n=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading){var i=this._find(n,"cancel");qq(i).remove()}n.qqFileId=e;var a=this._find(n,"file");qq(a).setText(this._options.formatFileName(t)),qq(this._find(n,"size")).hide(),this._options.multiple||(this._handler.cancelAll(),this._clearList()),this._options.display.prependFiles?this._prependItem(n):this._listElement.appendChild(n),this._filesInBatchAddedToUi+=1,this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading&&this._displayFileSize(e)},_prependItem:function(e){var t=this._listElement,n=t.firstChild;this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0&&(n=qq(t).children()[this._filesInBatchAddedToUi-1].nextSibling),t.insertBefore(e,n)},_clearList:function(){this._listElement.innerHTML="",this.clearStoredFiles()},_displayFileSize:function(e,t,n){var i=this.getItemByFileId(e),a=this.getSize(e),o=this._formatSize(a),r=this._find(i,"size");void 0!==t&&void 0!==n&&(o=this._formatProgress(t,n)),qq(r).css({display:"inline"}),qq(r).setText(o)},_formatProgress:function(e,t){function n(e,t){i=i.replace(e,t)}var i=this._options.text.formatProgress;return n("{percent}",Math.round(100*(e/t))),n("{total_size}",this._formatSize(t)),i},_controlFailureTextDisplay:function(e,t){var n,i,a,o,r;n=this._options.failedUploadTextDisplay.mode,i=this._options.failedUploadTextDisplay.maxChars,a=this._options.failedUploadTextDisplay.responseProperty,"custom"===n?(o=t[a],o?o.length>i&&(r=o.substring(0,i)+"..."):(o=this._options.text.failUpload,this.log("'"+a+"' is not a valid property on the server response.","warn")),qq(this._find(e,"statusText")).setText(r||o),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(e,o)):"default"===n?qq(this._find(e,"statusText")).setText(this._options.text.failUpload):"none"!==n&&this.log("failedUploadTextDisplay.mode value of '"+n+"' is not valid","warn")},_showTooltip:function(e,t){e.title=t},_showSpinner:function(e){var t=this.getItemByFileId(e),n=this._find(t,"spinner");n.style.display="inline-block"},_showCancelLink:function(e){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading){var t=this._find(e,"cancel");qq(t).css({display:"inline"})}},_showDeleteLink:function(e){var t=this.getItemByFileId(e),n=this._find(t,"deleteButton");qq(n).css({display:"inline"})},_itemError:function(){var e=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(e)},_batchError:function(e){this._parent.prototype._batchError.apply(this,arguments),this._options.showMessage(e)},_setupPastePrompt:function(){var e=this;this._options.callbacks.onPasteReceived=function(){var t=e._options.paste.namePromptMessage,n=e._options.paste.defaultName;return e._options.showPrompt(t,n)}},_fileOrBlobRejected:function(){this._totalFilesInBatch-=1,this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(e){this._totalFilesInBatch=e.length,this._filesInBatchAddedToUi=0,this._parent.prototype._prepareItemsForUpload.apply(this,arguments)}},qq.FineUploader=function(e,t){this._parent=t?qq[t].FineUploaderBasic:qq.FineUploaderBasic,this._parent.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1},text:{uploadButton:"Upload a file",cancelButton:"Cancel",retryButton:"Retry",deleteButton:"Delete",failUpload:"Upload failed",dragZone:"Drop files here to upload",dropProcessing:"Processing dropped files...",formatProgress:"{percent}% of {total_size}",waitingForResponse:"Processing..."},template:'<div class="qq-uploader">'+(this._options.dragAndDrop&&this._options.dragAndDrop.disableDefaultDropzone?"":'<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>')+(this._options.button?"":'<div class="qq-upload-button"><div>{uploadButtonText}</div></div>')+'<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>'+(this._options.listElement?"":'<ul class="qq-upload-list"></ul>')+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span>'+(this._options.editFilename&&this._options.editFilename.enabled?'<span class="qq-edit-filename-icon"></span>':"")+'<span class="qq-upload-file"></span>'+(this._options.editFilename&&this._options.editFilename.enabled?'<input class="qq-edit-filename" tabindex="0" type="text">':"")+'<span class="qq-upload-size"></span>'+'<a class="qq-upload-cancel" href="#">{cancelButtonText}</a>'+'<a class="qq-upload-retry" href="#">{retryButtonText}</a>'+'<a class="qq-upload-delete" href="#">{deleteButtonText}</a>'+'<span class="qq-upload-status-text">{statusText}</span>'+"</li>",classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",deleteButton:"qq-upload-delete",retry:"qq-upload-retry",statusText:"qq-upload-status-text",editFilenameInput:"qq-edit-filename",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,failIcon:null,editNameIcon:"qq-edit-filename-icon",editable:"qq-editable",dropProcessing:"qq-drop-processing",dropProcessingSpinner:"qq-drop-processing-spinner"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:!1},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1,prependFiles:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},editFilename:{enabled:!1},showMessage:function(e){setTimeout(function(){window.alert(e)},0)},showConfirm:function(e){return window.confirm(e)},showPrompt:function(e,t){return window.prompt(e,t)}},!0),qq.extend(this._options,e,!0),!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._options.element.innerHTML="<div>"+this._options.messages.unsupportedBrowser+"</div>":(this._wrapCallbacks(),this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton),this._options.template=this._options.template.replace(/\{dropProcessingText\}/g,this._options.text.dropProcessing),this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{deleteButtonText\}/g,this._options.text.deleteButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,""),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._options.button||(this._defaultButtonId=this._createUploadButton({element:this._find(this._element,"button")}).getButtonId()),this._setupClickAndEditEventHandlers(),this._dnd=this._setupDragAndDrop(),this._options.paste.targetElement&&this._options.paste.promptForName&&this._setupPastePrompt(),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0)},qq.extend(qq.FineUploader.prototype,qq.basePublicApi),qq.extend(qq.FineUploader.prototype,qq.basePrivateApi),qq.extend(qq.FineUploader.prototype,qq.uiPublicApi),qq.extend(qq.FineUploader.prototype,qq.uiPrivateApi),qq.AjaxRequestor=function(e){function t(){return w.method.toUpperCase()}function n(){return qq.indexOf(["GET","POST","HEAD"],t())>=0}function i(){var e=!1;return qq.each(e,function(t,n){return qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],n)<0?(e=!0,!1):void 0}),e}function a(e){return w.cors.expected&&void 0===e.withCredentials}function o(){var e;return(window.XMLHttpRequest||window.ActiveXObject)&&(e=qq.createXhrInstance(),void 0===e.withCredentials&&(e=new XDomainRequest)),e}function r(e,t){var n=q[e].xhr;return n||t||(n=w.cors.expected?o():qq.createXhrInstance(),q[e].xhr=n),n}function s(e){var t,n=qq.indexOf(y,e),i=w.maxConnections;delete q[e],y.splice(n,1),y.length>=i&&i>n&&(t=y[i-1],c(t))}function l(e,n){var i=r(e),o=t(),l=n===!0;s(e),l?v(o+" request for "+e+" has failed","error"):a(i)||_(i.status)||(l=!0,v(o+" request for "+e+" has failed - response code "+i.status,"error")),w.onComplete(e,i,l)}function u(e){var t,n=q[e].onDemandParams,i=w.mandatedParams;return w.paramsStore.getParams&&(t=w.paramsStore.getParams(e)),n&&qq.each(n,function(e,n){t=t||{},t[e]=n}),i&&qq.each(i,function(e,n){t=t||{},t[e]=n}),t}function c(e){var n,i=r(e),o=t(),s=u(e),l=q[e].body;w.onSend(e),n=d(e,s),a(i)?(i.onload=h(e),i.onerror=f(e),i.onprogress=function(){},i.ontimeout=function(){}):i.onreadystatechange=p(e),i.open(o,n,!0),w.cors.expected&&w.cors.sendCredentials&&!a(i)&&(i.withCredentials=!0),m(e),v("Sending "+o+" request for "+e),l?i.send(l):b||!s?i.send():s&&w.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0?i.send(qq.obj2url(s,"")):s&&w.contentType.toLowerCase().indexOf("application/json")>=0?i.send(JSON.stringify(s)):i.send(s)}function d(e,t){var n=w.endpointStore.getEndpoint(e),i=q[e].addToPath;return void 0!=i&&(n+="/"+i),b&&t?qq.obj2url(t,n):n}function p(e){return function(){4===r(e).readyState&&l(e)}}function h(e){return function(){l(e)}}function f(e){return function(){l(e,!0)}}function m(e){var o=r(e),s=w.customHeaders,l=q[e].additionalHeaders||{},u=t(),c={};a(o)&&(w.cors.expected&&n()&&!i(s)||(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Cache-Control","no-cache"))),!w.contentType||"POST"!==u&&"PUT"!==u||a(o)||o.setRequestHeader("Content-Type",w.contentType),a(o)||(qq.extend(c,s),qq.extend(c,l),qq.each(c,function(e,t){o.setRequestHeader(e,t)}))}function g(e){var n=r(e,!0),i=t();return n?(a(n)?(n.onerror=null,n.onload=null):n.onreadystatechange=null,n.abort(),s(e),v("Cancelled "+i+" for "+e),w.onCancel(e),!0):!1}function _(e){return qq.indexOf(w.successfulResponseCodes[t()],e)>=0}var v,b,y=[],q=[],w={validMethods:["POST"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},successfulResponseCodes:{DELETE:[200,202,204],POST:[200,204]},cors:{expected:!1,sendCredentials:!1},log:function(){},onSend:function(){},onComplete:function(){},onCancel:function(){}};if(qq.extend(w,e),v=w.log,qq.indexOf(w.validMethods,t())<0)throw new Error("'"+t()+"' is not a supported method for this type of request!");return b="GET"===t()||"DELETE"===t(),{send:function(e,t,n,i,a){q[e]={addToPath:t,onDemandParams:n,additionalHeaders:i,body:a};var o=y.push(e);o<=w.maxConnections&&c(e)},cancel:function(e){return g(e)},getMethod:function(){return t()}}},qq.UploadHandler=function(e,t){function n(e){var t,n=qq.indexOf(u,e),i=o.maxConnections;n>=0&&(u.splice(n,1),u.length>=i&&i>n&&(t=u[i-1],s.upload(t)))}function i(e){r("Cancelling "+e),o.paramsStore.remove(e),n(e)}function a(){var e=t?qq[t]:qq,i=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";s=new e["UploadHandler"+i](o,n,o.onUuidChanged,r)}var o,r,s,l,u=[];return o={debug:!1,forceMultipart:!0,paramsInBody:!1,paramsStore:{},endpointStore:{},filenameParam:"qqfilename",cors:{expected:!1,sendCredentials:!1},maxConnections:3,uuidParam:"qquuid",totalFileSizeParam:"qqtotalfilesize",chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onAutoRetry:function(){},onResume:function(){},onUuidChanged:function(){}},qq.extend(o,e),r=o.log,l={add:function(e){return s.add(e)},upload:function(e){var t=u.push(e);return t<=o.maxConnections?(s.upload(e),!0):!1},retry:function(e){var t=qq.indexOf(u,e);return t>=0?s.upload(e,!0):this.upload(e)},cancel:function(e){var t=s.cancel(e);qq.isPromise(t)?t.then(function(){i(e)}):t!==!1&&i(e)},cancelAll:function(){var e=this,t=[];qq.extend(t,u),qq.each(t,function(t,n){e.cancel(n)}),u=[]},getName:function(e){return s.getName(e)},setName:function(e,t){s.setName(e,t)},getSize:function(e){return s.getSize?s.getSize(e):void 0},getFile:function(e){return s.getFile?s.getFile(e):void 0},getInput:function(e){return s.getInput?s.getInput(e):void 0},reset:function(){r("Resetting upload handler"),l.cancelAll(),u=[],s.reset()},expunge:function(e){return s.expunge(e)},getUuid:function(e){return s.getUuid(e)},setUuid:function(e,t){return s.setUuid(e,t)},isValid:function(e){return s.isValid(e)},getResumableFilesData:function(){return s.getResumableFilesData?s.getResumableFilesData():[]},getThirdPartyFileId:function(e){return s.getThirdPartyFileId&&l.isValid(e)?s.getThirdPartyFileId(e):void 0}},a(),l},qq.UploadHandlerXhrApi=function(e,t,n,i,a,o,r){function s(e,t,n){return e.slice?e.slice(t,n):e.mozSlice?e.mozSlice(t,n):e.webkitSlice?e.webkitSlice(t,n):void 0}var l;return qq.extend(e,{createXhr:function(e){var n=qq.createXhrInstance();return t[e].xhr=n,n},getTotalChunks:function(e){if(n){var t=l.getSize(e),i=n.partSize;return Math.ceil(t/i)}},getChunkData:function(t,i){var a=n.partSize,o=l.getSize(t),r=l.getFile(t),u=a*i,c=u+a>=o?o:u+a,d=e.getTotalChunks(t);return{part:i,start:u,end:c,count:d,blob:s(r,u,c),size:c-u}},getChunkDataForCallback:function(e){return{partIndex:e.part,startByte:e.start+1,endByte:e.end,totalParts:e.count}}}),l={add:function(e){var n,i=qq.getUniqueId();if(qq.isFile(e))n=t.push({file:e})-1;else{if(!qq.isBlob(e.blob))throw new Error("Passed obj in not a File or BlobData (in qq.UploadHandlerXhr)");n=t.push({blobData:e})-1}return t[n].uuid=i,n},getName:function(e){if(l.isValid(e)){var n=t[e].file,i=t[e].blobData,a=t[e].newName;return void 0!==a?a:n?null!==n.fileName&&void 0!==n.fileName?n.fileName:n.name:i.name}r(e+" is not a valid item ID.","error")},setName:function(e,n){t[e].newName=n},getSize:function(e){var n=t[e].file||t[e].blobData.blob;return qq.isFileOrInput(n)?null!=n.fileSize?n.fileSize:n.size:n.size},getFile:function(e){return t[e]?t[e].file||t[e].blobData.blob:void 0},isValid:function(e){return void 0!==t[e]},reset:function(){t.length=0},expunge:function(e){var n=t[e].xhr;n&&(n.onreadystatechange=null,n.abort()),delete t[e]},getUuid:function(e){return t[e].uuid},upload:function(e,t){return i(e,t)},cancel:function(e){var t=a(e,l.getName(e));return qq.isPromise(t)?t.then(function(){l.expunge(e)}):t!==!1?(l.expunge(e),!0):!1},setUuid:function(e,n){r("Server requested UUID change from '"+t[e].uuid+"' to '"+n+"'"),t[e].uuid=n,o(e,n)}}},qq.UploadHandlerFormApi=function(e,t,n,i,a,o,r){function s(i){delete m[i],delete t[i],n&&(clearTimeout(g[i]),delete g[i],h.stopReceivingMessages(i));var a=document.getElementById(e.getIframeName(i));a&&(a.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;"),qq(a).remove())}function l(n,i){var a=n.id,o=c(a),s=t[o].uuid;f[s]=i,m[o]=qq(n).attach("load",function(){t[o].input&&(r("Received iframe load event for CORS upload request (iframe name "+a+")"),g[a]=setTimeout(function(){var e="No valid message received from loaded iframe for iframe name "+a;r(e,"error"),i({error:e})},1e3))}),h.receiveMessage(a,function(t){r("Received the following window message: '"+t+"'");var n,i=c(a),o=e.parseJsonResponse(i,t),s=o.uuid;s&&f[s]?(r("Handling response for iframe name "+a),clearTimeout(g[a]),delete g[a],e.detachLoadEvent(a),n=f[s],delete f[s],h.stopReceivingMessages(a),n(o)):s||r("'"+t+"' does not contain a UUID - ignoring.")})}function u(e){var t=qq.toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t}function c(e){return e.split("_")[0]}var d,p=qq.getUniqueId(),h=new qq.WindowReceiveMessage({log:r}),f={},m={},g={};return qq.extend(e,{getIframeName:function(e){return e+"_"+p},createIframe:function(t){var n=e.getIframeName(t);return u(n)},parseJsonResponse:function(e,t){var n;try{n=qq.parseJson(t),void 0!==n.newUuid&&d.setUuid(e,n.newUuid)}catch(i){r("Error when attempting to parse iframe upload response ("+i.message+")","error"),n={}}return n},initFormForUpload:function(e){var t=e.method,n=e.endpoint,i=e.params,a=e.paramsInBody,o=e.targetName,r=qq.toElement('<form method="'+t+'" enctype="multipart/form-data"></form>'),s=n;return a?qq.obj2Inputs(i,r):s=qq.obj2url(i,n),r.setAttribute("action",s),r.setAttribute("target",o),r.style.display="none",document.body.appendChild(r),r},attachLoadEvent:function(e,t){var i;n?l(e,t):m[e.id]=qq(e).attach("load",function(){if(r("Received response for "+e.id),e.parentNode){try{if(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML)return}catch(n){r("Error when attempting to access iframe during handling of upload response ("+n.message+")","error"),i={success:!1}}t(i)}})},detachLoadEvent:function(e){void 0!==m[e]&&(m[e](),delete m[e])}}),d={add:function(e){var n=t.push({input:e})-1;return e.setAttribute("name",i),t[n].uuid=qq.getUniqueId(),e.parentNode&&qq(e).remove(),n},getName:function(e){return void 0!==t[e].newName?t[e].newName:d.isValid(e)?t[e].input.value.replace(/.*(\/|\\)/,""):(r(e+" is not a valid item ID.","error"),void 0)},getInput:function(e){return t[e].input},setName:function(e,n){t[e].newName=n},isValid:function(e){return void 0!==t[e]&&void 0!==t[e].input},reset:function(){t.length=0},expunge:function(e){return s(e)},getUuid:function(e){return t[e].uuid},cancel:function(e){var t=a(e,d.getName(e));return qq.isPromise(t)?t.then(function(){d.expunge(e)}):t!==!1?(d.expunge(e),!0):!1},upload:function(){},setUuid:function(e,n){r("Server requested UUID change from '"+t[e].uuid+"' to '"+n+"'"),t[e].uuid=n,o(e,n)}}},qq.s3=qq.s3||{},qq.s3.util=qq.s3.util||function(){return{AWS_PARAM_PREFIX:"x-amz-meta-",getBucket:function(e){var t,n=[/^(?:https?:\/\/)?([a-z0-9.\-]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-]+)/i];return qq.each(n,function(n,i){var a=i.exec(e);return a?(t=a[1],!1):void 0}),t},getPolicy:function(e){var t={},n=[],i=qq.s3.util.getBucket(e.endpoint),a=e.key,o=e.acl,r=e.type,s=new Date,l=e.expectedStatus,u=e.params,c=qq.s3.util.getSuccessRedirectAbsoluteUrl(e.successRedirectUrl),d=e.minFileSize,p=e.maxFileSize;return t.expiration=qq.s3.util.getPolicyExpirationDate(s),n.push({acl:o}),n.push({bucket:i}),r&&n.push({"Content-Type":r}),l&&n.push({success_action_status:l.toString()}),c&&n.push({success_action_redirect:c}),n.push({key:a}),qq.each(u,function(e,t){var i=qq.s3.util.AWS_PARAM_PREFIX+e,a={};a[i]=encodeURIComponent(t),n.push(a)}),t.conditions=n,qq.s3.util.enforceSizeLimits(t,d,p),t},generateAwsParams:function(e,t){var n={},i=e.params,a=new qq.Promise,o=qq.s3.util.getPolicy(e),r=e.type,s=e.key,l=e.accessKey,u=e.acl,c=e.expectedStatus,d=qq.s3.util.getSuccessRedirectAbsoluteUrl(e.successRedirectUrl),p=e.log;return n.key=s,n.AWSAccessKeyId=l,r&&(n["Content-Type"]=r),c&&(n.success_action_status=c),d&&(n.success_action_redirect=d),n.acl=u,qq.each(i,function(e,t){var i=qq.s3.util.AWS_PARAM_PREFIX+e;n[i]=encodeURIComponent(t)}),t(o).then(function(e){n.policy=e.policy,n.signature=e.signature,a.success(n)},function(e){e=e||"Can't continue further with request to S3 as we did not receive a valid signature and policy from the server.",p("Policy signing failed.  "+e,"error"),a.failure(e)}),a},enforceSizeLimits:function(e,t,n){var i=0>t?0:t,a=0>=n?9007199254740992:n;(t>0||n>0)&&e.conditions.push(["content-length-range",i.toString(),a.toString()])},getPolicyExpirationDate:function(e){function t(e){var t=String(e);return 1===t.length&&(t="0"+t),t}return e.setMinutes(e.getMinutes()+5),Date.prototype.toISOString?e.toISOString():e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},parseIframeResponse:function(e){var t=e.contentDocument||e.contentWindow.document,n=t.location.search,i=/bucket=(.+)&key=(.+)&etag=(.+)/.exec(n);return i?{bucket:i[1],key:i[2],etag:i[3]}:void 0},getSuccessRedirectAbsoluteUrl:function(e){if(e){var t,n=document.createElement("div");return qq.ie7()?(n.innerHTML='<a href="'+e+'"></a>',t=n.firstChild,t.href):(t=document.createElement("a"),t.href=e,t.href=t.href,t.href)}},encodeQueryStringParam:function(e){var t=encodeURIComponent(e);return t=t.replace(/[!'()]/g,escape),t=t.replace(/\*/g,"%2A"),t.replace(/%20/g,"+")}}}(),qq.s3.FineUploaderBasic=function(e){var t={request:{accessKey:null,uuidName:"uuid"},objectProperties:{acl:"private",key:"uuid"},signature:{endpoint:null,params:{},customHeaders:{}},uploadSuccess:{endpoint:null,params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},resume:{recordsExpireIn:7},cors:{allowXdr:!0}};qq.extend(t,e,!0),this._uploadSuccessParamsStore=this._createParamsStore("uploadSuccess"),this._signatureParamsStore=this._createParamsStore("signature"),qq.FineUploaderBasic.call(this,t),this._failedSuccessRequestCallbacks=[]},qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePublicApi),qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePrivateApi),qq.extend(qq.s3.FineUploaderBasic.prototype,{getKey:function(e){return this._handler.getThirdPartyFileId(e)},reset:function(){qq.FineUploaderBasic.prototype.reset.call(this),this._failedSuccessRequestCallbacks=[]},setSignatureParams:function(e,t){this._setCustomS3Params("signature",e,t)},setUploadSuccessParams:function(e,t){this._setCustomS3Params("uploadSuccess",e,t)},_setCustomS3Params:function(e,t,n){null==n?this._options[e].params=t:this["_"+e+"ParamsStore"].setParams(t,n)},_createUploadHandler:function(){var e={objectProperties:this._options.objectProperties,signature:{endpoint:this._options.signature.endpoint,customHeaders:this._options.signature.customHeaders,paramsStore:this._signatureParamsStore},iframeSupport:this._options.iframeSupport,getKeyName:qq.bind(this._determineKeyName,this),validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};return qq.override(this._endpointStore,function(e){return{getEndpoint:function(t){var n=e.getEndpoint(t);return n.indexOf("http")<0?"http://"+n:n}}}),qq.FineUploaderBasic.prototype._createUploadHandler.call(this,e,"s3")},_determineKeyName:function(e,t){var n=new qq.Promise,i=this._options.objectProperties.key,a=qq.getExtension(t),o=n.failure,r=function(e,t){var i=e;void 0!==t&&(i+="."+t),n.success(i)};switch(i){case"uuid":r(this.getUuid(e),a);break;case"filename":r(t);break;default:qq.isFunction(i)?this._handleKeynameFunction(i,e,r,o):(this.log(i+" is not a valid value for the s3.keyname option!","error"),o())}return n},_handleKeynameFunction:function(e,t,n,i){var a=function(e){n(e)},o=function(){this.log("Failed to retrieve key name for "+t,"error"),i()},r=e(t);qq.isPromise(r)?r.then(a,o):null==r?o():a(r)},_onComplete:function(e,t,n,i){var a,o,r=n.success?!0:!1,s=this,l=arguments,u=this.getKey(e),c=this._options.uploadSuccess.endpoint,d=this._options.uploadSuccess.customHeaders,p=this._options.cors,h=this.getUuid(e),f=qq.s3.util.getBucket(this._endpointStore.getEndpoint(e)),m=new qq.Promise,g=this._uploadSuccessParamsStore.getParams(e),_=function(t){delete s._failedSuccessRequestCallbacks[e],qq.extend(n,t),qq.FineUploaderBasic.prototype._onComplete.apply(s,l),m.success(t)},v=function(o){var r=a;qq.extend(n,o),n&&n.reset&&(r=null),r?s._failedSuccessRequestCallbacks[e]=r:delete s._failedSuccessRequestCallbacks[e],s._onAutoRetry(e,t,n,i,r)||(qq.FineUploaderBasic.prototype._onComplete.apply(s,l),m.failure(o))};return r&&c?(o=new qq.s3.UploadSuccessAjaxRequester({endpoint:c,customHeaders:d,cors:p,log:qq.bind(this.log,this)}),qq.extend(g,{key:u,uuid:h,name:t,bucket:f},!0),a=qq.bind(function(){o.sendSuccessRequest(e,g).then(_,v)},s),a(),m):qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(e){var t=this._failedSuccessRequestCallbacks[e];return qq.FineUploaderBasic.prototype._manualRetry.call(this,e,t)},_onSubmitDelete:function(e,t){var n={key:this.getKey(e),bucket:qq.s3.util.getBucket(this._endpointStore.getEndpoint(e))};qq.FineUploaderBasic.prototype._onSubmitDelete.call(this,e,t,n)}}),qq.s3.FineUploader=function(e){var t={failedUploadTextDisplay:{mode:"custom"}};qq.extend(t,e,!0),qq.FineUploader.call(this,t,"s3"),qq.supportedFeatures.ajaxUploading||void 0!==t.iframeSupport.localBlankPagePath||(this._options.element.innerHTML="<div>You MUST set the <code>localBlankPagePath</code> property of the <code>iframeSupport</code> option since this browser does not support the File API!</div>")},qq.extend(qq.s3.FineUploader.prototype,qq.s3.FineUploaderBasic.prototype),qq.extend(qq.s3.FineUploader.prototype,qq.uiPublicApi),qq.extend(qq.s3.FineUploader.prototype,qq.uiPrivateApi),qq.extend(qq.s3.FineUploader.prototype,{_onComplete:function(e){var t=qq.FineUploader.prototype._onComplete.apply(this,arguments),n=this.getItemByFileId(e),i=this._find(n,"progressBar");return qq.isPromise(t)&&(qq(i).hide(),qq(this._find(n,"statusText")).setText(this._options.text.waitingForResponse)),t}}),qq.s3.SignatureAjaxRequestor=function(e){function t(e,t,n){var o,r,s=t.responseText,l=i[e],u=l.expectingPolicy,c=l.promise;if(delete i[e],s)try{r=qq.parseJson(s)}catch(d){a.log("Error attempting to parse signature response: "+d,"error")}r&&r.invalid?(n=!0,o="Invalid policy document or request headers!"):r?u&&!r.policy?(n=!0,o="Response does not include the base64 encoded policy!"):r.signature||(n=!0,o="Response does not include the signature!"):(n=!0,o="Received an empty or invalid response from the server!"),n?(o&&a.log(o,"error"),c.failure(o)):c.success(r)}var n,i={},a={expectingPolicy:!1,method:"POST",signatureSpec:{endpoint:null,customHeaders:{},paramsStore:{}},maxConnections:3,cors:{expected:!1,sendCredentials:!1},log:function(){}};return qq.extend(a,e,!0),n=new qq.AjaxRequestor({method:a.method,contentType:"application/json; charset=utf-8",endpointStore:{getEndpoint:function(){return a.signatureSpec.endpoint}},paramsStore:a.signatureSpec.paramsStore,maxConnections:a.maxConnections,customHeaders:a.signatureSpec.customHeaders,log:a.log,onComplete:t,cors:a.cors,successfulResponseCodes:{POST:[200]}}),{getSignature:function(e,t){var o=t,r=new qq.Promise;return a.log("Submitting S3 signature request for "+e),n.send(e,null,o),i[e]={promise:r,expectingPolicy:a.expectingPolicy},r}}},qq.s3.UploadSuccessAjaxRequester=function(e){function t(e,t,n){var o,r=i[e],s=t.responseText,l={success:!0},u={success:!1};delete i[e],a.log(qq.format("Received the following response body to an AWS upload success request for id {}: {}",e,s));try{o=qq.parseJson(s),n||o&&(o.error||o.success===!1)?(a.log("Upload success request was rejected by the server.","error"),r.failure(qq.extend(o,u))):(a.log("Upload success was acknowledged by the server."),r.success(qq.extend(o,l)))}catch(c){n?(a.log(qq.format("Your server indicated failure in its AWS upload success request response for id {}!",e),"error"),r.failure(u)):(a.log("Upload success was acknowledged by the server."),r.success(l))}}var n,i=[],a={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(){}};return qq.extend(a,e),n=new qq.AjaxRequestor({method:a.method,endpointStore:{getEndpoint:function(){return a.endpoint}},paramsStore:a.paramsStore,maxConnections:a.maxConnections,customHeaders:a.customHeaders,log:a.log,onComplete:t,cors:a.cors,successfulResponseCodes:{POST:[200]}}),{sendSuccessRequest:function(e,t){var o=new qq.Promise;return a.log("Submitting upload success request/notification for "+e),n.send(e,null,t),i[e]=o,o}}},qq.s3.InitiateMultipartAjaxRequester=function(e){function t(e){var t,i=qq.s3.util.getBucket(s.endpointStore.getEndpoint(e)),a={},r=new qq.Promise,l=s.getKey(e);return a["x-amz-date"]=(new Date).toUTCString(),a["Content-Type"]=s.getContentType(e),a["x-amz-acl"]=s.acl,a[qq.s3.util.AWS_PARAM_PREFIX+s.filenameParam]=encodeURIComponent(s.getName(e)),qq.each(s.paramsStore.getParams(e),function(e,t){a[qq.s3.util.AWS_PARAM_PREFIX+e]=encodeURIComponent(t)}),t={headers:n(a,i,l)},o.getSignature(e,t).then(function(e){a.Authorization="AWS "+s.accessKey+":"+e.signature,r.success(a)},r.failure),r}function n(e,t,n){var i=[],a="";return qq.each(e,function(e){"Content-Type"!==e&&i.push(e)}),i.sort(),qq.each(i,function(t,n){a+=n+":"+e[n]+"\n"}),"POST\n\n"+e["Content-Type"]+"\n\n"+a+"/"+t+"/"+n+"?uploads"}function i(e,t,n){var i,a,o,l,u,c=r[e],d=new DOMParser,p=d.parseFromString(t.responseText,"application/xml");delete r[e],n?(u=t.status,a=p.getElementsByTagName("Message"),a.length>0&&(l=a[0].textContent)):(i=p.getElementsByTagName("UploadId"),i.length>0?o=i[0].textContent:l="Upload ID missing from request"),void 0===o?(l?s.log(qq.format("Specific problem detected initiating multipart upload request for {}: '{}'.",e,l),"error"):s.log(qq.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",e,u),"error"),c.failure("Problem initiating upload request with Amazon.",t)):(s.log(qq.format("Initiate multipart upload request successful for {}.  Upload ID is {}",e,o)),c.success(o,t))}var a,o,r={},s={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,accessKey:null,acl:"private",maxConnections:3,getContentType:function(){},getKey:function(){},getName:function(){},log:function(){}};return qq.extend(s,e),o=new qq.s3.SignatureAjaxRequestor({signatureSpec:s.signatureSpec,cors:s.cors,log:s.log}),a=new qq.AjaxRequestor({method:s.method,contentType:null,endpointStore:s.endpointStore,maxConnections:s.maxConnections,log:s.log,onComplete:i,successfulResponseCodes:{POST:[200]}}),{send:function(e){var n=new qq.Promise,i=s.getKey(e)+"?uploads";return t(e).then(function(t){s.log("Submitting S3 initiate multipart upload request for "+e),r[e]=n,a.send(e,i,null,t)},n.failure),n}}},qq.s3.CompleteMultipartAjaxRequester=function(e){function t(e,t){var i,a={},o=new qq.Promise;return a["x-amz-date"]=(new Date).toUTCString(),i={headers:n(e,t,a["x-amz-date"])},s.getSignature(e,i).then(function(e){a.Authorization="AWS "+u.accessKey+":"+e.signature,o.success(a)
},o.failure),o}function n(e,t,n){var i=u.endpointStore.getEndpoint(e),o=qq.s3.util.getBucket(i),r=a(e,t);return"POST\n\napplication/xml; charset=UTF-8\n\nx-amz-date:"+n+"\n"+"/"+o+"/"+r}function i(e,t,n){var i=l[e],a=new DOMParser,o=u.endpointStore.getEndpoint(e),r=qq.s3.util.getBucket(o),s=(u.getKey(e),a.parseFromString(t.responseText,"application/xml")),c=s.getElementsByTagName("Bucket"),d=s.getElementsByTagName("Key");delete l[e],u.log(qq.format("Complete response status {}, body = {}",t.status,t.responseText)),n?u.log(qq.format("Complete Multipart Upload request for {} failed with status {}.",e,t.status),"error"):c.length&&d.length?c[0].textContent!==r&&(n=!0,u.log(qq.format("Wrong bucket in response to Complete Multipart Upload request for {}.",e),"error")):(n=!0,u.log(qq.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",e),"error")),n?i.failure("Problem asking Amazon to combine the parts!",t):i.success(t)}function a(e,t){return qq.format("{}?uploadId={}",u.getKey(e),t)}function o(e){var t=document.implementation.createDocument(null,"CompleteMultipartUpload",null);return qq.each(e,function(e,n){var i=n.part,a=n.etag,o=t.createElement("Part"),r=t.createElement("PartNumber"),s=t.createTextNode(i),l=t.createTextNode(a),u=t.createElement("ETag");u.appendChild(l),r.appendChild(s),o.appendChild(r),o.appendChild(u),qq(t).children()[0].appendChild(o)}),(new XMLSerializer).serializeToString(t)}var r,s,l={},u={method:"POST",endpointStore:null,signatureSpec:null,accessKey:null,maxConnections:3,getKey:function(){},log:function(){}};return qq.extend(u,e),s=new qq.s3.SignatureAjaxRequestor({signatureSpec:u.signatureSpec,cors:u.cors,log:u.log}),r=new qq.AjaxRequestor({method:u.method,contentType:"application/xml; charset=UTF-8",endpointStore:u.endpointStore,maxConnections:u.maxConnections,log:u.log,onComplete:i,successfulResponseCodes:{POST:[200]}}),{send:function(e,n,i){var s=new qq.Promise;return t(e,n).then(function(t){var c=o(i);u.log("Submitting S3 complete multipart upload request for "+e),l[e]=s,r.send(e,a(e,n),null,t,c)},s.failure),s}}},qq.s3.AbortMultipartAjaxRequester=function(e){function t(e,t){var i,a={},o=new qq.Promise;return a["x-amz-date"]=(new Date).toUTCString(),i={headers:n(e,t,a["x-amz-date"])},r.getSignature(e,i).then(function(e){a.Authorization="AWS "+s.accessKey+":"+e.signature,o.success(a)},o.failure),o}function n(e,t,n){var i=s.endpointStore.getEndpoint(e),o=qq.s3.util.getBucket(i),r=a(e,t);return"DELETE\n\n\n\nx-amz-date:"+n+"\n"+"/"+o+"/"+r}function i(e,t,n){var i,a=new DOMParser,o=a.parseFromString(t.responseText,"application/xml"),r=o.getElementsByTagName("Error");s.log(qq.format("Abort response status {}, body = {}",t.status,t.responseText)),n?s.log(qq.format("Abort Multipart Upload request for {} failed with status {}.",e,t.status),"error"):r.length?(n=!0,i=o.getElementsByTagName("Message")[0].textContent,s.log(qq.format("Failed to Abort Multipart Upload request for {}.  Error: {}",e,i),"error")):s.log(qq.format("Abort MPU request succeeded for file ID {}.",e))}function a(e,t){return qq.format("{}?uploadId={}",s.getKey(e),t)}var o,r,s={method:"DELETE",endpointStore:null,signatureSpec:null,accessKey:null,maxConnections:3,getKey:function(){},log:function(){}};return qq.extend(s,e),r=new qq.s3.SignatureAjaxRequestor({signatureSpec:s.signatureSpec,cors:s.cors,log:s.log}),o=new qq.AjaxRequestor({validMethods:["DELETE"],method:s.method,contentType:null,endpointStore:s.endpointStore,maxConnections:s.maxConnections,log:s.log,onComplete:i,successfulResponseCodes:{DELETE:[204]}}),{send:function(e,n){var i=a(e,n);t(e,n).then(function(t){s.log("Submitting S3 Abort multipart upload request for "+e),o.send(e,i,null,t)})}}},qq.s3.UploadHandlerXhr=function(e,t,n,i){function a(e){return encodeURIComponent(o(e))}function o(e){return A[e].key}function r(e,t){A[e].key=t}function s(e){var t=P.getFile(e);A[e].type=t.type,K.createXhr(e),k(e)?(void 0===A[e].loaded&&(A[e].loaded=0),S(e)):(A[e].loaded=0,f(e))}function l(e){var t=A[e].xhr;return function(){4===t.readyState&&(A[e].chunking.enabled?E(e):c(e))}}function u(e){return"EntityTooSmall"===e||"InvalidPart"===e||"InvalidPartOrder"===e||"NoSuchUpload"===e}function c(n,a,o){var r=o||A[n].xhr,s=P.getName(n),l=P.getSize(n),c=d(n,o),p=a||d(n),h=null!=a||c.success!==!0;h&&u(c.code)&&(i("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error"),b(n),delete A[n].loaded,delete A[n].chunking),h&&e.onAutoRetry(n,s,p,r)||(i(qq.format("Upload attempt for file ID {} to S3 is complete",n)),h||(p.success=!0),R(n,s,l,l),B(n,s,p,r),A[n]&&delete A[n].xhr,c.success&&b(n),delete A[n].loaded,delete A[n].chunking,t(n))}function d(e,t){var n,a=t||A[e].xhr,o={};try{i(qq.format("Received response status {} with body: {}",a.status,a.responseText)),a.status===z?o.success=!0:(n=p(a.responseText),n&&(o.error=n.message,o.code=n.code))}catch(r){i("Error when attempting to parse xhr response text ("+r.message+")","error")}return o}function p(e){var t,n,i=new DOMParser,a=i.parseFromString(e,"application/xml"),o=a.getElementsByTagName("Error"),r={};return o.length?(t=a.getElementsByTagName("Code"),n=a.getElementsByTagName("Message"),n.length&&(r.message=n[0].textContent),t.length&&(r.code=t[0].textContent),r):void 0}function h(e){var t=P.getName(e);P.isValid(e)&&(_(e),void 0!==o(e)?(O(e,t),s(e)):N(e,t).then(function(n){r(e,n),O(e,t),s(e)}))}function f(e){var t=A[e].xhr,n=P.getName(e),a=P.getFile(e);t.upload.onprogress=function(t){t.lengthComputable&&(A[e].loaded=t.loaded,R(e,n,t.loaded,t.total))},t.onreadystatechange=l(e),g(e,a).then(function(n){i("Sending upload request for "+e),t.send(n)})}function m(e){var t=H.getParams(e);return t[L]=P.getName(e),qq.s3.util.generateAwsParams({endpoint:V.getEndpoint(e),params:t,type:A[e].type,key:o(e),accessKey:Y,acl:$,expectedStatus:z,minFileSize:W.minSizeLimit,maxFileSize:W.maxSizeLimit,log:i},qq.bind(J.getSignature,this,e))}function g(e,t){var n=new FormData,i=V.getEndpoint(e),a=i,o=A[e].xhr,r=new qq.Promise;return m(e).then(function(e){o.open("POST",a,!0),qq.obj2FormData(e,n),n.append("file",t),r.success(n)},function(t){r.failure(t),c(e,{error:t})}),r}function _(e){var t,n;Z&&void 0===o(e)&&(t=x(e),n=localStorage.getItem(t),n&&(i(qq.format("Identified file with ID {} and name of {} as resumable.",e,P.getName(e))),n=JSON.parse(n),A[e].uuid=n.uuid,r(e,n.key),A[e].loaded=n.loaded,A[e].chunking=n.chunking))}function v(e){var t,n;Z&&(t=x(e),n={name:P.getName(e),size:P.getSize(e),uuid:P.getUuid(e),key:o(e),loaded:A[e].loaded,chunking:A[e].chunking,lastUpdated:Date.now()},localStorage.setItem(t,JSON.stringify(n)))}function b(e){var t;return Z&&(t=x(e),t&&localStorage.getItem(t))?(localStorage.removeItem(t),!0):!1}function y(e){Z&&qq.each(localStorage,function(t,n){if(0===t.indexOf("qqs3resume-")){var i=JSON.parse(n);e(t,i)}})}function q(){var e=[];return y(function(t,n){e.push({name:n.name,size:n.size,uuid:n.uuid,partIdx:n.chunking.lastSent+1,key:n.key})}),e}function w(){var t=e.resume.recordsExpireIn;y(function(e,n){var a=new Date(n.lastUpdated);a.setDate(a.getDate()+t),a.getTime()<=Date.now()&&(i("Removing expired resume record with key "+e),localStorage.removeItem(e))})}function x(t){var n=P.getName(t),i=P.getSize(t),a=e.chunking.partSize,o=e.endpointStore.getEndpoint(t),r=qq.s3.util.getBucket(o);return qq.format("qqs3resume-{}-{}-{}-{}",n,i,a,r)}function k(e){var t;return A[e].chunking||(A[e].chunking={},t=K.getTotalChunks(e),t>1?(A[e].chunking.enabled=!0,A[e].chunking.parts=t):A[e].chunking.enabled=!1),A[e].chunking.enabled}function S(e){j(e).then(function(){M(e)},function(t,n){c(e,{error:t},n)})}function C(e){return A[e].chunking.lastSent>=0?A[e].chunking.lastSent+1:0}function D(e){var t=C(e)+1,n=A[e].chunking.uploadId;return qq.format("?partNumber={}&uploadId={}",t,n)}function F(t){var n=e.endpointStore.getEndpoint(t),i=D(t),o=a(t);return qq.format("{}/{}{}",n,o,i)}function M(e){var t=A[e].chunking.parts,n=C(e);t>n?U(e):T(e)}function T(e){var t=A[e].chunking.uploadId,n=A[e].chunking.etags;tt.send(e,t,n).then(function(t){c(e,null,t)},function(t,n){c(e,{error:t},n)})}function U(t){var n=C(t),a=P.getName(t),o=A[t].xhr,r=F(t),s=P.getSize(t),u=K.getChunkData(t,n);I(t).then(function(n){e.onUploadChunk(t,a,K.getChunkDataForCallback(u)),o.upload.onprogress=function(n){if(n.lengthComputable){var i=n.loaded+A[t].loaded;e.onProgress(t,a,i,s)}},o.onreadystatechange=l(t),o.open("PUT",r,!0),qq.each(n,function(e,t){o.setRequestHeader(e,t)}),i(qq.format("Sending part {} of {} for file ID {} - {} ({} bytes)",u.part+1,u.count,t,a,u.size)),o.send(u.blob)},function(){c(t,{error:"Problem signing the chunk!"},o)})}function I(t){var n,i={},o=e.endpointStore.getEndpoint(t),r=qq.s3.util.getBucket(o),s=a(t),l=(new Date).toUTCString(),u=D(t),c=new qq.Promise;return i["x-amz-date"]=l,n={headers:"PUT\n\n\n\nx-amz-date:"+l+"\n"+"/"+r+"/"+s+u},Q.getSignature(t,n).then(function(t){i.Authorization="AWS "+e.accessKey+":"+t.signature,c.success(i)},c.failure),c}function j(e){return A[e].chunking.uploadId?(new qq.Promise).success(A[e].chunking.uploadId):et.send(e).then(function(t){A[e].chunking.uploadId=t})}function E(e){var t,n=C(e),a=A[e].xhr,o=d(e),r=K.getChunkData(e,n);o.success?(A[e].chunking.lastSent=n,t=a.getResponseHeader("ETag"),A[e].chunking.etags||(A[e].chunking.etags=[]),A[e].chunking.etags.push({part:n+1,etag:t}),A[e].loaded+=r.size,v(e),M(e)):(o.error&&i(o.error,"error"),c(e))}var P,A=[],z=200,R=e.onProgress,B=e.onComplete,O=e.onUpload,N=e.getKeyName,L=e.filenameParam,H=e.paramsStore,V=e.endpointStore,Y=e.accessKey,$=e.objectProperties.acl,W=e.validation,G=e.signature,X=e.chunking.enabled&&qq.supportedFeatures.chunking,Z=e.resume.enabled&&X&&qq.supportedFeatures.resume&&void 0!==window.localStorage,K={},J=new qq.s3.SignatureAjaxRequestor({expectingPolicy:!0,signatureSpec:G,cors:e.cors,log:i}),Q=new qq.s3.SignatureAjaxRequestor({signatureSpec:G,cors:e.cors,log:i}),et=new qq.s3.InitiateMultipartAjaxRequester({filenameParam:L,endpointStore:V,paramsStore:H,signatureSpec:G,accessKey:e.accessKey,acl:$,cors:e.cors,log:i,getContentType:function(e){return P.getFile(e).type},getKey:function(e){return a(e)},getName:function(e){return P.getName(e)}}),tt=new qq.s3.CompleteMultipartAjaxRequester({endpointStore:V,signatureSpec:G,accessKey:e.accessKey,cors:e.cors,log:i,getKey:function(e){return a(e)}}),nt=new qq.s3.AbortMultipartAjaxRequester({endpointStore:V,signatureSpec:G,accessKey:e.accessKey,cors:e.cors,log:i,getKey:function(e){return a(e)}});return P=new qq.UploadHandlerXhrApi(K,A,X?e.chunking:null,h,e.onCancel,n,i),w(),qq.override(P,function(e){return{add:function(t){var n=e.add(t);return Z&&_(n),n},getResumableFilesData:function(){return q()},expunge:function(t){var n=A[t].chunking&&A[t].chunking.uploadId,i=b(t);void 0!==n&&i&&nt.send(t,n),e.expunge(t)},getThirdPartyFileId:function(e){return o(e)}}})},qq.s3.UploadHandlerForm=function(e,t,n,i){function a(t,n){var i=e.endpointStore.getEndpoint(t),a=qq.s3.util.getBucket(i);try{var o=n.contentDocument||n.contentWindow.document;o.body.innerHTML;var r=qq.s3.util.parseIframeResponse(n);if(r.bucket===a&&r.key===qq.s3.util.encodeQueryStringParam(c[t].key))return!0;d("Response from AWS included an unexpected bucket or key name.","error")}catch(s){d("Error when attempting to parse form upload response ("+s.message+")","error")}return!1}function o(e){var t=g.getParams(e);return t[m]=u.getName(e),qq.s3.util.generateAwsParams({endpoint:_.getEndpoint(e),params:t,key:c[e].key,accessKey:v,acl:b,minFileSize:y.minSizeLimit,maxFileSize:y.maxSizeLimit,successRedirectUrl:w,log:d},qq.bind(x.getSignature,this,e))}function r(t,n){var i=new qq.Promise,a=e.demoMode?"GET":"POST",r=e.endpointStore.getEndpoint(t),s=u.getName(t);return o(t).then(function(e){var t=k.initFormForUpload({method:a,endpoint:r,params:e,paramsInBody:!0,targetName:n.name});i.success(t)},function(e){i.failure(e),l(t,n,s,{error:e})}),i}function s(e){var t=u.getName(e),n=k.createIframe(e),i=c[e].input;r(e,n).then(function(o){h(e,t),o.appendChild(i),k.attachLoadEvent(n,function(i){d("iframe loaded"),i?i.success===!1&&d("Amazon likely rejected the upload request","error"):(i={},i.success=a(e,n),i.success===!1&&d("A success response was received by Amazon, but it was invalid in some way.","error")),l(e,n,t,i)}),d("Sending upload request for "+e),o.submit(),qq(o).remove()})}function l(n,i,a,o){k.detachLoadEvent(n),qq(i).remove(),(o.success||!e.onAutoRetry(n,a,o))&&(p(n,a,o),t(n))}var u,c=[],t=t,d=i,p=e.onComplete,h=e.onUpload,f=e.getKeyName,m=e.filenameParam,g=e.paramsStore,_=e.endpointStore,v=e.accessKey,b=e.objectProperties.acl,y=e.validation,q=e.signature,w=e.iframeSupport.localBlankPagePath,x=new qq.s3.SignatureAjaxRequestor({signatureSpec:q,cors:e.cors,log:d}),k={};if(void 0===w)throw new Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!");return u=new qq.UploadHandlerFormApi(k,c,!1,"file",e.onCancel,n,d),qq.extend(u,{upload:function(e){var t=c[e].input,n=u.getName(e);if(!t)throw new Error("file with passed id was not added, or already uploaded or cancelled");u.isValid(e)&&(c[e].key?s(e):f(e,n).then(function(t){c[e].key=t,s(e)}))},getThirdPartyFileId:function(e){return c[e].key}}),u},function(e){e.fn.fineUploaderS3=function(t){return"object"==typeof t&&(t.endpointType="s3"),e.fn.fineUploader.apply(this,arguments)}}(jQuery),qq.PasteSupport=function(e){function t(e){return e.type&&0===e.type.indexOf("image/")}function n(){qq(a.targetElement).attach("paste",function(e){var n=e.clipboardData;n&&qq.each(n.items,function(e,n){if(t(n)){var i=n.getAsFile();a.callbacks.pasteReceived(i)}})})}function i(){o&&o()}var a,o;return a={targetElement:null,callbacks:{log:function(){},pasteReceived:function(){}}},qq.extend(a,e),n(),{reset:function(){i()}}},qq.DragAndDrop=function(e){function t(e,t){s.callbacks.dropLog("Grabbed "+e.length+" dropped files."),t.dropDisabled(!1),s.callbacks.processingDroppedFilesComplete(e)}function n(e){var t,i=new qq.Promise;return e.isFile?e.file(function(e){u.push(e),i.success()},function(t){s.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+t.code+".","error"),i.failure()}):e.isDirectory&&(t=e.createReader(),t.readEntries(function(e){var t=e.length;qq.each(e,function(e,a){n(a).done(function(){t-=1,0===t&&i.success()})}),e.length||i.success()},function(t){s.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+t.code+".","error"),i.failure()})),i}function i(e,t){var i=[],a=new qq.Promise;return s.callbacks.processingDroppedFiles(),t.dropDisabled(!0),e.files.length>1&&!s.allowMultipleItems?(s.callbacks.processingDroppedFilesComplete([]),s.callbacks.dropError("tooManyFilesError",""),t.dropDisabled(!1),a.failure()):(u=[],qq.isFolderDropSupported(e)?qq.each(e.items,function(e,t){var o=t.webkitGetAsEntry();o&&(o.isFile?u.push(t.getAsFile()):i.push(n(o).done(function(){i.pop(),0===i.length&&a.success()})))}):u=e.files,0===i.length&&a.success()),a}function a(e){var n=new qq.UploadDropZone({element:e,onEnter:function(t){qq(e).addClass(s.classes.dropActive),t.stopPropagation()},onLeaveNotDescendants:function(){qq(e).removeClass(s.classes.dropActive)},onDrop:function(a){s.hideDropZonesBeforeEnter&&qq(e).hide(),qq(e).removeClass(s.classes.dropActive),i(a.dataTransfer,n).done(function(){t(u,n)})}});return c.addDisposer(function(){n.dispose()}),s.hideDropZonesBeforeEnter&&qq(e).hide(),l.push(n),n}function o(e){var t;return qq.each(e.dataTransfer.types,function(e,n){return"Files"===n?(t=!0,!1):void 0}),t}function r(){var e=s.dropZoneElements;qq.each(e,function(t,n){var i=a(n);!e.length||qq.ie()&&!qq.ie10()||c.attach(document,"dragenter",function(t){!i.dropDisabled()&&o(t)&&qq.each(e,function(e,t){qq(t).css({display:"block"})})})}),c.attach(document,"dragleave",function(t){s.hideDropZonesBeforeEnter&&qq.FineUploader.prototype._leaving_document_out(t)&&qq.each(e,function(e,t){qq(t).hide()})}),c.attach(document,"drop",function(t){s.hideDropZonesBeforeEnter&&qq.each(e,function(e,t){qq(t).hide()}),t.preventDefault()})}var s,l=[],u=[],c=new qq.DisposeSupport;return s={dropZoneElements:[],hideDropZonesBeforeEnter:!1,allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks},qq.extend(s,e,!0),r(),{setupExtraDropzone:function(e){s.dropZoneElements.push(e),a(e)},removeDropzone:function(e){var t,n=s.dropZoneElements;for(t in n)if(n[t]===e)return n.splice(t,1)},dispose:function(){c.dispose(),qq.each(l,function(e,t){t.dispose()})}}},qq.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(){},dropError:function(e,t){qq.log("Drag & drop error code '"+e+" with these specifics: '"+t+"'","error")},dropLog:function(e,t){qq.log(e,t)}}},qq.UploadDropZone=function(e){function t(){return qq.safari()||qq.firefox()&&qq.windows()}function n(){u||(t?c.attach(document,"dragover",function(e){e.preventDefault()}):c.attach(document,"dragover",function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())}),u=!0)}function i(e){if(qq.ie()&&!qq.ie10())return!1;var t,n=e.dataTransfer,i=qq.safari();return t=qq.ie10()||qq.ie11()?!0:"none"!==n.effectAllowed,n&&t&&(n.files||!i&&n.types.contains&&n.types.contains("Files"))}function a(e){return void 0!==e&&(l=e),l}function o(){c.attach(s,"dragover",function(e){if(i(e)){var t=qq.ie()||qq.ie11()?null:e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",e.stopPropagation(),e.preventDefault()}}),c.attach(s,"dragenter",function(e){if(!a()){if(!i(e))return;r.onEnter(e)}}),c.attach(s,"dragleave",function(e){if(i(e)){r.onLeave(e);var t=document.elementFromPoint(e.clientX,e.clientY);qq(this).contains(t)||r.onLeaveNotDescendants(e)}}),c.attach(s,"drop",function(e){if(!a()){if(!i(e))return;e.preventDefault(),r.onDrop(e)}})}var r,s,l,u,c=new qq.DisposeSupport;return r={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}},qq.extend(r,e),s=r.element,n(),o(),{dropDisabled:function(e){return a(e)},dispose:function(){c.dispose()}}},qq.DeleteFileAjaxRequestor=function(e){function t(){return"POST"===i.method.toUpperCase()?{_method:"DELETE"}:{}}var n,i={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:{},paramsStore:{},demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onDelete:function(){},onDeleteComplete:function(){}};return qq.extend(i,e),n=new qq.AjaxRequestor({validMethods:["POST","DELETE"],method:i.method,endpointStore:i.endpointStore,paramsStore:i.paramsStore,mandatedParams:t(),maxConnections:i.maxConnections,customHeaders:i.customHeaders,demoMode:i.demoMode,log:i.log,onSend:i.onDelete,onComplete:i.onDeleteComplete,cors:i.cors}),{sendDelete:function(e,t,a){var o=a||{};i.log("Submitting delete file request for "+e),"DELETE"===n.getMethod()?n.send(e,t,o):(o[i.uuidParamName]=t,n.send(e,null,o))}}},qq.WindowReceiveMessage=function(e){var t={log:function(){}},n={};return qq.extend(t,e),{receiveMessage:function(e,t){var i=function(e){t(e.data)};window.postMessage?n[e]=qq(window).attach("message",i):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(e){if(window.postMessage){var t=n[e];t&&t()}}}},qq.UiEventHandler=function(e,t){function n(e){i.attach(e,a.eventType,function(e){e=e||window.event;var t=e.target||e.srcElement;a.onHandled(t,e)})}var i=new qq.DisposeSupport,a={eventType:"click",attachTo:null,onHandled:function(){}},o={addHandler:function(e){n(e)},dispose:function(){i.dispose()}};return qq.extend(t,{getItemFromEventTarget:function(e){for(var t=e.parentNode;void 0===t.qqFileId;)t=t.parentNode;return t},getFileIdFromItem:function(e){return e.qqFileId},getDisposeSupport:function(){return i}}),qq.extend(a,e),a.attachTo&&n(a.attachTo),o},qq.DeleteRetryOrCancelClickHandler=function(e){function t(e,t){if(qq(e).hasClass(a.classes.cancel)||qq(e).hasClass(a.classes.retry)||qq(e).hasClass(a.classes.deleteButton)){var o=i.getItemFromEventTarget(e),r=i.getFileIdFromItem(o);qq.preventDefault(t),a.log(qq.format("Detected valid cancel, retry, or delete click event on file '{}', ID: {}.",a.onGetName(r),r)),n(e,r)}}function n(e,t){qq(e).hasClass(a.classes.deleteButton)?a.onDeleteFile(t):qq(e).hasClass(a.classes.cancel)?a.onCancel(t):a.onRetry(t)}var i={},a={listElement:document,log:function(){},classes:{cancel:"qq-upload-cancel",deleteButton:"qq-upload-delete",retry:"qq-upload-retry"},onDeleteFile:function(){},onCancel:function(){},onRetry:function(){},onGetName:function(){}};qq.extend(a,e),a.eventType="click",a.onHandled=t,a.attachTo=a.listElement,qq.extend(this,new qq.UiEventHandler(a,i))},qq.FilenameEditHandler=function(e,t){function n(e){var t=l.onGetName(e),n=t.lastIndexOf(".");return n>0&&(t=t.substr(0,n)),t}function i(e){var t=l.onGetName(e);return qq.getExtension(t)}function a(e,t){var n,a=e.value;void 0!==a&&qq.trimStr(a).length>0&&(n=i(t),void 0!==n&&(a=a+"."+n),l.onSetName(t,a)),l.onEditingStatusChange(t,!1)}function o(e,n){t.getDisposeSupport().attach(e,"blur",function(){a(e,n)})}function r(e,n){t.getDisposeSupport().attach(e,"keyup",function(t){var i=t.keyCode||t.which;13===i&&a(e,n)})}var s,l={listElement:null,log:function(){},classes:{file:"qq-upload-file"},onGetUploadStatus:function(){},onGetName:function(){},onSetName:function(){},onGetInput:function(){},onEditingStatusChange:function(){}};return qq.extend(l,e),l.attachTo=l.listElement,s=qq.extend(this,new qq.UiEventHandler(l,t)),qq.extend(t,{handleFilenameEdit:function(e,t,i,a){var s=l.onGetInput(i);l.onEditingStatusChange(e,!0),s.value=n(e),a&&s.focus(),o(s,e),r(s,e)}}),s},qq.FilenameClickHandler=function(e){function t(e,t){if(qq(e).hasClass(i.classes.file)||qq(e).hasClass(i.classes.editNameIcon)){var a=n.getItemFromEventTarget(e),o=n.getFileIdFromItem(a),r=i.onGetUploadStatus(o);r===qq.status.SUBMITTED&&(i.log(qq.format("Detected valid filename click event on file '{}', ID: {}.",i.onGetName(o),o)),qq.preventDefault(t),n.handleFilenameEdit(o,e,a,!0))}}var n={},i={log:function(){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(){},onGetName:function(){}};return qq.extend(i,e),i.eventType="click",i.onHandled=t,qq.extend(this,new qq.FilenameEditHandler(i,n))},qq.FilenameInputFocusInHandler=function(e,t){function n(e){if(qq(e).hasClass(i.classes.editFilenameInput)){var n=t.getItemFromEventTarget(e),a=t.getFileIdFromItem(n),o=i.onGetUploadStatus(a);o===qq.status.SUBMITTED&&(i.log(qq.format("Detected valid filename input focus event on file '{}', ID: {}.",i.onGetName(a),a)),t.handleFilenameEdit(a,e,n))}}var i={listElement:null,classes:{editFilenameInput:"qq-edit-filename"},onGetUploadStatus:function(){},log:function(){}};return t||(t={}),i.eventType="focusin",i.onHandled=n,qq.extend(i,e),qq.extend(this,new qq.FilenameEditHandler(i,t))},qq.FilenameInputFocusHandler=function(e){return e.eventType="focus",e.attachTo=null,qq.extend(this,new qq.FilenameInputFocusInHandler(e,{}))},qq}),define("fine-uploader",["fine-uploader/s3.fineuploader"],function(e){return e}),function(e){function t(e){if(e in d.style)return e;var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1);if(e in d.style)return e;for(var i=0;i<t.length;++i){var a=t[i]+n;if(a in d.style)return a}}function n(){return d.style[p.transform]="",d.style[p.transform]="rotateY(90deg)",""!==d.style[p.transform]}function i(e){return"string"==typeof e&&this.parse(e),this}function a(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):n()}function o(t){var n=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=l(t),-1===e.inArray(t,n)&&n.push(t)}),n}function r(t,n,i,a){var r=o(t);e.cssEase[i]&&(i=e.cssEase[i]);var s=""+c(n)+" "+i;parseInt(a,10)>0&&(s+=" "+c(a));var l=[];return e.each(r,function(e,t){l.push(t+" "+s)}),l.join(", ")}function s(t,n){n||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=p.transform,e.cssHooks[t]={get:function(n){var i=e(n).css("transit:transform");return i.get(t)},set:function(n,i){var a=e(n).css("transit:transform");a.setFromString(t,i),e(n).css({"transit:transform":a})}}}function l(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function u(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function c(t){var n=t;return e.fx.speeds[n]&&(n=e.fx.speeds[n]),u(n,"ms")}e.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var d=document.createElement("div"),p={},h=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;p.transition=t("transition"),p.transitionDelay=t("transitionDelay"),p.transform=t("transform"),p.transformOrigin=t("transformOrigin"),p.transform3d=n();var f={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},m=p.transitionEnd=f[p.transition]||null;for(var g in p)p.hasOwnProperty(g)&&"undefined"==typeof e.support[g]&&(e.support[g]=p[g]);d=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new i},set:function(t,n){var a=n;a instanceof i||(a=new i(a)),t.style[p.transform]="WebkitTransform"!==p.transform||h?a.toString():a.toString(!0),e(t).data("transform",a)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[p.transformOrigin]},set:function(e,t){e.style[p.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[p.transition]},set:function(e,t){e.style[p.transition]=t}}),s("scale"),s("translate"),s("rotate"),s("rotateX"),s("rotateY"),s("rotate3d"),s("perspective"),s("skewX"),s("skewY"),s("x",!0),s("y",!0),i.prototype={setFromString:function(e,t){var n="string"==typeof t?t.split(","):t.constructor===Array?t:[t];n.unshift(e),i.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=u(e,"deg")},rotateX:function(e){this.rotateX=u(e,"deg")},rotateY:function(e){this.rotateY=u(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=u(e,"deg")},skewY:function(e){this.skewY=u(e,"deg")},perspective:function(e){this.perspective=u(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==e&&void 0!==e&&(this._translateX=u(e,"px")),null!==t&&void 0!==t&&(this._translateY=u(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=u(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,i){t.setFromString(n,i)})},toString:function(e){var t=[];for(var n in this)if(this.hasOwnProperty(n)){if(!p.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&(e&&"scale"===n?t.push(n+"3d("+this[n]+",1)"):e&&"translate"===n?t.push(n+"3d("+this[n]+",0)"):t.push(n+"("+this[n]+")"))}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,n,i,o){var s=this,l=0,u=!0;"function"==typeof n&&(o=n,n=void 0),"function"==typeof i&&(o=i,i=void 0),"undefined"!=typeof t.easing&&(i=t.easing,delete t.easing),"undefined"!=typeof t.duration&&(n=t.duration,delete t.duration),"undefined"!=typeof t.complete&&(o=t.complete,delete t.complete),"undefined"!=typeof t.queue&&(u=t.queue,delete t.queue),"undefined"!=typeof t.delay&&(l=t.delay,delete t.delay),"undefined"==typeof n&&(n=e.fx.speeds._default),"undefined"==typeof i&&(i=e.cssEase._default),n=c(n);var d=r(t,n,i,l),h=e.transit.enabled&&p.transition,f=h?parseInt(n,10)+parseInt(l,10):0;if(0===f){var g=function(e){s.css(t),o&&o.apply(s),e&&e()};return a(s,u,g),s}var _={},v=function(n){var i=!1,a=function(){i&&s.unbind(m,a),f>0&&s.each(function(){this.style[p.transition]=_[this]||null}),"function"==typeof o&&o.apply(s),"function"==typeof n&&n()};f>0&&m&&e.transit.useTransitionEnd?(i=!0,s.bind(m,a)):window.setTimeout(a,f),s.each(function(){f>0&&(this.style[p.transition]=d),e(this).css(t)})},b=function(e){this.offsetWidth,v(e)};return a(s,u,b),this},e.transit.getTransitionValue=r}(jQuery),define("jquery.transit",["jquery.transit/jquery.transit"],function(e){return e}),define("jquery.transit/jquery.transit",function(){}),define("components/photo-share-button-2/js/photo-share",["require","lodash","jquery","./utils","lib/facebookApi","tmpl!photo-share-upload-zone","fine-uploader","jquery.transit"],function(e){function t(e){var t=this;t.options=i.extend(!0,{},m,l,e),o.init(n.bind(t.onFacebookInit,t))}var n=e("lodash"),i=e("jquery"),a=e("./utils"),o=e("lib/facebookApi"),r=e("tmpl!photo-share-upload-zone"),s=e("fine-uploader");e("jquery.transit");var l,u="withCredentials"in new XMLHttpRequest?"https:":window.location.protocol,c="share.massrelevance.com",d=u+"//"+c,p="https://"+c,h=p+"/twitter/auth",f=MR.spacePath(),m={twitterAuthRedirectURI:f+"/mr/photo-share-redirect.html",uploaderOpts:{chunking:{enabled:!0},cors:{allowXdr:!0,allowCors:!0,expected:!0},iframeSupport:{localBlankPagePath:u+f+"/mr/photo-share-blank-page.html"},request:{endpoint:"https://share-massrelevance-com.s3.amazonaws.com",accessKey:"AKIAI3SIW5OJMK7OMNZA"},retry:{enableAuto:!0},signature:{endpoint:d+"/s3/signature"},template:r(),uploadSuccess:{endpoint:d+"/s3/success"},multiple:!1,validation:{acceptFiles:"image/*",allowedExtensions:["jpeg","jpg","gif","png"]}}},g={twitterAuthRedirectURI:"//"+window.location.host+"/lib/static/photo-share-redirect.html",uploaderOpts:{iframeSupport:{localBlankPagePath:u+"//"+window.location.host+"/lib/static/photo-share-blank-page.html"}}},_={twitterAuthRedirectURI:"//up.massrelevance.com/massrel-products/photo-upload/redirect.html",uploaderOpts:{iframeSupport:{localBlankPagePath:u+"//"+window.location.host+"/massrel-products/photo-upload/blankPage.html"}}},v=MR.spaceConfig&&MR.spaceConfig.env;return"dev"===v?l=g:"preview"===v&&(l=_),t.prototype.getRequestParams=function(e){var t=this,i={},a=t.model.get(e+"Message"),o=t[e+"User"],r=t.options[e]&&t.options[e].destination;
return o&&(i.user=o,i.message=a,i.destination=r),n.pick(i,function(e){return"undefined"!=typeof e&&null!==e})},t.prototype.share=function(e){var t,n=this,a=i.Deferred();return n.getUploadPromise().then(function(a){return t=n.getRequestParams(e),t.image=a,i.getJSON(p+"/"+e+"/share?callback=?",t)}).done(function(e){e&&e.success&&a.resolve(e.id)}),a.promise()},t.prototype.setupUploader=function(e,t){var n=this,a=i.extend({},n.options.uploaderOpts,{showConfirm:function(){},showMessage:function(e){n.showMessage(e)},showPrompt:function(){}});return n.$modal=e,n.model=t,a.element=e.find(".upload-target").get(0),a.callbacks=n.callbacks(),n.uploader=new s.s3.FineUploader(a),n.uploader},t.prototype.callbacks=function(){var e=this;return{onComplete:function(){e.complete.apply(e,arguments)},onSubmit:function(){e.fileAdded.apply(e,arguments)},onSubmitted:function(){e.validated.apply(e,arguments)}}},t.prototype.complete=function(e,t,n){var i,a=this,o=/(?:.*)(\.[^.]+)/,r=a.uploader.getUuid(e),s=t.match(o);s&&2===s.length&&(i=r+s[1],a.uploadDeferred&&a.uploadDeferred.resolve(i),a.showS3Preview(e,n&&n.url))},t.prototype.uploadError=function(e,t,i){var a=this;/^XHR/.test(i)&&n.delay(function(){},500),a.complete()},t.prototype.fileAdded=function(){var e=this;e.$modal.find(".errors").empty()},t.prototype.validated=function(e){var t=this;t.uploadDeferred=i.Deferred(),t.model.set("step","share"),t.showPreview(e)},t.prototype.getUploadPromise=function(){var e=this,t=e.uploadDeferred;return t&&t.promise()||a.emptyPromise()},t.prototype.showPreview=function(e){var t=this,n=t.uploader.getFile(e),i=window.FileReader&&new FileReader;n&&i&&(i.onload=a.minDelayedExecutor(function(e){t.model.set("imagePreviewUrl",e.target.result)},1500),i.readAsDataURL(n))},t.prototype.showS3Preview=function(e,t){var n=this,i=n.uploader.getFile(e);i&&window.FileReader||!t||n.model.set("imagePreviewUrl",t)},t.prototype.twitterAuth=function(){var e,t,n,o=this,r="resizable=yes,toolbar=no,location=yes",s=550,l=480,u=screen.width,c=Math.round(u/2-s/2),d=0,p=i.Deferred();return o.twitterUser?p.resolve(o.twitterUser):(e=function(){var e=a.getCookie("mr_pauth_t");e?(o.twitterUser=e,p.resolve(e)):p.reject("Twitter authentication failed")},n=function(){o.twitterAuthWindow&&o.twitterAuthWindow.closed&&(o.hackInterval=window.setTimeout(e,500),window.clearInterval(o.twitterCloseInterval))},o.twitterCloseInterval=window.setInterval(n,500),t=h+"?redirect_url="+encodeURIComponent(window.location.protocol+o.options.twitterAuthRedirectURI),o.twitterAuthWindow=window.open(t,"mr_twitter_auth",r+",width="+s+",height="+l+",left="+c+",top="+d)),p.promise()},t.prototype.facebookAuth=function(){var e=this,t=i.Deferred();return e.facebookUser?t.resolve(e.facebookUser):o.getClient().login(null,["publish_actions"]).then(function(n){e.facebookUser=n&&n.accessToken,t.resolve(e.facebookUser)}).fail(function(){t.reject("Facebook authentication failed")}),t.promise()},t.prototype.onFacebookInit=function(){this.facebookUser=o.getClient().currentUser()},t.prototype.showMessage=function(e){this.model.get("errors").add({message:e})},t.prototype.reset=function(){this.uploader&&(this.uploader.reset(),this.uploader=void 0),window.clearInterval(this.hackInterval)},t.fileApi=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),t}),define("components/photo-share-button-2/js/views/PhotoShareDialogView",["require","jquery","lodash","../utils","lib/views/BaseView","tmpl!photo-share-dialog","../photo-share"],function(e){var t=e("jquery"),n=e("lodash"),i=e("../utils"),a=e("lib/views/BaseView"),o=e("tmpl!photo-share-dialog"),r=e("../photo-share"),s=a.extend({template:o,className:function(){var e=["photo-share-modal-content","step-"+this.model.get("step")];return r.fileApi&&e.push("file-api"),e.join(" ")},events:{"click .share-block-toggle":"toggleShareBlock","click .share-action":"share","click .change-image":"changeImage","click input[type=file]":"changeImageIE","change .message-area":"changeMessage","keyup .message-area":"changeMessage","cut .message-area":"changeMessage","paste .message-area":"pasteMessage","click .error":"hideError"},prepareModelJSON:function(e){var t=e;return t.facebook&&(t.facebook=t.facebookSettings||{},delete t.facebookSettings,t.facebook.message=t.facebookMessage,delete t.facebookMessage),t.twitter&&(t.twitter=t.twitterSettings||{},delete t.twitterSettings,t.twitter.message=t.twitterMessage,delete t.twitterMessage,t.twitter.initial_character_count=i.tweetCharacterCount(t.twitter.message)),t},initialize:function(e){a.prototype.initialize.call(this,e),this.photoShare=new r(this.prepareModelJSON(this.model.toJSON())),this.listenTo(this.model,"change:step",this.changeStep),this.listenTo(this.model,"change:imagePreviewUrl",this.showPreview),this.listenTo(this.model,"change:twitterMessage",this.updateTweetCharacterCount),this.listenTo(this.model.get("errors"),"add",this.showError)},render:function(){var e=this,t=this.model.toJSON();return this.$el.html(o(this.prepareModelJSON(t))),e.uploader=e.photoShare.setupUploader(e.$el,e.model),this},close:function(e){var t=this;t.photoShare.reset(),t.uploader=null;var i=this.options.closeHandler;n.isFunction(i)&&i(),this.dispatcher().trigger("closeDialog",{delay:e||0})},toggleShareBlock:function(e){var n=this,i=t(".error");i.fadeOut({complete:function(){i.remove()}});var a=t(e.target),o=a.is(":checked"),r=a.closest(".share-block"),s=r.find(".share-form"),l=s.get(0).scrollHeight,u=o?l:0,c=t.noop;if(r.toggleClass("open",o),o){var d=a.data("network"),p="uploadintent";"twitter"===d?p="tweetuploadintent":"facebook"===d&&(p="fbpostuploadintent"),n.analytics().trackEvent({category:"viz:upload",action:p}),c=function(){s.css("height","auto")}}else s.css("height",l);s.transition({height:u},c)},changeMessage:function(e){var n=t(e.target),i=n.data("network");this.model.set(i+"Message",n.val())},pasteMessage:function(e){var t=this;setTimeout(function(){t.changeMessage(e)},0)},share:function(e){var n=this,a=t(e.target),o=a.data("network"),r=a.closest(".share-block");if(e.preventDefault(),"twitter"===o){var s=i.tweetCharacterCount(this.model.get("twitterMessage"));if(0>s)return t(".error").children().length||this.photoShare.showMessage("Oh no! Your tweet is too long!"),void 0}if(a.data("disabled"))return!0;a.data("disabled",!0),r.addClass("share-in-progress auth-in-progress");var l=n.photoShare[o+"Auth"]||i.emptyPromise;l.call(n.photoShare).then(function(){i.minDelayedExecutor(function(){r.removeClass("auth-in-progress"),n.handleShare(r,o)},1e3)()}).fail(function(e){a.data("disabled",!1),r.removeClass("share-in-progress auth-in-progress"),n.photoShare.showMessage(e)})},handleShare:function(e,t){var n,a=this;e.addClass("upload-in-progress"),n=function(){var n,i,o,r=(a.model.get("successfulShares")||0)+1;r>=2&&a.closeModal(),a.model.set("successfulShares",r),e.removeClass("share-in-progress upload-in-progress"),a.model.set("successfulShares",r),e.find(".share-block-toggle").attr("disabled",!0),o=e.height(),e.css({"min-height":o}),n=e.find(".share-form"),i=e.find(".share-thanks"),n.transition({opacity:0},function(){n.hide(),e.addClass("thanks"),i.transition({opacity:1}),e.transition({"min-height":0})});var s="uploadcomplete";"twitter"===t?s="tweetuploadcomplete":"facebook"===t&&(s="fbpostuploadcomplete"),a.analytics().trackEvent({category:"viz:upload",action:s})},a.photoShare.share(t).then(function(){i.minDelayedExecutor(function(){n()},1e3)()})},changeImage:function(e){var t=this,n=t.$el.find(".image-preview-wrapper"),i=n.find("img");e.preventDefault(),i.remove(),n.removeClass("loaded").addClass("loading"),this.model.set("step","file-select"),this.model.unset("imagePreviewUrl",{silent:!0}),this.uploader.cancelAll(),this.uploader.clearStoredFiles(),this.$el.find(".upload-button input").click()},changeImageIE:function(){var e=this.$el.find(".image-preview-wrapper"),t=e.find("img");t.remove(),e.removeClass("loaded").addClass("loading"),this.model.set("step","file-select"),this.model.unset("imagePreviewUrl",{silent:!0}),this.uploader.cancelAll(),this.uploader.clearStoredFiles()},updateTweetCharacterCount:function(e,n){this.$twitterCharacterCounter=this.$twitterCharacterCounter||this.$el.find(".character-counter");var a=i.tweetCharacterCount(n);if(a>=0){var o=t(".error");o.fadeOut({complete:function(){o.remove()}})}this.$twitterCharacterCounter.html(a).toggleClass("over-limit",0>a)},changeStep:function(e,t){var n=this;n.$el.removeClass("step-"+n.model.previous("step")).addClass("step-"+t),"share"===t&&n.$el.find(".image-preview-wrapper").addClass("loading")},showPreview:function(e,n){var i=this,a=i.$el.find(".image-preview-wrapper"),o=t('<img src="'+n+'"/>');i.$el.find(".preview-content input").first().focus().blur(),a.prepend(o),a.removeClass("loading").addClass("loaded")},showError:function(e){var n,i=this,a=e.get("message");a&&(n=t('<p class="error"><span class="dismiss-error"></span>'+a+"</p>"),i.$el.find(".errors").append(n),n.fadeIn())},hideError:function(e){e.preventDefault();var n=t(e.target);n.fadeOut({complete:function(){n.remove()}})},closeModal:function(){this.dispatcher().trigger("closeModal")}});return s}),define("componentStyle!photo-share-button-2",{render:function(){}}),define("components/photo-share-button-2/main",["require","jquery","lodash","lib/BaseComponent","./js/models/PhotoShareButtonModel","./js/views/PhotoShareButtonView","./js/models/PhotoShareDialogModel","./js/views/PhotoShareDialogView","components/modal-2/views/ModalView","components/modal-2/models/ModalModel","componentStyle!photo-share-button-2"],function(e){var t=e("jquery"),n=e("lodash"),i=e("lib/BaseComponent"),a=e("./js/models/PhotoShareButtonModel"),o=e("./js/views/PhotoShareButtonView"),r=e("./js/models/PhotoShareDialogModel"),s=e("./js/views/PhotoShareDialogView"),l=e("components/modal-2/views/ModalView"),u=e("components/modal-2/models/ModalModel"),c=e("componentStyle!photo-share-button-2"),d=function(e,i,c,d){var p,h=this;h.config=e,h.id=i,h.dispatcher=c,h.$el=t("#"+i),p=function(){var n=new r(h.config.settings),a=new u({config:{open:!0,model:n,View:s}});h.dialogView=new l({additionalClasses:["photo-share-modal"],componentId:i,componentType:e.type,dispatcher:c,model:a,analytics:d}),h.dialogView.toggleOpen(),t("body").append(h.dialogView.render().$el.addClass("photo-share-modal")),d.trackEvent({category:"viz:upload",action:"uploadintent"})},h.buttonModel=new a(h.config.settings),h.buttonView=new o({dispatcher:c,componentType:e.type,componentId:i,model:h.buttonModel,showUploadViewHandler:p,analytics:d}),c.on("#"+i+":closeDialog",function(e){var t=e&&e.payload||{},i=t.delay||0;n.delay(n.bind(h.dialogView.close,h.dialogView),i)}),c.on("closeModal",function(){h.dialogView.toggleOpen()})};return d.prototype.render=function(){var e=this;e.$el.html(e.buttonView.render().el)},i.extend({styles:c,exports:{PhotoShareButton:d,PhotoShareButtonModel:a,PhotoShareButtonView:o,PhotoShareDialogModel:r,PhotoShareDialogView:s},create:function(){var e,t=this.get("config");return(t.settings.twitter||t.settings.facebook)&&(e=new d(t,this.get("id"),this.get("dispatcher"),this.get("analytics"))),this.set("photoShareButton",e),{photoShareButton:e}},render:function(){if(this.hasElement()){var e=this.get("photoShareButton");e&&e.render()}}}).exports()}),define("components/fb-post-button-1/models/FbPostButtonModel",["lodash","massrel-js","backbone-amd"],function(e,t,n){return n.Model.extend({defaults:function(){return{buttonStyle:"color",buttonBorderRadius:3,buttonText:"Post",link:"",feed:"",name:"",picture:"",caption:"",description:"",message:"",url:"https://massrelevance.com/intents/fb",privacy:{value:"EVERYONE"},disabled:!1}}})}),define("tmpl!fb-post-button",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<i class="icon icon-facebook-logo"></i>\n<span class="button-text">'+__e(buttonText)+"</span>\n";return __p},metadata:{},name:"fb-post-button"})}),define("components/fb-post-button-1/views/FbPostButtonView",["lodash","lib/views/BaseButtonView","components/fb-post-button-1/models/FbPostButtonModel","tmpl!fb-post-button","lib/facebookApi"],function(e,t,n,i,a){return t.extend({tagName:"a",className:function(){var e=this.model.get("buttonStyle");return"button mr-action-click facebook fb-post-button"+(e?" button-style-"+e:"")},template:i,attributes:{href:"","data-action":"fb-post"},fbPostAction:"fb-post",handlers:{"fb-post":function(){this.$el.hasClass("disabled")||this.model.get("disabled")||t.prototype.handlers["fb-post"].apply(this,arguments)}},initialize:function(e){var i=this;t.prototype.initialize.apply(this,arguments),void 0===e.model&&(i.model=new n),i.dispatcher=i._closest("dispatcher"),a.init(),a.getClient().on("publish.post",function(e){e.fbPostAction===i.fbPostAction&&i.dispatcher.trigger(i.fbPostAction,e)}),i.updateData(),i.model.on("change",function(){i.updateData()})},updateData:function(){this.$el.data(e.pick(this.model.toJSON(),["link","feed","name","picture","caption","description","message"])),this.$el.data("fbPostAction",this.fbPostAction)},render:function(){return t.prototype.render.apply(this,arguments),this.$el.attr("href",this.model.get("url")),this.$el.css("border-radius",this.model.get("buttonBorderRadius")+"px"),this}})}),define("componentStyle!fb-post-button-1",{render:function(){}}),define("components/fb-post-button-1/main",["jquery","lib/BaseComponent","components/fb-post-button-1/views/FbPostButtonView","components/fb-post-button-1/models/FbPostButtonModel","componentStyle!fb-post-button-1"],function(e,t,n,i,a){var o=function(t,a,o){var r=this;r.config=t,r.id=a,r.dispatcher=o,r.$el=e("#"+a),r.model=new i(r.config.settings),r.view=new n({dispatcher:o,componentType:t.type,componentId:a,model:r.model})};return o.prototype.render=function(){var e=this;e.$el.html(e.view.render().el)},t.extend({styles:a,exports:{FbPostButton:o,FbPostButtonView:n,FbPostButtonModel:i},create:function(){var e=new o(this.get("config"),this.get("id"),this.get("dispatcher"));return this.set("postButton",e),{postButton:e}},render:function(){this.hasElement()&&this.get("postButton").render()}}).exports()}),function(){function e(n,a){if(n=n?n:"",a=a||{},"object"==typeof n&&n.hasOwnProperty("_tc_id"))return n;var r=t(n),u=r.r,p=r.g,h=r.b,f=r.a,m=S(100*f)/100,g=a.format||r.format;return 1>u&&(u=S(u)),1>p&&(p=S(p)),1>h&&(h=S(h)),{ok:r.ok,format:g,_tc_id:x++,alpha:f,getAlpha:function(){return f},setAlpha:function(e){f=c(e),m=S(100*f)/100},toHsv:function(){var e=o(u,p,h);return{h:360*e.h,s:e.s,v:e.v,a:f}},toHsvString:function(){var e=o(u,p,h),t=S(360*e.h),n=S(100*e.s),i=S(100*e.v);return 1==f?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+m+")"},toHsl:function(){var e=i(u,p,h);return{h:360*e.h,s:e.s,l:e.l,a:f}},toHslString:function(){var e=i(u,p,h),t=S(360*e.h),n=S(100*e.s),a=S(100*e.l);return 1==f?"hsl("+t+", "+n+"%, "+a+"%)":"hsla("+t+", "+n+"%, "+a+"%, "+m+")"},toHex:function(e){return s(u,p,h,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return l(u,p,h,f)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:S(u),g:S(p),b:S(h),a:f}},toRgbString:function(){return 1==f?"rgb("+S(u)+", "+S(p)+", "+S(h)+")":"rgba("+S(u)+", "+S(p)+", "+S(h)+", "+m+")"},toPercentageRgb:function(){return{r:S(100*d(u,255))+"%",g:S(100*d(p,255))+"%",b:S(100*d(h,255))+"%",a:f}},toPercentageRgbString:function(){return 1==f?"rgb("+S(100*d(u,255))+"%, "+S(100*d(p,255))+"%, "+S(100*d(h,255))+"%)":"rgba("+S(100*d(u,255))+"%, "+S(100*d(p,255))+"%, "+S(100*d(h,255))+"%, "+m+")"},toName:function(){return 0===f?"transparent":T[s(u,p,h,!0)]||!1},toFilter:function(t){var n="#"+l(u,p,h,f),i=n,o=a&&a.gradientType?"GradientType = 1, ":"";if(t){var r=e(t);i=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+n+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this.format;var n=!1,i=!t&&1>f&&f>0,a=i&&("hex"===e||"hex6"===e||"hex3"===e||"name"===e);return"rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),a?this.toRgbString():n||this.toHexString()}}}function t(e){var t={r:0,g:0,b:0},i=1,o=!1,s=!1;return"string"==typeof e&&(e=y(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=n(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=_(e.s),e.v=_(e.v),t=r(e.h,e.s,e.v),o=!0,s="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=_(e.s),e.l=_(e.l),t=a(e.h,e.s,e.l),o=!0,s="hsl"),e.hasOwnProperty("a")&&(i=e.a)),i=c(i),{ok:o,format:e.format||s,r:C(255,D(t.r,0)),g:C(255,D(t.g,0)),b:C(255,D(t.b,0)),a:i}}function n(e,t,n){return{r:255*d(e,255),g:255*d(t,255),b:255*d(n,255)}}function i(e,t,n){e=d(e,255),t=d(t,255),n=d(n,255);var i,a,o=D(e,t,n),r=C(e,t,n),s=(o+r)/2;if(o==r)i=a=0;else{var l=o-r;switch(a=s>.5?l/(2-o-r):l/(o+r),o){case e:i=(t-n)/l+(n>t?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:a,l:s}}function a(e,t,n){function i(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+6*(t-e)*(2/3-n):e}var a,o,r;if(e=d(e,360),t=d(t,100),n=d(n,100),0===t)a=o=r=n;else{var s=.5>n?n*(1+t):n+t-n*t,l=2*n-s;a=i(l,s,e+1/3),o=i(l,s,e),r=i(l,s,e-1/3)}return{r:255*a,g:255*o,b:255*r}}function o(e,t,n){e=d(e,255),t=d(t,255),n=d(n,255);var i,a,o=D(e,t,n),r=C(e,t,n),s=o,l=o-r;if(a=0===o?0:l/o,o==r)i=0;else{switch(o){case e:i=(t-n)/l+(n>t?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:a,v:s}}function r(e,t,n){e=6*d(e,360),t=d(t,100),n=d(n,100);var i=k.floor(e),a=e-i,o=n*(1-t),r=n*(1-a*t),s=n*(1-(1-a)*t),l=i%6,u=[n,r,o,o,s,n][l],c=[s,n,n,r,o,o][l],p=[o,o,s,n,n,r][l];return{r:255*u,g:255*c,b:255*p}}function s(e,t,n,i){var a=[g(S(e).toString(16)),g(S(t).toString(16)),g(S(n).toString(16))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function l(e,t,n,i){var a=[g(v(i)),g(S(e).toString(16)),g(S(t).toString(16)),g(S(n).toString(16))];return a.join("")}function u(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function c(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function d(e,t){f(e)&&(e="100%");var n=m(e);return e=C(t,D(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),k.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function p(e){return C(1,D(0,e))}function h(e){return parseInt(e,16)}function f(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function m(e){return"string"==typeof e&&-1!=e.indexOf("%")}function g(e){return 1==e.length?"0"+e:""+e}function _(e){return 1>=e&&(e=100*e+"%"),e}function v(e){return Math.round(255*parseFloat(e)).toString(16)}function b(e){return h(e)/255}function y(e){e=e.replace(q,"").replace(w,"").toLowerCase();var t=!1;if(M[e])e=M[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=U.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=U.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=U.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=U.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=U.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=U.hex8.exec(e))?{a:b(n[1]),r:h(n[2]),g:h(n[3]),b:h(n[4]),format:t?"name":"hex8"}:(n=U.hex6.exec(e))?{r:h(n[1]),g:h(n[2]),b:h(n[3]),format:t?"name":"hex"}:(n=U.hex3.exec(e))?{r:h(n[1]+""+n[1]),g:h(n[2]+""+n[2]),b:h(n[3]+""+n[3]),format:t?"name":"hex"}:!1}var q=/^[\s,#]+/,w=/\s+$/,x=0,k=Math,S=k.round,C=k.min,D=k.max,F=k.random;e.fromRatio=function(t,n){if("object"==typeof t){var i={};for(var a in t)t.hasOwnProperty(a)&&(i[a]="a"===a?t[a]:_(t[a]));t=i}return e(t,n)},e.equals=function(t,n){return t&&n?e(t).toRgbString()==e(n).toRgbString():!1},e.random=function(){return e.fromRatio({r:F(),g:F(),b:F()})},e.desaturate=function(t,n){n=0===n?0:n||10;var i=e(t).toHsl();return i.s-=n/100,i.s=p(i.s),e(i)},e.saturate=function(t,n){n=0===n?0:n||10;var i=e(t).toHsl();return i.s+=n/100,i.s=p(i.s),e(i)},e.greyscale=function(t){return e.desaturate(t,100)},e.lighten=function(t,n){n=0===n?0:n||10;var i=e(t).toHsl();return i.l+=n/100,i.l=p(i.l),e(i)},e.darken=function(t,n){n=0===n?0:n||10;var i=e(t).toHsl();return i.l-=n/100,i.l=p(i.l),e(i)},e.complement=function(t){var n=e(t).toHsl();return n.h=(n.h+180)%360,e(n)},e.triad=function(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+120)%360,s:n.s,l:n.l}),e({h:(i+240)%360,s:n.s,l:n.l})]},e.tetrad=function(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+90)%360,s:n.s,l:n.l}),e({h:(i+180)%360,s:n.s,l:n.l}),e({h:(i+270)%360,s:n.s,l:n.l})]},e.splitcomplement=function(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+72)%360,s:n.s,l:n.l}),e({h:(i+216)%360,s:n.s,l:n.l})]},e.analogous=function(t,n,i){n=n||6,i=i||30;var a=e(t).toHsl(),o=360/i,r=[e(t)];for(a.h=(a.h-(o*n>>1)+720)%360;--n;)a.h=(a.h+o)%360,r.push(e(a));return r},e.monochromatic=function(t,n){n=n||6;for(var i=e(t).toHsv(),a=i.h,o=i.s,r=i.v,s=[],l=1/n;n--;)s.push(e({h:a,s:o,v:r})),r=(r+l)%1;return s},e.readability=function(t,n){var i=e(t).toRgb(),a=e(n).toRgb(),o=(299*i.r+587*i.g+114*i.b)/1e3,r=(299*a.r+587*a.g+114*a.b)/1e3,s=Math.max(i.r,a.r)-Math.min(i.r,a.r)+Math.max(i.g,a.g)-Math.min(i.g,a.g)+Math.max(i.b,a.b)-Math.min(i.b,a.b);return{brightness:Math.abs(o-r),color:s}},e.readable=function(t,n){var i=e.readability(t,n);return i.brightness>125&&i.color>500},e.mostReadable=function(t,n){for(var i=null,a=0,o=!1,r=0;r<n.length;r++){var s=e.readability(t,n[r]),l=s.brightness>125&&s.color>500,u=3*(s.brightness/125)+s.color/500;(l&&!o||l&&o&&u>a||!l&&!o&&u>a)&&(o=l,a=u,i=e(n[r]))}return i};var M=e.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=e.hexNames=u(M),U=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",a="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define("tinycolor/tinycolor",[],function(){return e}):window.tinycolor=e}(),define("tinycolor",["tinycolor/tinycolor"],function(e){return e}),define("components/logo-1/models/LogoModel",["require","lodash","tinycolor","backbone-amd"],function(e){var t=e("lodash"),n=e("tinycolor"),i=e("backbone-amd"),a=i.Model.extend({themeColors:{dark:"#808285",light:"white"},defaults:{theme:""},initialize:function(e){this.id=e.id,this.dispatcher=e.dispatcher,this.config=e.config;var i=t.extend({},this.defaults,t.pick(e.config,t.keys(this.defaults)));if(!i.theme){var a="dark",o={};window.MR&&window.MR.templateConfig&&window.MR.templateConfig.styles&&(o=window.MR.templateConfig.styles);var r=o.backgroundColor||o.canvasColor;if(r){var s=n.mostReadable(r,t.values(this.themeColors)).toString();a=t.invert(this.themeColors)[s]}i.theme=a}this.set(i)}});return a}),define("tmpl!logo",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<i class="icon-spredfast-logo"></i><i class="icon-spredfast-logo-shape"></i><i class="logo-copy icon-spredfast-logo-copy">\n';return __p},metadata:{},name:"logo"})}),define("components/logo-1/views/LogoView",["require","lodash","lib/views/BaseView","tmpl!logo"],function(e){var t=e("lodash"),n=e("lib/views/BaseView"),i=e("tmpl!logo"),a=n.extend({template:i,themeClassPrefix:"theme-",attributes:{href:"http://www.spredfast.com",target:"_blank",title:"A Spredfast product\nhttp://www.spredfast.com",alt:"A Spredfast product"},events:{click:"trackAnalyticsClick"},initialize:function(){this.listenTo(this.model,"change",t.bind(this.render,this))},trackAnalyticsClick:function(){return this.analytics().trackEvent({category:"viz:outbound",action:"logo",label:this.attributes.href}),this},render:function(){n.prototype.render.apply(this,arguments);var e=this.$el.attr("class").replace(/^\s+|\s+$/g,"").split(/\s+/),i=t.filter(e,function(e){return new RegExp("^"+this.themeClassPrefix).test(e)},this).join(" ");this.$el.removeClass(i),this.$el.addClass(this.themeClassPrefix+this.model.get("theme")),this.$el.attr(this.attributes)}});return a}),define("componentStyle!logo-1",{render:function(){}}),define("components/logo-1/main",["require","jquery","lib/BaseComponent","./models/LogoModel","./views/LogoView","componentStyle!logo-1"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("./models/LogoModel"),a=e("./views/LogoView"),o=e("componentStyle!logo-1");return n.extend({styles:o,create:function(){var e=this.get("id"),n=this.get("config"),o=this.get("dispatcher"),r=new i({dispatcher:o,config:n.settings}),s=new a({analytics:this.get("analytics"),el:t("#"+e),componentId:e,componentType:n.type,model:r});return this.set("model",r),this.set("view",s),{model:r,view:s}},render:function(){this.hasElement()&&this.get("view").render()}}).exports()}),define("lib/ModalUtils",["require","underscore"],function(e){var t=e("underscore"),n={};return{open:function(e){var i=t.defaults(e||{},{data:{},url:MR.spacePath()+"/modal.html",fallback:t.identity});n=i.data;var a;MR.ENV.hash.embedModals||(a=MR.parent.trigger("modal:open",{url:i.url})),!a&&t.isFunction(i.fallback)&&i.fallback.call(window,i.data)},close:function(){MR.parent.trigger("modal:close")},getData:function(){if(MR.ENV.hash.frame){var e=MR.ENV.hash.frame.split(","),i=t.reduce(e,function(e,t){return e.frames[t]},window.parent);return i.MR.modal.getData()}return n}}}),define("lib/refreshPoller",["require","jquery","has"],function(e){var t=e("jquery");return e("has"),{start:function(e){var n,i;MR.spaceConfig.auto_refresh&&MR.isIndex()&&!function a(){t.get().done(function(t,o,r){var s=r.getResponseHeader("ETag"),l=new Date(r.getResponseHeader("Last-Modified")||"").getTime(),u=n&&s&&n!==s,c=!e&&i&&l&&l>i;return u||c?window.location.reload(!0):(n=s,i=l,s&&setTimeout(a,3e4),void 0)})}()}}}),define("setup",["require","lib/ModalUtils","jquery","underscore","lib/refreshPoller","has","lib/UrlUtils"],function(e){function t(e){return(e+"/").replace(/\/+$/,"/").toLowerCase().replace(/^https?:\/\//,"")}function n(){return[window.location.protocol,"//",window.location.hostname,window.location.port?":"+window.location.port:"","/",window.location.pathname.replace(/^\//,"")].join("")}var i=e("lib/ModalUtils"),a=e("jquery"),o=e("underscore"),r=e("lib/refreshPoller");e("has");var s=e("lib/UrlUtils"),l=navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/);return MR.spacePath=o.memoize(function(){var e=MR.spaceConfig;if(e.path)return e.path;var i=t(n()),a=e.host||(e.client?e.client+".massrel.io":window.location.host),r=e.name||"",s=a+"/"+r;return o.chain(e.cnames||[]).compact().map(t).uniq().sortBy("length").forEach(function(e){0===i.indexOf(e)&&(s=e)}),"//"+s.replace(/\/+$/,"")}),MR.isIndex=function(){return n().replace(/\/(index\.html)?$/,"")===window.location.protocol+MR.spacePath()},MR.isSpaceEmbedded=function(){return!!MR.ENV.hash.parent&&window.parent!==window.self},{config:function(){var e=a.Deferred();return e.done(function(){(MR.isPage||"smart"===MR.ENV.hash.sizing)&&(MR.spaceConfig.smart_size=!0,MR.spaceConfig.auto_size=!1),"auto"===MR.ENV.hash.sizing&&(MR.spaceConfig.smart_size=!1,MR.spaceConfig.auto_size=!0),o.isFunction(window.MR_init)&&MR_init()}),MR.isIndex()?a.get().always(function(t,n,i){try{o.extend(MR.spaceConfig,s.getParams(i.getResponseHeader("x-amz-meta-space-config"),!0))}catch(a){}e.resolve()}):e.resolve(),e.promise()},pmcMethods:function(){return{spaceEvent:function(e){e&&e.eventName&&MR.ENV.scope("template").trigger("space:"+e.eventName,e.data)}}},init:function(e){function t(e){var t=parseInt(s.css("margin-top"),10)||0,n=s.offset().top,i=0;n>t&&(i=n-t);var a=e&&s[0].scrollHeight?s[0].scrollHeight:s.outerHeight(!0);return Math.ceil(a+i)}var n,s=a("body"),u=MR.spaceConfig,c=u.auto_size===!1&&!u.smart_size;MR.resize=function(i){if(!c&&MR.isSpaceEmbedded()){var r=o.clone(i||{});r.scrolling===!1&&s.css("overflow","hidden"),n&&(clearTimeout(n),n=null),o.isUndefined(r.height)&&(r.height=(window.MR_height||a.noop)()||t());var u=!!MR.templateConfig.settings.has_natural_height;u&&(r.naturalHeight=t(!0)),e.run("resize",r),!l&&r.interval&&(n=setTimeout(function(){MR.resize(i)},r.interval))}},c&&(u.height||u.width)&&e.run("resize",o.pick(u,"height","width")),u.smart_size&&MR.resize({interval:300,scrolling:!1}),MR.parent={ready:function(){return!!MR.ENV.hash.parent&&!!MR.ENV.hash["space-id"]&&e.ready()},trigger:function(t,n){return t?(e.run(t,n),MR.parent.ready()):!1},on:function(e,t,n){e&&MR.ENV.instance.on("#template:space:"+e,t,n)},off:function(e,t,n){e&&MR.ENV.instance.off("#template:space:"+e,t,n)
}},r.start(),MR.modal=i}}}),define("app",function(){}),window.MR.require=require,window.MR.define=define,window.MR.requirejs=requirejs}(MR.define,MR.require,MR.requirejs);</script>


<script>MR.require(["loader","lib/analytics/main","staticPath"],function(loader,Analytics,staticPath){MR.templateConfig={data:{},settings:{pgbVariation:!1,header:{header:!1,headerText:"Media Wall","@headerFontSize":28,"@headerFontFamily":"'Helvetica Neue', Helvetica, Arial, sans-serif","@headerFontColor":"#000","@headerBackgroundColor":"#fdfdfd"},noContentText:{"@noContentTextFontSize":14,"@noContentTextFontFamily":"'Helvetica Neue', Helvetica, Arial, sans-serif","@noContentTextFontColor":"#000"},body:{"@backgroundColor":"#FFF","@backgroundImage":"","@backgroundImageStyle":"center","@socialContentBackgroundColor":"transparent"},footer:{showLogo:!1},actionBar:{"@actionBarBackgroundColor":"#FFF",twitterFollow:!1,facebookLike:!1,twitterPhotoUpload:!1,facebookPhotoUpload:!1},modal:{"@detailViewBackgroundColor":"#000000","@overlayColor":"#000000","@socialContentFontSize":16,"@socialContentFontColor":"#ffffff","@socialContentFontFamily":'"Open Sans", Helvetica, Arial, sans-serif',"@linkColor":"#ffffff","@linkUnderline":"none","@linkHoverColor":"#0b6efd","@linkHoverUnderline":"underline","@linkVisitedColor":"#0b6efd","@secondaryLinkColor":"#ffffff","@secondaryLinkUnderline":"none","@secondaryLinkHoverColor":"#0b6efd","@secondaryLinkHoverUnderline":"underline","@secondaryLinkVisitedColor":"#0b6efd"},photoUpload:{"@photoUploadDropZone":"#fafaf2","@photoUploadButtonDefault":"#ff9000","@photoUploadButtonHover":"#ff9000","@photoUploadBackgroundColor":"#f3f3e7","@photoUploadPromptFont":'"Open Sans", Helvetica, Arial, sans-serif',"@photoUploadPromptFontSize":16,"@photoUploadPromptColor":"black","@photoUploadDescriptionFont":'"Open Sans", Helvetica, Arial, sans-serif',"@photoUploadDescriptionFontSize":12,"@photoUploadDescriptionColor":"black"},attribution:{"@attributionFontFamily":'"Open Sans", Helvetica, Arial, sans-serif',"@attributionFontSize":16},sponsorBar:{showSponsorBar:!1},gridWidth:5,gridHeight:2,streamName:"6fbq0e1wrr/mastertheopen-final-media-homepage",media_type:"both",replace_content:!0,no_content_text:"No content available.",cell_delay:"5","@cellGutterSize":2,"@colorCellBackgroundColor":"#fff","@colorCellBackgroundImage":"","@colorCellBackgroundImageStyle":"center","@mediaBorderSize":1,"@mediaBorderColor":"#CCC","@mediaShadowColor":"black","@mediaGridMargin":0,"@spredfastLogoColor":"black","@footerBackgroundColor":"#fdfdfd","@footerBackgroundImage":"","@footerBackgroundSize":"center"},styles:{headerFontSize:28,header_headerFontSize:28,headerFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",header_headerFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",headerFontColor:"#000",header_headerFontColor:"#000",headerBackgroundColor:"#fdfdfd",header_headerBackgroundColor:"#fdfdfd",noContentTextFontSize:14,noContentText_noContentTextFontSize:14,noContentTextFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",noContentText_noContentTextFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",noContentTextFontColor:"#000",noContentText_noContentTextFontColor:"#000",backgroundColor:"#FFF",body_backgroundColor:"#FFF",backgroundImage:"",body_backgroundImage:"",backgroundImageStyle:"center",body_backgroundImageStyle:"center",socialContentBackgroundColor:"transparent",body_socialContentBackgroundColor:"transparent",actionBarBackgroundColor:"#FFF",actionBar_actionBarBackgroundColor:"#FFF",detailViewBackgroundColor:"#000000",modal_detailViewBackgroundColor:"#000000",overlayColor:"#000000",modal_overlayColor:"#000000",socialContentFontSize:16,modal_socialContentFontSize:16,socialContentFontColor:"#ffffff",modal_socialContentFontColor:"#ffffff",socialContentFontFamily:'"Open Sans", Helvetica, Arial, sans-serif',modal_socialContentFontFamily:'"Open Sans", Helvetica, Arial, sans-serif',linkColor:"#ffffff",modal_linkColor:"#ffffff",linkUnderline:"none",modal_linkUnderline:"none",linkHoverColor:"#0b6efd",modal_linkHoverColor:"#0b6efd",linkHoverUnderline:"underline",modal_linkHoverUnderline:"underline",linkVisitedColor:"#0b6efd",modal_linkVisitedColor:"#0b6efd",secondaryLinkColor:"#ffffff",modal_secondaryLinkColor:"#ffffff",secondaryLinkUnderline:"none",modal_secondaryLinkUnderline:"none",secondaryLinkHoverColor:"#0b6efd",modal_secondaryLinkHoverColor:"#0b6efd",secondaryLinkHoverUnderline:"underline",modal_secondaryLinkHoverUnderline:"underline",secondaryLinkVisitedColor:"#0b6efd",modal_secondaryLinkVisitedColor:"#0b6efd",photoUploadDropZone:"#fafaf2",photoUpload_photoUploadDropZone:"#fafaf2",photoUploadButtonDefault:"#ff9000",photoUpload_photoUploadButtonDefault:"#ff9000",photoUploadButtonHover:"#ff9000",photoUpload_photoUploadButtonHover:"#ff9000",photoUploadBackgroundColor:"#f3f3e7",photoUpload_photoUploadBackgroundColor:"#f3f3e7",photoUploadPromptFont:'"Open Sans", Helvetica, Arial, sans-serif',photoUpload_photoUploadPromptFont:'"Open Sans", Helvetica, Arial, sans-serif',photoUploadPromptFontSize:16,photoUpload_photoUploadPromptFontSize:16,photoUploadPromptColor:"black",photoUpload_photoUploadPromptColor:"black",photoUploadDescriptionFont:'"Open Sans", Helvetica, Arial, sans-serif',photoUpload_photoUploadDescriptionFont:'"Open Sans", Helvetica, Arial, sans-serif',photoUploadDescriptionFontSize:12,photoUpload_photoUploadDescriptionFontSize:12,photoUploadDescriptionColor:"black",photoUpload_photoUploadDescriptionColor:"black",attributionFontFamily:'"Open Sans", Helvetica, Arial, sans-serif',attribution_attributionFontFamily:'"Open Sans", Helvetica, Arial, sans-serif',attributionFontSize:16,attribution_attributionFontSize:16,cellGutterSize:2,colorCellBackgroundColor:"#fff",colorCellBackgroundImage:"",colorCellBackgroundImageStyle:"center",mediaBorderSize:1,mediaBorderColor:"#CCC",mediaShadowColor:"black",mediaGridMargin:0,spredfastLogoColor:"black",footerBackgroundColor:"#fdfdfd",footerBackgroundImage:"",footerBackgroundSize:"center"},components:{"sponsor-bar":{settings:{"@visible":!0,url:"http://www.spredfast.com",image_url:"","@backgroundColor":"#efefef","@position":"center",width:"auto"},styles:{visible:!0,backgroundColor:"#efefef",position:"center"},type:"sponsor-bar-1"},modal:{settings:{"@maxWidth":"550px"},styles:{maxWidth:"550px"},type:"modal-2"},mediaFirstStatus:{settings:{},styles:{},type:"media-first-status-1"},modalStatus:{settings:{},styles:{},type:"media-first-status-1"},"follow-button":{settings:{buttonStyle:"native",buttonBorderRadius:3,buttonText:"+",original_referer:"",screen_name:"spredfast"},styles:{},type:"follow-button-1"},"fb-like-button":{settings:{href:"https://facebook.com/Spredfast",send:!1,layout:"button",width:50,height:20,share:!1,show_faces:!1,font:"",colorscheme:"light",action:"like",ref:"spredfast"},styles:{},type:"fb-like-button-1"},"photo-share-button":{settings:{buttonStyle:"silver",buttonBorderRadius:3,buttonText:"Share Photo",facebook:!1,facebookSettings:{destination:""},twitter:!1,twitterSettings:{hashtags:"",text:""}},styles:{},type:"photo-share-button-2"},postButton:{settings:{buttonStyle:"color",buttonBorderRadius:0,buttonText:"Post",link:"",feed:"",name:"",picture:"",caption:"",description:""},styles:{},type:"fb-post-button-1"},"mr-logo":{settings:{theme:"","@visible":!1},styles:{visible:!1},type:"logo-1"}}},MR.spaceConfig={template:{id:19126,root_id:3377,component_ids:[91,92,93,95,160,164,167,174]},visualization:35350,page:null,name:"chase-us-open-fixed-grid-media-wall-space",client:"chase-trial",account_id:"",id:16156,auto_size:!1,smart_size:!0,height:400,width:600,analytics_ga_id:"",facebook_custom_audience_id:"",short_url:"http://mssv.ly/1QEUyzm",cnames:[],host:null,auto_refresh:!1},MR.analytics=new Analytics({scope:"template"}),loader.registerTemplate("media-grid__media",function(obj){obj||(obj={});var __p="",__e=_.escape;with(Array.prototype.join,obj)photo_urls&&(__p+='\n<div class="background-image" style="background-image: url('+__e(photo_urls.medium.url)+');">\n  <div class="icon-video"></div>\n  <img src="'+__e(photo_urls.medium.url)+'" />\n  <div class="attribution">\n    <div class="handle">\n      ',author&&(provider.twitter||provider.vine||provider.instagram||"Tumblr"===providerName)?__p+="\n        "+__e("@"+author)+"\n      ":author&&(__p+="\n        "+__e(author)+"\n      "),__p+='\n\n    </div>\n    <div class="logo">\n    ',provider.youtube?__p+='\n      <i class="icon-youtube-logo"></i>\n    ':provider.facebook?__p+='\n      <i class="icon-facebook-logo"></i>\n    ':provider.twitter?__p+='\n      <i class="icon-twitter-logo"></i>\n    ':provider.vine?__p+='\n      <i class="icon-vine-logo"></i>\n    ':provider.instagram?__p+='\n      <i class="icon-instagram-logo"></i>\n    ':"Tumblr"===providerName?__p+='\n      <i class="icon-twitter-logo"></i>\n    ':provider.google&&(__p+='\n      <i class="icon-google-plus-logo"></i>\n    '),__p+="\n    </div>\n  </div>\n</div>\n"),__p+="\n";return __p}),loader.registerTemplate("mediaFirstStatus__media",function(obj){obj||(obj={});var __p="",__e=_.escape;with(Array.prototype.join,obj)photo_urls&&(__p+='\n<div class="background-image" style="background-image: url('+__e(photo_urls.medium.url)+');">\n  <div class="icon-video"></div>\n  <img src="'+__e(photo_urls.medium.url)+'" />\n  <div class="attribution">\n    <div class="handle">\n      ',author&&(provider.twitter||provider.vine||provider.instagram||"Tumblr"===providerName)?__p+="\n        "+__e("@"+author)+"\n      ":author&&(__p+="\n        "+__e(author)+"\n      "),__p+='\n\n    </div>\n    <div class="logo">\n    ',provider.youtube?__p+='\n      <i class="icon-youtube-logo"></i>\n    ':provider.facebook?__p+='\n      <i class="icon-facebook-logo"></i>\n    ':provider.twitter?__p+='\n      <i class="icon-twitter-logo"></i>\n    ':provider.vine?__p+='\n      <i class="icon-vine-logo"></i>\n    ':provider.instagram?__p+='\n      <i class="icon-instagram-logo"></i>\n    ':"Tumblr"===providerName?__p+='\n      <i class="icon-twitter-logo"></i>\n    ':provider.google&&(__p+='\n      <i class="icon-google-plus-logo"></i>\n    '),__p+="\n    </div>\n  </div>\n</div>\n"),__p+="\n";return __p}),loader.registerTemplate("mediaFirstStatus__status-facebook-media-first",function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="grid-cell-wrapper '+__e("grid-cell-"+(network||"unknown"))+' mr-action-click" data-action="showDetails">\n  <div class="grid-cell-contents">\n    '+(null==(__t=subview("media",media.find(mediaFilter)))?"":__t)+"\n  </div>\n</div>\n";return __p}),loader.registerTemplate("mediaFirstStatus__status-google-media-first",function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="grid-cell-wrapper '+__e("grid-cell-"+(network||"unknown"))+' mr-action-click" data-action="showDetails">\n  <div class="grid-cell-contents">\n    '+(null==(__t=subview("media",media.find(mediaFilter)))?"":__t)+"\n  </div>\n</div>\n";return __p}),loader.registerTemplate("mediaFirstStatus__status-instagram-media-first",function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="grid-cell-wrapper '+__e("grid-cell-"+(network||"unknown"))+' mr-action-click" data-action="showDetails">\n  <div class="grid-cell-contents">\n    '+(null==(__t=subview("media",media.find(mediaFilter)))?"":__t)+"\n  </div>\n</div>\n";return __p}),loader.registerTemplate("mediaFirstStatus__status-twitter-media-first",function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="grid-cell-wrapper '+__e("grid-cell-"+(network||"unknown"))+' mr-action-click" data-action="showDetails">\n  <div class="grid-cell-contents">\n    '+(null==(__t=subview("media",media.find(mediaFilter)))?"":__t)+"\n  </div>\n</div>\n";return __p}),loader.registerTemplate("mediaFirstStatus__status-youtube-media-first",function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="grid-cell-wrapper '+__e("grid-cell-"+(network||"unknown"))+' mr-action-click" data-action="showDetails">\n  <div class="grid-cell-contents">\n    '+(null==(__t=subview("media",media.find(mediaFilter)))?"":__t)+"\n  </div>\n</div>\n";return __p}),loader.registerTemplate("modalStatus__media",function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)type.photo&&(__p+='\n  <a href="'+__e(link)+'" target="_blank">\n    <img src="'+__e(photo_urls.large.url)+'" />\n    <div class="attribution">\n      <div class="handle">\n        ',author&&(provider.twitter||provider.vine||provider.instagram||"Tumblr"===providerName)?__p+="\n          "+__e("@"+author)+"\n        ":author&&(__p+="\n          "+__e(author)+"\n        "),__p+='\n      </div>\n      <div class="logo">\n      ',provider.youtube?__p+='\n        <i class="icon-youtube-logo"></i>\n      ':provider.facebook?__p+='\n        <i class="icon-facebook-logo"></i>\n      ':provider.twitter?__p+='\n        <i class="icon-twitter-logo"></i>\n      ':provider.vine?__p+='\n        <i class="icon-vine-logo"></i>\n      ':provider.instagram?__p+='\n        <i class="icon-instagram-logo"></i>\n      ':"Tumblr"===providerName?__p+='\n        <i class="icon-twitter-logo"></i>\n      ':provider.google&&(__p+='\n        <i class="icon-google-plus-logo"></i>\n      '),__p+="\n      </div>\n    </div>\n  </a>\n"),__p+="\n\n",type.video&&(__p+='\n  <div class="video provider-'+(null==(__t=(providerName||"").toLowerCase())?"":__t)+'">\n    ',embed_url?__p+='\n      <iframe src="'+__e(embed_url)+'" seamless></iframe>\n    ':embed_html&&(__p+="\n      "+(null==(__t=embed_html)?"":__t)+"\n    "),__p+="\n  </div>\n"),__p+="\n";return __p}),loader.init(),MR.templateConfig.components&&loader.render(MR.templateConfig.components)});</script>



    <script src="//chase-trial.massrel.io/template-static-a139be124a05ee5aa51b63fd038ed0c6467d27dd/js/index.js"></script>
    <script>!function(o){window.MR_ready=function(e){var t=this.async();o.require(["js/index"],function(o){o.ready(e),t()})},window.MR_render=function(e){o.require(["js/index"],function(o){o.render(e)})}}(window.MRT||window);</script>
  </body>
</html>
