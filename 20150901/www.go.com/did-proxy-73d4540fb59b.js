/*
 * Copyright 2015 Disney
 * All Rights Reserved
 *
 * Underscore.js 1.3.3
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * MIT License
 *
 * Backbone.js 1.0.0
 * Copyright 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * MIT License
 */
(function(){function e(t,n,i){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;if(t._chain&&(t=t._wrapped),n._chain&&(n=n._wrapped),t.isEqual&&_.isFunction(t.isEqual))return t.isEqual(n);if(n.isEqual&&_.isFunction(n.isEqual))return n.isEqual(t);var r=c.call(t);if(r!=c.call(n))return!1;switch(r){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var a=i.length;a--;)if(i[a]==t)return!0;i.push(t);var s=0,o=!0;if("[object Array]"==r){if(s=t.length,o=s==n.length)for(;s--&&(o=s in t==s in n&&e(t[s],n[s],i)););}else{if("constructor"in t!="constructor"in n||t.constructor!=n.constructor)return!1;for(var l in t)if(_.has(t,l)&&(s++,!(o=_.has(n,l)&&e(t[l],n[l],i))))break;if(o){for(l in n)if(_.has(n,l)&&!s--)break;o=!s}}return i.pop(),o}var t=this,n=t._,i={},r=Array.prototype,a=Object.prototype,s=Function.prototype,o=r.slice,l=r.unshift,c=a.toString,u=a.hasOwnProperty,d=r.forEach,h=r.map,f=r.reduce,p=r.reduceRight,g=r.filter,m=r.every,v=r.some,b=r.indexOf,y=r.lastIndexOf,w=Array.isArray,k=Object.keys,x=s.bind,_=function(e){return new O(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):t._=_,_.VERSION="1.3.3";var C=_.each=_.forEach=function(e,t,n){if(null!=e)if(d&&e.forEach===d)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,a=e.length;a>r;r++)if(r in e&&t.call(n,e[r],r,e)===i)return}else for(var s in e)if(_.has(e,s)&&t.call(n,e[s],s,e)===i)return};_.map=_.collect=function(e,t,n){var i=[];return null==e?i:h&&e.map===h?e.map(t,n):(C(e,function(e,r,a){i[i.length]=t.call(n,e,r,a)}),e.length===+e.length&&(i.length=e.length),i)},_.reduce=_.foldl=_.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return i&&(t=_.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(C(e,function(e,a,s){r?n=t.call(i,n,e,a,s):(n=e,r=!0)}),!r)throw new TypeError("Reduce of empty array with no initial value");return n},_.reduceRight=_.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduceRight===p)return i&&(t=_.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var a=_.toArray(e).reverse();return i&&!r&&(t=_.bind(t,i)),r?_.reduce(a,t,n,i):_.reduce(a,t)},_.find=_.detect=function(e,t,n){var i;return A(e,function(e,r,a){return t.call(n,e,r,a)?(i=e,!0):void 0}),i},_.filter=_.select=function(e,t,n){var i=[];return null==e?i:g&&e.filter===g?e.filter(t,n):(C(e,function(e,r,a){t.call(n,e,r,a)&&(i[i.length]=e)}),i)},_.reject=function(e,t,n){var i=[];return null==e?i:(C(e,function(e,r,a){t.call(n,e,r,a)||(i[i.length]=e)}),i)},_.every=_.all=function(e,t,n){var r=!0;return null==e?r:m&&e.every===m?e.every(t,n):(C(e,function(e,a,s){return(r=r&&t.call(n,e,a,s))?void 0:i}),!!r)};var A=_.some=_.any=function(e,t,n){t||(t=_.identity);var r=!1;return null==e?r:v&&e.some===v?e.some(t,n):(C(e,function(e,a,s){return r||(r=t.call(n,e,a,s))?i:void 0}),!!r)};_.include=_.contains=function(e,t){var n=!1;return null==e?n:b&&e.indexOf===b?-1!=e.indexOf(t):n=A(e,function(e){return e===t})},_.invoke=function(e,t){var n=o.call(arguments,2);return _.map(e,function(e){return(_.isFunction(t)?t||e:e[t]).apply(e,n)})},_.pluck=function(e,t){return _.map(e,function(e){return e[t]})},_.max=function(e,t,n){if(!t&&_.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&_.isEmpty(e))return-1/0;var i={computed:-1/0};return C(e,function(e,r,a){var s=t?t.call(n,e,r,a):e;s>=i.computed&&(i={value:e,computed:s})}),i.value},_.min=function(e,t,n){if(!t&&_.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&_.isEmpty(e))return 1/0;var i={computed:1/0};return C(e,function(e,r,a){var s=t?t.call(n,e,r,a):e;s<i.computed&&(i={value:e,computed:s})}),i.value},_.shuffle=function(e){var t,n=[];return C(e,function(e,i){t=Math.floor(Math.random()*(i+1)),n[i]=n[t],n[t]=e}),n},_.sortBy=function(e,t,n){var i=_.isFunction(t)?t:function(e){return e[t]};return _.pluck(_.map(e,function(e,t,r){return{value:e,criteria:i.call(n,e,t,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;return void 0===n?1:void 0===i?-1:i>n?-1:n>i?1:0}),"value")},_.groupBy=function(e,t){var n={},i=_.isFunction(t)?t:function(e){return e[t]};return C(e,function(e,t){var r=i(e,t);(n[r]||(n[r]=[])).push(e)}),n},_.sortedIndex=function(e,t,n){n||(n=_.identity);for(var i=0,r=e.length;r>i;){var a=i+r>>1;n(e[a])<n(t)?i=a+1:r=a}return i},_.toArray=function(e){return e?_.isArray(e)?o.call(e):_.isArguments(e)?o.call(e):e.toArray&&_.isFunction(e.toArray)?e.toArray():_.values(e):[]},_.size=function(e){return _.isArray(e)?e.length:_.keys(e).length},_.first=_.head=_.take=function(e,t,n){return null==t||n?e[0]:o.call(e,0,t)},_.initial=function(e,t,n){return o.call(e,0,e.length-(null==t||n?1:t))},_.last=function(e,t,n){return null==t||n?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},_.rest=_.tail=function(e,t,n){return o.call(e,null==t||n?1:t)},_.compact=function(e){return _.filter(e,function(e){return!!e})},_.flatten=function(e,t){return _.reduce(e,function(e,n){return _.isArray(n)?e.concat(t?n:_.flatten(n)):(e[e.length]=n,e)},[])},_.without=function(e){return _.difference(e,o.call(arguments,1))},_.uniq=_.unique=function(e,t,n){var i=n?_.map(e,n):e,r=[];return e.length<3&&(t=!0),_.reduce(i,function(n,i,a){return(t?_.last(n)===i&&n.length:_.include(n,i))||(n.push(i),r.push(e[a])),n},[]),r},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=_.intersect=function(e){var t=o.call(arguments,1);return _.filter(_.uniq(e),function(e){return _.every(t,function(t){return _.indexOf(t,e)>=0})})},_.difference=function(e){var t=_.flatten(o.call(arguments,1),!0);return _.filter(e,function(e){return!_.include(t,e)})},_.zip=function(){for(var e=o.call(arguments),t=_.max(_.pluck(e,"length")),n=new Array(t),i=0;t>i;i++)n[i]=_.pluck(e,""+i);return n},_.indexOf=function(e,t,n){if(null==e)return-1;var i,r;if(n)return i=_.sortedIndex(e,t),e[i]===t?i:-1;if(b&&e.indexOf===b)return e.indexOf(t);for(i=0,r=e.length;r>i;i++)if(i in e&&e[i]===t)return i;return-1},_.lastIndexOf=function(e,t){if(null==e)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);for(var n=e.length;n--;)if(n in e&&e[n]===t)return n;return-1},_.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,a=new Array(i);i>r;)a[r++]=e,e+=n;return a};var T=function(){};_.bind=function(e,t){var n,i;if(e.bind===x&&x)return x.apply(e,o.call(arguments,1));if(!_.isFunction(e))throw new TypeError;return i=o.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(o.call(arguments)));T.prototype=e.prototype;var r=new T,a=e.apply(r,i.concat(o.call(arguments)));return Object(a)===a?a:r}},_.bindAll=function(e){var t=o.call(arguments,1);return 0==t.length&&(t=_.functions(e)),C(t,function(t){e[t]=_.bind(e[t],e)}),e},_.memoize=function(e,t){var n={};return t||(t=_.identity),function(){var i=t.apply(this,arguments);return _.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},_.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},_.defer=function(e){return _.delay.apply(_,[e,1].concat(o.call(arguments,1)))},_.throttle=function(e,t){var n,i,r,a,s,o,l=_.debounce(function(){s=a=!1},t);return function(){n=this,i=arguments;var c=function(){r=null,s&&e.apply(n,i),l()};return r||(r=setTimeout(c,t)),a?s=!0:o=e.apply(n,i),l(),a=!0,o}},_.debounce=function(e,t,n){var i;return function(){var r=this,a=arguments,s=function(){i=null,n||e.apply(r,a)};n&&!i&&e.apply(r,a),clearTimeout(i),i=setTimeout(s,t)}},_.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments))}},_.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},_.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},_.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},_.keys=k||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)_.has(e,n)&&(t[t.length]=n);return t},_.values=function(e){return _.map(e,_.identity)},_.functions=_.methods=function(e){var t=[];for(var n in e)_.isFunction(e[n])&&t.push(n);return t.sort()},_.extend=function(e){return C(o.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},_.pick=function(e){var t={};return C(_.flatten(o.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},_.defaults=function(e){return C(o.call(arguments,1),function(t){for(var n in t)null==e[n]&&(e[n]=t[n])}),e},_.clone=function(e){return _.isObject(e)?_.isArray(e)?e.slice():_.extend({},e):e},_.tap=function(e,t){return t(e),e},_.isEqual=function(t,n){return e(t,n,[])},_.isEmpty=function(e){if(null==e)return!0;if(_.isArray(e)||_.isString(e))return 0===e.length;for(var t in e)if(_.has(e,t))return!1;return!0},_.isElement=function(e){return!(!e||1!=e.nodeType)},_.isArray=w||function(e){return"[object Array]"==c.call(e)},_.isObject=function(e){return e===Object(e)},_.isArguments=function(e){return"[object Arguments]"==c.call(e)},_.isArguments(arguments)||(_.isArguments=function(e){return!(!e||!_.has(e,"callee"))}),_.isFunction=function(e){return"[object Function]"==c.call(e)},_.isString=function(e){return"[object String]"==c.call(e)},_.isNumber=function(e){return"[object Number]"==c.call(e)},_.isFinite=function(e){return _.isNumber(e)&&isFinite(e)},_.isNaN=function(e){return e!==e},_.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},_.isDate=function(e){return"[object Date]"==c.call(e)},_.isRegExp=function(e){return"[object RegExp]"==c.call(e)},_.isNull=function(e){return null===e},_.isUndefined=function(e){return void 0===e},_.has=function(e,t){return u.call(e,t)},_.noConflict=function(){return t._=n,this},_.identity=function(e){return e},_.times=function(e,t,n){for(var i=0;e>i;i++)t.call(n,i)},_.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},_.result=function(e,t){if(null==e)return null;var n=e[t];return _.isFunction(n)?n.call(e):n},_.mixin=function(e){C(_.functions(e),function(t){R(t,_[t]=e[t])})};var S=0;_.uniqueId=function(e){var t=S++;return e?e+t:t},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var E=/.^/,P={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var L in P)P[P[L]]=L;var M=/\\|'|\r|\n|\t|\u2028|\u2029/g,D=/\\(\\|'|r|n|t|u2028|u2029)/g,I=function(e){return e.replace(D,function(e,t){return P[t]})};_.template=function(e,t,n){n=_.defaults(n||{},_.templateSettings);var i="__p+='"+e.replace(M,function(e){return"\\"+P[e]}).replace(n.escape||E,function(e,t){return"'+\n_.escape("+I(t)+")+\n'"}).replace(n.interpolate||E,function(e,t){return"'+\n("+I(t)+")+\n'"}).replace(n.evaluate||E,function(e,t){return"';\n"+I(t)+"\n;__p+='"})+"';\n";n.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+i+"return __p;\n";var r=new Function(n.variable||"obj","_",i);if(t)return r(t,_);var a=function(e){return r.call(this,e,_)};return a.source="function("+(n.variable||"obj")+"){\n"+i+"}",a},_.chain=function(e){return _(e).chain()};var O=function(e){this._wrapped=e};_.prototype=O.prototype;var N=function(e,t){return t?_(e).chain():e},R=function(e,t){O.prototype[e]=function(){var e=o.call(arguments);return l.call(e,this._wrapped),N(t.apply(_,e),this._chain)}};_.mixin(_),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];O.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var i=n.length;return"shift"!=e&&"splice"!=e||0!==i||delete n[0],N(n,this._chain)}}),C(["concat","join","slice"],function(e){var t=r[e];O.prototype[e]=function(){return N(t.apply(this._wrapped,arguments),this._chain)}}),O.prototype.chain=function(){return this._chain=!0,this},O.prototype.value=function(){return this._wrapped}}).call(this),function(){var e,t=this,n=t.Backbone,i=[],r=i.push,a=i.slice,s=i.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.0.0";var o=t._;o||"undefined"==typeof require||(o=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=e.Events={on:function(e,t,n){if(!u(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!u(this,"once",e,[t,n])||!t)return this;var i=this,r=o.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var i,r,a,s,l,c,d,h;if(!this._events||!u(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:o.keys(this._events),l=0,c=s.length;c>l;l++)if(e=s[l],a=this._events[e]){if(this._events[e]=i=[],t||n)for(d=0,h=a.length;h>d;d++)r=a[d],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var a in i)i[a].off(t,n,this),r&&delete this._listeners[a];return this}},c=/\s+/,u=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(c.test(n)){for(var a=n.split(c),s=0,o=a.length;o>s;s++)e[t].apply(e,[a[s]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,r=e.length,a=t[0],s=t[1],o=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a,s,o);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};o.each(h,function(e,t){l[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),a=t._listenerId||(t._listenerId=o.uniqueId("l"));return r[a]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),l.bind=l.on,l.unbind=l.off,o.extend(e,l);var f=e.Model=function(e,t){var n,i=e||{};t||(t={}),this.cid=o.uniqueId("c"),this.attributes={},o.extend(this,o.pick(t,p)),t.parse&&(i=this.parse(i,t)||{}),(n=o.result(this,"defaults"))&&(i=o.defaults({},i,n)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];o.extend(f.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return o.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return o.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,r,a,s,l,c,u,d;if(null==e)return this;if("object"==typeof e?(r=e,n=t):(r={})[e]=t,n||(n={}),!this._validate(r,n))return!1;a=n.unset,l=n.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=o.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(i in r)t=r[i],o.isEqual(d[i],t)||s.push(i),o.isEqual(u[i],t)?delete this.changed[i]:this.changed[i]=t,a?delete d[i]:d[i]=t;if(!l){s.length&&(this._pending=!0);for(var h=0,f=s.length;f>h;h++)this.trigger("change:"+s[h],this,d[s[h]],n)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,o.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,o.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!o.isEmpty(this.changed):o.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?o.clone(this.changed):!1;var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in e)o.isEqual(i[r],t=e[r])||((n||(n={}))[r]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:function(e){e=e?o.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),void t.trigger("sync",t,i,e)):!1},B(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,r,a,s=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,!(!i||n&&n.wait||this.set(i,n)))return!1;if(n=o.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=o.extend({},s,i)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=s;var t=l.parse(e,n);return n.wait&&(t=o.extend(i||{},t)),o.isObject(t)&&!l.set(t,n)?!1:(c&&c(l,e,n),void l.trigger("sync",l,e,n))},B(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=i),a=this.sync(r,this,n),i&&n.wait&&(this.attributes=s),a},destroy:function(e){e=e?o.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(r){(e.wait||t.isNew())&&i(),n&&n(t,r,e),t.isNew()||t.trigger("sync",t,r,e)},this.isNew())return e.success(),!1;B(this,e);var r=this.sync("delete",this,e);return e.wait||i(),r},url:function(){var e=o.result(this,"urlRoot")||o.result(this.collection,"url")||R();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},o.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=o.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,o.extend(t||{},{validationError:n})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];o.each(g,function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),o[e].apply(o,t)}});var m=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,o.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},b={add:!0,merge:!1,remove:!1};o.extend(m.prototype,l,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,o.defaults(t||{},b))},remove:function(e,t){e=o.isArray(e)?e.slice():[e],t||(t={});var n,i,r,a;for(n=0,i=e.length;i>n;n++)a=this.get(e[n]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a));return this},set:function(e,t){t=o.defaults(t||{},v),t.parse&&(e=this.parse(e,t)),o.isArray(e)||(e=e?[e]:[]);var n,i,a,l,c,u=t.at,d=this.comparator&&null==u&&t.sort!==!1,h=o.isString(this.comparator)?this.comparator:null,f=[],p=[],g={};for(n=0,i=e.length;i>n;n++)(a=this._prepareModel(e[n],t))&&((l=this.get(a))?(t.remove&&(g[l.cid]=!0),t.merge&&(l.set(a.attributes,t),d&&!c&&l.hasChanged(h)&&(c=!0))):t.add&&(f.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)));if(t.remove){for(n=0,i=this.length;i>n;++n)g[(a=this.models[n]).cid]||p.push(a);p.length&&this.remove(p,t)}if(f.length&&(d&&(c=!0),this.length+=f.length,null!=u?s.apply(this.models,[u,0].concat(f)):r.apply(this.models,f)),c&&this.sort({silent:!0}),t.silent)return this;for(n=0,i=f.length;i>n;n++)(a=f[n]).trigger("add",a,this,t);return c&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,o.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,o.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,o.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return o.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var i=o.isFunction(t)?t:function(e){return e.get(t)};return o.sortedIndex(this.models,e,i,n)},pluck:function(e){return o.invoke(this.models,"get",e)},fetch:function(e){e=e?o.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var r=e.reset?"reset":"set";n[r](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},B(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?o.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(r){t.wait&&n.add(e,t),i&&i(e,r,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];o.each(y,function(e){m.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),o[e].apply(o,t)}});var w=["groupBy","countBy","sortBy"];o.each(w,function(e){m.prototype[e]=function(t,n){var i=o.isFunction(t)?t:function(e){return e.get(t)};return o[e](this.models,i,n)}});var k=e.View=function(e){this.cid=o.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];o.extend(k.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=o.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(o.isFunction(n)||(n=this[e[t]]),n){var i=t.match(x),r=i[1],a=i[2];n=o.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=o.extend({},o.result(this,"options"),e)),o.extend(this,o.pick(e,_)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(o.result(this,"el"),!1);else{var t=o.extend({},o.result(this,"attributes"));this.id&&(t.id=o.result(this,"id")),this.className&&(t["class"]=o.result(this,"className"));var n=e.$("<"+o.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,i){var r=C[t];o.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(i.url||(a.url=o.result(n,"url")||R()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",i.emulateJSON&&(a.data._method=r);var s=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===a.type||i.emulateJSON||(a.processData=!1),"PATCH"!==a.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=e.ajax(o.extend(a,i));return n.trigger("request",n,l,i),l};var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var A=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,E=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(A.prototype,l,{initialize:function(){},route:function(t,n,i){o.isRegExp(t)||(t=this._routeToRegExp(t)),o.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return e.history.route(t,function(a){var s=r._extractParameters(t,a);i&&i.apply(r,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),e.history.trigger("route",r,n,s)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=o.result(this,"routes");for(var e,t=o.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(P,"\\$&").replace(T,"(?:$1)?").replace(S,function(e,t){return t?e:"([^/]+)"}).replace(E,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return o.map(n,function(e){return e?decodeURIComponent(e):null})}});var L=e.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,I=/msie [\w.]+/,O=/\/$/;L.started=!1,o.extend(L.prototype,l,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(O,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(t){if(L.started)throw new Error("Backbone.history has already been started");L.started=!0,this.options=o.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=I.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(D,"/"),r&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location,s=a.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&a.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),L.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=o.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!L.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),e.history=new L;var N=function(e,t){var n,i=this;n=e&&o.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},o.extend(n,i,t);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,e&&o.extend(n.prototype,e),n.__super__=i.prototype,n};f.extend=m.extend=A.extend=k.extend=L.extend=N;var R=function(){throw new Error('A "url" property or function must be specified')},B=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}}}.call(this),this.Disney=this.Disney||{},this.Disney.Style=this.Disney.Style||{},this.Disney.Style.breakpoints={midLow:480,midHigh:680,max:960,contentMax:1024,chromeMax:1025},this.Disney.Style.custom_breakpoints={juniorNavMin:420},this.Disney.Style.ratios={"4x3":.75,"16x9":9/16,poster:1.5,square:1,baseball_card:1.3,widescreen:5/12,dvd_case:31/22,letter:8.11/5},function(e){"use strict";var t=e.Disney,n=e.Backbone,i=e._,r="change:watched",a=function(e,t){t?this.retain():this.release()},s=function(e){e!==r&&this.trigger.apply(this,arguments)},o=function(e){this.current=e||{}},l=function(){this.current=void 0},c={},u=["login","logout","refresh","updateProfile"],d=t.GuestContext=function(e){this._h=e||{},this.on("login",o),this.on("update",o),this.on("logout",l)};d.actions=u,i.extend(d.prototype,n.Events,{_r:0,retain:function(){0===this._r++&&this.trigger(r,this,!0)},release:function(){this._r>0&&0===--this._r&&this.trigger(r,this,!1)},watched:function(){return this._r>0},spawn:function(){var e=new d(c);return e._p=this,e.current=this.current,e.on(r,a,this),this.on("all",s,e),e},disown:function(e){e.off(r,a,this),this.off("all",s,e),e._r>0&&this.release()}});var h=function(){throw"Not implemented"};i.each(u,function(e){d.prototype[e]=function(){return(this._h[e]||h).apply(this,arguments)},c[e]=function(){return this._p[e].apply(this._p,arguments)}})}(this),function(e){"use strict";var t,n=e.Disney,i=e.jQuery,r={updateProfile:function(e,t,n){function i(t,r){"update"===t?e.resolve(r):"close"===t&&(e.reject(),n.off("all",i,n))}n.on("all",i,n),n.trigger("open"),t.updateProfile()},login:function(e,t,n){function i(){function i(t,n){"login"===t?e.resolve(n):"close"===t&&e.reject()}n.on("all",i,n),e.always(function(){n.off("all",i,n)}),n.trigger("open"),t.login()}var r=n.current;
return r?n.refresh().then(function(t){e.resolve(t)},i):void i()},logout:function(e,t,n){function i(){e.resolve(),n.off("logout",i)}n.current?(t.logout(),n.on("logout",i)):i()},refresh:function(e,t,n){function i(t){e.resolve(t)}n.on("login",i),e.always(function(){n.off("login",i)}),t.silentLogin({success:t.onLogin,error:function(){e.reject()}})}};i.each(r,function(e,n){var a="_did_"+e;r[e]=function(){var e=this,r=e[a];return r||(r=e[a]=t.pipe(function(t){return i.Deferred(function(i){n(i,t,e)})}).promise(),r.always(function(){delete e[a]})),r}}),n.initDid=function(a){var s,o=/^([^\/:]+:\/\/[^\/]+)\//.exec(e.location.href)||["",""];return t?null:(t=i.Deferred(),a=i.extend({env:"PROD",responderPage:o[1]+"/_did/"},a,{silentAutoLogin:!1}),i.each(["create","login","update","logout","close"],function(e,t){a["on"+t.substr(0,1).toUpperCase()+t.substr(1)]=function(e){var n;s.trigger(t,e&&{profile:e.profile,tokens:(n=e.token)&&{access:n.access_token,refresh:n.refresh_token}})}}),a.appId&&i(function(){var n,i=e.DisneyID;i?(n=e.did=new i,n.init(a),t.resolve(n)):t.reject()}),s=new n.GuestContext(r))}}(this),function(e,t){"use strict";function n(){}var i,r,a=e.Disney,s=e._,o=e.JSON,l=s.rest,c={query:n,provide:n,pub:n,sub:n};o&&e.postMessage&&(e.addEventListener?(i=function(t){e.addEventListener("message",t,!1)},r=function(t){e.removeEventListener("message",t,!1)}):e.attachEvent&&(i=function(t){e.attachEvent("onmessage",t)},r=function(t){e.detachEvent("onmessage",t)})),a.xdc=function(e,n,a,u){function d(t){var i=g+o.stringify([t].concat(l(arguments)));e.postMessage(i,n)}function h(e){var i,r,a=p.length;e.origin===n&&"string"==typeof e.data&&e.data.substr(0,a)===p&&(i=o.parse(e.data.substr(a)),"string"==typeof i[0]&&(r=s.has(f,i[0])&&f[i[0]])&&r.apply(t,l(i)))}var f,p="xdc "+a+" ",g="xdc "+(u||a)+" ",m={},v={},b={};return i?(i(h),f={call:function(e,n,i){function r(){if(o++)throw"reply already sent";d("reply",n,s.toArray(arguments))}var a=s.has(v,e)&&v[e],o=0,l=!1;if(a)try{a.apply(t,i.concat([r])),l=!0}finally{l||d("error",n,"unexpected remote exception")}else d("error",n,"undefined remote procedure: "+e)},reply:function(e,n){var i=s.has(m,e)&&m[e];i&&(delete m[e],i.apply(t,n))},notify:function(e,n){var i,r,a=s.has(b,e)&&b[e];if("number"==typeof n.length){if(a)for(i=0,r=a.length;r>i;++i)a[i].apply(t,n);"all"!==e&&f.notify("all",[e].concat(n))}},error:function(e,t){var n=s.has(m,e)&&m[e];if(n)throw delete m[e],""+t}},{query:function(e){var t=l(arguments),n=t[t.length-1],i=s.uniqueId();n&&(m[i]=n,d("call",e,i,s.initial(t)))},provide:function(e,t){v[e]=t},pub:function(e){d("notify",e,l(arguments))},sub:function(e,t){var n=b[e];n||(n=b[e]=[]),n.push(t)},close:function(){r(h)}}):c}}(this),function(e,t){"use strict";var n=e.Disney,i=e._;n.initGuestProvider=function(r,a){var s=n.xdc(e.parent,r,"guest");i.each(n.GuestContext.actions,function(e){s.provide(e,function(n){a[e]().then(function(e){n(e)},function(e){n(t,e||"failed")})})}),a.on("all",function(){s.pub.apply(s,i.toArray(arguments))}),s.query("ready",function(){})}}(this);