__d("widget.treasure.config",["common.js.jquery"],function(k,h,j,a){var d=a("common.js.jquery"),e={gameState:{unInit:0,init:1,start:2,end:3,dolottary:4},images:{duozai:"http://s0.hao123img.com/res/treasure/duozai-kp.png",imagebtn:"",animateimg:"",pop:"http://s0.hao123img.com/res/treasure/treasure-pop.png"},lottery:{pid:"116",token:"296cd89197bcc8373c2bc8f73a88ad85",lotteryUrl:"http://zhuanla.hao123.com/lucky/draw?callback=?",submitUrl:"http://zhuanla.hao123.com/lucky/update?callback=?",goldUrl:"http://zhuanla.hao123.com/task/addvipcoin?callback=?"},
duozai:{width:80,height:172,normal:{interval:100,frames:"-16 30,-16 -172,-16 -344,-16 -516,-16 -688,-16 -860,-96 0".split(",")},onceHover:{interval:200,frames:"-16 0,-16 -172,-16 -344,-16 -516,-16 -688,-16 -860,-96 0".split(",")},working:{interval:100,frames:"-96 0,-96 -172,-95 -344,-95 -516,-95 -687,-95 -859,-95 -1032".split(",")},jumping:{interval:200,frames:["-45 -5","-45 -139","-45 -273","-45 -407","-45 -5"]}},progressbar:{width:56,height:166,left:13,bottom:135,emptyposition:"0px 0px",fullposition:"0px 0px",
btnwidth:50,btnheight:60,btntop:0,btnleft:0,score:{zero:166,one:154,two:134,three:114,four:94,five:74,six:54,seven:0}}};h.exports={init:function(){this.data=e;return this},get:function(e,c){var b=this.data||{},l=(e||"").split(".");d.each(l,function(c,f){f&&"undefined"!==typeof b&&(b=b[f])});return"undefined"!==typeof b?b:c},set:function(e,c){var b,l,a;if("undefined"===typeof c)this.data=e;else if(e=d.trim(""+(e||"")))b=e.split("."),l=b.pop(),a=this.data||{},d.each(b,function(b,c){var e=a[c];if("object"===
typeof e)a=a[c];else if("undefiend"===typeof e)a=a[c]={};else throw Error("forbidden to set property["+c+"] of ["+e+"] data");}),a[l]=c;return this}}.init();return j});
__d("widget.treasure.diamondSprite",["common.js.jquery","common.js.format","widget.treasure.config"],function(k,h,j,a){function d(b,c,e,f){this.ctx=b;this.url=c;this.num=f;this.diamondStore=e||{};this.create()}var e=a("common.js.jquery"),g=a("common.js.format"),c=a("widget.treasure.config");c.get("diamond");c.get("images");d.prototype.create=function(){var b=this.diamondStore,a=this.url,d=this.ctx.text(),f=this.num,q=c.get("diamond"+f);this.state1pic=c.get("images.diamond"+f+"state1");this.state2pic=
c.get("images.diamond"+f+"state2");this.$tpl=e(g('<a class="g-ib treasure-item" target="_blank" alog-text="#{title}" href="#{url}" style="position:relative;padding: 0;">&nbsp<i data-hook="treasure-diamond" style="cursor:pointer;*margin-top:3px;position: absolute;top:#{top}px;left:#{left}px;display:block;width:#{width}px;height:#{height}px;background-repeat:no-repeat;"></i></a>',{width:q.width,height:q.height,top:q.top,left:q.left,url:a,title:d}));this.$diamond=e('[data-hook="treasure-diamond"]',this.$tpl);
b&&b[a]?this.render(b[a]):this.render(1);return this.$tpl};d.prototype.render=function(b){b||(b=1);var c=this.ctx.text(),c=c+"-diamond";switch(b){case 1:this.$tpl.attr({"data-state":1,"alog-text":c});this.$diamond.css({"background-image":"url("+this.state1pic.src+")"});break;default:this.$tpl.attr({"data-state":2,"alog-text":c}),this.$diamond.css({"background-image":"url("+this.state2pic.src+")"})}};h.exports=d;return j});
__d("widget.treasure.duozaiSprite",["common.js.jquery","common.js.format","common.js.animation","widget.treasure.config"],function(k,h,j,a){function d(c){this.game=c;this.normalAnimationDone=!1;this.normalFrames=b.normal.frames;this.hoverDonePosition=c.convertPX(this.normalFrames[this.normalFrames.length-1]);this.create()}var e=a("common.js.jquery"),g=a("common.js.format"),c=a("common.js.animation"),k=a("widget.treasure.config"),b=k.get("duozai"),l=k.get("images");d.prototype.create=function(){this.$tpl=
e(g('<div class="duozai" style="width:#{width}px;height:#{height}px;background-image:url(#{bgurl});background-position:#{backgroundPos};bottom:#{bottom}px"></div>',{width:b.width,height:b.height,bgurl:l.duozai.src,backgroundPos:this.game.convertPX(this.game.duozaiinitposition),bottom:this.game.startbtnheight}))};d.prototype.show=function(b){this.$tpl.css({"background-position":this.game.initAnimationPosition}).animate({bottom:this.game.startbtnheight},100,function(){b&&b()})};d.prototype.playNormalAnimation=
function(e){var f=this,a=this.$tpl[0],d=b.normal;this.normalAnimation=c().changePosition(a,d.frames).then(function(){f.normalAnimationDone=!0;e&&e()});this.normalAnimation.start(d.interval)};d.prototype.stopNormalAnimation=function(){this.normalAnimation&&this.normalAnimation.dispose();this.normalAnimationDone=!0;this.$tpl.css("background-position","-16px 0")};d.prototype.playWorkingAnimation=function(){var e=this.$tpl[0],a=b.working;this.normalAnimationDone||this.stopNormalAnimation();this.workingAnimation=
c().changePosition(e,a.frames).repeatForever();this.workingAnimation.start(a.interval)};d.prototype.stopWorkingAnimation=function(){this.workingAnimation&&this.workingAnimation.dispose();this.$tpl.css("background-position",this.hoverDonePosition)};h.exports=d;return j});
__d("widget.treasure.progressbarSprite","common.js.jquery,common.js.format,common.js.animation,common.js.pageEvents,widget.treasure.config,common.js.events".split(","),function(k,h,j,a){function d(b){this.game=b;this.score=b.score||0;this.create()}var e=a("common.js.jquery"),g=a("common.js.format");a("common.js.animation");a("common.js.pageEvents");var k=a("widget.treasure.config"),c=a("common.js.events"),b=k.get("progressbar"),l=k.get("images");d.prototype.create=function(){var a=this.renderScore(this.score);
this.$tpl=e(g('<div class="progressbar-box" style="position:absolute;width:#{width}px;height:#{height}px;left:#{left}px;bottom:#{bottom}px;cursor:pointer"><div class="pointer js-pointer" style="position: absolute;width:#{width}px;height:#{height}px;background: url(#{bgurl})  #{fullposition}  no-repeat;"></div><div class="progressbar js-progressbar" style="position: absolute;width:#{width}px;height:#{emptybarheight}px;background: url(#{bgurl}) #{emptyposition} no-repeat"></div></div>',{width:b.width,
height:b.height,left:b.left,bottom:b.bottom,fullposition:b.fullposition,emptyposition:b.emptyposition,bgurl:l.imagebtn.src,btnwidth:b.btnwidth,btnheight:b.btnheight,btntop:b.btntop,btnleft:b.btnleft,emptybarheight:a}));"1"==this.game.logicdata.isloginfirst&&"1"!=this.game.login&&(this.$btnTpl=e(g('<a href="#" alog-text="\u9886\u53d6\u5956\u52b1" class="prize-btn js-prize" style="width: #{btnwidth}px;height: #{btnheight}px;display:block;position: absolute;top: #{btntop}px;left: #{btnleft}px;cursor:pointer"></a>',
{btnwidth:b.btnwidth,btnheight:b.btnheight,btntop:b.btntop,btnleft:b.btnleft})));this.$progressbar=e(".js-progressbar",this.$tpl);this.$pointer=e(".js-pointer",this.$tpl);7==this.score&&this.$btnTpl&&(this.$tpl.append(this.$btnTpl),this.$prizeBtn=e(".js-prize",this.$tpl),c.done("weekend.progressbar-bindbtnclick"))};d.prototype.playflyanimation=function(){this.$tpl.fadeIn(1E3)};d.prototype.renderScore=function(a){var f;switch(a){case 0:f=b.score.zero;break;case 1:f=b.score.one;break;case 2:f=b.score.two;
break;case 3:f=b.score.three;break;case 4:f=b.score.four;break;case 5:f=b.score.five;break;case 6:f=b.score.six;break;case 7:f=b.score.seven;break;default:f=b.score.seven}this.$progressbar&&this.$progressbar.animate({height:f},1E3);7==a&&this.$btnTpl&&!this.$prizeBtn&&(this.$tpl.append(this.$btnTpl),this.$prizeBtn=e(".js-prize",this.$tpl),c.done("weekend.progressbar-bindbtnclick"));return f};d.prototype.forward=function(b){this.renderScore(b)};d.prototype.back=function(){var b=this.forwardTime;this.$pointer.stop().animate({left:pointerConf.minLeft},
b,"linear")};d.prototype.reset=function(){this.renderScore(0)};h.exports=d;return j});
__d("widget.treasure.treasure_ajax",["common.js.jquery"],function(k,h,j,a){function d(c){c=document.cookie.match("(?:^|; )"+window.encodeURIComponent(c)+"=([^;]+)");return null===c?void 0:window.decodeURIComponent(c[1])}function e(){var c=d("FLASHID")||d("BAIDUID");if(c)return c.split(":")[0]}var g=a("common.js.jquery");return j={doPost:function(c,b,a){b=b||{};b.c=e();g.getJSON(HAO.httpsTrans(c),b,function(b){a&&a(b)})}}});
__d("widget.treasure.treasure_goodSubmit",["common.js.widget","widget.popup.base","widget.treasure.config"],function(k,h,j,a){a("common.js.widget");a("widget.popup.base");var d=a("widget.treasure.config");$.widget("hao123.treasure_goodSubmit",$.lottery.popup,{options:{className:"good-confirm-box",isModel:!0},_create:function(){var a=this.element;this._baseCreate();this.element.appendTo($("body"));this.$close=$('[data-hook="good-confirm-close"]',a);this._bindEvent();this._render();this._baseShow()},
_init:function(){},_render:function(){var a=this.options,g=a.game.popdata[4],c=g.boxlayout.split(" "),b=g.closebtnlayout.split(" "),l=d.get("images");this.element.css({position:"fixed",width:c[0]+"px",height:c[1]+"px","z-index":9999,"background-image":"url("+HAO.httpsTrans(l.pop.src)+")","background-repeat":"no-repeat","background-position":a.game.convertPX(g.boxbgposition)});this.$close.css({position:"absolute",display:"block",width:b[0]+"px",height:b[1]+"px",top:b[2]+"px",left:b[3]+"px"})},_bindEvent:function(){var a=
this;a.$close.click(function(){a._baseHide();a.remove();return!1})}});h.exports={pop:function(a){$('<div id="treasure-good-confirm" class="treasure-good-confirm" monkey="treasure_good_confirm"><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="good-confirm-close" data-hook="good-confirm-close"></a></div>').treasure_goodSubmit({game:a})}};return j});
__d("widget.treasure.treasure_good",["common.js.widget","widget.treasure.treasure_ajax","widget.treasure.config","widget.treasure.treasure_goodSubmit"],function(k,h,j,a){a("common.js.widget");var d=a("widget.treasure.treasure_ajax"),e=a("widget.treasure.config"),g=a("widget.treasure.treasure_goodSubmit"),c=e.get("lottery").submitUrl;$.widget("hao123.treasure_good",$.lottery.popup,{options:{className:"pop-treasure-good",isModel:!0},_create:function(){var b=this.element;e.get("images");this._baseCreate();
this.element.appendTo($("body"));this.valid=!1;this.$close=$('[data-hook="treasure-good-close"]',b);this.$submit=$('[data-hook="treasure-good-submit"]',b);this.$prize=$('[data-hook="treasure-good-prize"]',b);this.$name=$('[data-hook="prizer-name"]',b);this.$phone=$('[data-hook="prizer-phone"]',b);this.$address=$('[data-hook="prizer-address"]',b);this._bindEvent();this._baseShow()},_init:function(){this._render()},_render:function(){var b=this.options,a=e.get("images"),c=b.game.popdata[3],f=c.boxlayout.split(" "),
d=c.closebtnlayout.split(" "),g=c.btn1layout.split(" "),j=c.btn2layout.split(" "),h=c.input1layout.split(" "),k=c.input2layout.split(" "),p=c.input3layout.split(" ");this.element.css({position:"fixed",width:f[0],height:f[1],"z-index":9999,"background-image":"url("+HAO.httpsTrans(a.pop.src)+")","background-repeat":"no-repeat","background-position":b.game.convertPX(c.boxbgposition)});this.$close.css({position:"absolute",display:"block",width:d[0]+"px",height:d[1]+"px",top:d[2]+"px",left:d[3]+"px"});
this.$submit.css({position:"absolute",display:"block",width:g[0]+"px",height:g[1]+"px",top:g[2]+"px",left:g[3]+"px"}).attr("href",b.url);this.$prize.css({position:"absolute",width:j[0]+"px",height:j[1]+"px",top:j[2]+"px",left:j[3]+"px"}).text(b.prize);this.$name.css({position:"absolute",display:"block",width:h[0]+"px",height:h[1]+"px",top:h[2]+"px",left:h[3]+"px"});this.$phone.css({position:"absolute",display:"block",width:k[0]+"px",height:k[1]+"px",top:k[2]+"px",left:k[3]+"px"});this.$address.css({position:"absolute",
display:"block",width:p[0]+"px",height:p[1]+"px",top:p[2]+"px",left:p[3]+"px"})},show:function(){this._baseShow()},_commit:function(){function b(){a._baseHide();g.pop(e.game)}var a=this,e=a.options;a._valid();a.valid&&d.doPost(c,e.args,b)},_valid:function(){function b(b,c){b=$.trim(b);switch(c){case "phone":return/^0?1[3|4|5|8][0-9]\d{8}$/.test(b);default:return!!b}}var c=this.$name.val(),a=this.$phone.val(),e=this.$address.val();b(c,"notnull")?b(a,"notnull")?b(a,"phone")?b(e,"notnull")?(this.valid=
!0,this.options.args.winfo.address=e,this.options.args.winfo.phone=a,this.options.args.winfo.uname=c):(this.valid=!1,this.$address.focus()):(this.valid=!1,this.$phone.val("").focus()):(this.valid=!1,this.$phone.focus()):(this.valid=!1,this.$name.focus())},_bindEvent:function(){var b=this;this.$close.click(function(){b._baseHide();b.remove();return!1});this.$submit.click(function(){b._commit();return!1})}});h.exports={pop:function(b,c,a){var e={};e.prize=b;e.args=c;e.game=a;$('<div id="pop-treasure-good" class="pop-treasure-good" monkey="pop_treasure_good"><div class="treasure-good-prize" data-hook="treasure-good-prize"></div><input class="prizer-name" data-hook="prizer-name"><input class="prizer-phone" data-hook="prizer-phone"><textarea rows="2" cols="20" class="prizer-address" data-hook="prizer-address"></textarea><a href="#" class="treasure-good-submit" data-hook="treasure-good-submit" title="\u63d0\u4ea4"></a><a href="#" title="\u5173\u95ed\u4e2d\u5956\u5f39\u5c42" class="treasure-good-close" data-hook="treasure-good-close"></a></div>').treasure_good(e)}};
return j});
__d("widget.treasure.treasure_virtual",["common.js.widget","widget.popup.base","widget.treasure.config","widget.treasure.treasure_good"],function(k,h,j,a){a("common.js.widget");a("widget.popup.base");var d=a("widget.treasure.config"),e=a("widget.treasure.treasure_good");$.widget("hao123.treasure_virtual",$.lottery.popup,{options:{className:"pop-treasure-virtual",isModel:!0},_create:function(){var a=this.element;d.get("images");this._baseCreate();this.element.appendTo($("body"));this.$close=$('[data-hook="treasure-virtual-close"]',
a);this.$submit=$('[data-hook="treasure-virtual-submit"]',a);this.$img=$('[data-hook="treasure-virtual-img"]',a);this.$prize=$('[data-hook="treasure-virtual-prize"]',a);this._bindEvent();this._baseShow()},_init:function(){this._render()},_render:function(){var a=this.options,c=d.get("images"),b=a.game.popdata[2],e=b.boxlayout.split(" "),j=b.boxbgposition,f=b.closebtnlayout.split(" "),h=b.btn1layout.split(" "),i=b.input1layout.split(" "),k=b.input2layout.split(" ");"0"==b.isprizeshow&&"0"==a.real&&
(e=b.boxlayout2.split(" "),f=b.closebtnlayout2.split(" "),h=b.btn1layout2.split(" "),i[0]=0,i[1]=0,k[0]=0,k[1]=0,j=b.boxbgposition2);this.element.css({position:"fixed",width:e[0],height:e[1],"z-index":9999,"background-image":"url("+HAO.httpsTrans(c.pop.src)+")","background-repeat":"no-repeat","background-position":a.game.convertPX(j)});this.$close.css({position:"absolute",display:"block",width:f[0]+"px",height:f[1]+"px",top:f[2]+"px",left:f[3]+"px"});this.$submit.css({position:"absolute",display:"block",
width:h[0]+"px",height:h[1]+"px",top:h[2]+"px",left:h[3]+"px"}).attr("href",a.url);this.$img.css({position:"absolute",width:k[0]+"px",height:k[1]+"px",top:k[2]+"px",left:k[3]+"px","background-image":"url("+HAO.httpsTrans(a.img)+")","background-repeat":"no-repeat","background-position":"center center"});this.$prize.css({position:"absolute",width:i[0]+"px",height:i[1]+"px",top:i[2]+"px",left:i[3]+"px"}).text(a.name)},_bindEvent:function(){var a=this,c=this.options;this.$close.click(function(){a._baseHide();
a.remove();return!1});0!=c.real&&this.$submit.click(function(){a._baseHide();a.remove();e.pop(c.name,c.params,c.game);return!1})}});h.exports={pop:function(a,c,b){var e={};e.img=c.img_url;e.url=c.url;e.game=a;e.name=c.prize_name;e.prize_id=c.prize_id;e.real=c.real;e.params=b;$('<div id="pop-treasure-virtual" class="pop-treasure-virtual" monkey="pop_treasure_virtual"><div class="treasure-virtual-prize" data-hook="treasure-virtual-prize"></div><div class="treasure-virtual-img" data-hook="treasure-virtual-img"></div><a href="#" target="_blank" class="treasure-virtual-submit" data-hook="treasure-virtual-submit" title="go"></a><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="treasure-virtual-close" data-hook="treasure-virtual-close"></a></div>').treasure_virtual(e)}};
return j});
__d("widget.treasure.treasure_getGold",["common.js.widget","widget.treasure.config"],function(k,h,j,a){a("common.js.widget");var d=a("widget.treasure.config");$.widget("hao123.treasure_getGold",$.lottery.popup,{options:{className:"gold-confirm-box",isModel:!0},_create:function(){var a=this.element;d.get("images");this._baseCreate();this.element.appendTo($("body"));this.$close=$('[data-hook="gold-confirm-close"]',a);this.$goVip=$('[data-hook="gold-confirm-vip"]',a);this._render();this._bindEvent();this._baseShow()},
_init:function(){},_render:function(){var a=this.options,g=a.game.popdata[5],c=g.boxlayout.split(" "),b=g.closebtnlayout.split(" "),l=g.btn1layout.split(" "),h=d.get("images");this.element.css({position:"fixed",width:c[0]+"px",height:c[1]+"px","z-index":9999,"background-image":"url("+HAO.httpsTrans(h.pop.src)+")","background-repeat":"no-repeat","background-position":a.game.convertPX(g.boxbgposition)});this.$close.css({position:"absolute",display:"block",width:b[0]+"px",height:b[1]+"px",top:b[2]+"px",
left:b[3]+"px"});this.$goVip.css({position:"absolute",display:"block",width:l[0]+"px",height:l[1]+"px",top:l[2]+"px",left:l[3]+"px"}).attr("href",a.game.logicdata.nodrwaurl)},_bindEvent:function(){var a=this;a.$close.click(function(){a._baseHide();a.remove();return!1});a.$goVip.click(function(){a._baseHide();a.remove()})}});h.exports={pop:function(a){$('<div id="treasure-gold-confirm" class="treasure-gold-confirm" monkey="treasure_gold_confirm"><a target="_blank" href="http://vip.hao123.com//?from=weekend" alog-text="goVip" class="gold-confirm-vip" data-hook="gold-confirm-vip"></a><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="gold-confirm-close" data-hook="gold-confirm-close"></a></div>').treasure_getGold({game:a})}};
return j});
__d("widget.treasure.game","common.js.jquery,common.js.format,common.js.events,common.js.log,common.js.JSON,widget.canlash.imageloader,widget.treasure.config,common.js.config,common.js.store,widget.treasure.duozaiSprite,widget.treasure.progressbarSprite,widget.treasure.diamondSprite,widget.treasure.treasure_virtual,widget.treasure.treasure_ajax,widget.treasure.treasure_getGold,common.js.profile,common.js.pageEvents,widget.treasure.dolotteryTip,widget.treasure.sharePop,common.js.login,common.js.cookie".split(","),function(k,
h,j,a){function d(){window.gameinstance=this;this.state=m.unInit;this.resourceLoaded=!1;this.login=q.get("userinfo").islanding}var e=a("common.js.jquery"),g=a("common.js.format"),c=a("common.js.events"),b=a("common.js.log"),l=a("common.js.JSON"),x=a("widget.canlash.imageloader"),f=a("widget.treasure.config"),q=a("common.js.config"),i=a("common.js.store"),y=a("widget.treasure.duozaiSprite"),z=a("widget.treasure.progressbarSprite"),o=a("widget.treasure.diamondSprite"),p=a("widget.treasure.treasure_virtual"),
u=a("widget.treasure.treasure_ajax"),r=a("widget.treasure.treasure_getGold"),A=a("common.js.profile"),s=a("common.js.pageEvents"),b=a("common.js.log"),v=a("widget.treasure.dolotteryTip"),w=a("widget.treasure.sharePop"),B=a("common.js.login"),n=a("common.js.cookie"),m=f.get("gameState"),t=f.get("images");d.prototype.init=function(b,a,c,d,f){this.diamondData="hao123-index-tnwbdz"==d?b[1].data:b[2].data;this.logicdata=a[0];this.popdata=c;this.initDiamondConf();this.pageid=d;this.type=b[2].type||"0";
this.updateStore();this.$parent=f||e("body");this.initConfig(b);this.slideState=A.get("slide");this.diamonds=[];this.show=!0;var g=this;this.loadResource(function(b){b&&g.initGameScene()});return!0};d.prototype.convertPX=function(b){return b.replace(/(\S+)\s+(\S+)/,"$1px $2px")};d.prototype.initDiamondConf=function(){for(var b=this.diamondData.length,a,c=this.diamondData,e,d,g,i,h,l=0;l<b;l++)a=c[l].diamondconf.split(" "),e=c[l].state1,d=c[l].state2,g="diamond"+a[0],i="images."+g+"state1",h="images."+
g+"state2",a={width:a[1],height:a[2],top:a[3],left:a[4],index:a[0]},f.set(g,a),f.set(i,HAO.httpsTrans(e)),f.set(h,HAO.httpsTrans(d))};d.prototype.initConfig=function(b){var a=f.get("lottery.lotteryUrl"),c=f.get("lottery.submitUrl"),e=f.get("lottery.goldUrl"),d=b[0].initanimationmap.split(","),g=b[0].hoveranimationmap.split(",");this.duozaiwidth=b[0].duozaiwidth;this.duozaiheight=b[0].duozaiheight;this.duozaiinitposition=this.convertPX(b[0].duozaiinitposition);this.containerbottomgame=parseInt(b[0].containerbottomgame,
10);this.startbtnheight=parseInt(b[0].startbtnheight,10);this.startBtnPosition=this.convertPX(b[0].startbtnposition);this.closeBtnConf=b[0].closebtnconf.split(" ");this.closeBtnPosition=this.convertPX(this.closeBtnConf[2]+" "+this.closeBtnConf[3]);this.containerHeightGameing=b[0].containerheightgameing;this.containerBottomGameing=this.containerbottomgame+this.startbtnheight;this.initAnimationPosition=this.convertPX(d[0]);this.initanimationinterval=parseInt(b[0].initanimationinterval,10);this.hoveranimationinterval=
parseInt(b[0].hoveranimationinterval,10);this.gameTipConf=b[0].gameruleconf.split(" ");this.gameTipPosition=this.convertPX(this.gameTipConf.slice(4).join(" "));this.progressBarConf=b[0].progressbarconf.split(" ");this.progressBarStep=b[0].progressbarstep.split(" ");this.progressBarWidth=this.progressBarConf[0];this.progressBarHeight=this.progressBarConf[1];this.progressBarLeft=this.progressBarConf[2];this.progressBarBottom=this.progressBarConf[3];this.progressScoreMap={zero:this.progressBarStep[0],
one:this.progressBarStep[1],two:this.progressBarStep[2],three:this.progressBarStep[3],four:this.progressBarStep[4],five:this.progressBarStep[5],six:this.progressBarStep[6],seven:this.progressBarStep[7]};this.progressBarEmptyPosition=this.convertPX(b[0].progressbaremptyposition);this.progressBarFullPosition=this.convertPX(b[0].progressbarfullposition);this.progressBarStep=b[0].progressbarstep.split(" ");this.getPrizeBtnConf=b[0].getprizebtnconf.split(" ");f.set("duozai.width",b[0].duozaiwidth);f.set("duozai.height",
b[0].duozaiheight);f.set("duozai.normal.frames",d);f.set("duozai.normal.interval",this.initanimationinterval);f.set("duozai.working.frames",g);f.set("duozai.working.interval",this.hoveranimationinterval);f.set("progressbar.width",this.progressBarWidth);f.set("progressbar.height",this.progressBarHeight);f.set("progressbar.left",this.progressBarLeft);f.set("progressbar.bottom",this.progressBarBottom);f.set("progressbar.btnwidth",this.getPrizeBtnConf[0]);f.set("progressbar.btnheight",this.getPrizeBtnConf[1]);
f.set("progressbar.btnleft",this.getPrizeBtnConf[2]);f.set("progressbar.btnbottom",this.getPrizeBtnConf[3]);f.set("progressbar.score",this.progressScoreMap);f.set("progressbar.emptyposition",this.progressBarEmptyPosition);f.set("progressbar.fullposition",this.progressBarFullPosition);f.set("images.duozai",HAO.httpsTrans(b[0].duozai));f.set("images.imagebtn",HAO.httpsTrans(b[0].imagebtn));f.set("images.rule",HAO.httpsTrans(b[0].rule));f.set("images.animateimg",HAO.httpsTrans(this.popdata[1].animateimgurl));
f.set("images.pop",HAO.httpsTrans(b[0].pop));f.set("lottery.pid",b[0].pid);f.set("lottery.token",b[0].token);f.set("lottery.lotteryUrl",HAO.httpsTrans(a));f.set("lottery.submitUrl",HAO.httpsTrans(c));f.set("lottery.goldUrl",HAO.httpsTrans(e))};d.prototype.updateStore=function(){var b=i.get("treasure-state"),a=i.get("treasure-score"),c=i.get("treasure-createtime"),e=i.get("treasure-diamonds");this.state=b?b:m.init;this.score=a?a:0;this.diamondStore=e?e:"{}";this.diamondStore=l.parse(this.diamondStore);
b=Date.parse(new Date)/1E3;!c||172800<=b-c?this.resetStore():this.createtime=c};d.prototype.resetStore=function(){var b=i.get("treasure-state"),a=i.get("treasure-score"),c=i.get("treasure-createtime"),e=i.get("treasure-diamonds");b&&i.remove("treasure-state");a&&i.remove("treasure-score");c&&i.remove("treasure-createtime");e&&i.remove("treasure-diamonds")};d.prototype.resetData=function(){this.score=0;this.state=m.unInit;this.createtime=0;this.diamondStore="{}";this.diamondStore=l.parse(this.diamondStore);
this.diamonds=[];this.index=!0};d.prototype.loadResource=function(b){if(this.resourceLoaded)b(!0);else{var a=this;x(t,function(c){a.resouceLoaded=c;b(c)})}};d.prototype.initGameScene=function(){var b=this;b.createStage();b.createDuozai(function(){b.$container.css("overflow","visible");0==b.score&&b.state!=m.start&&b.state!=m.end?b.duozai.playNormalAnimation(function(){b.createStartBtn();b.createCloseBtn()}):("1"==b.slideState&&1450>parseInt(s.getViewport().width,10)&&c.done("slidetoolbar.fold"),b.duozai.playNormalAnimation(function(){b.createCloseBtn()}));
b.createProgressBar();b.createTip();b.state!=m.start&&b.state!=m.end||(b.$container.addClass("treasure-gameing").css({bottom:b.containerBottomGameing,height:b.containerHeightGameing}),b.duozai.$tpl.css("bottom",0),b.progressbar.playflyanimation(),b.createDiamonds());b.bindEvent()})};d.prototype.createStage=function(){this.$container=e('<div class="treasure-game" monkey="treasure-game"></div>').appendTo(this.$parent);this.$container.css({width:this.duozaiwidth,height:this.duozaiheight,bottom:this.containerbottomgame})};
d.prototype.createDuozai=function(b){var a=this;this.duozai=new y(a);this.$container.append(this.duozai.$tpl);a.sendCurrent=function(b){"index"!=b?(a.index=!1,a.$container.hide()):(a.index=!0,a.$container.show())};c.on("goTop.sendCurrent",a.sendCurrent);this.duozai.show(b)};d.prototype.createStartBtn=function(){function b(a){var c=e("#hao123-bodyct").offset().top,d=e(".hao123-search .fixed-bg").height()||60;e("body").scrollTop(c-d);a&&a()}var a=this,d=e(g('<div></div><a id="treasure-start" class="treasure-start" href="#" title="\u5f00\u59cb\u6e38\u620f" style="background-image:url(#{bgurl})"></a>',
{bgurl:t.duozai.src}));this.$container.append(d);d=e("#treasure-start");d.css({display:"block",width:a.duozaiwidth,height:a.startbtnheight,"background-image":"url("+t.imagebtn.src+")","background-position":a.startBtnPosition,"background-repeat":"no-repeat","margin-top":a.duozaiheight-a.startbtnheight});d.bind("mousedown",function(){d.addClass("clicked")}).bind("click",function(){d.remove();"1"==a.slideState&&1450>parseInt(s.getViewport().width,10)&&c.done("slidetoolbar.fold");b(function(){a.duozai.stopWorkingAnimation();
a.start()});return!1}).hover(function(){a.$tip.show()},function(){a.$tip.hide()});a.duozai.$tpl.one("click",function(){d.click()})};d.prototype.createCloseBtn=function(){var b=this,a=e('<a href="#" alog-text="\u5173\u95ed\u6e38\u620f" class="treasure-close js-close"></a>');b.$container.append(a);b.$closeBtn=a;a.css({top:b.closeBtnConf[0]+"px",left:b.closeBtnConf[1]+"px","background-image":"url("+t.imagebtn.src+")","background-position":b.closeBtnPosition});b.$closeBtn.click(function(){b.destroy();
return!1})};d.prototype.createDiamonds=function(){function b(a,c){var d=a.attr("cls"),e=a.attr("alog-custom");c.attr({cls:d,"alog-custom":e})}var a=this,d={},f=this.diamondData,g=f.length;a.diamonds=[];if(a.state==m.start){for(var h=0;h<g;h++){var j=f[h].url.replace(/(.*)\/$/,"$1");d[j]=f[h]}"1"!=a.type||"hao123-index-tnwbdz"==a.pageid?(e("#box-famoussite .famoussite-mainlink").each(function(){var f=this.href.replace(/(.*)\/$/,"$1");if(d[f]){var g=d[f].diamondconf.split(" ")[0],h=new o(e(this),f,
a.diamondStore,g);e(this).parent().append(h.$tpl);b(h.$tpl.prev(".famoussite-mainlink"),h.$tpl);a.diamonds.push(h.$tpl);h.$tpl.click(function(){var b=parseInt(e(this).attr("data-state"),10),d=i.get("treasure-score")||0,b=b+1;a.diamondStore[f]=b;i.set("treasure-diamonds",l.stringify(a.diamondStore));h.render(b);2==b&&(6<++d&&(d=7,c.emit("weekend.diamond-clear"),a.state=m.end,i.set("treasure-state",a.state)),a.score=d,i.set("treasure-score",d),a.progressbar.forward(d),6<d&&!("1"!=a.login&&"1"==a.logicdata.isloginfirst)&&
("1"==a.login&&!n.get("treasure_logintip")&&n.set("treasure_logintip",3,{expires:1}),c.emit("weekend.progressbar-full")))})}}),e("#box-starbar .baritem-link").each(function(){var b=this.href.replace(/(.*)\/$/,"$1");if(d[b]){var f=d[b].diamondconf.split(" ")[0],g=new o(e(this),b,a.diamondStore,f);e(this).parent().append(g.$tpl);a.diamonds.push(g.$tpl);g.$tpl.click(function(){var d=parseInt(e(this).attr("data-state"),10),f=i.get("treasure-score")||0,d=d+1;a.diamondStore[b]=d;i.set("treasure-diamonds",
l.stringify(a.diamondStore));g.render(d);2==d&&(6<++f&&(f=7,c.emit("weekend.diamond-clear"),a.state=m.end,i.set("treasure-state",a.state)),a.score=f,i.set("treasure-score",f),a.progressbar.forward(f),6<f&&!("1"!=a.login&&"1"==a.logicdata.isloginfirst)&&("1"==a.login&&!n.get("treasure_logintip")&&n.set("treasure_logintip",3,{expires:1}),c.emit("weekend.progressbar-full")))})}})):e("#box-coolsite .famoussite-mainlink").each(function(){var f=this.href.replace(/(.*)\/$/,"$1");if(d[f]){var g=new o(e(this),
f,a.diamondStore);e(this).parent().append(g.$tpl);b(g.$tpl.prev(".famoussite-mainlink"),g.$tpl);a.diamonds.push(g.$tpl);g.$tpl.click(function(){var b=parseInt(e(this).attr("data-state"),10),d=i.get("treasure-score")||0,b=b+1;a.diamondStore[f]=b;i.set("treasure-diamonds",l.stringify(a.diamondStore));g.render(b);2==b&&(6<++d&&(d=7,c.emit("weekend.diamond-clear"),a.state=m.end,i.set("treasure-state",a.state)),a.score=d,i.set("treasure-score",d),a.progressbar.forward(d),6<d&&c.emit("weekend.progressbar-full"))})}})}};
d.prototype.start=function(){this.resetStore();this.createtime||i.set("treasure-createtime",Date.parse(new Date)/1E3);i.set("treasure-state",m.start);i.set("treasure-score",0);this.score=0;this.state=m.start;this.duozai.stopWorkingAnimation();this.$tip.hide();this.$container.addClass("treasure-gameing").css({bottom:this.containerBottomGameing,height:this.containerHeightGameing});this.duozai.$tpl.css("bottom",0);this.progressbar.playflyanimation();this.createDiamonds()};d.prototype.createProgressBar=
function(){var b=this;this.progressbar=new z(b);this.$container.append(this.progressbar.$tpl);c.on("weekend.progressbar-full",function(){b.goNext()});n.get("treasure_logintip")&&c.emit("weekend.progressbar-full");c.on("weekend.progressbar-bindbtnclick",function(){b.progressbar.$prizeBtn.click(function(){B.show(function(){!n.get("treasure_logintip")&&n.set("treasure_logintip",1,{expires:1});window.location.reload()});return!1})})};d.prototype.doLottery=function(){var b=this,a={},c=f.get("lottery"),
d=a.pid=c.pid,e=a.token=c.token;u.doPost(c.lotteryUrl,a,function(a){var c=a.errno,a=a.data,f={};f.pid=d;f.token=e;f.winfo={};0===c?0!=parseInt(a.prize_id)?(f.oid=a.oid,p.pop(b,a,f)):r.pop(b):r.pop(b)})};d.prototype.goNext=function(){e("body").scrollTop(0);if("0"==this.login)"1"==this.logicdata.ispopfirst?w.pop(this,this.popdata[1]):v.pop(this,this.popdata[1]),this.restart();else if("1"==this.login){var b=n.get("treasure_logintip");n.get("treasure_poptip");if(3==b||1==b)n.remove("treasure_logintip"),
"1"==this.logicdata.ispopfirst?w.pop(this,this.popdata[1]):v.pop(this,this.popdata[1]),this.restart();2==b&&(n.remove("treasure_logintip"),this.doLottery())}};d.prototype.bindEvent=function(){var a=this;a.duozai.$tpl.hover(function(){a.$tip.show()},function(){a.$tip.hide()});a.$container.hover(function(){7!=a.score&&(a.duozai.normalAnimationDone&&a.duozai.playWorkingAnimation(),a.state==m.init&&b({page:"index",level:1,type:"auto",k:"weekend-hover"}))},function(){7!=a.score&&a.duozai.normalAnimationDone&&
a.duozai.stopWorkingAnimation()});c.on("weekend.progressbar-forward",function(){a.progressbar.forward()});c.on("weekend.progressbar-reset",function(){a.progressbar.reset()});c.on("weekend.diamond-clear",function(){for(var b=a.diamonds.length,c=0;c<b;c++)a.diamonds[c].remove()});c.on("weekend.diamond-hide",function(){for(var b=a.diamonds.length,c=0;c<b;c++)a.diamonds[c].hide()});c.on("weekend.diamond-show",function(){for(var b=a.diamonds.length,c=0;c<b;c++)a.diamonds[c].show()});c.on("treasure.createDiamonds",
function(){a.createDiamonds()});a.menuChange=function(b){0==b?(a.index=!0,a.$container&&a.$container.show()):(a.index=!1,window.menuChange=!0,a.$container&&a.$container.hide())};a.viewChange=function(b){b=b||s.getViewport();a.index&&(1339>b.width?(a.$container&&a.$container.hide(),c.emit("weekend.diamond-hide")):(a.$container&&a.$container.show(),c.emit("weekend.diamond-show")))};c.on("menus.changed",a.menuChange);s.on("viewport.deferchange",a.viewChange)};d.prototype.unEvents=function(){c.un("weekend.progressbar-forward");
c.un("weekend.progressbar-reset");c.un("weekend.diamond-clear");c.un("weekend.progressbar-hide");c.un("weekend.progressbar-show");c.un("treasure.createDiamonds");c.un("weekend.progressbar-full");c.un("weekend.progressbar-bindbtnclick");this.menuChange&&c.un("menus.changed",this.menuChange);this.viewChange&&s.un("viewport.deferchange",this.viewChange);this.sendCurrent&&c.un("goTop.sendCurrent",this.sendCurrent)};d.prototype.createTip=function(){this.$tip=e(g('<div class="treasure-tip" style="display:none;position:absolute;background:url(#{bgurl}) #{bgposition} no-repeat;width:#{width}px;height:#{height}px;top:#{top}px;left:#{left}px;"></div>',
{bgurl:t.imagebtn.src,bgposition:this.gameTipPosition,width:this.gameTipConf[0],height:this.gameTipConf[1],top:this.gameTipConf[2],left:this.gameTipConf[3]}));this.$container.append(this.$tip)};d.prototype.restart=function(){this.destroy();this.initGameScene()};d.prototype.destroy=function(){this.$container.remove();c.emit("weekend.diamond-clear");this.resetStore();this.resetData();this.unEvents()};h.exports=new d;return j});
__d("widget.treasure.dolotteryTip",["common.js.widget","widget.treasure.config","common.js.cookie","common.js.login","common.js.animation"],function(k,h,j,a){a("common.js.widget");var d=a("widget.treasure.config"),e=a("common.js.cookie"),g=a("common.js.login"),c=a("common.js.animation");$.widget("hao123.dolotteryTip",$.lottery.popup,{options:{className:"dolotteryTip-box",isModel:!0},_create:function(){var b=this.element;this._baseCreate();this.element.appendTo($("body"));this.$close=$('[data-hook="dolotteryTip-close"]',
b);this.$dolottery=$('[data-hook="dolotteryTip"]',b);this._render();this._play();this._bindEvent();this._baseShow()},_init:function(){},_render:function(){var b=this.options,a=d.get("images"),e=b.popconf.boxlayout.split(" "),f=b.popconf.closebtnlayout.split(" "),g=b.popconf.btn1layout.split(" "),h=b.popconf.isanimate1,j=b.popconf.isanimate2,k=b.popconf.animatediv1.split(" "),o=b.popconf.animatediv2.split(" "),p=b.popconf.animatemap1.split(","),u=b.popconf.animatemap2.split(","),r=parseInt(b.popconf.animaterepeat);
this.element.css({position:"fixed",width:e[0],height:e[1],"z-index":9999,"background-image":"url("+HAO.httpsTrans(a.pop.src)+")","background-repeat":"no-repeat","background-position":b.game.convertPX(b.popconf.boxbgposition)});this.$close.css({position:"absolute",display:"block",width:f[0]+"px",height:f[1]+"px",top:f[2]+"px",left:f[3]+"px","z-index":998});this.$dolottery.css({position:"absolute",display:"block",width:g[0]+"px",height:g[1]+"px",top:g[2]+"px",left:g[3]+"px","z-index":998});"1"==h&&
(this.$animatediv1=$('<div class="animateDiv1"></div>'),this.element.append(this.$animatediv1),this.$animatediv1.css({position:"absolute",display:"block",width:k[0]+"px",height:k[1]+"px",top:k[2]+"px",left:k[3]+"px","background-image":"url("+HAO.httpsTrans(a.animateimg.src)+")","background-repeat":"no-repeat","background-position":"1000px 1000px"}),this.animation1=c().changePosition(this.$animatediv1[0],p).repeat(r));"1"==j&&(this.$animatediv2=$('<div class="animateDiv2"></div>'),this.element.append(this.$animatediv2),
this.$animatediv2.css({position:"absolute",display:"block",width:o[0]+"px",height:o[1]+"px",top:o[2]+"px",left:o[3]+"px","background-image":"url("+HAO.httpsTrans(a.animateimg.src)+")","background-repeat":"no-repeat","background-position":"1000px 1000px"}),this.animation2=c().changePosition(this.$animatediv2[0],u).repeat(r))},_play:function(){var b=this.options.popconf;this.animation1&&this.animation1.start(b.animateintervel1);this.animation2&&this.animation2.start(b.animateintervel2)},_stop:function(){this.animation1&&
this.animation1.dispose();this.animation2&&this.animation2.dispose()},_bindEvent:function(){var b=this,a=b.options;b.$close.click(function(){b._stop();b._baseHide();b.remove();return!1});b.$dolottery.click(function(){if("1"==a.game.logicdata.isloginseconde&&"1"!=a.game.login)return b._baseHide(),b.remove(),g.show(function(){!e.get("treasure_logintip")&&e.set("treasure_logintip",2,{expires:1});window.location.reload()}),!1;b._stop();b._baseHide();b.remove();b.options.game.doLottery();return!1})}});
h.exports={pop:function(a,c){$('<div id="treasure-dolotteryTip" class="treasure-dolotteryTip" monkey="treasure-dolotteryTip"><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="dolotteryTip-close" data-hook="dolotteryTip-close"></a><a href="#" data-hook="dolotteryTip" alog-text="\u70b9\u51fb\u62bd\u5956"></a></div>').dolotteryTip({popconf:c,game:a})}};return j});
__d("widget.treasure.sharePop",["common.js.widget","widget.treasure.config","common.js.cookie","widget.treasure.dolotteryTip"],function(k,h,j,a){a("common.js.widget");var d=a("widget.treasure.config");a("common.js.cookie");var e=a("widget.treasure.dolotteryTip");$.widget("hao123.sharePop",$.lottery.popup,{options:{className:"sharePop-box",isModel:!0},_create:function(){var a=this.element;this._baseCreate();this.element.appendTo($("body"));this.$close=$('[data-hook="sharePop-close"]',a);this.$share=
$('[data-hook="share-box"]',a);this._render();this._bindEvent();this._baseShow()},_init:function(){},_render:function(){var a=this.options,c=d.get("images"),b=a.popconf.boxlayout.split(" "),e=a.popconf.btn1layout.split(" "),h=a.popconf.btn2layout.split(" ");this.element.css({position:"fixed",width:b[0],height:b[1],"z-index":9999,"background-image":"url("+HAO.httpsTrans(c.pop.src)+")","background-repeat":"no-repeat","background-position":a.game.convertPX(a.popconf.boxbgposition)});this.$close.css({position:"absolute",
display:"block",width:e[0]+"px",height:e[1]+"px",top:e[2]+"px",left:e[3]+"px"});this.$share.css({position:"absolute",display:"block",width:h[0]+"px",height:h[1]+"px",top:h[2]+"px",left:h[3]+"px"})},_bindEvent:function(){var a=this,c=a.options;a.$close.click(function(){a._baseHide();a.remove();return!1});a.$share.click(function(){a._baseHide();a.remove();e.pop(c.game,c.game.popdata[1]);return!1})}});h.exports={pop:function(a,c){$('<div id="treasure-sharePop" class="treasure-sharePop" monkey="treasure-sharePop"><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="sharePop-close" data-hook="sharePop-close"></a><a href="#" data-hook="share-box" alog-text="\u70b9\u51fb\u62bd\u5956"></a></div>').sharePop({popconf:c,
game:a})}};return j});window.js_VFrLGWlXfx&&window.js_VFrLGWlXfx(!0);
