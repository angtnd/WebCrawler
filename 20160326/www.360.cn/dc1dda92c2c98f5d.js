(function(e){document.getElementById("suggest-container")||$("#search-block .search-suggest").prepend('<div id="suggest-container" style="display:none" class="suggest"><div class="suggest-bd"></div><div class="suggest-ft"><div class="declare">\u5b89\u5168\u641c\u7d22\u4ece360\u641c\u7d22\u5f00\u59cb</div></div></div>');var t=qboot.jsonp,n="suggest-container",r="haosou-input",i="search-block";if(!$("#"+r)[0])return;var s=$("#"+r)[0],o=$("#"+i)[0],u=$("#"+n)[0],a=$("#"+n+" .suggest-bd")[0],f=s.form,l=new qSuggest(s,{autoPosition:!1,uiReferElem:o,uiWrapElem:u,uiContainerElem:a,recAllTimeout:120});(function(){var e=qSuggest.log,n=l,r=n.ui,i=n.data,s="reci",o="direct",u="common",a="on",f={},c={},h=function(e){return String(e).replace(/[^\x00-\xff]/g,"abc").replace(/[\d]/g,"abc").length},p="",d=!1;f[u]=[1,50],f[o]=[6,50],c[u]=[],c[o]=[],c[s]=[],r.searchForm.on("submit",function(e){var t=r.getFocusedGroup();if(t==o){var n=$("#suggest-direct>a."+a);n[0]&&d&&(window.open(n.attr("href")),e.preventDefault&&e.preventDefault(),d=!1)}else{var n=$("#suggest-reci>a."+a);t==s&&n[0]&&n.attr("href")&&d&&(window.open(n.attr("href")),e.preventDefault&&e.preventDefault(),d=!1)}p=r.getTextInputVal()}),function(){i.bindGroupHandler(u,{request:function(e,n){if(!n||!e)return;var r=h(e);r>=f[u][0]&&r<=f[u][1]&&t("http://sug.so.360.cn/suggest?word="+encodeURIComponent(e)+"&encodein=utf-8&encodeout=utf-8&pq="+encodeURIComponent(p),function(e,t){n(e)},{jsonp:"callback"})},receive:function(e){return e&&e.q&&e.s&&e.s.length>0?{query:e.q,data:e.s}:null}}),r.bindGroupHandler(u,{render:{setup:function(){c[u]=[]},build:function(){var e=0;return function(t){if(!t)return"";var i="",s,o=n.query.length,a=0;r.setGroupTotal(u,t.length);for(var f=0,l=t.length;f<l;f++){t[f]=t[f].trim(),s=t[f].toLowerCase();if(s===n.query)continue;s.indexOf(n.query)===0&&(s=n.query+"<b>"+s.substring(o)+"</b>"),i+='<a data-text="'+t[f]+'" data-index="'+a+'"  class="suggest-item">'+s+"</a>",a++}return i=i?'<div id="suggest-common" class="suggest-list">'+i+"</div>":"",e!=l&&(e=l,$(".suggest-ft .declare").css("position","relative").css("position","absolute")),i}}(),teardown:function(){c[u]=$("#suggest-common>a")}},init:function(){r.initGroupUserBehavior(u,"#suggest-common>a"),r.container.delegate("#suggest-common>a","click",function(e){e.preventDefault()}),r.on("itemSelect",function(t){if(t.group!==u)return;if(t.index>-1&&c[u][t.index]){var n=c[u].eq(t.index);t.trigger!="keyboard"&&r.setTextInputVal(n.attr("data-text")),r.trigger("enter",{trigger:t.trigger}),e("itemSelect[COMMON] index:"+t.index)}}),r.on("itemFocus",function(e){if(e.group!==u)return;if(e.index>-1&&c[u][e.index]){var t=c[u].eq(e.index);t.addClass(a),e.trigger=="keyboard"&&r.setTextInputVal(t.attr("data-text"))}}),r.on("itemBlur",function(e){if(e.group!==u)return;e.index>-1&&c[u][e.index]&&c[u].eq(e.index).removeClass(a)})}})}(),r.on("itemSelect",function(e){setTimeout(function(){r.hide()},300)}),r.on("change",function(e){}),$(window).on("blur",function(){r.hide()})})()})();