/* jdf-1.0.0/ abtest.js Date:2015-06-23 14:37:52 */
define("jdf/1.0.0/unit/abtest/1.0.0/abtest.js",["jdf/1.0.0/unit/cookie/1.0.0/cookie.js"],function(require){var c=require("jdf/1.0.0/unit/cookie/1.0.0/cookie.js");var d={param:h(location.href)};function e(a,b){return b?Object.prototype.toString.call(a)=="[object "+b+"]":!1}function f(a){return(a||"").replace(/(^\s*)|(\s*$)/g,"")}function g(a){var b=arguments;if(b.length>1){for(var c=0,d=b.length;d>c;c++)if(g(b[c]))return!0;return!1}return"undefined"===String(a)||"null"===String(a)||("string"==typeof a?""===f(a):!1)}function h(a){var b,c=a,d=c?c.indexOf("?"):-1,e={};if(d>-1){c=c.substring(d+1),c=c.split("&");for(var f=0,h=c.length;h>f;f++)b=c[f].split("="),0==f&&(b[0]=b[0]&&b[0].replace(/\?/g,"")),g(b[0],b[1])||(e[b[0]]=b[1])}return e}function i(a,b){function c(a){for(var b=0,c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c),b&=b;return b}return Math.abs(c(a))%b}function j(a){if(!d.jda){var b=(c("__jda")||"0.0").split(".");b=b.length<1?0:b[1],d.jda=i(b,a)}return d.jda}function k(a,b){return a>=b?1:0}function l(a){var b=document.getElementById(a);b&&(b.style.display="block")}function m(a,b){var c=0;for(var d=0;d<a.length;d++)c+=a[d].percent||0;return c>b?(alert("\u5f88\u62b1\u6b49\uff0c\u6982\u7387\u767e\u5206\u6bd4\u603b\u6570\u8d85\u51fa\u4e86"+b+"\uff0c\u4e3a\u4e86\u907f\u514d\u903b\u8f91\u9884\u5224\u5931\u8bef\uff0c\u8bf7\u91cd\u65b0\u5206\u914d\u5404\u663e\u793a\u9879\u7684\u767e\u5206\u6bd4\uff01"),!0):!1}var n=function(a){var b=1e4;var c=100;var f=b/c;var g=d.param;var h=parseInt(g.isdebug)||0;var i=parseInt(g.abtest)||0;i=i>0?Math.min(i,100)*f:0;var n=h&&i>0?i:j(b);var o=0;var p=function(){this.id&&l(this.id),e(this.fn,"Function")&&this.fn.call(this)};if(e(a,"Object"))(!h||h&&!m([a],c))&&(o=k(a.percent*f,n),o?p.call(a):a.inverse.call(a));else if(e(a,"Array")&&(!h||h&&!m(a,c))){var q=0;for(var r=0;r<a.length;r++){var s=a[r];if(s.percent||(s.percent=c-q),k((s.percent+q)*f,n)){p.call(s);break}q+=s.percent}}};return n});
