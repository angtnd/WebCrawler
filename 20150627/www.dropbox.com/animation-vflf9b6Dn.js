// Generated by CoffeeScript 1.7.1
define(['jquery'], function($j) {
  var Animation;
  return Animation = (function() {
    function Animation(_arg) {
      this.id = _arg.id, this.animationQueue = _arg.animationQueue;
      this.$el = $j("#" + this.id);
      this.$strip = this.$el.find('.animator-strip');
      this.imageLoadCount = 0;
      this.animationQueue = (function() {
        return $j.grep(arguments[0], function(n) {
          return n !== "" && n !== null;
        });
      })(this.animationQueue);
      this.imagesInit();
      this.$strip.on('webkitAnimationEnd mozAnimationEnd MSAnimationEnd OAnimationEnd animationend', this.onAnimationEnd);
    }

    Animation.prototype.onAnimationEnd = function(event) {
      $j(this).removeClass('intro-animation').addClass('loop-animation');
      return true;
    };

    Animation.prototype.setAnimationLoadClass = function() {
      var loadedClass;
      this.imageLoadCount++;
      loadedClass = 'loop-animation';
      if (this.animationQueue.length === 2) {
        loadedClass = 'intro-animation';
      }
      if (this.imageLoadCount === this.animationQueue.length) {
        return this.$strip.addClass('loaded ' + loadedClass);
      }
    };

    Animation.prototype.imagesInit = function() {
      var that;
      that = this;
      return this.$strip.find('img').each(function(index, element) {
        if ($j(element).prop('complete')) {
          return that.setAnimationLoadClass();
        } else {
          return $j(element).load(that.setAnimationLoadClass());
        }
      });
    };

    return Animation;

  })();
});

//# sourceMappingURL=animation.map
