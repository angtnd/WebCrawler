window.nova_init_hook_main_login_status=function(){};var loadScript=function(e,t,i){var r=document.createElement("script"),o=document.getElementsByTagName("head")[0];r.type="text/javascript",r.src=e,r.onload=r.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(t&&"function"==typeof t&&t(),i&&o.removeChild(r))},o.appendChild(r)},cmsModuleHtmlCallback=function(e,t){var i=YOUKU_HOME;if(e&&t){var r=i.STATUS_AREA["m_"+e]||"middle";i.Dom_appendModule(jQuery(t),r),toTop.getOnTop()}},toTop={MAXCOUNT_TOTOP:3,STEP_ANI:200,isAni:!0,$btns:null,$box:null,$dragmodules:null,$modulesOnTop:null,slideTimer:400,aniTimer:void 0,boxOffset:null,firstOffset:null,unitHeight:150,ClassRowIndex:"yk-row-index dragmodule",ClassOnTop:"dragmodule-top",ID_ORIGIN:"_origin",init:function(e){var t=this;t.isAni="boolean"==typeof e?e:!0,t.$box=jQuery(".s-body .yk-con"),t.$box.css("position","relative"),t.getOnTop()},getOnTop:function(){var e=this;e.$dragmodules=e.$box.find(".dragmodule").parent(),e.$btns=e.$dragmodules.find(".act-list .item-totop"),e.$dragmodules.removeClass(e.ClassOnTop),e.$modulesOnTop=jQuery("."+e.ClassOnTop).parent(),e.firstOffset=YOUKU_HOME.$drawer_top8.position().top+YOUKU_HOME.$drawer_top8.height(),YOUKU_HOME.$drawer_subscribe&&0!==YOUKU_HOME.$drawer_subscribe.length&&(e.firstOffset=YOUKU_HOME.$drawer_subscribe.position().top+YOUKU_HOME.$drawer_subscribe.height()),e.bindAct()},bindAct:function(){var e=this;e.$btns.html("ç½®é¡¶"),e.$modulesOnTop.find(".act-list .item-totop").html("åæ¶ç½®é¡¶"),YOUKU_HOME.LOGINSTATUS?(e.$btns.unbind("click").click(e.toTopDriver),e.$modulesOnTop.find(".act-list .item-totop").unbind("click").click(e.cancelTopDriver)):e.$btns.unbind("click").bind("click",YOUKU_HOME.Act_mylogin)},toTopDriver:function(e){var t=toTop,i=e||window.event;i.preventDefault&&(i.preventDefault(),i.stopPropagation());var r=jQuery(i.target);jQuery(".yk-drawer-act").removeClass("yk-drawer-act-hover"),YOUKU_HOME.LOGINSTATUS?t.toTopAct(r):YOUKU_HOME.mylogin()},cancelTopDriver:function(e){var t=toTop,i=e||window.event;i.preventDefault&&(i.preventDefault(),i.stopPropagation());var r=jQuery(i.target);jQuery(".yk-drawer-act").removeClass("yk-drawer-act-hover"),YOUKU_HOME.LOGINSTATUS?t.cancelTopAct(r,!0):YOUKU_HOME.Act_mylogin()},toTopAct:function(e){var t=toTop,i=e.parents(".dragmodule").parent(),r=YOUKU_HOME.$drawer_subscribe||YOUKU_HOME.$drawer_top8,o=t.firstOffset,a=i.attr("id"),n=i.height(),d=i.width(),s=parseInt(i.css("margin-bottom").split("px")[0]),c=i.position();t.getOnTop();var l=0===jQuery("#"+a+t.ID_ORIGIN).length?jQuery("<div></div>").attr("id",a+t.ID_ORIGIN):jQuery("#"+a+t.ID_ORIGIN);if(YOUKU_HOME.isIE||!t.isAni)return l.insertBefore(i).hide(),e.parents(".dragmodule").addClass(t.ClassOnTop),i.insertAfter(r),t.getOnTop(),void YOUKU_HOME.Post_personalData({mod_id:a,action:"top_mod"});if(Math.abs(c.top-o)<t.STEP_ANI)l.insertBefore(i).hide(),i.insertAfter(r),e.parents(".dragmodule").addClass(t.ClassOnTop),t.getOnTop();else{var u=i.clone().css({position:"absolute",top:c.top+"px",width:d+"px",height:n+"px",zIndex:200,display:"none"}).appendTo(t.$box);t.aniTimer=t.slideTimer*Math.round((c.top-t.firstOffset)/t.unitHeight),t.aniTimer>800&&(t.aniTimer=800),e.parents(".dragmodule").addClass(t.ClassOnTop),l.css({height:n+s+"px",marginBottom:0,width:d+"px",overflow:"hidden",visibility:"hidden"}).insertBefore(i),i.css({height:0,marginBottom:0,opacity:0}).insertAfter(r),t.getOnTop(),YOUKU_HOME.Post_personalData({mod_id:a,action:"top_mod"}),l.animate({height:0},t.slideTimer,function(){jQuery(this).css({visibility:"hidden",display:"none"})}),i.animate({height:n+s+"px",opacity:1},t.slideTimer,function(){jQuery(this).css({height:n+"px",marginBottom:s+"px"})}),u.css({display:"block",opacity:1}).animate({opacity:.2,top:o+"px"},t.aniTimer,function(){jQuery(this).remove()})}},cancelTopAct:function(e,t){var i,r,o=toTop,a=e.parents(".dragmodule").parent(),n=a.attr("id"),d=jQuery("#"+n+o.ID_ORIGIN);t&&YOUKU_HOME.Post_personalData({mod_id:n,action:"ctop_mod"}),e.parents(".dragmodule").removeClass(o.ClassOnTop),i=0!==d.length?jQuery(d.prevAll(":visible")[0]):YOUKU_HOME.$drawer_hidden.prev(),r=i.position().top+i.height()-a.height();var s=a.height(),c=a.width(),l=parseInt(a.css("margin-bottom").split("px")[0]),u=a.position();if(YOUKU_HOME.isIE||!o.isAni){a.insertAfter(i);try{d.remove()}catch(_){}return void o.getOnTop()}if(Math.abs(u.top-r)<o.STEP_ANI)a.insertAfter(i),o.getOnTop();else{var m=a.clone().attr("id",n+"_clone").css({position:"absolute",top:u.top+"px",width:c+"px",height:s+"px",zIndex:200,display:"none"}).appendTo(o.$box);o.$box.css("position","relative"),o.aniTimer=o.slideTimer*Math.round(Math.abs((u.top-r)/o.unitHeight)),o.aniTimer>800&&(o.aniTimer=800);var p=jQuery("<div></div>").css({height:s+l+"px",marginBottom:0,width:c+"px",overflow:"hidden",visibility:"hidden"}).insertAfter(a);a.css({height:0}).insertAfter(i),p.animate({height:0},o.slideTimer,function(){jQuery(this).remove()}),a.animate({height:s+"px",marginBottom:l+"px"},o.slideTimer,function(){d.remove(),o.getOnTop()}),m.css({display:"block",opacity:1}).animate({opacity:.2,top:r+"px"},o.aniTimer,function(){jQuery(this).remove()})}}},YOUKU_HOME={UA:null,MAXTIMER:3e3,MAXTIMER_GETSUBREC:2e3,MAXCOUNT_GETSUBREC:3,MAXCOUNT_GETSUB:3,MAXCOUNT_POSTPERSONAL:3,MAXCOUNT_TOTOP:3,REG_ID:"20",REGEXP_ID:null,REG_QUATE:new RegExp("&amp;","g"),URL_JQUERY:"http://static.youku.com/js/jquery.js",URL_HSLIDER:"http://r3.ykimg.com/05100000551D0EC26737B363E00BE98B.js?hslider",URL_GETPERSONAL:"http://www.youku.com/index/personal/fun_getCloudData?cloudvar=",URL_SETPERSONAL:"http://www.youku.com/index/personal/fun_changeCloudData?",URL_GETSUBSCRIBE:"http://www.youku.com/index/getUserFeedsForIndexMix",URL_GETSUBSCRIBEREC:"http://ykrec.youku.com/uploader/packed/list.json",URL_GETMODULE:"http://module.youku.com/",URL_GETRECOMMEND:"http://ykrec.youku.com/personal/packed/list.json",URL_GETUSERINFO:"http://nc.youku.com/index/getUserinfo",URL_GETSUBVLINK:" http://nc.youku.com/index_playWaitLogPage",URL_GETFRIENDSHIPS:"http://yws.youku.com/friendships/js_show.json",VAR_GETPERSONAL_ALL:"all",VAR_GETPERSONAL_CUSTOM:"customized",VAR_GETPERSONAL_TOP:"top",VAR_GETPERSONAL_HIDE:"hide",VAR_NUM_SUBRECUSER:20,VAR_NUM_SUBRECVIDEO:10,VAR_NUM_SUBRECMOREUSER:5,VAR_HEIGHT_SUBINIT:105,VAR_TRYFREQUENCY:300,ID_DRAWERSUB:"yk-slide-u-subscribe",ID_DRAWERSUBREC:"",ID_AD_BOTTOM:"m_206045",ID_DRAWER_HIDDEN:"m_206263",ID_TOP8:"m_205805",CLASS_DRAWER_HIDDEN:"yk-drawer-hidden",CLASS_ON_TOP:"dragmodule-top",CLASS_HIDDEN_SHOW:"yk-drawer-hidden-show",LOGINSTATUS:!1,COUNT_GETSUBREC:0,COUNT_GETSUB:0,COUNT_POSTPERSONAL:0,STATUS_AREA:{},isIE:!1,isSubRecInited:!1,isHiddenInited:!1,isLazyLoaded:!1,cookieUid:"",cookieYsuid:"",loadingstyle:"position:fixed;_position:absolute;z-index: 9999;width: 100%;height:100%;top: 0;margin-top:550px;background:#fff;",loadingicon:"<i class='ico-loading-64'></i>",prestyleStr:"body{height:100%;overflow:hidden;overflow-y:scroll;} .s-body .s-main .yk-con > div{height: 0;overflow:hidden;} #m_205805{height: auto;} ",sidestyle:"",$body:{},$drawers:{},$drawer_top8:{},$drawer_subscribe:"",$drawer_subscribeRec:"",$drawer_hidden:"",$drawer_ad_bottom:{},$dom_subRecBox:{},$dom_subRecLoading:{},$dom_subRecShowmore:{},$dom_act_totophide:{},dom_docHead:null,dom_docBody:null,arr_customized:[],arr_hidden:[],arr_top:[],arr_dom_append:[],arr_subRecU:[],arr_extraChannel:["m_206624","m_206229","m_206184","m_206234","m_206237","m_206240","m_206243","m_206246","m_206249","m_206252","m_206255","m_206268","m_206272","m_206275","m_206278","m_206281","m_206284","m_206287","m_206290","m_206293","m_206296","m_206299"],arr_sub_followed:[],data_subRec:[],var_end_subRec:0,var_start_subRec:0,prevScrollTop:0,preinit:function(){var e=YOUKU_HOME;document.body.scrolltop=0,e.LOGINSTATUS=islogin(),e.UA=e.Util_getUA(),e.isIE=e.UA.ie&&parseInt(e.UA.ie)<10,e.LOGINSTATUS&&(e.prestyle=document.createElement("style"),e.loading=document.createElement("div"),e.dom_docBody=document.body,e.isIE?(e.prestyle.type="text/css",e.dom_docHead=document.getElementsByTagName("head")[0],e.prestyle&&e.prestyle.styleSheet&&(e.prestyle.styleSheet.cssText=e.prestyleStr)):(e.dom_docHead=document.head,e.prestyle.innerHTML=e.prestyleStr),e.loading.innerHTML=e.loadingicon,e.loading.style.cssText=e.loadingstyle,e.dom_docHead.appendChild(e.prestyle),e.dom_docBody.appendChild(e.loading)),"undefined"==typeof window.jQuery?loadScript(e.URL_JQUERY,function(){jQuery.noConflict(),jQuery(document).ready(function(){e.init()})}):(jQuery.noConflict(),jQuery(document).ready(function(){e.init()}))},enableCookie:function(){jQuery.extend({cookie:function(e,t,i){if("undefined"==typeof t){var r=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),a=0;a<o.length;a++){var n=jQuery.trim(o[a]);if(n.substring(0,e.length+1)==e+"="){r=decodeURIComponent(n.substring(e.length+1));break}}return r}i=i||{},null===t&&(t="",i.expires=-1);var d="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var s;"number"==typeof i.expires?(s=new Date,s.setTime(s.getTime()+24*i.expires*60*60*1e3)):s=i.expires,d=";expires="+s.toUTCString()}var c=i.path?";path="+i.path:"",l=i.domain?";domain="+i.domain:"",u=i.secure?";secure":"";document.cookie=[e,"=",encodeURIComponent(t),d,c,l,u].join("")}})},init:function(){var e=YOUKU_HOME;document.body.scrolltop=0,window.update_login_status_hook_ykhome=function(){islogin()&&location.reload()},e.enableCookie(),e.$body=jQuery(".s-body .s-main .yk-con"),e.$drawer_top8=jQuery("#"+e.ID_TOP8),e.$drawer_hidden=jQuery("#"+e.ID_DRAWER_HIDDEN),e.$drawer_ad_bottom=jQuery("#"+e.ID_AD_BOTTOM),e.cookieUid=get_username("all").userid,e.cookieYsuid=jQuery.cookie("__ysuid"),e.LOGINSTATUS?e.Get_personalData():e.Dom_generateHiddenDrawer(),e.Dom_generateSubscribeRecDrawer(),e.Bind_global()},Bind_global:function(){var e,t,i=YOUKU_HOME,r=document.documentElement?document.documentElement.clientWidth:document.body.clientWidth,o=jQuery(document);i.$drawers=i.$body.find(">div[name=m_pos]:visible"),jQuery("body").on("click",i.Act_hideAllPanel),jQuery(window).scroll(function(){var a=o.scrollTop();i.isHiddenInited||(e=i.$drawer_hidden.offset().top,r>=e-a&&(i.Dom_generateHiddenDrawer(),i.isHiddenInited=!0)),i.isSubRecInited||(t=i.$drawer_subscribeRec.offset().top,r>=t-a&&(i.Dom_fillSubscribeRecDrawer(),i.Get_subscribeRec(!0),i.isSubRecInited=!0)),i.LOGINSTATUS&&(a-i.prevScrollTop>=150||!i.isLazyLoaded)&&(i.prevScrollTop=a,jQuery.each(i.$drawers,function(e,t){var o=jQuery(t);if(0!==o.length&&!o.attr("lazy-loaded")){var a=o.offset().top;jQuery(document).scrollTop()+r>=a&&i.Util_showLazyImg(o)}}))}),i.Bind_drawerAct(),i.Bind_addChannelAct(),toTop.init()},Bind_subRecAct:function(){var e=YOUKU_HOME,t="rec-act-sub-done";e.$dom_subRecShowmore.bind("click",function(t){var i=t||window.event;i.preventDefault&&(i.preventDefault(),i.stopPropagation()),e.Act_showMoreSubRec()}),e.$drawer_subscribeRec.on("click",".rec-act-sub",function(){var i=jQuery(this),r=jQuery(this).attr("rec_id");if(!i.hasClass(t))try{{QUcenter.follow(r,"13-3",function(o){if(1===o||2===o||1001===o||1002===o){if("undefined"!=typeof sidebar)try{sidebar.isExistInRecList(r),e.isIE||e.Ani_flyToSidebar(i)}catch(a){}i.addClass(t),i.html("å·²è®¢é")}else-2===o?e.Act_mylogin():-3===o&&e.Act_mylogin({type:"zhundingyue",uaction:"login",callBack:function(){}})})}}catch(o){}})},Bind_addChannelAct:function(){var e=YOUKU_HOME;e.$drawer_hidden.on("click",".hidden-hint",function(){e.Act_toggleAddChannel()}).on("click",".hidden-item",function(){var t=jQuery(this);if(!e.LOGINSTATUS)return void e.Act_mylogin();var i=t.attr("mod_id");0!==jQuery("#"+i).length?e.Dom_showModule(jQuery("#"+i),!0):(e.STATUS_AREA[i]="middle",e.Get_singleModule(i)),e.Post_personalData({mod_id:i,action:"add_mod"});var r=jQuery.inArray(i,e.arr_hidden),o=jQuery.inArray(i,e.arr_extraChannel);-1!==r&&e.arr_hidden.splice(r,1),-1!==o&&e.arr_extraChannel.splice(o,1),e.Dom_generateHiddenDrawer()})},Bind_drawerAct:function(){var e=YOUKU_HOME;e.$dom_act_totophide=jQuery(".yk-drawer-act"),e.$body.on("click",".yk-drawer .yk-drawer-act",e.Act_showDrawerAct).on("click",".yk-drawer-act .act-list .item-hide",e.Act_hideModule)},Act_hideAllPanel:function(){jQuery(".yk-drawer-act").removeClass("yk-drawer-act-hover"),jQuery(".yk-header .dropdown").removeClass("dropdown-open")},Act_toggleAddChannel:function(){var e=YOUKU_HOME,t=e.$drawer_hidden.find(".act-hide"),i=e.$drawer_hidden.find(".hidden-list");e.$drawer_hidden.hasClass(e.CLASS_HIDDEN_SHOW)?(e.isIE&&(i.hide(),t.html("å±å¼"),e.$drawer_hidden.removeClass(e.CLASS_HIDDEN_SHOW)),i.slideUp(300,function(){t.html("å±å¼"),e.$drawer_hidden.removeClass(e.CLASS_HIDDEN_SHOW)})):(e.isIE&&(i.show(),t.html("æ¶èµ·"),e.$drawer_hidden.addClass(e.CLASS_HIDDEN_SHOW)),i.slideDown(300,function(){t.html("æ¶èµ·"),e.$drawer_hidden.addClass(e.CLASS_HIDDEN_SHOW)}))},Act_hideModule:function(){var e=YOUKU_HOME;if(e.LOGINSTATUS){var t,i=jQuery(this).parents(".yk-drawer").parent(),r=jQuery(this).parents(".yk-drawer").attr("data-cname"),o=jQuery("<div></div>"),a=i.attr("id");YOUKU_HOME.Post_personalData({mod_id:a,action:"hide_mod"}),jQuery(".yk-row-hidden").length&&(e.isIE?jQuery(".yk-row-hidden").remove():jQuery(".yk-row-hidden").slideUp(500,function(){jQuery(this).remove()})),o.addClass("yk-row-hidden").append('<span class="ico-notice"></span><span class="hidden-title hideModName">'+r+'</span><span>å·²éèï¼</span><span class="cancel-hide-txt undoHidden">æ¤é</span><span class="hidden-btn"></span>'),e.isIE?(i.after(o).hide(),toTop.getOnTop(),o.show(),t=setTimeout(function(){o.remove()},1e4)):(i.after(o).slideUp(500,function(){toTop.getOnTop()}),o.slideDown(300,function(){var e=jQuery(this);t=setTimeout(function(){e.slideUp(500,function(){jQuery(this).remove()})},1e4)})),o.on("click",".undoHidden",function(){e.isIE?(i.show(),YOUKU_HOME.Post_personalData({mod_id:a,action:"add_mod"}),toTop.getOnTop(),e.Dom_generateHiddenDrawer(),o.remove(),clearTimeout(t)):(i.slideDown(500,function(){YOUKU_HOME.Post_personalData({mod_id:a,action:"add_mod"}),toTop.getOnTop(),e.Dom_generateHiddenDrawer()}),o.fadeOut(300),clearTimeout(t))}),o.on("click",".hidden-btn",function(){e.isIE?(o.remove(),clearTimeout(t)):(o.slideUp(500,function(){jQuery(this).remove()}),clearTimeout(t))})}else e.Act_mylogin()},Act_showDrawerAct:function(e){var t=YOUKU_HOME,i="yk-drawer-act-hover",r=!1,o=e||window.event;o.preventDefault&&(o.preventDefault(),o.stopPropagation()),jQuery(this).hasClass(i)&&(r=!0),t.Act_hideAllPanel(),r?jQuery(this).removeClass(i):jQuery(this).addClass(i),jQuery(this).find(".act-list .act-item").attr("data-stat-role","ck")},Act_showMoreSubRec:function(){var e,t=YOUKU_HOME;for(t.var_end_subRec>=t.data_subRec.length&&t.$dom_subRecShowmore.hide(),e=t.var_start_subRec;e<t.var_end_subRec;e++)try{t.Dom_generateSubscribeRecU(t.data_subRec[e]);{jQuery(".yk-slide-rec").attr("id")}jQuery.each(jQuery(".yk-slide-rec"),function(){var e=jQuery(this).attr("id");t.Dom_generateSlider(e)})}catch(i){continue}t.var_end_subRec<t.data_subRec.length-1&&(t.var_start_subRec=t.var_end_subRec,t.var_end_subRec+=5)},Act_mylogin:function(e){try{e&&e.type?login(e):login()}catch(t){}},Dom_showAll:function(e){var t=YOUKU_HOME;jQuery.contains(t.dom_docHead,t.prestyle)&&(t.dom_docHead.removeChild(t.prestyle),t.loading.style.display="none"),e&&"function"==typeof e&&e()},Dom_appendModule:function(e,t){var i=YOUKU_HOME,r=e;switch(t){case"top":r.insertAfter(0!==i.$drawer_subscribe.length?i.$drawer_subscribe:i.$drawer_top8),r.find(".dragmodule").addClass("dragmodule-top");break;case"bottom":0!==i.$drawer_ad_bottom.length?r.insertBefore(i.$drawer_ad_bottom):r.appendTo(i.$body);break;case"middle":r.insertBefore(i.$drawer_hidden)}},Dom_hideModule:function(e,t){var i=YOUKU_HOME,t=t||!1;!t||i.isIE?e.hide():e.slideUp()},Dom_showModule:function(e,t){var i=YOUKU_HOME,t=t||!1;!t||i.isIE?e.show():e.slideDown()},Get_singleModule:function(e){var t=YOUKU_HOME,i=e&&e.split("_")[1],r=t.URL_GETMODULE+i+".html";jQuery.getScript(r)},Get_personalData:function(){var e=this,t=e.URL_GETPERSONAL+e.VAR_GETPERSONAL_ALL;try{jQuery.ajax({type:"get",async:!1,url:t,timeout:e.MAXTIMER,dataType:"jsonp",success:function(t){return t&&0!==t.length?void e.Deal_personalAll(t):void e.Dom_showAll(e.Get_async)},error:function(){e.Dom_showAll(e.Get_async)}})}catch(i){e.Dom_showAll(e.Get_async)}},Get_subscribeRec:function(e){var t=this,i="",r=t.VAR_NUM_SUBRECUSER;i=t.LOGINSTATUS?t.URL_GETSUBSCRIBEREC+"?picSize=2&apptype=1&pg=8&module=7&pl="+r+"&il="+t.VAR_NUM_SUBRECVIDEO+"&uid="+t.cookieUid+"&guid="+t.cookieYsuid:t.URL_GETSUBSCRIBEREC+"?picSize=2&apptype=1&pg=8&module=7&pl="+r+"&il="+t.VAR_NUM_SUBRECVIDEO+"&guid="+t.cookieYsuid,t.$dom_subRecLoading.show(),t.$dom_subRecShowmore.hide();try{jQuery.ajax({type:"get",async:!1,url:i,timeout:t.MAXTIMER_GETSUBREC,dataType:"jsonp",success:function(i){i&&0!==i.data.length?"undefined"==typeof hslider?jQuery.getScript(YOUKU_HOME.URL_HSLIDER,function(){t.Deal_subscribeRec(i,!0)}):t.Deal_subscribeRec(i,!0):e&&(t.$drawer_subscribeRec.hide(),t.isSubRecInited=!0),t.$dom_subRecLoading.hide(),t.$dom_subRecShowmore.show()},error:function(){t.COUNT_GETSUBREC<t.MAXCOUNT_GETSUBREC?(t.COUNT_GETSUBREC++,t.Get_subscribeRec(e)):e&&(t.$drawer_subscribeRec.hide(),t.isSubRecInited=!0)}})}catch(o){t.COUNT_GETSUBREC<t.MAXCOUNT_GETSUBREC?(t.COUNT_GETSUBREC++,t.Get_subscribeRec(e)):(t.$drawer_subscribeRec.hide(),e&&(t.isSubRecInited=!0))}},Get_friendships:function(){var e=this,t=e.URL_GETFRIENDSHIPS+"?source_uid="+encodeUid(e.cookieUid)+'&target_array_uid=["'+e.arr_subRecU.join('","')+'"]';try{jQuery.ajax({type:"get",async:!1,url:t,dataType:"jsonp",success:function(e){var t=YOUKU_HOME,i=e&&e.target;jQuery.each(i,function(e,i){i&&i.followed&&t.arr_sub_followed.push(i.id)}),t.Act_showMoreSubRec()},error:function(){e.Act_showMoreSubRec()}})}catch(i){}},Get_async:function(){},Deal_personalAll:function(e){var t,i=this,r=e||void 0;return"object"!=typeof r?!1:(i.Deal_personalTop(r.top_module_list),i.Deal_personalCustom(r.customized_module_list),i.Deal_personalHide(r.hide_module_list),t=i.arr_customized.length,0!==i.arr_hidden.length&&jQuery.each(i.arr_hidden,function(e,t){jQuery("#"+t).hide()}),0!==i.arr_top.length&&(i.arr_top.reverse(),jQuery.each(i.arr_top,function(e,t){var r=jQuery.inArray(t,i.arr_extraChannel);-1!==r&&i.arr_extraChannel.splice(r,1);var o=jQuery("#"+t);if(0!==o.length){var a=o.attr("id"),n=jQuery("#"+a+"_origin");0===n.length&&(n=jQuery("<div></div>").attr("id",a+"_origin")),n.insertAfter(o),i.Dom_appendModule(o,"top"),i.Util_showLazyImg(o)}else i.STATUS_AREA[t]="top",i.Get_singleModule(t)}),toTop.getOnTop()),i.Dom_generateHiddenDrawer(),i.Dom_showAll(i.Get_async),void(0!==t&&jQuery.each(i.arr_customized,function(e,r){var o=jQuery.inArray(r,i.arr_extraChannel);-1!==o&&i.arr_extraChannel.splice(o,1),0!==jQuery("#"+r).length?(i.Dom_showModule(jQuery("#"+r),!1),t--):(i.STATUS_AREA[r]="middle",i.Get_singleModule(r))})))},Deal_personalCustom:function(e){var t=this,i=e||void 0;"object"==typeof i&&jQuery.each(i.mod_data,function(e,i){i&&i.id&&t.Util_idRegCheck(i.id)&&(_index=jQuery.inArray("m_"+i.id,t.arr_top),-1===_index&&t.arr_customized.push("m_"+i.id))})},Deal_personalTop:function(e){var t=this,i=e||void 0;"object"==typeof i&&jQuery.each(i.mod_data,function(e,i){i&&i.id&&t.Util_idRegCheck(i.id)&&t.arr_top.push("m_"+i.id)})},Deal_personalHide:function(e){var t=this,i=e||void 0;return"undefined"==typeof i?!1:void jQuery.each(i.mod_data,function(e,i){if(i&&i.id&&t.Util_idRegCheck(i.id)){var r=jQuery.inArray("m_"+i.id,t.arr_extraChannel);-1===r&&t.arr_hidden.push("m_"+i.id);var o=jQuery.inArray("m_"+i.id,t.arr_customized);-1!==o&&t.arr_customized.splice(o,1);var a=jQuery.inArray("m_"+i.id,t.arr_top);-1!==a&&t.arr_top.splice(a,1)}})},Deal_subscribeRec:function(e,t){var i=YOUKU_HOME,r=e&&e.data||void 0;if("undefined"==typeof r)return!1;var o=t||!1;i.data_subRec=r;r.length;jQuery.each(r,function(e,t){var r=encodeUid(t.id);-1===jQuery.inArray(r,i.arr_subRecU)&&i.arr_subRecU.push(r)}),o&&(i.var_start_subRec=0,i.var_end_subRec=3),i.LOGINSTATUS?i.Get_friendships():i.Act_showMoreSubRec();jQuery(".yk-slide-rec").attr("id");jQuery.each(jQuery(".yk-slide-rec"),function(){var e=jQuery(this).attr("id");i.Dom_generateSlider(e)}),i.Bind_subRecAct()},Post_personalData:function(e){var t=this,i=e.mod_type||"module",r=e.mod_id&&e.mod_id.split("_")[1],o=t.URL_SETPERSONAL+"action="+e.action+"&mod_id="+r+"&mod_type="+i;try{jQuery.ajax({type:"get",async:!1,url:o,timeout:t.MAXTIMER,dataType:"jsonp",success:function(i){if(1===i.code)switch(e.action){case"top_mod":var r=toTop.$modulesOnTop.length;if(r>=t.MAXCOUNT_TOTOP){var o=jQuery(toTop.$modulesOnTop[r-1]).find(".act-list .item-totop");toTop.cancelTopAct(o,!1)}break;case"hide_mod":var a=jQuery.inArray(e.mod_id,t.arr_hidden);-1===a&&(t.arr_hidden.push(e.mod_id),t.Dom_generateHiddenDrawer());break;case"add_mod":var a=jQuery.inArray(e.mod_id,t.arr_hidden);-1!==a&&(t.arr_hidden.splice(a,1),t.Dom_generateHiddenDrawer())}else if(-2===i.code){var r=toTop.$modulesOnTop.length;if(r>t.MAXCOUNT_TOTOP){var o=jQuery(toTop.$modulesOnTop[r-1]).find(".act-list .item-totop");toTop.cancelTopAct(o,!1)}}},error:function(){t.COUNT_POSTPERSONAL<t.MAXCOUNT_POSTPERSONAL&&(t.COUNT_POSTPERSONAL++,t.Post_personalData(e))}})}catch(a){t.COUNT_POSTPERSONAL<t.MAXCOUNT_POSTPERSONAL&&(this.COUNT_POSTPERSONAL++,t.Post_personalData(e))}},Dom_generateHiddenDrawer:function(){var e=this;if(e.LOGINSTATUS){var t=e.arr_hidden.concat(e.arr_extraChannel),i=[];jQuery.each(t,function(e,t){-1===jQuery.inArray(t,i)&&i.push(t)}),e.$drawer_hidden.find(".hidden-num").html(i.length),e.$drawer_hidden.find(".hidden-item").hide(),0!==i.length?(e.$drawer_hidden.show(),jQuery.each(t,function(t,i){e.$drawer_hidden.find(".hidden-item[mod_id="+i+"]").show()})):(e.$drawer_hidden.hide(),e.$drawer_hidden.find(".hidden-list").hide(),e.$drawer_hidden.find(".hidden-num").html("0"),e.$drawer_hidden.find(".act-hide").html("å±å¼"),e.$drawer_hidden.removeClass(e.CLASS_HIDDEN_SHOW))}else e.$drawer_hidden.find(".hidden-num").html(e.arr_extraChannel.length),jQuery.each(e.arr_extraChannel,function(t,i){e.$drawer_hidden.find(".hidden-item[mod_id="+i+"]").show()})},Dom_generateSubscribeRecDrawer:function(){var e=this;e.$drawer_subscribeRec+="<div class='yk-row-index yk-drawer yk-drawer-rec-subscribe'>",e.$drawer_subscribeRec+="</div>",e.$drawer_subscribeRec=jQuery(e.$drawer_subscribeRec),e.Dom_appendModule(e.$drawer_subscribeRec,"bottom"),e.$drawer_subscribeRec.css({height:0,visibility:"hidden"})},Dom_fillSubscribeRecDrawer:function(){var e=this,t="";t+="<div class='yk-row'>",t+="<div class='yk-w970-col18 yk-w1190-col22  yk-v-190u'>",t+="<div class='yk-box yk-drawer-box'>",t+="<div class='yk-head'>",t+="<div class='yk-title'>",t+="<p class='rec-title'>",t+="<span class='uhome-ico uhome-ico-subrec'></span>",t+="<span class='rec-tag'>æ¨è</span>æ ¹æ®ä½ çåå¥½ä¸ºä½ æ¨è",t+="</p>",t+="</div>",t+="</div>",t+="<div class='yk-body yk-rec-container'>",t+="<i class='yk-rec-loading ico-loading-64'></i>",t+="</div>",t+="</div>",t+="<div class='yk-box yk-drawer-showmore' data-stat-role='ck'>",t+="<p class='act-showmore'>å è½½æ´å¤</p>",t+="</div>",t+="</div>",t+="</div>",e.$drawer_subscribeRec.html(t),e.$drawer_subscribeRec.css({visibility:"visible",height:"auto"}),e.$dom_subRecBo=e.$drawer_subscribeRec.find(".yk-rec-container"),e.$dom_subRecLoading=e.$drawer_subscribeRec.find(".yk-rec-loading"),e.$dom_subRecShowmore=e.$drawer_subscribeRec.find(".yk-drawer-showmore")},Dom_generateSubscribeRecU:function(e){var t=YOUKU_HOME;if(e){var i="yk-slide-rec-"+Math.abs((new Date).getTime()^Math.random()),r="",o=e.username,a=e.spaceUrl,n=t.Util_formater(e.followersCount,"number");r+="<div class='yk-box yk-box-rec-u'>",r+="<div class='yk-head'>",r+="<div class='yk-title'>",r+="<a class='yk-drawer-title' target='_blank' href='"+e.spaceUrl+"'>",r+="<img src='"+e.picUrl+"' >"+e.username,r+="</a>",r+="</div>",r+="<div class='yk-extend'>",r+="<div class='rec-status-subnum'>"+n+"å·²è®¢<i class='uhome-ico uhome-ico-arrow-right'></i></div>",r+=t.LOGINSTATUS&&-1!==jQuery.inArray(encodeUid(e.id),t.arr_sub_followed)?"<div class='rec-act-sub rec-act-sub-done' rec_id="+encodeUid(e.id)+"> å·²è®¢é</div>":"<div class='rec-act-sub' rec_id="+encodeUid(e.id)+"> <i class='uhome-ico uhome-ico-sub-mini'></i>è®¢é</div>",r+="</div>",r+="</div>",r+="<div class='yk-body'>",r+="<div class='yk-slide yk-slide-v3 yk-slide-new yk-slide-rec' id='"+i+"'>",r+="<div class='yk-row yk-slide-pages'>",jQuery.each(e.videos,function(e,i){r+=t.Dom_partSubscribeRecV(i,o,a)}),r+="</div>",r+="<div class='yk-slide-btnprev' ><i></i></div><div class='yk-slide-btnnext' ><i></i></div>",r+="</div>",r+="</div>",r+="</div>",r=jQuery(r),r.insertBefore(t.$dom_subRecLoading)}},Dom_partSubscribeRecV:function(e){var t=this,i="",r=t.Util_formater(e.totalTime,"time"),o=t.Util_formater(e.playAmount,"number");return i+="<div class='yk-col4'>",i+="<div class='v'>",i+="<div class='v-thumb'>",i+="<img _src='http://r3.ykimg.com/0515000054BDD28A6737B3471C003B4C' src='"+e.picUrl+"' alt='"+e.title+"'>",i+="<div class='v-thumb-tagrb'><span class='v-time'>"+r+"</span></div>",i+="</div>",i+="<div class='v-link'>",i+="<a href='"+e.playLink+"?from=y1.3-idx-uhome-1519-20887.tj' target='_blank' title='"+e.title+"'></a>",i+="</div>",i+="<div class='v-meta va'>",i+="<div class='v-meta-title'>",i+="<a href='"+e.playLink+"?from=y1.3-idx-uhome-1519-20887.tj' target='_blank' title='"+e.title.replace(t.REG_QUATE,"&")+"'>"+e.title.replace(t.REG_QUATE,"&")+"</a>",i+="</div>",i+="<div class='v-meta-entry'><i class='ico-statplay' title='æ­æ¾'></i>",i+="<span class='v-num'>"+o+"</span>",i+="<span class='v-statcomment'><i class='ico-statcomment'></i>"+YOUKU_HOME.Util_formatNum(e.commentCount)+"</span>",i+="</div>",i+="<div class='v-meta-overlay'></div>",i+="</div>",i+="</div>",i+="</div>"},Dom_generateSlider:function(e){var t=YOUKU_HOME;t.slider_subscribe=new hslider(e)},Util_formater:function(e,t){var i=this,r=t||"number";switch(r){case"number":return i.Util_formatNum(e);case"time":return i.Util_formatTime(e);case"date":return i.Util_formatDate(e)}},Util_formatNum:function(e){var t=e.toString();t=t.split(".")[0],t=t.split(",").join("");var i=t.length;return 4===i?t=t.substr(0,1)+","+t.substr(1):i>4&&7>i?t=(parseInt(t)/1e4).toFixed(1).toString()+"ä¸":7===i?t=(parseInt(t)/1e6).toFixed(1).toString()+"ç¾ä¸":8===i?t=(parseInt(t)/1e7).toFixed(1).toString()+"åä¸":i>8&&(t=(parseInt(t)/1e8).toFixed(1).toString()+"äº¿"),t},Util_formatTime:function(e){var t=e;if(t=t.toString().split(".")[0],t=parseInt(t.toString().split(",").join("")),60>t)t=10>t?"00:0"+t:"00:"+t;else{var i=t/60;if(1===i)t="01:00";else if(i>1&&10>i)t="0"+Math.floor(i)+":"+(t-60*Math.floor(i)<10?"0"+(t-60*Math.floor(i)):t-60*Math.floor(i));else if(i>1&&60>i)t=""+Math.floor(i)+":"+(t-60*Math.floor(i)<10?"0"+(t-60*Math.floor(i)):t-60*Math.floor(i));else if(60===i)t="01:00:00";else if(i>60){var r=t/3600;t=""+Math.floor(r)+":"+(Math.floor(i)-60*Math.floor(r))+":"+(t-60*Math.floor(i)<10?"0"+(t-60*Math.floor(i)):t-60*Math.floor(i))}}return t},Util_idRegCheck:function(e){var t=YOUKU_HOME;return t.REGEXP_ID||(t.REGEXP_ID=new RegExp("^"+t.REG_ID)),t.REGEXP_ID.test(e)},Util_getUA:function(){var e,t={},i=navigator.userAgent.toLowerCase();return(e=i.match(/rv:([\d.]+)\) like gecko/))?t.ie=e[1]:(e=i.match(/msie ([\d.]+)/))?t.ie=e[1]:(e=i.match(/firefox\/([\d.]+)/))?t.firefox=e[1]:(e=i.match(/chrome\/([\d.]+)/))?t.chrome=e[1]:(e=i.match(/opera.([\d.]+)/))?t.opera=e[1]:(e=i.match(/version\/([\d.]+).*safari/))?t.safari=e[1]:0,t},Util_showLazyImg:function(e){var t=YOUKU_HOME;if(e&&0!==e.length)var i=jQuery(e);else var i=t.$body;if(!i.attr("lazy-loaded")){var r=i.find("img");0!==r.length&&jQuery.each(r,function(e,t){var i=jQuery(t).attr("_src");(i||!jQuery(t).attr("src"))&&jQuery(t).attr("src",i)}),i.attr("lazy-loaded",!0)}},Ani_flyToSidebar:function(e){if(e&&0!==e.length){var t=jQuery(e),i=t.parents(".yk-box-rec-u").find(".yk-drawer-title"),r=t.attr("rec_id"),o=(img=i.find("img").attr("src"),i.html().split(">")[1]);sidebar.pageSubFly(t,r,img,o)}}};try{YOUKU_HOME.preinit()}catch(e){YOUKU_HOME.Dom_showAll()}