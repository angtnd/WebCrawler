(function(){if(window.amznJQ){window.RetargetingPixel=initPixel();
amznJQ.declareAvailable("inRetargeting");
}if(window.P){P.register("inRetargeting",initPixel);
}function initPixel(){var pixel={pageStatusFlag:false,checkMyReadyState:null,parse:function(commandArgs){var doc=document,eN=encodeURIComponent,xD="undefined";
var params="";
var baseUrl=doc.location.protocol+"//"+doc.location.host;
var custParams={};
var pixelfirestatus=false;
var pixelfireflag=false;
var segment="";
var currPageUrl=doc.URL;
var level=1;
var divTag="",aTag="",aTags="",liTags="",tTags="",htTxt="",dTags="",hTags="",sub2T="",sub3T="";
var catid="",subcat1id="",subcat2id="",misc1Txt="",pid,ptype;
var pname="",spanTags1="",lp="",image="",oldP="",newP="",misc="";
var i=0;
var pArr=[],count=0;
var visit_cookie="visitCount";
var visits=pixel.getCookieValue(visit_cookie);
if(visits===""){visits=0;
}try{pixel.checkMyReadyState=setInterval(function(){pixel.pageloadStatus();
if(pixel.pageStatusFlag===true){if(pixel.isDetailPage()){divTag=doc.getElementById("ASIN");
if(typeof divTag!==xD&&divTag!==null&&divTag.getAttribute("value")!==null){pid=divTag.getAttribute("value");
}divTag=doc.getElementById("divsinglecolumnminwidth");
if(typeof divTag!==xD&&divTag!==null){dTags=divTag.getElementsByTagName("div");
for(i=0;
i<dTags.length;
i++){if(typeof dTags[i]!==xD&&dTags[i].getAttribute("id")===null&&dTags[i].className==="bucket"){hTags=dTags[i].getElementsByTagName("h2")[0];
if(typeof hTags!==xD&&hTags.innerHTML==="Look for similar items by category"){tTags=dTags[i].getElementsByTagName("a");
aTag=tTags[tTags.length-1];
if(typeof tTags[0]!==xD&&tTags[0]!==null&&tTags[0].innerHTML!==null){htTxt=pixel.trimInend(tTags[0].innerHTML);
if(htTxt==="Electronics"){if(typeof tTags[1]!==xD&&tTags[1]!==null&&tTags[1].innerHTML!==null){catid=pixel.trimInend(tTags[1].innerHTML);
}}else{catid=htTxt;
}}if(typeof aTag!==xD&&aTag!==null&&aTag.innerHTML!==null){sub2T=pixel.decodeAmpersand(pixel.trimInend(aTag.innerHTML));
}liTags=dTags[i].getElementsByTagName("li");
if(typeof liTags!==xD&&liTags!==null){for(var j=0;
j<liTags.length;
j++){custParams["ecomm_ProductCatTree"+j]=liTags[j].textContent||liTags[j].innerText;
var aaTags=liTags[j].getElementsByTagName("a");
if(typeof aaTags!==xD&&aaTags!==null&&aaTags.length>0){custParams["browsernodeid"+j]=pixel.getQueryParamFromUrl("node",aaTags[aaTags.length-1].getAttribute("href"));
}}}break;
}}}}if(catid===""||catid===null){divTag=doc.getElementById("searchDropdownBox");
if(typeof divTag!==xD&&divTag!==null){catid=divTag.options[divTag.selectedIndex].text;
catid=pixel.trimInend(catid);
}}dTags=doc.getElementById("handleBuy");
if(typeof dTags!==xD&&dTags!==null){divTag=dTags.getElementsByTagName("div");
spanTags1=dTags.getElementsByTagName("span");
aTags=dTags.getElementsByTagName("a");
for(i=0;
i<divTag.length;
i++){if(typeof divTag[i]!==xD&&divTag[i].getAttribute("id")===null&&divTag[i].className==="buying"){hTags=divTag[i].getElementsByTagName("h1")[0];
if(typeof hTags!==xD&&hTags.className==="parseasinTitle"){misc1Txt=divTag[i].innerHTML;
misc1Txt=pixel.trimInEndAndReplaceSpecialChars(misc1Txt,"_");
misc1Txt=misc1Txt.replace(/\s*/g,"");
if(misc1Txt.indexOf("_by_")!==-1){tTags=divTag[i].getElementsByTagName("a");
if(typeof tTags[0]!==xD&&tTags[0]!==null&&tTags[0].innerHTML!==null){sub3T=pixel.decodeAmpersand(pixel.trimInend(tTags[0].innerHTML));
}}break;
}}}for(i=0;
i<spanTags1.length;
i++){if(typeof spanTags1[i]!==xD&&spanTags1[i].getAttribute("id")===null&&spanTags1[i].className==="availGreen"){misc1Txt=spanTags1[i].innerHTML;
misc=pixel.trimInEndAndReplaceSpecialChars(misc1Txt,"");
break;
}}for(i=0;
i<aTags.length;
i++){if(typeof aTags[i]!==xD&&aTags[i].getAttribute("href")!==null&&aTags[i].getAttribute("href").indexOf("/gp/help/seller")>-1){custParams["ecomm_seller"]=aTags[i].textContent||aTags[i].innerText;
break;
}}}spanTags1=doc.getElementById("productTitle");
if(typeof spanTags1!==xD&&spanTags1!==null){pname=spanTags1.innerHTML;
pname=pixel.decodeAmpersand(pixel.trimInEndAndReplaceSpecialChars(pname,""));
}if(currPageUrl.indexOf("?")!==-1){lp=currPageUrl.substring(0,currPageUrl.indexOf("?"));
}else{lp=currPageUrl;
}image=pixel.getImageSource("prodImage");
if(image===""||image===null){image=pixel.getImageSource("main-image");
if(image===""||image===null){divTag=doc.getElementsByTagName("img");
for(i=0;
i<divTag.length;
i++){if(typeof divTag[i]!==xD&&divTag[i].className==="prod_image_selector"){image=divTag[i].getAttribute("src");
break;
}}}}oldP=pixel.getPriceValue("listPriceValue");
newP=pixel.getPriceValue("actualPriceValue");
if(oldP===null||oldP===""){oldP=newP;
}catid=pixel.decodeAmpersand(catid);
subcat1id=catid+"_"+sub2T;
subcat2id=subcat1id+"_"+sub3T;
custParams["ecomm_pagetype"]="ProductDetail";
custParams["ecomm_prodid"]=pid;
custParams["ecomm_price"]=newP.replace(/,/g,"");
custParams["ecomm_pcat"]=catid;
custParams["ecomm_pname"]=pname;
custParams["searchterm"]=pixel.getParamFromQuery("field-keywords",doc.location.search);
if(visits>5&&visits<=10){level=2;
}else{if(visits>10){level=3;
}}segment="e300";
params=params+level+"&param="+segment+"&pid="+pid+"&catid="+eN(eN(catid))+"&subcat1id="+eN(eN(subcat1id))+"&subcat2id="+eN(eN(subcat2id))+"&pname="+eN(eN(pname))+"&lp="+eN(eN(lp))+"&image="+eN(eN(image))+"&old="+oldP+"&new="+newP+"&misc="+eN(eN(misc));
pixelfireflag=true;
}else{if(currPageUrl.indexOf("gp/huc/view.html")!==-1||currPageUrl.indexOf("/gp/product/handle-buy-box/")!==-1){dTags=doc.getElementById("hlb-page-container");
if(typeof dTags!==xD&&dTags!==null){divTag=dTags.getElementsByTagName("a");
for(i=0;
i<divTag.length;
i++){if(typeof divTag[i]!==xD&&divTag[i].className.indexOf("hlb-item-link hlb-asin-")!==-1){pid=divTag[i].className.split("hlb-item-link hlb-asin-")[1];
break;
}}}custParams["ecomm_prodid"]=pid;
custParams["ecomm_pagetype"]="ShoppingCart";
segment="e400";
params=params+level+"&param="+segment+"&pid1="+pid+"&pid2=&pid3=";
pixelfireflag=true;
}else{if(currPageUrl.indexOf("gp/cart")!==-1){dTags=doc.getElementById("activeCartViewForm");
if(typeof dTags!==xD&&dTags!==null){divTag=dTags.getElementsByTagName("div");
count=0;
for(i=0;
i<divTag.length;
i++){if(typeof divTag[i]!==xD&&divTag[i].className==="cart-item"&&divTag[i].getAttribute("asin")!==null){pArr.push(divTag[i].getAttribute("asin"));
custParams["pid"+count]=pArr[count];
count++;
}}}for(i=0;
i<3;
i++){if(typeof pArr[i]===xD){pArr[i]="";
}}segment="e400";
level=2;
custParams["ecomm_pagetype"]="ShoppingCart";
params=params+level+"&param="+segment+"&pid1="+pArr[0]+"&pid2="+pArr[1]+"&pid3="+pArr[2];
pixelfireflag=true;
}else{if(currPageUrl.indexOf("/gp/buy/thankyou/")!==-1&&currPageUrl.indexOf("viewId=ThankYouCart")!==-1){var orderId="";
var queryString=location.search.substring(1);
var decode=function(s){return decodeURIComponent(s.replace(/\+/g," "));
};
if(queryString!==""&&queryString!==null&&queryString.indexOf("&")!==-1){var keyValues=queryString.split("&");
if(keyValues.length>0){for(i=0;
i<keyValues.length;
i++){if(keyValues[i]!==""&&keyValues[i]!==null){var key=keyValues[i].split("=");
if(key.length>1){if(decode(key[0])==="asins"){pArr.push(decode(key[1]));
}else{if(decode(key[0])==="orderId"){orderId=decode(key[1]);
}}}}}}}for(i=0;
i<pArr.length;
i++){custParams["pid"+i]=pArr[i];
}for(i=0;
i<3;
i++){if(typeof pArr[i]===xD){pArr[i]="";
}}custParams["ecomm_pagetype"]="CheckoutThankYou";
custParams["orderid"]=orderId;
segment="e500";
params=params+level+"&param="+segment+"&pid1="+pArr[0]+"&pid2="+pArr[1]+"&pid3="+pArr[2]+"&orderid="+orderId;
pixelfireflag=true;
}else{if(currPageUrl.indexOf("ap/signin")!==-1||currPageUrl.indexOf("ap/register")!==-1||currPageUrl.indexOf("buy/addressselect")!==-1||currPageUrl.indexOf("buy/gift")!==-1||currPageUrl.indexOf("buy/shipoptionselect")!==-1||currPageUrl.indexOf("buy/pipeline")!==-1||currPageUrl.indexOf("buy/spc")!==-1){segment="e400";
level=3;
params=params+level+"&param="+segment;
pixelfireflag=true;
}else{if(currPageUrl.indexOf("/b/ref")!==-1){segment="e200";
params=params+level+"&param="+segment+"&catid=&subcat1id=&subcat2id=";
custParams["ecomm_pagetype"]="Browse";
custParams["ecomm_ProductCatTree"]=pixel.processBreadCrumb();
custParams["browsernodeid"]=pixel.getParamFromQuery("node",doc.location.search);
pixelfireflag=true;
}else{if(currPageUrl.indexOf("/s/ref")!==-1){segment="e200";
params=params+level+"&param="+segment+"&catid=&subcat1id=&subcat2id=";
custParams["ecomm_pagetype"]="Search";
custParams["searchterm"]=pixel.getParamFromQuery("field-keywords",doc.location.search);
custParams["ecomm_ProductCatTree"]="";
dTags=doc.getElementsByClassName("fstRow");
if(typeof dTags!==xD&&dTags!==null&&dTags.length>0){hTags=dTags[0].getElementsByTagName("h3");
if(typeof hTags!==xD&&hTags!==null&&hTags.length>0){aTags=hTags[0].getElementsByTagName("a");
if(typeof aTags!==xD&&aTags!==null&&aTags.length>0){var href=aTags[0].getAttribute("href");
if(typeof href!==xD&&href!==null){href=href.split("/ref")[0];
var hrefSplits=href.split("/dp/");
if(hrefSplits.length>1&&hrefSplits[1].length===10){custParams["ecomm_prodid"]=hrefSplits[1];
}}}}}pixelfireflag=true;
}else{if((window.uept&&window.uept["pageType"]==="Gateway")||currPageUrl===baseUrl||currPageUrl===baseUrl+"/"){custParams["ecomm_pagetype"]="Gateway";
pixelfireflag=true;
segment="e100";
params=params+level+"&param="+segment;
pixelfireflag=true;
}else{segment="e100";
params=params+level+"&param="+segment;
pixelfireflag=true;
}}}}}}}}if(visits!==0){visits=parseInt(visits,10)+1;
pixel.setCookie(visit_cookie,visits,30);
}else{pixel.setCookie(visit_cookie,1,30);
}if(pixelfireflag&&(!(pixelfirestatus))){if(commandArgs.fireGooglePixel&&typeof custParams["ecomm_pagetype"]!==xD){var custParamString=pixel.getGCustomParamString(custParams);
pixel.callGoogleService(custParamString);
}if(commandArgs.fireVizuryPixel){pixel.callVizuryService(params);
}pixelfirestatus=true;
}}},3000,"Javascript");
}catch(error){pixel.callVizuryService("&param=999");
}},isDetailPage:function(){var divTag="";
var eTag=document.getElementById("addToCartSpan");
if(typeof eTag!=="undefined"&&eTag!==null){divTag=document.getElementById("bb_atc_button");
if(typeof divTag!=="undefined"&&divTag!==null&&divTag.getAttribute("alt")==="Add to Shopping Cart"){return true;
}}var url=document.URL;
var urlSplit="",totalLen="";
if(url.indexOf("/ref")!==-1){urlSplit=url.split("/ref")[0];
totalLen=urlSplit.split("/");
if(totalLen[totalLen.length-1].length===10){return true;
}}if(pixel.isASINPresent(url,"dp/")){return true;
}if(pixel.isASINPresent(url,"gp/product/")){return true;
}return false;
},isASINPresent:function(url,marker){var urlSplit="";
if(url.indexOf(marker)!==-1){urlSplit=url.split(marker)[1];
}if(urlSplit.indexOf("/")!==1){urlSplit=urlSplit.split("/")[0];
}if(urlSplit.indexOf("?")!==1){urlSplit=urlSplit.split("?")[0];
}if(urlSplit.length===10){return true;
}return false;
},getGCustomParamString:function(custParams){var pad=function(number){if(number<10){return"0"+number;
}return number;
};
var convertToISOString=function(date){return date.getUTCFullYear()+"-"+pad(date.getUTCMonth()+1)+"-"+pad(date.getUTCDate())+"T"+pad(date.getUTCHours())+":"+pad(date.getUTCMinutes())+":"+pad(date.getUTCSeconds())+"."+(date.getUTCMilliseconds()/1000).toFixed(3).slice(2,5)+"Z";
};
var d=new Date();
custParams["CURRENT_TIME"]=Date.prototype.toISOString?d.toISOString():convertToISOString(d);
var result="",key;
for(key in custParams){if(custParams.hasOwnProperty(key)){result=result+key+"="+custParams[key]+";";
}}result=result+"SignedIn="+(pixel.isSignedIn()?"Y":"N");
return encodeURIComponent(result);
},processBreadCrumb:function(){var cattree="",hTags="";
var breadcrumb=document.getElementById("refinements");
if(typeof breadcrumb!=="undefined"&&breadcrumb!==null){var refinements=breadcrumb.getElementsByClassName("categoryRefinementsSection");
if(typeof refinements!=="undefined"&&refinements!==null&&refinements.length>0){var a=refinements[0];
if(typeof a!=="undefined"&&a!==null){var hTags=a.getElementsByTagName("li");
if(typeof hTags!=="undefined"&&hTags!==null&&hTags.length>0){for(var i=0;
i<hTags.length;
i++){cattree=cattree.concat((hTags[i].textContent||hTags[i].innerText).trim());
if(i!=hTags.length-1){cattree=cattree.concat(" > ");
}}}}}}return cattree;
},getQueryParamFromUrl:function(key,url){if(typeof url!=="undefined"&&url!==null&&url.indexOf("?")>-1){var query=url.substring(url.indexOf("?"));
return pixel.getParamFromQuery(key,query);
}return"";
},getParamFromQuery:function(key,query){if(typeof query!=="undefined"&&query!==null&&query.length>0){var kv="";
var params=query.substring(1).split("&");
for(var i=0;
i<params.length;
i++){kv=params[i].split("=");
if(kv.length>0&&kv[0]===key){return kv[1];
}}}return"";
},isSignedIn:function(){var accountLink=document.getElementById("nav-your-account");
if(typeof accountLink!=="undefined"&&accountLink!==null){var href=accountLink.getAttribute("href");
if(typeof href!=="undefined"&&href!==null){if(href.indexOf("/redirect.html")!==-1){var redirectHref=pixel.getQueryParamFromUrl("location",href);
if(redirectHref.length>0){href=decodeURIComponent(redirectHref);
}}if(href.indexOf("/ap/signin")===-1){return true;
}}}return false;
},pageloadStatus:function(){if(document.readyState==="interactive"||document.readyState==="complete"){pixel.pageStatusFlag=true;
clearInterval(pixel.checkMyReadyState);
}else{pixel.pageStatusFlag=false;
}},setCookie:function(c_name,value,exdays){var valid_domain=".amazon.in";
var domain_string=valid_domain?("; domain="+valid_domain):"";
if(exdays!==-1){var exdate=new Date();
exdate.setDate(exdate.getDate()+exdays);
var c_value=encodeURIComponent(value)+((exdays===null)?"":"; expires="+exdate.toUTCString())+"; path=/"+domain_string;
document.cookie=c_name+"="+c_value;
}else{document.cookie=c_name+"="+value;
}},getCookieValue:function(key){var currentcookie=document.cookie;
if(currentcookie.length>0){var firstidx=currentcookie.indexOf(key+"=");
if(firstidx!==-1){firstidx=firstidx+key.length+1;
var lastidx=currentcookie.indexOf(";",firstidx);
if(lastidx===-1){lastidx=currentcookie.length;
}var value=decodeURIComponent(currentcookie.substring(firstidx,lastidx));
if(value!==undefined&&value!==null){return value;
}}}return"";
},getImageSource:function(key){var image="",div1="";
if(typeof key!=="undefined"&&key!==""&&key!==null){div1=document.getElementById(key);
if(typeof div1!=="undefined"&&div1!==null&&div1.getAttribute("src")!==null){image=div1.getAttribute("src");
}}return image;
},getPriceValue:function(id){var price="";
var spanTag=document.getElementById(id);
if(typeof spanTag!=="undefined"&&spanTag!==null){price=spanTag.innerHTML;
price=pixel.trimInEndAndReplaceSpecialChars(price).replace(/[^0-9.,]/g,"");
if(price.charAt(0)==="."){price=price.substr(1);
}}return price;
},trimInend:function(text){if(typeof text!=="undefined"&&text!==""&&text!==null){text=text.replace(/(^\s*)|(\s*$)/gi,"");
text=text.replace(/[ ]{2,}/gi," ");
text=text.replace(/\n /,"\n");
return text;
}return"";
},trimInEndAndReplaceSpecialChars:function(text,substitute){return pixel.trimInend(text.replace(/(<([^>]+)>)/ig,substitute));
},decodeAmpersand:function(text){return text.replace(/&amp;/g,"&");
},callVizuryService:function(customParams){var baseURL=("https:"===document.location.protocol?"https://ssl":"http://www")+".vizury.com/analyze/analyze.php";
var baseParams="?account_id=VIZVRM1256&section=1&level=";
var analyze=document.createElement("iframe");
analyze.src=baseURL+baseParams+customParams;
analyze.scrolling="no";
analyze.width=1;
analyze.height=1;
analyze.marginheight=0;
analyze.marginwidth=0;
analyze.frameborder=0;
analyze.style.display="block";
var node=document.getElementsByTagName("script")[0];
node.parentNode.insertBefore(analyze,node);
},callGoogleService:function(customParams){var baseURL="//googleads.g.doubleclick.net/pagead/viewthroughconversion/984527532/";
var baseParams="?value=0&label=r_58CJXm0gIQw9iz3gM&guid=ON&script=0&data=";
var image=new Image();
image.src=baseURL+baseParams+customParams;
}};
return pixel;
}}());
