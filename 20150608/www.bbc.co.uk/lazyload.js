define(["jquery-1","h4base"],function(e,i){var b="",f={},d=[],o=1000;function k(p){var r=e.map(f[p],function(v,u){return u});var t=r.shift();var q=e("#"+t);if(q.length===0){return true}else{var s=h4.discoveryzone.lazyLoadPlaceholder;return(q.attr("src").indexOf(s)===-1)}}function m(p){e.each(f[p],function(r,q){e("#"+r).attr("src",q)})}function h(q){if(!q){q=b}var p=e.inArray(q,d)-1;if(p<0){p=d.length-1}return d[p]}function l(p){if(!p){p=b}var q=e.inArray(p,d)+1;if(q===d.length){q=0}return d[q]}function c(){if(!k(b)){m(b)}var q=h(b),p=l(b);window.setTimeout(function(){if(!k(q)){m(q)}if(!k(p)){m(p)}},o)}function j(q,p,r){d=[];e.each(p,function(s,t){d.push(s)});b=r}function a(p,q){f=q}function g(p,r,q){if(q===undefined){if(r==="previous"){q=h(b)}else{q=l(b)}}b=q;c()}function n(){e(i).bind("flavour_titles_received",j);e(i).bind("lazy_load_images_received",a);e(i).bind("carousel_animate_start",g);e(i).bind("carousel_ready",c)}return{init:n}});