define(["jquery-1","istats-1","locator/cookies"],function(f,j,q){var e="swing",i="fast";function k(r,t,s){if("timeout"!==t&&(r.readyState===0||r.status===0)){return false}return true}function d(r){if(r&&f.isFunction(r)){return true}return false}function o(r){if(d(r)){r();return true}return false}function h(r,s){if(r){r.stop().fadeIn(i,e,s)}else{o(s)}}function g(r,s){if(r){r.stop().fadeOut(i,e,function(){o(s);s=null})}else{o(s)}}function n(t,s,r){if(!r){r="&hellip;"}if(t.length<=s){return t}t=t.substring(0,s-3)+r;return t}function p(r,w,t){var v,u,s;v={client:"default",lang:"en-GB"};w=w||{};if(window.locator){if(window.locator.language){v.lang=window.locator.language}else{if(w.language){v.lang=w.language}}if(window.locator.pageToReturnTo){v.ptrt=window.locator.pageToReturnTo}}u=/(?:\:)([a-z_]+)/g;r=r.replace(u,function(x,y){var z=w[y]||v[y];return(typeof z==="string")?z:":"+y});s=w.ptrt||v.ptrt;if(s&&!t){if(-1===r.indexOf("?")){r+="?"}else{r+="&"}r+="ptrt="+s}return r}function m(t,x,s,r){var u=10000,w,v;if(r&&r.timeout){u=r.timeout}w={url:t,timeout:u,success:function(z,A,y){if(x&&d(x)){x(z,A,y)}},error:function(y,A,z){if(k(y,A,z)){if(s&&d(s)){s(y,A,z)}}}};if(r){if(r.type){w.type=r.type}if(r.data){w.data=r.data}}v=f.ajax(w);return v}function c(s,u,v){var r=p("/locator/:client/:lang/confirm.json"),t={location_id:s,local_region:u};m(r,function(x,y,w){if(d(v)){v(true,x)}},function(w,y,x){if(d(v)){v(false)}},{type:"POST",data:t})}function a(){if(q.get("locserv",false)===false){return false}return true}function l(r,s){b(r,"locator",s)}function b(s,r,t){t=t||{};t.screen=window.locator.screen;j.log(s,r,t)}return{doIStatsLog:b,doIStatsAction:l,setLocation:c,truncate:n,interpolateRoute:p,ajax:m,isFunction:d,safeCallback:o,fadeIn:h,fadeOut:g,hasLocation:a}});