var server_url="/";(function(){var b=function(d){var c=document.createElement("b");c.innerHTML="<!--[if IE "+d+"]><i></i><![endif]-->";return c.getElementsByTagName("i").length===1};if(typeof JSON=="undefined"||!JSON||b(8)){if(b(8)){window.JSON=undefined}var a=document.createElement("script");a.src="/js/comment/json2.v.1.0.js";document.getElementsByTagName("head")[0].appendChild(a)}})();function sugTemplate(){}if((window.navigator.appName.toUpperCase().indexOf("MICROSOFT")>=0)&&(document.execCommand)){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}sugTemplate.prototype.getSuggCdnImgLink=function(m){if(!m){return""}function k(q){var p=0;if(q.length==0){return p}var n;for(var o=0;o<q.length;o++){n=q.charCodeAt(o);p=((p<<5)-p)+n;p=p&p}return p}var l=location.protocol.toLowerCase()=="https:";if(!l||m.indexOf("http://")==-1||m.indexOf("https://")==0){return m}var h=Math.abs(k(m)%4)+1;var b="https://img0"+h+".sogoucdn.com",j=/^\s*http:\/\/www\.sogou\.com/g,g=/^\s*http:\/\/img\d*\.sogoucdn\.com/g,f=/^\s*http:\/\/img\d*\.store\.sogou\.com/g,d=/^\s*http:\/\/imgstore\d*\.cdn\.sogou\.com/g,c=/^\s*http:\/\/cmc\.imgstore\.cdn\.sogou\.com/g,a=/^\s*http:\/\/pic\d*\.sogoucdn\.com/g;if(j.test(m)){return m.replace(j,"")}else{if(g.test(m)){return m.replace(g,b)}else{if(f.test(m)){return m.replace(f,b)}else{if(d.test(m)){return m.replace(d,b)}else{if(c.test(m)){return m.replace(c,b)}else{if(a.test(m)){return m.replace(a,b)}else{return b+"/v2/thumb?t=2&url="+encodeURIComponent(m)+"&appid=200580"}}}}}}};sugTemplate.prototype.vmap={"21":".v.1","60":".v.4","69":".v.1","91":".v.1","97":".v.5","113":".v.2","117":".v.1","125":".v.2","137":".v.1","145":".v.3","163":".v.2","164":".v.2","166":".v.2","191":".v.5","206":".v.1","210":".v.3","244":".v.5","262":".v.1","273":".v.1","312":".v.3","317":".v.3","320":".v.3","328":".v.2","338":".v.1","344":".v.2","376":".v.6","322":".v.1","330":".v.1","336":".v.2","349":".v.2","406":".v.1","411":".v.1","446":".v.1","478":".v.1","2040":".v.1","2140":".v.2","2098":".v.4","3005":".v.3","4871":".v.1","10001":".v.3","10002":".v.3","10003":".v.1","10004":".v.2","10005":".v.2",ad1:".v.1"};sugTemplate.prototype.cutTitle=function(j,b){var h=navigator.userAgent.indexOf("MSIE 6")!=-1&&!window.opera,f="...",d=/^(.*?)(<b>(.*?)<\/b>)?(<span><\/span>)?$/i.exec(b),a=[d[1],d[3],d[4]?d[4]:""],c=a[0].length+(a[1]?a[1].length:0),g;if(h){j.style.height=null}j.innerHTML="ÎÒ";g=j.offsetHeight;j.innerHTML=b;while(j.offsetHeight>g*5/4&&j.className.indexOf("sugad-off")==-1){j.innerHTML=a[0].substring(0,c)+(c>a[0].length?"<b>"+a[1].substring(0,c-a[0].length)+f+"</b>":f)+a[2];c--}if(h){j.style.height="27px"}};sugTemplate.prototype.cutAllTitle=function(a,c){for(var b=0;b<a.length;b++){this.cutTitle(a[b],c[b])}};sugTemplate.prototype.revertAllTitle=function(a,c){for(var b=0;b<a.length;b++){a[b].innerHTML=c[b]}};sugTemplate.prototype.len=function(a){return a&&a.replace?a.replace(/\[\/?em\]/g,"").replace(/[^\x00-\xff]/g,"rr").length:""};sugTemplate.prototype.cutLength=function(d,a,b,c){b=b||"...";c=c||3;if(this.len(d)>a){do{if(d.lastIndexOf("[em]")==d.length-4){d=d.substring(0,d.length-4)}else{if(d.lastIndexOf("[/em]")==d.length-5){d=d.substring(0,d.length-5)}else{d=d.substring(0,d.length-1)}}}while(d&&(this.len(d)+c>a));if(d.lastIndexOf("[/em]")<d.lastIndexOf("[em]")){d=d.substring(0,d.lastIndexOf("[em]"))+d.substring(d.lastIndexOf("[em]")+4)}return d+b}return d};sugTemplate.prototype.$c=function(d,c,a){var b=document.createElement(d);if(c){c.appendChild(b)}if(a){b.className=a}return b};sugTemplate.prototype.$=function(a){return document.getElementById(a)};sugTemplate.prototype.parseXML=function(a){if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(a,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(a)}return xml.documentElement};sugTemplate.prototype.selectNodes=function(d,f){function h(k,n){var m=[];for(var o=0;o<k.length;o++){for(var l=0;l<k[o].childNodes.length;l++){if(k[o].childNodes[l].nodeName==n){m[m.length]=k[o].childNodes[l]}}}return m}var b=[];var a=[d];var g=f.split("/");for(var c=0;c<g.length;c++){a=h(a,g[c]);if(a==null){return[]}}return a};sugTemplate.prototype.buildTitle=function(h,f,c,g,b,a){var d=this.$c("h3",h,b||"sugtype");a=a||44;d.innerHTML=['<a id="sgtitle" onfocus="this.blur();" href="',c?(c+'" target="_blank'):("/sogou?ie=utf8&query="+f.query),'">',this.cutLength(g?g:decodeURIComponent(f.query),a),"</a>"].join("");return d};sugTemplate.prototype.buildMoreHint=function(d,b){var a=this.$c("div",d,"morehint");var c=this.$c("a",a);c.innerHTML="¸ü¶àÏà¹Ø½á¹û&gt;&gt;";c.href="/web?query="+b.query;c.target="_blank";c.setAttribute("hideFocus","hidefocus")};sugTemplate.prototype.markRed=function(c,b,a){b=b||"<em>";a=a||"</em>";if(c.indexOf(b)>0){return c}if(c.indexOf("[em]")>=0){c=c.replace(/\[em\]/g,b).replace(/\[\/em\]/g,a)}return c};sugTemplate.prototype.escape=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};sugTemplate.prototype.cutRed=function(a){return a.replace(/\[\/?em\]/g,"")};sugTemplate.prototype.buildVRTitle=function(a,d,c){var b=this.$c("a",this.$c("h3",a,"se_embed_title"));var f=d.title;f=this.cutLength(f,c);f=this.escape(f);f=this.cutRed(f);b.href=d.url;b.target="_blank";b.title=this.cutRed(d.title);b.innerHTML=f;return b};sugTemplate.prototype.buildContent=function(a,g){var k=this.$c("div",a,"querylist");for(var h=0;h<2;h++){var b=this.$c("a",k,"qitem");b.target="_blank";b.href=g.docs[h].url;b.onfocus=function(){this.blur()};var f=this.$c("strong",b,"qtitle");var j=this.$c("span",f,"siteico");if(g.docs[h].favicon){j.style.background="url("+g.docs[h].favicon+") no-repeat scroll 6px 50% transparent"}j.innerHTML=this.cutLength(g.docs[h].title,54);if(g.docs[h].content){var c=this.$c("span",b,"qsummary");c.innerHTML=this.cutLength(this.escape(g.docs[h].content),106)}var d=this.$c("span",b,"qcite");if(g.docs[h]["url"]&&g.docs[h]["url"].indexOf("://")>0){d.innerHTML=decodeURIComponent(g.docs[h]["url"].split("://")[1].split("/")[0])}else{d.innerHTML="www.sogou.com"}}this.buildMoreHint(a,g)};sugTemplate.prototype.build=function(a,f,p,n,c,g,j){if(!f){return false}var k=this,o=-1,d=0;for(;d<p.length;d++){if(p[d]==decodeURIComponent(f.query)){o=d;break}}k.pv(f.query,f.type||"-1",o,f.doc_num||0,null,null,f.vrtype||"-1",k.abtestId,g,j);n[o]=f.type||"-1";if(!f.doc_num||!f.docs){return false}a.onclick=function(t){if((t&&(t.button!=0))||((!t)&&(window.event.button!=0))){return}try{t=t||window.event;var v=((t.target)?t.target:t.srcElement),s;while(v&&v.tagName){s=v.tagName.toUpperCase();if(s=="A"){k.pv(f.query,f.type,o,f.doc_num,v.id||"sgcontent",v.href,f.vrtype,k.abtestId,g,j)}if(s=="DIV"){break}v=v.parentNode}}catch(u){}};if(!f.type||f.type==100){a.innerHTML="";this.buildTitle(a,f);this.buildContent(a,f)}else{if(f.type==10000){try{var h=this.parseXML(f.docs[0].xml);var b=h.getAttribute("type");f.qaType=parseInt(b);f.type=10000+f.qaType;f.qaTag=c[decodeURIComponent(f.query)].tupu_key}catch(m){}}if(!this["build"+f.type]){if((f.type=="317"||f.type=="60")&&!k.curtime){if(window.standardtime){var q=window.standardtime;window.standardtime=function(t,s){k.curtime=t;return q(t,s)}}else{window.standardtime=function(t,s){k.curtime=t}}var r=document.createElement("script");r.charset="gb2312";r.src="websearch/features/standardtimeadjust.jsp?a="+Math.random();document.body.appendChild(r)}var l=document.createElement("script");l.charset="gb2312";l.src=server_url+"js/sugtemp/build"+f.type+(this.vmap[f.type]||"")+".js";document.body.appendChild(l)}this.buildVR(a,f,0)}return true};sugTemplate.prototype.httpsImgUrlReplace=function(m){if(!m){return""}var l=location.protocol.toLowerCase()=="https:";function k(q){var p=0;if(q.length==0){return p}var n;for(var o=0;o<q.length;o++){n=q.charCodeAt(o);p=((p<<5)-p)+n;p=p&p}return p}if(!l||m.indexOf("http://")==-1||m.indexOf("https://")==0){return m}var h=Math.abs(k(m)%4)+1;var b="https://img0"+h+".sogoucdn.com",j=/^\s*http:\/\/www\.sogou\.com/g,g=/^\s*http:\/\/img\d*\.sogoucdn\.com/g,f=/^\s*http:\/\/img\d*\.store\.sogou\.com/g,d=/^\s*http:\/\/imgstore\d*\.cdn\.sogou\.com/g,c=/^\s*http:\/\/cmc\.imgstore\.cdn\.sogou\.com/g,a=/^\s*http:\/\/pic\d*\.sogoucdn\.com/g;if(j.test(m)){return m.replace(j,"")}else{if(g.test(m)){return m.replace(g,b)}else{if(f.test(m)){return m.replace(f,b)}else{if(d.test(m)){return m.replace(d,b)}else{if(c.test(m)){return m.replace(c,b)}else{if(a.test(m)){return m.replace(a,b)}else{return b+"/v2/thumb?t=2&url="+encodeURIComponent(m)+"&appid=200580"}}}}}}};sugTemplate.prototype.buildVR=function(b,c,d){if(typeof this["build"+c.type]=="function"){try{var a=c.docs,j=a[0];var f=a[0].xml;if(f){if(location.protocol.toLowerCase()=="https:"){f=f.replace(/http:\/\/www\.sogou\.com/g,"");f=f.replace(/http:\/\/img\d+\.sogoucdn\.com/g,"https://img.store.sogou.com");f=f.replace(/http:\/\/img\d+\.store\.sogou\.com/g,"https://img.store.sogou.com");f=f.replace(/http:\/\/imgstore\.cdn\.sogou\.com/g,"https://img.store.sogou.com")}f=this.parseXML(f)}try{j.url=this.selectNodes(f,"url")[0].firstChild.nodeValue}catch(h){}try{j.title=this.selectNodes(f,"title")[0].firstChild.nodeValue}catch(h){}try{j.domain=j.url.split("://")[1].split("/")[0]}catch(h){}b.innerHTML="";this["build"+c.type](b,c,j,f)}catch(k){}}else{if(d<=10){var g=this;setTimeout(function(){g.buildVR(b,c,d+1)},30)}else{b.innerHTML="";this.buildTitle(b,c);this.buildContent(b,c)}}};sugTemplate.prototype.httpsReplace=function(a){a=a.replace(/http:\/\/img\d+\.sogoucdn\.com/g,"https://img.store.sogou.com");a=a.replace(/http:\/\/img\d+\.store\.sogou\.com/g,"https://img.store.sogou.com");a=a.replace(/http:\/\/imgstore\.cdn\.sogou\.com/g,"https://img.store.sogou.com");return a};sugTemplate.prototype.reg=new RegExp("{{(.*?)}}","g");sugTemplate.prototype.tongji={suggDivReqCount:0,suggDivShowCount:0,suggHotShowCount:0,suggHisShowCount:0,sugHisClk:0,sugVrWordCount:0,totalSugCount:0,totalCommonSugCount:0,totalHistorySugCount:0};sugTemplate.prototype.resetTongji=function(){this.tongji.suggDivReqCount=0;this.tongji.suggDivShowCount=0;this.tongji.suggHisShowCount=0;this.tongji.sugHisClk=0;this.tongji.sugVrWordCount=0;this.tongji.totalSugCount=0;this.tongji.totalCommonSugCount=0;this.tongji.totalHistorySugCount=0;this.tongji.suggHotShowCount=0};sugTemplate.prototype.pv=function(g,h,j,f,b,a,l,k,c,d){try{imgurl=[location.protocol.toLowerCase()=="https:"?"https://pb.sogou.com/":"http://pb.sogou.com/",b?"cl.gif":"pv.gif","?uigs_productid=webgo"];if(c){imgurl.push("&inputstr="+encodeURIComponent(c));imgurl.push("&istrlen="+c.length)}imgurl.push("&query=");imgurl.push(encodeURIComponent(g));imgurl.push("&type=");imgurl.push(h);if(l){imgurl.push("&vrtype="+l)}imgurl.push("&pos=");imgurl.push(j);imgurl.push("&num=");imgurl.push(f);if(!b){if(h!="adtop"&&this.lastpv==imgurl.join("")){return}this.lastpv=imgurl.join("")}else{imgurl.push("&uigs_cl=");imgurl.push(b);imgurl.push("&");imgurl.push("href="+encodeURIComponent(a));imgurl.push("&s_req="+this.tongji.suggDivReqCount);imgurl.push("&s_div_show="+this.tongji.suggDivShowCount);imgurl.push("&s_h_show="+this.tongji.suggHisShowCount);if(this.tongji.suggHisShowCount>0){imgurl.push("&s_h_clk="+this.tongji.sugHisClk)}imgurl.push("&s_vr_word="+this.tongji.sugVrWordCount);imgurl.push("&s_word="+this.tongji.totalSugCount);imgurl.push("&s_common_word="+this.tongji.totalCommonSugCount);imgurl.push("&s_h_word="+this.tongji.totalHistorySugCount);imgurl.push("&s_hot_word="+this.tongji.suggHotShowCount);this.resetTongji()}imgurl.push("&abtestid="+k);if(typeof(puid)!="undefined"&&puid){imgurl.push("&puid="+puid)}imgurl.push("&suguuid="+d);imgurl.push("&uigs_t=");imgurl.push((new Date()).getTime());(new Image()).src=imgurl.join("")}catch(m){}};sugTemplate.prototype.abtestId=(function(){function a(d){var c=location.search.split(d+"=");if(c.length>1){return c[1].split("&")[0]}return null}function b(g){var f=a("abtestid");if(f){return f}var d=document.cookie;var j=g+"=";var h=d.indexOf("; "+j);if(h==-1){h=d.indexOf(j);if(h!=0){return null}}else{h+=2}var c=document.cookie.indexOf(";",h);if(c==-1){c=d.length}return unescape(d.substring(h+j.length,c))}return b("ABTEST")&&b("ABTEST").split("|").length>0?b("ABTEST").split("|")[0]:""})();sugTemplate.prototype.buildTemplate=function(b,a){var d=this;function c(f,h){h=h.split("@");var g=d.selectNodes(a,""+h[0]);if(g.length>0){if(h.length>1){return g[0].getAttribute(h[1])}else{return g[0].firstChild.nodeValue.replace(/\ue40a/g,"").replace(/\ue40b/g,"")}}return""}return b.replace(this.reg,c)};function sogouSugg(newPara){if(typeof SugPara!="object"){SugPara={}}function getSuggCookie(name){var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!=0){return null}}else{begin+=2}var end=document.cookie.indexOf(";",begin);if(end==-1){end=dc.length}return unescape(dc.substring(begin+prefix.length,end))}function getAbtestId(){var urlAbtest=getUrlParamVal("abtestid");if(urlAbtest){return urlAbtest}return getSuggCookie("ABTEST")&&getSuggCookie("ABTEST").split("|").length>0?getSuggCookie("ABTEST").split("|")[0]:""}var isIe=navigator.userAgent.indexOf("MSIE")!=-1&&!window.opera;var isIe8=navigator.userAgent.indexOf("MSIE 8")!=-1&&!window.opera;var that=this,tophint,MAX_RETRY_FETCH_SITE=3,handleRetry=MAX_RETRY_FETCH_SITE-1,template=new sugTemplate(),myPara=newPara||SugPara,on=newPara?0:1,d=document,inputid=myPara.inputid||"query",sugType=myPara.sugType||"web",bigsize=myPara.bigsize||false,productId=myPara.productId||sugType,postFix=myPara.postFix||"",preFix=myPara.preFix||"",revsd=myPara.revsd||0,suggestRid=myPara.suggestRid||"",normalRid=myPara.normalRid||"",enableSug=true,useParent=myPara.useParent||0,abtestid=myPara.abtestid||getAbtestId(),ipn=myPara.ipn||"",domain=myPara.domain||"http://w.sugg.sogou.com",uri=myPara.uri||"/sugg/ajaj_json.jsp",suggUri="/suggnew/ajajjson",firstRun=1,suggDiv,suggIfm=null,suggLis=[],suggOText=[],input_elem,input_form,mousedown_ontr=0,noneed_query="",lastinput_query="",sending_timer=0,highlight_li=-1,jsonData=[],jsonDataTongji=[],jsonDataTongji0=[],jsonDataTongji1=[],jsonDataTongji2=[],goTongjiId=[],hasPersonal=0,hasPersonal1=0,userInputString="",cache={},sitecache={},ajaj=null,ajaj2=null,ajajPinyin=null,originalQuery="",suggestWordId=-1,input_time=0,oldfunc=function(){},oldfunc2=function(){},contentDiv,siteTimer,setTimer1,setTimer2,setTimer3,hideTimer,$c=sugTemplate.prototype.$c,handleFlag=handleRetry,vrFlag={},sugData={},cur_li=-1,isKeyTime=false,mouseTime_li=-1,timeOutTimer,loadingTimer,suguuid=null,badSuggMap={},hoverClassReg=new RegExp("\\bover\\b"),suggData=true,isIE7=navigator.userAgent.toLocaleUpperCase().indexOf("MSIE 7")>0;var version="1.0",sogouSearchSugPinyinN="sogouSearchSugPinyin@"+version;function localStorageMap(){if(!window.localStorage){return}var storage=window.localStorage;for(var i=0;i<storage.length;i++){var key=storage.key(i);if(key.indexOf("sogouSearchSugPinyin")>=0){var arr=key.split("@");if(!arr[1]||arr[1]!=version){localStorage.removeItem(key)}}}}localStorageMap();that.sw=function(kw,sw){if(!sw){try{handleData(["",[]])}catch(E){}}on=sw||false;noneed_query=kw||"";showtop=true;if(suggDiv){hideDiv()}};that.sugTypeChange=function(_sugType){sugType=_sugType;cache={}};function $(elemid){return d.getElementById(elemid)}function bind(elem,evt,func){if(elem){return elem.addEventListener?elem.addEventListener(evt,func,false):elem.attachEvent("on"+evt,func)}}function getElesByClass(class_name,parent){var aEle=parent.getElementsByTagName("*"),re=new RegExp("\\b"+class_name+"\\b"),aResult=[];for(var i=0;i<aEle.length;i++){if(re.test(aEle[i].className)){aResult.push(aEle[i])}}return aResult}function removeClass(node,cls){if(node){var className=node.className,re=new RegExp("\\b"+cls+"\\b");className=className.replace(re,"");node.className=className}}function addClass(node,cls){if(node){var className=node.className,re=new RegExp("\\b"+cls+"\\b");if(re.test(node.className)){return}className=className+" "+cls;node.className=className}}function pingback(action_name){var now=new Date();var uigs_t=(now.getTime())*1000+Math.round(Math.random()*1000);var uigs_productid="";if(sugType!=""){uigs_productid="sugg"+sugType}var url1=[(location.protocol.toLowerCase()=="https:"?"https://pb.sogou.com/":"http://pb.sogou.com/")+"pv.gif","?uigs_productid=",encodeURIComponent(uigs_productid),"&uigs_t=",uigs_t,"&w=",encodeURIComponent(input_elem.value),"&k=",encodeURIComponent(userInputString),"&s="];url1.push((suggestWordId!=-1)?"t":"f");if(userInputString){url1.push("&istrlen="+userInputString.length)}if(action_name=="del_his_item"||action_name=="clear_history"||action_name=="more_history"){url1.push("&act="+action_name);url1.push("&abtestid="+abtestid);(new Image()).src=url1.join("");return}if(suggestWordId!=-1){url1.push("&stj0="+jsonDataTongji0[suggestWordId]);url1.push("&stj1="+jsonDataTongji1[suggestWordId]);url1.push("&stj2="+jsonDataTongji2[suggestWordId])}url1.push("&hp="+hasPersonal);url1.push("&hp1="+hasPersonal1);if(suggestWordId!=-1){url1.push("&cline=");url1.push(suggestWordId)}if(action_name=="sb"){url1.push("&s_req="+template.tongji.suggDivReqCount);url1.push("&s_div_show="+template.tongji.suggDivShowCount);url1.push("&s_h_show="+template.tongji.suggHisShowCount);if(template.tongji.suggHisShowCount>0){url1.push("&s_h_clk="+template.tongji.sugHisClk)}url1.push("&s_vr_word="+template.tongji.sugVrWordCount);url1.push("&s_word="+template.tongji.totalSugCount);url1.push("&s_common_word="+template.tongji.totalCommonSugCount);url1.push("&s_h_word="+template.tongji.totalHistorySugCount);url1.push("&s_hot_word="+template.tongji.suggHotShowCount);template.resetTongji()}if(action_name){url1.push("&act=");url1.push(encodeURIComponent(action_name))}url1.push("&r="+now.getSeconds());url1.push("&abtestid="+encodeURIComponent(abtestid));if(typeof(puid)!="undefined"&&puid){url1.push("&puid="+puid)}url1.push("&uk="+(useKey?1:0));url1.push("&sbby="+(submitby));(new Image()).src=url1.join("")}function init(){if(!$(inputid)){setTimeout(init,50);return}initStyle();input_elem=$(inputid);input_form=input_elem.parentNode;while(input_form&&input_form.tagName.toLowerCase()!="form"){input_form=input_form.parentNode}if(!input_form){return}if(myPara.reset){input_form.reset()}input_elem.setAttribute("autocomplete","off");bind(input_elem,"mousedown",mousedown);bind(input_elem,"keydown",keydown);noneed_query=input_elem.value;checkQuery()}function mousedown(){if(firstRun){start()}if(myPara.oms){noneed_query="";lastinput_query=""}showtop=false}function positionDiv(){var inputBox=getPositionAndSize(useParent?input_elem.parentNode:input_elem);var isIndex=(location.href.indexOf("query=")>0)?false:(bigsize?false:true);var suggDivTop=(inputBox[1]+inputBox[3]+(isIndex?-1:0));var suggDivLeft=(inputBox[0]+(isIndex?0:-1));if(isIe8&&useParent){suggDivTop=suggDivTop-1;suggDivLeft=suggDivLeft-1}suggDiv.style.top=suggDivTop+"px";suggDiv.style.left=suggDivLeft+"px"}function getPositionAndSize(ele){var x=0,y=0,w=ele.offsetWidth,h=ele.offsetHeight;if(ele){x+=ele.offsetLeft;y+=ele.offsetTop;ele=ele.offsetParent}return[x,y,578,h]}function getQuery(){return input_elem.value}function checkQuery(){if(getQuery()!=noneed_query){showtop=false;start();return}setTimeout(checkQuery,10)}function checkQuery2(){var curr_query=getQuery();if(curr_query&&noneed_query!=curr_query&&lastinput_query==curr_query){if(!sending_timer){sending_timer=setTimeout(function(){noneed_query="";suggestWordId=-1;getElesByClass("sug-history",suggDiv)[0].style.display="none";needData(curr_query)},100)}}else{clearTimeout(sending_timer);sending_timer=0;if(!curr_query){if(!showtop){if(getSuggCookie("ppinf")&&typeof(userSec)!="undefined"&&userSec&&!isIE7&&suggData){suggData=false;showtop=true;getData("/sugg/history?queryPlatform=sugg&queryFrom=web&sec="+userSec+"&op=mine&tags=all::SEARCH_HISTORY::0::10::0::asc&t="+Math.random(),function(data){data=JSON.parse(data);if(data&&data[0].status=="ok"&&data[0].subitem.length>0){showHistory(data[0].subitem,true)}else{if(window.localStorage&&localStorage.getItem(sogouSearchSugPinyinN)&&JSON.parse(localStorage.getItem(sogouSearchSugPinyinN)).length>0){showHistory(JSON.parse(localStorage.getItem(sogouSearchSugPinyinN)))}else{suggData=true;showTopWord()}}},function(){if(window.localStorage&&localStorage.getItem(sogouSearchSugPinyinN)&&JSON.parse(localStorage.getItem(sogouSearchSugPinyinN)).length>0){showHistory(JSON.parse(localStorage.getItem(sogouSearchSugPinyinN)))}else{suggData=true;showTopWord()}},true)}else{showTopWord()}}}lastinput_query=curr_query}if(curr_query){showtop=false}setTimeout(checkQuery2,10)}function getData(url,fnSucc,fnFaild,async){var oAjax=null;if(window.XMLHttpRequest){oAjax=new XMLHttpRequest()}else{oAjax=new ActiveXObject("Microsoft.XMLHTTP")}oAjax.open("GET",url,async);oAjax.send();oAjax.onreadystatechange=function(){if(oAjax.readyState==4){if(oAjax.status==200){if(fnSucc){fnSucc(oAjax.responseText)}}else{if(fnFaild){fnFaild()}}}}}function showHistory(obj,isInterface){suggData=true;showtop=true;suggLis=[];suggOText=[];jsonData=[];var suggList=suggDiv.getElementsByTagName("ul")[0],tmpLi,objLength,sugLength;while(suggList.childNodes.length>0){suggList.removeChild(suggList.childNodes[0])}objLength=obj.length;sugLength=objLength>10?objLength-10:0;var oq=isInterface?"query_string":"oq";for(var i=objLength-1,j=0;i>=sugLength;i--,j++){tmpLi=d.createElement("li");tmpLi.style.color="rgb(122, 119, 200)";tmpLi.setAttribute("history","1");tmpLi.setAttribute("origin_sugg_query",encodeURIComponent(obj[i][oq]));tmpLi.onmouseover=mouseOver;tmpLi.onmouseout=mouseOut;tmpLi.onmousedown=mouseDown;tmpLi.onclick=mouseClick;tmpLi.setAttribute("lid",j);tmpLi.innerHTML=escapeForSpecialChars(obj[i][oq]);var objFlag=obj[i].arr2?obj[i].arr2.split(";")[2]:"0";if(objFlag&&objFlag==1||objFlag==2){tmpLi.innerHTML+="<span></span>";template.tongji.sugVrWordCount++}suggLis.push(tmpLi);suggOText.push(tmpLi.innerHTML);suggList.appendChild(tmpLi);jsonData[i]=obj[j][oq];vrFlag[obj[i][oq]]={type:objFlag}}positionDiv();showDiv(isShowing());template.cutAllTitle(suggLis,suggOText);template.tongji.totalSugCount+=suggLis.length;template.tongji.totalHistorySugCount+=suggLis.length;if(suggLis.length>0){template.tongji.suggHisShowCount++}if(contentDiv){contentDiv.style.display="none";suggDiv.className="suggestion nobg"}if(obj.length>3){getElesByClass("sug-history",suggDiv)[0].style.display="block";$("clear-history").onclick=function(){if(getSuggCookie("ppinf")&&typeof(userSec)!="undefined"&&userSec&&!isIE7){getData("/sugg/history?queryPlatform=sugg&queryFrom=web&sec="+userSec+"&op=delete&tags=all::SEARCH_HISTORY::::::::&t="+Math.random(),false,false,true)}removeAllLocalStoragePy();getElesByClass("sug-history",suggDiv)[0].style.display="none";pingback("clear_history")};$("more-history").onclick=function(){pingback("more_history")}}}var sctop,toptimer,showtop=false;function showTopWord(){if(!suggData){return}clearTimeout(toptimer);if(typeof sogou_top_words=="undefined"){if(!sctop){sctop=d.createElement("script");sctop.charset="gb2312";sctop.src="/suggnew/hotwords?v="+((new Date()).getTime());d.body.appendChild(sctop)}toptimer=setTimeout(showTopWord,50);return}if(!getQuery()){if(!sogou_top_words.length){hideDiv();return}showtop=true;userInputString="";var suggList=suggDiv.getElementsByTagName("ul")[0],tmpLi;while(suggList.childNodes.length>0){suggList.removeChild(suggList.childNodes[0])}suggLis=[];suggOText=[];jsonData=sogou_top_words;var protocol=location.protocol.toLowerCase();for(var i=0;i<jsonData.length&&i<10;i++){tmpLi=d.createElement("li");tmpLi.style.height="27px";tmpLi.onmouseover=mouseOver;tmpLi.onmouseout=mouseOut;tmpLi.onmousedown=mouseDown;tmpLi.onclick=mouseClick;tmpLi.setAttribute("lid",i);tmpLi.innerHTML="<em class='n0' style='background:url("+protocol+"//www.sogou.com/sug/images/n_"+(i+1)+".gif) no-repeat;'></em>"+jsonData[i]+(i==0?' <img src="/sug/images/new2.gif" align="absmiddle" />':"");vrFlag[jsonData[i]]={type:0,tupu_key:""};suggLis.push(tmpLi);suggOText.push(tmpLi.innerHTML);suggList.appendChild(tmpLi)}positionDiv();showDiv(isShowing());tophint.style.display="";if(contentDiv){contentDiv.style.display="none";suggDiv.className="suggestion nobg"}template.tongji.totalSugCount+=suggLis.length;if(suggLis.length>0){template.tongji.suggHotShowCount++}}}function generateUUID(){var d=new Date().getTime();var uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c=="x"?r:(r&3|8)).toString(16)});return uuid}function getCookieVal(name){var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!=0){return null}}else{begin+=2}var end=document.cookie.indexOf(";",begin);if(end==-1){end=dc.length}return unescape(dc.substring(begin+prefix.length,end))}function getIpLoc(){var iploc=getCookieVal("IPLOC");if(iploc){if(!/CN[0-9]{4,6}/.exec(iploc)){iploc="CN110000"}while(iploc.length<6){iploc+="0"}}return iploc.substring(2)}function getUrlParamVal(name){var x=location.search.split(name+"=");if(x.length>1){return x[1].split("&")[0]}return null}function getProtocol(){var protocol=location.protocol;return protocol.substring(0,protocol.length-1)}function generateUrlParams(){function getPolicyno(){if(typeof(ad_policy_no)!="undefined"&&ad_policy_no){return ad_policy_no}return null}function isFromIndexPage(){return inputid=="query"?1:0}function getPid(){var urlPid=getUrlParamVal("pid");return urlPid?urlPid:"sogou"}function getIp(){if(typeof(lead_ip)!="undefined"&&lead_ip){return lead_ip}return null}var params="&ip="+getIp()+"&iploc="+getIpLoc()+"&suid="+getCookieVal("SUID")+"&yyid="+getCookieVal("YYID");params+="&pid="+getPid()+"&policyno="+getPolicyno()+"&mfp="+getUrlParamVal("mfp")+"&hs="+getProtocol()+"&mp="+isFromIndexPage();return params}function needData(query){if(!input_time){input_time=new Date().getTime()}if(cache[query]&&typeof cache[query]!="function"){handleData(cache[query])}else{var EEE;try{d.body.removeChild(ajaj)}catch(EEE){}suguuid=generateUUID();ajaj=d.createElement("script");ajaj.charset="gb2312";ajaj.src=suggUri+"?key="+encodeURIComponent(query)+"&type="+sugType+"&ori=yes&pr="+productId+"&abtestid="+abtestid+"&ipn="+ipn+"&t="+input_time+"&suguuid="+suguuid+generateUrlParams();d.body.appendChild(ajaj)}}if(typeof window.sogou!="object"||window.sogou==null){window.sogou={}}if(typeof window.sogou.sug!="undefined"){oldfunc=window.sogou.sug}window.sogou.sug=function(result_array){try{oldfunc(result_array)}catch(E){}badSuggMap={};if(result_array[0]!=getQuery()){hideDiv();template.tongji.suggDivReqCount++;return}if(result_array.length>1&&result_array[1].length>0){result_array.push(suguuid);suguuid=null;cache[result_array[0]]=result_array}handleData(result_array)};if(typeof window.sogou.site!="undefined"){oldfunc2=window.sogou.site}window.sogou.site=function(result_array){clearTimeout(setTimer1);clearTimeout(setTimer2);clearTimeout(setTimer3);try{oldfunc2(result_array)}catch(E){}if(result_array){if(result_array.doc_num!=0){handleFlag=handleRetry;sitecache[decodeURIComponent(result_array.query)]=result_array;if(result_array.vrtype=="ad"){result_array.type="ad"+result_array.type}handleSiteData(result_array)}else{var cur_query=null;for(var i=0;i<suggLis.length;i++){if(hoverClassReg.test(suggLis[i].className)){cur_query=jsonData[i]}}if(handleFlag>0&&cur_query==decodeURIComponent(result_array.query)){handleFlag--;handleSiteData(result_array,handleFlag)}}}};function escapeForSpecialChars(input){if(input!=null){return input.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}else{return""}}function bold(data,input){var ret=data;if(data.indexOf(input)==0){ret=input+"<b>"+data.substr(input.length)+"</b>"}return ret}function unbold(data){return data.replace("<b>","").replace("</b>","")}function handleData(results){if(firstRun){return}if(!getQuery()){return}userInputString=results[0]||userInputString;var showHistoryLen,hisStartIndex;if(window.localStorage&&window.JSON){var oqArr=getLocalStorageOq(results[0]);try{showHistoryLen=oqArr.length}catch(E){}results=JSON.parse(JSON.stringify(results));insertTopAd(results);hisStartIndex=reorganizeResults(results,oqArr)}jsonData=results[1];if(results.length>2){jsonDataTongji=results[2];if(getParam("sugdbg","off")=="on"){jsonDataTongji[0]="0;0;1;0"}jsonDataTongji0=[];jsonDataTongji1=[];jsonDataTongji2=[];goTongjiId=[];for(var k=0;k<jsonDataTongji.length;++k){var tempTongji=jsonDataTongji[k].split(";");vrFlag[results[1][k]]={type:tempTongji[2],tupu_key:results[3][k]};sugData[results[1][k]]={arr2:results[2][k],arr3:results[3][k]};if(tempTongji!=null&&tempTongji.length>=3){jsonDataTongji0.push(tempTongji[0]);jsonDataTongji1.push(tempTongji[1]);jsonDataTongji2.push(tempTongji[2])}else{jsonDataTongji0.push(-1);jsonDataTongji1.push(0);jsonDataTongji2.push("0")}goTongjiId.push(0)}}if(results.length>3){hasPersonal1=results[3][0]}var i=0,j;clearHighlight();highlight_li=-1;positionDiv();var show=isShowing();showDiv("show");var suggList=suggDiv.getElementsByTagName("ul")[0],tmpLi;while(suggList.childNodes.length>0){suggList.removeChild(suggList.childNodes[0])}suggLis=[];suggOText=[];for(var i=0;i<jsonData.length&&i<10;i++){tmpLi=d.createElement("li");var isHis=false;if(showHistoryLen&&i>=hisStartIndex&&i<(showHistoryLen+hisStartIndex)){tmpLi.style.color="rgb(122, 119, 200)";tmpLi.setAttribute("history","1");tmpLi.setAttribute("origin_sugg_query",encodeURIComponent(jsonData[i]));isHis=true}tmpLi.onmouseover=mouseOver;tmpLi.onmouseout=mouseOut;tmpLi.onmousedown=mouseDown;tmpLi.onclick=mouseClick;tmpLi.setAttribute("lid",i);if(i==0&&results[2]&&results[2][0].indexOf("9")==4&&results[5]){var guanwangIcon="/images/icon-offb.gif";if(results[5].icon){guanwangIcon=httpsReplace(results[5].icon)}tmpLi.innerHTML+='<img src="'+guanwangIcon+'"><b>'+results[5].title+"</b><em>"+results[5].show_url+"</em>";tmpLi.className="sugad-off";if(cache[userInputString]&&cache[userInputString][7]){suguuid=cache[userInputString][7]}template.pv(results[5].qk,"adtop",0,1,null,null,"ad",abtestid,userInputString,suguuid)}else{tmpLi.innerHTML=bold(escapeForSpecialChars(jsonData[i]),escapeForSpecialChars(userInputString));if(!isHis){template.tongji.totalCommonSugCount++}}if(i==0&&jsonDataTongji2[0]=="3"){tmpLi.innerHTML='<strong style="color:red">ÄúÊÇ·ñÒªÕÒ£º</strong><strong>'+tmpLi.innerHTML+"</strong>"}if(vrFlag[jsonData[i]]&&(vrFlag[jsonData[i]].type==1||vrFlag[jsonData[i]].type==2||vrFlag[jsonData[i]].type==8)){tmpLi.innerHTML+="<span></span>";template.tongji.sugVrWordCount++}suggLis.push(tmpLi);suggOText.push(tmpLi.innerHTML);suggList.appendChild(tmpLi);sugTemplate.prototype.cutTitle(tmpLi,tmpLi.innerHTML)}hideDiv();if((jsonData.length>0||newPara)&&on&&suggLis.length>0){addClass(suggLis[0],"first");positionDiv();showDiv(show);template.tongji.suggDivShowCount++;if(showHistoryLen&&showHistoryLen>0){template.tongji.suggHisShowCount++;template.tongji.totalHistorySugCount+=showHistoryLen}template.tongji.totalSugCount+=jsonData.length;handleFlag=handleRetry;selectItem(0)}template.tongji.suggDivReqCount++;if(jsonData.length==0||!on){hideDiv()}}function httpsReplace(url){url=url.replace(/http:\/\/img\d+\.sogoucdn\.com/g,"https://img.store.sogou.com");url=url.replace(/http:\/\/img\d+\.store\.sogou\.com/g,"https://img.store.sogou.com");url=url.replace(/http:\/\/imgstore\.cdn\.sogou\.com/g,"https://img.store.sogou.com");return url}function getParam(name,defaultValue){var href=location.href,pos=href.indexOf("?");if(pos!=-1){var queryString=href.substring(pos+1),params=queryString.split("&"),len=params.length,index=0;for(;index<len;index++){var oneParam=params[index],kv=oneParam.split("=");if(kv.length<2){continue}var key=kv[0],value=kv[1];if(key!=name){continue}return value}if(index==len){return defaultValue}}else{return defaultValue}}function stopEvent(evt){if(evt.preventDefault){evt.preventDefault()}evt.cancelBubble=true;return evt.returnValue=false}var useKey=false,submitby="default";function keydown(evt){evt=evt||window.event;if(firstRun){if(evt.keyCode==27){return}start()}if(!input_time){input_time=new Date().getTime()}if(evt.keyCode==27){if(isShowing()){hideDiv();noneed_query=input_elem.value;setTimeout(function(){noneed_query=input_elem.value},1)}}else{if(evt.keyCode==13){hideDiv();submitby="enter";try{if(input_form.enter){input_form.enter.value="1"}}catch(e){}input_form.onsubmit&&input_form.onsubmit()==false||timeoutSubmit();return stopEvent(evt)}else{if(isShowing()){if(evt.keyCode==38){useKey=true;upKey(evt);return stopEvent(evt)}else{if(evt.keyCode==9||evt.keyCode==40){useKey=true;downKey(evt);return stopEvent(evt)}}}else{if((evt.keyCode==38)||(evt.keyCode==40)){useKey=true;getQuery()&&needData(getQuery())}}}}}function timeoutSubmit(){setTimeout(function(){input_form.submit()},100)}function trimStr(x){return x.replace(/^\s+|\s+$/gm,"")}function downKey(evt){if(!suggDiv.onmousemove){suggDiv.onmousemove=mouseMove}isKeyTime=true;clearTimeout(setTimer3);if(needRemoveHistoryCloseIcon(suggLis[highlight_li],evt)){removeHistoryCloseIcon(suggLis[highlight_li])}highlight_li++;if(highlight_li==Math.min(jsonData.length,10)){highlight_li=-1}highlight(evt)}function upKey(evt){if(!suggDiv.onmousemove){suggDiv.onmousemove=mouseMove}isKeyTime=true;clearTimeout(setTimer3);clearHighlight();if(needRemoveHistoryCloseIcon(suggLis[highlight_li],evt)){removeHistoryCloseIcon(suggLis[highlight_li])}highlight_li--;if(highlight_li==-2){highlight_li=Math.min(jsonData.length,10)-1}highlight(evt)}function highlight(evt){clearHighlight();if(highlight_li>=0){addClass(suggLis[highlight_li],"over");input_elem.value=unbold(jsonData[highlight_li]);handleFlag=handleRetry;selectItem(highlight_li);if(needAddHistoryCloseIcon(suggLis[highlight_li],evt)){addHistoryCloseIcon(suggLis[highlight_li])}}else{input_elem.value=userInputString}suggestWordId=highlight_li;noneed_query=input_elem.value}function listHighlight(){clearHighlight();if(highlight_li>=0){addClass(suggLis[highlight_li],"over")}}function clearHighlight(){for(var i=0;i<suggLis.length;i++){removeClass(suggLis[i],"over")}}function mouseMove(){suggDiv.onmousemove=null;isKeyTime=false;clearTimeout(hideTimer);hideTimer=setTimeout(function(){var li=null;if(mouseTime_li>=0&&(li=suggLis[mouseTime_li])){clearHighlight();addClass(li,"over");highlight_li=mouseTime_li;handleFlag=handleRetry;selectItem(highlight_li)}mouseTime_li=-1},50)}function mouseOut(evt){evt=evt||window.event;if(needRemoveHistoryCloseIcon(this,evt)){removeHistoryCloseIcon(this)}clearTimeout(hideTimer)}function mouseOver(evt){evt=evt||window.event;mouseTime_li=parseInt(this.getAttribute("lid"));if(isKeyTime){return}clearHighlight();addClass(this,"over");clearTimeout(setTimer3);clearTimeout(hideTimer);var needAddHisCloseIcon=needAddHistoryCloseIcon(this,evt);var that=this;hideTimer=setTimeout(function(){clearHighlight();addClass(that,"over");highlight_li=parseInt(that.getAttribute("lid"));handleFlag=handleRetry;selectItem(highlight_li);if(needAddHisCloseIcon){addHistoryCloseIcon(that)}},100)}function mouseDown(event){if(event&&event.stopPropagation){event.stopPropagation()}mousedown_ontr=1;return false}function mouseClick(){suggestWordId=parseInt(this.getAttribute("lid"));input_elem.value=jsonData[suggestWordId];noneed_query=input_elem.value;hideDiv();submitby="mouse";if(this.getAttribute("history")=="1"){template.tongji.sugHisClk=1}input_form.onsubmit&&input_form.onsubmit()==false||timeoutSubmit()}function needAddHistoryCloseIcon(src,evt){var e=evt.relatedTarget||evt.fromElement;if(!e||e.parentNode==src||e==src){var aEs=src.getElementsByTagName("a");if(evt.keyCode!=9&&evt.keyCode!=38&&evt.keyCode!=40&&aEs.length==1){return false}}return true}function addHistoryCloseIcon(src){if(!window.localStorage){return}if(!src){return}var isHistory=src.getAttribute("history");if(isHistory){var aE=d.createElement("a");aE.href="javascript:void(0);";aE.onclick=function(e){e=e||window.event;stopEvent(e);var oq=decodeURIComponent(src.getAttribute("origin_sugg_query"));removeLocalStoragePy(oq);if(src.parentNode.childNodes.length>1){src.parentNode.removeChild(src)}else{var x=src.parentNode.parentNode.parentNode;x.parentNode.removeChild(x)}if(getSuggCookie("ppinf")&&typeof(userSec)!="undefined"&&userSec&&!isIE7){getData("/sugg/history?queryPlatform=sugg&queryFrom=web&sec="+userSec+"&op=delete&query="+encodeURIComponent(oq)+"&tags=all::SEARCH_HISTORY::::::::&t="+Math.random(),false,false,true)}if(getElesByClass("suglist",suggDiv)[0].getElementsByTagName("li").length<=3){getElesByClass("sug-history",suggDiv)[0].style.display="none"}pingback("del_his_item")};aE.setAttribute("class","close");src.appendChild(aE)}}function needRemoveHistoryCloseIcon(src,evt){var e=evt.relatedTarget||evt.toElement;if(!e||e.parentNode==src||e==src){if(evt.keyCode!=9&&evt.keyCode!=38&&evt.keyCode!=40){return false}}return true}function removeHistoryCloseIcon(src){if(!window.localStorage){return}if(!src){return}var isHistory=src.getAttribute("history");if(isHistory){var aEs=src.getElementsByTagName("a");if(aEs&&aEs[0]){src.removeChild(aEs[0])}}}function isShowing(){return(suggDiv&&(suggDiv.style.display=="block"))}function showDiv(showOrNot){if(!showOrNot){pingback("show_s")}tophint.style.display="none";suggDiv.style.display="block";if(suggIfm){suggIfm.style.display="block"}try{if(!useParent){input_elem.offsetParent.appendChild(suggDiv);input_elem.offsetParent.appendChild(suggIfm)}else{input_elem.parentNode.offsetParent.appendChild(suggDiv);input_elem.parentNode.offsetParent.appendChild(suggIfm)}}catch(e){}}function selectItem(lino){clearTimeout(timeOutTimer);clearTimeout(loadingTimer);setThroughResult(false);var isIe6=navigator.userAgent.indexOf("MSIE 6")!=-1&&!window.opera;if(!vrFlag[jsonData[lino]]||vrFlag[jsonData[lino]].type==0||vrFlag[jsonData[lino]].type==9){if(isIe6&&vrFlag[jsonData[0]].type==9){suggLis[0].style.width=null}if(contentDiv.style.display!="none"){contentDiv.style.display="none";suggDiv.className="suggestion nobg";template.cutAllTitle(suggLis,suggOText)}}else{if(vrFlag[jsonData[lino]].type==1||vrFlag[jsonData[lino]].type==2||vrFlag[jsonData[lino]].type==8){if(isIe6&&vrFlag[jsonData[0]].type==9){suggLis[0].style.width="202px"}getSiteData(jsonData[lino],lino)}}}function hideDiv(){suggDiv.style.display="none";if(suggIfm){suggIfm.style.display="none"}try{if(!useParent){input_elem.offsetParent.removeChild(suggDiv);input_elem.offsetParent.removeChild(suggIfm)}else{input_elem.parentNode.offsetParent.removeChild(suggDiv);input_elem.parentNode.offsetParent.removeChild(suggIfm)}}catch(e){}}function initStyle(){var fileref=$c("link"),cssname="m3.min";fileref.setAttribute("rel","stylesheet");fileref.setAttribute("type","text/css");fileref.setAttribute("href",server_url+"sug/css/"+cssname+".v.5.css");d.getElementsByTagName("head")[0].appendChild(fileref)}function computePersonal(){var num=0;if(jsonDataTongji1==null||jsonDataTongji1.length<1){return 0}for(var i=0;i<jsonDataTongji1.length;++i){var tongji=parseInt(jsonDataTongji1[i]);num+=tongji}return num}function start(){if(!firstRun){return}firstRun=0;noneed_query=input_elem.value;normalRid=normalRid||((input_form.w&&input_form.w.value)?input_form.w.value:normalRid);function getParam(name,defaultValue){var href=location.href,pos=href.indexOf("?");if(pos!=-1){var queryString=href.substring(pos+1),params=queryString.split("&"),len=params.length,index=0;for(;index<len;index++){var oneParam=params[index],kv=oneParam.split("=");if(kv.length<2){continue}var key=kv[0],value=kv[1];if(key!=name){continue}return value}if(index==len){return defaultValue}}else{return defaultValue}}function clkBtnFormSubmit(e){e=e||window.event;if(e&&e.type=="submit"){setTimeout(function(){input_form.onsubmit()==false||input_form.submit()},100);return false}return true}input_form.onsubmit=clkBtnFormSubmit;var old_submit=input_form.onsubmit||function(){};function form_submit(a,b,c){if((typeof old_submit)=="function"){if(old_submit(a,b,c)==false){return false}}increaseSct();hasPersonal=computePersonal();var query_inputs={w:normalRid};var goSuggAttr;if(cache[userInputString]&&cache[userInputString][7]){suguuid=cache[userInputString][7]}if(suggestWordId!=-1){query_inputs={w:suggestRid,oq:userInputString,ri:suggestWordId,sourceid:"sugg",suguuid:suguuid};if(jsonDataTongji.length>0){goSuggAttr=jsonDataTongji[suggestWordId];if(goSuggAttr&&goSuggAttr.indexOf("8")==4){jsonDataTongji[suggestWordId]=goSuggAttr.substring(0,4)+"0"+goSuggAttr.substring(5)}query_inputs={w:suggestRid,oq:userInputString,ri:suggestWordId,sourceid:"sugg",suguuid:suguuid,stj:jsonDataTongji[suggestWordId],stj2:goTongjiId[suggestWordId],stj0:jsonDataTongji0[suggestWordId],stj1:jsonDataTongji1[suggestWordId],hp:hasPersonal,hp1:hasPersonal1}}}query_inputs.sut=(input_time?(new Date().getTime()-input_time):0);query_inputs.sst0=new Date().getTime();query_inputs.lkt=keypressNum_lead+","+time1_lead+","+time2_lead;if(showtop){query_inputs.p=normalRid=="01019900"?"40040108":"40240100"}var isFromIndex=(location.href.indexOf("query=")>0)?false:(bigsize?false:true);if(isFromIndex){var pid=getParam("pid","");if(pid.length>0){query_inputs.pid=pid}}var form_inputs=input_form.getElementsByTagName("input"),i,tmp_input;for(var inputName in query_inputs){for(i=0;i<form_inputs.length;i++){if(form_inputs[i].getAttribute("name")==inputName){form_inputs[i].value=query_inputs[inputName];break}}if(i==form_inputs.length){tmp_input=d.createElement("input");tmp_input.type="hidden";tmp_input.name=inputName;tmp_input.value=query_inputs[inputName];input_form.appendChild(tmp_input)}}if(window.localStorage&&window.JSON){var oq=trimStr(getQuery());if(oq&&oq.length<40){var py=getLocalStoragePinyin(oq);if(py){localStoragePinyin(oq,py)}else{httpRequestPinyin(oq)}}}if(goSuggAttr&&goSuggAttr.indexOf("9")==4){if(cache[userInputString]&&cache[userInputString][5]){newTab(cache[userInputString][5].jump_url);sugTemplate.prototype.pv(cache[userInputString][5].qk,"adtop",0,1,"topAd",cache[userInputString][5].jump_url,"ad",abtestid,userInputString,suguuid);suggestWordId=-1}return false}pingback("sb");return true}input_form.onsubmit=form_submit;function newTab(url){if(!url){return}var win=window.open(url,"_blank");win.focus()}function createDiv(){if(isIe){input_elem.offsetParent.style.position="relative";var tmp=input_elem.offsetParent;while(tmp){if(!(parseInt(tmp.currentStyle.zIndex))){tmp.style.zIndex="2000"}tmp=tmp.offsetParent}}suggDiv=$c("div",null,"suggestion nobg");suggDiv.id="vl";var tmpLi,innerDiv=$c("div",suggDiv,"suginner"),tt=$c("p",innerDiv,"s_title"),suggList=$c("ul",innerDiv,"suglist"),historyDiv=$c("div",suggDiv,"sug-history");tophint=tt;tophint.innerHTML="½ñÈÕÈÈ´Ê";tophint.style.display="none";tophint.style.margin="0";suggLis=[];for(var i=0;i<10;i++){tmpLi=d.createElement("li");tmpLi.onmouseover=mouseOver;tmpLi.onmouseout=mouseOut;tmpLi.onmousedown=mouseDown;tmpLi.onclick=mouseClick;tmpLi.setAttribute("lid",i);suggLis.push(tmpLi);suggList.appendChild(tmpLi)}contentDiv=$c("div",innerDiv,"sugc");contentDiv.id="sugc";contentDiv.onmouseover=function(){mouseTime_li=-1};contentDiv.style.display="none";suggList.onmouseout=listHighlight;historyDiv.style.display="none";if(window.suggestionPersonalCenterSwitch=="on"){historyDiv.innerHTML='<a href="javascript:void(0)" id="clear-history">Çå¿ÕÀúÊ·</a><span>|</span><a href="/ihome/history" id="more-history" target="_blank">²é¿´¸ü¶à</a>'}else{historyDiv.innerHTML='<a href="javascript:void(0)" id="clear-history">Çå¿ÕÀúÊ·</a>'}}createDiv();bind(d,"click",function(evt){evt=evt||window.event;var ele=evt.srcElement||evt.target;while(ele){if(ele==contentDiv||ele==input_elem){return}ele=ele.parentNode}hideDiv()});bind(input_elem,"beforedeactivate",function(){if(mousedown_ontr){window.event.cancelBubble=true;window.event.returnValue=false;mousedown_ontr=0}});checkQuery2()}function getCookie(){var dc=d.cookie;var prefix="sct=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!=0){return null}}else{begin+=2}var end=dc.indexOf(";",begin);if(end==-1){end=dc.length}return dc.substring(begin+prefix.length,end)}function increaseSct(){var sct=parseInt(getCookie()||0)||0;document.cookie="sct="+(sct+1)+"; expires=Thu, 21-Jul-2020 00:00:00 GMT; path=/;domain=sogou.com;"}var oldclick=d.onclick||function(){};d.onclick=function(evt){var ret=oldclick(evt);page_click(evt);return ret};function page_click(evt){if((evt&&(evt.button!=0))||((!evt)&&(window.event.button!=0))){return}evt=evt||window.event;var srcElem=((evt.target)?evt.target:evt.srcElement),h;while(srcElem&&srcElem.tagName){if(srcElem.tagName.toUpperCase()=="A"){h=srcElem.href||"";if((h.indexOf("http://www.sogou.com/")==0||h.indexOf("https://www.sogou.com/")==0)&&h.indexOf("query=")>0){increaseSct()}return}srcElem=srcElem.parentNode}}function setThroughResult(isLoading){var suggList=getElesByClass("suglist",suggDiv)[0],span=suggList.getElementsByTagName("span"),curItem=getElesByClass("over",suggList)[0]||suggList.getElementsByTagName("li")[0],curSpan=curItem.getElementsByTagName("span")[0],i=0,spanLength=span.length;for(;i<spanLength;i++){if(span[i].className==="sugg-loading"){span[i].className=""}}if(!curSpan){return}if(isLoading){curSpan.className="sugg-loading"}else{curSpan.className=""}return curSpan}function getSiteData(txt,pos,cnt){txt=unbold(txt||"");cnt=cnt||0;if(!txt||badSuggMap[pos]){return}var isCache=sitecache[txt];clearTimeout(loadingTimer);clearTimeout(timeOutTimer);loadingTimer=setTimeout(function(){clearTimeout(loadingTimer);setThroughResult(true)},100);timeOutTimer=setTimeout(function(){clearTimeout(timeOutTimer);var span=setThroughResult(false);if(span){span.parentNode.removeChild(span)}suggOText[pos]=suggOText[pos].replace("<span></span>","")},3000);if(contentDiv){contentDiv.className="sugc";if(cnt==0){contentDiv.innerHTML=""}}if(isCache){handleSiteData(sitecache[txt])}else{var type=vrFlag[txt].type==2?1:0;txt=encodeURIComponent(txt);try{d.body.removeChild(ajaj2)}catch(EEE){}ajaj2=d.createElement("script");if(vrFlag&&vrFlag[jsonData[pos]]&&vrFlag[jsonData[pos]].type=="8"){var querySug=[{qk:decodeURIComponent(txt),pos:pos}];querySug=encodeURIComponent(JSON.stringify(querySug));var suguuid=null;if(cache[userInputString]&&cache[userInputString][7]){suguuid=cache[userInputString][7]}ajaj2.src="/suggnew/adsugg?query="+querySug+generateUrlParams()+"&type=2&cb=window.sogou.site&suguuid="+suguuid+"&abtest="+abtestid+generateUrlParams()}else{var iploc=null;if(document.cookie.length>0&&document.cookie.indexOf("IPLOC=")>=0){var c_start=document.cookie.indexOf("IPLOC=")+6,c_end=document.cookie.indexOf(";",c_start)==-1?document.cookie.length:document.cookie.indexOf(";",c_start);iploc=document.cookie.substring(c_start,c_end)}if(!/CN[0-9]{4,6}/.exec(iploc)){iploc="CN110000"}while(iploc.length<6){iploc+="0"}ajaj2.charset="gb2312";var zhidaUrl="/suggnew/gosugg/";if(getParam("sugdbg","off")=="on"&&getParam("zhidaHost","")&&getParam("zhidaPort","")){zhidaUrl="http://"+getParam("zhidaHost","")+":"+getParam("zhidaPort","")+"/"}ajaj2.src=[zhidaUrl,txt,"?",(new Date().getTime()),"&rid=",(txt.toLowerCase().charCodeAt(txt.length-1)%6),"&IPLOC=",iploc,"&type=",type].join("")}d.body.appendChild(ajaj2)}}function httpRequestPinyin(oq){ajajPinyin=d.createElement("script");ajajPinyin.charset="gb2312";ajajPinyin.src="/suggnew/ajajjson/?type=getpinyin&key="+encodeURIComponent(oq);d.body.appendChild(ajajPinyin)}function sleep(milliSeconds){var start=+new Date();while(true){if((+new Date())-start>milliSeconds){break}}}window.sogou.sugpy=function(result_array){var key=result_array[0];if(/^\?+\?$/.test(key.trim())){return}var val=result_array[1][0];localStoragePinyin(key,val)};function getLocalStorageOq(str){str=trimStr(str);if(!window.localStorage){return}if(!str||!localStorage.getItem(sogouSearchSugPinyinN)){return false}var oqArr=[];var pinyinJsonArr=JSON.parse(localStorage.getItem(sogouSearchSugPinyinN));for(var i=pinyinJsonArr.length-1;i>-1;i--){var pinyinJson=pinyinJsonArr[i];if(pinyinJson.py.indexOf(str)==0){oqArr.push(pinyinJson)}else{if(pinyinJson.oq.indexOf(str)==0){oqArr.push(pinyinJson)}}if(oqArr.length>1){break}}return oqArr}function reorganizeResults(results,history){if(!history||history.length==0){return results}var nature=results[1];var jdTongji=results[2];var psTongji=results[3];var hisStartIndex=jdTongji&&jdTongji[0]=="0;0;9;0"?1:0;for(var i=0;i<history.length;i++){var h=history[i];var isRepeated=false;var natureCopy=nature.slice(0);for(var j=0;j<natureCopy.length;j++){var n=natureCopy[j];if(n==h.oq){var goSuggAttr=jdTongji[j];if(goSuggAttr&&goSuggAttr.indexOf("9")==4){continue}isRepeated=true;nature.splice(j,1);nature.splice(hisStartIndex,0,h.oq);jdTongji.splice(j,1);jdTongji.splice(hisStartIndex,0,goSuggAttr);psTongji.splice(j,1);psTongji.splice(hisStartIndex,0,h.arr3);break}}if(!isRepeated){nature.splice(hisStartIndex,0,h.oq);jdTongji.splice(hisStartIndex,0,h.arr2);psTongji.splice(hisStartIndex,0,h.arr3)}}while(nature.length>10){nature.pop();jdTongji.pop();psTongji.pop()}return hisStartIndex}function insertTopAd(results){var nature=results[1];var jdTongji=results[2];var psTongji=results[3];if(jdTongji&&jdTongji[0]=="0;0;9;0"){nature.splice(0,0,nature[0]);jdTongji.splice(0,0,jdTongji[0]);psTongji.splice(0,0,psTongji[0]);jdTongji[1]=jdTongji[1].substring(0,4)+"0"+jdTongji[1].substring(5);var i=0;while(i<jdTongji.length){jdTongji[i]=i+jdTongji[i].substring(1);i++}}}function getLocalStoragePinyin(oq){try{if(!window.localStorage){return}if(!oq||!localStorage.getItem(sogouSearchSugPinyinN)){return false}var pinyinJsonArr=JSON.parse(localStorage.getItem(sogouSearchSugPinyinN));for(var i=0;i<pinyinJsonArr.length;i++){var tmp=pinyinJsonArr[i];if(tmp.oq==oq){return tmp.py}}return false}catch(i){}}function localStoragePinyin(oq,py){if(!oq||!py){return false}var pinyinJsonArr,pinyinJson={};if(!window.localStorage){return}if(!localStorage.getItem(sogouSearchSugPinyinN)){pinyinJsonArr=[]}else{pinyinJsonArr=JSON.parse(localStorage.getItem(sogouSearchSugPinyinN))}for(var i=0;i<pinyinJsonArr.length;i++){var pj=pinyinJsonArr[i];if(pj.oq==oq){pinyinJsonArr.splice(i,1)}}pinyinJson.oq=oq;pinyinJson.py=py;var sugOriginData=sugData[oq];pinyinJson.arr2=sugOriginData?sugOriginData.arr2:"0;0;0;0";pinyinJson.arr3=sugOriginData?sugOriginData.arr3:"";if(sugOriginData&&sugOriginData.arr2&&(sugOriginData.arr2.indexOf("9")==4||sugOriginData.arr2.indexOf("8")==4)){var goSuggAttr=sugOriginData.arr2;pinyinJson.arr2=goSuggAttr.substring(0,4)+"0"+goSuggAttr.substring(5)}pinyinJsonArr.push(pinyinJson);while(pinyinJsonArr.length>100){pinyinJsonArr.shift()}localStorage.setItem(sogouSearchSugPinyinN,JSON.stringify(pinyinJsonArr));return true}function removeLocalStoragePy(oq){oq=trimStr(oq);if(!window.localStorage){return}if(!oq||!localStorage.getItem(sogouSearchSugPinyinN)){return false}var pinyinJsonArr=JSON.parse(localStorage.getItem(sogouSearchSugPinyinN));for(var i=0;i<pinyinJsonArr.length;i++){var pj=pinyinJsonArr[i];if(pj.oq==oq){pinyinJsonArr.splice(i,1);break}}localStorage.setItem(sogouSearchSugPinyinN,JSON.stringify(pinyinJsonArr));return true}function removeAllLocalStoragePy(){if(!window.localStorage){return}if(!localStorage.getItem(sogouSearchSugPinyinN)){return false}localStorage.removeItem(sogouSearchSugPinyinN)}function handleSiteData(data,_cnt){var isBuildSuccess,pos=-1,cnt=_cnt||0;if(contentDiv){if(cnt==0){contentDiv.innerHTML=""}if(cache[userInputString]&&cache[userInputString][7]){suguuid=cache[userInputString][7]}isBuildSuccess=template.build(contentDiv,data,jsonData,goTongjiId,vrFlag,userInputString,suguuid);if(isBuildSuccess){clearTimeout(timeOutTimer);clearTimeout(loadingTimer);setThroughResult(false);suggDiv.className="suggestion";if(contentDiv.style.display=="none"){contentDiv.style.display="";template.cutAllTitle(suggLis,suggOText)}else{contentDiv.style.display=""}}else{suggDiv.className="suggestion nobg";contentDiv.style.display="none";clearTimeout(setTimer1);clearTimeout(setTimer3);if(data.query){for(var i=0;i<jsonData.length;i++){if(jsonData[i]==decodeURIComponent(data.query)){pos=i;if(_cnt===0){badSuggMap[pos]=true;var span=setThroughResult(false);if(span){span.parentNode.removeChild(span)}suggOText[pos]=suggOText[pos].replace("<span></span>","")}break}}setTimer3=setTimeout(function(){getSiteData(decodeURIComponent(data.query),pos,MAX_RETRY_FETCH_SITE-1)},500)}}}}template.getSiteData=getSiteData;init();sugTemplate.prototype.buildZhiDaLoopSection=function(context,tempCode){var loopPtn=/<!--\s*LOOP\s+SET=\$\{(.*?)\}.*?-->/,endPtn=/<!--\s*ENDLOOP\s*-->/,loopMat=null,endMat=null;while(loopMat=loopPtn.exec(tempCode)){var leftContent=RegExp.leftContext;var setCode=loopMat[1];endMat=endPtn.exec(tempCode);var rightContent=RegExp.rightContext;var loopCode=tempCode.substring(loopMat.index+loopMat[0].length,endMat.index);var loopContent="";with(context){var setVar=eval(setCode)}for(var i=0;i<setVar.length;i++){var item=setVar[i];context.item=item;context.i=i;loopContent+=this.replaceZhidaTemp(loopCode,context)}tempCode=leftContent+loopContent+rightContent}return tempCode};sugTemplate.prototype.replaceZhidaTemp=function(code,context){var varPtn=/\$\{(.*?)\}|\$%7B(.*?)%7D/g;var varMat=null;var head=0,tail=0;var k=0;var content="";while(varMat=varPtn.exec(code)){tail=varMat.index;content+=code.substring(head,tail);with(context){content+=eval((varMat[1]?varMat[1]:varMat[2]))}head=tail+varMat[0].length}content+=code.substring(head,code.length);return content};sugTemplate.prototype.buildZhiDaHtml=function(context,tempCode){tempCode=this.buildZhiDaLoopSection(context,tempCode);return this.replaceZhidaTemp(tempCode,context)};sugTemplate.prototype.buildZhiDa=function(div,context,tempCode){div.innerHTML=this.buildZhiDaHtml(context,tempCode)}}var smugg=new sogouSugg();function sugg_go_imgresize(f,c,b){var a=f.width||0;var d=f.height||0;var j=false;if(a==0||d==0){j=true;var g=f.cloneNode(true);g.style.visibility="hidden";document.body.appendChild(g);a=g.width;d=g.height;document.body.removeChild(g)}if(a>c&&d>b){if(a/d<=c/b){f.style.width=c+"px";f.style.height="auto"}else{f.style.height=b+"px";f.style.width="auto"}}}var keypressNum_lead=0,time1_lead=0,time2_lead=0;(function(){var g="browerV";var m="osV";var l=(function(){var n=window.navigator.userAgent.toLowerCase();var p={};if(window.opera){p.opera=true}else{if(n.indexOf("msie")!=-1){p.ie=true;var o=/msie\s+(.)/.exec(n);if(o){p["ie"+o[1]]=true}}else{if(n.indexOf("webkit")!=-1){p.webkit=true;if(n.indexOf("chrome")!=-1){p.chrome=true}else{if(n.indexOf("ipad")!=-1){p.ipad=true;p.ios=true}else{if(n.indexOf("safari")!=-1){p.safari=true}}}}else{if(n.indexOf("gecko")!=-1){p.gecko=true;if(n.indexOf("firefox")!=-1){p.firefox=true}}else{if(window.openDatabase){p.safari=true}}}}}if(n.indexOf("se 2.x")!=-1){p.se=true}if(n.indexOf("360ee")!=-1){p.s60ee=true}else{if(n.indexOf("360se")!=-1){p.s60se=true}else{if(n.indexOf("aoyou")!=-1||n.indexOf("maxthon")!=-1){p.aoyou=true}else{if(n.indexOf("theworld")!=-1){p.world=true}else{if(n.indexOf("worldchrome")!=-1){p.worldchrome=true}else{if(n.indexOf("greenbrowser")!=-1){p.greenbrowser=true}else{if(n.indexOf("qqbrowser")!=-1){p.qqbrowser=true}else{if(n.indexOf("baidu")!=-1||n.indexOf("bidu")!=-1){p.baidu=true}else{if(n.indexOf("ucweb")!=-1){p.ucweb=true}}}}}}}}}return p})();var b=(function(){var o=window.navigator.userAgent.toLowerCase();var n={};if(o.indexOf("windows")!=-1){n.window=true}else{if(o.indexOf("mac")!=-1){n.mac=true}else{if(o.indexOf("linux")!=-1){n.linux=true}else{if(o.indexOf("x11")!=-1){n.unix=true}else{if(o.indexOf("solaris")!=-1){n.solaris=true}}}}}if(!!o.match(/AppleWebKit.*Mobile.*/)||!!o.match(/AppleWebKit/)){n.mobile=true}else{if(o.indexOf("ios")!=-1){n.mobile=true}else{if(o.indexOf("ipad")!=-1){n.ipad=true}else{if(o.indexOf("android")!=-1){n.android=true}else{if(o.indexOf("iphone")!=-1){n.iphone=true}}}}}return n})();function a(){var q=h(g);var p=h(m);var o,n;o=c(l);k(g,o,365*24*3600*30,"/","www.sogou.com","");n=j(b);k(m,n,365*24*3600*30,"/","www.sogou.com","")}function c(n){if(n){if(n.s60ee){return 6}if(n.s60se){return 7}if(n.aoyou){return 9}if(n.world){return 10}if(n.worldchrome){return 11}if(n.greenbrowser){return 12}if(n.qqbrowser){return 13}if(n.baidu){return 14}if(n.se){return 8}if(n.opera){return 4}if(n.chrome){return 3}if(n.safari){return 5}if(n.ie){return 1}if(n.firefox){return 2}}return 0}function j(n){if(n){if(n.mobile){return 6}if(n.android){return 7}if(n.iphone){return 8}if(n.ipad){return 9}if(n.window){return 1}if(n.linux){return 3}if(n.solaris){return 4}if(n.unix){return 5}if(n.mac){return 2}}return 0}function k(p,r,n,u,q,t){var o=new Date();o.setTime(o.getTime());var s=new Date(o.getTime()+(n));document.cookie=p+"="+(r)+((n)?"; expires="+s.toGMTString():"")+((u)?"; path="+u:"")+((q)?"; domain="+q:"")+((t)?"; secure":"")}function h(p){var o=document.cookie;var r=p+"=";var q=o.indexOf("; "+r);if(q==-1){q=o.indexOf(r);if(q!=0){return null}}else{q+=2}var n=document.cookie.indexOf(";",q);if(n==-1){n=o.length}return unescape(o.substring(q+r.length,n))}a();var f=document.getElementsByTagName("input");for(var d in f){for(i=0;i<f.length;i++){if(f[i].name=="query"){f[i].onkeypress=function(){keypressNum_lead++;if(time1_lead==0){time1_lead=new Date().getTime()}time2_lead=new Date().getTime()}}}}})();