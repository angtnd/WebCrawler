window.NYTD=window.NYTD||{};window.NYTD.NYTMM=window.NYTD.NYTMM||{};if(jQuery){$j=jQuery.noConflict()}window.NYTD.NYTMM.namespace=function(d){var c=d.split("."),b=NYTD.NYTMM,a;if(c[0]==="NYTD"&&c[1]==="NYTMM"){c=c.slice(2)}for(a=0;a<c.length;a+=1){if(typeof b[c[a]]==="undefined"){b[c[a]]={}}b=b[c[a]]}return b};if(typeof console=="undefined"){window.console={log:function(){},warn:function(){},error:function(){}}}if(typeof console.assert=="undefined"){window.console.assert=function(){}}window.NYTD.NYTMM.debugLevel=1;(function(a){a.extend({log:function(){if(NYTD.NYTMM.debugLevel<1){return}var g;if(arguments.length>0){g=(arguments.length>1)?Array.prototype.join.call(arguments," "):arguments[0];if(NYTD.NYTMM.debugLevel===1){if(window.console){if(console.dirxml&&(typeof HTMLElement!=="undefined"&&g instanceof HTMLElement)){console.dirxml(g)}else{if(console.log){if(window.chrome&&a.type(g)==="string"){var c=(new Error()).stack.split("\n");var j=c.length;var d=/localhost|nytint|bundler/i;var f=2;for(;f<j;f++){if(d.test(c[f])){break}}var b=c[f]||c[2];if(b){var e=b.slice(b.indexOf("at ")+3,b.length);var h=e.replace(/.*\//i,"").replace(/&cachebust=[a-z0-9]*/,"").replace(")","");console.log("%c"+g+"%c "+h+" %c "+e,"background-color: #FED; padding-left: 6px; padding-right: 6px; color: #333; border-right: 5px solid white;","background-color: #EFEFEF; color: #888; padding-left: 6px; padding-right: 6px; border-right: 5px solid white;","display:inline-block; font-size: 2px; margin-left:-154px;line-height:20px;")}}else{console.log(g)}}}}}else{if(NYTD.NYTMM.debugLevel===2){alert(g)}}}return g}})})(jQuery||NYTD.jQuery);(function(){NYTD.NYTMM.iOS=false;NYTD.NYTMM.iOSInfo={userAgent:null,version:null,minor:null,update:null,device:null,phone:false,tablet:false,pixelRatio:1,retina:false};if(/(iPhone|iPod|iPad)/i.test(navigator.userAgent)){NYTD.NYTMM.iOS=true;NYTD.NYTMM.iOSInfo.userAgent=navigator.userAgent;if(/CPU like Mac OS X/i.test(navigator.userAgent)){NYTD.NYTMM.iOSInfo.version=1}else{if(/OS [2-6]_\d(_\d)? like Mac OS X/i.test(navigator.userAgent)){var c=/OS ([2-6])_(\d)(?:_(\d))? like Mac OS X/i.exec(navigator.userAgent);NYTD.NYTMM.iOSInfo.version=c[1];NYTD.NYTMM.iOSInfo.minor=c[2];NYTD.NYTMM.iOSInfo.update=c[3]}}var b=/(iPhone|iPod|iPad)/i.exec(navigator.userAgent);NYTD.NYTMM.iOSInfo.device=b[0];NYTD.NYTMM.iOSInfo.tablet=(NYTD.NYTMM.iOSInfo.device==="iPad");NYTD.NYTMM.iOSInfo.phone=(NYTD.NYTMM.iOSInfo.tablet)?false:true;NYTD.NYTMM.iOSInfo.pixelRatio=!!window.devicePixelRatio?window.devicePixelRatio:1;NYTD.NYTMM.iOSInfo.retina=NYTD.NYTMM.iOSInfo.pixelRatio>1;var a=(NYTD.NYTMM.iOSInfo.phone)?"phone":"tablet";jQuery("html").addClass("nytmm_iOS");jQuery("html").addClass("nytmm_iOS_"+NYTD.NYTMM.iOSInfo.version);jQuery("html").addClass("nytmm_iOS_"+a)}})();(function(a){a.fn.overlayButton=function(b){var c=a.extend({icon:"interactive",size:undefined,width:undefined,height:undefined,target:"_self",poster:undefined,spritesheet:"http://graphics8.nytimes.com/packages/images/nytdesign/2012/playheads.png",link:"",callback:function(){return true},destroyOnClick:true,overlay_html:'<a class="nytmm_overlayButton" href="#"></a>',poster_html:'<img class="nytmm_overlayButton_poster">',button_html:'<div class="nytmm_overlayButton_button"></div>'},b);return this.each(function(){var g=a(this);var h=a.extend({width:g.width(),height:g.height(),size:g.width()<300?"small":"large"},c);var d=a(h.overlay_html);var f=a(h.button_html);var e=a(h.poster_html);g.addClass("nytmm_overlayButton_container");if(!g.css("position")||g.css("position")==="static"){g.css("position","relative")}d.css({width:h.width+"px",height:h.height+"px"}).attr("href",h.link).attr("target",h.target).appendTo(g).click(function(){if(h.destroyOnClick){g.removeClass("nytmm_overlayButton_container");d.remove()}return h.callback()});if(h.poster){e.attr("src",h.poster).css({maxWidth:h.width,maxHeight:h.height}).appendTo(d)}if(h.icon){f.addClass(h.icon).addClass(h.size).appendTo(d)}})}})(jQuery);(function(a){a.fn.videoBG=function(b,d){var d={};if(typeof b=="object"){d=a.extend({},a.fn.videoBG.defaults,b)}else{if(!b){d=a.fn.videoBG.defaults}else{return a(b).videoBG(d)}}var c=a(this);if(!c.length){return}if(c.css("position")=="static"||!c.css("position")){c.css("position","relative")}if(d.width==0){d.width=c.width()}if(d.height==0){d.height=c.height()}var e=a.fn.videoBG.wrapper();e.height(d.height).width(d.width);if(d.textReplacement){d.scale=true;c.width(d.width).height(d.height).css("text-indent","-9999px")}else{e.css("z-index",d.zIndex+1)}e.html(c.html());var f=a.fn.videoBG.video(d);if(d.scale){e.height(d.height).width(d.width);f.height(d.height).width(d.width);f.find("video").height(d.height).width(d.width)}c.html(e);c.append(f);return this};a.fn.videoBG.setFullscreen=function(i,j){var e=a(window).width(),b=a(window).height();i.css("min-height",0).css("min-width",0);e=(j.minWidth!==null)?(j.minWidth>e)?j.minWidth:e:e;if(j.constrainHeight){var c=Math.round(i.height()/i.width()*e);i.parent().width(e).height(c);i.width(e).height(c);i.parent().parent().find(".videoBG_wrapper").width(e).height(c)}else{i.parent().width(e).height(b);if(e/b>i.aspectRatio){i.width(e).height("auto");var g=i.height();var f=(g-b)/2;if(f<0){f=0}i.css("top",-f)}else{i.width("auto").height(b);var d=i.width();var f=(d-e)/2;if(f<0){f=0}i.css("left",-f);if(f===0){var h=setTimeout(function(){a.fn.videoBG.setFullscreen(i,j)},500)}}a("body > .videoBG_wrapper").width(e).height(b)}return i};a.fn.videoBG.video=function(f){if(f.scrollToTop){a("html, body").scrollTop(-1)}var c=a("<div/>");c.addClass("videoBG").css("position",f.position).css("z-index",f.zIndex).css("top",0).css("left",0).css("height",f.height).css("width",f.width).css("opacity",f.opacity).css("overflow","hidden");var e=a("<video/>");e.css("position","absolute").css("z-index",f.zIndex).attr("poster",f.poster).css("top",0).css("left",0).css("min-width","100%").css("min-height","100%");var b=a.fn.videoBG.supportsVideo();if(f.autoplay){e.attr("autoplay","autoplay")}if(f.preload){e.attr("preload",f.preload)}if(f.fullscreen){e.bind("canplay",function(){e.aspectRatio=e.width()/e.height();a.fn.videoBG.setFullscreen(e,f)});var i;a(window).resize(function(){clearTimeout(i);i=setTimeout(function(){a.fn.videoBG.setFullscreen(e,f)},100)});a.fn.videoBG.setFullscreen(e,f)}var d=e[0];var h=f.loop;e.bind("ended",function(){if(f.loop){if(h){d.play()}if(h!==true){h--}}else{d.pause()}});e.bind("canplay",function(){if(f.autoplay){d.play()}});if(b){if(a.fn.videoBG.supportType("mp4")&&f.mp4){e.attr("src",f.mp4)}else{if(a.fn.videoBG.supportType("webm")&&f.webm){e.attr("src",f.webm)}else{if(a.fn.videoBG.supportType("ogv")&&f.ogv){e.attr("src",f.ogv)}else{b=false}}}}var g=a("<img/>");g.attr("src",f.poster).css("position","absolute").css("z-index",f.zIndex).css("top",0).css("left",0).css("min-height","100%").css("min-width","100%");if(b){c.html(e);e.attr("controls","controls");setTimeout(function(){e.removeAttr("controls")},0)}else{c.html(g)}if(f.textReplacement){c.css("min-height",1).css("min-width",1);e.css("min-height",1).css("min-width",1);g.css("min-height",1).css("min-width",1);c.height(f.height).width(f.width);e.height(f.height).width(f.width);g.height(f.height).width(f.width)}if(b&&f.autoplay){d.play()}return c};a.fn.videoBG.supportsVideo=function(){return(document.createElement("video").canPlayType)};a.fn.videoBG.supportType=function(c){if(!a.fn.videoBG.supportsVideo()){return false}var b=document.createElement("video");switch(c){case"webm":return(b.canPlayType('video/webm; codecs="vp8, vorbis"'));break;case"mp4":return(b.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'));break;case"ogv":return(b.canPlayType('video/ogg; codecs="theora, vorbis"'));break}return false};a.fn.videoBG.wrapper=function(){var b=a("<div/>");b.addClass("videoBG_wrapper").css("position","absolute").css("top",0).css("left",0);return b};a.fn.videoBG.defaults={mp4:"",ogv:"",webm:"",poster:"",autoplay:true,loop:true,scale:false,position:"absolute",opacity:1,textReplacement:false,zIndex:0,width:0,height:0,fullscreen:false,imgFallback:true,constrainHeight:false,scrollToTop:true,minWidth:null}})(jQuery);(function(a){a.VideoEvents={START_EVENT:"NYTD.NYTMM.VideoEvent:start",PLAY_EVENT:"NYTD.NYTMM.VideoEvent:play",PAUSE_EVENT:"NYTD.NYTMM.VideoEvent:pause",STOP_EVENT:"NYTD.NYTMM.VideoEvent:stop",END_EVENT:"NYTD.NYTMM.VideoEvent:end",PROGRESS_EVENT:"NYTD.NYTMM.VideoEvent:progress",READY_EVENT:"NYTD.NYTMM.VideoEvent:ready",CHANGE_EVENT:"NYTD.NYTMM.VideoEvent:change",ERROR_EVENT:"NYTD.NYTMM.VideoEvent:error",DESTROY_EVENT:"NYTD.NYTMM.VideoEvent:destroy"}})(NYTD.NYTMM);(function(a,b){a.simpleVideoDiv=function(t,f){var e=b(t).empty();var d=b.extend({poster:"http://graphics8.nytimes.com/packages/flash/multimedia/ICONS/grey9.png",width:e.width(),height:e.height(),mp4:undefined,ogv:undefined,webm:undefined,autoplay:"autoplay",loop:true,scale:false,position:"absolute",opacity:1,textReplacement:false,zIndex:0,scrollToTop:false,fullscreen:false,imgFallback:true,preload:"auto",ui:false},e.data(),f);d.autoplay=(d.autoplay)?"autoplay":"";if(a.iOS){d.ui="touchstart"}e.width(d.width).height(d.height).videoBG(d).addClass("nytmm_simpleVideoDiv");var k=e.find("video")[0];var j,l,p,s,c;var m=false;function h(){if(k){k.pause()}}function q(){if(k){k.play()}}function g(){return(k&&!k.paused)}function n(){if(k){k.pause();if(m){k.currentTime=0}}}function r(){if(k){this.stop();k.removeEventListener("play",j);k.removeEventListener("ended",l);k.removeEventListener("pause",p);k=null}e.empty();e.trigger(a.VideoEvents.DESTROY_EVENT)}function i(u){if(k){if(typeof u==="boolean"){if(u){k.muted="muted"}else{k.muted=""}}else{return k.muted===true}}}function o(v,u){e.css({width:v+"px",height:u+"px"});e.find(".videoBG, [width]").css({width:v+"px",height:u+"px"})}if(d.ui){if(d.ui==="hover"){e.hover(q,h)}else{e.bind(d.ui,function(){if(g()){h()}else{q()}})}}if(k){k.addEventListener("play",j=function(){e.trigger(a.VideoEvents.PLAY_EVENT)});k.addEventListener("ended",l=function(){e.trigger(a.VideoEvents.END_EVENT)});k.addEventListener("pause",p=function(){e.trigger(a.VideoEvents.PAUSE_EVENT)});k.addEventListener("loadedmetadata",c=function(){m=true;e.trigger(a.VideoEvents.READY_EVENT)});k.addEventListener("timeupdate",s=function(u){e.trigger(a.VideoEvents.PROGRESS_EVENT,{position:u.target.currentTime,duration:u.target.duration})})}return{pause:h,play:q,stop:n,mute:i,destroy:r,setSize:o,isPlaying:g,player:k}}})(NYTD.NYTMM,jQuery);(function(c,a,b,d,e){if(b!=="undefined"&&typeof b.FlexType==="undefined"){b.FlexType=(function(){var h=this;this.callbacks={};var g=function(j){return j.toLowerCase().replace(/\s/g,"_").replace(/[^\w]/g,"")};var i=function(j,k){h.callbacks[g(j)]=k};var f=function(){var j=c.getFlexData?getFlexData():null;if(j&&d.type(j)==="string"){j=j.replace(/\{"\$t":(".*?")\}/g,"$1");j=j.replace(/"(true|false)"/g,"$1");j=j.replace(/"([\d\.\-]+)"/g,"$1");return jQuery.parseJSON(j)}else{return j}};d(a).ready(function(){if(!NYTD||!NYTD.FlexTypes){return}var j=NYTD.FlexTypes;d.each(j,function(k,m){var o=m.target;var l=g(m.type);var n=m.data;if(h.callbacks[l]){d.log("Creating FlexType",l,"for",o);h.callbacks[l]("#"+o,n)}else{d.log("ERROR FlexType: Template",l,"for",o,"not found")}})});return{getData:f,addCallback:i}})()}})(window,document,NYTD.NYTMM,jQuery);(function(b,a){if(a!="undefined"&&typeof a.VideoLoopPromo=="undefined"){a.VideoLoopPromo=function(e,g){var f=this;var h=b.extend(true,{width:undefined,height:undefined,video:{poster:"http://graphics8.nytimes.com/packages/flash/multimedia/ICONS/grey9.png",mp4:undefined,ogv:undefined,webm:undefined,autoplay:true,loop:true,scale:false,io:false},overlay:{link:undefined,icon:"interactive",target:"_self"},targetoverride:null},g);if(h.targetoverride){e=h.targetoverride}var c=b(e).addClass("nytmm_videoLoopPromo").empty();h.video.width=h.overlay.width=h.width||c.width()||320;h.video.height=h.overlay.height=h.height||c.height()||180;c.width(h.video.width);var d=b("<div></div>").appendTo(c);a.simpleVideoDiv(d,h.video);if(h.overlay.link){c.overlayButton(h.overlay)}if(h.credit){c.append('<div class="credit">'+h.credit+"</div>")}if(h.caption){c.append('<p class="caption">'+h.caption+"</p>")}};a.FlexType.addCallback("VideoLoopPromo",function(d,c){new a.VideoLoopPromo(d,c)})}})(jQuery,NYTD.NYTMM);