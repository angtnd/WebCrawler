/*! jQuery v1.8.2 jquery.com | jquery.org/license */
(function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}function J(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(I,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:+d+""===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else d=b}return d}function K(a){var b;for(b in a){if(b==="data"&&p.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function ba(){return!1}function bb(){return!0}function bh(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function bi(a,b){do a=a[b];while(a&&a.nodeType!==1);return a}function bj(a,b,c){b=b||0;if(p.isFunction(b))return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return p.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=p.grep(a,function(a){return a.nodeType===1});if(be.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c})}function bk(a){var b=bl.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(b.nodeType!==1||!p.hasData(a))return;var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)p.event.add(b,c,h[c][d])}g.data&&(g.data=p.extend({},g.data))}function bE(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c==="input"&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando)}function bF(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bG(a){bv.test(a.type)&&(a.defaultChecked=a.checked)}function bY(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bW.length;while(e--){b=bW[e]+c;if(b in a)return b}return d}function bZ(a,b){return a=b||a,p.css(a,"display")==="none"||!p.contains(a.ownerDocument,a)}function b$(a,b){var c,d,e=[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style)continue;e[f]=p._data(c,"olddisplay"),b?(!e[f]&&c.style.display==="none"&&(c.style.display=""),c.style.display===""&&bZ(c)&&(e[f]=p._data(c,"olddisplay",cc(c.nodeName)))):(d=bH(c,"display"),!e[f]&&d!=="none"&&p._data(c,"olddisplay",d))}for(f=0;f<g;f++){c=a[f];if(!c.style)continue;if(!b||c.style.display==="none"||c.style.display==="")c.style.display=b?e[f]||"":"none"}return a}function b_(a,b,c){var d=bP.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function ca(a,b,c,d){var e=c===(d?"border":"content")?4:b==="width"?1:0,f=0;for(;e<4;e+=2)c==="margin"&&(f+=p.css(a,c+bV[e],!0)),d?(c==="content"&&(f-=parseFloat(bH(a,"padding"+bV[e]))||0),c!=="margin"&&(f-=parseFloat(bH(a,"border"+bV[e]+"Width"))||0)):(f+=parseFloat(bH(a,"padding"+bV[e]))||0,c!=="padding"&&(f+=parseFloat(bH(a,"border"+bV[e]+"Width"))||0));return f}function cb(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&p.css(a,"boxSizing")==="border-box";if(d<=0||d==null){d=bH(a,b);if(d<0||d==null)d=a.style[b];if(bQ.test(d))return d;e=f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+ca(a,b,c||(f?"border":"content"),e)+"px"}function cc(a){if(bS[a])return bS[a];var b=p("<"+a+">").appendTo(e.body),c=b.css("display");b.remove();if(c==="none"||c===""){bI=e.body.appendChild(bI||p.extend(e.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!bJ||!bI.createElement)bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write("<!doctype html><html><body>"),bJ.close();b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,"display"),e.body.removeChild(bI)}return bS[a]=c,c}function ci(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||ce.test(a)?d(a,e):ci(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&p.type(b)==="object")for(e in b)ci(a+"["+e+"]",b[e],c,d);else d(a,b)}function cz(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c))for(;h<i;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function cA(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h,i=a[f],j=0,k=i?i.length:0,l=a===cv;for(;j<k&&(l||!h);j++)h=i[j](c,d,e),typeof h=="string"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cA(a,c,d,e,h,g)));return(l||!h)&&!g["*"]&&(h=cA(a,c,d,e,"*",g)),h}function cB(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&p.extend(!0,a,e)}function cC(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);while(j[0]==="*")j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}function cD(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if(e!=="*"){if(h!=="*"&&h!==e){c=i[h+" "+e]||i["* "+e];if(!c)for(d in i){f=d.split(" ");if(f[1]===e){c=i[h+" "+f[0]]||i["* "+f[0]];if(c){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}}}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function cL(){try{return new a.XMLHttpRequest}catch(b){}}function cM(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cU(){return setTimeout(function(){cN=b},0),cN=p.now()}function cV(a,b){p.each(b,function(b,c){var d=(cT[b]||[]).concat(cT["*"]),e=0,f=d.length;for(;e<f;e++)if(d[e].call(a,b,c))return})}function cW(a,b,c){var d,e=0,f=0,g=cS.length,h=p.Deferred().always(function(){delete i.elem}),i=function(){var b=cN||cU(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;for(;e<f;e++)j.tweens[e].run(d);return h.notifyWith(a,[j,d,c]),d<1&&f?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cN||cU(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e},stop:function(b){var c=0,d=b?j.tweens.length:0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;cX(k,j.opts.specialEasing);for(;e<g;e++){d=cS[e].call(j,a,k,j.opts);if(d)return d}return cV(j,k),p.isFunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function cX(a,b){var c,d,e,f,g;for(c in a){d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=p.cssHooks[d];if(g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function cY(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],q=a.nodeType&&bZ(a);c.queue||(j=p._queueHooks(a,"fx"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,"fx").length||j.empty.fire()})})),a.nodeType===1&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],p.css(a,"display")==="inline"&&p.css(a,"float")==="none"&&(!p.support.inlineBlockNeedsLayout||cc(a.nodeName)==="inline"?m.display="inline-block":m.zoom=1)),c.overflow&&(m.overflow="hidden",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b){f=b[d];if(cP.exec(f)){delete b[d];if(f===(q?"hide":"show"))continue;o.push(d)}}g=o.length;if(g){h=p._data(a,"fxshow")||p._data(a,"fxshow",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var b;p.removeData(a,"fxshow",!0);for(b in n)p.style(a,b,n[b])});for(d=0;d<g;d++)e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e in h||(h[e]=i.start,q&&(i.end=i.start,i.start=e==="width"||e==="height"?1:0))}}function cZ(a,b,c,d,e){return new cZ.prototype.init(a,b,c,d,e)}function c$(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b)c=bV[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function da(a){return p.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c)},q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,r=/\S/,s=/\s+/,t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,y=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,z=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,A=/^-ms-/,B=/-([\da-z])/gi,C=function(a,b){return(b+"").toUpperCase()},D=function(){e.addEventListener?(e.removeEventListener("DOMContentLoaded",D,!1),p.ready()):e.readyState==="complete"&&(e.detachEvent("onreadystatechange",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?f=[null,a,null]:f=u.exec(a);if(f&&(f[1]||!c)){if(f[1])return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a);g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return d.find(a);this.length=1,this[0]=g}return this.context=e,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return p.each(this,a,b)},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(k.apply(this,arguments),"slice",k.call(arguments).join(","))},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=p.fn,p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!p.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++)if((a=arguments[i])!=null)for(c in a){d=h[c],e=a[c];if(h===e)continue;k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e)}return h},p.extend({noConflict:function(b){return a.$===p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(a===!0?--p.readyWait:p.isReady)return;if(!e.body)return setTimeout(p.ready,1);p.isReady=!0;if(a!==!0&&--p.readyWait>0)return;d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger("ready").off("ready")},isFunction:function(a){return p.type(a)==="function"},isArray:Array.isArray||function(a){return p.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):E[m.call(a)]||"object"},isPlainObject:function(a){if(!a||p.type(a)!=="object"||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!n.call(a,"constructor")&&!n.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return!a||typeof a!="string"?null:(typeof b=="boolean"&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!="string")return null;b=p.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(w.test(b.replace(y,"@").replace(z,"]").replace(x,"")))return(new Function("return "+b))();p.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||typeof c!="string")return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,"ms-").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;f<g;)if(c.apply(a[f++],d)===!1)break}else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;f<g;)if(c.call(a[f],f,a[f++])===!1)break;return a},trim:o&&!o.call("ï»¿Â ")?function(a){return a==null?"":o.call(a)}:function(a){return a==null?"":(a+"").replace(t,"")},makeArray:function(a,b){var c,d=b||[];return a!=null&&(c=p.type(a),a.length==null||c==="string"||c==="function"||c==="regexp"||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(l)return l.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d=="number")for(;f<d;f++)a[e++]=c[f];else while(c[f]!==b)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof p||i!==b&&typeof i=="number"&&(i>0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j)for(;h<i;h++)e=c(a[h],h,d),e!=null&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),e!=null&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return typeof c=="string"&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return a.apply(c,e.concat(k.call(arguments)))},f.guid=a.guid=a.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=d==null,k=0,l=a.length;if(d&&typeof d=="object"){for(k in d)p.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call(p(a),c)}):(c.call(a,e),c=null));if(c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),p.ready.promise=function(b){if(!d){d=p.Deferred();if(e.readyState==="complete")setTimeout(p.ready,1);else if(e.addEventListener)e.addEventListener("DOMContentLoaded",D,!1),a.addEventListener("load",p.ready,!1);else{e.attachEvent("onreadystatechange",D),a.attachEvent("onload",p.ready);var c=!1;try{c=a.frameElement==null&&e.documentElement}catch(f){}c&&c.doScroll&&function g(){if(!p.isReady){try{c.doScroll("left")}catch(a){return setTimeout(g,50)}p.ready()}}()}}return d.promise(b)},p.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){E["[object "+b+"]"]=b.toLowerCase()}),c=p(e);var F={};p.Callbacks=function(a){a=typeof a=="string"?F[a]||G(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;for(;i&&h<g;h++)if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var b=i.length;(function d(b){p.each(b,function(b,c){var e=p.type(c);e==="function"&&(!a.unique||!l.has(c))?i.push(c):c&&c.length&&e!=="string"&&d(c)})})(arguments),e?g=i.length:c&&(f=b,k(c))}return this},remove:function(){return i&&p.each(arguments,function(a,b){var c;while((c=p.inArray(b,i,c))>-1)i.splice(c,1),e&&(c<=g&&g--,c<=h&&h--)}),this},has:function(a){return p.inArray(a,i)>-1},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return!i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return a!=null?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(j,c),f.promise()}}),p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement("div");n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5";if(!c||!c.length)return{};f=e.createElement("select"),g=f.appendChild(e.createElement("option")),h=n.getElementsByTagName("input")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value==="on",optSelected:g.selected,getSetAttribute:n.className!=="t",enctype:!!e.createElement("form").enctype,html5Clone:e.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:e.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick"),n.detachEvent("onclick",m)),h=e.createElement("input"),h.value="t",h.setAttribute("type","radio"),b.radioValue=h.value==="t",h.setAttribute("checked","checked"),h.setAttribute("name","t"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n);if(n.attachEvent)for(k in{submit:!0,change:!0,focusin:!0})j="on"+k,l=j in n,l||(n.setAttribute(j,"return;"),l=typeof n[j]=="function"),b[k+"Bubbles"]=l;return p(function(){var c,d,f,g,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",i=e.getElementsByTagName("body")[0];if(!i)return;c=e.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",i.insertBefore(c,i.firstChild),d=e.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),f[0].style.cssText="padding:0;margin:0;border:0;display:none",l=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",b.reliableHiddenOffsets=l&&f[0].offsetHeight===0,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!=="1%",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:"4px"}).width==="4px",g=e.createElement("div"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width="0",d.style.width="1px",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),typeof d.style.zoom!="undefined"&&(d.innerHTML="",d.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),i.removeChild(c),c=d=f=g=null}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a)},data:function(a,c,d,e){if(!p.acceptData(a))return;var f,g,h=p.expando,i=typeof c=="string",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b)return;l||(j?a[h]=l=p.deletedIds.pop()||p.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop));if(typeof c=="object"||typeof c=="function")e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c);return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[p.camelCase(c)])):g=f,g},removeData:function(a,b,c){if(!p.acceptData(a))return;var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i])return;if(b){d=c?h[i]:h[i].data;if(d){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?K:p.isEmptyObject)(d))return}}if(!c){delete h[i].data;if(!K(h[i]))return}g?p.cleanData([a],!0):p.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,"parsedAttrs")){f=i.attributes;for(h=f.length;j<h;j++)g=f[j].name,g.indexOf("data-")||(g=p.camelCase(g.substring(5)),J(i,g,k[g]));p._data(i,"parsedAttrs",!0)}}return k}return typeof a=="object"?this.each(function(){p.data(this,a)}):(d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!",p.access(this,function(c){if(c===b)return k=this.triggerHandler("getData"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k;d[1]=c,this.each(function(){var b=p(this);b.triggerHandler("setData"+e,d),p.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.length,e=c.shift(),f=p._queueHooks(a,b),g=function(){p.dequeue(a,b)};e==="inprogress"&&(e=c.shift(),d--),e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return typeof a!="string"&&(c=a,a="fx",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a),a==="fx"&&b[0]!=="inprogress"&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){return a=p.fx?p.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};typeof a!="string"&&(c=a,a=b),a=a||"fx";while(h--)d=p._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var L,M,N,O=/[\t\r\n]/g,P=/\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++)f.indexOf(" "+b[g]+" ")<0&&(f+=b[g]+" ");e.className=p.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(" "+e.className+" ").replace(O," ");for(f=0,g=c.length;f<g;f++)while(d.indexOf(" "+c[f]+" ")>=0)d=d.replace(" "+c[f]+" "," ");e.className=a?p.trim(d):""}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&p._data(this,"__className__",this.className),this.className=this.className||a===!1?"":p._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(O," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f)return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,typeof d=="string"?d.replace(P,""):d==null?"":d);return}return e=p.isFunction(a),this.each(function(d){var f,g=p(this);if(this.nodeType!==1)return;e?f=a.call(this,d,g.val()):f=a,f==null?f="":typeof f=="number"?f+="":p.isArray(f)&&(f=p.map(f,function(a){return a==null?"":a+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,f,"value")===b)this.value=f})}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type==="select-one";if(f<0)return null;c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(p.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,"optgroup"))){b=p(e).val();if(i)return b;g.push(b)}}return i&&!g.length&&h.length?p(h[f]).val():g},set:function(a,b){var c=p.makeArray(b);return p(a).find("option").each(function(){this.selected=p.inArray(p(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;if(e&&p.isFunction(p.fn[c]))return p(a)[c](d);if(typeof a.getAttribute=="undefined")return p.prop(a,c,d);h=i!==1||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L));if(d!==b){if(d===null){p.removeAttr(a,c);return}return g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d)}return g&&"get"in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++)e=d[g],e&&(c=p.propFix[e]||e,f=T.test(e),f||p.attr(a,e,""),a.removeAttribute(U?e:c),f&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode)p.error("type property can't be changed");else if(!p.support.radioValue&&b==="radio"&&p.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return L&&p.nodeName(a,"button")?L.get(a,b):b in a?a.value:null},set:function(a,b,c){if(L&&p.nodeName(a,"button"))return L.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2)return;return g=h!==1||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b}}}}),M={get:function(a,c){var d,e=p.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(N[c]?d.value!=="":d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=e.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){b===""&&(b="false"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}}),p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),p.support.enctype||(p.propFix.enctype="encoding"),p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b))return a.checked=p.inArray(p(a).val(),b)>=0}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\.]*|)(?:\.(.+)|)$/,X=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,"mouseenter$1 mouseleave$1")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a)))return;d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof p!="undefined"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b},h.elem=a),c=p.trim(_(c)).split(" ");for(j=0;j<c.length;j++){k=W.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),r=p.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=p.event.special[l]||{},n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&p.expr.match.needsContext.test(f),namespace:m.join(".")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(!r||!(m=r.events))return;b=p.trim(_(b||"")).split(" ");for(f=0;f<b.length;f++){g=W.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h in m)p.event.remove(a,h+b[f],c,d,!0);continue}n=p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(l=0;l<o.length;l++)q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d==="**"&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q));o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete m[h])}p.isEmptyObject(m)&&(delete r.handle,p.removeData(a,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,g){if(!f||f.nodeType!==3&&f.nodeType!==8){var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if($.test(s+p.event.triggered))return;s.indexOf("!")>=0&&(s=s.slice(0,-1),i=!0),s.indexOf(".")>=0&&(t=s.split("."),s=t.shift(),t.sort());if((!f||p.event.customEvent[s])&&!p.event.global[s])return;c=typeof c=="object"?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=s.indexOf(":")<0?"on"+s:"";if(!f){h=p.cache;for(j in h)h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0);return}c.result=b,c.target||(c.target=f),d=d!=null?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===!1)return;q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode)q.push([k,r]),l=k;l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++)k=q[j][0],c.type=q[j][1],o=(p._data(k,"events")||{})[c.type]&&p._data(k,"handle"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply&&o.apply(k,d)===!1&&c.preventDefault();return c.type=s,!g&&!c.isDefaultPrevented()&&(!n._default||n._default.apply(f.ownerDocument,d)===!1)&&(s!=="click"||!p.nodeName(f,"a"))&&p.acceptData(f)&&m&&f[s]&&(s!=="focus"&&s!=="blur"||c.target.offsetWidth!==0)&&!p.isWindow(f)&&(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,l&&(f[m]=l)),c.result}return},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,l,m,n,o=(p._data(this,"events")||{})[c.type]||[],q=o.delegateCount,r=k.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];r[0]=c,c.delegateTarget=this;if(t.preDispatch&&t.preDispatch.call(this,c)===!1)return;if(q&&(!c.button||c.type!=="click"))for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||c.type!=="click"){h={},j=[];for(d=0;d<q;d++)l=o[d],m=l.selector,h[m]===b&&(h[m]=l.needsContext?p(m,this).index(f)>=0:p.find(m,this,null,[f]).length),h[m]&&j.push(l);j.length&&u.push({elem:f,matches:j})}o.length>q&&u.push({elem:this,matches:o.slice(q)});for(d=0;d<u.length&&!c.isPropagationStopped();d++){i=u[d],c.currentTarget=i.elem;for(e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++){l=i.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))c.data=l.data,c.handleObj=l,g=((p.event.special[l.origType]||{}).handle||l.handler).apply(i.elem,r),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation()))}}return t.postDispatch&&t.postDispatch.call(this,c),c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[p.expando])return a;var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;)c=g[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||e),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},p.event.handle=p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]=="undefined"&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){if(this instanceof p.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0;else return new p.Event(a,b)},p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=bb;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=bb;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()},isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=p.nodeName(c,"input")||p.nodeName(c,"button")?c.form:b;d&&!p._data(d,"_submit_attached")&&(p.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),p._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),p.support.changeBubbles||(p.event.special.change={setup:function(){if(V.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")p.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,a,!0)});return!1}p.event.add(this,"beforeactivate._change",function(a){var b=a.target;V.test(b.nodeName)&&!p._data(b,"_change_attached")&&(p.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate("change",this.parentNode,a,!0)}),p._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),!V.test(this.nodeName)}}),p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){c++===0&&e.addEventListener(a,d,!0)},teardown:function(){--c===0&&e.removeEventListener(a,d,!0)}}}),p.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(h in a)this.on(h,c,d,a[h],f);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=ba;else if(!e)return this;return f===1&&(g=e,e=function(a){return p().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if(typeof a=="object"){for(f in a)this.off(f,c,a[f]);return this}if(c===!1||typeof c=="function")d=c,c=b;return d===!1&&(d=ba),this.each(function(){p.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return p.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid)||0)%d;return p._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function bc(a,b,c,d){c=c||[],b=b||r;var e,f,i,j,k=b.nodeType;if(!a||typeof a!="string")return c;if(k!==1&&k!==9)return[];i=g(b);if(!i&&!d)if(e=P.exec(a))if(j=e[1]){if(k===9){f=b.getElementById(j);if(!f||!f.parentNode)return c;if(f.id===j)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(j))&&h(b,f)&&f.id===j)return c.push(f),c}else{if(e[2])return w.apply(c,x.call(b.getElementsByTagName(a),0)),c;if((j=e[3])&&_&&b.getElementsByClassName)return w.apply(c,x.call(b.getElementsByClassName(j),0)),c}return bp(a.replace(L,"$1"),b,c,d,i)}function bd(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function be(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function bf(a){return z(function(b){return b=+b,z(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function bg(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}function bh(a,b){var c,d,f,g,h,i,j,k=C[o][a];if(k)return b?0:k.slice(0);h=a,i=[],j=e.preFilter;while(h){if(!c||(d=M.exec(h)))d&&(h=h.slice(d[0].length)),i.push(f=[]);c=!1;if(d=N.exec(h))f.push(c=new q(d.shift())),h=h.slice(c.length),c.type=d[0].replace(L," ");for(g in e.filter)(d=W[g].exec(h))&&(!j[g]||(d=j[g](d,r,!0)))&&(f.push(c=new q(d.shift())),h=h.slice(c.length),c.type=g,c.matches=d);if(!c)break}return b?h.length:h?bc.error(a):C(a,i).slice(0)}function bi(a,b,d){var e=b.dir,f=d&&b.dir==="parentNode",g=u++;return b.first?function(b,c,d){while(b=b[e])if(f||b.nodeType===1)return a(b,c,d)}:function(b,d,h){if(!h){var i,j=t+" "+g+" ",k=j+c;while(b=b[e])if(f||b.nodeType===1){if((i=b[o])===k)return b.sizset;if(typeof i=="string"&&i.indexOf(j)===0){if(b.sizset)return b}else{b[o]=k;if(a(b,d,h))return b.sizset=!0,b;b.sizset=!1}}}else while(b=b[e])if(f||b.nodeType===1)if(a(b,d,h))return b}}function bj(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function bk(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),j&&b.push(h);return g}function bl(a,b,c,d,e,f){return d&&!d[o]&&(d=bl(d)),e&&!e[o]&&(e=bl(e,f)),z(function(f,g,h,i){if(f&&e)return;var j,k,l,m=[],n=[],o=g.length,p=f||bo(b||"*",h.nodeType?[h]:h,[],f),q=a&&(f||!b)?bk(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;c&&c(q,r,h,i);if(d){l=bk(r,n),d(l,[],h,i),j=l.length;while(j--)if(k=l[j])r[n[j]]=!(q[n[j]]=k)}if(f){j=a&&r.length;while(j--)if(k=r[j])f[m[j]]=!(g[m[j]]=k)}else r=bk(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):w.apply(g,r)})}function bm(a){var b,c,d,f=a.length,g=e.relative[a[0].type],h=g||e.relative[" "],i=g?1:0,j=bi(function(a){return a===b},h,!0),k=bi(function(a){return y.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==l)||((b=c).nodeType?j(a,c,d):k(a,c,d))}];for(;i<f;i++)if(c=e.relative[a[i].type])m=[bi(bj(m),c)];else{c=e.filter[a[i].type].apply(null,a[i].matches);if(c[o]){d=++i;for(;d<f;d++)if(e.relative[a[d].type])break;return bl(i>1&&bj(m),i>1&&a.slice(0,i-1).join("").replace(L,"$1"),c,i<d&&bm(a.slice(i,d)),d<f&&bm(a=a.slice(d)),d<f&&a.join(""))}m.push(c)}return bj(m)}function bn(a,b){var d=b.length>0,f=a.length>0,g=function(h,i,j,k,m){var n,o,p,q=[],s=0,u="0",x=h&&[],y=m!=null,z=l,A=h||f&&e.find.TAG("*",m&&i.parentNode||i),B=t+=z==null?1:Math.E;y&&(l=i!==r&&i,c=g.el);for(;(n=A[u])!=null;u++){if(f&&n){for(o=0;p=a[o];o++)if(p(n,i,j)){k.push(n);break}y&&(t=B,c=++g.el)}d&&((n=!p&&n)&&s--,h&&x.push(n))}s+=u;if(d&&u!==s){for(o=0;p=b[o];o++)p(x,q,i,j);if(h){if(s>0)while(u--)!x[u]&&!q[u]&&(q[u]=v.call(k));q=bk(q)}w.apply(k,q),y&&!h&&q.length>0&&s+b.length>1&&bc.uniqueSort(k)}return y&&(t=B,l=z),x};return g.el=0,d?z(g):g}function bo(a,b,c,d){var e=0,f=b.length;for(;e<f;e++)bc(a,b[e],c,d);return c}function bp(a,b,c,d,f){var g,h,j,k,l,m=bh(a),n=m.length;if(!d&&m.length===1){h=m[0]=m[0].slice(0);if(h.length>2&&(j=h[0]).type==="ID"&&b.nodeType===9&&!f&&e.relative[h[1].type]){b=e.find.ID(j.matches[0].replace(V,""),b,f)[0];if(!b)return c;a=a.slice(h.shift().length)}for(g=W.POS.test(a)?-1:h.length-1;g>=0;g--){j=h[g];if(e.relative[k=j.type])break;if(l=e.find[k])if(d=l(j.matches[0].replace(V,""),R.test(h[0].type)&&b.parentNode||b,f)){h.splice(g,1),a=d.length&&h.join("");if(!a)return w.apply(c,x.call(d,0)),c;break}}}return i(a,m)(d,b,f,c,R.test(a)),c}function bq(){}var c,d,e,f,g,h,i,j,k,l,m=!0,n="undefined",o=("sizcache"+Math.random()).replace(".",""),q=String,r=a.document,s=r.documentElement,t=0,u=0,v=[].pop,w=[].push,x=[].slice,y=[].indexOf||function(a){var b=0,c=this.length;for(;b<c;b++)if(this[b]===a)return b;return-1},z=function(a,b){return a[o]=b==null||b,a},A=function(){var a={},b=[];return z(function(c,d){return b.push(c)>e.cacheLength&&delete a[b.shift()],a[c]=d},a)},B=A(),C=A(),D=A(),E="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",G=F.replace("w","w#"),H="([*^$|!~]?=)",I="\\["+E+"*("+F+")"+E+"*(?:"+H+E+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+G+")|)|)"+E+"*\\]",J=":("+F+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+I+")|[^:]|\\\\.)*|.*))\\)|)",K=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+E+"*((?:-\\d)?\\d*)"+E+"*\\)|)(?=[^-]|$)",L=new RegExp("^"+E+"+|((?:^|[^\\\\])(?:\\\\.)*)"+E+"+$","g"),M=new RegExp("^"+E+"*,"+E+"*"),N=new RegExp("^"+E+"*([\\x20\\t\\r\\n\\f>+~])"+E+"*"),O=new RegExp(J),P=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Q=/^:not/,R=/[\x20\t\r\n\f]*[+~]/,S=/:not\($/,T=/h\d/i,U=/input|select|textarea|button/i,V=/\\(?!\\)/g,W={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),NAME:new RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+J),POS:new RegExp(K,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+E+"*(even|odd|(([+-]|)(\\d*)n|)"+E+"*(?:([+-]|)"+E+"*(\\d+)|))"+E+"*\\)|)","i"),needsContext:new RegExp("^"+E+"*[>+~]|"+K,"i")},X=function(a){var b=r.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}},Y=X(function(a){return a.appendChild(r.createComment("")),!a.getElementsByTagName("*").length}),Z=X(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==n&&a.firstChild.getAttribute("href")==="#"}),$=X(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return b!=="boolean"&&b!=="string"}),_=X(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||!a.getElementsByClassName("e").length?!1:(a.lastChild.className="e",a.getElementsByClassName("e").length===2)}),ba=X(function(a){a.id=o+0,a.innerHTML="<a name='"+o+"'></a><div name='"+o+"'></div>",s.insertBefore(a,s.firstChild);var b=r.getElementsByName&&r.getElementsByName(o).length===2+r.getElementsByName(o+0).length;return d=!r.getElementById(o),s.removeChild(a),b});try{x.call(s.childNodes,0)[0].nodeType}catch(bb){x=function(a){var b,c=[];for(;b=this[a];a++)c.push(b);return c}}bc.matches=function(a,b){return bc(a,null,null,b)},bc.matchesSelector=function(a,b){return bc(b,null,null,[a]).length>0},f=bc.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=f(a)}else if(e===3||e===4)return a.nodeValue}else for(;b=a[d];d++)c+=f(b);return c},g=bc.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},h=bc.contains=s.contains?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d))}:s.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){while(b=b.parentNode)if(b===a)return!0;return!1},bc.attr=function(a,b){var c,d=g(a);return d||(b=b.toLowerCase()),(c=e.attrHandle[b])?c(a):d||$?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof a[b]=="boolean"?a[b]?b:null:c.specified?c.value:null:null)},e=bc.selectors={cacheLength:50,createPseudo:z,match:W,attrHandle:Z?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:d?function(a,b,c){if(typeof b.getElementById!==n&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==n&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==n&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:Y?function(a,b){if(typeof b.getElementsByTagName!==n)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if(a==="*"){var d,e=[],f=0;for(;d=c[f];f++)d.nodeType===1&&e.push(d);return e}return c},NAME:ba&&function(a,b){if(typeof b.getElementsByName!==n)return b.getElementsByName(name)},CLASS:_&&function(a,b,c){if(typeof b.getElementsByClassName!==n&&!c)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(V,""),a[3]=(a[4]||a[5]||"").replace(V,""),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]==="nth"?(a[2]||bc.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]==="even"||a[2]==="odd")),a[4]=+(a[6]+a[7]||a[2]==="odd")):a[2]&&bc.error(a[0]),a},PSEUDO:function(a){var b,c;if(W.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4])O.test(b)&&(c=bh(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b;return a.slice(0,3)}},filter:{ID:d?function(a){return a=a.replace(V,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(V,""),function(b){var c=typeof b.getAttributeNode!==n&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return a==="*"?function(){return!0}:(a=a.replace(V,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=B[o][a];return b||(b=B(a,new RegExp("(^|"+E+")"+a+"("+E+"|$)"))),function(a){return b.test(a.className||typeof a.getAttribute!==n&&a.getAttribute("class")||"")}},ATTR:function(a,b,c){return function(d,e){var f=bc.attr(d,a);return f==null?b==="!=":b?(f+="",b==="="?f===c:b==="!="?f!==c:b==="^="?c&&f.indexOf(c)===0:b==="*="?c&&f.indexOf(c)>-1:b==="$="?c&&f.substr(f.length-c.length)===c:b==="~="?(" "+f+" ").indexOf(c)>-1:b==="|="?f===c||f.substr(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d){return a==="nth"?function(a){var b,e,f=a.parentNode;if(c===1&&d===0)return!0;if(f){e=0;for(b=f.firstChild;b;b=b.nextSibling)if(b.nodeType===1){e++;if(a===b)break}}return e-=d,e===c||e%c===0&&e/c>=0}:function(b){var c=b;switch(a){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(a==="first")return!0;c=b;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0}}},PSEUDO:function(a,b){var c,d=e.pseudos[a]||e.setFilters[a.toLowerCase()]||bc.error("unsupported pseudo: "+a);return d[o]?d(b):d.length>1?(c=[a,a,"",b],e.setFilters.hasOwnProperty(a.toLowerCase())?z(function(a,c){var e,f=d(a,b),g=f.length;while(g--)e=y.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:z(function(a){var b=[],c=[],d=i(a.replace(L,"$1"));return d[o]?z(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)if(f=g[h])a[h]=!(b[h]=f)}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:z(function(a){return function(b){return bc(a,b).length>0}}),contains:z(function(a){return function(b){return(b.textContent||b.innerText||f(b)).indexOf(a)>-1}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!e.pseudos.empty(a)},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>"@"||(b=a.nodeType)===3||b===4)return!1;a=a.nextSibling}return!0},header:function(a){return T.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()==="input"&&(b=a.type)==="text"&&((c=a.getAttribute("type"))==null||c.toLowerCase()===b)},radio:bd("radio"),checkbox:bd("checkbox"),file:bd("file"),password:bd("password"),image:bd("image"),submit:be("submit"),reset:be("reset"),button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},input:function(a){return U.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:bf(function(a,b,c){return[0]}),last:bf(function(a,b,c){return[b-1]}),eq:bf(function(a,b,c){return[c<0?c+b:c]}),even:bf(function(a,b,c){for(var d=0;d<b;d+=2)a.push(d);return a}),odd:bf(function(a,b,c){for(var d=1;d<b;d+=2)a.push(d);return a}),lt:bf(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:bf(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},j=s.compareDocumentPosition?function(a,b){return a===b?(k=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b)return k=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,h=b.parentNode,i=g;if(g===h)return bg(a,b);if(!g)return-1;if(!h)return 1;while(i)e.unshift(i),i=i.parentNode;i=h;while(i)f.unshift(i),i=i.parentNode;c=e.length,d=f.length;for(var j=0;j<c&&j<d;j++)if(e[j]!==f[j])return bg(e[j],f[j]);return j===c?bg(a,f[j],-1):bg(e[j],b,1)},[0,0].sort(j),m=!k,bc.uniqueSort=function(a){var b,c=1;k=m,a.sort(j);if(k)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a},bc.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},i=bc.compile=function(a,b){var c,d=[],e=[],f=D[o][a];if(!f){b||(b=bh(a)),c=b.length;while(c--)f=bm(b[c]),f[o]?d.push(f):e.push(f);f=D(a,bn(e,d))}return f},r.querySelectorAll&&function(){var a,b=bp,c=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,e=[":focus"],f=[":active",":focus"],h=s.matchesSelector||s.mozMatchesSelector||s.webkitMatchesSelector||s.oMatchesSelector||s.msMatchesSelector;X(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||e.push("\\["+E+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||e.push(":checked")}),X(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&e.push("[*^$]="+E+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||e.push(":enabled",":disabled")}),e=new RegExp(e.join("|")),bp=function(a,d,f,g,h){if(!g&&!h&&(!e||!e.test(a))){var i,j,k=!0,l=o,m=d,n=d.nodeType===9&&a;if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){i=bh(a),(k=d.getAttribute("id"))?l=k.replace(c,"\\$&"):d.setAttribute("id",l),l="[id='"+l+"'] ",j=i.length;while(j--)i[j]=l+i[j].join("");m=R.test(a)&&d.parentNode||d,n=i.join(",")}if(n)try{return w.apply(f,x.call(m.querySelectorAll(n),0)),f}catch(p){}finally{k||d.removeAttribute("id")}}return b(a,d,f,g,h)},h&&(X(function(b){a=h.call(b,"div");try{h.call(b,"[test!='']:sizzle"),f.push("!=",J)}catch(c){}}),f=new RegExp(f.join("|")),bc.matchesSelector=function(b,c){c=c.replace(d,"='$1']");if(!g(b)&&!f.test(c)&&(!e||!e.test(c)))try{var i=h.call(b,c);if(i||a||b.document&&b.document.nodeType!==11)return i}catch(j){}return bc(c,null,null,[b]).length>0})}(),e.pseudos.nth=e.pseudos.eq,e.filters=bq.prototype=e.pseudos,e.setFilters=new bq,bc.attr=p.attr,p.find=bc,p.expr=bc.selectors,p.expr[":"]=p.expr.pseudos,p.unique=bc.uniqueSort,p.text=bc.getText,p.isXMLDoc=bc.isXML,p.contains=bc.contains}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\[\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!="string")return p(a).filter(function(){for(b=0,c=h.length;b<c;b++)if(p.contains(h[b],this))return!0});g=this.pushStack("","find",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b>0)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(p.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(bj(this,a,!1),"not",a)},filter:function(a){return this.pushStack(bj(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?bf.test(a)?p(a,this.context).index(this[0])>=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=bf.test(a)||typeof a!="string"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}return f=f.length>1?p.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?typeof a=="string"?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return bi(a,"nextSibling")},prev:function(a){return bi(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&typeof d=="string"&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(","))}}),p.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bl="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bm=/ jQuery\d+="(?:null|\d+)"/g,bn=/^\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bp=/<([\w:]+)/,bq=/<tbody/i,br=/<|&#?\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new RegExp("<(?:"+bl+")[\\s/>]","i"),bv=/^(?:checkbox|radio)$/,bw=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,by=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,bz={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bA=bk(e),bB=bA.appendChild(e.createElement("div"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,"X<div>","</div>"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector)}},after:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector)}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++)if(!a||p.filter(a,[c]).length)!b&&c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&p.cleanData(a.getElementsByTagName("*"));while(a.firstChild)a.removeChild(a.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(bm,""):b;if(typeof a=="string"&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(bo,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return bh(this[0])?this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this:p.isFunction(a)?this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=p(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l>1&&typeof j=="string"&&bw.test(j))return this.each(function(){p(this).domManip(a,c,d)});if(p.isFunction(j))return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&p.nodeName(f,"tr");for(h=e.cacheable||l-1;i<l;i++)d.call(c&&p.nodeName(this[i],"table")?bC(this[i],"tbody"):this[i],i===h?g:p.clone(g,!0,!0))}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):p.error("no ajax"):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(by,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),p.buildFragment=function(a,c,d){var f,g,h,i=a[0];return c=c||e,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,a.length===1&&typeof i=="string"&&i.length<512&&c===e&&i.charAt(0)==="<"&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g}},p.fragments={},p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1)return g[b](this[0]),this;for(;e<h;e++)d=(e>0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!bu.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild));if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){bE(a,g),d=bF(a),e=bF(g);for(f=0;d[f];++f)e[f]&&bE(d[f],e[f])}if(b){bD(a,g);if(c){d=bF(a),e=bF(g);for(f=0;d[f];++f)bD(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=b===e&&bA,t=[];if(!b||typeof b.createDocumentFragment=="undefined")b=e;for(f=0;(h=a[f])!=null;f++){typeof h=="number"&&(h+="");if(!h)continue;if(typeof h=="string")if(!br.test(h))h=b.createTextNode(h);else{s=s||bk(b),l=b.createElement("div"),s.appendChild(l),h=h.replace(bo,"<$1></$2>"),i=(bp.exec(h)||["",""])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];while(k--)l=l.lastChild;if(!p.support.tbody){m=bq.test(h),n=i==="table"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]==="<table>"&&!m?l.childNodes:[];for(g=n.length-1;g>=0;--g)p.nodeName(n[g],"tbody")&&!n[g].childNodes.length&&n[g].parentNode.removeChild(n[g])}!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l.parentNode.removeChild(l)}h.nodeType?t.push(h):p.merge(t,h)}l&&(h=l=s=null);if(!p.support.appendChecked)for(f=0;(h=t[f])!=null;f++)p.nodeName(h,"input")?bG(h):typeof h.getElementsByTagName!="undefined"&&p.grep(h.getElementsByTagName("input"),bG);if(c){q=function(a){if(!a.type||bx.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(f=0;(h=t[f])!=null;f++)if(!p.nodeName(h,"script")||!q(h))c.appendChild(h),typeof h.getElementsByTagName!="undefined"&&(r=p.grep(p.merge([],h.getElementsByTagName("script")),q),t.splice.apply(t,[f+1,0].concat(r)),f+=r.length)}return t},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++)if(b||p.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events)for(f in c.events)k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(c,d){return d&&d instanceof p&&!(d instanceof a)&&(d=a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(e);return a}}();var bH,bI,bJ,bK=/alpha\([^)]*\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^(none|table(?!-c[ea]).+)/,bO=/^margin/,bP=new RegExp("^("+q+")(.*)$","i"),bQ=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),bR=new RegExp("^([-+])=("+q+")","i"),bS={},bT={position:"absolute",visibility:"hidden",display:"block"},bU={letterSpacing:0,fontWeight:400},bV=["Top","Right","Bottom","Left"],bW=["Webkit","O","Moz","ms"],bX=p.fn.toggle;p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length>1)},show:function(){return b$(this,!0)},hide:function(){return b$(this)},toggle:function(a,b){var c=typeof a=="boolean";return p.isFunction(a)&&p.isFunction(b)?bX.apply(this,arguments):this.each(function(){(c?a:bZ(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,"opacity");return c===""?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=bY(j,i)),h=p.cssHooks[c]||p.cssHooks[i];if(d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];g=typeof d,g==="string"&&(f=bR.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d))return;g==="number"&&!p.cssNumber[i]&&(d+="px");if(!h||!("set"in h)||(d=h.set(a,d,e))!==b)try{j[c]=d}catch(k){}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bY(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),f==="normal"&&c in bU&&(f=bU[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?bH=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h[c],d===""&&!p.contains(b.ownerDocument,b)&&(d=p.style(b,c)),bQ.test(d)&&bO.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bQ.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),e===""?"auto":e}),p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth===0&&bN.test(bH(a,"display"))?p.swap(a,bT,function(){return cb(a,b,d)}):cb(a,b,d)},set:function(a,c,d){return b_(a,c,d?ca(a,b,d,p.support.boxSizing&&p.css(a,"boxSizing")==="border-box"):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&p.trim(f.replace(bK,""))===""&&c.removeAttribute){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bK.test(f)?f.replace(bK,e):f+" "+e}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){if(b)return bH(a,"marginRight")})}}),!p.support.pixelPosition&&p.fn.position&&p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bQ.test(d)?p(a).position()[b]+"px":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||bH(a,"display"))==="none"},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)}),p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bV[d]+b]=e[d]||e[d-2]||e[0];return f}},bO.test(a)||(p.cssHooks[a+b].set=b_)});var cd=/%20/g,ce=/\[\]$/,cf=/\r?\n/g,cg=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ch=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ch.test(this.nodeName)||cg.test(this.type))}).map(function(a,b){var c=p(this).val();return c==null?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(cf,"\r\n")}}):{name:b.name,value:c.replace(cf,"\r\n")}}).get()}}),p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():b==null?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else for(d in a)ci(d,a[d],c,f);return e.join("&").replace(cd,"+")};var cj,ck,cl=/#.*$/,cm=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,cn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,co=/^(?:GET|HEAD)$/,cp=/^\/\//,cq=/\?/,cr=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cs=/([?&])_=[^&]*/,ct=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,cu=p.fn.load,cv={},cw={},cx=["*/"]+["*"];try{ck=f.href}catch(cy){ck=e.createElement("a"),ck.href="",ck=ck.href}cj=ct.exec(ck.toLowerCase())||[],p.fn.load=function(a,c,d){if(typeof a!="string"&&cu)return cu.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):c&&typeof c=="object"&&(f="POST"),p.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p("<div>").append(a.replace(cr,"")).find(e):a)}),this},p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}}),p.each(["get","post"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?cB(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cB(a,b),a},ajaxSettings:{url:ck,isLocal:cn.test(cj[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cx},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cz(cv),ajaxTransport:cz(cw),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2)return;v=2,h&&clearTimeout(h),g=b,e=i||"",x.readyState=a>0?4:0,f&&(u=cC(l,x,f));if(a>=200&&a<300||a===304)l.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(p.lastModified[d]=w),w=x.getResponseHeader("Etag"),w&&(p.etag[d]=w)),a===304?(y="notmodified",k=!0):(k=cD(l,u),y=k.state,s=k.data,t=k.error,k=!t);else{t=y;if(!y||a)y="error",a<0&&(a=0)}x.status=a,x.statusText=(c||y)+"",k?o.resolveWith(m,[s,y,x]):o.rejectWith(m,[x,y,t]),x.statusCode(r),r=b,j&&n.trigger("ajax"+(k?"Success":"Error"),[x,l,k?s:t]),q.fireWith(m,[x,y]),j&&(n.trigger("ajaxComplete",[x,l]),--p.active||p.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks("once memory"),r=l.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return this},getAllResponseHeaders:function(){return v===2?e:null},getResponseHeader:function(a){var c;if(v===2){if(!f){f={};while(c=cm.exec(e))f[c[1].toLowerCase()]=c[2]}c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(l.mimeType=a),this},abort:function(a){return a=a||w,g&&g.abort(a),y(0,a),this}};o.promise(x),x.success=x.done,x.error=x.fail,x.complete=q.add,x.statusCode=function(a){if(a){var b;if(v<2)for(b in a)r[b]=[r[b],a[b]];else b=a[x.status],x.always(b)}return this},l.url=((a||l.url)+"").replace(cl,"").replace(cp,cj[1]+"//"),l.dataTypes=p.trim(l.dataType||"*").toLowerCase().split(s),l.crossDomain==null&&(i=ct.exec(l.url.toLowerCase())||!1,l.crossDomain=i&&i.join(":")+(i[3]?"":i[1]==="http:"?80:443)!==cj.join(":")+(cj[3]?"":cj[1]==="http:"?80:443)),l.data&&l.processData&&typeof l.data!="string"&&(l.data=p.param(l.data,l.traditional)),cA(cv,l,c,x);if(v===2)return x;j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!co.test(l.type),j&&p.active++===0&&p.event.trigger("ajaxStart");if(!l.hasContent){l.data&&(l.url+=(cq.test(l.url)?"&":"?")+l.data,delete l.data),d=l.url;if(l.cache===!1){var z=p.now(),A=l.url.replace(cs,"$1_="+z);l.url=A+(A===l.url?(cq.test(l.url)?"&":"?")+"_="+z:"")}}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader("If-Modified-Since",p.lastModified[d]),p.etag[d]&&x.setRequestHeader("If-None-Match",p.etag[d])),x.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+cx+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)x.setRequestHeader(k,l.headers[k]);if(!l.beforeSend||l.beforeSend.call(m,x,l)!==!1&&v!==2){w="abort";for(k in{success:1,error:1,complete:1})x[k](l[k]);g=cA(cw,l,c,x);if(!g)y(-1,"No Transport");else{x.readyState=1,j&&n.trigger("ajaxSend",[x,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){x.abort("timeout")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(v<2)y(-1,B);else throw B}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var cE=[],cF=/\?/,cG=/(=)\?(?=&|$)|\?\?/,cH=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=cE.pop()||p.expando+"_"+cH++;return this[a]=!0,a}}),p.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&cG.test(j),m=k&&!l&&typeof i=="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&cG.test(i);if(c.dataTypes[0]==="jsonp"||l||m)return f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cG,"$1"+f):m?c.data=i.replace(cG,"$1"+f):k&&(c.url+=(cF.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||p.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cE.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),"script"}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return p.globalEval(a),a}}}),p.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),p.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=e.head||e.getElementsByTagName("head")[0]||e.documentElement;return{send:function(f,g){c=e.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,"success")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cI,cJ=a.ActiveXObject?function(){for(var a in cI)cI[a](0,1)}:!1,cK=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&cL()||cM()}:cL,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(p.ajaxSettings.xhr()),p.support.ajax&&p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||i.readyState===4)){d=b,g&&(i.onreadystatechange=p.noop,cJ&&delete cI[g]);if(e)i.readyState!==4&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204)}}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?i.readyState===4?setTimeout(d,0):(g=++cK,cJ&&(cI||(cI={},p(a).unload(cJ)),cI[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var cN,cO,cP=/^(?:toggle|show|hide)$/,cQ=new RegExp("^(?:([-+])=|)("+q+")([a-z%]*)$","i"),cR=/queueHooks$/,cS=[cY],cT={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=cQ.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){c=+f[2],d=f[3]||(p.cssNumber[a]?"":"px");if(d!=="px"&&h){h=p.css(e.elem,a,!0)||c||1;do i=i||".5",h=h/i,p.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&i!==1&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};p.Animation=p.extend(cW,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++)c=a[d],cT[c]=cT[c]||[],cT[c].unshift(b)},prefilter:function(a,b){b?cS.unshift(a):cS.push(a)}}),p.Tween=cZ,cZ.prototype={constructor:cZ,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(p.cssNumber[c]?"":"px")},cur:function(){var a=cZ.propHooks[this.prop];return a&&a.get?a.get(this):cZ.propHooks._default.get(this)},run:function(a){var b,c=cZ.propHooks[this.prop];return this.options.duration?this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cZ.propHooks._default.set(this),this}},cZ.prototype.init.prototype=cZ.prototype,cZ.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=p.css(a.elem,a.prop,!1,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},cZ.propHooks.scrollTop=cZ.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return d==null||typeof d=="boolean"||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(c$(b,!0),d,e,f)}}),p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(bZ).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){var b=cW(this,p.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=a!=null&&a+"queueHooks",f=p.timers,g=p._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cR.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:c$("show"),slideUp:c$("hide"),slideToggle:c$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),p.speed=function(a,b,c){var d=a&&typeof a=="object"?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},p.timers=[],p.fx=cZ.prototype.init,p.fx.tick=function(){var a,b=p.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cO&&(cO=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cO),cO=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var c_=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;if(!l)return;return(d=l.body)===k?p.offset.bodyOffset(k):(c=l.documentElement,p.contains(c,k)?(typeof k.getBoundingClientRect!="undefined"&&(j=k.getBoundingClientRect()),e=da(l),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,i=e.pageXOffset||c.scrollLeft,{top:j.top+h-f,left:j.left+i-g}):j)},p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,"position");d==="static"&&(a.style.position="relative");var e=p(a),f=e.offset(),g=p.css(a,"top"),h=p.css(a,"left"),i=(d==="absolute"||d==="fixed")&&p.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)}},p.fn.extend({position:function(){if(!this[0])return;var a=this[0],b=this.offsetParent(),c=this.offset(),d=c_.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,"marginTop"))||0,c.left-=parseFloat(p.css(a,"marginLeft"))||0,d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&!c_.test(a.nodeName)&&p.css(a,"position")==="static")a=a.offsetParent;return a||e.body})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=da(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!="boolean"),h=d||(e===!0||f===!0?"margin":"border");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement["client"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=p,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})})(window);
$(document).ready(function(){if($('body').data('debug_url')){function svErrHandler(message,url,line){var debugUrl=$('body').data('debug_url');if(debugUrl){$.ajax({url:debugUrl,data:{'page':location.href,'userAgent':navigator.userAgent,'message':message,'url':url,'line':line},type:'get'});}}
window.onerror=svErrHandler;}});
/* SockJS client, version 0.3.4, http://sockjs.org, MIT License

Copyright (c) 2011-2012 VMware, Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

// JSON2 by Douglas Crockford (minified).
var JSON;JSON||(JSON={}),function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g;return e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g;return e}}function quote(a){escapable.lastIndex=0;return escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return a<10?"0"+a:a}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")})}()

SockJS=function(){var a=document,b=window,c={},d=function(){};d.prototype.addEventListener=function(a,b){this._listeners||(this._listeners={}),a in this._listeners||(this._listeners[a]=[]);var d=this._listeners[a];c.arrIndexOf(d,b)===-1&&d.push(b);return},d.prototype.removeEventListener=function(a,b){if(!(this._listeners&&a in this._listeners))return;var d=this._listeners[a],e=c.arrIndexOf(d,b);if(e!==-1){d.length>1?this._listeners[a]=d.slice(0,e).concat(d.slice(e+1)):delete this._listeners[a];return}return},d.prototype.dispatchEvent=function(a){var b=a.type,c=Array.prototype.slice.call(arguments,0);this["on"+b]&&this["on"+b].apply(this,c);if(this._listeners&&b in this._listeners)for(var d=0;d<this._listeners[b].length;d++)this._listeners[b][d].apply(this,c)};var e=function(a,b){this.type=a;if(typeof b!="undefined")for(var c in b){if(!b.hasOwnProperty(c))continue;this[c]=b[c]}};e.prototype.toString=function(){var a=[];for(var b in this){if(!this.hasOwnProperty(b))continue;var c=this[b];typeof c=="function"&&(c="[function]"),a.push(b+"="+c)}return"SimpleEvent("+a.join(", ")+")"};var f=function(a){var b=this;b._events=a||[],b._listeners={}};f.prototype.emit=function(a){var b=this;b._verifyType(a);if(b._nuked)return;var c=Array.prototype.slice.call(arguments,1);b["on"+a]&&b["on"+a].apply(b,c);if(a in b._listeners)for(var d=0;d<b._listeners[a].length;d++)b._listeners[a][d].apply(b,c)},f.prototype.on=function(a,b){var c=this;c._verifyType(a);if(c._nuked)return;a in c._listeners||(c._listeners[a]=[]),c._listeners[a].push(b)},f.prototype._verifyType=function(a){var b=this;c.arrIndexOf(b._events,a)===-1&&c.log("Event "+JSON.stringify(a)+" not listed "+JSON.stringify(b._events)+" in "+b)},f.prototype.nuke=function(){var a=this;a._nuked=!0;for(var b=0;b<a._events.length;b++)delete a[a._events[b]];a._listeners={}};var g="abcdefghijklmnopqrstuvwxyz0123456789_";c.random_string=function(a,b){b=b||g.length;var c,d=[];for(c=0;c<a;c++)d.push(g.substr(Math.floor(Math.random()*b),1));return d.join("")},c.random_number=function(a){return Math.floor(Math.random()*a)},c.random_number_string=function(a){var b=(""+(a-1)).length,d=Array(b+1).join("0");return(d+c.random_number(a)).slice(-b)},c.getOrigin=function(a){a+="/";var b=a.split("/").slice(0,3);return b.join("/")},c.isSameOriginUrl=function(a,c){return c||(c=b.location.href),a.split("/").slice(0,3).join("/")===c.split("/").slice(0,3).join("/")},c.getParentDomain=function(a){if(/^[0-9.]*$/.test(a))return a;if(/^\[/.test(a))return a;if(!/[.]/.test(a))return a;var b=a.split(".").slice(1);return b.join(".")},c.objectExtend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a};var h="_jp";c.polluteGlobalNamespace=function(){h in b||(b[h]={})},c.closeFrame=function(a,b){return"c"+JSON.stringify([a,b])},c.userSetCode=function(a){return a===1e3||a>=3e3&&a<=4999},c.countRTO=function(a){var b;return a>100?b=3*a:b=a+200,b},c.log=function(){b.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},c.bind=function(a,b){return a.bind?a.bind(b):function(){return a.apply(b,arguments)}},c.flatUrl=function(a){return a.indexOf("?")===-1&&a.indexOf("#")===-1},c.amendUrl=function(b){var d=a.location;if(!b)throw new Error("Wrong url for SockJS");if(!c.flatUrl(b))throw new Error("Only basic urls are supported in SockJS");return b.indexOf("//")===0&&(b=d.protocol+b),b.indexOf("/")===0&&(b=d.protocol+"//"+d.host+b),b=b.replace(/[/]+$/,""),b},c.arrIndexOf=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},c.arrSkip=function(a,b){var d=c.arrIndexOf(a,b);if(d===-1)return a.slice();var e=a.slice(0,d);return e.concat(a.slice(d+1))},c.isArray=Array.isArray||function(a){return{}.toString.call(a).indexOf("Array")>=0},c.delay=function(a,b){return typeof a=="function"&&(b=a,a=0),setTimeout(b,a)};var i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j={"\0":"\\u0000","\x01":"\\u0001","\x02":"\\u0002","\x03":"\\u0003","\x04":"\\u0004","\x05":"\\u0005","\x06":"\\u0006","\x07":"\\u0007","\b":"\\b","\t":"\\t","\n":"\\n","\x0b":"\\u000b","\f":"\\f","\r":"\\r","\x0e":"\\u000e","\x0f":"\\u000f","\x10":"\\u0010","\x11":"\\u0011","\x12":"\\u0012","\x13":"\\u0013","\x14":"\\u0014","\x15":"\\u0015","\x16":"\\u0016","\x17":"\\u0017","\x18":"\\u0018","\x19":"\\u0019","\x1a":"\\u001a","\x1b":"\\u001b","\x1c":"\\u001c","\x1d":"\\u001d","\x1e":"\\u001e","\x1f":"\\u001f",'"':'\\"',"\\":"\\\\","\x7f":"\\u007f","\x80":"\\u0080","\x81":"\\u0081","\x82":"\\u0082","\x83":"\\u0083","\x84":"\\u0084","\x85":"\\u0085","\x86":"\\u0086","\x87":"\\u0087","\x88":"\\u0088","\x89":"\\u0089","\x8a":"\\u008a","\x8b":"\\u008b","\x8c":"\\u008c","\x8d":"\\u008d","\x8e":"\\u008e","\x8f":"\\u008f","\x90":"\\u0090","\x91":"\\u0091","\x92":"\\u0092","\x93":"\\u0093","\x94":"\\u0094","\x95":"\\u0095","\x96":"\\u0096","\x97":"\\u0097","\x98":"\\u0098","\x99":"\\u0099","\x9a":"\\u009a","\x9b":"\\u009b","\x9c":"\\u009c","\x9d":"\\u009d","\x9e":"\\u009e","\x9f":"\\u009f","\xad":"\\u00ad","\u0600":"\\u0600","\u0601":"\\u0601","\u0602":"\\u0602","\u0603":"\\u0603","\u0604":"\\u0604","\u070f":"\\u070f","\u17b4":"\\u17b4","\u17b5":"\\u17b5","\u200c":"\\u200c","\u200d":"\\u200d","\u200e":"\\u200e","\u200f":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","\u202a":"\\u202a","\u202b":"\\u202b","\u202c":"\\u202c","\u202d":"\\u202d","\u202e":"\\u202e","\u202f":"\\u202f","\u2060":"\\u2060","\u2061":"\\u2061","\u2062":"\\u2062","\u2063":"\\u2063","\u2064":"\\u2064","\u2065":"\\u2065","\u2066":"\\u2066","\u2067":"\\u2067","\u2068":"\\u2068","\u2069":"\\u2069","\u206a":"\\u206a","\u206b":"\\u206b","\u206c":"\\u206c","\u206d":"\\u206d","\u206e":"\\u206e","\u206f":"\\u206f","\ufeff":"\\ufeff","\ufff0":"\\ufff0","\ufff1":"\\ufff1","\ufff2":"\\ufff2","\ufff3":"\\ufff3","\ufff4":"\\ufff4","\ufff5":"\\ufff5","\ufff6":"\\ufff6","\ufff7":"\\ufff7","\ufff8":"\\ufff8","\ufff9":"\\ufff9","\ufffa":"\\ufffa","\ufffb":"\\ufffb","\ufffc":"\\ufffc","\ufffd":"\\ufffd","\ufffe":"\\ufffe","\uffff":"\\uffff"},k=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,l,m=JSON&&JSON.stringify||function(a){return i.lastIndex=0,i.test(a)&&(a=a.replace(i,function(a){return j[a]})),'"'+a+'"'},n=function(a){var b,c={},d=[];for(b=0;b<65536;b++)d.push(String.fromCharCode(b));return a.lastIndex=0,d.join("").replace(a,function(a){return c[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),""}),a.lastIndex=0,c};c.quote=function(a){var b=m(a);return k.lastIndex=0,k.test(b)?(l||(l=n(k)),b.replace(k,function(a){return l[a]})):b};var o=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];c.probeProtocols=function(){var a={};for(var b=0;b<o.length;b++){var c=o[b];a[c]=y[c]&&y[c].enabled()}return a},c.detectProtocols=function(a,b,c){var d={},e=[];b||(b=o);for(var f=0;f<b.length;f++){var g=b[f];d[g]=a[g]}var h=function(a){var b=a.shift();d[b]?e.push(b):a.length>0&&h(a)};return c.websocket!==!1&&h(["websocket"]),d["xhr-streaming"]&&!c.null_origin?e.push("xhr-streaming"):d["xdr-streaming"]&&!c.cookie_needed&&!c.null_origin?e.push("xdr-streaming"):h(["iframe-eventsource","iframe-htmlfile"]),d["xhr-polling"]&&!c.null_origin?e.push("xhr-polling"):d["xdr-polling"]&&!c.cookie_needed&&!c.null_origin?e.push("xdr-polling"):h(["iframe-xhr-polling","jsonp-polling"]),e};var p="_sockjs_global";c.createHook=function(){var a="a"+c.random_string(8);if(!(p in b)){var d={};b[p]=function(a){return a in d||(d[a]={id:a,del:function(){delete d[a]}}),d[a]}}return b[p](a)},c.attachMessage=function(a){c.attachEvent("message",a)},c.attachEvent=function(c,d){typeof b.addEventListener!="undefined"?b.addEventListener(c,d,!1):(a.attachEvent("on"+c,d),b.attachEvent("on"+c,d))},c.detachMessage=function(a){c.detachEvent("message",a)},c.detachEvent=function(c,d){typeof b.addEventListener!="undefined"?b.removeEventListener(c,d,!1):(a.detachEvent("on"+c,d),b.detachEvent("on"+c,d))};var q={},r=!1,s=function(){for(var a in q)q[a](),delete q[a]},t=function(){if(r)return;r=!0,s()};c.attachEvent("unload",t),c.unload_add=function(a){var b=c.random_string(8);return q[b]=a,r&&c.delay(s),b},c.unload_del=function(a){a in q&&delete q[a]},c.createIframe=function(b,d){var e=a.createElement("iframe"),f,g,h=function(){clearTimeout(f);try{e.onload=null}catch(a){}e.onerror=null},i=function(){e&&(h(),setTimeout(function(){e&&e.parentNode.removeChild(e),e=null},0),c.unload_del(g))},j=function(a){e&&(i(),d(a))},k=function(a,b){try{e&&e.contentWindow&&e.contentWindow.postMessage(a,b)}catch(c){}};return e.src=b,e.style.display="none",e.style.position="absolute",e.onerror=function(){j("onerror")},e.onload=function(){clearTimeout(f),f=setTimeout(function(){j("onload timeout")},2e3)},a.body.appendChild(e),f=setTimeout(function(){j("timeout")},15e3),g=c.unload_add(i),{post:k,cleanup:i,loaded:h}},c.createHtmlfile=function(a,d){var e=new ActiveXObject("htmlfile"),f,g,i,j=function(){clearTimeout(f)},k=function(){e&&(j(),c.unload_del(g),i.parentNode.removeChild(i),i=e=null,CollectGarbage())},l=function(a){e&&(k(),d(a))},m=function(a,b){try{i&&i.contentWindow&&i.contentWindow.postMessage(a,b)}catch(c){}};e.open(),e.write('<html><script>document.domain="'+document.domain+'";'+"</s"+"cript></html>"),e.close(),e.parentWindow[h]=b[h];var n=e.createElement("div");return e.body.appendChild(n),i=e.createElement("iframe"),n.appendChild(i),i.src=a,f=setTimeout(function(){l("timeout")},15e3),g=c.unload_add(k),{post:m,cleanup:k,loaded:j}};var u=function(){};u.prototype=new f(["chunk","finish"]),u.prototype._start=function(a,d,e,f){var g=this;try{g.xhr=new XMLHttpRequest}catch(h){}if(!g.xhr)try{g.xhr=new b.ActiveXObject("Microsoft.XMLHTTP")}catch(h){}if(b.ActiveXObject||b.XDomainRequest)d+=(d.indexOf("?")===-1?"?":"&")+"t="+ +(new Date);g.unload_ref=c.unload_add(function(){g._cleanup(!0)});try{g.xhr.open(a,d,!0)}catch(i){g.emit("finish",0,""),g._cleanup();return}if(!f||!f.no_credentials)g.xhr.withCredentials="true";if(f&&f.headers)for(var j in f.headers)g.xhr.setRequestHeader(j,f.headers[j]);g.xhr.onreadystatechange=function(){if(g.xhr){var a=g.xhr;switch(a.readyState){case 3:try{var b=a.status,c=a.responseText}catch(a){}b===1223&&(b=204),c&&c.length>0&&g.emit("chunk",b,c);break;case 4:var b=a.status;b===1223&&(b=204),g.emit("finish",b,a.responseText),g._cleanup(!1)}}},g.xhr.send(e)},u.prototype._cleanup=function(a){var b=this;if(!b.xhr)return;c.unload_del(b.unload_ref),b.xhr.onreadystatechange=function(){};if(a)try{b.xhr.abort()}catch(d){}b.unload_ref=b.xhr=null},u.prototype.close=function(){var a=this;a.nuke(),a._cleanup(!0)};var v=c.XHRCorsObject=function(){var a=this,b=arguments;c.delay(function(){a._start.apply(a,b)})};v.prototype=new u;var w=c.XHRLocalObject=function(a,b,d){var e=this;c.delay(function(){e._start(a,b,d,{no_credentials:!0})})};w.prototype=new u;var x=c.XDRObject=function(a,b,d){var e=this;c.delay(function(){e._start(a,b,d)})};x.prototype=new f(["chunk","finish"]),x.prototype._start=function(a,b,d){var e=this,f=new XDomainRequest;b+=(b.indexOf("?")===-1?"?":"&")+"t="+ +(new Date);var g=f.ontimeout=f.onerror=function(){e.emit("finish",0,""),e._cleanup(!1)};f.onprogress=function(){e.emit("chunk",200,f.responseText)},f.onload=function(){e.emit("finish",200,f.responseText),e._cleanup(!1)},e.xdr=f,e.unload_ref=c.unload_add(function(){e._cleanup(!0)});try{e.xdr.open(a,b),e.xdr.send(d)}catch(h){g()}},x.prototype._cleanup=function(a){var b=this;if(!b.xdr)return;c.unload_del(b.unload_ref),b.xdr.ontimeout=b.xdr.onerror=b.xdr.onprogress=b.xdr.onload=null;if(a)try{b.xdr.abort()}catch(d){}b.unload_ref=b.xdr=null},x.prototype.close=function(){var a=this;a.nuke(),a._cleanup(!0)},c.isXHRCorsCapable=function(){return b.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:b.XDomainRequest&&a.domain?2:L.enabled()?3:4};var y=function(a,d,e){if(this===b)return new y(a,d,e);var f=this,g;f._options={devel:!1,debug:!1,protocols_whitelist:[],info:undefined,rtt:undefined},e&&c.objectExtend(f._options,e),f._base_url=c.amendUrl(a),f._server=f._options.server||c.random_number_string(1e3),f._options.protocols_whitelist&&f._options.protocols_whitelist.length?g=f._options.protocols_whitelist:(typeof d=="string"&&d.length>0?g=[d]:c.isArray(d)?g=d:g=null,g&&f._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),f._protocols=[],f.protocol=null,f.readyState=y.CONNECTING,f._ir=S(f._base_url),f._ir.onfinish=function(a,b){f._ir=null,a?(f._options.info&&(a=c.objectExtend(a,f._options.info)),f._options.rtt&&(b=f._options.rtt),f._applyInfo(a,b,g),f._didClose()):f._didClose(1002,"Can't connect to server",!0)}};y.prototype=new d,y.version="0.3.4",y.CONNECTING=0,y.OPEN=1,y.CLOSING=2,y.CLOSED=3,y.prototype._debug=function(){this._options.debug&&c.log.apply(c,arguments)},y.prototype._dispatchOpen=function(){var a=this;a.readyState===y.CONNECTING?(a._transport_tref&&(clearTimeout(a._transport_tref),a._transport_tref=null),a.readyState=y.OPEN,a.dispatchEvent(new e("open"))):a._didClose(1006,"Server lost session")},y.prototype._dispatchMessage=function(a){var b=this;if(b.readyState!==y.OPEN)return;b.dispatchEvent(new e("message",{data:a}))},y.prototype._dispatchHeartbeat=function(a){var b=this;if(b.readyState!==y.OPEN)return;b.dispatchEvent(new e("heartbeat",{}))},y.prototype._didClose=function(a,b,d){var f=this;if(f.readyState!==y.CONNECTING&&f.readyState!==y.OPEN&&f.readyState!==y.CLOSING)throw new Error("INVALID_STATE_ERR");f._ir&&(f._ir.nuke(),f._ir=null),f._transport&&(f._transport.doCleanup(),f._transport=null);var g=new e("close",{code:a,reason:b,wasClean:c.userSetCode(a)});if(!c.userSetCode(a)&&f.readyState===y.CONNECTING&&!d){if(f._try_next_protocol(g))return;g=new e("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:g})}f.readyState=y.CLOSED,c.delay(function(){f.dispatchEvent(g)})},y.prototype._didMessage=function(a){var b=this,c=a.slice(0,1);switch(c){case"o":b._dispatchOpen();break;case"a":var d=JSON.parse(a.slice(1)||"[]");for(var e=0;e<d.length;e++)b._dispatchMessage(d[e]);break;case"m":var d=JSON.parse(a.slice(1)||"null");b._dispatchMessage(d);break;case"c":var d=JSON.parse(a.slice(1)||"[]");b._didClose(d[0],d[1]);break;case"h":b._dispatchHeartbeat()}},y.prototype._try_next_protocol=function(b){var d=this;d.protocol&&(d._debug("Closed transport:",d.protocol,""+b),d.protocol=null),d._transport_tref&&(clearTimeout(d._transport_tref),d._transport_tref=null);for(;;){var e=d.protocol=d._protocols.shift();if(!e)return!1;if(y[e]&&y[e].need_body===!0&&(!a.body||typeof a.readyState!="undefined"&&a.readyState!=="complete"))return d._protocols.unshift(e),d.protocol="waiting-for-load",c.attachEvent("load",function(){d._try_next_protocol()}),!0;if(!!y[e]&&!!y[e].enabled(d._options)){var f=y[e].roundTrips||1,g=(d._options.rto||0)*f||5e3;d._transport_tref=c.delay(g,function(){d.readyState===y.CONNECTING&&d._didClose(2007,"Transport timeouted")});var h=c.random_string(8),i=d._base_url+"/"+d._server+"/"+h;return d._debug("Opening transport:",e," url:"+i," RTO:"+d._options.rto),d._transport=new y[e](d,i,d._base_url),!0}d._debug("Skipping transport:",e)}},y.prototype.close=function(a,b){var d=this;if(a&&!c.userSetCode(a))throw new Error("INVALID_ACCESS_ERR");return d.readyState!==y.CONNECTING&&d.readyState!==y.OPEN?!1:(d.readyState=y.CLOSING,d._didClose(a||1e3,b||"Normal closure"),!0)},y.prototype.send=function(a){var b=this;if(b.readyState===y.CONNECTING)throw new Error("INVALID_STATE_ERR");return b.readyState===y.OPEN&&b._transport.doSend(c.quote(""+a)),!0},y.prototype._applyInfo=function(b,d,e){var f=this;f._options.info=b,f._options.rtt=d,f._options.rto=c.countRTO(d),f._options.info.null_origin=!a.domain;var g=c.probeProtocols();f._protocols=c.detectProtocols(g,e,b)};var z=y.websocket=function(a,d){var e=this,f=d+"/websocket";f.slice(0,5)==="https"?f="wss"+f.slice(5):f="ws"+f.slice(4),e.ri=a,e.url=f;var g=b.WebSocket||b.MozWebSocket;e.ws=new g(e.url),e.ws.onmessage=function(a){e.ri._didMessage(a.data)},e.unload_ref=c.unload_add(function(){e.ws.close()}),e.ws.onclose=function(){e.ri._didMessage(c.closeFrame(1006,"WebSocket connection broken"))}};z.prototype.doSend=function(a){this.ws.send("["+a+"]")},z.prototype.doCleanup=function(){var a=this,b=a.ws;b&&(b.onmessage=b.onclose=null,b.close(),c.unload_del(a.unload_ref),a.unload_ref=a.ri=a.ws=null)},z.enabled=function(){return!!b.WebSocket||!!b.MozWebSocket},z.roundTrips=2;var A=function(){};A.prototype.send_constructor=function(a){var b=this;b.send_buffer=[],b.sender=a},A.prototype.doSend=function(a){var b=this;b.send_buffer.push(a),b.send_stop||b.send_schedule()},A.prototype.send_schedule_wait=function(){var a=this,b;a.send_stop=function(){a.send_stop=null,clearTimeout(b)},b=c.delay(25,function(){a.send_stop=null,a.send_schedule()})},A.prototype.send_schedule=function(){var a=this;if(a.send_buffer.length>0){var b="["+a.send_buffer.join(",")+"]";a.send_stop=a.sender(a.trans_url,b,function(b,c){a.send_stop=null,b===!1?a.ri._didClose(1006,"Sending error "+c):a.send_schedule_wait()}),a.send_buffer=[]}},A.prototype.send_destructor=function(){var a=this;a._send_stop&&a._send_stop(),a._send_stop=null};var B=function(b,d,e){var f=this;if(!("_send_form"in f)){var g=f._send_form=a.createElement("form"),h=f._send_area=a.createElement("textarea");h.name="d",g.style.display="none",g.style.position="absolute",g.method="POST",g.enctype="application/x-www-form-urlencoded",g.acceptCharset="UTF-8",g.appendChild(h),a.body.appendChild(g)}var g=f._send_form,h=f._send_area,i="a"+c.random_string(8);g.target=i,g.action=b+"/jsonp_send?i="+i;var j;try{j=a.createElement('<iframe name="'+i+'">')}catch(k){j=a.createElement("iframe"),j.name=i}j.id=i,g.appendChild(j),j.style.display="none";try{h.value=d}catch(l){c.log("Your browser is seriously broken. Go home! "+l.message)}g.submit();var m=function(a){if(!j.onerror)return;j.onreadystatechange=j.onerror=j.onload=null,c.delay(500,function(){j.parentNode.removeChild(j),j=null}),h.value="",e(!0)};return j.onerror=j.onload=m,j.onreadystatechange=function(a){j.readyState=="complete"&&m()},m},C=function(a){return function(b,c,d){var e=new a("POST",b+"/xhr_send",c);return e.onfinish=function(a,b){d(a===200||a===204,"http status "+a)},function(a){d(!1,a)}}},D=function(b,d){var e,f=a.createElement("script"),g,h=function(a){g&&(g.parentNode.removeChild(g),g=null),f&&(clearTimeout(e),f.parentNode.removeChild(f),f.onreadystatechange=f.onerror=f.onload=f.onclick=null,f=null,d(a),d=null)},i=!1,j=null;f.id="a"+c.random_string(8),f.src=b,f.type="text/javascript",f.charset="UTF-8",f.onerror=function(a){j||(j=setTimeout(function(){i||h(c.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},f.onload=function(a){h(c.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},f.onreadystatechange=function(a){if(/loaded|closed/.test(f.readyState)){if(f&&f.htmlFor&&f.onclick){i=!0;try{f.onclick()}catch(b){}}f&&h(c.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}};if(typeof f.async=="undefined"&&a.attachEvent)if(!/opera/i.test(navigator.userAgent)){try{f.htmlFor=f.id,f.event="onclick"}catch(k){}f.async=!0}else g=a.createElement("script"),g.text="try{var a = document.getElementById('"+f.id+"'); if(a)a.onerror();}catch(x){};",f.async=g.async=!1;typeof f.async!="undefined"&&(f.async=!0),e=setTimeout(function(){h(c.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var l=a.getElementsByTagName("head")[0];return l.insertBefore(f,l.firstChild),g&&l.insertBefore(g,l.firstChild),h},E=y["jsonp-polling"]=function(a,b){c.polluteGlobalNamespace();var d=this;d.ri=a,d.trans_url=b,d.send_constructor(B),d._schedule_recv()};E.prototype=new A,E.prototype._schedule_recv=function(){var a=this,b=function(b){a._recv_stop=null,b&&(a._is_closing||a.ri._didMessage(b)),a._is_closing||a._schedule_recv()};a._recv_stop=F(a.trans_url+"/jsonp",D,b)},E.enabled=function(){return!0},E.need_body=!0,E.prototype.doCleanup=function(){var a=this;a._is_closing=!0,a._recv_stop&&a._recv_stop(),a.ri=a._recv_stop=null,a.send_destructor()};var F=function(a,d,e){var f="a"+c.random_string(6),g=a+"?c="+escape(h+"."+f),i=0,j=function(a){switch(i){case 0:delete b[h][f],e(a);break;case 1:e(a),i=2;break;case 2:delete b[h][f]}},k=d(g,j);b[h][f]=k;var l=function(){b[h][f]&&(i=1,b[h][f](c.closeFrame(1e3,"JSONP user aborted read")))};return l},G=function(){};G.prototype=new A,G.prototype.run=function(a,b,c,d,e){var f=this;f.ri=a,f.trans_url=b,f.send_constructor(C(e)),f.poll=new $(a,d,b+c,e)},G.prototype.doCleanup=function(){var a=this;a.poll&&(a.poll.abort(),a.poll=null)};var H=y["xhr-streaming"]=function(a,b){this.run(a,b,"/xhr_streaming",bd,c.XHRCorsObject)};H.prototype=new G,H.enabled=function(){return b.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},H.roundTrips=2,H.need_body=!0;var I=y["xdr-streaming"]=function(a,b){this.run(a,b,"/xhr_streaming",bd,c.XDRObject)};I.prototype=new G,I.enabled=function(){return!!b.XDomainRequest},I.roundTrips=2;var J=y["xhr-polling"]=function(a,b){this.run(a,b,"/xhr",bd,c.XHRCorsObject)};J.prototype=new G,J.enabled=H.enabled,J.roundTrips=2;var K=y["xdr-polling"]=function(a,b){this.run(a,b,"/xhr",bd,c.XDRObject)};K.prototype=new G,K.enabled=I.enabled,K.roundTrips=2;var L=function(){};L.prototype.i_constructor=function(a,b,d){var e=this;e.ri=a,e.origin=c.getOrigin(d),e.base_url=d,e.trans_url=b;var f=d+"/iframe.html";e.ri._options.devel&&(f+="?t="+ +(new Date)),e.window_id=c.random_string(8),f+="#"+e.window_id,e.iframeObj=c.createIframe(f,function(a){e.ri._didClose(1006,"Unable to load an iframe ("+a+")")}),e.onmessage_cb=c.bind(e.onmessage,e),c.attachMessage(e.onmessage_cb)},L.prototype.doCleanup=function(){var a=this;if(a.iframeObj){c.detachMessage(a.onmessage_cb);try{a.iframeObj.iframe.contentWindow&&a.postMessage("c")}catch(b){}a.iframeObj.cleanup(),a.iframeObj=null,a.onmessage_cb=a.iframeObj=null}},L.prototype.onmessage=function(a){var b=this;if(a.origin!==b.origin)return;var c=a.data.slice(0,8),d=a.data.slice(8,9),e=a.data.slice(9);if(c!==b.window_id)return;switch(d){case"s":b.iframeObj.loaded(),b.postMessage("s",JSON.stringify([y.version,b.protocol,b.trans_url,b.base_url]));break;case"t":b.ri._didMessage(e)}},L.prototype.postMessage=function(a,b){var c=this;c.iframeObj.post(c.window_id+a+(b||""),c.origin)},L.prototype.doSend=function(a){this.postMessage("m",a)},L.enabled=function(){var a=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Konqueror")!==-1;return(typeof b.postMessage=="function"||typeof b.postMessage=="object")&&!a};var M,N=function(a,d){parent!==b?parent.postMessage(M+a+(d||""),"*"):c.log("Can't postMessage, no parent window.",a,d)},O=function(){};O.prototype._didClose=function(a,b){N("t",c.closeFrame(a,b))},O.prototype._didMessage=function(a){N("t",a)},O.prototype._doSend=function(a){this._transport.doSend(a)},O.prototype._doCleanup=function(){this._transport.doCleanup()},c.parent_origin=undefined,y.bootstrap_iframe=function(){var d;M=a.location.hash.slice(1);var e=function(a){if(a.source!==parent)return;typeof c.parent_origin=="undefined"&&(c.parent_origin=a.origin);if(a.origin!==c.parent_origin)return;var e=a.data.slice(0,8),f=a.data.slice(8,9),g=a.data.slice(9);if(e!==M)return;switch(f){case"s":var h=JSON.parse(g),i=h[0],j=h[1],k=h[2],l=h[3];i!==y.version&&c.log('Incompatibile SockJS! Main site uses: "'+i+'", the iframe:'+' "'+y.version+'".');if(!c.flatUrl(k)||!c.flatUrl(l)){c.log("Only basic urls are supported in SockJS");return}if(!c.isSameOriginUrl(k)||!c.isSameOriginUrl(l)){c.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([b.location.href,k,l])+")");return}d=new O,d._transport=new O[j](d,k,l);break;case"m":d._doSend(g);break;case"c":d&&d._doCleanup(),d=null}};c.attachMessage(e),N("s")};var P=function(a,b){var d=this;c.delay(function(){d.doXhr(a,b)})};P.prototype=new f(["finish"]),P.prototype.doXhr=function(a,b){var d=this,e=(new Date).getTime(),f=new b("GET",a+"/info"),g=c.delay(8e3,function(){f.ontimeout()});f.onfinish=function(a,b){clearTimeout(g),g=null;if(a===200){var c=(new Date).getTime()-e,f=JSON.parse(b);typeof f!="object"&&(f={}),d.emit("finish",f,c)}else d.emit("finish")},f.ontimeout=function(){f.close(),d.emit("finish")}};var Q=function(b){var d=this,e=function(){var a=new L;a.protocol="w-iframe-info-receiver";var c=function(b){if(typeof b=="string"&&b.substr(0,1)==="m"){var c=JSON.parse(b.substr(1)),e=c[0],f=c[1];d.emit("finish",e,f)}else d.emit("finish");a.doCleanup(),a=null},e={_options:{},_didClose:c,_didMessage:c};a.i_constructor(e,b,b)};a.body?e():c.attachEvent("load",e)};Q.prototype=new f(["finish"]);var R=function(){var a=this;c.delay(function(){a.emit("finish",{},2e3)})};R.prototype=new f(["finish"]);var S=function(a){if(c.isSameOriginUrl(a))return new P(a,c.XHRLocalObject);switch(c.isXHRCorsCapable()){case 1:return new P(a,c.XHRLocalObject);case 2:return new P(a,c.XDRObject);case 3:return new Q(a);default:return new R}},T=O["w-iframe-info-receiver"]=function(a,b,d){var e=new P(d,c.XHRLocalObject);e.onfinish=function(b,c){a._didMessage("m"+JSON.stringify([b,c])),a._didClose()}};T.prototype.doCleanup=function(){};var U=y["iframe-eventsource"]=function(){var a=this;a.protocol="w-iframe-eventsource",a.i_constructor.apply(a,arguments)};U.prototype=new L,U.enabled=function(){return"EventSource"in b&&L.enabled()},U.need_body=!0,U.roundTrips=3;var V=O["w-iframe-eventsource"]=function(a,b){this.run(a,b,"/eventsource",_,c.XHRLocalObject)};V.prototype=new G;var W=y["iframe-xhr-polling"]=function(){var a=this;a.protocol="w-iframe-xhr-polling",a.i_constructor.apply(a,arguments)};W.prototype=new L,W.enabled=function(){return b.XMLHttpRequest&&L.enabled()},W.need_body=!0,W.roundTrips=3;var X=O["w-iframe-xhr-polling"]=function(a,b){this.run(a,b,"/xhr",bd,c.XHRLocalObject)};X.prototype=new G;var Y=y["iframe-htmlfile"]=function(){var a=this;a.protocol="w-iframe-htmlfile",a.i_constructor.apply(a,arguments)};Y.prototype=new L,Y.enabled=function(){return L.enabled()},Y.need_body=!0,Y.roundTrips=3;var Z=O["w-iframe-htmlfile"]=function(a,b){this.run(a,b,"/htmlfile",bc,c.XHRLocalObject)};Z.prototype=new G;var $=function(a,b,c,d){var e=this;e.ri=a,e.Receiver=b,e.recv_url=c,e.AjaxObject=d,e._scheduleRecv()};$.prototype._scheduleRecv=function(){var a=this,b=a.poll=new a.Receiver(a.recv_url,a.AjaxObject),c=0;b.onmessage=function(b){c+=1,a.ri._didMessage(b.data)},b.onclose=function(c){a.poll=b=b.onmessage=b.onclose=null,a.poll_is_closing||(c.reason==="permanent"?a.ri._didClose(1006,"Polling error ("+c.reason+")"):a._scheduleRecv())}},$.prototype.abort=function(){var a=this;a.poll_is_closing=!0,a.poll&&a.poll.abort()};var _=function(a){var b=this,d=new EventSource(a);d.onmessage=function(a){b.dispatchEvent(new e("message",{data:unescape(a.data)}))},b.es_close=d.onerror=function(a,f){var g=f?"user":d.readyState!==2?"network":"permanent";b.es_close=d.onmessage=d.onerror=null,d.close(),d=null,c.delay(200,function(){b.dispatchEvent(new e("close",{reason:g}))})}};_.prototype=new d,_.prototype.abort=function(){var a=this;a.es_close&&a.es_close({},!0)};var ba,bb=function(){if(ba===undefined)if("ActiveXObject"in b)try{ba=!!(new ActiveXObject("htmlfile"))}catch(a){}else ba=!1;return ba},bc=function(a){var d=this;c.polluteGlobalNamespace(),d.id="a"+c.random_string(6,26),a+=(a.indexOf("?")===-1?"?":"&")+"c="+escape(h+"."+d.id);var f=bb()?c.createHtmlfile:c.createIframe,g;b[h][d.id]={start:function(){g.loaded()},message:function(a){d.dispatchEvent(new e("message",{data:a}))},stop:function(){d.iframe_close({},"network")}},d.iframe_close=function(a,c){g.cleanup(),d.iframe_close=g=null,delete b[h][d.id],d.dispatchEvent(new e("close",{reason:c}))},g=f(a,function(a){d.iframe_close({},"permanent")})};bc.prototype=new d,bc.prototype.abort=function(){var a=this;a.iframe_close&&a.iframe_close({},"user")};var bd=function(a,b){var c=this,d=0;c.xo=new b("POST",a,null),c.xo.onchunk=function(a,b){if(a!==200)return;for(;;){var f=b.slice(d),g=f.indexOf("\n");if(g===-1)break;d+=g+1;var h=f.slice(0,g);c.dispatchEvent(new e("message",{data:h}))}},c.xo.onfinish=function(a,b){c.xo.onchunk(a,b),c.xo=null;var d=a===200?"network":"permanent";c.dispatchEvent(new e("close",{reason:d}))}};return bd.prototype=new d,bd.prototype.abort=function(){var a=this;a.xo&&(a.xo.close(),a.dispatchEvent(new e("close",{reason:"user"})),a.xo=null)},y.getUtils=function(){return c},y.getIframeTransport=function(){return L},y}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),typeof define=="function"&&define.amd&&define("sockjs",[],function(){return SockJS});

"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,h,g=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,h=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)h[c]=str(c,i)||"null";return e=0===h.length?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=0===h.length?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(a,b){"use strict";var c=a.History=a.History||{},d=a.jQuery;if("undefined"!=typeof c.Adapter)throw new Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},"undefined"!=typeof c.init&&c.init()}(window),function(a,b){"use strict";var c=a.document,d=a.setTimeout||d,e=a.clearTimeout||e,f=a.setInterval||f,g=a.History=a.History||{};if("undefined"!=typeof g.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");g.initHtml4=function(){return"undefined"!=typeof g.initHtml4.initialized?!1:(g.initHtml4.initialized=!0,g.enabled=!0,g.savedHashes=[],g.isLastHash=function(a){var c,b=g.getHashByIndex();return c=a===b},g.isHashEqual=function(a,b){return a=encodeURIComponent(a).replace(/%25/g,"%"),b=encodeURIComponent(b).replace(/%25/g,"%"),a===b},g.saveHash=function(a){return g.isLastHash(a)?!1:(g.savedHashes.push(a),!0)},g.getHashByIndex=function(a){var b=null;return b="undefined"==typeof a?g.savedHashes[g.savedHashes.length-1]:0>a?g.savedHashes[g.savedHashes.length+a]:g.savedHashes[a]},g.discardedHashes={},g.discardedStates={},g.discardState=function(a,b,c){var e,d=g.getHashByState(a);return e={discardedState:a,backState:c,forwardState:b},g.discardedStates[d]=e,!0},g.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};return g.discardedHashes[a]=d,!0},g.discardedState=function(a){var c,b=g.getHashByState(a);return c=g.discardedStates[b]||!1},g.discardedHash=function(a){var b=g.discardedHashes[a]||!1;return b},g.recycleState=function(a){var b=g.getHashByState(a);return g.discardedState(a)&&delete g.discardedStates[b],!0},g.emulated.hashChange&&(g.hashChangeInit=function(){g.checkerFunction=null;var d,e,h,i,b="",j=Boolean(g.getHash());return g.isInternetExplorer()?(d="historyjs-iframe",e=c.createElement("iframe"),e.setAttribute("id",d),e.setAttribute("src","#"),e.style.display="none",c.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.close(),h="",i=!1,g.checkerFunction=function(){if(i)return!1;i=!0;var c=g.getHash(),d=g.getHash(e.contentWindow.document);return c!==b?(b=c,d!==c&&(h=d=c,e.contentWindow.document.open(),e.contentWindow.document.close(),e.contentWindow.document.location.hash=g.escapeHash(c)),g.Adapter.trigger(a,"hashchange")):d!==h&&(h=d,j&&""===d?g.back():g.setHash(d,!1)),i=!1,!0}):g.checkerFunction=function(){var c=g.getHash()||"";return c!==b&&(b=c,g.Adapter.trigger(a,"hashchange")),!0},g.intervalList.push(f(g.checkerFunction,g.options.hashChangeInterval)),!0},g.Adapter.onDomLoad(g.hashChangeInit)),g.emulated.pushState&&(g.onHashChange=function(b){var i,c=b&&b.newURL||g.getLocationHref(),d=g.getHashByUrl(c),e=null,f=null;return g.isLastHash(d)?(g.busy(!1),!1):(g.doubleCheckComplete(),g.saveHash(d),d&&g.isTraditionalAnchor(d)?(g.Adapter.trigger(a,"anchorchange"),g.busy(!1),!1):(e=g.extractState(g.getFullUrl(d||g.getLocationHref()),!0),g.isLastSavedState(e)?(g.busy(!1),!1):(f=g.getHashByState(e),(i=g.discardedState(e))?(g.getHashByIndex(-2)===g.getHashByState(i.forwardState)?g.back(!1):g.forward(!1),!1):(g.pushState(e.data,e.title,encodeURI(e.url),!1),!0))))},g.Adapter.bind(a,"hashchange",g.onHashChange),g.pushState=function(b,c,d,e){if(d=encodeURI(d).replace(/%25/g,"%"),g.getHashByUrl(d))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(e!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.pushState,args:arguments,queue:e}),!1;g.busy(!0);var f=g.createStateObject(b,c,d),h=g.getHashByState(f),i=g.getState(!1),j=g.getHashByState(i),k=g.getHash(),l=g.expectedStateId==f.id;return g.storeState(f),g.expectedStateId=f.id,g.recycleState(f),g.setTitle(f),h===j?(g.busy(!1),!1):(g.saveState(f),l||g.Adapter.trigger(a,"statechange"),g.isHashEqual(h,k)||g.isHashEqual(h,g.getShortUrl(g.getLocationHref()))||g.setHash(h,!1),g.busy(!1),!0)},g.replaceState=function(b,c,d,e){if(d=encodeURI(d).replace(/%25/g,"%"),g.getHashByUrl(d))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(e!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.replaceState,args:arguments,queue:e}),!1;g.busy(!0);var f=g.createStateObject(b,c,d),h=g.getHashByState(f),i=g.getState(!1),j=g.getHashByState(i),k=g.getStateByIndex(-2);return g.discardState(i,f,k),h===j?(g.storeState(f),g.expectedStateId=f.id,g.recycleState(f),g.setTitle(f),g.saveState(f),g.Adapter.trigger(a,"statechange"),g.busy(!1)):g.pushState(f.data,f.title,f.url,!1),!0}),void(g.emulated.pushState&&g.getHash()&&!g.emulated.hashChange&&g.Adapter.onDomLoad(function(){g.Adapter.trigger(a,"hashchange")})))},"undefined"!=typeof g.init&&g.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;try{f=a.sessionStorage,f.setItem("TEST","1"),f.removeItem("TEST")}catch(o){f=!1}if(k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode,"undefined"!=typeof m.init)throw new Error("History.js Core has already been loaded...");m.init=function(a){return"undefined"==typeof m.Adapter?!1:("undefined"!=typeof m.initCore&&m.initCore(),"undefined"!=typeof m.initHtml4&&m.initHtml4(),!0)},m.initCore=function(o){if("undefined"!=typeof m.initCore.initialized)return!1;if(m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.disableSuid=m.options.disableSuid||!1,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.options.html4Mode=m.options.html4Mode||!1,m.options.delayInit=m.options.delayInit||!1,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){m.options.debug&&m.log.apply(m,arguments)},m.log=function(){var e,f,g,h,i,a=!("undefined"==typeof c||"undefined"==typeof c.log||"undefined"==typeof c.log.apply),b=d.getElementById("log");for(a?(h=Array.prototype.slice.call(arguments),e=h.shift(),"undefined"!=typeof c.debug?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n",f=1,g=arguments.length;g>f;++f){if(i=arguments[f],"object"==typeof i&&"undefined"!=typeof k)try{i=k.stringify(i)}catch(j){}e+="\n"+i+"\n"}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached="undefined"!=typeof m.getInternetExplorerMajorVersion.cached?m.getInternetExplorerMajorVersion.cached:function(){if("Microsoft Internet Explorer"==e.appName){for(var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0];);return a>4?a:!1}return!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached="undefined"!=typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.options.html4Mode?m.emulated={pushState:!0,hashChange:!0}:m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);return d.location.port&&(a+=":"+d.location.port),a+="/"},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return 1===a.length&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var c,a=m.getState(!1,!1),b=(a||{}).url||m.getLocationHref();return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"})},m.getBasePageUrl=function(){var a=m.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?m.getRootUrl()+a.replace(/^\/+/,""):"#"===d?m.getPageUrl().replace(/#.*/,"")+a:"?"===d?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},m.getLocationHref=function(a){return a=a||d,a.URL===a.location.href?a.location.href:a.location.href===decodeURIComponent(a.URL)?a.URL:a.location.hash&&decodeURIComponent(a.location.href.replace(/^[^#]+/,""))===a.location.hash?a.location.href:-1==a.URL.indexOf("#")&&-1!=a.location.href.indexOf("#")?a.location.href:a.URL||a.location.href},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var c,b=m.extractId(a.url);if(!b)if(c=m.getStateString(a),"undefined"!=typeof m.stateToId[c])b=m.stateToId[c];else if("undefined"!=typeof m.store.stateToId[c])b=m.store.stateToId[c];else{for(;;)if(b=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof m.idToState[b]&&"undefined"==typeof m.store.idToState[b])break;m.stateToId[c]=b,m.idToState[b]=a}return b},m.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(a.url?a.url:m.getLocationHref()),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data),(b.title||c)&&m.options.disableSuid!==!0&&(b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d)},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c)},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash},m.extractId=function(a){var b,c,d,e;return e=-1!=a.indexOf("#")?a.split("#")[0]:a,c=/(.*)\&_suid=([0-9]+)$/.exec(e),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var d,e,c=null;return b=b||!1,d=m.extractId(a),d&&(c=m.getStateById(d)),c||(e=m.getFullUrl(a),d=m.getIdByUrl(e)||!1,d&&(c=m.getStateById(d)),c||!b||m.isTraditionalAnchor(a)||(c=m.createStateObject(null,null,e))),c},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var c,b=!1;return c=m.extractState(a.url),b=c&&c.id!==a.id},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var c,d,e,b=!1;return m.savedStates.length&&(c=a.id,d=m.getLastSavedState(),e=d.id,b=c===e),b},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]},m.getCurrentIndex=function(){var a=null;return a=m.savedStates.length<1?0:m.savedStates.length-1},m.getHash=function(a){var c,b=m.getLocationHref(a);return c=m.getHashByUrl(b)},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=decodeURIComponent(b)},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(m.busy(!0),c=m.extractState(a,!0),c&&!m.emulated.pushState?m.pushState(c.data,c.title,c.url,!1):m.getHash()!==a&&(m.bugs.setHash?(e=m.getPageUrl(),m.pushState(null,null,e+"#"+a,!1)):d.location.hash=a),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.encodeURIComponent(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b)},m.setTitle=function(a){var c,b=a.title;b||(c=m.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=b,m},m.queues=[],m.busy=function(a){if("undefined"!=typeof a?m.busy.flag=a:"undefined"==typeof m.busy.flag&&(m.busy.flag=!1),!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(!m.busy.flag)for(a=m.queues.length-1;a>=0;--a)c=m.queues[a],0!==c.length&&(d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay))};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var c,b=m.extractState(m.getLocationHref());if(!m.isLastSavedState(b))return c=b,c||(c=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)m.forward(b);else{if(!(0>a))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m},m.emulated.pushState){var p=function(){};m.pushState=m.pushState||p,m.replaceState=m.replaceState||p}else m.onPopState=function(b,c){var f,g,d=!1,e=!1;return m.doubleCheckComplete(),(f=m.getHash())?(g=m.extractState(f||m.getLocationHref(),!0),g?m.replaceState(g.data,g.title,g.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(d=m.Adapter.extractEventData("state",b,c)||!1,e=d?m.getStateById(d):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(m.getLocationHref()),e||(e=m.createStateObject(null,null,m.getLocationHref())),m.expectedStateId=!1,m.isLastSavedState(e)?(m.busy(!1),!1):(m.storeState(e),m.saveState(e),m.setTitle(e),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(q){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(m.getLocationHref(),!0))),f&&(m.onUnload=function(){var a,b,c;try{a=k.parse(f.getItem("History.store"))||{}}catch(d){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a,m.normalizeStore(),c=k.stringify(a);try{f.setItem("History.store",c)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;f.length&&(f.removeItem("History.store"),f.setItem("History.store",c))}},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload)),m.emulated.pushState||(m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval)),("Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})))},m.options&&m.options.delayInit||m.init()}(window);
!function(a){function b(b){this.input=b,"password"==b.attr("type")&&this.handlePassword(),a(b[0].form).submit(function(){b.hasClass("placeholder")&&b[0].value==b.attr("placeholder")&&(b[0].value="")})}b.prototype={show:function(a){if(""===this.input[0].value||a&&this.valueIsPlaceholder()){if(this.isPassword)try{this.input[0].setAttribute("type","text")}catch(b){this.input.before(this.fakePassword.show()).hide()}this.input.addClass("placeholder"),this.input[0].value=this.input.attr("placeholder")}},hide:function(){if(this.valueIsPlaceholder()&&this.input.hasClass("placeholder")&&(this.input.removeClass("placeholder"),this.input[0].value="",this.isPassword)){try{this.input[0].setAttribute("type","password")}catch(a){}this.input.show(),this.input[0].focus()}},valueIsPlaceholder:function(){return this.input[0].value==this.input.attr("placeholder")},handlePassword:function(){var b=this.input;if(b.attr("realType","password"),this.isPassword=!0,a.browser.msie&&b[0].outerHTML){var c=a(b[0].outerHTML.replace(/type=(['"])?password\1/gi,"type=$1text$1"));this.fakePassword=c.val(b.attr("placeholder")).addClass("placeholder").focus(function(){b.trigger("focus"),a(this).hide()}),a(b[0].form).submit(function(){c.remove(),b.show()})}}};var c=!!("placeholder"in document.createElement("input"));a.fn.placeholder=function(){return c?this:this.each(function(){var c=a(this),d=new b(c);d.show(!0),c.focus(function(){d.hide()}),c.blur(function(){d.show(!1)}),a.browser.msie&&(a(window).load(function(){c.val()&&c.removeClass("placeholder"),d.show(!0)}),c.focus(function(){if(""==this.value){var a=this.createTextRange();a.collapse(!0),a.moveStart("character",0),a.select()}}))})}}(jQuery);
!function(a){a.open={},a.open.defaultParams={width:"800",height:"600",top:"0",left:"0",directories:"no",location:"no",resizable:"yes",menubar:"no",toolbar:"no",scrollbars:"yes",status:"no"},a.open.defaultConfig={autoFocus:!0},a.open.windowMap=new Array,a.open.newWindow=function(b,c,d){var h,e=a.extend(a.open.defaultParams,c),f=a.extend(a.open.defaultConfig,d),g=c.windowName||"new"+(new Date).getTime(),i="";for(h in e)e.hasOwnProperty(h)&&(i+=""===i?"":",",i+=h+"=",i+=e[h]===!0||e[h]===!1?e[h]?"yes":"no":e[h]);return(!a.open.windowMap[g]||a.open.windowMap[g].closed)&&(a.open.windowMap[g]=window.open(b,g,i)),f.autoFocus&&a.open.windowMap[g].focus(),a.open.windowMap[g]},a.fn.open=function(b,c){var d=b.params||b,e=b.config||{};return this.each(function(){a(this).click(function(b){b.preventDefault(),a(this).attr("name")&&(d.windowName=a(this).attr("name"));var f;if(d.href)f=d.href;else{if(!a(this).attr("href"))return;f=a(this).attr("href")}var g=a.open.newWindow(f,d,e);c&&c(g)})}),a}}(jQuery);
!function(a){function b(a){return!isNaN(parseFloat(a))&&isFinite(a)}function c(a,b,d,e,f,g,h){var i,j,k;return h?(i=0===d?"":b.slice(-d),j=b.slice(-e)):(i=b.slice(0,d),j=b.slice(0,e)),f.html(j+g).width()<f.html(i+g).width()?e:(k=parseInt((d+e)/2,10),i=h?b.slice(-k):b.slice(0,k),f.html(i+g),f.width()===a?k:(f.width()>a?e=k-1:d=k+1,c(a,b,d,e,f,g,h)))}a.fn.truncate=function(d){var e={width:"auto",token:"&hellip;",center:!1,addclass:!1,addtitle:!1};return d=a.extend(e,d),this.each(function(){var k,e=a(this),f={fontFamily:e.css("fontFamily"),fontSize:e.css("fontSize"),fontStyle:e.css("fontStyle"),fontWeight:e.css("fontWeight"),"font-variant":e.css("font-variant"),"text-indent":e.css("text-indent"),"text-transform":e.css("text-transform"),"letter-spacing":e.css("letter-spacing"),"word-spacing":e.css("word-spacing"),display:"none"},g=e.html(),h=a("<span/>").css(f).html(g).appendTo("body"),i=h.width(),j=b(d.width)?d.width:e.width();i>j&&(h.text(""),d.center?(j=parseInt(j/2,10)+1,k=g.slice(0,c(j,g,0,g.length,h,d.token,!1))+d.token+g.slice(-1*c(j,g,0,g.length,h,"",!0))):k=g.slice(0,c(j,g,0,g.length,h,d.token,!1))+d.token,d.addclass&&e.addClass(d.addclass),d.addtitle&&e.attr("title",g),e.html(k)),h.remove()})}}(jQuery);
!function(a){a.fn.countdown=function(b){var c={date:null,updateTime:1e3,htmlTemplate:"%d <span class='cd-time'>days</span> %h <span class='cd-time'>hours</span> %i <span class='cd-time'>mins</span> %s <span class='cd-time'>sec</span>",minus:!1,onChange:null,onComplete:null,onResume:null,onPause:null,leadingZero:!1,offset:null,serverTime:null,hoursOnly:!1,minsOnly:!1,secsOnly:!1,hours:!1,yearsAndMonths:!1,direction:"down"},d=[].slice,e=window.clearInterval,f=Math.floor,h=(Math.ceil,36e5),j=/(%y|%m|%d|%h|%i|%s)/g,k=/%y/,l=/%m/,m=/%d/,n=/%h/,o=/%i/,p=/%s/,q=function(a,b){var c,d,f,g=new Date;return null===a?d=g.getTime()-b:(c=a*h,f=g.getTime()- -g.getTimezoneOffset()/60*h+c,d=g.setTime(f)),new Date(d)},r=function(){var b,c,d,g,h,i,s,u,v,x,z,a=this,y="",A={years:0,months:0,days:0,hours:0,minutes:0,seconds:0},B=function(a){var b;return b=f(z/a),z-=b*a,b},C=a.data("jcdData");return C?(b=C.htmlTemplate,c=null===C.offset&&null===C.serverTime?new Date:null!==C.offset?q(C.offset):q(null,C.difference),c.setMilliseconds(0),d=new Date(C.date),d.setMilliseconds(0),g="down"===C.direction?d.getTime()-c.getTime():c.getTime()-d.getTime(),z=Math.round(g/1e3),A.days=B(86400),A.hours=B(3600),A.minutes=B(60),A.seconds=B(1),C.yearsAndMonths&&(z+=86400*A.days,A.years=B(31556926),A.months=B(2629743.83),A.days=B(86400)),h=A.years,i=A.months,s=A.days,u=A.hours,v=A.minutes,x=A.seconds,C.hoursOnly&&(u+=24*s,s=0),C.minsOnly&&(v+=60*u+24*s*60,s=u=0),C.secsOnly&&(x+=60*v,s=u=v=0),C.yearsLeft=h,C.monthsLeft=i,C.daysLeft=s,C.hrsLeft=u,C.minsLeft=v,C.secLeft=x,60===x&&(x=0),C.leadingZero&&(10>s&&!C.hoursOnly&&(s="0"+s),10>h&&(h="0"+h),10>i&&(i="0"+i),10>u&&(u="0"+u),10>v&&(v="0"+v),10>x&&(x="0"+x)),"down"===C.direction&&(d>c||C.minus)||"up"===C.direction&&(c>d||C.minus)?(y=b.replace(k,h).replace(l,i),y=y.replace(m,s).replace(n,u).replace(o,v).replace(p,x)):(y=b.replace(j,"00"),C.hasCompleted=!0),a.html(y).trigger("change.jcdevt",[C]),void(C.hasCompleted&&(a.trigger("complete.jcdevt"),e(C.timer)))):!1},s={init:function(b){var f,g,d=a.extend({},c,b);d.htmlTemplate;return this.each(function(){var h,c=a(this),e={};if(c.data("jcdData")&&(c.countdown("changeSettings",b,!0),d=c.data("jcdData")),null===d.date)return a.error("No Date passed to jCountdown. date option is required."),!0;if(g=new Date(d.date),"Invalid Date"===g.toString()&&a.error("Invalid Date passed to jCountdown: "+d.date),g=null,d.onChange&&c.on("change.jcdevt",d.onChange),d.onComplete&&c.on("complete.jcdevt",d.onComplete),d.onPause&&c.on("pause.jcdevt",d.onPause),d.onResume&&c.on("resume.jcdevt",d.onResume),e={originalHTML:c.html(),date:d.date,yearsAndMonths:d.yearsAndMonths,hoursOnly:d.hoursOnly,minsOnly:d.minsOnly,secsOnly:d.secsOnly,leadingZero:d.leadingZero,updateTime:d.updateTime,direction:d.direction,template:d.htmlTemplate,htmlTemplate:d.htmlTemplate,minus:d.minus,offset:d.offset,serverTime:d.serverTime,difference:null,onChange:d.onChange,onComplete:d.onComplete,onResume:d.onResume,onPause:d.onPause,hasCompleted:!1,timer:0},null!==d.serverTime){var i;f=new Date,i=a.isFunction(e.serverTime)?e.serverTime():e.serverTime,e.difference=f.getTime()-i}h=a.proxy(r,c),e.timer=setInterval(h,e.updateTime),c.data("jcdData",e),h()})},changeSettings:function(b,c){return this.each(function(){var f,g,d=a(this),h=a.proxy(r,d);return d.data("jcdData")?(f=a.extend({},d.data("jcdData"),b),b.hasOwnProperty("date")&&(g=new Date(b.date),"Invalid Date"===g.toString()&&a.error("Invalid Date passed to jCountdown: "+b.date)),f.completed=!1,e(f.timer),d.off(".jcdevt").data("jcdData",f),void(c||(f.onChange&&d.on("change.jcdevt",f.onChange),f.onComplete&&d.on("complete.jcdevt",f.onComplete),f.onPause&&d.on("pause.jcdevt",f.onPause),f.onResume&&d.on("resume.jcdevt",f.onResume),f.timer=setInterval(h,f.updateTime),d.data("jcdData",f),h()))):!0})},resume:function(){return this.each(function(){var b=a(this),c=b.data("jcdData"),d=a.proxy(r,b);return c?(b.data("jcdData",c).trigger("resume.jcdevt"),void(c.hasCompleted||(c.timer=setInterval(d,c.updateTime),d()))):!0})},pause:function(){return this.each(function(){var b=a(this),c=b.data("jcdData");return c?(e(c.timer),void b.data("jcdData",c).trigger("pause.jcdevt")):!0})},complete:function(){return this.each(function(){var b=a(this),c=b.data("jcdData");return c?(e(c.timer),c.hasCompleted=!0,void b.data("jcdData",c).trigger("complete.jcdevt").off(".jcdevt")):!0})},destroy:function(){return this.each(function(){var b=a(this),c=b.data("jcdData");return c?(e(c.timer),void b.off(".jcdevt").removeData("jcdData").html(c.originalHTML)):!0})},getSettings:function(b){var c=a(this),d=c.data("jcdData");return b&&d?d.hasOwnProperty(b)?d[b]:void 0:d}};return s[b]?s[b].apply(this,d.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist in the jCountdown Plugin"):s.init.apply(this,arguments)}}(jQuery);
!function(a){a.cookie=function(b,c,d){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(c))||null===c||void 0===c)){if(d=a.extend({},d),(null===c||void 0===c)&&(d.expires=-1),"number"==typeof d.expires){var e=d.expires,f=d.expires=new Date;f.setDate(f.getDate()+e)}return c=String(c),document.cookie=[encodeURIComponent(b),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};for(var j,g=d.raw?function(a){return a}:decodeURIComponent,h=document.cookie.split("; "),i=0;j=h[i]&&h[i].split("=");i++)if(g(j[0])===b)return g(j[1]||"");return null}}(jQuery);
function elapsedTime(a,b){var c=0,d=0,e=0,f=Math.round(a/1e3);c=Math.floor(f/3600),f-=3600*c,d=Math.floor(f/60),f-=60*d,e=f;var g="";return b?g=(10>c?"0":"")+c+":"+(10>d?"0":"")+d+":"+(10>e?"0":"")+e:(c>0&&(g+=c+" "+__("hour(s)")+" "),d>0&&(g+=d+" "+__("minute(s)")+" "),g+=e+" "+__("second(s)")),g}Date.prototype.format=function(a){for(var b="",c=Date.replaceChars,d=0;d<a.length;d++){var e=a.charAt(d);d-1>=0&&"\\"==a.charAt(d-1)?b+=e:c[e]?b+=c[e].call(this):"\\"!=e&&(b+=e)}return b},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){var a=new Date(this.getFullYear(),0,1);return Math.ceil((this-a)/864e5)},W:function(){var a=new Date(this.getFullYear(),0,1);return Math.ceil(((this-a)/864e5+a.getDay()+1)/7)},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var a=new Date;return new Date(a.getFullYear(),a.getMonth(),0).getDate()},L:function(){var a=this.getFullYear();return a%400==0||a%100!=0&&a%4==0},o:function(){var a=new Date(this.valueOf());return a.setDate(a.getDate()-(this.getDay()+6)%7+3),a.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},u:function(){var a=this.getMilliseconds();return(10>a?"00":100>a?"0":"")+a},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":00"},T:function(){var a=this.getMonth();this.setMonth(0);var b=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return this.setMonth(a),b},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}};
(function($){$.fn.manageErrors=function(fields){if(undefined!=fields&&null!=fields){for(fieldId in fields){var value=fields[fieldId];if('object'==typeof(value)){$(this).manageErrors(value);}else{$(this).find('#'+fieldId).closest('.form_row').find('.form_errors_in_row').html(value);}}}};$.fn.onSubmittedToRemoteSuccess=function(onsuccess,data,textStatus,XMLHttpRequest){var reusable=true;if(undefined!=onsuccess&&'function'==typeof(onsuccess)){onsuccess($(this),data,textStatus,XMLHttpRequest);}else if(false!=onsuccess){reusable=false;$(this).removeAttr('onsubmit').unbind('.submitToRemote').submit();}
return reusable;};$.fn.submittedToRemote=function(onsuccess,onerror,onsubmit){$(this).attr('onsubmit','return false;').find('button, input[type="submit"], input[type="image"]').removeAttr('disabled').end().find('.spinner').hide();$(this).unbind('.submitToRemote').bind('submit.submitToRemote',function(){$(this).find('.form_errors_row').remove();$(this).find('.form_errors_in_row').html('');$(this).find('button, input[type="submit"], input[type="image"]').attr('disabled','disabled');$(this).find('.spinner').show();if(undefined!=onsubmit&&'function'==typeof(onsubmit)){var retval=onsubmit($(this));if(undefined!=retval&&!retval){return false;}}
$.ajax({data:$(this).serializeArray(),url:$(this).attr('action'),dataType:'json',context:$(this),type:'post',success:function(data,textStatus,XMLHttpRequest){var reusable=true;if("object"==typeof(data)&&null!=data&&undefined!=data.status){if('simple_error'==data.status){var errorPrefix='<div class="form_error_list"><div class="form_error">';var errorPostfix='</div></div>';data.status='error';if(undefined!=data.global){data.global=errorPrefix+__(data.global)+errorPostfix;}
if(undefined!=data.fields){for(var fieldId in data.fields){if(data.fields.hasOwnProperty(fieldId)){var translatedMessage='';var field=data.fields[fieldId];if(field instanceof Array){field.forEach(function(part){translatedMessage+=__(part);});}else{translatedMessage=__(field);}
data.fields[fieldId]=errorPrefix+translatedMessage+errorPostfix;}}}}
if('error'==data.status){if(undefined!=data.global){$(this).find('.form_data').prepend('<div class="form_errors_row">'+data.global+"</div>");}
if(undefined!=data.fields){$(this).manageErrors(data.fields);}
if(undefined!=onerror&&'function'==typeof(onerror)){onerror(data,textStatus,XMLHttpRequest);}}else if('success'==data.status){reusable=$(this).onSubmittedToRemoteSuccess(onsuccess,data,textStatus,XMLHttpRequest);}else{if(undefined!=window.console){console.log('[ '+textStatus+' | '+data.status+' ] '+data);}}}else{if(undefined!=window.console){console.log('[ '+textStatus+' ] '+data);}}
if(reusable){$(this).find('button, input[type="submit"], input[type="image"]').removeAttr('disabled');$(this).find('.spinner').hide();}},error:function(request,textStatus,errorThrown){$(this).find('button, input[type="submit"], input[type="image"]').removeAttr('disabled');$(this).find('.spinner').hide();if(undefined!=window.console){console.log('[ '+textStatus+' ] '+errorThrown);}}});return false;});return this;};$.fn.unbindSubmittedToRemote=function(){$(this).removeAttr('onsubmit').unbind('.submitToRemote');};$.jlNamespace={$popupBlock:null,$popupTitle:null,$popupClose:null,$popupContent:null,$contentContainer:null};$.fn.bongacamsPopup=function($contentContainer,ondisplay,title,afterDisplay,closeButton,v2Version){if(0==$contentContainer.length){return;}
if(null==$.jlNamespace.$popupBlock){$popupBlock=$('#bongacams_popup');if(0!=$popupBlock.length){alert('Can\'t work with BongaCams popups: popup element found on page');return;}
var popupClass=v2Version?'bongacams_popup_v2':'bongacams_popup';var popupBlock='<div id="bongacams_popup" class="'+popupClass+'">'+'<div class="popup_header">'+'<div class="popup_title"><!-- --></div><div class="popup_close"><!-- --></div><div class="clr"><!-- --></div>'+'</div>'+'<div class="popup_content"><!-- --></div>'+'</div>';$('body').append(popupBlock);$popupBlock=$('#bongacams_popup');$popupBlock.find('.popup_close').click(function(){$.bongacamsPopupClose(true);});$.jlNamespace.$popupBlock=$popupBlock;$.jlNamespace.$popupContent=$popupBlock.find('.popup_content');var $popupHeader=$popupBlock.find('.popup_header');$.jlNamespace.$popupTitle=$popupHeader.find('.popup_title');$.jlNamespace.$popupClose=$popupHeader.find('.popup_close');}
$(this).attr('onclick','return false;');$(this).click(function(){$.bongacamsPopupClose();$.jlNamespace.$contentContainer=$contentContainer;if(undefined!=title&&false!=title){$.jlNamespace.$popupTitle.html(title).removeClass('popup_title_empty');}else{$.jlNamespace.$popupTitle.html('<!-- -->').addClass('popup_title_empty');}
$.jlNamespace.$popupClose.html((undefined!=closeButton&&false!=closeButton)?closeButton:'<!-- -->');$.jlNamespace.$popupContent.html($contentContainer.children());if(undefined!=ondisplay&&'function'==typeof(ondisplay)){ondisplay();}
$.jlNamespace.$popupBlock.css({top:$(this).offset().top+'px',left:$(this).offset().left+'px'}).show();if(undefined!=afterDisplay&&'function'==typeof(afterDisplay)){afterDisplay();}
return false;});return this;};$.bongacamsPopupClose=function(animated,onclose){function returnContentsBack(){if(null==$.jlNamespace.$contentContainer){return;}
$.jlNamespace.$contentContainer.html($.jlNamespace.$popupContent.children());$.jlNamespace.$contentContainer=null;if(undefined!=onclose&&'function'==typeof(onclose)){onclose();}}
if(animated){$.jlNamespace.$popupBlock.fadeOut(200,returnContentsBack);}else{$.jlNamespace.$popupBlock.hide();returnContentsBack();}};$.fn.screenCenter=function(){var topPos=($(window).height()-this.outerHeight(true))/2+$(window).scrollTop();var leftPos=($(window).width()-this.outerWidth(true))/2+$(window).scrollLeft();this.css({position:'absolute',top:(topPos>0)?topPos+'px':'0',left:(leftPos>0)?leftPos+'px':'0'});return this;};$.fn.max_lengthable=function(max_length){$(this).unbind('.max_lengthable').bind('keyup.max_lengthable focus.max_lengthable',function(){var $row=$(this).closest('.form_row');var $notifier=$row.find('.notifier');if(0==$notifier.length){$notifier=$('<div class="notifier"><!-- --></div>');$(this).parent().after($notifier);}
var remaindCount=max_length-$(this).val().length;if(remaindCount>=0){$notifier.removeClass('too_long');$notifier.html(remaindCount+' '+__('characters left'));}else{$notifier.addClass('too_long');$notifier.html((-remaindCount)+' '+__('characters exceeded'));}}).bind('blur.max_lengthable',function(){$(this).closest('.form_row').find('.notifier').remove();});return this;};$.fn.unmax_lengthable=function(){$(this).unbind('.max_lengthable');$(this).closest('form_row').find('.notifier').remove();};$.fn.numbersOnly=function(){return this.each(function(){var $input=$(this);$input.bind('keydown',function(event){if((event.keyCode==8||event.keyCode==189||event.keyCode==109)||(event.keyCode>=48&&event.keyCode<=57)||(event.keyCode>=96&&event.keyCode<=105)){return true;}else{return false;}});});};$.fn.sort=function(){return this.pushStack([].sort.apply(this,arguments),[]);};})(jQuery);
if(!Array.prototype.indexOf)
Array.prototype.indexOf=function(searchElement,fromIndex){for(var i=fromIndex||0,length=this.length;i<length;i++)
if(this[i]===searchElement)
return i;return-1;};String.prototype.wordWrap=function(brk,width){brk=brk||'<br/>';width=width||50;var wordsArr=this.split(' ');if(wordsArr.length==0)return this;var regex='.{1,'+width+'}(\\s|$)|.{'+width+'}|.+$';for(var i=0;i<wordsArr.length;i++){if(wordsArr[i].length>width){wordsArr[i]=wordsArr[i].match(new RegExp(regex,'g')).join(brk);}}
return wordsArr.join(' ');};$.fn.exists=function(callback){var args=[].slice.call(arguments,1);if(this.length){callback.call(this,args);}
return this;};function updateQueryStringParameter(uri,key,value){var re=new RegExp("([?|&])"+key+"=.*?(&|$)","i");var separator=uri.indexOf('?')!==-1?"&":"?";return uri.match(re)?uri.replace(re,'$1'+key+"="+value+'$2'):uri+separator+key+"="+value;}
$(document).ready(function(){$(document).delegate('a[href*=purchase-tokens],a[href*=purchase-vip]','click',function(){var url=$(this).attr('href');if(undefined!=window.chat&&chat.userData&&chat.userData.chathost){url=updateQueryStringParameter(url,'performer',chat.userData.chathost);}
$(this).attr('href',url);});var whwdt=$(window).width();$("#bChat").bind("onUserData",function(e){if(!chat.performerData)return;var sexType=chat.performerData.sexType;var prefix='';if(sexType!=''){prefix='male_';}
$('.top_of_week').each(function(){$(this).html(__('Top %count% of the Week',{count:$(this).attr(prefix+'count')}));$(this).attr('href',$(this).attr(prefix+'url'));});$('.contests_header').each(function(){$(this).attr('href',$(this).attr(prefix+'url'));});});$.fn.center_notfound=function(){var vheight=$(window).height();var centrwin=vheight-92;this.css('height',centrwin);};if($('.center_div').length){$('.center_div').center_notfound();};if($('.data_item_membership,.vip_overview_tip').length){$.tools.tooltip.addEffect("myFadeEffect",function(done){var $tip=this.getTip();var left=parseInt($tip.css('left'));if(left>0&&$tip.width()+left>$(window).width()){$tip.css({left:($(window).width()-$tip.width()-25)+'px'});}
this.getTip().fadeIn(function(){done.call()});},function(done){var tip=this.getTip();tip.fadeOut(done);});var onlyLeft=null;var $membershipTipContainer=$('.data_item_membership');if($membershipTipContainer.length){onlyLeft=$membershipTipContainer.parents('.control_popover').length;var mSettings={tip:'.data_item_membership_tooltip',effect:'myFadeEffect',fadeOutSpeed:100,predelay:200,position:'bottom right',onBeforeShow:function(){var $tip=this.getTip();if(!$tip.html()){var self=this;$.get(this.getTrigger().attr('rel'),function(data){$tip.html(data).removeClass('spinner');if($tip.width()+$tip.offset().left>$(window).width()){$tip.css({left:($(window).width()-$tip.width()-25)+'px'});}
if(onlyLeft){if(window.isRTL){$tip.css({right:((-1)*$tip.width())+'px'});}else{$tip.css({left:((-1)*$tip.width())+'px'});}}});}}};if(onlyLeft){mSettings.offset=window.isRTL?[-10,-20]:[-10,20];mSettings.relative=true;mSettings.position=window.isRTL?'bottom right':'bottom left';}
$membershipTipContainer.tooltip(mSettings);}
var $vipTipContainer=$('.vip_overview_tip');if($vipTipContainer.length){var vSettings={tip:'',relative:true,effect:'myFadeEffect',fadeOutSpeed:100,predelay:200,position:window.isRTL?'bottom left':'bottom right'};$vipTipContainer.each(function(){onlyLeft=$(this).parents('.control_popover').length;if(onlyLeft){vSettings.offset=window.isRTL?[-10,-20]:[-10,20];vSettings.position=window.isRTL?'bottom right':'bottom left';}else{vSettings.offset=[];vSettings.position=window.isRTL?'bottom left':'bottom right';}
vSettings.tip='.'+$(this).attr('id');$(this).tooltip(vSettings);});}}
$('input[placeholder], textarea[placeholder]').placeholder();$('.popup').find('form.remote').submittedToRemote();$('.wrapper').find('form.remote').submittedToRemote();$('.jl_alert_outer').find('.jl_alert_close_link').attr('onclick','return false;').click(function(){$(this).hide();$.ajax({url:$(this).attr('href'),dataType:'json',context:$(this),type:'get',success:function(data,textStatus,XMLHttpRequest){if(undefined!=data.status&&'success'==data.status){$(this).closest('.jl_alert_outer').remove();}else{if(undefined!=window.console){console.log('[ '+textStatus+' ] '+errorThrown);}
$(this).show();}},error:function(request,textStatus,errorThrown){if(undefined!=window.console){console.log('[ '+textStatus+' ] '+errorThrown);}
$(this).show();}});return false;});function restoreRemoteSubmit(){$.jlNamespace.$popupContent.find('form.remote').submittedToRemote();}
function focusFirstInput(){$.jlNamespace.$popupContent.find('form.remote').find('input:visible:first').focus();}
$('body').delegate('.popup_hide','click',function(e){$.fancybox.close();return false;});$('[rel=take_a_tour]').each(function(){$(this).open({width:950,height:700,left:(($(window).width()-950)/2),top:(($(window).height()-700)/2),windowName:$(this).attr('name')||'take_a_tour'});});$('[rel=prices]').each(function(){$(this).open({width:950,height:700,left:(($(window).width()-950)/2),top:(($(window).height()-700)/2),windowName:$(this).attr('name')||'prices'});});$('[rel=contact_support]').each(function(){$(this).open({width:1280,height:700,left:(($(window).width()-1280)/2),top:(($(window).height()-700)/2),windowName:$(this).attr('name')||'contact_support'});});$('[rel=friends], [rel=real_gifts]').each(function(){$(this).open({width:1280,height:700,left:(($(window).width()-1280)/2),top:(($(window).height()-700)/2),windowName:$(this).attr('rel')});});$('body').delegate('[rel=buy_tokens], [rel=buy_vip]','click',function(e){if(!$(this).attr('href'))return false;e.preventDefault();var url=$(this).attr('href');if(undefined!=window.chat&&chat.userData&&chat.userData.chathost){url=updateQueryStringParameter(url,'performer',chat.userData.chathost);}
var _w=1000;$.open.newWindow(url,{windowName:$(this).attr('rel'),width:_w,height:screen.height-100,left:(($(window).width()-_w)/2),top:0},{});});$('body').delegate('[rel=webcamsupport]','click',function(e){if(!$(this).attr('href'))return false;e.preventDefault();var _w=640,_h=680;$.open.newWindow($(this).attr('href'),{windowName:$(this).attr('rel'),width:_w,height:_h,left:(($(window).width()-_w)/2),top:(($(window).height()-_h)/2)},{});});$('body').delegate('a.profile, a.display_name, [rel=profile]','click',function(e){if(!$(this).attr('href'))return false;e.preventDefault();$.openProfileWindow($(this).attr('href'));});$('a.top_models_footer').open({width:960,height:700,left:(($(window).width()-640)/2),top:(($(window).height()-480)/2),windowName:'top_models'});$('a.top_rooms_header').open({width:950,height:700,left:(($(window).width()-640)/2),top:(($(window).height()-480)/2),windowName:'top_rooms_contest'});$(document).on('click','a.contests_header, a.read_more_contest',function(){if($(this).attr('xxx')=='turkey_trip_im'){$('#news_im_view .nim_close').click();}else if($(this).attr('xxx')=='turkey_trip_popup'){$('.popup_hide').click();}
$.open.newWindow($(this).attr('href'),{width:972,height:700,left:(($(window).width()-640)/2),top:(($(window).height()-480)/2),windowName:'contests'});return false;});$(document).on('click','#button_tabs a',function(e){e.preventDefault();$(this).addClass("active");$(this).siblings().removeClass("active");var tab=$(this).attr("href");$(".button_tabs_content").not(tab).css("display","none");$(tab).fadeIn();});$('a.website_queen_footer').open({width:950,height:700,left:(($(window).width()-640)/2),top:(($(window).height()-480)/2),windowName:'website_queen'});$('.cashback_panel').click(function(){location.href=$(this).find('.more a').attr('href');});$('body').delegate('a.chat_popup','click',function(){$.open.newWindow($(this).attr('href'),{windowName:$(this).attr('target'),width:1180,height:660,left:(($(window).width()-1180)/2),top:(($(window).height()-660)/2)},{});});function changeUrlIfSlug(url,$objectHasSlug,country){var arr=url.split('?');if('/'!=location.pathname){arr[0]+=location.pathname;}
url=arr.join('?');if(country!=undefined){url+=url.indexOf('?')==-1?'?':'&';url+='country='+country;}
if($('#change_lang').data('has_slug')){if($objectHasSlug.length&&$objectHasSlug.data('old_slug')&&$objectHasSlug.data('new_slug')){url=decodeURIComponent(url).replace($objectHasSlug.data('old_slug'),$objectHasSlug.data('new_slug'));}}
return url;}
$('body').delegate('a.switch_language','click',function(){if(!$(this).hasClass('third_level')){var $objectHasSlug=$(this);if($(this).hasClass('footer_lang')){$objectHasSlug=$('#change_lang').find('a[data-lang="'+$(this).data('lang')+'"]');}
$(this).attr('href',changeUrlIfSlug($(this).attr('href'),$objectHasSlug,$(this).attr('country')));}});var $changeSiteLang=$('#change_site_lang');if($changeSiteLang.length){var $settingCulture=$('#setting_culture');if($settingCulture.data('lang')){$changeSiteLang.val($settingCulture.data('lang'));}
$changeSiteLang.change(function(){var $selected=$(this).find('option:selected');var url=$selected.attr('data-url');if(!$settingCulture.hasClass('third_level')){url=changeUrlIfSlug(url,$('#change_lang').find('a[data-lang="'+$(this).val()+'"]'));}
location.href=url;});}
$('.invisible_mode_switch').bind('click',function(){var self=$(this);if(self.attr('disabled')!==undefined){return;}
var li=self.closest('li');self.attr('disabled','disabled');$.get($(this).attr('href'),function(data){data=JSON.parse(data);if(data.status=='success'){if(li.hasClass('invisible_mode_activated')){li.removeClass('invisible_mode_activated');}else{li.addClass('invisible_mode_activated');}}
self.prop('disabled',false);});return false;});$('#footer_leftbar_model_join, #non_restricted_model_join').bongacamsPopup($('#bongacams_popups_content .model_join_popup_container'),restoreRemoteSubmit,false,focusFirstInput);$('#footer_leftbar_studio_join, #non_restricted_studio_join').bongacamsPopup($('#bongacams_popups_content .studio_join_popup_container'),restoreRemoteSubmit,false,focusFirstInput);$('a.submitTheForm').attr('onclick','return false;').click(function(){$(this).closest('form').submit();return false;});$('div#header_login').find('button').bind('click',function(){$(this).closest('form').append('<input type="hidden" name="redirect_url" value="'+location.href+'">');});$('[rel=login]').click(function(){$('#header_login_popup').show();$(document).unbind('.header_login_popup');setTimeout(function(){$(document).bind('click.header_login_popup',function(e){$('#header_login_popup').hide();});},1);return false;});$('#header_login_popup .close').click(function(){$('#header_login_popup').hide();});$('#header_login_popup').click(function(e){if(!$(e.target).is('a')){e.stopPropagation();}});if($('.security_log_additional_info').length>0){var $sl_data={};$sl_data.language=navigator.language;$sl_data.cookieEnabled=navigator.cookieEnabled;$sl_data.javaEnabled=navigator.javaEnabled();if(typeof swfobject!='undefined'){$sl_data.flashVersion=swfobject.hasFlashPlayerVersion('1')?swfobject.getFlashPlayerVersion().major+'.'+swfobject.getFlashPlayerVersion().minor+'.'+swfobject.getFlashPlayerVersion().release:'false';}
$sl_data.dateTime=new Date().toLocaleString();$('.security_log_additional_info').val(JSON.stringify($sl_data));}
if(!$.isTranslateSkin){var $popWrap=$('#popups_wrap');if($('.vip_popup').length){var vipInterval=60*60*2;if($popWrap.data('membership')&&$.inArray($popWrap.data('membership'),['platinum','unlimited'])!=-1){vipInterval=60*60*4;}
setInterval(function(){var $fancy=$('.fancybox-opened');if($fancy.length&&$fancy.find('.vip_popup').length){return;}
var $popups=$('.vip_popup');$.openMemberPopup($popups);},vipInterval*1000);}
var goldPopupTimeout;function setGoldPopupTimeout(){if(goldPopupTimeout){clearTimeout(goldPopupTimeout);}
goldPopupTimeout=setTimeout(function(){goldPopupTimeout=null;var $fancy=$('.fancybox-opened');if($fancy.length&&($fancy.find('.gold_popup').length||$fancy.find('.vip_popup').length||$fancy.find('.march_promo_popup').length)){setGoldPopupTimeout();return;}
var $goldPopups=$('.gold_popup');var $otherPopups;var $gift500Popups=$('.march_promo_popup');if(!$('.gifts_500_page').length){$otherPopups=$gift500Popups;}
if($otherPopups&&$otherPopups.length){if(Math.floor(Math.random()*10000)%3==0){$.openMemberPopup($otherPopups);}else{$.openMemberPopup($goldPopups);}}else{$.openMemberPopup($goldPopups);}},1000*60*2);}
if($('.gold_popup').length){setGoldPopupTimeout();}
if($('.no_tokens_popup').length){var noTokensPopupTimer;function getNoTokensPopupInt(){var retVal=60*60;if($.secondsOnSiteNoTokens<6*60*60-30){retVal=6*60*60-$.secondsOnSiteNoTokens;}else if($.secondsOnSiteNoTokens<9*60*60-30){retVal=9*60*60-$.secondsOnSiteNoTokens;}
return retVal;}
function noTokensPopupTrigger(){noTokensPopupTimer=setTimeout(noTokensPopupTrigger,1000*getNoTokensPopupInt());var $fancybox=$('.fancybox-opened');if($fancybox.length&&$fancybox.find('.no_tokens_popup').length){return;}
$.openMemberPopup($('.no_tokens_popup'));}
noTokensPopupTimer=setTimeout(noTokensPopupTrigger,1000*getNoTokensPopupInt());}}
$.openMemberPopup=function($popups,isTrack,closeButton){var $fancy=$('.fancybox-opened');if($popups.length&&$fancy.length&&$fancy.find('.important_popup').length){if($popups.hasClass('gold_popup')){setGoldPopupTimeout();}
return false;}
if(typeof isTrack=='undefined'){isTrack=true;}
if(typeof closeButton=='undefined'){closeButton=false;}
var $popup;if($popups.length>1){if(!$popups.not('.popup_viewed').length){$popups.filter('.popup_viewed').removeClass('popup_viewed');}
$popup=$popups.not('.popup_viewed').random().addClass('popup_viewed');}else{$popup=$popups;}
$.fancybox.open($popup,{scrolling:'no',padding:0,closeBtn:closeButton,closeClick:false,autoResize:false,fitToView:false,openSpeed:100,closeSpeed:100,helpers:{locked:false,overlay:{closeClick:false}},wrapCSS:'fancybox-bonga-wrap',afterShow:function(){if(isTrack){$.get($popup.data('track_url'));}
var $fancybox=$('.fancybox-opened');if($fancybox.find('.over_hidden').length){$fancybox.find('.fancybox-inner').css({overflow:'visible'});}},afterClose:function(){$('.fancybox-inner').css({overflow:''});if($popup.hasClass('gold_popup')&&!$.isTranslateSkin){setGoldPopupTimeout();}},keys:{close:[27]}});};if($('#warning_popup').length){if(!$.isTranslateSkin){setTimeout(function(){$.openWarningPopup();},500);}
$.openWarningPopup=function(){$.fancybox($('#warning_popup'),{padding:0,margin:0,width:"100%",height:"681px",closeBtn:false,closeClick:false,fitToView:false,autoSize:false,helpers:{overlay:{closeClick:false,}},keys:{close:[27]},afterLoad:function(){$('.fancybox-skin').css({'background':'transparent','box-shadow':'none'});}});};$(document).on('click','#warning_popup a.agree',function(){$.fancybox.close();return false;});}
if($('.warning_popup_red').length){setTimeout(function(){$.openFullScreenPopup($('#warning_popup_red'));},500);}
$(document).on('click','.warning18Plus',function(){$.get($(this).attr('href'),function(data){$.fancybox.close()});return false;});$(document).on('click','.yes_18_btn',function(){$.fancybox.close();$.openFullScreenPopup($('#warning_popup_girl'));return false;});$.openFullScreenPopup=function($popup){if($popup.length){$.fancybox($popup,{padding:0,margin:0,closeBtn:false,closeClick:false,scrolling:'hidden',fitToView:false,autoHeight:false,autoSize:false,width:"100%",height:"100%",helpers:{locked:false,overlay:{closeClick:false}},keys:{close:[27]},beforeShow:function(){if($popup.find('.warning_popup_red')){$('.warning_popup_red').css('padding-top',($('.warning_popup_red_content').outerHeight()/2));}
$('html').css('overflow','hidden');$('.fancybox-overlay').addClass('for-fullscreen-popup');},afterClose:function(){$('html').css('overflow','');$('.fancybox-overlay').removeClass('for-fullscreen-popup');}});}};var $footerAdContainer=$('.adfooter');if($footerAdContainer.length!=0&&($footerAdContainer.find('.skin_banner').length>0||$footerAdContainer.find('.bonga_banner').length>0)){var $bannersCount=parseInt($footerAdContainer.find('.skin_banner').find('img').length)+parseInt($footerAdContainer.find('.bonga_banner').length);function changeFooterBannerPositions()
{var $adBlockWidth=300;var $elCount=Math.min(3,$bannersCount);if($footerAdContainer.width()>=4*$adBlockWidth+3*15){$elCount=Math.min(4,$bannersCount);}
var $divs=$footerAdContainer.find('.bonga_banner:visible, .skin_banner img');var $padding=0;if($elCount!=1){$padding=Math.floor(($footerAdContainer.width()-$adBlockWidth*$elCount)/($elCount-1));}
$($divs[$elCount-1]).css('padding',0);for(var i=$elCount-2;i>=0;i--){$($divs[i]).css('padding-right',$padding+'px');}}
$(window).bind('resize',function(){changeFooterBannerPositions();});changeFooterBannerPositions();}
$('form.forget_password_remote').submittedToRemote(function($data,$textStatus){$('.forget_info').hide();$('.forget_password_remote').hide();$('div.request_sent').show();});$.showModelsCategoriesList=function(){$('#categories_list').slideDown(400,function(){$('#categories_list').removeClass('collapsed');$('#categories_list_toggle').removeClass('collapsed');});}
$.hideModelsCategoriesList=function(){$('#categories_list').slideUp(400,function(){$('#categories_list').addClass('collapsed');$('#categories_list_toggle').addClass('collapsed');});}
$('div#categories_list_toggle').click(function(){var list=$('div#categories_list');if(list.hasClass('collapsed')){$.showModelsCategoriesList();}else{$.hideModelsCategoriesList();}});$.addBottomBannerPositionsToRequest=function(p)
{p=p.split('');if($('#bottom_banners_container').width()>=4*305){p[7]=p[8]=p[9]=p[10]='1';}else{p[7]=p[8]=p[9]='1';}
p=p.join('');return p;}
$.ajaxLoadBanners=function(isWindowResize){var layout=$('body').attr('id');if(typeof layout=='undefined'||layout.indexOf('layout_')==-1||!$.ajaxLoadBannersUrl||$('.mls_models_vip').length){return;}
$('#bottom_banners_container').css({width:'100%'});var page='index';var wl=parseInt($('body').attr('wl'));if(isWindowResize){var maxPossiblePositions=Math.floor($('#bottom_banners_container').width()/305);if(maxPossiblePositions>4){maxPossiblePositions=4;}
if($('#bottom_banners_container').find('.b_pos:visible').length==maxPossiblePositions){return;}}
if($('.content_shop_category_menu, .top_members, .free_tokens_pages, .profile_header_container, .profile_header, .news_outer, .error404, #cybersale_page').length){var p='00000000000';if(wl){p=$.addBottomBannerPositionsToRequest(p);}
page='other';var scrn='large';var layout='layout_1';}else{if($('#mls_chatconsole').is(':visible')){page='chat';}
if(wl){var scrn='large';if((layout=='layout_2'||layout=='layout_1'||layout=='layout_9'||layout=='layout_10')&&scrn=='large'){if(page=='index'){var p='10001110000';}else if(page=='chat'){var p='01110000000';}}else if(page=='index'){var p='10001100000';}else if(page=='chat'){var p='01110000000';}
p=$.addBottomBannerPositionsToRequest(p);}else{var scrn='medium';if(page=='chat'){var p='01110000000';}else if(page=='index'){var p='10001100000';}}
var $cc=$('#chatContainer');if($('.right_banners').length==0){p=p.split('');p[1]=p[2]=p[3]=p[4]=p[5]='0';p=p.join('');}else if($cc.hasClass('vipZone')&&$cc.is(':visible')){p=p.split('');p[1]=p[2]='0';p=p.join('');}
if(isWindowResize||($cc.hasClass('vipZone')&&$cc.is(':visible'))){p=p.split('');p[0]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]='0';p=p.join('');}}
if(parseInt(p)==0){$('.b_pos').html('');$('.right_banners').hide();$('.mls_models_container').removeClass('screen_large screen_medium screen_small');var listing=$('#mls_container').data('listing');if(listing){listing.resizer.resize();}
return false;}
$.get($.ajaxLoadBannersUrl+'/'+parseInt(p,2)+'/'+scrn+'/'+$.liveTab+'/'+layout,{},function(data){try{scrn=data.scrn;$('td.content_container div.content').css('min-height','660px');if(isWindowResize){$('.b_pos:not(.banner_top_index, .banner_top_chat, .banner_index_right1, .banner_index_right2, .banner_index_right3, .banner_chat_right1, .banner_chat_right2)').html('');}else{$('.b_pos').html('');$('.banner_top_index').css({height:'auto',width:'auto'});$('.banner_top_chat').css({height:'auto',width:'auto'});}
var firstIterationRight=true;$.each(data,function(position,banner){banner='<div class="b_container">'+banner+'</div>';if((layout=='layout_1'||layout=='layout_9'||layout=='layout_10')&&(data.chat_right1||data.chat_right2||data.index_right1||data.index_right2||data.index_right3)){firstIterationRight==false;if(page=='chat'){var chatRightBanner=$('.chat_right_banner');chatRightBanner.removeClass('screen_large screen_medium screen_small');$('.wrapper_table .content_container .content').removeClass('right_banner_space_small right_banner_space_medium right_banner_space_large');if(data.chat_right1||data.chat_right2){chatRightBanner.addClass('screen_'+scrn).show();if(data.chat_right1&&data.chat_right2&&scrn!='large'){$('.wrapper_table .content_container .content').addClass('right_banner_space_'+scrn);}}
if(data.chat_right2){$('.mls_models_container').removeClass('screen_large screen_medium screen_small').addClass('screen_'+scrn);}else{$('.mls_models_container').removeClass('screen_'+scrn);}}else{if(data.chat_right1||data.chat_right2||data.index_right1||data.index_right2||data.index_right3){$('.mls_models_container').removeClass('screen_large screen_medium screen_small').addClass('screen_'+scrn);}}
$('#mls_chatconsole').removeClass('screen_large screen_medium screen_small');if(data.chat_right1||data.chat_right2){$('#mls_chatconsole').addClass('screen_'+scrn);};$('.right_banners').removeClass('screen_large screen_medium screen_small').addClass('screen_'+scrn);if(scrn!='large'&&data.chat_right1&&data.chat_right2){$('.mls_inner').css('min-height','1000px');}}
if($.inArray(position,['top_index','top_chat','bottom1','bottom2','bottom3','bottom4'])!=-1){if(position=='top_index'||position=='top_chat'){banner=$.adjustTopBannerIframe($(banner));}
if($('.zone_item.vip_zone.active').length){$('.banner_'+position).hide().append(banner);}else{$('.banner_'+position).append(banner).show().parents().show();}}else{$('.banner_'+position).append(banner).show().parents().show();}});if(!$(".right_banners .b_pos:not(:empty)").length){$('.right_banners').hide();$('.mls_models_container').removeClass('screen_'+scrn);}
$.adjustBottomBanners();$('.banner_top_index a img, .banner_top_chat a img').load(function(){$(this).parent('a').css({display:'block'});});if($('#mls_container').length){var listing=$('#mls_container').data('listing');if(listing){listing.resizer.resize();}}}catch(e){console.log(e);}},'json');}
$.ajaxLoadBanners();setTimeout(updateSaleCouponsCount,60*5*1000);function setEqualSupportHeight(columns,isOuter)
{var tallestcolumn=0;columns.each(function(){currentHeight=!isOuter?$(this).height():$(this).outerHeight(true);if(currentHeight>tallestcolumn){tallestcolumn=currentHeight;}});columns.height(tallestcolumn);}
if($(".contact_support").length&&$('.contact_support_tabs.support_page').is(':visible')){setEqualSupportHeight($(".contact_support .support_tab em.desc"));setEqualSupportHeight($(".contact_support .support_tab strong.maroon"));setEqualSupportHeight($(".contact_support_tabs.support_page, .contact_support .contact_support_info"),true);var schat=$(".contact_support .support_tab strong.maroon").height();var sem=$(".contact_support .support_tab em.desc").height();var sinfo=schat+sem+145;if(sinfo>240){sinfo-=20;}
$(".contact_support .contact_support_info_content .contact_support_bill").css("top",+sinfo+"px");};var overIFrame='';$('.b_pos').on({mouseenter:function(){if($(this).attr('tracking_url')!=undefined){overIFrame=$(this).attr('tracking_url');}},mouseleave:function(){overIFrame='';}},'iframe');$(window).blur(function(){if(overIFrame!=''){$.get(overIFrame);}});if(!$.isTranslateSkin){var $promoAddressPopup=$('#promo_address_popup');if($promoAddressPopup.length&&$promoAddressPopup.find('.member_promo_address').length){$('.logout_link').click(function(){if(!$promoAddressPopup.hasClass('viewed')){$.openMemberPopup($promoAddressPopup,false,true);$promoAddressPopup.addClass('viewed');return false;}});$('.member_promo_address').submittedToRemote(function($element,data,textStatus,XMLHttpRequest){if(data.status='success'){$.fancybox.close();}});$('.cancel_prize_btn').click(function(){$.get($(this).attr('href'),{},function(data){});$.fancybox.close();return false;});}}
$('.panel_item .navbar_panel_header').click(function(){if($(this).find('.toolbar_control:visible').length){var $menu=$(this).next();var $icon=$(this).find('.toolbar_control');if($icon.hasClass('mini')){$menu.show();$icon.removeClass('mini');}else{$menu.hide();$icon.addClass('mini');}}});History.replaceState({},document.title,decodeURIComponent(window.location.href));$(document).on('click','.turkey_trip .vote_button',function(){if(!$(this).data('real_membership')){$.showSignupPopup(true);return false;}else if('free'==$(this).data('real_membership')){$.openMemberPopup($('.gold_popup'));return false;}
var url=$(this).data('url');$('.tt_vote_success').hide();$('.tt_vote_success .m_whom').hide();if(url){$.ajax({url:url,dataType:'json',context:$(this),type:'post',success:function(data,textStatus,XMLHttpRequest){if(undefined!=data.status&&'success'==data.status){var $list=$(this).closest('.tt_vote_column');var $message=$('.tt_vote_success');if(undefined!=data.profile_link){$message.find('a').replaceWith(data.profile_link);}
$message.show();if(undefined!=data.other_type){$('.turkey_trip .m_'+data.other_type).show();}
if(undefined!=data.list){$list.find('.ttv_item').remove();$list.append(data.list);}}},error:function(request,textStatus,errorThrown){if(undefined!=window.console){console.log('[ '+textStatus+' ] '+errorThrown);}}});}});if($('.mobile_switch').length){$('.smartphone_compatible').click(function(){location.href=$('.mobile_switch').attr('href');})}
if(window.cashbackPanelCountdown){$('.countdown').countdown({htmlTemplate:window.cashbackPanelCountdown.htmlTemplate,date:window.cashbackPanelCountdown.targetDate,updateTime:200,serverTime:window.cashbackPanelCountdown.serverTime,hoursOnly:true,leadingZero:true});}
if(window.openMemberPopupOnReady){setTimeout(function(){$.openMemberPopup($(window.openMemberPopupOnReady.selector));},window.openMemberPopupOnReady.delay||0);}
$('#header').data('resize',new HeaderResize());var $dap=$('#desktop_app_bar');if($dap.length){function showDesktopAppBar(){if(!$.isFullMobile){var isHideDesktopAppBar=$.isLocalStorageAvailable()?sessionStorage['hide_desktop_app_bar']:$.cookie('hdab');if(isHideDesktopAppBar==undefined){$dap.slideDown();}}}
function hideDesktopAppBar(){$dap.slideUp();if($.isLocalStorageAvailable()){sessionStorage['hide_desktop_app_bar']=1;}else{$.cookie('hdab','1',{path:'/',expires:1});}}
showDesktopAppBar();$dap.find('.close_desktop_app').click(function(){hideDesktopAppBar();return false;});}});$(document).on('click','.banner_track_link',function(){if($(this).attr('tracking_url')){$.get($(this).attr('tracking_url'));}
return true;});$.adjustBottomBanners=function()
{var minColumnWidth=305,$bottomBannersContainer=$('#bottom_banners_container'),containerWidth=$bottomBannersContainer.width()-2,$bottomBanners=$bottomBannersContainer.find('.b_pos');$bottomBanners.show().css({width:'auto'});var columns=$bottomBanners.filter(':visible');if(columns.length){while(containerWidth<columns.length*305){columns.eq(1).hide();columns=$bottomBanners.filter(':visible');}}
var newColumnWidth=containerWidth/columns.length;if(newColumnWidth<minColumnWidth){newColumnWidth=minColumnWidth;}
columns.css('width',newColumnWidth.toString()+"px");};$.waitForFinalEvent=(function(){var timers={};return function(callback,ms,uniqueId){if(!uniqueId){uniqueId="Don't call this twice without a uniqueId";}
if(timers[uniqueId]){clearTimeout(timers[uniqueId]);}
timers[uniqueId]=setTimeout(callback,ms);};})();$(window).resize(function(){if($('.center_div').length){$('.center_div').center_notfound();};$.waitForFinalEvent(function(){$.ajaxLoadBanners(true);$.adjustTopBannerIframe();$.adjustBottomBanners();$.adjustHeaderAndFooterWidth();var listing=$('#mls_container').data('listing');if(listing){listing.resizer.resize();}},500,"window_resize");});$.adjustTopBannerIframe=function($banner)
{if($('#mls_chatconsole').is(':visible')){var topBannerContainer=$('.banner_top_chat');}else{var topBannerContainer=$('.banner_top_index');}
if(!$banner){$banner=topBannerContainer.find('.b_container');$banner.hide();topBannerContainer.css({width:'auto',height:'auto'});}
if(!$banner.length){return;}
var scale=Math.ceil(topBannerContainer.width()/1640*100)/100;var w=1640*scale;var h=140*scale;topBannerContainer.css({width:w+'px',height:h+'px'});scale=1;$($banner).attr('style','width: 100%; transform: scale('+scale+'); -webkit-transform: scale('+scale+'); -moz-transform-scale('+scale+'); -ms-transform: scale('+scale+'); -o-transform: scale('+scale+');');$banner.show();return $($banner);};$.adjustHeaderAndFooterWidth=function()
{if($('.sfWebDebugActionCache').length){$('div.footer').css({'min-width':($('body').width()-2)+'px'});}
if($('.bongacams_promo_message').length){if($('.bongacams_promo_message:visible').length){$('#header, div.footer').css('cssText','min-width: 1480px !important');$('.confirm_email_box').css('cssText','min-width: 1460px !important');}else{$('#header, div.footer').css('cssText','');$('.confirm_email_box').css('cssText','');}}};$.fn.updateCouponsQuantity=function(p,count){if(!$(this).hasClass('package_'+p)){return;}
if(count<0)count=0;$(this.html(count));if(count<=0){var $saleItem=$('#sale_item');if($saleItem.length){$saleItem.addClass('closed');$saleItem.removeClass('active');$('#deal_is_on').hide();$('#deal_is_sold_out').show();var $purchaseButton=$('#package_purchase_button');if($purchaseButton.length){$purchaseButton.removeAttr('href');$purchaseButton.removeAttr('rel');$purchaseButton.click(function(e){return false;});}}}};function updateSaleCouponsCount(){var $couponsCountContainer=$('.coupon_count');if($couponsCountContainer.length&&$couponsCountContainer.attr('refresh_url')){$.getJSON($couponsCountContainer.attr('refresh_url'),function(data){$('.coupon_count').updateCouponsQuantity(data.package_id,data.count);setTimeout(updateSaleCouponsCount,60*5*1000);});}}
jQuery.openProfileWindow=function(url){var _w=screen.width-100;var _h=screen.height-160;if(_w>1357){_w=1357;}
$.open.newWindow(url,{windowName:url,width:_w,height:_h,left:0,top:0},{});};jQuery.fn.random=function(){var randomIndex=Math.floor(Math.random()*this.length);return jQuery(this[randomIndex]);};$(document).on('click','.contest_tabs_sub_items a.sub_item',function(e){e.preventDefault();var $tab=$(this);if($tab.hasClass('loaded')){$('.contest_tabs_sub_items a.sub_item').removeClass('selected');$tab.addClass('selected');$('.contest_content').hide();$('#'+$tab.data('for_tab')).show();}else{$.ajax({url:$(this).data('ajax_url'),context:$(this),type:'get',success:function(data,textStatus,XMLHttpRequest){$('.contest_tabs_sub_items a.sub_item').removeClass('selected');$tab.addClass('selected');$tab.addClass('loaded');$('.contest_content').hide();$('#'+$tab.data('for_tab')).html(data).show();},error:function(request,textStatus,errorThrown){if(undefined!=window.console){console.log('[ '+textStatus+' ] '+errorThrown);}}});}
return false;});$(document).on('click','.invisible_mode_info_button',function(){var $popover=$(this).parents('.control_popover');$popover.toggleClass('always_show');return false;});$(document).on('click','body',function(e){if($(e.target).parents('.control_popover').length==0){$('.control_popover.always_show').removeClass('always_show');}
return true;});$(document).on('click','#invisible_mode_description .close',function(){$(this).parents('.control_popover').removeClass('always_show');return true;});$.removeURLParameter=function(parameter){var url=window.location.href;var queryString=(url.indexOf("?")!==-1)?url.split("?")[1]:"";if(queryString!==""){if(typeof parameter=='undefined')return;var newUrl=url.split("?")[0],param,params_arr=[];if(queryString!==""){params_arr=queryString.split("&");for(var i=params_arr.length-1;i>=0;i-=1){param=params_arr[i].split("=")[0];if(param===parameter){params_arr.splice(i,1);}}
if(params_arr.length){newUrl=newUrl+"?"+params_arr.join("&");}}
if(url==newUrl)return;if(undefined!=History&&History.enabled){History.replaceState({},document.title,newUrl);}else{window.location.href=newUrl;}}};$.localStorageAvailable=null;$.isLocalStorageAvailable=function(){if($.localStorageAvailable===null){if(typeof localStorage=='undefined'){$.localStorageAvailable=false;}
try{localStorage['test']=1;$.localStorageAvailable=true;}catch(e){$.localStorageAvailable=false;}}
return $.localStorageAvailable;};function HeaderResize(){this.$header=$('#header');this.$confirm=$('.confirm_email_box');this.$chat=$('#mls_chatconsole');this.$wrapper=$('.wrapper');this.hasSmallHeader=!$.mobile&&$('body').data('bls')==1&&this.$header.hasClass('is_chm');this.scrollTimeout=null;this.initHeaderTop=this.$confirm.outerHeight(true)||0;this.lastScrollTop=$(window).scrollTop();this.minifyInProcess=false;this.normalizeInProcess=false;this._attachHandlers();}
HeaderResize.prototype={constructor:HeaderResize,_attachHandlers:function(){var self=this;if(self.hasSmallHeader&&self.$header.hasClass('chm_fixed')){$(window).scroll(function(){clearTimeout(self.scrollTimeout);self._fixPosOnScroll();self.scrollTimeout=setTimeout(function(){self._checkScrollPos();},10);self.lastScrollTop=$(window).scrollTop();});self._checkScrollPos();}},_checkScrollPos:function(){var self=this;if($(window).scrollTop()>self.initHeaderTop){self.minify();}else{self.normalize();}
if(self.lastScrollTop==0&&self.minifyInProcess&&!self.normalizeInProcess){setTimeout(function(){self._checkScrollPos();},200)}},_fixPosOnScroll:function(){var self=this,scrollLeft=$(window).scrollLeft();if(self.$header.hasClass('chm_fixed_yes')){if(window.isRTL){self.$header.css('right',scrollLeft+'px');}else{self.$header.css('left',((-1)*scrollLeft)+'px');}}else{if(window.isRTL){self.$header.css('right','')}else{self.$header.css('left','');}}},minify:function(){var self=this,isChatOpened=typeof chat=='object'&&self.$chat.is(':visible');if(self.hasSmallHeader&&!self.$header.hasClass('min')){if(!isChatOpened){self.$header.height(0).addClass('min');}
self.$header.stop(true,true).animate({height:30},{duration:250,start:function(){self.minifyInProcess=true;},complete:function(){self.minifyInProcess=false;self.$header.addClass('min');if(isChatOpened&&!self.$confirm.length||(self.$confirm.length&&self.$confirm.hasClass('min'))){chat.setChatHeight();chat.adjustDMCASecurityIcon();}}});if(self.$confirm.length&&isChatOpened){self.$confirm.stop(true,false).addClass('min',250,function(){if(isChatOpened&&self.$header.hasClass('min')){chat.setChatHeight();chat.adjustDMCASecurityIcon();}});}
self.checkNarrow();}
if(self.$header.hasClass('chm_fixed')){if(isChatOpened){self.$header.removeClass('chm_fixed_yes');self.$wrapper.css('padding-top',0);}else{self.$header.addClass('chm_fixed_yes');if(self.$confirm.length){self.$wrapper.css('padding-top',62);}else{self.$wrapper.css('padding-top',72);}
self._fixPosOnScroll();}}},normalize:function(){var self=this,isChatOpened=typeof chat=='object'&&self.$chat.is(':visible');if(self.hasSmallHeader&&self.$header.hasClass('min')&&!isChatOpened){self.$header.stop(true,true).animate({height:62},{duration:250,start:function(){self.normalizeInProcess=true;},step:function(height){if(self.$confirm.length){self.$wrapper.css('padding-top',62-height);}},complete:function(){self.normalizeInProcess=false;self.$header.removeClass('min narrow chm_fixed_yes');self.$wrapper.css('padding-top',0);self._fixPosOnScroll();}});if(self.$header.hasClass('chm_fixed_yes')){if(self.$confirm.length){self.$wrapper.css('padding-top',62);self.$header.removeClass('chm_fixed_yes');}else{self.$wrapper.css('padding-top',72);}}else{if(self.$confirm.length){self.$confirm.stop(true,false).removeClass('min narrow',250);}}}else if(isChatOpened){self.$confirm.stop(true,false).addClass('min narrow',250);}},checkNarrow:function(){var $blocks=$('#header, .confirm_email_box');if($blocks.outerWidth()<1400||(this.$header.hasClass('lnw')&&$blocks.outerWidth()<1550)){$blocks.addClass('narrow');}else{$blocks.removeClass('narrow');}}};
$.fn.checkPassword=function(){var $cont=$(this).closest('form');var $input=$(this);var url=$input.attr('validate_password_url');url+='?username='+$cont.find('input[id$=_username]').val()+'&value='+$input.val();$.getJSON(url,function(data){if(data.status=='success'){$input.addClass('valid');$input.closest('.form_row').find('.form_errors_in_row').html('');$input.parent().find('div.obelix').removeClass('notvalid').addClass('valid');$input.parent().removeClass('notvalid').addClass('valid');var $retypePassword=$cont.find('input[id$=_retype_password]');if($retypePassword.length&&$retypePassword.val()!=''){$retypePassword.checkRetypePassword();}}else if(data.status!='success'){$input.removeClass('valid');if(!$input.parents('.step_green').length&&!$input.parents('.step_yellow').length){$input.closest('.form_row').find('.form_errors_in_row').html('<div class="form_error_list"><div class="form_error">'+data.message+'</div></div>');}
$input.parent().find('div.obelix').removeClass('valid').addClass('notvalid').attr('title',data.message);$input.parent().removeClass('valid').addClass('notvalid');}});};$.fn.checkRetypePassword=function(){var $cont=$(this).closest('form');var $retypePassword=$cont.find('input[id$=_retype_password]');var $password=$cont.find('input[id$=_password]:not(input[id$=_retype_password])');var $obelixPassword=$password.parent().find('div.obelix');var $obelixRetypePassword=$retypePassword.parent().find('div.obelix');if($retypePassword.val()==''){$obelixRetypePassword.removeClass('valid').addClass('notvalid');$retypePassword.closest('.form_row').find('.form_errors_in_row').html('<div class="form_error_list"><div class="form_error">'+__('Required.')+'</div></div>');}else if($retypePassword.val()!=$password.val()){$retypePassword.closest('.form_row').find('.form_errors_in_row').html('<div class="form_error_list"><div class="form_error">'+__('Passwords are not the same.')+'</div></div>');$obelixRetypePassword.removeClass('valid').addClass('notvalid');}else if(!$password.hasClass('valid')){$obelixRetypePassword.removeClass('valid').addClass('notvalid');}else{$obelixPassword.removeClass('notvalid').addClass('valid');$obelixRetypePassword.removeClass('notvalid').addClass('valid');}};$.fn.checkvalidateurl=function(onerror){var $popup=$('#member_join_popup');var $input=$(this);var url=$input.attr('validate_url');url+=url.indexOf('?')==-1?'?':'&';$.getJSON(url+'value='+$input.val(),function(data){if(data.status=='success'){$input.closest('.form_row').find('.form_errors_in_row').html('');if($input.val()!=''){$input.parent().find('div.obelix').removeClass('notvalid').addClass('valid');$input.parent().removeClass('notvalid').addClass('valid');}else{$input.parent().find('div.obelix').removeClass('notvalid').removeClass('valid');$input.parent().removeClass('notvalid').removeClass('valid');}
if($popup.hasClass('gold_step_girl')||$popup.hasClass('gold_step_yellow')){$('.gold_step_girl_error').hide();}}else if(data.status!='success'){if(!$popup.hasClass('step_green')&&!$popup.hasClass('step_yellow')&&!$popup.hasClass('gold_step_girl')&&!$popup.hasClass('gold_step_yellow')){$input.closest('.form_row').find('.form_errors_in_row').html('<div class="form_error_list"><div class="form_error">'+data.message+'</div></div>');}
$input.parent().find('div.obelix').removeClass('valid').addClass('notvalid').attr('title',data.message);$input.parent().removeClass('valid').addClass('notvalid');if($popup.hasClass('gold_step_girl')||$popup.hasClass('gold_step_yellow')){$('.gold_step_girl_error').show();}
if(onerror){onerror(data.message);}}});};
!function(a,b,c,d){"use strict";var e=c("html"),f=c(a),g=c(b),h=c.fancybox=function(){h.open.apply(this,arguments)},i=navigator.userAgent.match(/msie/i),j=null,k=b.createTouch!==d,l=function(a){return a&&a.hasOwnProperty&&a instanceof c},m=function(a){return a&&"string"===c.type(a)},n=function(a){return m(a)&&a.indexOf("%")>0},o=function(a){return a&&!(a.style.overflow&&"hidden"===a.style.overflow)&&(a.clientWidth&&a.scrollWidth>a.clientWidth||a.clientHeight&&a.scrollHeight>a.clientHeight)},p=function(a,b){var c=parseInt(a,10)||0;return b&&n(a)&&(c=h.getViewport()[b]/100*c),Math.ceil(c)},q=function(a,b){return p(a,b)+"px"};c.extend(h,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!k,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,svAutoMargin:!1,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(i?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:c.noop,beforeLoad:c.noop,afterLoad:c.noop,beforeShow:c.noop,afterShow:c.noop,beforeChange:c.noop,beforeClose:c.noop,afterClose:c.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,b){return a&&(c.isPlainObject(b)||(b={}),!1!==h.close(!0))?(c.isArray(a)||(a=l(a)?c(a).get():[a]),c.each(a,function(e,f){var i,j,k,n,o,p,q,g={};"object"===c.type(f)&&(f.nodeType&&(f=c(f)),l(f)?(g={href:f.data("fancybox-href")||f.attr("href"),title:f.data("fancybox-title")||f.attr("title"),isDom:!0,element:f},c.metadata&&c.extend(!0,g,f.metadata())):g=f),i=b.href||g.href||(m(f)?f:null),j=b.title!==d?b.title:g.title||"",k=b.content||g.content,n=k?"html":b.type||g.type,!n&&g.isDom&&(n=f.data("fancybox-type"),n||(o=f.prop("class").match(/fancybox\.(\w+)/),n=o?o[1]:null)),m(i)&&(n||(h.isImage(i)?n="image":h.isSWF(i)?n="swf":"#"===i.charAt(0)?n="inline":m(f)&&(n="html",k=f)),"ajax"===n&&(p=i.split(/\s+/,2),i=p.shift(),q=p.shift())),k||("inline"===n?i?k=c(m(i)?i.replace(/.*(?=#[^\s]+$)/,""):i):g.isDom&&(k=f):"html"===n?k=i:n||i||!g.isDom||(n="inline",k=f)),c.extend(g,{href:i,type:n,content:k,title:j,selector:q}),a[e]=g}),h.opts=c.extend(!0,{},h.defaults,b),b.keys!==d&&(h.opts.keys=b.keys?c.extend({},h.defaults.keys,b.keys):!1),h.group=a,h._start(h.opts.index)):void 0},cancel:function(){var a=h.coming;a&&!1!==h.trigger("onCancel")&&(h.hideLoading(),h.ajaxLoad&&h.ajaxLoad.abort(),h.ajaxLoad=null,h.imgPreload&&(h.imgPreload.onload=h.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),h.coming=null,h.current||h._afterZoomOut(a))},close:function(a){h.cancel(),!1!==h.trigger("beforeClose")&&(h.unbindEvents(),h.isActive&&(h.isOpen&&a!==!0?(h.isOpen=h.isOpened=!1,h.isClosing=!0,c(".fancybox-item, .fancybox-nav").remove(),h.wrap.stop(!0,!0).removeClass("fancybox-opened"),h.transitions[h.current.closeMethod]()):(c(".fancybox-wrap").stop(!0).trigger("onReset").remove(),h._afterZoomOut())))},play:function(a){var b=function(){clearTimeout(h.player.timer)},c=function(){b(),h.current&&h.player.isActive&&(h.player.timer=setTimeout(h.next,h.current.playSpeed))},d=function(){b(),g.unbind(".player"),h.player.isActive=!1,h.trigger("onPlayEnd")},e=function(){h.current&&(h.current.loop||h.current.index<h.group.length-1)&&(h.player.isActive=!0,g.bind({"onCancel.player beforeClose.player":d,"onUpdate.player":c,"beforeLoad.player":b}),c(),h.trigger("onPlayStart"))};a===!0||!h.player.isActive&&a!==!1?e():d()},next:function(a){var b=h.current;b&&(m(a)||(a=b.direction.next),h.jumpto(b.index+1,a,"next"))},prev:function(a){var b=h.current;b&&(m(a)||(a=b.direction.prev),h.jumpto(b.index-1,a,"prev"))},jumpto:function(a,b,c){var e=h.current;e&&(a=p(a),h.direction=b||e.direction[a>=e.index?"next":"prev"],h.router=c||"jumpto",e.loop&&(0>a&&(a=e.group.length+a%e.group.length),a%=e.group.length),e.group[a]!==d&&(h.cancel(),h._start(a)))},reposition:function(a,b){var f,d=h.current,e=d?d.wrap:null;e&&(f=h._getPosition(b),a&&"scroll"===a.type?(delete f.position,e.stop(!0,!0).animate(f,200)):(e.css(f),d.pos=c.extend({},d.dim,f)))},update:function(a){var b=a&&a.type,c=!b||"orientationchange"===b;c&&(clearTimeout(j),j=null),h.isOpen&&!j&&(j=setTimeout(function(){var d=h.current;d&&!h.isClosing&&(h.wrap.removeClass("fancybox-tmp"),(c||"load"===b||"resize"===b&&d.autoResize)&&h._setDimension(),"scroll"===b&&d.canShrink||h.reposition(a),h.trigger("onUpdate"),j=null)},c&&!k?0:300))},toggle:function(a){h.isOpen&&(h.current.fitToView="boolean"===c.type(a)?a:!h.current.fitToView,k&&(h.wrap.removeAttr("style").addClass("fancybox-tmp"),h.trigger("onUpdate")),h.update())},hideLoading:function(){g.unbind(".loading"),c("#fancybox-loading").remove()},showLoading:function(){var a,b;h.hideLoading(),a=c('<div id="fancybox-loading"><div></div></div>').click(h.cancel).appendTo("body"),g.bind("keydown.loading",function(a){27===(a.which||a.keyCode)&&(a.preventDefault(),h.cancel())}),h.defaults.fixed||(b=h.getViewport(),a.css({position:"absolute",top:.5*b.h+b.y,left:.5*b.w+b.x}))},getViewport:function(){var b=h.current&&h.current.locked||!1,c={x:f.scrollLeft(),y:f.scrollTop()};return b?(c.w=b[0].clientWidth,c.h=b[0].clientHeight):(c.w=k&&a.innerWidth?a.innerWidth:f.width(),c.h=k&&a.innerHeight?a.innerHeight:f.height()),c},unbindEvents:function(){h.wrap&&l(h.wrap)&&h.wrap.unbind(".fb"),g.unbind(".fb"),f.unbind(".fb")},bindEvents:function(){var b,a=h.current;a&&(f.bind("orientationchange.fb"+(k?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),h.update),b=a.keys,b&&g.bind("keydown.fb",function(e){var f=e.which||e.keyCode,g=e.target||e.srcElement;return 27===f&&h.coming?!1:void(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||g&&(g.type||c(g).is("[contenteditable]"))||c.each(b,function(b,g){return a.group.length>1&&g[f]!==d?(h[b](g[f]),e.preventDefault(),!1):c.inArray(f,g)>-1?(h[b](),e.preventDefault(),!1):void 0}))}),c.fn.mousewheel&&a.mouseWheel&&h.wrap.bind("mousewheel.fb",function(b,d,e,f){for(var g=b.target||null,i=c(g),j=!1;i.length&&!(j||i.is(".fancybox-skin")||i.is(".fancybox-wrap"));)j=o(i[0]),i=c(i).parent();0===d||j||h.group.length>1&&!a.canShrink&&(f>0||e>0?h.prev(f>0?"down":"left"):(0>f||0>e)&&h.next(0>f?"up":"right"),b.preventDefault())}))},trigger:function(a,b){var d,e=b||h.coming||h.current;if(e){if(c.isFunction(e[a])&&(d=e[a].apply(e,Array.prototype.slice.call(arguments,1))),d===!1)return!1;e.helpers&&c.each(e.helpers,function(b,d){d&&h.helpers[b]&&c.isFunction(h.helpers[b][a])&&h.helpers[b][a](c.extend(!0,{},h.helpers[b].defaults,d),e)}),g.trigger(a)}},isImage:function(a){return m(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return m(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var d,e,f,g,i,b={};if(a=p(a),d=h.group[a]||null,!d)return!1;if(b=c.extend(!0,{},h.opts,d),g=b.margin,i=b.padding,"number"===c.type(g)&&(b.margin=[g,g,g,g]),"number"===c.type(i)&&(b.padding=[i,i,i,i]),b.modal&&c.extend(!0,b,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),b.autoSize&&(b.autoWidth=b.autoHeight=!0),"auto"===b.width&&(b.autoWidth=!0),"auto"===b.height&&(b.autoHeight=!0),b.group=h.group,b.index=a,h.coming=b,!1===h.trigger("beforeLoad"))return void(h.coming=null);if(f=b.type,e=b.href,!f)return h.coming=null,h.current&&h.router&&"jumpto"!==h.router?(h.current.index=a,h[h.router](h.direction)):!1;if(h.isActive=!0,("image"===f||"swf"===f)&&(b.autoHeight=b.autoWidth=!1,b.scrolling="visible"),"image"===f&&(b.aspectRatio=!0),"iframe"===f&&k&&(b.scrolling="scroll"),b.wrap=c(b.tpl.wrap).addClass("fancybox-"+(k?"mobile":"desktop")+" fancybox-type-"+f+" fancybox-tmp "+b.wrapCSS).appendTo(b.parent||"body"),c.extend(b,{skin:c(".fancybox-skin",b.wrap),outer:c(".fancybox-outer",b.wrap),inner:c(".fancybox-inner",b.wrap)}),c.each(["Top","Right","Bottom","Left"],function(a,c){b.skin.css("padding"+c,q(b.padding[a]))}),h.trigger("onReady"),"inline"===f||"html"===f){if(!b.content||!b.content.length)return h._error("content")}else if(!e)return h._error("href");"image"===f?h._loadImage():"ajax"===f?h._loadAjax():"iframe"===f?h._loadIframe():h._afterLoad()},_error:function(a){c.extend(h.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:h.coming.tpl.error}),h._afterLoad()},_loadImage:function(){var a=h.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null,h.coming.width=this.width/h.opts.pixelRatio,h.coming.height=this.height/h.opts.pixelRatio,h._afterLoad()},a.onerror=function(){this.onload=this.onerror=null,h._error("image")},a.src=h.coming.href,a.complete!==!0&&h.showLoading()},_loadAjax:function(){var a=h.coming;h.showLoading(),h.ajaxLoad=c.ajax(c.extend({},a.ajax,{url:a.href,error:function(a,b){h.coming&&"abort"!==b?h._error("ajax",a):h.hideLoading()},success:function(b,c){"success"===c&&(a.content=b,h._afterLoad())}}))},_loadIframe:function(){var a=h.coming,b=c(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",k?"auto":a.iframe.scrolling).attr("src",a.href);c(a.wrap).bind("onReset",function(){try{c(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}}),a.iframe.preload&&(h.showLoading(),b.one("load",function(){c(this).data("ready",1),k||c(this).bind("load.fb",h.update),c(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),h._afterLoad()})),a.content=b.appendTo(a.inner),a.iframe.preload||h._afterLoad()},_preloadImages:function(){var e,f,a=h.group,b=h.current,c=a.length,d=b.preload?Math.min(b.preload,c-1):0;for(f=1;d>=f;f+=1)e=a[(b.index+f)%c],"image"===e.type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var e,f,g,i,j,k,a=h.coming,b=h.current,d="fancybox-placeholder";if(h.hideLoading(),a&&h.isActive!==!1){if(!1===h.trigger("afterLoad",a,b))return a.wrap.stop(!0).trigger("onReset").remove(),void(h.coming=null);switch(b&&(h.trigger("beforeChange",b),b.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),h.unbindEvents(),e=a,f=a.content,g=a.type,i=a.scrolling,c.extend(h,{wrap:e.wrap,skin:e.skin,outer:e.outer,inner:e.inner,current:e,previous:b}),j=e.href,g){case"inline":case"ajax":case"html":e.selector?f=c("<div>").html(f).find(e.selector):l(f)&&(f.data(d)||f.data(d,c('<div class="'+d+'"></div>').insertAfter(f).hide()),f=f.show().detach(),e.wrap.bind("onReset",function(){c(this).find(f).length&&f.hide().replaceAll(f.data(d)).data(d,!1)}));break;case"image":f=e.tpl.image.replace("{href}",j);break;case"swf":f='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+j+'"></param>',k="",c.each(e.swf,function(a,b){f+='<param name="'+a+'" value="'+b+'"></param>',k+=" "+a+'="'+b+'"'}),f+='<embed src="'+j+'" type="application/x-shockwave-flash" width="100%" height="100%"'+k+"></embed></object>"}l(f)&&f.parent().is(e.inner)||e.inner.append(f),h.trigger("beforeShow"),e.inner.css("overflow","yes"===i?"scroll":"no"===i?"hidden":i),h._setDimension(),h.reposition(),h.isOpen=!1,h.coming=null,h.bindEvents(),h.isOpened?b.prevMethod&&h.transitions[b.prevMethod]():c(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(),h.transitions[h.isOpened?e.nextMethod:e.openMethod](),h._preloadImages()}},_setDimension:function(){var y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,a=h.getViewport(),b=0,d=!1,e=!1,f=h.wrap,g=h.skin,i=h.inner,j=h.current,k=j.width,l=j.height,m=j.minWidth,o=j.minHeight,r=j.maxWidth,s=j.maxHeight,t=j.scrolling,u=j.scrollOutside?j.scrollbarWidth:0,v=j.margin,w=p(v[1]+v[3]),x=p(v[0]+v[2]);if(f.add(g).add(i).width("auto").height("auto").removeClass("fancybox-tmp"),y=p(g.outerWidth(!0)-g.width()),z=p(g.outerHeight(!0)-g.height()),A=w+y,B=x+z,C=n(k)?(a.w-A)*p(k)/100:k,D=n(l)?(a.h-B)*p(l)/100:l,"iframe"===j.type){if(L=j.content,j.autoHeight&&1===L.data("ready"))try{L[0].contentWindow.document.location&&(i.width(C).height(9999),M=L.contents().find("body"),u&&M.css("overflow-x","hidden"),D=M.outerHeight(!0))}catch(N){}}else(j.autoWidth||j.autoHeight)&&(i.addClass("fancybox-tmp"),j.autoWidth||i.width(C),j.autoHeight||i.height(D),j.autoWidth&&(C=i.width()),j.autoHeight&&(D=i.height()),i.removeClass("fancybox-tmp"));if(k=p(C),l=p(D),G=C/D,m=p(n(m)?p(m,"w")-A:m),r=p(n(r)?p(r,"w")-A:r),o=p(n(o)?p(o,"h")-B:o),s=p(n(s)?p(s,"h")-B:s),E=r,F=s,j.fitToView&&(r=Math.min(a.w-A,r),s=Math.min(a.h-B,s)),J=a.w-w,K=a.h-x,j.aspectRatio?(k>r&&(k=r,l=p(k/G)),l>s&&(l=s,k=p(l*G)),m>k&&(k=m,l=p(k/G)),o>l&&(l=o,k=p(l*G))):(k=Math.max(m,Math.min(k,r)),j.autoHeight&&"iframe"!==j.type&&(i.width(k),l=i.height()),l=Math.max(o,Math.min(l,s))),j.fitToView)if(i.width(k).height(l),f.width(k+y),H=f.width(),I=f.height(),j.aspectRatio)for(;(H>J||I>K)&&k>m&&l>o&&!(b++>19);)l=Math.max(o,Math.min(s,l-10)),k=p(l*G),m>k&&(k=m,l=p(k/G)),k>r&&(k=r,l=p(k/G)),i.width(k).height(l),f.width(k+y),H=f.width(),I=f.height();else k=Math.max(m,Math.min(k,k-(H-J))),l=Math.max(o,Math.min(l,l-(I-K)));u&&"auto"===t&&D>l&&J>k+y+u&&(k+=u),i.width(k).height(l),f.width(k+y),H=f.width(),I=f.height(),d=(H>J||I>K)&&k>m&&l>o,e=j.aspectRatio?E>k&&F>l&&C>k&&D>l:(E>k||F>l)&&(C>k||D>l),c.extend(j,{dim:{width:q(H),height:q(I)},origWidth:C,origHeight:D,canShrink:d,canExpand:e,wPadding:y,hPadding:z,wrapSpace:I-g.outerHeight(!0),skinSpace:g.height()-l}),!L&&j.autoHeight&&l>o&&s>l&&!e&&i.height("auto")},_getPosition:function(b){var d=h.current,e=h.getViewport(),f=d.margin,g=h.wrap.width()+f[1]+f[3],i=h.wrap.height()+f[0]+f[2],j={position:"absolute",top:f[0],left:f[3]};return d.autoCenter&&d.fixed&&!b&&i<=e.h&&g<=e.w?j.position="fixed":d.locked||(j.top+=e.y,j.left+=e.x),j.top=q(Math.max(j.top,j.top+(e.h-i)*d.topRatio)),j.left=q(Math.max(j.left,j.left+(e.w-g)*d.leftRatio)),d.svAutoMargin&&(c(a).width()<g&&c(a).width()>h.wrap.width()?j.left=q((c(a).width()-h.wrap.width())/2):c(a).width()<h.wrap.width()&&(j.left=q(0)),c(a).height()<i&&c(a).height()>h.wrap.height()?j.top=q((c(a).height()-h.wrap.height())/2):c(a).height()<h.wrap.height()&&(d.closeBtn?j.top=q(20):j.top=q(5))),j},_afterZoomIn:function(){var a=h.current;a&&(h.isOpen=h.isOpened=!0,h.wrap.css("overflow","visible").addClass("fancybox-opened"),h.update(),(a.closeClick||a.nextClick&&h.group.length>1)&&h.inner.css("cursor","pointer").bind("click.fb",function(b){c(b.target).is("a")||c(b.target).parent().is("a")||(b.preventDefault(),h[a.closeClick?"close":"next"]())}),a.closeBtn&&c(a.tpl.closeBtn).appendTo(h.skin).bind("click.fb",function(a){a.preventDefault(),h.close()}),a.arrows&&h.group.length>1&&((a.loop||a.index>0)&&c(a.tpl.prev).appendTo(h.outer).bind("click.fb",h.prev),(a.loop||a.index<h.group.length-1)&&c(a.tpl.next).appendTo(h.outer).bind("click.fb",h.next)),h.trigger("afterShow"),a.loop||a.index!==a.group.length-1?h.opts.autoPlay&&!h.player.isActive&&(h.opts.autoPlay=!1,h.play()):h.play(!1))},_afterZoomOut:function(a){a=a||h.current,c(".fancybox-wrap").trigger("onReset").remove(),c.extend(h,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),h.trigger("afterClose",a)}}),h.transitions={getOrigPosition:function(){var a=h.current,b=a.element,c=a.orig,d={},e=50,f=50,g=a.hPadding,i=a.wPadding,j=h.getViewport();return!c&&a.isDom&&b.is(":visible")&&(c=b.find("img:first"),c.length||(c=b)),l(c)?(d=c.offset(),c.is("img")&&(e=c.outerWidth(),f=c.outerHeight())):(d.top=j.y+(j.h-f)*a.topRatio,d.left=j.x+(j.w-e)*a.leftRatio),("fixed"===h.wrap.css("position")||a.locked)&&(d.top-=j.y,d.left-=j.x),d={top:q(d.top-g*a.topRatio),left:q(d.left-i*a.leftRatio),width:q(e+i),height:q(f+g)}},step:function(a,b){var c,d,e,f=b.prop,g=h.current,i=g.wrapSpace,j=g.skinSpace;("width"===f||"height"===f)&&(c=b.end===b.start?1:(a-b.start)/(b.end-b.start),h.isClosing&&(c=1-c),d="width"===f?g.wPadding:g.hPadding,e=a-d,h.skin[f](p("width"===f?e:e-i*c)),h.inner[f](p("width"===f?e:e-i*c-j*c)))},zoomIn:function(){var a=h.current,b=a.pos,d=a.openEffect,e="elastic"===d,f=c.extend({opacity:1},b);delete f.position,e?(b=this.getOrigPosition(),a.openOpacity&&(b.opacity=.1)):"fade"===d&&(b.opacity=.1),h.wrap.css(b).animate(f,{duration:"none"===d?0:a.openSpeed,easing:a.openEasing,step:e?this.step:null,complete:h._afterZoomIn})},zoomOut:function(){var a=h.current,b=a.closeEffect,c="elastic"===b,d={opacity:.1};c&&(d=this.getOrigPosition(),a.closeOpacity&&(d.opacity=.1)),h.wrap.animate(d,{duration:"none"===b?0:a.closeSpeed,easing:a.closeEasing,step:c?this.step:null,complete:h._afterZoomOut})},changeIn:function(){var g,a=h.current,b=a.nextEffect,c=a.pos,d={opacity:1},e=h.direction,f=200;c.opacity=.1,"elastic"===b&&(g="down"===e||"up"===e?"top":"left","down"===e||"right"===e?(c[g]=q(p(c[g])-f),d[g]="+="+f+"px"):(c[g]=q(p(c[g])+f),d[g]="-="+f+"px")),"none"===b?h._afterZoomIn():h.wrap.css(c).animate(d,{duration:a.nextSpeed,easing:a.nextEasing,complete:h._afterZoomIn})},changeOut:function(){var a=h.previous,b=a.prevEffect,d={opacity:.1},e=h.direction,f=200;"elastic"===b&&(d["down"===e||"up"===e?"top":"left"]=("up"===e||"left"===e?"-":"+")+"="+f+"px"),a.wrap.animate(d,{duration:"none"===b?0:a.prevSpeed,easing:a.prevEasing,complete:function(){c(this).trigger("onReset").remove()}})}},h.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!k,fixed:!0},overlay:null,fixed:!1,el:c("html"),create:function(a){a=c.extend({},this.defaults,a),this.overlay&&this.close(),this.overlay=c('<div class="fancybox-overlay"></div>').appendTo(h.coming?h.coming.parent:a.parent),this.fixed=!1,a.fixed&&h.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var b=this;a=c.extend({},this.defaults,a),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a),this.fixed||(f.bind("resize.overlay",c.proxy(this.update,this)),this.update()),a.closeClick&&this.overlay.bind("click.overlay",function(a){return c(a.target).hasClass("fancybox-overlay")?(h.isActive?h.close():b.close(),!1):void 0}),this.overlay.css(a.css).show()},close:function(){var a,b;f.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(c(".fancybox-margin").removeClass("fancybox-margin"),a=f.scrollTop(),b=f.scrollLeft(),this.el.removeClass("fancybox-lock"),f.scrollTop(a).scrollLeft(b)),c(".fancybox-overlay").remove().hide(),c.extend(this,{overlay:null,fixed:!1})},update:function(){var c,a="100%";this.overlay.width(a).height("100%"),i?(c=Math.max(b.documentElement.offsetWidth,b.body.offsetWidth),g.width()>c&&(a=g.width())):g.width()>f.width()&&(a=g.width()),this.overlay.width(a).height(g.height())},onReady:function(a,b){var d=this.overlay;c(".fancybox-overlay").stop(!0,!0),d||this.create(a),a.locked&&this.fixed&&b.fixed&&(d||(this.margin=g.height()>f.height()?c("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1),a.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var d,e;b.locked&&(this.margin!==!1&&(c("*").filter(function(){return"fixed"===c(this).css("position")&&!c(this).hasClass("fancybox-overlay")&&!c(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),d=f.scrollTop(),e=f.scrollLeft(),this.el.addClass("fancybox-lock"),f.scrollTop(d).scrollLeft(e)),this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!h.coming&&this.overlay.fadeOut(a.speedOut,c.proxy(this.close,this))}},h.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var f,g,b=h.current,d=b.title,e=a.type;if(c.isFunction(d)&&(d=d.call(b.element,b)),m(d)&&""!==c.trim(d)){switch(f=c('<div class="fancybox-title fancybox-title-'+e+'-wrap">'+d+"</div>"),e){case"inside":g=h.skin;break;case"outside":g=h.wrap;break;case"over":g=h.inner;break;default:g=h.skin,f.appendTo("body"),i&&f.width(f.width()),f.wrapInner('<span class="child"></span>'),h.current.margin[2]+=Math.abs(p(f.css("margin-bottom")))}f["top"===a.position?"prependTo":"appendTo"](g)}}},c.fn.fancybox=function(a){var b,d=c(this),e=this.selector||"",f=function(f){var j,k,g=c(this).blur(),i=b;f.ctrlKey||f.altKey||f.shiftKey||f.metaKey||g.is(".fancybox-wrap")||(j=a.groupAttr||"data-fancybox-group",k=g.attr(j),k||(j="rel",k=g.get(0)[j]),k&&""!==k&&"nofollow"!==k&&(g=e.length?c(e):d,g=g.filter("["+j+'="'+k+'"]'),i=g.index(this)),a.index=i,h.open(g,a)!==!1&&f.preventDefault())};return a=a||{},b=a.index||0,e&&a.live!==!1?g.undelegate(e,"click.fb-start").delegate(e+":not('.fancybox-item, .fancybox-nav')","click.fb-start",f):d.unbind("click.fb-start").bind("click.fb-start",f),this.filter("[data-fancybox-start=1]").trigger("click"),this},g.ready(function(){var b,f;c.scrollbarWidth===d&&(c.scrollbarWidth=function(){var a=c('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),d=b.innerWidth()-b.height(99).innerWidth();return a.remove(),d}),c.support.fixedPosition===d&&(c.support.fixedPosition=function(){var a=c('<div style="position:fixed;top:20px;"></div>').appendTo("body"),b=20===a[0].offsetTop||15===a[0].offsetTop;return a.remove(),b}()),c.extend(h.defaults,{scrollbarWidth:c.scrollbarWidth(),fixed:c.support.fixedPosition,parent:c("body")}),b=c(a).width(),e.addClass("fancybox-lock-test"),f=c(a).width(),e.removeClass("fancybox-lock-test"),c("<style type='text/css'>.fancybox-margin{margin-right:"+(f-b)+"px;}</style>").appendTo("head")})}(window,document,jQuery);
/*!
 * jQuery Tools v1.2.7 - The missing UI library for the Web
 *
 * scrollable/scrollable.js
 * scrollable/scrollable.autoscroll.js
 * scrollable/scrollable.navigator.js
 * tabs/tabs.js
 * tabs/tabs.slideshow.js
 * toolbox/toolbox.flashembed.js
 * tooltip/tooltip.js
 * validator/validator.js
 *
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 *
 * http://flowplayer.org/tools/
 *
 * jquery.event.wheel.js - rev 1
 * Copyright (c) 2008, Three Dub Media (http://threedubmedia.com)
 * Liscensed under the MIT License (MIT-LICENSE.txt)
 * http://www.opensource.org/licenses/mit-license.php
 * Created: 2008-07-01 | Updated: 2008-07-14
 *
 * -----
 *
 */
!function(a){function c(b,c){var d=a(c);return d.length<2?d:b.parent().find(c)}function e(b,e){var f=this,g=b.add(f),h=b.children(),i=0,j=e.vertical;if(d||(d=f),h.length>1&&(h=a(e.items,b)),e.size>1&&(e.circular=!1),a.extend(f,{getConf:function(){return e},getIndex:function(){return i},getSize:function(){return f.getItems().size()},getNaviButtons:function(){return n.add(o)},getRoot:function(){return b},getItemWrap:function(){return h},getItems:function(){return h.find(e.item).not("."+e.clonedClass)},move:function(a,b){return f.seekTo(i+a,b)},next:function(a){return f.move(e.size,a)},prev:function(a){return f.move(-e.size,a)},begin:function(a){return f.seekTo(0,a)},end:function(a){return f.seekTo(f.getSize()-1,a)},focus:function(){return d=f,f},addItem:function(b){return b=a(b),e.circular?(h.children().last().before(b),h.children().first().replaceWith(b.clone().addClass(e.clonedClass))):(h.append(b),o.removeClass("disabled")),g.trigger("onAddItem",[b]),f},seekTo:function(b,c,k){if(b.jquery||(b*=1),e.circular&&0===b&&-1==i&&0!==c)return f;if(!e.circular&&0>b||b>f.getSize()||-1>b)return f;var l=b;b.jquery?b=f.getItems().index(b):l=f.getItems().eq(b);var m=a.Event("onBeforeSeek");if(!k&&(g.trigger(m,[b,c]),m.isDefaultPrevented()||!l.length))return f;var n=j?{top:-l.position().top}:{left:-l.position().left};return i=b,d=f,void 0===c&&(c=e.speed),h.animate(n,c,e.easing,k||function(){g.trigger("onSeek",[b])}),f}}),a.each(["onBeforeSeek","onSeek","onAddItem"],function(b,c){a.isFunction(e[c])&&a(f).on(c,e[c]),f[c]=function(b){return b&&a(f).on(c,b),f}}),e.circular){var k=f.getItems().slice(-1).clone().prependTo(h),l=f.getItems().eq(1).clone().appendTo(h);k.add(l).addClass(e.clonedClass),f.onBeforeSeek(function(a,b,c){return a.isDefaultPrevented()?void 0:-1==b?(f.seekTo(k,c,function(){f.end(0)}),a.preventDefault()):void(b==f.getSize()&&f.seekTo(l,c,function(){f.begin(0)}))});var m=b.parents().add(b).filter(function(){return"none"===a(this).css("display")?!0:void 0});m.length?(m.show(),f.seekTo(0,0,function(){}),m.hide()):f.seekTo(0,0,function(){})}var n=c(b,e.prev).click(function(a){a.stopPropagation(),f.prev()}),o=c(b,e.next).click(function(a){a.stopPropagation(),f.next()});if(e.circular||(f.onBeforeSeek(function(a,b){setTimeout(function(){a.isDefaultPrevented()||(n.toggleClass(e.disabledClass,0>=b),o.toggleClass(e.disabledClass,b>=f.getSize()-1))},1)}),e.initialIndex||n.addClass(e.disabledClass)),f.getSize()<2&&n.add(o).addClass(e.disabledClass),e.mousewheel&&a.fn.mousewheel&&b.mousewheel(function(a,b){return e.mousewheel?(f.move(0>b?1:-1,e.wheelSpeed||50),!1):void 0}),e.touch){var p={};h[0].ontouchstart=function(a){var b=a.touches[0];p.x=b.clientX,p.y=b.clientY},h[0].ontouchmove=function(a){if(1==a.touches.length&&!h.is(":animated")){var b=a.touches[0],c=p.x-b.clientX,d=p.y-b.clientY;f[j&&d>0||!j&&c>0?"next":"prev"](),a.preventDefault()}}}e.keyboard&&a(document).on("keydown.scrollable",function(b){if(!(!e.keyboard||b.altKey||b.ctrlKey||b.metaKey||a(b.target).is(":input")||"static"!=e.keyboard&&d!=f)){var c=b.keyCode;return!j||38!=c&&40!=c?j||37!=c&&39!=c?void 0:(f.move(37==c?-1:1),b.preventDefault()):(f.move(38==c?-1:1),b.preventDefault())}}),e.initialIndex&&f.seekTo(e.initialIndex,0,function(){})}a.tools=a.tools||{version:"@VERSION"},a.tools.scrollable={conf:{activeClass:"active",circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:"> *",items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",size:1,speed:400,vertical:!1,touch:!0,wheelSpeed:0}};var d;a.fn.scrollable=function(b){var c=this.data("scrollable");return c?c:(b=a.extend({},a.tools.scrollable.conf,b),this.each(function(){c=new e(a(this),b),a(this).data("scrollable",c)}),b.api?c:this)}}(jQuery),function(a){var b=a.tools.scrollable;b.autoscroll={conf:{autoplay:!0,interval:3e3,autopause:!0}},a.fn.autoscroll=function(c){"number"==typeof c&&(c={interval:c});var e,d=a.extend({},b.autoscroll.conf,c);return this.each(function(){function h(){f&&clearTimeout(f),f=setTimeout(function(){b.next()},d.interval)}var f,b=a(this).data("scrollable"),c=b.getRoot(),g=!1;b&&(e=b),b.play=function(){f||(g=!1,c.on("onSeek",h),h())},b.pause=function(){f=clearTimeout(f),c.off("onSeek",h)},b.resume=function(){g||b.play()},b.stop=function(){g=!0,b.pause()},d.autopause&&c.add(b.getNaviButtons()).hover(b.pause,b.resume),d.autoplay&&b.play()}),d.api?e:this}}(jQuery),function(a){function c(b,c){var d=a(c);return d.length<2?d:b.parent().find(c)}var b=a.tools.scrollable;b.navigator={conf:{navi:".navi",naviItem:null,activeClass:"active",indexed:!1,idPrefix:null,history:!1}},a.fn.navigator=function(d){"string"==typeof d&&(d={navi:d}),d=a.extend({},b.navigator.conf,d);var e;return this.each(function(){function k(a,c,d){b.seekTo(c),d.preventDefault(),i&&history.pushState({i:c},"")}function l(){return f.find(d.naviItem||"> *")}function m(b){var c=a("<"+(d.naviItem||"a")+"/>").click(function(c){k(a(this),b,c)});return 0===b&&c.addClass(h),d.indexed&&c.text(b+1),d.idPrefix&&c.attr("id",d.idPrefix+b),c.appendTo(f)}var b=a(this).data("scrollable"),f=d.navi.jquery?d.navi:c(b.getRoot(),d.navi),g=b.getNaviButtons(),h=d.activeClass,i=d.history&&!!history.pushState,j=b.getConf().size;b&&(e=b),b.getNaviButtons=function(){return g.add(f)},i&&(history.pushState({i:0},""),a(window).on("popstate",function(a){var c=a.originalEvent.state;c&&b.seekTo(c.i)})),l().length?l().each(function(b){a(this).click(function(c){k(a(this),b,c)})}):a.each(b.getItems(),function(a){a%j==0&&m(a)}),b.onBeforeSeek(function(a,b){setTimeout(function(){if(!a.isDefaultPrevented()){var c=b/j,d=l().eq(c);d.length&&l().removeClass(h).eq(c).addClass(h)}},1)}),b.onAddItem(function(a,c){var d=b.getItems().index(c);d%j==0&&m(d)})}),d.api?e:this}}(jQuery),function(a){function e(c,d,e){var j,f=this,g=c.add(this),h=c.find(e.tabs),i=d.jquery?d:c.children(d);h.length||(h=c.children()),i.length||(i=c.parent().find(d)),i.length||(i=a(d)),a.extend(this,{click:function(d,i){var k=h.eq(d),l=!c.data("tabs");if("string"==typeof d&&d.replace("#","")&&(k=h.filter('[href*="'+d.replace("#","")+'"]'),d=Math.max(h.index(k),0)),e.rotate){var m=h.length-1;if(0>d)return f.click(m,i);if(d>m)return f.click(0,i)}if(!k.length){if(j>=0)return f;d=e.initialIndex,k=h.eq(d)}if(d===j)return f;if(i=i||a.Event(),i.type="onBeforeClick",g.trigger(i,[d]),!i.isDefaultPrevented()){var n=l?e.initialEffect&&e.effect||"default":e.effect;return b[n].call(f,d,function(){j=d,i.type="onClick",g.trigger(i,[d])}),h.removeClass(e.current),k.addClass(e.current),f}},getConf:function(){return e},getTabs:function(){return h},getPanes:function(){return i},getCurrentPane:function(){return i.eq(j)},getCurrentTab:function(){return h.eq(j)},getIndex:function(){return j},next:function(){return f.click(j+1)},prev:function(){return f.click(j-1)},destroy:function(){return h.off(e.event).removeClass(e.current),i.find('a[href^="#"]').off("click.T"),f}}),a.each("onBeforeClick,onClick".split(","),function(b,c){a.isFunction(e[c])&&a(f).on(c,e[c]),f[c]=function(b){return b&&a(f).on(c,b),f}}),e.history&&a.fn.history&&(a.tools.history.init(h),e.event="history"),h.each(function(b){a(this).on(e.event,function(a){return f.click(b,a),a.preventDefault()})}),i.find('a[href^="#"]').on("click.T",function(b){f.click(a(this).attr("href"),b)}),location.hash&&"a"==e.tabs&&c.find('[href="'+location.hash+'"]').length?f.click(location.hash):(0===e.initialIndex||e.initialIndex>0)&&f.click(e.initialIndex)}a.tools=a.tools||{version:"@VERSION"},a.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialEffect:!1,initialIndex:0,event:"click",rotate:!1,slideUpSpeed:400,slideDownSpeed:400,history:!1},addEffect:function(a,c){b[a]=c}};var c,d,b={"default":function(a,b){this.getPanes().hide().eq(a).show(),b.call()},fade:function(a,b){var c=this.getConf(),d=c.fadeOutSpeed,e=this.getPanes();d?e.fadeOut(d):e.hide(),e.eq(a).fadeIn(c.fadeInSpeed,b)},slide:function(a,b){var c=this.getConf();this.getPanes().slideUp(c.slideUpSpeed),this.getPanes().eq(a).slideDown(c.slideDownSpeed,b)},ajax:function(a,b){this.getPanes().eq(0).load(this.getTabs().eq(a).attr("href"),b)}};a.tools.tabs.addEffect("horizontal",function(b,e){if(!c){var f=this.getPanes().eq(b),g=this.getCurrentPane();d||(d=this.getPanes().eq(0).width()),c=!0,f.show(),g.animate({width:0},{step:function(a){f.css("width",d-a)},complete:function(){a(this).hide(),e.call(),c=!1}}),g.length||(e.call(),c=!1)}}),a.fn.tabs=function(b,c){var d=this.data("tabs");return d&&(d.destroy(),this.removeData("tabs")),a.isFunction(c)&&(c={onBeforeClick:c}),c=a.extend({},a.tools.tabs.conf,c),this.each(function(){d=new e(a(this),b,c),a(this).data("tabs",d)}),c.api?d:this}}(jQuery),function(a){function c(b,c){function i(c){var d=a(c);return d.length<2?d:b.parent().find(c)}function l(){g=setTimeout(function(){f.next()},c.interval)}var g,d=this,e=b.add(this),f=b.data("tabs"),h=!0,j=i(c.next).click(function(){f.next()}),k=i(c.prev).click(function(){f.prev()});if(a.extend(d,{getTabs:function(){return f},getConf:function(){return c},play:function(){if(g)return d;var b=a.Event("onBeforePlay");return e.trigger(b),b.isDefaultPrevented()?d:(h=!1,e.trigger("onPlay"),e.on("onClick",l),l(),d)},pause:function(){if(!g)return d;var b=a.Event("onBeforePause");return e.trigger(b),b.isDefaultPrevented()?d:(g=clearTimeout(g),e.trigger("onPause"),e.off("onClick",l),d)},resume:function(){h||d.play()},stop:function(){d.pause(),h=!0}}),a.each("onBeforePlay,onPlay,onBeforePause,onPause".split(","),function(b,e){a.isFunction(c[e])&&a(d).on(e,c[e]),d[e]=function(b){return a(d).on(e,b)}}),c.autopause&&f.getTabs().add(j).add(k).add(f.getPanes()).hover(d.pause,d.resume),c.autoplay&&d.play(),c.clickable&&f.getPanes().click(function(){f.next()}),!f.getConf().rotate){var m=c.disabledClass;f.getIndex()||k.addClass(m),f.onBeforeClick(function(a,b){k.toggleClass(m,!b),j.toggleClass(m,b==f.getTabs().length-1)})}}var b;b=a.tools.tabs.slideshow={conf:{next:".forward",prev:".backward",disabledClass:"disabled",autoplay:!1,autopause:!0,interval:3e3,clickable:!0,api:!1}},a.fn.slideshow=function(d){var e=this.data("slideshow");return e?e:(d=a.extend({},b.conf,d),this.each(function(){e=new c(a(this),d),a(this).data("slideshow",e)}),d.api?e:this)}}(jQuery),function(){function f(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function g(a,b){var c=[];for(var d in a)a.hasOwnProperty(d)&&(c[d]=b(a[d]));return c}function j(c,d,e){if(h.isSupported(d.version))c.innerHTML=h.getHTML(d,e);else if(d.expressInstall&&h.isSupported([6,65]))c.innerHTML=h.getHTML(f(d,{src:d.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title});else if(c.innerHTML.replace(/\s/g,"")||(c.innerHTML="<h2>Flash version "+d.version+" or greater is required</h2><h3>"+(i[0]>0?"Your version is "+i:"You have no flash plugin installed")+"</h3>"+("A"==c.tagName?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+b+"'>here</a></p>"),"A"==c.tagName&&(c.onclick=function(){location.href=b})),d.onFail){var g=d.onFail.call(this);"string"==typeof g&&(c.innerHTML=g)}a&&(window[d.id]=document.getElementById(d.id)),f(this,{getRoot:function(){return c},getOptions:function(){return d},getConf:function(){return e},getApi:function(){return c.firstChild}})}var a=document.all,b="http://www.adobe.com/go/getflashplayer",c="function"==typeof jQuery,d=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,e={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){}}),window.flashembed=function(a,b,c){return"string"==typeof a&&(a=document.getElementById(a.replace("#",""))),a?("string"==typeof b&&(b={src:b}),new j(a,f(f({},e),b),c)):void 0};var h=f(window.flashembed,{conf:e,getVersion:function(){var a,b;try{b=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(c){try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),b=a&&a.GetVariable("$version")}catch(e){try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),b=a&&a.GetVariable("$version")}catch(f){}}}return b=d.exec(b),b?[b[1],b[3]]:[0,0]},asString:function(a){if(null===a||void 0===a)return null;var b=typeof a;switch("object"==b&&a.push&&(b="array"),b){case"string":return a=a.replace(new RegExp('(["\\\\])',"g"),"\\$1"),a=a.replace(/^\s?(\d+\.?\d*)%/,"$1pct"),'"'+a+'"';case"array":return"["+g(a,function(a){return h.asString(a)}).join(",")+"]";case"function":return'"function()"';case"object":var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push('"'+d+'":'+h.asString(a[d]));return"{"+c.join(",")+"}"}return String(a).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(b,c){b=f({},b);var d='<object width="'+b.width+'" height="'+b.height+'" id="'+b.id+'" name="'+b.id+'"';b.cachebusting&&(b.src+=(-1!=b.src.indexOf("?")?"&":"?")+Math.random()),d+=b.w3c||!a?' data="'+b.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',d+=">",(b.w3c||a)&&(d+='<param name="movie" value="'+b.src+'" />'),b.width=b.height=b.id=b.w3c=b.src=null,b.onFail=b.version=b.expressInstall=null;for(var e in b)b[e]&&(d+='<param name="'+e+'" value="'+b[e]+'" />');var g="";if(c){for(var i in c)if(c[i]){var j=c[i];g+=i+"="+encodeURIComponent(/function|object/.test(typeof j)?h.asString(j):j)+"&"}g=g.slice(0,-1),d+='<param name="flashvars" value=\''+g+"' />"}return d+="</object>"},isSupported:function(a){return i[0]>a[0]||i[0]==a[0]&&i[1]>=a[1]}}),i=h.getVersion();c&&(jQuery.tools=jQuery.tools||{version:"@VERSION"},jQuery.tools.flashembed={conf:e},jQuery.fn.flashembed=function(a,b){return this.each(function(){jQuery(this).data("flashembed",flashembed(this,a,b))})})}(),function(a){function c(b,c,d){var e=d.relative?b.position().top:b.offset().top,f=d.relative?b.position().left:b.offset().left,g=d.position[0];e-=c.outerHeight()-d.offset[0],f+=b.outerWidth()+d.offset[1],/iPad/i.test(navigator.userAgent)&&(e-=a(window).scrollTop());var h=c.outerHeight()+b.outerHeight();"center"==g&&(e+=h/2),"bottom"==g&&(e+=h),g=d.position[1];var i=c.outerWidth()+b.outerWidth();return"center"==g&&(f-=i/2),"left"==g&&(f-=i),{top:e,left:f}}function d(d,e){var h,n,f=this,g=d.add(f),i=0,j=0,k=d.attr("title"),l=d.attr("data-tooltip"),m=b[e.effect],o=d.is(":input"),p=o&&d.is(":checkbox, :radio, select, :button, :submit"),q=d.attr("type"),r=e.events[q]||e.events[o?p?"widget":"input":"def"];if(!m)throw'Nonexistent effect "'+e.effect+'"';if(r=r.split(/,\s*/),2!=r.length)throw"Tooltip: bad events configuration for "+q;d.on(r[0],function(a){clearTimeout(i),e.predelay?j=setTimeout(function(){f.show(a)},e.predelay):f.show(a)}).on(r[1],function(a){clearTimeout(j),e.delay?i=setTimeout(function(){f.hide(a)},e.delay):f.hide(a)}),k&&e.cancelDefault&&(d.removeAttr("title"),d.data("title",k)),a.extend(f,{show:function(b){if(!h&&(l?h=a(l):e.tip?h=a(e.tip).eq(0):k?h=a(e.layout).addClass(e.tipClass).appendTo(document.body).hide().append(k):(h=d.next(),h.length||(h=d.parent().next())),!h.length))throw"Cannot find tooltip for "+d;if(f.isShown())return f;h.stop(!0,!0);var o=c(d,h,e);if(e.tip&&h.html(d.data("title")),b=a.Event(),b.type="onBeforeShow",g.trigger(b,[o]),b.isDefaultPrevented())return f;o=c(d,h,e),h.css({position:"absolute",top:o.top,left:o.left}),n=!0,m[0].call(f,function(){b.type="onShow",n="full",g.trigger(b)});var p=e.events.tooltip.split(/,\s*/);return h.data("__set")||(h.off(p[0]).on(p[0],function(){clearTimeout(i),clearTimeout(j)}),p[1]&&!d.is("input:not(:checkbox, :radio), textarea")&&h.off(p[1]).on(p[1],function(a){a.relatedTarget!=d[0]&&d.trigger(r[1].split(" ")[0])}),e.tip||h.data("__set",!0)),f},hide:function(c){return h&&f.isShown()?(c=a.Event(),c.type="onBeforeHide",g.trigger(c),c.isDefaultPrevented()?void 0:(n=!1,b[e.effect][1].call(f,function(){c.type="onHide",g.trigger(c)}),f)):f},isShown:function(a){return a?"full"==n:n},getConf:function(){return e},getTip:function(){return h},getTrigger:function(){return d}}),a.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(b,c){a.isFunction(e[c])&&a(f).on(c,e[c]),f[c]=function(b){return b&&a(f).on(c,b),f}})}a.tools=a.tools||{version:"@VERSION"},a.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,fadeIE:!1,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(a,c,d){b[a]=[c,d]}};var b={toggle:[function(a){var b=this.getConf(),c=this.getTip(),d=b.opacity;1>d&&c.css({opacity:d}),c.show(),a.call()},function(a){this.getTip().hide(),a.call()}],fade:[function(b){var c=this.getConf();!a.browser.msie||c.fadeIE?this.getTip().fadeTo(c.fadeInSpeed,c.opacity,b):(this.getTip().show(),b())},function(b){var c=this.getConf();!a.browser.msie||c.fadeIE?this.getTip().fadeOut(c.fadeOutSpeed,b):(this.getTip().hide(),b())}]};a.fn.tooltip=function(b){var c=this.data("tooltip");return c?c:(b=a.extend(!0,{},a.tools.tooltip.conf,b),"string"==typeof b.position&&(b.position=b.position.split(/,?\s/)),this.each(function(){c=new d(a(this),b),a(this).data("tooltip",c)}),b.api?c:this)}}(jQuery),function(a){function h(b,c,d){c=a(c).first()||c;var e=b.offset().top,f=b.offset().left,g=d.position.split(/,?\s+/),h=g[0],i=g[1];e-=c.outerHeight()-d.offset[0],f+=b.outerWidth()+d.offset[1],/iPad/i.test(navigator.userAgent)&&(e-=a(window).scrollTop());var j=c.outerHeight()+b.outerHeight();"center"==h&&(e+=j/2),"bottom"==h&&(e+=j);var k=b.outerWidth();return"center"==i&&(f-=(k+c.outerWidth())/2),"left"==i&&(f-=k),{top:e,left:f}}function i(a){function b(){return this.getAttribute("type")==a}return b.key='[type="'+a+'"]',b}function l(b,c,e){function l(b,c,d){if(e.grouped||!b.length){var f;if(d===!1||a.isArray(d)){f=g.messages[c.key||c]||g.messages["*"],f=f[e.lang]||g.messages["*"].en;var h=f.match(/\$\d/g);h&&a.isArray(d)&&a.each(h,function(a){f=f.replace(this,d[a])})}else f=d[e.lang]||d;b.push(f)}}var f=this,i=c.add(f);b=b.not(":button, :image, :reset, :submit"),c.attr("novalidate","novalidate"),a.extend(f,{getConf:function(){return e},getForm:function(){return c},getInputs:function(){return b},reflow:function(){return b.each(function(){var b=a(this),c=b.data("msg.el");if(c){var d=h(b,c,e);c.css({top:d.top,left:d.left})}}),f},invalidate:function(c,d){if(!d){var g=[];a.each(c,function(a,c){var d=b.filter("[name='"+a+"']");d.length&&(d.trigger("OI",[c]),g.push({input:d,messages:[c]}))}),c=g,d=a.Event()}return d.type="onFail",i.trigger(d,[c]),d.isDefaultPrevented()||k[e.effect][0].call(f,c,d),f},reset:function(c){return c=c||b,c.removeClass(e.errorClass).each(function(){var b=a(this).data("msg.el");b&&(b.remove(),a(this).data("msg.el",null))}).off(e.errorInputEvent+".v"||""),f},destroy:function(){return c.off(e.formEvent+".V reset.V"),b.off(e.inputEvent+".V change.V"),f.reset()},checkValidity:function(c,g){c=c||b,c=c.not(":disabled");var h={};if(c=c.filter(function(){var b=a(this).attr("name");return h[b]?void 0:(h[b]=!0,a(this))}),!c.length)return!0;if(g=g||a.Event(),g.type="onBeforeValidate",i.trigger(g,[c]),g.isDefaultPrevented())return g.result;var m=[];c.each(function(){var b=[],c=a(this).data("messages",b),h=d&&c.is(":date")?"onHide.v":e.errorInputEvent+".v";return c.off(h),a.each(j,function(){var a=this,d=a[0];if(c.filter(d).length){var h=a[1].call(f,c,c.val());if(h!==!0){if(g.type="onBeforeFail",i.trigger(g,[c,d]),g.isDefaultPrevented())return!1;var j=c.attr(e.messageAttr);if(j)return b=[j],!1;l(b,d,h)}}}),b.length&&(m.push({input:c,messages:b}),c.trigger("OI",[b]),e.errorInputEvent&&c.on(h,function(a){f.checkValidity(c,a)})),e.singleError&&m.length?!1:void 0});var n=k[e.effect];if(!n)throw'Validator: cannot find effect "'+e.effect+'"';return m.length?(f.invalidate(m,g),!1):(n[1].call(f,c,g),g.type="onSuccess",i.trigger(g,[c]),c.off(e.errorInputEvent+".v"),!0)}}),a.each("onBeforeValidate,onBeforeFail,onFail,onSuccess".split(","),function(b,c){a.isFunction(e[c])&&a(f).on(c,e[c]),f[c]=function(b){return b&&a(f).on(c,b),f}}),e.formEvent&&c.on(e.formEvent+".V",function(a){return f.checkValidity(null,a)?(a.target=c,void(a.type=e.formEvent)):a.preventDefault()}),c.on("reset.V",function(){f.reset()}),b[0]&&b[0].validity&&b.each(function(){this.oninvalid=function(){return!1}}),c[0]&&(c[0].checkValidity=f.checkValidity),e.inputEvent&&b.on(e.inputEvent+".V",function(b){f.checkValidity(a(this),b)}),b.filter(":checkbox, select").filter("[required]").on("change.V",function(b){var c=a(this);(this.checked||c.is("select")&&a(this).val())&&k[e.effect][1].call(f,c,b)}),b.filter(":radio[required]").on("change.V",function(b){var c=a("[name='"+a(b.srcElement).attr("name")+"']");null!=c&&0!=c.length&&f.checkValidity(c,b)}),a(window).resize(function(){f.reflow()})}a.tools=a.tools||{version:"@VERSION"};var g,b=/\[type=([a-z]+)\]/,c=/^-?[0-9]*(\.[0-9]+)?$/,d=a.tools.dateinput,e=/^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i,f=/^(https?:\/\/)?[\da-z\.\-]+\.[a-z\.]{2,6}[#&+_\?\/\w \.\-=]*$/i;g=a.tools.validator={conf:{grouped:!1,effect:"default",errorClass:"invalid",inputEvent:null,errorInputEvent:"keyup",formEvent:"submit",lang:"en",message:"<div/>",messageAttr:"data-message",messageClass:"error",offset:[0,0],position:"center right",singleError:!1,speed:"normal"},messages:{"*":{en:"Please correct this value"}},localize:function(b,c){a.each(c,function(a,c){g.messages[a]=g.messages[a]||{},g.messages[a][b]=c})},localizeFn:function(b,c){g.messages[b]=g.messages[b]||{},a.extend(g.messages[b],c)},fn:function(c,d,e){a.isFunction(d)?e=d:("string"==typeof d&&(d={en:d}),this.messages[c.key||c]=d);var f=b.exec(c);f&&(c=i(f[1])),j.push([c,e])},addEffect:function(a,b,c){k[a]=[b,c]}};var j=[],k={"default":[function(b){var c=this.getConf();a.each(b,function(b,d){var e=d.input;e.addClass(c.errorClass);var f=e.data("msg.el");f||(f=a(c.message).addClass(c.messageClass).appendTo(document.body),e.data("msg.el",f)),f.css({visibility:"hidden"}).find("p").remove(),a.each(d.messages,function(b,c){a("<p/>").html(c).appendTo(f)}),f.outerWidth()==f.parent().width()&&f.add(f.find("p")).css({display:"inline"});var g=h(e,f,c);f.css({visibility:"visible",position:"absolute",top:g.top,left:g.left}).fadeIn(c.speed)})},function(b){var c=this.getConf();b.removeClass(c.errorClass).each(function(){var b=a(this).data("msg.el");b&&b.css({visibility:"hidden"})})}]};a.each("email,url,number".split(","),function(b,c){a.expr[":"][c]=function(a){return a.getAttribute("type")===c}}),a.fn.oninvalid=function(a){return this[a?"on":"trigger"]("OI",a)},g.fn(":email","Please enter a valid email address",function(a,b){return!b||e.test(b)}),g.fn(":url","Please enter a valid URL",function(a,b){return!b||f.test(b)}),g.fn(":number","Please enter a numeric value.",function(a,b){return c.test(b)}),g.fn("[max]","Please enter a value no larger than $1",function(a,b){if(""===b||d&&a.is(":date"))return!0;var c=a.attr("max");return parseFloat(b)<=parseFloat(c)?!0:[c]}),g.fn("[min]","Please enter a value of at least $1",function(a,b){if(""===b||d&&a.is(":date"))return!0;var c=a.attr("min");return parseFloat(b)>=parseFloat(c)?!0:[c]}),g.fn("[required]","Please complete this mandatory field.",function(a,b){return a.is(":checkbox")?a.is(":checked"):!!b}),g.fn("[pattern]",function(a,b){return""===b||new RegExp("^"+a.attr("pattern")+"$").test(b)}),g.fn(":radio","Please select an option.",function(b){var c=!1;a("[name='"+b.attr("name")+"']").each(function(b,d){a(d).is(":checked")&&(c=!0)});return c?!0:!1}),a.fn.validator=function(b){var c=this.data("validator");return c&&(c.destroy(),this.removeData("validator")),b=a.extend(!0,{},g.conf,b),this.is("form")?this.each(function(){var d=a(this);c=new l(d.find(":input"),d,b),d.data("validator",c)}):(c=new l(this,this.eq(0).closest("form"),b),this.data("validator",c))}}(jQuery);
(function($){$.renderVCRModelBox=function(id,username,displayName,profileAvatarUrl){if(!$('#vcr_template').length)return;var html=$('#vcr_template').html();html=html.replace('#user_id#',id);html=html.replace('#username#',username);html=html.replace('#avatar_image_src#',profileAvatarUrl);html=html.replace(/#display_name#/g,displayName);html=html.replace(/#profile_url#/g,'/profile/'+username);html=html.replace('#chat_popup_url#','/chat-popup/'+username);return $(html);}
$(document).ready(function(){if($('#visited_room_list').length){var history=$.isLocalStorageAvailable()?localStorage['visited_rooms']:$.cookie('bcrc2');if(history){var historyData=JSON.parse(history);for(var i=0;i<historyData.length;i++){var modelData=historyData[i];if(!modelData.username||!modelData.displayName||!modelData.userId||!modelData.profileAvatarUrl){continue;}
$modelBox=$.renderVCRModelBox(modelData.userId,modelData.username,modelData.displayName,modelData.profileAvatarUrl);if($.isFunction($.fn.chatShowBehavior)){$modelBox.chatShowBehavior(modelData.username,modelData.displayName);}
$('#visited_room_list').prepend($modelBox);$('#visited_room_list').find('.empty').hide();}}}
$("#bChat").bind("onUserData",function(e){if(!chat.performerData)return;if(!$('#vcr_template').length)return;var modelData=chat.performerData;if(!modelData.username||!modelData.displayName||!modelData.userId||!modelData.profileAvatarUrl){return;}
if(modelData.profileAvatarData){modelData.profileAvatarUrl=chat.buildAvatarUrl(modelData);}
var $modelBox;if($('#visited_room_list').find('[data-chathost="'+modelData.username+'"]').length){$modelBox=$('#visited_room_list').find('[data-chathost="'+modelData.username+'"]');$('#visited_room_list').prepend($modelBox);}else{$modelBox=$.renderVCRModelBox(modelData.userId,modelData.username,modelData.displayName,modelData.profileAvatarUrl);$('#visited_room_list').prepend($modelBox);}
$('#visited_room_list').find('.empty').hide();if($('#visited_room_list .chatroom').length>=10){$('#visited_room_list').find('.chatroom:last').remove();}
var history=$.isLocalStorageAvailable()?localStorage['visited_rooms']:$.cookie('bcrc2');var historyData;var mData={userId:modelData.userId,username:modelData.username,displayName:modelData.displayName,profileAvatarUrl:modelData.profileAvatarUrl};if(history){var historyData=JSON.parse(history);for(var i=0;i<historyData.length;i++){if(historyData[i].username==modelData.username){historyData.splice(i,1);break;}}
historyData.push(mData);if(historyData.length>=10){historyData.shift();}}else{historyData=[mData];}
if($.isLocalStorageAvailable()){localStorage['visited_rooms']=JSON.stringify(historyData);}else{$.cookie('bcrc2',JSON.stringify(historyData),{path:'/',expires:7});}});});})(jQuery);
$(document).ready(function(){var timeOut=null;$('#lang_button').hover(function(){if(!$('#header_login_popup').is(':visible')){$("#change_lang").parents('.change_lang_wrap').show();}},function(){if(!$('#header_login_popup').is(':visible')){timeOut=setTimeout(function(){$("#change_lang").parents('.change_lang_wrap').hide();},200);}}).click(function(){var $loginPopup=$('#header_login_popup');if($loginPopup.is(':visible')){$loginPopup.hide();$(this).mouseover();}});$('.change_lang_wrap').hover(function(){clearTimeout(timeOut);$(this).bind('click.lang',function(e){var $clicked=$(e.target);if($clicked.parents('.switch_language').length){$('.change_lang_wrap').hide();}});},function(){$(this).hide();$('body').unbind('click.lang');});});
$(document).ready(function(){$('.resend_activation_email').find('form').submittedToRemote();$('.resend_activation_email').find('a.submit').bind('click',function(){$(this).closest('form').submit();});$('.main_login_form').closest('form').submittedToRemote(undefined,function(data,textStatus,XMLHttpRequest){if(data.email){$('#resend_activation_email_username').val($('.main_login_form').find('#log_in_username').val());$('#resend_activation_email_email').val(data.email);$('.resend_activation_email').show();}else{$('.resend_activation_email').hide();}});});
$(document).ready(function(){var $body=$('body'),$memberJoinPopup=$('#member_join_popup'),$memberJoinPopupTrigger=$('#member_join_popup_trigger');$.initSignupForm=function(){var $container=$('.f_join_form');if(undefined!=window.chat&&chat.userData&&chat.userData.chathost){$('.member_registration_performer_username').val(chat.userData.chathost);}
$container.submittedToRemote(undefined,function(data,textStatus,XMLHttpRequest){if(undefined!=data.fields&&null!=data.fields){for(var fieldId in data.fields){var $field=$('#'+fieldId);var msg=data.fields[fieldId].replace(/<\/?[^>]+>/gi,'');if(fieldId.indexOf('_terms_of_use')!=-1){if(!$field.closest('form').hasClass('f_member_join_form')){$field.before('<div class="terms_of_use_errors">'+msg+'</div>');}}else{$field.parent().find('div.obelix').removeClass('valid').addClass('notvalid').attr('title',msg);$field.parent().removeClass('valid').addClass('notvalid');if($field.parents('.step_green').length||$field.parents('.step_yellow').length){$field.val('').attr('placeholder',$.trim(msg));}}}
var $imgCaptcha=$container.find('img.captcha');if($imgCaptcha.length>0){$imgCaptcha.click();$container.find('input.captcha').val('');}}},function(form){form.find('div.input_wrapper').removeClass('notvalid');form.find('div.obelix').removeClass('notvalid');form.find('.terms_of_use_errors').remove();if(form.parents('#member_join_popup').is('.step_green, .step_yellow, .gold_step_girl, .gold_step_yellow')){form.find('input').removeAttr('placeholder')}});$container.find('input:not(input.captcha, input[id$=_terms_of_use], input[type=hidden])').after('<div class="obelix"></div>');$container.find('input[validate_url]').each(function(){if($(this).val()!=''){$(this).checkvalidateurl();}});$('.benefits-container').find('.benefit-item:even').addClass('odd');};$.allowedPopups=function(){return['step_green','girls_blue','cam_green','default','horizont_green2','gold_step_girl','gay_enter','shemale_reg'];};$.showSignupPopup=function(isClick,name,isTrack){var $fancy=$('.fancybox-opened');if($fancy.length&&($fancy.find('#member_join_popup').length||$fancy.find('.important_popup').length||$fancy.find('.march_promo_popup').length)){setSignupTimeout();return false;}
var popup,popups=[],gayPopups=[],transPopups=[],noPromoCode=false;if($.isPromoCodeSignupPopupsOnly==true){popups=['step_green','girls_blue','cam_green','default'];gayPopups=['step_green','cam_green','default'];transPopups=['step_green','cam_green','default'];if($.liveTab=='male'){popups=gayPopups;}else if($.liveTab=='transsexual'){popups=transPopups;}
if(true==$.isFullMobile){popups=$.grep(popups,function(el){return el.indexOf('cam_green')===-1;});}
popup=popups[Math.floor(Math.random()*popups.length)];}else{var useTypesPopup=['ok:','np:','g:'];popups=['ok:|horizont_green2','np:|girls_blue','np:|step_green'];gayPopups=['ok:|horizont_green2','np:|gay_enter','np:|step_green'];transPopups=['ok:|horizont_green2','np:|shemale_reg','np:|step_green'];if($.liveTab=='male'){popups=gayPopups;}else if($.liveTab=='transsexual'){popups=transPopups;}
if(isClick&&$.inArray('nk:',useTypesPopup)!==-1){popups=$.grep(popups,function(el){return el.indexOf('nk:')===-1;});}else if(!isClick&&$.inArray('ok:',useTypesPopup)!==-1){popups=$.grep(popups,function(el){return el.indexOf('ok:')===-1;});}
if(!$memberJoinPopupTrigger.data('show_gold')||$.inArray('g:',useTypesPopup)===-1){popups=$.grep(popups,function(el){return el.indexOf('g:')===-1;});}
if(true==$.isFullMobile){popups=$.grep(popups,function(el){return el.indexOf('cam_greenmin')===-1;});}
var polluxnDomains=['tukif.club','porndig.club','boafoda.club','pornes.club','pornototale.club'];var regExp=new RegExp(polluxnDomains.join('|'));if(regExp.test(window.location.href)){popups=$.grep(popups,function(el){return el.indexOf('girls_blue')===-1&&el.indexOf('step_green')===-1&&el.indexOf('gay_enter')===-1&&el.indexOf('shemale_reg')===-1&&el.indexOf('gold_step_girl')===-1&&el.indexOf('gold_step_yellow')===-1;});if(!popups.length){setSignupTimeout();return;}}
if(name){popup=name;}else{popup=popups[Math.floor(Math.random()*popups.length)];}
if(popup.indexOf('|')!==-1){var arr=popup.split('|');popup=arr[1];if(arr[0].indexOf('np:')!==-1){noPromoCode=true;}
if(arr[0].indexOf('w:')!==-1&&$.inArray('w:',useTypesPopup)!==-1){var newWindowUrl=$memberJoinPopupTrigger.attr('join_url')+'?pop='+popup;if(noPromoCode){newWindowUrl+='&no_promo_code=1';}
if(popup=='cam_green'||popup=='cam_yellow'){newWindowUrl+='&'+$.param(prepareSignupCamParams($memberJoinPopupTrigger.attr('livetab'),$memberJoinPopupTrigger.attr('profile')));}
window.open(newWindowUrl);return false;}}}
$.openSignupPopup(isClick,popup,isTrack,noPromoCode);$('#login_or_join_popup').hide();return true;};$.initSignupFast=function(){var $memberJoinPopup=$('#member_join_popup');$memberJoinPopup.find('.form_row_email input').attr('placeholder',__('E-mail'));$memberJoinPopup.find('.form_row_email .form_row').append($memberJoinPopup.find('.email_hint'));$.get($memberJoinPopup.find('.popup.join').attr('gen-url'),{},function(data){data=JSON.parse(data);$memberJoinPopup.find('.form_row_username input').val(data.username).prop('generated',true);$memberJoinPopup.find('.form_row_password input').val(data.password).prop('generated',true);});};$.toggleSignupSteps=function(){var $memberJoinPopup=$('#member_join_popup');$memberJoinPopup.find('.join_step.active').removeClass('active');if(!$memberJoinPopup.find('.form_row_username .obelix').hasClass('valid')){$memberJoinPopup.find('.join_step1').addClass('active');$memberJoinPopup.find('button.next').show();$memberJoinPopup.find('.form_row_username').show();$memberJoinPopup.find('.form_row_email, .form_row_password, .terms_of_use, .promo_code').hide();$memberJoinPopup.find('.form_actions').hide();$memberJoinPopup.find('button.next').show();$memberJoinPopup.find('.join_step1').show();$memberJoinPopup.find('.join_step2').hide();$memberJoinPopup.find('.lazy_text_foot').removeClass('active');}else{$memberJoinPopup.find('.join_step2').addClass('active');$memberJoinPopup.find('.form_row_username').hide();$memberJoinPopup.find('.form_row_email, .form_row_password, .terms_of_use, .promo_code').show();$memberJoinPopup.find('.form_actions').show();$memberJoinPopup.find('button.next').hide();$memberJoinPopup.find('.join_step1').hide();$memberJoinPopup.find('.join_step2').show();$memberJoinPopup.find('.lazy_text_foot').addClass('active');}};$.initSignupHorizont=function(){var $memberJoinPopup=$('#member_join_popup');$memberJoinPopup.find('.form_row_username input').attr('placeholder',__('Username',[],false));$memberJoinPopup.find('.form_row_email input').attr('placeholder',__('Email',[],false));$memberJoinPopup.find('.form_row_password input').attr('placeholder',__('Password',[],false));};$.removePlaceholders=function(){var $memberJoinPopup=$('#member_join_popup');$memberJoinPopup.find('.form_row_username input').removeAttr('placeholder');$memberJoinPopup.find('.form_row_email input').removeAttr('placeholder');$memberJoinPopup.find('.form_row_password input').removeAttr('placeholder');};$.initSignupCam=function(livetab,performer){$.get($('#member_join_cam_preview').attr('preview_url'),prepareSignupCamParams(livetab,performer),function(data){$('#member_join_cam_preview').html(data);});};function prepareSignupCamParams(livetab,performer){var data={};if(undefined!=window.chat&&undefined!=window.chat.userData&&undefined!=window.chat.userData.chathost){data.performer=window.chat.userData.chathost;}else if(performer){data.performer=performer;}else{data.livetab=livetab;}
return data;}
$('[rel=pre_signup]').each(function(){$(this).open({width:950,height:700,left:(($(window).width()-950)/2),top:(($(window).height()-700)/2),windowName:$(this).attr('name')||'member_signup'});});$body.delegate('[rel=signup]','click',function(e){if(!$memberJoinPopupTrigger.length){$memberJoinPopupTrigger=$('#member_join_popup_trigger');}
if($memberJoinPopupTrigger.length){e.preventDefault();$.showSignupPopup(true);}else{if('_self'==$(this).attr(('target'))){window.location=this.href;}else{window.open(this.href);}}
return false;});$.openSignupPopup=function(isClick,name,isTrack,noPromoCode){if(!$memberJoinPopupTrigger.length){$memberJoinPopupTrigger=$('#member_join_popup_trigger');}
if(typeof isTrack=='undefined'){isTrack=true;}
$.fancybox.open($memberJoinPopupTrigger.attr('href'),{helpers:{overlay:{locked:false,closeClick:false}},type:'ajax',ajax:{data:{pop:name,is_click:isClick,is_track:isTrack,no_promo_code:noPromoCode||0},headers:{'x-language':$memberJoinPopupTrigger.attr('lang')}},scrolling:'no',padding:0,autoResize:false,wrapCSS:'fancybox-bonga-wrap',closeBtn:isClick,openSpeed:100,closeSpeed:100,fitToView:false,beforeShow:function(){$.initSignupForm();var params={name:name};if(!this.closeBtn){params.force_show=1;}
if($memberJoinPopup.hasClass('no_promo_code')){params.no_promo_code=1;}
if(typeof $.liveTab!='undefined'){params.live_tab=$.liveTab;}
if(isTrack){$.get($memberJoinPopupTrigger.attr('track_url'),params,function(data){$('input.popup_signup_source_id').val(data);});}},afterClose:function(){setSignupTimeout();}});};var signupTimeout;function setSignupTimeout(){if(signupTimeout){clearTimeout(signupTimeout);}
signupTimeout=setTimeout(function(){signupTimeout=null;$.showSignupPopup(false);},1000*60*2);}
if(!$.isTranslateSkin&&$.showRegistrationPopups){if($memberJoinPopupTrigger.length){setSignupTimeout();}}
$body.delegate('#member_join_popup button.next','click',function(){var $memberJoinPopup=$('#member_join_popup');$memberJoinPopup.find('.form_row_username input').checkvalidateurl(function(msg){$memberJoinPopup.find('.form_row_username input').val('').attr('placeholder',$.trim(msg).replace(/<\/?[^>]+>/gi,''));});$.toggleSignupSteps();});$body.delegate('.f_join_form .captcha_link_text','click',function(){$(this).closest('form').find('img[class="captcha"]').click();});$body.delegate('.f_join_form input[id$=_password]:not(input[id$=_retype_password])','blur',function(){$(this).checkPassword();});$body.delegate('.f_join_form input[id$=_retype_password]','blur',function(){$(this).checkRetypePassword();});$body.delegate('.f_join_form input[validate_url]','blur',function(){$(this).checkvalidateurl();});$body.delegate('#cam_preview_toggle_sound','click',function(){try{var swf=$('#cam_preview_object').get(0);if(!$(this).hasClass('on')){$(this).addClass('on');swf.muteAudio(false);}else{$(this).removeClass('on');swf.muteAudio(true);}}catch(e){if(console)
console.log(e);}});});function previewCloseStream(){$('#cam_preview_overlay').show();}
!function(a){function b(a,b){for(var d,c="",e=0;e<b.length;e++){d=!0;for(var f=0;a>f&&f+e+a<b.length;f++)d=d&&b.charAt(f+e)==b.charAt(f+e+a);a>f&&(d=!1),d?(e+=a-1,d=!1):c+=b.charAt(e)}return c}a.calculatePasswordStrength=function(a,c){var d=0;return a.length<6?0:a.toLowerCase()==c.toLowerCase()?0:(d+=4*a.length,d+=1*(b(1,a).length-a.length),d+=1*(b(2,a).length-a.length),d+=1*(b(3,a).length-a.length),d+=1*(b(4,a).length-a.length),a.match(/(.*[0-9].*[0-9].*[0-9])/)&&(d+=5),a.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)&&(d+=5),a.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(d+=10),a.match(/([a-zA-Z])/)&&a.match(/([0-9])/)&&(d+=15),a.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&a.match(/([0-9])/)&&(d+=15),a.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&a.match(/([a-zA-Z])/)&&(d+=15),(a.match(/^\w+$/)||a.match(/^\d+$/))&&(d-=10),0>d&&(d=0),d>100&&(d=100),d)},a.fn.passwordStrength=function(b){var c={usernameInput:a("<input/>"),usernameValue:null,onResult:function(){}};return b=a.extend(c,b),this.each(function(){a(this).keyup(function(){var c;c=null==b.usernameValue?b.usernameInput.val():b.usernameValue,c&&this.value&&b.onResult(a.calculatePasswordStrength(this.value,c))})})}}(jQuery);
var m=(function app(window,undefined){var OBJECT="[object Object]",ARRAY="[object Array]",STRING="[object String]",FUNCTION="function";var type={}.toString;var parser=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,attrParser=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/;var voidElements=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;var noop=function(){}
var $document,$location,$requestAnimationFrame,$cancelAnimationFrame;function initialize(window){$document=window.document;$location=window.location;$cancelAnimationFrame=window.cancelAnimationFrame||window.clearTimeout;$requestAnimationFrame=window.requestAnimationFrame||window.setTimeout;}
initialize(window);function m(){var args=[].slice.call(arguments);var hasAttrs=args[1]!=null&&type.call(args[1])===OBJECT&&!("tag"in args[1]||"view"in args[1])&&!("subtree"in args[1]);var attrs=hasAttrs?args[1]:{};var classAttrName="class"in attrs?"class":"className";var cell={tag:"div",attrs:{}};var match,classes=[];if(type.call(args[0])!=STRING)throw new Error("selector in m(selector, attrs, children) should be a string")
while(match=parser.exec(args[0])){if(match[1]===""&&match[2])cell.tag=match[2];else if(match[1]==="#")cell.attrs.id=match[2];else if(match[1]===".")classes.push(match[2]);else if(match[3][0]==="["){var pair=attrParser.exec(match[3]);cell.attrs[pair[1]]=pair[3]||(pair[2]?"":true)}}
var children=hasAttrs?args.slice(2):args.slice(1);if(children.length===1&&type.call(children[0])===ARRAY){cell.children=children[0]}
else{cell.children=children}
for(var attrName in attrs){if(attrs.hasOwnProperty(attrName)){if(attrName===classAttrName&&attrs[attrName]!=null&&attrs[attrName]!==""){classes.push(attrs[attrName])
cell.attrs[attrName]=""}
else cell.attrs[attrName]=attrs[attrName]}}
if(classes.length>0)cell.attrs[classAttrName]=classes.join(" ");return cell}
function build(parentElement,parentTag,parentCache,parentIndex,data,cached,shouldReattach,index,editable,namespace,configs){try{if(data==null||data.toString()==null)data="";}catch(e){data=""}
if(data.subtree==="retain")return cached;var cachedType=type.call(cached),dataType=type.call(data);if(cached==null||cachedType!==dataType){if(cached!=null){if(parentCache&&parentCache.nodes){var offset=index-parentIndex;var end=offset+(dataType===ARRAY?data:cached.nodes).length;clear(parentCache.nodes.slice(offset,end),parentCache.slice(offset,end))}
else if(cached.nodes)clear(cached.nodes,cached)}
cached=new data.constructor;if(cached.tag)cached={};cached.nodes=[]}
if(dataType===ARRAY){for(var i=0,len=data.length;i<len;i++){if(type.call(data[i])===ARRAY){data=data.concat.apply([],data);i--
len=data.length}}
var nodes=[],intact=cached.length===data.length,subArrayCount=0;var DELETION=1,INSERTION=2,MOVE=3;var existing={},shouldMaintainIdentities=false;for(var i=0;i<cached.length;i++){if(cached[i]&&cached[i].attrs&&cached[i].attrs.key!=null){shouldMaintainIdentities=true;existing[cached[i].attrs.key]={action:DELETION,index:i}}}
var guid=0
for(var i=0,len=data.length;i<len;i++){if(data[i]&&data[i].attrs&&data[i].attrs.key!=null){for(var j=0,len=data.length;j<len;j++){if(data[j]&&data[j].attrs&&data[j].attrs.key==null)data[j].attrs.key="__mithril__"+guid++}
break}}
if(shouldMaintainIdentities){var keysDiffer=false
if(data.length!=cached.length)keysDiffer=true
else for(var i=0,cachedCell,dataCell;cachedCell=cached[i],dataCell=data[i];i++){if(cachedCell.attrs&&dataCell.attrs&&cachedCell.attrs.key!=dataCell.attrs.key){keysDiffer=true
break}}
if(keysDiffer){for(var i=0,len=data.length;i<len;i++){if(data[i]&&data[i].attrs){if(data[i].attrs.key!=null){var key=data[i].attrs.key;if(!existing[key])existing[key]={action:INSERTION,index:i};else existing[key]={action:MOVE,index:i,from:existing[key].index,element:cached.nodes[existing[key].index]||$document.createElement("div")}}}}
var actions=[]
for(var prop in existing)actions.push(existing[prop])
var changes=actions.sort(sortChanges);var newCached=new Array(cached.length)
newCached.nodes=cached.nodes.slice()
for(var i=0,change;change=changes[i];i++){if(change.action===DELETION){clear(cached[change.index].nodes,cached[change.index]);newCached.splice(change.index,1)}
if(change.action===INSERTION){var dummy=$document.createElement("div");dummy.key=data[change.index].attrs.key;parentElement.insertBefore(dummy,parentElement.childNodes[change.index]||null);newCached.splice(change.index,0,{attrs:{key:data[change.index].attrs.key},nodes:[dummy]})
newCached.nodes[change.index]=dummy}
if(change.action===MOVE){if(parentElement.childNodes[change.index]!==change.element&&change.element!==null){parentElement.insertBefore(change.element,parentElement.childNodes[change.index]||null)}
newCached[change.index]=cached[change.from]
newCached.nodes[change.index]=change.element}}
cached=newCached;}}
for(var i=0,cacheCount=0,len=data.length;i<len;i++){var item=build(parentElement,parentTag,cached,index,data[i],cached[cacheCount],shouldReattach,index+subArrayCount||subArrayCount,editable,namespace,configs);if(item===undefined)continue;if(!item.nodes.intact)intact=false;if(item.$trusted){subArrayCount+=(item.match(/<[^\/]|\>\s*[^<]/g)||[0]).length}
else subArrayCount+=type.call(item)===ARRAY?item.length:1;cached[cacheCount++]=item}
if(!intact){for(var i=0,len=data.length;i<len;i++){if(cached[i]!=null)nodes.push.apply(nodes,cached[i].nodes)}
for(var i=0,node;node=cached.nodes[i];i++){if(node.parentNode!=null&&nodes.indexOf(node)<0)clear([node],[cached[i]])}
if(data.length<cached.length)cached.length=data.length;cached.nodes=nodes}}
else if(data!=null&&dataType===OBJECT){var views=[],controllers=[]
while(data.view){var view=data.view.$original||data.view
var controllerIndex=m.redraw.strategy()=="diff"&&cached.views?cached.views.indexOf(view):-1
var controller=controllerIndex>-1?cached.controllers[controllerIndex]:new(data.controller||noop)
var key=data&&data.attrs&&data.attrs.key
data=pendingRequests==0||(cached&&cached.controllers&&cached.controllers.indexOf(controller)>-1)?data.view(controller):{tag:"placeholder"}
if(data.subtree==="retain")return cached;if(key){if(!data.attrs)data.attrs={}
data.attrs.key=key}
if(controller.onunload)unloaders.push({controller:controller,handler:controller.onunload})
views.push(view)
controllers.push(controller)}
if(!data.tag&&controllers.length)throw new Error("Component template must return a virtual element, not an array, string, etc.")
if(!data.attrs)data.attrs={};if(!cached.attrs)cached.attrs={};var dataAttrKeys=Object.keys(data.attrs)
var hasKeys=dataAttrKeys.length>("key"in data.attrs?1:0)
if(data.tag!=cached.tag||dataAttrKeys.sort().join()!=Object.keys(cached.attrs).sort().join()||data.attrs.id!=cached.attrs.id||data.attrs.key!=cached.attrs.key||(m.redraw.strategy()=="all"&&(!cached.configContext||cached.configContext.retain!==true))||(m.redraw.strategy()=="diff"&&cached.configContext&&cached.configContext.retain===false)){if(cached.nodes.length)clear(cached.nodes);if(cached.configContext&&typeof cached.configContext.onunload===FUNCTION)cached.configContext.onunload()
if(cached.controllers){for(var i=0,controller;controller=cached.controllers[i];i++){if(typeof controller.onunload===FUNCTION)controller.onunload({preventDefault:noop})}}}
if(type.call(data.tag)!=STRING)return;var node,isNew=cached.nodes.length===0;if(data.attrs.xmlns)namespace=data.attrs.xmlns;else if(data.tag==="svg")namespace="http://www.w3.org/2000/svg";else if(data.tag==="math")namespace="http://www.w3.org/1998/Math/MathML";if(isNew){if(data.attrs.is)node=namespace===undefined?$document.createElement(data.tag,data.attrs.is):$document.createElementNS(namespace,data.tag,data.attrs.is);else node=namespace===undefined?$document.createElement(data.tag):$document.createElementNS(namespace,data.tag);cached={tag:data.tag,attrs:hasKeys?setAttributes(node,data.tag,data.attrs,{},namespace):data.attrs,children:data.children!=null&&data.children.length>0?build(node,data.tag,undefined,undefined,data.children,cached.children,true,0,data.attrs.contenteditable?node:editable,namespace,configs):data.children,nodes:[node]};if(controllers.length){cached.views=views
cached.controllers=controllers
for(var i=0,controller;controller=controllers[i];i++){if(controller.onunload&&controller.onunload.$old)controller.onunload=controller.onunload.$old
if(pendingRequests&&controller.onunload){var onunload=controller.onunload
controller.onunload=noop
controller.onunload.$old=onunload}}}
if(cached.children&&!cached.children.nodes)cached.children.nodes=[];if(data.tag==="select"&&"value"in data.attrs)setAttributes(node,data.tag,{value:data.attrs.value},{},namespace);parentElement.insertBefore(node,parentElement.childNodes[index]||null)}
else{node=cached.nodes[0];if(hasKeys)setAttributes(node,data.tag,data.attrs,cached.attrs,namespace);cached.children=build(node,data.tag,undefined,undefined,data.children,cached.children,false,0,data.attrs.contenteditable?node:editable,namespace,configs);cached.nodes.intact=true;if(controllers.length){cached.views=views
cached.controllers=controllers}
if(shouldReattach===true&&node!=null)parentElement.insertBefore(node,parentElement.childNodes[index]||null)}
if(typeof data.attrs["config"]===FUNCTION){var context=cached.configContext=cached.configContext||{};var callback=function(data,args){return function(){return data.attrs["config"].apply(data,args)}};configs.push(callback(data,[node,!isNew,context,cached]))}}
else if(typeof data!=FUNCTION){var nodes;if(cached.nodes.length===0){if(data.$trusted){nodes=injectHTML(parentElement,index,data)}
else{nodes=[$document.createTextNode(data)];if(!parentElement.nodeName.match(voidElements))parentElement.insertBefore(nodes[0],parentElement.childNodes[index]||null)}
cached="string number boolean".indexOf(typeof data)>-1?new data.constructor(data):data;cached.nodes=nodes}
else if(cached.valueOf()!==data.valueOf()||shouldReattach===true){nodes=cached.nodes;if(!editable||editable!==$document.activeElement){if(data.$trusted){clear(nodes,cached);nodes=injectHTML(parentElement,index,data)}
else{if(parentTag==="textarea")parentElement.value=data;else if(editable)editable.innerHTML=data;else{if(nodes[0].nodeType===1||nodes.length>1){clear(cached.nodes,cached);nodes=[$document.createTextNode(data)]}
parentElement.insertBefore(nodes[0],parentElement.childNodes[index]||null);nodes[0].nodeValue=data}}}
cached=new data.constructor(data);cached.nodes=nodes}
else cached.nodes.intact=true}
return cached}
function sortChanges(a,b){return a.action-b.action||a.index-b.index}
function setAttributes(node,tag,dataAttrs,cachedAttrs,namespace){for(var attrName in dataAttrs){var dataAttr=dataAttrs[attrName];var cachedAttr=cachedAttrs[attrName];if(!(attrName in cachedAttrs)||(cachedAttr!==dataAttr)){cachedAttrs[attrName]=dataAttr;try{if(attrName==="config"||attrName=="key")continue;else if(typeof dataAttr===FUNCTION&&attrName.indexOf("on")===0){node[attrName]=autoredraw(dataAttr,node)}
else if(attrName==="style"&&dataAttr!=null&&type.call(dataAttr)===OBJECT){for(var rule in dataAttr){if(cachedAttr==null||cachedAttr[rule]!==dataAttr[rule])node.style[rule]=dataAttr[rule]}
for(var rule in cachedAttr){if(!(rule in dataAttr))node.style[rule]=""}}
else if(namespace!=null){if(attrName==="href")node.setAttributeNS("http://www.w3.org/1999/xlink","href",dataAttr);else if(attrName==="className")node.setAttribute("class",dataAttr);else node.setAttribute(attrName,dataAttr)}
else if(attrName in node&&!(attrName==="list"||attrName==="style"||attrName==="form"||attrName==="type"||attrName==="width"||attrName==="height")){if(tag!=="input"||node[attrName]!==dataAttr)node[attrName]=dataAttr}
else node.setAttribute(attrName,dataAttr)}
catch(e){if(e.message.indexOf("Invalid argument")<0)throw e}}
else if(attrName==="value"&&tag==="input"&&node.value!=dataAttr){node.value=dataAttr}}
return cachedAttrs}
function clear(nodes,cached){for(var i=nodes.length-1;i>-1;i--){if(nodes[i]&&nodes[i].parentNode){try{nodes[i].parentNode.removeChild(nodes[i])}
catch(e){}
cached=[].concat(cached);if(cached[i])unload(cached[i])}}
if(nodes.length!=0)nodes.length=0}
function unload(cached){if(cached.configContext&&typeof cached.configContext.onunload===FUNCTION){cached.configContext.onunload();cached.configContext.onunload=null}
if(cached.controllers){for(var i=0,controller;controller=cached.controllers[i];i++){if(typeof controller.onunload===FUNCTION)controller.onunload({preventDefault:noop});}}
if(cached.children){if(type.call(cached.children)===ARRAY){for(var i=0,child;child=cached.children[i];i++)unload(child)}
else if(cached.children.tag)unload(cached.children)}}
function injectHTML(parentElement,index,data){var nextSibling=parentElement.childNodes[index];if(nextSibling){var isElement=nextSibling.nodeType!=1;var placeholder=$document.createElement("span");if(isElement){parentElement.insertBefore(placeholder,nextSibling||null);placeholder.insertAdjacentHTML("beforebegin",data);parentElement.removeChild(placeholder)}
else nextSibling.insertAdjacentHTML("beforebegin",data)}
else parentElement.insertAdjacentHTML("beforeend",data);var nodes=[];while(parentElement.childNodes[index]!==nextSibling){nodes.push(parentElement.childNodes[index]);index++}
return nodes}
function autoredraw(callback,object){return function(e){e=e||event;m.redraw.strategy("diff");m.startComputation();try{return callback.call(object,e)}
finally{endFirstComputation()}}}
var html;var documentNode={appendChild:function(node){if(html===undefined)html=$document.createElement("html");if($document.documentElement&&$document.documentElement!==node){$document.replaceChild(node,$document.documentElement)}
else $document.appendChild(node);this.childNodes=$document.childNodes},insertBefore:function(node){this.appendChild(node)},childNodes:[]};var nodeCache=[],cellCache={};m.render=function(root,cell,forceRecreation){var configs=[];if(!root)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var id=getCellCacheKey(root);var isDocumentRoot=root===$document;var node=isDocumentRoot||root===$document.documentElement?documentNode:root;if(isDocumentRoot&&cell.tag!="html")cell={tag:"html",attrs:{},children:cell};if(cellCache[id]===undefined)clear(node.childNodes);if(forceRecreation===true)reset(root);cellCache[id]=build(node,null,undefined,undefined,cell,cellCache[id],false,0,null,undefined,configs);for(var i=0,len=configs.length;i<len;i++)configs[i]()};function getCellCacheKey(element){var index=nodeCache.indexOf(element);return index<0?nodeCache.push(element)-1:index}
m.trust=function(value){value=new String(value);value.$trusted=true;return value};function gettersetter(store){var prop=function(){if(arguments.length)store=arguments[0];return store};prop.toJSON=function(){return store};return prop}
m.prop=function(store){if(((store!=null&&type.call(store)===OBJECT)||typeof store===FUNCTION)&&typeof store.then===FUNCTION){return propify(store)}
return gettersetter(store)};var roots=[],components=[],controllers=[],lastRedrawId=null,lastRedrawCallTime=0,computePreRedrawHook=null,computePostRedrawHook=null,prevented=false,topComponent,unloaders=[];var FRAME_BUDGET=16;function parameterize(component,args){var controller=function(){return(component.controller||noop).apply(this,args)||this}
var view=function(ctrl){if(arguments.length>1)args=args.concat([].slice.call(arguments,1))
return component.view.apply(component,args?[ctrl].concat(args):[ctrl])}
view.$original=component.view
var output={controller:controller,view:view}
if(args[0]&&args[0].key!=null)output.attrs={key:args[0].key}
return output}
m.component=function(component){return parameterize(component,[].slice.call(arguments,1))}
m.mount=m.module=function(root,component){if(!root)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var index=roots.indexOf(root);if(index<0)index=roots.length;var isPrevented=false;var event={preventDefault:function(){isPrevented=true;computePreRedrawHook=computePostRedrawHook=null;}};for(var i=0,unloader;unloader=unloaders[i];i++){unloader.handler.call(unloader.controller,event)
unloader.controller.onunload=null}
if(isPrevented){for(var i=0,unloader;unloader=unloaders[i];i++)unloader.controller.onunload=unloader.handler}
else unloaders=[]
if(controllers[index]&&typeof controllers[index].onunload===FUNCTION){controllers[index].onunload(event)}
if(!isPrevented){m.redraw.strategy("all");m.startComputation();roots[index]=root;if(arguments.length>2)component=subcomponent(component,[].slice.call(arguments,2))
var currentComponent=topComponent=component=component||{controller:function(){}};var constructor=component.controller||noop
var controller=new constructor;if(currentComponent===topComponent){controllers[index]=controller;components[index]=component}
endFirstComputation();return controllers[index]}};var redrawing=false
m.redraw=function(force){if(redrawing)return
redrawing=true
if(lastRedrawId&&force!==true){if($requestAnimationFrame===window.requestAnimationFrame||new Date-lastRedrawCallTime>FRAME_BUDGET){if(lastRedrawId>0)$cancelAnimationFrame(lastRedrawId);lastRedrawId=$requestAnimationFrame(redraw,FRAME_BUDGET)}}
else{redraw();lastRedrawId=$requestAnimationFrame(function(){lastRedrawId=null},FRAME_BUDGET)}
redrawing=false};m.redraw.strategy=m.prop();function redraw(){if(computePreRedrawHook){computePreRedrawHook()
computePreRedrawHook=null}
for(var i=0,root;root=roots[i];i++){if(controllers[i]){var args=components[i].controller&&components[i].controller.$$args?[controllers[i]].concat(components[i].controller.$$args):[controllers[i]]
m.render(root,components[i].view?components[i].view(controllers[i],args):"")}}
if(computePostRedrawHook){computePostRedrawHook();computePostRedrawHook=null}
lastRedrawId=null;lastRedrawCallTime=new Date;m.redraw.strategy("diff")}
var pendingRequests=0;m.startComputation=function(){pendingRequests++};m.endComputation=function(){pendingRequests=Math.max(pendingRequests-1,0);if(pendingRequests===0)m.redraw()};var endFirstComputation=function(){if(m.redraw.strategy()=="none"){pendingRequests--
m.redraw.strategy("diff")}
else m.endComputation();}
m.withAttr=function(prop,withAttrCallback){return function(e){e=e||event;var currentTarget=e.currentTarget||this;withAttrCallback(prop in currentTarget?currentTarget[prop]:currentTarget.getAttribute(prop))}};var modes={pathname:"",hash:"#",search:"?"};var redirect=noop,routeParams,currentRoute,isDefaultRoute=false;m.route=function(){if(arguments.length===0)return currentRoute;else if(arguments.length===3&&type.call(arguments[1])===STRING){var root=arguments[0],defaultRoute=arguments[1],router=arguments[2];redirect=function(source){var path=currentRoute=normalizeRoute(source);if(!routeByValue(root,router,path)){if(isDefaultRoute)throw new Error("Ensure the default route matches one of the routes defined in m.route")
isDefaultRoute=true
m.route(defaultRoute,true)
isDefaultRoute=false}};var listener=m.route.mode==="hash"?"onhashchange":"onpopstate";window[listener]=function(){var path=$location[m.route.mode]
if(m.route.mode==="pathname")path+=$location.search
if(currentRoute!=normalizeRoute(path)){redirect(path)}};computePreRedrawHook=setScroll;window[listener]()}
else if(arguments[0].addEventListener||arguments[0].attachEvent){var element=arguments[0];var isInitialized=arguments[1];var context=arguments[2];var vdom=arguments[3];element.href=(m.route.mode!=='pathname'?$location.pathname:'')+modes[m.route.mode]+vdom.attrs.href;if(element.addEventListener){element.removeEventListener("click",routeUnobtrusive);element.addEventListener("click",routeUnobtrusive)}
else{element.detachEvent("onclick",routeUnobtrusive);element.attachEvent("onclick",routeUnobtrusive)}}
else if(type.call(arguments[0])===STRING){var oldRoute=currentRoute;currentRoute=arguments[0];var args=arguments[1]||{}
var queryIndex=currentRoute.indexOf("?")
var params=queryIndex>-1?parseQueryString(currentRoute.slice(queryIndex+1)):{}
for(var i in args)params[i]=args[i]
var querystring=buildQueryString(params)
var currentPath=queryIndex>-1?currentRoute.slice(0,queryIndex):currentRoute
if(querystring)currentRoute=currentPath+(currentPath.indexOf("?")===-1?"?":"&")+querystring;var shouldReplaceHistoryEntry=(arguments.length===3?arguments[2]:arguments[1])===true||oldRoute===arguments[0];if(window.history.pushState){computePreRedrawHook=setScroll
computePostRedrawHook=function(){window.history[shouldReplaceHistoryEntry?"replaceState":"pushState"](null,$document.title,modes[m.route.mode]+currentRoute);};redirect(modes[m.route.mode]+currentRoute)}
else{$location[m.route.mode]=currentRoute
redirect(modes[m.route.mode]+currentRoute)}}};m.route.param=function(key){if(!routeParams)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()")
return routeParams[key]};m.route.mode="search";function normalizeRoute(route){return route.slice(modes[m.route.mode].length)}
function routeByValue(root,router,path){routeParams={};var queryStart=path.indexOf("?");if(queryStart!==-1){routeParams=parseQueryString(path.substr(queryStart+1,path.length));path=path.substr(0,queryStart)}
var keys=Object.keys(router);var index=keys.indexOf(path);if(index!==-1){m.mount(root,router[keys[index]]);return true;}
for(var route in router){if(route===path){m.mount(root,router[route]);return true}
var matcher=new RegExp("^"+route.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"\/?$");if(matcher.test(path)){path.replace(matcher,function(){var keys=route.match(/:[^\/]+/g)||[];var values=[].slice.call(arguments,1,-2);for(var i=0,len=keys.length;i<len;i++)routeParams[keys[i].replace(/:|\./g,"")]=decodeURIComponent(values[i])
m.mount(root,router[route])});return true}}}
function routeUnobtrusive(e){e=e||event;if(e.ctrlKey||e.metaKey||e.which===2)return;if(e.preventDefault)e.preventDefault();else e.returnValue=false;var currentTarget=e.currentTarget||e.srcElement;var args=m.route.mode==="pathname"&&currentTarget.search?parseQueryString(currentTarget.search.slice(1)):{};while(currentTarget&&currentTarget.nodeName.toUpperCase()!="A")currentTarget=currentTarget.parentNode
m.route(currentTarget[m.route.mode].slice(modes[m.route.mode].length),args)}
function setScroll(){if(m.route.mode!="hash"&&$location.hash)$location.hash=$location.hash;else window.scrollTo(0,0)}
function buildQueryString(object,prefix){var duplicates={}
var str=[]
for(var prop in object){var key=prefix?prefix+"["+prop+"]":prop
var value=object[prop]
var valueType=type.call(value)
var pair=(value===null)?encodeURIComponent(key):valueType===OBJECT?buildQueryString(value,key):valueType===ARRAY?value.reduce(function(memo,item){if(!duplicates[key])duplicates[key]={}
if(!duplicates[key][item]){duplicates[key][item]=true
return memo.concat(encodeURIComponent(key)+"="+encodeURIComponent(item))}
return memo},[]).join("&"):encodeURIComponent(key)+"="+encodeURIComponent(value)
if(value!==undefined)str.push(pair)}
return str.join("&")}
function parseQueryString(str){if(str.charAt(0)==="?")str=str.substring(1);var pairs=str.split("&"),params={};for(var i=0,len=pairs.length;i<len;i++){var pair=pairs[i].split("=");var key=decodeURIComponent(pair[0])
var value=pair.length==2?decodeURIComponent(pair[1]):null
if(params[key]!=null){if(type.call(params[key])!==ARRAY)params[key]=[params[key]]
params[key].push(value)}
else params[key]=value}
return params}
m.route.buildQueryString=buildQueryString
m.route.parseQueryString=parseQueryString
function reset(root){var cacheKey=getCellCacheKey(root);clear(root.childNodes,cellCache[cacheKey]);cellCache[cacheKey]=undefined}
m.deferred=function(){var deferred=new Deferred();deferred.promise=propify(deferred.promise);return deferred};function propify(promise,initialValue){var prop=m.prop(initialValue);promise.then(prop);prop.then=function(resolve,reject){return propify(promise.then(resolve,reject),initialValue)};return prop}
function Deferred(successCallback,failureCallback){var RESOLVING=1,REJECTING=2,RESOLVED=3,REJECTED=4;var self=this,state=0,promiseValue=0,next=[];self["promise"]={};self["resolve"]=function(value){if(!state){promiseValue=value;state=RESOLVING;fire()}
return this};self["reject"]=function(value){if(!state){promiseValue=value;state=REJECTING;fire()}
return this};self.promise["then"]=function(successCallback,failureCallback){var deferred=new Deferred(successCallback,failureCallback);if(state===RESOLVED){deferred.resolve(promiseValue)}
else if(state===REJECTED){deferred.reject(promiseValue)}
else{next.push(deferred)}
return deferred.promise};function finish(type){state=type||REJECTED;next.map(function(deferred){state===RESOLVED&&deferred.resolve(promiseValue)||deferred.reject(promiseValue)})}
function thennable(then,successCallback,failureCallback,notThennableCallback){if(((promiseValue!=null&&type.call(promiseValue)===OBJECT)||typeof promiseValue===FUNCTION)&&typeof then===FUNCTION){try{var count=0;then.call(promiseValue,function(value){if(count++)return;promiseValue=value;successCallback()},function(value){if(count++)return;promiseValue=value;failureCallback()})}
catch(e){m.deferred.onerror(e);promiseValue=e;failureCallback()}}else{notThennableCallback()}}
function fire(){var then;try{then=promiseValue&&promiseValue.then}
catch(e){m.deferred.onerror(e);promiseValue=e;state=REJECTING;return fire()}
thennable(then,function(){state=RESOLVING;fire()},function(){state=REJECTING;fire()},function(){try{if(state===RESOLVING&&typeof successCallback===FUNCTION){promiseValue=successCallback(promiseValue)}
else if(state===REJECTING&&typeof failureCallback==="function"){promiseValue=failureCallback(promiseValue);state=RESOLVING}}
catch(e){m.deferred.onerror(e);promiseValue=e;return finish()}
if(promiseValue===self){promiseValue=TypeError();finish()}
else{thennable(then,function(){finish(RESOLVED)},finish,function(){finish(state===RESOLVING&&RESOLVED)})}})}}
m.deferred.onerror=function(e){if(type.call(e)==="[object Error]"&&!e.constructor.toString().match(/ Error/))throw e};m.sync=function(args){var method="resolve";function synchronizer(pos,resolved){return function(value){results[pos]=value;if(!resolved)method="reject";if(--outstanding===0){deferred.promise(results);deferred[method](results)}
return value}}
var deferred=m.deferred();var outstanding=args.length;var results=new Array(outstanding);if(args.length>0){for(var i=0;i<args.length;i++){args[i].then(synchronizer(i,true),synchronizer(i,false))}}
else deferred.resolve([]);return deferred.promise};function identity(value){return value}
function ajax(options){if(options.dataType&&options.dataType.toLowerCase()==="jsonp"){var callbackKey="mithril_callback_"+new Date().getTime()+"_"+(Math.round(Math.random()*1e16)).toString(36);var script=$document.createElement("script");window[callbackKey]=function(resp){script.parentNode.removeChild(script);options.onload({type:"load",target:{responseText:resp}});window[callbackKey]=undefined};script.onerror=function(e){script.parentNode.removeChild(script);options.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}});window[callbackKey]=undefined;return false};script.onload=function(e){return false};script.src=options.url
+(options.url.indexOf("?")>0?"&":"?")
+(options.callbackKey?options.callbackKey:"callback")
+"="+callbackKey
+"&"+buildQueryString(options.data||{});$document.body.appendChild(script)}
else{var xhr=new window.XMLHttpRequest;xhr.open(options.method,options.url,true,options.user,options.password);xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status>=200&&xhr.status<300)options.onload({type:"load",target:xhr});else options.onerror({type:"error",target:xhr})}};if(options.serialize===JSON.stringify&&options.data&&options.method!=="GET"){xhr.setRequestHeader("Content-Type","application/json; charset=utf-8")}
if(options.deserialize===JSON.parse){xhr.setRequestHeader("Accept","application/json, text/*");}
if(typeof options.config===FUNCTION){var maybeXhr=options.config(xhr,options);if(maybeXhr!=null)xhr=maybeXhr}
var data=options.method==="GET"||!options.data?"":options.data
if(data&&(type.call(data)!=STRING&&data.constructor!=window.FormData)){throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";}
xhr.send(data);return xhr}}
function bindData(xhrOptions,data,serialize){if(xhrOptions.method==="GET"&&xhrOptions.dataType!="jsonp"){var prefix=xhrOptions.url.indexOf("?")<0?"?":"&";var querystring=buildQueryString(data);xhrOptions.url=xhrOptions.url+(querystring?prefix+querystring:"")}
else xhrOptions.data=serialize(data);return xhrOptions}
function parameterizeUrl(url,data){var tokens=url.match(/:[a-z]\w+/gi);if(tokens&&data){for(var i=0;i<tokens.length;i++){var key=tokens[i].slice(1);url=url.replace(tokens[i],data[key]);delete data[key]}}
return url}
m.request=function(xhrOptions){if(xhrOptions.background!==true)m.startComputation();var deferred=new Deferred();var isJSONP=xhrOptions.dataType&&xhrOptions.dataType.toLowerCase()==="jsonp";var serialize=xhrOptions.serialize=isJSONP?identity:xhrOptions.serialize||JSON.stringify;var deserialize=xhrOptions.deserialize=isJSONP?identity:xhrOptions.deserialize||JSON.parse;var extract=isJSONP?function(jsonp){return jsonp.responseText}:xhrOptions.extract||function(xhr){return xhr.responseText.length===0&&deserialize===JSON.parse?null:xhr.responseText};xhrOptions.method=(xhrOptions.method||'GET').toUpperCase();xhrOptions.url=parameterizeUrl(xhrOptions.url,xhrOptions.data);xhrOptions=bindData(xhrOptions,xhrOptions.data,serialize);xhrOptions.onload=xhrOptions.onerror=function(e){try{e=e||event;var unwrap=(e.type==="load"?xhrOptions.unwrapSuccess:xhrOptions.unwrapError)||identity;var response=unwrap(deserialize(extract(e.target,xhrOptions)),e.target);if(e.type==="load"){if(type.call(response)===ARRAY&&xhrOptions.type){for(var i=0;i<response.length;i++)response[i]=new xhrOptions.type(response[i])}
else if(xhrOptions.type)response=new xhrOptions.type(response)}
deferred[e.type==="load"?"resolve":"reject"](response)}
catch(e){m.deferred.onerror(e);deferred.reject(e)}
if(xhrOptions.background!==true)m.endComputation()};ajax(xhrOptions);deferred.promise=propify(deferred.promise,xhrOptions.initialValue);return deferred.promise};m.deps=function(mock){initialize(window=mock||window);return window;};m.deps.factory=app;return m})(typeof window!="undefined"?window:{});if(typeof module!="undefined"&&module!==null&&module.exports)module.exports=m;else if(typeof define==="function"&&define.amd)define(function(){return m});
function MithrilListing(listing,container){var app={},bMarker=$('#bMarker').length,bQualityImprovement=$('#bQualityImprovement').length;app.getItemClassName=function(model){var className='mls_item';if(model.online){className+=' mls_item_online';}
if(true===model.is_per_hour&&'moderator'==listing.initData.userRole){className+=' mls_item_per_hour';}
if('vip'===model.room){className+=' mls_item_vip';}
if('moderator'==listing.initData.userRole){if(bQualityImprovement){if(model.is_video_quality_improved==1){className+=' video_quality_improved';}else if(model.is_video_quality_improved==0){className+=' video_quality_refused_to_communicate';}else if(model.is_video_quality_improved==-1){className+=' video_quality_not_improved';}}
if(bMarker&&model.marker==null){className+=' empty_marker';}}
if('moderator'==listing.initData.userRole&&bMarker&&model.marker=='amazing'){className+=' amazing_marker';}
return className;};app.getThumbSrc=function(model){if(listing.currentThumbType=='live'){return model.live_image;}
return model.profile_image;};app.renderIcons=function(model){var icons=[];if(model.online){icons.push('live');}
if(model.is_new){icons.push('new');}
if(!model.is_vip_zone&&model.hd_cam){icons.push('hd_cam');}
if(model.is_vip_zone){icons.push('vip_zone');}
var iconItems=icons.map(function(icon,key){return m("span",{key:key,className:'bage bage_'+icon})});return(m("span",iconItems));};app.renderTextBages=function(model){var bage;if(model.is_away){bage=m("div",{class:"bage bage_away"},m.trust(__("I'm away")));}else if(model.room){switch(model.room){case'private':case'fullprivate':bage=m("div",{class:"bage bage_private"},m.trust(__("In private")));break;case'group':bage=m("div",{class:"bage bage_group"},m.trust(__("In group")));break;case'vip':var style={background:'url(/images/frontend/vip/'+listing.currentThumbSize+'/'+listing.initData.lang+'.png?v2)'};bage=m("div",{class:"bage bage_vip",style:style});break;}}
return m("div.bages",bage);};app.renderLinks=function(model){if(!model.online){return m("div.actions",[m("span.no_chat",m.trust(__('Model is offline')))]);}
var title=__('Chat with',{},false)+' '+model.display_name;return m("div.actions",[m("a.chat",{href:model.chat_url,title:title},!model.is_vip_zone?m.trust(__('Visit FREE Chat')):m.trust(__('Visit VIP Chat')))]);};app.renderAboutMe=function(model){var aboutMe='';var aboutMeBlank=false;if('vip'==model.room){aboutMe=m("span",m.trust(__('Enter %s1%Vip Show%s2%',{s1:'<strong>',s2:'</strong>'})));}
else if(!model.about_me||((-1===$.inArray(listing.initData.countryId,['ru','az','am','by','kz','kg','md','tj','tm','uz','ua']))&&(/[Ð°-ÑÐ-Ð¯ÐÑ]/.test(model.about_me)))){aboutMe=m("span",m.trust(__('%name% has not written anything about herself yet',{name:model.display_name})));aboutMeBlank=true;}
else{aboutMe=model.about_me}
return(m("div",{class:'etc etc_'+listing.currentThumbSize},m("div",{class:'about_me'+(aboutMeBlank?' about_me_blank':'')},aboutMe)));};app.renderPrevPages=function(ctrl){var pages=[];for(var i=ctrl.startWith;i<listing.page;++i){pages.push(m("a.mls_pager_page",{key:'prev'+i,rel:i,href:ctrl.relPrefix+'page='+i,title:__('Page',{},false)+' '+i},i));}
return(m("span.mls_pager_previous_pages",pages));};app.renderNextPages=function(ctrl){var pages=[];for(var i=listing.page+1;i<=ctrl.endWith;++i){pages.push(m("a.mls_pager_page",{key:'next'+i,rel:i,href:ctrl.relPrefix+'page='+i,title:__('Page',{},false)+i},i));}
return(m("span.mls_pager_next_pages",pages));};app.controller=function(){this.models=listing.stateData.models;this.startWith=Math.max(listing.page-3,1);this.endWith=Math.min(listing.page+3,listing.pageCount);this.relPrefix=$('#mls_chatconsole').is(':visible')?'#':decodeURI(window.location.pathname)+'?';m.redraw.strategy("none");};app.view=function(ctrl){return m('div.mls_models.'+listing.currentThumbSize,[ctrl.models.map(function(model){return m('div#mls_item_'+model.user_id+'[class="'+app.getItemClassName(model)+'"]',[m('div',{class:'thumbnail'+(!model.is_vip_zone?'':' thumbnail_vip_zone')+' thumbnail_'+listing.stateData.th_size,"data-chathost":model.username,"data-name":model.display_name,"data-vsid":('public'==model.room&&!model.is_away&&model.is_vip_zone)?model.vsid:null},[m('a',{href:!model.online?model.profile_url:model.chat_url,className:!model.online?'profile no_chat':'chat',title:!model.online?model.display_name+' '+__('profile',{},false):__('Chat with',{},false)+' '+model.display_name},[m('img.profile_image',{src:app.getThumbSrc(model),alt:model.display_name}),app.renderIcons(model)]),app.renderTextBages(model)]),m('div.mls_layer',[m('a',{href:model.profile_url,className:"profile mls_diplayname",title:model.display_name+' '+__('profile',{},false)},model.display_name),m('span.mls_langs',[m("em",{class:'mls_lang mls_primary_lang'+(model.lang?' mls_lang_'+model.lang:'')})])]),app.renderLinks(model),'en'==listing.initData.lang?app.renderAboutMe(model):'']);}),listing.pageCount<=1?'':m("div.mls_pager",[m("div.mls_pager_content",[m("span",{class:'mls_pager_prev_page'+(listing.page>1?'':' disabled')},[m("a.first",{rel:"1",href:ctrl.relPrefix.replace('?',''),title:__('First Page',{},false)},"1"),m("a.prev",{rel:listing.page-1,href:ctrl.relPrefix+"page="+(listing.page-1),title:__('Previous Page',{},false)},"Â«")]),m("span",{class:'mls_separator mls_prev_separator'+(1==ctrl.startWith?' disabled':'')},"..."),app.renderPrevPages(ctrl),m("span.mls_pager_current_page",listing.page),app.renderNextPages(ctrl),m("span",{class:'mls_separator mls_next_separator'+(listing.pageCount==ctrl.endWith?' disabled':'')},"..."),m("span",{class:'mls_pager_next_page'+(listing.page<listing.pageCount?'':' disabled')},[m("a.next",{rel:listing.page+1,href:ctrl.relPrefix+"page="+(listing.page+1),title:__('Next Page',{},false)},"Â»"),m("a.last",{rel:listing.pageCount,href:ctrl.relPrefix+"page="+listing.pageCount,title:__('Last Page',{},false)},listing.pageCount)])])])]);};m.module(container,app);m.redraw(true);}
(function($){Listing=function(){return{xhr:null,page:1,pageCount:null,totalCount:0,searchData:{},initData:{},remoteUrl:'',stateData:null,timer:null,timerInt:30*1000,container:null,containerWidth:0,thumbWidthValues:null,currentThumbType:null,currentThumbSize:'small',currentHash:null,listingH1:null,vipThumbClass:null,vipThumbType:null,lastThumbSize:0,resizer:null,mobileVideoServers:null,init:function(container,params){this.container=container;this.remoteUrl=params.remoteUrl;this.initData=params.initData||{};this.containerWidth=$(container).width();this.currentThumbSize=params.localData.thumbSize;this.thumbWidthValues=params.thumbWidthValues||null;this.vipThumbClass=params.localData.vipThumbClass;this.vipThumbType=params.localData.vipThumbType;this.mobileVideoServers=params.localData.mobileVideoServers;if(this.initData.page){var p=parseInt(this.initData.page);if(p>0)
this.page=p;}
var $searchDisplay=$('#filter_popover').find('.ms_display input:checked');if($searchDisplay.val()){this.currentThumbSize=$searchDisplay.val();}
if('auto'==this.currentThumbSize){this.currentThumbSize=getAutoThumbSize();}
$('.mls_search_quick li input').change(function(e,cancelSubmit){if(cancelSubmit)return;var saveDisplaySettings=true;var $c=$('#bChat');if($c.length>0&&$c.prop('connected')){saveDisplaySettings=false;calculateModelsPerPage($('#filter_popover').find('.ms_display input:checked').val());}
forceFilterSubmit(saveDisplaySettings);});if(location.href.indexOf('#')>0){this.currentHash=window.location.hash.slice(1)}
var self=this;$('#mls_container, #visited_room_list').delegate('a.chat','click',function(){var $link=$(this);if(!window.chat||$('.all_models_page_mls').length){location.href=$link.attr('href');}else{var $item=$(this).parents('.mls_item').first();if($item.length){var $dataItem=$item.find('[data-chathost]');$.loadChatRoom($item.find('[data-chathost]').attr('data-chathost'),$link.parents('[data-chathost]').attr('data-name'),$link.parents('.mls_models_vip').length>0);}else{$.loadChatRoom($link.parents('[data-chathost]').attr('data-chathost'),$link.parents('[data-chathost]').attr('data-name'));}}
return false;});$('#mls_container').delegate('.mls_item .bages, .mls_item .etc','click',function(){$(this).closest('.mls_item').find('.thumbnail a:first').trigger('click');return false;});$('#mls_container').delegate('.mls_pager a','click',function(){self.load(parseInt($(this).attr('rel')));History.pushState({'listing-page':$(this).attr('rel')},document.title,$(this).attr('href'));return false;});var $filterForm=$('.mls_search').find('form');var $searchFilters=$('#mls_search_filters');var $rpf=$('#right_panel_mls_filters');if($rpf.length){$rpf.find('a[category]').bind('click',function(){$(this).parent().find('a.selected').removeClass('selected');self.initData.category=$(this).attr('category');self.load(self.page,false);$(this).addClass('selected');});$rpf.find('a[bsort]').bind('click',function(){$(this).parent().find('a.selected').removeClass('selected');self.searchData['model_search[base_sort]']=$(this).attr('bsort');self.load(self.page,false);$(this).addClass('selected');});}
var calculateModelsPerPage=function(thumbSizeType){if(!thumbSizeType){thumbSizeType=self.currentThumbSize;}
var $mlsContainer=$(self.container);if(!$mlsContainer.length)return;var containerWidth=$('.mls_models_container').width();var modelsPerRow=Math.floor(containerWidth/self.thumbWidthValues[thumbSizeType]);var modelsPerRage=('small'==thumbSizeType?3:2)*modelsPerRow;self.initData['model_search[per_page]']=modelsPerRage;self.searchData['model_search[per_page]']=modelsPerRage;self.containerWidth=containerWidth;return modelsPerRage;};var forceFilterSubmit=function(saveDisplaySettings,hideConsole){$filterForm.append($searchFilters.hide());if(hideConsole){var isVisible=$('#chatContainer:visible').hasClass('vipZone');if(undefined!=chat){chat.closeChat(true);}
$('.chat_right_banner').hide();if(isVisible){$('.banner_top_index, .banner_top_chat').show();if(typeof $.ajaxLoadBanners=='function'){$.ajaxLoadBanners();}}}
self.searchData=self.serializeSearchForm($filterForm);if(self.isAnyFilterSelected()){self.searchData['_online_filter']=0;}
self.load(self.page,saveDisplaySettings);};var clearFindByName=function(){$('#model_search_display_name').val('');};var clearFindByParams=function(){$searchFilters.find('input:checkbox:checked').trigger('click').closest('li').removeClass('checked');};var clearSorting=function(){$('#model_search_base_sort').val('');};$filterForm.attr('onsubmit','return false').find('.search_btn').click(function(){clearFindByName();clearFindByParams();forceFilterSubmit(false);return false;});$('.saf_search_btn').click(function(){clearFindByParams();clearSorting();forceFilterSubmit(false,true);return false;});$("#model_search_display_name").keypress(function(e){if(e.which==13){$(this).change();$('.saf_search_btn').trigger('click');return false;}});$('.saf_params_btn').click(function(){clearFindByName();clearSorting();forceFilterSubmit(false,true);return false;});$('#model_search_display, #model_search_th_type, #model_search_per_page').change(function(){var saveDisplaySettings=true;var $c=$('#bChat');if($c.length>0&&$c.prop('connected')){saveDisplaySettings=false;calculateModelsPerPage($('#model_search_display').val());}
forceFilterSubmit(saveDisplaySettings);});$('#model_search_base_sort').change(function(){$('#vip_sort_hidden').val($(this).val());});$(document).on('change','.mls_sort input',function(){$('#model_search_base_sort').val($(this).val());forceFilterSubmit(true);});$("#bChat").bind("onUserData",function(e){if(!this.connected){var modelsPerRage=calculateModelsPerPage();var correctingNumberForVipRoom=(($(self.container).find('.mls_item_vip').length)&&(self.currentThumbSize=='small'))?3:0;if(self.stateData){self.stateData.models=self.stateData.models.slice(0,modelsPerRage-correctingNumberForVipRoom);self.pageCount=Math.ceil((self.stateData.online_count+correctingNumberForVipRoom)/modelsPerRage);}
if(!self.stateData){self.load(self.page);}else{self.stateData.limit=modelsPerRage;self.render();}
this.connected=true;}});var isTouchDevice=function(){try{document.createEvent('TouchEvent');return true;}catch(e){return false;}};if(!$.isTranslateSkin&&!isTouchDevice()&&'profile'==this.vipThumbType){var thumbPreviewInt;$('#mls_models').delegate('.thumbnail','mouseenter mouseleave',function(e){if(!$(this).attr('data-vsid')||!self.mobileVideoServers[$(this).attr('data-vsid')])return;var th=this;clearTimeout(thumbPreviewInt);if('mouseenter'==e.type){$(th).addClass('thumbnail_spinner');thumbPreviewInt=setTimeout(function(){var url=self.mobileVideoServers[$(th).attr('data-vsid')]+'/stream_'+$(th).attr('data-chathost')+'.jpg';$(th).find('a.chat').imagePlayer(url);$(th).removeClass('thumbnail_spinner');},1000)}else if('mouseleave'==e.type){$(th).find('a.chat').imagePlayer('destroy');$(th).removeClass('thumbnail_spinner');}});}
this.initSortingBox();this.resizer=new ListingZoneResize({thumbWidth:this.thumbWidthValues[this.currentThumbSize],vipZoneClass:this.vipThumbClass,changeStyle:true});this.resizer.resize();$(this.container).data('listing',this);this.timer=setTimeout(function(){self.load(self.page);},(this.initData.userId>0?this.timerInt:this.timerInt*2));if(!$.isServerSideListingRenderEnabled){this.load(self.page||1);}},forceLoadOnlineModels:function(){this.initData['_include_online_list']=1;this.load(this.page);},load:function(page,saveDisplaySettings){if(null!==this.xhr){this.xhr.abort();this.xhr=null;}
clearTimeout(this.timer);var updateData=$.extend({},this.initData);updateData['page']=page;if(this.containerWidth>0){this.containerWidth=$(this.container).width();updateData['mls_width']=this.containerWidth;}
if(true==saveDisplaySettings){updateData['_save']=1;}
var searchFormData=this.serializeSearchForm($('.mls_search').find('form'));if(!updateData['model_search[per_page]']){updateData['model_search[per_page]']=searchFormData['model_search[per_page]'];}
updateData['model_search[display]']=searchFormData['model_search[display]'];updateData['model_search[th_type]']=searchFormData['model_search[th_type]'];updateData['mls_th_per_row']=this.resizer.getThumbsPerRow(updateData['model_search[display]']);if('auto'==searchFormData['model_search[display]']){$('#mls_models').addClass('mls_models_resizable');}else{$('#mls_models').removeClass('mls_models_resizable');}
if(searchFormData['model_search[base_sort]']){updateData['model_search[base_sort]']=searchFormData['model_search[base_sort]'];}
if(searchFormData['model_search[vip_sort]']){updateData['model_search[vip_sort]']=searchFormData['model_search[vip_sort]'];}
if(searchFormData['model_search[display_name][text]']!=''){if(searchFormData['model_search[display_name][text]']!=__('Search by nickname')+'...'){updateData['model_search[display_name][text]']=searchFormData['model_search[display_name][text]'];updateData['_online_filter']=0;}}
if(searchFormData['model_search[gender][]']){updateData['model_search[gender][]']=searchFormData['model_search[gender][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[preference][]']){updateData['model_search[preference][]']=searchFormData['model_search[preference][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[age][]']){updateData['model_search[age][]']=searchFormData['model_search[age][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[hair_color][]']){updateData['model_search[hair_color][]']=searchFormData['model_search[hair_color][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[eyes_color][]']){updateData['model_search[eyes_color][]']=searchFormData['model_search[eyes_color][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[ethnicity][]']){updateData['model_search[ethnicity][]']=searchFormData['model_search[ethnicity][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[height][]']){updateData['model_search[height][]']=searchFormData['model_search[height][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[body][]']){updateData['model_search[body][]']=searchFormData['model_search[body][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[bust_size][]']){updateData['model_search[bust_size][]']=searchFormData['model_search[bust_size][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[penis_size][]']){updateData['model_search[penis_size][]']=searchFormData['model_search[penis_size][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[butt_size][]']){updateData['model_search[butt_size][]']=searchFormData['model_search[butt_size][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[visibility][]']){updateData['model_search[visibility][]']=searchFormData['model_search[visibility][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[audio][]']){updateData['model_search[audio][]']=searchFormData['model_search[audio][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[cams][]']){updateData['model_search[cams][]']=searchFormData['model_search[cams][]'];updateData['_online_filter']=0;}
if(searchFormData['model_search[lang][]']){updateData['model_search[lang][]']=searchFormData['model_search[lang][]'];updateData['_online_filter']=0;}
if(this.initData.pageFrom){updateData['model_search[pageFrom]']=this.initData.pageFrom;}
var self=this;this.xhr=$.ajax({url:self.remoteUrl,context:this,data:updateData,dataType:'json',type:'get',headers:{'x-country':self.initData.countryId,'x-sorter':self.initData.geoKey},complete:function(){self.xhr=null;$('.mls_spinner',self.container).removeClass('mls_spinner');},success:function(data){self.xhr=null;if('success'!=data.status){if(undefined!=window.console){console.log('unsuccess',data);}
return;}
if(page>data.page_count){page=data.page_count;}
if(undefined!=window.chat){if(!data.online_models){window.chat.mlsUpdate(data.models,false);}else{window.chat.mlsUpdate(data.online_models,true);}}
var $mlsContainer=$(self.container);var count=0;if(self.isAnyFilterSelected()){if(data.models.length){count+=data.total_count;}
$mlsContainer.find('.mls_online_count').html(data.total_count);$mlsContainer.find('.mls_heading').hide();$mlsContainer.find('.mls_heading_found').show();}else{if(data.models.length){count+=data.online_count;}
$mlsContainer.find('.mls_online_count').html(count);$mlsContainer.find('.mls_heading_found').hide();$mlsContainer.find('.mls_heading').show();}
if(self.page!=page&&false==($('#mls_chatconsole').length&&$('#mls_chatconsole').is(':visible'))){window.scroll(0,0);}
if(self.page!=page){var seoH1PagePart=page==1?'':' - '+__('page')+' '+page;$('.mls_listing_h1 span').html(seoH1PagePart);}
self.page=page;self.pageCount=data.page_count?data.page_count:null;self.totalCount=data.total_count;self.currentThumbType=data.th_type;self.lastThumbSize=self.currentThumbSize;self.currentThumbSize=data.th_size;self.stateData=data;self.render();if(self.currentThumbSize!=self.lastThumbSize){self.resizer.updateThumbWidth(self.thumbWidthValues[self.currentThumbSize]);}
self.resizer.resize();self.timer=setTimeout(function(){self.load(self.page);$.updateVisitedRooms();},(self.initData.userId>0?self.timerInt:self.timerInt*2));if($('#mls_search_filters').find('input:checkbox:checked').length||$('#model_search_display_name').val()!=''){$('ul.mls_tabs_home').find('.selected').addClass('default_selected').removeClass('selected');$('.model_categories_panel').find('span.active').hide().parent().find('a').show();}else{$('ul.mls_tabs_home').find('.default_selected').addClass('selected');$('.model_categories_panel').find('span.active').show().parent().find('a').hide();}}});},serializeSearchForm:function($form){var searchData={};$.each($form.serializeArray(),function(){if(undefined!==searchData[this.name]){if(!searchData[this.name].push){searchData[this.name]=[searchData[this.name],this.value];}else{searchData[this.name].push(this.value||'');}}else{searchData[this.name]=this.value||'';}});return searchData;},isAnyFilterSelected:function(){var searchData=this.searchData;return((searchData['model_search[display_name][text]']&&searchData['model_search[display_name][text]']!='')||(searchData['model_search[gender][]'])||(searchData['model_search[preference][]'])||(searchData['model_search[age][]'])||(searchData['model_search[hair_color][]'])||(searchData['model_search[eyes_color][]'])||(searchData['model_search[ethnicity][]'])||(searchData['model_search[height][]'])||(searchData['model_search[body][]'])||(searchData['model_search[breasts_size][]'])||(searchData['model_search[penis_size][]'])||(searchData['model_search[butt_size][]'])||(searchData['model_search[visibility][]'])||(searchData['model_search[audio][]'])||(searchData['model_search[cams][]'])||(searchData['model_search[lang][]']))},initSortingBox:function(){var $selectBox=$('#sort_base').clone().removeAttr('style').appendTo($(this.container).find('.mls_sort'));$selectBox.find('input').removeAttr('id').removeAttr('name').removeAttr('class');var $trigger=$('.select_as_list');var $list=$('.dropcontainer');var closeSelectAsListTimer=null;$trigger.click(function(ev){if(ev.target.tagName=='SPAN'){var $selected=$(ev.target).parent('a');}else{var $selected=$(ev.target);}
if($selected.hasClass('select_as_list_item')){$trigger.find('li a').removeClass('active_item');$trigger.find('input[type="hidden"]').val($selected.attr('val')).trigger('change');$trigger.find('.select_as_list_trigger').html($selected.html()).attr('val',$selected.attr('val'));$selected.addClass('active_item');}
$trigger.toggleClass('active');$list.toggleClass('dropdownvisible').promise().done(function(){if(typeof closeSelectAsListTimer!='undefined'){clearTimeout(closeSelectAsListTimer);}});if($trigger.hasClass('active')){$(document).bind('click.baseSort',function(e){$trigger.removeClass('active');$list.removeClass('dropdownvisible');$(document).unbind('click.baseSort');});}else{$(document).unbind('click.baseSort');}
return false;}).mouseleave(function(){if(typeof closeSelectAsListTimer!='undefined'){clearTimeout(closeSelectAsListTimer);}
if($trigger.hasClass('active')){closeSelectAsListTimer=setTimeout(function(){$trigger.removeClass('active');$list.removeClass('dropdownvisible');$(document).unbind('click.baseSort');clearTimeout(closeSelectAsListTimer);},2000);}}).mouseenter(function(){if(typeof closeSelectAsListTimer!='undefined'){clearTimeout(closeSelectAsListTimer);}});},render:function(){MithrilListing(this,$('#mls_models').get(0));}};};$.loadChatRoom=function(chathost,displayName,isVipZone){$('.banner_top_index').hide().css({height:'auto',width:'auto'});var metaTitle=$('#mls_models').attr('data-chatpage-meta-title');if(undefined!=window.chat){if(true==(!chat.userData||!chat.userData.chathost)){var $vc=$('#mls_videoconsole');if($vc.length){$vc.remove();}
if(isVipZone){$.switchVipZoneChat();}
init_chat_inline(chathost,{title:displayName},isVipZone);$('#mls_chatconsole').show();$.showBottomBanner();$('.mls_search .ms_per_page').remove();$('h1').not('.online').remove();$('.seo_box').remove();$.hideModelsCategoriesList();$.moveTopBannerAboveChat();$.moveAlertsAboveChat();$.showToolbarControl();$.changeMetaTitle(metaTitle,displayName);if(typeof $.ajaxLoadBanners=='function'){$.ajaxLoadBanners();}
if(chat.videoObject&&!chat.currentChathost){chat.videoObject.play();}}else{if(chat.userData&&chat.userData.isVipZone!=isVipZone){$.changeMetaTitle(metaTitle,displayName);var urlPrefix='';if(chat.options.scriptName&&chat.options.scriptName!='/index.php'){urlPrefix=chat.options.scriptName;}
location.href=urlPrefix+'/'+chathost;}else{chat.getRoom(chathost,{title:displayName});}}}};$.changeMetaTitle=function(metaTitle,displayName){if(metaTitle){document.title=metaTitle.replace('%display_name%',displayName);}};$.loadPopularChatRoom=function(){$('.mls_models_container').find('.mls_item_online:not(.mls_item_vip):first').find('a.chat:first')[0].click();};$.updateVisitedRooms=function(){if(!$("#get_visited_rooms").length)return;$.get($("#get_visited_rooms").attr('href'),function(data){$('#visited_room_list').html($(data).find('#visited_room_list').html());$('#spy_room_list_size').html($(data).find('#spy_room_list_size').html());$('#spy_room_list').html($(data).find('#spy_room_list').html());$('#new_room_list_size').html($(data).find('#new_room_list_size').html());$('#new_room_list').html($(data).find('#new_room_list').html());})};$.showBottomBanner=function(){var $bottomBannerContainer=$('.adfooter');var $bongaBanners=$bottomBannerContainer.find('.bonga_banner');if($bongaBanners.length!=0){$bongaBanners.show();$bottomBannerContainer.show();$(window).resize();}};$.moveTopBannerAboveChat=function(){var $topBannerPos=$('#top_banner_above_chat');if($topBannerPos.length){$topBannerPos.append($('.content_container .banner_top_chat'));$.adjustTopBannerIframe();}};$.moveAlertsAboveChat=function(){var $alertsPos=$('#alerts_above_chat');if($alertsPos.length){$alertsPos.append($('.content_container .jl_alert_outer'));}};$.showToolbarControl=function(){var $toolbar=$('.toolbar_control');if($toolbar.length){$toolbar.show();$toolbar.filter('.mini').each(function(){var $navbar=$(this).parents('.navbar_panel_header');$navbar.show();var $menu=$(this).parents('.navbar_panel_header').next();$menu.hide();});}};$(document).ready(function(){$.removeURLParameter('ntpop');if($('#mls_chatconsole').is(':visible')||$('#mls_videoconsole').is(':visible')){$.showBottomBanner();$.hideModelsCategoriesList();$.moveTopBannerAboveChat();$.moveAlertsAboveChat();$.showToolbarControl();}
var resizeTimer;$(window).unbind('.mls_tabs').bind('resize.mls_tabs',function(){if(resizeTimer)clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){fixTabs();},100);});function fixTabs(){var $mlsTabsContainer=$('#mls_tabs_container'),$mlsTabs=$mlsTabsContainer.find('.mls_tabs_home');if(!$mlsTabsContainer.length||!$mlsTabs.is(':visible'))return;var $lastTab=$mlsTabs.find('li:last');var $filter=$mlsTabsContainer.find('#filter_control');var distance=getDistance();if(distance<10){if(!$filter.hasClass('filter_control_min')){$filter.addClass('filter_control_min');}
distance=getDistance();if(!$mlsTabs.hasClass('mls_tabs_min')&&distance<10){$mlsTabs.addClass('mls_tabs_min');}}else if(distance>=$filter.find('.word').width()+10){if($filter.hasClass('filter_control_min')){$filter.removeClass('filter_control_min');}
distance=getDistance();if(distance>=200){if($mlsTabs.hasClass('mls_tabs_min')&&distance>=200){$mlsTabs.removeClass('mls_tabs_min');}}}
function getDistance(){var distance=0;if(window.isRTL){distance=$lastTab.offset().left-($filter.offset().left+$filter.width()+15);}else{distance=$filter.offset().left-($lastTab.offset().left+$lastTab.width());}
return distance;}}
fixTabs();$('#visited_room_list').delegate('a.chat','click',function(){var $link=$(this);if(!window.chat){location.href=$link.attr('href');}else{$.loadChatRoom($link.parents('.chatroom:first').attr('chathost'),$link.attr('title'));}
return false;});$('.quickjoin').find('form').attr('onsubmit','return false').submit(function(){var email=$(this).find('input:visible:first').val();$.open.newWindow($(this).attr('action')+(email?'?email='+email:''),{windowName:'quickjoin'+(email?'_'+email:''),width:1180,height:550,left:(($(window).width()-1180)/2),top:(($(window).height()-550)/2),scrollbars:false},{});return false;});$("#bChat").bind("onBeforeGetRoom",function(e){if(!$("#chatContainer").hasClass('vipZone')&&typeof $.ajaxLoadBanners=='function'){$.ajaxLoadBanners();}
if('function'==typeof _gaTrackerSend){_gaTrackerSend();}});$('a.remove_ads').click(function(){$.ajax({url:$(this).attr('href'),dataType:'json',context:$(this),type:'delete',success:function(data,textStatus,XMLHttpRequest){},error:function(request,textStatus,errorThrown){}});$('div.right_banners').remove();$('div.mls_models_container').removeClass('screen_large screen_medium screen_small');$('div.chat_right_banner').remove();$('#mls_chatconsole').removeClass('screen_large screen_medium screen_small');if($('#mls_container').length){var mls=$('#mls_container').data('listing');if(mls){mls.resizer.resize();}}
return false;});var $videoConsole=$('#mls_videoconsole');if($videoConsole.length){var scrn,$banners=$('.vc_banners').hide(),videoHeight=592,w=document.body.clientWidth,bannerUrl=$banners.data('url')+'&id=';if(w>=1900){scrn='large';videoHeight=477;$('.mls_models_hd_title').show();createTubeChatBanner(bannerUrl+'14',scrn);createTubeChatBanner(bannerUrl+'15',scrn);}else if(w>=1300){scrn='medium';$('.mls_models_hd_title').hide();createTubeChatBanner(bannerUrl+'16',scrn);}else{scrn='small';$('.mls_models_hd_title').hide();createTubeChatBanner(bannerUrl+'17',scrn);}
var blockHeight=$banners.outerHeight(true)+$('.mls_video_title').outerHeight(true);if(blockHeight!=$videoConsole.height()){$('.video_player').find('.jp-video').attr('video_height',videoHeight);$videoConsole.height(blockHeight);}}
function createTubeChatBanner(url,scrn){$('<div class="vc_banner '+scrn+'">').appendTo('.vc_banners');if(!$.ajaxLoadBannersUrl){$('.vc_banner:last').width(0);return false;}
var $frame=$('<iframe>',{src:url,frameborder:0,scrolling:'no'}).appendTo('.vc_banner:last');$frame.load(function(){$('.video_player').resizeTubeChat();$('.vc_banners').show();});}
$('.mls_models_hd .chat').click(function(){$.loadChatRoom($(this).data('username'),$(this).data('display_name'))});var $filterForm=$('.mls_search').find('form');var $searchFilters=$('#mls_search_filters');$('.open_search_filter').click(function(){if($filterForm.find($searchFilters)){$('#search_above_top_banner').append($searchFilters);}
$('#dmca_security').hide();$searchFilters.slideToggle(400,function(){if(chat){chat.adjustDMCASecurityIcon();}
$('#dmca_security').show();});return false;});$searchFilters.find('input:checkbox').change(function(){var $parent=$(this).closest('li');if($(this).attr('checked')){$parent.addClass('checked');}else{$parent.removeClass('checked');}});$('.saf_reset').click(function(){$searchFilters.find('input:checkbox:checked').trigger('click').closest('li').removeClass('checked');});$('.saf_input_reset').click(function(){$('#mls_search_filters').slideToggle();});});})(jQuery);$(document).ready(function(){var $qFilter=$('#filter_popover');$('#filter_control').click('click',function(){if($qFilter.hasClass('opened')){$qFilter.removeClass('opened');}else{$qFilter.addClass('opened').focus();$(document).bind('click.filter',function(event){if(!$(event.target).parents().addBack().is('#filter_control')){$qFilter.removeClass('opened');$(document).unbind('.filter')}});}});$qFilter.bind('click',function(event){event.stopPropagation();});});function getAutoThumbSize(){if($(window).width()<1300){return'small';}else if($(window).width()<=1900){return'medium';}else{return'big';}}
function ListingZoneResize(params){this.$container=$('#mls_container');this._params=params;this._thumb=new ListingZoneResize.Thumb(this.$container,params);this.styleSheetId='running_style';this.changeStyle=params.changeStyle;if(this.changeStyle){this._stylesheet=new ListingZoneResize.Stylesheet(this.styleSheetId);this._attachHandlers();}else{$('#'+this.styleSheetId).remove();}}
ListingZoneResize.prototype={constructor:ListingZoneResize,_attachHandlers:function(){var self=this;var resizeTimer;$(window).unbind('.mls_container').bind('resize.mls_container',function(){if(resizeTimer)clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){if($('#mls_models').hasClass('mls_models_resizable')){var listing=self.$container.data('listing');var thumbSize=getAutoThumbSize();if(listing.currentThumbSize!=thumbSize){listing.lastThumbSize=listing.currentThumbSize;listing.currentThumbSize=thumbSize;if(!listing.stateData){listing.load(listing.page);}else{if(listing.thumbWidthValues[thumbSize]>listing.thumbWidthValues[listing.lastThumbSize]){var models=listing.stateData.models.map(function(item){if('small'==listing.lastThumbSize){item.profile_image=item.profile_image.replace('thumb.jpg','thumb_big.jpg');item.live_image=item.live_image.replace('small','big');}else if('medium'==listing.lastThumbSize){item.profile_image=item.profile_image.replace('medium','big');item.live_image=item.live_image.replace('medium','big');}
return item;});listing.stateData.models=models;}
listing.stateData.th_size=thumbSize;listing.render();}
self.updateThumbWidth(listing.thumbWidthValues[thumbSize]);}}
self.resize();},100);});},resize:function(){if(!this.changeStyle)return false;var self=this;self._stylesheet.clearStylesheet();var dist=self._thumb.getDistance();self._stylesheet.addRule('#mls_container .mls .mls_models .mls_item',this._thumb.cssRuleName+': '+dist+'px');if(this._thumb.vipZoneClass=='vip_white'){self._stylesheet.addRule('#mls_container .mls .mls_models_vip .mls_item.first_item',this._thumb.cssRuleNameCross+': 0');var diff=this._thumb.vipWhiteIndent;diff=diff>0?diff:0;self._stylesheet.addRule('#mls_container .mls .mls_models_vip.vip_white .mls_models',{'padding-right':diff+'px','padding-left':diff+'px'});}
self._stylesheet.addRule('#mls_container .mls .mls_models .mls_item.last_item',this._thumb.cssRuleName+': 0');self._stylesheet.addRule('#mls_container .mls .mls_models .mls_item.first_item',this._thumb.cssRuleNameCross+': 0');if(self._thumb.$vipShowThumb.length&&self._thumb.vipShowThumbIsBig){self._stylesheet.addRule('.mls .mls_models .mls_item.mls_item_vip .thumbnail_small',{'width':self._thumb.getVipShowWidth()+'px'});self._stylesheet.addRule('.mls .mls_models .mls_item.mls_item_vip .thumbnail_small img',this._thumb.cssRuleNameWs+': '+this._thumb.getVipShowImgIndent()+'px;');self._stylesheet.addRule('.mls .mls_item.mls_item_vip .thumbnail_small .bage_vip',this._thumb.cssRuleNameWs+': '+this._thumb.getVipShowBageIndent()+'px');if($.isServerSideListingRenderEnabled&&self._thumb.$vipShowThumb.find('.thumbnail_auto').length&&getAutoThumbSize()=='small'){self._stylesheet.addRule('.mls .mls_models .mls_item.mls_item_vip .thumbnail_auto',{'width':self._thumb.getVipShowWidth()+'px'});self._stylesheet.addRule('.mls .mls_models .mls_item.mls_item_vip .thumbnail_auto img',this._thumb.cssRuleNameWs+': '+this._thumb.getVipShowImgIndent()+'px;');self._stylesheet.addRule('.mls .mls_item.mls_item_vip .thumbnail_auto .bage_vip',this._thumb.cssRuleNameWs+': '+this._thumb.getVipShowBageIndent()+'px');}}
if($.isServerSideListingRenderEnabled&&this._thumb.$mls.hasClass('mls_first_load')){this._thumb.hideExtraThumbs();if(this._thumb.$mls.hasClass('auto')){this._thumb.replaceThumbImages();}
this._thumb.$mls.removeClass('mls_first_load');}},getThumbsPerRow:function(thumbSize){return this._thumb._getThumbsPerRow(thumbSize);},updateThumbWidth:function(width){this._stylesheet.clearStylesheet();this._params.thumbWidth=width;this._thumb=new ListingZoneResize.Thumb(this.$container,this._params);}};ListingZoneResize.Thumb=function($container,params){this.$container=$container;this._params=params;this.thumbWidth=this._params.thumbWidth;this.initThumbDistance=12;this.thumbDistance=this.initThumbDistance;this.thumbDistanceCross=4;this.newThumbWidth=this._params.thumbWidth-this.thumbDistance;this.containerIndent=parseInt($('.mls_models_container').css(window.isRTL?'padding-left':'padding-right'));this.containerWidth=this.$container.width()-this.containerIndent;this.countInLine=Math.floor(this.containerWidth/this.thumbWidth);this.$mls=this.$container.find('.mls_models');this.isVipZone=$('#mls_models').hasClass('mls_models_vip');this.vipZoneClass=params.vipZoneClass;this.initVipWhiteIndent=(this.vipZoneClass=='vip_white')?5:0;this.vipWhiteIndent=this.initVipWhiteIndent;this.cssRuleName=window.isRTL?'margin-left':'margin-right';this.cssRuleNameCross=window.isRTL?'margin-right':'margin-left';this.cssRuleNameWs=window.isRTL?'margin-right':'margin-left';this.$vipShowThumb=this.$container.find('.mls_item_vip');this.vipShowThumbWidth=this.$vipShowThumb.first().width();this.newVipShowThumbWidth=this.vipShowThumbWidth-this.thumbDistance;this.vipShowThumbIsBig=this.$vipShowThumb.find('.thumbnail_small').length||($.isServerSideListingRenderEnabled&&this.$vipShowThumb.find('.thumbnail_auto').length&&getAutoThumbSize()=='small');this.vipShowImgIndent=parseInt(this.$vipShowThumb.find('.chat').find('img').css(this.cssRuleNameWs));this.vipShowBageIndent=parseInt(this.$vipShowThumb.find('.bage_vip').css(this.cssRuleNameWs));if($.isServerSideListingRenderEnabled&&this.$vipShowThumb.length&&this.$mls.hasClass('mls_first_load')&&this.$mls.hasClass('auto')){var $bageVip=this.$vipShowThumb.find('.bage_vip');$bageVip.css('background-image',$bageVip.css('background-image').replace('small',getAutoThumbSize()));$bageVip.removeClass('need_fix');}};ListingZoneResize.Thumb.prototype={constructor:ListingZoneResize.Thumb,_refreshParams:function(){this.thumbDistance=this.initThumbDistance;this.newThumbWidth=this._params.thumbWidth-this.thumbDistance;this.containerIndent=parseInt($('.mls_models_container').css(window.isRTL?'padding-left':'padding-right'));if(this.containerWidth!=this.$container.width()-this.containerIndent){this.containerWidth=this.$container.width()-this.containerIndent;}
this.countInLine=Math.floor(this.containerWidth/this.thumbWidth);this.$mls=this.$container.find('.mls_models');this.vipWhiteIndent=this.initVipWhiteIndent;if(!this.$vipShowThumb.length||($.isServerSideListingRenderEnabled&&this.$mls.hasClass('mls_first_load'))){this.$vipShowThumb=this.$container.find('.mls_item_vip');this.vipShowThumbWidth=this.$vipShowThumb.first().width();}
this.newVipShowThumbWidth=this.vipShowThumbWidth-this.thumbDistance;this.vipShowThumbIsBig=this.$vipShowThumb.find('.thumbnail_small').length||($.isServerSideListingRenderEnabled&&this.$vipShowThumb.find('.thumbnail_auto').length&&getAutoThumbSize()=='small');},_getThumbsPerRow:function(thumbSize){if(thumbSize=='auto'||typeof thumbSize=='undefined'){thumbSize=getAutoThumbSize();}
var listing=this.$container.data('listing');var newThumbWidth=listing.thumbWidthValues[thumbSize];if(newThumbWidth!=this.thumbWidth){var countInLine=Math.floor(this.containerWidth/newThumbWidth);var thumbWidth=newThumbWidth;var thumbWidthV=thumbWidth;var countInLineV=countInLine;for(var i=0;i<=this.initThumbDistance;i++){thumbWidthV=thumbWidth-i;countInLineV=Math.floor(this.containerWidth/thumbWidthV);if(countInLineV>countInLine){thumbWidth=thumbWidthV;countInLine=countInLineV;break;}}
return countInLine;}
return this.countInLine;},recalculateCountInLine:function(){this._refreshParams();var newDistance=this.thumbDistance;var thumbWidth=this.thumbWidth;var countInLine=this.countInLine;var thumbWidthV=thumbWidth;var countInLineV=countInLine;for(var i=0;i<=this.thumbDistance;i++){thumbWidthV=thumbWidth-i;countInLineV=Math.floor(this.containerWidth/thumbWidthV);if(countInLineV>countInLine){thumbWidth=thumbWidthV;countInLine=countInLineV;newDistance-=i;break;}}
var diff=newDistance+(this.containerWidth%(this.newThumbWidth+newDistance));if(this.vipZoneClass=='vip_white'&&this.isVipZone){var newDistanceV=newDistance+Math.floor((diff-(this.vipWhiteIndent*2+2-this.thumbDistanceCross))/(countInLine-1));if(newDistanceV<=3){if(newDistanceV<1){newDistanceV=Math.abs(newDistanceV);var decrease;if(newDistanceV==0){decrease=2;}else if(newDistanceV==1){decrease=4;}else if(newDistanceV==2){decrease=3;}else{decrease=newDistanceV;}}else{if(newDistanceV==3){decrease=2;}else{decrease=newDistanceV;}}
this.vipWhiteIndent-=decrease;}
diff-=(this.vipWhiteIndent*2+2-this.thumbDistanceCross);}else{diff+=this.thumbDistanceCross;}
newDistance+=Math.floor(diff/(countInLine-1));var containerWidth=(this.vipZoneClass=='vip_white'&&this.isVipZone)?(this.containerWidth-this.vipWhiteIndent*2):this.containerWidth;var newContainerWidth=countInLine*(this.newThumbWidth+newDistance)-newDistance;if(containerWidth!=newContainerWidth){newDistance-=(newContainerWidth-containerWidth)/(countInLine-1);}
this.thumbDistance=newDistance;this.countInLine=countInLine;},getDistance:function(){this.recalculateCountInLine();var count=this.countInLine;this._clearSideDistance(this.$mls,count);return this.thumbDistance;},_clearSideDistance:function($zone,countInLine){var self=this;var $items=$zone.find('.mls_item');var deletedLastMarginIndex;var hasVipShowBig=$zone.find('.mls_item_vip').length&&($zone.find('.thumbnail_small').length||($.isServerSideListingRenderEnabled&&$zone.find('.thumbnail_auto').length&&getAutoThumbSize()=='small'));self.refreshSideDistance();$items.eq(0).addClass('first_item');$items.eq($items.length-1).addClass('last_item');if($items.length<=2){return false;}
$items.each(function(){var clearMargin=$(this).index()%countInLine==countInLine-1;if(hasVipShowBig){if(self.countInLine==countInLine){clearMargin=$(this).index()==countInLine-2||(deletedLastMarginIndex&&$(this).index()%countInLine==countInLine-4);}else{clearMargin=$(this).index()==countInLine-2||($(this).index()==countInLine-1&&$(this).index()==2)||$(this).index()==deletedLastMarginIndex+countInLine;}
if(clearMargin){deletedLastMarginIndex=$(this).index();}}
if(clearMargin){$(this).addClass('last_item');if($(this).index()>0&&$(this).hasClass('first_item')){$(this).removeClass('first_item');}
if(!(self.vipShowThumbIsBig&&$(this).index()==self.countInLine-2)){$(this).next().addClass('first_item');}}});},refreshSideDistance:function(){this.$container.find('.last_item').removeClass('last_item');this.$container.find('.first_item').removeClass('first_item');},getVipShowWidth:function(){return this.newVipShowThumbWidth+this.thumbDistance;},getVipShowImgIndent:function(){return this.vipShowImgIndent+(this.getVipShowWidth()-this.vipShowThumbWidth)/2;},getVipShowBageIndent:function(){return this.vipShowBageIndent+(this.getVipShowWidth()-this.vipShowThumbWidth)/2;},hideExtraThumbs:function(){var thumbsCount=this.$mls.find('.mls_item').length,thumbsCountFromSettings=$('.ms_per_page').find('input:checked').val();if(this.$vipShowThumb.length&&(this.$mls.find('.thumbnail_small').length||($.isServerSideListingRenderEnabled&&this.$vipShowThumb.find('.thumbnail_auto').length)&&getAutoThumbSize()=='small')){thumbsCount+=3;}
var countForRemove=thumbsCount-this.countInLine*Math.ceil(thumbsCountFromSettings/this.countInLine);if(countForRemove>0){this.$mls.find('.mls_item').slice((-1)*countForRemove).remove();}},replaceThumbImages:function(){this.$mls.find('.mls_item').each(function(){var $img=$(this).find('.profile_image'),newSrc=$img.data('src_'+getAutoThumbSize());if(newSrc){$img.attr('src',newSrc);}})}};ListingZoneResize.Stylesheet=function(sheetId){this.sheetId=sheetId;this.sheet=$('#'+this.sheetId);this._initStyleSheet();};ListingZoneResize.Stylesheet.prototype={constructor:ListingZoneResize.Stylesheet,_initStyleSheet:function(){$('#'+this.sheetId).remove();$('head').append('<style id="'+this.sheetId+'" type="text/css"/>');this.sheet=$('#'+this.sheetId);},getSheet:function(){return this.sheet.get(0).sheet;},clearStylesheet:function(){var sheet=this.getSheet();$.grep(sheet.cssRules,function(el,i){if(el){sheet.deleteRule(i);}});},addRule:function(selector,styles){var sheet=this.getSheet();if(typeof styles!=="string"){var clone="";for(var style in styles){var val=styles[style];style=style.replace(/([A-Z])/g,"-$1").toLowerCase();clone+=style+":"+(style==="content"?'"'+val+'"':val)+"; ";}
styles=clone;$.grep(sheet.cssRules,function(el,i){if(el&&el.selectorText==selector){sheet.deleteRule(i);}});}
if(sheet.insertRule){sheet.insertRule(selector+" {"+styles+"}",sheet.cssRules.length);}else if(sheet.addRule){sheet.addRule(selector,styles);}}};
!function(a){$.formatNumber=function(b,c){var d={numberOfDecimals:0,decimalSeparator:".",thousandSeparator:"",symbol:""},e=a.extend(d,c),f=b,g=e.numberOfDecimals,h=e.decimalSeparator,j=e.thousandSeparator,k=e.symbol,l="",m=f.toString(),n=m.indexOf("e");if(n>-1&&(l=m.substring(n),f=parseFloat(m.substring(0,n))),null!=g){var o=Math.pow(10,g);f=Math.round(f*o)/o}var p=0>f?"-":"",q=(f>0?Math.floor(f):Math.abs(Math.ceil(f))).toString(),r=f.toString().substring(q.length+p.length);if(h=null!=h?h:".",r=null!=g&&g>0||r.length>1?h+r.substring(1):"",null!=g&&g>0)for(i=r.length-1,z=g;i<z;++i)r+="0";if(j=j!=h||0==r.length?j:null,null!=j&&""!=j)for(i=q.length-3;i>0;i-=3)q=q.substring(0,i)+j+q.substring(i);return""==e.symbol?p+q+r+l:k+" "+p+q+r+l}}(jQuery);
$.extend({URLEncode:function(c){var o='';var x=0;c=c.toString();var r=/(^[a-zA-Z0-9_.]*)/;while(x<c.length){var m=r.exec(c.substr(x));if(m!=null&&m.length>1&&m[1]!=''){o+=m[1];x+=m[1].length;}else{if(c[x]==' ')o+='+';else{var d=c.charCodeAt(x);var h=d.toString(16);o+='%'+(h.length<2?'0':'')+h.toUpperCase();}x++;}}return o;},URLDecode:function(s){var o=s;var binVal,t;var r=/(%[^%]{2})/;while((m=r.exec(o))!=null&&m.length>1&&m[1]!=''){b=parseInt(m[1].substr(1),16);t=String.fromCharCode(b);o=o.replace(m[1],t);}return o;}});
var swfobject=function(){function A(){if(!t){try{var a=i.getElementsByTagName("body")[0].appendChild(Q("span"));a.parentNode.removeChild(a)}catch(b){return}t=!0;for(var c=l.length,d=0;c>d;d++)l[d]()}}function B(a){t?a():l[l.length]=a}function C(b){if(typeof h.addEventListener!=a)h.addEventListener("load",b,!1);else if(typeof i.addEventListener!=a)i.addEventListener("load",b,!1);else if(typeof h.attachEvent!=a)R(h,"onload",b);else if("function"==typeof h.onload){var c=h.onload;h.onload=function(){c(),b()}}else h.onload=b}function D(){F()}function F(){var b=m.length;if(b>0)for(var c=0;b>c;c++){var d=m[c].id,e=m[c].callbackFn,f={success:!1,id:d};if(y.pv[0]>0){var g=P(d);if(g)if(!S(m[c].swfVersion)||y.wk&&y.wk<312)if(m[c].expressInstall&&H()){var h={};h.data=m[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));for(var i={},j=g.getElementsByTagName("param"),k=j.length,l=0;k>l;l++)"movie"!=j[l].getAttribute("name").toLowerCase()&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));I(h,i,d,e)}else J(g),e&&e(f);else U(d,!0),e&&(f.success=!0,f.ref=G(d),e(f))}else if(U(d,!0),e){var n=G(d);n&&typeof n.SetVariable!=a&&(f.success=!0,f.ref=n),e(f)}}}function G(c){var d=null,e=P(c);if(e&&"OBJECT"==e.nodeName)if(typeof e.SetVariable!=a)d=e;else{var f=e.getElementsByTagName(b)[0];f&&(d=f)}return d}function H(){return!u&&S("6.0.65")&&(y.win||y.mac)&&!(y.wk&&y.wk<312)}function I(b,c,d,e){u=!0,r=e||null,s={success:!1,id:d};var g=P(d);if(g){"OBJECT"==g.nodeName?(p=K(g),q=null):(p=g,q=d),b.id=f,(typeof b.width==a||!/%$/.test(b.width)&&parseInt(b.width,10)<310)&&(b.width="310"),(typeof b.height==a||!/%$/.test(b.height)&&parseInt(b.height,10)<137)&&(b.height="137"),i.title=i.title.slice(0,47)+" - Flash Player Installation";var h=y.ie&&y.win?"ActiveX":"PlugIn",j="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+h+"&MMdoctitle="+i.title;if(typeof c.flashvars!=a?c.flashvars+="&"+j:c.flashvars=j,y.ie&&y.win&&4!=g.readyState){var k=Q("div");d+="SWFObjectNew",k.setAttribute("id",d),g.parentNode.insertBefore(k,g),g.style.display="none",function(){4==g.readyState?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}()}L(b,c,d)}}function J(a){if(y.ie&&y.win&&4!=a.readyState){var b=Q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(K(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(K(a),a)}function K(a){var c=Q("div");if(y.win&&y.ie)c.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(b)[0];if(d){var e=d.childNodes;if(e)for(var f=e.length,g=0;f>g;g++)1==e[g].nodeType&&"PARAM"==e[g].nodeName||8==e[g].nodeType||c.appendChild(e[g].cloneNode(!0))}}return c}function L(c,d,f){var g,h=P(f);if(y.wk&&y.wk<312)return g;if(h)if(typeof c.id==a&&(c.id=f),y.ie&&y.win){var i="";for(var j in c)c[j]!=Object.prototype[j]&&("data"==j.toLowerCase()?d.movie=c[j]:"styleclass"==j.toLowerCase()?i+=' class="'+c[j]+'"':"classid"!=j.toLowerCase()&&(i+=" "+j+'="'+c[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",n[n.length]=c.id,g=P(c.id)}else{var m=Q(b);m.setAttribute("type",e);for(var o in c)c[o]!=Object.prototype[o]&&("styleclass"==o.toLowerCase()?m.setAttribute("class",c[o]):"classid"!=o.toLowerCase()&&m.setAttribute(o,c[o]));for(var p in d)d[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&M(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}return g}function M(a,b,c){var d=Q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function N(a){var b=P(a);b&&"OBJECT"==b.nodeName&&(y.ie&&y.win?(b.style.display="none",function(){4==b.readyState?O(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function O(a){var b=P(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function P(a){var b=null;try{b=i.getElementById(a)}catch(c){}return b}function Q(a){return i.createElement(a)}function R(a,b,c){a.attachEvent(b,c),o[o.length]=[a,b,c]}function S(a){var b=y.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function T(c,d,e,f){if(!y.ie||!y.mac){var g=i.getElementsByTagName("head")[0];if(g){var h=e&&"string"==typeof e?e:"screen";if(f&&(v=null,w=null),!v||w!=h){var j=Q("style");j.setAttribute("type","text/css"),j.setAttribute("media",h),v=g.appendChild(j),y.ie&&y.win&&typeof i.styleSheets!=a&&i.styleSheets.length>0&&(v=i.styleSheets[i.styleSheets.length-1]),w=h}y.ie&&y.win?v&&typeof v.addRule==b&&v.addRule(c,d):v&&typeof i.createTextNode!=a&&v.appendChild(i.createTextNode(c+" {"+d+"}"))}}}function U(a,b){if(x){var c=b?"visible":"hidden";t&&P(a)?P(a).style.visibility=c:T("#"+a,"visibility:"+c)}}function V(b){var c=/[\\\"<>\.;]/,d=null!=c.exec(b);return d&&typeof encodeURIComponent!=a?encodeURIComponent(b):b}var p,q,r,s,v,w,a="undefined",b="object",c="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",e="application/x-shockwave-flash",f="SWFObjectExprInst",g="onreadystatechange",h=window,i=document,j=navigator,k=!1,l=[D],m=[],n=[],o=[],t=!1,u=!1,x=!0,y=function(){var f=typeof i.getElementById!=a&&typeof i.getElementsByTagName!=a&&typeof i.createElement!=a,g=j.userAgent.toLowerCase(),l=j.platform.toLowerCase(),m=l?/win/.test(l):/win/.test(g),n=l?/mac/.test(l):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof j.plugins!=a&&typeof j.plugins[c]==b)r=j.plugins[c].description,!r||typeof j.mimeTypes!=a&&j.mimeTypes[e]&&!j.mimeTypes[e].enabledPlugin||(k=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof h.ActiveXObject!=a)try{var s=new ActiveXObject(d);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:f,pv:q,wk:o,ie:p,win:m,mac:n}}();(function(){y.w3&&((typeof i.readyState!=a&&"complete"==i.readyState||typeof i.readyState==a&&(i.getElementsByTagName("body")[0]||i.body))&&A(),t||(typeof i.addEventListener!=a&&i.addEventListener("DOMContentLoaded",A,!1),y.ie&&y.win&&(i.attachEvent(g,function(){"complete"==i.readyState&&(i.detachEvent(g,arguments.callee),A())}),h==top&&!function(){if(!t){try{i.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}A()}}()),y.wk&&!function(){return t?void 0:/loaded|complete/.test(i.readyState)?void A():void setTimeout(arguments.callee,0)}(),C(A)))})(),function(){y.ie&&y.win&&window.attachEvent("onunload",function(){for(var a=o.length,b=0;a>b;b++)o[b][0].detachEvent(o[b][1],o[b][2]);for(var c=n.length,d=0;c>d;d++)N(n[d]);for(var e in y)y[e]=null;y=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(a,b,c,d){if(y.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,m[m.length]=e,U(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return y.w3?G(a):void 0},embedSWF:function(c,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};y.w3&&!(y.wk&&y.wk<312)&&c&&d&&e&&f&&g?(U(d,!1),B(function(){e+="",f+="";var n={};if(k&&typeof k===b)for(var o in k)n[o]=k[o];n.data=c,n.width=e,n.height=f;var p={};if(j&&typeof j===b)for(var q in j)p[q]=j[q];if(i&&typeof i===b)for(var r in i)typeof p.flashvars!=a?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(S(g)){var s=L(n,p,d);n.id==d&&U(d,!0),m.success=!0,m.ref=s}else{if(h&&H())return n.data=h,void I(n,p,d,l);U(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){x=!1},ua:y,getFlashPlayerVersion:function(){return{major:y.pv[0],minor:y.pv[1],release:y.pv[2]}},hasFlashPlayerVersion:S,createSWF:function(a,b,c){return y.w3?L(a,b,c):void 0},showExpressInstall:function(a,b,c,d){y.w3&&H()&&I(a,b,c,d)},removeSWF:function(a){y.w3&&N(a)},createCSS:function(a,b,c,d){y.w3&&T(a,b,c,d)},addDomLoadEvent:B,addLoadEvent:C,getQueryParamValue:function(a){var b=i.location.search||i.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return V(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return V(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(u){var a=P(f);a&&p&&(a.parentNode.replaceChild(p,a),q&&(U(q,!0),y.ie&&y.win&&(p.style.display="block")),r&&r(s)),u=!1}}}}();
(function($){var chat=window.chat={service:{},userData:{},localData:{},performerData:null,chatHistoryLength:66,ignoredUsers:{},waitFriendConfirmUsers:{},isFreeUsersMuted:false,isVolumeSlidesShown:false,volumeSlidesInt:0,currentChatType:'public-chat',currentChatUsers:[],currentShowType:'public',performerStatus:null,isGroupChatInitialized:false,isGroupChatMembersReady:false,isGroupChatInvited:false,groupChatInvitationData:null,performerDesires:{},chatSettings:{},currentChathost:null,nextChathost:null,prevChathost:null,startNavigation:false,waitRoomConnect:false,onlineModels:[],onlineModelsData:[],onlineModelsFullList:false,waitListingUpdate:false,fontSizes:['100%','120%','130%','135%','140%'],options:{},_defaults:{debug:false,baseUrl:'',scriptName:''},init:function(options){this.debug('init...');$.extend(this.options,this._defaults,options);$('#bChat .sendInput, #bChatInputContainer .sendInput').keypress(function(e){if(e.keyCode==13&&this.value!=''){chat.sendMessage(this.value);return false;}});$('#bChat .sendButton, #bChatInputContainer .sendButton').click(function(e){var message=$(this).parents('.inputContainer').find('.sendInput').attr('value');if(message!=''){chat.sendMessage(message);}
return false;});this.initLayout();if('MobileChatService'==this.service.name){this.initMediator();this.createVideo();this.createAudio();}
var self=this;var resizeTimer=null;$(window).bind('resize',function(){if(resizeTimer)clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){self.setChatHeight();},200);});this.setChatHeight();this.debug('init done!');},resizeWindow:function(){if(window.opener){if($.browser.msie){window.resizeTo(document.documentElement.clientWidth+20,$('body').outerHeight(true)+100);}else{window.resizeTo(window.outerWidth,$('body').outerHeight(true)+(window.outerHeight-window.innerHeight));}}},ignoreUser:function(username){this.debug('isIgnored',this.isIgnored(username));if(this.isIgnored(username)){delete this.ignoredUsers[username];$('#context_menu_'+username).find('#ignoreCmd').html(__('Ignore User'));}else{this.ignoredUsers[username]=true;$('#context_menu_'+username).find('#ignoreCmd').html(__('Remove Ignore'));}},isIgnored:function(username){return this.ignoredUsers[username]!=undefined;},addServiceMessage:function(value,styleClass,chatType,tip){var $history;if(chatType!=undefined){$history=$("#"+chatType+" .history");}else{$history=$("#bChat .history");}
var tipAttrs='';if(tip){tipAttrs=' from="'+tip.from+'" amount="'+tip.amount+'"';}
var message='<p class="'+styleClass+'"'+tipAttrs+'>'+value+'</p>';this.addMessage(message,$history);this.service.addServiceMessage(message);},showPromt:function($promt){var top=$('#bChat .history:visible').offset().top;var left=$('#bChat .history:visible').offset().left;var width=$('#bChat .history:visible').width();$promtContainer=$('#bChatPromt');if(!$promtContainer.length){$promtContainer=$('<div id="bChatPromt"></div>');$promtContainer.appendTo(!$.mobile?'body':$.mobile.activePage);}
$promtContainer.css({top:top+'px',left:(left+(!window.isRTL?0:20))+'px',width:(width-12)+'px'});if(!$promtContainer.has($promt).length){$promtContainer.append($promt);}
$promt.animate({backgroundColor:"#ff99cc"},1000,function(){$promt.animate({backgroundColor:"#ffff00"},1000);});},hidePromt:function(e){var $promt=$(e).parent();$promt.remove();},buildAvatarUrl:function(from){if(!from.profileAvatarData){return from.profileAvatarUrl;}
return this.options.baseUrl+from.profileAvatarData.rel;},formatMessage:function(message,from,id){var k=$('#bChat').hasClass('bChatModel')?18:14;message=message.wordWrap('<br/>',Math.floor($('#bChat .historyContainer').width()/k));var canUsePremiumSmiles=((from.accessLevel=='gold'||from.accessLevel=='platinum'||from.accessLevel=='unlimited')||from.role=='model'||from.role=='moderator');message=$.Smileys.replace(message,canUsePremiumSmiles);var $message=$('<p class="message '+from.role+'"><dfn>'+from.displayName+': </dfn><span class="msg">'+message+'</span></p>');$message.attr('id','m'+id);if(from.userId){$message.attr('user_id',from.userId);}
if(from.fontStyle){$message.css(from.fontStyle);}
if((from.profileAvatarUrl||from.profileAvatarData)&&!$.mobile){$message.prepend('<span class="icon_avatar"><img class="profile" src="'+this.buildAvatarUrl(from)+'"/></span>');}
if(from.accessLevel){$message.addClass('member_'+from.accessLevel);}
$message.find('img.smiley_text').each(function(){if($(this).attr('w')){$(this).css({width:'100%',maxWidth:$(this).attr('w')+'px'})}});$message.find('dfn').data('userData',from);return $message;},isFriend:function(user){if($.activeFriendIds&&$.activeFriendIds[user.userId]){return true;}
return false;},canAddFriend:function(user){if(!this.userData.friendRequestSettings||!user.friendRequestSettings||user.friendRequestSettings=='none'){return false;}
if(user.isPerformer&&!this.userData.isPayable){return false;}
if(undefined!=this.waitFriendConfirmUsers[user.username]){return false;}
return!this.isFriend(user);},canSendPM:function(user){if(this.userData.isLogged&&(this.userData.role=='moderator'||(user.role&&user.role=='moderator'))){return true;}
if(!this.userData.isPerformer){if(!this.userData.isPayable){return false;}
else if(this.userData.accessLevel=='platinum'||this.userData.accessLevel=='unlimited'){return true;}}
if(user.isPerformer){if(this.chatSettings.privateMessageSettings){if(this.chatSettings.privateMessageSettings=='all'){return this.userData.balance>=this.chatSettings.privateMessageMinTokens;}
else if(this.chatSettings.privateMessageSettings=='friends'&&this.isFriend(user)){return this.userData.balance>=this.chatSettings.privateMessageMinTokens;}
else{return false;}}}else if(user.messageSenderSettings){return(user.messageSenderSettings=='all'||(user.messageSenderSettings=='friends'&&this.isFriend(user)));}
return true;},addToMyFriendIds:function(user){if($.activeFriendIds&&!$.activeFriendIds[user.userId]){$.activeFriendIds[user.userId]=true;delete this.waitFriendConfirmUsers[user.username];}},closeChat:function(forceHide){this.performerStatus=null;this.isGroupChatInitialized=false;this.isGroupChatInvited=false;$('#bPerformerDesires').html('');$('#bSocialButtons').html('');$('#bChat .users').html('').removeClass('users_full');$('.bChatUsersCount').html(0);this.disableChatInput();if(forceHide){$('#bChat .history').html('');$('#mls_chatconsole').hide();chat.currentChathost=null;chat.userData.chathost=null;var $header=$('#header'),headerResize=$header.data('resize');if(headerResize){headerResize.normalize();}}},nextRoom:function(){if(!this.userData||!this.performerData||this.waitListingUpdate)return false;this.debug('>>> NextRoom',this.nextChathost);if(!this.nextChathost||!this.onlineModelsData[this.nextChathost]){this.startNavigation=true;this.waitListingUpdate='next';this.setCurrentChathost();return;}
this.getRoom(this.nextChathost,{title:this.onlineModelsData[this.nextChathost].display_name});this.startNavigation=true;},prevRoom:function(){if(!this.userData||!this.performerData||this.waitListingUpdate)return false;this.debug('<<< PrevRoom',this.prevChathost);if(!this.prevChathost||!this.onlineModelsData[this.prevChathost]){this.startNavigation=true;this.waitListingUpdate='prev';this.setCurrentChathost();return;}
this.getRoom(this.prevChathost,{title:this.onlineModelsData[this.prevChathost].display_name});this.startNavigation=true;},getRoom:function(chathost,data){this.debug('getRoom',chathost,data,'currentChathost='+this.currentChathost,'waitRoomConnect='+this.waitRoomConnect);if(!chathost||this.currentChathost==chathost||this.waitRoomConnect)return;this.userData.chathost=chathost;this.waitRoomConnect=true;$("#bChatRoomTitle").html(data.title);var metaTitle=$('#mls_models').attr('data-chatpage-meta-title');if(metaTitle){document.title=metaTitle.replace('%display_name%',data.title);}
if('MobileChatService'==this.service.name){if(undefined!=data.isVipZone&&data.isVipZone!=this.userData.isVipZone){this.userData.isVipZone=data.isVipZone;if(this.service.getSocket()){this.service.disconnect();this.performerData={};}}
if($.mobile){if(this.userData.isVipZone){$('.chat-header, .chat-content').addClass('vip-zone');$('.bottom_banner_container_chat').hide();$('#bChatStatus').html(__('Vip chat with'));$('#popupPrivate .goto-group').hide();}else{$('.chat-header, .chat-content').removeClass('vip-zone');$('.bottom_banner_container_chat').show();$('#bChatStatus').html(__('Free chat with'));$('#popupPrivate .goto-group').show();}}
if(!this.service.connected()){this.debug('!!! ws is not connected, try to connect');this.service.connect(this.localData.chatServerUrl);return;}}
if(this.currentChathost){this.closeRoom(true);}
this.setCurrentChathost(chathost);if(!$.mobile&&this.userData.isPayable){$.bongacamsPopupClose();}
$('#bChat').attr('chathost',chathost).find('.history').html('');$('#bChat').triggerHandler('onBeforeGetRoom',[chathost,data]);this.service.getRoom(chathost);},closeRoom:function(changeRoom,forceHide){this.debug('closeRoom',changeRoom);if(this.options.debug){this.addServiceMessage('[debug] changeRoom:'+changeRoom);}
this.service.closeRoom(changeRoom);if(changeRoom){this.waitRoomConnect=true;}else{this.waitRoomConnect=false;}
this.closeChat(forceHide);},setCurrentChathost:function(chathost){this.nextChathost=null;this.prevChathost=null;if(chathost){this.currentChathost=chathost;}
if(!this.currentChathost)return;if(this.onlineModels&&this.onlineModels.length>1){var nextId=0,prevId=0;var curIdx=$.inArray(this.currentChathost,this.onlineModels);if(-1!==curIdx){nextId=curIdx+1;prevId=curIdx-1;}
this.prevChathost=this.onlineModels[prevId]||null;this.nextChathost=this.onlineModels[nextId]||null;if(!this.onlineModelsFullList){if(this.startNavigation&&(!this.prevChathost||!this.nextChathost))
var $listing=$(!$.mobile?'#mls_container':'#mls_models').data('listing');if($listing){this.debug('>>>>>>>> Force load online models');$listing.forceLoadOnlineModels();}}
else if(!this.nextChathost){this.debug('End of list: NEXT=FIRST');this.nextChathost=this.onlineModels[0];}
else if(!this.prevChathost){this.debug('End of list: PREV=LAST');this.prevChathost=this.onlineModels[this.onlineModels.length-1];}
$('#bModelNavigator').show();}else{$('#bModelNavigator').hide();}
$("#bChat").triggerHandler('onCurrentChathost');$('.mls_item_selected').removeClass('mls_item_selected');if(this.onlineModelsData&&this.onlineModelsData[this.currentChathost]){if($('#mls_item_'+this.onlineModelsData[this.currentChathost].user_id).length){$('#mls_item_'+this.onlineModelsData[this.currentChathost].user_id).addClass('mls_item_selected');}}
this.debug('setCurrentChathost',this.userData.isVipZone,this.currentChathost,'NEXT:'+this.nextChathost,'PREV:'+this.prevChathost);},mlsUpdate:function(models,isFullList){var onlineModels=new Array();this.onlineModelsData=new Array();this.debug('--- MLS UPDATE ---');var modelsInSpy=new Array();var modelsIsNew=new Array();if($.isArray(models)){for(var i=0;i<models.length;i++){onlineModels.push(models[i].username);if(this.startNavigation&&this.onlineModels.length>0&&-1===$.inArray(onlineModels[i],this.onlineModels)){this.onlineModels.push(onlineModels[i]);}
this.onlineModelsData[models[i].username]=models[i];if(models[i].is_new){modelsIsNew.push(models[i]);}
if(models[i].room!='public'){modelsInSpy.push(models[i]);}}
$("#bChat").triggerHandler('onMLSUpdate',[modelsInSpy,modelsIsNew]);if(this.startNavigation){for(var j=0;j<this.onlineModels.length;j++){if(-1===$.inArray(this.onlineModels[j],onlineModels)){this.onlineModels.splice(j,1);}}}else{this.onlineModels=onlineModels;}}
this.debug('--- MLS UPDATE --- onlineModels=',this.onlineModels,'isFullList='+isFullList);this.setCurrentChathost();if(this.waitListingUpdate){var waitFor=this.waitListingUpdate;this.debug('%%% waitListingUpdate for '+waitFor);this.waitListingUpdate=false;switch(waitFor){case'next':this.nextRoom();break;case'prev':this.prevRoom();break;}}
this.onlineModelsFullList=isFullList||false;},showVolumeSlider:function(flag){clearTimeout(this.volumeSlidesInt);try{if(!flag){var self=this;this.volumeSlidesInt=setTimeout(function(){self.service.showVolumeSlider(false);},1500);}else{this.service.showVolumeSlider(true);}}catch(e){}},soundOff:function(e){var value=$(e).is('.on');this.service.muteAudio(value);this.onMuteSound(value);},videoOff:function(e){var value=$(e).is('.on');if(value){$(e).removeClass('on').addClass('off');}else{$(e).removeClass('off').addClass('on');}
this.service.muteVideo(value);},showPaidShowLinks:function(){if(this.userData.isPayable&&this.userData.balance>0){if(this.chatSettings.allowGroupChat&&!this.isGroupChatInvited){$("#TopMenuGotoGroup").show();}
if(this.chatSettings.allowPrivateChat){$("#TopMenuGotoPrivate,  #bCamStatusGotoPrivate").show();}}},hidePaidShowLinks:function(){$('#TopMenuGotoGroup, #TopMenuGotoPrivate, #bCamStatusGotoPrivate').hide();},disableChatInput:function(){$('#bChat .sendInput, #bChatInputContainer .sendInput').css('visibility','hidden');$('#bChat .sendInput, #bChat .sendButton, #bChat .pmButton, #bChatInputContainer .sendInput, #bChatInputContainer .sendButton, #bChatInputContainer .pmButton').attr('disabled','disabled');$('#bChat .inputContainer, #bChatInputContainer').addClass('inputDisabled');},enableChatInput:function(){$('#bChat .sendInput, #bChat .sendButton, #bChat .pmButton, #bChatInputContainer .sendInput, #bChatInputContainer .sendButton, #bChatInputContainer .pmButton').removeAttr('disabled');$('#bChat .sendInput, #bChatInputContainer .sendInput').css('visibility','visible');$('#bChat .inputContainer, #bChatInputContainer').removeClass('inputDisabled');if(!$.mobile){$('html, body').scrollTop(0).scrollLeft(0);}},onChatSettings:function(settings){this.debug('--- ChatSettings',settings);this.chatSettings=settings;},incomingServiceMessage:function(chatType,message){this.debug('incomingServiceMessage',message);this.addServiceMessage(message,'service',chatType);},userConnected:function(user,chatType){this.debug('userConnected',user.username);if(user.username!=this.userData.username&&(user.isPerformer||(chatType=='private-chat'&&user.role!='moderator'))){var showType=user.showType;if('fullprivate'==showType){showType='full private';}
if(user.isPerformer&&chatType=='private-chat'){switch(this.performerStatus){case'group':showType='group'
case'fullprivate':showType='full private'
default:showType='private'}}
this.addServiceMessage('<span class="dt">'+new Date().format('H:i:s')+'</span> '+__('%username% has joined the '+showType+' chat',{username:'<strong>'+user.displayName+'</strong>'})+'.','service',chatType);}},userDisconnected:function(user,chatType,sitSeconds){this.debug('userDisconnected',user.username);if(user.userId&&user.hasStream&&!user.isPerformer){this.closeMemberCam(user.userId);}
if(user.username!=this.userData.username&&(user.isPerformer||(chatType=='private-chat'&&user.role!='moderator'))){var showType=user.showType;if('fullprivate'==showType){showType='full private';}
if(user.isPerformer&&chatType=='private-chat'){switch(this.performerStatus){case'group':showType='group';case'fullprivate':showType='full private';default:showType='private';}}
this.addServiceMessage('<span class="dt">'+new Date().format('H:i:s')+'</span> '+__('%username% has left the '+showType+' chat after %time%',{username:'<strong>'+user.displayName+'</strong>',time:elapsedTime(sitSeconds*1000)})+'.','service',chatType);}},incomingMessage:function(chatType,message,from,id,suspicious){if(!$.isTranslateSkin){this.debug('incomingMessage',from.username,chatType,'!='+suspicious);if(this.isIgnored(from.username)||(this.isFreeUsersMuted&&!from.isPayable&&!from.isPerformer&&from.role!='moderator'))return;if(!this.userData.isPerformer&&this.userData.role!='moderator'&&!from.isPerformer&&from.role!='moderator'){if(this.performerData&&!this.performerData.isRu){if(from.isRu&&!this.userData.isRu){return;}}else{if(from.isRu!=this.userData.isRu){return;}}}
this.addMessage(this.formatMessage(message,from,id),$("#"+chatType+" .history"));if(suspicious&&this.userData.isPerformer){var $hotWordNotifyContainer=$('#receive_message_with_hot_words');if($hotWordNotifyContainer.length){$("#"+chatType+" .hot_word_remindable").showTermsReminderTooltip($hotWordNotifyContainer.html());}}}},onTopicChange:function(value,isRu){if(value){this.debug('onTopicChange','isRu='+isRu,value);if($('.bChatTopicRu').length){if(isRu){this.addServiceMessage('<strong class="online">'+__('Topic')+' (Ð´Ð»Ñ Ð Ð¾ÑÑÐ¸Ð¸):</strong> '+value,'topicChange');$('.bChatTopicRu').html(value);}else{this.addServiceMessage('<strong class="online">'+__('Topic')+' (Ð´Ð»Ñ Ð¾ÑÑÐ°Ð»ÑÐ½ÑÑ):</strong> '+value,'topicChange');$('.bChatTopic').not('.bChatTopicRu').html(value);}}else{if((this.userData.isPerformer&&isRu)||(this.userData.isRu!=undefined&&!this.userData.isPerformer&&this.performerData.isRu&&isRu!=this.userData.isRu)){return;}
this.addServiceMessage('<strong class="online">'+__('Topic')+':</strong> '+value,'topicChange');$(".bChatTopic").html(value);}}},performerStatusChange:function(status){this.debug('performerStatusChange',status,'was='+this.performerStatus);if(status==this.performerStatus)return;this.performerStatus=status;$('#bChat').triggerHandler('onPerformerStatusChange');},groupChatInvitation:function(data){this.groupChatInvitationData=data;this.isGroupChatInvited=false;this.debug('--- GroupChatInvitation',data);if(!data||(data.users&&data.users.length==0)){if(this.isGroupChatInitialized){this.addServiceMessage(__('Group chat (%numready% of %numrequired% is ready)',{numready:0,numrequired:this.chatSettings.groupChatMinMembers}),'groupChatInvitation','public-chat');}
this.isGroupChatInitialized=false;if(this.chatSettings.allowGroupChat){$('#groupChatMinMembers').removeAttr('disabled');}
$('.startGroupChatNow').remove();return;}else{this.isGroupChatInitialized=true;$('#groupChatMinMembers').val(this.chatSettings.groupChatMinMembers);$('#groupChatMinMembers').attr('disabled','disabled');}
for(var i=0;i<data.users.length;i++){if(data.users[i]==this.userData.username){this.isGroupChatInvited=true;break;}}
this.isGroupChatMembersReady=(data.users.length>=this.chatSettings.groupChatMinMembers);var message='';var acceptLink='';var chathostDisplayName=(!this.userData.isPerformer)?this.performerData.displayName:this.userData.displayName;message+=__('Group chat (%numready% of %numrequired% is ready)',{numready:data.users.length,numrequired:this.chatSettings.groupChatMinMembers});if(!this.userData.isPerformer){if(this.isGroupChatMembersReady){message+='<br/>'+__('Now that there are enough members, we are waiting for %modelname% to accept or decline the group chat invitation',{modelname:chathostDisplayName})+'!';}else{message+='<br/>'+__('Once %numrequired% members have agreed to participate %modelname% will be able to start the group chat',{numrequired:this.chatSettings.groupChatMinMembers,modelname:chathostDisplayName})+'!';}
message+='<br/>'+__('Group show costs each participating member %price% tokens per minute',{price:this.localData.groupChatTokensPerMinute})+'!';if(this.userData.isLogged){if(!this.isGroupChatInvited&&this.userData.isPayable){message+=' <a class="acceptGroupChat" href="javascript:void(0)" onclick="return chat.gotoGroupChat()">'+__('Click here')+'</a> '+__('to add yourself to the group chat list')+'!';}else if(this.userData.isPayable){message+=' <a class="removeAcceptGroupChat" href="javascript:void(0)" onclick="return chat.removeAcceptGroupChat()">'+__('Click here')+'</a> '+__('to remove yourself from group chat list')+'!';}}}
else if(data.users.length>0){message+=' <a class="startGroupChatNow" href="#" onclick="return chat.sendGroupShowResponse(this, \'accept\')">'+__('Start group chat right now')+'</a>';}
this.addServiceMessage(message,'groupChatInvitation','public-chat');},onFriendRequest:function(user){if(user.isPerformer){$("#TopMenuAddFriend").hide();}
$('#context_menu_'+user.username).find('li.friend').remove();var message='<span class="friend_request_'+user.username+'">'+__('%username% would like to add you as friend',{username:'<strong>'+user.displayName+'</strong>'})+', '+__('you can')+' <a href="javascript:void(0)" class="agree">'+__('agree')+'</a> '+__('or')+' <a href="javascript:void(0)" class="refuse">'+__('refuse')+'</a>.</span>';this.addServiceMessage(message,'friendRequest');var self=this;$('.friend_request_'+user.username+' a.agree').unbind('click').bind('click',function(){return self.confirmFriend(user);});$('.friend_request_'+user.username+' a.refuse').unbind('click').bind('click',function(){return self.removeFriend(user);});},onFriendConfirm:function(user){var message=__('%username% has added you as friend',{username:'<strong>'+user.displayName+'</strong>'})+'.';this.addServiceMessage(message,'friendConfirm');this.addToMyFriendIds(user);},onUserData:function(userData,performerData,localData,status){this.debug('--- UserData',userData);this.debug('--- PerformerData',performerData);this.debug('--- LocalData',localData);this.userData=userData;this.performerData=performerData;this.localData=localData;if(status){this.performerStatusChange(status);}
this.waitRoomConnect=false;$('#bChat').triggerHandler('onUserData');},onConnect:function(){this.debug('onConnect');$('#bChat').triggerHandler('onRoomConnect',this.userData);},onDisconnect:function(reason){this.debug('onDisconnect',reason);$("#bChat").triggerHandler('onRoomClose',reason);this.closeChat();if(this.userData&&this.userData.isPerformer){this.performerStatusChange('offline');$('#bCamStatus a').hide();}
if(reason){switch(reason){case'ERROR':case'AUTH_MISS':case'ONLINE_FAILED':this.addServiceMessage(__('Chat closed'),'alert');if($('#mls_chatconsole').length){location.href='/';}
break;case'CONNECT_MISS':break;case'ROOM_RELEASE':this.performerStatusChange('offline');break;case'USER_KICK':if(this.userData.isPerformer)
this.addServiceMessage(__('Your chat session has been closed by administrator'),'alert');else
this.addServiceMessage(__("You have been blocked from %modelname%'s chat room (most likely for inappropriate behavior)",{modelname:this.performerData.displayName}),'alert');break;case'USER_BAN':this.addServiceMessage(__("You have been banned from %modelname%'s chat room (most likely for inappropriate behavior)",{modelname:this.performerData.displayName}),'alert');break;case'GHOST_DETECT':this.addServiceMessage("Duplicated user detected, chat session has been closed",'alert');if(window.opener){window.close();}else{if(this.performerData){$('#mls_chatconsole').hide();}}
break;default:this.addServiceMessage(reason,'alert');}}},setHistory:function(history){this.debug('setHistory',history);if('fullprivate'==this.performerStatus)return;for(var i=0;i<history.length;i++){var messageObj=history[i];if(messageObj.author){this.incomingMessage('public-chat',messageObj.message,messageObj.author,messageObj.id,false);}
else if(messageObj.tip){if(!this.userData.isPerformer){this.onTip(messageObj.from,messageObj.tip.amount);}}}
if(!$.mobile){setTimeout(function(){var $history=$('#bChat .history');$history.scrollTop($history.get(0).scrollHeight);},500);}},onHistoryClear:function(chatType){$("#"+chatType+" .history").html('');},onDeleteMessage:function(messageId){$('#m'+messageId).remove();},onDeleteMessages:function(userId){$('#bChat .message[user_id="'+userId+'"]').remove();},onPerformerDesires:function(data){this.debug('--- PerformerDesires',data);var desires=new Array();for(var i in data){desires.push(data[i]);}
$('#bPerformerDesires').html('');for(var i=0;i<desires.length;i++){var desire=desires[i];var $item=$('<div class="desire" id="'+desire.hash+'"><h5>'+desire.title+'</h5><p class="desc">'+desire.description+'</p><p class="price"><strong>'+desire.tips+'</strong> / <em>'+desire.price+'</em></p></div>');if(this.userData.isPerformer){$item.append('<span class="reset" title="'+__('Reset desire')+'"></span>');$item.append('<span class="delete" title="'+__('Delete desire')+'"></span>');}
if(desire.price<=20){$item.addClass("desire20");}else if(desire.price<=100){$item.addClass("desire100");}else if(desire.price<=200){$item.addClass("desire200");}else{$item.addClass("desire1000");}
$item.appendTo($('#bPerformerDesires'));if(this.performerDesires&&this.performerDesires[desire.hash]&&this.performerDesires[desire.hash].tips<desire.tips){$item.animate({backgroundColor:"#ffff00"},1000,function(){$(this).animate({backgroundColor:"#f3f0cd"},1000,function(){$(this).removeAttr('style');});});}
if(desire.tips>=desire.price){$item.addClass('fullfill');}}
this.performerDesires=data;},setSize:function(){this.debug('setSize');var $camPane=$("#camSplitPane");var minWidth=$camPane.resizable("option","minWidth");var maxWidth=$camPane.resizable("option","maxWidth");var minHeight=$camPane.resizable("option","minHeight");var maxHeight=$camPane.resizable("option","maxHeight");var curWidth=$camPane.width();var curHeight=$camPane.height();var newWidth,newHeight;if(curWidth>=maxWidth){newWidth=minWidth;newHeight=minHeight;}else{newWidth=maxWidth;newHeight=maxHeight;}
$camPane.css('width',newWidth+'px');$camPane.css('height',newHeight+'px');var h=newHeight-$('#bChat .inputContainer').height()-$('#bChatTopic').height();$('#bChat .users').css('height',h+'px');$('#bChat .history').css('height',h+'px');this.resizeWindow();},updateUsers:function(chatType,userList){this.debug('updateUsers',chatType,userList);if(userList.users){if(userList.guestListLimit){userList.users.push({username:'guest_count',displayName:userList.totalGuests+' Guests',isLogged:false});}
$("#"+chatType+" .users").html('');for(var i=0;i<userList.users.length;i++){$("#"+chatType+" .users").append(this.createUserListItem(userList.users[i]));}}
if(this.userData.isPerformer||this.userData.role=='moderator'){if(userList.userListLimit>0&&((userList.userListLimit<userList.totalUsers)||(!userList.guestListLimit&&userList.userListLimit<userList.totalUsers+userList.totalGuests))){$("#"+chatType+" .users").append('<button class="btn_silver more_users" title="Show all users" type="button">...</button>');}}
$("#"+chatType+" .bChatUsersCount").html(userList.totalUsers+userList.totalGuests);},sendMessage:function(message){if(message.length>255){return alert('Message is too long');}
if(this.userData.isLogged){if(this.userData.role=='member'&&!this.userData.isPayable&&!this.chatSettings.allowFreeMemberChat){this.addServiceMessage(__('We are sorry but FREE members are temporarily muted by model')+'. <a href="javascript:void(0)" onclick="return chat.buyTokensPopup(this)">'+__('Buy some tokens')+'</a> '+__('and begin chatting with your favorite models')+'!','alert');}
else if(this.userData.role=='member'&&this.userData.isVipZone&&!this.userData.isVip&&'free'==this.userData.accessLevel){this.vipZoneMessageLimit();}
else if(this.userData.role=='member'&&this.performerStatus=='fullprivate'&&!this.isPaidShow){this.fullPrivateMessageLimit();}
else{this.service.sendMessage(message,this.currentChatType);}}else if($('.history .guest_chat_alert').length==0){this.addServiceMessage(__('We are sorry but guests are not allowed to chat')+'. <a href="javascript:void(0)" onclick="return chat.signupPopup(true)">'+__('Click here to create a 100% FREE account')+'</a> '+__('and begin chatting with your favorite models')+'!','alert guest_chat_alert');}
$('#'+this.currentChatType+' .sendInput').val('');$('#'+this.currentChatType+' .sendInput').focus();$('#bChat').triggerHandler('onSendMessage');},sendPrivateMessage:function(message,to){this.debug('sendPrivateMessage to: '+to.username);this.service.sendPrivateMessage(message,to.username);},getUserBalance:function(user){return!user.blackCloak?(user.balance>0?$.formatNumber(user.balance):0):"*******";},addFriend:function(user){if(user.isPerformer&&!this.userData.isPayable){this.addServiceMessage(__('Only premium members can add models to friends')+'. '+__('To become a premium (GOLD) member for life and unlock this feature, all you have to do is buy any amount of tokens one time!'),'alert');this.buyTokensPopup();return;}
$('#context_menu_'+user.username).find('li.friend').remove();this.waitFriendConfirmUsers[user.username]=true;this.service.addFriend(user);return false;},confirmFriend:function(user){$('.friend_request_'+user.username).remove();$('#context_menu_'+user.username).find('li.friend').remove();this.addToMyFriendIds(user);this.service.confirmFriend(user);return false;},removeFriend:function(user){$('.friend_request_'+user.username).remove();this.service.removeFriend(user);return false;},onUserMuted:function(flag){this.debug('onUserMuted',flag);this.userData.isMuted=flag;},onMuteSound:function(flag){if(flag){$('#bCamControlsVolume').removeClass('on').addClass('off');}else{$('#bCamControlsVolume').removeClass('off').addClass('on');}},onRebootSecondsLeft:function(secondsLeft){this.addServiceMessage(__('WARNING: Chat service is going for maintenance after %time%',{time:elapsedTime(secondsLeft*1000)}),'alert');},adjustDMCASecurityIcon:function()
{if(!this.performerData||!this.performerData.dmcaSecurity){return;}
var dmcaSettings=this.performerData.dmcaSecurity;var ct=$('#chatContainer');var ctPaddingsTopBottom=parseInt(ct.css('padding-top').replace('px',''))+parseInt(ct.css('padding-bottom').replace('px',''));if(dmcaSettings.marginTop+dmcaSettings.height+ct[0].offsetTop>ct[0].offsetTop+ct.height()+ctPaddingsTopBottom){$('#dmca_security').css({top:(ct[0].offsetTop+ct.height()-dmcaSettings.height)+ctPaddingsTopBottom+'px'});}else{$('#dmca_security').css({top:(ct[0].offsetTop+dmcaSettings.marginTop)+'px'});}
var ctPaddingsLeftRight=parseInt(ct.css('padding-left').replace('px',''))+parseInt(ct.css('padding-right').replace('px',''));if(dmcaSettings.marginLeft+dmcaSettings.width+ct[0].offsetLeft>ct[0].offsetLeft+ct.width()+ctPaddingsLeftRight){if(!window.isRTL){$('#dmca_security').css({left:(ct[0].offsetLeft+ct.width()-dmcaSettings.width)+ctPaddingsLeftRight+'px'});}else{$('#dmca_security').css({left:ctPaddingsLeftRight+'px',right:'inherit'});}}else{if(!window.isRTL){$('#dmca_security').css({left:(ct[0].offsetLeft+dmcaSettings.marginLeft)+'px'});}else{var bannerOffset=parseInt($('#mls_chatconsole').css('margin-left').replace('px',''));var right=ct[0].offsetLeft+dmcaSettings.marginLeft-bannerOffset;$('#dmca_security').css({left:'inherit',right:(right>=0?right:parseInt($('.wrapper_rtl').css('padding-right').replace('px','')))+'px'});}}},debug:function(){if(this.options.debug){try{var args=Array.prototype.slice.call(arguments);args.splice(0,0,'[Chat]');console.log.apply(console,args);}catch(e){console.log(typeof arguments);}}},error:function(){try{var args=Array.prototype.slice.call(arguments);args.splice(0,0,'[Chat]');console.error.apply(console,args);}catch(e){console.error(typeof arguments);}}};})(jQuery);String.prototype.htmlspecialchars=function(){var res=this;res=res.replace(/\\/g,"");res=res.replace(/&/g,"&amp;");res=res.replace(/"/g,"&quot;");res=res.replace(/'/g,"&#039;");res=res.replace(/</g,"&lt;");res=res.replace(/>/g,"&gt;");return res;}
String.prototype.wordWrap=function(brk,width){brk=brk||'<br/>';width=width||50;var wordsArr=this.split(' ');if(wordsArr.length==0)return this;var regex='.{1,'+width+'}(\\s|$)|.{'+width+'}|.+$';for(var i=0;i<wordsArr.length;i++){if(wordsArr[i].length>width){wordsArr[i]=wordsArr[i].match(new RegExp(regex,'g')).join(brk);}}
return wordsArr.join(' ');};
(function($){$.extend(chat,{initLayout:function(){$('#bChat').bind('onPaidShowStart',function(e,type){$('#bGotoPrivate, #bGotoVoyeur, #bGotoVoyeur2, #bGotoGroup, #bGotoGroup2').hide();switch(type){case'private':case'fullprivate':$('#bStopShow strong').html(__('Exit Private Chat'));break;case'group':$('#bPaidButtonGroup').removeClass('sv-grid-33 sv-grid-50 hide-first hide-middle').addClass('sv-grid-50 hide-first');$('#bStopShow strong').html(__('Exit Group Chat'));break;case'voyeur':$('#bStopShow strong').html(__('Exit Spy Mode'));break;}
if('vip'!=type){$('#bStopShow').show();}});$('#bChat').bind('onPaidShowStop',function(e,reason,changeRoom){$('#bStopShow').hide();if(!changeRoom){$('#bPaidButtonGroup').removeClass('sv-grid-33 sv-grid-50 hide-first hide-middle');if(chat.performerStatus=='private'){$('#bGotoVoyeur2').show();}else if(chat.performerStatus=='group'){$('#bGotoGroup2').show();}}});var $header=$('#header'),headerResize=$header.data('resize');$('#bChat').bind('onUserData',function(e){if(headerResize){headerResize.minify();}
chat.setChatHeight();$('.member_registration_performer_username').val(chat.performerData.username);var chathostDisplayName=(!chat.userData.isPerformer)?chat.performerData.displayName:chat.userData.displayName;if(!chat.userData.isPerformer){var $chatConsole=$('#mls_chatconsole');if($chatConsole.length){if(undefined!=History&&History.enabled){var urlPrefix='';if(chat.options.scriptName&&chat.options.scriptName!='/index.php'){urlPrefix=chat.options.scriptName;}
if($chatConsole.hasClass('no_change_page_url')){$chatConsole.removeClass('no_change_page_url');}else{History.pushState({chathost:chat.performerData.username},$('title').html(),urlPrefix+"/"+chat.performerData.username);}}}
$('.bChatTopic').html(__("%modelname%'s chat",{modelname:chathostDisplayName}));$("#bChatRoomTitle").html(chathostDisplayName);var $profileLink=$('#bUnderChatViewProfile');var profileUrlPrefix='';if($profileLink.attr('url_prefix')!=undefined){profileUrlPrefix=$profileLink.attr('url_prefix')+'http://'+window.location.host;}
$profileLink.attr('href',profileUrlPrefix+chat.performerData.profileUrl);if($('#bLovers').length){$('#bLovers').attr('action',$('#bLovers').attr('url')+'/'+chat.performerData.username);var pattern=$('#sLovers').attr('pattern'),currentNode;if($('#sLovers').find('.i18n_link').length>0){currentNode=$('#sLovers').find('.i18n_link');}
else{currentNode=$('#sLovers');}
currentNode.html(pattern.replace('%count%',$.formatNumber(chat.performerData.loversCount)));}
if(chat.userData.isLogged){$('#bTipModel').bongacamsPopup($('#tip_model_popup_container'),function(){$('#bTipModel').removeAttr('desireid');},'',function(){var $popup=$('#bongacams_popup');$popup.find('.title_block').find('.name').html(chathostDisplayName);var $chatTab=$('.chat-tab');$popup.css({top:$chatTab.offset().top+$chatTab.outerHeight(true)-36-$popup.outerHeight(true)+'px',left:window.isRTL?$chatTab.offset().left+$chatTab.outerWidth(true)-$popup.outerWidth(true)-3+'px':$chatTab.offset().left+3+'px'});if(window.isRTL){if($popup.offset().left<0){$popup.css('left',$chatTab.offset().left+3+'px');}}else{if($popup.offset().left+$popup.outerWidth()>window.innerWidth){$popup.css('left',window.innerWidth-$popup.outerWidth()-49+'px');}}},null,true);}
if(chat.performerData){if(chat.performerData.bwData&&$.isFunction(chat.updatePerformerBandwidth)){chat.updatePerformerBandwidth(chat.performerData.bwData);}
if($.isFunction(chat.updateRestrictedLanguageList)){chat.updateRestrictedLanguageList(chat.performerData.restrictedLanguages);}
$('#pi_mode').html(('all'==chat.performerData.perHourType||(chat.userData.isVipZone&&'vip'==chat.performerData.perHourType))?__('per hour'):__('default'));$('#fms_origin').html(chat.performerData.originInfo);if(chat.performerData.userAgentInfo){$('#ua_browser').html(chat.performerData.userAgentInfo.browser);$('#ua_os').html(chat.performerData.userAgentInfo.os);}
var $backendProfileLink=$('#bProfileLink').attr('href');if($backendProfileLink){$backendProfileLink=$backendProfileLink.replace(/\d+/,chat.performerData.userId);$('#bProfileLink').attr('href',$backendProfileLink);$('#bProfileLink').html(chat.performerData.username);}}
if($('.underChatSocButton').length){$('.underChatSocButton').remove();var chathostProfileUrl='http://'+window.location.host+chat.performerData.profileUrl;try{twttr.widgets.load();gapi.plusone.go();}catch(e){}}
$('#dmca_security').remove();if(chat.performerData.dmcaSecurity){var ct=$('#chatContainer').get(0);var dmcaStyle='background-image: url('+chat.options.baseUrl+'/'+chat.performerData.dmcaSecurity.image+');'+'width: '+chat.performerData.dmcaSecurity.width+'px;'+'height: '+chat.performerData.dmcaSecurity.height+'px;'+'left: '+(ct.offsetLeft+parseInt(chat.performerData.dmcaSecurity.marginLeft))+'px;'+'top: '+(ct.offsetTop+parseInt(chat.performerData.dmcaSecurity.marginTop))+'px;';$('#chatContainer').prepend('<div id="dmca_security" style="'+dmcaStyle+'"></div>');chat.adjustDMCASecurityIcon();}}
else{try{$.sockJS.send(JSON.stringify({type:'performer_status',status:'online',performer:chat.userData}));}catch(e){}}
$('#bChatStatus').html(__('You are currently in the public chat'));chat.enableChatInput();if($('#bChatOptions').length){$('#bChatOptions').show();}
var canUsePremiumSmiles=((chat.userData.accessLevel=='gold'||chat.userData.accessLevel=='platinum'||chat.userData.accessLevel=='unlimited')||chat.userData.role=='model'||chat.userData.role=='moderator');$('#bChat').find('.inputContainer').initSmilePanel({styleClass:chat.userData.role=='model'?'rounded':'in_chat',premium:true,canUsePremium:canUsePremiumSmiles,inChat:true});});$('.tooltip').appendTo('body');$(document).click(function(e){var el=$(e.target);if($(".tooltip:visible").length&&!el.is(".tooltip")&&!el.parents(".tooltip").length&&!el.is(".tt")&&!el.is("option")){$(".tt").each(function(){var tt=$(this).data("tooltip");if(tt)tt.hide();});}});$('#bChat').delegate('.message dfn','click',function(){var $tab=$(this).parents('.chat-tab');$tab.find('.sendInput').val($(this).html());});$('#bChat').delegate('.message dfn','contextmenu',function(e){e.preventDefault();if('undefined'==typeof $.activeFriendIds&&$.isFunction($.getActiveFriendIds)){var self=this;$.getActiveFriendIds(function(){chat.createContextMenu($(self))});}else{chat.createContextMenu($(this));}});$("#bCamControlsResize").tooltip({tip:'#ResizeTooltip',onBeforeShow:function(){if(chat.userData&&!chat.userData.isLogged){return false;}},onShow:function(){$('#ResizablePane .ui-icon-gripsmall-diagonal-se').addClass('ui-icon-gripsmall-diagonal-se-highlight');},onHide:function(){$('#ResizablePane .ui-icon-gripsmall-diagonal-se').removeClass('ui-icon-gripsmall-diagonal-se-highlight');}});$("#bCamControlsResize").click(function(){if(chat.userData&&!chat.userData.isLogged){chat.addServiceMessage(__('Resize video and fullscreen only for premium members'),'alert');}});$('#bChat .historyContainer').mouseenter(function(){$('#bFontSizeTip').appendTo(this);});$('#bChat .historyContainer').mouseleave(function(){$('#bFontSizeTip').appendTo($('#bFontSizeTipHolder'));});$('#bChat').delegate('#bFontSizeTip em','mousedown',function(e){e.preventDefault();var sizes=['90%','100%','110%','120%','130%','140%','150%'];var currentSizeId=sizes.indexOf($('#bChat').data('fontSize'));if(currentSizeId===-1){currentSizeId=1;}
if($(this).is('.inc')&&undefined!=sizes[currentSizeId+1]){currentSizeId+=1;}
if($(this).is('.dec')&&undefined!=sizes[currentSizeId-1]){currentSizeId-=1;}
$('#bChat').data('fontSize',sizes[currentSizeId]);$('#bChat .history').css({fontSize:sizes[currentSizeId]});});$('#bChat').delegate('button.more_users','click',function(){$(this).remove();chat.service.showAllUsers();});$('#bMuteFreeUsers').click(function(){$('#bMuteFreeUsers').hide();chat.isFreeUsersMuted=true;$('#bUnMuteFreeUsers').show();});$('#bUnMuteFreeUsers').click(function(){$('#bUnMuteFreeUsers').hide();chat.isFreeUsersMuted=false;$('#bMuteFreeUsers').show();});if(undefined!=History&&History.enabled){History.Adapter.bind(window,'statechange',function(){var state=History.getState();var chathost=state.data.chathost;if(!chathost&&$.isEmptyObject(state.data)){location.href=state.url;}else if(chathost){if(!chat.userData||!chat.performerData||!chat.currentChathost||chat.currentChathost===chathost||!chat.onlineModelsData||!chat.onlineModelsData[chathost])return;chat.getRoom(chathost,{title:chat.onlineModelsData[chathost].display_name});}});}
$('#bLovers').click(function(){$.ajax({url:$(this).attr('action'),dataType:'json',context:this,method:'get',success:function(data){if(data.message&&data.lovers){chat.addServiceMessage(data.message,'service');$('#sLovers').html(data.lovers);}else{chat.addServiceMessage(data.message,'alert');}}})});$.openLoJPopup=function(){var $lojPopup=$('#login_or_join_popup'),$chatTab=$('.chat-tab');if(!$lojPopup.is(':visible')){if($lojPopup.length){var lPos;if(window.isRTL){lPos=$chatTab.offset().left+20;}else{lPos=$chatTab.offset().left+$chatTab.outerWidth(true)-$lojPopup.outerWidth(true)-20}
$lojPopup.css({top:$chatTab.offset().top+$chatTab.outerHeight(true)-$lojPopup.outerHeight(true)-38,left:lPos});$lojPopup.show();}}else{$lojPopup.addClass('border_red');setTimeout(function(){$lojPopup.removeClass('border_red')},1000)}};$(window).resize(function(){$('#login_or_join_popup').hide();var $header=$('#header'),headerResize=$header.data('resize');if($header.hasClass('min')&&headerResize){headerResize.checkNarrow();}});$('#login_or_join_popup').find('.popup_close').click(function(){$(this).closest('.loj_popup').hide();});var fixButtons=function(){var $buttons=$('#mls_chatconsole').find('button.with_icon'),isRemoveMinClass=false;if(!$buttons.attr('content_width')){$buttons.each(function(){if(!$(this).attr('content_width')&&!$(this).hasClass('btn_min')){$(this).attr('content_width',$(this).find('span').width()+$(this).find('div').outerWidth());}});}
$buttons.each(function(){var iw=Math.ceil(parseInt($(this).attr('content_width'))+25);if($(this).hasClass('btn_min')){if(iw<$(this).outerWidth()){$(this).removeClass('btn_min');isRemoveMinClass=true;}}else{if(iw>$(this).outerWidth()){$buttons.addClass('btn_min');return false;}}});if(isRemoveMinClass){var minCount=$buttons.filter('.btn_min').length;if(minCount&&$buttons.length>minCount){$buttons.addClass('btn_min');}}};$("#bChat").bind("onPerformerStatusChange",function(e){setTimeout(function(){fixButtons();},400)});var timeOut=null;$(window).resize(function(){if(timeOut){clearTimeout(timeOut);}
timeOut=setTimeout(function(){fixButtons();timeOut=null;},400)});},getVideoSizeRange:function(isHD){var maxWidth,minWidth;if($('#chatContainer').hasClass('vipZone')){if($('#chatContainer').hasClass('cc_small')){maxWidth=720;minWidth=560;}else if($('#chatContainer').hasClass('cc_medium')){maxWidth=960;minWidth=640;}else{maxWidth=1200;minWidth=640;}}else{if($('#chatContainer').hasClass('cc_small')){maxWidth=640;}else if($('#chatContainer').hasClass('cc_medium')){maxWidth=960;}else{maxWidth=1200;}
minWidth=448;}
if($('.chat_right_banner').length){maxWidth-=$('.chat_right_banner').width();}
return{maxWidth:maxWidth+188,minWidth:minWidth};},setVideoSize:function(){var $pane=$('#ResizablePane');if($('#bChat').hasClass('bChatModel')||!$pane.is(':visible')||$pane.hasClass('ui-resizable-resizing')||!this.performerData)return;var isHD=('hd'==this.performerData.videoQuality);var isHDChange=false;var range=this.getVideoSizeRange(isHD);if(isHD&&!$pane.hasClass('hd')){$pane.addClass('hd');isHDChange=true;}else if(!isHD&&$pane.hasClass('hd')){$pane.removeClass('hd');isHDChange=true;}
var w,h;if($pane.hasClass('ui-resizable-resized')){w=$pane.width();h=$pane.height();}
var k=isHD?0.5625:0.75;if(true==this.localData.canErlageVideo&&$pane.hasClass('ui-resizable')){$pane.resizable('option','aspectRatio',isHD?1.77777777777:1.333333333333);$pane.resizable('option','maxWidth',range.maxWidth);}
var possibleHeight=window.innerHeight-$('.bCamStatus').outerHeight()-$('bModelNavigator').outerHeight()-$('.memberBalance').height()-$('#EmbedSWFHolder').offset().top;if($pane.hasClass('vipZone')){possibleHeight-=40;}else{possibleHeight-=100;}
h=h||Math.max(possibleHeight,range.minWidth*k);w=Math.round(h/k);if(w>range.maxWidth){w=range.maxWidth;h=w*k;}
if(!$pane.hasClass('ui-resizable-resized')){var posibleWidth=window.innerWidth-$('.chat_right_banner').width()-400;if(w>posibleWidth){w=Math.max(posibleWidth,range.minWidth);h=w*k;}}
$('#EmbedSWFHolder, #ResizablePane').css({width:w+'px',height:h+'px'});if(isHDChange&&$('#chatContainer').hasClass('vipZone')&&($('#chatContainer').hasClass('cc_small')||$('#chatContainer').hasClass('cc_medium'))){this.checkSendInputPostion();}},changeHeightHeader:function(){var $blocks=$('#header, .confirm_email_box');},setChatHeight:function(height){this.setVideoSize();if('MobileChatService'==this.service.name){$('#display, #displayHLS, #stream-container').width($('#EmbedSWFHolder').width());$('#display, #displayHLS, #stream-container').height($('#EmbedSWFHolder').height()-($('#chatContainer').hasClass('vipZone')?0:$('#bVideoControlPanel').height()));}
if($('#bChatPromt').length){var left=$('#bChat .history:visible').offset().left;var width=$('#bChat .history:visible').width();$('#bChatPromt').css({left:(left+(!window.isRTL?0:40))+'px',width:(width-12)+'px'});}
var h=height||this.calculateChatHeight();var usersH=h;if($('#bChat').hasClass('bChatModel')){usersH+=50;}
$('#bChat .users').css('height',usersH+'px');$('#bChat .history').css('height',h+'px');chat.adjustDMCASecurityIcon();if('MobileChatService'==this.service.name){$('#bChat').triggerHandler('onVideoSizeChange');}},getChatHeight:function(){return $('.history:visible').height()+$('.inputContainer:visible').height();},calculateChatHeight:function(){var h;if($('#bChat').hasClass('bChatModel')){h=($(window).height()-$('td.topic').height()-$('.inputContainer:visible').height()-$('#bChatStatus').height()-$('#bChatRoomTitle').height()-$('#bChat').offset().top*2-10);}else{h=$('#EmbedSWFHolder').height()-62;if($('#chatContainer').hasClass('vipZone')){h-=113;}
if(chat.userData.role=='moderator'){h-=68;}}
return h;},addMessage:function(message,$history){if($history.find('p').length>this.chatHistoryLength){$history.find('p:first').remove();}
$history.append(message);$history.scrollTop($history[0].scrollHeight);if(!this.isPerformer&&this.isPaidShow==true){this.service.updateHistory($history.html());}},createUserListItem:function(pUserData){var $item=$('<div class="user_item '+pUserData.role+'" username="'+pUserData.username+'"></div>');var userElements='';if(pUserData.profileAvatarUrl||pUserData.profileAvatarData){userElements+='<span class="icon_avatar"><img class="profile" src="'+this.buildAvatarUrl(pUserData)+'"/></span>';}
if(pUserData.isMobile){userElements+='<span class="icon_mobile"></span>';}
userElements+='<dfn>'+pUserData.displayName+'</dfn>';if(pUserData.hasStream){if(pUserData.isPerformer){userElements+='<span class="icon_webcam"></span>';}else if(pUserData.username==this.userData.username||(this.userData.isPerformer||this.userData.role=='moderator')){userElements+='<span class="icon_webcam"></span>';}}
else if(pUserData.userId&&!pUserData.isPerformer){this.closeMemberCam(pUserData.userId);}
if(this.userData.isPerformer){var balance=this.getUserBalance(pUserData);if(balance){userElements+='<br/><span class="balance">'+balance+'</span>';}
var tippedIcon='';if(pUserData.isTipped){userElements+='<img class="tipper" src="'+this.options.baseUrl+'/images/chat/icon_coin.png" title="'+__('%username% has already tipped you',{username:pUserData.displayName},false)+'!" />';}}
userElements+='<br clear="all"/>';var addIcons='';if(pUserData.accessLevel&&true===pUserData.isPayable){addIcons='<img class="ms" src="'+this.options.baseUrl+'/images/chat/ms_'+pUserData.accessLevel+'.png" title="'+__('%username% has %type% membership',{username:pUserData.displayName,type:pUserData.accessLevel},false)+'!" />';if(pUserData.isVip){$item.addClass('member_vip');addIcons+='<img class="vip" src="'+this.options.baseUrl+'/images/chat/vip.png" title="'+__('%username% has VIP status',{username:pUserData.displayName},false)+'!" />';}}
$item.append('<span class="td td_user">'+userElements+'</span><span class="td td_last"> '+addIcons+'</span><br clear="all"/>');if((this.userData.isPerformer||this.userData.role=='moderator')&&pUserData.isMuted){$item.find('dfn').css('text-decoration','line-through');}
if(pUserData.accessLevel){$item.addClass('member_'+pUserData.accessLevel);}
if(pUserData.fontStyle){$item.find('dfn').css(pUserData.fontStyle);}
$item.data('userData',pUserData);if(pUserData.isLogged){$item.click(function(){if('undefined'==typeof $.activeFriendIds&&$.isFunction($.getActiveFriendIds)){var self=this;$.getActiveFriendIds(function(){chat.createContextMenu($(self))});}else{chat.createContextMenu($(this));}});}
return $item;},createUserListHeader:function(total){var $item;if(this.userData.isPerformer){$item=$('<div class="head"></div>').append('<span class="td td_user">'+__('Chat Users')+' ('+total+')</span><span class="td td_tokens">'+__('Tokens')+'</span><span class="td td_last">*</span><br clear="all"/>');}else{$item=$('<div class="head">'+__('Chat Users')+' ('+total+')</div>');}
return $item;},createContextMenu:function($target){$('.contextMenu').remove();var isDesktopApp=$('#bChatDesktopApp').length?true:false;var self=this;var _userData=$target.data('userData');var cmClass='contextMenu';if(self.userData.role=='model'){cmClass+=' rounded';}else{cmClass+=' menu_v2';}
var $contextMenu=$('<ul class="'+cmClass+'"></ul>').attr('id','context_menu_'+_userData.username).append('<li class="title">'+_userData.displayName+'</li>');if(self.userData.role=='member'){$contextMenu=self.contextMenuAddUserDetails($contextMenu,_userData);}
var addPrivateDisabledClass='';if(self.userData.isLogged&&self.userData.username!=_userData.username){if(!self.canSendPM(_userData)){addPrivateDisabledClass=' disabled';}
if(isDesktopApp&&addPrivateDisabledClass!=''){$contextMenu.append('<li class="private'+addPrivateDisabledClass+'"><span>'+__('Private Message')+'</span></li>');}else{$contextMenu.append('<li class="private'+addPrivateDisabledClass+'"><a href="'+(isDesktopApp?'#':'javascript:void(0)')+'">'+__('Private Message')+'</a></li>');}
$contextMenu.find('.private:not(.disabled) a').bind('click',function(){self.debug('Private Message: '+_userData.username);$.openDialogWithUser(_userData.userId);});}
if(_userData.profileUrl){if(!isDesktopApp){$contextMenu.append('<li class="profile"><a href="'+_userData.profileUrl+'" target="_blank">'+__('View Profile')+'</a></li>');}else{$contextMenu.append('<li class="profile"><a href="'+_userData.profileUrl+'">'+__('View Profile')+'</a></li>');}}
if(self.userData.isLogged){if(self.userData.username!=_userData.username){if((self.userData.isPerformer||self.userData.role=='moderator')&&_userData.role!='moderator'&&!_userData.isPerformer){$contextMenu.append('<li class="kick"><a href="'+(isDesktopApp?'#':'javascript:void(0)')+'">'+__('Kick User')+'</a></li>');$contextMenu.append('<li class="ban"><a href="'+(isDesktopApp?'#':'javascript:void(0)')+'">'+__('Ban User')+'</a></li>');$contextMenu.append('<li class="mute"><a href="'+(isDesktopApp?'#':'javascript:void(0)')+'">'+(_userData.isMuted?__('Un-Mute User'):__('Mute User'))+'</a></li>');$contextMenu.find('.kick a').bind('click',function(){self.debug('Kick: '+_userData.username);self.service.blockUser(_userData.username,_userData.userId);$('#context_menu_'+_userData.username).remove();if($target.is('.user_item')){$target.remove();}});$contextMenu.find('.ban a').bind('click',function(){self.debug('Ban: '+_userData.username);try{$.banUser(_userData.userId,!self.userData.isPerformer?self.userData.chathostData.userId:self.userData.userId);self.service.blockUser(_userData.username,_userData.userId,true);if(self.userData.performerData){if(!$.isArray(self.userData.performerData.bannedIds)){self.userData.performerData.bannedIds=new Array();}
self.userData.performerData.bannedIds.push(_userData.userId.toString());}}catch(e){}
$('#context_menu_'+_userData.username).remove();if($target.is('.user_item')){$target.remove();}});$contextMenu.find('.mute a').bind('click',function(){self.debug('Mute: '+_userData.username);self.service.muteUser(_userData.clientId,_userData.username,_userData.isMuted?false:true);});$target.find('dfn').dblclick(function(){$.openDialogWithUser(_userData.userId);});}
if(_userData.role!='moderator'){$contextMenu.append('<li class="ignore"><a href="'+(isDesktopApp?'#':'javascript:void(0)')+'">'+(self.isIgnored(_userData.username)?__('Remove Ignore'):__('Ignore User'))+'</a></li>');$contextMenu.find('.ignore a').bind('click',function(){self.debug('Ignore: '+_userData.username);self.ignoreUser(_userData.username);});}
if(self.canAddFriend(_userData)){$contextMenu.append('<li class="friend"><a href="'+(isDesktopApp?'#':'javascript:void(0)')+'">'+__('Add to Friends')+'</a></li>');$contextMenu.find('.friend a').bind('click',function(){self.debug('Add friend: '+_userData.username);self.addFriend(_userData);$contextMenu.find('li.friend').remove();});}}
if($target.is('dfn')){if((self.userData.username==_userData.username||(self.userData.isPerformer||self.userData.role=='moderator')&&_userData.role!='moderator')){$contextMenu.append('<li class="delete_message separator"><a href="'+(isDesktopApp?'#':'javascript:void(0)')+'">'+__('Delete Message')+'</a></li>');$contextMenu.find('.delete_message a').bind('click',function(){if(confirm(__("Are you sure to delete this message")+'?')){var messageId=$target.closest('.message').attr('id').substring(1);self.debug('Delete message: '+_userData.username+', id='+messageId);try{self.service.deleteMessage(_userData.username,messageId);}catch(e){}}});}
if(self.userData.role=='moderator'&&!_userData.isPerformer&&_userData.role!='moderator'&&_userData.userId){$contextMenu.append('<li class="delete_and_ban"><a href="javascript:void(0)">'+__('Delete & Ban')+'</a></li>');$contextMenu.find('.delete_and_ban a').bind('click',function(){if(confirm("Are you sure to delete?\n"+_userData.username+" has been kicked and disabled")){var messageId=$target.closest('.message').attr('id').substring(1);self.debug('Delete & Ban: '+_userData.username);self.service.blockUser(_userData.username,_userData.userId,false,true,$target.parent().find('.msg').text());}});}}}
if(self.userData.role=='moderator'&&_userData.isPerformer){$contextMenu.append('<li class="kick separator"><a href="javascript:void(0)" style="color:red">'+__('Close session')+'</a></li>');$contextMenu.find('.kick a').bind('click',function(){self.debug('Kick: '+_userData.username);try{self.service.blockUser(_userData.username,_userData.userId);}catch(e){}
$('#context_menu_'+_userData.username).remove();if($target.is('.user_item')){$target.remove();}});}
if(self.userData.role!='member'){$contextMenu=self.contextMenuAddUserDetails($contextMenu,_userData);}
if(self.userData.isLogged&&self.userData.username!=_userData.username){if(_userData.hasStream&&!_userData.isPerformer&&(self.userData.isPerformer||self.userData.role=='moderator')){$contextMenu.append('<li class="cam2cam separator"><a href="#" onclick="return false">'+__('View cam')+'</a></li>');$contextMenu.find('.cam2cam a').bind('click',function(){self.debug('Cam2cam: '+_userData.username);self.memberCamPopup(_userData);});}}
$contextMenu.appendTo('body').data('userData',_userData);var pos;if($('#bChat').hasClass('bChatModel')){pos={left:$target.offset().left-6+'px',top:$target.offset().top+$target.height()+14+'px'}}else{var lPos,isModelList=$('.modelUsers').is(':visible'),lIndent=isModelList?150:40,tIndent=isModelList?5:-5;if(isModelList&&_userData.accessLevel=='free'){tIndent=-3;}
if(window.isRTL){lPos=$target.offset().left+$target.outerWidth(true)-$contextMenu.outerWidth(true)-lIndent;}else{lPos=$target.offset().left+lIndent;}
pos={left:lPos+'px',top:$target.offset().top+tIndent+'px'}}
$contextMenu.css(pos).show();$target.addClass('user_item_selected');setTimeout(function(){$('body').bind('click.contextMenu',function(e){$target.removeClass('user_item_selected');$contextMenu.remove();$('body').unbind('.contextMenu');if(isDesktopApp&&!$(e.target).parent('li.profile').length){return false;}});},0);},contextMenuAddUserDetails:function($contextMenu,_userData){var self=this;if(_userData.invisible&&_userData.username!=self.userData.username&&self.userData.role!='moderator'){return $contextMenu;}
$contextMenu.append('<li class="separator"><p class="details">'+__('User Details')+'</p></li>');if(_userData.accessLevel){$contextMenu.append('<li><p>'+__('Membership')+': '+_userData.accessLevel+'</p></li>');}
if(_userData.isLogged){$contextMenu.append('<li'+(self.userData.role=='member'?' class="separator_bottom"':'')+'><p>'+__('Member since')+': '+_userData.signupDate+'</p></li>');}
if((self.userData.isPerformer||self.userData.role=='moderator')){if(!_userData.isPerformer){$contextMenu.append('<li><p>'+__('Balance')+': '+self.getUserBalance(_userData)+'</p></li>');}
if(self.userData.role=='moderator'||!_userData.isPerformer){$contextMenu.append('<li><p>'+__('Location')+': '+(_userData.location||'N/A')+'</p></li>');}}
return $contextMenu;},memberCamPopup:function(memberData){if($('#bChatDesktopApp').length){var popupName='cam'+memberData.userId,$camPopup=$('#'+popupName);if((!$camPopup.length||!$camPopup.hasClass('is_init'))&&typeof CamPopup=='function'){var popup=new CamPopup({popupName:popupName,popupTitle:memberData.displayName,camUrl:memberData.myCamUrl,ajax:true,multiple:true});$camPopup=$('#'+popupName);$camPopup.data('popup',popup);$camPopup.data('popup').openCamPopup();return false;}
if($camPopup.data('popup')){$camPopup.data('popup').makeCamPopipIsActive();}}else{$.open.newWindow(memberData.myCamUrl,{windowName:'cam'+memberData.userId,width:320,height:240,left:(($(window).width()-320)/2),top:(($(window).height()-240)/2),scrollbars:false},{});}},closeMemberCam:function(memberId){if(!memberId)return;if($.open.windowMap['cam'+memberId]){$.open.windowMap['cam'+memberId].close();}},checkSendInputPostion:function(){if($('#bChat .tdSendInput').width()<300&&$('#bChat .tdSendInput').find('#bSendInputHolder').length){$('#bChat .inputContainer').first().prepend($('#bSendInputHolder'));$('#bChat .users, #bChat .history').css('height',$('#bChat .history').height()-30+'px');}else if(!$('#bChat .tdSendInput').find('#bSendInputHolder').length){$('#bSendInputHolder').appendTo($('#bChat .tdSendInput'));$('#bChat .users, #bChat .history').css('height',$('#bChat .history').height()+30+'px');}}});})(jQuery);
var SwfChatService=function(id){var id=id;var swf=function(){if(navigator.appName.indexOf("Microsoft")!=-1){return window[id];}
else{return document[id];}}
return{name:"SwfChatService",getSwf:function(){return swf();},getRoom:function(chathost){try{swf().getRoom(chathost);}catch(e){}},closeRoom:function(){},sendMessage:function(message,chatType){try{swf().sendMessage(message,chatType);}catch(e){}},sendPrivateMessage:function(message,username){try{swf().sendMessage(message,username);}catch(e){}},updateHistory:function(history){try{swf().updateHistory(history);}catch(e){}},addServiceMessage:function(message){try{swf().addServiceMessage(message);}catch(e){}},blockUser:function(username,userId,isBan,deleteHistory,ourReason){try{swf().blockUser(username,userId,isBan,deleteHistory,ourReason);}catch(e){}},muteUser:function(username,userId,isMute){try{swf().muteUser(username,userId,isMute);}catch(e){}},deleteMessage:function(username,messageId){try{swf().deleteMessage(username,messageId);}catch(e){}},muteVideo:function(val){try{swf().muteVideo(val);}catch(e){}},muteAudio:function(val){try{swf().muteAudio(val);}catch(e){}},showVolumeSlider:function(val){try{swf().showVolumeSlider(val);}catch(e){}},addFriend:function(userData){try{swf().addFriend(userData);}catch(e){}},confirmFriend:function(userData){try{swf().confirmFriend(userData);}catch(e){}},applyFriend:function(clientId){try{swf().applyFriend(clientId);}catch(e){}},removeFriend:function(userData){try{swf().removeFriend(userData);}catch(e){}},showAllUsers:function(){try{swf().showAllUsers();}catch(e){}},showUserList:function(v){try{swf().showUserList(v);}catch(e){}},sendShowRequest:function(data){try{swf().sendShowRequest(data);}catch(e){}},tipModel:function(value,desireId){try{swf().tipModel(value,desireId);}catch(e){}},setFontStyle:function(style){try{swf().setFontStyle(style);}catch(e){}},shareMyCam:function(val){try{swf().shareMyCam(val);}catch(e){}},gotoPrivateChat:function(isFull){try{swf().gotoPrivateChat(isFull);}catch(e){}},gotoGroupChat:function(){try{swf().gotoGroupChat();}catch(e){}},gotoVoyeur:function(){try{swf().gotoVoyeur();}catch(e){}},stopPaidShow:function(){try{swf().stopPaidShow();}catch(e){}},removeAcceptGroupChat:function(){try{swf().removeAcceptGroupChat();}catch(e){}}}};
(function($){$.extend(chat,{isPaidShow:false,paidShowId:null,acceptedPaidShow:false,initiatedPaidShow:false,buyTokensPopup:function(){if(!this.userData.isLogged){this.signupPopup();return false;}else if(this.userData.role!='member'){this.addServiceMessage(__('Only members can buy tokens'),'alert');return false;}
if(!$.mobile){$('#bBuyTokens').click();}else{if($('#buy_tokens').length){$.mobile.changePage('#buy_tokens',{transition:'none'});}else{location.href=$('#bBuyTokens').attr('href');}}
return false;},buyVipPopup:function(vipPopupAttrName){if(!this.userData.isLogged){this.signupPopup();return false;}else if(this.userData.role!='member'){this.addServiceMessage(__('Only members can become a vip'),'alert');return false;}
var $bBuyVipTrigger;if(!$.mobile){$bBuyVipTrigger=$('#bBuyVip');}else{$bBuyVipTrigger=$('.rel_buy_vip:first a');}
if(vipPopupAttrName&&$bBuyVipTrigger.attr(vipPopupAttrName)){$bBuyVipTrigger.attr('href',$.updateQueryStringParameter($bBuyVipTrigger.attr('href'),'vpop',$bBuyVipTrigger.attr(vipPopupAttrName)));}else{$bBuyVipTrigger.attr('href',$.updateQueryStringParameter($bBuyVipTrigger.attr('href'),'vpop',null));}
if(!$.mobile){$bBuyVipTrigger.click();}else{location.href=$bBuyVipTrigger.attr('href');}
return false;},signupPopup:function(showCloseButton){if($('#login_or_join_popup').length&&typeof $.openLoJPopup=='function'){$.openLoJPopup();return false;}
if($('#bSignup').attr('rel')!='signup'){window.open($('#bSignup').attr('href'));return false;}
if($('#member_join_popup').length){$.showSignupPopup(showCloseButton||false);}else{$('#bSignup').click();}
return false;},tipPopup:function(desireId){if(!this.userData.isLogged){this.signupPopup();this.addServiceMessage(__('Tip feature only for premium members'),'alert');return false;}
else if(this.userData.role!='member'){this.addServiceMessage(__('Tip feature only for premium members'),'alert');return false;}
else if(!this.userData.isPayable){this.addServiceMessage(__('Tip feature only for premium members')+'. '+__('To become a premium (GOLD) member for life and unlock this feature, all you have to do is buy any amount of tokens one time!'),'alert');this.buyTokensPopup();return false;}
$('#bTipModel').click();if(desireId){$('#bTipModel').attr('desireid',desireId)}
return false;},paidShowPopup:function(isGroup){var popId=$('#chatContainer').hasClass('vipZone')?'bPaidPop':(!isGroup?'bPaidPopPrivate':'bPaidPopGroup');$('#'+popId).show();$('body').unbind('.'+popId);setTimeout(function(){$('body').bind('click.'+popId,function(e){var $clicked=$(e.target);if(!($clicked.is('#'+popId)||$clicked.is('.fancybox-close')||$('.fancybox-opened').length||$clicked.parents('#'+popId).length||$clicked.parents(!isGroup?'#bGotoPrivate':'#bGotoGroup').length)){$('#'+popId).hide();$('body').unbind('.'+popId);}});},0);return false;},paidShowDecline:function(reason){this.isGroupChatInvited=false;this.isGroupChatInitialized=false;this.isGroupChatMembersReady=false;this.initiatedPaidShow=false;this.addServiceMessage(reason,'alert');if($(reason).is('.payment_disabled')){this.buyTokensPopup();}},setBalance:function(balance){this.userData.balance=balance;$('#bTokens').html($.formatNumber(balance));var $globalTokens=$('span.notify.tokens_amount');if($globalTokens.length){$globalTokens.find('span').html($.formatNumber(balance));}},upgradeFreeMember:function(level){this.userData.accessLevel=level;this.userData.isPayable=true;},onPaidShowStart:function(type){this.debug('*** onPaidShowStart','type='+type,'performerStatus='+this.performerStatus);this.isPaidShow=true;this.currentShowType=type;this.currentChatType='private-chat';$("#bChat").triggerHandler('onPaidShowStart',type);$('#public-chat').data('history',$('#public-chat .history').html());$('#public-chat').attr('id',this.currentChatType).find('.history').html('');switch(type){case'fullprivate':this.addServiceMessage(__('Welcome %username% you have entered to full private chat',{username:this.userData.displayName})+'!','fullprivateChatWelcome');break;case'private':this.addServiceMessage(__('Welcome %username% you have entered to private chat',{username:this.userData.displayName})+'!','privateChatWelcome');break;case'vip':this.addServiceMessage(__('Welcome %username% you have entered to VIP Show',{username:this.userData.displayName})+'!','vipChatWelcome');break;case'group':this.addServiceMessage(__('Welcome %username% you have entered to group chat',{username:this.userData.displayName})+'!','groupChatWelcome');break;case'voyeur':this.disableChatInput();this.addServiceMessage(__('Welcome %username% you have entered to spy mode',{username:this.userData.displayName})+'!','voyeurWelcome');break;}},onPaidShowStop:function(reason,changeRoom){if(!this.isPaidShow)return;this.debug('*** onPaidShowStop','reason='+reason,'changeRoom='+changeRoom,'performerStatus='+this.performerStatus);$('#private-chat').attr('id','public-chat');this.currentChatType='public-chat';this.currentShowType='public';this.paidShowId=null;this.isPaidShow=false;this.acceptedPaidShow=false;this.initiatedPaidShow=false;this.isGroupChatInvited=false;this.isGroupChatInitialized=false;this.isGroupChatMembersReady=false;$("#bChat").triggerHandler('onPaidShowStop',[reason,changeRoom]);this.enableChatInput();if(reason){this.addServiceMessage(__(reason,{modelname:this.performerData.displayName}),'alert');}},cancelShowRequest:function(e){var $promt=$(e).parent();var data=$promt.data('showRequest');data.status='cancel';this.service.sendShowRequest(data);$promt.remove();return false;},onGroupShowResponse:function(status){if(status=='decline'){this.isGroupChatInvited=false;this.isGroupChatInitialized=false;this.isGroupChatMembersReady=false;}
else if(status=='accept'&&this.isGroupChatInvited){this.acceptedPaidShow='group';$("#bChat").triggerHandler('onPaidShowAccepted',this.acceptedPaidShow);}},onShowRequest:function(data){this.debug('--- ShowRequest',data);if(data.status=='cancel'){return;}
var message='';var $promt=$('#bChatPromt .'+data.type);if(!$promt.length){$promt=$('<p/>').addClass(data.type);$promt.data('showRequest',data);}else{$promt.find('p:first');}
var showType=data.type;if('fullprivate'==showType){showType='full private';}
if(data.status=='accept'){$promt.remove();this.acceptedPaidShow=data.type;$("#bChat").triggerHandler('onPaidShowAccepted',this.acceptedPaidShow);return;}
else if(data.status=='request'){message=__('%modelname% has been notified about your '+showType+' chat request',{modelname:this.performerData.displayName})+'!';message+=' '+__('You will be placed into a '+showType+' chat as soon as %modelname% accepts your request',{modelname:this.performerData.displayName})+'.';message+=' '+__('If your request is denied, we will let you know here')+'! <a href="javascript:void(0)" onclick="return chat.cancelShowRequest(this)">['+__('Cancel request')+'.]</a>';}
else if(data.status=='decline'){message=__('%modelname% has declined your '+showType+' chat request',{modelname:this.performerData.displayName})+'. <a href="javascript:void(0)" onclick="return chat.hidePromt(this)">['+__('Hide this prompt')+'.]</a>';}
$promt.html(message);this.showPromt($promt);},onTip:function(user,amount,desireId){if(this.performerData){var message=__('%username% has tipped %modelname% %amount% tokens',{username:user.displayName,modelname:this.performerData.displayName,amount:amount})+'!';this.addServiceMessage(message,'tip_success',this.currentChatType,{from:user.displayName,amount:amount});}},onTipResult:function(result){var self=this;if('success'==result.status){if(result.amount>=500){setTimeout(function(){var history=$('#bChat div.history').clone();history.find('p').each(function(){if(!($(this).hasClass('message')||$(this).hasClass('tip_success'))){$(this).remove();}});var data={history:history.html(),users:$('#bChat div.users').clone().html()};$.post($('#chatContainer').attr('xnr-screen-url'),{performer:self.performerData.userId,data:data});},3*1000);}}else{this.addServiceMessage(result.description,'tip_'+result.status);if($(result.description).is('.payment_disabled')){this.buyTokensPopup();}}},onVideoStreamLimit:function(isPremiumlimit){var self=this;setTimeout(function(){var message=__('You have been reached daily video stream limit');if(!self.userData.isLogged){if(!isPremiumlimit)
message=__('You have reached the daily video stream limit allowed to guests')+'. <a href="javascript:void(0)"  onclick="return chat.signupPopup(true)">'+__('Sign up for a 100% FREE account')+'</a> '+__('to continue watching')+'!';else
message=self.performerData.displayName+' '+__('shows your cam for premium members only')+'. <a href="javascript:void(0)"  onclick="return chat.signupPopup(true)">'+__('Sign up for a 100% FREE account')+'</a> '+__('to continue watching')+'!';}else{if(!isPremiumlimit)
message=__('You have reached the daily video stream limit allowed to free members')+'. <a href="javascript:void(0)" onclick="return chat.buyTokensPopup(this)">'+__('Buy some tokens')+'</a> '+__('and your account will be upgraded to GOLD status for life. GOLD members can enjoy unlimited video chat with all of our models')+'.';else
message=self.performerData.displayName+' '+__('shows your cam for premium members only')+'. <a href="javascript:void(0)" onclick="return chat.buyTokensPopup(this)">'+__('Buy some tokens')+'</a> '+__('and your account will be upgraded to GOLD status for life. GOLD members can enjoy unlimited video chat with all of our models')+'.';}
self.addServiceMessage(message,'alert video_limit_alert');},1000);$("#bChat").triggerHandler('onVideoStreamLimit',isPremiumlimit);},onFreeChatMessageLimit:function(chatboxId){var msg=this.localData.dailyMessagesLimit===0?__('We are sorry but FREE members are temporarily muted by model'):__('You have reached the chat limit allowed to free members');msg+='. <a href="javascript:void(0)" onclick="return chat.buyTokensPopup(this)">'+__('Buy some tokens')+'</a> '+__('and begin chatting with your favorite models')+'!';if(chatboxId){this.addMessage('<p class="alert">'+msg+'</p>',$("#chatbox_"+chatboxId+" .history"));}else{this.addServiceMessage(msg,'alert guest_chat_alert');}},vipZoneMessageLimit:function(){this.addServiceMessage(__('Only VIP members have access to Vip Zone Chat')+'. '+__('To chat with a model you need to invite her into a %l1%Private Chat%l2% or %a1%buy yourself a VIP status%a2%',{l1:'<a href="javascript:void(0)" onclick="return chat.paidShowPopup()">',l2:'</a>',a1:'<a href="javascript:void(0)" onclick="return chat.buyVipPopup()">',a2:'</a>'})+'.','alert');},fullPrivateMessageLimit:function(){this.addServiceMessage(__('%modelname% is in full private chat now. Only a user in this modelâs private room can communicate with her via chat now. If you still want to send message to %modelname%, you can do it using Message Center, but only if this model gave users permission to send her messages.',{modelname:chat.performerData.displayName}),'alert');},onVideoLayoverClick:function(type){if(type=='limit'){this.buyTokensPopup();}
else if(type=='vip'){this.buyVipPopup();}},shareMyCam:function(value){if(!this.userData.isLogged){this.addServiceMessage(__('Webcam feature only for premium members'),'alert');this.signupPopup();return false;}else if(this.userData.role!='member'){this.addServiceMessage(__('Webcam feature only for premium members'),'alert');return false;}
else if(!this.userData.isPayable){this.addServiceMessage(__('Webcam feature only for premium members')+'. '+__('To become a premium (GOLD) member for life and unlock this feature, all you have to do is buy any amount of tokens one time!'),'alert');this.buyTokensPopup();return false;}
var $controls=$('#bShareCamControls'),$on=$controls.find('.on'),$off=$controls.find('.off'),$camPopup=$('#member_cam_popup');if(value){$on.hide();$off.show();}else{$on.show();$off.hide();}
if((!$camPopup.length||!$camPopup.hasClass('is_init'))&&typeof CamPopup=='function'){var popup=new CamPopup({popupName:'member_cam_popup',camUrl:$on.attr('url'),ajax:true});$camPopup=$('#member_cam_popup');$camPopup.data('popup',popup);}
if($camPopup.data('popup')){if(value){$camPopup.data('popup').openCamPopup();}else{$camPopup.data('popup').closeCamPopup();}}
this.service.shareMyCam(value);return false;},gotoPrivateChat:function(isFull){if(!this.userData.isLogged){this.addServiceMessage(__('Private chat only for premium members'),'alert');this.signupPopup();return false;}else if(this.userData.role!='member'){this.addServiceMessage(__('Private chat only for premium members'),'alert');return false;}else if(!this.chatSettings.allowPrivateChat){this.addServiceMessage(__('Private chat is disabled by model'),'alert');return false;}else if(!this.userData.isPayable){this.addServiceMessage(__('Private chat only for premium members')+'. '+__('To become a premium (GOLD) member for life and unlock this feature, all you have to do is buy any amount of tokens one time!'),'alert');this.buyTokensPopup();return false;}
if(!this.userData.isLogged||this.isPaidShow||!this.chatSettings.allowPrivateChat||this.performerStatus=='private'||this.performerStatus=='fullprivate'||this.performerStatus=='group')return false;if(this.checkMemberJoinPaidChat(true==isFull?'fullprivate':'private')){this.service.gotoPrivateChat(isFull);}
return false;},gotoGroupChat:function(){if(!this.userData.isLogged){this.addServiceMessage(__('Group chat only for premium members'),'alert');this.signupPopup();return false;}else if(this.userData.role!='member'){this.addServiceMessage(__('Group chat only for premium members'),'alert');return false;}else if(!this.chatSettings.allowGroupChat){this.addServiceMessage(__('Group chat is disabled by model'),'alert');return false;}else if(!this.userData.isPayable){this.addServiceMessage(__('Group chat only for premium members')+'. '+__('To become a premium (GOLD) member for life and unlock this feature, all you have to do is buy any amount of tokens one time!'),'alert');this.buyTokensPopup();return false;}
if(!this.userData.isLogged||this.isPaidShow||this.isGroupChatInvited||!this.chatSettings.allowGroupChat||this.performerStatus=='private')return false;$('.acceptGroupChat').remove();if(this.checkMemberJoinPaidChat('group')){this.service.gotoGroupChat();}
return false;},gotoVoyeur:function(){if(!this.userData.isLogged){this.addServiceMessage(__('Spy show feature only for premium members'),'alert');this.signupPopup();return false;}else if(this.userData.role!='member'){this.addServiceMessage(__('Spy show feature only for premium members'),'alert');return false;}else if(!this.userData.isPayable){this.addServiceMessage(__('Spy show feature only for premium members')+'. '+__('To become a premium (GOLD) member for life and unlock this feature, all you have to do is buy any amount of tokens one time!'),'alert');this.buyTokensPopup();return false;}
if(!this.userData.isLogged||this.isPaidShow||false==(this.performerStatus=='private'))return false;if(this.checkMemberJoinPaidChat('voyeur')){this.service.gotoVoyeur();$('#bPaidButtonGroup').removeClass('sv-grid-33 sv-grid-50 hide-first hide-middle').addClass('sv-grid-50 hide-first');}
return false;},stopPaidShow:function(reason){this.debug('*** stopPaidShow',reason);this.service.stopPaidShow(reason);},removeAcceptGroupChat:function(){this.debug('removeAcceptGroupChat');this.service.removeAcceptGroupChat();},checkMemberJoinPaidChat:function(type){if(true==this.userData.isPaymentsDisabled){this.addServiceMessage(__('We are sorry, but your spendings has been temporarily suspended')+'. <a href="javascript:void(0)" onclick="return chat.buyTokensPopup(this)" class="payment_disabled">'+__('Click to more details')+'.</a>','alert');return false;}
var chatType=type.charAt(0).toUpperCase()+type.slice(1);var canJoin=false;var price=0;var sMessage1='';var sMessage2='';var sMessage3='';if(type=='group'){canJoin=((this.userData.balance/(this.localData.groupChatTokensPerMinute))>0.5);price=this.localData.groupChatTokensPerMinute;sMessage1=__('We are sorry, but you do not have enough tokens for a group chat');sMessage2=__('You need enough tokens for at least 30 seconds of chat');sMessage3=__('Group chat costs %price% tokens per minute',{price:price});}else if(type=='private'){canJoin=((this.userData.balance/(this.localData.privateChatTokensPerMinute))>0.5);price=this.localData.privateChatTokensPerMinute;sMessage1=__('We are sorry, but you do not have enough tokens for a private chat');sMessage2=__('You need enough tokens for at least 30 seconds of chat');sMessage3=__('Private chat costs %price% tokens per minute',{price:price});}else if(type=='fullprivate'){canJoin=((this.userData.balance/(this.localData.fullPrivateChatTokensPerMinute))>0.5);price=this.localData.fullPrivateChatTokensPerMinute;sMessage1=__('We are sorry, but you do not have enough tokens for a full private chat');sMessage2=__('You need enough tokens for at least 30 seconds of chat');sMessage3=__('Full Private chat costs %price% tokens per minute',{price:price});}else if(type=='voyeur'){canJoin=((this.userData.balance/(this.localData.voyeurShowTokensPerMinute))>0.5);price=this.localData.voyeurShowTokensPerMinute;sMessage1=__('We are sorry, but you do not have enough tokens for a spy this show');sMessage2=__('You need enough tokens for at least 30 seconds of show');sMessage3=__('Spy show costs %price% tokens per minute',{price:price});}
if(!canJoin){this.addServiceMessage(sMessage1+'.<br/>'+sMessage2+'.<br/>'+sMessage3+" <a href='javascript:void(0)' onclick='return chat.buyTokensPopup(this)'>"+__('Click here to buy more')+'!</a>','alert');}
return canJoin;},sendPM:function(){var __sendPM=function(){var message=$('#bChat .sendInput').attr('value');if(message!=''){$.openDialogWithUser(chat.performerData.userId,message);$('#bChat .sendInput').val('');}else{$.openDialogWithUser(chat.performerData.userId);}
return false;};if(this.userData.isLogged&&(this.userData.role=='moderator'||(this.userData.accessLevel=='platinum'||this.userData.accessLevel=='unlimited'))){return __sendPM();}
if(!this.userData.isLogged){this.addServiceMessage(__('Private messaging only for premium members'),'alert');this.signupPopup();return false;}
else if(this.userData.role=='member'&&!this.userData.isPayable){this.addServiceMessage(__('Private messaging only for premium members')+'. '+__('To become a premium (GOLD) member for life and unlock this feature, all you have to do is buy any amount of tokens one time!'),'alert');this.buyTokensPopup();return false;}
else if(this.userData.role!='member'){this.addServiceMessage(__('Only members can private messaging'),'alert');return false;}
if(this.chatSettings.privateMessageSettings){if(this.chatSettings.privateMessageSettings=='all'){if(this.userData.balance<this.chatSettings.privateMessageMinTokens){this.addServiceMessage(__('Private messaging required more tokens on your account'),'alert');return false;}}
else if(this.chatSettings.privateMessageSettings=='disabled'){this.addServiceMessage(__('Private messaging is disabled by model'),'alert');return false;}
else if(this.chatSettings.privateMessageSettings=='friends'){var __isFriendCheck=function(){if(chat.isFriend(chat.performerData)){if(chat.userData.balance<chat.chatSettings.privateMessageMinTokens){chat.addServiceMessage(__('Private messaging required more tokens on your account'),'alert');return false;}
return __sendPM();}else{chat.addServiceMessage(__('Only friends can private messaging'),'alert');return false;}};if('undefined'==typeof $.activeFriendIds&&$.isFunction($.getActiveFriendIds)){$.getActiveFriendIds(__isFriendCheck);return false;}else{return __isFriendCheck();}}}
return __sendPM();},addPerformerFriend:function(){if(!this.userData.userId){this.signupPopup();return false;}
$("#TopMenuAddFriend").hide();$('#context_menu_'+this.performerData.username).find('li.friend').remove();this.addFriend(this.performerData);return false;},tipModel:function(value,desireId){this.debug('tipModel',value,'desireId='+desireId);if(this.performerStatus=='fullprivate'&&!this.isPaidShow){this.addServiceMessage(__('%modelname% is in full private chat. Only a user in this modelâs private room can tip via chat now. If you still want to tip %modelname%, please, use Message Center.',{modelname:chat.performerData.displayName}),'alert');return false;}
this.service.tipModel(value,desireId);return false;},setFontStyle:function(style){if(this.userData.accessLevel=='platinum'||this.userData.accessLevel=='unlimited'){this.userData.fontStyle=style;this.service.setFontStyle(style);}else{this.addServiceMessage(__('Become a PLATINUM member for change your font style'),'alert');}
return false;}});$(document).ready(function(){$("#bChat").bind("onPerformerStatusChange",function(e){var status=chat.performerStatus;$('#bPaidButtonGroup').removeClass('sv-grid-33 sv-grid-50 hide-first hide-middle');switch(status){case'online':case'public':case'away':if(chat.userData.isVipZone){$('#bVipChatHeader').find('p:first').html(__('%modelname% is in a %s1%VIP PREMIUM CHAT%s2%',{modelname:'<strong class="online">'+chat.performerData.displayName+'</strong>',s1:'<i>',s2:'</i>'}));$('#bGotoGroup').hide();}else{$('#bCamStatus').find('p:first').html(__('%modelname% is in a public chat',{modelname:''}));$('#bGotoGroup').show();$('#bPaidButtonGroup').addClass('sv-grid-33');}
$('#bGotoPrivate, #bTip').show();$('#bGotoVoyeur, #bGotoVoyeur2, #bGotoGroup2').hide();break;case'fullprivate':case'private':var currentChatType=status;if(!chat.acceptedPaidShow){if('fullprivate'==status){currentChatType='full private';}else{$('#bGotoVoyeur2').show();}
var msg=new Date().format('H:i:s')+' '+__('%username% has joined the '+currentChatType+' chat',{username:'<strong>'+chat.performerData.displayName+'</strong>'})+'.';if('private'==status&&chat.userData.role!='moderator'){msg+='<br/>'+__('You can spy for this show')+', <a href="javascript:void(0)" onclick="return chat.gotoVoyeur()">'+__('click here')+'!</a>';}
chat.addServiceMessage(msg,'service')}else{$('#bPaidButtonGroup').addClass('sv-grid-50 two-btn hide-first');}
$('#bCamStatus p:first').html(__('%modelname% is in a '+currentChatType+' chat',{modelname:'<strong class="online">'+chat.performerData.displayName+'</strong>'}));$('#bPaidPop, #bGotoPrivate, #bGotoGroup, #bGotoGroup2').hide();break;case'vip':if(!chat.acceptedPaidShow){var msg=new Date().format('H:i:s')+' '+__('%username% has joined the '+status+' chat',{username:'<strong>'+chat.performerData.displayName+'</strong>'})+'.';chat.addServiceMessage(msg,'service')}
$('#bCamStatus p:first').html(__('%modelname% is in a '+status+' chat',{modelname:'<strong class="online">'+chat.performerData.displayName+'</strong>'}));$('#bPaidPop, #bGotoPrivate, #bGotoGroup, #bGotoGroup2, #bGotoVoyeur, #bGotoVoyeur2').hide();break;case'group':if(!chat.isGroupChatInvited){var msg=new Date().format('H:i:s')+' '+__('%username% has joined the group chat',{username:'<strong>'+chat.performerData.displayName+'</strong>'})+'.';if(chat.userData.role!='moderator'){msg+='<br/>'+__('To join group chat now')+', <a href="javascript:void(0)" onclick="return chat.gotoGroupChat()">'+__('click here')+'!</a>';$('#bGotoGroup2').show();}
chat.addServiceMessage(msg,'service');}else{$('#bPaidButtonGroup').addClass('sv-grid-50 hide-first');}
var camsStatusMsg=__('%modelname% is in a group chat',{modelname:'<strong class="online">'+chat.performerData.displayName+'</strong>'});$('#bCamStatus p:first').html(camsStatusMsg);$('#bPaidPop, #bGotoPrivate, #bGotoVoyeur, #bGotoVoyeur2, #bGotoGroup').hide();break;case'offline':$('#bPaidPop, #bGotoPrivate, #bGotoGroup, #bGotoGroup2, #bGotoVoyeur, #bGotoVoyeur2').hide();var camsStatusMsg=__('%modelname% is offline',{modelname:'<strong class="online">'+chat.performerData.displayName+'</strong>'});$('#bCamStatus p:first').html(camsStatusMsg);break;}});if(true==$.isFullMobile){$('#bShareCamControls').hide();}
$.updateQueryStringParameter=function(uri,key,value){var re=new RegExp("([?|&])"+key+"=.*?(&|#|$)","i");if(uri.match(re)){if(value){return uri.replace(re,'$1'+key+"="+value+'$2');}else{var pos=uri.indexOf(key+'=')-1;re=new RegExp("()"+('\\'+uri.charAt(pos)+key)+"=.*?(&|#|$)","i");return uri.replace(re,'$1'+'$2');}}else if(value){var hash='';var separator=uri.indexOf('?')!==-1?"&":"?";if(uri.indexOf('#')!==-1){hash=uri.replace(/.*#/,'#');uri=uri.replace(/#.*/,'');}
return uri+separator+key+"="+value+hash;}};if(!$.mobile){$.switchVipZoneChat=function(){$('#chatContainer').addClass('vipZone');$('.underChatHDSwitchButton').prependTo('.chat-column .column-header');$('#bTopicCell').appendTo('#bVipChatHeader');$('#bGotoPrivate, #bGotoVoyeur, #bStopShow').appendTo($('#bPaidButtonsCell'));$('#bMemberBalance').appendTo('#bChat');$('#bTip').appendTo('#bTipButtonCell');$('#bCamStatus').find('p').removeClass('chatType').end().appendTo('#bVipChatHeader');}
function windowResizeHandler(){if(window.innerWidth<=1440){$('#chatContainer').removeClass('cc_medium').addClass('cc_small');}else if(window.innerWidth<=1680){$('#chatContainer').removeClass('cc_small').addClass('cc_medium');}else{$('#chatContainer').removeClass('cc_small cc_medium');}
if($('#chatContainer').hasClass('vipZone')||$('#layout_9').length){return;}}
function hideUserList($container){$container=$container||$('#bChat');$('.users',$container).hide();$('.usersCount',$container).hide();$('#bUserListShow').show();chat.service.showUserList(false);if($.isFunction($.adjustHeaderAndFooterWidth)){$.adjustHeaderAndFooterWidth();}}
function showUserList($container){$container=$container||$('#bChat');$('#bUserListShow').hide();$('.users',$container).show();$('.usersCount',$container).show();chat.service.showUserList(true);if($.isFunction($.adjustHeaderAndFooterWidth)){$.adjustHeaderAndFooterWidth();}}
var resizeTimer;$(window).bind('resize',function(){if(resizeTimer)clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){windowResizeHandler();},200);});windowResizeHandler();$('.fontButton').tooltip({position:'top left',offset:window.isRTL?[-9,$('#ChangeFontFormTooltip').width()]:[-9,60],tip:'#ChangeFontFormTooltip',events:{widget:"click, false",tooltip:'mouseenter'}});var winKeyPressed=false;var winKeyPressedInt;$(window).bind('keydown',function(e){if(91==e.keyCode||92==e.keyCode){winKeyPressed=true;}});$(window).bind('keyup',function(e){if(!winKeyPressed&&!$(e.target).is('input, textarea')){if(39==e.keyCode){chat.nextRoom();}
else if(37==e.keyCode){chat.prevRoom();}}
if(91==e.keyCode||92==e.keyCode){clearTimeout(winKeyPressedInt);winKeyPressedInt=setTimeout(function(){winKeyPressed=false;},100);}});if($('#my_font_color').length){$('#my_font_color').colorPicker();}
$('#ChangeFontFormTooltip form').submit(function(e){e.preventDefault();var $fontSize=$('#my_font_size');if(chat.fontSizes.indexOf($fontSize.val())==-1){$fontSize.find('option').each(function(){$(this).val(chat.fontSizes[$(this).index()]);});$fontSize.val(chat.fontSizes[0]);}
chat.setFontStyle({fontFamily:$('#my_font_family').val(),fontSize:$fontSize.val(),color:$('#my_font_color').val()});$('#ChangeFontFormTooltip .close').click();});$('#ChangeFontFormTooltip .close').click(function(){$('.fontButton').each(function(){if($(this).data('tooltip')){$(this).data('tooltip').hide();}});});$('#bCamControlsHide').click(function(){$('.cam-column').attr('id','bCamHidden');$('#bCamControlsShow').show();});$('#bCamControlsShow').click(function(){$(this).hide();if($('#bCamHidden').length){$('.cam-column').removeAttr('id');}});$('#bUserListHide').click(function(){hideUserList();});$('#bUserListShow').click(function(){showUserList();});$('#bPerformerDesires').delegate('.desire','click',function(){chat.tipPopup($(this).attr('id'));});$("#bGotoPrivate").bind('click',function(){chat.paidShowPopup();});$("#bPaidButtonTopRow #bGotoGroup").bind('click',function(){chat.paidShowPopup(true);});$(".paidPopForm label").click(function(){$('.selected',$(this).parents('.paidPopForm')).removeClass('selected');$(this).addClass('selected');});$(".paidPopForm .paid-pop-what").click(function(e){$.fancybox.open($(this),{padding:0,autoSize:false,type:'ajax',wrapCSS:'fancybox-bonga-wrap',openSpeed:100,closeSpeed:100,helpers:{overlay:{locked:false}}});e.stopPropagation();return false;});$("#bPaidPopContainer .close").click(function(){var $pop=$(this).parent();$pop.hide();$('body').unbind('.'+$pop.attr('id'));});$("#bPaidPopContainer button").click(function(){var $pop=$(this).parents('.paid-pop:first');switch($('.selected',$pop).attr('value')){case'private':chat.gotoPrivateChat();break;case'group':chat.gotoGroupChat();break;case'fullprivate':chat.gotoPrivateChat(true);break;}
$pop.hide();$('body').unbind('.'+$pop.attr('id'));});$('.chat_tabs_container .mls_tabs a').bind('click',function(){var $tab=$(this).parent();var $chatTab=$tab.closest('.chat-tab');if($tab.is('.tab_history')&&!$tab.hasClass('selected')){hideUserList($chatTab);$('.historyContainerCell',$chatTab).removeClass('hidden');$('.chat_tabs_container li',$chatTab).removeClass('selected');$tab.addClass('selected');}
if($tab.is('.tab_users')&&!$tab.hasClass('selected')){showUserList($chatTab);$('.historyContainerCell',$chatTab).addClass('hidden');$('.chat_tabs_container li',$chatTab).removeClass('selected');$tab.addClass('selected');}});$("#mnw").click(function(){var $hint=$(this).closest('#bModelNavigator').find('.navigatorHint');if($hint.is(':visible')){$hint.hide();$hint.css('bottom','');}else{$hint.show();if($hint.offset().top+$hint.outerHeight(true)>$(window).scrollTop()+$(window).height()){$hint.css('bottom','44px');}}});$(document).on('click','.closeBtn',function(){var $hint=$(this).closest('.navigatorHint');if($hint.length){$hint.hide()}else{var $smilePanel=$(this).closest('.smilePanel');if($smilePanel.length){$smilePanel.hide()}}})}})})(jQuery);
(function($){$.extend(chat,{initMediator:function(){if(chat.userData.localData){chat.localData=chat.userData.localData;delete chat.userData.i18n;delete chat.userData.localData;}
var $bChat=$('#bChat');$bChat.bind('onPaidShowStart',function(e,type){chat.playStream();});$bChat.bind('onRoomClose',function(e,reason){chat.debug('[mediator] onRoomClose',reason);clearInterval(chat.freeTimeInt);if(reason){chat.closeStream();}});$bChat.bind('onPaidShowStop',function(e,reason,changeRoom){chat.closeStream(chat.performerStatus=='vip'&&chat.userData.isVip);if(!changeRoom){chat.service.handlePaidShowStop();$bChat.triggerHandler('onPerformerStatusChange');}});$bChat.bind('onPerformerStatusChange',function(e){var status=chat.performerStatus;chat.debug('[mediator] onPerformerStatusChange',status);if(chat.freeTimeReached)return;if(chat.isPaidShow){var msg='';if('offline'==status||'public'==status||'vip'==status){switch(chat.currentShowType){case'fullprivate':msg='Full private chat has been stopped by %modelname%';break;case'private':msg='Private chat has been stopped by %modelname%';break;case'group':msg='Group chat has been stopped by %modelname%';break;case'voyeur':msg='Spy mode has been stopped by %modelname%';break;case'vip':msg='VIP Show has been stopped by %modelname%';break;}
msg=__(msg,{modelname:'<strong>'+chat.performerData.displayName+'</strong>'});chat.stopPaidShow(msg);}}
var $layover=$('.layover');$layover.attr('src',chat.getLayoverSrc('away'));$layover.click(function(){if('vip'==status){chat.onVideoLayoverClick('vip');}});switch(status){case'away':chat.closeStream();$('.layoverText').removeClass('layoverCenter').find('strong').html(__("I'm Away")).end().show();break;case'public':chat.playStream();break;case'fullprivate':case'private':if(!chat.acceptedPaidShow){chat.closeStream();if('fullprivate'!=status){$('#bPrivateLink').attr('href','#popupVoyeur').show();}
if('private'==status){$('.layoverText').addClass('layoverCenter').find('strong').html(__("I'm Private")).end().find('a.layoverButtonVoyeur').show().end().show();}else{$('.layoverText').removeClass('layoverCenter').find('strong').html(__("I'm Full Private")).end().show();}}
break;case'vip':if(!chat.userData.isVip){$('.layover').attr('src',chat.getLayoverSrc('vip'));$('.layoverText').hide();chat.closeStream();}else if(!chat.acceptedPaidShow){chat.closeStream(true);chat.service.gotoVipShow();}
break;case'group':var msg=__('%username% has joined the group chat',{username:'<strong>'+chat.performerData.displayName+'</strong>'})+'.';if(!chat.isGroupChatInvited){chat.closeStream();$('.layoverText').addClass('layoverCenter').find('strong').html(__("I'm Group")).end().find('a.layoverButtonGroup').show().end().show();}
break;case'offline':chat.closeStream();$('.layoverText').removeClass('layoverCenter').find('strong').html(__("I'm Offline")).end().show().find('.layoverButton').hide();break;}});$bChat.bind('onBeforeGetRoom',function(e){if(chat.freeTimeReached)return;$('.layover, .layoverText, .layoverText a').hide();});$bChat.bind('onUserData',function(e){chat.initLimits();});$bChat.bind('onVideoStreamLimit',function(e){$('.layover').attr('src',chat.getLayoverSrc('limit'));$('.layoverText').remove();$('.layoverLimitText').show();chat.closeStream();if(!$.mobile){chat.initLayoverAutoResize();}});},initLayoverAutoResize:function(){var $c=$('#stream-container'),$link=$c.find('.layoverLimitText');$('#bChat').unbind('onVideoSizeChange').bind('onVideoSizeChange',function(e){$link.css('font-size',($c.height()/17)+'px');$link.css('top',(($c.height()-$link.height())/2)+'px');})},getLayoverSrc:function(type){var $layover=$('.layover');if('vip'==type){return $layover.attr('hd'==chat.performerData.videoQuality&&$layover.attr('vip-hd')?'vip-hd':'vip')}
return $layover.attr('base-path')+type+chat.performerData.sexType+'.jpg';},initLimits:function(){if(!$.isLocalStorageAvailable()){this.debug('[mediator] initLimits: localStorage is not suppoted');}
var d=new Date();d.hours=0;d.minutes=0;d.seconds=0;if(!localStorage['limits.stamp']||parseInt(localStorage['limits.stamp'])+86400000<=d.getTime()){this.debug('[mediator] init limits for '+this.performerData.username);if($.isLocalStorageAvailable()){localStorage['limits.stamp']=d.getTime();localStorage['limits.todayFreeTime']=0;localStorage['limits.todayMessages']=0;}}
var isFreeTimeIsOver=function(){var freeTime=chat.localData.dailyMinutesLimit*60;return localStorage['limits.todayFreeTime']>=freeTime+3;}
var checkFreeTime=function(){if(isFreeTimeIsOver()){clearInterval(chat.freeTimeInt);if(!chat.freeTimeReached)
chat.onVideoStreamLimit(false);chat.freeTimeReached=true;}else{if($.isLocalStorageAvailable()){localStorage['limits.todayFreeTime']++;}}}
if(this.localData.dailyMinutesLimit){checkFreeTime();this.freeTimeInt=setInterval(checkFreeTime,1000);}},checkFreeMessageLimit:function(){if(this.userData.isLogged){if(this.userData.role=='member'&&!this.userData.isPayable&&!this.chatSettings.allowFreeMemberChat){this.addServiceMessage(__('We are sorry but FREE members are temporarily muted by model')+'. <a href="javascript:void(0)" onclick="return chat.buyTokensPopup(this)">'+__('Buy some tokens')+'</a> '+__('and begin chatting with your favorite models')+'!','alert');return true;}}
if(this.localData.dailyMessagesLimit!=undefined){if(!$.isLocalStorageAvailable()&&!localStorage['limits.todayMessages']){this.freeMessagesCount=0;}else{this.freeMessagesCount=localStorage['limits.todayMessages'];}
if(this.freeMessagesCount>=this.localData.dailyMessagesLimit){this.onFreeChatMessageLimit();return true;}else{this.freeMessagesCount++;if($.isLocalStorageAvailable()){localStorage['limits.todayMessages']=this.freeMessagesCount;}}}
return false;}});})(jQuery);
var MobileChatService=function(directServiceUrl,amfServiceUrl){var directServiceUrl=directServiceUrl;var amfServiceUrl=amfServiceUrl;var socket=null;var connected=false;var funcId=0;var callbacks={};var dataKey=null;var pingInt=null;var roomDataXhr=null;var joinRoom=function(){if(!chat.performerData.username){return;}
chat.debug('joinRoom');call('joinRoom',function(result){chat.setChatHeight();if(!chat.currentChathost){chat.setCurrentChathost(chat.performerData.username);}
if(!result.status){chat.onDisconnect('ROOM_RELEASE');return;}
if(result.clientId){chat.userData.clientId=result.clientId;}
if(result.performerClId){chat.performerData.clientId=result.performerClId;}
if(result.settings){chat.onChatSettings(result.settings);}
if(result.topic){chat.onTopicChange(result.topic,false);}
if(result.topicRu){chat.onTopicChange(result.topicRu,true);}
if(result.status){chat.performerStatusChange(result.status);}
if(undefined!=result.isAudioAvailable){chat.performerAudioState(result.isAudioAvailable);}
pingInt=setInterval(function(){call('ping',null);var pingArgs=new Array();if(chat.userData.userId){pingArgs.push(chat.userData.userId);if(chat.isPaidShow){pingArgs.push(chat.performerData.userId);pingArgs.push(true);}}else{pingArgs.push(null);}
$.ajax({data:{method:'ping',args:pingArgs},url:directServiceUrl,type:'post',success:function(data,status,jqXHR){chat.debug('ping',data);if(!data.userData){return;}
try{balance=data.userData.balance;}catch(e){chat.error('ping error: wrong balance');return;}
if(balance!=chat.userData.balance){chat.setBalance(balance);}
if(!chat.isPaidShow||(chat.isPaidShow&&'vip'==chat.initiatedPaidShow)){call("updateMemberBalance",null,[{balance:balance,accessLevel:data.userData.accessLevel},data.dataKey]);}}});},1000*(!chat.userData.isLogged?120:30));call('ChatModule.connect',function(result){if(result.history){chat.setHistory(result.history);}
if(result.userList){chat.updateUsers(chat.currentChatType,result.userList);}},['public-chat']);chat.enableChatInput();},[chat.performerData.username,chat.userData,dataKey]);};var updateUserList=function(){call('ChatModule.syncUserList',function(userList){chat.updateUsers(chat.currentChatType,userList);},[chat.currentChatType]);}
var acceptGroupChat=function(){var invitationData;if(!chat.groupChatInvitationData){invitationData=new Object();invitationData.users=new Array();}else{invitationData=chat.groupChatInvitationData;if(invitationData.users.indexOf(chat.userData.username)>=0){return;}}
invitationData.users.push(chat.userData.username);call('ChatModule.setGroupChatInvitation',function(e){},[invitationData]);};var initPaidShow=function(type){if(chat.userData.isPayable&&!chat.initiatedPaidShow){chat.debug('*** initPaidShow',type);chat.initiatedPaidShow=type;$.ajax({data:{method:'initPaidShow',args:[chat.performerData.username,type]},url:amfServiceUrl,type:'post',dataType:'json',success:function(data,status,jqXHR){chat.debug('*** initPaidShow RESULT',data);if('decline'==data.status){chat.paidShowDecline(data.description);return;}
chat.closeStream(true);call('initPaidShow',function(result){chat.currentShowType=type;chat.paidShowId=result;startPaidShow(type);},[{showType:type},data.dataKey,data.actionKey]);}});};var startPaidShow=function(type){chat.debug('*** startPaidShow',type);var onResult=function(){call('ChatModule.disconnect',null,['public-chat']);call('ChatModule.connect',null,['private-chat']);call("startPaidShow",null,[type]);chat.onPaidShowStart(type);}
if(chat.userData.isVip&&'vip'==chat.performerStatus){onResult();}else{$.ajax({data:{method:'startPaidShow',args:[chat.performerData.username,chat.currentShowType,'getOrientation'in window?window.getOrientation():null]},url:amfServiceUrl,type:'post',dataType:'json',success:function(data,status,jqXHR){if('success'==data.status){onResult();}}});}};};var call=function(cmd,callback,params){funcId++;var func=new Object();func.name=cmd;func.id=funcId;func.params=params;callbacks[func.id]=callback;socket.send(JSON.stringify(func));};return{name:"MobileChatService",getSocket:function(){return socket;},connect:function(url){var self=this;socket=new SockJS(url,null,{debug:false,rtt:1000});socket.onopen=function(){chat.debug('[sjs] open '+this.protocol);if(chat.performerData&&chat.performerData.username&&dataKey){joinRoom();}else{self.getRoom(chat.userData.chathost);}
connected=true;};socket.onclose=function(){chat.currentChathost=null;chat.userData.chathost=null;chat.performerData=null;chat.debug('[sjs] close');connected=false;};socket.onerror=function(){chat.currentChathost=null;chat.userData.chathost=null;chat.performerData=null;chat.debug('[sjs] error');connected=false;};socket.onmessage=function(e){var data=JSON.parse(e.data);if(data.type&&undefined!==data.body){switch(data.type){case'ServerMessageEvent:PERFORMER_STATUS_CHANGE':chat.performerStatusChange(data.body);break;case'ServerMessageEvent:PERFORMER_AUDIO_STATE':chat.performerAudioState(data.body);break;case'ServerMessageEvent:PERFORMER_SETTINGS_CHANGE':chat.onChatSettings(data.body);break;case'ServerMessageEvent:TOPIC_CHANGE':chat.onTopicChange(data.body.topic,data.body.isRu);break;case'ServerMessageEvent:CHAT_CLEAR_HISTORY':chat.onHistoryClear(data.body.type);break;case'ServerMessageEvent:DELETE_MESSAGE':if(data.body.id){chat.onDeleteMessage(data.body.id);}else if(data.body.userId){chat.onDeleteMessages(data.body.userId);}
break;case'ServerMessageEvent:CHAT_INCOMING_MESSAGE':if(chat.currentChatType==data.body.type){chat.incomingMessage(data.body.type,data.body.message,data.body.author,data.body.id);}
break;case'ServerMessageEvent:INCOMING_PRIVATE_MESSAGE':chat.incomingPrivateMessage(data.body.message,data.body.author);break;case'ServerMessageEvent:CHAT_FRIEND_REQUEST':if(chat.currentChatType==data.body.type){chat.onFriendRequest(data.body.from);}
break;case'ServerMessageEvent:CHAT_FRIEND_RESPONSE':if(chat.currentChatType==data.body.type){chat.onFriendConfirm(data.body.from);}
break;case'ServerMessageEvent:SHOW_REQUEST':if(!data.body.user||(data.body.user.username!=chat.userData.username))return;chat.onShowRequest(data.body);if(chat.acceptedPaidShow){initPaidShow(chat.acceptedPaidShow);}
break;case'ServerMessageEvent:GROUP_CHAT_INVITATION_CHANGE':chat.groupChatInvitation(data.body);if(chat.isGroupChatInvited&&chat.isGroupChatMembersReady){initPaidShow('group');}
break;case'ServerMessageEvent:GROUP_SHOW_RESPONSE':chat.onGroupShowResponse(data.body);if(chat.acceptedPaidShow){initPaidShow(chat.acceptedPaidShow);}
break;case'ServerMessageEvent:INCOMING_TIP':chat.onTip(data.body.from,data.body.tip.amount,data.body.tip.desireId);break;case'ServerMessageEvent:PAID_SHOW_UPDATE':chat.debug('[sjs] PAID_SHOW_UPDATE');chat.debug(data.body);chat.setBalance(data.body);break;case'ServerMessageEvent:PAID_SHOW_STOPPED':chat.debug('[sjs] PAID_SHOW_STOPPED');chat.debug(data.body);chat.onPaidShowStop(data.body);break;case'ServerMessageEvent:ROOM_CLOSE':chat.debug('[sjs] ROOM_CLOSE');chat.debug(data.body);clearInterval(pingInt);chat.onDisconnect(data.body.reason);break;}}
if(data.id>0){var callback=callbacks[data.id];if(undefined!=callback){delete callbacks[data.id];if(data.error){chat.error(data);}else{callback.call(null,data.result);}}}}},connected:function(){return connected;},disconnect:function(){if(socket){socket.close();}
connected=false;},getRoomData:function(chathost){var changeRoom=!!chat.performerData;chat.debug('getRoomData',chathost);return $.ajax({data:{method:'getRoomData',args:[chathost,changeRoom]},url:directServiceUrl,type:'post'});},getRoom:function(chathost){if(!chathost){return;}
roomDataXhr=this.getRoomData(chathost);roomDataXhr.done(function(data){roomDataXhr=null;dataKey=data.localData.dataKey;$.extend(chat.userData,data.userData);$.extend(chat.localData,data.localData);chat.performerData=data.performerData;chat.videoServerUrl=data.localData.videoServerUrl;chat.audioServerUrl=data.localData.audioServerUrl;chat.onUserData(chat.userData,chat.performerData,chat.localData);joinRoom();});},closeRoom:function(changeRoom){if(roomDataXhr){roomDataXhr.abort();}
if(chat.isPaidShow){chat.onPaidShowStop(null,true);}
if(this.connected()){call('ChatModule.disconnect',null,[chat.currentChatType]);call('closeRoom',null);}
chat.performerAudioState(false);chat.closeStream(true);},sendMessage:function(message,chatType){if(!chat.checkFreeMessageLimit())
call('ChatModule.sendMessage',null,[chatType,message]);},updateHistory:function(history){call('updateChatLog',null,[history]);},addFriend:function(userData){var addFriend=function(userId){$.ajax({data:{method:'addFriend',args:[userId]},url:amfServiceUrl,type:'post',dataType:'json'});};if(userData.friendRequestSettings=='select'){addFriend(userData.userId);call('ChatModule.sendFriendRequest',null,[chat.currentChatType,userData.clientId]);}else if(userData.friendRequestSettings=='all'){addFriend(userData.userId);this.applyFriend(userData.clientId);}},confirmFriend:function(userData){$.ajax({data:{method:'confirmFriend',args:[userData.userId]},url:amfServiceUrl,type:'post',dataType:'json'});this.applyFriend(userData.clientId);},applyFriend:function(clientId){call('ChatModule.sendFriendResponse',function(e){},[chat.currentChatType,clientId]);},removeFriend:function(userData){$.ajax({data:{method:'removeFriend',args:[userData.userId]},url:amfServiceUrl,type:'post',dataType:'json'});},showAllUsers:function(){call('setUserListLimit',updateUserList,[0]);},showUserList:function(v){var limit=!v?-1:30;chat.userData.userListLimit=limit;call('setUserListLimit',function(){if(v>0)
updateUserList();},[limit]);},sendShowRequest:function(data){call('ChatModule.sendShowRequest',null,[data]);},tipModel:function(value,desireId){if(undefined==desireId)desireId=null;$.ajax({data:{method:'tipModel',args:[chat.performerData.username,value,desireId,'getOrientation'in window?window.getOrientation():null]},url:amfServiceUrl,type:'post',dataType:'json',success:function(data,status,jqXHR){if(data.status=='success'){call('ChatModule.sendTip',null,[{amount:parseInt(data.amount),desireId:data.desireId},data.dataKey,data.actionKey]);}else{chat.addServiceMessage(data.description,'tip_'+data.status);}}});},gotoPrivateChat:function(isFull){this.sendShowRequest({type:isFull?'fullprivate':'private',user:chat.userData,status:'request'});},gotoGroupChat:function(){if('group'==chat.performerStatus){initPaidShow('group');}else{acceptGroupChat();}},gotoVoyeur:function(){initPaidShow('voyeur');},gotoVipShow:function(){initPaidShow('vip');},stopPaidShow:function(reason){if(undefined==reason)reason=null;call("stopPaidShow",null,[reason]);chat.onPaidShowStop(reason);},handlePaidShowStop:function(reason){call('ChatModule.disconnect',null,['private-chat']);call('ChatModule.connect',null,['public-chat']);},removeAcceptGroupChat:function(){if(chat.groupChatInvitationData&&chat.groupChatInvitationData.users){var invitationData=chat.groupChatInvitationData;for(var i=0;i<invitationData.users.length;i++){if(chat.userData.username==invitationData.users[i]){invitationData.users.splice(i,1);call('ChatModule.setGroupChatInvitation',function(e){},[invitationData]);return;}}}},sendPrivateMessage:function(message,username){},addServiceMessage:function(message){},blockUser:function(username,userId,isBan,deleteHistory){},muteUser:function(username,userId,isMute){},deleteMessage:function(username,messageId){},muteVideo:function(val){},muteAudio:function(val){},showVolumeSlider:function(val){},setFontStyle:function(style){chat.debug('*** setFontStyle',style);call("setFontStyle",updateUserList,[style]);$.ajax({data:{method:'setFontStyle',args:[style]},url:amfServiceUrl,type:'post',dataType:'json'});},shareMyCam:function(val){}}};
(function($){$.extend(chat,{isPlaying:false,isHLS:false,HLS_PlayButtonTapped:false,isDASH:false,DASH_Player:null,videoServerUrl:null,videoObject:null,videoObjectPlayInt:null,audioServerUrl:null,audioObject:null,audioAvailable:false,hideButtonsTimeout:false,createVideo:function(){var v=document.createElement('video');var canPlayHLS=function(){if(v.canPlayType){var a=v.canPlayType("application/x-mpegURL");var b=v.canPlayType("vnd.apple.mpegURL");return((a=="probably"||a=="maybe")||(b=="probably"||b=="maybe"));}
return false;};var canPlayDash=function(){var a="MediaSource"in window&&"undefined"!=typeof Dash;return a&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42001f"')&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42401f"')&&MediaSource.isTypeSupported('audio/mp4; codecs="mp4a.40.2"');};if(canPlayHLS()&&((!$.mobile&&!navigator.userAgent.match(/iPhone/i))||($('body').hasClass('ipad')||($('body').hasClass('iphone')&&$('body').hasClass('d-browser'))||($('body').hasClass('android')||$('body').hasClass('blackberry')&&!$('body').hasClass('opera-browser'))))){this.insertVideoObject(v);$('<a href="#" id="playHLS"></a>').insertAfter($('#display'));var self=this;$(this.videoObject).on("loadstart",function(){if(self.options.debug){self.addServiceMessage('[debug] loadstart');}}).on("progress",function(e){if(self.options.debug){self.addServiceMessage('[debug] progress');}
this.loading=true;}).on("waiting",function(){if(self.options.debug){self.addServiceMessage('[debug] waiting');}}).on("play",function(){if(self.options.debug){self.addServiceMessage('[debug] play');}
$('#playHLS').hide();$('#display').hide();$('#sound-btn').removeClass('sound-off').addClass('sound-on');$('#stream-container .spinner').show();self.isHLS=true;}).on("playing",function(){if(self.options.debug){self.addServiceMessage('[debug] playing');}
this.playing=true;this.loading=false;var $video=$('#displayHLS'),$performerVideo=$('#stream-container').parent();$video.removeClass('hidden');if($('body').is('.android, .tablet')&&!$performerVideo.hasClass('playing')){var rxaosp=navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);if(rxaosp&&rxaosp[1]<=534.30){$video.attr('src',$video.attr('src'))}}
$performerVideo.addClass('playing');}).on("ended",function(){this.playing=false;if(self.options.debug){self.addServiceMessage('[debug] ENDED?');}}).on("emptied",function(){this.playing=false;if(self.options.debug){self.addServiceMessage('[debug] EMPTIED?');}}).on("error",function(){this.playing=false;if(self.options.debug){self.addServiceMessage('[debug] ERROR?');}
if(!self.isHLS){}else{}}).on("abort",function(){this.playing=false;if(self.options.debug){self.addServiceMessage('[debug] ABORT?');}}).on("timeupdate",function(){if(self.options.debug){self.addServiceMessage('[debug] timeupdate:'+this.currentTime+'/'+this.lastTime+' '+this.src);}
if(this.currentTime>0){this.lastTime=this.currentTime;$('#display, #playHLS').hide();}else if(this.lastTime>0){if(self.options.debug){self.addServiceMessage('[debug] END?');}}
$.im_sound_disabled=true;}).on("loadeddata",function(){if(self.options.debug){self.addServiceMessage('[debug] DATA-LOADED?');}}).on("onloadedmetadata",function(){if(self.options.debug){self.addServiceMessage('[debug] META-DATA-LOADED?');}});var $reloadVideo=$('#playHLS');if(!$('#video-panel-wrap').hasClass('hide_btn_version')){$reloadVideo=$('#playHLS, #displayHLS, #stream-container');}
$reloadVideo.bind('click',function(){self.HLS_PlayButtonTapped=true;self.playHLS();});}
else if(canPlayDash()){this.isDASH=true;this.insertVideoObject(v);var self=this;$(this.videoObject).on("loadstart",function(){if(self.options.debug){self.addServiceMessage('[debug] loadstart');}}).on("progress",function(e){if(self.options.debug){self.addServiceMessage('[debug] progress');}
this.loading=true;}).on("waiting",function(){if(self.options.debug){self.addServiceMessage('[debug] waiting');}}).on("play",function(){if(self.options.debug){self.addServiceMessage('[debug] play');}
$('#playHLS').hide();$('#display').hide();$('#sound-btn').removeClass('sound-off').addClass('sound-on');$('#stream-container .spinner').show();}).on("playing",function(){if(self.options.debug){self.addServiceMessage('[debug] playing');}
this.playing=true;this.loading=false;$('#displayHLS').removeClass('hidden');$('#stream-container').parent().addClass('playing');}).on("ended",function(){this.playing=false;if(self.options.debug){self.addServiceMessage('[debug] ENDED?');}}).on("emptied",function(){this.playing=false;if(self.options.debug){self.addServiceMessage('[debug] EMPTIED?');}}).on("error",function(){this.playing=false;if(self.options.debug){self.addServiceMessage('[debug] ERROR?');}}).on("abort",function(){this.playing=false;if(self.options.debug){self.addServiceMessage('[debug] ABORT?');}}).on("timeupdate",function(){if(self.options.debug){self.addServiceMessage('[debug] timeupdate:'+this.currentTime+'/'+this.lastTime+' '+this.src);}
if(self.isPlaying&&$('#displayHLS').hasClass('hidden')){$('#displayHLS').removeClass('hidden');$('#stream-container').parent().addClass('playing');}
if(this.currentTime>0){this.lastTime=this.currentTime;}else if(this.lastTime>0){if(self.options.debug){self.addServiceMessage('[debug] END?');}}
$.im_sound_disabled=true;}).on("loadeddata",function(){if(self.options.debug){self.addServiceMessage('[debug] DATA-LOADED?');}}).on("onloadedmetadata",function(){if(self.options.debug){self.addServiceMessage('[debug] META-DATA-LOADED?');}});var context=new Dash.di.DashContext();this.DASH_Player=new MediaPlayer(context);this.DASH_Player.startup();this.DASH_Player.attachView(this.videoObject);this.DASH_Player.setAutoPlay(true);}
else{$('#sound-link').click(function(){chat.toggleSound();$(this).remove();});}
if(!$.mobile){$('#bChat').bind('onBeforeGetRoom',function(e){$('#stream-container').css('background-image','none');$('#stream-container .spinner').show();});$('#bChat').bind('onUserData',function(e){$('#stream-container').css('background-image','url('+chat.getStreamUrl()+'?t='+new Date().getTime()+')');});}},insertVideoObject:function(v){this.videoObject=v;this.videoObject.preload='none';this.videoObject.autoplay=true;if($('body').hasClass('opr-browser')){this.videoObject.autoplay=false;}
this.videoObject.id='displayHLS';this.videoObject.lastTime=0;this.videoObject.errorCount=0;this.videoObject.className='hidden';$(this.videoObject).attr('webkit-playsinline',1).attr('wmode','opaque').insertAfter($('#display'));},createAudio:function(){var $audio=$("<audio/>").appendTo("body");this.audioObject=$audio.get(0);var self=this;this.audioObject.addEventListener('playing',function(){self.hideAudioLoadSpinner()});},showButtons:function(delSwipeClass){var $wrap=$('#video-panel-wrap');if($wrap.hasClass('hide_btn_version')&&!$wrap.hasClass('btn_visible')){if(!$wrap.hasClass('is_swipe')){clearTimeout(chat.hideButtonsTimeout);$('.chatbar-link.hidden,.chatbar-join-sticker.hidden,#sound-link.hidden').removeClass('hidden');$wrap.removeClass('btn_hidden').addClass('btn_visible');}
if(delSwipeClass!==undefined){$wrap.removeClass('is_swipe');}}},hideButtons:function(t){var $wrap=$('#video-panel-wrap');if($wrap.hasClass('hide_btn_version')&&!$wrap.hasClass('btn_hidden')&&!$wrap.hasClass('no_hide_btn')&&(!$wrap.hasClass('registered_only')||($wrap.hasClass('registered_only')&&$('#mainbar').find('.logout').length))){clearTimeout(chat.hideButtonsTimeout);chat.hideButtonsTimeout=setTimeout(function(){if(!$wrap.hasClass('no_hide_btn')){$('.chatbar-link,.chatbar-join-sticker,#sound-link').not('#chatbar-v2-btn').addClass('hidden');$wrap.removeClass('btn_visible').addClass('btn_hidden');}},t||5000);}},playStream:function(rollback){chat.showButtons(true);chat.hideButtons();if(this.freeTimeReached)return;if(this.options.debug){this.addServiceMessage('[debug] playStream');}
$('.layover, .layoverText, .layoverText a').hide();$('#display').show();this.isPlaying=true;if(this.videoObject&&!rollback){if(this.isDASH){this.playDASH();}else{this.playHLS();}}else{this.loadFrame();}},playHLS:function(){var url=this.getStreamUrl('hls');if(this.options.debug){this.addServiceMessage('[debug] playHLS:'+url);}
if(!this.isPlaying)return;if($('#display').is(':visible')){$('#playHLS').css('display','block');$('#stream-container .spinner').hide();}
this.videoObject.src=url;this.videoObject.load();if(false==($('body').hasClass('opr-browser')&&!this.HLS_PlayButtonTapped)){if(this.options.debug){this.addServiceMessage('[debug] videoObject.play: '+this.videoObject.src);}
this.videoObject.play();clearInterval(this.videoObjectPlayInt);this.videoObjectPlayInt=setInterval(function(){if(chat.options.debug){chat.addServiceMessage('[debug] HLS STATS'+'<br>'+'currentTime:'+chat.videoObject.currentTime+'<br>'+'isPlaying:'+chat.isPlaying+'<br>'+'HLS_Playing:'+chat.videoObject.playing+'<br>'+'HLS_Paused:'+chat.videoObject.paused+'<br>'+'HLS_NetworkState:'+chat.videoObject.networkState+'<br>'+'HLS_PlayButtonTapped:'+chat.HLS_PlayButtonTapped);}
if(!chat.videoObject.currentTime&&chat.isPlaying&&!chat.videoObject.playing){chat.playHLS();}},6000);}},playDASH:function(){var url=location.protocol+this.getStreamUrl('dash');if(this.options.debug){this.addServiceMessage('[debug] playDASH:'+url);}
this.DASH_Player.attachSource(url);clearInterval(this.videoObjectPlayInt);this.videoObjectPlayInt=setInterval(function(){if(chat.options.debug){chat.addServiceMessage('[debug] DASH STATS'+'<br>'+'currentTime:'+chat.videoObject.currentTime+'<br>'+'isPlaying:'+chat.isPlaying+'<br>'+'DASH_Playing:'+chat.videoObject.playing+'<br>'+'DASH_Paused:'+chat.videoObject.paused+'<br>'+'DASH_NetworkState:'+chat.videoObject.networkState);}
if(!chat.videoObject.currentTime&&chat.isPlaying&&!chat.videoObject.playing){chat.playDASH();}},12000);},getStreamUrl:function(type){var stream,url;if(this.paidShowId){stream=this.paidShowId;}else{stream='stream_'+this.performerData.username;}
url=this.videoServerUrl;if('hls'==type){url+='/hls/'+stream+'.m3u8';}else if('dash'==type){url+='/dash/'+stream+'.mpd';}else{url+='/'+stream+'.jpg';}
return url;},loadFrame:function(){if(!this.isPlaying)return;if(!this.videoServerUrl){console.log("ERROR: stream video server url is not specified");return;}
var self=this;var img=new Image();img.onload=imageOnLoad;img.onerror=imageOnError;img.timestamp=new Date().getTime();img.src=this.getStreamUrl()+'?t='+(img.timestamp);function imageOnLoad(){if(!self.isPlaying)return;var loadTime=new Date().getTime()-this.timestamp;self.drawFrame(this);setTimeout(function(){self.loadFrame();},100-loadTime);}
function imageOnError(){if(!self.isPlaying)return;var loadTime=new Date().getTime()-this.timestamp;setTimeout(function(){self.loadFrame();},100-loadTime);}},drawFrame:function(image){var display=$('#display').get(0);var displayContext=display.getContext("2d");display.width=$('#stream-container').width();display.height=$('#stream-container').height();if(displayContext!=null){try{displayContext.drawImage(image,0,0,image.width,image.height,0,0,$('#stream-container').width(),$('#stream-container').height());}catch(e){}}},closeStream:function(overlay){if(this.options.debug){this.addServiceMessage('[debug] closeStream, overlay='+overlay);}
if(!this.isPlaying){chat.showButtons(true);}
this.isPlaying=false;if(!overlay){$('.layover').css('display','block');}
$('#display').hide();var display=$('#display').get(0);display.width=display.width;if(this.videoObject){this.videoObject.pause();$('#displayHLS').addClass('hidden');$('.performer-video').removeClass('playing');this.videoObject.errorCount=0;clearInterval(this.videoObjectPlayInt);}
if(this.isSoundOn()){this.stopSound();}
chat.showButtons();},toggleSound:function(flag){if(!this.audioAvailable)return;var soundButton=$('#sound-btn');if(soundButton.hasClass('sound-on')||false===flag){this.hideAudioLoadSpinner();soundButton.removeClass('sound-on').addClass('sound-off');if(!this.videoObject){this.stopSound();}else{this.videoObject.volume=0;}}else{soundButton.removeClass('sound-off').addClass('sound-on').show();if(!this.videoObject){if('away'!=this.performerStatus){this.playSound();}
$('#sound-link').css('display','none');}else{this.videoObject.volume=1;}}},playSound:function(){if(this.freeTimeReached||!this.audioAvailable)return;var url=this.audioServerUrl+(location.protocol=='https:'?':8444':':8081');if(this.paidShowId){url+='/'+this.paidShowId;}else{url+='/stream_'+this.performerData.username;}
url+='/'+new Date().getTime();this.debug("audioUrl = "+url);try{this.audioObject.src=url;this.audioObject.load();this.audioObject.play();this.showAudioLoadSpinner();}catch(e){this.debug('audio error: '+e);}},stopSound:function(){this.audioObject.pause();this.audioObject.src='';},showAudioLoadSpinner:function(){$('#sound-btn').addClass('sound-load').show();var self=this;self.audioObject.audioLoadTimeout=setTimeout(function(){self.debug('audioObject cannot load audio stream: '+self.audioObject.src);self.stopSound();self.hideAudioLoadSpinner();$('#sound-btn, #sound-link').css('display','none');},30000);},hideAudioLoadSpinner:function(){clearTimeout(this.audioObject.audioLoadTimeout);$('#sound-btn').removeClass('sound-load');},isSoundOn:function(){return $('#sound-btn').hasClass('sound-on');},performerAudioState:function(status){this.debug('[video] performerAudioState',status);this.audioAvailable=status;if(this.freeTimeReached)return;if(!status){if(this.isSoundOn()){this.stopSound()}
$('#sound-btn, #sound-link').css('display','none');}else{if(this.isSoundOn()&&!this.videoObject){this.playSound();}
if($('#sound-link').length&&!this.videoObject){$('#sound-link').css('display','block');}else{$('#sound-btn').css('display','block');}}}});})(jQuery);
!function(a){function b(a,b){var c=document.createElement("canvas"),d=function(){function h(){var a=(new Date).getTime()-this.timestamp;e(this),setTimeout(function(){d()},200-a)}function i(){var a=(new Date).getTime()-this.timestamp;setTimeout(function(){d()},200-a)}var f=a.find(c);if(!b||-1==b.indexOf("//"))return void f.remove();f.length||a.append(c);var g=new Image;g.onload=h,g.onerror=i,g.timestamp=(new Date).getTime(),g.url=b,g.src=b+"?t="+g.timestamp},e=function(b){var d=c.getContext("2d");if(c.width=a.width(),c.height=a.height(),null!=d)try{d.drawImage(b,0,0,b.width,b.height,0,0,a.width(),a.height())}catch(e){}};return d(),{play:function(a){b=a,d()}}}a.fn.imagePlayer=function(c){var d=a(this).data("ImagePlayer");if(d)return d.play(c),d;if("destroy"!=c)return this.each(function(){d=new b(a(this),c),a(this).data("ImagePlayer",d)}),this}}(jQuery);
(function($){$.Smileys={smileyCollection:[{src:'smile.gif',tokens:[':)',':-)'],h:24},{src:'wink.gif',tokens:[';)',';-)'],h:24},{src:'sad.gif',tokens:[':(',':-('],h:24},{src:'shok.gif',tokens:['O_o',':O',':0'],h:20},{src:'wacko.gif',tokens:['%)','%-)'],h:25},{src:'biggrin.gif',tokens:[':D',':-D'],h:25},{src:'acute.gif',tokens:[';D',';-D'],h:24},{src:'dirol.gif',tokens:['8)',':-8'],h:21},{src:'secret.gif',tokens:[':#',':-#'],h:26},{src:'blum3.gif',tokens:[':P',':-P'],h:24},{src:'angel.gif',tokens:['0-)','O-)'],h:23},{src:'blush.gif',tokens:[':[',':-['],h:25},{src:'cry.gif',tokens:[":&#039;(",":&#039;-(",':~('],h:22},{src:'aggressive.gif',tokens:[':@',':-@'],h:27},{src:'fool.gif',tokens:[':|',':-|'],h:23},{src:'beee.gif',tokens:["=P"],h:28},{src:'mosking.gif',tokens:["=)"],h:25},{src:'air_kiss.gif',tokens:['=X'],h:26},{src:'bad.gif',tokens:[':!',':-!',':-~',';-~',':(~'],h:21},{src:'kiss3.gif',tokens:["(}{)"],h:24},{src:'give_rose.gif',tokens:["@}-"],h:26},{src:'give_heart2.gif',tokens:["3&gt;-"],h:25},{src:'boredom.gif',tokens:[':tired'],h:22},{src:'good.gif',tokens:[':good'],h:23},{src:'drinks.gif',tokens:[':drink'],h:28},{src:'man_in_love.gif',tokens:[':love'],h:26},{src:'vampire.gif',tokens:[':vampire'],h:36},{src:'clapping.gif',tokens:[':bravo'],h:27},{src:'rofl.gif',tokens:[':rofl'],h:25},{src:'pardon.gif',tokens:[':pardon'],h:26},{src:'ok.gif',tokens:[':ok'],h:26},{src:'yess.gif',tokens:[':yess'],h:30},{src:'yes3.gif',tokens:[':yes'],h:24},{src:'nea.gif',tokens:[':no'],h:26},{src:'crazy.gif',tokens:[':crazy'],h:27},{src:'unknw.gif',tokens:[':unknw'],h:20},{src:'sorry.gif',tokens:[':sorry'],h:22},{src:'dance4.gif',tokens:[':dance'],h:26},{src:'help.gif',tokens:[':help',':sos'],h:33},{src:'new_russian.gif',tokens:['|m|'],h:26},{src:'hi.gif',tokens:[':hi'],h:28},{src:'preved.gif',tokens:[':hello'],h:27},{src:'bye.gif',tokens:[':bye'],h:24},{src:'bb.gif',tokens:[':bb'],h:25},{src:'mail1.gif',tokens:[':mail'],h:26},{src:'dash1.gif',tokens:[':wall'],h:26},{src:'i-m_so_happy.gif',tokens:[':happy'],h:24},{src:'pleasantry.gif',tokens:[':db'],h:26},{src:'hang2.gif',tokens:[':hang'],h:35},{src:'hunter.gif',tokens:[':hunter'],h:38},{src:'ireful1.gif',tokens:[':ireful'],h:24},{src:'king.gif',tokens:[':king'],h:28},{src:'lazy.gif',tokens:[':lazy'],h:29},{src:'prankster2.gif',tokens:[':hoho'],h:24},{src:'mega_shok.gif',tokens:[':megashok'],h:28},{src:'moil.gif',tokens:[':moil'],h:37},{src:'paint2.gif',tokens:[':paint'],h:28},{src:'party2.gif',tokens:[':party'],h:26},{src:'popcorm1.gif',tokens:[':popcorn'],h:28},{src:'punish.gif',tokens:[':punish'],h:30},{src:'sarcastic.gif',tokens:[':sarcastic'],h:23},{src:'scare.gif',tokens:[':scare'],h:34},{src:'scratch_one-s_head.gif',tokens:[':scratch'],h:24},{src:'search.gif',tokens:[':search'],h:25},{src:'secret.gif',tokens:[':secret'],h:26},{src:'shout.gif',tokens:[':shout'],h:20},{src:'smoke.gif',tokens:[':smoke'],h:30},{src:'spiteful.gif',tokens:[':spiteful'],h:20},{src:'spruce_up.gif',tokens:[':spruce_up'],h:25},{src:'stop.gif',tokens:[':stop'],h:23},{src:'tease.gif',tokens:[':tease'],h:40},{src:'tender.gif',tokens:[':tender'],h:23},{src:'thank_you2.gif',tokens:[':thank'],h:19},{src:'this.gif',tokens:[':this'],h:25},{src:'training1.gif',tokens:[':training'],h:21},{src:'vava.gif',tokens:[':vava'],h:20},{src:'victory.gif',tokens:[':victory'],h:23},{src:'wizard.gif',tokens:[':wizard'],h:31},{src:'ohyeah.gif',tokens:[':ohyeah'],h:27},{src:'beach.gif',tokens:[':beach'],h:33},{src:'big_boss.gif',tokens:[':boss'],h:30},{src:'boast.gif',tokens:[':boast'],h:25},{src:'curtsey.gif',tokens:[':curtsey'],h:24},{src:'flirt.gif',tokens:[':flirt'],h:24},{src:'fool.gif',tokens:[':fool'],h:23},{src:'friends.gif',tokens:[':friends'],h:28},{src:'gamer4.gif',tokens:[':gamer'],h:33},{src:'diablo.gif',tokens:[':diablo'],h:34},{src:'girl_kiss.gif',tokens:[':girl_kiss'],h:23},{src:'girl_cray2.gif',tokens:[':girl_cry'],h:24},{src:'girl_crazy.gif',tokens:[':girl_crazy'],h:25},{src:'girl_hysteric.gif',tokens:[':girl_hysteric'],h:25},{src:'girl_drink1.gif',tokens:[':girl_drink'],h:26},{src:'girl_haha.gif',tokens:[':girl_haha'],h:22},{src:'girl_hospital.gif',tokens:[':girl_doctor'],h:25},{src:'girl_in_love.gif',tokens:[':girl_in_love'],h:27},{src:'girl_pinkglassesf.gif',tokens:[':girl_pinkglasses'],h:37},{src:'girl_sigh.gif',tokens:[':girl_sigh'],h:24}],smileyBigCollection:[{src:'big/f6caa6b0.gif',tokens:[':big01']},{src:'big/ef3b5f83.gif',tokens:[':big02']},{src:'big/eeb3be2a.gif',tokens:[':big03']},{src:'big/e046353b.gif',tokens:[':big04']},{src:'big/e94de355.gif',tokens:[':big05']},{src:'big/de4f412c.gif',tokens:[':big06']},{src:'big/dddceead.gif',tokens:[':big07']},{src:'big/dd20ffb9.gif',tokens:[':big08']},{src:'big/d147daff.gif',tokens:[':big09']},{src:'big/d2d6f6e0.gif',tokens:[':big10']},{src:'big/ca03f624.gif',tokens:[':big11']},{src:'big/c420fb68.gif',tokens:[':big12']},{src:'big/c0e66790.gif',tokens:[':big13']},{src:'big/bd04046c.gif',tokens:[':big14']},{src:'big/bb655dd2.gif',tokens:[':big15']},{src:'big/b4b95c16.gif',tokens:[':big16']},{src:'big/a3b16f17.gif',tokens:[':big17']},{src:'big/76311567.gif',tokens:[':big18']},{src:'big/40814fb3.gif',tokens:[':big19']},{src:'big/25613c93.gif',tokens:[':big20']},{src:'big/7267e299.gif',tokens:[':big21']},{src:'big/2416cf5a.gif',tokens:[':big22']},{src:'big/887ca0f4.gif',tokens:[':big23']},{src:'big/687d4e74.gif',tokens:[':big24']},{src:'big/17eca1b1.gif',tokens:[':big25']},{src:'big/345sxcww.gif',tokens:[':big26']},{src:'big/2yb9a8a2.gif',tokens:[':big27']},{src:'big/620f24ae.gif',tokens:[':big28']},{src:'big/533a1ddb.gif',tokens:[':big29']},{src:'big/197f9ff1.gif',tokens:[':big30']},{src:'big/60e6f22e.gif',tokens:[':big31']},{src:'big/24f8835d.gif',tokens:[':big32']},{src:'big/24dd51b5.gif',tokens:[':big33']},{src:'big/9c78fd70.gif',tokens:[':big34']},{src:'big/8ca92a4a.gif',tokens:[':big35']},{src:'big/8c67eb0e.gif',tokens:[':big36']},{src:'big/7dcdd6a7.gif',tokens:[':big37']},{src:'big/7d3e9002.gif',tokens:[':big38']},{src:'big/5c0f6a8e.gif',tokens:[':big39']},{src:'big/5bab2aed.gif',tokens:[':big40']},{src:'big/4cd8fb92.gif',tokens:[':big41']},{src:'big/3ebe996a.gif',tokens:[':big42']},{src:'big/3e9696aa.gif',tokens:[':big43']},{src:'big/1fab9fc9.gif',tokens:[':big44']},{src:'big/1de1837a.gif',tokens:[':big45']},{src:'big/1de7adee.gif',tokens:[':big46']},{src:'big/1d1bca51.gif',tokens:[':big47']},{src:'big/LNwBPBsrueru6nF.gif',tokens:[':big50']},{src:'big/01lqBI7fr52fE8kgH.gif',tokens:[':big51']},{src:'big/1cUNWJ5lIXFcVE7RtV.gif',tokens:[':big52']},{src:'big/emp56wHqqpWk.gif',tokens:[':big53']},{src:'big/6E98inxuW1ukHqeP.gif',tokens:[':big54']},{src:'big/8XJLedxcf8vMUd.gif',tokens:[':big55']},{src:'big/32PynRTOa1IdTQ.gif',tokens:[':big56']},{src:'big/JpoY1skrdCGdx.gif',tokens:[':big57']},{src:'big/yZeBKfSIkk9NEiPiE.gif',tokens:[':big58']},{src:'big/yyHLoHtdu2f8.gif',tokens:[':bi59']},{src:'big/McSCcezbwaib.gif',tokens:[':big60']},{src:'big/YKHPbvZ3PUw4XpCrHn.gif',tokens:[':big61']},{src:'big/CGK2EnLKH86zC.gif',tokens:[':big62']},{src:'big/cqgrqxBVbf2O.gif',tokens:[':big63']},{src:'big/asvbqpYtNoVXaF8E.gif',tokens:[':big64']},{src:'big/w4elxbCpB60Loort.gif',tokens:[':big65']},{src:'big/EJdxbdDZoywR5oz.gif',tokens:[':big66']},{src:'big/m7h1ZLu4lDvl1.gif',tokens:[':big67']},{src:'big/VJVqzGfYHiSK8wE.gif',tokens:[':big68']},{src:'big/fFOIxfDtz5ZV2.gif',tokens:[':big69']},{src:'big/IBg3SM128S8K0.gif',tokens:[':big70']},{src:'big/QJc2OdQuL0Rw.gif',tokens:[':big71']},{src:'big/Uk5rUoR1i3au0ZgHo.gif',tokens:[':big72']},{src:'big/72gkGNYwQpMP8.gif',tokens:[':big73']},{src:'big/iTGXUqCflDak.gif',tokens:[':big74']},{src:'big/S9DIgkiVhA99Z.gif',tokens:[':big75']},{src:'big/4bj3EU5NaXSZMpzrT.gif',tokens:[':big76']},{src:'big/oHTXAtJFSwKHuIj6.gif',tokens:[':big77']},{src:'big/hdf7kjSWdFJn4kgg.gif',tokens:[':big78']},{src:'big/OsBTiFK92Izi.gif',tokens:[':big79']},{src:'big/kw4EMtqRNvEFSI.gif',tokens:[':big80']},{src:'big/N82FQYVRBtFQ.gif',tokens:[':big81']},{src:'big/20150122_1.gif',tokens:[':big82']},{src:'big/20150122_2.gif',tokens:[':big83']},{src:'big/20150122_3.gif',tokens:[':big84']},{src:'big/20150122_4.gif',tokens:[':big85']},{src:'big/20150122_5.gif',tokens:[':big86']},{src:'big/20150122_6.gif',tokens:[':big87']},{src:'big/20150122_7.gif',tokens:[':big88']},{src:'big/20150122_9.gif',tokens:[':big90']},{src:'big/20150122_10.gif',tokens:[':big91']},{src:'big/20150122_12.gif',tokens:[':big93']},{src:'big/20150122_13.gif',tokens:[':big94']},{src:'big/20150122_14.gif',tokens:[':big95']},{src:'big/20150122_15.gif',tokens:[':big96']},{src:'big/20150122_16.gif',tokens:[':big97']},{src:'big/20150122_18.gif',tokens:[':big99']},{src:'big/20150122_20.gif',tokens:[':big_101']},{src:'big/20150122_21.gif',tokens:[':big_102']},{src:'big/20150122_22.gif',tokens:[':big_103']},{src:'big/20150122_23.gif',tokens:[':big_104']},{src:'big/20150122_24.gif',tokens:[':big_105']},{src:'big/20150122_25.gif',tokens:[':big_106']},{src:'big/20150122_26.gif',tokens:[':big_107']},{src:'big/20150122_27.gif',tokens:[':big_108']},{src:'big/20150122_28.gif',tokens:[':big_109']},{src:'big/20150122_29.gif',tokens:[':big_110']},{src:'big/20150122_30.gif',tokens:[':big_111']},{src:'big/20150122_31.gif',tokens:[':big_112']},{src:'big/20150122_32.gif',tokens:[':big_113']},{src:'big/20150122_33.gif',tokens:[':big_114']},{src:'big/20150122_34.gif',tokens:[':big_115']},{src:'big/20150122_35.gif',tokens:[':big_116']},{src:'big/20150122_36.gif',tokens:[':big_117']},{src:'big/20150122_38.gif',tokens:[':big_119']},{src:'big/20150122_39.gif',tokens:[':big_120']},{src:'big/20150122_40.gif',tokens:[':big_121']},{src:'big/20150122_41.gif',tokens:[':big_122']},{src:'big/20150122_42.gif',tokens:[':big_123']},{src:'big/20150122_43.gif',tokens:[':big_124']},{src:'big/20150122_44.gif',tokens:[':big_125']},{src:'big/20150122_45.gif',tokens:[':big_126']},{src:'big/20150122_46.gif',tokens:[':big_127']},{src:'big/20150122_47.gif',tokens:[':big_128']},{src:'big/20150122_48.gif',tokens:[':big_129']},{src:'big/20150122_49.gif',tokens:[':big_130']},{src:'big/20150122_50.gif',tokens:[':big_131']},{src:'big/20150122_51.gif',tokens:[':big_132']},{src:'big/20150122_52.gif',tokens:[':big_133']},{src:'big/20150122_53.gif',tokens:[':big_134']},{src:'big/20150122_54.gif',tokens:[':big_135']},{src:'big/20150122_55.gif',tokens:[':big_136']},{src:'big/20150122_56.gif',tokens:[':big_137']},{src:'big/20150122_57.gif',tokens:[':big_138']},{src:'big/20150122_58.gif',tokens:[':big_139']},{src:'big/20150122_59.gif',tokens:[':big_140']},{src:'big/20150122_60.gif',tokens:[':big_141']},{src:'big/20150122_61.gif',tokens:[':big_142']},{src:'big/20150122_62.gif',tokens:[':big_143']},{src:'big/20150122_63.gif',tokens:[':big_144']},{src:'big/20150122_64.gif',tokens:[':big_145']},{src:'big/20150122_65.gif',tokens:[':big_146']},{src:'big/20150122_66.gif',tokens:[':big_147']},{src:'big/20150122_68.gif',tokens:[':big_149']},{src:'big/20150122_69.gif',tokens:[':big_150']},{src:'big/20150122_70.gif',tokens:[':big_151']},{src:'big/20150122_71.gif',tokens:[':big_152']},{src:'big/20150122_72.gif',tokens:[':big_153']},{src:'big/20150122_73.gif',tokens:[':big_154']},{src:'big/20150122_74.gif',tokens:[':big_155']},{src:'big/20150122_75.gif',tokens:[':big_156']}],smileyTextCollection:[{src:'text/ff1b0901.gif',tokens:[':text01'],w:476},{src:'text/fbaecdbe.gif',tokens:[':text02'],w:396},{src:'text/e895b57c.png',tokens:[':text03']},{src:'text/e3dead2b.gif',tokens:[':text04']},{src:'text/d217f3d1.jpg',tokens:[':text05']},{src:'text/d19c20d5.jpg',tokens:[':text06']},{src:'text/d11b51d6.jpg',tokens:[':text07']},{src:'text/bc6831ac.gif',tokens:[':text08']},{src:'text/b959bf11.gif',tokens:[':text09']},{src:'text/b6b83221.png',tokens:[':text10']},{src:'text/a98fd272.gif',tokens:[':text11'],w:694},{src:'text/31240cd6.gif',tokens:[':text12'],w:728},{src:'text/6436ca7f.gif',tokens:[':text13'],w:388},{src:'text/3844d773.gif',tokens:[':text14']},{src:'text/2640dd4d.jpg',tokens:[':text15'],w:728},{src:'text/582d5f97.gif',tokens:[':text16']},{src:'text/419fec20.gif',tokens:[':text17']},{src:'text/0106d031.gif',tokens:[':text18'],w:420},{src:'text/67d119a1.png',tokens:[':text19'],w:400},{src:'text/49bc795f.png',tokens:[':text20']},{src:'text/042de6cd.gif',tokens:[':text21']},{src:'text/27a11486.gif',tokens:[':text22']},{src:'text/11df7ac4.gif',tokens:[':text23']},{src:'text/8f2bbd68.gif',tokens:[':text24'],w:728},{src:'text/8ea9a80f.gif',tokens:[':text25']},{src:'text/8bfd58b5.gif',tokens:[':text26'],w:468},{src:'text/7ff39218.gif',tokens:[':text27']},{src:'text/7f2bdb08.gif',tokens:[':text28']},{src:'text/07d8d1dc.gif',tokens:[':text29']},{src:'text/06fcab55.gif',tokens:[':text30'],w:400},{src:'text/6efcf2f4.gif',tokens:[':text31']},{src:'text/6d32215c.gif',tokens:[':text32']},{src:'text/06adc5d5.jpg',tokens:[':text33']},{src:'text/3c1605a9.gif',tokens:[':text34']},{src:'text/2e2d5ffe.jpg',tokens:[':text35'],w:372},{src:'text/0a555655.gif',tokens:[':text36'],w:400},{src:'text/20150122_8.gif',tokens:[':text37']},{src:'text/20150122_17.gif',tokens:[':text39']},{src:'text/20150122_11.gif',tokens:[':text38']},{src:'text/20150122_19.gif',tokens:[':text40']},{src:'text/20150122_37.gif',tokens:[':text41']}],smileyPatterns:[],smileyBigPatterns:[],smileyTextPatterns:[],baseUrl:''}
$.extend($.Smileys,{init:function(){for(var i=0;i<this.smileyCollection.length;i++){for(var j=0;j<this.smileyCollection[i].tokens.length;j++){this.smileyPatterns.push([new RegExp(this.smileyCollection[i].tokens[j].replace(/([\(\)\[\]\{\}\.\?\^\$\|\-])/g,"\\$1"),"g"),'<img class="smiley" src="'+this.baseUrl+'/images/chat/smiles/'+this.smileyCollection[i].src+'" '+(this.smileyCollection[i].h?'height="'+this.smileyCollection[i].h+'"':'')+' />']);}}
for(i=0;i<this.smileyBigCollection.length;i++){for(var j=0;j<this.smileyBigCollection[i].tokens.length;j++){this.smileyBigPatterns.push([new RegExp(this.smileyBigCollection[i].tokens[j].replace(/([\(\)\[\]\{\}\.\?\^\$\|\-])/g,"\\$1"),"g"),'<img class="smiley smiley_big" src="'+this.baseUrl+'/images/chat/smiles/'+this.smileyBigCollection[i].src+'" />']);}}
for(i=0;i<this.smileyTextCollection.length;i++){for(var j=0;j<this.smileyTextCollection[i].tokens.length;j++){this.smileyTextPatterns.push([new RegExp(this.smileyTextCollection[i].tokens[j].replace(/([\(\)\[\]\{\}\.\?\^\$\|\-])/g,"\\$1"),"g"),'<img class="smiley smiley_text" src="'+this.baseUrl+'/images/chat/smiles/'+this.smileyTextCollection[i].src+'" '+(this.smileyTextCollection[i].w?'w="'+this.smileyTextCollection[i].w+'"':'')+' />']);}}},replace:function(message,replacePremium){for(var i=0;i<this.smileyPatterns.length;i++){message=message.replace(this.smileyPatterns[i][0],this.smileyPatterns[i][1]);}
if(true==replacePremium){for(var i=0;i<this.smileyBigPatterns.length;i++){message=message.replace(this.smileyBigPatterns[i][0],this.smileyBigPatterns[i][1]);}
for(var i=0;i<this.smileyTextPatterns.length;i++){message=message.replace(this.smileyTextPatterns[i][0],this.smileyTextPatterns[i][1]);}}
return message;}});$.fn.initSmilePanel=function(options){return this.each(function(){var $div=$('<div />').addClass('smilePanel');var $button=$(this).find('.smileButton');var $target=$(this).find('.sendInput');var chatWidth=$('#bChat').width();if(options.styleClass){$div.addClass(options.styleClass);}
if(options.inChat){$div.append('<div class="closeBtn" />')}
var smileys=$.Smileys;var loadSmiles=function(){var smileyTabs='';var smileyFrame;var smileyBigFrame='';var smileyTextFrame='';var smileyVipMessage='';chatWidth=$('#bChat').width();if(true==options.premium){smileyTabs='<div class="smilePanelTabs"><a class="smilePanelTab smilePanelTabActive" href="javascript:void(0)">'+__('Little smiles')+'</a> | <a class="smilePanelTab" href="javascript:void(0)">'+__('Big smiles')+'</a> | <a class="smilePanelTab" href="javascript:void(0)">'+__('Text smiles')+'</a></div>';}
if(!options.canUsePremium){smileyVipMessage='<div class="smilePanelVipMessage">'+__('%b1%Large smiles are only %s1%available for vip users.%s2%%b2%Get access to cool emoticons and smiles, %a1%become a VIP user!%a2%',{b1:'<strong>',b2:'</strong>',s1:'<span>',s2:'</span>',a1:'<a href="#" onclick="return chat.buyVipPopup(\'vipSmileBoldTextPopupId\')">',a2:'</a>'})+'</div>';}
smileyFrame=getSmileFrameLittle();if(true==options.premium){smileyBigFrame='<div class="smilePanelFrame smilePanelFrameBig">'+smileyVipMessage;for(var i=0;i<smileys.smileyBigCollection.length;i++){smileyBigFrame+='<img token="'+smileys.smileyBigCollection[i].tokens[0]+'" src="'+smileys.baseUrl+'/images/chat/smiles/'+smileys.smileyBigCollection[i].src+'" />';}
smileyBigFrame+='</div>';smileyTextFrame='<div class="smilePanelFrame smilePanelFrameText">'+smileyVipMessage;for(var i=0;i<smileys.smileyTextCollection.length;i++){smileyTextFrame+='<img token="'+smileys.smileyTextCollection[i].tokens[0]+'" src="'+smileys.baseUrl+'/images/chat/smiles/'+smileys.smileyTextCollection[i].src+'"';if(smileys.smileyTextCollection[i].width){smileyTextFrame+=' width="100%"';}
smileyTextFrame+='/>'}
smileyTextFrame+='</div>';}
$div.append(smileyTabs).append(smileyFrame).append(smileyBigFrame).append(smileyTextFrame).find('img').click(function(){if(true==options.premium){if($(this).parents('.smilePanelFrameBig').length||$(this).parents('.smilePanelFrameText').length){if(undefined!=window.chat&&chat.userData&&chat.userData.username){if(chat.userData.role&&chat.userData.role=='member'){if(!chat.userData.isPayable||chat.userData.accessLevel=='free'){chat.buyTokensPopup();chat.addServiceMessage(__('To become a premium (GOLD) member for life and unlock this feature, all you have to do is buy any amount of tokens one time!'),'alert');return false;}}}}}
var value=$target.val();var token=' '+$(this).attr('token')+' ';$target.focus().val('');$target.focus().val(value+token);});if(true==options.premium){$div.find('.smilePanelTab').bind('click',function(){$(this).addClass('smilePanelTabActive').siblings().removeClass('smilePanelTabActive').parents('.smilePanel').find('.smilePanelFrame').hide().removeClass('smilePanelFrameActive').eq($(this).index()).fadeIn(150,function(){$(this).addClass('smilePanelFrameActive')});});}
$('body').append($div).bind('click',function(e){var $clicked=$(e.target);if(false==($clicked.hasClass("smilePanel")||$clicked.hasClass("smileButton")||$clicked.parents(".smileButton").length||$clicked.hasClass("smilePanelTab"))){$div.hide();}});};var getSmileFrameLittle=function(){var smileyFrame,countColumns=7,frameClass='smilePanelFrame smilePanelFrameLittle',$activeFrame=$('.smilePanelFrameActive');if(chatWidth<356){countColumns=6;}else if(chatWidth<320){countColumns=5;}
if(!$activeFrame.length||($activeFrame.length&&$activeFrame.hasClass('smilePanelFrameLittle'))){frameClass+=' smilePanelFrameActive';}
smileyFrame='<div class="'+frameClass+'"><table><tr>';for(var i=0;i<smileys.smileyCollection.length;i++){if(i>0&&i%countColumns==0){smileyFrame+='</tr><tr>';}
smileyFrame+='<td><img token="'+smileys.smileyCollection[i].tokens[0]+'" src="'+smileys.baseUrl+'/images/chat/smiles/'+smileys.smileyCollection[i].src+'" /></td>';}
return smileyFrame+'</tr></table></div>';};$button.click(function(){if(!$('#bSignup').length&&!$('#member_join_popup_trigger').length){if(!$div.find('.smilePanelFrame').length){loadSmiles();}
var t,l;if(true==options.isMobile){$(".smilePanel, .smilePanelFrame").css('width',$('.chat-panel').width());var h=$('#bChat .historyContainer').height()+10;$(".smilePanel").css('height',h);$(".smilePanelFrame").css('height',h-$(".smilePanelTabs").height()-10);t=$('#bChat .historyContainer').offset().top;l=$('#bChat').offset().left;}else{var buttonOffset=$(this).offset();t=buttonOffset.top-$div.height()+12;l=buttonOffset.left-$div.width()+12;if($div.hasClass('smilePanelFixed')){t-=$(window).scrollTop();l-=$(window).scrollLeft();if(l<=0){l=0;}}
if($div.hasClass('in_chat')){t-=37;l+=2;}
if($(this).hasClass('smileButtonModel')){t-=56;l+=30;}
if($('#chat_bar_v2').length){t-=36;l+=78;}
if(window.isRTL){l+=$(".smilePanel").width();}}
$div.css('top',t+'px');$div.css('left',l+'px');$div.toggle();}else{if($div.hasClass('in_chat')&&$('#login_or_join_popup').length&&typeof $.openLoJPopup=='function'){$.openLoJPopup();}else if($('#member_join_popup').length){$.showSignupPopup(false);}else{$('#bSignup').click();}}
return false;});});}
$.fn.renderSmileys=function(replacePremium){return this.each(function(){$(this).html($.Smileys.replace($(this).html().replace(/&amp;/g,"&"),replacePremium));});}
$(document).ready(function(){if($.cdnRootUrl){$.Smileys.baseUrl=$.cdnRootUrl;}
$.Smileys.init();});})(jQuery);
(function($){$.extend(chat,{chatBoxes:{},chatBoxFocus:{},chatBoxNewMessages:{},createChatBox:function(pUserData,needFocus){var chatBoxId=pUserData.username;this.debug('createChatBox:'+chatBoxId);if(this.hasChatBox(chatBoxId)){if(this.isChatBoxClosed(chatBoxId)){$("#chatbox_"+chatBoxId).css('display','block');this.redrawChatBoxes();}
else if(this.isChatBoxMinimized(chatBoxId)){this.minimizeChatBox(chatBoxId);}
$("#chatbox_"+chatBoxId+" .sendInput").focus();return;}
$(" <div />").attr("id","chatbox_"+chatBoxId).addClass("chatbox chatbox_green").html('<div class="head"><div class="title">'+pUserData.displayName+'</div><div class="options"><a href="javascript:void(0)" onclick="return chat.minimizeChatBox(\''+chatBoxId+'\')" class="minimize"></a> <a href="javascript:void(0)" onclick="return chat.closeChatBox(\''+chatBoxId+'\')" class="close"></a></div><br clear="all"/></div><div class="history"></div><div class="inputContainer"><input class="sendInput" type="text" onkeydown="return chat.checkChatBoxInputKey(event,\''+chatBoxId+'\');"/><input value="'+__('Send')+'" type="submit" class="sendButton" onclick="return chat.sendChatBoxMessage(\''+chatBoxId+'\');"/></div>').appendTo($("body"));$("#chatbox_"+chatBoxId).css('bottom','0px');var chatBoxeslength=0;for(var i in this.chatBoxes){if($("#chatbox_"+i).css('display')!='none'){chatBoxeslength++;}}
if(chatBoxeslength==0){$("#chatbox_"+chatBoxId).css('right','20px');}else{var width=(chatBoxeslength)*(225+7)+20;$("#chatbox_"+chatBoxId).css('right',width+'px');}
this.chatBoxes[chatBoxId]=pUserData;this.chatBoxFocus[chatBoxId]=false;var self=this;$("#chatbox_"+chatBoxId+" .sendInput").blur(function(){self.chatBoxFocus[chatBoxId]=false;$("#chatbox_"+chatBoxId+" .sendInput").removeClass('sendInputSelected');}).focus(function(){self.chatBoxFocus[chatBoxId]=true;self.chatBoxNewMessages[chatBoxId]=false;clearInterval($('#chatbox_'+chatBoxId)[0].blinkInt);$('#chatbox_'+chatBoxId)[0].blinkInt=undefined;$('#chatbox_'+chatBoxId+' .head').removeClass('blink');$("#chatbox_"+chatBoxId+" .sendInput").addClass('sendInputSelected');});$("#chatbox_"+chatBoxId).click(function(){if($('#chatbox_'+chatBoxId+' .sendInput').css('display')!='none'){$("#chatbox_"+chatBoxId+" .sendInput").focus();}});$("#chatbox_"+chatBoxId).show();if(needFocus){$("#chatbox_"+chatBoxId+" .sendInput").focus();}},redrawChatBoxes:function(){var align=0;for(var i in this.chatBoxes){if($("#chatbox_"+i).css('display')!='none'){if(align==0){$("#chatbox_"+i).css('right','20px');}else{var width=(align)*(225+7)+20;$("#chatbox_"+i).css('right',width+'px');}
align++;}}},minimizeChatBox:function(chatBoxId){if(this.isChatBoxMinimized(chatBoxId)){$('#chatbox_'+chatBoxId+' .history').css('display','block');$('#chatbox_'+chatBoxId+' .inputContainer').css('display','block');$("#chatbox_"+chatBoxId+" .history").scrollTop($("#chatbox_"+chatBoxId+" .history")[0].scrollHeight);}else{$('#chatbox_'+chatBoxId+' .history').css('display','none');$('#chatbox_'+chatBoxId+' .inputContainer').css('display','none');}
return false;},closeChatBox:function(chatBoxId){$('#chatbox_'+chatBoxId).css('display','none');this.redrawChatBoxes();return false;},hasChatBox:function(chatBoxId){return $("#chatbox_"+chatBoxId).length>0;},isChatBoxClosed:function(chatBoxId){return $('#chatbox_'+chatBoxId).css('display')=='none';},isChatBoxMinimized:function(chatBoxId){return $('#chatbox_'+chatBoxId+' .history').css('display')=='none';},checkChatBoxInputKey:function(event,chatBoxId){if(event.keyCode==13){this.sendChatBoxMessage(chatBoxId);return false;}},sendChatBoxMessage:function(chatBoxId){var $input=$('#chatbox_'+chatBoxId+' .sendInput');var msg=__('We are sorry but guests are not allowed to chat')+'. <a href="javascript:void(0)" onclick="return chat.signupPopup(true)">'+__('Click here to create a 100% FREE account')+'</a> '+__('and begin chatting with your favorite models')+'!';this.addMessage('<p class="alert guest_chat_alert">'+msg+'</p>',$('#chatbox_'+chatBoxId+' .history'));$input.val('');$input.focus();return false;},incomingChatBoxMessage:function(message,from,to){var targetChatBoxId=(from.username==this.userData.username)?to:from.username;this.debug('incomingPrivateMessage from: '+from.username);if(!this.hasChatBox(targetChatBoxId)){this.createChatBox(from,false);}
else if(this.isChatBoxClosed(targetChatBoxId)){$("#chatbox_"+targetChatBoxId).css('display','block');this.redrawChatBoxes();}
else if(this.isChatBoxMinimized(targetChatBoxId)){if($("#chatbox_"+targetChatBoxId)[0].blinkInt==undefined){$("#chatbox_"+targetChatBoxId)[0].blinkInt=setInterval(function(){$("#chatbox_"+targetChatBoxId+" .head").toggleClass('blink');},1000*1);}}
this.addMessage(this.formatMessage(message,from),$("#chatbox_"+targetChatBoxId+" .history"));}});$(document).ready(function(){var firstMessages=[__('Hey hun, how u doing?'),__('Hey! How are you?'),__('Wanna have some fun bb? :)'),__('How are you? :girl_kiss'),__('Hello cutie ;)')];var nextMessages=[__("Where are you? Why u don't answer :("),__('Are you here hun?'),__('Where have you gone?')];var messageInt,userData,lastSpoofTime=null;function showMessage(isFirst){if(window.chat){if((lastSpoofTime&&lastSpoofTime+1000*60*3>new Date().getTime())||chat.performerStatus!='public'||$('#bChat .video_limit_alert').length)return;var performerData=chat.performerData;performerData.isPerformer=true;performerData.role='model';if(true===isFirst){chat.incomingChatBoxMessage(firstMessages[rand(0,firstMessages.length)],performerData,chat.userData);messageInt=setTimeout(function(){showMessage(false)},1000*rand(10,30));lastSpoofTime=new Date().getTime();}else{chat.incomingChatBoxMessage(nextMessages[rand(0,nextMessages.length)],performerData,chat.userData);}}}
if($.ajaxLoadBannersUrl){$("#bChat").bind("onUserData",function(e){messageInt=setTimeout(function(){showMessage(true)},1000*10);});}
$("#bChat").bind("onRoomClose",function(e){this.chatBoxes={};$('.chatbox').remove();clearTimeout(messageInt);});});function rand(min,max){return Math.floor(Math.random()*(max-1)+min);}})(jQuery);
