!function(){"use strict";function e(){try{var e=window.piximedia&&window.piximedia.pam?window.piximedia.pam:{},t=(e.globalOptions||{}).pageLoadStart||new Date(0),i=((new Date-t)/1e3).toString();return i.match(/\..$/)&&(i+="00"),i.match(/\...$/)&&(i+="0"),"[pam]["+i+"] "}catch(o){return"[pam] "}}function t(i,o){t.trail=t.trail||[],t.trail.push("["+i+"] "+e()+Array.prototype.slice.call(o).join(", "))}function i(){if(t("debug",arguments),D){var i=Array.prototype.slice.call(arguments);i[0]&&(i[0]=e()+i[0]),A.console&&A.console.log&&(A.console.log.apply?A.console.log.apply(A.console,i):A.console.log(i[0]))}}function o(){if(t("error",arguments),D){var i=Array.prototype.slice.call(arguments);i[0]&&(i[0]=e()+i[0]),A.console&&A.console.error&&(A.console.error.apply?A.console.error.apply(A.console,i):A.console.error(i[0]))}}function n(){if(t("log",arguments),D){var i=Array.prototype.slice.call(arguments);i[0]&&(i[0]=e()+i[0]),A.console&&A.console.log&&(A.console.log.apply?A.console.log.apply(A.console,i):A.console.log(i[0]))}}function a(e){return"document.write('"+e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"');"}function r(e){for(var t=e.replace(/\\r/g,"\n").split("\n"),i="",o=0;o<t.length;o++){var n=t[o];n&&(i+="document.write('"+n.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"');")}return i}function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e,t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}function p(e,t,i){for(var o=[],n=0;n<e.length;n++){var a,r=e[n];a="function"==typeof t?t(r):i?r[t]===i:r===t,a||o.push(r)}return o}function d(e){var t=new Image;A._piximedia.images.push(t),t.src=e}function l(e){var t=(e||"").split("."),i=t.shift();return t.sort(function(e,t){var i=e.match(/^[0-9]+$/),o=t.match(/^[0-9]+$/);if(i&&o){var n=parseInt(e,10),a=parseInt(t,10);return a>n?-1:n>a?1:0}return o&&!i?-1:i&&!o?1:t>e?-1:e>t?1:0}),i+(t.length?"."+t.join("."):"")}function u(e){var t=e.match(/^ *([a-zA-Z0-9_.-]+) *=>/);return t?t[1]:e}function m(e){return e.toString().match(/^[0-9]+%$/)?parseInt(e,10)+"pct":parseInt(e,10)}function h(e){e.style.margin=0,e.style.padding=0,e.style.border=0,e.style.position="relative",e.style.overflow="visible",e.style.cursor="default",e.style.lineHeight="normal",e.style.wordSpacing="normal",e.style.fontSize="11px",e.style.fontStyle="normal",e.style.letterSpacing="0px",e.style.WebkitFontSmoothing="antialiased",e.style.MozOsxFontSmoothing="grayscale",e.style.fontFamily="Arial, Helvetica, sans-serif",e.style.left=e.style.right=0,e.style.textAlign="left",e.style.display="block",e.style.clear="both",e.style.maxWidth="none"}function f(e,t){this.events={},this.id=t,this.target=e||this}function v(e,t){var i=this;this.pam=e;for(var o in t)t.hasOwnProperty(o)&&(this[o]=t[o]);e&&e.eventEmitterForObject&&(e.eventEmitterForObject(this,this.uniqid),i.pam.master&&e.on("something-has-been-seen",function(){i.somethingHasBeenSeen()}))}function g(e,t,i){v.call(this,e,i),this.position=t}function y(e,t){for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i]);this.cgAd=e,this.cgOptions=t,this.cgOptions.id_reporting&&(this.creativeId=this.cgOptions.id_reporting),this.cgOptions.args&&(this.args=this.cgOptions.args)}function b(e,t,a){var r=this;this.pam=e,this.options=a||{},this.position=t,this.active=!0,t.iframes=t.iframes||[],t.iframes.push(this),this.pam.eventEmitterForObject(this,"iframe:"+t.positionId),r.pam.master&&(this.on("host-room",function(e,t){r.hostRoom(e,t)}),this.on("enable-responsive-events",function(){r.enableResponsiveEvents()}),this.on("remove",function(){r.pam.emit("iframe:remove",t.positionId),t.decoratedBy&&t.decoratedBy.emit("iframe:remove",t.positionId)})),this.trackVisibility=this.pam.master&&t.decoratedBy?t.decoratedBy.getAllVisibilityForPixiPositionId(t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId)):[],this.trackingVisibility=!1,this.on("error",function(e){r.lastError=e}),this.options.doNotResize||this.on("resize",function(a){if(r.active){var s=function(){if(!r.iframe)return setTimeout(s,50);if(r.pam.master)if(a.onlyIfNoSurface&&(parseInt(r.iframe.style.width,10)||0)>1&&(parseInt(r.iframe.style.height,10)||0)>1)i("Not resizing iframe because it already has a surface");else if(setTimeout(function(){e.emit("position-has-been-decorated",t.positionId),e.tryAndActivateAds()},0),a.animation)r.pam.loadLibrary("sweetlib.js",function(){A.piximedia.SweetLib.animate(r.iframe,a.animation).play()}),r.pam.log("** Resizing iframe for PAM "+r.pam.siteId+"/"+r.pam.placementId+":"+r.pam.mode+" to animation="+JSON.stringify(a.animation),r.iframe);else{var c,p,d,l,u,f,v,g,y=a.css||{},b=y.position,w=!1;if(r.position.positionId.match(/^room\./))for(var x=r.iframe.parentNode;x&&void 0!==x.className;x=x.parentNode)if(x.className.match(/pmRoom|pmBodyPosition/)){c=x;break}for(var I=r.iframe.parentNode;I&&void 0!==I.className;I=I.parentNode)if(I.className.match(/pmContainer/)){p=I;break}p&&p.parentNode&&p.parentNode.parentNode&&p.parentNode.parentNode.className.match(/pmMarkerContainer/)&&(d=p.parentNode.parentNode),p&&p.parentNode&&p.parentNode&&p.parentNode.className.match(/pmMarkerContainer/)&&(d=p.parentNode),p&&p.parentNode&&p.parentNode&&p.parentNode.className.match(/pmFillerRoomContainer/)&&(l=p.parentNode),a.width&&(a.width.toString().match(/^.*%$/)?(v=a.width,u=1):u=parseInt(a.width,10)),a.height&&(a.height.toString().match(/^.*%$/)?(g=a.height,w=!0,f=1):f=parseInt(a.height,10)),u&&l&&l.parentNode&&(l.parentNode.style.width=v||u+"px"),(u||f)&&p&&(a.resizeParent||p.className.match(/pmZeroSurface/))&&(p.className=p.className.replace(/pmZeroSurface/,""),p.style.position="relative"),y.hasOwnProperty("display")&&(""===y.display||"none"===y.display||"block"===y.display)&&p&&(p.style.display=y.display),function(e){return a.wallpaper?(a.container=a.container||{},a.container.css=a.container.css||{},a.container.css.position=a.container.css.position||"relative",a.container.css.overflow=a.container.css.overflow||"hidden",a.container.css.left=a.container.css.left||"50%",a.container.css.right=a.container.css.right||"",a.container.css.marginLeft=a.container.css.marginLeft||-u/2+"px",a.container.css.maxWidth=a.container.css.maxWidth||u+"px",r.pam.loadLibrary("sweetlib.js",function(){var i=A.piximedia.SweetLib,n=function(e){for(e=e.parentNode;e;e=e.nextSibling)if(e.children&&e.children.length&&!(e.id||"").match(/^(pm|pixi)/)){for(var t,n=0;n<e.children.length;n++){var a=e.children[n];if(a&&!(a.id||"").match(/^(pm|pixi)/)&&!(a.className||"").match(/pm|pixi/)){t=!0;break}}if(!t)continue;var r=i.gbcr(e);if(r.width&&r.height)return e}o("Couldn't find page container after marker")};r.pam.loadMarkerForPosition(t,function(t){var o,s=n(t);return i.fixPageContainerForWallpaper(s),void 0!==a.moveTop&&(o=i.moveTopOfPageContainer(s,a.moveTop,a.moveTopOptions),r.pageContainer=s,r.moveTop=a.moveTop),a.bodyBackgroundColor&&i.setBodyBackgroundColor({color:a.bodyBackgroundColor}),o&&!o.pmHostedRoom&&(o.pmHostedRoom=!0,r.pam.hostRoom("pcfiller",{},function(){var e=o.ownerDocument.createElement("div");return e.className="pmFillerRoomContainer",h(e),o.style.marginLeft="auto",o.style.marginRight="auto",o.appendChild(e),e})),e()})}),void 0):e()}(function(){u&&("absolute"!==b||a.takeover||(r.iframe.parentNode.style.width=v||u+"px"),i("Resizing iframe to width="+(v||u),r.iframe),r.iframe.style.width=v||u+"px",p&&(parseInt(p.style.width||0,10)<=1||a.wallpaper)&&(p.style.width=v||u+"px",p.style.marginLeft=p.style.marginRight="auto"),c&&(c.style.width=v||u+"px",c.className.match(/pmCentered/)&&(c.style.marginLeft=Math.round(-u/2)+"px"))),f&&("absolute"!==b||a.takeover||(r.iframe.parentNode.style.height=g||f+"px"),i("Resizing iframe to height="+(g||f),r.iframe),r.iframe.style.height=c&&w?"100%":g||f+"px",c&&!a.takeover&&(c.style.height=g||f+"px"),c&&w&&(c.style.height=g||f+"px",p&&(p.style.height="100%")));for(var e in y)if(y.hasOwnProperty(e))try{r.iframe.style[e]=y[e]}catch(t){}if(p){var o="pmContainerSurface"+m(r.iframe.style.width||0)+"x"+m(r.iframe.style.height||0);if(p.className=(p.className||"").replace(/ +pmContainerSurface[0-9%pct]+x[0-9%pct]+/g,"")+" "+o,a.wallpaper&&(p.className=(p.className||"").replace(/ +pmContainerSurfaceWallpaper/,"")+" pmContainerSurfaceWallpaper"),a.container){var n=a.container.css;if(n)for(var s in n)if(n.hasOwnProperty(s))try{p.style[s]=n[s]}catch(t){}}}r.pam.log("** Resizing iframe for PAM "+r.pam.siteId+"/"+r.pam.placementId+":"+r.pam.mode+" to width="+a.width+", height="+a.height,r.iframe),!a.dontCenter&&a.width,r.pam.loadLibrary("sweetlib.js",function(){var e=A.piximedia.SweetLib;e.breakOverflow(r.iframe,a)}),a.stickToTop&&r.pam.loadLibrary("sweetlib.js",function(){var e=A.piximedia.SweetLib;if("mobile"!==e.device.name){var t=function(){var e,t,i,o,n,a,s=A.piximedia.SweetLib.gbcrfp(r.iframe).top,c=function(){if(r.iframe.pmFixed)r.iframe.pmFixed=!1,r.iframe.style.position="",r.iframe.style.marginTop="",r.iframe.parentNode.style.paddingTop="",r.iframe.parentNode.style.position=e,r.iframe.parentNode.style.height=t,r.iframe.parentNode.style.top=i,d&&(d.style.position=o,d.style.top=n,d.style.overflow=a);else{var c=A.piximedia.SweetLib.gbcrfp(r.iframe).top;c&&(s=c)}},p=function(s){s&&s.hopfh?Math.round(parseFloat(r.iframe.parentNode.style.paddingTop,10)||0)!==Math.round(s.hopfh)&&(r.iframe.parentNode.style.hasOwnProperty("transition")?(r.iframe.parentNode.style.transition="padding 0.2s",r.iframe.parentNode.style.paddingTop=s.hopfh+"px",A.piximedia.SweetLib.addEventOnce(r.iframe.parentNode,"transitionend",function(){r.iframe.parentNode.style.transition=""})):r.iframe.parentNode.style.paddingTop=s.hopfh+"px"):r.iframe.parentNode.style.paddingTop="",r.iframe.pmFixed||(r.iframe.pmFixed=!0,r.iframe.style.position="relative",r.iframe.style.top="0px",e=r.iframe.parentNode.style.position,t=r.iframe.parentNode.style.height,i=r.iframe.parentNode.style.top,r.iframe.parentNode.style.position="fixed",r.iframe.parentNode.style.top=0,r.iframe.parentNode.style.height=(parseFloat(r.iframe.style.height,10)||0)+(parseFloat(r.iframe.parentNode.style.paddingTop,10)||0)+"px",d&&(o=d.style.position,n=d.style.top,a=d.style.overflow,d.style.position="fixed",d.style.top=0,d.style.overflow=""))},l=function(){if(!(r.iframe.ownerDocument.body.className||"").match(/pmBodyAnimation/)&&!(r.pam.getTopmostDocument().body.className||"").match(/pmBodyAnimation/)){var e=r.iframe.ownerDocument.getElementById("pmFiller"),t=0;e&&(t=A.piximedia.SweetLib.gbcr(e).top);var i=A.piximedia.SweetLib.getHeightOfPositionFixedHeaders(r.iframe.ownerDocument,void 0,{force:!0})||0;Math.round(t)>=Math.round(i)?c():p({hopfh:i})}};l();var u=setInterval(l,100);return{remove:function(){clearInterval(u),c()}}};r.scrollToTheTop&&r.scrollToTheTop.remove(),r.scrollToTheTop=t()}})})}else{r.iframe.style.width="100%",r.iframe.style.height="100%";var k=r.iframe.parentNode,P=r.iframe.contentDocument&&r.iframe.contentDocument.body?r.iframe.contentDocument.body:void 0,_=P?P.parentNode:void 0;k&&(k.style.width="100%",k.style.height="100%"),P&&(P.style.width="100%",P.style.height="100%"),_&&(_.style.width="100%",_.style.height="100%"),a&&a.css&&a.css.background&&(r.iframe.style.background=a.css.background)}if(r.trackVisibility.length&&!r.trackingVisibility&&parseInt(r.iframe.style.width,10)&&parseInt(r.iframe.style.height,10)){r.trackingVisibility=!0,n("Tracking visibility for",r);var O=function(e){return function(){n("Reached visibility for position"),t.loadEventWait(e.event?e.event:10===e.duration&&.6===e.threshold?"AP_VIEWABLE":"AP_VIEWABLE:"+Math.round(100*e.threshold)+"PCT:"+e.duration+"S",{detail:t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId)||t.positionId})}};r.pam.loadLibrary("sweetlib.js",function(){for(var e=0;e<r.trackVisibility.length;e++){var t=r.trackVisibility[e];t.threshold||(t.threshold=.6),t.duration||(t.duration=10),A.piximedia.SweetLib.bindViewTracker({object:r.iframe,threshold:100*t.threshold,duration:t.duration},O(t))}})}};s()}else i("(not resizing inactive iframe)")}),r.pam.master&&this.on("register-visibility-callback",function(e){var t=e.callback;r.pam.loadLibrary("sweetlib.js",function(){if(!r.iframe)return void(r.visibilityCallbackOnHold=e);var i={object:r.iframe};for(var o in e)if(e.hasOwnProperty(o))switch(o){case"callback":break;default:i[o]=e[o]}A.piximedia.SweetLib.bindVisibilityTracker(i,function(e){r.emit(t,e)})})})}function w(e,t){var n=this;this.pam=e,this.eventQueue=[];for(var a in t)t.hasOwnProperty(a)&&(this[a]=t[a]);this.pam.eventEmitterForObject(this,"position:"+this.positionId),this.pam.master&&(this.on("start-timetracker-hover",function(){n.startTimetrackerHover()}),this.on("stop-timetracker-hover",function(){n.stopTimetrackerHover()})),this.on("expand",function(){if(n.expandedCount=(n.expandedCount||0)+1,n.pam.master&&1===n.expandedCount&&n.decoratedBy){var e=n.pixiPositionId||n.decoratedBy.getPixiPositionIdForPositionId(n.positionId);n.loadEventWait("EXPAND",{detail:e}),n.pam.loadLibrary("sweetlib.js",function(){n.timetrackerExpand=A.piximedia.SweetLib.setTimer("EXPAND",function(t,i){n.decoratedBy&&n.loadEventWait("TIMETRACKER::"+t,{duration:i,detail:e})}),n.timetrackerExpand.start()})}}),this.on("collapse",function(){if(!n.expandedCount)return o("Position has been collapsed, but was not expanded",n);if(!--n.expandedCount&&n.pam.master){var e=n.pixiPositionId||n.decoratedBy.getPixiPositionIdForPositionId(n.positionId);n.loadEventWait("COLLAPSE",{detail:e}),n.pam.loadLibrary("sweetlib.js",function(){n.timetrackerExpand.stop(),n.timetrackerExpand=void 0})}}),this.on("responsive",function(e){e.pageContainerWidth&&(this.pageContainerWidth=e.pageContainerWidth)}),this.pam.master&&(this.on("injected-into-pixi-position-id",function(e){i("Host injected as "+e),n.pixiPositionId=e}),this.on("injected-into-creative-group",function(e){i("Host injected as create group member"),n.setDecoratedByCG(new y(n.decoratedBy,e))}))}function x(e){if(this.pam=e,this.deferredObjects=[],A.pmAdData&&A.pmAdData.ajax)for(;A.pmAdData.ajax.length>0;){var t=A.pmAdData.ajax.shift();t&&(this.pam.msie&&6===this.pam.msie&&(t.use_pb=!0),this.loadAd(t))}}function I(e,t,i,a,r){var s,p,d,l=this,u=(a||{}).mode||"alliance",m=e+"/"+t+":"+u,h=a&&a.uniqid?a.uniqid:"pam"+Math.round(1e16*Math.random());if(this.birthdateCookie=this.getBirthdateCookie(),this.birthdateLS=this.getBirthdateLS(),A.piximedia._.pams=A.piximedia._.pams||{},A.piximedia._.pams[m]=A.piximedia._.pams[h]=A.piximedia.pam=this,!a.pageLoadStart){var g=this.getTopmostWindow();g.performance&&g.performance.timing&&g.performance.timing.responseStart?a.pageLoadStart=g.performance.timing.responseStart:a.pageLoadStart=new Date}if(this.msie=function(){var e=!1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}return e}(),this.chrome=function(){try{return navigator.userAgent.search("Chrome")>=0?parseInt(navigator.userAgent.match(/Chrome\/([0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.safari=function(){try{return-1===navigator.userAgent.search("Chrome")&&navigator.userAgent.search("Safari")>=0?parseInt(navigator.userAgent.match(/Version\/([.0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.firefox=function(){try{return navigator.userAgent.search("Firefox")>=0?parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.cssCalc=!(this.msie&&this.msie<9||this.safari&&this.safari<7||this.firefox&&this.firefox<31||this.chrome&&this.chrome<31),this.window=A,this.document=_,this.pixelQueue=[],this.animations={},this.containerClassName=D?"pmContainer_"+m.replace(/[^A-Za-z0-9]/g,"-"):"",this.globalEmitter=new f,this.globalOptions=a||{},this.master=!this.globalOptions.hosted,this.mode=u,this.positions={},this.winlostIframeIds={},this.allAvailableAds=i,this.explicitlyRegisteredPositionIds={},this.availableAds=[],this.decorativeAds=[],this.realAds=[],this.clickUrl=r,this.siteId=e,this.placementId=t,this.uniqKey=h,this.globalOptions.uniqid=h,this.campaignIdsWithImpressions={},this.adIdsWithImpressions={},this.checkTopDomain(),this.numberOfExplicitPositions=0,this.master&&!this.globalOptions.location)try{this.globalOptions.location=this.getTopmostWindow().location.toString()}catch(y){}for(this.eventEmitterForObject(this,"pam:"+this.globalOptions.uniqid),a.hasOwnProperty("documentHasFocus")&&(this.documentHasFocus=a.documentHasFocus),this.syncDocumentHasFocus(),this.master&&(this.on("js-impression-ad-campaign",function(e,t,i,o){l.sendJSImpressionAdCampaign(e,t,i,o)}),this.on("create-opaque-animation",function(e,t,i){l.createOpaqueAnimation(e,t,i)}),this.on("play-opaque-animation",function(e,t,i){l.playOpaqueAnimation(e,t,i)}),this.on("reverse-opaque-animation",function(e,t,i){l.reverseOpaqueAnimation(e,t,i)}),this.on("clear-opaque-animation",function(e){l.clearOpaqueAnimation(e)}),this.on("wait-top-dom-loaded",function(e){l.waitTopDomLoaded(function(){l.emit(e)})}),this.on("bind-visibility-tracker",function(e,t,i,o){l.bindVisibilityTracker(e,t,i,o)})),s=0;s<i.length;s++){if(d=i[s],d.uniqid||(d.uniqid="ad"+this.rand()),d.remapSnippets&&d.remapSnippets.length)for(var b=0;b<d.remapSnippets.length;b++){var w=d.remapSnippets[b];try{new Function(["pam"],w).call(d,l)}catch(y){o(y)}}var I=!0;if(d.require&&d.require.context)for(p=0;p<d.require.context.length;p++)if(!d.require.context[p]()){I=!1;break}if(I){var k=new v(this,d);this.availableAds.push(k),k.passback||this.realAds.push(k),d.require&&d.require.positions&&d.require.positions.length||!d.use||!d.use.positions||!d.use.positions.length||this.decorativeAds.push(k)}}if(!this.realAds.length&&this.globalOptions.keepAdringForRTA){_.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",_.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT";var P=this.globalOptions.pixiAdrName;_.cookie=P+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",_.cookie=P="=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"}A.piximedia.request_pos=A.piximedia.request_pos||{},A.piximedia.request_pos_sp=A.piximedia.request_pos_sp||{},A.piximedia.request_pos_sp[this.siteId]=A.piximedia.request_pos_sp[this.siteId]||{};var O=this.request_pos=A.piximedia.request_pos_sp[this.siteId][this.placementId]=A.piximedia.request_pos_sp[this.siteId][this.placementId]||{},S=this.globalOptions.rtaPositionsToRequestOnlyWhenRequired||[];for(s=0;s<this.availableAds.length;s++){if(d=this.availableAds[s],d.require&&d.require.positions)for(var E=this.parseRequestedPositions(d.require.positions),T=0;T<E.length;T++){O[E[T]]=!0,A.piximedia.request_pos[E[T]]=!0;var N=l.getPrerequisiteVirtualPosition(E[T]);N&&(O[N]=!0,A.piximedia.request_pos[N]=!0)}if(!d.passback&&d.use&&d.use.positions)for(var M=this.parseRequestedPositions(d.use.positions),j=0;j<M.length;j++){var R=M[j];if(-1===c(S,R)){O[R]=!0,A.piximedia.request_pos[R]=!0;var F=l.getPrerequisiteVirtualPosition(R);F&&(O[F]=!0,A.piximedia.request_pos[F]=!0)}}}if(this.globalOptions.requestPosJSSnippet)try{new Function(["request_pos","pam"],this.globalOptions.requestPosJSSnippet).call(l,A.piximedia.request_pos,l),new Function(["request_pos","pam"],this.globalOptions.requestPosJSSnippet).call(l,O,l)}catch(L){n("Could not execute request_pos JS snippet: ",L)}if(u.match(/^alliance/)){A.piximedia.core||(A.piximedia.core=new x(this));var q=this.siteId+"|"+this.placementId,W=setInterval(function(){try{var e=l.getTopmostWindow();e&&e.pmLoopBlocker&&e.pmLoopBlocker.hasOwnProperty(q)&&(clearInterval(W),l.loadEvent("PANIC",void 0,void 0,{fail_reason:"both_v1_and_position_tags"}))}catch(t){}},2e3);setTimeout(function(){l.sendStatistics()},1.5*(this.globalOptions.rendezvous_duration||C))}if(this.globalOptions.enableFooter&&this.hello({implicit:!0,ajax:!0,positionId:"footer"}),this.globalOptions.bwd_probability&&Math.random()<this.globalOptions.bwd_probability)try{var U=B.getData();this.loadEvent("BWD",void 0,void 0,{c1:U.browser_name,c2:U.browser_major_version,c3:U.os_name})}catch(y){}n(this.master?"Master PAM Created":"Hosted PAM Created")}function k(e,t){for(var i=l(e.positionId||""),o=l(t.positionId||""),n=i.split("."),a=o.split("."),r=0;r<n.length;r++){if(r>=a.length)return 1;var s=n[r],c=a[r];if(s.match(/^[0-9]+$/)&&c.match(/^[0-9]+$/)&&(s=parseInt(s,10),c=parseInt(c,10)),c>s)return-1;if(s>c)return 1}return a.length>n.length?-1:0}function P(e,t,i){var n,a=e.split(":"),r=[];n=a[0].split(".");for(var s in i)if(i.hasOwnProperty(s)){var p=i[s];if(t.activeAndNotUsed&&(!p.active||p.used))continue;if(t.notRequestedByActiveAd&&(!p.active||p.used||p.requested))continue;var d=p.positionId,u=d.split("."),m=u.slice(1);if(""===n[0]||"*"===n[0]||n[0]===u[0]){for(var h=!0,f=1;f<n.length;f++)if(-1===c(m,n[f])){h=!1;break}h&&r.push(p)}}r.sort(k);for(var v=1;v<a.length;v++)if(r.length){var g=a[v];switch(g){case"odd":g="mod2=0";break;case"even":g="mod2=1"}if("first"===g)r=[r[0]];else if("last"===g)r=[r[r.length-1]];else if("#"===g.charAt(0)){var y=parseInt(g.substr(1),10);r=r[y-1]?[r[y-1]]:[]}else if("optional"===g)r.length||r.push({});else if("decorated"===g){for(var b=[],w=0;w<r.length;w++)for(var x=r[w].iframes||[],I=0;I<x.length;I++){var P=x[I].iframe;P&&parseInt(P.style.width,10)>1&&parseInt(P.style.height,10)>1&&b.push(r[w])}r=b}else if("used"===g||"free"===g){for(var A="used"===g,_=[],O=0;O<r.length;O++)(r[O].used?!0:!1)===A&&_.push(r[O]);r=_}else if("exact"===g){for(var S=l(a[0]),C=[],E=0;E<r.length;E++){var T=l(r[E].positionId||"");S===T&&C.push(r[E])}r=C}else{var N=g.match(/^mod([0-9]+)={1,3}([0-9]+)$/);if(N){for(var D=parseInt(N[1],10),M=parseInt(N[2],10),j=[],R=0;R<r.length;R++)R%D===M&&j.push(r[R]);r=j}else o("Unknown restrictive: "+g),r=[]}}else{var B=a[v];switch(B){case"free":case"optional":t.positions||r.push({})}}return r}var A=window,_=document;if(!A.piximedia){try{!A.piximedia&&parent.piximedia&&(A.piximedia=parent.piximedia)}catch(O){}try{!A.piximedia&&parent.parent.piximedia&&(A.piximedia=parent.parent.piximedia)}catch(O){}try{!A.piximedia&&top.piximedia&&(A.piximedia=top.piximedia)}catch(O){}A.piximedia=A.piximedia||{};try{parent.piximedia=A.piximedia}catch(O){}try{parent.parent.piximedia=A.piximedia}catch(O){}try{top.piximedia=A.piximedia}catch(O){}}A.piximedia._=A.piximedia._||{},A._piximedia=A._piximedia||{},A._piximedia.images=A._piximedia.images||[];var S=2014031001,C=1e3,E="http://static.adserver.pm/host.html/revision=9413f2445515d9a63a676171282c7098",T="ad.piximedia.com",N="static.adserver.pm",D=!1,M=600,j=.05;t.get=function(){return t.trail||[]};var R="margin: 0; padding: 0; border: 0; position: relative; overflow: visible; cursor: default; word-spacing: normal; font-size: 11px; font-style: normal; letter-spacing: 0px; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; font-family: Arial, Helvetica, sans-serif; left: 0; right: 0; /*top: 0; bottom: 0;*/ text-align: left; display: block; clear: both",B=function(){"use strict;";function e(e){var t=_.createElement("a");return t.href=e,t}function t(){try{return""===top.document.referrer?!0:e(top.document.referrer).hostname==top.window.location.hostname?!1:!0}catch(t){}try{return""===_.referrer?!0:e(_.referrer).hostname==A.location.hostname?!1:!0}catch(t){return!1}}function i(){var e="",t="";return A.screen&&A.screen.width&&A.screen.height&&(e=A.screen.width,t=A.screen.height),{width:e,height:t,resolution:parseInt(e,10)&&parseInt(t,10)?e+"x"+t:"n/a"}}function o(){try{var e,t,i=parent.window?parent.window:window;return"undefined"!=typeof i.innerWidth?(e=i.innerWidth,t=i.innerHeight):"undefined"!=typeof i.document.documentElement&&"undefined"!=typeof i.document.documentElement.clientWidth&&0!==i.document.documentElement.clientWidth?(e=i.document.documentElement.clientWidth,t=i.document.documentElement.clientHeight):(e=i.document.getElementsByTagName("body")[0].clientWidth,t=i.document.getElementsByTagName("body")[0].clientHeight),{width:e,height:t}}catch(o){return{width:"",height:""}}}function n(){var e="unknown";return-1!=navigator.appVersion.indexOf("Win")?e="windows":-1!=navigator.appVersion.indexOf("Mac")?e="mac_os":-1!=navigator.appVersion.indexOf("X11")?e="unix":-1!=navigator.appVersion.indexOf("Linux")&&(e="linux"),{name:e}}function a(){var e,t,i,o=navigator.userAgent,n=navigator.appName,a=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return-1!=(t=o.indexOf("Opera"))?(n="opera",a=o.substring(t+6),-1!=(t=o.indexOf("Version"))&&(a=o.substring(t+8))):-1!=(t=o.indexOf("MSIE"))?(n="msie",a=o.substring(t+5)):-1!=(t=o.indexOf("Trident"))?(n="trident",a=o.substring(t+8)):-1!=(t=o.indexOf("Chrome"))?(n="chrome",a=o.substring(t+7)):-1!=(t=o.indexOf("Safari"))?(n="safari",a=o.substring(t+7),-1!=(t=o.indexOf("Version"))&&(a=o.substring(t+8))):-1!=(t=o.indexOf("Firefox"))?(n="firefox",a=o.substring(t+8)):(e=o.lastIndexOf(" ")+1)<(t=o.lastIndexOf("/"))&&(n=o.substring(e,t),a=o.substring(t+1),n.toLowerCase()==n.toUpperCase()&&(n=navigator.appName)),-1!=(i=a.indexOf(";"))&&(a=a.substring(0,i)),-1!=(i=a.indexOf(" "))&&(a=a.substring(0,i)),r=parseInt(""+a,10),isNaN(r)&&(a=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),{name:n,full_version:a,major_version:r}}function r(){var e=new Date;return{hour:e.getHours(),week_day:e.getDay()}}function s(){var e=A.name,t=/^pm\-(\S*)\-(\S*)\-(\d*)\-(\d*)\-(\S*)\-(\d*)$/,i=[];return e&&""!==e&&t.exec(e)?(i=t.exec(e),{site_id:i[1]&&""!==i[1]?i[1]:"",placement_id:i[2]&&""!==i[2]?i[2]:"",ad_id:i[3]&&""!==i[3]?i[3]:"",creative_id:i[4]&&""!==i[4]?i[4]:"",options:i[5]&&""!==i[5]?i[5]:"",sequence_number:i[6]&&""!==i[6]?i[6]:""}):{site_id:"",placement_id:"",ad_id:"",creative_id:"",options:"",sequence_number:""}}function c(){return{adr:function(){return void 0}()||""}}function p(){try{return window.top._piximediaiframetest=!0,window&&window.parent&&window.hasOwnProperty&&!window.parent.hasOwnProperty?!0:!1}catch(e){return!0}}function d(){var e,i;try{e=top.location.hostname,i=top.location.pathname}catch(o){}if(!e)try{e=parent.parent.parent.location.hostname,i=parent.parent.parent.location.pathname}catch(o){}if(!e)try{e=parent.parent.location.hostname,i=parent.parent.location.pathname}catch(o){}if(!e)try{e=parent.location.hostname,i=parent.location.pathname}catch(o){}if(!e)try{e=window.location.hostname,i=window.location.pathname}catch(o){}return{crossdomain:p()?1:0,hostname:e,path:(i||"").substring(0,128),section:(((i||"").match(/^\/([a-z0-9]+)/)||[])[1]||"").substring(0,32),firstpage:t()?1:0}}function l(e){var t,i,o={};if(e){for(t in e)if(e.hasOwnProperty(t)&&h[t])if("all"===e[t])for(i in h[t])h[t].hasOwnProperty(i)&&(o[t+"_"+i]=h[t][i]);else for(i in e[t])e[t].hasOwnProperty(i)&&h[t][i]&&(o[t+"_"+i]=h[t][i])}else for(t in h)if(h.hasOwnProperty(t))for(i in h[t])h[t].hasOwnProperty(i)&&(o[t+"_"+i]=h[t][i]);return o}var u={flash_major:"F",flash_minor:"f",flash_release:"r",viewport_width:"w",viewport_height:"h",screen_width:"W",screen_height:"H",screen_resolution:"R",os_name:"O",browser_name:"b",browser_full_version:"U",browser_major_version:"u",external_site_id:"s",external_placement_id:"p",external_ad_id:"a",external_creative_id:"c",external_options:"o",external_sequence_number:"n",time_hour:"T",time_week_day:"y",location_crossdomain:"X",location_hostname:"N",location_section:"S",location_path:"P",location_firstpage:"i",alliance_adr:"A",alliance_rtapos:"x"},m=function(){var e="undefined",t="object",i="Shockwave Flash",o="ShockwaveFlash.ShockwaveFlash",n="application/x-shockwave-flash",a=window,r=document,s=navigator,c=!1,p=function(){var p=typeof r.getElementById!=e&&typeof r.getElementsByTagName!=e&&typeof r.createElement!=e,d=s.userAgent.toLowerCase(),l=s.platform.toLowerCase(),u=l?/win/.test(l):/win/.test(d),m=l?/mac/.test(l):/mac/.test(d),h=/webkit/.test(d)?parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,f=!function(){return 1}(),v=[0,0,0],g=null;if(typeof s.plugins!=e&&typeof s.plugins[i]==t)g=s.plugins[i].description,!g||typeof s.mimeTypes!=e&&s.mimeTypes[n]&&!s.mimeTypes[n].enabledPlugin||(c=!0,f=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),v[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),v[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),v[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof a.ActiveXObject!=e)try{var y=new a.ActiveXObject(o);y&&(g=y.GetVariable("$version"),g&&(f=!0,g=g.split(" ")[1].split(","),v=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:p,pv:v,wk:h,ie:f,win:u,mac:m}}();return{getFlashPlayerVersion:function(){return{major:p.pv[0],minor:p.pv[1],release:p.pv[2]}}}}(),h={};h.flash=m.getFlashPlayerVersion(),h.viewport=o(),h.screen=i(),h.os=n(),h.browser=a(),h.external=s(),h.time=r(),h.location=d(),h.alliance=c();var f="";return{getData:function(){var e=arguments[0]||!1;return l(e)},setId:function(e){f=e},toString:function(e,t){e=e||!1;var i,o=t?t:this.getData(e),n="";for(i in o)o.hasOwnProperty(i)&&(n+=(u[i]?u[i]:i)+"="+o[i].toString().replace(/\||%7c/gi,"-")+";");return n+=f+";"}}}();f.globalEmitter=new f,f.forObject=function(e,t,i){if(i=i||{},e._eventEmitter&&!i.purge)return e._eventEmitter;var o=new f(e);if(e.fire=e.emit=function(){return o.fire.apply(o,arguments)},e.fireLocal=e.emitLocal=function(){return o.fireLocal.apply(o,arguments)},e.addListener=e.on=function(){return o.addListener.apply(o,arguments)},e.removeListener=function(){return o.removeListener.apply(o,arguments)},e.removeAllListeners=function(){return o.removeAllListeners.apply(o,arguments)},e._eventEmitter=o,t){o.id=t;var n=i.globalEmitter||f.globalEmitter;o.globalEmitter=n,n.ids=n.ids||{},n.ids[t]=e}return o},f.getID=function(e){return e instanceof f?e.id:e._eventEmitter?e._eventEmitter.id:void 0},f.prototype.fireEventToID=function(e,t,i){if(i=i||{},this.ids&&this.ids.hasOwnProperty(e)){var n=this.ids[e];try{for(var a=[],r=0;r<t.length;r++)a.push(t[r]);"string"==typeof t[0]&&(t[0]={name:t[0]}),i.exceptTo&&(t[0].exceptTo=i.exceptTo),n.fire.apply(n,t)}catch(s){o("Caught error when handling event",s)}}},f.prototype.fire=function(e){var t,i=arguments.length-1,o=this.target||this;"string"==typeof e&&(e={name:e}),t=e.name;var n=this.globalEmitter||f.globalEmitter;if(this!==n&&!e.local&&!this.ids){for(var a=[],r=0;r<arguments.length;r++)a.push(arguments[r]);n.fire({name:"event",exceptTo:e.exceptTo},o,a)}if(this.events[t]){var s,c=[];for(s=0;s<this.events[t].length;s++)c.push(this.events[t][s]);for(s=0;s<c.length;s++){var p,d=c[s];if(!e.exceptTo||e.exceptTo!==d){switch(i){case 0:p=d.call(o);break;case 1:p=d.call(o,arguments[1]);break;case 2:p=d.call(o,arguments[1],arguments[2]);break;default:for(var l=[],u=0;i>u;u++)l[u]=arguments[u+1];try{p=d.apply(o,l)}catch(m){}}if(void 0!==p)return p}}}return void 0},f.prototype.fireLocal=function(e){for(var t=[{name:e,local:!0}],i=1;i<arguments.length;i++)t.push(arguments[i]);return this.fire.apply(this,t)},f.prototype.emit=f.prototype.fire,f.prototype.emitLocal=f.prototype.fireLocal,f.prototype.addListener=function(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),this.target},f.prototype.on=f.prototype.addListener,f.prototype.removeListener=function(e,t){var i=this.events[e];if(i){for(var o=[],n=i.length-1;n>=0;n--){var a=i[n];a!==t&&o.push(a)}this.events[e]=o}return this.target},f.prototype.removeAllListeners=function(){return this.events={},this.target},v.prototype.somethingHasBeenSeen=function(){var e=this;return e.pam.master?void("string"==typeof e.args.delayed_display&&"{}"!==e.args.delayed_display&&(window.pmBypassImpression||e.sentImpression||(e.pam.loadPixel(e.args.impression_pixel),e.sentImpression=!0))):void(e.emit&&e.emit("something-has-been-seen"))},v.prototype.purgeEventEmitter=function(){this.pam.eventEmitterForObject(this,this.uniqid,{purge:!0})},v.prototype.inject=function(e,t,i){
"function"!=typeof t||i||(i=t,t={}),t.pixiPositionId||(t.pixiPositionId=u(e)),t.room&&(e="room."+t.room),void 0===t.future&&(t.future=!0),t.future&&(t.present=!0),this.rooms&&this.rooms[e]&&(i=this.makeHostRooms(i,this.rooms[e]));var o;if("string"==typeof e||s(e)){if("string"==typeof e){t.future&&this.injectFuture(e,t,i);var a=this.remapPositions||{};for(var r in a)if(a.hasOwnProperty(r)){var c=new RegExp("\\b"+r+"\\b","g");e=e.replace(c,a[r])}}o=A.piximedia.preview?this.pam.queryPositions("*"):this.positions,o=this.pam.queryPositions(e,{positions:o})}else"object"==typeof e&&(o=[e]);for(var p=0;p<o.length;p++){var d=o[p];d.decoratedBy&&d.decoratedBy!==this&&d.decoratedBy!==this.cgAd||!d.active||d.hosted||(n("Injecting contents into "+d.positionId),t.present&&!d.used&&(d.decoratedBy=this,d.decoratedAt=d.decoratedAt||new Date,d.used=!0,n("Taking position "+d.positionId),this.positions.push(d)),this.cgOptions&&!d.decoratedByCG&&(d.setDecoratedByCG(this),this.pam.master||d.emit("injected-into-creative-group",this.cgOptions)),d.pixiPositionId=t.pixiPositionId,this.pam.master||d.emit("injected-into-pixi-position-id",d.pixiPositionId||e),this.shouldHostPosition(d)?this.pam.hostPosition(this,d):this.injectPosition(d,t,i))}},v.prototype.injectFuture=function(e,t,i){"function"!=typeof t||i||(i=t,t={});var o=this,a=this.remapPositions||{};for(var r in a)if(a.hasOwnProperty(r)){var s=new RegExp("\\b"+r+"\\b","g");e=e.replace(s,a[r])}var c=function(e){n("Injecting contents into future "+e.positionId),e.decoratedBy=o,e.decoratedAt=e.decoratedAt||new Date,o.cgOptions&&e.setDecoratedByCG(o),e.pixiPositionId=t.pixiPositionId,o.shouldHostPosition(e)?o.pam.hostPosition(o,e):o.injectPosition(e,t,i)};if(this.on("hello",function(t){if(!o.disabled){var i={};i[t.positionId]=t;var a=o.pam.queryPositions(e,{positions:i,ignoreConditions:!0});if(a.length){var r=o.pam.queryPositions(e,{positions:i,conditionPositions:o.pam.positions});if(r.length)c(t);else{n("Found a position to inject that fails to meet its condition, waiting for future positions");var s=!1;o.pam.on("pre-hello",function(){if(!s){var n=o.pam.queryPositions(e,{positions:i,conditionPositions:o.pam.positions});n.length&&(s=!0,c(t))}})}return n("Grabbing position "+t.positionId),o.positions.push(t),t.decoratedAt=new Date,!0}}}),e.match(/=>/)){var p=function(){var t=o.pam.queryPosition(e,{positions:o.positions});t.length&&(o.pam.removeListener("position-has-been-decorated",p),c(t[0]))};o.pam.on("position-has-been-decorated",p)}},v.prototype.makeHostRooms=function(e,t){return function(i,n,a,r){try{e.apply(this,arguments)}catch(s){o("Could not execute callback: "+s)}for(var c=0;c<t.length;c++){var p=t[c];r.hostRoom(p.id,p)}}},v.prototype.makeInject=function(e,t){var i=this;return function(n,a){try{if(i.pam.log("Calling makeInject()"),!e.clickUrl&&e.positionId.match(/^room\./)&&e.pixiPositionId){var r=e.pixiPositionId,c=this.remapPositions||{};for(var p in c)if(c.hasOwnProperty(p)){var d=new RegExp("\\b"+p+"\\b","g");r=r.replace(d,c[p])}e.clickUrl=e.allClickUrls&&e.allClickUrls[r]||i.pam.positions[r]&&i.pam.positions[r].clickUrl,e.advertiserClickUrl=e.allAdvertiserClickUrls&&e.allAdvertiserClickUrls[r]||i.pam.positions[r]&&i.pam.positions[r].advertiserClickUrl}t.call(e,n,a,e,a.framedIframe);var l=(i.args||{})["position-css"];l&&i.pam.loadLibrary("sweetlib.js",function(){if(s(l))for(var e=0;e<l.length;e++)A.piximedia.SweetLib.createCSSs(l[e],n);else A.piximedia.SweetLib.createCSSs(l,n)})}catch(u){o("Could not inject position "+e.positionId+": "+u)}}},v.prototype.injectPosition=function(e,t,i){var o=this;i?t=t||{}:(i=t,t={}),o.pam.log("Injecting into "+e.positionId);var a=t.htmlComments,r="inject"+this.pam.rand();A.piximedia._[r]=this.makeInject(e,i);var s={name:"pmInject_"+e.positionId,javascript:"window.piximedia._."+r+"(document,window)"};a&&(s.htmlComments=a);for(var c in t)t.hasOwnProperty(c)&&(s[c]=t[c]);if(e.decoratedBy||(e.decoratedBy=this,e.decoratedAt=e.decoratedAt||new Date,n("Marking position not yet marked decorated by any ad"),this.positions.push(e)),this.cgOptions&&!e.decoratedByCG&&e.setDecoratedByCG(this),e.decoratedBy&&e.decoratedBy.masterPosition&&e.decoratedBy.iframe&&e.positionId===e.decoratedBy.masterPosition.positionId&&(e.decoratedBy.iframe.doNotSendPixels=!0),this.pam.master&&(e.injectionIndex=e.injectionIndex||0),!e.hosted&&!e.injectionIndex){e.loadEvent("JS:IMPRESSION",{detail:this.getPixiPositionIdForPositionId(e.positionId)});var p=o.campaignId,d=o.adId;if(o.pam.sendJSImpressionAdCampaign(p,d,e.positionId,this.getPixiPositionIdForPositionId(e.positionId)),e.decoratedAt){var l=Math.round((new Date-e.decoratedAt)/1e3);e.loadEvent("JS:DELAY:IMPRESSION",{detail:this.getPixiPositionIdForPositionId(e.positionId),duration:l})}}var u=function(){var t,i=function(){n("Position removed",e),o.pam.unloadPosition(e)},a=function(){n("Position winlost: "+e.positionId,e),e.injectionIndex++,t.unload({hide:!0}),t.removeListener("remove",i),t.removeListener("winlose",a);for(var o=!1,r=0;r<(e.iframes||[]).length;r++)if(e.iframes[r]===t){o=!0;break}o?(n("ZZZ Position still active, reloading"),u()):n("ZZZ Position no longer active")};t=o.pam.injectFriendlyContent(e,s,o).on("remove",i).on("winlose",a)};u()},v.prototype.loadEvent=function(e,t){t&&(t=JSON.parse(JSON.stringify(t)),t.detail&&(t.detail=u(t.detail))),!t.c1&&this.args&&this.args.c1&&(t.c1=this.args.c1.toString()),!t.c2&&this.args&&this.args.c2&&(t.c2=this.args.c2.toString()),!t.c3&&this.args&&this.args.c3&&(t.c3=this.args.c3.toString()),!t.c4&&this.args&&this.args.c4&&(t.c4=this.args.c4.toString()),!t.c5&&this.args&&this.args.c5&&(t.c5=this.args.c5.toString()),this.pam.loadEvent(e,{campaignIdAlliance:this.campaignId,adIdAlliance:this.adId,creativeIdAlliance:this.creativeId},this.ticketInfo,t),"AP_SOMETHINGHASBEENSEEN"===e&&this.somethingHasBeenSeen()},v.prototype.getPixiPositionIdForPositionId=function(e){if(this.pam.positions&&this.pam.positions[e]&&this.pam.positions[e].pixiPositionId)return this.pam.positions[e].pixiPositionId;if(e.match(/^room\./))return e;var t=this.remapPositions||{},i={},o=e.split(".");o.length>1&&(e=o[0]),i[e]={positionId:e};var n=[];for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];this.pam.queryPositions(r,{positions:i}).length&&n.push(a)}return n.length?c(n,"mpu")>=0?"mpu":n[0]:e},v.prototype.queryAssets=function(e){var t=((this.args||{}).assets||{}).pool||[];return I.assetsMatchQuery(e,t)},g.prototype=new v({},{}),g.prototype.constructor=g,g.prototype.injectPosition=function(e,t){if(this.position.positionId===e.positionId&&this.pam.positionCurrentlyInline===e.positionId)try{t.call(e,this.framedDocument,this.framedWindow,e)}catch(i){o("Could not inject friendly position: "+e.positionId+": "+i)}else v.prototype.injectPosition.apply(this,arguments)},y.prototype=new v({},{}),y.prototype.constructor=y,b.prototype.registerResponsiveCallback=function(e){this.on("responsive",e),this.enableResponsiveEvents()},b.prototype.enableResponsiveEvents=function(){var e=this;return this.pam.master?void(this.responsiveEventsEnabled||(this.responsiveEventsEnabled=!0,this.pam.loadLibrary("sweetlib.js",function(){var t=A.piximedia.SweetLib,i=t.getPageContainer();t.enableResponsiveEventsForPageContainer(i,function(t){e.position.emit("responsive",t),e.emit("responsive",t)})}))):this.emit("enable-responsive-events")},b.prototype.hostRoom=function(e,t){if(t=t||{},!this.pam.master)return this.emit("host-room",e,t);var i=this;this.pam.hostRoom(e,{injectionIndex:this.position.injectionIndex},function(){var e=i.iframe,o=e.ownerDocument,n=o.createElement("div"),a=o.createElement("div");switch(n.className="pmRoomContainer",n.style.position="absolute",a.className="pmRoom",a.style.position="absolute",t.align||"center"){case"left":break;case"right":7===i.pam.msie&&(n.style.minWidth="100%"),n.style.width="100%",n.style.position="absolute",a.style.position="absolute",a.style.right=0;break;case"center":n.style.width="100%",7===i.pam.msie&&(n.style.minWidth="100%"),a.style.left="50%",a.className+=" pmCentered"}if(t.left&&(n.style.left=parseInt(t.left)+"px"),t.top&&(n.style.top=parseInt(t.top)+"px"),t.css)for(var r in t.css)if(t.css.hasOwnProperty(r))try{a.style[r]=t.css[r]}catch(s){}return n.appendChild(a),e.parentNode.insertBefore(n,e),a})},b.prototype.unload=function(e){var t=this;if(e=e||{},this.active=!1,i("Iframe.unload()"),this.iframe){if(this.pam.isInDOM(this.iframe))i("Iframe is still in DOM: "+this.iframe.id),e.hide?(this.iframe.style.display="none",i("Setting iframe display: none")):this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe);else{i("Iframe is no longer in DOM: "+this.iframe.id);var o=this.iframe.ownerDocument.getElementById(this.iframe.id);o?(i("Found winlost iframe in DOM: "+this.iframe.id),e.hide?(o.style.display="none",i("Setting iframe display: none")):o.parentNode&&o.parentNode.removeChild(o)):i("Winlost iframe not in DOM: "+this.iframe.id),e.hide?(this.iframe.style.display="none",i("Setting iframe display: none")):this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe)}if(this.moveTop&&this.pam.loadLibrary("sweetlib.js",function(){var e=A.piximedia.SweetLib;e.moveTopOfPageContainer(t.pageContainer,-t.moveTop)}),e.hide){var n=function(){var e=t.iframe.ownerDocument.getElementById(t.iframe.id);"none"!==e.style.display&&(i("Iframe must be hidden again: "+t.iframe.id),e.style.display="none")},a=setInterval(n,20);setTimeout(function(){clearInterval(a),setInterval(n,500)},1e4)}}else i("no known iframe")},b.prototype.setIframe=function(e){var t=this,o=e.id,a=e.ownerDocument;if(o||(o=e.id="pmAnonIframe"+this.pam.rand()),this.iframe=e,this.visibilityCallbackOnHold&&(this.emit("register-visibility-callback",this.visibilityCallbackOnHold),this.visibilityCallbackOnHold=void 0),t.pam.master&&(this.iframe.onmouseover=function(){t.emitLocal("mouseover")},this.iframe.onmouseout=function(){t.emitLocal("mouseout")},t.position&&t.position.decoratedBy&&t.position.decoratedBy.timetracker&&t.position.decoratedBy.timetracker.hover)){var r=t.position,s=t.position.decoratedBy,p=s.timetracker.hover,d=r.pixiPositionId||r.decoratedBy.getPixiPositionIdForPositionId(r.positionId);"string"==typeof p&&(p=p.split(/ +/)),c(p,d)>=0&&(this.on("mouseover",function(){r.startTimetrackerHover()}),this.on("mouseout",function(){r.stopTimetrackerHover()}))}var l=function(){t.active&&setTimeout(function(){var e=a.getElementById(o);return e?(n("Iframe has been winlost"),t.emitLocal("winlose"),void t.setIframe(e)):void(t.pam.winlostIframeIds[o]?(t.active=!1,n("Iframe has been removed by PAM because of a winlose"),t.emitLocal("winlose")):(n("Iframe has been removed"),t.emitLocal("remove")))},0)};(t.safari||t.chrome)&&e.addEventListener("DOMNodeRemovedFromDocument",function(){l()});var u=e.contentWindow,m=setInterval(function(){var n=a.getElementById(o),r=n?n.contentWindow:void 0;n!==e?(i("Iframe changed, is there a winlose?"),clearInterval(m),l()):t.active&&r!==u&&(i("Iframe content window has changed by an external JavaScript"),e.parentNode.innerHTML="<!--winlose-->"+e.parentNode.innerHTML+"<!--winlose-->")},50)},w.prototype.setDecoratedByCG=function(e){this.decoratedByCG=e;var t=this.eventQueue;this.eventQueue=[];for(var i=0;i<t.length;i++){var o=t[i];this.loadEvent(o.eventId,o.options)}},w.prototype.loadEvent=function(e,t){this.decoratedByCG?this.decoratedByCG.loadEvent(e,t):this.decoratedBy?this.decoratedBy.loadEvent(e,t):this.pam.loadEvent(e,void 0,void 0,t)},w.prototype.loadEventWait=function(e,t){return this.decoratedBy||o("Cannot use Position.loadEventWait() on positions not associated to an ad"),this.decoratedBy.is_creative_group?this.decoratedByCG?this.loadEvent(e,t):void this.eventQueue.push({eventId:e,options:t}):this.loadEvent(e,t)},w.prototype.startTimetrackerHover=function(){var e=this;if(!e.pam.master)return e.emit("start-timetracker-hover");if(!this.timetrackerHover){var t,i=0,o=0,n=function(){e.pam.loadLibrary("sweetlib.js",function(){i&&!o?t.pause():!i&&o&&(t?t.resume():(t=A.piximedia.SweetLib.setTimer("HOVER",function(t,i){e.loadEventWait("TIMETRACKER::"+t,{duration:i,detail:e.pixiPositionId||e.decoratedBy.getPixiPositionIdForPositionId(e.positionId)})}),t.start())),i=o})};this.timetrackerHover={start:function(){o++,n()},stop:function(){o--,n()}}}this.timetrackerHover.start()},w.prototype.stopTimetrackerHover=function(){return this.pam.master?void(this.timetrackerHover&&this.timetrackerHover.stop()):this.emit("start-timetracker-hover")},x.prototype.loadActivity=function(e){this.pam.loadActivityPixel(e)},x.prototype.loadAd=function(e){var t=this.getUrl(e);if(e.dw)try{_.write('<script type="text/javascript" src="'+t+'"></script>')}catch(i){}else e.defer&&"complete"!==_.readyState?this.deferObj(e):(A.pmIsAlreadyActive&&(e.use_pb=!0,t=this.getUrl(e)),this.pam.loadScript(t))},x.prototype.getUrl=function(e){var t="";return e.use_pb&&(t+=";pb=1"),this.pam.globalOptions.serialId&&(t+=";serial_id="+this.pam.globalOptions.serialId),"//"+T+"/ads_js/stage2.php?"+e.mode+"|"+e.site_id+"|"+e.placement_id+"|"+e.params+t+"|"+B.toString()+"|"+this.pam.rand()+"|click="+e.click},x.prototype.deferObj=function F(e){var t=this;this.deferredObjects.push(e),F.listening||(F.listening=!0,this.pam.waitDomLoaded(function(){t.loadDeferedObjects()}))},x.prototype.loadDeferedObjects=function(){if(!this.deferredObjectsLoaded){this.deferredObjectsLoaded=!0;for(var e=0;e<this.deferredObjects.length;e++)this.loadDeferedAd(this.deferredObjects[e])}},x.prototype.loadDeferedAd=function(e){A.pmIsAlreadyActive&&(e.use_pb=!0),A.pmIsAlreadyActive=!0;var t=this.getUrl(e);this.loadScript(t)},x.prototype.getClickCommand=function(){for(var e=0;e<this.pam.positions.length;e++){var t=this.pam.positions[e];if(t.clickUrl)return t.clickUrl}return this.pam.clickUrl},x.prototype.loadEvent=function(e,t){this.pam.loadEvent(e,t,this.ticketInfos)},x.prototype.loadEventWithPrefix=function(e,t){this.pam.loadEvent(e,t,this.ticketInfos,{prefixURI:this.getClickCommand()})},x.prototype.loadScript=function(e){try{var t=_.createElement("script");t.type="text/javascript",t.async="async",t.src=e,_.getElementsByTagName("head")[0].appendChild(t)}catch(i){}},x.prototype.setTicket=function(e,t){this.ticketInfos={ticket:e,signature:t}},I.prototype.sendJSImpressionAdCampaign=function(e,t,i,o){if(!this.master)return this.emit("js-impression-ad-campaign",e,t,i);var n=this.positions[i];e&&!this.campaignIdsWithImpressions[e]&&(this.campaignIdsWithImpressions[e]=e,n.loadEvent("JS:IMPRESSION:CAMPAIGN",{detail:o})),t&&!this.adIdsWithImpressions[t]&&(this.adIdsWithImpressions[t]=t,n.loadEvent("JS:IMPRESSION:AD",{detail:o}))},I.prototype.log=n,I.prototype.error=o,I.prototype.debug=i,I.prototype.loadPixel=function(e){e&&" "!==e&&"PIXEL_URL"!==e&&d(e.replace(/%n|\[random_number\]|\[random\]|\[timestamp\]/gi,Math.round(1e16*Math.random()).toString()))},I.prototype.eventEmitterForObject=function(e,t,i){var o={};if(i)for(var n in o)o.hasOwnProperty(n)&&(o[n]=i[n]);return o.globalEmitter=this.globalEmitter,f.forObject(e,t,o)},I.prototype.syncDocumentHasFocus=function(){var e=this;if(this.master){var t=e.getTopmostDocument();e.documentHasFocus=t.hasFocus(),setInterval(function(){var i=t.hasFocus();i!==e.documentHasFocus&&(e.documentHasFocus=i,e.emit("focus-change",i))},1e3)}else this.on("focus-change",function(t){e.documentHasFocus=t})},I.prototype.cleanupPixiRTAPosCookie=function(e){e=e||{};var t=A.piximedia.request_pos_sp[this.siteId][this.placementId],i=!1;for(var o in t)if(t.hasOwnProperty(o)){i=!0;break}i||"alliance"!==this.mode||(e.keepRTAPos||(_.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",_.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),_.cookie="pixi_adr=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",_.cookie="pixi_adr=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",this.globalOptions.pixiAdrName&&(_.cookie=this.globalOptions.pixiAdrName+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",_.cookie=this.globalOptions.pixiAdrName+"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"))},I.prototype.getBirthdateCookie=function(){for(var e=_.cookie.split(/; */),t=/pixi_birthdate=(.*)/,i=e.length-1;i>=0;i--){var o=e[i].match(t);if(o&&o[1])return parseInt(o[1],10)}},I.prototype.getBirthdateLS=function(){try{if(A.localStorage&&A.localStorage.getItem)return parseInt(A.localStorage.getItem("pixi_birthdate"),10)||void 0}catch(e){}},I.prototype.exposePixiRTAPosCookie=function(e){e=e||{},e.expires||(e.expires=new Date((new Date).getTime()+1e3*M)),e.pixiRTAPosExpires||(e.pixiRTAPosExpires=new Date((new Date).getTime()+1e3*(this.globalOptions.pixiRTAPosExpires||M)));var t=[];for(var i in A.piximedia.request_pos)A.piximedia.request_pos.hasOwnProperty(i)&&t.push(i);if(this.globalOptions.enableRTAHead)for(var n=0;n<t.length;n++)this.loadEvent("JS:POSITION_REQUESTED:COOKIE",void 0,void 0,{detail:t[n]});if(_.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",_.cookie="pixi_rta_pos="+escape(t.join(";"))+"; path=/; "+this.getDomainPartForCookies()+(e.pixiRTAPosExpires?"; expires="+e.pixiRTAPosExpires.toUTCString():""),_.cookie="pixi_rta_v="+escape("1;"+(new Date).getTime())+"; path=/; "+this.getDomainPartForCookies()+(e.expires?"; expires="+e.expires.toUTCString():""),this.globalOptions.exposeRTAPosHelperJS){var a=this.getTopmostWindow();try{a.Function(["req_pos","window","document"],this.globalOptions.exposeRTAPosHelperJS).call(a,t,a,a.document)}catch(r){o("Could not execute RTA position helper: "+r)}}var s=Date.now(),c=void 0!==this.getBirthdateCookie();c||(_.cookie="pixi_birthdate="+escape(s)+"; path=/; "+this.getDomainPartForCookies()+"; expires="+new Date((new Date).getTime()+31536e6).toUTCString());try{A.localStorage&&A.localStorage.getItem&&A.localStorage.setItem&&(A.localStorage.getItem("pixi_birthdate")||A.localStorage.setItem("pixi_birthdate",s))}catch(p){}},I.prototype.stringify=function(e){return void 0===e?"undefined":null===e?"null":"number"==typeof e?e:(e=e.toString(),'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"')},I.get=I.prototype.get=function(e,t,i){var o=e+"/"+t+":"+(i||"alliance");return(A.piximedia._.pams||{})[o]},I.prototype.loadActivityPixel=function(e,t){t=t||{};var i=A.piximedia._.contextBySP?A.piximedia._.contextBySP[this.siteId+"/"+this.placementId]:void 0;d("//"+T+"/activity/?|||advertiser_id="+e.advertiser_id+";page_id="+e.page_id+";activity_type="+e.activity_type+";sale_amount="+e.sale_amount+";sale_quantity="+e.sale_quantity+";sale_currency="+e.sale_currency+";customer_user_id="+e.customer_user_id+";http_secure="+A.location.protocol+";save_last_url="+(e.save_last_url?"true":"false")+";|"+i+"|"+this.rand()+"|")},I.prototype.loadEvent=function(e,t,i,n){n=n||{},!t||i&&i.ticket&&i.signature||n.noTicket||this.globalOptions.noTicket||!this.mode.match(/^alliance/)||o("Required ticketInfos");var a,r=A.piximedia._.contextBySP?A.piximedia._.contextBySP[this.siteId+"/"+this.placementId]:void 0;if(r||(r=B.toString(),A.piximedia._.contextBySP=A.piximedia._.contextBySP||{},A.piximedia._.contextBySP[this.siteId+"/"+this.placementId]=r),t&&t.params)a=";"+t.params;else{var s=(void 0===n.c1?"":n.c1.toString()).replace(/;/g,","),c=(void 0===n.c2?"":n.c2.toString()).replace(/;/g,","),p=(void 0===n.c3?"":n.c3.toString()).replace(/;/g,","),l=(void 0===n.c4?"":n.c4.toString()).replace(/;/g,","),u=(void 0===n.c5?"":n.c5.toString()).replace(/;/g,","),m=void 0===n.firstOnAd?"":n.firstOnAd?1:0,h=void 0===n.firstOnUnit?"":n.firstOnUnit?1:0,f=void 0===n.duration?"":n.duration.toString(),v=void 0===n.fail_reason?"":n.fail_reason.toString(),g=void 0===n.detail?"":n.detail.toString();a=";c1="+s+";c2="+c+";c3="+p+";c4="+l+";c5="+u+";duration="+f+";first_on_ad="+m+";first_on_unit="+h+";detail="+g+";error="+v,t&&(a+=";campaign_id="+t.campaignIdAlliance+";ad_id="+t.adIdAlliance+";creative_id="+t.creativeIdAlliance)}this.globalOptions.serialId&&(a+=";serial_id="+this.globalOptions.serialId);var y;if(n.prefixURI)y=!1;else switch(e){case"IMPRESSION":case"CLICK":case"AP_NAVIGATION":case"AP_NAV_10":case"AP_NAV_30":y=!1;break;default:y=!1}if(y){var b=this,w=a+(i?";ticket="+i.ticket+";signature="+i.signature:"");this.pixelQueue[w]=this.pixelQueue[w]||[],this.pixelQueue[w].push(e),this.pixelQueueTimer||(this.pixelQueueTimer=setTimeout(function(){b.pixelQueueTimer=void 0;var e=b.pixelQueue;b.pixelQueue=[];for(var t in e)e.hasOwnProperty(t)&&d("//"+T+"/eventq/?P|"+b.siteId+"|"+b.placementId+"|eventq="+e[t].join(",")+t+"|"+r+"|"+b.rand()+"|")},1500))}else d((n.prefixURI||"")+"//"+T+"/event/?P|"+this.siteId+"|"+this.placementId+"|event="+e+a+(i?";ticket="+i.ticket+";signature="+i.signature:"")+"|"+r+"|"+this.rand()+"|");switch(e){case"CLICK":case"AP_NAVIGATION":case"AP_NAV_10":case"AP_NAV_30":d("//"+T+"/profile/location.php?e="+e+"&p="+escape(a))}switch(e){case"JS:POSITION_USED":var x=(n.detail||"").toString(),I=Math.random()<j;if(x){var k=this.mode+"/"+this.siteId+"/"+this.placementId+"/"+x,P=this.getTopmostWindow();if(P.pmTimePositions&&P.pmTimePositions[k]){var _=P.pmTimePositions[k];if(_.events=_.events||{},!_.events[e]){_.events[e]=!0;var O,S=Math.round((new Date-_.date)/1e3);if(S>=0&&120>S){switch(e){case"JS:POSITION_USED":O="JS:DELAY:POSITION_USED"}var C=B.getData();if(I&&this.loadEvent(O,t,i,{detail:x,duration:S,c1:C.browser_name,c2:C.browser_major_version}),"JS:POSITION_USED"===e&&P.performance&&P.performance.timing&&P.performance.timing.responseStart){var E=new Date(P.performance.timing.responseStart);S=Math.round((_.date-E)/1e3),S>=0&&120>S&&I&&this.loadEvent("JS:DELAY:POSITION",t,i,{detail:x,duration:S,c1:C.browser_name,c2:C.browser_major_version})}}}}}}},I.prototype.getDomainPartForCookies=function L(){if(L.cache)return L.cache;try{var e=this.getDocumentAndWindowInfos().window;switch(e.location.protocol){case"http:":case"https:":return L.cache="domain=."+e.location.hostname.split(".").slice(-2).join(".")+"; "}}catch(t){}return""},I.prototype.getTopmostWindow=function(){return this.getDocumentAndWindowInfos().window},I.prototype.watchForRemoval=function(e,t){var i=this;if(this.safari||this.chrome)e.addEventListener("DOMNodeRemovedFromDocument",t);else var o=setInterval(function(){return i.isInDOM(e)?void 0:(clearInterval(o),t())},500)},I.prototype.isInDOM=function(e){try{for(var t=e,i=0;100>i;i++,t=t.parentNode){if(!t.parentNode)return!1;if("HTML"===t.parentNode.tagName)return!0}}catch(t){return!1}},I.prototype.isInHead=function(e){for(var t=e,i=0;100>i;i++,t=t.parentNode){if(!t.parentNode)return!1;if("HEAD"===t.parentNode.tagName)return!0;if("HTML"===t.parentNode.tagName)return!1}},I.prototype.getTopmostDocument=function(){return this.getDocumentAndWindowInfos().document},I.prototype.loadLibraries=function(e,t){var i=this,o=function(){try{return t.call(i)}catch(e){return void n("Caught exception when calling loadLibraries() callback: "+e)}},a=e.length;if(!a)return o();for(var r=function(){return--a?void 0:o()},s=0;s<e.length;s++)this.loadLibrary(e[s],r)},I.prototype.getPmLoaderDoc=function(){var e,t=this.getTopmostDocument();if(this.msie&&this.msie<8)e=t;else{var i=t.getElementById("pmFiFLoader");if(!i){var o,n=t.getElementsByTagName("head")[0];i=t.createElement("iframe"),i.id="pmFiFLoader",n.appendChild(i);try{o=i.contentWindow,e=i.contentDocument||i.contentWindow.document}catch(a){var r=this.getTopmostDocument();try{i.src="javascript:document.write('<head><script>document.domain=\""+r.domain+"\";</script></head><body></body>')",e=i.contentDocument||i.contentWindow.document,o=i.contentWindow}catch(a){i.src="javascript:document.write('<head><script>document.domain=\""+i.ownerDocument.domain+"\";</script></head><body></body>')",e=i.contentDocument||i.contentWindow.document,o=i.contentWindow}}e.write("<html><head></head><body><script>setTimeout(function(){document.close();},0);</script></body></html>"),i.contentWindow._piximediaIsFiFLoader=!0}i.contentWindow.piximedia=i.contentWindow.piximedia||A.piximedia,e=i.contentDocument||i.contentWindow.document}return e},I.prototype.loadLibrary=function(e,t){if(s(e))return this.loadLibraries(e,t);var i,o=this,a=function(){try{return t.call(o)}catch(i){return void n("Caught exception when calling loadLibrary() callback for "+e+": "+i)}},r=A.piximedia.libraryLoader=A.piximedia.libraryLoader||{};if(r.hasOwnProperty(e))i=r[e],i.loaded?a():i.callbacks.push(a);else{var c=this.globalOptions.libs[e];if(!c)throw new Error("Unknown library: "+e);i=r[e]={callbacks:[a]};var p=this.getPmLoaderDoc(),d=p.createElement("script");d.src=c;var l,u,m=function(){if(!i.loaded){i.loaded=!0;for(var t=i.callbacks,a=0;a<t.length;a++)t[a]();var s=setInterval(function(){if(!o.isInDOM(d)){var t=B.getData();o.loadEvent("PANIC",void 0,void 0,{fail_reason:"loader_winlost",c1:t.browser_name}),n("No longer in DOM: "+e),i.loaded=!1,delete r[e],clearInterval(s),o.loadLibrary(e,function(){n("Back in DOM: "+e)})}},50)}},h=function(){i.complete&&m()},f=function(){i.complete&&(u.clearInterval(l),m())},v=function(){var e=p.getElementsByTagName("head")[0];if(e){e.appendChild(d);var t=o.getTopmostWindow();u=t,l=u.setInterval(f,50)}else A.setTimeout(v,50)};d.addEventListener?d.addEventListener("load",h,!1):d.readyState&&(d.onreadystatechange=h),v()}},I.prototype.loadCSSs=function(e,t){var i=this,o=function(){try{return t.call(i)}catch(e){return void n("Caught exception when calling loadCSSs() callback: "+e)}},a=e.length;if(!a)return o();for(var r=function(){return--a?void 0:o()},s=0;s<e.length;s++)this.loadCSS(e[s],r)},I.prototype.loadCSS=function(e,t){if(s(e))return this.loadCSSs(e,t);var i,o=this,a=function(){if(t)try{return t.call(o)}catch(i){return void n("Caught exception when calling loadLibrary() callback for "+e+": "+i)}},r=A.piximedia.cssLoader=A.piximedia.cssLoader||{};if(r.hasOwnProperty(e))i=r[e],i.loaded?a():i.callbacks.push(a);else{var c=this.globalOptions.css[e];if(!c)throw new Error("Unknown CSS: "+e);i=r[e]={callbacks:[a]};var p=this.getPmLoaderDoc(),d=p.createElement("script");d.src=c;var l,u,m=function(){if(!i.loaded){i.loaded=!0;for(var e=i.callbacks,t=0;t<e.length;t++)e[t]()}},h=function(){i.complete&&m()},f=function(){i.complete&&(u.clearInterval(l),m())},v=function(){var e=p.getElementsByTagName("head")[0];if(e){e.appendChild(d);var t=o.getTopmostWindow();u=t,l=u.setInterval(f,50)}else A.setTimeout(v,50)};d.addEventListener?d.addEventListener("load",h,!1):d.readyState&&(d.onreadystatechange=h),v()}},I.prototype.getDocumentAndWindowInfos=function q(){if(q._cache)return q._cache;var e,t={};if(!t.window)try{e=A.parent.parent.parent.document,e._piximediaiframetest=!0,t.window=A.parent.parent.parent.window}catch(i){}if(!t.window)try{e=A.parent.parent.document,e._piximediaiframetest=!0,t.window=A.parent.parent.window}catch(i){}if(!t.window)try{e=A.parent.document,e._piximediaiframetest=!0,t.window=A.parent.window}catch(i){}if(t.window||(t.window=window),!t.document)try{e=A.parent.parent.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}if(!t.document)try{e=A.parent.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}if(!t.document)try{e=A.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}return t.document||(t.document=document),(!this.msie||this.msie>8)&&(q._cache=t),t},I.prototype.hello=function(e){var t=this;if(i(e.positionId?'hello({positionId:"'+e.positionId+'"})':"hello()"),e||o("Missing options"),this.globalOptions.positionsUniqueOnPage&&c(this.globalOptions.positionsUniqueOnPage,e.positionId)>=0)for(var a in window.piximedia._.pams)if(window.piximedia._.pams.hasOwnProperty(a)&&a.match(/^pam/)){var r=window.piximedia._.pams[a];if(r&&r.positions&&r.positions[e.positionId])return n("Cannot register multiple "+e.positionId),void this.loadEvent("PANIC",void 0,void 0,{fail_reason:"registered_multiple_"+e.positionId})}if(e.implicit||this.numberOfExplicitPositions++,this.mode.match(/^alliance/)&&!this.globalOptions.inline&&!this.globalOptions.enableRTA&&!this.globalOptions.legacyPosition)switch(e.positionId){case"default":case"footer":break;default:this.loadEvent("PANIC",void 0,void 0,{fail_reason:"registered_position_"+e.positionId+"_without_RTA_support"})}if(!e.virtual&&this.globalOptions.virtualPositions&&this.globalOptions.virtualPositions.hasOwnProperty(e.positionId)&&(e.virtual=this.globalOptions.virtualPositions[e.positionId]),e.document,e.document&&!e.id&&!e.virtual)if(e.id="pixiMarker"+Math.round(1e16*Math.random()),e.element){var s=e.element.ownerDocument,p=s.createElement("div");p||o("markerDiv is not as real as expected: "+JSON.stringify(p)),p.id=e.id,this.isInHead(e.element)?(e.element.ownerDocument.body||e.element.ownerDocument.write("<body>"),e.element.ownerDocument.body.appendChild(p)):e.element.parentNode.insertBefore(p,e.element)}else e.document.write('<div style="display:none" id="'+e.id+'"></div>');var d,l=e.positionId;if(e.implicit||(t.explicitlyRegisteredPositionIds[l]=!0),this.positions.hasOwnProperty(l))for(var u=2;;u++)if(!this.positions.hasOwnProperty(l+"."+u)){l=l+"."+u,d=u;break}switch((e.virtual||{}).type){case"immediate":if(!e.implicit&&t.master)return n("Virtual position cannot be explicit: "+l),void t.loadEvent("PANIC",void 0,void 0,{detail:l,fail_reason:"virtual_immediate_cannot_be_explicit"});break;case"override":if(d)return n("Virtual override cannot be multiple: "+l),void t.loadEvent("PANIC",void 0,void 0,{detail:l,fail_reason:"virtual_override_cannot_be_multiple"})}i("Registering position "+l+" on "+(this.master?"master pam":"hosted pam"));var m=new Date;this.firstPositionRegisteredAt||(this.firstPositionRegisteredAt=m);var h=this.positions[l]=new w(this,{positionId:l,registeredAt:m,active:!0,id:e.id,clickUrl:t.globalOptions.disablePublisherCC?"":e.clickUrl||this.clickUrl||"",advertiserClickUrl:e.advertiserClickUrl,document:e.document,window:e.window,implicit:e.implicit,virtual:e.virtual,injectionIndex:e.injectionIndex,pageContainerWidth:e.pageContainerWidth,decoratedAt:e.decoratedAt?new Date(e.decoratedAt):void 0,allAdvertiserClickUrls:e.allAdvertiserClickUrls,allClickUrls:e.allClickUrls,alwaysHosted:e.alwaysHosted});if(e.alwaysHosted&&(this.somePositionsAreAlwaysHosted=!0),f.forObject(h),e.window&&!e.window.piximedia&&(e.window.piximedia=A.piximedia),void 0!==e.implicit&&(h.implicit=e.implicit),"footer"!==l&&this.globalOptions.enableFooter&&this.positions.footer&&!this.positions.footer.clickUrl&&e.clickUrl&&!t.globalOptions.disablePublisherCC&&(this.positions.footer.clickUrl=e.clickUrl),e.ajax||(this.positionCurrentlyInline=l),e.last&&this.stopWaitingForOtherPositions(),this.emitLocal("pre-hello",h),e.activateAds!==!1){var v,g=!1,y={};y[l]=h;for(var b=0;b<this.availableAds.length;b++){var x=this.availableAds[b];if(x.active){if(x.require&&x.require.positions&&this.queryPositions(x.require.positions,{positions:y,notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length){g=!0,v=x;break}if(x.use&&x.use.positions&&this.queryPositions(x.use.positions,{conditionPositions:this.positions,positions:y,notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length){g=!0,v=x;break}}else if(x.require&&x.require.positions){if(this.queryPositions(x.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length){if(this.queryPositions(x.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,requireAll:!0}).length){g=!0,v=x;break}if(!this.performedRendezVous){g=!0,this.scheduleRendezVous();break}}else if(x.use&&x.use.positions&&this.queryPositions(x.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length&&!this.performedRendezVous){g=!0,this.scheduleRendezVous();break}}else if(x.use&&x.use.positions){var I=!!this.queryPositions(x.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length;if(I){g=!0,v=x;break}}}if(g&&v)if(v.passback||this.numberOfExplicitPositions||this.globalOptions.allowActiveAdsWithNoExplicitPositions)if(v.active&&!v.disabled){
if(v.active){h.requested=!0,h.requestedBy=v;var k=v.emitLocal("hello",h);h.used=!0,h.decoratedBy=v,!h.implicit&&this.mode.match(/^alliance/)&&h.loadEvent("JS:POSITION_USED",{detail:l}),k||(n("Pushing position "+h.positionId),v.positions.push(h))}}else this.activateAd(v);else this.performedRendezVous||this.scheduleRendezVous();(!g||v&&v.passback)&&t.globalOptions.reportPositionWithNoAds&&!h.implicit&&t.loadEvent("JS:NO_ADS",void 0,void 0,{detail:h.positionId})}return this.positionCurrentlyInline=void 0,this.decorativeAds.length&&h.id&&(i("schedule rendez-vous because of decorative ads"),this.scheduleRendezVous()),h.implicit||setTimeout(function(){t.registerVirtualPositions()},0),this.emitLocal("post-hello",h),this.master&&setTimeout(function(){h.used||h.sentBlank||h.implicit||(h.sentBlank=!0,t.loadEvent("JS:BLANK",void 0,void 0,{detail:h.positionId}),t.globalOptions.reportPositionWithNoAds&&t.loadEvent("JS:BLANK:UNEXPECTED",void 0,void 0,{detail:h.positionId}))},1e4),h},I.prototype.registerVirtualPositions=function(){var e=this,t=function(e){if(e){"string"==typeof e&&d(e);for(var t=0;t<e.length;t++)d(e[t])}},o=function(i){if(e.master){try{i["tracking.position"]&&t(i["tracking.position"].pixelUrl)}catch(o){}try{var n=e.getTopmostWindow(),a=e.mode+"/"+e.siteId+"/"+e.placementId;n._piximedia=n._piximedia||{},n._piximedia.pixelSPSent=n._piximedia.pixelSPSent||{},n._piximedia.pixelSPSent[a]||(n._piximedia.pixelSPSent[a]=!0,i["tracking.placement"]&&t(i["tracking.placement"].pixelUrl),d("//"+T+"/event/?P|"+e.siteId+"|"+e.placementId+"|event=JS:PLACEMENT;detail="+u+"||"+Math.random()+"|"))}catch(o){}}};if(e.globalOptions.virtualPositions){var n,a=e.getTopmostDocument(),r=e.getTopmostWindow(),s=!1;for(var c in e.positions)if(e.positions.hasOwnProperty(c)){var p=e.positions[c];if(!p.implicit&&p.clickUrl){n=p.clickUrl;break}}var l=[];for(var u in e.globalOptions.virtualPositions)if(e.globalOptions.virtualPositions.hasOwnProperty(u)){if(e.positions.hasOwnProperty(u))continue;var m=e.globalOptions.virtualPositions[u];if(m.prerequisite&&!(e.queryPositions(m.prerequisite)||[]).length)continue;"override"!==m.type&&(m.immediate||"immediate"===m.type||e.performedRendezVous?(i("Registering virtual position"),o(m),l.push({siteId:e.siteId,placementId:e.placementId,positionId:u,clickUrl:n,document:a,window:r,id:null,ajax:!0,implicit:!0,virtual:m,advertiserClickUrl:(m["tracking.position"]||{}).clickUrl})):s=!0)}if(1===l.length)e.hello(l[0]);else if(l.length>1){for(var h=0;h<l.length;h++){var f=l[h];f.activateAds=!1,e.hello(f)}e.tryAndActivateAds()}s&&(i("Scheduling rendez-vous for non-immediate virtual position"),e.scheduleRendezVous())}},I.prototype.tryAndActivateAds=function(e){i("try and activate ads");var t=this;e=e||{};for(var o=[],n=function(e){return function(){e.passback||t.numberOfExplicitPositions||t.globalOptions.allowActiveAdsWithNoExplicitPositions?t.activateAd(e):t.performedRendezVous||t.scheduleRendezVous()}},a=0;a<this.availableAds.length;a++){var r=this.availableAds[a];if(!r.active){var s=n(r);if(r.require&&r.require.positions){var c=!!this.queryPositions(r.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length;if(c){var p=!!this.queryPositions(r.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,requireAll:!0}).length;p?s():this.performedRendezVous||(o.push(r),this.scheduleRendezVous())}}else if(r.use&&r.use.positions&&r.use.positions.length&&!e.onlyConsiderRequires){var d=this.queryPositions(r.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0});if(d.length){var l=!1;e:for(var u=0;u<o.length;u++){var m=o[u],h=!1,f=!1;if(m.require&&m.require.positions&&(h=!!this.queryPositions(m.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,seekOverlapWith:d}).length),m.use&&m.use.positions&&(f=!!this.queryPositions(m.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,seekOverlapWith:d}).length),h||f){l=!0;break e}}l||s()}}}}if(!this.scheduledRendezVous||this.performedRendezVous){var v=function(e){setTimeout(function(){e.used||e.sentBlank||e.implicit||(e.sentBlank=!0,t.loadEvent("JS:BLANK",void 0,void 0,{detail:e.positionId}),t.globalOptions.reportPositionWithNoAds&&t.loadEvent("JS:BLANK:UNEXPECTED",void 0,void 0,{detail:e.positionId}))},1e4)};for(var g in this.positions)this.positions.hasOwnProperty(g)&&v(this.positions[g])}},I.prototype.scheduleRendezVous=function(){var e=this;this.scheduledRendezVous||(i("Schedule rendez-vous"),this.scheduledRendezVous=!0,this.globalOptions.rendezvous_fast_duration&&(this.timeoutRendezVousFast=setTimeout(function(){i("Rendez-vous fast!"),e.tryAndActivateAds(),e.on("post-hello",function(){e.performedRendezVous||setTimeout(function(){e.tryAndActivateAds()},0)})},this.globalOptions.rendezvous_fast_duration)),this.timeoutRendezVous=setTimeout(function(){e.timeoutRendezVous=void 0,this.timeoutRendezVousFast&&(clearTimeout(this.timeoutRendezVousFast),this.timeoutRendezVousFast=void 0),i("Rendez-vous!"),e.performedRendezVous=!0,e.registerVirtualPositions(),e.tryAndActivateAds(),setTimeout(function(){e.sendStatistics()},2e3)},this.globalOptions.rendezvous_duration||C))},I.prototype.sendStatistics=function(){if(!this.sentStatistics&&(this.sentStatistics=!0,this.mode.match(/^alliance/)&&this.master&&!A.piximedia.preview)){var e=(this.globalOptions.context||{}).alliance_rtapos?",had_rta_pos":",no_rta_pos",t=Object.keys(this.explicitlyRegisteredPositionIds).sort().join(","),i=this.numberOfActiveAds||0;i>=3&&(i="3MORE");var o=this.realAds.length;o>=10?o="10MORE":o>=5?o="5-10":o>0&&(o="1-4");var n=this.birthdateCookie,a=this.birthdateLS,r=a||n;if(n&&a?e+=n===a?",becls":",bnecls":n?e+=",b1c":a&&(e+=",b1ls"),r){var s=(new Date-r)/1e3/86400;e+=0>s?",bdi":1>s?",bdd":7>s?",bdw":30>s?",bdm":",bdo"}else e+=",bdn";if(this.loadEvent("JS:STATS",void 0,void 0,{c1:i||0,c2:o,c3:e,c4:t}),!this.numberOfActiveAds)for(var c=0;c<this.allAvailableAds.length;c++){var p=this.allAvailableAds[c];if(!p.passback&&p.args&&p.args.not_enough_pos_pixel){this.loadPixel(p.args.not_enough_pos_pixel);break}}}},I.prototype.stopWaitingForOtherPositions=function(){i("We no longer expect other positions"),this.timeoutRendezVousFast&&(clearTimeout(this.timeoutRendezVousFast),this.timeoutRendezVousFast=void 0),this.timeoutRendezVous&&(clearTimeout(this.timeoutRendezVous),this.timeoutRendezVous=void 0),this.scheduledRendezVous=!0,this.performedRendezVous=!0},I.prototype.queryPositions=function(e,t){"string"==typeof e&&(e=[e]),t=t||{};for(var i=[],o=0;o<e.length;o++){var n=this.queryPosition(e[o],t);if(t.requireAll&&!n.length)return[];if(t.seekOverlapWith)for(var a=0;a<n.length;a++)-1===c(i,n[a])&&-1!==c(t.seekOverlapWith,n[a])&&i.push(n[a]);else for(var r=0;r<n.length;r++)-1===c(i,n[r])&&i.push(n[r])}return i},I.prototype.parseRequestedPositions=function(e){s(e)||(e=[e]);for(var t=[],i=0;i<e.length;i++)for(var o=e[i].split(","),n=0;n<o.length;n++)for(var a=o[n],r=a.split(" "),p=0;p<r.length;p++){var d=r[p];if(d){var l=d.split(":"),u=l[0];-1===c(t,u)&&t.push(u)}}return t},I.prototype.queryPosition=function(e,t){if("string"!=typeof e)return this.queryPositions(e);var i,o=e.split(/ *=> */);if(o&&o.length>=2){for(var n=0;n<o.length-1;n++){var a=o[n];if(!t.ignoreConditions&&!this.queryPosition(a,{positions:t.conditionPositions||t.positions||this.positions}).length)return[]}i=o[o.length-1]}else i=e.replace(/, +/g,",");t=t||{};var r=t.positions||this.positions,s=i.split(" "),p=[];e:for(var d=0;d<s.length;d++){var l=s[d];if(l){for(var u=l.split(","),m=[],h=0;h<u.length;h++){var f=u[h];if(f)for(var v=P(f,t,r),g=0;g<v.length;g++)m.push(v[g])}if(!m.length&&!t.seekOverlapWith&&!t.spaceIsOr){p=[];break e}for(var y=0;y<m.length;y++)p.push(m[y])}}var b=[];if(t.seekOverlapWith)for(var w=0;w<p.length;w++)-1===c(b,p[w])&&-1!==c(t.seekOverlapWith,p[w])&&b.push(p[w]);else for(var x=0;x<p.length;x++)-1===c(b,p[x])&&b.push(p[x]);return b},I.prototype.addEvent=function(e,t,i){if(e)if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else if(e["on"+t]){if("function"==typeof e["on"+t]){var o=e["on"+t];e["on"+t]=function(){i.apply(e,arguments),o.apply(e,arguments)}}}else e["on"+t]=i},I.prototype.removeEvent=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]===i&&(e["on"+t]=null)},I.prototype.waitTopDomLoaded=function(e){if(!this.master){var t="waitTopDomLoadedCallback"+this.rand();return this.emit("wait-top-dom-loaded",{callbackId:t})}var i=this.getTopmostWindow(),o=i.document,n=this,a=!1,r=function(){return a?void 0:(a=!0,"function"==typeof e?void e.apply(n):"string"==typeof e?void window[e].apply(n):!1)},s=function(){"complete"===o.readyState&&(o.detachEvent("onreadystatechange",s),r())};if("interactive"===o.readyState||"complete"===o.readyState)return void r();if(o.addEventListener?o.addEventListener("DOMContentLoaded",function(){r()},!1):o.all&&!A.opera&&o.attachEvent&&o.attachEvent("onreadystatechange",s),/Safari/i.test(navigator.userAgent))var c=i.setInterval(function(){/loaded|complete/.test(o.readyState)&&(r(),i.clearInterval(c))},50);this.addEvent(i,"load",r,!1)},I.prototype.waitDomLoaded=function(e){var t=this,i=!1,o=function(){return i?void 0:(i=!0,"function"==typeof e?void e.apply(t):"string"==typeof e?void window[e].apply(t):!1)},n=function(){"complete"===_.readyState&&(_.detachEvent("onreadystatechange",n),o())};if("interactive"===_.readyState||"complete"===_.readyState)return void o();if(_.addEventListener?_.addEventListener("DOMContentLoaded",function(){o()},!1):_.all&&!A.opera&&_.attachEvent&&_.attachEvent("onreadystatechange",n),/Safari/i.test(navigator.userAgent))var a=t.getTopmostWindow(),r=a.setInterval(function(){/loaded|complete/.test(_.readyState)&&(o(),a.clearInterval(r))},50);this.addEvent(A,"load",o,!1)},I.prototype.waitDomMutable=function(e){var t=this;this.waitDomLoaded(function(){if(t.msie&&t.msie<=8&&-1===navigator.userAgent.search("Trident/"))var i=t.getTopmostDocument(),o=t.getTopmostWindow(),n=o.setInterval(function(){"complete"===i.readyState&&(o.clearInterval(n),e.apply(t))},50);else e.apply(t)})},I.prototype.getMarkerForPosition=function(e){var t;return this.loadMarkerForPosition(e,function(e){t=e}),t},I.prototype.loadMarkerForPosition=function(e,t){var i=this;if("function"!=typeof t&&o("cb should be a function"),"string"==typeof e){var n=this.queryPosition(e);if(1!==n.length)return t();e=n[0]}if(e.virtualMarker)return this.isInDOM(e.virtualMarker)?t(e.virtualMarker,e.virtualMarker2):t(e.virtualMarker=e.virtualMarker.ownerDocument.getElementById(e.virtualMarker.id));var a,r,s=function(){var t,o=i.getTopmostWindow(),n=o.document;e.virtual.javascript?t=i.master?new Function("return function(document, window) {\n"+e.virtual.javascript+"\n}")()(n,o):document.body:e.virtual.getContainer&&(t=e.virtual.getContainer());var r=t.ownerDocument.createElement("div");e.id=r.id="pixiMarkerVirtual"+Math.round(1e16*Math.random()),t.appendChild(r),e.marker=e.virtualMarker=r,a=e.marker};if(e.virtual&&"override"===e.virtual.type)s();else if(e.id&&e.document){var c=e.document.getElementById(e.id);if(c&&(a=c),e.window||(a=void 0),!a)try{a=e.window.parent.document.getElementById(e.id)}catch(p){a=void 0}if(a){var d=i.getTopmostFiFForElement(a);if(d){d.style.height=0,d.style.display="block",d.style.width=0,(d.id||"").match(/^sas_/)&&(d.className+=" pmIframeContainer",this.loadLibrary("sweetlib.js",function(){var e=A.piximedia.SweetLib;e.createCSS(".pmIframeContainer","height: 0 !important; width: 0 !important",d.ownerDocument)})),r=e.virtualMarker2=a;var l=d.ownerDocument.createElement("div");l.id="pixiMarkerTopmostIframe"+Math.round(1e16*Math.random()),h(l),d.parentNode.insertBefore(l,d),a=l}e.virtualMarker=a}}else a=e.marker?e.marker:void 0;if(!a&&e.virtual&&s(),!e.decoratedBy||!e.decoratedBy.shouldBeBeforePageContainer(e)){if(e.decoratedBy&&e.decoratedBy.shouldBeBeforeBody(e)){r=a,e.virtualMarker2=r;var u=i.getTopmostDocument(),m=u.getElementsByTagName("body")[0],f=u.createElement("div"),v=u.createElement("div");return f.appendChild(v),f.className="pmBodyPosition pmCentered",v.id="pixiMarkerBody"+Math.round(1e16*Math.random()),m.insertBefore(f,m.firstChild),e.virtualMarker=v,t(v,r)}return t(a)}r=a,e.virtualMarker2=r,this.loadLibrary("sweetlib.js",function(){var o=A.piximedia.SweetLib,n=i.getTopmostDocument();o.loadPageContainer({document:n,hints:i.globalOptions.pagecontainerHints},function(n,a){var s=n.ownerDocument,c=s.createElement("div"),p=s.createElement("div");p.className="pmMarkerContainer",p.id="pixiMarkerPCContainer"+Math.round(1e16*Math.random()),p.appendChild(c),h(p),p.style.position="absolute",p.style.overflow="hidden";var d=o.getScrollbarWidth();i.cssCalc?(p.style.width="calc(100vw - "+d+"px)",p.style.left="50%",p.style.marginLeft="calc(-50vw + "+d/2+"px)"):(p.style.left="50%",setInterval(function(){var e=o.getViewportSize()[0]-d;parseFloat(p.style.minWidth,10)!==e&&(p.style.minWidth=e+"px",p.style.marginLeft=-(e/2)+"px")},50)),c.id="pixiMarkerPC"+Math.round(1e16*Math.random()),n.parentNode.insertBefore(p,n),e.virtualMarker=c,e.pageContainerWidth=a.width;var l=o.getPropertyValue(n,"clear");if("left"===l||"right"===l||"both"===l){var u=p.ownerDocument.createElement("div");h(u),u.style.clear=l,p.parentElement.insertBefore(u,p)}return t(c,r)})})},I.prototype.loadMarkersForPositions=function(e,t){var i=[],o=this,n=0,a=function(){if(n===e.length)return t(i);var r=e[n];o.loadMarkerForPosition(r,function(e){i.push(e),n++,a()})};a()},I.prototype.rand=function(){return Math.round(1e16*Math.random())},I.prototype.htmlentities=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},I.prototype.injectFriendlyContent=function(e,t,o){A.piximedia.callbacks=A.piximedia.callbacks||{};var s,c,p,d=this,l=e.document,u="pmFif"+Math.round(1e16*Math.random()),m=0,f=0,v="callbackWrite"+u,g="callbackOnLoad"+u,y="";i("Injecting friendly contents");var w=t.htmlComments||null;c=new b(this,e,t.iframeOptions||{}),!o||o.iframe||e.hosted||(o.iframe=c),A.piximedia.callbacks[g]=function(e,t){var i=t.name||"untitled";n("["+i+"] Iframe loaded, checking surface ***",s);var o,a=function(){var r=e.body,s=r.scrollWidth,p=r.scrollHeight;if(s&&p&&s!==m&&p!==f){n("["+i+"] Found surface: "+s+"x"+p),o&&t.clearInterval(o);var d=(l||_).getElementById(u);n("["+i+"] Found iframe: ",d),c.options.doNotResize?n("["+i+"] (not resizing)"):(n("["+i+"] (resizing)"),c.emit("resize",{width:s,height:p,onlyIfNoSurface:!0}))}else o||(o=t.setInterval(a,10))};a()};var x,I="",k="",P="";if(A.piximedia._.iframes=A.piximedia._.iframes||{},A.piximedia._.iframes[u]=c,w&&(k+="<!-- Pixi Begin Javascript: "+w.label+"-->\n"),I+="window.inFIF=true; window.inDapIF=true;\n",I+="window.name="+this.stringify(t.name||"untitled")+";\n",I+="window.pmFIFID="+this.stringify(u)+";\n",I+="window.piximedia = parent.piximedia;\n",I+="window.framedPam = parent.piximedia._.pams["+this.stringify(this.uniqKey)+"];\n",I+="window.framedIframe = parent.piximedia._.iframes["+this.stringify(u)+"];\n",I+="window.pmContext = window.framedPam.globalOptions.context || {};\n",o&&o.injectedOnce&&(I+="window.pmBypassImpression = 1;\n"),o){var O="ad"+this.rand();A.piximedia._.ads=A.piximedia._.ads||{},A.piximedia._.ads[O]=o,I+="window.framedAd = parent.piximedia._.ads["+this.stringify(O)+"];\n",I+="window.framedAd.framedDocument=document;window.framedAd.framedWindow=window;\n"}var S="position"+this.rand();A.piximedia._.positions=A.piximedia._.positions||{},A.piximedia._.positions[S]=e,I+="window.framedPosition = parent.piximedia._.positions["+this.stringify(S)+"];\n",I+="try{for(var pmk in window.piximedia){if(window.piximedia.hasOwnProperty(pmk)){var s=pmk.toString();if(s.match(/^pmData/)){window[s]=window.piximedia[s];}}}}catch(e){}\n";for(var C in A)if(C.toString().match(/^pmData/)){var E=this.stringify(C);I+="window["+E+"] = parent["+E+"];\n"}return t.javascript?(t.javascript=t.javascript.replace(/MACRO_PUBLISHER_CLICK_COMMAND/g,e.clickUrl),x=this.msie?"<script>"+t.javascript+"</script><script>\nfunction pmCloseDocument() { setTimeout(function() { document.close(); }, 200); }\nfunction pmWaitAllScripts(secondTry) { document.pmWaiting = (document.pmWaiting || 0) + 1; var scripts = document.getElementsByTagName('script'), allComplete = true; for(var i = scripts.length - 1; i >= 0; i--) { if(scripts[i].readyState !== 'complete') { allComplete = false; break; } } if(allComplete) { setTimeout(function() { secondTry? pmCloseDocument(): pmWaitAllScripts(true); }, 1000); } else { setTimeout(pmWaitAllScripts, 1000); } }\nsetTimeout(pmWaitAllScripts, 1000);\n</script>":"<script>"+t.javascript+"</script><script>setTimeout(function() { document.close(); }, 200)</script>\n"):t.src&&(t.src=t.src.replace(/MACRO_PUBLISHER_CLICK_COMMAND/g,e.clickUrl),y+=this.msie?a("<script>\nfunction pmWaitAllScripts(secondTry) { var scripts = document.getElementsByTagName('script'), allComplete = true; for(var i = scripts.length - 1; i >= 0; i--) { if(scripts[i].readyState !== 'complete') { allComplete = false; break; } } if(allComplete) { setTimeout(function() { secondTry? document.close(): pmWaitAllScripts(true); }, 1000); } else { setTimeout(pmWaitAllScripts, 1000); } }\n</script><script src=\""+t.src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+'" onreadystatechange="pmWaitAllScripts()"></script>\n'):r('<script src="'+t.src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+'"></script>\n<script>setTimeout(function() { document.close(); }, 200); </script>\n')),w&&(P+="\n<!-- Pixi End Javascript: "+w.label+"-->"),x?d.msie&&d.msie>6?(A.piximedia.callbacks[v+"_w"]=a("<head></head><body onload='if(parent.piximedia&&parent.piximedia.callbacks){return parent.piximedia.callbacks."+g+"(document,window)}'>\n"+k+"<script>"+I+"</script>\n"+x+P),A.piximedia.callbacks[v]=a("<script>setTimeout(function() { if(parent.piximedia&&parent.piximedia.callbacks)window.location.replace('javascript:new Function(parent.piximedia.callbacks."+v+"_w)()'); }, 0)\n</script>\n")):A.piximedia.callbacks[v]=a("<head></head><body onload='parent.piximedia.callbacks."+g+"(document,window)'>\n"+k+"<script>"+I+"</script>\n"+x+P):A.piximedia.callbacks[v]=r("<head></head>\n<body onload='parent.piximedia.callbacks."+g+"(document,window)'>\n"+k+"<script>"+I+"</script>\n")+y+r(P+"</body>\n"),this.msie&&(m=1,f=1),function(o){return e.positionId===d.positionCurrentlyInline&&e.document&&!d.globalOptions.ajax&&!t.container&&(i("Injecting inline position"),e.document.write('<div style="'+R+'"><iframe allowfullscreen name="'+t.name+'" src="javascript:false" class="pmFiF" id="'+u+'" style="display: block; background: white; height: '+f+"px; width: "+m+'px" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="'+m+'" height="'+f+'"></iframe></div>'),s=e.document.getElementById(u))?o(s):void(s||d.waitDomMutable(function(){!function(i){return t.container?i(t.container):void d.loadMarkerForPosition(e,i)}(function(e,n){if(!e){var a=d.getTopmostDocument();e=a.createElement("div");var r="pixiMarkerAuto"+Math.round(1e16*Math.random());e.id=r,a.body.appendChild(e)}var l=e.ownerDocument;if(s=l.createElement("iframe"),s.name=t.name,s.id=u,s.className="pmFiF",s.style.display="block",s.style.background="white",s.style.height=f+"px",s.style.width=m+"px",s.marginWidth=0,s.marginHeight=0,s.frameBorder=0,s.scrolling="no",s.allowFullscreen=!0,s.width=m,s.height=f,"HEAD"===e.nodeName)e.appendChild(s);else{var v=l.createElement("div");if(v.className="pmFiFContainer pmContainer "+d.containerClassName,h(v),t.container?e.appendChild(v):e.parentNode.insertBefore(v,e),w&&(p=v.ownerDocument.createComment("Pixi Iframe Container: "+w.label),v.parentNode.insertBefore(p,v),p=v.ownerDocument.createComment("Pixi Iframe: "+w.label),v.appendChild(p)),v.appendChild(s),(m||f)&&7!==d.msie){v.style.position="absolute",v.className+=" pmZeroSurface";var g=l.defaultView||l.parentWindow,y=0,b=g.setInterval(function(){var e;try{e=v.getBoundingClientRect()}catch(t){return i("couldn't fetch getBoundingClientRect()"),void(y++>10&&clearInterval(b))}var o=e.right-e.left,n=e.bottom-e.top;o>1&&n>1&&(v.className.match(/pmZeroSurface/)&&(v.className=v.className.replace(/pmZeroSurface/,""),v.style.position="relative"),g.clearInterval(b))},50)}}return n&&d.watchForRemoval(n,function(){c.emit("remove")}),o(s)})}))}(function(e){e.onerror=function(){c.emit("error",arguments)};var t,i=d.getTopmostDocument();try{t=e.contentWindow.document}catch(o){d.log("Couldn't acess content document, probably because of mismatching document.domain");try{e.src="javascript:document.write('<head><script>document.domain=\""+i.domain+"\";</script></head><body></body>')",t=e.contentDocument||e.contentWindow.document}catch(o){try{d.log("Couldn't still access document, probably because of still mismatching document.domain"),e.src="javascript:document.write('<head><script>document.domain=\""+e.ownerDocument.domain+"\";</script></head><body></body>')",t=e.contentDocument||e.contentWindow.document}catch(o){d.log("Couldn't REALLY access document :-(")}}t=e.contentDocument||e.contentWindow.document}d.msie?t.open().write("<script>window.location.replace(\"javascript:var x;try{x=parent.piximedia.callbacks;}catch(e){document.domain='"+i.domain+"';}new Function(parent.piximedia.callbacks."+v+')()")</script>'):t.open().write("<script>new Function(parent.piximedia.callbacks."+v+")()</script>"),c.setIframe(e)}),o&&!o.passback&&(c.on("remove",function(){c.doNotSendPixels||(e.loadEvent("JS:REMOVED",{detail:e.positionId}),o.shouldBeBeforePageContainer(e)&&this.pam.loadLibrary("sweetlib.js",function(){var e=A.piximedia.SweetLib;e.setBodyBackgroundColor({color:null}),e.moveTopOfPageContainer(e.getPageContainer(),0)}))}),c.on("winlose",function T(){T.ids=T.ids||{},c.doNotSendPixels||T.ids[e.positionId]||(T.ids[e.positionId]=!0,e.loadEvent("JS:WINLOSE",{detail:e.positionId}),setTimeout(function(){T.ids[e.positionId]=!1},1e4))})),c},v.prototype.getAllVisibilityForPixiPositionId=function(e){if(!this.visibility)return[];var t={};t[e]={positionId:{}};for(var i in this.visibility)if(this.visibility.hasOwnProperty(i)&&this.pam.queryPositions(i,t).length)return this.visibility[i];return[]},v.prototype.shouldHostPosition=function(e){var t=this.remapPositions||{};if(!this.pam.master)return!1;if(this.pam.msie&&this.pam.msie<8)return!1;if(this.pam.safari&&this.pam.safari<7)return!1;if("object"==typeof e&&e.alwaysHosted)return!0;if("string"==typeof e&&(this.pam.positions[e]||{}).alwaysHosted)return!0;if(!this.hosted_positions)return!1;var i=this.hosted_positions;"string"==typeof i&&(i=i.split(/ +/));for(var o=0;o<i.length;o++){var n=i[o];for(var a in t)if(t.hasOwnProperty(a)){var r=new RegExp("\\b"+a+"\\b","g");n=n.replace(r,t[a])}var s={};s[e.positionId]=e;var c=!1;if(this.require&&this.require.positions&&this.pam.queryPositions(this.require.positions,{positions:s,seekOverlapWith:[e]}).length&&(c=!0),this.use&&this.use.positions&&this.pam.queryPositions(this.use.positions,{positions:s,seekOverlapWith:[e]}).length&&(c=!0),c&&this.pam.queryPositions(n,{positions:s}).length)return!0}return!1},v.prototype.shouldBeBeforeBody=function(e){if(!this.pam.master)return!1;var t=this.remapPositions||{};if(!this.positions_before_body)return!1;var i=this.positions_before_body;"string"==typeof i&&(i=i.split(/ +/));for(var o=0;o<i.length;o++){var n=i[o];for(var a in t)if(t.hasOwnProperty(a)){var r=new RegExp("\\b"+a+"\\b","g");n=n.replace(r,t[a])}var s={};if(s[e.positionId]=e,this.pam.queryPositions(n,{positions:s}).length)return!0}return!1},v.prototype.shouldBeBeforePageContainer=function(e){if(!this.pam.master)return!1;var t=this.remapPositions||{};if(!this.positions_before_page_container)return!1;var i=this.positions_before_page_container;"string"==typeof i&&(i=i.split(/ +/));for(var o=0;o<i.length;o++){var n=i[o];for(var a in t)if(t.hasOwnProperty(a)){var r=new RegExp("\\b"+a+"\\b","g");n=n.replace(r,t[a])}var s={};if(s[e.positionId]=e,this.pam.queryPositions(n,{positions:s}).length)return!0}return!1},I.prototype.activateAd=function(e,t){var a=this;if(t=t||{},i("Activating ad: ",e),e.active&&n("Ad was already active"),e.active=!e.alwaysAvailable,!e.passback){if(a.numberOfActiveAds=a.numberOfActiveAds||0,a.numberOfActiveAds++,a.globalOptions.enableActiveAdsCapping&&void 0!==a.globalOptions.numberOfActiveAdsCapping&&a.globalOptions.numberOfActiveAdsCapping>=a.numberOfActiveAds){n("Deactivating other ads because capping was met");for(var r=0;r<a.availableAds.length;r++){var c=a.availableAds[r];c===e||c.passback||c.active||(c.require={positions:["disabled-ad-capping"]},c.disabledBecauseAdCapping=!0)}}a.globalOptions.keepAdringForRTA||(_.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",_.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),_.cookie="pixi_adr=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",_.cookie="pixi_adr=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",this.globalOptions.pixiAdrName&&(a.globalOptions.keepAdringForRTA||(_.cookie=this.globalOptions.pixiAdrName+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",_.cookie=this.globalOptions.pixiAdrName+"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"))}if(e.active&&e.use&&e.use.positions&&a.on("hello",function(t){var i={};i[t.positionId]=t,a.queryPositions(e.use.positions,{spaceIsOr:!0,positions:i}).length&&(t.requested=!0,t.requestedBy=e)}),t.positions){e.positions=t.positions;for(var p=0;p<e.positions.length;p++){var d=e.positions[p];this.positions.hasOwnProperty(d.positionId)||(this.positions[d.positionId]=d)}}else{if(e.positions=[],e.require&&e.require.positions)for(var l=this.queryPositions(e.require.positions,{activeAndNotUsed:!0,requireAll:!0}),u=0;u<l.length&&!e.disabled;u++){var m=l[u];m.active&&(n("Associating required position "+m.positionId),m.used=!0,e.positions.push(m))}if(e.use&&e.use.positions)for(var h=this.queryPositions(e.use.positions,{activeAndNotUsed:!0,spaceIsOr:!0}),f=0;f<h.length&&!e.disabled;f++){var v=h[f];v.active&&(n("Associating used position "+h[f]),e.positions.push(v))}}for(var g=new Date,y=0;y<e.positions.length;y++)if(e.positions[y].used=!0,e.positions[y].decoratedAt=g,e.positions[y].decoratedBy=e,!e.positions[y].implicit&&!e.passback&&this.mode.match(/^alliance/)){var b=e.positions[y];this.master?void 0===b.injectionIndex&&b.loadEvent("JS:POSITION_USED",{detail:b.positionId}):b.loadEvent("JS:POSITION_USED:HOSTED",{detail:b.positionId})}this.loadMarkersForPositions(e.positions,function(t){try{if(e.tag)e.tag.apply(a,t);else if(e.fif){var r=e.positions[0];if(a.master){var c=[],p=null,d=!!e.main_js_in_head,l=!!e.main_js_always_in_head;if(a.somePositionsAreAlwaysHosted||e.hosted_positions&&e.hosted_positions.length){e.shouldHostPosition(r)?c.push(r):p=r,e.on("hello",function(t){return e.shouldHostPosition(t)?(t.decoratedBy=e,t.decoratedAt=t.decoratedAt||new Date,a.hostPosition(e,t),!1):void 0});for(var u=1;u<e.positions.length;u++){var m=e.positions[u];e.shouldHostPosition(m)?c.push(m):p||(p=m)}}else p=r;for(var h=0;h<c.length;h++){var f=c[h];f.decoratedBy=e,f.decoratedAt=new Date,a.hostPosition(e,f)}if(p||l){if(d||l){var v=a.getTopmostDocument();a.injectFriendlyContent({positionId:"head",document:v,marker:v.head},e.fif,e)}else e.masterPosition=p||r,a.injectFriendlyContent(e.masterPosition,e.fif,e);e.iframe.on("remove",function(){n("Ad has been removed from DOM"),a.unloadAd(e)}).on("winlose",function(){n("Ad has been winlost");var t=e.positions;a.unloadAd(e,{hide:!0}),a.activateAd(e,{positions:t})}),e.injectedOnce=!0}}else a.injectFriendlyContent(r,e.fif,e)}else if(e.passback){e.active=!1;var y={htmlComments:{label:"Passback for "+(e.use||{}).positions}};switch(e.passback.type){case"javascript":if(i("Activating JavaScript passback"),e.passback.contents){var b;b="for(var k in parent){ if((!parent.hasOwnProperty || parent.hasOwnProperty(k)) && k.match(/^(sas|Smart|weborama_url_backup)/) && !k.match(/^(sas_ajax)$/)){ window[k] = parent[k]; } }\n";try{"pmdebugpassback"===top.window.name&&(b+="debugger;\n")}catch(w){}y.javascript=b+e.passback.contents}else y=void 0;break;case"redirect":i("Activating redirect passback"),e.passback.contents?y.src=e.passback.contents:y=void 0;break;default:y=void 0}if(y)for(var x=function(e,t,i){var o=a.injectFriendlyContent(e,t,i);o.iframe&&o.iframe.style&&(o.iframe.style.marginLeft="auto",o.iframe.style.marginRight="auto"),o.on("winlose",function(){n("Passback has been winlost"),e.injectionIndex=(e.injectionIndex||0)+1,a.loadEvent("JS:PASSBACK_WINLOST",void 0,void 0,{detail:e.positionId});var r=o.iframe.ownerDocument.getElementById(o.iframe.id);r&&r.parentNode.removeChild(r),x(e,t,i)}),o.on("error",function(){n("Passback error",arguments),a.loadEvent("JS:PASSBACK_ERROR",void 0,void 0,{detail:e.positionId});try{var t=o.iframe.contentDocument.createComment("Passback Failed To Load (Error)");o.iframe.contentDocument.body.appendChild(t),t=o.iframe.ownerDocument.createComment("Pixi Iframe: Passback Failed To Load (Error)"),o.iframe.parentNode.insertBefore(t,o.iframe),t=o.iframe.ownerDocument.createComment("Pixi Iframe Container: Passback Failed To Load (Error)"),o.iframe.parentNode.parentNode.insertBefore(t,o.iframe.parentNode)}catch(i){}});var r=setTimeout(function(){n("Passback timeout"),i.emit("passback-timeout"),a.loadEvent("JS:PASSBACK_TIMEOUT",void 0,void 0,{detail:e.positionId});try{var t=o.iframe.contentDocument.createComment("Passback Failed To Load (Timeout)");o.iframe.contentDocument.body.appendChild(t),t=o.iframe.ownerDocument.createComment("Pixi Iframe: Passback Failed To Load (Timeout)"),o.iframe.parentNode.insertBefore(t,o.iframe),t=o.iframe.ownerDocument.createComment("Pixi Iframe Container: Passback Failed To Load (Timeout)"),o.iframe.parentNode.parentNode.insertBefore(t,o.iframe.parentNode)}catch(r){}},1e4);o.on("resize",function(t){t&&t.width>1&&t.height>1&&(a.loadEvent("JS:PASSBACK_OK",void 0,void 0,{detail:e.positionId}),clearTimeout(r))})},I=0;I<e.positions.length;I++){var k=e.positions[I],P=k.positionId;if(a.scheduledRendezVous){var _=g-a.firstPositionRegisteredAt,O=3*(a.globalOptions.rendezvous_duration||C),S=Math.round(10*_/O);P+=0>S?":0":S>10?":MORE":":"+S}var E=A.piximedia.request_pos_sp[a.siteId][a.placementId],T=[];for(var N in E)E.hasOwnProperty(N)&&T.push(N);P+=":pos="+T.join(","),a.loadEvent("JS:PASSBACK",void 0,void 0,{detail:P}),x(k,y,e)}}}catch(w){o("Could not activate ad: "+w)}e.timetracker&&e.timetracker.global&&a.master&&a.loadLibrary("sweetlib.js",function(){e.timetrackerGlobal||(e.timetrackerGlobal=A.piximedia.SweetLib.setTimer("GLOBAL",function(t,i){e.loadEvent("TIMETRACKER::"+t,{duration:i})}),e.timetrackerGlobal.start())});var D;try{var M=A.localStorage?A.localStorage.getItem("pmCustomFieldsCSS"):"";if(M){var j=JSON.parse(M);j&&j.css&&(D=j.css)}}catch(w){}!D&&e&&e.args&&(D=e.args.css),D&&a.master&&a.loadLibrary("sweetlib.js",function(){var e=a.getTopmostDocument();if(s(D))for(var t=0;t<D.length;t++)A.piximedia.SweetLib.createCSSs(D[t],e);else A.piximedia.SweetLib.createCSSs(D,e)})})},I.prototype.unloadPosition=function(e){n("Unloading position",e);for(var t=0;t<(e.iframes||[]).length;t++){var i=e.iframes[t];n("Unloading iframe"),i.unload()}var o=e.decoratedBy;o&&(o.positions=p(o.positions,"positionId",e.positionId)),delete this.positions[e.positionId]},I.prototype.unloadAd=function(e,t){if(n("Unloading ad",e),t=t||{},e.positions)for(var i=0;i<e.positions.length;i++){for(var o=e.positions[i],a=0;a<(o.iframes||[]).length;a++){var r=o.iframes[a];n("Unloading iframe"),r.unload({hide:t.hide})}o.iframes=[],o.decoratedAt=o.decoratedBy=void 0,o.used=!1,delete this.positions[o.positionId]}e.iframe&&(e.iframe.unload({hide:t.hide}),e.iframe=void 0),e.purgeEventEmitter(),e.active=!1},I.prototype.hostPosition=function(e,t){var a=this;t.hosted=!0,n("Prepare to host position",t),
this.waitDomMutable(function(){i("DOM is mutable for hosted position",t);var r,s;s=function(e,t){var i=f.getID(e);if(i)try{r.fireEventToID(i,t,function(){},function(){})}catch(n){o("Caught exc, maybe destroyed rpc channel",n)}},a.globalEmitter.on("event",s),i("Injecting hosted position",t,e.positions),e.injectPosition(t,{iframeOptions:{doNotResize:!0}},function(o,c){i("Loading marker for hosted position",t),a.loadMarkerForPosition(t,function(o,p){if(!o){var d=a.getTopmostDocument();o=d.createElement("div");var l="pixiMarkerHosted"+Math.round(1e16*Math.random());o.id=l,d.body.appendChild(o)}if(i("Found marker for position "+t.positionId,o),r){i("Destroying dangling RPC channel");try{r.destroy()}catch(u){}}for(var m,f=o.childNodes,v=new b(a,t),g=0;g<f.length;g++)if(f[g].className.indexOf("pmContainer")>=0){m=f[g];for(var y=m.getElementsByTagName("iframe"),w=0;w<y.length;w++){var x=y[w];a.winlostIframeIds[x.id]=!0}m.parentNode.removeChild(m);break}m=o.ownerDocument.createElement("div"),m.className="pmHostedContainer pmContainer "+a.containerClassName,h(m),m.style.fontSize=0,o.appendChild(m);var I=m.getElementsByTagName("iframe");if(I.length)for(var k=0;k<I.length;k++){var P=I[k];a.winlostIframeIds[P.id]=!0,m.removeChild(P)}var A,_,O;_=m.ownerDocument,O=_.defaultView||_.parentWindow,O._piximedia=O._piximedia||{},function(e){return O._piximedia.easyXDM||(c.piximedia.injectEasyXDM(O,_,a.getTopmostWindow().location),O._piximedia.easyXDM=O.easyXDM.noConflict("_piximedia")),e()}(function(){A=O._piximedia.easyXDM,i("Creating RPC channel"),r=new A.Rpc({container:m,hash:!0,props:{style:{width:a.msie?1:0,height:a.msie?1:0},allowfullscreen:"allowfullscreen",scrolling:"no",width:a.msie?1:0,height:a.msie?1:0},remote:E,onReady:function(){n("master is ready")}},{local:{getConfig:function(){for(var o=[],n=[],r=0;r<a.allAvailableAds.length;r++)if(e.uniqid===a.allAvailableAds[r].uniqid){var s=a.allAvailableAds[r];s.injectedOnce=e.main_js_always_in_head||e.injectedOnce,o=[s];break}e.injectedOnce=!0;var c={},p={};for(var d in a.positions)if(a.positions.hasOwnProperty(d)){var l=a.positions[d];l.clickUrl&&(c[d]=l.clickUrl),l.advertiserClickUrl&&(p[d]=l.advertiserClickUrl)}var u={positionId:t.positionId,pixiPositionId:t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId),decoratedAt:t.decoratedAt,clickUrl:t.clickUrl,implicit:t.implicit,injectionIndex:t.injectionIndex,pageContainerWidth:t.pageContainerWidth,advertiserClickUrl:t.advertiserClickUrl,allAdvertiserClickUrls:p,allClickUrls:c};i("Config position: ",u),n.push(u);var m={siteId:a.siteId,placementId:a.placementId,globalOptions:a.globalOptions,allAvailableAds:o,positions:n,documentHasFocus:a.documentHasFocus};return m},fireEventToID:function(e,t,i,o){try{return a.globalEmitter.fireEventToID(e,t,{exceptTo:s}),i()}catch(n){return o()}}},remote:{fireEventToID:{}}});var o=function(){var e=m.getElementsByTagName("iframe");if(!e.length)return setTimeout(o,10);var t=e[0];i("Found RPC iframe",t),v.setIframe(t),p&&a.watchForRemoval(p,function(){n("Secondary marker has been removed"),v.emit("remove")})};i("Looking for RPC iframe"),o()})})})})},I.prototype.hostRoom=function(e,t,i){if(!this.master)return o("PAM.prototype.hostRoom() might only be called on the master PAM");t=t||{},n("Registering room "+e);var a="room."+e,r={siteId:this.siteId,placementId:this.placementId,positionId:a,ajax:!0,implicit:!0,virtual:{getContainer:i}};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);this.hello(r)},I.prototype.getTopmostFiFForElement=function(e){var t=e.ownerDocument,i=t.defaultView||t.parentWindow,o=this.getTopmostWindow();if(!i.inFIF&&!i.inDapIF&&!i.inDapMgrIf)return void 0;var n,a="pmBeacon"+this.rand(),r=i.name,s=o.document.getElementsByTagName("iframe");i.name=a;for(var c=0;c<s.length;c++){var p=s[c];try{if(p.contentWindow&&p.contentWindow.name===a){n=p;break}}catch(d){}}if(!n)e:for(var l=0;l<s.length;l++){var u=s[l];try{if(u.contentWindow&&(u.contentWindow.inFIF||u.contentWindow.inDapIF||u.contentWindow.inDapMgrIf))for(var m=u.contentWindow.document,h=m.getElementsByTagName("iframe"),f=0;f<h.lenght;f++){var v=h[f];try{if(v.contentWindow&&v.contentWindow.name===a){n=u;break e}}catch(d){}}}catch(d){}}return i.name=r,n},I.prototype.checkTopDomain=function(){var e,t=this;try{e=top.pmOriginalDomain}catch(i){return}if(e){var o=function(){var i;try{i=top.document.domain}catch(a){return n("Top document changed from â"+e+"â to unknown value!"),void t.loadEvent("PANIC",void 0,void 0,{fail_reason:"top_domain_changed",c1:e,c2:"EXCEPTION"})}i!==e?(n("Top document changed from â"+e+"â to â"+i+"â!"),t.loadEvent("PANIC",void 0,void 0,{fail_reason:"top_domain_changed",c1:e,c2:i})):setTimeout(o,1e4)};setTimeout(o,1e4)}},I.prototype.debug=function(){D=!0,A.console&&A.console.log&&A.console.log(t.get().join("\n"))},I.prototype.clearCSS=function(e){h(e)},I.prototype.createOpaqueAnimation=function W(e,t,i){var o=this;return W.prefix||(W.prefix="animation-"+o.rand()+"-",W.seq=0),i||(i=W.prefix+W.seq++),o.master?o.loadLibrary("sweetlib.js",function(){var n=o.getTopmostDocument(),a=A.piximedia.SweetLib.querySelector(e,n);o.animations[i]=A.piximedia.SweetLib.animate(a,t)}):o.emit("create-opaque-animation",e,t,i),i},I.prototype.createAnimation=function(e,t){var i=this,o=i.createOpaqueAnimation(e,t);return{play:function(e){i.playOpaqueAnimation(o,e)},reverse:function(e){i.reverseOpaqueAnimation(o,e)},clear:function(){i.clearOpaqueAnimation(o)}}},I.prototype.playOpaqueAnimation=function(e,t,i){var n=this;i||(i="fire-"+n.rand());var a="play-opaque-animation:callback:"+i;if(n.master){var r=n.animations[e];if(!r)return o("Could not find animation "+e);r.play(function(){n.emit(a)})}else n.on(a,function s(){n.removeListener(a,s),t(e)}),n.emit("play-opaque-animation",e,void 0,i)},I.prototype.reverseOpaqueAnimation=function(e,t,i){var n=this;i||(i="fire-"+n.rand());var a="reverse-opaque-animation:callback:"+i;if(n.master){var r=n.animations[e];if(!r)return o("Could not find animation "+e);r.reverse(function(){n.emit(a)})}else n.on(a,function s(){n.removeListener(a,s),t(e)}),n.emit("reverse-opaque-animation",e,void 0,i)},I.prototype.clearOpaqueAnimation=function(e){var t=this;if(t.master){var i=t.animations[e];if(!i)return o("Could not find animation "+e);i.clear()}else t.emit("clear-opaque-animation",e)},I.prototype.listBroadcastPm=function(e,t){var i=A.XMLHttpRequest?new A.XMLHttpRequest:void 0;if(e.match(/\/$/)||(e+="/"),"withCredentials"in i)i.open("GET","//"+N+"/list-of-broadcast.pm/"+e+"json",!0),i.onreadystatechange=function(){return 4===i.readyState?t(200!==i.status?{error:"failed: "+i.responseText}:JSON.parse(i.responseText)):void 0},i.send(null);else{var o="listbroadcastpm"+this.rand(),n=A.document.getElementsByTagName("head")[0],a=A.document.createElement("script");a.async=!0,a.src="//"+N+"/list-of-broadcast.pm/"+e+"jsonp=piximedia._."+encodeURIComponent(o),n.appendChild(a),A.piximedia._[o]=t}},I.prototype.bindVisibilityTracker=function(e,t,i,o){var n=this;return o||(o="fire-"+n.rand()),n.master?void n.loadLibrary("sweetlib.js",function(){var a=A.piximedia.SweetLib,r={object:a.querySelector(e)};for(var s in t)if(t.hasOwnProperty(s))switch(s){case"callback":break;default:r[s]=t[s]}a.bindVisibilityTracker(r,function(e){return i?i(e):void n.emit(o,e)})}):(n.on(o,i),n.emit("bind-visibility-tracker",e,t,void 0,o))},I.upscaleAssetQuery=function(e){if("object"==typeof e.match)return e;"string"==typeof e&&"{"===e.substr(0,1)&&(e=JSON.parse(e));var t=function(e){if("true"===e)return!0;if("false"===e)return!1;var t=parseFloat(e,10);return t.toString()===e?t:e};if("string"==typeof e.require){var i=I.upscaleAssetQuery(e.require);if(e.use){var o=I.upscaleAssetQuery(e.require).match.grabAllAssets;i.match.grabSomeAssets=[];for(var n in o)o.hasOwnProperty(n)&&(i.match.grabSomeAssets=i.match.grabSomeAssets.concat(o[n].grabSomeAssets))}return i}if("string"==typeof e){for(var a=e.replace(/,\s+/g,",").split(/\s+/),r={grabAllAssets:[]},c=0;c<a.length;c++){var p=a[c],d=p.split(","),l={grabSomeAssets:[]};r.grabAllAssets.push(l);for(var u=0;u<d.length;u++){var m=d[u],h={and:[]};l.grabSomeAssets.push(h);var f=m.split("."),v=f.shift();v&&h.and.push([{property:"type"},"==",v]);for(var g in f)if(f.hasOwnProperty(g)){var y=f[g],b=y.match(/^[0-9]+x[0-9]+$/);if(b)h.and.push([{property:"surface"},"==",y]);else if(b=y.match(/^([a-z_]+)(=|<|<=|>=|>|<>|!=)(.*)$/)){var w=b[1],x=b[2],k=b[3];h.and.push([{property:w},x,t(k)])}else h.and.push({property:y})}}}e={match:r}}else if("object"==typeof e){var P=Object.keys(e)[0];if(void 0===P)throw new Error("Invalid query (1)");var A=e[P];if(void 0===A)throw new Error("Invalid query (2)");if(A.desc||A.requires){var _={grabAllAssets:[],grabMatchingAssets:[]};for(var O in e)if(e.hasOwnProperty(O)){var S=e[O];t(S.mandatory)?_.grabAllAssets.push({grabName:O,value:I.upscaleAssetQuery(S.requires)}):_.grabMatchingAssets.push({grabName:O,value:I.upscaleAssetQuery(S.requires)})}e={match:_}}else{var C={and:[]},E={grabAllAssets:[C]},T=function(e,i){var o=function(e){return e};switch(e){case"weight":o=function(e){return 1024*e},e="file_size";break;case"iframable":e="iframeable"}if("string"!=typeof i)return[{property:e},"==",t(i)];var n=i.substr(i.length-1,1),a=i.substr(0,i.length-1);switch(n){case"+":case"-":case"!":switch(i=o(t(a)),n){case"+":return[{property:e},">=",i];case"-":return[{property:e},"<=",i];case"!":return[{property:e},"!==",i]}break;default:return[{property:e},"==",o(t(i))]}};for(var N in e)if(e.hasOwnProperty(N)){var D=e[N];if(s(D))for(var M=0;M<D.length;M++){var j=D[M];""!==j&&C.and.push(T(N,j))}else""!==D&&C.and.push(T(N,D))}e={match:E}}}return e},I.assetsMatchQuery=function(e,t,i){i=i||{};var o,n,a,r,c=i.trailMissing||[],p={},d=i.assetsUsedOnce||{},l=i.trailPredicate,u=function(e){o=e,n=o.name.split("."),a=n.shift(),r=o.metadata,"string"==typeof r&&(r=JSON.parse(r))},m=function(e){switch(e){case"type":return a;case"bytes":case"file_size":return o.file_size;default:return(r||{})[e]}};e=I.upscaleAssetQuery(e);var h={},f=[],v={},g=[],y=function(e){var t=e.id||e.asset_id;d[t]=!0;for(var i=0;i<g.length;i++){var o=g[i];v[o]=v[o]||[],h[o+":"+t]||(h[o+":"+t]=!0,v[o].push(e))}h[t]||(h[t]=!0,f.push(e))},b=function(e){var t=JSON.stringify(e);p[t]||(p[t]=!0,c.push(e))},w=function(e,o){if(e.grabName){g.push(e.grabName);var n=x(e.value,o);return g.pop(),n}if(e.grabAllAssets||e.grabSomeAssets||e.grabMatchingAssets){if(e.grabAllAssets){for(var a=!1,r=0;r<e.grabAllAssets.length;r++){var c=e.grabAllAssets[r];if(c.grabSomeAssets||c.grabMatchingAssets)x(c)||(a=!0);else{for(var p=!1,d=0;d<t.length;d++){var l=t[d];u(l),x(c,!0)&&(y(l),p=!0)}p||(a=!0,o||b(c))}}return a&&!i.forceOr?!1:!0}if(e.grabSomeAssets){for(var h=!1,f=[],v=0;v<e.grabSomeAssets.length;v++){for(var w=e.grabSomeAssets[v],I=!1,k=0;k<t.length;k++){var P=t[k];u(P),x(w,!0)&&(y(P),h=!0,I=!0)}I||f.push(w)}if(h||i.forceOr)return!0;if(!o)for(var A=0;A<f.length;A++)b(f[A]);return!1}if(e.grabMatchingAssets)for(var _=0;_<e.grabMatchingAssets.length;_++)for(var O=e.grabMatchingAssets[_],S=0;S<t.length;S++){var C=t[S];u(C),x(O,!0)&&y(C)}return!0}if(!s(e)){if(e.property)return m(e.property);if(e.and){for(var E=0;E<e.and.length;E++)if(!x(e.and[E]))return!1;return!0}if(e.or){for(var T=0;T<e.and.length;T++)if(x(e.or[T]))return!0;return!1}return"object"==typeof e&&e.match?x(e.match,o):e}var N=x(e[0]);if(1===e.length)return N;var D=e[1],M=x(e[2]);switch(D){case"<":return M>N;case">":return N>M;case"<=":return M>=N;case">=":return N>=M;case"=":case"==":case"===":return N===M;case"<>":case"!==":case"!=":return N!==M}},x=function(e){var i=o,n=t,a=!1;o&&(a=!0,t=[o]);var r=w.apply(this,arguments);return a&&(t=n,o=i),l?(s(e)&&l.push({predicate:e,asset:o,result:r}),r):r};if(e.match)return x(e.match)?f:[];throw new Error("Don't know how to parse this expression")},I.convertTrailMissing=function(e){var t=function(e){var t="*",i=[],o=function(e){if(e.property)-1===i.indexOf(e.property)&&i.push(e.property);else{if(!s(e))throw new Error("Unexepcted trail entry (4)");var o=e[0],n=e[1],a=e[2];if(o&&o.property){if("type"===o.property){if("=="!==n&&"==="!==n)throw new Error("Unexpected trail entry (3)");return void(t=a)}o=o.property}var r;switch(n){case"=":case"==":case"===":r=o+"="+a;break;case"!=":case"<>":case"!==":r=o+"!="+a;break;default:r=o+n+a}-1===i.indexOf(r)&&i.push(r)}};if(e.and)for(var n=0;n<e.and.length;n++)o(e.and[n]);return t+(i.length?"."+i.join("."):"")};if(e.grabSomeAssets){for(var i=[],o=0;o<e.grabSomeAssets.length;o++)i.push(t(e.grabSomeAssets[o]));return i.join(",")}return t(e)},I.prototype.getPrerequisiteVirtualPosition=function(e){try{if(!this.globalOptions||!this.globalOptions.virtualPositions)return;for(var t in this.globalOptions.virtualPositions)if(this.globalOptions.virtualPositions.hasOwnProperty(t)){var i=this.globalOptions.virtualPositions[t];if(i.prerequisite){var o={};if(o[t]={positionId:t},this.queryPosition(e,{positions:o}).length)return i.prerequisite}}}catch(n){return}},I.VERSION=S,I.RENDEZVOUS_DURATION=C,I.browserDetect=B,I.EventEmitter=f,I.Ad=v,I.Position=w,I.Iframe=b,I.AdProxy=g,I.CGAdProxy=y,I.isArray=s,A.piximedia["PAM"+S]=I,(!A.piximedia.PAM||A.piximedia.PAM.VERSION<S)&&(A.piximedia.PAM=I,A.piximedia.browserDetect=B)}(),window.piximedia._.injectEasyXDM=function(e,t,i){!function(e,t,i,o,n,a){function r(e,t){var i=typeof e[t];return"function"==i||!("object"!=i||!e[t])||"unknown"==i}function s(e,t){return!("object"!=typeof e[t]||!e[t])}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function p(){var e="Shockwave Flash",t="application/x-shockwave-flash";if(!b(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var i=navigator.plugins[e].description;i&&!b(navigator.mimeTypes)&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(S=i.match(/\d+/g))}if(!S){var o;try{o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),S=Array.prototype.slice.call(o.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),o=null}catch(n){}}if(!S)return!1;var a=parseInt(S[0],10),r=parseInt(S[1],10);return C=a>9&&r>0,!0}function d(){if(!V){V=!0;for(var e=0;e<J.length;e++)J[e]();J.length=0}}function l(t,i){return e.piximedia&&e.piximedia.pam&&e.piximedia.pam.waitDomMutable?e.piximedia.pam.waitDomMutable(function(){t.call(i)}):V?void t.call(i):void J.push(function(){t.call(i)})}function u(){var e=parent;if(""!==F)for(var t=0,i=F.split(".");t<i.length;t++)e=e[i[t]];return e.easyXDM}function m(t){return e.easyXDM=q,F=t,F&&(W="easyXDM_"+F.replace(".","_")+"_"),L}function h(e){return e.match(j)[3]}function f(e){return e.match(j)[4]||""}function v(e){var t=e.toLowerCase().match(j),i=t[2],o=t[3],n=t[4]||"";return("http:"==i&&":80"==n||"https:"==i&&":443"==n)&&(n=""),i+"//"+o+n}function g(e){if(e=e.replace(B,"$1/"),!e.match(/^(http||https):\/\//)){var t="/"===e.substring(0,1)?"":i.pathname;"/"!==t.substring(t.length-1)&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=i.protocol+"//"+i.host+t+e}for(;R.test(e);)e=e.replace(R,"");return e}function y(e,t){var i="",o=e.indexOf("#");-1!==o&&(i=e.substring(o),e=e.substring(0,o));var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(r+"="+a(t[r]));return e+(U?"#":-1==e.indexOf("?")?"?":"&")+n.join("&")+i}function b(e){return"undefined"==typeof e}function w(e,t,i){var o;for(var n in t)t.hasOwnProperty(n)&&(n in e?(o=t[n],"object"==typeof o?w(e[n],o,i):i||(e[n]=t[n])):e[n]=t[n]);return e}function x(){var e=t.body.appendChild(t.createElement("form")),i=e.appendChild(t.createElement("input"));i.name=W+"TEST"+D,O=i!==e.elements[i.name],t.body.removeChild(e)}function I(e){b(O)&&x();var i;O?i=t.createElement('<iframe name="'+e.props.name+'"/>'):(i=t.createElement("IFRAME"),i.name=e.props.name),i.id=i.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=t.getElementById(e.container)),e.container||(w(i.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=t.body);var o=e.props.src;if(e.props.src="javascript:false",w(i,e.props),i.border=i.frameBorder=0,i.allowTransparency=!0,e.container.appendChild(i),e.onLoad&&E(i,"load",e.onLoad),e.usePost){var n,a=e.container.appendChild(t.createElement("form"));if(a.target=i.name,a.action=o,a.method="POST","object"==typeof e.usePost)for(var r in e.usePost)e.usePost.hasOwnProperty(r)&&(O?n=t.createElement('<input name="'+r+'"/>'):(n=t.createElement("INPUT"),n.name=r),n.value=e.usePost[r],a.appendChild(n));a.submit(),a.parentNode.removeChild(a)}else i.src=o;return e.props.src=o,i}function k(e,t){"string"==typeof e&&(e=[e]);for(var i,o=e.length;o--;)if(i=e[o],i=new RegExp("^"==i.substr(0,1)?i:"^"+i.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),i.test(t))return!0;return!1}function P(o){var n,a=o.protocol;if(o.isHost=o.isHost||b(G.xdm_p),U=o.hash||!1,o.props||(o.props={}),o.isHost)o.remote=g(o.remote),o.channel=o.channel||"default"+D++,o.secret=Math.random().toString(16).substring(2),b(a)&&(a=v(i.href)==v(o.remote)?"4":r(e,"postMessage")||r(t,"postMessage")?"1":o.swf&&r(e,"ActiveXObject")&&p()?"6":"Gecko"===navigator.product&&"frameElement"in e&&-1==navigator.userAgent.indexOf("WebKit")?"5":o.remoteHelper?"2":"0");else if(o.channel=G.xdm_c.replace(/["'<>\\]/g,""),o.secret=G.xdm_s,o.remote=G.xdm_e.replace(/["'<>\\]/g,""),a=G.xdm_p,o.acl&&!k(o.acl,o.remote))throw new Error("Access denied for "+o.remote);switch(o.protocol=a,a){case"0":if(w(o,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),o.isHost){if(!o.local){for(var s,c=i.protocol+"//"+i.host,d=t.body.getElementsByTagName("img"),l=d.length;l--;)if(s=d[l],s.src.substring(0,c.length)===c){o.local=s.src;break}o.local||(o.local=e)}var u={xdm_c:o.channel,xdm_p:0};o.local===e?(o.usePolling=!0,o.useParent=!0,o.local=i.protocol+"//"+i.host+i.pathname+i.search,u.xdm_e=o.local,u.xdm_pa=1):u.xdm_e=g(o.local),o.container&&(o.useResize=!1,u.xdm_po=1),o.remote=y(o.remote,u)}else w(o,{channel:G.xdm_c,remote:G.xdm_e,useParent:!b(G.xdm_pa),usePolling:!b(G.xdm_po),useResize:o.useParent?!1:o.useResize});n=[new L.stack.HashTransport(o),new L.stack.ReliableBehavior({}),new L.stack.QueueBehavior({encode:!0,maxLength:4e3-o.remote.length}),new L.stack.VerifyBehavior({initiate:o.isHost})];break;case"1":n=[new L.stack.PostMessageTransport(o)];break;case"2":o.isHost&&(o.remoteHelper=g(o.remoteHelper)),n=[new L.stack.NameTransport(o),new L.stack.QueueBehavior,new L.stack.VerifyBehavior({initiate:o.isHost})];break;case"3":n=[new L.stack.NixTransport(o)];break;case"4":n=[new L.stack.SameOriginTransport(o)];break;case"5":n=[new L.stack.FrameElementTransport(o)];break;case"6":S||p(),n=[new L.stack.FlashTransport(o)]}return n.push(new L.stack.QueueBehavior({lazy:o.lazy,remove:!0})),n}function A(e){for(var t,i={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},o=0,n=e.length;n>o;o++)t=e[o],w(t,i,!0),0!==o&&(t.down=e[o-1]),o!==n-1&&(t.up=e[o+1]);return t}function _(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}var O,S,C,E,T,N=e,D=Math.floor(1e4*Math.random()),M=Function.prototype,j=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,R=/[\-\w]+\/\.\.\//,B=/([^:])\/\//g,F="",L={},q=e.easyXDM,W="easyXDM_",U=!1;if(r(e,"addEventListener"))E=function(e,t,i){e.addEventListener(t,i,!1)},T=function(e,t,i){e.removeEventListener(t,i,!1)};else{if(!r(e,"attachEvent"))throw new Error("Browser not supported");E=function(e,t,i){e.attachEvent("on"+t,i)},T=function(e,t,i){e.detachEvent("on"+t,i)}}var H,V=!1,J=[];if("readyState"in t?(H=t.readyState,V="complete"==H||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==H||"interactive"==H)):V=!!t.body,!V){if(r(e,"addEventListener"))E(t,"DOMContentLoaded",d);else if(E(t,"readystatechange",function(){"complete"==t.readyState&&d()}),t.documentElement.doScroll&&e===top){var z=function(){if(!V){try{t.documentElement.doScroll("left")}catch(e){return void o(z,1)}d()}};z()}E(e,"load",d)}var G=function(e){e=e.substring(1).split("&");for(var t,i={},o=e.length;o--;)t=e[o].split("="),i[t[0]]=n(t[1]);return i}(/xdm_e=/.test(i.search)?i.search:i.hash),X=function(){var e={},t={a:[1,2,3]},i='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(t).replace(/\s/g,"")===i?JSON:(Object.toJSON&&Object.toJSON(t).replace(/\s/g,"")===i&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(t=i.evalJSON(),t.a&&3===t.a.length&&3===t.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(X=function(){return e},e):null)};w(L,{version:"2.4.19.3",query:G,stack:{},apply:w,getJSONObject:X,whenReady:l,noConflict:m}),L.DomHelper={on:E,un:T,requiresJSON:function(i){s(e,"JSON")||t.write('<script type="text/javascript" src="'+i+'"></script>')}},function(){var e={};L.Fn={set:function(t,i){e[t]=i},get:function(t,i){if(e.hasOwnProperty(t)){var o=e[t];return i&&delete e[t],o}}}}(),L.Socket=function(e){var t=A(P(e).concat([{incoming:function(t,i){e.onMessage(t,i)},callback:function(t){e.onReady&&e.onReady(t)}}])),i=v(e.remote);this.origin=v(e.remote),this.destroy=function(){t.destroy()},this.postMessage=function(e){t.outgoing(e,i)},t.init()},L.Rpc=function(e,t){if(t.local)for(var i in t.local)if(t.local.hasOwnProperty(i)){var o=t.local[i];"function"==typeof o&&(t.local[i]={method:o})}var n=A(P(e).concat([new L.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=v(e.remote),this.destroy=function(){n.destroy()},n.init()},L.stack.SameOriginTransport=function(e){var t,n,a,r;return t={outgoing:function(e,t,i){a(e),i&&i()},destroy:function(){n&&(n.parentNode.removeChild(n),n=null)},onDOMReady:function(){r=v(e.remote),e.isHost?(w(e.props,{src:y(e.remote,{xdm_e:i.protocol+"//"+i.host+i.pathname,xdm_c:e.channel,xdm_p:4}),name:W+e.channel+"_provider"}),n=I(e),L.Fn.set(e.channel,function(e){return a=e,o(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,r)}})):(a=u().Fn.get(e.channel,!0)(function(e){t.up.incoming(e,r)}),o(function(){t.up.callback(!0)},0))},init:function(){l(t.onDOMReady,t)}}},L.stack.FlashTransport=function(e){function n(e,t){o(function(){s.up.incoming(e,p)},0)}function r(i){var o=e.swf+"?host="+e.isHost,n="easyXDM_swf_"+Math.floor(1e4*Math.random());L.Fn.set("flash_loaded"+i.replace(/[\-.]/g,"_"),function(){L.stack.FlashTransport[i].swf=d=u.firstChild;for(var e=L.stack.FlashTransport[i].queue,t=0;t<e.length;t++)e[t]();e.length=0}),e.swfContainer?u="string"==typeof e.swfContainer?t.getElementById(e.swfContainer):e.swfContainer:(u=t.createElement("div"),w(u.style,C&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),t.body.appendChild(u));var r="callback=flash_loaded"+a(i.replace(/[\-.]/g,"_"))+"&proto="+N.location.protocol+"&domain="+a(h(N.location.href))+"&port="+a(f(N.location.href))+"&ns="+a(F);u.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+n+"' data='"+o+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+o+"'></param><param name='flashvars' value='"+r+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+r+"' allowScriptAccess='always' wmode='transparent' src='"+o+"' height='1' width='1'></embed></object>"}var s,c,p,d,u;return s={outgoing:function(t,i,o){d.postMessage(e.channel,t.toString()),o&&o()},destroy:function(){try{d.destroyChannel(e.channel)}catch(t){}d=null,c&&(c.parentNode.removeChild(c),c=null)},onDOMReady:function(){p=e.remote,L.Fn.set("flash_"+e.channel+"_init",function(){o(function(){s.up.callback(!0)})}),L.Fn.set("flash_"+e.channel+"_onMessage",n),e.swf=g(e.swf);var t=h(e.swf),a=function(){L.stack.FlashTransport[t].init=!0,d=L.stack.FlashTransport[t].swf,d.createChannel(e.channel,e.secret,v(e.remote),e.isHost),e.isHost&&(C&&e.swfNoThrottle&&w(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),w(e.props,{src:y(e.remote,{xdm_e:v(i.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:W+e.channel+"_provider"}),c=I(e))};L.stack.FlashTransport[t]&&L.stack.FlashTransport[t].init?a():L.stack.FlashTransport[t]?L.stack.FlashTransport[t].queue.push(a):(L.stack.FlashTransport[t]={queue:[a]},r(t))},init:function(){l(s.onDOMReady,s)}}},L.stack.PostMessageTransport=function(t){function n(e){if(e.origin)return v(e.origin);if(e.uri)return v(e.uri);if(e.domain)return i.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function a(e){var i=n(e);i==p&&e.data.substring(0,t.channel.length+1)==t.channel+" "&&r.up.incoming(e.data.substring(t.channel.length+1),i)}var r,s,c,p;return r={outgoing:function(e,i,o){c.postMessage(t.channel+" "+e,i||p),o&&o()},destroy:function(){T(e,"message",a),s&&(c=null,s.parentNode.removeChild(s),s=null)},onDOMReady:function(){if(p=v(t.remote),t.isHost){var n=function(i){i.data==t.channel+"-ready"&&(c="postMessage"in s.contentWindow?s.contentWindow:s.contentWindow.document,T(e,"message",n),E(e,"message",a),o(function(){r.up.callback(!0)},0))};E(e,"message",n),w(t.props,{src:y(t.remote,{xdm_e:v(i.href),xdm_c:t.channel,xdm_p:1}),name:W+t.channel+"_provider"}),s=I(t)}else E(e,"message",a),c="postMessage"in e.parent?e.parent:e.parent.document,c.postMessage(t.channel+"-ready",p),o(function(){r.up.callback(!0)},0)},init:function(){l(r.onDOMReady,r)}}},L.stack.FrameElementTransport=function(n){var a,r,s,c;return a={outgoing:function(e,t,i){s.call(this,e),i&&i()},destroy:function(){r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){c=v(n.remote),n.isHost?(w(n.props,{src:y(n.remote,{xdm_e:v(i.href),xdm_c:n.channel,xdm_p:5}),name:W+n.channel+"_provider"}),r=I(n),r.fn=function(e){return delete r.fn,s=e,o(function(){a.up.callback(!0)},0),function(e){a.up.incoming(e,c)}}):(t.referrer&&v(t.referrer)!=G.xdm_e&&(e.top.location=G.xdm_e),s=e.frameElement.fn(function(e){a.up.incoming(e,c)}),a.up.callback(!0))},init:function(){l(a.onDOMReady,a)}}},L.stack.NameTransport=function(e){function t(t){var i=e.remoteHelper+(s?"#_3":"#_2")+e.channel;c.contentWindow.sendMessage(t,i)}function i(){s?2!==++d&&s||r.up.callback(!0):(t("ready"),r.up.callback(!0))}function n(e){r.up.incoming(e,m)}function a(){u&&o(function(){u(!0)},0)}var r,s,c,p,d,u,m,h;return r={outgoing:function(e,i,o){u=o,t(e)},destroy:function(){c.parentNode.removeChild(c),c=null,s&&(p.parentNode.removeChild(p),p=null)},onDOMReady:function(){s=e.isHost,d=0,m=v(e.remote),e.local=g(e.local),s?(L.Fn.set(e.channel,function(t){s&&"ready"===t&&(L.Fn.set(e.channel,n),i())}),h=y(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),w(e.props,{src:h+"#"+e.channel,name:W+e.channel+"_provider"}),p=I(e)):(e.remoteHelper=e.remote,L.Fn.set(e.channel,n));var t=function(){var n=c||this;T(n,"load",t),L.Fn.set(e.channel+"_load",a),function r(){"function"==typeof n.contentWindow.sendMessage?i():o(r,50)}()};c=I({props:{src:e.local+"#_4"+e.channel},onLoad:t})},init:function(){l(r.onDOMReady,r)}}},L.stack.HashTransport=function(t){function i(e){if(f){var i=t.remote+"#"+m++ +"_"+e;(c||!g?f.contentWindow:f).location=i}}function n(e){u=e,s.up.incoming(u.substring(u.indexOf("_")+1),y)}function a(){if(h){var e=h.location.href,t="",i=e.indexOf("#");-1!=i&&(t=e.substring(i)),t&&t!=u&&n(t)}}function r(){p=setInterval(a,d)}var s,c,p,d,u,m,h,f,g,y;return s={outgoing:function(e,t){i(e)},destroy:function(){e.clearInterval(p),(c||!g)&&f.parentNode.removeChild(f),f=null},onDOMReady:function(){if(c=t.isHost,d=t.interval,u="#"+t.channel,m=0,g=t.useParent,y=v(t.remote),c){if(w(t.props,{src:t.remote,name:W+t.channel+"_provider"}),g)t.onLoad=function(){h=e,r(),s.up.callback(!0)};else{var i=0,n=t.delay/50;!function a(){if(++i>n)throw new Error("Unable to reference listenerwindow");try{h=f.contentWindow.frames[W+t.channel+"_consumer"]}catch(e){}h?(r(),s.up.callback(!0)):o(a,50)}()}f=I(t)}else h=e,r(),g?(f=parent,s.up.callback(!0)):(w(t,{props:{src:t.remote+"#"+t.channel+new Date,name:W+t.channel+"_consumer"},onLoad:function(){s.up.callback(!0)}}),f=I(t))},init:function(){l(s.onDOMReady,s)}}},L.stack.ReliableBehavior=function(e){var t,i,o=0,n=0,a="";return t={incoming:function(e,r){var s=e.indexOf("_"),c=e.substring(0,s).split(",");e=e.substring(s+1),c[0]==o&&(a="",i&&i(!0)),e.length>0&&(t.down.outgoing(c[1]+","+o+"_"+a,r),n!=c[1]&&(n=c[1],t.up.incoming(e,r)))},outgoing:function(e,r,s){a=e,i=s,t.down.outgoing(n+","+ ++o+"_"+e,r)}}},L.stack.QueueBehavior=function(e){function t(){if(e.remove&&0===s.length)return void _(i);if(!c&&0!==s.length&&!r){c=!0;var n=s.shift();i.down.outgoing(n.data,n.origin,function(e){c=!1,n.callback&&o(function(){n.callback(e)},0),t()})}}var i,r,s=[],c=!0,p="",d=0,l=!1,u=!1;return i={init:function(){b(e)&&(e={}),e.maxLength&&(d=e.maxLength,u=!0),e.lazy?l=!0:i.down.init()},callback:function(e){c=!1;var o=i.up;t(),o.callback(e)},incoming:function(t,o){if(u){var a=t.indexOf("_"),r=parseInt(t.substring(0,a),10);p+=t.substring(a+1),0===r&&(e.encode&&(p=n(p)),i.up.incoming(p,o),p="")}else i.up.incoming(t,o)},outgoing:function(o,n,r){e.encode&&(o=a(o));var c,p=[];if(u){for(;0!==o.length;)c=o.substring(0,d),o=o.substring(c.length),p.push(c);for(;c=p.shift();)s.push({data:p.length+"_"+c,origin:n,callback:0===p.length?r:null})}else s.push({data:o,origin:n,callback:r});l?i.down.init():t()},destroy:function(){r=!0,i.down.destroy()}}},L.stack.VerifyBehavior=function(e){function t(){o=Math.random().toString(16).substring(2),i.down.outgoing(o)}var i,o,n;return i={incoming:function(a,r){var s=a.indexOf("_");-1===s?a===o?i.up.callback(!0):n||(n=a,e.initiate||t(),i.down.outgoing(a)):a.substring(0,s)===n&&i.up.incoming(a.substring(s+1),r)},outgoing:function(e,t,n){i.down.outgoing(o+"_"+e,t,n)},callback:function(i){e.initiate&&t()}}},L.stack.RpcBehavior=function(e,t){function i(e){e.jsonrpc="2.0",a.down.outgoing(r.stringify(e))}function o(e,t){var o=Array.prototype.slice;return function(){var n,a=arguments.length,r={method:t};a>0&&"function"==typeof arguments[a-1]?(a>1&&"function"==typeof arguments[a-2]?(n={success:arguments[a-2],error:arguments[a-1]},r.params=o.call(arguments,0,a-2)):(n={success:arguments[a-1]},r.params=o.call(arguments,0,a-1)),p[""+ ++s]=n,r.id=s):r.params=o.call(arguments,0),e.namedParams&&1===r.params.length&&(r.params=r.params[0]),i(r)}}function n(e,t,o,n){if(!o)return void(t&&i({id:t,error:{code:-32601,message:"Procedure not found."}}));var a,r;t?(a=function(e){a=M,i({id:t,result:e})},r=function(e,o){r=M;var n={id:t,error:{code:-32099,message:e}};o&&(n.error.data=o),i(n)}):a=r=M,c(n)||(n=[n]);try{var s=o.method.apply(o.scope,n.concat([a,r]));b(s)||a(s)}catch(p){r(p.message)}}var a,r=t.serializer||X(),s=0,p={};return a={incoming:function(e,o){var a=r.parse(e);if(a.method)t.handle?t.handle(a,i):n(a.method,a.id,t.local[a.method],a.params);else{var s=p[a.id];a.error?s&&s.error&&s.error(a.error):s&&s.success&&s.success(a.result),delete p[a.id]}},init:function(){if(t.remote)for(var i in t.remote)t.remote.hasOwnProperty(i)&&(e[i]=o(t.remote[i],i));a.down.init()},destroy:function(){for(var i in t.remote)t.remote.hasOwnProperty(i)&&e.hasOwnProperty(i)&&delete e[i];a.down.destroy()}}},N.easyXDM=L}(e,t,i,e.setTimeout,decodeURIComponent,encodeURIComponent)},window.piximedia.injectEasyXDM=function(e,t,i){window.piximedia._.injectEasyXDM.call(e,e,t,i)},window.piximedia.injectEasyXDM(window,document,window.location),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,o,n,a,r,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":
return String(c);case"object":if(!c)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(c)){for(a=c.length,i=0;a>i;i+=1)r[i]=str(i,c)||"null";return n=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,n}if(rep&&"object"==typeof rep)for(a=rep.length,i=0;a>i;i+=1)"string"==typeof rep[i]&&(o=rep[i],n=str(o,c),n&&r.push(quote(o)+(gap?": ":":")+n));else for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(n=str(o,c),n&&r.push(quote(o)+(gap?": ":":")+n));return n=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,i){var o;if(gap="",indent="","number"==typeof i)for(o=0;i>o;o+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var i,o,n=e[t];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o=walk(n,i),void 0!==o?n[i]=o:delete n[i]);return reviver.call(e,t,n)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){"use strict";function e(e){t.console&&t.console.log&&(t.console.log.apply?t.console.log.apply(t.console,arguments):t.console.log(e))}var t=window;t.piximedia.easyXDM=t.easyXDM.noConflict("piximedia"),t.piximedia.Lib={};var i="callbackLib";if(t._piximedia&&t._piximedia[i]){var o=t._piximedia[i];t._piximedia[i]=void 0;for(var n=0;n<o.length;n++){var a=o[n];if(a.window)try{a.window.piximedia=a.window.piximedia||t.piximedia}catch(r){}if(a.windows)for(var s=0;s<a.windows.length;s++){var c=a.windows[s];try{c.piximedia=c.piximedia||t.piximedia}catch(r){}}try{a()}catch(r){e("Error in callback: "+r)}}}}();