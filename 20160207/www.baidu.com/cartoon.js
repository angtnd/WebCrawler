define("ct",["require","exports","module"],function(t){"use strict";var e=function(t,e){for(var i=0,n=t.length;n>i;i++)e(t[i],i)},i=function(t,e){if("string"==typeof t)return t.indexOf(e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},n=function(t,e){1===arguments.length&&(e=t,t=this);for(var i in e)t[i]=e[i]},s=function(t,e){return Math.round(Math.random()*(e-t))+t},r=function(t,e,i,n){var s=i-t,r=n-e;return Math.sqrt(Math.pow(s,2)+Math.pow(r,2))},a=function(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var t=document.body,e=document.documentElement;return{width:Math.min(t.clientWidth,e.clientWidth),height:Math.min(t.clientHeight,e.clientHeight)}},o=function(t){"canvas"===t||1===t?this._mode=1:this._mode=0},h=0,l=navigator.userAgent,u=/MSIE ([^;]+)/.test(l)?parseFloat(RegExp.$1):!1,c=document.createElement("div").style,d=""===c.webkitTransform?"webkit":""===c.WebkitTransform?"Webkit":""===c.msTransform?"ms":""===c.MozTransform?"Moz":"ct",f=!!document.createElement("canvas").getContext;return{_mode:h,ie:u,prefix:d,supportCanvas:f,each:e,index:i,extend:n,random:s,distance:r,getWinSize:a,setRenderMode:o}}),define("core/Class",["require","exports","module"],function(t){var e=function(){},i=!1,n=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;return e.extend=function(t){var s=this,r=this.prototype,a=function(){!i&&this.init&&this.init.apply(this,arguments)};s!==e&&(i=!0,a.prototype=new s),i=!1;var o=a.prototype;for(var h in t)o[h]="function"==typeof r[h]&&"function"==typeof t[h]&&n.test(t[h])?function(t,e){return function(){var i=this._super;this._super=r[t];var n=e.apply(this,arguments);return this._super=i,n}}(h,t[h]):t[h];return a.extend=arguments.callee,a},e}),define("core/TagCollection",["require","exports","module"],function(t){"use strict";var e={};return e._index=0,e._collection={},e.get=function(t,e,i){var n=t._tagIndex;n||(n=t._tagIndex=++this._index);var s="@"+n+":"+e,r=this._collection[s];return i&&(this._collection[s]=null),r},e.set=function(t,e,i){var n=t._tagIndex;n||(n=t._tagIndex=++this._index),this._collection["@"+n+":"+e]=i},e}),define("core/Ticker",["require","exports","module","ct","core/TagCollection"],function(t){"use strict";var e=t("ct"),i=t("core/TagCollection"),n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout,s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout,r={};return e.extend(r,{fps:-1,interval:-1,_paused:!0,_timerId:null,_targets:null,init:function(t){t?(this.interval=t,this.fps=(1e3/t).toFixed(2)):(this.interval=16.67,this.fps=60),this._targets=[]},alive:function(){return!this._paused},start:function(){this._clearTimer(),this._paused=!1,this._setTimer()},stop:function(){this._clearTimer(),this._paused=!0},has:function(t){for(var e=this._targets,i=e.length-1;i>=0;i--)if(e[i]===t)return!0;return!1},add:function(t,e){t.update instanceof Function&&(t._ticker&&t._ticker.remove(t),t._ticker=this),this._targets.push(t),e&&i.set(this,"tick."+e,t)},remove:function(t){"string"==typeof t&&(t=i.get(this,"tick."+t,!0));for(var e=this._targets,n=e.length-1;n>=0;n--)if(e[n]===t){e.splice(n,1),t._ticker&&(t._ticker=null);break}},removeAll:function(){for(var t,e=this._targets;e.length;)t=e.pop(),t._ticker&&(t._ticker=null)},wait:function(t,e,i){var n=this,s=0,r=function(i){s+=i,s>=e&&(t(s),n.remove(r))};this.add(r,i)},loop:function(t,e,i){var n=0,s=function(i){n+=i,n>=e&&(t(n),n=0)};this.add(s,i)},_clearTimer:function(){this._timerId&&(s(this._timerId),this._timerId=null)},_setTimer:function(){var t,e,i,s=this,r=this.interval,a=3*r,o=(n===window.setTimeout,[]),h=function(){return(new Date).getTime()},l=function(){return!0},u=function(){t?(e=h(),i=e-t,t=e,o.push(e),o.length>60&&o.shift(),o.length>5&&(s.fps=Math.floor(1e3*(o.length-1)/(e-o[0]))),i>a&&(i=a)):(t=h(),i=r),s._execTick(i)},c=function(){l()&&u(),s._clearTimer(),s._paused||(s._timerId=n(c,r))};c()},_execTick:function(t){for(var e,i=this._targets,n=0,s=i.length;s>n&&!this._paused;n++)e=i[n],e&&(e.update instanceof Function?e.update(t):e instanceof Function&&e(t))}}),r.init(),r}),define("core/EventDispatcher",["require","exports","module","ct","core/Class","core/TagCollection"],function(t){"use strict";var e=t("ct"),i=t("core/Class"),n=t("core/TagCollection"),s=i.extend({_listeners:null,on:function(t,e,i){this.addEventListener(t,e),i&&n.set(this,"event."+t+"."+i,e)},off:function(t,e){"string"==typeof e&&(e=n.get(this,"event."+t+"."+e,!0)),this.removeEventListener(t,e)},trigger:function(t){this.dispatchEvent(t)},addEventListener:function(t,i){this._listeners||(this._listeners={});var n=this._listeners,s=n[t];s||(s=n[t]=[]),-1===e.index(s,i)&&s.push(i)},hasEventListener:function(t,i){if(!this._listeners)return!1;var n=this._listeners,s=n[t];return s?i?-1!==e.index(s,i):s.length>0:!1},removeEventListener:function(t,i){if(this._listeners){var n=this._listeners,s=n[t];if(s)if(i){var r=e.index(s,i);-1!==r&&s.splice(r,1)}else s.length>0&&(n[t]=[])}},dispatchEvent:function(t){if(this._listeners){var e=this._listeners,i=e[t.type];if(i){t.target=this;for(var n=0,s=i.length;s>n;n++)i[n].call(this,t)}}}});return s}),define("core/Preload",["require","exports","module","ct","core/EventDispatcher"],function(t){"use strict";var e=t("ct"),i=t("core/EventDispatcher"),n=/^(http|https):\/\//,s=/\?(.*)=(.*)$/,r=/\.jpg$|\.png$|\.gif$/,a=/\.json$/,o=new i;return e.extend(o,{_resPath:"",_version:"",_resources:null,_loadQueue:null,_loadQueueLength:-1,init:function(){this._resources={},this._loadQueue=[]},load:function(t){if(t instanceof Array){for(var e,i,n=this._loadQueueLength=t.length,s=0;n>s;s++)e=t[s],i=r.test(e)?"image":a.test(e)?"json":"text",this._loadQueue.push({type:i,url:e});n&&this._loadNext()}else{var o=t;"image"===o.type?this._loadImage(o):this._loadJson(o)}},setResPath:function(t){this._resPath=t},setVersion:function(t){this._version=t},getUrl:function(t){return n.test(t)||(t=this._resPath+t),!s.test(t)&&this._version&&(t=t+"?v="+this._version),t},has:function(t){return t in this._resources},get:function(t){return this._resources[t]},set:function(t,e){this._resources[t]=e},_loadComplete:function(t,e){var i=1;this._loadQueueLength&&(i=1-this._loadQueue.length/this._loadQueueLength,this.trigger({type:"progress",progress:i})),t.onload&&t.onload(e),1>i?this._loadNext():(this._loadQueueLength=0,this.trigger({type:"complete",file:e}))},_loadNext:function(){this.load(this._loadQueue.shift())},_loadImage:function(t){var e=this,i=new Image;i.src=this.getUrl(t.url),i.complete?e._loadComplete(t,i):i.onload=function(){e._loadComplete(t,i)},this.set(t.url,i)},_loadJson:function(t){var e,i,n=this,s=new XMLHttpRequest;s.onreadystatechange=function(){s.readyState===s.DONE&&(200===s.status||0===s.status)&&(i=s.responseText,i&&(e="json"===t.type?JSON.parse(i):i,n.set(t.url,e),n._loadComplete(t,e)))},s.open("GET",this.getUrl(t.url),!0),s.send(null)}}),o.init(),o}),define("display/StyleSheet",["require","exports","module","ct"],function(t){"use strict";var e=t("ct"),i=e.prefix,n=e.ie>=6&&e.ie<=8,s=9===e.ie,r={parse:function(t){var i={r:0,g:0,b:0,a:1};return e.index(t,"rgb")>-1?(t=t.replace(/rgb\(|rgba\(|\)/g,""),t=t.split(","),i.r=parseInt(t[0]),i.g=parseInt(t[1]),i.b=parseInt(t[2]),4===t.length&&(i.a=t[3])):e.index(t,"#")>-1&&(4===t.length?(i.r=t.substring(1,2),i.g=t.substring(2,3),i.b=t.substring(3,4),i.r=parseInt(i.r+i.r,16),i.g=parseInt(i.g+i.g,16),i.b=parseInt(i.b+i.b,16)):(i.r=parseInt(t.substring(1,3),16),i.g=parseInt(t.substring(3,5),16),i.b=parseInt(t.substring(5,7),16))),i},toRGB:function(t){return"rgb("+t.r+","+t.g+","+t.b+")"},toHex:function(t){var e=t.r.toString(16),i=t.g.toString(16),n=t.b.toString(16);return 1===e.length&&(e="0"+e),1===i.length&&(i="0"+i),1===n.length&&(n="0"+n),"#"+e+i+n},getRGB:function(t){return this.toRGB(this.parse(t))},getHex:function(t){return this.toHex(this.parse(t))},step:function(t,e,i){e=this.parse(e),i=this.parse(i);var n={};for(var s in i)n[s]=Math.floor((i[s]-e[s])*t+e[s]),n[s]=n[s]>255?255:n[s]<0?0:n[s];return this.toHex(n)}},a=function(t,e){return"Object3D"===t.type?p.styles3d[e]:f[e]||t.styles&&t.styles[e]},o=function(t,e,i){var n;if(n=e?{get:function(i){return this[t][e]},set:function(i,n){this[t][e]=n}}:{get:function(e){return this[t]},set:function(e,i){this[t]=i}},n.step=function(t,e){var i=e.pos,n=e.start,s=e.end;if("object"==typeof s){var r={};for(var a in s)r[a]=(s[a]-n[a])*i+n[a];return r}return(s-n)*i+n},i)for(var s in i)n[s]=i[s];return n},h=function(t,e){var i=a(t,e);return i&&i.init?i.init.call(t,e):void 0},l=function(t,e){var i=a(t,e);return i?i.get.call(t,e):void 0},u=function(t,e,i){var n=a(t,e);n&&(n.parse&&(i=n.parse.call(t,i)),n.set.call(t,e,i),0===t.renderMode&&n.css&&("function"==typeof n.css?n.css.call(t,e,i):n.css===!0?t.elemStyle[e]=i:"px"===n.css&&(t.elemStyle[e]=i+"px")))},c=function(t,e,i){var n=a(t,e);if(n&&n.step){n.parse&&(i.end=n.parse.call(t,i.end));var s=n.step.call(t,e,i);void 0!==s&&u(t,e,s)}},d=function(t,e,n){var s=e.charAt(0).toUpperCase()+e.substring(1,e.length);t[i+s]=n},f={x:o("x",null,{css:function(t,e){var i=this.elemStyle;i.position="absolute",i.left=e+"px"}}),y:o("y",null,{css:function(t,e){var i=this.elemStyle;i.position="absolute",i.top=e+"px"}}),width:o("width",null,{css:function(t,e){this._useElemSize?this.elem.setAttribute("width",e):this.elemStyle.width=e+"px"}}),height:o("height",null,{css:function(t,e){this._useElemSize?this.elem.setAttribute("height",e):this.elemStyle.height=e+"px"}}),size:o("size",null,{get:function(t){return{width:this.width,height:this.height}},set:function(t,e){void 0!==e.width&&(this.width=e.width),void 0!==e.height&&(this.height=e.height)},css:function(t,e){if(this._useElemSize){var i=this.elem;i.setAttribute("width",this.width),i.setAttribute("height",this.height)}else{var n=this.elemStyle;n.width=this.width+"px",n.height=this.height+"px"}}}),transform:o("transform",null,{init:function(t){return this.transform={translateX:0,translateY:0,rotate:0,scale:1,scaleX:1,scaleY:1,skewX:0,skewY:0,originX:.5,originY:.5},this.transform},get:function(t){return this.transform||h(this,t)},set:function(t,e){l(this,t);for(var i in e)this._updateTransform(i,e[i])},css:function(t,e){var i=this.elemStyle,s=this.transform;n?(i.marginLeft=s.translateX+"px",i.marginTop=s.translateY+"px"):(d(i,"transform",this._mergeTransformText()),("originX"in e||"originY"in e)&&d(i,"transformOrigin",100*s.originX+"% "+100*s.originY+"%"))}}),transform3d:o("transform3d",null,{init:function(t){if(this.transform3d={perspective:0,translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0,scaleX:1,scaleY:1,scaleZ:1,originX:.5,originY:.5,originZ:.5},0===this.renderMode){var e=this.elemStyle;d(e,"transformStyle","preserve-3d"),d(e,"backfaceVisibility","visible")}return this.transform3d},get:function(t){return this.transform3d||h(this,t)},set:function(t,e){l(this,t);for(var i in e)this._updateTransform3D(i,e[i])},css:function(t,e){var i=this.elemStyle,n=this.transform3d;d(i,"transform",this._mergeTransform3DText()),("originX"in e||"originY"in e||"originZ"in e)&&d(i,"transformOrigin",100*n.originX+"% "+100*n.originY+"%")}}),visible:o("visible",null,{css:function(t,e){this.elemStyle.display=e?"block":"none"}}),overflow:o("overflow",null,{css:!0}),alpha:o("alpha",null,{parse:function(t){return t>=0?t:0},css:function(t,e){var i=this.elemStyle;if(n){var s=i.filter,r=/alpha\(opacity=([^)]*)/,a="alpha(opacity="+100*e;i.filter=r.test(s)?s.replace(r,a):s+" "+a+")"}else i.opacity=e}}),shadow:o("shadow",null,{parse:function(t){return"string"==typeof t&&(t=t.split("px "),t={offsetX:parseFloat(t[0]),offsetY:parseFloat(t[1]),blur:parseFloat(t[2]),color:t[3]}),t},css:function(t,e){var i=this.shadow,n="Text"===this.type?"textShadow":"boxShadow";this.elemStyle[n]=i.color?i.offsetX+"px "+i.offsetY+"px "+i.blur+"px "+i.color:""}}),cursor:o("cursor",null,{css:!0})},p={Color:r,isIE6_8:n,isIE9:s,newStyle:o,styles:f,init:h,get:l,set:u,step:c};return p}),define("core/UserData",["require","exports","module","core/Class"],function(t){"use strict";var e=t("core/Class"),i=e.extend({_data:null,init:function(){this._data={}},get:function(t){return this._data[t]},set:function(t,e){return this._data[t]=e,e}});return i.step=function(t,e){var i=e.pos,n=e.start,s=e.end,r=t._userData;for(var a in s)r[a]=(s[a]-n[a])*i+n[a]},i}),define("core/Matrix2D",["require","exports","module","core/Class"],function(t){"use strict";var e=t("core/Class"),i=Math.PI/180,n=e.extend({a:1,b:0,c:0,d:1,tx:0,ty:0,append:function(t,e,i,n,s,r){var a=this.a,o=this.b,h=this.c,l=this.d,u=this.tx,c=this.ty;return this.a=t*a+e*h,this.b=t*o+e*l,this.c=i*a+n*h,this.d=i*o+n*l,this.tx=s*a+r*h+u,this.ty=s*o+r*l+c,this},appendMatrix:function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty),this},appendTransform:function(t,e,n,s,r,a,o){var h,l,u;return r%360?(h=r*i,l=Math.cos(h),u=Math.sin(h)):(l=1,u=0),a||o?(a*=i,o*=i,this.append(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),t,e),this.append(l*n,u*n,-u*s,l*s,0,0)):this.append(l*n,u*n,-u*s,l*s,t,e),this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,r=t*n-e*i;return this.a=n/r,this.b=-e/r,this.c=-i/r,this.d=t/r,this.tx=(i*this.ty-n*s)/r,this.ty=-(t*this.ty-e*s)/r,this},isIdentity:function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d}});return n}),define("display/DisplayObject",["require","exports","module","ct","core/EventDispatcher","core/UserData","core/Matrix2D","core/TagCollection","display/StyleSheet"],function(t){"use strict";var e=t("ct"),i=t("core/EventDispatcher"),n=t("core/UserData"),s=t("core/Matrix2D"),r=t("core/TagCollection"),a=t("display/StyleSheet"),o=document.createElement("div"),h=!!document.createElement("canvas").getContext,l=i.extend({type:"DisplayObject",x:0,y:0,width:0,height:0,visible:!0,overflow:"visible",alpha:1,shadow:null,cursor:"auto",transform:null,transform3d:null,parent:null,children:null,elem:null,elemStyle:null,renderMode:-1,blendMode:"source-over",mouseEnabled:!0,pixelHitTest:!1,_htmlText:"<div></div>",_updaters:null,_matrix2d:null,_userData:null,init:function(t){if(t||(t={}),this.renderMode=void 0!==t.render?t.render:e._mode,0===this.renderMode){var i=t.elem||this._htmlText;"string"==typeof i&&(/^<.+>$/.test(i)?(o.innerHTML=i,i=o.removeChild(o.firstChild)):i=document.querySelector&&document.querySelector(i)),this.elem=i,this.elem.displayObj=this,this.elemStyle=this.elem.style,window.jQuery&&(this.$=jQuery(this.elem))}else{var r=t.blendMode||t.blend;r&&(this.blendMode=r)}this.children=[],this._updaters=[],this._matrix2d=new s,this._userData=new n;for(var h in t)a.styles[h]&&this.style(h,t[h]);this.transform||a.init(this,"transform"),"enabled"in t&&this.enable(t.enabled)},add:function(t,e){return this.addAt(t,"none",e),this},addAt:function(t,e,i){var n=this.children,s=this.elem,a=0===t.renderMode&&0===this.renderMode,o=a&&s.children[e];t.parent&&t.parent.remove(t),t.parent=this,e<n.length?this.children.splice(e,0,t):this.children.push(t),a&&(o?s.insertBefore(t.elem,o):s.appendChild(t.elem)),this._addUpdater(t),i&&r.set(this,"child."+i,t)},remove:function(t){if(void 0===t)return void(this.parent&&this.parent.remove(this));if("string"==typeof t&&(t=r.get(this,"child."+t,!0)),t.parent===this){t.parent=null;var i=this.children,n=e.index(i,t);i.splice(n,1),0===t.renderMode&&0===this.renderMode&&this.elem.removeChild(t.elem),this._removeUpdater(t)}return this},removeAll:function(){for(var t,e,i=this.children;i.length;)t=i.length-1,e=i[t],e.parent=null,i.splice(t,1),0===e.renderMode&&0===this.renderMode&&this.elem.removeChild(e.elem),this._removeUpdater(e)},each:function(t){for(var e=this.children,i=0,n=e.length;n>i;i++)t(e[i],i)},style:function(t,e){if(void 0===e){if("object"!=typeof t)return a.get(this,t);for(var i in t)a.set(this,i,t[i])}else a.set(this,t,e);return this},data:function(t,e){if(void 0===e){if("object"!=typeof t)return this._userData.get(t);for(var i in t)this._userData.set(i,t[i])}else this._userData.set(t,e);return this},draw:function(t){if(this.children.length){"hidden"===this.overflow&&(t.beginPath(),t.rect(0,0,this.width,this.height),t.clip(),t.closePath());for(var e,i=this.children,n=0,s=i.length;s>n;n++)e=i[n],e.visible&&e._drawCanvas(t)}},mask:function(t){},enable:function(t){this.mouseEnabled=t?!0:!1,0===this.renderMode&&(this.elemStyle.pointerEvents=t?"auto":"none")},cache:function(t){if(t){if(h){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,this.draw(e.getContext("2d")),this._cacheCanvas=e}}else this._cacheCanvas=null},show:function(){return this.style("visible",!0)},hide:function(){return this.style("visible",!1)},_stepTween:function(t,e){"data"===t?n.step(this,e):a.step(this,t,e)},_isUpdater:function(t){return t.update||t.hasEventListener("update")||"DisplayObject"===t.type},_addUpdater:function(t){this._isUpdater(t)&&this._updaters.push(t)},_removeUpdater:function(t){if(this._isUpdater(t)){var i=this._updaters,n=e.index(i,t);i.splice(n,1)}},_eachUpdaters:function(t){for(var e,i=this._updaters,n=0,s=i.length;s>n;n++)e=i[n],e&&(e.hasEventListener("update")&&e.trigger({type:"update",delta:t}),e.update?e.update(t):"DisplayObject"===e.type&&e._eachUpdaters(t))},_updateTransform:function(t,e){"scale"===t?this.transform.scale=this.transform.scaleX=this.transform.scaleY=e:t in this.transform&&(this.transform[t]=e)},_updateTransform3D:function(t,e){t in this.transform3d&&(this.transform3d[t]=e)},_mergeTransformText:function(){var t=this.transform,e="";return(0!==t.translateX||0!==t.translateY)&&(e+="translate("+t.translateX+"px,"+t.translateY+"px)"),0!==t.rotate&&(e+=" rotate("+t.rotate+"deg)"),(1!==t.scaleX||1!==t.scaleY)&&(e+=" scale("+t.scaleX+","+t.scaleY+")"),(0!==t.skewX||0!==t.skewY)&&(e+=" skew("+t.skewX+"deg,"+t.skewY+"deg)"),e},_mergeTransform3DText:function(){var t=this.transform3d,e="";return 0!==t.perspective&&(e+="perspective("+t.perspective+"px)"),(0!==t.translateX||0!==t.translateY||0!==t.translateZ)&&(e+=" translate3d("+t.translateX+"px,"+t.translateY+"px,"+t.translateZ+"px)"),0!==t.rotateX&&(e+=" rotateX("+t.rotateX+"deg)"),0!==t.rotateY&&(e+=" rotateY("+t.rotateY+"deg)"),0!==t.rotateZ&&(e+=" rotateZ("+t.rotateZ+"deg)"),(1!==t.scaleX||1!==t.scaleY||1!==t.scaleZ)&&(e+=" scale3d("+t.scaleX+","+t.scaleY+","+t.scaleZ+")"),e},_drawCanvas:function(t){t.save(),this._updateCanvasContext(t),this._cacheCanvas?t.drawImage(this._cacheCanvas,0,0):this.draw(t),t.restore()},_updateCanvasContext:function(t){var e=this._updateMatrix2D(),i=this._getAnchorX(),n=this._getAnchorY(),s=this.shadow;0===i&&0===n?t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty):(t.transform(e.a,e.b,e.c,e.d,e.tx+i,e.ty+n),t.transform(1,0,0,1,-i,-n)),t.globalAlpha*=this.alpha,t.globalCompositeOperation=this.blendMode,s&&(t.shadowOffsetX=s.offsetX,t.shadowOffsetY=s.offsetY,t.shadowBlur=s.blur,t.shadowColor=s.color)},_getAnchorX:function(){return this.width*this.transform.originX},_getAnchorY:function(){return this.height*this.transform.originY},_updateMatrix2D:function(){var t=this._matrix2d.identity(),e=this.transform;return t.appendTransform(this.x+e.translateX,this.y+e.translateY,e.scaleX,e.scaleY,e.rotate,e.skewX,e.skewY)},_updateWorldMatrix:function(){for(var t=this,i=[];t;)i.unshift(t),t=t.parent;var n=new s;return e.each(i,function(t,e){var i=t.transform,s=t._getAnchorX(),r=t._getAnchorY();n.appendTransform(t.x+i.translateX+s,t.y+i.translateY+r,i.scaleX,i.scaleY,i.rotate,i.skewX,i.skewY),(s||r)&&n.append(1,0,0,1,-s,-r)}),n}});return l}),define("display/Stage",["require","exports","module","ct","display/DisplayObject"],function(t){"use strict";var e=t("ct"),i=t("display/DisplayObject"),n=document,s=!1,r=null,a=i.extend({type:"Stage",autoUpdate:!0,init:function(t){t.render=0,this._super(t),this._initEvents()},update:function(t){this.autoUpdate&&this._eachUpdaters(t)},_initEvents:function(t){var e,i,n,s,r,a,o=this;this._bindEvents(function(t){e=o._getMouseX(t),i=o._getMouseY(t),a=o._testEvent(t,e,i),o._triggerEvent("mousedown",a),n=e,s=i,r=!1},function(t){e=o._getMouseX(t),i=o._getMouseY(t),a.nativeEvent=t,a.mouseX=e,a.mouseY=i,o._triggerEvent("mousemove",a),!r&&(Math.abs(e-n)>=5||Math.abs(i-s)>=5)&&(r=!0)},function(t){a.nativeEvent=t,o._triggerEvent("mouseup",a),r||o._triggerEvent("click",a)}),this._initHoverEvents()},_initHoverEvents:function(){var t,i,s,r,a,o=this,h=this.elem,l="Stage"===this.type,u=[],c=function(n){if(t=o._getMouseX(n),i=o._getMouseY(n),r=[],"mouseover"===n.type||"mousemove"===n.type)for(s=o._testEvent(n,t,i),a=s.srcTarget,l||(o.elemStyle.cursor=a.cursor);a;)r.push(a),a=a.parent;e.each(u,function(t,i){-1===e.index(r,t)&&(s.type="mouseout",t.trigger(s))}),e.each(r,function(t,i){-1===e.index(u,t)&&(s.type="mouseover",t.trigger(s))}),u=r};"onmousedown"in n&&(l?o._bind(h,"mouseover",c):o._bind(h,"mousemove",c),o._bind(h,"mouseleave",c))},_bindEvents:function(t,i,a){var o=this,h=this.elem,l=function(t){var e=(t.target||t.srcElement).tagName.toLowerCase();("canvas"===e||"div"===e||"svg"===e)&&(t.preventDefault?t.preventDefault():window.event.returnValue=!1)},u=function(t,i){var n=!1;n=t.touches?t.touches.length<=1:e.ie&&e.ie<=8?1==t.button:0==t.button,n&&(l(t),i(t))},c=function(e){r=o,u(e,t)};if(this.handleMove=function(t){u(t,i)},this.handleUp=function(t){u(t,a)},"onmousedown"in n&&o._bind(h,"mousedown",c),"ontouchstart"in n&&o._bind(h,"touchstart",c),!s){s=!0;var d=function(t){r&&r.handleMove(t)},f=function(t){r&&r.handleUp(t),r=null},p=function(t){o._triggerEvent("mousehover",{srcTarget:o,nativeEvent:t,mouseX:o._getMouseX(t),mouseY:o._getMouseY(t),offsetX:t.offsetX,offsetY:t.offsetY})};"onmousedown"in n&&(o._bind(h,"mousemove",p),o._bind(n,"mousemove",d),o._bind(n,"mouseup",f)),"ontouchstart"in n&&(o._bind(n,"touchmove",d),o._bind(n,"touchend",f))}},_bind:function(t,e,i){n.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i,!1)},_getMouseX:function(t){var e=t.touches?t.touches[0]:t,i=this.elem.getBoundingClientRect().left;return e.clientX-i},_getMouseY:function(t){var e=t.touches?t.touches[0]:t,i=this.elem.getBoundingClientRect().top;return e.clientY-i},_triggerEvent:function(t,e,i){e.type=t;var n=e.srcTarget;if(i)n.trigger(e);else for(;n;)n.trigger(e),n=n.parent},_testEvent:function(t,e,i){for(var n,s=t.target||t.srcElement;!n&&s;)n=s.displayObj,s=s.parentNode;return{srcTarget:n,nativeEvent:t,mouseX:e,mouseY:i,offsetX:t.offsetX,offsetY:t.offsetY}}});return a}),define("display/Canvas",["require","exports","module","core/Matrix2D","display/DisplayObject","display/Stage"],function(t){"use strict";var e=t("core/Matrix2D"),i=t("display/DisplayObject"),n=t("display/Stage"),s=n.prototype,r=i.extend({type:"Canvas",autoClear:!0,autoUpdate:!0,_htmlText:"<canvas></canvas>",_context2d:null,_useElemSize:!0,init:function(t){t.render=0,this._super(t),this._initEvents(),this._context2d=this.elem.getContext("2d"),this._initPixelCanvas()},clear:function(){this._context2d.clearRect(0,0,this.width,this.height)},update:function(t){this.autoUpdate&&this._eachUpdaters(t);var e=this._context2d;this.autoClear&&this.clear(),this.draw(e)},getData:function(){for(var t,e=this._context2d.getImageData(0,0,this.width,this.height).data,i=[],n=0;n<height;n++){i[n]=[];for(var s=0;s<width;s++)t=4*width*n+4*s,0===e[s+3]?i[n][s]=null:i[n][s]=[e[s],e[s+1],e[s+2],e[s+3]]}return i},_initEvents:s._initEvents,_initHoverEvents:s._initHoverEvents,_bindEvents:s._bindEvents,_bind:s._bind,_getMouseX:s._getMouseX,_getMouseY:s._getMouseY,_triggerEvent:s._triggerEvent,_testEvent:function(t,e,i){var n=this._hitTest(this.children,e,i);return n||(n=this,this._hitOffsetX=e,this._hitOffsetY=i),{srcTarget:n,nativeEvent:t,mouseX:e,mouseY:i,offsetX:this._hitOffsetX,offsetY:this._hitOffsetY}},_hitTest:function(t,e,i){for(var n,s,r=t.length-1;r>=0;r--)if(n=t[r],n.visible&&n.mouseEnabled){if(n.children.length&&(s=this._hitTest(n.children,e,i)))return s;if(n.width&&n.height&&(s=this._hitTestMatrix(n,e,i)))return s}return null},_hitTestMatrix:function(t,i,n){for(var s,r,a,o=new e,h=t,l=[];h;)l.unshift(h),h=h.parent;o.append(1,0,0,1,-i,-n);for(var u=0,c=l.length;c>u;u++)h=l[u],a=h._matrix2d,s=h._getAnchorX(),r=h._getAnchorY(),0===s&&0===r?o.append(a.a,a.b,a.c,a.d,a.tx,a.ty):(o.append(a.a,a.b,a.c,a.d,a.tx+s,a.ty+r),o.append(1,0,0,1,-s,-r));o.invert();var d,f=!1,p=o.tx,g=o.ty,m=t.radius,_=t.width,v=t.height,y=this._pixelContext,x=t.pixelHitTest;return x?(y.setTransform(1,0,0,1,0,0),y.clearRect(0,0,1,1),y.setTransform(1,0,0,1,-p,-g),t.draw(y),d=y.getImageData(0,0,1,1).data,(d[0]||d[1]||d[2]||d[3])&&(f=!0)):m?m*m>=(p-m)*(p-m)+(g-m)*(g-m)&&(f=!0):_&&v&&p>=0&&_>=p&&g>=0&&v>=g&&(f=!0),f?(this._hitOffsetX=p,this._hitOffsetY=g,t):null},_initPixelCanvas:function(){var t=document.createElement("canvas");t.width=1,t.height=1,this._pixelContext=t.getContext("2d")}});return r}),define("display/Bitmap",["require","exports","module","core/Preload","display/DisplayObject"],function(t){"use strict";var e=t("core/Preload"),i=t("display/DisplayObject"),n=i.extend({type:"Bitmap",_image:null,_baseUrl:"",_srcRect:null,_srcImage:null,_srcCanvas:null,_scaleToFit:!1,init:function(t){this._super(t),this._initBaseUrl(t),this._initImage(t)},draw:function(t){if(this._srcImage&&this._srcImage.complete){var e=this._srcCanvas||this._srcImage;this._srcRect?t.drawImage(e,this._srcRect.x,this._srcRect.y,this.width,this.height,0,0,this.width,this.height):this._scaleToFit?t.drawImage(e,0,0,e.width,e.height,0,0,this.width,this.height):t.drawImage(e,0,0,this.width,this.height,0,0,this.width,this.height)}},source:function(t,e){return void 0===t?this._image:void(t instanceof Array?this._initImage({rect:t}):this._initImage({image:t,rect:e}))},_initBaseUrl:function(t){t.baseUrl&&(this._baseUrl=t.baseUrl)},_initImage:function(t){var i=t.image,n=t.rect||t.sourceRect,s=!!t.scaleToFit,r=this.elemStyle;n?(this._srcRect={x:n[0],y:n[1]},this.style("size",{width:n[2],height:n[3]}),0===this.renderMode&&(r.backgroundPosition="-"+this._srcRect.x+"px -"+this._srcRect.y+"px")):s&&(this._scaleToFit=s,0===this.renderMode&&(r.backgroundSize="100% 100%")),i&&(this._image=i,i=this._baseUrl+i,0===this.renderMode?(r.backgroundImage="url("+e.getUrl(i)+")",r.backgroundRepeat="no-repeat"):1===this.renderMode&&"string"==typeof i&&(e.has(i)||e.load({type:"image",url:i}),this._srcImage=e.get(i)))}});return n}),define("display/Text",["require","exports","module","display/DisplayObject","display/StyleSheet"],function(t){"use strict";var e=t("display/DisplayObject"),i=t("display/StyleSheet"),n=i.newStyle,s={color:n("color",null,{css:!0}),fontFamily:n("fontFamily",null,{css:!0}),fontSize:n("fontSize",null,{css:"px"}),textAlign:n("textAlign",null,{css:!0}),lineHeight:n("lineHeight",null,{css:"px"}),textBaseline:n("textBaseline",null,{})},r=e.extend({type:"Text",styles:s,_value:null,init:function(t){this._super(t),this._initText(t)},value:function(t){return void 0===t?this._value:(this._value=t,void(0===this.renderMode&&(this.elem.innerHTML=t)))},draw:function(t){t.font=this.fontSize+"px "+this.fontFamily,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.fillStyle=this.color;var e="center"===this.textAlign?this.width/2:"right"===this.textAlign?this.width:0,i="number"==typeof this.lineHeight?(this.lineHeight-this.fontSize)/2:0;t.fillText(this._value,e,i)},_initText:function(t){this.style({color:t.color||"#000000",fontFamily:t.fontFamily||"Microsoft YaHei",fontSize:t.fontSize||14,textAlign:t.textAlign||"left",lineHeight:t.lineHeight||"normal",textBaseline:t.textBaseline||"top"}),this.value(t.value||t.text||"")}});return r}),define("shapes/Shape",["require","exports","module","core/Preload","display/DisplayObject","display/StyleSheet"],function(t){"use strict";var e=t("core/Preload"),i=t("display/DisplayObject"),n=t("display/StyleSheet"),s=n.newStyle,r=/^\#|^rgb|^rgba|black|red|green|blue|yellow|orange|pink|purple|gray/,a=/^top|^right|^bottom|^left|^center/,o=/\.jpg$|\.png$|\.gif$/,h={fill:s("fill",null,{get:function(t){return this.fillColor||this.fillGradient||this.fillImage},set:function(t,e){this[t]=e,t=r.test(e)?"fillColor":a.test(e)?"fillGradient":o.test(e)?"fillImage":null,t&&n.set(this,t,e)},step:function(t,e){var i=e.end;t=r.test(i)?"fillColor":a.test(i)?"fillGradient":null,t&&n.step(this,t,e)}}),fillColor:s("fillColor",null,{set:function(t,e){this[t]=e,this.fillBrush=this.fillGradient=this.fillImage=null},css:function(t,e){this._useSVG?this.svg&&this.svg.setAttribute("fill",e):(this.elemStyle.backgroundColor=e,this.elemStyle.backgroundImage="")},step:function(t,e){return n.Color.step(e.pos,e.start,e.end)}}),fillGradient:s("fillGradient",null,{parse:function(t){if("string"==typeof t){t=t.split(/\,#|\,rgb/);for(var e=1,i=t.length;i>e;e++)t[e]=(t[e].indexOf("(")>-1?"rgb":"#")+t[e];t={type:t[0],from:t[1],to:t[2]}}return t},set:function(t,e){this[t]=e,this.fillBrush=this.fillColor=this.fillImage=null},css:function(t,e){var i,s=this.elemStyle;if(n.isIE6_8||n.isIE9){var r=s.filter,a=/gradient([^)]*)/;i="gradient(GradientType=0,startColorstr='"+e.from+"', endColorstr='"+e.to+"'",s.filter=a.test(r)?r.replace(a,i):r+" progid:DXImageTransform.Microsoft."+i+")"}else i="center"===e.type?"radial-gradient(circle,"+e.from+","+e.to+")":"linear-gradient("+e.type+","+e.from+","+e.to+")",s.backgroundImage="-webkit-"+i,s.backgroundImage="-ms-"+i,s.backgroundImage="-moz-"+i},step:function(t,e){var i=e.start,s=e.end,r=e.pos,a={type:s.type};return a.from=n.Color.step(r,i.from,s.from),a.to=n.Color.step(r,i.to,s.to),a}}),fillImage:s("fillImage",null,{parse:function(t){return 1===this.renderMode&&(e.has(t)||e.load({type:"image",url:t}),t=e.get(t)),t},set:function(t,e){this[t]=e,this.fillBrush=this.fillColor=this.fillGradient=null},css:function(t,i){this.elemStyle.backgroundImage="url("+e.getUrl(i)+")"},step:null}),stroke:s("stroke",null,{get:function(t){return this.strokeColor},set:function(t,e){this[t]=e,n.set(this,"strokeColor",e)},step:function(t,e){n.step(this,"strokeColor",e)}}),strokeColor:s("strokeColor",null,{css:function(t,e){if(this._useSVG)this.svg&&this.svg.setAttribute("stroke",e);else{var i=this.elemStyle;i.borderColor=e?e:"",i.borderStyle=e?"solid":"none"}},step:function(t,e){return n.Color.step(e.pos,e.start,e.end)}}),strokeWidth:s("strokeWidth",null,{css:function(t,e){this._useSVG?this.svg&&this.svg.setAttribute("stroke-width",e):this.elemStyle.borderWidth=e+"px"}}),radius:s("radius",null,{set:function(t,e){this[t]=e;var i=2*e;n.set(this,"size",{width:i,height:i})},css:function(t,e){var i=this.elemStyle;i.borderRadius="50%"}}),radiusX:s("radius",null,{set:function(t,e){this[t]=e;var i=2*e;n.set(this,"width",i)},css:function(t,e){var i=this.elemStyle;i.borderRadius="50%"}}),radiusY:s("radius",null,{set:function(t,e){this[t]=e;var i=2*e;n.set(this,"height",i)},css:function(t,e){var i=this.elemStyle;i.borderRadius="50%"}}),angle:s("angle",null,{css:function(t,e){var i=this.radius;e="M"+i+" 0A"+i+" "+i+" 0 0 1 "+2*i+" "+2*i,this.svg.setAttribute("d",e)}}),path:s("path",null,{set:function(t,e){this[t]=e;for(var i,s,r,a=this.width,o=this.height,h=0,l=e.length;l>h;h++)i=e[h],s=i[i.length-2],r=i[i.length-1],s>a&&(a=s),r>o&&(o=r);n.set(this,"size",{width:a,height:o})},css:function(t,e){if(this._useSVG&&this.svg){for(var i,n=e,e="",s=0,r=n.length;r>s;s++)i=n[s],e+=0===s||i[2]===!0?"M"+i[0]+" "+i[1]:6===i.length?"C"+i[0]+" "+i[1]+" "+i[2]+" "+i[3]+" "+i[4]+" "+i[5]:4===i.length?"Q"+i[0]+" "+i[1]+" "+i[2]+" "+i[3]:"L"+i[0]+" "+i[1];"Ploygon"===this.type&&(e+="Z"),this.svg.setAttribute("d",e)}}})},l=i.extend({type:"Shape",styles:h,graphics:null,snapToPixel:!0,_drawFn:null,init:function(t){this._super(t),this._initGraphics(t)},draw:function(t){this._drawFn&&this._drawFn.call(this,t)},setFill:function(t){var e=this.fillColor,i=this.fillGradient,n=this.fillImage;
if(n)n.complete&&(this.fillBrush?e=this.fillBrush:this.fillBrush=e=t.createPattern(n,"no-repeat"));else if(i)if(this.fillBrush)e=this.fillBrush;else{switch(i.type){case"top":case"bottom":e=t.createLinearGradient(0,0,0,this.height);break;case"left":case"right":e=t.createLinearGradient(0,0,this.width,0);break;case"left top":e=t.createLinearGradient(0,0,this.width,this.height);break;case"right top":e=t.createLinearGradient(this.width,0,0,this.height);break;case"center":var s=this.width/2,r=this.height/2;e=t.createRadialGradient(s,r,0,s,r,s>r?s:r)}e.addColorStop(0,i.from),e.addColorStop(1,i.to),this.fillBrush=e}return e?(t.fillStyle=e,!0):!1},setStroke:function(t){var e=this.strokeColor,i=this.strokeWidth;if(e&&i){if(t.strokeStyle=e,t.lineWidth=i,t.lineCap=this.lineCap||"round",t.lineJoin=this.lineJoin||"round",this.snapToPixel&&1===i){var n=this._matrix2d;t.translate(n.tx>=0?.5:-.5,n.ty>=0?.5:-.5)}return!0}return!1},_initGraphics:function(t){t.draw&&(this._drawFn=t.draw)}});return l}),define("shapes/Rect",["require","exports","module","shapes/Shape"],function(t){"use strict";var e=t("shapes/Shape"),i=e.extend({type:"Rect",draw:function(t){var e=this.setFill(t),i=this.setStroke(t);t.beginPath(),t.rect(0,0,this.width,this.height),t.closePath(),e&&t.fill(),i&&t.stroke()},_initGraphics:function(t){this.style({fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth||1})}});return i}),define("shapes/Circle",["require","exports","module","shapes/Shape"],function(t){"use strict";var e=t("shapes/Shape"),i=e.extend({type:"Circle",draw:function(t){var e=this.radius,i=this.radiusX,n=this.radiusY,s=this.setFill(t),r=this.setStroke(t);if(t.beginPath(),i&&n){var a=.5522848,o=i,h=n,l=o*a,u=h*a,c=2*o,d=2*h;t.moveTo(0,h),t.bezierCurveTo(0,h-u,o-l,0,o,0),t.bezierCurveTo(o+l,0,c,h-u,c,h),t.bezierCurveTo(c,h+u,o+l,d,o,d),t.bezierCurveTo(o-l,d,0,h+u,0,h)}else t.arc(e,e,e,0,2*Math.PI,0);t.closePath(),s&&t.fill(),r&&t.stroke()},_initGraphics:function(t){this.style({fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth||1,radius:t.radius}),t.radiusX&&t.radiusY&&this.style({radiusX:t.radiusX,radiusY:t.radiusY})}});return i}),define("shapes/Line",["require","exports","module","shapes/Shape"],function(t){"use strict";var e=t("shapes/Shape"),i=e.extend({type:"Line",pixelHitTest:!0,_htmlText:'<svg width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',_useSVG:!0,_useElemSize:!0,draw:function(t){var e,i=this.path,n=this.setStroke(t);if(n&&i.length>1){t.beginPath();for(var s=0,r=i.length;r>s;s++)e=i[s],0===s||e[2]===!0?t.moveTo(e[0],e[1]):6===e.length?t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]):4===e.length?t.quadraticCurveTo(e[0],e[1],e[2],e[3]):t.lineTo(e[0],e[1]);t.stroke()}},_initGraphics:function(t){0===this.renderMode&&(this.svg=document.createElementNS("http://www.w3.org/2000/svg","path"),this.svg.setAttribute("fill","none"),this.elem.appendChild(this.svg)),this.style({stroke:t.stroke,strokeWidth:t.strokeWidth||1,path:t.path||[]})}});return i}),define("shapes/Ploygon",["require","exports","module","shapes/Shape"],function(t){"use strict";var e=t("shapes/Shape"),i=e.extend({type:"Ploygon",_htmlText:'<svg width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',_useSVG:!0,_useElemSize:!0,draw:function(t){var e,i=this.path,n=this.setFill(t),s=this.setStroke(t);if(i.length>2){t.beginPath();for(var r=0,a=i.length;a>r;r++)e=i[r],0===r?t.moveTo(e[0],e[1]):6===e.length?t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]):4===e.length?t.quadraticCurveTo(e[0],e[1],e[2],e[3]):t.lineTo(e[0],e[1]);t.closePath(),n&&t.fill(),s&&t.stroke()}},_initGraphics:function(t){if(0===this.renderMode&&(this.svg=document.createElementNS("http://www.w3.org/2000/svg","path"),this.elem.appendChild(this.svg)),t.radius&&t.sides){for(var e,i,n,s=t.radius,r=t.sides,a=t.cohesion,o=[],h=0;r>h;h++)e=h/r*Math.PI*2,i=(1-Math.sin(e))*s,n=(1-Math.cos(e))*s,o.push([i,n]),a&&(e+=Math.PI/r,i=(1-Math.sin(e)*a)*s,n=(1-Math.cos(e)*a)*s,o.push([i,n]));t.path=o}this.style({fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth||1,path:t.path||[]})}});return i}),define("anim/Animation",["require","exports","module","core/Class","display/DisplayObject"],function(t){"use strict";var e=t("core/Class"),i=t("display/DisplayObject"),n=e.extend({type:"Animation",_paused:!0,play:function(){this._paused=!1},stop:function(){this._paused=!0}});return n.AnimatedObject=i.extend({type:"AnimatedObject",_paused:!0,play:function(){this._paused=!1},stop:function(){this._paused=!0}}),n}),define("anim/Ease",["require","exports","module"],function(t){"use strict";var e=function(){};e.get=function(t){return i[t]||i.linear};var i={none:function(t){return t>=1?1:0},linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},easeInQuad:function(t,e,i,n,s){return n*(e/=s)*e+i},easeOutQuad:function(t,e,i,n,s){return-n*(e/=s)*(e-2)+i},easeInOutQuad:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e+i:-n/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,n,s){return n*(e/=s)*e*e+i},easeOutCubic:function(t,e,i,n,s){return n*((e=e/s-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,n,s){return n*(e/=s)*e*e*e+i},easeOutQuart:function(t,e,i,n,s){return-n*((e=e/s-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e+i:-n/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,n,s){return n*(e/=s)*e*e*e*e+i},easeOutQuint:function(t,e,i,n,s){return n*((e=e/s-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e*e+i:n/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,n,s){return-n*Math.cos(e/s*(Math.PI/2))+n+i},easeOutSine:function(t,e,i,n,s){return n*Math.sin(e/s*(Math.PI/2))+i},easeInOutSine:function(t,e,i,n,s){return-n/2*(Math.cos(Math.PI*e/s)-1)+i},easeInExpo:function(t,e,i,n,s){return 0==e?i:n*Math.pow(2,10*(e/s-1))+i},easeOutExpo:function(t,e,i,n,s){return e==s?i+n:n*(-Math.pow(2,-10*e/s)+1)+i},easeInOutExpo:function(t,e,i,n,s){return 0==e?i:e==s?i+n:(e/=s/2)<1?n/2*Math.pow(2,10*(e-1))+i:n/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,n,s){return-n*(Math.sqrt(1-(e/=s)*e)-1)+i},easeOutCirc:function(t,e,i,n,s){return n*Math.sqrt(1-(e=e/s-1)*e)+i},easeInOutCirc:function(t,e,i,n,s){return(e/=s/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+i:n/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,n,s){var r=1.70158,a=0,o=n;if(0==e)return i;if(1==(e/=s))return i+n;if(a||(a=.3*s),o<Math.abs(n)){o=n;var r=a/4}else var r=a/(2*Math.PI)*Math.asin(n/o);return-(o*Math.pow(2,10*(e-=1))*Math.sin((e*s-r)*(2*Math.PI)/a))+i},easeOutElastic:function(t,e,i,n,s){var r=1.70158,a=0,o=n;if(0==e)return i;if(1==(e/=s))return i+n;if(a||(a=.3*s),o<Math.abs(n)){o=n;var r=a/4}else var r=a/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*e)*Math.sin((e*s-r)*(2*Math.PI)/a)+n+i},easeInOutElastic:function(t,e,i,n,s){var r=1.70158,a=0,o=n;if(0==e)return i;if(2==(e/=s/2))return i+n;if(a||(a=s*(.3*1.5)),o<Math.abs(n)){o=n;var r=a/4}else var r=a/(2*Math.PI)*Math.asin(n/o);return 1>e?-.5*(o*Math.pow(2,10*(e-=1))*Math.sin((e*s-r)*(2*Math.PI)/a))+i:o*Math.pow(2,-10*(e-=1))*Math.sin((e*s-r)*(2*Math.PI)/a)*.5+n+i},easeInBack:function(t,e,i,n,s,r){return void 0==r&&(r=1.70158),n*(e/=s)*e*((r+1)*e-r)+i},easeOutBack:function(t,e,i,n,s,r){return void 0==r&&(r=1.70158),n*((e=e/s-1)*e*((r+1)*e+r)+1)+i},easeInOutBack:function(t,e,i,n,s,r){return void 0==r&&(r=1.70158),(e/=s/2)<1?n/2*(e*e*(((r*=1.525)+1)*e-r))+i:n/2*((e-=2)*e*(((r*=1.525)+1)*e+r)+2)+i},easeInBounce:function(t,e,n,s,r){return s-i.easeOutBounce(t,r-e,0,s,r)+n},easeOutBounce:function(t,e,i,n,s){return(e/=s)<1/2.75?n*(7.5625*e*e)+i:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(t,e,n,s,r){return r/2>e?.5*i.easeInBounce(t,2*e,0,s,r)+n:.5*i.easeOutBounce(t,2*e-r,0,s,r)+.5*s+n},easeIn:function(t,e,n,s,r){return i.easeInQuad(t,e,n,s,r)},easeOut:function(t,e,n,s,r){return i.easeOutQuad(t,e,n,s,r)},easeInOut:function(t,e,n,s,r){return i.easeInOutQuad(t,e,n,s,r)},expoIn:function(t,e,n,s,r){return i.easeInExpo(t,e,n,s,r)},expoOut:function(t,e,n,s,r){return i.easeOutExpo(t,e,n,s,r)},expoInOut:function(t,e,n,s,r){return i.easeInOutExpo(t,e,n,s,r)},bounceIn:function(t,e,n,s,r){return i.easeInBounce(t,e,n,s,r)},bounceOut:function(t,e,n,s,r){return i.easeOutBounce(t,e,n,s,r)},bounceInOut:function(t,e,n,s,r){return i.easeInOutBounce(t,e,n,s,r)},elasIn:function(t,e,n,s,r){return i.easeInElastic(t,e,n,s,r)},elasOut:function(t,e,n,s,r){return i.easeOutElastic(t,e,n,s,r)},elasInOut:function(t,e,n,s,r){return i.easeInOutElastic(t,e,n,s,r)},backIn:function(t,e,n,s,r){return i.easeInBack(t,e,n,s,r)},backOut:function(t,e,n,s,r){return i.easeOutBack(t,e,n,s,r)},backInOut:function(t,e,n,s,r){return i.easeInOutBack(t,e,n,s,r)}};return e.easing=i,e}),define("anim/Tween",["require","exports","module","core/Class","display/DisplayObject","anim/Ease","anim/Animation"],function(t){"use strict";var e=(t("core/Class"),t("display/DisplayObject")),i=t("anim/Ease"),n=t("anim/Animation"),s=n.extend({from:0,to:0,start:null,end:null,easing:null,_target:null,_deltaTime:-1,init:function(t,e,n,s){this._target=t,this._deltaTime=0;var r=e.start,a=e.end;if(r)t.style(r),r.data&&t.data(r.data);else{r={};for(var o in a)"data"===o?r[o]=this._clone(t._userData):r[o]=this._clone(t.style(o))}this.start=r,this.end=a,this.from=e.from,this.to=e.to,this.easing=i.get(e.easing),this.callback=n,this.tick=s},finish:function(){this.stop(),this.callback&&this.callback()},update:function(t){if(!this._paused){var e=this._target,i=this.start,n=this.end,s=this.to-this.from,r=this.easing,a=this._deltaTime,o=a/s,h=0===o||1===o?o:r(o,o,0,1,1);for(var l in n)e._stepTween(l,{pos:h,start:i[l],end:n[l]});if(this.tick&&this.tick(o,h),a===s)this.finish();else{var u=a+t;this._deltaTime=u>s?s:u}}},_clone:function(t){var e;if("object"==typeof t){e={};for(var i in t)e[i]=this._clone(t[i])}else e=t;return e}});return s._tweens=[],s._currentTarget=null,s.removeAll=function(){for(var t,e=this._tweens,i=0,n=e.length;n>i;i++)t=e[i]._target,t._fxQueue=t._fxTween=null;this._tweens=[]},s.update=function(t){for(var e=this._tweens,i=e.length-1;i>=0;i--)e[i]._paused&&e.splice(i,1);for(var i=0,n=e.length;n>i;i++)e[i].update(t)},s.get=function(t){return this._currentTarget=t,this},s.has=function(t){return!!t._fxQueue},s.exec=function(t,e,i,n){var s=this._currentTarget;switch(t){case"shift":s._fxTween?(s._fxTween.stop(),s._fxTween.callback()):s._fxQueue&&s._fxQueue.shift();break;case"pop":s._fxQueue&&s._fxQueue.pop();break;case"stop":s._fxTween&&s._fxTween.stop(),s._fxQueue=s._fxTween=null;break;case"fadeIn":s.style({visible:!0,alpha:0}),this.addTween({alpha:1},e,i,n);break;case"fadeOut":s.style({visible:!0,alpha:1}),this.addTween({alpha:0},e,i,function(t){s.style({visible:!1}),n&&n(t)})}},s.addTween=function(t,e,i,n,r){var a=this._currentTarget,o=a._fxQueue;if("number"==typeof t)n=e,e=t,t={},i="none";else if("string"==typeof t)return void this.exec(t,e,i,n);var h=function(){n&&n(),o=a._fxQueue,o&&o.length>0?o.shift()():(a._fxQueue=a._fxTween=null,a.trigger({type:"tweenend"}))},l=function(){var n=new s(a,{from:0,to:e||300,start:null,end:t,easing:i||"linear"},h,r);n.play(),a._fxTween=n,s._tweens.push(n)};o?o.push(l):(l(),a._fxQueue=[])},e.prototype.to=function(t,e,i,n,r){return s.get(this).addTween(t,e,i,n,r),this},s}),define("anim/Sprite",["require","exports","module","core/Preload","anim/Animation"],function(t){"use strict";var e=t("core/Preload"),i=t("anim/Animation"),n=i.AnimatedObject.extend({type:"Sprite",_baseUrl:"",_spriteSheet:null,_images:null,_imageIndex:-1,_frames:null,_frameIndex:-1,_currentFrame:null,_animations:null,_currentAnimation:null,_deltaTime:-1,init:function(t){this._super(t),this._initBaseUrl(t),this._initSpriteSheet(t.spriteSheet||t.ss)},play:function(t){"string"==typeof t?this.playAnimation(t):"number"==typeof t?this.gotoAndPlay(t):this._paused=!1},stop:function(){this._paused=!0},gotoAndPlay:function(t){this._paused=!1,this._currentAnimation=null,this._frameIndex=t},gotoAndStop:function(t){this._paused=!0,this._currentAnimation=null,this._frameIndex=t,this._updateFrame()},playAnimation:function(t){this._paused=!1;var e=this._animations[t];e&&(this._currentAnimation=e,this._frameIndex=e.start,this._deltaTime=0)},update:function(t){if(!this._paused){this._updateFrame();var e,i,n,s,r,a=this._currentAnimation;a?(e=a.name,i=a.start,n=a.end,s=a.next,r=a.duration):(e=null,i=0,n=this._frames.length-1,s=!0,r=0);var o;r>0?(this._deltaTime+=t,o=Math.floor((n-i+1)*(this._deltaTime/r)+i)):o=this._frameIndex+1,o>n?("string"==typeof s?this.playAnimation(s):s===!0?(this._frameIndex=i,this._deltaTime=0):this.stop(),this.trigger({type:"animationend",name:e,animation:a})):this._frameIndex=o}},draw:function(t){var e=this._currentFrame;if(e){var i=this._images[e[4]];i&&i.complete&&t.drawImage(i,e[0],e[1],e[2],e[3],0,0,e[2],e[3])}},_initBaseUrl:function(t){t.baseUrl&&(this._baseUrl=t.baseUrl)},_initSpriteSheet:function(t){this._spriteSheet=t,this._initImages(t.images),this._initFrames(t.frames),this._initAnimations(t.animations),this._offsetX=t.offsetX||0,this._offsetY=t.offsetY||0,this.play(0)},_initImages:function(t){this._imageIndex=-1,this._images=[];for(var i,n=0,s=t.length;s>n;n++)i=this._baseUrl+t[n],0!==this.renderMode&&(e.has(i)||e.load({type:"image",url:i}),i=e.get(i)),this._images.push(i)},_initFrames:function(t,e){if(e||(this._frames=[]),t instanceof Array)for(var i=0,n=t.length;n>i;i++)t[i]instanceof Array?this._frames.push(t[i]):this._initFrames(t[i],!0);else for(var s=0,r=t.rows;r>s;s++)for(var i=0,n=t.cols;n>i&&s*t.cols+i!==t.num;i++)this._frames.push([i*t.width,s*t.height,t.width,t.height,t.image||0,0,0])},_initAnimations:function(t){this._animations={};var e;for(var i in t)e=t[i],this._animations[i]={name:i,start:e[0],end:e[1],next:e[2],duration:e[3]}},_updateFrame:function(){var t=this._currentFrame=this._frames[this._frameIndex];if(t){(this.width!==t[2]||this.height!==t[3])&&this.style("size",{width:t[2],height:t[3]});var i=this.transform,n=this._offsetX+t[5],s=this._offsetY+t[6];if((i.translateX!==n||i.translateY!==s)&&this.style("transform",{translateX:n,translateY:s}),0===this.renderMode){var r=this.elemStyle;this._imageIndex!==t[4]&&(this._imageIndex=t[4],r.backgroundImage="url("+e.getUrl(this._images[t[4]])+")",r.backgroundRepeat="no-repeat"),r.backgroundPosition="-"+t[0]+"px -"+t[1]+"px"}}}});return n}),define("cartoon",["require","exports","module","ct","core/Class","core/Ticker","core/Preload","display/StyleSheet","display/DisplayObject","display/Stage","display/Canvas","display/Bitmap","display/Text","shapes/Shape","shapes/Rect","shapes/Circle","shapes/Line","shapes/Ploygon","anim/Animation","anim/Tween","anim/Sprite"],function(t){"use strict";var e=t("ct");return e.extend({Class:t("core/Class"),Ticker:t("core/Ticker"),Preload:t("core/Preload"),StyleSheet:t("display/StyleSheet"),DisplayObject:t("display/DisplayObject"),Stage:t("display/Stage"),Canvas:t("display/Canvas"),Bitmap:t("display/Bitmap"),Text:t("display/Text"),Shape:t("shapes/Shape"),Rect:t("shapes/Rect"),Circle:t("shapes/Circle"),Line:t("shapes/Line"),Ploygon:t("shapes/Ploygon"),Animation:t("anim/Animation"),Tween:t("anim/Tween"),Sprite:t("anim/Sprite")}),e});