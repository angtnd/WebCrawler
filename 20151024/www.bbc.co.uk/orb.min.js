/*!
 * Barlesque - ORB and all
 * Copyright (c) 2015 BBC, all rights reserved.
 */
/*! nut, the concise CSS selector engine
 *  Author: AurÃ©lien Delogu (dev@dreamysource.fr)
 *  Homepage: https://github.com/pyrsmk/nut
 *  License: MIT
 */
define("orb/lib/_anim",function(){"use strict";function e(e,t,n,r){return e/=r,-n*e*(e-2)+t}var t={},n=["transition","WebkitTransition","MozTransition","msTransition","OTransition"],r=function(){for(var e=document.createElement("div").style,t=n.length;t--;)if(n[t]in e)return n[t];return!1}();return t.animate=r?function(e,t){e.style[r]="height "+t.duration+"ms",e.style.height=t.height+"px"}:function(t,n){var r,o=parseFloat(t.offsetHeight),a=n.height,i=n.duration,s=t.style,c=10,u=(new Date).getTime();clearTimeout(t.orbAnimTimer),r=function(){var n=(new Date).getTime()-u,l=e(n,o,a-o,i);return n>i?void(s.height=a+"px"):(s.height=l+"px",void(t.orbAnimTimer=setTimeout(r,c)))},t.orbAnimTimer=setTimeout(r,0)},t}),define("orb/lib/_attr",function(){"use strict";return{getAttr:function(e,t){var n,r;return e.attributes[t]?e.attributes[t].specified?e.attributes[t].value:"":e.getAttributeNode?(n=e.getAttributeNode(t,0),null===n?"":n.value):(r=e.getAttribute(t,2),null===r?"":r)},setAttr:function(e,t,n){e.setAttribute(t,""+n)}}}),define("orb/lib/_classy",function(){"use strict";var e={};return e.addClass=function(t,n){var r,o;if("[object Array]"===Object.prototype.toString.call(n))for(r=0,o=n.length;o>r;r++)e.addClass(t,n[r]);if(t.nodeName)e.hasClass(t,n)||(t.className+=(t.className?" ":"")+n);else if(t.length)for(r=0,o=t.length;o>r;r++)e.addClass(t[r],n)},e.removeClass=function(t,n){var r,o;if("[object Array]"===Object.prototype.toString.call(n))for(r=0,o=n.length;o>r;r++)e.removeClass(t,n[r]);if(t.nodeName)t.className=t.className.replace(new RegExp("(^| )"+n+"( |$)","g")," ").replace(/(^ | $)/g,"").replace(/ {2}/g," ");else if(t.length)for(r=0,o=t.length;o>r;r++)e.removeClass(t[r],n)},e.hasClass=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},e}),define("orb/lib/_cookies",function(){"use strict";return{setCookie:function(e,t,n){var r,o,a,i;i=encodeURIComponent(e)+"="+encodeURIComponent(t)+";",n&&(r=new Date,r.setMinutes(r.getMinutes()+n),r=r.toUTCString(),i+="expires="+r+";"),a=window.location.hostname.match(/([^.]+(\.co\.uk|\.com))$/),o=a[1],i+="path=/;domain="+o+";",window.bbccookies.set(i)},getCookie:function(e){var t,n,r,o=window.bbccookies.get();if(!o)return void 0;o=o.split("; ");for(var a=0,i=o.length;i>a;a++)if(t=o[a].split("="),n=decodeURIComponent(t[0]),n===e)return r=decodeURIComponent(t[1]);return void 0}}}),define("orb/lib/_dom",function(){"use strict";return{remove:function(e){e.parentNode.removeChild(e)}}}),define("orb/lib/_event",function(){"use strict";var e={};return document.addEventListener?e.addEvent=function(t,n,r){if(t.nodeName||t===window)t.addEventListener(n,r,!1);else if(t.length)for(var o=0,a=t.length;a>o;o++)e.addEvent(t[o],n,r)}:e.addEvent=function(t,n,r){if(t.nodeName||t===window)t.attachEvent("on"+n,function(e){return e=e||window.event||{},e.srcElement&&"undefined"==typeof e.target&&(e.target=e.srcElement),r.call(t,e)});else if(t.length)for(var o=0,a=t.length;a>o;o++)e.addEvent(t[o],n,r)},e.mixin=function(e){e.__events={},e.event=function(t){var n;return n="undefined"!=typeof e.__events[t]?e.__events[t]:e.__events[t]=[],{add:function(e){n.push(e)},fire:function(e){e=e||{};for(var t=0,r=n.length;r>t;t++)n[t](e)}}}},e}),define("orb/lib/_nut",[],function(){var e={exports:{}};return function(t){"undefined"!=typeof e?e.exports=t:this.nut=t}(function(){var e=document,t="firstChild",n="nextSibling",r="getElementsByClassName",o="length",a=function(t,n){var r=e.getElementById(t);return r?[r]:[]},i=function(e,r){var a,s=r[t],c=[];if(s)do 1==s.nodeType&&(s.className&&s.className.match("\\b"+e+"\\b")&&c.push(s),(a=i(e,s))[o]&&(c=c.concat(a)));while(s=s[n]);return c},s=function(e,t){return t[r]?t[r](e):i(e,t)},c=function(e,t){return t.getElementsByTagName(e)};return function(t,n){n||(n=e),"object"==typeof n&&n.pop&&(n=n[0]);var r,i,u,l,d,f,h,v,b,m,p,g=[];for(t=t.split(","),b=-1;u=t[++b];)t[b]=u.split(/\s+/);for(d=t[o];d;){for(r=[n],f=-1,h=t[--d][o];++f<h;)if(u=t[d][f]){for("#"==u.charAt(0)?(u=u.substr(1),p=a):"."==u.charAt(0)?(u=u.substr(1),p=s):p=c,i=[],v=-1;r[++v];)for(l=p(u,r[v]),b=-1,m=l[o];++b<m;)i.push(l[b]);r=i}g=g.concat(r)}return g}}()),e.exports}),define("orb/lib/_ready",[],function(){"use strict";function e(){for(;n.length;)n.shift().call(null)}function t(){return/in/.test(o.readyTest())?!1:(o.isReady=!0,e(),!0)}var n=[],r=!1,o=function(e){o.isReady?e():(n.push(e),t()||r||(r=setInterval(function(){t()&&clearInterval(r)},40)))};return o.isReady=!1,o.readyTest=function(){return document.readyState},o}),define("orb/lib/_script",function(e){"use strict";var t=1,n={inject:function(e){var t;return t=document.createElement("script"),t.src=e,document.getElementsByTagName("head")[0].appendChild(t),t},jsonp:function(r,o,a){var i,s,c,u=!1;a=a||{},i=a.callbackName?a.callbackName:"jsonpcb"+t++,a.timeout&&(c=setTimeout(function(){u=!0,a.error&&a.error()},a.timeout)),window[i]=function(t){clearTimeout(c),u||o(t),s&&s.parentNode&&s.parentNode.removeChild(s),window[i]=e},s=n.inject(r+(-1===r.indexOf("?")?"?":"&")+"callback="+i)}};return n}),define("orb/lib/_str",function(e){"use strict";var t={htmlEntities:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},trimHtml:function(e,t){var n="",r=0;return e.replace(/(<.+?>|&.+?;|[^<&]+)/g,function(e){switch(e.charAt(0)){case"<":e=r>=t&&/\/>/.test(e)?"":e,r+=0;break;case"&":e=r>=t?"":e,r+=1;break;default:e=e.substr(0,t-r),r+=e.length}n+=e}),n=n.replace(/\s+(<[^>]+>)$/,"$1").replace(/<(\w+)><\/\1>/g,"").replace(/\s+$/,""),n+=e!==n?"&hellip;":""}};return t}),define("orb/lib/_template",function(){"use strict";function e(n,r){n=n.replace(/(^\s*<!\[CDATA\[|\]\]>\s*$)/g,"");var o="#"===n.charAt(0)?t[n]=t[n]||e(document.getElementById(n.slice(1)).innerHTML):new Function("obj","var p=[],esc=function(v){return (''+v).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;');},print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return r?o(r):o}var t={};return e}),define("orb/lib/_$",["orb/lib/_nut","orb/lib/_ready","orb/lib/_anim","orb/lib/_dom","orb/lib/_event","orb/lib/_classy","orb/lib/_attr","orb/lib/_cookies","orb/lib/_str","orb/lib/_script","orb/lib/_template"],function(e,t,n,r,o,a,i,s,c,u,l){"use strict";var d=e,f=d("#orb-banner")[0],h=d("#orb-header")[0];return d.anim=n.animate,d.ready=t,d.remove=r.remove,d.addEvent=o.addEvent,d.addClass=a.addClass,d.removeClass=a.removeClass,d.hasClass=a.hasClass,d.getAttr=i.getAttr,d.setAttr=i.setAttr,d.setCookie=s.setCookie,d.getCookie=s.getCookie,d.str=c,d.script=u,d.template=l,d.client={old_ie:d.hasClass(f,"orb-old-ie"),ie8:d.hasClass(f,"orb-ie8"),ie7:d.hasClass(f,"orb-ie7"),ie6:d.hasClass(f,"orb-ie6")},d.config={fixed:d.hasClass(h,"orb-fixed-width")||d.client.old_ie,rtl:"rtl"===d.getAttr(h,"dir")},d.fig={isUk:function(e){return e=e||window,1===e.orb.fig("no")?/(\/\/|.)bbc\.co\.uk$/i.test(e.location.hostname)?!0:!1:!!e.orb.fig("uk")}},d.addCSS=function(e){if("string"!=typeof e||""===e)return!1;try{var t=document.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t),!0}catch(n){return!1}},d.addHTML=function(e,t){return e&&e.tagName&&""!==t?(e.innerHTML=t,!0):!1},d}),define("orb/_map",["orb/lib/_$"],function(e){"use strict";var t=e("#orb-js-script")[0],n=e.getAttr(t,"data-assetpath"),r={};return r["orb/async/_suggestions"]=n+"script/orb/async/_suggestions.min",r["orb/async/_footerpromo"]=n+"script/orb/async/_footerpromo.min",require({paths:r}),function(){return{assetPath:n}}}),define("orb/features/masthead/_drawer",["orb/lib/_$","orb/lib/_event"],function(e,t){"use strict";var n=function(e){t.mixin(this),this.content=e,this._currentPanel=null,this.panels={},this.panelName=null};return n.prototype.addPanel=function(e){return this.panels[e.name]=e,e.drawer=this,this},n.prototype.getPanel=function(e){return e?this.panels[e]:this._currentPanel},n.prototype.resize=function(t){if(this._currentPanel&&this._currentPanel.name===t){var n=this.panels[t].content.offsetHeight+"px";e("#orb-panels")[0].style.height=n}},n.prototype.showPanel=function(e){var t=this._currentPanel;null===t?(this.panelName=e,this.event("onActivate").fire({}),this._currentPanel=this.panels[e],this._currentPanel.publishState("shown")):t&&t.name===e?this.hidePanel():(this.deactivatedPanelName=this._currentPanel.name,this._currentPanel.publishState("hidden"),this.panelName=e,this._currentPanel=this.panels[e],this.event("onSwapContents").fire({}),this._currentPanel.publishState("shown"))},n.prototype.hidePanel=function(){var e=this._currentPanel;null!==e&&(this.event("onDeactivate").fire({}),e.publishState("hidden"),this.panelName=null,this._currentPanel=null)},n.prototype.activate=function(){this._currentPanel&&this.showPanel(this._currentPanel.name)},n.prototype.deactivate=function(){this.hidePanel()},n.prototype.getCurrentPanel=function(){return this._currentPanel},n.Panel=function(e,n,r){this.name=e,n&&(this.control=n.control,this.content=n.content),this.publishState=function(e){"function"==typeof this.stateChangeCallback&&this.stateChangeCallback.call(null,e)},"function"==typeof r&&(this.stateChangeCallback=r),t.mixin(this)},n}),define("orb/features/masthead/_layoutprimarynav",["orb/lib/_$","orb/lib/_event","orb/api","orb/features/masthead/_linkmanager"],function(e,t,n,r){"use strict";function o(){function t(){var t,n,r,a;e.ready.isReady&&(t=o.event("beforeLayout"),n=o.event("afterLayout"),r={links:g.links},a=h.offsetTop,t.fire(r),g.showAll(),g.hideToFit(function(e){return d.offsetTop!==a||l.offsetTop!==a?!0:void 0},p),n.fire(r))}function a(){e.addClass(h,m)}function i(){e.removeClass(h,m),n.trigger("layout",{width:h.offsetWidth,height:h.offsetHeight})}function s(){window.innerWidth!==y&&(y=window.innerWidth,a(),s.throttle&&clearTimeout(s.throttle),s.throttle=setTimeout(function(){t(),i()},300))}function c(){function t(e){g.hasVisible()?r.firstChild.data=s:r.firstChild.data=i}function n(e){var t,n,o;a.style.width="auto",r.firstChild.data=s,t=a.offsetWidth,r.firstChild.data=i,n=a.offsetWidth,o=Math.max(t,n),a.style.width=o+"px"}var r=e("#orb-nav-more a")[0],a=r.parentNode,i=r.firstChild.data,s=e.getAttr(r,"data-alt");o.event("beforeLayout").add(n),o.event("afterLayout").add(t)}function u(){function t(){s.style.width=s.offsetWidth+r()-3+"px"}function n(e){t()}var r,a=e(".orb-nav-search")[0],i=e("#orb-nav-links")[0],s=e("#orb-nav-more")[0];e(".orb-nav-id")[0];r=e.config.rtl?e.client.ie6||e.client.ie7?function(){return a.offsetLeft+s.offsetLeft+1}:function(){return s.offsetLeft-(a.offsetLeft+a.offsetWidth)}:function(){return a.offsetLeft-i.offsetLeft-i.offsetWidth},o.event("afterLayout").add(n)}var l=e(".orb-nav-search")[0],d=e("#orb-nav-more")[0],f=e("#orb-header")[0],h=e(".orb-nav-pri-container")[0],v="orb-nav-dyn",b="orb-nav-empty",m="orb-nav-lock",p=2,g=null,y=0;e.config.fixed||(e.addEvent(window,"resize",s),e.addEvent(window,"orientationchange",function(){setTimeout(s,100)})),e.ready(function(){g=new r(e(".orb-nav-links li").slice(0,-1)),c(),u();var n={uk:e.fig.isUk()},o=n.uk?e.getAttr(f,"data-max-d"):e.getAttr(f,"data-max-w");e.addClass(f,"orb-location-"+(n.uk?"d":"w")),g.setLocation(n.uk?"d":"w"),""!==o&&g.applyMaximum(o),a(),e.addClass(f,v),e.removeClass(f,b),t(),i()})}return t.mixin(o),o}),define("orb/features/masthead/_linkmanager",["orb/lib/_$"],function(e){"use strict";var t,n="orb-nav-hide",r=function(e){var t=this;if("undefined"!=typeof t.links)for(var n=0,r=t.links.length;r>n;n++)e(t.links[n],n)};return t=function(e){this.links=[];for(var t=0,n=e.length;n>t;t++)this.links[t]=e[t]},t.prototype.reindexLinks=function(){var e=[];r.call(this,function(t){t&&e.push(t)}),this.links=e},t.prototype.setLocation=function(t){var n="w"===t?"d":"w",o=this;r.call(this,function(t,r){e.hasClass(t,"orb-"+n)&&o.removeLink(r)}),this.reindexLinks()},t.prototype.removeLink=function(t){e.remove(this.links[t]),delete this.links[t]},t.prototype.showAll=function(){r.call(this,function(t){e.removeClass(t,n)})},t.prototype.hideToFit=function(t,r){for(var o=!1,a=this.links.length;a--;)if(o||t())e.addClass(this.links[a],n);else{if(!(r-1>a))break;o=!0,a++}},t.prototype.applyMaximum=function(e){var t=this;r.call(this,function(n,r){r>=e&&t.removeLink(r)}),t.reindexLinks()},t.prototype.hasVisible=function(){return this.links[0]&&-1===this.links[0].className.indexOf(n)},t}),define("orb/features/masthead/_menu",function(){"use strict";var e=function(e){};return e}),define("orb/features/masthead/_widgetmanager",["orb/lib/_$"],function(e){"use strict";var t={_currrent:null,onNoneActive:null,onAnyActive:null};return t.notify=function(e,t){if("widgetactivated"===e){if(this._current&&"function"==typeof this._current.deactivate&&this._current.deactivate(),"undefined"==typeof t)throw"Cannot call widgetmanager.notify() with no messageSource.";this._current=t,"function"==typeof this.onAnyActive&&this.onAnyActive()}"widgetdeactivated"===e&&t===this._current&&(this._current=null,"function"==typeof this.onNoneActive&&this.onNoneActive())},t}),define("orb/features/footer/_desktopmobilelink",["orb/lib/_$"],function(e){"use strict";var t=function(){var t,n,r=e(".orb-nav-mobile a")[0],o=e(".orb-nav-desktop a")[0],a=525600;o?(t=o,n="d"):r&&(t=r,n="m"),t&&(e.hasClass(t.parentNode,"orb-alt-switch")&&(t.href=""+window.location),e.addEvent(t,"click",function(){e.setCookie("ckps_d",n,a)}))};return t}),define("orb/features/_configureid",["orb/lib/_$","orb/features/_mastheadimages"],function(e,t){"use strict";function n(){function n(){var n=e("#idcta-image")[0],r=n.src,o=e.getAttr(n,"data-activesrc");n.src=r.replace("signin","signedin"),o&&(o=o.replace("signin","signedin"),e.setAttr(n,"data-activesrc",o),t.precacheImage(n))}function r(e,t){return e.length>t?e.substring(0,t-1)+"â¦":e}function o(e,t){var n=r(t,14);e.textContent=e.innerText=n,n!==t&&(e.title=t)}function a(){var t,r,a=e("#idcta-username")[0],i=e("#idcta-link")[0];a&&i&&require(["id-statusbar-config","idcta/idcta-1"],function(e,s){var c=s.hasCookie();c?(t=s.getNameFromCookie()||e.translation_signedin,n()):(t=e.translation_signedout,r=e.signin_url),t&&o(a,t),r&&(i.href=r)})}e.ready(function(){a(),e.removeClass(e(".orb-nav-id")[0],"orb-nav-id-default")})}return n}),define("orb/features/_configuresearch",["orb/lib/_$","orb/features/masthead/_widgetmanager"],function(e,t){"use strict";var n=function(){var n=null;e.ready(function(){var r=e("#orb-search-q")[0],o=e(".orb-nav-search input, .orb-nav-search button");e.addEvent(o,"focus",function(e){clearTimeout(n),t.notify("widgetactivated",r)}),document.documentElement&&0===(""+document.documentElement.lang).indexOf("en")&&(e("#orb-search-suggid")[0].value="",e.addEvent([r],"keydown",function(t){"undefined"==typeof r.suggestions&&(r.suggestions="initialising",e.setAttr(r,"autocomplete","off"),require(["orb/async/_suggestions"],function(e){r.suggestions=new e(r)}))})),e.addEvent(o,"blur",function(e){n=setTimeout(function(){t.notify("widgetdeactivated",r)},220)})})};return n}),define("orb/features/_drawerManager",["orb/lib/_$","orb/features/masthead/_layoutprimarynav","orb/features/masthead/_widgetmanager","orb/features/masthead/_drawer","orb/features/masthead/_linkmanager"],function(e,t,n,r,o){"use strict";function a(){function i(){var t=e("#orb-panel-template")[0];t&&(y=t.innerHTML,t.parentNode.removeChild(t))}function s(e){for(var t=1,n=e.firstChild;n;){if(n.nodeType===t)return n;n=n.nextSibling}return null}function c(e){var t;for("undefined"==typeof e.length&&(e=[e]),t=e.length;t--;){if(document.activeElement&&document.activeElement===e[t])return!0;if(document.focusNode&&document.focusNode===e[t])return!0}return!1}function u(t){return"more"===t?'<h2 id="orb-panel-more-title"></h2><ul>'+e("#orb-aside .orb-footer-primary-links ul")[0].innerHTML+"</ul>":""}function l(e,t){require(["istats-1"],function(n){n.log(t,"panel-"+e)})}function d(t){var r,o,a,i=t.control;if(t){if(o=e(".orb-panel-content ."+T),clearTimeout(x),!o.length)return void(document.location.hash="#orb-footer");n.notify("widgetactivated",N),i&&e.addClass(i,C),N.content.style.height="0",t.content.style.display="block",r=t.content.offsetHeight,"mouse"===w.navMode?(e.anim(N.content,{height:r,duration:A}),e.setAttr(t.content,"tabindex","-1"),t.content.focus()):(e.anim(N.content,{height:r,duration:0}),a=e("."+T+" a",t.content)[0]||e("."+T+" a",t.content)[0]||e(".orb-focus-target",t.content)[0],a&&a.focus()),e.setAttr(N.content,"aria-expanded","true"),e.addClass(N.content,E),setTimeout(function(){l(t.name,"open")},"mouse"===w.navMode?A:0)}}function f(t){var r=t.control;t&&(clearTimeout(x),"mouse"===w.navMode?e.anim(N.content,{height:0,duration:A}):e.anim(N.content,{height:0,duration:0}),x=setTimeout(function(){t.content.style.display="none",e.removeClass(N.content,E),e.setAttr(N.content,"aria-expanded","false"),r&&e.removeClass(r,C),n.notify("widgetdeactivated",N),l(t.name,"close")},"mouse"===w.navMode?A:0))}function h(t,n){var r,o=t.control,a=n.control;t.content.style.display="none",n.content.style.display="block",r=n.content.offsetHeight,"mouse"===w.navMode?(e.anim(N.content,{height:r,duration:A}),e.setAttr(n.content,"tabindex","-1"),n.content.focus()):(e.anim(N.content,{height:r,duration:0}),e("."+T+" a",n.content)[0].focus()),e.removeClass(o,C),e.addClass(a,C)}function v(){e.addEvent(w,"mousemove",function(e){w.navMode="mouse"}),e.addEvent(w,"mousedown",function(e){w.navMode="mouse"}),e.addEvent(w,"keydown",function(e){w.navMode="keyboard"})}function b(t){e.hasClass(N.content,E)&&(N.content.style.height=t.content.offsetHeight/P(N.content)+"em")}function m(){var e=N.getCurrentPanel();p(),null!==e&&b(e)}function p(){for(var t=e(".orb-nav-links li"),n=e("#orb-panel-more li"),r=e(".orb-panel-content ."+T),o="orb-panel-hide",a=0,i=0,s=t.length;s-1>i&&-1===t[i].className.indexOf("orb-nav-hide");i++)a++;for(var c=0,u=n.length;u>c;c++)a>c?e.addClass(n[c],o):e.removeClass(n[c],o);r.length&&e.removeClass(r[0],T),a<n.length&&e.addClass(n[a],T),e("#orb-panel-more-title")[0].innerHTML=e("#orb-nav-more a")[0].innerHTML}function g(t){require(["istats-1"],function(n){n.track("internal",{region:t.content,linkLocation:"blq-nav-"+t.name+"-gvl4"}),n.addNoTrack(e("a",t.control)[0])})}var y,_,w=e("#orb-header")[0],k=e("#orb-panels")[0],C="orb-nav-focus-on",A=400,E="orb-panel-active",T="orb-first-visible",x=null,N=new r(k),P=function(){return window.getComputedStyle?function(e){return e=e||document.body,window.getComputedStyle(e).fontSize.replace("px","")}:function(e){var t,n;return e=e||document.body,t=document.createElement("div"),t.style.margin="0px",t.style.padding="0px",t.style.border="none",t.style.height="1em",e.appendChild(t),n=t.offsetHeight,e.removeChild(t),n}}();a.initPanelDom=function(t,n){var r,o,a=e.template(y),i=document.createElement("div");return r=a({panelcontent:u(t),panelname:t}),i.innerHTML=r,i=s(i).cloneNode(!0),n.appendChild(i),e.addClass(e(".orb-panel-content")[0],"orb-nav-sec"),o=e("#"+i.getAttribute("aria-labelledby"))[0],o&&e.setAttr(o,"aria-controls",i.id),{control:o,content:i}},a.addPanelEvents=function(t){var n=t.name;e.addEvent(t.control,"click",function(e){return t.event("beforeshow").fire(e),N.showPanel(n),t.event("show").fire(e),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}),e.addEvent(w,"keydown",function(r){var o,a="number"==typeof r.which?r.which:r.keyCode;27===a&&(c(t.control)||c(e("a",t.content)))&&(N.hidePanel(n),o=e("a",t.control)[0],o.focus())})},a.getMastheadDrawer=function(){return N},e.ready(function(){i(),_=new r.Panel("more",a.initPanelDom("more",k)),w.drawer=N,N.addPanel(_),N.event("onActivate").add(function(){var e=N.getPanel(N.panelName);d(e)}),N.event("onDeactivate").add(function(){var e=N.getPanel();f(e)}),N.event("onSwapContents").add(function(){var e=N.panels[N.deactivatedPanelName],t=N.getPanel();h(e,t)}),m(),v(),a.addPanelEvents(_),g(_),t.event("afterLayout").add(m);var n=new o(e("#orb-panel-more .orb-panel-content li"));n.setLocation(e.fig.isUk()?"d":"w"),m()})}return a}),define("orb/features/_footer",["orb/lib/_$","orb/features/footer/_desktopmobilelink","orb/features/masthead/_linkmanager"],function(e,t,n){"use strict";function r(){e.ready(function(){var r=e.fig.isUk()?"d":"w",o="orb-location-"+r,a=e("#orb-footer")[0],i=new n(e("#orb-footer li"));i.setLocation(r),e.addClass(a,o),t()})}return r}),define("orb/features/_istatstracking",["orb/lib/_$"],function(e){"use strict";return function(){require(["istats-1"],function(t){e.ready(function(){t.track("internal",{region:e(".orb-nav-blocks")[0],linkLocation:"blq-mast-home-gvl4"}),t.track("internal",{region:e("#orb-nav-links"),linkLocation:"blq-nav-main-gvl4"}),t.track("internal",{region:e("#orb-aside"),linkLocation:"blq-foot-gvl4"}),t.track("internal",{region:e("#orb-footer"),linkLocation:"blq-foot-gvl4"}),t.track("external",{region:e("body")[0]}),t.track("download",{region:e("body")[0]})})})}}),define("orb/features/_masthead",["orb/features/masthead/_widgetmanager","orb/features/masthead/_drawer","orb/features/masthead/_menu"],function(e,t,n){"use strict";var r={};return r.widgetmanager=e,r.Panel=t,r.Menu=n,function(){return r}}),define("orb/features/_mastheadimages",["orb/lib/_$","orb/features/_masthead","orb/features/masthead/_widgetmanager","orb/features/_pngtogif"],function(e,t,n,r){"use strict";var o=[],a="data-activesrc",i=[],s=!1,c=function(t){var n,r;if(r=e.getAttr(t,a)){n=t.cloneNode(!0),n.src=r;for(var s=0,c=i.length;c>s;s++)if(o[s]===t)return i[s]===n?void 0:void(i[s]=n);i.push(n),o.push(t)}},u=function(){var t=e(".orb-nav-theme-dynamic");r(e(".orb-nav-blocks img, #orb-aside h2 img"));for(var n=0,o=t.length;o>n;n++)c(t[n]);s=!0},l=function(){var e=null,t=null;s||u();for(var n=0,r=o.length;r>n;n++)e=o[n],t=i[n],e.parentNode.replaceChild(t,e),i[n]=e,o[n]=t};e.ready(function(){s||u()});var d=function(){var t=e("#orb-header")[0],r="orb-nav-active";n.onAnyActive=function(n){e.hasClass(t,r)||(e.addClass(t,r),l())},n.onNoneActive=function(n){e.hasClass(t,r)&&(e.removeClass(t,r),l())}};return d.precacheImage=c,d}),define("orb/features/_pngtogif",["orb/lib/_$"],function(e){"use strict";return function(t){var n,r,o;if(e.client.ie6){o=/\.png$/;for(var a=0,i=t.length;i>a;a++)n=t[a],r=e.getAttr(n,"data-activesrc"),n.src=n.src.replace(o,".gif"),r&&e.setAttr(n,"data-activesrc",r.replace(o,".gif"))}}}),define("orb/features/_searchhint",["orb/lib/_$"],function(e){"use strict";return function(){var t="placeholder"in document.createElement("input");if(!t){var n=e("#orb-search-q")[0],r=e("#orb-search-form")[0],o=e.getAttr(n,"placeholder");e.ready(function(){e.addEvent(n,"focusout",function(e){""===n.value&&(n.value=o)}),e.addEvent(n,"focusin",function(e){n.value===o&&(n.value="")}),e.addEvent(r,"submit",function(e){n.value===o&&(n.value="")}),n.value||document.activeElement===n||(n.value=o)})}}}),define("orb/features/_skiplinks",["orb/lib/_$"],function(e){"use strict";return function(){e.ready(function(){var t=e(".orb-skip-links")[0],n=function(t){var n=t.target||t.srcElement,r=n.getAttribute("href").match(/^(#.+)/),o=(r?e(r[1]):[])[0];o&&((null===o.tabIndex||-1===o.tabIndex)&&(o.tabIndex=-1),o.focus())},r=function(t){var n=t.target||t.srcElement,r="touch-active",o=600;e.addClass(n,r),setTimeout(function(){e.removeClass(n,r)},o)};e.addEvent(t,"touchend",r),e.addEvent(t,"mousedown",r),e.addEvent(t,"click",n)})}}),define("orb/nav",["orb/lib/_$","orb/features/_drawerManager","orb/features/masthead/_drawer","orb/features/masthead/_layoutprimarynav"],function(e,t,n){"use strict";var r={loadCss:function(e,t){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,"function"==typeof t&&(n.onload=t),document.getElementsByTagName("head")[0].appendChild(n)},addDrawer:function(r,o,a,i){var s=e("#orb-panels")[0];s.appendChild(a);var c=new n.Panel(r,{control:o,content:a},i);t.getMastheadDrawer().addPanel(c),t.addPanelEvents(c)},getDrawerState:function(e){var n=t.getMastheadDrawer(),r=n.getCurrentPanel();return null===r||r.name!=e?"hidden":"shown"},updateDrawerHeight:function(e){var n=t.getMastheadDrawer();n.resize(e)}};return r}),require(["orb/_map","orb/features/_skiplinks","orb/features/_configureid","orb/features/_mastheadimages","orb/features/_footer","orb/features/masthead/_layoutprimarynav","orb/features/_drawerManager","orb/features/_searchhint","orb/features/_configuresearch","orb/features/_istatstracking"],function(){"use strict";for(var e=0,t=arguments.length;t>e;e++)arguments[e]()});