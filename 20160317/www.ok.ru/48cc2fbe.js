define(["OK/logger"],function(p){var m=document,e,b,q="h-mod",g="href",l="data-module",j="data-activate",d="activate",i="OK/",o=[],f=function(r){var u,s,t;if(r.id&&r.id.indexOf("hook_")===0){s=r.id.substr(5);t=s.substr(0,s.indexOf("_"));if(t!=="Block"){p.success("capture.gwt",t,e);}}u=r.firstChild;while(u){f(u);u=u.nextSibling;}},a=function(v){var t,r,s;try{t=Array.prototype.slice.call(v);}catch(u){s=v.length;if(s>0){t=new Array(s);for(r=0;r<s;r+=1){t[r]=v[r];}}else{t=[];}}return t;},k=function(r){var t=r.getAttribute(j)||d;return function s(v){var u;if(typeof v==="function"){u=new v(r.id);}else{u=v;}u[t](r);o.push(u);};},c=function(t,r){var u,s;r=i+r;u=k(t);if(require.defined(r)){s=require(r);u(s);}else{require([r],u);}},h=function(x){var y,A,r,u,z,v,t,s,w;x=x||m;y=x.getElementsByClassName(q);r=a(y);u=r.length;for(z=0;z<u;z+=1){t=r[z];s=t.getAttribute(l);if(s){c(t,s);}}if(b){A=x.getElementsByTagName("a");r=a(A);u=r.length;for(z=0;z<u;z+=1){t=r[z];w=t.getAttribute(g);if(w){for(v=0;v<b.length;v+=1){s=b[v];if(w&&(w.indexOf("cmd="+s)!==-1)){c(t,s);}}}}}if(e){f(x);}},n=function(r){if(m.readyState==="interactive"||m.readyState==="complete"){h(r);}else{m.addEventListener("DOMContentLoaded",h);}};return{activate:n,activateDocument:function(r,s){b=r;e=s;n();}};});