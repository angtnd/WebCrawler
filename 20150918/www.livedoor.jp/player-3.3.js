function EmersePlayer(a,b){this.id=a,this.options=b,this.callbacks=[],this.clickPixels=[],this.conversionPixels=[],this.progress=[],this.conversion=!1,this.conversionTracking=!1,this.retentionTracking=!1}EmersePlayer.prototype.addCallback=function(a){this.callbacks.push(a)},EmersePlayer.prototype.addPixel=function(a,b){switch(b){case"click":this.clickPixels.push(a);break;default:case"conversion":this.conversionPixels.push(a);break;case"impression":this.createPixel(a)}},EmersePlayer.prototype.createPixel=function(a){var b=this.getParam("param")||new String(window.location.hash).substring(1),c=this.getParam("ord")||(new Date).getTime();a=a.replace("%param%",b),a=a.replace("%time%",c);var d=document.createElement("img");d.src=a,d.alt="",document.body.appendChild(d)},EmersePlayer.prototype.enableConversionTracking=function(){this.conversionTracking=!0},EmersePlayer.prototype.enableRetentionTracking=function(){this.retentionTracking=!0},EmersePlayer.prototype.getParam=function(a){for(var b=window.location.hash.substring(1).split("&"),c=0;c<b.length;c++){var d=b[c].split("=");if(d[0]==a)return decodeURIComponent(d[1])}return null},EmersePlayer.prototype.eventPoll=function(a,b){var c=((new Date).getTime()-this.timeStarted.getTime())/1e3+5;if(c>a){var d=10*Math.floor(a/b*10);if(!this.progress[d]&&this.retentionTracking&&(this.createPixel("//track.emerse.com/track.php?id="+this.id+"&cb=%time%&r="+d),this.progress[d]=!0),a/b>=this.options.conversion&&!this.conversion&&this.conversionTracking){this.createPixel("//track.emerse.com/track.php?id="+this.id+"&cb=%time%");for(var e=0;e<this.conversionPixels.length;e++)this.createPixel(this.conversionPixels[e]);for(var e=0;e<this.callbacks.length;e++)this.callbacks[e]();null!=this.getParam("conversion")&&this.createPixel(this.getParam("conversion")),this.conversion=!0}}},EmersePlayer.prototype.eventPlay=function(){if(null!=this.getParam("click")&&this.createPixel(this.getParam("click")),"undefined"==typeof this.timeStarted){for(var a=0;a<this.clickPixels.length;a++)this.createPixel(this.clickPixels[a]);this.timeStarted=new Date}};