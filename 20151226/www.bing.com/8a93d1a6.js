var HomepageApp;(function(){function n(n,t){t===void 0&&(t="");var i=sj_ce("div",t);return i.className=n,i}function k(n){n.style.visibility=ut}function st(){var n=_ge("hol_share_ctrls");n&&(n.style.visibility=g,n.style.opacity="1")}function ht(){var n=_ge("hol_share_ctrls");n&&(sb_st(sj_wf(k,n),nt),n.style.opacity="0")}function ct(){if(_H.hol15.def){var n=_ge("holGreeting");n.style.display=f}}function lt(){if(_H.hol15.def){var n=_ge("holGreeting");n.style.display=r}}function at(){for(w=!1,_w.g_hsC&&g_hsC.enable(),u.style.width=null,c.style.display=f,l.style.display=r,e&&(e.style.display=r),o.style.display=r,v.style.display=r,s.style.display=r,a.style.display=r;t.length>0;)t[0].toggle();lt();ht();dt()}function it(){w=!0;_w.g_hsC&&g_hsC.disable();var n=_w.g_vidOn?"240":"200";u.style.width=n+"px";c.style.display=r;l.style.display=f;e&&(e.style.display=f);o.style.display=f;v.style.display=f;s.style.display=f;a.style.display=f;d();ct();st();kt()}function y(n){n.toggle()}function vt(n){n.disable(!1)}function d(){var n=_ge("firstRunNotif");n&&n.style.display!==r&&localStorage.setItemE("holidayFirstRunNotif",1,43200);yt()}function yt(){var n=_ge("firstRunNotif");n&&(n.style.display=r)}function pt(){var u=n("fader","hol_share_ctrls"),t=sj_ce("a"),f,o,s;t.className="shareLink";t.target="_blank";t.href="https://www.facebook.com/dialog/feed?app_id=111239619098&link="+encodeURIComponent("http://binged.it/21KiHaO")+"&picture="+encodeURIComponent("https://www.bing.com/az/hprichbg/app/hol2015/FB_share_RC1.png")+"&name="+encodeURIComponent(_H.hol15.fbc)+"&caption=www.bing.com&description="+encodeURIComponent(_H.hol15.fbt)+"&redirect_uri=http%3A%2F%2Fwww.bing.com%2F";sj_be(t,i,function(){hp_log("Show","HP","Hol2015FBShare",!1)});f=n("hol_btn hol_share_btn","facebook_btn");t.appendChild(f);var e=_H.hol15.ssd,h=_H.hol15.twt+" http://www.bing.com/?FORM=HPHOL15T"+(e?"&ssd="+e:""),r=sj_ce("a");r.className="shareLink";r.target="_blank";r.href="https://twitter.com/intent/tweet?original_referer=http%3A%2F%2Fbing.com&source=tweetbutton&text="+encodeURIComponent(h)+"&hashtags=BingPostcard";sj_be(t,i,function(){hp_log("Show","HP","Hol2015TWShare",!1)});o=n("hol_btn hol_share_btn","twitter_btn");r.appendChild(o);u.appendChild(t);u.appendChild(r);s=_ge("hp_container");s.appendChild(u)}function wt(){var r=localStorage.getItemE("holidayFirstRunNotif"),i;if(r!==1){if(i=_ge("sh_rdiv"),!i)return;var u=n("hLine"),e=n("vLine"),t=sj_ce("div","firstRunNotif");t.innerHTML=_H.hol15.fr;t.appendChild(u);t.appendChild(e);i.appendChild(t);t.style.display=f;sj_evt.bind("hpsbact",d);sj_evt.bind("onCardShow",d)}}function bt(n){var r,i,t;if(_H.hol15.def)for(r=_ge("hp_container"),_G.Mkt!=="zh-CN"&&(i=sj_ce("div","holGreeting"),i.innerHTML=_H.hol15.greet,r.appendChild(i)),it(),t=0;t<n.length;t++)n[t].toggle()}function kt(){var r=_ge("holidayTiles"),t=_ge("crs_pane_hidden"),i,n;hp_addclass(sj_b,"holcrs");sb_st(function(){var n=_ge("caroTabs");n&&k(n)},b);r&&t&&(i=_ge("crs_scroll"),n=_ge("crs_pane"),i&&n&&(n.style.opacity="0",n.style.left="-200px",t.style.opacity="0",t.style.left="200px",sb_st(sj_wf(rt,n,t),b)))}function dt(){var u=_ge("holidayTiles"),t=_ge("crs_pane_hidden"),i=_ge("caroTabs"),r,n;i&&(i.style.visibility="visible");hp_removeclass(sj_b,"holcrs");u&&t&&(r=_ge("crs_scroll"),n=_ge("crs_pane"),r&&n&&(n.style.opacity="0",n.style.left="200px",t.style.opacity="0",t.style.left="-200px",sb_st(sj_wf(rt,n,t),b)))}function rt(n,t){var i=_ge("crs_scroll"),r=_ge("holidayTiles");if(i&&r){r.appendChild(n);n.id="crs_pane_hidden";i.appendChild(t);t.id="crs_pane";function u(n){n.style.opacity="1";n.style.left="0px"}sb_st(sj_wf(u,t),1)}}function gt(){var i=_ge("crs_pane"),n=_ge("crs_pane_hidden"),t;i&&n&&(hp_addclass(i,"caroFader"),n.style.opacity="0",n.style.width="3234px");t=_ge("caroTabs");t&&hp_addclass(t,"fader")}function ni(){var nt=_ge("sh_rdiv"),d=_ge("sh_psv"),rt=_ge("sh_igl"),ut=d?d:rt,t,r,f,g,p,w,b,k;u=sj_ce("div","hol_buttons");c=n(h,"toggle_on_btn");l=n(h,"toggle_off_btn");o=n(h,"jingle_btn");o.title="Jingle bells (Â© Getty Images)";v=n(h,"lights_btn");s=n(h,"snow_btn");a=n(h,"frost_btn");a.title="Frost (Â© Anneka/Shutterstock)";sj_be(c,i,it);sj_be(l,i,at);t=new tt("lights");sj_be(v,i,sj_wf(y,t));r=new tt("frost");sj_be(a,i,sj_wf(y,r));f=new ft;sj_be(s,i,sj_wf(y,f));g=new et;sj_be(o,i,sj_wf(y,g));_w.g_vidOn&&(e=n(h,"yule_btn"),p=new ot,sj_be(e,i,sj_wf(y,p)),w=_ge("sh_igl"),b=_ge("sh_igr"),w&&b&&(k=sj_wf(vt,p),sj_be(w,i,k),sj_be(b,i,k)));u.appendChild(a);u.appendChild(s);u.appendChild(v);u.appendChild(o);_w.g_vidOn&&u.appendChild(e);u.appendChild(l);u.appendChild(c);sj_be(c,i,function(){hp_log("Show","HP","Hol2015Enable",!1)});sj_be(l,i,function(){hp_log("Show","HP","Hol2015Disable",!1)});nt.insertBefore(u,ut);pt();wt();bt([r,f,t]);gt()}var u,c,l,e,o,v,s,a,w=_G.Mkt==="zh-CN",r="none",f="block",i="click",h="hol_btn",ut="hidden",g="visible",p="px",nt=1e3,b=300,t=[],tt=function(){function i(t){var i=_w.screen,r=i.width>i.height?i.width:i.height,u,f,e,o,s,h,c;this.prefix=t;this.container=n("fader",t+"_ctnr");this.bottom=n(t+"_sprite frame_bottom fader");this.bottom.style.width=r+p;this.top=n(t+"_sprite frame_top fader");this.top.style.width=r+p;u=n(t+"_sprite frame_left ");u.style.width=r+p;f=n(t+"_sprite frame_right ");f.style.width=r+p;this.container.appendChild(u);this.container.appendChild(f);e=_ge("hp_container");e&&e.appendChild(this.container);o=_ge("hp_ctrls");s=_ge("sh_rdiv");o&&s&&o.insertBefore(this.bottom,s);h=_ge("hp_container");c=_ge("hp_bottomCell");h&&c&&h.insertBefore(this.top,c);this.enabled=!1}return i.prototype.enable=function(){this.top.style.opacity="1";this.bottom.style.opacity="1";this.container.style.opacity="1";var n=_ge(this.prefix+"_btn");n&&hp_addclass(n,"hol_active");t.push(this)},i.prototype.disable=function(){var n,i;this.top.style.opacity="0";this.bottom.style.opacity="0";this.container.style.opacity="0";n=_ge(this.prefix+"_btn");n&&hp_removeclass(n,"hol_active");i=t.indexOf(this);t.splice(i,1)},i.prototype.toggle=function(){this.enabled?(this.enabled=!1,this.disable()):(this.enabled=!0,this.enable())},i}(),ft=function(){function i(){var t,f,i,e,r,o,u,s,h;this.enabled=!1;this.container=n("fader","snow_ctnr");t=n("snow_dom_slice snow_fall snow_01");f=n("snow_drifter drift_01");t.appendChild(f);i=n("snow_dom_slice snow_fall snow_02");e=n("snow_drifter drift_02");i.appendChild(e);r=n("snow_dom_slice snow_fall snow_03");o=n("snow_drifter drift_03");r.appendChild(o);u=n("snow_dom_slice snow_fall snow_04");s=n("snow_drifter drift_04");u.appendChild(s);this.container.appendChild(t);this.container.appendChild(i);this.container.appendChild(r);this.container.appendChild(u);h=_ge("hp_container");h.appendChild(this.container)}return i.prototype.enable=function(){this.container.style.visibility=g;this.container.style.opacity="1";hp_addclass(s,"hol_active");t.push(this)},i.prototype.disable=function(){sb_st(sj_wf(k,this.container),nt);this.container.style.opacity="0";hp_removeclass(s,"hol_active");var n=t.indexOf(this);t.splice(n,1)},i.prototype.toggle=function(){this.enabled?(this.enabled=!1,this.disable()):(this.enabled=!0,this.enable())},i}(),et=function(){function n(){this.audio=sj_ce("audio","jingle");this.audio.autoplay=!1;this.audio.loop=!0;this.audio.volume=.3;this.audio.src="//az12410.vo.msecnd.net/homepage/app/hol2015/539490_XmasBells.mp3";var n=_ge("hp_container");n.appendChild(this.audio)}return n.prototype.enable=function(){this.audio.play();hp_addclass(o,"hol_active");t.push(this)},n.prototype.disable=function(){this.audio.pause();hp_removeclass(o,"hol_active");var n=t.indexOf(this);t.splice(n,1)},n.prototype.toggle=function(){this.enabled?(this.enabled=!1,this.disable()):(this.enabled=!0,this.enable())},n}(),ot=function(){function n(){var r,t;this.contentRoot="//az12410.vo.msecnd.net/homepage/app/YuleLog2014";this.copyrightText="Â© Stephen Marks/Getty Images";this.titleStrings=["Happy Holidays","Joyeuses FÃªtes","Felices Fiestas","å¬ã®ãæ¨æ¶","Frohe Feiertage","Seasonâs Greetings","æ¥èªå¬æ¥çé®å","Boas Festas"];this.titleText=this.titleStrings.join("&nbsp;&middot;&nbsp;");var i=_ge("hp_cellCenter"),u=i&&hp_hasclass(i,"hp_hd"),n=u?"1080":"768";this.posterImageUrl=this.contentRoot+"/"+n+"/Fireplace_GettyRR_98571085_"+n+".jpg";this.videoSrcUrl=this.contentRoot+"/"+n+"/Fireplace_GettyRR_98571085_"+n+".mp4";this.audio=sj_ce("audio","yule_audio");this.audio.autoplay=!1;this.audio.loop=!0;this.audio.volume=.3;this.audio.src=this.contentRoot+"/audio/CozyFireplace_GettyRR_553682_96kbps.mp3";this.video=sj_ce("video","yule_video");sj_be(_w,"resize",sj_wf(this.resizeVideo,this.video));r=_ge("hp_container");r.appendChild(this.audio);t=_ge("bgDiv");t&&t.appendChild(this.video)}return n.prototype.resizeVideo=function(n){var t=_ge("vid");t&&(n.style.top=t.style.top,n.style.left=t.style.left)},n.prototype.posterImageLoadHandler=function(n,t,i,r){var u=_ge("bgDiv");u&&u.style&&(this.currentImageUrl=u.style.backgroundImage,u.style.backgroundImage="url("+t+")",sj_be(n,"canplaythrough",r),n.src=i)},n.prototype.videoLoadHandler=function(n,t,i){(sj_ue(n,"canplaythrough",i),w)&&(n.style.display=f,n.style.opacity="1",n.play(),t.play())},n.prototype.enable=function(){var n,i,u,h;this.enabled=!0;n=_ge("bgDiv");n&&n.style&&(this.currentImageUrl=n.style.backgroundImage);i=_ge("vid");i&&i.src&&_w.VM&&(VM.pause(),i.style.display=r);this.video.autoplay=!1;this.video.loop=!0;u=new Image;h=sj_wf(this.videoLoadHandler,this.video,this.audio,this.videoLoadHandler);sj_be(u,"load",sj_wf(this.posterImageLoadHandler,this.video,this.posterImageUrl,this.videoSrcUrl,h));u.src=this.posterImageUrl;var c=_ge("musCard"),f=_ge("musCardImageTitle"),o=_ge("musCardCopyright"),s=_ge("musCardImageLink");c&&f&&o&&s&&(this.museumCardCaption=f.innerHTML,this.museumCardCopyright=o.innerHTML,this.museumCardHref=s.getAttribute("href"),hp_addclass(c,"musCardOverride"),s.removeAttribute("href"),f.innerHTML=this.titleText,o.innerHTML=this.copyrightText);hp_addclass(e,"hol_active");t.push(this);this.enabled=!0},n.prototype.disable=function(n){var i,u,l;n===void 0&&(n=!0);this.enabled=!1;i=_ge("bgDiv");i&&i.style&&n&&(i.style.backgroundImage=this.currentImageUrl?this.currentImageUrl:"");this.currentImageUrl=null;this.audio.pause();this.video.pause();this.video.style.display=r;this.video.style.opacity="0";u=_ge("vid");u&&u.src&&_w.VM&&(VM.play(),u.style.display=f);var o=_ge("musCard"),s=_ge("musCardImageTitle"),h=_ge("musCardCopyright"),c=_ge("musCardImageLink");o&&s&&h&&c&&n&&(s.innerHTML=this.museumCardCaption,h.innerHTML=this.museumCardCopyright,c.setAttribute("href",this.museumCardHref));this.museumCardCopyright=null;this.museumCardHref=null;this.museumCardCaption=null;o&&hp_removeclass(o,"musCardOverride");hp_removeclass(e,"hol_active");l=t.indexOf(this);t.splice(l,1)},n.prototype.toggle=function(){this.enabled?this.disable():this.enable()},n}();sj_evt.bind("onRBComplete",ni,1)})(HomepageApp||(HomepageApp={}))