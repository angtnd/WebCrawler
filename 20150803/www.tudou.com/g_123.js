/**
 * @modified $Author: hhfu $
 * @version $Rev: 79f6627711678347bb5a43e152dfe8fd217ca3bc $
 */
!function($){require.config({enable_ozma:true});if("object"!==typeof JSON)JSON={};!function(){"use strict";function f(t){return t<10?"0"+t:t}if("function"!==typeof Date.prototype.toJSON){Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){escapable.lastIndex=0;return escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"===typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,a,o,r=gap,s,u=e[t];if(u&&"object"===typeof u&&"function"===typeof u.toJSON)u=u.toJSON(t);if("function"===typeof rep)u=rep.call(e,t,u);switch(typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";gap+=indent;s=[];if("[object Array]"===Object.prototype.toString.apply(u)){o=u.length;for(i=0;i<o;i+=1)s[i]=str(i,u)||"null";a=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+r+"]":"["+s.join(",")+"]";gap=r;return a}if(rep&&"object"===typeof rep){o=rep.length;for(i=0;i<o;i+=1)if("string"===typeof rep[i]){n=rep[i];a=str(n,u);if(a)s.push(quote(n)+(gap?": ":":")+a)}}else for(n in u)if(Object.prototype.hasOwnProperty.call(u,n)){a=str(n,u);if(a)s.push(quote(n)+(gap?": ":":")+a)}a=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+r+"}":"{"+s.join(",")+"}";gap=r;return a}}if("function"!==typeof JSON.stringify)JSON.stringify=function(t,e,i){var n;gap="";indent="";if("number"===typeof i)for(n=0;n<i;n+=1)indent+=" ";else if("string"===typeof i)indent=i;rep=e;if(e&&"function"!==typeof e&&("object"!==typeof e||"number"!==typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})};if("function"!==typeof JSON.parse)JSON.parse=function(text,reviver){var j;function walk(t,e){var i,n,a=t[e];if(a&&"object"===typeof a)for(i in a)if(Object.prototype.hasOwnProperty.call(a,i)){n=walk(a,i);if(void 0!==n)a[i]=n;else delete a[i]}return reviver.call(t,e,a)}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return"function"===typeof reviver?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}();define("lib/json2",JSON);define("tui/random",[],function(t,e){function i(){var t=4022871197;var e=function(e){e=e.toString();for(var i=0;i<e.length;i++){t+=e.charCodeAt(i);var n=.02519603282416938*t;t=n>>>0;n-=t;n*=t;t=n>>>0;n-=t;t+=4294967296*n}return 2.3283064365386963e-10*(t>>>0)};e.version="Mash 0.9";return e}function n(){return function(t){var e=4294967087;var n=4294944443;var a=12345,o=12345,r=123,s=12345,u=12345,c=123;if(0===t.length)t=[+new Date];var l=i();for(var d=0;d<t.length;d++){a+=4294967296*l(t[d]);o+=4294967296*l(t[d]);r+=4294967296*l(t[d]);s+=4294967296*l(t[d]);u+=4294967296*l(t[d]);c+=4294967296*l(t[d])}a%=e;o%=e;r%=e;s%=n;u%=n;c%=n;l=null;var f=function(){var t=4294967087;var e=4294944443;var i=1403580;var n=810728;var l=527612;var d=1370589;var f,m,p;m=i*o-n*a;f=0|m/t;m-=f*t;if(m<0)m+=t;a=o;o=r;r=m;p=l*c-d*s;f=0|p/e;p-=f*e;if(p<0)p+=e;s=u;u=c;c=p;if(m<=p)return m-p+t;else return m-p};var m=function(){return 2.3283064365386963e-10*f()};m.uint32=f;m.fract53=function(){return m()+1.1102230246251565e-16*(2097151&f())};m.version="MRG32k3a 0.9";m.args=t;return m}(Array.prototype.slice.call(arguments))}function a(t,e){e="undefined"==typeof e?"":e;var i=new n(t||0,location.href,Date.now());return e+(+new Date).toString(32)+parseInt(1e5*i()).toString(32)}e.rand=a});define("tui/class",[],function(){function t(){return function(){if(this.initialize)this.initialize.apply(this,arguments)}}function e(e,i){var n=this;var a=t();$.extend(a,n,i);var o=Object.create(n.prototype);o.constructor=a;a.prototype=o;$.extend(a.prototype,e);a.superClass=n.prototype;return a}var i=function(i){var n=t();$.extend(n.prototype,i);n.extend=e;return n};i.extend=e;return i});define("tui/event",["tui/class"],function(t){var e=t({initialize:function(){this.__event=window.Zepto?new window.Zepto.Events:$({})}});var i=e.prototype;["bind","one"].forEach(function(t){i[t]=function(e,i,n){if($.isPlainObject(e))for(var a in e)this[t](a,e[a]);else{var o=this.__event;var r=function(){return i.apply(n||o,arguments.length>0?window.Zepto?arguments:Array.prototype.slice.call(arguments,1):[])};o[t].call(o,e,r);i.guid=r.guid}return this}});["unbind","trigger","triggerHandler"].forEach(function(t){i[t]=function(){var e=this.__event;if(require.debug)console.log("[event] "+this.constructor.__mid+" : "+arguments[0],arguments[1]);var i=e[t].apply(e,arguments);if(require.debug&&i!=e&&void 0!=i)console.log(i);return i}});i.fire=i.trigger;i.firing=i.triggerHandler;e.mix=function(t){return $.extend(t,new e)};return e});define("tui/cookie",[],function(){return function(t,e,i,n){if("string"==typeof t){n=i;i=e;e=t;t=window}if(void 0!==i){n=n||{};var a,o="";if(n.expires){if(n.expires.constructor==Date)a=n.expires;else{a=new Date;a.setTime(a.getTime()+1e3*60*60*24*n.expires)}o="; expires="+a.toGMTString()}var r=n.path?"; path="+n.path:"";var s=n.domain?"; domain="+n.domain:"";var u=n.secure?"; secure":"";t.document.cookie=[e,"=",encodeURIComponent(i),o,r,s,u].join("")}else{i=t.document.cookie.match(new RegExp("(?:\\s|^)"+e+"\\=([^;]*)"));return i?decodeURIComponent(i[1]):null}}});define("module/stat/common",["tui/cookie","tui/event","tui/random"],function(t,e,i,n,a){var o={UL:1,OL:2,LI:3,INPUT:4,DIV:5,BODY:6,STRONG:7,SPAN:8,FORM:9,BUTTON:10,CAPTION:11,FIELDSET:12,COLGROUP:13,TFOOT:14,LABEL:15,LEGEND:16,THEAD:17,OPTGROUP:18,OPTION:19,SELECT:20,TABLE:21,TBODY:22,IFRAME:0,SCRIPT:0,OBJECT:0,EMBED:0,IMG:0};function r(){return i.rand(t("u_id"))}function s(){var e=t("juid");if(!e){e=i.rand(t("u_id"),"0");t("juid",e,{expires:365*100,domain:"tudou.com",path:"/"});e=t("juid")||1}window.juidStr=e;return e}function u(){var e=t("seid");if(!e||+new Date>(parseInt(t("seidtimeout"))||0)){e=i.rand(t("u_id"),"0");t("seid",e,{domain:"tudou.com",path:"/"});e=t("seid")||1}var n=t("referhost");if(!n||+new Date>(parseInt(t("seidtimeout"))||0)){var a=/^https?:\/\/[^\/]+/.exec(document.referrer||"");n=a?a[0]:"";t("referhost",n,{domain:"tudou.com",path:"/"})}t("seidtimeout",Date.now()+30*6e4,{domain:"tudou.com",path:"/"});return e}function c(t){t=$(t)[0];var e=[];if(t.id)return"#"+t.id;for(;t;t=t.parentNode){var i=t.nodeName.toUpperCase();if("BODY"==i)break;if(t.id&&"i"!=t.getAttribute("cs")){e.splice(0,0,"#"+t.id);return e.join("~")}var n=0;for(var a=t.previousSibling;a;a=a.previousSibling){var r=a.nodeName.toUpperCase();if(0===o[r])continue;if(r==i)++n}i=o[i]||i;var s=n?"!"+(n+1):"";e.splice(0,0,i+s)}return e.length?e.join("~"):null}function l(t){var e=$(t).attr("href")||$(t).attr("data-stat-href");if(!e)return"";if(/^(javascript:|#)/i.test(e))return"";e=$.trim(e);var i=location.href;var n=i.replace(/(https?:\/\/[^\/]+).*/,"$1");var a=n===i?n+"/":i.replace(/[#?].*/,"").replace(/[^\/]*$/,"");return e.replace(/^\.[\.\/]+/g,function(t){var e=(t.match(/\.\.\//g)||[]).length;for(var i=0;i<e;i++)a=a.replace(/[^\/]+\/$/,"");return a}).replace(/&amp;/g,"&").replace(/^\//,n+"/").replace(/^[^\h\/]/,a+"$&")}function d(t){var e={A:1,INPUT:1,BUTTON:1};if("LABEL"==t.nodeName){var i;var n=$(t);var a=n.attr("for");if(a)i=$("input#"+a).get(0);if(!i){var o=n.find("input:first");if(o.length>0)i=o.get(0)}if(i)t=i}if(t.getAttribute&&"ck"==t.getAttribute("data-stat-role"))return t;else{var r=t.parentNode;try{if(r&&r.getAttribute&&"ck"==r.getAttribute("data-stat-role"))return r}catch(s){}}if(!e[t.nodeName]){t=t.parentNode||{};if(!e[t.nodeName])return false}return t}function f(t){if(!t)return t;if(0==t.indexOf("#"))t=t.replace(/\#([^~\s]+)~/,function(t,e){return'//*[@id="'+e+'"]~'});else t="~html~body~"+t;t=t.replace(/\!(\d+)/g,function(t,e){return"["+e+"]"});t=t.replace(/(~?)(\d+)(~|\[)/g,function(t,e,i,n){for(var a in o)if(o[a]==parseInt(i))return e+a+n;return t});t=t.replace(/~/g,"/");return t}function m(t){var e=document.evaluate(t,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);if(e.snapshotLength>0)return e.snapshotItem(0);return null}function p(t){var e=[];$.each(t,function(t,i){if(""!==i)e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))});return e.join("&")}function h(t,i){if(!i)e.mix(t);return $.extend(t,{__callbacks:[],addData:function(t){this.__callbacks.push(t)},getData:function(){var t=this;var e={};var i=arguments;t.__callbacks.forEach(function(n){var a=n.apply(t,i)||{};$.extend(e,a)});return e}})}a.referrer=document.referrer||"";a.updateRefer=function(t){a.referrer=t||location.href};a.getPositionCode=c;a.getTrueLink=l;a.getStatTarget=d;a.getXpathFromPositionCode=f;a.getElementByXPath=m;a.param=p;a.mix=h;a.juid=s;a.seid=u;a.pvid=r});define("module/domain",[],function(t,e){var i={main:"www.tudou.com",passport:"passport.tudou.com",ui:"ui.tudou.com",css:"css.tudouui.com",js:"js.tudouui.com",v:"v.tudou.com",login:"login.tudou.com",xn:"login.tudou.com",search:"www.soku.com/t",imake:"imake.tudou.com",ent:"ent.tudou.com",music:"music.tudou.com",movie:"movie.tudou.com",fun:"fun.tudou.com",cartoon:"cartoon.tudou.com",game:"game.tudou.com",lady:"lady.tudou.com",shop:"shop.tudou.com",sports:"sports.tudou.com",life:"life.tudou.com",edu:"edu.tudou.com",etc:"etc.tudou.com",fashion:"fashion.tudou.com",fortune:"fortune.tudou.com",tv:"tv.tudou.com",zy:"zy.tudou.com",news:"news.tudou.com",jilupian:"jilupian.tudou.com",health:"health.tudou.com",beauty:"beauty.tudou.com",it:"it.tudou.com",auto:"auto.tudou.com",message:"message.tudou.com",hint:"tip.tudou.soku.com/search_keys",minichannel:"www.tudou.com/my/channel",tui:"www.tudou.com/my/tui",playlist:"www.tudou.com/playlist",comment:"www.tudou.com/comments",adextensioncpt:"v2.tudou.com/tdct/commonadv.html",programstat:"istat.tudou.com",commentcode:"rd.tudou.com",tmversion:"tmversion.tudou.com",adextensionurl:"tdct.tudou.com/adcontrol/specialadv.html",dig:"dig.tudou.com",live:"istat.tudou.com",douwan:"douwan.tudou.com",mini:"mini.tudou.com",feedback:"feedback.tudou.com",tjpt:"tdrec.youku.com",cms:"cms.tudou.com",wa:"wa.tudou.com",cps:"cps.tudou.com",pay:"pay.tudou.com",vip:"vip.tudou.com",yun:"yun.tudou.com",hinty:"tip.soku.com/search_yun",hd:"hd.tudou.com",crp:"crp.tudou.com",danmu:"danmu.tudou.com",danmus:"service.danmu.tudou.com",gc:"gc.tudou.com",korea:"korea.tudou.com",activity:"activity.tudou.com",index:"index.tudou.com",zhibo:"live.tudou.com",wanhuo:"wanhuo.tudou.com",img:"u"+~~(4*Math.random()+1)+".tdimg.com"};var n={};function a(t){$.each(t,function(t,e){n[t]=n[t]||"http://"+e})}a(i);e.join=a;e.url=e.domain=n});define("tui/drag",["tui/event"],function(t){var e=$(window);function i(){if(window.getSelection)window.getSelection().removeAllRanges();else if(document.selection)document.selection.empty();return this}function n(t){t.preventDefault()}var a=t.extend({initialize:function(t,o){var r=this;o=o||{};var s=o.handler||t;a.superClass.initialize.call(r);r.limit=o.limit;r.bubble=o.bubble;r.isCustom=o.isCustom;r.enable2=true;r.state2=false;r.hasMove2=false;r.fx=r.fy=-1;r.x2=r.y2=r.mx2=r.my2=r.px2=r.py2=r.cx2=r.cy2=0;r.node2="string"==$.type(t)?$(t):t;r.container2=o.container||r.node2.parent();r.fixed2="fixed"==r.node2.css("position").toLowerCase();r.handler2="string"==$.type(s)?$(s):s;var u=r.handler2||r.node2;function c(t){t.preventDefault();if(!r.bubble||t.target==u[0]){r.start(t);if(u[0].setCapture)u[0].setCapture()}}u.bind("mousedown",c);function l(t){if(r.state2){r.state2=false;var i=t.pageX-r.mx2+r.x2-r.px2,a=t.pageY-r.my2+r.y2-r.py2;if(r.fixed2){i-=e.scrollLeft();a-=e.scrollTop()}if(r.limit){i=Math.max(i,r.cx2-r.px2);a=Math.max(a,r.cy2-r.py2);i=Math.min(i,r.cWidth-(r.px2-r.cx2)-r.dWidth);a=Math.min(a,r.cHeight-(r.py2-r.cy2)-r.dHeight)}r.x2=r.node2.offset().left;r.y2=r.node2.offset().top;r.trigger("drag:end",[i,a,t.pageX,t.pageY,r.node2,r.container2])}$(document).unbind("selectstart",n);if(u[0].releaseCapture)u[0].releaseCapture()}$(document).bind("mouseup",l);function d(t){if(r.state2&&r.enable2){if(!r.hasMove()&&t.pageX==r.fx&&t.pageY==r.fy);else r.hasMove2=true;var n=t.pageX-r.mx2+r.x2-r.px2,a=t.pageY-r.my2+r.y2-r.py2;if(r.fixed2){n-=e.scrollLeft();a-=e.scrollTop()}if(r.limit){n=Math.max(n,r.cx2-r.px2);a=Math.max(a,r.cy2-r.py2);n=Math.min(n,r.cWidth-(r.px2-r.cx2)-r.dWidth);a=Math.min(a,r.cHeight-(r.py2-r.cy2)-r.dHeight)}if(!r.isCustom)r.node2.css({left:n,top:a});i();r.trigger("drag:move",[n,a,t.pageX,t.pageY,r.node2,r.container2])}}$(document).bind("mousemove",d);r.cancel=function(){u.unbind("mousedown",c);$(document).unbind("mouseup",l);$(document).unbind("mousemove",d)}},start:function(t){var e=this;$(document).bind("selectstart",n);e.offsetParent2=e.node2.offsetParent();if(e.limit){e.cWidth=e.container2.outerWidth();e.cHeight=e.container2.outerHeight();e.pWidth=e.offsetParent2.outerWidth();e.pHeight=e.offsetParent2.outerHeight();e.dWidth=e.node2.outerWidth();e.dHeight=e.node2.outerHeight()}e.fx=t.pageX;e.fy=t.pageY;e.cx2=e.container2.offset().left;e.cy2=e.container2.offset().top;e.px2=e.offsetParent2.offset().left;e.py2=e.offsetParent2.offset().top;e.x2=e.node2.offset().left;e.y2=e.node2.offset().top;e.mx2=t.pageX;e.my2=t.pageY;e.state2=true;e.trigger("drag:start",[e.x2,e.y2,t.pageX,t.pageY,e.node2,e.container2]);return this},enable:function(){this.enable2=true;return this},disable:function(){this.enable2=false;return this},state:function(){return this.state2},hasMove:function(){return this.hasMove2}});return a});define("tui/template",[],function(t,e){e.ns=function(t,e,i){var n,a=i||window,o=t.split(".").reverse();while((n=o.pop())&&o.length>0){if("undefined"===typeof a[n])a[n]={};else if("object"!==typeof a[n])return false;a=a[n]}if("undefined"!==typeof e)a[n]=e;return a[n]};e.format=function(t,e){return t.replace(/<%\=(\w+)%>/g,function(t,i){return null!=e[i]?e[i]:""})};e.escapeHTML=function(t){t=t||"";var e={"<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","{":"&#123;","}":"&#125;","@":"&#64;"};return t.replace(/[<>'"\{\}@]/g,function(t){return e[t]})};e.substr=function(t,e,i){if(!t||"string"!==typeof t)return"";var n=t.substr(0,e).replace(/([^\x00-\xff])/g,"$1 ").substr(0,e).replace(/([^\x00-\xff])\s/g,"$1");return i?i.call(n,n):t.length>n.length?n+"...":n};e.strsize=function(t){return t.replace(/([^\x00-\xff]|[A-Z])/g,"$1 ").length};var i=this.document;e.tplSettings={_cache:{},evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};e.tplHelpers={mix:$.extend,escapeHTML:e.escapeHTML,substr:e.substr,include:n,_has:function(t){return function(i){return e.ns(i,void 0,t)}}};function n(t,a,o){var r,s=e.tplSettings,u=o?"#"+o:"";if(!/[\t\r\n% ]/.test(t)){r=s._cache[t+u];if(!r){var c=i.getElementById(t);if(c)r=s._cache[t+u]=n(c.innerHTML,false,o)}}else{var l="var __p=[];"+(o?"":"with(obj){")+"var mix=api.mix,escapeHTML=api.escapeHTML,substr=api.substr,include=api.include,has=api._has("+(o||"obj")+");"+"__p.push('"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(s.interpolate,function(t,e){return"',"+e.replace(/\\'/g,"'")+",'"}).replace(s.evaluate||null,function(t,e){return"');"+e.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');"+(o?"":"}")+"return __p.join('');";try{r=new Function(o||"obj","api",l)}catch(d){console.log("Could not create a template function: \n"+l)}}return!r?"":a?r(a,e.tplHelpers):r}e.convertTpl=n;e.reloadTpl=function(t){delete e.tplSettings._cache[t]}});define("tui/widget",["tui/event","tui/template"],function(t,e){function i(t,e){var i;var n;var a=t.split(" ");if(1==a.length){i=e;n=t}else{i=a.shift();n=a.join(" ")}return[i,n]}var n=t.extend({element:null,template:"<div></div>",eventType:"click",model:{},events:{},targetNode:$(document.body),renderMethod:"append",initialize:function(t){var e=this;t=t||{};n.superClass.initialize.call(e);e.model=$.extend(true,{},e.model);e.events=$.extend(true,{},e.events);$.each(["element","targetNode"],function(){"undefined"!==typeof t[this]&&(e[this]=$(t[this]))});$.each(["template","eventType","renderMethod"],function(){"undefined"!==typeof t[this]&&(e[this]=t[this])});$.each(["model","events"],function(){"undefined"!==typeof t[this]&&$.extend(e[this],t[this])})},find:function(t){return this.element.find(t)},delegate:function(t,e){var n=this;if("string"==$.type(t)&&$.isFunction(e)){var a={};a[t]=e;t=a}$.each(t,function(t,e){var a=function(t){if($.isFunction(e))return e.call(n,t);else return n[e](t)};var o=i(t,n.eventType);n.element.on(o[0],o[1],a)});return n},undelegate:function(t){var e=this;var n=i(t,e.eventType);e.element.off(n[0],n[1]);return e},render:function(t){var i=this;if(!i.element||!i.element[0])i.element=$(e.convertTpl(i.template,$.extend({getUrl:this.getUrl||a},t||i.model)));i.delegate(i.events);if(i.renderMethod)i.targetNode[i.renderMethod](i.element);return i},update:function(t){if(this.renderMethod)this.targetNode[this.renderMethod](e.convertTpl(this.template,$.extend({getUrl:this.getUrl||a},t)))}});function a(t){return t}return n});define("tui/mask",[],function(){var t=$('<div class="tui_mask">');var e;var i=$(window);var n=$(document);var a=$(document.body);var o=$.browser.msie&&$.browser.version<7;var r=4096;function s(){var e=Math.max(i.width(),n.width());var a=Math.max(i.height(),n.height());var s="absolute";var u=0;if($.browser.msie&&a>r){if(!o)s="fixed";else{u=i.scrollTop();if(u+r>a)u=a-r}a=r}t.css({position:s,top:u,width:e,height:a})}return{node:function(){return t},resize:function(){s()},show:function(n){i.bind("resize",s);if(o)i.bind("scroll",s);t.css("z-index",n||9e4);this.resize();if(!e){a.append(t);e=true}else t.show();return this},hide:function(n){i.unbind("resize",s);if(o)i.unbind("scroll",s);if(n){t.remove();e=false}else t.hide();return this},update:function(){s()},state:function(){return t.is(":visible")}}});define("tui/art",[],function(){var t=window;var e=function(t,i){return e["string"===typeof i?"compile":"render"].apply(e,arguments)};e.version="2.0.2";e.openTag="<%";e.closeTag="%>";e.isEscape=true;e.isCompress=false;e.parser=null;e.render=function(t,i){var n=e.get(t)||a({id:t,name:"Render Error",message:"No Template"});return n(i)};e.compile=function(t,n){var r=arguments;var s=r[2];var u="anonymous";if("string"!==typeof n){s=r[1];n=r[0];t=u}try{var c=o(t,n,s)}catch(l){l.id=t||n;l.name="Syntax Error";return a(l)}function d(i){try{return new c(i,t)+""}catch(o){if(!s)return e.compile(t,n,true)(i);return a(o)()}}d.prototype=c.prototype;d.toString=function(){return c.toString()};if(t!==u)i[t]=d;return d};var i=e.cache={};var n=e.helpers=function(){var t=function(e,i){if("string"!==typeof e){i=typeof e;if("number"===i)e+="";else if("function"===i)e=t(e.call(e));else e=""}return e};var i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"};var n=function(e){return t(e).replace(/&(?![\w#]+;|#\d+)|[<>"']/g,function(t){return i[t]})};var a=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)};var o=function(t,e){if(a(t))for(var i=0,n=t.length;i<n;i++)e.call(t,t[i],i,t);else for(i in t)e.call(t,t[i],i)};return{$include:e.render,$string:t,$escape:n,$each:o}}();e.helper=function(t,e){n[t]=e};e.onerror=function(e){var i="Template Error\n\n";for(var n in e)i+="<"+n+">\n"+e[n]+"\n\n";if(t.console)console.error(i)};e.get=function(n){var a;if(i.hasOwnProperty(n))a=i[n];else if("document"in t){var o=document.getElementById(n);if(o){var r=o.value||o.innerHTML;a=e.compile(n,r.replace(/^\s*|\s*$/g,""))}}return a};var a=function(t){e.onerror(t);return function(){return"{Template Error}"}};var o=function(){var t=n.$each;var i="break,case,catch,continue,debugger,default,delete,do,else,false"+",finally,for,function,if,in,instanceof,new,null,return,switch,this"+",throw,true,try,typeof,var,void,while,with"+",abstract,boolean,byte,char,class,const,double,enum,export,extends"+",final,float,goto,implements,import,int,interface,long,native"+",package,private,protected,public,short,static,super,synchronized"+",throws,transient,volatile"+",arguments,let,yield"+",undefined";var a=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g;var o=/[^\w$]+/g;var r=new RegExp(["\\b"+i.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g");var s=/^\d[^,]*|,\d[^,]*/g;var u=/^,+|,+$/g;var c=function(t){return t.replace(a,"").replace(o,",").replace(r,"").replace(s,"").replace(u,"").split(/^$|,+/)};return function(i,a,o){var r=e.openTag;var s=e.closeTag;var u=e.parser;var l=a;var d="";var f=1;var m={$data:1,$id:1,$helpers:1,$out:1,$line:1};var p={};var h="var $helpers=this,"+(o?"$line=0,":"");var v="".trim;var g=v?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"];var w=v?"if(content!==undefined){$out+=content;return content;}":"$out.push(content);";var b="function(content){"+w+"}";var _="function(id,data){"+"data=data||$data;"+"var content=$helpers.$include(id,data,$id);"+w+"}";t(l.split(r),function(t,e){t=t.split(s);var i=t[0];var n=t[1];if(1===t.length)d+=$(i);else{d+=x(i);if(n)d+=$(n)}});l=d;if(o)l="try{"+l+"}catch(e){"+"throw {"+"id:$id,"+"name:'Render Error',"+"message:e.message,"+"line:$line,"+"source:"+I(a)+".split(/\\n/)[$line-1].replace(/^[\\s\\t]+/,'')"+"};"+"}";l=h+g[0]+l+"return new String("+g[3]+");";try{var y=new Function("$data","$id",l);y.prototype=p;return y}catch(k){k.temp="function anonymous($data,$id) {"+l+"}";throw k}function $(t){f+=t.split(/\n/).length-1;if(e.isCompress)t=t.replace(/[\n\r\t\s]+/g," ").replace(/<!--.*?-->/g,"");if(t)t=g[1]+I(t)+g[2]+"\n";return t}function x(t){var i=f;if(u)t=u(t);else if(o)t=t.replace(/\n/g,function(){f++;return"$line="+f+";"});if(0===t.indexOf("=")){var a=0!==t.indexOf("==");t=t.replace(/^=*|[\s;]*$/g,"");if(a&&e.isEscape){var r=t.replace(/\s*\([^\)]+\)/,"");if(!n.hasOwnProperty(r)&&!/^(include|print)$/.test(r))t="$escape("+t+")"}else t="$string("+t+")";t=g[1]+t+g[2]}if(o)t="$line="+i+";"+t;S(t);return t+"\n"}function S(e){e=c(e);t(e,function(t){if(!m.hasOwnProperty(t)){C(t);m[t]=true}})}function C(t){var e;if("print"===t)e=b;else if("include"===t){p["$include"]=n["$include"];e=_}else{e="$data."+t;if(n.hasOwnProperty(t)){p[t]=n[t];if(0===t.indexOf("$"))e="$helpers."+t;else e=e+"===undefined?$helpers."+t+":"+e}}h+=t+"="+e+","}function I(t){return"'"+t.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}}}();return e});define("tui/browser",[],function(){var t=navigator.userAgent.toLowerCase();var e={ie6:$.browser.msie&&6==$.browser.version,html5:function(){var t=document.createElement("input");var e=document.createElement("video");return{h264:!!(e.canPlayType&&e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,"")),history:!!(window.history&&window.history.pushState&&window.history.popState),placeholder:"placeholder"in t}},lang:(navigator.language||navigator.systemLanguage).toLowerCase(),iOS:(t.match(/(ipad|iphone|ipod)/)||[])[0],iOSVersion:(t.match(/os\s+([\d_]+)\s+like\s+mac\s+os/)||[0,"0_0_0"])[1].split("_"),wphone:parseFloat((t.match(/windows\sphone\s(?:os\s)?([\d.]+)/)||["","0"])[1]),android:parseFloat((t.match(/android[\s|\/]([\d.]+)/)||["","0"])[1])};e.isMobile=!!e.iOS||!!e.wphone||!!e.android||void 0!==window.orientation||false;e.isPad=e.isMobile&&("ipad"==e.iOS||t.indexOf("mobile")==-1||t.indexOf("windows nt")!=-1&&t.indexOf("touch")!=-1)||false;return e});define("tui/dialog",["tui/browser","tui/art","tui/mask","tui/widget","tui/drag"],function(t,e,i,n,a){var o=$(window);var r=$.browser.msie&&$.browser.version<=7||!$.support.boxModel;var s=10002;var u='<div class="tui_dialog_button"><% for (var i = 0; i < buttons.length; i++) { %>'+'<a data-role="button_<%=i%>" href="#" <%if(buttons[i].className){%>class="<%=buttons[i].className%>"<%}%>><%=buttons[i].name%></a>'+"<% } %></div>";var c='<div class="tui_dialog <%=className%>"><div<% if (hasWrap) { %> class="tui_dialog_wrap"<% } %>><div class="tui_dialog_holder" data-role="holder">'+'<div class="tui_dialog_resize"></div>'+'<div class="tui_dialog_w_tp"></div><div class="tui_dialog_w_bm"></div>'+'<div class="tui_dialog_w_lf"></div><div class="tui_dialog_w_rt"></div>'+'<div class="tui_dialog_w_tl"></div><div class="tui_dialog_w_tr"></div>'+'<div class="tui_dialog_w_bl"></div><div class="tui_dialog_w_br"></div>'+'<div class="tui_dialog_header" data-role="header"><span class="tui_dialog_close" data-role="close" title="å³é­">å³é­</span>'+'<div class="tui_dialog_title" data-role="title"><%=title%></div><div class="tui_dialog_bar"><%=bar%></div></div>'+'<div class="tui_dialog_content" data-role="content"></div>'+'<% if (buttons.length > 0) { %><div class="tui_dialog_footer" data-role="footer">'+u+"</div><% } %>"+'<% if (info) { %><div class="tui_dialog_info"><%=info%></div><% } %>'+"</div></div></div>";var l=n.extend({events:{"click [data-role=close]":function(t){t.preventDefault();this.close()}},initialize:function(t){var i=this;var n={template:c,buttons:[],zIndex:s,hasDrag:true,hasMask:true,isFixed:true};t=$.extend(n,t||{});s=t.zIndex;var a=$.browser.msie&&parseFloat($.browser.version)<9;if("undefined"!=typeof t.hasWrap)a=t.hasWrap;var o={hasWrap:a,className:t.className||"tudou_dialog",title:t.title||"",bar:t.bar||"",info:t.info||"",buttons:t.buttons};t.element=$(e.compile(t.template)(o));l.superClass.initialize.call(this,t);i.dom={holder:i.element.find("[data-role=holder]"),header:i.element.find("[data-role=header]"),title:i.element.find("[data-role=title]"),content:i.element.find("[data-role=content]"),footer:i.element.find("[data-role=footer]"),close:i.element.find("[data-role=close]")};i.config=t;i.open();var r=function(t){if(27==t.keyCode){i.close();$(document).unbind("keydown",r)}};$(document).keydown(r)},title:function(t){this.dom.title.html(t);return this},content:function(t){this.dom.content.html(t);return this},open:function(){var t=this;var e=t.config;var n=t.element;var u=t.dom;n.css("z-index",s);s+=2;if(e.hasMask)i.show(n.css("z-index")-1);n.css("position",r||!e.isFixed?"absolute":"fixed");t.iframeMask=$("<iframe>",{src:"about:blank",frameborder:0,css:{border:"none","z-index":-1,position:"absolute",top:0,left:0,width:"100%",height:"100%"}}).prependTo(u.holder);t.content(e.content||"");$.each(e.buttons,function(e){t.events["[data-role=button_"+e+"]"]=this.callback});if(!t.element.parent()[0])t.render();t.element.show();t.locate();t.resizeLocate=function(e){t.locate()};o.bind("resize",t.resizeLocate);if(r&&e.isFixed){t.iefixScroll=function(e){t.locate()};o.bind("scroll",t.iefixScroll);t.iframeMask.css({height:u.holder.height()})}if(t.config.hasDrag)new a(n,{handler:u.header,limit:true});return t},close:function(t){var e=this;if(e.config.hasMask)i.hide(true);e.trigger("close",[e]);if(!t)e.element.find("iframe").remove();e.element[t?"hide":"remove"]();if(e.resizeLocate)o.unbind("resize",e.resizeLocate);if(e.iefixScroll){o.unbind("scroll",e.iefixScroll);e.iefixScroll=null}return e},locate:function(){var t=this;var e=Math.max(0,o.width()-t.element.width()>>1);if(!t.config.isFixed)var i=o.scrollTop()+(o.height()-t.element.height())/2;else var i=Math.max(0,o.height()-t.element.height()>>1)+(r?o.scrollTop():0);t.element.css({left:e,top:i});return t}});l.confirm=function(t,e){var i={};if($.isPlainObject(t)){i=t;t=i.msg;e=i.callback}return new l($.extend({className:"tudou_dialog alert",title:"åè±æç¤º",content:'<div class="tui_dialog_logo"></div><div class="tui_dialog_text">'+t+"</div>",hasMask:true,buttons:[{name:"ç¡®å®",callback:function(t){t.preventDefault();e&&e.call(this);this.close()}},{name:"åæ¶",callback:function(t){t.preventDefault();this.close()}}]},i))};l.alert=function(t,e){var i={};if($.isPlainObject(t)){i=t;t=i.msg;e=i.callback}return new l($.extend({className:"tudou_dialog alert",title:"åè±æç¤º",content:'<div class="tui_dialog_logo"></div><div class="tui_dialog_text">'+t+"</div>",hasMask:true,buttons:[{name:"ç¡®å®",callback:function(t){t.preventDefault();e&&e.call(this);this.close()}}]},i))};return l});define("tui/net",[],function(t,e){e.getScript=function(t,e){var i=document.createElement("script");i.type="text/javascript";i.async=true;if(!e)e={};else if($.isFunction(e))e={callback:e};if(e.charset)i.charset=e.charset;i.src=t;var n=document.getElementsByTagName("head")[0];var a=false;i.onload=i.onreadystatechange=function(){if(!a&&(!this.readyState||"loaded"==this.readyState||"complete"==this.readyState)){a=true;i.onload=i.onreadystatechange=null;n.removeChild(i);if(e.callback)e.callback()}};n.appendChild(i)};var i=0;e.getJSON=function(t,n,a,o){var r=t.match(/https?\:\/\/(.+?)\//);if(a)if((!o||!o.isScript)&&(!r||r[1]===window.location.host)){$.ajax({url:t,data:n,success:a,dataType:"json"});return true}o=$.extend({charset:"gbk",callback:"tuijsonp"+ ++i},o||{});if(o.random)n[o.random]=+new Date;var s=o.callbackName||"jsoncallback";n[s]=o.callback;t=[t,/\?/.test(t)?"&":"?",$.param(n)].join("");if(a)window[o.callback]=a;delete o.callback;e.getScript(t,o)};e.getRequest=function(t,e){var i=new Image;i.onload=function(){};i.src=!e?t:[t,t.match(/\?/)?"&":"?","string"==typeof e?e:$.param(e)].join("")}});define("module/login/login",["tui/cookie","tui/event","tui/net","tui/dialog","module/domain"],function(t,e,i,n,a,o,r){var s=new e;var u=a.url;window.hasAutoLogin=window.hasAutoLogin;window.loginCallback=window.loginCallback||[];window.loginData=window.loginData;s.juid="";s.DWriteCookie=function(t,e){var i;if("string"==$.type(t))i=t;else{i=t.yktk;i=i+"|"+(t.isRemember?1:0)}if(i&&""!=i){var n="http://passport.tudou.com/user/crossdomain?yktk="+encodeURIComponent(i);var a=u.login+"/login.do?act=loginOver";if(e){var o="login"+(""+Math.random()).replace(/\D/g,"")+(new Date).getTime();window[o]=function(){e&&e();r.remove();window[o]=null};a+="&callback="+o}n+="&return_url="+encodeURIComponent(a);var r=$('<iframe src="'+n+'" style="position:absolute;left:-9999px;bottom:0;width:0;height:0;visibility:hidden;">');$(document.body).append(r)}};s.autoLogin=function(t,e){var i=this;t=t||{};e=e||function(){};var n=u.login;var a="www";var o=location.hostname.split(".");if(["wwwtest","logintest"].indexOf(o[0])>-1)a="wwwtest";n={www:"http://login.tudou.com",wwwtest:"http://logintest.tudou.com"}[a];$.ajax({url:n+"/login.do?act=ytAutoLogin&useYktk=true",type:"GET",jsonp:"jsoncallback",dataType:"jsonp",success:function(n){var a=1==n.status?true:false;e(a,n);if(a&&n.data)s.DWriteCookie({isRemember:t.isRemember,yktk:n.data.yktk},function(){if(a){i.trigger("after:login");i.trigger("after:autoLogin")}})},error:function(){e(false)}})};s.isLogin=function(e){var i=this;e=e||function(){};if(t("u_user")&&t("u_id")){if(t("u_login"))e(true);else if(t("u_passport_info"))window.loginCallback&&loginCallback.push(e);else return false;return true}return false};s.isLogin2=function(e){var i=this;var n=0;var a=0;var o=t("yktk");e=e||function(){};if(t("u_user")&&t("u_id")){if(t("u_login")){e(true);return}else if(t("u_passport_info"))n=1;else if(o)n=2}else if(o)n=2;if(o)a="|1"==o.slice(-2,o.length)?1:0;if(n){window.loginCallback&&loginCallback.push(e);if(!hasAutoLogin){hasAutoLogin=true;i.autoLogin({isRemember:a},function(t,e){e=e||{};loginData=t?e:t;if(window.loginCallback&&loginCallback.length){loginCallback.forEach(function(e){e(t,loginData)});window.loginCallback=[]}})}else if(void 0!==loginData)"boolean"==$.type(loginData)?e(loginData):e(1==loginData.status?true:false,loginData)
}else e(false)};s.uid=function(){return this.isLogin()?t("u_id")||0:0};s.ucode=function(){return this.isLogin()?t("u_code")||"":""};s.userInfo=function(){var e=this.uid();var i={};i._vip=t("u_member")||0;i._usr=t("u_user");i._nic=t("u_nick")||i._usr;i._ico=t("u_pic")||"";i.isGuest=!!e;i.isXN=e.toString()===(t("xn")||"").split("_")[0];i.isSINA=!!t("sinawb");i.isQZONE=!!t("qzone");i.isMSN=!!t("msn");i.isTWEIBO=!!t("tweibo");i.isKAIXIN=!!t("kaixin");i.isFEIXIN=!!t("feixin");i.isYOUKU=!!t("youku");i.ulvl=(e?t("u_l"):0)||0;i.prefix=i.isXN&&"xn"||i.isSINA&&"sina"||i.isQZONE&&"qzone"||i.isMSN&&"msn"||i.isTWEIBO&&"tweibo"||i.isYOUKU&&"youku"||i.isKAIXIN&&"kaixin"||i.isFEIXIN&&"feixin"||"";return i};var c="login"+(""+Math.random()).replace(/\D/g,"")+(new Date).getTime();s.needLogin=function(t,e){var i=this;t=t||{};if("function"==$.type(t)){e=t;t={}}i.isLogin2(function(a){if(a)e&&e();else{window[c]=function(t){if(!t){r.close();window["setupLoginDialog"]=null;window["closeLoginDialog"]=null}e&&e();i.trigger("after:login");i.trigger("after:miniLogin");window[c]=null};window["setupLoginDialog"]=function(t){var e={};var i=r.element.find(".tui_dialog_holder, iframe");if(t.height)e.height=t.height;if(t.width)e.width=t.width;i.css(e);r.locate()};window["closeLoginDialog"]=function(){r.close()};var o={mini:"ok",callback:c};if(t.isReg)o.isReg=true;if(t.title)o.title=encodeURIComponent(t.title);if(t.email)o.email=t.email;var r=new n({className:"tudou_dialog login_dialog "+(o.isReg?"reg_dialog":"log_dialog"),title:"ç»å½",content:'<iframe scrolling="no" frameborder="0" width="100%" height="100%" src="'+u.login+"/login.do?"+$.param(o)+'"></iframe>',hasDrag:false});i.fire("login:open",[o]);r.bind("close",function(t){i.trigger("login:close",[o])})}});return i};s.isVip=function(){return t("u_member")};return s});define("tui/storage",["tui/class"],function(t){var e=t({initialize:function(t){var e=this;if(t){e.iframe1=$('<iframe src="'+t+'" style="position:absolute;left:-9999px;bottom:0;width:0;height:0;visibility:hidden;">');var n=/https?:\/\/[^\/]+/.exec(t);e.origin=n?n[0]:""}else{e.storage=i(window);e.loaded1=true;return}e.gcbs1=[];e.scbs1=[];e.rcbs1=[];e.loaded1=!!e.storage;if(e.iframe1.on)e.iframe1.on("load",a);else e.iframe1.bind("load",a);function a(){e.storage=i(this.contentWindow,e.origin);e.loaded1=true;e.gcbs1.forEach(function(t){e.getItem(t.k,t.cb)});e.scbs1.forEach(function(t){e.setItem(t.k,t.v,t.cb)});e.rcbs1.forEach(function(t){e.removeItem(t.k,t.cb)});e.gcbs1=[];e.scbs1=[];e.rcbs1=[]}$(document.body).append(this.iframe1)},getItem:function(t,e){if(this.loaded1)this.storage.getItem(t,e);else this.gcbs1.push({k:t,cb:e});return this},setItem:function(t,e,i){if($.isPlainObject(e)||$.isArray(e))e=JSON.stringify(e);if(this.loaded1)this.storage.setItem(t,e,i);else this.scbs1.push({k:t,v:e,cb:i});return this},removeItem:function(t,e){if(this.loaded1)this.storage.removeItem(t,e);else this.rcbs1.push({k:t,cb:e});return this}});function i(t,e){var i=parseInt($.browser.version);if(t!==window&&$.browser.mozilla&&(i>=13&&i<=14||i>=30))return n(t,e);else if(t.localStorage)return a(t);else if(t.ActiveXObject)return o(t);else throw new Error("Local storage not exist.")}function n(t,e){window.addEventListener("message",function(t){var e=JSON.parse(t.data);i[e.id](e.val);delete i[e.id]},false);var i={},n=0,a={};a.setItem=function(a,o,r){i[n]=r||function(){};t.postMessage(JSON.stringify({id:n++,key:a,val:o}),e)};a.getItem=function(a,o){i[n]=o||function(){};t.postMessage(JSON.stringify({id:n++,key:a}),e)};a.removeItem=function(a,o){i[n]=o||function(){};t.postMessage(JSON.stringify({id:n++,key:a,val:null}),e)};return a}function a(t){var e={};e.setItem=function(e,i,n){t.localStorage.setItem(e,i);if(n)n()};e.getItem=function(e,i){if(i)i(t.localStorage.getItem(e))};e.removeItem=function(e,i){t.localStorage.removeItem(e);if(i)i()};return e}function o(t){var e={},i=t.document.documentElement;i.addBehavior("#default#userdata");e.setItem=function(t,e,n){try{i.setAttribute("tui",e);i.save(t)}catch(a){throw new Error("[V3] userData behavior error")}if(n)n()};e.getItem=function(t,e){try{i.load(t);if(e)e(i.getAttribute("tui"))}catch(n){return null}};e.removeItem=function(t,e){try{i.load(t);i.expires=new Date(315532799e3).toUTCString();i.save(t);if(e)e()}catch(n){}};return e}return e});define("module/global",["tui/event","tui/cookie","tui/storage","module/stat/common","module/login/login"],function(t,e,i,n,a,o,r){try{document.domain="tudou.com"}catch(s){}var u={};u.juid=n.juid();u.seid=n.seid();u.pvid=n.pvid();u.uid=a.uid();a.bind("after:login",function(){u.uid=a.uid()});a.juid=u.juid;u.storage=new i("http://ui.tudou.com/js/embed/xstorage/storage.html");return u});define("module/stat/stat-info",["tui/cookie","tui/browser","module/global","module/stat/common"],function(t,e,i,n){var a=window;var o=encodeURIComponent;var r=a.config||{};var s=r.item||a.itemData||{};var u=r.pageId||a.pageId||1;var c=navigator.userAgent.toLowerCase();var l=e.iOS;var d=e.iOSVersion;var f=e.android;var m=e.wphone;var p=c.indexOf("micromessenger")>-1;var h={1:96001,2:96002,3:96003,4:96003,5:96003,6:96004,81:96081}[u];var v={1:96311,2:96310,3:96312,4:96312,5:96312,6:96313,81:96381}[u];var g={1:11e3,2:1e4,3:10200,4:10200,5:10200,6:10300}[u];var w={1:31100,2:31e3,3:31200,4:31200,5:31200,6:31300}[u];if(f){h+=1e3;v+=1e3}if(p){h+=2e3;v+=2e3}var b={device:l||f&&(e.isPad?"androidpad":"androidphone")||m&&"wphone"||"others",version:l&&d.join(".")||f||m||0,iOSVersion:d,isMobile:!!l||!!f||false,isRetina:(a.devicePixelRatio||1)<2?false:true,areacode:t("tudouad_citycode")||0,uid:i.uid||0,lid:r.lid||a.lid||0,aid:a.aid||0,sid:r.lid||a.lid||a.aid||0};if(r.lid&&r.pageId>=3&&r.pageId<=5)b.aid=r.lid;var _={icode:function(){return s.icode||a.icode||0},iid:function(){return s.iid||a.iid||0},cid:function(){return s.cid||a.cid||0},oid:function(){return s.oid||a.oid||0},time:function(){return s.time||a.time||""},url:function(){return o(s.url||a.location.href)},refer:function(){return o(s.referrer||n.referrer)},get:function(t){if(void 0!=b[t])return b[t];else if(this[t])return this[t]();else return""},update:function(){s=r.item||a.itemData||{};this.checkYoukuSrc()},getSourceId:function(){if(b.isMobile)return i.isYoukuSrc?v:h;else return i.isYoukuSrc?w:g},checkYoukuSrc:function(){if(s&&s.vcode)return i.isYoukuSrc=true;else return i.isYoukuSrc=false}};_.checkYoukuSrc();return _});define("module/stat/rec",["tui/net","module/global","module/stat/stat-info"],function(t,e,i){var n={};var a={};var o=i.get("iid");var r=i.get("cid");var s=i.get("sid");var u=i.get("uid");function c(c,l){l=l||n.req_id;var d=a[l];var f=d&&d.recommendItems;if(!(f&&f[c]))return;var p=f[c];if(l!=n.req_id)n=m(d.reqInfo);o=i.get("iid");r=i.get("cid");var h={};h.cookie_id=e.juid;u&&(h.uid=u);o&&(h.vid=o);s&&(h.sid=s);r&&(h.sct=r);h.apt=n.apt;h.pg=n.pg;h.md=n.md;h.pos=c||0;var v=p.iid||p.itemId;v&&(h.dvid=v);p.sid&&(h.dsid=p.sid);var g=p.cid||p.channelId;g&&(h.dct=g);h.abver=n.abver;h.dma=p.dma||0;h.ord=n.ord;h.req_id=l;h.algInfo=p.algInfo||"";h.rand=+new Date;t.getRequest("http://r.l.youku.com/trecommendclick",h)}function l(e){t.getRequest(e)}function d(c,l){c=c||{};var d=c.reqInfo||{};if(d.req_id)a[d.req_id]=c;o=i.get("iid");r=i.get("cid");n=m(d);var p={};p.cookie_id=e.juid;u&&(p.uid=u);o&&(p.vid=o);s&&(p.sid=s);r&&(p.sct=r);p.apt=n.apt;p.pg=n.pg;p.md=n.md;p.abver=n.abver;p.ord=n.ord;p.req_id=n.req_id;l&&(p.reqtype=l);p.showlist=f(c);p.rand=+new Date;t.getRequest("http://r.l.youku.com/trecommendshow",p);return d.req_id}function f(t){var e=[];if(t.recommendItems)t.recommendItems.forEach(function(t,i){e.push([t.iid||t.itemId||t.ownerId,t.type,t.dma,t.algInfo].join("_"))});return e.join(",")}function m(t){return{apt:t.apt||1,pg:t.pg||1,md:t.md||1,abver:t.abver||"A",ord:t.ord||1,req_id:t.req_id||""}}return{send:c,onShow:d,sendMM:l}});define("tui/util/str",[],function(t,e){function i(t){return t.replace(/([^\x00-\xff])/g,"$1 ").length}function n(t,e,i){t=t||"";if(void 0==i)i="..";if(this.byteLen(t)<=e)return t;var n=t.substr(0,e).replace(/([^\x00-\xff])/g,"$1 ").substr(0,e).replace(/([^\x00-\xff])\s/g,"$1");return n+i}function a(t,e){e=e||400;t=t.replace(/(\r\n|\n)+/g,"<br>");t=t.replace(/\s{2,}/g," ");t=t.replace(/(<(?:img|embed).*?>)([\s\S]*)$/gi,function(t,e,i){return e+i.replace(/<(?:img|embed).*?>/gi,"")});t=t.replace(/<\/(p|div|ol|ul|li)>/gi,"<br>");t=t.replace(/<(?!img|embed|br).*?>/gi,"");t=t.replace(/(<br[^>]*>\s*){2,}/gi,"$1");var i=t.length;t=t.substr(0,e);t=t.replace(/<[^>]*$/,"");if(t.length<i)t+=" ...";return t}var o=[];for(var r=0;r<256;r++)o[r]=(r<16?"0":"")+r.toString(16);function s(){var t=0|4294967295*Math.random();var e=0|4294967295*Math.random();var i=0|4294967295*Math.random();var n=0|4294967295*Math.random();return o[255&t]+o[255&t>>8]+o[255&t>>16]+o[255&t>>24]+"-"+o[255&e]+o[255&e>>8]+"-"+o[64|15&e>>16]+o[255&e>>24]+"-"+o[128|63&i]+o[255&i>>8]+"-"+o[255&i>>16]+o[255&i>>24]+o[255&n]+o[255&n>>8]+o[255&n>>16]+o[255&n>>24]}function u(t){var e={"&#60;":"<","&#62;":">","&#34;":'"',"&#39;":"'","&#38;":"&"};return t.replace(/(&#\d{2};)/g,function(t){return e[t]})}e.unescapeHTML=u;e.byteLen=i;e.substr=n;e.subHtml=a;e.uuid=s});define("tui/util/num",[],function(t,e){function i(t,e){var i="",n=t<0,a=String(Math.abs(t));if(a.length<e)i=new Array(e-a.length+1).join("0");return(n?"-":"")+i+a}function n(t,e){e=e.length;t=t||0;return 1==e?t:(t=String(Math.pow(10,e)+t)).substr(t.length-e)}function a(t,e){e=e||",";return String(t).replace(/(\d)(?=(\d{3})+($|\.))/g,"$1"+e)}function o(t){t=parseInt(t);var e;if(t>=1e8)e=(t/1e8).toFixed(2)+"äº¿";else if(t>=1e4){var i=t/1e4;var n=parseInt(i).toString();var o=n.length;if(o<4&&i!=n)n=i.toFixed(1==o?2:4-o);e=a(n)+"ä¸"}else e=a(t);return e}function r(t){t=parseInt(t);var e=-1;do{t/=1024;e++}while(t>1024);return Math.max(t,.1).toFixed(1)+["KB","MB","GB","TB"][e]}e.pad=i;e.format=n;e.split=a;e.field=o;e.bytes=r});define("tui/util/date",["tui/util/num"],function(t,e,i){var n=t.format;function a(t,e){if(void 0===e)e=new Date;else if($.isNumeric(e))e=new Date(parseInt(e,10));return t.replace(/([YMDhsm])\1*/g,function(t){switch(t.charAt()){case"Y":return n(e.getFullYear(),t);case"M":return n(e.getMonth()+1,t);case"D":return n(e.getDate(),t);case"w":return e.getDay()+1;case"h":return n(e.getHours(),t);case"m":return n(e.getMinutes(),t);case"s":return n(e.getSeconds(),t)}})}var o=60*24*60;function r(t,e,i){if($.isNumeric(t))t=new Date(parseInt(t,10));if($.isNumeric(e))e=new Date(parseInt(e,10));if(void 0===t)t=new Date;if(void 0===e)e=new Date;if(!i)i="YYYYå¹´MMæDDæ¥";var n=new Date(e.toDateString());var r=(+e-+t)/1e3;var s=(+e-+n)/1e3;if(r<=60)return"åå";else if(r<=60*60)return Math.floor(r/60)+"åéå";else if(r<=s)return Math.floor(r/3600)+"å°æ¶å";else if(r<=s+o)return"æ¨å¤©";else if(r<=s+2*o)return"åå¤©";else if(r<=s+25*o)return Math.floor(r/o)+"å¤©å";else return a(i,t)}function s(t,e){var i=0;t=String(t).split(":");for(var n=0,a=t.length;n<a;n++)i+=parseInt(t[n],10)*Math.pow(60,a-n-1);return e?1e3*i:i}function u(t,e){var i=[],n,a,t;if(void 0==e||e){n=parseInt(t/3600);a=parseInt(t%3600/60)}else a=parseInt(t/60);t%=60;if(a<10)a="0"+a;if(t<10)t="0"+t;i=[a,t];if(n>0)i.unshift(n);return i.join(":")}function c(t,e,i){if("date"==$.type(e))e=e.getTime();else e=parseInt(e);var a=new Date(e),o=a.getHours();if(a>432e5)o+=Math.floor(a/432e5);if(i)t=t.replace(/(\w)\1+/g,"$1");return t.replace(/([hms])\1*/g,function(e){switch(e.charAt()){case"h":return n(o-8,e);case"m":var i=60*(/h+/.test(t)?0:o-8)+a.getMinutes();return n(i,e);case"s":return n(a.getSeconds(),e)}})}function l(t,e){if(t<36e5)return this.formatTime("mm:ss",t,e);else return this.formatTime("hh:mm:ss",t,e)}i.release=r;i.formatDate=a;i.formatTime=c;i.formatTimeE=l;i.beautyTime=u;i.parseTime=s});define("module/uitcid",["tui/browser"],function(t,e,i){var n={1700:"2",2000:"11",2001:"9",1:"3",2:"4",3:"5",4:"5",5:"5",6:"6",7:"19",11:"13",200:"1"};var a=window.config;var o=window.pageId||a&&a.pageId||0;i.get=function(e,i,a){return[a||(t.isMobile?3:1),n[i||o]||0,e].join("_")};i.from=function(e,i,a,r){return[r||(t.isMobile?3:1),n[a||o]||0,e||0,i||0].join("_")};i.getFromId=function(t){return n[t||o]||0}});define("module/stat/sub",["tui/browser","tui/net","module/stat/common","module/global","module/uitcid"],function(t,e,i,n,a,o,r){var s=i.mix({getExt:function(){var t=this;var e={};$.extend(e,t.getData());return i.param(e)},send:function(o){var r={};r.uid=n.uid||0;r.tuid=6==o.favType?o.subId:"";r.shid=3==o.favType?o.subId:"";r.stype=o.subType;r.ftype=o.favType;r.did=t.isMobile?3:1;r.sid=o.sourceID||a.getFromId();r.url=location.href;r.vid=o.videoID||"";r.ext=this.getExt();e.getRequest("http://p.l.youku.com/tsubscribe?"+i.param(r));this.trigger("send")}});return s});define("module/subscribe",["tui/event","module/login/login","tui/art","module/domain","tui/util/num","tui/browser","module/stat/sub","tui/util/date"],function(t,e,i,n,a,o,r,s){var u=$(document.body);var c=u.width();var l=n.url.main;var d='<iframe src="about:blank" class="mask" frameborder="0"></iframe><i class="succ iconfont">&#xe647;</i><a class="cls iconfont" href="#">&#xe640;</a><p class="p"><b>è®¢éæå!</b>ä½ å¯ä»¥å» <a href="<%=domain%>/watch/" target="<%=target%>">æçè®¢é</a> æ¥çæ´æ°</p>';var f='<iframe src="about:blank" class="mask" frameborder="0"></iframe><i class="fail iconfont">&#xe640;</i><a class="cls iconfont" href="#">&#xe640;</a><p class="p"><%=txt%>~<br />ä½ å¯ä»¥åå» <a href="<%=domain%>/watch/" target="<%=target%>">æçè®¢é</a>æ´çä¸</p>';var m='<%\nvar cs1 = \'\', cs2 = \'\', str = \'\';\nvar detail = cfg.locate;\nvar app = cfg.app;\nvar link = cfg.linkTxt;\nvar target = cfg.target;\nvar total = data.total;\nvar skin = cfg.skin;\nvar id = data.id;\nvar videoID = data.videoID;\nvar isSubed = data.subed;\nswitch(skin){\ncase 1:\ncs1 = \'gbtn_sub_w\';\ncs2 = \'gbtn_sub_w\';\nbreak;\ncase 2:\ncs1 = \'gbtn_sub_b\';\ncs2 = \'gbtn_sub_b\';\nbreak;\ncase 3:\ncs1 = \'gbtn_sub_txt\';\ncs2 = \'gbtn_sub_txt\';\nbreak;\ncase 4:\ncs1 = \'gbtn_sub_txt gbtn_sub_w\';\ncs2 = \'gbtn_subed_txt\';\nbreak;\ncase 5:\ncs1 = \'gbtn_sub_txt gbtn_sub_b\';\ncs2 = \'gbtn_subed_txt gbtn_subed\';\nbreak;\ncase 6:\ncs1 = \'gbtn_sub_s\';\ncs2 = \'gbtn_subed_s\';\nbreak;\n};\nif(detail == \'left\'){\nstr = \'<em class="num_l">\' + splitNum(total) +\'<i class="ac"><i></i></i></em>\';\n}else if(detail == \'right\'){\nstr = \'<em class="num_r">\' + splitNum(total) +\'<i class="ac"><i></i></i></em>\';\n}\nvar attr = \' data-id=\'+ id + \' data-skin=\' + skin + \' data-disrecom =\' + cfg.disRecom;\n%>\n<%if(!data.click){%>\n<%if(skin == 6){%>\n<%if(!isSubed){%>\n<span class="gbtn_sub gbtn_sub_s" data-id="<%=id%>">\n<%==str%><a href="#" title="ç¹å»è®¢é" id="sub_<%=app%>_<%=id%>" <%=attr%>><i class="iconfont">&#xe637;</i></a>\n</span>\n<%}else{%>\n<span class="gbtn_sub gbtn_subed_s"  data-id="<%=id%>">\n<%==str%><a href="#" title="ç¹å»åæ¶è®¢é" <%=attr%> id="unsub_<%=app%>_<%=id%>"><i class="iconfont">&#xe637;</i></a>\n</span>\n<%if(link){%>			\n<a class="gbtn_link" href="<%=domain%>/watch/subscribe/" target="<%=target%>" id="sublink_<%=app%>_<%=id%>"><%=link%></a>\n<%}%>\n<%}%>\n<%}else{%>\n<%if(!isSubed){%>\n<span class="gbtn_sub <%=cs1%>"  data-id="<%=id%>">\n<%==str%><a href="#" title="ç¹å»è®¢é" <%=attr%> id="sub_<%=app%>_<%=id%>"><i class="iconfont">&#xe637;</i>è®¢é</a>\n</span>\n<%}else{%>\n<span class="gbtn_sub <%=cs2%> gbtn_subed"  data-id="<%=id%>">\n<%==str%><a href="#" title="ç¹å»åæ¶è®¢é" <%=attr%> id="unsub_<%=app%>_<%=id%>"><span class="f1"><i class="iconfont">&#xe647;</i>å·²è®¢é</span><span class="f2">åæ¶è®¢é</span></a>\n</span>\n<%if(link){%>			\n<a class="gbtn_link" id="sublink_<%=app%>_<%=id%>" href="<%=domain%>/watch/subscribe/" target="<%=target%>"><%=link%></a>\n<%}%>\n<%}%>\n<%}%>\n<%}else{%>\n<%if(skin == 6){%>\n<%if(!isSubed){%>\n<%==str%><a href="#" title="ç¹å»è®¢é" id="sub_<%=app%>_<%=id%>" <%=attr%>><i class="iconfont">&#xe637;</i></a>\n<%}else{%>\n<%==str%><a href="#" title="ç¹å»åæ¶è®¢é" <%=attr%> id="unsub_<%=app%>_<%=id%>"><i class="iconfont">&#xe637;</i></a>\n<%}%>\n<%}else{%>\n<%if(!isSubed){%>\n<%==str%><a href="#" title="ç¹å»è®¢é" <%=attr%> id="sub_<%=app%>_<%=id%>"><i class="iconfont">&#xe637;</i>è®¢é</a>		\n<%}else{%>\n<%==str%><a href="#" title="ç¹å»åæ¶è®¢é" <%=attr%> id="unsub_<%=app%>_<%=id%>"><span class="f1"><i class="iconfont">&#xe647;</i>å·²è®¢é</span><span class="f2">åæ¶è®¢é</span></a>\n<%}%>\n<%}%>\n<%}%>\n';var p=false;var h=location.href;var v=a.field;var g=1;if(o.isMobile||o.isPad)g=3;u.on("click",".gbtn_subbox .cls",function(t){t.preventDefault();$(".gbtn_subbox").remove()});$(window).on("resize",function(){$(".gbtn_subbox").remove()});var w=t.extend({initialize:function(t){var i=this;w.superClass.initialize.apply(i,arguments);var n=window.config&&window.config.pageId||window.pageId||0;p=n>=1&&n<=8;if(!t.box||!t.type)return;i.op=$.extend({app:"unknow",skin:0,isBelow:false,target:"_blank",disRecom:0},t);if(i.op.below)i.op.isBelow=i.op.below;if(i.op.link)i.op.linkTxt=i.op.link;if(i.op.detail)i.op.locate=i.op.detail;i.CACHE={};i.checkSub(t.box);e.bind("after:login",function(){i.checkSub(t.box)});$(t.box).on("click",".gbtn_sub a",function(t){t.preventDefault();var n=$(this);var a=n.closest(".gbtn_sub");var o=n.attr("data-id");var r=n.offset();var s=i.CACHE[o];if(!s)return;var u={subId:o,type:i.op.type,app:i.op.app,deviceID:g,url:h};if(s.videoID)u.videoID=s.videoID;if(s.from)u.from=s.from;e.needLogin(function(){u.uid=e.uid();if(a.hasClass("gbtn_subed"))i.unsub(u,function(t){i.toggle(o,false,n);$(".gbtn_subbox").remove()},null,a);else i.sub(u,function(t){i.toggle(o,true,n)},function(t){var e=t.msg||"åçäºæªç¥éè¯¯ã";if(2e3==t.code&&"ä¸å¯ä»¥éå¤è®¢é"===e)i.toggle(o,true,n);else i.dialog(false,r,e)},a)})})},dialog:function(t,e,n){var a=this;var o=e.left;o=o>c/2?o-242:o-12;var r=a.op.isBelow?e.top+(t?25:70):e.top-100;$(".gbtn_subbox").remove();u.append('<div class="gbtn_subbox">'+i.compile(t?d:f)({txt:n,target:a.target,domain:l})+"</div>");$(".gbtn_subbox").css({left:o,top:r})},update:function(){var t=this;t.checkSub(t.op.box)},checkSub:function(t){var i=this;var n=[];var a=e.uid();var o,r,s,u;$(t).find(".gbtn_sub[data-id]").forEach(function(t,e){o=$(t);r=o.attr("data-id");u={};if(r){n.push(r);u.total=o.attr("data-total")||0;u.id=r;u.videoID=o.attr("data-videoid")||i.op.videoID||0;u.from=o.attr("data-from")||i.op.from||0;i.CACHE[r]=u}});var c={subId:n.join(","),type:i.op.type,app:i.op.app,uid:a};if(a)i.check(c,function(t){if($.isPlainObject(t.data))n.forEach(function(e){i.render(e,t.data[e])});else i.render(n[0],t.data)});else n.forEach(function(t,e){i.render(t,false)})},render:function(t,e){var n=this;var a=n.CACHE[t];if(!a)return;a.subed=e;a.click=false;var o=i.compile(m)({data:a,cfg:n.op,domain:l,splitNum:v});$(n.op.box).find('.gbtn_sub[data-id="'+t+'"]').replaceWith(o);if(n.op.callback)n.op.callback.call(n,$(o))},toggle:function(t,e,n){var a=this;var o=a.CACHE[t];var r=$('.gbtn_sub a[data-id="'+t+'"]').parent();var s=a.op;o.click=true;o.subed=e;if(n){s.skin=n.attr("data-skin")||s.skin;s.disRecom=n.attr("data-disRecom")||s.disRecom}e?o.total++:o.total--;var u=i.compile(m)({data:o,cfg:s,domain:l,splitNum:v});r[e?"addClass":"removeClass"]("gbtn_subed").html(u);if(!s.linkTxt)return;if(e)r.after('<a class="gbtn_link" id="sublink_'+s.app+"_"+o.id+'" href="'+l+'/watch/subscribe/" target="'+s.target+'">'+s.linkTxt+"</a>");else r.next(".gbtn_link").remove()},check:function(t,e){var i=this;return $.getJSON(l+"/uis/sub/checkSub.action?jsoncallback=?",t,function(n){if(n.code){i.trigger("check:fail",[n]);w.globalEvent.trigger("check:fail",[t,n])}else{e&&e(n);i.trigger("check:success",[n]);w.globalEvent.trigger("check:success",[t,n])}},"jsonp")},sub:function(t,e,i,n){var a=this;var o;var s=t.subId.split(",");if(p){var u=a._getPlayTime();r.addData(function(){return{playtime:u}})}s.forEach(function(e){r.send({subId:e,subType:1,favType:1==t.type?3:6,sourceID:t.from,videoID:t.videoID})});if(t.codes&&""!=t.codes)delete t.subId;return $.getJSON(l+"/uis/sub/sub.action?jsoncallback=?",t,function(o){if(o.code){i&&i(o);a.trigger("sub:fail",[o]);w.globalEvent.trigger("sub:fail",[t,o,n])}else{e&&e(o);a.trigger("sub:success",[o,n]);w.globalEvent.trigger("sub:success",[t,o,n]);if(t.subId)a._loadInfo(t)}},"jsonp")},unsub:function(t,e,i,n){var a=this;r.send({subId:t.subId,subType:2,favType:1==t.type?3:6,deviceID:t.deviceID,sourceID:t.from,videoID:t.videoID});return $.getJSON(l+"/uis/sub/unsub.action?jsoncallback=?",t,function(o){if(o.code){i&&i(o);a.trigger("unsub:fail",[o]);w.globalEvent.trigger("unsub:fail",[t,o,n])}else{e&&e(o);a.trigger("unsub:success",[o,n]);w.globalEvent.trigger("unsub:success",[t,o,n])}},"jsonp")},_loadInfo:function(t){var e=this;if(1==t.type)$.getJSON(l+"/crp/getAlbumPosters.action?jsoncallback=?",{aids:t.subId},function(e){if(e&&e.data&&e.data[0])w.globalEvent.trigger("picAdded",[t,e.data[0]])},"jsonp");if(2==t.type)$.getJSON(l+"/uis/userInfo.action?jsoncallback=?",{app:t.app,uid:t.subId},function(e){if(e&&e.data)w.globalEvent.trigger("picAdded",[t,e.data])},"jsonp")},_getPlayTime:function(){var t=this;var e=window.mgr;var i=window.config;var n="";var a="";if(i&&i.item&&i.item.time)n=i.item.time;if(e&&e.widgets&&e.widgets.playCtrl){a=e.widgets.playCtrl.notifyPlayer("getPlaytime");a*=1e3;a=s.formatTimeE(a)}return[a,n]}});w.globalEvent=new t;return w});define("module/subsrecom",["module/subscribe","module/login/login","tui/art","tui/util/str","tui/cookie","module/domain","module/stat/rec"],function(t,e,i,n,a,o,r,s,u){var c;var l='\n<%data.forEach(function(o, i){%>\n<li ord="<%=i+1%>">\n<a href="<%=o.playLink%>" target="_blank" title="<%=o.ownerName%>" class="img"><img src="<%=o.picUrl%>" /></a>\n<a href="<%=o.playLink%>" target="_blank" title="<%=o.ownerName%>" class="li"><%=o.ownerName%></a>\n<span class="li"><%=o.cate%></span>\n<i class="gbtn_sub" data-id="<%=o.ownerId%>"></i>\n</li>\n<%})%>\n';var d=i.compile(l);var f=$("body");var m=$(window);var p=$("#gSideBar").length;var h=p?"æå¼å·¦ä¾§å¯¼èªå¯æ¥çTAçææ°æ´æ°":"";var v='<div class="g_dialog_recom"><iframe src="about:blank" class="mask" frameborder="0"></iframe>'+'<div class="top">'+'<i class="succ iconfont">&#xe647;</i>'+'<span class="t">è®¢éæå</span>'+h+'<a class="iconfont cls" href="#" data-role="close">&#xe640;</a>'+"</div>"+'<div class="recom"><h4>è®¢éäºTAçäººï¼è¿è®¢éäº</h4><ul class="fix"><li class="loading">æ°æ®æ­£å¨è½½å¥ä¸­...</li></ul></div></div>';var g=[113077064,113077233,102599789,113077370,113077877,113077745,113077988,116673329,120663473,120663556,120663623,120663663,120663699,366570608,366571453,366573231,366572712];function w(t,e){t=4-t;var i=[];$.ajax({url:"http://cmssrv.jj.tudou.com/oclient/portal/service/getIndexRecommendUserList.do?app=tudou&jsoncallback=?",dataType:"jsonp",success:function(n){if(n.items&&n.items.length){var a=n.items[0].userInfos;if(a.length)a.splice(0,t).forEach(function(t){i.push({picUrl:t.userPic,ownerName:t.nickName,ownerId:t.userId,playLink:t.url,cate:n.items[0].title})});e(i)}}})}function b(t,e,i,n){i&&$.ajax({url:o.url.tjpt+"/tjpt/tdrecuploader?callback=?",data:{encode:"utf-8",userid:i,juid:a("juid"),count:t,pcode:e,req_type:4,filterHot:1},dataType:"jsonp",success:function(t){if("1"==t.status)n&&n(t);else{cb2&&cb2(t);console.log(t)}}})}function _(t){t&&t.preventDefault();if(c){c.remove();c=null}}function y(e,i,n){if("1"===n.find("a").attr("data-disrecom")||1==e.type||2e3==i.code&&"ä¸å¯ä»¥éå¤è®¢é"!=i.msg)return false;_();var a=n.offset();var o=f.width();var s=f.height();var u=n.outerHeight();var l=e.nickname;var h=a.left?a.left>o/2?a.left-330:a.left:(o-420)/2;var y=a.top?a.top-m.scrollTop()>m.height()/2?a.top-300:a.top+u:m.scrollTop()+(m.height()-300)/2;c=$(v);c.css({left:h,top:y});f.append(c);c.on("click",".cls",_);b(4,10000203,e.subId,function(e){var i=e.recommendItems;i.forEach(function(t,e){if(t.cate.length<=2&&t.tag)t.cate+="/"+t.tag.split(",").shift();if($.inArray(t.ownerId,g)>-1){i.splice(e,1);return}});var n=i.splice(0,4);if(n.length<4)w(n.length,function(e){n=n.concat(e);c.find(".recom ul").html(d({data:n,hasSideBar:p}));new t({box:".g_dialog_recom",type:2,app:"gDialogRecom",skin:1,from:23,disRecom:1})});else{c.find(".recom ul").html(d({data:n,hasSideBar:p}));new t({box:".g_dialog_recom",type:2,app:"gDialogRecom",skin:1,from:23,disRecom:1})}var a=e.reqInfo.req_id;r.onShow(e,"p");c.on("click","li a",function(t){var e=$(this).closest("li").attr("ord");r.send(e,a)})})}u.init=function(){t.globalEvent.bind("sub:success",y);t.globalEvent.bind("sub:fail",y)}});define("module/sidebar/curve-motion",[],function(){var t=.0017;var e=function(e,i,n){if(!$.isArray(e))return;if($.isFunction(i)){n=i;i={}}this.options=i||(i={});if(i.easing)this._easing=i.easing;if(i.gravity)t=i.gravity;this.originX=e[0];this.originY=e[1];this.targetX=e[2];this.targetY=e[3];this.absX=Math.abs(this.targetX-this.originX);this.absY=Math.abs(this.targetY-this.originY);this.upward=this.targetY-this.originY<0;this.angle=180*Math.atan(this.absY/this.absX)/Math.PI;this.angle+=Math.cos(this.angle*Math.PI/180)*(i.elevationAngle||0);this.rad=this.angle*Math.PI/180;this.speed=Math.sqrt(t*this.absX*this.absX/(2*(this.absX*Math.tan(this.rad)-this.absY)),2)/Math.cos(this.rad);this.duration=this.absX/(this.speed*Math.cos(this.rad));this.draw=this.draw.bind(this);this._completeCallback=$.isFunction(n)&&n||function(){}};e.prototype={draw:function(){var t=+new Date-this.startTime;t=Math.min(t/this.duration,1);t=this._easing(t);if(t<1&&!this._paused)n(this.draw);var e=this._calcX(this.originX,this.targetX,t);var i=this._calcY(Math.abs(this.upward?e-this.originX:this.targetX-e));if(this._frameTimer)clearTimeout(this._frameTimer);var a=this;a._frameTimer=setTimeout(function(){if(a._useTransform)a._updateCallback(e-a.originX,a.upward?-i:a.absY-i);else a._updateCallback(e,a.upward?a.originY-i:a.targetY-i);if(1==t)a._completeCallback(e,i)},0)},start:function(){this._paused=false;this.startTime=+new Date;this.draw()},pause:function(){this._paused=true},updateFrame:function(t,e){this._updateCallback=t;this._useTransform=!!e},_calcX:function(t,e,i){return t+(e-t)*i},_calcY:function(e){return e*Math.tan(this.rad)-t*e*e/(2*Math.pow(this.speed*Math.cos(this.rad),2))},_easing:function(t){return t*t*(3-2*t)}};var i=!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame);var n=window.requestAnimationFrame||function(){var t=0;return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){var i=(new Date).getTime(),n;n=Math.max(0,16-(i-t));t=i+n;return setTimeout(function(){e(i+n)},n)}}();e.supportCSSTransform=i;return e});define("tui/view",["tui/event"],function(t){var e="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;var i=0;var n;var a=".delegateEvents";var o=function(e){this.clsid=i++;this._configure(e||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents();$.extend(this,new t)};var r={};var s=["el","id","attrs","className","tagName","model"];var u=/^(\S+)\s*(.*)$/;$.extend(o.prototype,{tagName:"div",initialize:function(){},render:function(){return this},get:function(t){return r[t]||null},find:function(t){return this.$el.find(t)},remove:function(){this.$el.remove();this.undelegateEvents();this.unbind();return this},create:function(t,e,i){var n=document.createElement(t);if(e)$(n).attr(e);if(i)$(n).html(i);return n},setElement:function(t,e){if(this.$el)this.undelegateEvents();this.$el=t instanceof $?t:$(t);this.el=this.$el[0];if(false!==e)this.delegateEvents();return this},delegateEvents:function(t){if(!(t||(t=this.events)))return;this.undelegateEvents();for(var e in t){var i=t[e];if(!$.isFunction(i))i=this[t[e]];if(!i)continue;var n=e.match(u);var o=n[1],r=n[2];i=i.bind(this);o=this._ensureTouch(o,r);o+=a+this.clsid;if(""===r)this.$el.on(o,i);else this.$el.on(o,r,i)}return this},undelegateEvents:function(t,e){var t=t?this._ensureTouch(t):"";this.$el.off(t+a+this.clsid,e);return this},modelEvents:function(t,e){e="{"+($.trim(e)||"mod")+"} ";for(var i in this)if(0===i.indexOf(e))t.bind(i.slice(e.length),this[i],this)},_configure:function(t){if(this.options)t=$.extend({},this.options,t);for(var e=0,i=s.length;e<i;e++){var n=s[e];if(t[n])this[n]=t[n]}this.options=t},_ensureElement:function(){if(this.el)this.setElement(this.el,false);else{var t=this.attrs||{};if(this.id)t.id=this.id;if(this.className)t["class"]=this.className;this.setElement(this.create(this.tagName,t),false)}},_ensureTouch:function(t,i){if(e&&window.tudouClickStat){if(("click"==t||"tap"==t||"singleTap"==t)&&""!==i){var o=t+a+this.clsid;this.$el.on(o,i,function(t){t.preventDefault();if(!tudouClickStat.getStatTarget(t.target)){if(void 0===t.pageX)t.pageX=t.pageY=0;if(n)clearTimeout(n);n=setTimeout(function(){tudouClickStat.send(t,{},function(){},true)},10)}})}return t}switch(t){case"tap":case"singleTap":return"click";case"doubleTap":return"dblclick"}return t},_clearTimer:function(){var t=arguments;for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n){clearTimeout(n);clearInterval(n)}}return null}});o.create=function(t,e){if(t&&!r[t])return r[t]=new this(e);return new this(e)};o.instance=function(t,e){if(t&&!r[t])return r[t]=e;return r[t]||null};o.destroy=function(t){if(t){if(r[t]){r[t].remove();delete r[t]}}else for(var e in r)arguments.callee(e)};o.extend=function(t,e){var i=this;var n=function(){i.apply(this,arguments)};$.extend(n,i,e);var a=function(){this.constructor=n};a.prototype=i.prototype;n.prototype=new a;$.extend(n.prototype,t);n.superClass=i.prototype;return n};return o});define("module/sidebar/curvefly",["tui/view","module/sidebar/curve-motion"],function(t,e){var i;var n=t.extend({initialize:function(){this._coords=this.options.coords;this._picurl=this.options.picurl||null;this._motion=new e(this._coords,{elevationAngle:this.options.elevationAngle||33},this._complete.bind(this));this._motion.updateFrame(this._update.bind(this),e.supportCSSTransform);this.render()},remove:function(){n.superClass.remove.call(this)},render:function(){var t=this._picurl;if(!(t&&t.indexOf("&#x")!==-1)){t=this._picurl?'<img src="'+this._picurl+'" />':'<i class="iconfont">&#xe637;</i>';var e=$('<div class="g-subs-ani">'+t+"</div>")}else var e=$('<div class="g-subs-ani g-curvefly-wrap">'+t+"</div>");e.css({left:this._coords[0],top:this._coords[1]});$(document.body).append(e);this.setElement(e)},start:function(){this.$el.show();this._motion.start()},pause:function(){this._motion.pause()},_update:function(t,i){if(e.supportCSSTransform)this.$el.get(0).style[a+"Transform"]="translate3d("+t+"px, "+i+"px, 0)";else this.$el.css({left:t,top:i})},_complete:function(){var t=this.$el;if(e.supportCSSTransform)t.get(0).style[a+"Transform"]="none";t.css({left:this._coords[2],top:this._coords[3]}).fadeOut(300)}});n.create=function(t,e,a,o,r,s){n.destory();i=new n({coords:[t,e,a,o],picurl:r,elevationAngle:s});return i};n.destory=function(){if(i){i.remove();i=null}};var a="";var o=document.createElement("div");$.each({Webkit:"webkit",Moz:"moz",O:"o",ms:"ms"},function(t,e){if(void 0!==o.style[t+"TransitionProperty"]){a=t;return false}});return n});define("module/sidebar/recent-rec-panel",["tui/net","tui/art","tui/cookie","tui/dialog","module/domain"],function(t,e,i,n,a){var o=e.compile('<% if (channel.length) { %>\n<% channel.forEach(function(item, index){ %>\n<div class="rec-item">\n<div class="pic">\n<a href="<%=$getUserHomeUrl(item.userId)%>" target="_blank"><img src="<%=item.userpic%>" /></a>\n</div>\n<div class="txt">\n<a href="<%=$getUserHomeUrl(item.userId)%>" target="_blank"><%=item.nickname || item.username%></a>\n</div>\n</div>\n<% }); %>\n<% } %>\n<% if (album.length) { %>\n<% album.forEach(function(item, index){ %>\n<div class="rec-item">\n<div class="pic">\n<a href="<%=$getAlbumCoverUrl(item.acode)%>" target="_blank"><img src="<%=item.albumPicUrl%>" /></a>\n</div>\n<div class="txt">\n<a href="<%=$getAlbumCoverUrl(item.acode)%>" target="_blank"><%=item.albumName%></a>\n</div>\n</div>\n<% }); %>\n<% } %>\n');var r='<div class="g-recent-rec" data-role="holder">'+'<h2 data-role="title">è¿æ¯ä½ ç»å¸¸ççèªé¢é</h2>'+"<h3>æå®ä»¬å å¥ä½ çè®¢éåè¡¨</h3>"+'<a href="#" class="rec-close" data-role="close"><i class="iconfont">&#xe63f;</i></a>'+'<div class="rec-content" data-role="content"></div>'+'<a href="#" class="rec-sub">ç¡®å®</a>'+"</div>";
var s=n.extend({events:{"click .rec-sub":"subAll"},initialize:function(){var t={template:r,hasDrag:false};$.extend(this.events,s.superClass.events);s.superClass.initialize.call(this,t)},destory:function(){s.superClass.close.call(this)},open:function(){var t=this;var e=i("g_recent_rec")||0;if(!e)setTimeout(function(){t.fetch()},100);else t.destory()},close:function(){this.report(2);this.destory();this.setCookie(true)},setCookie:function(t){i("g_recent_rec",1,{path:"/",domain:"tudou.com",expires:t?30:1})},report:function(e){t.getRequest(a.url.main+"/watch/seriesAndSub/doOpearation.do?uid="+window.uid+"&status="+e)},fetch:function(){var t=this;$.getJSON(a.url.main+"/watch/seriesAndSub/show.do?jsoncallback=?",{uid:window.uid},function(e){if(e&&0===e.code&&e.data){var i=e.data;if((i.channel||i.album)&&i.album_size+i.channel_size>0){s.superClass.open.call(t);if(i.channel_size>0&&i.channel_size<6){if(i.album_size>0){i.album=i.album.slice(0,6-i.channel_size);t.title("è¿æ¯ä½ ç»å¸¸ççèªé¢éåå§é")}}else if(0==i.channel_size)t.title("è¿æ¯ä½ ç»å¸¸ççå§é");t._data=i;t.content(o(i));t.locate()}else{t.destory();t.setCookie()}}else{t.destory();t.setCookie()}})},subAll:function(t){t&&t.preventDefault();var e=this;var i=e._data;var o=[];var r=[];var s=[];if(i.channel_size>0){i.channel.forEach(function(t){r.push(t.ucode)});o.push($.getJSON(a.url.main+"/uis/sub/sub.action?jsoncallback=?",{app:"watchcenter",uid:window.uid,type:2,codes:r.join(",")}))}if(i.album_size>0&&i.channel_size<6){i.album.forEach(function(t){s.push(t.acode)});o.push($.getJSON(a.url.main+"/uis/sub/sub.action?jsoncallback=?",{app:"watchcenter",uid:window.uid,type:1,codes:s.join(",")}))}$.when.apply(e,o).done(function(t,i){var n=false,a={};if(3===arguments.length){if(0==t.code){$.extend(a,t.data||{});n=true}}else{if(0==t[0].code){$.extend(a,t[0].data||{});n=true}if(0==i[0].code){$.extend(a,i[0].data||{});n=true}}if(n){e.report(1);e.destory();e.trigger("suball:success",[e._matchSubedData(a)])}}).fail(function(){e.destory();n.alert("æ¹éè®¢éå¤±è´¥")})},_getDataMap:function(){var t={};var e=this._data;e.channel&&e.channel.forEach(function(e){t[e.ucode]=e});e.album&&e.album.forEach(function(e){t[e.acode]=e});return t},_matchSubedData:function(t){var e=[];var i=this._getDataMap();for(var n in t){var a=i[n];if("1"==t[n])if(a.acode)e.push({type:1,id:a.aid,title:a.albumName,smallPic:a.albumPicUrl});else e.push({type:2,id:a.userId,title:a.nickname||a.username,smallPic:a.userpic})}return e}});e.helper("$getAlbumCoverUrl",function(t){return a.url.main+"/albumcover/"+t+".html"});e.helper("$getUserHomeUrl",function(t){return a.url.main+"/home/_"+t+"/"});return s});define("page/watch/model/rec-new",["tui/event","module/global","tui/net","module/domain"],function(t,e,i,n){var a=t.extend({initialize:function(t){a.superClass.initialize.call(this);this.options=t||(t={})},fetch:function(t,e){var a=this;var o=Math.ceil(3*Math.random());var r={callbackName:"jsoncallback",charset:"utf-8"};var s="";t=t||8;if(e)s="&userId="+e;i.getJSON(n.url.gc+"/newsData.html?pageNo="+o+"&pageSize="+t+s,{},function(t){if(t.length)a.trigger("getrec:success",[t])},r)}});return a});define("page/watch/model/api",["module/domain","module/login/login"],function(t,e){var i=t.url;return{subList:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/sub/subList.do?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},subListGroupAlbum:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/sub/subListGroupAlbum.do?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},subListJson:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/sub/subListJson.do?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},subCount:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/uis/sub/subCount.action",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},subedCount:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/uis/sub/subedCount.action",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},subAlbumGroupCount:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/sub/subAlbumGroupCount.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},updateList:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/sub/updateListAllInfo.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},marrowUpdateList:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/sub/marrowUpdateList.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},sub:function(t,e,n){t.app="watchcenter";t._=+new Date;return $.getJSON(i.main+"/uis/sub/sub.action?jsoncallback=?",t,function(t){if(t.code){console&&console.error(t.msg);n&&n(t)}else e&&e(t)})},unSub:function(t,e){t.app="watchcenter";t._=+new Date;return $.getJSON(i.main+"/uis/sub/unsub.action?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},addTop:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/uis/sub/addTopSub.action?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},removeTop:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/uis/sub/removeTopSub.action?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},albumDetail:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/album/detail.do?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},albumItems:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/album/items.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},albumItemsById:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/album/itemsByIds.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},albumEssence:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/album/marrows.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},userDetail:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/user/detail.do?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},userItems:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/user/items.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},userItemsById:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/user/itemsWithPlaylistsByUids.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},userEssence:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/user/marrows.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},interDetail:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/interest/detail.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},interItems:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/interest/items.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},interEssence:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/interest/marrows.do",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},getUserInfos:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/history/getUserInfos.do?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},expose:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/exposure/exposure.do?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},exposeByType:function(t,e){t.app="watchcenter";return $.getJSON(i.main+"/watch/exposure/exposureByType.do?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},itemInfo:function(t,e){return $.getJSON(i.main+"/watch/play/getPlayInfo.do",{itemId:t,app:"watchcenter"},function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})},alist:function(t,e){return $.getJSON(i.main+"/tvp/alist.action",{a:t},function(t){e&&e(t)})},recommend:function(t,e){return $.post(i.main+"/watch/recommendSources.do",t||{},function(t){e&&e(t)},"json")},favor:function(e,i){return $.getJSON(t.url.programstat+"/itemFavor.srv",{iabcdefg:e,app:"watchlater"},function(t){i&&i(t)},"jsonp")},qrcode:function(t){return"http://yun.tudou.com/qrcode.action?"+$.param(t)},unlike:function(t,n){t.app="watchcenter";t.uid=e.uid();return $.getJSON(i.main+"/watch/dislike.do",t,function(t){if(t.code)console&&console.error(t.msg);else n&&n(t)})},getItemInfos2:function(t,n){t.app="watchcenter";t.uid=e.uid();return $.getJSON(i.main+"/crp/getItemInfos2.action",t,function(t){if(t.error)console&&console.error(t.msg);else n&&n(t)})},getDetailByUrl:function(t,e,n){return $.getJSON(i.main+"/watch/sourceData/getDetailByUrl.do",{url:t,app:"watchcenter"},function(t){if(t.code)n&&n(t.msg);else e&&e(t)})},wcstat:function(t,n){t.app="watchcenter";t.uid=e.uid();return $.getJSON(i.main+"/watch/wcstat.do",t,function(t){if(t.code)console&&console.error(t.msg);else n&&n(t)})},listFavoriteItems:function(t,e){return $.getJSON(i.main+"/my/programs/srv/listFavoriteItems.html",t,function(t){if(1==t.system)e&&e(t);else console&&console.error(t.msg)})},deleteFavor:function(t,e){return $.getJSON(i.main+"/my/programs/srv/deleteFavor.html",t,function(t){if(1==t)e&&e(t)})},getUserSubedPlaylists:function(t,e){return $.getJSON(i.main+"/my/tui/getUserSubedPlaylists.html",t,function(t){e&&e(t)})},cancelSubscribePlaylist:function(t,e){return $.get(i.main+"/playlist/service/cancelSubscribePlaylist.html",t,function(t){e&&e(t)})},getRecommendUsers:function(t,e){t=$.extend({size:10,keys:"å¨é¨"},t);return $.getJSON(i.main+"/watch/getRecommendUsers.do?jsoncallback=?",t,function(t){if(t.code)console&&console.error(t.msg);else e&&e(t)})}}});define("page/watch/model/sublist",["tui/event","tui/template","module/global","module/login/login","page/watch/model/api"],function(t,e,i,n,a){var o;var r=t.extend({items:[],byId:{},byType:{},initialize:function(){r.superClass.initialize.call(this);o=this},getItemById:function(t){return this.byId[t]||null},getItemsByType:function(t){return this.byType[t]||[]},getItemCount:function(t){if(t)return this.getItemsByType(t).length;else return this.items.length},index:function(t,e){var i=this;var n=e?i.items.length:0;t||(t=i.items);t=t.slice(0);if(!e){i.byId={};i.byType={};i.items=t}t.forEach(function(t,a){if(!t)return;i.byId[t.id]={index:a+n,data:t};i.byType[t.type]||(i.byType[t.type]=[]);i.byType[t.type].push(t);if(e)i.items.push(t)});i.trigger("sublist:change",[i.items])},fetch:function(t,e){var i=this;e=e||999;a.subListGroupAlbum({uid:n.uid(),start:0,end:e,order:t||0},function(t){var e=[];var n=t&&t.data;if(n){e=e.concat(n.type1,n.type2);i.updateCount=n.updateCount;i.index(e);i.trigger("sublist:data",[0,e]);i.isDataLoaded=true}})},unSub:function(t,e,i){var o=this;var r=this.items;a.unSub({uid:n.uid(),subId:t,type:e},function(n){var a=o.getItemById(t);o.prevItemsData=r.slice(0);r.splice(a.index,1);o.index();o.trigger("unsubed",[t,e,i])})},reSub:function(t,e,i){var o=this;a.sub({uid:n.uid(),subId:t,type:e},function(n){var a=n&&n.data;if(a){if(o.prevItemsData){o.items=o.prevItemsData;o.index();o.prevItemsData=null}o.trigger("resubed",[t,e,i])}})},addSub:function(t,e){var i=this;var o=this.items;var r=1==e?"albumDetail":"userDetail";a[r]({id:t,uid:n.uid()},function(n){var a=n&&n.data;if(a){o.unshift({added:true,top:false,id:t,type:e,title:a.albumName||a.nickname||a.username,smallPic:a.albumPicUrl||a.userpic,updateCount:a.updateCount||0});i.index(o);i.trigger("subadded",[o[0],e])}})},removeSub:function(t,e){var i=this.getItemById(t);if(i){var n=this.items.splice(i.index,1);this.index();this.trigger("subremoved",[n[0],i.index])}},search:function(t){this._searchKW=t=t.toLowerCase();var i=this;var n=[];var a=t.length;var o=this.items;var r=o.length-1;if(""==t){this.trigger("sublist:data",[0,o]);return}o.forEach(function(s,u){if(i._searchKW!=t)return false;var c=e.escapeHTML(s.title);var l=c.toLowerCase().indexOf(t);if(l>-1){s=o.slice(u,u+1)[0];s._title=c.substring(0,l)+"<em>"+c.substring(l,l+a)+"</em>"+c.substring(l+a);s._highlight=true;n.push(s)}if(r==u)i.trigger("sublist:data",[1,n])})},expose:function(t,e){var i=this;var o=n.uid();if(t&&e)a.expose({sourceId:e,sourceType:t,uid:o},function(n){i.trigger("expose",[t,e])});else if(t)a.exposeByType({type:t,uid:o},function(e){i.trigger("expose",[t])})}});r.get=function(){return o||null};r.create=function(){if(!o)o=new r;return o};r.remove=function(){if(o)o=null};return r});define("page/watch/model/setting",["tui/cookie","tui/browser"],function(t,e){var i={expires:365,domain:"tudou.com",path:"/"};var n=JSON.parse(t("watch_center_setting")||"{}");var a={getItem:function(t){return t?n[t]:n},setItem:function(e,a){n[e]=a;t("watch_center_setting",JSON.stringify(n),i)}};window._watch_setting=a;return a});define("page/watch/model/local-record",["module/global"],function(t){var e="mysub-action-data";var i=t.storage;var n;i.getItem(e,function(t){t||(t="{}");n=JSON.parse(t)});var a={add:function(t,a,o){o||(o=1);if(n[t])n[t]["C"]+=o;else{a["C"]=o;n[t]=a}try{i.setItem(e,JSON.stringify(n))}catch(r){this.remove()}},remove:function(t){if(!t){n=null;i.removeItem(e)}else{n[t]=null;delete n[t];i.setItem(e,JSON.stringify(n))}},size:function(t){var e=0;for(var i in n)if(!t||t&&n[i]["type"]==t)e++;return e},get:function(t){return t?n&&n[t]:n},getCountById:function(t){var e=this.get(t);return e&&e["C"]||0},getAllCountByType:function(t){var e=0;for(var i in n)if(n[i]["type"]==t)e+=n[i]["C"];return e},getAllCount:function(){var t=0;for(var e in n)t+=n[e]["C"];return t}};return a});define("tui/countdown",[],function(){return function(t,e,i){var e=e||3;var n;var t=$(t).html(e);n=setInterval(function(){e--;if(e<=0){clearInterval(n);if(i)i()}t.html(e)},1e3);return{close:function(){clearInterval(n)}}}});define("module/stat/expose",["tui/class","tui/net","module/stat/common","module/global"],function(t,e,i,n,a,o){var r=window.rqtime||new Date;return t(i.mix({initialize:function(t,e){this.element=t;this.eventType=e?2:1;this.startTime=new Date;this.endTime=0;this.isSent=false;this.__callbacks=[]},start:function(){this.startTime=new Date;this.isSent=false},end:function(){this.endTime=new Date;this.send()},send:function(){var t=i.getPositionCode(this.element);var a=this.endTime||new Date;var o=encodeURIComponent;var s=this.getData(t);var u={pvid:n.pvid||"",chid:window.cid||0,uid:n.uid||0,juid:n.juid||"",seid:n.seid||"",url:location.href,rurl:i.referrer||"",mcode:t,etype:this.eventType,etime:a-r,ltime:a-this.startTime,ext:i.param(s)};e.getRequest("http://p.l.youku.com/texpose?"+i.param(u)+"&r="+ +new Date);var c=[];$.each(s,function(t,e){c.push(o(t)+"="+o(e))});var l=c.join("|");var d=[n.pvid||"",window.cid||0,n.uid||0,n.juid||"",n.seid||"",o(i.referrer||""),o(t),this.eventType,a-r,a-this.startTime,l].join("|");e.getRequest("http://stats.tudou.com/ep1/?v=1&s="+d+"&r="+(new Date).getTime());this.isSent=true}},true))});define("module/stat/ck",["tui/cookie","tui/net","module/login/login","module/stat/common","module/global"],function(t,e,i,n,a,o,r){var s=screen.width;var u=screen.height;function c(t,e){return t.replace(/\/?#.*|\/$/,"")===e.replace(/\/?#.*|\/$/,"")}window.tudouClickStat=n.mix({pvid:a.pvid,getRequest:function(o){var r=$(window).width();var s=$(window).height();var u=$(document).width();var c=o.eventId;var l=o.pvid;var d=o.channelId;var f=a.uid;var m=o.screenW;var p=o.screenH;var h=r;var v=s;var g=o.pageX-o.scrollLeft-Math.round(r/2);var w=o.pageY-o.scrollTop;var b=o.pageX-Math.round(u/2);var _=o.pageY;var y=a.juid;var k=a.seid;var x=encodeURIComponent(o.positionCode||"");var S=encodeURIComponent(n.referrer||"");var C=encodeURIComponent(o.targetUrl||"");var I="";var T=o.appData;T.referhost=t("referhost")||"";if(i.uid()){var j=$.trim(t("u_data")).split("_");if(j.length)j.forEach(function(t){t=t.split("|");T[t[0]]=t[1]})}$.extend(T,this.getData(c,x,o.event));var D={eid:c,pvid:l,chid:d,uid:f,juid:y,seid:k,sw:m,sh:p,bw:h,bh:v,bpx:g,bpy:w,ppx:b,ppy:_,pcode:o.positionCode||"",url:location.href,rurl:n.referrer||"",turl:o.targetUrl||"",ext:n.param(T)};e.getRequest("http://p.l.youku.com/tclick?"+n.param(D)+"&r="+ +new Date);var N=[];$.each(T,function(t,e){N.push(encodeURIComponent(t)+"="+encodeURIComponent(e))});I=N.join("|");var O=[c,l,d,f,m,p,h,v,g,w,b,_,y,k,x,S,C,I].join("|");e.getRequest("http://stats.tudou.com/ck2/?s="+O+"&r="+ +new Date)},send:function(t,e,i,a){var o=this;if(!t.target)t.target=t.srcElement||document;if(null==t.pageX&&null!=t.clientX){var r=document.documentElement;var l=document.body;t.pageX=o.clientX+(r&&r.scrollLeft||l&&l.scrollLeft||0)-(r&&r.clientLeft||l&&l.clientLeft||0);t.pageY=o.clientY+(r&&r.scrollTop||l&&l.scrollTop||0)-(r&&r.clientTop||l&&l.clientTop||0)}if("undefined"==typeof t.pageX)return;var d=t.target;if(!a){d=n.getStatTarget(t.target);if(!d)return}if("A"==d.nodeName&&$(d).attr("data-openurl"))return;var f=false;var m=n.getTrueLink(d);if("A"!==d.nodeName||""===m||c(m,location.href))f=true;if("ck"==$(d).attr("data-stat-role")&&""!==m)f=false;var p=$(d).attr("data-ck");if(p)$.each(p.split("&"),function(t,i){var n=i.split("=");if(2!==n.length)return;e[n[0]]=n[1]});o.getRequest({event:t,eventId:f?2:1,pvid:o.pvid,channelId:window.cid||0,positionCode:n.getPositionCode(d),targetUrl:f?"":m,pageX:t.pageX,pageY:t.pageY,scrollLeft:$(window).scrollLeft(),scrollTop:$(window).scrollTop(),screenW:s,screenH:u,appData:e||{}});if(i)i.call(o,{isButton:f,targetUrl:m})},init:function(){var t=this;$(document.body).mousedown(function(e){t.send(e,{})})},getXpathFromPositionCode:n.getXpathFromPositionCode,getElementByXPath:n.getElementByXPath,getTrueLink:n.getTrueLink,getStatTarget:n.getStatTarget});r.tudouClickStat=tudouClickStat;r.init=function(){tudouClickStat.init()}});define("module/responsive",["tui/event"],function(t){var e=null;var i=$(window);var n="responsed";var a="resize";var o=null;var r=t.extend({initialize:function(t){var e=this;r.superClass.initialize.call(e)},init:function(t){var e=this;e.divide=t;var n;i.resize(function(){n&&clearTimeout(n);n=setTimeout(function(){e.check()},100)});return e},check:function(){var t=this;var e=t.viewPort();var i=e.width;if(o&&i>=o.s[0]&&i<o.s[1]){t.fire(a,[i,e.height,o.v]);return}o=t._getCurRes();var r=$("body")[0];r.className=r.className.replace(/\s*\bw\d+\b/g,"")+" w"+o.v;t.fire(a,[i,e.height,o.v]);t.fire(n,[o.v])},_getCurRes:function(){var t=this;var e=t.viewPort().width;var i;$.each(t.divide,function(t,n){var a=n.s[0];var o=n.s[1];if(e>=a&&e<o){i=n;return false}});return i},getCurWidth:function(){var t=this._getCurRes();return t.v},viewPort:function(){var t=window,e="inner";var i=this.padding||0;if(!("innerWidth"in window)){e="client";t=document.documentElement||document.body}return{width:t[e+"Width"]-i,height:t[e+"Height"]}}});r.getInstance=function(){if(e)return e;else return e=new r};return r.getInstance()});define("tui/scrollbar",["tui/event","tui/drag"],function(t,e){var i=t.extend({initialize:function(t,n){n=n||{};var a=this;i.superClass.initialize.apply(a,arguments);a.isShow=false;a.barMinSize=n.barMinSize||60;a.wheelDelta=n.wheelDelta||60;a.prevNextDelta=n.prevNextDelta||a.wheelDelta;a.horizontalScroll=n.horizontalScroll||false;var o=a.horizontalScroll;var r=$(t);var s=n.container||r.parent();var u=n.scrollbar||$('<div class="scrollbar_container"><a href="#" class="scrollbar_prev"></a><div class="scrollbar_track"><span class="scrollbar_bar"></span></div><a href="#" class="scrollbar_next"></a></div>');var c=u.find(".scrollbar_track");var l=u.find(".scrollbar_bar");var d=u.find(".scrollbar_prev");var f=u.find(".scrollbar_next");if(!n.scrollbar)s.after(u);var m=new e(l,{limit:true});m.bind("drag:move",function(t,e){a.scrollTo(a.horizontalScroll?t:e)});s.bind("scroll",function(t){a.updateBarPosition()});if($.browser.mozilla)s[0].addEventListener("DOMMouseScroll",function(t){var e=t.detail>0?a.wheelDelta:-a.wheelDelta;s[0][o?"scrollLeft":"scrollTop"]+=e*a._wheelRate;if(a.isShow)t.preventDefault()},false);else s[0].onmousewheel=function(t){t=t||window.event;var e=t.wheelDelta>0?-a.wheelDelta:a.wheelDelta;s[0][o?"scrollLeft":"scrollTop"]+=e*a._wheelRate;if(a.isShow){t.returnValue=false;return false}};l.click(function(t){t.stopPropagation()});c.click(function(t){t.preventDefault();a.scrollTo(t[o?"pageX":"pageY"]-c.offset()[o?"left":"top"]-a._barSize/2)});d.click(function(t){t.preventDefault();s[0][o?"scrollLeft":"scrollTop"]-=a.prevNextDelta});f.click(function(t){t.preventDefault();s[0][o?"scrollLeft":"scrollTop"]+=a.prevNextDelta});a.content=r;a.container=s;a.scrollbar=u;a.track=c;a.prev=d;a.next=f;a.bar=l;a._contentSize=0;a._containerSize=0;a._trackSize=0;a._barSize=0;a.update()},updateBarPosition:function(){var t=this.horizontalScroll;var e=this.container[t?"scrollLeft":"scrollTop"]();var i=(e*this._trackSize-e*this._barSize)/(this._contentSize-this._containerSize);i=i?i:0;this.bar.css(t?"left":"top",i);if(i>=this._trackSize-this._barSize)this.trigger("scroll:end")},scrollTo:function(t,e){var i=this.horizontalScroll;var n=e?t:(t*this._contentSize-t*this._containerSize)/(this._trackSize-this._barSize);this.container[i?"scrollLeft":"scrollTop"](n?n:0)},update:function(){this.show();var t=this.horizontalScroll;var e=t?"width":"height";this._contentSize=this.content[t?"innerWidth":"innerHeight"]();this._containerSize=this.container[e]();this._trackSize=this.track[e]();this._wheelRate=Math.min(Math.atan(this._contentSize/3e3),1);if(this._contentSize>this._containerSize){this._barSize=Math.floor(this._containerSize*this._trackSize/this._contentSize);this._barSize=Math.max(this._barSize,this.barMinSize);this.bar.css(e,this._barSize);this.updateBarPosition()}else this.hide()},show:function(){this.isShow=true;this.scrollbar.show();this.trigger("show")},hide:function(){this.isShow=false;this.scrollbar.hide();this.trigger("hide")}});return i});define("tui/util/url",[],function(t,e){function i(t,e){if(!$.browser.msie)if(e)window.open(t,e);else location.href=t;else{var i=$('<a href="'+t+'" target="'+(e||"_self")+'" data-openurl="true"> </a>')[0];document.body.appendChild(i);i.click()}}function n(t){t=t||location.search||location.href;var e={},i=t.match(/[^\s&?#=\/]+=[^\s&?#=]+/g);if(i)for(var n=0,a=i.length;n<a;n++){var o=i[n].split("=");e[o[0]]=decodeURIComponent(o[1])}return e}e.openURL=i;e.params=n});define("module/sidebar/view",["tui/view","tui/browser","tui/art","tui/dialog","tui/util/url","tui/cookie","tui/scrollbar","module/domain","module/subscribe","module/responsive","module/login/login","module/stat/ck","module/stat/expose","module/global","tui/countdown","page/watch/model/local-record","page/watch/model/setting","page/watch/model/sublist","page/watch/model/rec-new","module/sidebar/recent-rec-panel","module/sidebar/curvefly"],function(t,e,i,n,a,o,r,s,u,c,l,d,f,m,p,h,v,g,w,b,_){var y=$(window);var k=$(document.body);var x=$("#gSilderNav");var S=y.height();var C=$.browser.msie&&parseInt($.browser.version)||0;var I=6==C;var T=false;var j=false;var D=false;var N="";var O=30;var L=34;var M=i.compile('<li data-sub="<%=item.userId%>" class="subtn">\n<a href="<%=$domain.url.main%>/home/_<%=item.userId%>/?from=gsidebar_rec" class="sub-item" data-pos="<%=index%>" title="<%=item.nickname%>"<% if (isPlayPage) { %> target="_blank"<% } %>>\n<span class="img"><img src="<%=item.userpic%>" /></span>\n<span class="sub-item-title"><%=item.nickname%></span>\n<b>æ¨è</b>\n</a>\n<div class="gbtn_sub gBtnSub" data-id="<%=item.userId%>"></div>\n</li>\n');var U=i.compile('<li data-act="album" data-group="1">\n<a href="<%=$domain.url.main%>/watch/subscribe/?type=album" class="sub-item sub-group sub-group-mv" data-role="pagex"<% if (isPlayPage) { %> target="_blank"<% } %>><span class="img"><i class="iconfont">&#xe645;</i></span>å§é\n<% if (count && count > 99) { %>\n<b class="p99" title="<%=count%>ä¸ªæ´æ°">99+</b>\n<% } else { %>\n<b><%=count || \'\'%></b>\n<% } %>\n<i class="iconfont">&#xe646;</i></a>\n</li>\n');var E=t.extend({tpl:i.compile('<li data-act="<%=item.id%>" data-type="<%=item.type%>" data-title="<%=item.title%>">\n<a href="<%=$domain.url.main%><% if (item.type == 1) { %>/watch/home/?id=<%=item.id%>&type=album<% } else { %>/home/_<%=item.id%>/?from=gsidebar&count=<%=item.updateCount%><% } %>" class="sub-item" title="<%=item.title%>"<% if (item.type == 1) { %> data-role="pagex"<% } %><% if (isPlayPage) { %> target="_blank"<% } %>><span class="img"><img<% if (type < 1 && index > 19) { %> src="http://css.tudouui.com/skin/__g/img/sprite.gif" data-src="<%=item.smallPic%>" <% } else { %> src="<%=item.smallPic%>"<% } %> /></span><% if (type == 1 && item._highlight) { %><%==item._title%><% } else { %><%=item.title%><% } %>\n<% if (item.updateCount && item.updateCount > 99) { %>\n<b class="p99" title="<%=item.updateCount%>ä¸ªæ´æ°">99+</b>\n<% } else { %>\n<b><%=item.updateCount || \'\'%></b>\n<% } %>\n<i class="iconfont">&#xe646;</i></a>\n</li>\n'),events:{"click #gSideEdit":"edit","click .cancel":"cancel","click .del":"unSub","click .img":"fixClick","click .icon-cancel":"empty","click li[data-order]":"sort","click #gSideSubSort":"toggleSort","click #gRecentTipsClose":"_closeRecentTips","mousedown li[data-act=sub]":"clearUpdateCount","mousedown #gSideSubItems .sub-item":"_updateLocal","mouseleave #gSideSubSort":"leaveSort","click .g-side-login .btn":"toLogin","mouseenter .view_all":"openMore","mouseleave .view_all":"closeMore","mouseenter #gSideMore":"closeClear","mouseleave #gSideMore":"closeMore","click #gSideMenu [data-role=pagex]":"toLogin"},openMore:function(){this.closeClear();this.$sidemo.addClass("g-sidemo-expand");this.find(".view_all").addClass("hover");var t=this.$sidemo.find("[data-act]").length;if(t<4)this.$sidemo.css({bottom:100});this.updateScrollbar();this.loadImg()},closeClear:function(){if(this.moretimer)clearTimeout(this.moretimer)},closeMore:function(){this.closeClear();this.moretimer=setTimeout(function(){this.$sidemo.removeClass("g-sidemo-expand");this.find(".view_all").removeClass("hover")}.bind(this),550)},showTips:function(){var t=+new Date;var e=1e3*60*24*60;var i=this;m.storage.getItem("gsidetip",function(n){if(!n){m.storage.setItem("gsidetip",t);i.initTip()}else if(t-n>e){m.storage.setItem("gsidetip",t);i.initTip()}})},initTip:function(){var t='<div class="g-side-tip" id="gSideTip"><a href="#" class="close">x</a><a href="http://gc.tudou.com/index.html" '+N+' class="c">å» å¹¿åº ééå§ï¼<br>è®¢éæä½ åæ¬¢çèªé¢éï¼</a><i class="ankle ak1"><i class="ankle ak2"></i></i></div>';var e=this;this.$manage.append(t);p("",5,function(){e.removeTips()});this.$manage.on("click",".close",function(t){t.preventDefault();e.removeTips()})},removeTips:function(){var t=this.find("#gSideTip");if(t.length)t.remove()},initialize:function(){var t=this;t.setElement($("#gSideBar"));t.$subs=t.find("#gSideSubs");t.$list=t.find(".g-subs-list");t.$items=t.find("#gSideSubItems");t.$group=t.find("#gSideSubGroup");t.$recom=t.find("#gSideRecom");t.$ritems=t.find("#gSideRecomItems");t.$scroll=t.find("#gSideSubScroll");t.$scrollList=t.find(".g-sidesub-scroll");t.$count=t.find("#gSideSubCount");t.$msg=t.find("#gSideSubMessage");t.$sort=t.find("#gSideSubSort");t.$sidemo=t.find("#gSideMore");t.$manage=t.find(".g-side-manage");t.$loading=t.find(".gSideloading");var i=window.config&&window.config.pageId||window.pageId||0;T=i>=1&&i<=8||701==i;D=300==i;j=T||e.isPad;N=T?'target="_blank"':"";if(!l.uid())k.addClass("g-sidebar-guest");else{t.$el.removeClass("g-sidebar-init");t.showTips()}t._initStat();l.bind("after:login",t.afterLogin.bind(t));y.bind("resize",t.resize.bind(t));t.resize();t.$scrollList.bind("scroll",t.loadImg.bind(t));t.model=new g;t.model.bind("sublist:change",t.change.bind(t));t.model.bind("sublist:data",t.render.bind(t));t.model.bind("subremoved",t.removeItem.bind(t));t.model.bind("subadded",t.addItem.bind(t));t.model.bind("unsubed",t.unSubed.bind(t));t.model.bind("resubed",t.reSubed.bind(t));t.recom=new w;t.recom.bind("getrec:success",t.renderRec.bind(t));var n=v.getItem("subListOrder");t.order=$.isNumeric(n)?n:1;t.$sort.find("[data-order="+t.order+"]").addClass("current");var a='<div class="g-top-cartoon"><i class="i2"></i><i class="i1"></i></div>';if(!k.hasClass("g-sidebar-hide")){t.isExpanded=true;c.padding=200;t.initLoad();x.addClass("active");a='<div class="g-top-cartoon"><i class="i3"></i><i class="i1"></i></div>'}t.isFitTop=k.hasClass("g-sidebar-top");t.updateNum();t._recentRecommend();u.globalEvent.bind("sub:success",t.gAddSub.bind(t));u.globalEvent.bind("unsub:success",t.gUnSub.bind(t));if(!j)y.bind("resize",t.fitTop.bind(t));if(!e.isMobile&&!t.scrollbar)t.scrollbar=new r(t.$scroll,{barMinSize:30});x.on("click",t.toggleShow.bind(t));k.on("mousedown",t.bodyClick.bind(t));if(k.width()>1250)t.cartoon(a)},cartoon:function(t){var e=x.offset();var i=$(t);k.append(i);setTimeout(function(){i.css({left:e.left+70,top:13})},250);setTimeout(function(){i.css({opacity:0})},1e4)},toggleShow:function(t){t.preventDefault();if(!this.isExpanded){this.show();this.expand();$(".g-top-cartoon").html('<i class="i3"></i><i class="i1"></i>')}else{this.fold();$(".g-top-cartoon").html('<i class="i2"></i><i class="i1"></i>')}},bodyClick:function(t){var e=$(t.target||t.srcElement);if(!e.hasClass("g_slidernav")&&!e.closest("#gSideBar").length&&k.hasClass("g-sidebar-top")&&this.isExpanded)this.fold()},initLoad:function(){this.isLoaded=true;if(l.uid())this.model.one("sublist:data",this._subCountReady.bind(this));else this._sendExpose();this.loadSub()},nav:function(t){var e=this.$list.eq(1);if(!t)return;var i=this.find('[data-act="'+t+'"]');if(i.length){this.find(".current[data-act]").removeClass("current");i.addClass("current")}var n=e.find('[data-act="'+t+'"]');if(n.length&&$.isNumeric(t)){var a=e.height();var o=e[0].scrollTop;var r=n.offset().top-e.offset().top;if(r>o+a)e[0].scrollTop=r}},afterLogin:function(){k.removeClass("g-sidebar-guest");this.isRecLoaded=false;this.$items.empty();this.$ritems.empty();this.updateNum();this.loadSub();this._recentRecommend();this.showTips()},render:function(t,e){t=0;e=e||this.renderData||[];this.renderData=e;this.renderType=t;var i=this;var n=this.model;var a=[],o=e.length;var r=n.getItemCount(1);var u=n.getItemCount(2);var c=Math.floor((y.height()-420)/L);c=r?c-1:c;c=c<1?1:c;i.mainCount=c;e=n.getItemsByType(2);o=e.length||0;if(o){var d=0;for(var f=0,m=o>c?c:o;f<m;f++)a.push(i.tpl({type:t||0,index:d++,item:e[f],isPlayPage:T}));this.renderGroup(true);if(o>c){a.push('<li class="view_all"><a href="'+s.url.main+'/watch/subscribe/"'+N+" >æ¥çå¨é¨&gt;&gt;</a></li>");this.renderMore(e.slice(c),r)}this.$loading.remove();this.$items.html(a.join(""));if(o<c){this.trigger("sublist:loaded",[o,r]);this.$scroll.empty();this.closeMore()}var p=c-u;if((r&&u<5||!r&&u<6)&&p>0)!this.isRecLoaded&&this.recom.fetch(p,l.uid())}else{!this.isRecLoaded&&this.recom.fetch(u,l.uid());this.$items.empty();this.$recom.addClass("g-side-nosub");this.find(".g-subs-title").hide();this.find(".g-subs-recom").show()}},renderMore:function(t,e){if(this.renderTimer)clearTimeout(this.renderTimer);var i=this;var n=t.length||0;var a=[],o=0;var r=i.mainCount+Math.floor(310/L);this.renderTimer=setTimeout(function(){for(var s=0,u=n;s<u;s++)a.push(i.tpl({type:0,index:o++,item:t[s],isPlayPage:T}));this.$scroll.html(a.join(""));if(o>=r)this.$scrollList.height(r*L);this.trigger("sublist:loaded",[n,e])}.bind(this),150)},renderRec:function(t){var e=[];var i=Math.floor((y.height()-420)/L);var n=t.length;if(n>i&&!l.uid())n-=2;for(var a=0;a<n;a++){if(this.model.getItemById(t[a].ownerId))continue;e.push(M({item:t[a],index:a,isPlayPage:T}))}if(this.$el.hasClass("g-sidebar-init"))this.$el.removeClass("g-sidebar-init");this.$loading.remove();this.$ritems.html(e.join(""));this.$recom.show();new u({box:this.$ritems,app:"watch",type:2,from:15,skin:3,disRecom:1});this.isRecLoaded=true},renderGroup:function(t){var e=this.model;if(e.getItemCount(1))if(t)this.$group.html(U({count:e.updateCount["album"],isPlayPage:T}));
else;else this.$group.empty()},change:function(t){var e=t.length;if(e){var i=this.model.getItemCount(1);var n=this.model.getItemCount(2);this.$items.find(".empty").remove();this.$sort[e>4?"show":"hide"]();if(this.isRecLoaded){if(this.$ritems.find(".subtn").size()<=1)this.$recom.hide();if(this.$recom.hasClass("g-side-nosub"))this.$recom.removeClass("g-side-nosub")}}else if(this.isRecLoaded)this.$recom.addClass("g-side-nosub");else if(!this.$items.find(".empty").get(0))this.$items.append('<li class="empty">æ²¡æè®¢éé¢é</li>');this.renderGroup(true);this.trigger("sublist:update")},loadImg:function(){var t=this.$scrollList;var e=this.find("#gSideSubScroll");var i=this.$group.find("[data-group]").size();if(this.lazyTimer)clearTimeout(this.lazyTimer);this.lazyTimer=setTimeout(function(){var n=t[0].scrollTop;var a=t.height();var o=e.find("li[data-act]").outerHeight();for(var r=Math.floor(n/o);r<Math.ceil((n+a)/o);r++){var s=e.find("img").eq(r-i);var u=s.attr("data-src");if(u){s.removeAttr("data-src");s.attr("src",u)}}},50)},loadSub:function(){var t=this.order;var e=this.model;var i=this.recom;var n=Math.floor((y.height()-470)/L);if(n<1)return;l.isLogin2(function(a){if(a)e.fetch(t,99);else i.fetch(n||8,l.uid())})},fitTop:function(){var t=D?1140:1252;var e=this;var i=y.width();if(e._fitTimer)clearTimeout(e._fitTimer);e._fitTimer=setTimeout(function(){if(i<t&&!e.isFitTop){e.isFitTop=true;e.fold();k.addClass("g-sidebar-top")}if(i>=t&&e.isFitTop){e.show();e.isFitTop=false;e.expand();k.removeClass("g-sidebar-top")}},200)},show:function(t){if(!this.isLoaded){this._expose.eventType=2;this.initLoad()}},expand:function(){this.isExpanded=true;k.removeClass("g-sidebar-hide");x.addClass("active");if(!j){c.padding=200;c.check()}},fold:function(){this.isExpanded=false;k.addClass("g-sidebar-hide");x.removeClass("active");if(!j){c.padding=0;c.check()}},resize:function(){var t=this;if(t._resizeTimer)clearTimeout(t._resizeTimer);t._resizeTimer=setTimeout(function(){t.updateHeight()},100)},sort:function(t){var e=$(t.target);var i=parseInt(e.attr("data-order")||0);if(i==this.order)return;e.parents("ul").find("li").removeClass("current");e.addClass("current");v.setItem("subListOrder",this.order=parseInt(i));this.loadSub()},toggleSort:function(t){if(this.$sort.hasClass("hover"))this.$sort.removeClass("hover");else this.$sort.addClass("hover")},leaveSort:function(){this.$sort.removeClass("hover")},edit:function(t){var e="g-subs-del";var i=this.$subs.hasClass(e);this.$subs[i?"removeClass":"addClass"](e);t.preventDefault()},unSub:function(t){t.preventDefault();var e=t.target;var i=$("a"==e.nodeName.toLowerCase()?e:e.parentNode);var n=i.attr("data-type");var a=i.attr("data-id");this.model.unSub(a,n);if(this._timer&&this._timerCallback){clearTimeout(this._timer);this._timerCallback()}},cancel:function(t){t.preventDefault();if(this._timer){clearTimeout(this._timer);this._timer=this._timerCallback=null}var e=$(t.target);var i=e.attr("data-id");var n=e.attr("data-type");this.model.reSub(i,n)},unSubed:function(t,e,i){var n=this;var a=n.find('[data-act="'+t+'"]');a.slideUp(200);if(!i)this.$msg.html('æååæ¶è®¢é<a href="#" class="cancel" title="æ¤é" data-id="'+t+'" data-type="'+e+'">æ¤é</a>').slideDown(200);this._timerCallback=function(){n._timer=n._timerCallback=null;!i&&n.$msg.slideUp(200).empty();a.remove();n.mv2Main()};this._timer=setTimeout(this._timerCallback,700)},reSubed:function(t,e,i){var n=this;if(this._timer){clearTimeout(this._timer);this._timer=this._timerCallback=null}if(!i)this.$msg.slideUp(200);this.find('[data-act="'+t+'"]').slideDown(200)},gAddSub:function(t,e,i){this.model.addSub(t.subId,t.type);if(!this.isExpanded)this.gSubFly(i)},gUnSub:function(t){this.model.removeSub(t.subId,t.type)},gSubFly:function(t){var e=x.offset();var i=e.left+8;var n=e.top;var a=t.offset();var o=a.left;var r=a.top-4;if(j)_.create(o,r,i,n,null,18).start();else _.create(o,r,i,n).start()},addItem:function(t,e){if(2!=e){this.addGroupItem(e);return}var i=this;var n=this.get("app");var a=n&&n.params&&n.params.id||0;var o=$(i.tpl({type:0,index:0,item:t,isPlayPage:T}));if(a==t.id)o.addClass("current");o.addClass("added").hide();i.mv2Sub();o.prependTo(this.$items);if(C&&C<8)o.fadeIn(200);else o.slideDown(200);this.$recom.find("li[data-sub="+t.id+"]").remove();setTimeout(function(){o.removeClass("added")},6e3)},mv2Sub:function(){var t=this.$items;var e=t.find("li");var i=t.find(".view_all").length;var n=e.eq(e.length-(i?2:1));var a=this.$scroll;var o=this.$ritems.find("li");var r=o.length;if(r)o.eq(0).remove();if(1==r)this.$recom.empty();if(e.length<this.mainCount||r>0)return;if(!i)t.append('<li class="view_all"><a href="'+s.url.main+'/watch/subscribe/" '+N+">æ¥çå¨é¨&gt;&gt;</a></li>");a.prepend(n.show())},mv2Main:function(){var t=this.$list.eq(1).find("li");var e=t.eq(0);if(t.length<=0)this.$list.find(".view_all").remove();if(this.$list.eq(0).find("li").length>this.mainCount)return;if(t.length)this.$list.eq(0).find(".view_all").before(e)},addGroupItem:function(t){var e=this.$group.find("[data-group="+t+"]");e.addClass("added");this.$list.get(0).scrollTop=0;setTimeout(function(){e.removeClass("added")},6e3)},removeItem:function(t,e){var i=this;var n=this.$list.find("li[data-act="+t.id+"]");n.slideUp(200,function(){n.remove();i.mv2Main()})},updateHeight:function(){if(Math.abs(y.height()-S)<2*L||this.isRecLoaded)return;this.render();S=y.height()},updateScrollbar:function(){if(!e.isMobile&&this.scrollbar)this.scrollbar.update()},updateNum:function(){var t=this;l.isLogin2(function(e){if(e)$.getJSON(s.url.main+"/watch/sub/totalUpdateCount.do?jsoncallback=?",{uid:l.uid()},function(e){t._updateCountReady(e&&e.data||0);if(e&&e.data){t.$count.html(e.data>99?"99+":e.data).show();x.append('<em class="dot"></em>');t.trigger("getUpdateCount:success",[e])}})})},clearUpdateCount:function(){this._updateCount=0;this.$count.hide().empty();x.find(".dot").remove()},expose:function(t,e){if(t&&e){this.model.expose(t,e);this.$list.find("li[data-act="+e+"] b").empty()}else if(t){this.model.expose(t);this.$list.find("li[data-group="+t+"] b").empty()}},fixClick:function(t){var e=C&&C<8;if(!e)return;var i=$(t.target).parents("a");window.location.replace(i.attr("href"))},toLogin:function(t){var e=$(t.target).closest("li");var i=e.attr("data-act");var n=e.find("a");var o=n.attr("href");var r=l.uid();if(!e.length){t.preventDefault();l.needLogin();return}if(!r&&"sub"==i){t.preventDefault();l.needLogin(function(){if(o&&o.length>5)a.openURL(o,n.attr("target")||"")});return}if(0!=window.location.pathname.indexOf("/watch"))a.openURL(o,n.attr("target")||"")},_recentRecommend:function(t,e){if(l.uid()&&location.href.indexOf("/watch/")>-1){this.recPanel=new b;this.recPanel.bind("suball:success",this._recentAllSubed.bind(this));if(!this.isLoaded){this._expose.eventType=2;this.initLoad()}}},_closeRecentTips:function(t){t.preventDefault();this.find(".g-recent-subtips").remove();this.$list.find(".added").removeClass("added")},_recentAllSubed:function(t){var e=this;setTimeout(function(){e.model.index(t,true);e.change(t);t.forEach(function(t){e.addItem(t,t.type)});e.$subs.append('<div class="g-recent-subtips"><a href="#" id="gRecentTipsClose">ç¥éå¦</a></div>');e.trigger("recentallsubed")},300)},_initStat:function(){var t=this;t._expose=new f(t.$el);t._expose.addData(function(){return t._getExtData()});d.tudouClickStat.addData(function(){return t._getExtData()})},_getExtData:function(){return{etype:this._expose&&this._expose.eventType||1,subCount:this.model&&this.model.getItemCount()||0,updateCount:this._updateCount||0}},_sendExpose:function(){var t=this;if(t._expose.isSent)return;l.isLogin2(function(e){if(e){if(t._updateCountLoaded&&t._subCountLoaded)t._expose.send()}else t._expose.send()})},_subCountReady:function(){this._subCountLoaded=true;this._sendExpose()},_updateCountReady:function(t){this._updateCountLoaded=true;this._updateCount=t||0;this._sendExpose()},_updateLocal:function(t){var e=$(t.currentTarget).closest("li");var i=parseInt(e.attr("data-act")||0);var n=parseInt(e.attr("data-type")||0);var a=e.attr("data-title")||"";h.add(i,{type:n,title:a},2)},_sendLocalStat:function(){},_recUserClick:function(t){t&&t.preventDefault();var e=$(t.currentTarget);var i=e.attr("href");var n=e.attr("data-pos");var o=e.attr("target")||"";this.recom.userClick(n);a.openURL(i,o)}});i.helper("$domain",s);function z(t,e,i){t||(t={});var n=document.createDocumentFragment("div");n.id=e;t.target=n;t.pageX=0;t.pageY=0;window.tudouClickStat.send(t,i||{},function(){},true)}E.init=function(){if($("#gSideBar")[0])return E.create("gsidebar");return null};E.get=function(){var t=E.instance("gsidebar");return t||this.init()};return E});define("module/uicommon",["tui/browser","tui/util/url"],function(t,e){return function(){if(!t.isPad&&!t.isMobile)$(document.body).delegate(".pack .pic,.packs","mouseenter",function(){var t=$(this);var e=t.hasClass("packs")?t:t.closest(".pack");var i=e.find(".caption a");if(e.hasClass("disable"))return;var n=e.attr("class").split(" ");var a="packs packs_plist packs_plist2 pack_albums pack_albums2";var o="pack_hover";n[0]&&n.forEach(function(t){if(""!=$.trim(t)&&new RegExp(t+"\\b").test(a)){o="pack_hover packs_hover";e.find(".txt, .info").attr({"data-stat-role":"ck","data-stat-href":i.attr("href")})}});e.attr({"data-stat-role":"ck","data-stat-href":i.attr("href")});e.addClass(o)}).delegate(".pack","mouseleave",function(){$(this).removeClass("pack_hover packs_hover")}).delegate(".packs_hover","click",function(t){if("a"!=t.target.nodeName.toLowerCase()){var i=$(this);var n=i.find(".caption a");n[0]&&e.openURL(n.attr("href"),n.attr("target"))}})}});define("tui/easing",[],function(t,e){jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,n,a){return jQuery.easing[jQuery.easing.def](t,e,i,n,a)},easeInQuad:function(t,e,i,n,a){return n*(e/=a)*e+i},easeOutQuad:function(t,e,i,n,a){return-n*(e/=a)*(e-2)+i},easeInOutQuad:function(t,e,i,n,a){if((e/=a/2)<1)return n/2*e*e*e+i;return n/2*((e-=2)*e*e+2)+i},easeInBack:function(t,e,i,n,a,o){if(void 0==o)o=1.70158;return n*(e/=a)*e*((o+1)*e-o)+i},easeOutBack:function(t,e,i,n,a,o){if(void 0==o)o=1.70158;return n*((e=e/a-1)*e*((o+1)*e+o)+1)+i},easeOutBounce:function(t,e,i,n,a){if((e/=a)<1/2.75)return n*7.5625*e*e+i;else if(e<2/2.75)return n*(7.5625*(e-=1.5/2.75)*e+.75)+i;else if(e<2.5/2.75)return n*(7.5625*(e-=2.25/2.75)*e+.9375)+i;else return n*(7.5625*(e-=2.625/2.75)*e+.984375)+i}})});define("tui/flyin",[],function(){return function(t,e){var i=$(t.source);var n=$(t.target);var a=t.pos||{left:0,top:0};var o=t.duration||300;var r=t.easing||"linear";if(t.target)a=n.offset();var s=i.clone();$(document.body).append(s);if(t.className)s.addClass(t.className);var u=i.offset();u.position="absolute";u.width=i.width();u.height=i.height();u.zIndex=9999;s.css(u);var c={opacity:t.opacity||1,left:a.left,top:a.top};if(void 0!==t.opacity)c.opacity=true===t.opacity?0:t.opacity;if(void 0!==t.width)c.width=true===t.width?n.width():t.width;if(void 0!==t.height)c.height=true===t.height?n.height():t.height;s.animate(c,o,r,function(){s.remove();e&&e()})}});define("page/btn/btn",["module/domain","module/global","tui/art","tui/cookie","module/login/login","tui/view","tui/util/url","module/subscribe","tui/flyin","tui/easing"],function(t,e,i,n,a,o,r,s,u){if(true===window.NO_GLOBAL_POSITION_BTN)return;var c=$(window);var l=0;var d=$.browser.msie&&parseInt($.browser.version)<7;var f=null;var m="watchcenternum";var p="watchcentertime";var h=$(document.body);var v=o.extend({subDetailTpl:'<div class="hd">\n<i class="iconfont">&#xe637;</i><span>æçè®¢é</span>\n<a href="#" class="sub_close"><i class="iconfont">&#xe63f;</i></a>\n</div>\n<div class="bd">\n<div class="sub_list">\n<%if(!!subNum){%>\n<div class="loading"></div>\n<!-- <p class="noupdate">ä½ è®¢éçé¢éææ æ´æ°</p> -->\n<%}%>\n</div>\n</div>\n<div class="ft">\n<a class="sub_more" href="<%=domain.domain.main%>/watch/subscribe" target="_blank">\n<%if(!!subNum){%>\næ¥çå¨é¨ <span class="sub_totalnum"></span>\n<%}else{%>\n<span class="sub_more_big">æ¥çæçè®¢é</span>\n<%}%>\n</a>\n</div>\n',subDetailListTpl:'<ul>\n<%list.forEach(function(o, i){%>\n<li class="sub_item<%if(o.type==1){%> sub_item_album<%}%>">\n<div class="sub_icon">\n<%if(o.type === 1){%>\n<a href="<%=getUrl(o.type, o.code)%>" target="_blank"><img src="<%=o.pic%>" /></a>\n<%}else{%>\n<a href="<%=getUrl(o.type, o.id)%>" target="_blank"><img src="<%=o.pic%>" /></a>\n<%}%>\n</div>\n<div class="sub_con">\n<%if(o.type === 1){%>\n<a href="<%=getUrl(o.type, o.code)%>" target="_blank" class="sub_title"><%=o.title%></a>\n<%}else{%>\n<a href="<%=getUrl(o.type, o.id)%>" target="_blank" class="sub_title"><%=o.title%></a>\n<%}%>\n<p><%if(o.lastItem){%><a href="<%=o.lastItem.playLink%>" target="_blank"><%=o.lastItem.title%></a><%}%></p>\n</div>\n<div class="update_num"><span><%=o.updateCount%></span>ä¸ªæ´æ°</div>\n</li>\n<%});%>\n</ul>',initialize:function(){var t=this;t.bWith=980;var e=t.appObj={};h.append(t.$el);t.subNum=0;t.isSubOpen=false;t.lastCloseSubNum=0;t.resize();c.bind("resize",function(){var e=c.width();if(l==e)return;l=e;t.resize()});if(d)c.bind("scroll",t.resize.bind(t));c.bind("scroll",i);i();function i(){var t=c.scrollTop();var i=c.height();for(var n in e){var a=e[n].scroll;if($.isFunction(a))a.call(e[n],t,i)}}},bodyWith:function(t){this.bWith=t;l=0;this.resize()},resize:function(){var t=this;var e=c.width();var i=t.appObj;for(var n in i){var a=i[n].resize;if($.isFunction(a))a.call(i[n],e,t.bWith)}if(d){var o=c.scrollTop()+c.height();var r=t.$el;r.css("top",o-r.height()-80)}},add:function(t,e){var i=this;if(i.appObj[t])return;i.appObj[t]=e;var n=e.$el=$(e.el);if(e.click)n.click(function(t){t.preventDefault();e.click.call(e)});i.$el[e.method?e.method:"prepend"](n);if(true==e.autoRun)e.click.call(e);return e},get:function(t){return this.appObj[t]||this.appObj},ewm:function(t,e){},showSub:function(){var t=this;var e=t.lastCloseSubNum!=t.subNum;$(".watchcenter",t.$el).addClass("watchcenter_hide");if(!t._subDetail){t._subDetail=$('<div class="sub_detail sub_panel" id="subDetail" />').appendTo(t.$el);t._renderSub()}t.$subList=$(".sub_list",t._subDetail);t._subDetail.slideDown(function(){if(!!t.subNum&&e){t.$subList.html('<div class="loading" />');t.loadSubList()}});t.isSubOpen=true},hideSub:function(t){var e=this;t.preventDefault();e.isSubOpen=false;e.lastCloseSubNum=e.subNum;$(".sub_panel",e.$el).slideUp();$(".watchcenter",e.$el).removeClass("watchcenter_hide")},gotoWatchCenter:function(e){var i=this;e&&e.preventDefault();if(!a.uid())a.needLogin(function(){});else r.openURL(t.domain.main+"/watch/subscribe","_blank")},showSubedContent:function(){var t=this;var e=$(".watchcenter",t.$el);var i=e.offset().left;var n=e.offset().top;var a=$('<div id="sub_success" class="sub_success"><i class="iconfont">&#xe647;</i><span>è®¢éæå</span></div>').appendTo(e);e.removeClass("watchcenter_hide");$("#sub_success").slideDown();setTimeout(function(){$("#sub_success").slideUp(function(){$(this).remove()})},3e3)},_renderSub:function(){var e=this;var n=i.compile(e.subDetailTpl)({subNum:e.subNum,domain:t});e._subDetail.html(n)},updateSub:function(){var t=this;var i=5*1e3*60;var n=g.get("watchcenter").$el;e.storage.getItem(m,function(e){if(e&&parseInt(e)){t.subNum=parseInt(e);t._updateSubNum(e)}});e.storage.getItem(p,function(n){var a=+new Date;n=n||0;n=parseInt(n);if(a>n+i){e.storage.setItem(p,a);t.loadSub()}});f=setTimeout(t.updateSub.bind(t),i)},loadSub:function(){var i=this;var n=g.get("watchcenter").$el;$.getJSON(t.domain.main+"/watch/sub/totalUpdateCount.do?jsoncallback=?",{uid:a.uid()},function(t){if(!t.code){i.subNum=t.data;e.storage.setItem(m,t.data);n.find("b").remove();i._updateSubNum(t.data);if(t.data)i.autoOpen();i.trigger("getUpdateCount:success",[t])}},"jsonp")},loadSubList:function(){var e=this;var n=null;var o=[];var r=[];var s;$.getJSON(t.domain.main+"/watch/sub/updateListLastItem.do?jsoncallback=?",{uid:a.uid(),start:0,end:10,base:false,itemShowType:1},function(t){if(t&&t.data){$.each(t.data,function(t,e){if(1==e.type&&e.updateCount)n=e;if(2==e.type&&e.updateCount)o.push(e)});if(n){r=r.concat(o.slice(0,2));r.push(n)}else r=o.slice(0,3);s=i.compile(e.subDetailListTpl)({list:r,getUrl:e._getWatchCenterUrl});e.$subList.html(s)}},"jsonp")},_updateSubNum:function(t){var e=this;var i=g.get("watchcenter").$el;if(t){i.append("<b>"+(t>99?"...":t)+"</b>");i.attr("title",t+"ä¸ªæ°è§é¢")}},_getWatchCenterUrl:function(e,i){var n=t.domain.main+"/home/_"+i+"/";if(1==e)n=t.domain.main+"/albumcover/"+i+".html";return n},autoOpen:function(){var t=this;if(!+n("_sub_autoopen")&&!t.hasAutoOpen){t.showSub();n("_sub_autoopen",1,{domain:"tudou.com",path:"/",expires:1})}t.hasAutoOpen=true},shakeInit:function(t,e,i,n,a){var o=this;o.shakeObj=t;o.shakeLeft=parseInt(t.css("left"));o.shakeBottom=parseInt(t.css("bottom"));o.shakeRate=e;o.shakeRange=n;o.shakeSpeed=i;o.shakeRangeTime=a;o.shakeTime=null;o.shakeState=0;o.shakeStart()},shakeStart:function(){var t=this;if(0==t.shakeState&&!d){t._shakeStart();t.shakeState=1}else;setTimeout(function(){t.shakeStop()},t.shakeRangeTime)},_shakeStart:function(){var t=this;if(parseInt(t.shakeObj.css("left"))==t.shakeLeft-t.shakeRange){t.shakeObj.css("bottom",t.shakeBottom+1);setTimeout(function(){t.shakeObj.css("left",t.shakeLeft+t.shakeRange)},t.shakeRate)}else{t.shakeObj.css("bottom",t.shakeBottom-1);setTimeout(function(){t.shakeObj.css("left",t.shakeLeft-t.shakeRange)},t.shakeRate)}t.shakeTime=setTimeout(function(){t._shakeStart()},t.shakeSpeed)},shakeStop:function(){var t=this;clearTimeout(t.shakeTime);t.shakeState=0;setTimeout(function(){t.shakeObj.css("left",t.shakeLeft);t.shakeObj.css("bottom",t.shakeBottom);$(".sub_panel",t.$el).hide();$(".watchcenter",t.$el).addClass("watchcenter_hide");t.showSubedContent()},100)},addEffect:function(t,e){if(this.isHideSub())return;var i=this;var n=i.get("watchcenter").$el;var a=1==t.type?"album":"home";var o=1==t.type?e.p_s_s:e.userpic;if(!this.isSubOpen){h.addClass("subing");var r=$('<div class="sub_imgwrap" />').appendTo(h);var s=$('<img src="'+o+'" class="sub_img_'+a+'" />').appendTo(r).css({top:n.offset().top-300}).load(function(){u({source:s,target:n,duration:800,easing:"easeOutBounce"},function(){r.remove();h.removeClass("subing")})})}setTimeout(function(){i.shakeInit(n,20,70,3,500)},300)},isHideSub:function(){return window.pageId>=2e3||8==window.pageId}});var g=new v({id:"gBtn",className:"gbtn"});function w(t,e){if(t>e)this.$el.addClass("ttop_show");else this.$el.removeClass("ttop_show")}g.add("goTop",{el:'<a href="#" class="btn ttop" title="è¿åé¡¶é¨"><i class="iconfont">&#xe641;</i>è¿åé¡¶é¨</a>',scroll:w,click:function(){$(window).scrollTop(0)}});g.add("help",{el:'<a href="'+t.url.main+'/service/feedback/" target="_blank" class="btn help" title="å¸®å©åé¦"><i class="iconfont">&#xe60f;</i><span>å¸®å©åé¦</span></a>'});return g});define("tui/util",["tui/util/date","tui/util/num","tui/util/str","tui/util/url"],function(t,e,i,n){return $.extend({},t,e,i,n)});define("module/user/notify",["tui/util","tui/art","tui/event","module/domain","module/login/login"],function(t,e,i,n,a,o,r){var s='<i class="caret"><i></i></i>\n<div class="g_dropdown_menu">\n<iframe src="about:blank" class="mask" frameborder="0"></iframe>\n<ul>\n<%if(list == \'login\'){%>\n<li class="none bdnone" style="cursor: pointer">æ¨è¿æ²¡æç»å½ã</li>\n<%}else if(list.length == 0){%>\n<li class="none bdnone">æ¨æè¿æ²¡ææ¶å°æ°çæ¶æ¯</li>\n<%}else{\nvar length = list.length - 1;\nlist.forEach(function(o, i){\nvar msg = o.msg;\n%>    \n<li>\n<span class="th"><%==o.stype%></span>\n<div class="td">\n<span class="t elis"><%==msg.title%></span>\n<span class="desc elis"><%==msg.content%></span>\n</div>\n<span class="tn"><%=o.count%></span>\n<a class="link" href="<%=o.link%>" target="_blank" ></a>\n</li>\n<%});%>\n<li class="more">\n<a href="/my/center/message.action" target="_blank">æ¥çå¨é¨</a>\n</li>\n<%}%>\n</ul>\n</div>';var u=null;var c=a.uid();var l=$("#gTopMessage");var d=['<i class="iconfont">&#xe63b; </i>','<i class="iconfont">&#xe63c; </i>','<i class="iconfont">&#xe62b; </i>','<i class="iconfont">&#xe634; </i>'];var f=[n.url.main+"/my/center/message.action",n.url.main+"/my/center/comment/myRecComments.do",n.url.message+"/msgList.html",n.url.main+"/my/center/sub/fans.do"];t.parseInt=parseInt;t.JSON=JSON;var m=i.extend({initialize:function(){var t=this;m.superClass.initialize.apply(t,arguments);t.loaded=false;t.loading=false;var e;l.on("mouseenter",function(){if(!t.loaded)t.loadMsg();l.addClass("active")}).on("mouseleave",function(){if(e)clearTimeout(e);e=setTimeout(function(){l.removeClass("active")},250)}).on("mouseenter",".g_dropdown_menu li",function(){if(e)clearTimeout(e);$(this).addClass("current")}).on("mouseleave",".g_dropdown_menu li",function(){$(this).removeClass("current")}).click(function(e){if(!a.uid()){e.preventDefault();a.needLogin()}setTimeout(function(){t.show()},5e3)});a.bind("after:login",function(){c=a.uid();t.show();l.find(".g_dropdown_menu, .caret").remove();t.loaded=false})},loadMsg:function(){var i=e.compile(s);var n=this;if(n.loading)return;n.loading=true;if(!c){l.append(i({list:"login",Util:t}));n.loaded=true;return}$.getJSON("http://www.tudou.com/ump/getUserNewestMsgs.action?jsoncallback=?",{destUid:c,msgTypes:"-1,1,2,3,4,5,6,7,8",withFreshCount:1},function(e){if(e.code)return;var a=e.data.msg;var o=e.data.freshCount;var r=[],s=0;for(var u in a)if(o[u]&&0!=o[u])switch(true){case u==-1:case 1==u:case 2==u:case 3==u:case 4==u:case 8==u:r[0]=a[u];r[0].stype=d[0];r[0].link=f[0];s+=o[u];break;case 5==u:r[1]=a[u];r[1].stype=d[1];r[1].link=f[1];r[1].count=o[u];break;case 6==u:r[2]=a[u];r[2].stype=d[2];r[2].link=f[2];r[2].count=o[u];break;case 7==u:r[3]=a[u];r[3].stype=d[3];r[3].link=f[3];r[3].count=o[u]}if(r[0])r[0].count=s;l.append(i({list:r,Util:t}));n.loaded=true;n.loading=false})},show:function(){var t=this;var e=0;if(!c)return;l.show();$.getJSON("http://www.tudou.com/ump/getFreshCount.action?jsoncallback=?",{destUid:c,msgTypes:"-1,1,2,3,4,5,6,7"},function(i){if(0!=i.code)return;$.each(i.data,function(t,i){e+=i});t.total=e;if(l.find(".total").length)l.find(".total").remove();if(e>0)l.find(".g_dropdown_toggle").append('<em class="total"></em>')})}});m.getInstance=function(){if(u)return u;else return u=new m};return m.getInstance()});define("module/translate/translate",["tui/cookie"],function(t,e,i){i.init=function(){var i=parseInt(t("lang"));var n=$("#translate_s2t");n.html(i?"ç®ä½ç":"ç¹é«ç").click(i?o:a);if(i)a();function a(i){i&&i.preventDefault();var a=this;e(["lazy/translate"],function(e){t("lang",1,{domain:"tudou.com",path:"/",expires:1e3});e.traditionalized();a.innerHTML="ç®ä½ç";$(".g_notify").hide();n.unbind().click(o)})}function o(e){e.preventDefault();t("lang",1,{domain:"tudou.com",path:"/",expires:-1});location.reload()}}});define("module/stat/jserror",["tui/net","module/global"],function(t,e,i,n){var a=encodeURIComponent;var o=a(location.href);var r=a(navigator.userAgent);var s=window.ERROR_RAND||.01;var u={};var c=function(i,n,c){if(!c)i="custom: "+i;n=n||s;if(Math.random()<n){if(u[i])return;t.getRequest("http://stats.tudou.com/e/page/js/fail/?v=1&s="+[a(i),o,e.juid+"_"+e.uid,r].join("|"));u[i]=true}};c.addVersion=function(t){o=a(t+":"+location.href)};if(Math.random()<s)window.onerror=function(t){setTimeout(function(){c(t,1,true)},0)};return c});define("module/stat/iwt",[],function(t,e){_iwt_no_flash=window._iwt_no_flash||0;var i="UA-tudou-000001";!function(t,e,n){var a=false,o=!-[1],r="http://irs01.com/irt?_iwt_id=",s="http://irs01.net/MTFlashStore.swf#",u="http://irs01.com/_iwt.gif",c="_iwt_id",l="_iwt_cid",d="",f="",m="",p=e.getElementsByTagName("head")[0],h={available:false,guid:function(){return["MT",(+new Date+v++).toString(36),(1e18*Math.random()).toString(36)].join("").slice(0,16).toUpperCase()},get:function(t,e){return h._sendFlashMsg(e,"jGetItem",t)},set:function(t,e,i){return h._sendFlashMsg(i,"jSetItem",t,e)},clear:function(t,e){return h._sendFlashMsg(e,"jClearItem",t)},clearAll:function(t){return h._sendFlashMsg(t,"jClearAllItems")},_sendFlashMsg:function(e,i,n,a){e=e||S;var o=h.guid();t[o]=e;if(y&&y[i])switch(arguments.length){case 2:y[i](o);break;case 3:y[i](n,o);break;case 4:y[i](n,a,o)}},initSWF:function(t,e){if(!h.available)return e&&e();if(h.inited)return t&&setTimeout(t,0);t&&g.push(t);e&&w.push(e)}},v=1,g=[],w=[],b="",_,y,k,$=e.createElement("DIV"),x=h.guid();function S(){}function C(e){if(a)if(t.console&&t.console.log)t.console.log("MTFlashStore:"+e)}if(!t._iwt_no_flash){try{_=t.navigator.plugins["Shockwave Flash"]||t.ActiveXObject;b=_.description||function(){return new _("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}()}catch(I){}b=(b.match(/\d+/g)||[0])[0];if(b<9)h.available=false;else{h.available=true;t[x]=function(e,i){switch(e){case"onecall":if(!t[i])return;t[i].apply(t,[].slice.call(arguments,2));delete t[i];break;case"error":h.available=false;while(k=w.shift())k();C(i);break;case"load":C("Flash load success!");h.inited=true;h.available=true;while(k=g.shift())setTimeout(k,0)}};function T(){$.setAttribute("style","display:block;clear:both;float:none;position:absolute;right:0;bottom:0;border:none;");if(e.body.firstChild)e.body.insertBefore($,e.body.firstChild);else e.body.appendChild($);$.innerHTML='<object id="'+h.guid()+(o?' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ':"")+'" data="'+s+'" type="application/x-shockwave-flash" '+' width="10" height="10" style="position:absolute;right:0;bottom:0;border:none;" >'+'<param name="movie" value="'+s+'" />'+'<param name="wmode" value="transparent" />'+'<param name="version" value="10" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="flashvars" value="jsproxyfunction='+x+'" />'+"</object>";y=$.firstChild;h.swf=y}var j=setInterval(function(){if(e.body){T();clearInterval(j)}},100)}}var D={track:function(){if(!h.available){if(""!=this._getQueryStrByName(l))m=r+"&_iwt_cid="+this._getQueryStrByName(l)+"&_iwt_UA="+this._getUAId();else m=r+"&_iwt_UA="+this._getUAId();U(m,function(t){var e=t;d=t})}else{h.initSWF(M);setTimeout(function(){if(!h.inited){h.available=false;t[x]=S;D.track()}},3e3)}},record_video_api:function(t,e,i,n){if("0"==n+""){f=this._getHashId();this._feedBack_video(t,e,i,n);return}this._feedBack_video(t,e,i,n)},_feedBack_video:function(t,e,i,n){var a=["ta="+n,"eid="+f,"pt="+encodeURIComponent(document.title),"vid="+t,"du="+e,"la="+i,"_iwt_id="+d,"_iwt_UA="+this._getUAId(),"r="+(new Date).getTime()].join("&");var o=u+"?"+a;this._img=new Image;this._img.src=o},_getHashId:function(){var t=location.href,e=(new Date).valueOf(),i=navigator.userAgent,n="";n=this._md5([location.host,t,i,e,Math.random()].join(""));return n},_getUAId:function(){if("undefined"==typeof i)return"";return i},_getQueryStrByName:function(t){var e=location.search.match(new RegExp("[?&]"+t+"=([^&]+)","i"));if(null==e||e.length<1)return"";return e[1]},_getCookie:function(t){var e,i,n,a=document.cookie.split(";");for(e=0;e<a.length;e++){i=a[e].substr(0,a[e].indexOf("="));n=a[e].substr(a[e].indexOf("=")+1);i=i.replace(/^\s+|\s+$/g,"");if(i==t)return unescape(n)}},getReferrer:function(){var t="";try{t=window.top.document.referrer}catch(e){if(window.parent)try{t=window.parent.document.referrer}catch(i){t=""}}if(""==t)t=document.referrer;return t},_md5:function(t){function e(t,e){return t<<e|t>>>32-e}function i(t,e){var i,n,a,o,r;a=2147483648&t;o=2147483648&e;i=1073741824&t;n=1073741824&e;r=(1073741823&t)+(1073741823&e);if(i&n)return 2147483648^r^a^o;if(i|n)if(1073741824&r)return 3221225472^r^a^o;else return 1073741824^r^a^o;else return r^a^o}function n(t,e,i){return t&e|~t&i}function a(t,e,i){return t&i|e&~i}function o(t,e,i){return t^e^i}function r(t,e,i){return e^(t|~i)}function s(t,a,o,r,s,u,c){t=i(t,i(i(n(a,o,r),s),c));return i(e(t,u),a)}function u(t,n,o,r,s,u,c){t=i(t,i(i(a(n,o,r),s),c));return i(e(t,u),n)}function c(t,n,a,r,s,u,c){t=i(t,i(i(o(n,a,r),s),c));return i(e(t,u),n)}function l(t,n,a,o,s,u,c){t=i(t,i(i(r(n,a,o),s),c));return i(e(t,u),n)}function d(t){var e;var i=t.length;var n=i+8;var a=(n-n%64)/64;var o=16*(a+1);var r=Array(o-1);var s=0;var u=0;while(u<i){e=(u-u%4)/4;s=8*(u%4);r[e]=r[e]|t.charCodeAt(u)<<s;u++}e=(u-u%4)/4;s=8*(u%4);r[e]=r[e]|128<<s;r[o-2]=i<<3;r[o-1]=i>>>29;return r}function f(t){var e="",i="",n,a;for(a=0;a<=3;a++){n=255&t>>>8*a;i="0"+n.toString(16);e+=i.substr(i.length-2,2)}return e}function m(t){t=t.replace(/\r\n/g,"\n");var e="";for(var i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n<128)e+=String.fromCharCode(n);else if(n>127&&n<2048){e+=String.fromCharCode(192|n>>6);e+=String.fromCharCode(128|63&n)}else{e+=String.fromCharCode(224|n>>12);e+=String.fromCharCode(128|63&n>>6);e+=String.fromCharCode(128|63&n)}}return e}var p=Array();var h,v,g,w,b,_,y,k,$;var x=7,S=12,C=17,I=22;var T=5,j=9,D=14,N=20;var O=4,L=11,M=16,U=23;var E=6,z=10,R=15,A=21;t=m(t);p=d(t);_=1732584193;y=4023233417;k=2562383102;$=271733878;for(h=0;h<p.length;h+=16){v=_;g=y;w=k;b=$;_=s(_,y,k,$,p[h+0],x,3614090360);$=s($,_,y,k,p[h+1],S,3905402710);k=s(k,$,_,y,p[h+2],C,606105819);y=s(y,k,$,_,p[h+3],I,3250441966);_=s(_,y,k,$,p[h+4],x,4118548399);$=s($,_,y,k,p[h+5],S,1200080426);k=s(k,$,_,y,p[h+6],C,2821735955);y=s(y,k,$,_,p[h+7],I,4249261313);_=s(_,y,k,$,p[h+8],x,1770035416);$=s($,_,y,k,p[h+9],S,2336552879);k=s(k,$,_,y,p[h+10],C,4294925233);y=s(y,k,$,_,p[h+11],I,2304563134);_=s(_,y,k,$,p[h+12],x,1804603682);$=s($,_,y,k,p[h+13],S,4254626195);k=s(k,$,_,y,p[h+14],C,2792965006);y=s(y,k,$,_,p[h+15],I,1236535329);_=u(_,y,k,$,p[h+1],T,4129170786);$=u($,_,y,k,p[h+6],j,3225465664);k=u(k,$,_,y,p[h+11],D,643717713);y=u(y,k,$,_,p[h+0],N,3921069994);_=u(_,y,k,$,p[h+5],T,3593408605);$=u($,_,y,k,p[h+10],j,38016083);k=u(k,$,_,y,p[h+15],D,3634488961);y=u(y,k,$,_,p[h+4],N,3889429448);_=u(_,y,k,$,p[h+9],T,568446438);$=u($,_,y,k,p[h+14],j,3275163606);k=u(k,$,_,y,p[h+3],D,4107603335);y=u(y,k,$,_,p[h+8],N,1163531501);_=u(_,y,k,$,p[h+13],T,2850285829);$=u($,_,y,k,p[h+2],j,4243563512);k=u(k,$,_,y,p[h+7],D,1735328473);y=u(y,k,$,_,p[h+12],N,2368359562);_=c(_,y,k,$,p[h+5],O,4294588738);$=c($,_,y,k,p[h+8],L,2272392833);k=c(k,$,_,y,p[h+11],M,1839030562);y=c(y,k,$,_,p[h+14],U,4259657740);_=c(_,y,k,$,p[h+1],O,2763975236);$=c($,_,y,k,p[h+4],L,1272893353);k=c(k,$,_,y,p[h+7],M,4139469664);y=c(y,k,$,_,p[h+10],U,3200236656);_=c(_,y,k,$,p[h+13],O,681279174);$=c($,_,y,k,p[h+0],L,3936430074);k=c(k,$,_,y,p[h+3],M,3572445317);y=c(y,k,$,_,p[h+6],U,76029189);_=c(_,y,k,$,p[h+9],O,3654602809);$=c($,_,y,k,p[h+12],L,3873151461);k=c(k,$,_,y,p[h+15],M,530742520);y=c(y,k,$,_,p[h+2],U,3299628645);_=l(_,y,k,$,p[h+0],E,4096336452);$=l($,_,y,k,p[h+7],z,1126891415);k=l(k,$,_,y,p[h+14],R,2878612391);y=l(y,k,$,_,p[h+5],A,4237533241);_=l(_,y,k,$,p[h+12],E,1700485571);$=l($,_,y,k,p[h+3],z,2399980690);k=l(k,$,_,y,p[h+10],R,4293915773);y=l(y,k,$,_,p[h+1],A,2240044497);_=l(_,y,k,$,p[h+8],E,1873313359);$=l($,_,y,k,p[h+15],z,4264355552);k=l(k,$,_,y,p[h+6],R,2734768916);y=l(y,k,$,_,p[h+13],A,1309151649);_=l(_,y,k,$,p[h+4],E,4149444226);$=l($,_,y,k,p[h+11],z,3174756917);k=l(k,$,_,y,p[h+2],R,718787259);y=l(y,k,$,_,p[h+9],A,3951481745);_=i(_,v);y=i(y,g);k=i(k,w);$=i($,b)}var P=f(_)+f(y)+f(k)+f($);return P.toLowerCase()}},N,O=false,L=false;function M(){h.get(c,function(t){if(!t){if(""!=D._getQueryStrByName(l))m=r+"&_iwt_cid="+D._getQueryStrByName(l)+"&_iwt_UA="+D._getUAId();else m=r+"&_iwt_UA="+D._getUAId();U(m,function(t){h.set(c,t);d=t})}else{if(""!=D._getQueryStrByName(l))m=r+t+"&_iwt_cid="+D._getQueryStrByName(l)+"&_iwt_UA="+D._getUAId();else m=r+t+"&_iwt_UA="+D._getUAId();U(m,function(t){h.set(c,t);d=t})}})}function U(i,a){var o=e.createElement("script"),r=h.guid();t[r]=function(){try{a.apply(t,arguments);p.removeChild(o)}catch(e){}t[r]=n};o.setAttribute("type","text/javascript");o.setAttribute("charset","utf-8");var s=i+"&jsonp="+r+"&";if("undefined"==typeof _iwt_p1)s+="_iwt_p1=&";else s=s+"_iwt_p1="+_iwt_p1+"&";if("undefined"==typeof _iwt_p2)s+="_iwt_p2=&";else s=s+"_iwt_p2="+_iwt_p2+"&";if("undefined"==typeof _iwt_p3)s+="_iwt_p3=&";else s=s+"_iwt_p3="+_iwt_p3+"&";
if("undefined"!=typeof _iwt_no_referrer&&!_iwt_no_referrer){var u=D.getReferrer();if(""!=u)s=s+"ref="+encodeURIComponent(u)+"&"}o.setAttribute("src",s);if(p.firstChild)p.insertBefore(o,p.firstChild);else p.appendChild(o)}t._iwt=D;D.FC=h}(window,document);return _iwt});define("module/stat/comscore",["module/global"],function(t,e,i){var n={beacon:function(t){var e=1.7,i=document,n=i.location,a=512,o=function(t,e){if(null==t)return"";t=(encodeURIComponent||escape)(t);if(e)t=t.substr(0,e);return t},r=["https:"==n.protocol?"https://sb":"http://b",".scorecardresearch.com/b?","c1=",o(t.c1),"&c2=",o(t.c2),"&rn=",Math.random(),"&c7=",o(n.href,a),"&c3=",o(t.c3),"&c4=",o(t.c4,a),"&c5=",o(t.c5),"&c6=",o(t.c6),"&c10=",o(t.c10),"&c15=",o(t.c15),"&c16=",o(t.c16),"&c8=",o(i.title),"&c9=",o(i.referrer,a),"&cv=",e,t.r?"&r="+o(t.r,a):""].join("");r=r.length>2080?r.substr(0,2075)+"&ct=1":r;var s=new Image;s.onload=function(){};s.src=r;return r},send:function(){n.beacon({c1:2,c2:6035715,c3:window.config&&config.item&&config.item.cid?config.item.cid:"",c4:window.location.href,c5:"",c6:window.comscore_c6||"",c10:t.juid||0,c11:t.uid||0,c15:""})}};return n});define("module/stat/combo-stat",["tui/cookie"],function(t,e,i){if(window.ComboStat)return window.ComboStat;var n={cookie:function(e,i,n){if("undefined"==typeof i)return t(e);var a={domain:"tudou.com",path:"/"};if(!n)a.expires=36500;t(e,i,a)},uuid:function(t){t=t||6;var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");var i="";var n=e.length;for(var a=0;a<t;a++){var o=parseInt(Math.random()*Math.pow(10,6))%n;i+=e[o]}return(new Date).getTime()+i},init:function(){var t=this;if(t.pvid)return;var e=t.cookie("ypvid")||"";var i=t.uuid();t.cookie("ypvid",i,true);var n=t.cookie("yseid");var a=1;var o=1;if(!n||(new Date).getTime()>(parseInt(t.cookie("yseidtimeout"))||0)){n=t.uuid();t.cookie("yseid",n,true);t.cookie("ysestep",1);o=parseInt(t.cookie("yseidcount")||0)+1;t.cookie("yseidcount",o)}else{a=parseInt(t.cookie("ysestep")||0)+1;t.cookie("ysestep",a)}var r=(new Date).getTime()+120*6e4;t.cookie("yseidtimeout",r,true);var s=t.cookie("ycid")||"";var u=window.cid||window.config&&window.config.item&&window.config.item.cid||0;t.cookie("ycid",u,true);var c=parseInt(t.cookie("ystep")||0)+1;t.cookie("ystep",c);t.juid=t.cookie("yjuid")||"";t.seid=n;t.pvid=i;t.cid=u;t.referPvid=e;t.referCid=s;t.step=c;t.seStep=a;t.seidTimeout=r;t.seidCount=o;t.isFrame=top.location!=window.location?1:0;t.noCookie=!navigator.cookieEnabled?1:0}};n.init();return n});define("module/stat/pv",["tui/browser","tui/util","tui/cookie","tui/net","module/login/login","module/stat/common","module/stat/combo-stat","module/global"],function(t,e,i,n,a,o,r,s,u,c){var l=Date.now();var d=window.config||{};if(!d.item)d.item={};var f=window.pageId||d.pageId;var m=o.mix({param:function(t){var e=[];$.each(t,function(t,i){if(""!==i)e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))});return e.join("&")},getExt:function(){var e=this;var n={};if(r.isFrame)n.frame=r.isFrame;if(r.noCookie)n.noCookie=r.noCookie;n.referhost=i("referhost")||"";if(screen.availWidth-$(window).width()<20)n.winheight=$(window).height();if(f)if(f>=1&&f<=7){var u=(o.referrer||"").replace(/\?.*$/,"");if(/tudou\.com\/(listplay|programs\/view|albumplay|wlplay\/view)\//.test(u))n.preferurl=i("preferurl")||"";else n.preferurl=u;i("preferurl",u,{domain:"tudou.com",path:"/"})}if(t.isMobile)n.mtype=t.iOS||(0!==t.android?t.isPad?"androidpad":"androidphone":0!==t.wphone?"wphone":"other");n.tjuid=s.juid||"";$.extend(n,e.getData());if(a.uid()){var c=$.trim(i("u_data")).split("_");if(c.length)c.forEach(function(t){t=t.split("|");n[t[0]]=t[1]})}return e.param(n)},send:function(){var t={};t.did=2;t.juid=r.juid;t.sid=r.seid;t.uid=s.uid||0;t.pid=r.pvid;t.cid=r.cid;t.rurl=o.referrer;t.rpid=r.referPvid;t.rct=r.referCid;t.ext=this.getExt();t.stp=r.step;t.sstp=r.seStep;t.scnt=r.seidCount;n.getRequest("http://p.l.youku.com/compvlog?"+this.param(t));this.trigger("send")}});var p=o.mix({send:function(){var t=1;var a=window.SUBDOMAIN;var r=0;var u=s.uid;var c=s.juid;var l=s.seid;var f=+new Date,m=0,p="",h=f,v=i("pageStep"),g=v?Math.max(1,v):1,w=encodeURIComponent(o.referrer);var b=this.getData(t,p);r=b.pageFlag||0;m="1"+(window.abtest||d.abtest||0)+0+e.pad(window.cid||d.item.cid||0,3)+e.pad(0,3)+(window.top==window?"00":"01")+(b.timeOfRef||"");n.getRequest("http://stats.tudou.com/pv3/?s="+[t,u,g,"",m,c,l,r,p,w||""].join("*_*")+"&r="+ +new Date);this.trigger("send")},getPCode:o.getPositionCode,getXByPC:o.getXpathFromPositionCode,getElByX:o.getElementByXPath,getTrueLink:o.getTrueLink,getStatTarget:o.getStatTarget});c.ComboPvStat=m;c.tudouStat=p;c.init=c.send=function(){c.pvCount=c.pvCount||0;c.pvCount++;if(c.pvCount>1){r.pvid="";r.init();s.pvid=o.pvid()}m.send();p.send()}});define("tui/flash",["tui/class","tui/event","tui/template","tui/util","tui/dialog"],function(t,e,i,n,a,o,r){function s(t,e,i,n){var a,o=i||window,r=t.split(".").reverse();while((a=r.pop())&&r.length>0){if("undefined"===typeof o[a])o[a]={};else if("object"!==typeof o[a])return false;o=o[a]}if("undefined"!=typeof e)if("object"!=typeof o[a])o[a]=e;else $.extend(o[a],e);return o[a]}r.getFlashMC=function(t){return document.getElementById(t)||window[t]};r.swfobject=function(){var o=0;var u=!(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length);var c=$.browser.webkit;var l=r.getFlashMC;var d={object:'<object id="<%=id%>" <%=classid%> width="<%=width%>" height="<%=height%>" name="<%=name%>" <%=data%> style="<%=style%>" <%=mimetype%> >',embed:'<embed id="<%=id%>" width="<%=width%>" height="<%=height%>" flashvars="<%=flashvars%>" quality="high" name="<%=name%>" src="<%=src%>" style="<%=style%>" <%=mimetype%> ',pluginspage:'<a id=<%=id%> class="tui_noflash" href="#" style="width:<%=width%>;height:<%=height%>;display:block;overflow:hidden;cursor:pointer;<%=style%>" onclick="<%=fn%>()">éè¦flashplayeræä»¶ï¼ç¹å»å®è£</a>'};var f="application/x-shockwave-flash";var m=r.swfClass=t({initialize:function(t){var i=this;o++;$.extend(this,t);var n=t.attrs;var a=n.id;if(!a)a=n.id="TUI_flashObj_"+o;this.flashId=a;if(!n.name)n.name=n.id;this.pluginspage=t.pluginspage||v;this.pluginspageTpl=t.pluginspageTpl||g;var r=h();this.isSupport=r&&r[0]>0;var u=this.jsapiName=t.flashvars.jsapi="_TUI_flashObj_"+o;var c=this.jsapi=window[u]={};var l=t.params.allowscriptaccess||t.params.allowScriptAccess;if(l&&"never"!=l){this.event=new e;$.extend(c,{flashReady:function(t){i.event.fire("load",t)},getValue:function(t){return s(t)},callFunc:function(t,e){try{return s(t).apply(s(t.replace(/\.[^\.]+$/,"")),e)}catch(i){return false}},notify:function(t,e){i.event.fire(t,e)}})}},load:function(t){var e=t?$("#"+t)[0]:false;if(e)if(e.outerHTML&&!$.browser.opera)e.outerHTML=this.getHTML();else{var i=this,n=$(this.getHTML())[0];e.parentNode.replaceChild(n,e)}else document.write(this.getHTML())},getHTML:function(){var t,e,n=this,a=[],o=[],r=this.attrs,s=this.flashvars,l=this.params;if(this.isSupport)if(c&&c<312||!u&&"embed"===this.type){for(t in s)o.push(t+"="+s[t]);r.flashvars=o.join("&");r.mimetype='type="'+f+'"';a.push(i.format(d["embed"],r));for(e in l)a.push(e+'="'+l[e]+'" ');a.push(" ></embed>")}else{if(u)r.classid='classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"';else{r.data='data="'+r.src+'"';r.mimetype='type="'+f+'"'}a.push(i.format(d["object"],r));if(u)l["movie"]=r.src;l["quality"]="high";for(e in l)a.push('<param name="',e,'" value="',l[e],'" />');for(t in s)o.push(t+"="+s[t]);if(o.length>0)a.push('<param name="flashvars" value="',o.join("&"),'" />');a.push("</object>")}else{var m=r.width,p=r.height;a.push(i.format(this.pluginspageTpl(),$.extend(r,{width:!m&&"auto"||/%$/.test(m)&&m||m+"px",height:!p&&"auto"||/%$/.test(p)&&p||p+"px",fn:this.jsapiName+".pluginspage"})));this.jsapi.pluginspage=function(){return n.pluginspage.call(n)}}return a.join("")},ready:function(t){this.event.bind("load",t)},bind:function(t,e){this.event.bind(t,e);l(this.flashId)._addEventListener(t,this.jsapiName+".notify")},callMethod:function(t,e){return l(this.flashId)._call(t,e)}});function p(t,e,i,n,a,o){o=$.extend(o||{},{src:t,width:e,height:i});var r=o.tagType;delete o.tagType;return new m({type:r,attrs:o,params:a,flashvars:n,pluginspage:v,pluginspageTpl:g})}$.extend(p,{getVersion:h,setPluginspage:function(t){var e=v;v=function(){return t.call(this,e)}},setPluginspageTpl:function(t){var e=g;g=function(){return t.call(this,e)}}});return p;function h(){var t=[0,0,0];if(navigator.plugins&&navigator.mimeTypes.length){var e=navigator.plugins["Shockwave Flash"];if(e&&e.description)t=e.description.replace(/^\D+/,"").replace(/\s*r/,".").replace(/\s*[a-z]+\d*/,".0").split(".")}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var i=1;var n=3;while(i)try{n++;i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+n);t=[n,0,0]}catch(a){i=null}}else{try{var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(a){try{var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");t=[6,0,21];i.AllowScriptAccess="always"}catch(a){if(6==t.major)return t}try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(a){}}if(null!=i)t=i.GetVariable("$version").split(" ")[1].split(",")}return t}function v(){a.alert("å®è£å®flashplayerä¹åï¼è¦è®°å¾åéæ°å¯å¨æµè§å¨ï¼åè®¿é®åè±å",function(){n.openURL("http://get.adobe.com/flashplayer/","_blank")});return false}function g(){return d["pluginspage"]}}()});define("module/ad/youku",["tui/browser","tui/event","tui/net","tui/flash","module/global","module/stat/combo-stat"],function(t,e,i,n,a,o,r,s){window.TUI=window.TUI||{};TUI.event=new e;TUI.swfobject=n.swfobject;window.uid=a.uid;window.juidStr=a.juid;$.fn.forEach=Array.prototype.forEach;TUI.event.bind("ad:loaded",function(){var t=$("#gTop .ad_banner");if(t&&$.trim(t.html()).length>0)$("#gTop .logo").addClass("mini_logo")});var u={1:"play",2:"play",3:"play",4:"play",5:"play",6:"play",11:"albumcover",300:"index",10001:"so",10002:"so",10003:"so",10004:"so"};var c={index:"101012,101385,101014,101015,101016,101027,101028,101029,101030,101031,101032,101196,101215,101312,101313,101392,101299,101626,101678",so:"101041,101042,101043,101044",play:"101192,101193,101194,101195",top:"101185,101395",rank:"101396,101630",albumtop:"101184,101393",albumcover:"101386,101387,101388,101389,101487,101488",playlist:"101183,101394",imake:"101045,101046,101049,101050,101051,101052,101221,101459,101489,101490,101491,101641",tv:"101172,101173,101176,101177,101205,101399,101400,101426,101432,101495,101496,101497,101638",movie:"101166,101167,101170,101171,101206,101401,101402,101450,101492,101493,101494,101636",zy:"101053,101054,101057,101058,101059,101060,101203,101448,101498,101499,101500,101639",cartoon:"101082,101083,101086,101087,101088,101222,101397,101460,101501,101502,101503,101640",news:"101124,101125,101128,101129,101130,101207,101415,101451,101507,101508,101509,101623",fortune:"101110,101111,101114,101115,101116,101201,101418,101446",auto:"101034,101035,101038,101039,101040,101209,101413,101453,101510,101511,101512,101644",it:"101103,101104,101107,101108,101109,101204,101416,101449,101513,101514,101515,101629",sports:"101096,101097,101100,101101,101102,101224,101404,101462,101516,101517,101518,101631",ent:"101061,101062,101065,101066,101067,101212,101398,101456,101519,101520,101521,101635",music:"101089,101090,101093,101094,101095,101200,101445,101504,101505,101506,101547,101625",game:"101159,101160,101163,101164,101165,101208,101414,101452,101522,101523,101524,101642",fun:"101075,101076,101079,101080,101081,101211,101411,101455,101525,101526,101527,101632",fashion:"101131,101132,101135,101136,101137,101199,101419,101444,101528,101529,101530,101624",beauty:"101145,101146,101149,101150,101151,101202,101417,101447,101531,101532,101533",lady:"101152,101153,101156,101157,101158,101213,101410,101457",life:"101068,101069,101072,101073,101074,101220,101403,101458,101534,101535,101536,101646",health:"101138,101139,101142,101143,101144,101223,101405,101461,101537,101538,101539,101645",edu:"101117,101118,101121,101122,101123,101210,101412,101454,101540,101541,101542,101633",jilupian:"101647,101648,101643,101650,101649",korea:"101652,101653,101651,101655,101654"};s.getAd=function(t){t=t||{};var e=window.SUBDOMAIN||u[window.pageId]||"";var n=c[e];if(t.page)n=c[t.page];if(n||t.id){var a={p:t.id||n,site:"tudou",sid:o.pvid,s:t.s||"",ct:t.ct||"",cs:t.cs||"",k:t.k||""};i.getScript("http://html.atm.youku.com/html?"+$.param(a),{charset:"gbk"})}};s.init=function(e){if(t.iOS){var i=$(".seed, .s .seedplayerbox");var n="http://zone.tudou.com/tudougroovin/";var a="http://i1.tdimg.com/b/20130422/c449.jpg";i.css({width:"auto",height:"auto",padding:"12px 14px"});i.html('<a href="'+n+'" target="_blank"><img width="285" height="260" style="display:block;margin:0 auto" src="'+a+'" /></a>').slideDown()}s.getAd(e)}});define("module/nav/user",["tui/event","tui/art","tui/cookie","module/domain","module/login/login","tui/util/url"],function(t,e,i,n,a,o){var r=n.url;window.pageId=window.pageId||300;var s=t.extend({userTpl:'<iframe src="about:blank" class="mask" frameborder="0"></iframe>\n<%if(isLogined){%>\n<div class="hd">\n<div class="user_wrap">\n<div class="user_icon">\n<a href="<%=Url.main%>/home/<%=usr%>/" target="_blank" title="<%=nic%>çä¸»é¡µ"><img src="<%=ico%>"></a>\n</div>\n<div class="user_name">\n<a class="nic" target="_blank" href="<%=Url.main%>/home/<%=usr%>/" title="<%=nic%>"><%=nic%></a>\n</div>\n<div class="user_authority">\n<a href="<%=Url.main%>/verify/index.do" title="åè±è®¤è¯" target="_blank" class="g_vip3<%if(!isVuser){%> gray<%}%> iconfont">&#xe614;</a>\n<a href="<%=Url.vip%>" title="åè±ä¼å" target="_blank" class="g_vip4<%if(!isMember){%> gray<%}%> iconfont">&#xe644;</a>\n<%if(level){%>\n<a title="ç¨æ·ç­çº§" href="<%=Url.main%>/utsfront/index" target="_blank" class="g_task"><img src="http://i3.tdimg.com/b/20141125/co3.png"><em><%=level%></em></a>\n<%}%>\n<%if(taskNum_unfinished){%>\n<a href="http://www.tudou.com/utsfront/index" target="_blank" class="task-num">\n<i class="caret"><i></i></i>\n<span class="ci"><%=taskNum_unfinished%></span>ä¸ªä»»å¡å¨ç­ä½ åï¼å»çç\n</a>\n<%}%>\n</div>\n</div>\n<%if(u_supply == \'0\'){%>\n<span class="user_tips user_tips_t2">\næ¨çè´¦å·å­å¨å®å¨é£é©ï¼å»ºè®®ç«å³ <a href="<%=Url.main%>/my/setting/mobile.action" target="_blank">ç»å®ææº</a>\n<a class="close" href="#"><i class="iconfont">&#xe63f;</i></a>\n</span>\n<%}%>\n</div>\n<div class="user_sub"><i class="loading"></i></div>\n<div class="bd">\n<ul>\n<li class="i_home">\n<a href="<%=Url.main%>/home/<%=usr%>/" class="home_link" target="_blank"><i class="iconfont">&#xe635;</i><%=nic%>çèªé¢é</a>\n<%if(!isVuser){%>\n<a href="<%=Url.main%>/verify/index.do" class="p_right" target="_blank">ç³è¯·è®¤è¯</a>\n<%}%>\n</li>\n<li class="i_favor">\n<a href="<%=Url.main%>/watch/favorite/" target="_blank"><i class="iconfont">&#xe611;</i>æçæ¶è</a>\n</li>\n<li class="i_vip">\n<a href="http://vip.tudou.com/index.html" target="_blank"><i class="iconfont">&#xe630;</i>ä¼å</a>\n<a href="http://cps.tudou.com/redirect.html?id=000003d6" target="_blank" class="p_right">\n<%if(vip==2){%>\nå©ä½ <%=vipDay%> å¤©\n<%}else if(vip==1){%>\n<span class="ci">ç«å³ç»­è´¹</span>\n<%}else{%>\n<span class="ci">ç«å³å¼é</span>\n<%}%>\n</a>\n</li>\n<li class="i_watchhistory">\n<a href="<%=Url.main%>/watch/history/" target="_blank">\n<i class="iconfont">&#xe613;</i>\nè§çè®°å½\n</a>\n</li>\n<li class="i_cart">\n<a href="<%=Url.main%>/my/center/mycart.action" target="_blank"><i class="iconfont">&#xe662;</i>è´­ç©è½¦</a>\n<a href="http://wanhuo.tudou.com" target="_blank" class="p_right">\n<%if(goodsCount>0){%>\n<%=goodsCount%> ä»¶å®è´\n<%}else{%>\n<span class="ci">åç°å®è´</span>\n<%}%>\n</a>\n</li>\n</ul>\n</div>\n<div class="ft">\n<a href="<%=Url.main%>/my/setting/info.action" target="_blank">è´¦æ·è®¾ç½®</a>\n<a href="<%=Url.login%>/loginOut.do?r=<%=t%>" class="logout">éåº</a>\n</div>\n<a class="QRcode_login_btn" href="#" id="QRcodeLoginBtn"></a>\n<div class="QRcode_login" id="QRcodeLogin">\n<div class="img">\n<img id="QRcodeImg" >\n<div class="mask"></div>\n<div class="invalid_note">æ æ³å®æç»å½Tï¹T<br/>ä½ çäºç»´ç å·²è¿æ</div>\n<a href="#" class="refresh">ç¹å»å·æ°</a>\n</div>\n<h3>æ«ä¸æ«</h3>\n<div class="title">ç§»å¨ç«¯ä¹ç»å½å¯ï¼</div>\n<i class="bg"></i>\n</div>\n<%}else{%>\n<ul class="ul_top fix">\n<li class="hellow"><%=hellow%></li>\n<li><a href="<%=Url.login%>/login.do?noreg=ok" class="login_btn g_needlogin" target="_blank" id="login">ç»å½</a></li>\n<li><a href="<%=Url.login%>/reg.do" class="reg_btn g_needlogin g_needreg" target="_blank" id="login">æ³¨å</a></li>\n</ul>\n<ul class="ul_bottom">\n<li class="i_favor">\n<a href="<%=Url.main%>/watch/favorite/" target="_blank"><i class="iconfont">&#xe611;</i>æçæ¶è</a></li>\n<li class="i_vip">\n<a href="http://vip.tudou.com/index.html" target="_blank"><i class="iconfont">&#xe630;</i>ä¼å</a>\n<a href="http://cps.tudou.com/redirect.html?id=000003d6" target="_blank" class="p_right"><span>ç«å³å¼é</span></a>\n</li>\n<li class="i_watchhistory">\n<a href="<%=Url.main%>/watch/history/" target="_blank"><i class="iconfont">&#xe613;</i>è§çè®°å½</a>\n</li>\n<li class="i_cart">\n<a href="<%=Url.main%>/my/center/mycart.action" target="_blank"><i class="iconfont">&#xe662;</i>è´­ç©è½¦</a>\n<a href="http://wanhuo.tudou.com" target="_blank" class="p_right"><span>åç°å®è´</span></a>\n</li>\n</ul>\n<i class="bg"></i>\n<%}%>\n',menuTpl:'<span class="g_dropdown_toggle <%=prefix%>">					<a class="txt" href="<%=Url.main%>/home/<%=usr%>" target="_blank" title="<%=nic%>"><%=nic%></a>					<span class="user_icon">						<a class="img" href="<%=Url.main%>/home/<%=usr%>" target="_blank">							<img src="<%=ico%>" />						</a>						<%if(isMember){%><i class="iconfont g_vip4">&#xe630;</i><%}%>					</span>				</span>				<i class="caret"><i></i></i>				<div class="g_dropdown_menu fix">					<i class="loading"></i>				</div>				<%if(u_supply=="0"){%>				<span class="user_tips user_tips_t1">					æ¨çè´¦å·å­å¨å®å¨é£é©ï¼å»ºè®®ç«å³ <a href="<%=Url.main%>/my/setting/mobile.action" target="_blank">ç»å®ææº</a>					<a class="close" href="#"><i class="iconfont">&#xe63f;</i></a>					<span class="arrow iconfont">&#xe641;</span>				</span>				<%};%>',initialize:function(t){var e=this;s.superClass.initialize.apply(e,arguments);$.extend(e,t);e.$uInfo=$("#uInfo");e.MAX=0;var o;e.$uInfo.bind({mouseenter:function(){if(o)clearTimeout(o);o=setTimeout(function(){e.$uInfo.addClass("active");if(!e.isLoaded)a.ucode()?e.logined():e.unlogin();if(!e.isLoadInfo&&e.data)e.getUserInfo(true)},150)},mouseleave:function(){if(o)clearTimeout(o);o=setTimeout(function(){e.$uInfo.removeClass("active")},150)}});if(!a.ucode())e.$uInfo.delegate(".g_needlogin","click",function(t){t.preventDefault();var e=$(this);a.needLogin({isReg:e.hasClass("g_needreg")})});e.$uInfo.delegate(".user_tips .close","click",function(t){t.preventDefault();e.$uInfo.find(".user_tips").remove()}).delegate(".user_tips","mouseenter",function(t){t.stopPropagation()});if(a.uid()&&!window.isQRcodeloaded){var r;var u=true;function c(t){var e=$("#QRcodeLogin");var a=$("#QRcodeImg");$.getJSON(n.domain.login+"/qrcode/getCode.do?jsoncallback=?",{showLogo:1,cookie:encodeURIComponent(i("yktk")),size:148},function(t){if(0==t.code){a.attr("src",t.data.url);a.load(function(){a.show();e.removeClass("invalid");u=false});if(r)clearTimeout(r);r=setTimeout(function(){e.addClass("invalid");u=true},60*1e3)}})}e.$uInfo.delegate("#QRcodeLoginBtn","click",function(t){t.preventDefault();if(e.$uInfo.hasClass("QRcode_active"))e.$uInfo.removeClass("QRcode_active");else{e.$uInfo.addClass("QRcode_active");if(u)c()}}).delegate(".QRcode_login .refresh","click",function(t){t.preventDefault();c()});window.isQRcodeloaded=true}},getUserCard:function(){var t=r.main+"/uis/userCard.action";var e=this;var i=a.ucode();$.ajax({url:t,data:{app:window.config&&window.config.pageId||window.pageId||0,uidCode:i,jsoncallback:"jsoncallback"},cache:true,dataType:"jsonp",jsonpCallback:"jsoncallback",success:function(t){if(t&&0==t.code){e.data=t.data;e.fire("get:success",[t.data,e]);e.getUserInfo(false)}else e.fire("get:fail",[{status:"error",msg:"error",ret:t},e])}})},init:function(t){var e=this;$.extend(e,t)},showLoginStatus:function(){var t=this;if(a.isLogin()){var n=a.userInfo();t.$uInfo.addClass("g_user").removeClass("g_login");t.$uInfo.html(e.compile(t.menuTpl)({prefix:n.prefix,nic:n._nic,usr:n._usr,ico:n._ico,Url:r,isMember:parseInt(n._vip),u_supply:i("u_supply")}));t.$content=$(".g_dropdown_menu",t.$uInfo);setTimeout(function(){t.getUserCard()},150)}else t.unlogin()},getUserInfo:function(t){var e=this;var i=e.data;if(!i&&e.MAX<3){e.getUserCard();e.MAX++;return}var n=i.isMember;var a=i.verifyType;if(t){e.$content.find(".user_name .num").html(i.subedNum);if(a)e.$content.find(".user_authority .g_vip3").show();e.isLoadInfo=true}else if(!n&&a)e.$uInfo.find(".user_icon").append('<i class="iconfont g_vip3">&#xe614;</i>')},unlogin:function(){var t=this;var n=["Hi~ç»éåå¯ä»¥æ¥ä¸åå¼¹å¹å¦~","Hi~ç»å½åå¯è®¢éæ¬§å·´çèªé¢éå¦~","Hi~ç»éåå¯ä»¥æ¶èåæ¬¢çè§é¢å¦~","éªå¹´ï¼èµ¶å¿«ç»éå§~","è¿ç­ä»ä¹ï¼èµ¶å¿«ç»éå§~","éªå¹´ï¼ç»å½åå¯ä»¥å°½æå°ç©èæå¦~","Hi~ç»å½åå¯ä»¥åä»»å¡è·å¥å±å¦~","ä½ å¥½ï¼å¯¼æ¼ï¼æ±ç»å½~","ç»å½åå¯ä»¥çæ´ç²¾å½©çåå®¹å¦~"];t.$uInfo.html("").removeClass("g_user").addClass("g_login").append('<a href="http://login.tudou.com/login.do?noreg=ok" class="g_dropdown_toggle" target="_blank" id="login">ç»å½</a>									<i class="caret"><i></i></i>								<div class="g_dropdown_menu">'+e.compile(t.userTpl)({Url:r,hellow:n[Math.floor(Math.random()*n.length)],isLogined:false,u_supply:i("u_supply")})+"</div>");t.isLoaded=true},getProfile:function(t){var e=r.main+"/uis/myProfile.action?jsoncallback=?&app="+window.pageId;$.getJSON(e,{},function(e){t&&t(e)},"jsonp")},logined:function(){var t=this;if(!t.$content)return;var n=a.userInfo();var o=null;$.getJSON(r.main+"/watch/sub/totalUpdateCount.do?jsoncallback=?",{app:window.pageId,uid:window.uid},function(t){if(0==t.code){o=t.data;return}},"jsonp");t.getProfile(function(s){if(s&&0!=s.code)return;var u=s.data;var c='\n<%if (num==0){%>\n<h3>\nè®¢éæ´æ° <span class="ci">0</span> \n<span class="desc">æ¨å¯è½ä¼åæ¬¢è¿äºèªé¢éï¼èµ¶å¿«ççå§ï¼</span>\n</h3>\n<dl>\n<dt>\n<a href="http://gc.tudou.com/" >å»å¹¿åºçç</a>\n</dt>\n<%data.forEach(function(o, i){%>	\n<dd>\n<a href="<%=Url.main%>/home/<%=o.name%>/" title="<%=o.nickname%>"><img src="<%=o.userpic%>" width=42 height=42></a>\n</dd>\n<%})%>									\n</dl>\n<%}else{%>\n<h3>\nè®¢éæ´æ° <span class="ci"><%=num%></span> \n</h3>\n<dl>\n<dt>\n<a href="<%=Url.main%>/watch/subscribe/"><i class="iconfont">&#xe647;</i>æ¥çå¨é¨</a>\n</dt>\n<%data.forEach(function(o, i){%>\n<%if(o.lastItem){%>	\n<dd>\n<a href="<%=o.lastItem.playLink%>"  title="<%=o.lastItem.title%>" class="img"><img src="<%=o.lastItem.picurl%>" width=75 height=42 /></a>\n</dd>\n<%}%>						\n<%})%>			\n</dl>\n<%}%>	';var l="";t.$content.html(e.compile(t.userTpl)({nic:n._nic,usr:n._usr,ico:n._ico,Url:r,uid:a.uid(),isMember:parseInt(n._vip),isLogined:true,vip:u.vip,isVuser:u.isVuser,level:u.level,taskNum_unfinished:u.taskNum_unfinished,vipDay:u.vipDay,goodsCount:u.goodsCount,t:+new Date,u_supply:i("u_supply")}));var d=t.$content.find(".user_sub");var f=window.setInterval(function(){if(null!==o){clearInterval(f);if(0==o){l="http://gc.tudou.com/newsData.html?jsoncallback=?";$.getJSON(l,{pageNo:1,pageSize:5},function(t){d.html(e.compile(c)({data:t,Url:r,num:0}))},"jsonp")}else{l=r.main+"/uis/watch/subListJson.action?jsoncallback=?";$.getJSON(l,{app:window.pageId,ucode:a.ucode(),order:1,page:1,show:3,pageSize:3},function(t){if(0==t.data.subs.length)return;d.html(e.compile(c)({data:t.data.subs,Url:r,num:o}))},"jsonp")}}},500)});window.uid=a.uid();t.isLoaded=true}});return s});define("tui/suggest",["tui/widget","tui/util","tui/art","module/login/login"],function(t,e,i,n){var a=t.extend({initialize:function(t,e){if("string"==typeof t)t=$(t);e=e||{};var i=e.callback;var n=e.time||200;var o=this;a.superClass.initialize.apply(this,arguments);o.input=t=$(t);o.form=t.closest("form");if(i)o.form.bind("submit",function(t){i.call(o,t)});o.box=$('<div class="g_searchhint g_searchhint_ex"><iframe frameborder="0" class="gst" src="about:blank"></iframe><div class="g_searchhint_c fix"></div></div>');o.boxc=o.box.find(".g_searchhint_c");o.box.delegate(".g_searchhint a","click",function(e){var i=t.val();var n=$(this);var a=n.closest(".g_search_pack");var r;if(a.length){t.val(a.find("h4 a").html());r=1}else{e.preventDefault();r=0;t.val(n.find("span").text())}o.trigger("choose",[t.val(),t,$(this),i,r])}).delegate(".g_search_l a","mouseover",function(t){var e=$(this);o.box.find(".current").removeClass("current");e.addClass("current");o.expand(e.attr("ex"),e.attr("ord"))});var r="",s,u;t.bind("focus",function(){if(""!=r.trim())o.box.show();if(s)clearTimeout(s);s=setTimeout(function(){o.trigger("focus",[r,t.val()])},n);clearTimeout(u)}).bind("blur",function(){if(u)clearTimeout(u);u=setTimeout(function(){o.box.hide();o.box.find(".current").removeClass("current")},200)}).bind("keyup cut paste",function(e){if(r!=t.val()){if(s)clearTimeout(s);if("keyup"==e.type&&[13,27,38,39,40].indexOf(e.keyCode)>-1)return;s=setTimeout(function(){r=t.val();if(""==r.trim())o.clear();else o.trigger("input",[r])},n)}}).bind("keydown",function(t){if(13==t.keyCode||27==t.keyCode)o.box.hide();else if(38==t.keyCode)o.prev();else if(39==t.keyCode)o.box.find("a.current").click();else if(40==t.keyCode)o.next()})},clear:function(){this.boxc.html("");this.box.hide();return this},expand:function(t,e){var i=this;if(void 0===t)return;i.exItem.hide();i.exItem.forEach(function(n){var a=$(n);if(a.attr("ord")==e){a.show();i.trigger("expand",[t,e,a])}})},hightLine:function(t,i){i=e.substr(i,26);var n=t?t.length:0;var a=i.substring(0,n);return{w:0===n?i:a,q:0!=n?i.substring(n):""}},add:function(t){var a=this;var o=['<ul class="g_search_l">'];var r=['<div class="g_search_p">'];var s=t.q||"";var u=[];var c;i.helper("split",e.split);t.r.forEach(function(t,e){if(!t.c)return;t.mo="";t.u=t.u?t.u[0]:0;t.b=t.b||"";if(t.u){t.u.ord=e;t.u.e=t.u.e||1;u.push(t.u);!t.z&&(t.mo='<i class="mo iconfont">&#xe603;</i>')}t.i=e;t.k=a.hightLine(s,t.c);c=i.compile('<li><a href="###" pos="1" wordtype="<%=item.b%>" ord="<%=item.i%>" ex="<%=item.mo? 1: 0%>" ><span><%=item.k.w%><%if(item.k.q){%><b><%=item.k.q%></b><%}%></span><%==item.mo%></a></li>');o.push(c({item:t}))});o.push("</ul>");var l='<div class="g_search_p">\n<%data.forEach(function(dt){%>\n<%\nvar cate = dt.m || \'\';\nvar url = dt.d;\nvar person = dt.p || \'\';\nvar area = dt.w || \'\';\nvar bstyle = dt.b || \'\';\nif(dt.e == 2){\ndt.j = dt.n;\ndt.a = dt.p;\nurl = dt.u;\n}		\n%>	\n<div class="g_search_pack" data-e="<%=dt.e%>" ord="<%=dt.ord%>" <%if(dt.ord == 0){%> style="display:block"<%}%>>\n<div class="pic<%if(dt.e == 2){%> pic_u<%}%>">\n<a href="<%=url%>" target="_blank" pos="2" title="<%=dt.j%>"><img src="<%=dt.a%>" /></a>\n</div>			\n<h4><a href="<%=url%>" target="_blank" title="<%=dt.j%>"  pos="2" ><%=dt.j%></a></h4>\n<ul class="txt">\n<%if(cate){%>\n<li><%=cate%></li>\n<%}%>\n<%if(person && cate !== "å¨æ¼«" && dt.e != 2){%>\n<li><%=(cate === "çµå½±" || cate === "çµè§å§") ? "ä¸»æ¼" : "ä¸»æäºº"%>: <%=person%></li>\n<%}%>\n<%if (cate === "çµè§å§" || cate === "çµå½±" || cate === "å¨æ¼«") {%>\n<li>å¹´ä»£: <%=dt.y%></li>\n<%}%>\n<%if(area && cate !== "çµè§å§" && cate !== "çµå½±") {%>\n<li>å°åº: <%=area%></li>\n<%}%>\n<%if(bstyle === "1"){%>\n<li class="goplay"><a href="<%=dt.k%>" target="_blank" pos="5" >ç»§ç»­ç</a></li>\n<%}else if(dt.e != 2){%>\n<li class="play"><a href="<%=dt.k%>" target="_blank"  pos="3">æ­æ¾</a></li>				\n<%}%>\n<%if(dt.e == 2){%>\n<li>èç®ï¼<%=split(dt.c)%></li>\n<li>è®¢éï¼<%=split(dt.f)%></li>\n<li style="height:30px;"></li>\n<%}%>\n</ul>		\n<%if (url.indexOf(\'www.tudou.com/albumplay\') != -1 || url.indexOf(\'www.tudou.com/albumcover\') != -1 || dt.e == 2) {%>\n<%if(logined){%>\n<a href="#" class="gbtn_sub gBtnSub" data-type="<%=dt.e%>" data-id="<%=dt.i%>" style="display:none;"></a>\n<%}else{%>\n<span class="gbtn_sub gBtnSub" data-type="<%=dt.e%>" data-id="<%=dt.i%>" style="display:none;"><a title="ç¹å»è®¢é" href="#"><i class="iconfont">&#xe637;</i>è®¢é</a></span>\n<%}%>			\n<%}%>\n</div>\n<%});%>\n</div>';var d=i.compile(l)({data:u,logined:n.uid()});a.boxc.html(o.join("")+d);a.box.show();a.exItem=a.box.find(".g_search_pack");if(u[0]&&0==u[0].ord)a.trigger("expand",[1,0,a.exItem.eq(0)]);return this},msg:function(t){this.boxc.html(t);this.box.show();return this},prev:function(){var t=this.box.find(".current");if(t[0]){t.removeClass("current");t=t.closest("li").prev().find("a")}if(!t[0])t=this.box.find(".g_search_l a:last");this.expand(t.attr("ex"),t.attr("ord"));t.addClass("current");this.input.val(t.find("span").text());this.box.show();return this},next:function(){var t=this.box.find(".current");if(t[0]){t.removeClass("current");t=t.closest("li").next().find("a")}if(!t[0])t=this.box.find(".g_search_l a:first");this.expand(t.attr("ex"),t.attr("ord"));t.addClass("current");this.input.val(t.find("span").text());this.box.show();return this},current:function(){var t=this.box.find(".current");if(t[0])return t;else return null},node:function(){return this.box},render:function(){this.form.after(this.box);return this}});return a});define("module/nav/nav",["tui/net","tui/util","tui/art","tui/event","module/domain","module/global","module/login/login","tui/suggest","module/nav/user","tui/browser","module/responsive","module/sidebar/view","module/subscribe"],function(t,e,i,n,a,o,r,s,u,c,l,d,f,m,p){var h=encodeURIComponent;var v=a.url;var g=o.storage;p=new n;p.search=function(){window._initHeader=function(t){try{$(".g-search-text").each(function(){var e="";var i=this;var n=$(i);var a=[];var o;var r;n.blur(function(){if(null==n.val().match(/\S/)){n.val(e);n.addClass("g-search-focus").removeClass("g-bot-txtfocus");if(o&&o[0])o.removeClass("g-bot-btnfocus")}});n.focus(function(){if(n.val()==e)n.val("");n.removeClass("g-search-focus").addClass("g-bot-txtfocus");o=n.closest(".g-search-box").siblings(".g-search-submit");o[0]&&o.addClass("g-bot-btnfocus")});$(function(){if(!i["_gs_focus"]&&(!i.value||i.value==e)){n.val(e);n.addClass("g-search-focus")}});if(t&&t.sk){e=t.sk[0][0];n.val(e)}})}catch(e){}};var e=window.SUBDOMAIN||"www";var i=$("#gTop");if(i[0])if(!i.hasClass("g-mini"))t.getScript(v.main+"/util/tools/"+e+"_hd.txt",{charset:"gbk"})};p.subnav=function(){var t=$("#gTop .g-link-more");var e;t.mouseenter(function(){var t=this;e&&clearTimeout(e);e=setTimeout(function(){$(t).addClass("active")},100)}).mouseleave(function(){var t=this;e&&clearTimeout(e);e=setTimeout(function(){$(t).removeClass("active")},200)})};p.dropdown=function(){var t=$("#gMiniNav, #uploadNav,#ulogin");var e;t.mouseenter(function(){var t=$(this);$(".g_user_wrap>.active").not(t).removeClass("active");e&&clearTimeout(e);t.addClass("active");if(!t.find("iframe").length)t.find(".g_dropdown_menu").prepend('<iframe src="about:blank" class="mask" frameborder="0"></iframe>')}).mouseleave(function(){var t=$(this);e&&clearTimeout(e);e=setTimeout(function(){t.removeClass("active")},200)})};p.weixin=function(){var t=$("#gBot .qrcode");$("#gBot").on("mouseenter",".weixin",function(){t.show();var e=t.find(".lazy");if(e.length){e.attr("src",e.attr("alt"));e.removeClass("lazy").removeAttr("alt")}}).on("mouseleave",".sns",function(){t.hide()}).on("click",".weixin",function(t){t.preventDefault()})};p.showLoginStatus=function(){var t=this;var e=new u;e.showLoginStatus();e.bind("get:success",function(e){t.trigger("getUserInfo:success",[e])})};p.fixnav=function(t){t=$.extend({force:true,top:50,disabled:false},t);var e=$(window);var i=e.height();var n=$("#gTop");var a=n.find(".g_main");var o=$("#gTop .g_nav");var r=$("#gSideBar");var s=n.hasClass("g-mini-top");var u=0;var c=t.top;var l=e.scrollTop();var c="function"===$.type(c)?c():c;var d=t.force||c<i;a.append(o);if(t.disabled)return;var f=e.scrollTop()<=c;if(d){a.addClass("g_top_fix");r.addClass("g-sidebar-fixed")}if(!f){n.addClass("g-mini-top");a.addClass("g_top_fix");u=1}e.bind("scroll",function(){c="function"===$.type(c)?c():c;if(e.scrollTop()>l&&l>150)o.hide();else if(e.scrollTop()<l)!s&&o.show();l=e.scrollTop();f=e.scrollTop()<=c;if(!f&&0===u){n.addClass("g-mini-top");a.addClass("g_top_fix");u=1}if(f&&1===u){!s&&n.removeClass("g-mini-top");
!d&&a.removeClass("g_top_fix");u=0}})};p.responsive=function(t){var e=t||[{s:[0,1276],v:"992"},{s:[1276,1e10],v:"1216"}];l.init(e);l.bind("responsed",function(){p.trigger("responsed")});return l};p.fixIframe=function(){var t='<iframe src="about:blank" class="mask" frameborder="0"></iframe>';$("#gTop .g_main").append(t);$("#gSideBar").append(t);$("#gSideMore").append(t)};p.init=function(t){if(!t)t={};$.getScript("http://static.soku.com/v2.0.4/soku/giantstar/js/sk-box-open.js",function(){XBox.init({site:15,css:"http://static.soku.com/v2.0.4/soku/giantstar/css/s_kubox.css"})});p.subnav();p.search();p.weixin();p.fixnav(t.fixnav);p.dropdown();p.responsive(t.responsive);p.showLoginStatus();r.bind("after:login",p.showLoginStatus);$("#login").click(function(t){t.preventDefault();if(r.isLogin())p.showLoginStatus();else r.needLogin()});$("#reg").click(function(t){t.preventDefault();if(r.isLogin())p.showLoginStatus();else r.needLogin({isReg:true})});!c.ie6&&p.fixIframe()};return p});try{if(!/^http:\/\/(js|css)\.tudouui\.com\//.test(require.rootUrl))document.write("<scri"+'pt charset="utf-8" src="'+require.rootUrl+"/dist/js/autodomain.js?t="+Date.now()+'.js"></s'+"cript>")}catch(e){}define("g",["tui/cookie","tui/browser","module/login/login","module/global","module/nav/nav","module/ad/youku","module/stat/common","module/stat/pv","module/stat/ck","module/stat/comscore","module/stat/iwt","module/stat/jserror","module/translate/translate","module/user/notify","page/btn/btn","module/uicommon","module/sidebar/view","module/subsrecom","lib/json2"],function(t,e,i,n,a,o,r,s,u,c,l,d,f,m,p,h,v,g,w,b,_){i.isLogin2();_.sendPv=function(){l.track();c.send();s.init()};_.init=function(e){if(!e)e={};_.sendPv();u.init();o.init(e.ad);function i(e,i){var n=$.trim(t("u_data"));var a={subnum:/subnum\|\d*/,updatenum:/updatenum\|\d*/}[e];if(""==n)n=e+"|"+i;else if(n.match(a))n=n.replace(a,e+"|"+i);else n+="_"+e+"|"+i;t("u_data",n,{domain:".tudou.com",path:"/"})}a.init(e);a.bind("getUserInfo:success",function(t){i("subnum",t.subNum)});var n=v.init();if(n)n.bind("getUpdateCount:success",function(t){i("updatenum",t.data)});g.init();p.bind("getUpdateCount:success",function(t){i("updatenum",t.data)});f.init();setTimeout(function(){m.show()},1e3);h()};_.initPartial=function(t,e){r.updateRefer(e);_.sendPv()}});require(["g"],function(){})}(window.jQuery);;