ï»¿(function(){function G(b,a,c){if(b)return b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent("on"+a,c)}function h(){if(!q){var b=window,a="inner";"innerWidth"in window||(a="client",b=y.documentElement||y.body);q={width:b[a+"Width"],height:b[a+"Height"]}}z||(z=q);return q}function H(b,a){var c=b.top+(b.collision_gapY||0),e=a.top+(a.collision_gapY||0),d=e+(a.collision_height||a.height);if(e>=c+(b.collision_height||b.height)||d<=c)return!1;c=b.left+(b.collision_gapX||0);e=a.left+(a.collision_gapX||0);d=c+(b.collision_width||b.width);return e+(a.collision_width||a.width)<=c-(b.speed||0)||e>=d?!1:!0}function B(b,a,c,e){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push("&",f,"=",encodeURIComponent(a[f]));d=d.join("");d=d.substr(1,d.length);window.open(b+d,"","width="+c+", height="+e+", top=0, left=0, toolbar=no, menubar=no, scrollbars=yes, location=yes, resizable=no, status=no")}function r(b,a,c,e,d,f){switch(b){case"weibo":b="http://www.sogou.com/?s="+Math.random();B("http://service.weibo.com/share/share.php?appkey=1239861421&",{url:b,pic:c,title:a},615,505);break;case"qzone":b="http://www.sogou.com/?t="+Math.random();B("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?",{url:b,pics:c,desc:e||a,summary:d||a.split(" ")[0]},615,505);break;case"qq":b="http://www.sogou.com/?t="+Math.random(),B("http://connect.qq.com/widget/shareqq/index.html?",{showcount:0,url:b,pics:c,desc:f},750,600)}}function K(b){for(var a=document.cookie.split("; "),c={},e=0;e<a.length;e++){var d=a[e],f=d.indexOf("="),k=d.length;c[d.substring(0,f)]=d.substring(f+1,k)}return c[b]?c[b]:""}function l(b){(new Image).src=location.protocol.toLowerCase()+"//pb.sogou.com/cl.gif?uigs_productid=webapp&type=logo&sitetype=index&uniqueid="+C+"&uigs_refer="+I+"&uigs_cl="+b}var y=document,u=0,v=0,C=1E3*(new Date).getTime()+Math.round(1E3*Math.random()),D=$(".yplaym"),E=D.width(),A=D.height(),J=-1<navigator.userAgent.indexOf("MetaSr 1.0")?34:0,q=null,z=null,f={ratio:[3,3,9,6],health:[1,1,1,1],width:[47,51,57,63],height:[48,45,17,68],deadWidth:[59,55,55,63],deadHeight:[57,59,54,68],collision_gapX:[0,0,0,0],collision_gapY:[0,0,0,0],collision_width:[47,51,57,63],collision_height:[48,45,17,68],speed:[20,25,18,20],score:[1,3,10,5],frames:"-263px -330px;-420px -325px;-583px -325px;-261px -206px;-430px -198px;-587px -197px;-261px -69px;-430px -66px;-583px -66px".split(";"),getSize:function(){var b=0,a;for(a=0;a<f.ratio.length;a++)b+=f.ratio[a];b=parseInt(Math.random()*b)+1;for(a=0;a<f.ratio.length;a++){if(b<=f.ratio[a])return a;b-=f.ratio[a]}},createNew:function(){for(var b=f.getSize(),a=parseInt(Math.random()*(A-f.height[b]-20)),c=t.planes.planes,e=0;e<c.length;e++){var d=c[e];if(!(d.left<E-f.width[2]||a>=d.top+f.height[2]||a+f.height[2]<=d.top))return null}a={left:E,top:a,speed:f.speed[b],status:0,size:b,health:f.health[b],width:f.width[b],height:f.height[b],collision_gapX:f.collision_gapX[b],collision_gapY:f.collision_gapY[b],collision_width:f.collision_width[b],collision_height:f.collision_height[b],score:f.score[b]};a.div=$('<div class="plane plane'+(b+1)+'">');a.div.css({left:a.left,top:a.top});D.append(a.div);a.die=function(){this.width=f.deadWidth[this.size];this.height=f.deadHeight[this.size];this.div.css({width:this.width,height:this.height,backgroundPosition:f.frames[this.status+3*this.size]});this.div.css({width:this.width,height:this.height});this.status++;4<=this.status&&(t.topScore+=this.score)};a.isDead=function(){return 4<=this.status};a.hit=function(){this.health--};a.remove=function(){this.div.hide();this.div.remove();this.div=null};a.outOfEdge=function(){return this.left<=-this.width};a.move=function(){this.left-=this.speed;this.div.css("left",this.left)};return a}},L=function(){var b=0;this.planes=[];this.INIT_SEED=-10;this.init=function(a){};this.clear=function(){for(var a=0;a<this.planes.length;a++)this.planes[a].remove();this.planes=[]};this.createNew=function(){0<b&&parseInt(10*Math.random())<b&&(this.planes.push(f.createNew()),b=this.INIT_SEED);b++};this.update=function(){this.createNew();for(var a=[],b=0;b<this.planes.length;b++){var e=this.planes[b];if(!e)break;0>=e.health?e.die():e.move();e.outOfEdge()||e.isDead()?e.remove():a.push(e)}this.planes=a}},M={createNew:function(){return{left:15,speed:8,edge:650,update:function(){this.left-=this.speed;this.left<=-this.edge&&(this.left=E);$("#cloud").css("left",this.left)}}}},N=function(){this.left=180;this.top=0;this.width=93;this.height=63;this.collision_gapY=this.collision_gapX=this.status=0;this.collision_width=93;this.collision_height=105;var b,a,c,e,d=!1,f=["-16px -148px","-82px -148px"],k=["-209px -122px","-326px -122px","-455px -122px","-591px -122px","-722px -122px"],g=["-13px -20px","-213px -20px","-415px -20px"],l=["-53px -422px","-194px -422px","-355px -422px"],q=$(".yplay"),p=$(".g_text"),m=0;this.init=function(d,f,g){b=d;a=f;c=g;e=g.planes};this.reset=function(){this.status=0;d=!1};this.pos=function(a,b,c){a.css({left:this.left,top:this.top})};this.setLeft=function(a){this.left=a;b.css("left",a)};this.getLeft=function(){return this.left};this.isFlying=function(){return 1==c.stage&&2==m};this.act=function(d){1==d?0==m?180>this.left?(this.left+=10,this.pos(b,f,this.status%2),this.status++):(m=1,this.updateFrame(d,m)):1==m?4>=this.status?(this.pos(b,k,this.status),this.status++):(m=2,this.updateFrame(d,m)):2==m&&(this.left<h().width-100?(this.left+=20,-280<this.top&&(this.top-=5),this.pos(b,g,this.status%3),this.status++,c.moveScene()):m=3):2==d?(this.pos(a,g,this.status%3),this.status++):3==d&&(this.pos(a,g,this.status%3),this.status++)};this.updateFrame=function(c,d){this.status=0;d=d||0;1==c?(b.attr("class","people people_play cur_none"),0==d?(this.left=643,this.top=-167,this.width=99,this.height=121):1==d?(q.show(),p.show(),this.top=-210,this.width=99,this.height=121):2==d&&(this.width=99,this.height=121)):2==c?(b.hide(),this.left=10,this.top=200,this.width=99,this.height=121,a.attr("class","people people_play cur_none").show(),this.pos(a,g,0),this.status=0):3==c&&(0==d?(this.reset(),b.hide(),this.left=10,this.width=99,this.height=121,a.attr("class","people people_play cur_none").show()):1==d&&(this.left=10,this.width=102,this.height=127,a.attr("class","people people_dead cur_none"),this.pos(a,l,0)))};this.die=function(){this.pos(a,l,this.status);this.status++};this.isDead=function(){return 3==c.stage&&this.status>=l.length};this.isAlive=function(){return!d};this.update=function(){if(1==c.stage)this.act(c.stage),3<=m&&c.toStage(2);else if(2==c.stage)this.act(c.stage);else if(3==c.stage)if(d)this.die(),this.isDead()&&c.toStage(4);else{this.act(c.stage);for(var a=e.planes,b=0;b<a.length;b++)if(H(this,a[b])){0==a[b].size?(0<a[b].health&&$(".time span").eq(1).html(++u),a[b].hit()):1==a[b].size?(0<a[b].health&&$(".time span").eq(0).html(++v),a[b].hit()):(H(this,a[b]),d=!0);break}c.legendhl&&(d=!1);d&&this.updateFrame(c.stage,1)}}},t=new function(){function b(){G(y,"mousemove",c.mouseAction);G(y,"click",function(){2==c.stage&&(c.toStage(3),l("shubiao"))});$(document).keypress(a)}function a(a){2==c.stage&&(a=a||event,a=String.fromCharCode(a.keyCode||a.charCode),n+=a,20<n.length&&(n=n.substr(n.length-10,n.length)),0<=n.indexOf("legendhl")&&(c.legendhl=!0),0<=n.indexOf("ie6isgood")&&(c.nobullet=!0,p=3),0<=n.indexOf("helibravo")&&(c.tripleBullet=!0),0<=n.indexOf("tohowmakefriend")&&(c.topScore+=5E3,n=""))}this.topScore=this.stage=0;this.title="";this.rank=0;this.man=new N;this.cloud=M.createNew();this.planes=new L;this.tripleBullet=this.nobullet=this.legendhl=!1;var c=this,e=c.man,d=c.cloud,w=c.planes,k=$("#index"),g=$(".yplay"),F=$(".return_icon"),r=$("#click_start_btn"),p=0,m,t=0,x=0,n="";this.posScene=function(){z=q;q=null;k.css({height:610<h().height?h().height-10:600,width:h().width-J});g.css({"margin-top":610<h().height?-305:-h().height/2});if(e.isFlying()){var a=h().width/z.width;k.css("left",parseFloat(k.css("left"))*a);g.css("left",parseFloat(g.css("left"))*a);e.setLeft((e.getLeft()-252)*a+252)}else 1>=c.stage?(k.css("left",(h().width-k.width())/2),g.css("left",h().width+(h().width-g.width())/2)):(k.css("left",-(h().width+k.width())/2),g.css("left",(h().width-g.width())/2))};this.moveScene=function(){var a=20*h().width/(h().width-754)+1,b=parseInt(k.css("left")),c=parseInt(g.css("left"));c>(h().width-g.width())/2?(k.css("left",b-a),g.css("left",c-a)):(k.css("left",-h().width),g.css("left",(h().width-g.width())/2));0<window.scrollY&&window.scrollTo(window.scrollX,window.scrollY-5)};this.init=function(){var a=$(".game"),d=$("#single_man"),f=$("#single_man_play");k.css({position:"absolute",width:h().width-J});e.init(d,f,this);w.init(this);b();this.posScene();a[0].onclick=d[0].onclick=r[0].onclick=function(){$("body").css("overflow-x","hidden");l($(this).data("cl"));d.css("background",'url("/logo/2016/chunjie/img/qidong2.gif") no-repeat center center');r.hide();0>=c.stage&&(c.toStage(1),c.update(),g.show());return!1};a[0].onfocus=d[0].onfocus=r[0].onfocus=f[0].onfocus=function(){this.blur();return!1};F.click(function(){l("back");location.reload()});a.hover(function(){d.addClass("people_hover")},function(){d.removeClass("people_hover")});f.click(function(){return!1});$(".y_t3").click(function(){c.toStage(3);c.reset();return!1});$(".ka1").click(function(){});$(".ka2").click(function(){c.toStage(3);c.reset();return!1});$(".y_x").click(function(){location.reload();return!1});$("#homepage").click(function(){});$(window).resize(function(){window.clearTimeout(m);m=setTimeout(function(){c.posScene()},150)})};this.noCheats=function(){c.legendhl=!1;c.nobullet=!1;c.tripleBullet=!1};this.updateScore=function(){$(".time p").text(this.topScore);var a=[60,150,300];3>p&&this.topScore>=a[p]&&this.moreDifficult()};this.moreDifficult=function(){p++;var a=[[10,3,1],[10,5,2],[10,6,3],[10,7,4]],b=[[20,25,18],[24,29,22],[27,32,25],[30,35,28]],c=[-10,0,4,9];p<a.length&&(f.ratio=a[p],f.speed=b[p],w.INIT_SEED=c[p])};this.reset=function(){f.ratio=[9,3,1];f.speed=[20,25,18];w.INIT_SEED=-10;p=0;c.topScore=0;c.noCheats()};this.update=function(){e.update();3==this.stage&&(d.update(),c.nobullet||e.isAlive()&&w.update());setTimeout(function(){c.update()},100)};this.toStage=function(a){this.stage=a;1==a?e.updateFrame(1):2==a?(k.hide(),0>navigator.userAgent.toLowerCase().indexOf("MSIE 6")||F.fadeIn(1E3),F.show(),e.updateFrame(2)):3==a?(e.updateFrame(3),w.clear(),$(".g_text").hide(),$("#cloud").show(),$(".time").show(),$(".y_cm").hide()):4==a&&($(".jiesuan-box").show(),$(".jiesuan-box .p2 span").html(u+v),$(".sd-tj").on("click",function(){var a=$.trim($(".sd-input").val());/^([\u4E00-\u9FA5]+\uff0c?)+$/.test(a)||""==a?alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u6216qq\u90ae\u7bb1"):(a='{"num":'+(u+v)+',"text":'+$(".sd-input").val()+"}",$.ajax({url:"web/caidan/paintedegg?cmd=put&uid="+K("SUV")+"&token="+encodeURIComponent(a)+"&t="+Math.random(),async:!0}),alert("\u63d0\u4ea4\u6210\u529f"));l("js-tijiao")}),$(".sd-zailai").on("click",function(){l("zailai");e.updateFrame(3);v=u=0;$(".jiesuan-box").hide();$(".time span").eq(0).html(0);$(".time span").eq(1).html(0);c.toStage(3)}),$(".sd-close").on("click",function(){l("js-close");location.reload()}))};this.mouseAction=function(a){if(2==c.stage||3==c.stage&&e.isAlive())a=(a.clientY||a.pageY||0)-(h().height-A)/2-100,a>=A-e.height&&(a=A-e.height),0>=a&&(a=0),20<a-e.top?a=e.top+20:20<e.top-a&&(a=e.top-20),e.top=a,2==c.stage&&(0==x?(t=a,x=1):2E3>=x?(x+=Math.abs(t-a),t=a):c.toStage(3))}};t.init();window.imgname="0208_chunjie_share.png";(function(){var b=$("#share"),a=$("#shareBox");b.on("mouseover",function(){a.show()});b.on("mouseout",function(){a.hide()})})();(function(b,a,c,e,d){var f=$("#shareWeiBo"),k=$("#shareQzone"),g=$("#shareQFriend");f.on("click",function(){r("weibo",b,a);l("WeiBo")});k.on("click",function(){r("qzone",b,a,c,e);l("Qzone")});g.on("click",function(){r("qq",b,a,c,e,d);l("QFriend")});f.attr("title","\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a");k.attr("title","\u5206\u4eab\u5230QQ\u7a7a\u95f4");g.attr("title","\u5206\u4eab\u5230QQ\u597d\u53cb")})("\u91d1\u7334\u8d3a\u5c81\u95f9\u65b0\u6625\uff0c\u641c\u72d7\u6c6a\u4ed4\u6765\u62dc\u5e74\u3002\u907f\u8fc7\u4e94\u6307\u5c71\u3001\u7ed5\u5f00\u7d27\u7b8d\u5492\uff0c\u9999\u8549\u87e0\u6843\u63a5\u4e0d\u505c\uff01\u5feb\u6765\u641c\u72d7\u9996\u9875\u52a9\u6c6a\u4ed4\u4e00\u81c2\u4e4b\u529b\uff0c\u73a9\u6e38\u620f\u8d62\u65b0\u6625\u5956\u54c1\u3002","https://img01.sogoucdn.com/app/a/100520122/cc8edd70_0208_chunjie_share.png","\u641c\u72d7\u641c\u7d22\u795d\u5927\u5bb6\u7334\u5e74\u5927\u5409\uff0c\u65b0\u6625\u5feb\u4e50\uff01","\u91d1\u7334\u8d3a\u5c81\u95f9\u65b0\u6625\uff0c\u641c\u72d7\u6c6a\u4ed4\u6765\u62dc\u5e74\u3002\u907f\u8fc7\u4e94\u6307\u5c71\u3001\u7ed5\u5f00\u7d27\u7b8d\u5492\uff0c\u9999\u8549\u87e0\u6843\u63a5\u4e0d\u505c\uff01\u5feb\u6765\u641c\u72d7\u9996\u9875\u52a9\u6c6a\u4ed4\u4e00\u81c2\u4e4b\u529b\uff0c\u73a9\u6e38\u620f\u8d62\u65b0\u6625\u5956\u54c1\u3002","\u91d1\u7334\u8d3a\u5c81\u95f9\u65b0\u6625\uff0c\u641c\u72d7\u6c6a\u4ed4\u6765\u62dc\u5e74\u3002\u907f\u8fc7\u4e94\u6307\u5c71\u3001\u7ed5\u5f00\u7d27\u7b8d\u5492\uff0c\u9999\u8549\u87e0\u6843\u63a5\u4e0d\u505c\uff01\u5feb\u6765\u641c\u72d7\u9996\u9875\u52a9\u6c6a\u4ed4\u4e00\u81c2\u4e4b\u529b\uff0c\u73a9\u6e38\u620f\u8d62\u65b0\u6625\u5956\u54c1\u3002");(function(){function b(a,b){var c="/helpsogou/jishu/jishu.php?",e=[],f;for(f in a)a.hasOwnProperty(f)&&e.push(f+"="+a[f]);c+=e.join("&");$.ajax({url:c,dataType:"jsonp",jsonpCallback:"sogouzan",success:b})}function a(a){9999<a&&99999>a?(a+="",a=a.substring(0,a.length-4)+"."+a.substring(a.length-4,a.length-3)+"\u4e07"):99999<a&&(a+="",a=a.substring(0,a.length-4)+"\u4e07");c.html(a)}var c=$("#praise"),e=window.imgname.split(".")[0];b({type:"get",name:e},function(b){a(b.num)});c.on("click",function(){var d=$(this);b({type:"add",name:e},function(b){a(b.num)});d.parent().addClass("on");c.off("click");l("zan")})})();var C=1E3*(new Date).getTime()+Math.round(1E3*Math.random()),I=document.referrer;(new Image).src=location.protocol.toLowerCase()+"//pb.sogou.com/pv.gif?uigs_productid=webapp&type=logo&sitetype=chunjie&uniqueid="+C+"&uigs_refer="+I;$(".sd-share").on("click",function(){var b="\u91d1\u7334\u8d3a\u5c81\u95f9\u65b0\u6625\uff0c\u641c\u72d7\u6c6a\u4ed4\u6765\u62dc\u5e74\u3002\u6211\u5728\u641c\u72d7\u641c\u7d22\u6e38\u620f\u4e2d\u5f97\u5230"+(u+v)+"\u5206\uff0c\u5feb\u6765\u4e00\u8d77\u73a9\u6e38\u620f\u8d62\u65b0\u6625\u5956\u54c1\u3002",a="\u91d1\u7334\u8d3a\u5c81\u95f9\u65b0\u6625\uff0c\u641c\u72d7\u6c6a\u4ed4\u6765\u62dc\u5e74\u3002\u6211\u5728\u641c\u72d7\u641c\u7d22\u6e38\u620f\u4e2d\u5f97\u5230"+(u+v)+"\u5206\uff0c\u5feb\u6765\u4e00\u8d77\u73a9\u6e38\u620f\u8d62\u65b0\u6625\u5956\u54c1\u3002";r($(this).data("id"),b,"https://img01.sogoucdn.com/app/a/100520122/cc8edd70_0208_chunjie_share.png","\u641c\u72d7\u641c\u7d22\u795d\u5927\u5bb6\u7334\u5e74\u5927\u5409\uff0c\u65b0\u6625\u5feb\u4e50\uff01",a,a);l("js-"+$(this).data("id"))});$(".js-tongji").on("click",function(){l($(this).data("cl"))})})();