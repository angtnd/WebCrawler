function ModalShare(e){this.config=e,e&&this.init()}function ListPageModalShare(e){this.config=e,e&&this.init()}function MobileModalShare(e){this.config=e,this.init()}ModalShare.prototype.init=function(){this.$container=$(this.config.el),this.$shareBtn=$(this.config.btnShare),this.$shareEmailMsg=this.$container.find(".j-share-email-msg"),this.$addMsgButton=this.$container.find(".j-add-msg"),this.$emailSentButton=this.$container.find(".j-email-sent"),this.$shareEmailSend=this.$container.find("#share-email-send"),this.$shareEmailForm=this.$container.find(".j-share-email-form"),this.$linkURLInput=this.$container.find(".j-share-link-url"),this.$close=this.$container.find(".j-modal-close"),this.$contentWrapper=this.$container.find(".modal-content-wrapper"),this.gaTrackCategory=this.$container.data("ga-track-category"),this.gaTrackAction=this.$container.data("ga-track-action"),this.createShareHash(),slideshare_object&&slideshare_object.user&&slideshare_object.user.loggedin===!0&&null!==slideshare_object.user.login&&this.$container.find(".j-share-email-name").val(slideshare_object.user.login),this.bindModalToShareButtons(),this.bindModalEvents(),this.bindCustomModalEvents(),this.adjustShareModalTop()},ModalShare.prototype.get_viral_share_url=function(e){$elem=$("li."+e+" a");var a=this.data.ssLink;return $elem.length>0&&(a=$.param($elem.data()),!a&&(a=this.data.ssLink)),this.SHARE_HASH[e]+a},ModalShare.prototype.get_viral_share_urls=function(){return{facebook:this.get_viral_share_url("facebook"),linkedin:this.get_viral_share_url("linkedin"),twitter:this.get_viral_share_url("twitter"),wordpress:this.get_viral_share_url("wordpress"),pinterest:this.get_viral_share_url("pinterest"),googleplus:this.get_viral_share_url("googleplus")}},ModalShare.prototype.sharePopup=function(e){var a=626,t=436,i=this.data.social[e];if(void 0!==i){if("facebook"===e){if(window.FB)return this.trackShareClick(e),void this.postToFacebook()}else if("linkedin"===e&&window.IN&&window.IN.UI)return IN.UI.Share().params({url:this.data.ssLink}).place(),this.trackShareClick(e),void this.saveShare(e);window.open(i,"shareDialog","width="+a+",height="+t),this.trackShareClick(e),this.saveShare(e)}},ModalShare.prototype.show=function(){this.reset(),this.$container.show(),this.shareGATracking("modalOpen")},ModalShare.prototype.close=function(){this.reset(),this.$container.hide()},ModalShare.prototype.reset=function(){this.$container.find(".j-embed-use-ssl-cbox").prop("checked",!1),$(".j-modal-popup").scrollTop(0),this.clearEmailFields(),this.$shareEmailForm.show(),this.$emailSentButton.hide(),this.collapseAllSections()},ModalShare.prototype.updateEmbed=function(){var e=this.$container.find(".j-share-embed-link"),a=e.val(),t=this.$container.find(".j-embed-size-picker").val(),i=this.$container.find(".j-embed-size-picker :selected").data("width")||this.config.embed_sizes.presets[t].size.width,o=this.$container.find(".j-embed-size-picker :selected").data("height")||this.config.embed_sizes.presets[t].size.height,n=a.match(/src="([^"]+)"/)[1].split("?")[0],s=this.$container.find(".j-embed-start-picker").prop("selectedIndex")+1||1;n+=s>1?"?startSlide="+s:"",a=a.replace(/src="[^"]+"/,'src="'+n+'"'),a=a.replace("http:",""),a=a.replace("https:",""),a=a.replace(/height="\d+"/,'height="'+o+'"'),a=a.replace(/width="\d+"/,'width="'+i+'"'),e.val(a)},ModalShare.prototype.clearEmailErrorAlerts=function(){$(".error").removeClass("error")},ModalShare.prototype.clearEmailFields=function(){this.$container.find(".j-email-clear").val(""),this.$shareEmailSend.prop("disabled",!1),this.clearEmailErrorAlerts()},ModalShare.prototype.sendShareEmail=function(e){this.shareGATracking("share_email","send");var a=this,t=this.$container.find(".j-share-email-to").val(),i=this.$container.find(".j-share-email-name").val(),o=this.$shareEmailMsg.val(),n=!1;a.$shareEmailSend.val(""),a.$shareEmailSend.addClass("sending"),a.$shareEmailSend.prop("disabled",!0),a.clearEmailErrorAlerts(),n||(n=!0,$.post("/list/email_share",{data:{id:this.data.ssId,name:i,recipients:t,msg:o},dataType:"json"}).done(function(e){if(0===e.respCode)a.clearEmailFields(),a.$shareEmailForm.slideUp(400),a.collapseAllSections(),a.$container.find("#email-sent").slideDown(400),setTimeout(function(){a.$container.find("#email-sent").slideUp(400),a.$shareEmailForm.slideDown(400)},2e3),a.$contentWrapper.removeClass("email-expanded");else{var t=a.$container.find(".j-email-flash");switch(t.text(e.resp).show(),e.respCode){case 1:a.$container.find(".j-share-email-to").addClass("error");break;case 2:a.$container.find(".j-share-email-name").addClass("error")}setTimeout(function(){t.fadeOut(400)},5e3)}n=!1,a.$shareEmailSend.val("Send"),a.$shareEmailSend.removeClass("sending"),a.$shareEmailSend.prop("disabled",!1)}).fail(function(e,t,i){n=!1,a.$shareEmailSend.val("Send"),a.$shareEmailSend.removeClass("sending"),a.$shareEmailSend.prop("disabled",!1)}))},ModalShare.prototype.shareGATracking=function(e,a){var t=window._gaq||[];e=this.gaTrackAction?this.gaTrackAction+"_"+e:e,t.push(["_trackEvent",this.gaTrackCategory,e,a])},ModalShare.prototype.renderSlideStartOptions=function(){for(var e="",a=0;a<this.data.totalSlides;a++){var t="slide "+(a+1);e+="<option ",0===a&&(e+=' selected="selected"'),e+=">"+t+"</option>"}var i=this.$container.find(".j-embed-start-picker, .j-share-start-picker");i.empty(),i.append(e),this.updateStartSlide()},ModalShare.prototype.renderDefaultEmbedOptions=function(){var e,a={0:{small:[344,292],"default":[429,357],large:[514,422],xlarge:[599,487]},1:{small:[386,410],"default":[481,512],large:[576,614],xlarge:[672,716]},3:{small:[340,191],"default":[425,239],large:[510,287],xlarge:[595,335]}};e=3===this.data.ssType?a[3]:a[this.data.ssType%2];var t="";for(var i in e){var o=e[i][0]+" x "+e[i][1];t+='<option value="'+i+'" data-width="'+e[i][0]+'" data-height="'+e[i][1]+'"',"default"===i&&(t+=" selected"),t+=">"+o+"</option>"}var n=this.$container.find(".j-embed-size-picker");n.empty(),n.append(t),this.$container.find(".j-embed-start-picker").prop("selecteIndex",1),this.$container.find(".j-share-embed-wp").val(this.data.social.wordpress),this.$container.find(".j-share-embed-link").text(this.data.embedCode)},ModalShare.prototype.toggleAddMessageHeight=function(e){this.$shareEmailMsg.toggleClass("msg-expanded",e)},ModalShare.prototype.collapseAllSections=function(){$(".j-share-expand").slideUp(),$("#share-embed-link").scrollTop(0),$(".j-triggered").removeClass("j-triggered"),this.toggleAddMessageHeight(!1)},ModalShare.prototype.triggerExpand=function(e){this.collapseAllSections(),$(e).addClass("j-triggered"),$(e).siblings(".j-share-expand").slideDown(400,this.adjustShareModalTop.bind(this)),this.$contentWrapper.removeClass("email-expanded embed-expanded"),$(e).hasClass("j-share-email-to")?this.$contentWrapper.addClass("email-expanded"):$(e).hasClass("j-share-embed-link")&&this.$contentWrapper.addClass("embed-expanded")},ModalShare.prototype.getNewSlideURL=function(e,a){var t=document.createElement("a");t.href=e;var i=t.pathname.split("/");i[0]||i.shift();for(var o=i.length,n=i[o-1];!n&&o>0;)i.pop(),o--,n=i[o-1];return parseInt(n,10)&&o>2&&i.pop(),a>1&&i.push(a),t.pathname=i.join("/"),t.href},ModalShare.prototype.getSlideImageURL=function(e){return $('#svPlayerId .slide[data-index="'+e+'"] .slide_image').data("full")},ModalShare.prototype.bindModalEvents=function(){var e=this;this.$close.bind("click",function(){e.close()}),this.$container.find(".j-share-start-picker").change(function(a){e.updateStartSlide(),e.shareGATracking("share_social",$(this).data("ga"))}),this.$shareEmailForm.submit(function(a){a.preventDefault(),a.stopPropagation(),e.sendShareEmail()}),this.$shareEmailMsg.click(function(){e.toggleAddMessageHeight(!0)}),this.$container.find(".j-share-email-to, .j-share-email-name").click(function(a){e.toggleAddMessageHeight(!1)}),this.$container.find(".j-share-social-list li").click(function(){e.sharePopup($(this).data("network"))}),this.$container.find(".j-update-embed").change(function(){e.updateEmbed()}),this.$container.find(".j-share-embed-link, .j-share-embed-wp, .j-last-screen-ssurl").bind("click",function(){this.select()}),this.$container.find(".j-share-link-url").click(function(){this.select(),e.shareGATracking("share_social",$(this).data("ga"))}),this.$container.find(".j-share-email-form input, .j-share-email-form textarea, .j-add-msg, .j-send-another-email").click(function(a){"send"!==$(this).data("ga")&&e.shareGATracking("share_email",$(this).data("ga"))}),this.$container.find(".j-embed-use-ssl-cbox, .j-embed-related-cbox, .j-embed-size-picker, .j-embed-start-picker").click(function(){e.shareGATracking("share_embed",$(this).data("ga"))}),this.$container.find(".j-share-expand-trigger").click(function(){$(this).siblings(".j-share-expand:visible").length>0||e.triggerExpand(this)}),$(window).resize(function(){e.adjustShareModalTop()}),$(document).keydown(function(a){27===a.which&&(a.preventDefault(),e.close())}),$(".j-modal-popup").on("scroll",function(a){e.$close.css("top",8+$(this).scrollTop()+"px")})},ModalShare.prototype.bindCustomModalEvents=function(){},ModalShare.prototype.createShareHash=function(){this.SHARE_HASH={facebook:"https://www.facebook.com/sharer/sharer.php?u=",linkedin:"https://www.linkedin.com/cws/share?trk=SLIDESHARE&",twitter:"https://twitter.com/share?",googleplus:"https://plus.google.com/share?",wordpress:"",pinterest:"https://pinterest.com/pin/create/button/?"}},ModalShare.prototype.getSSId=function(e){return e.length?e.data("slideshowid"):slideshare_object.modal_player.get_ss_id()},ModalShare.prototype.bindModalToShareButtons=function(){},ModalShare.prototype.trackShareClick=function(e){},ModalShare.prototype.saveShare=function(e){$.post("/share/viralshare",{data:{id:this.data.ssId,network:e}})},ModalShare.prototype.showLikeUsModal=function(){},ModalShare.prototype.postToFacebook=function(){var e=this;if(window.FB){var a=function(a){a&&a.post_id&&e.saveShare("facebook")};FB.ui({method:"feed",display:"popup",link:this.data.ssLink},a)}},ModalShare.prototype.adjustShareModalTop=function(){},ModalShare.prototype.updateStartSlide=function(){},ListPageModalShare.prototype=new ModalShare,ListPageModalShare.prototype.bindCustomModalEvents=function(){this.$container.find(".j-modal-content").click(function(e){e.stopPropagation()})},ListPageModalShare.prototype.bindModalToShareButtons=function(){var e=this,a=!1,t=this.$container.find(".j-modal-popup");$(this.config.parentEl).on("click",this.config.btnShare,function(i){var o=$(this).closest(".iso_slideshow").length>0?$(this).closest(".iso_slideshow"):$("#modal_player");t.hide(),e.$container.fadeIn(200),data={embedCode:o.data("embedcode"),totalSlides:o.data("totalslides"),ssLink:o.data("sslink"),title:o.data("title"),ssType:o.data("sstype"),ssId:o.data("slideshowid"),social:{linkedin:o.data("linkedinshareurl"),facebook:o.data("facebookshareurl"),twitter:o.data("twittershareurl"),googleplus:o.data("googleplusshareurl"),pinterest:o.data("pinterestshareurl"),wordpress:o.data("wordpressshareurl"),email:"mailto:?subject=Check out this SlideShare "+o.data("sstypeasstring")+"&body="+o.data("sslink")}},e.data=data,t.show(),e.show(),e.adjustShareModalTop(),e.$linkURLInput.val(e.data.ssLink),e.renderDefaultEmbedOptions(),e.renderSlideStartOptions(),a||($(".iso_slideshow_link").attr("title",""),a=!0)})},ListPageModalShare.prototype.trackShareClick=function(e){this.shareGATracking("share_social",e)},ListPageModalShare.prototype.close=function(){this.reset(),this.$container.hide(),this.shareGATracking("modalClose")},ListPageModalShare.prototype.adjustShareModalTop=function(){var e=$("#homepage-modal-share, #new-list-modal-share"),a=e.find(".j-modal-popup");e.length>0&&a.length>0&&a.animate({top:(e.height()-a.height())/2+"px"},400)},MobileModalShare.prototype={},MobileModalShare.prototype.IOS4REGEX=/["iPhone"|"iPad"].+i?OS [4|3].+Safari/,MobileModalShare.prototype.isIpadAndChrome=function(){return/ipad.*crios|crios.*ipad|ipad.*chrome|chrome.*ipad/i.test(navigator.userAgent)},MobileModalShare.prototype.init=function(){this.$modalShare=$(this.config.el),this.$overlay=this.$modalShare.find(".share-overlay"),this.$shareList=this.$modalShare.find(".mobile-share-list"),this.$linkShare=this.$modalShare.find(".link-share"),this.gaCategory=this.$modalShare.data("ga"),this.bindModalEvents(),this.bindModalToShareBtns(),this.populateShareLinks(),this.applyAppropriateOrientationCSS()},MobileModalShare.prototype.getDeviceOrientation=function(){var e;if(window.orientation)e=0===window.orientation?"portrait":"landscape";else{var a=window.innerWidth||screen.width,t=window.innerHeight||screen.height;e=a>t?"landscape":"portrait"}return e},MobileModalShare.prototype.open=function(){this.gaTracking("open"),this.$modalShare.fadeIn(),$("body").addClass("no_scroll")},MobileModalShare.prototype.close=function(){this.gaTracking("close"),this.$modalShare.fadeOut(),$("body").removeClass("no_scroll")},MobileModalShare.prototype.populateShareLinks=function(){this.isIpadAndChrome()||$.each(this.$shareList.find("li > a"),function(){$(this).attr("href",$(this).data("url"))})},MobileModalShare.prototype.gaTracking=function(e,a){if(a){var t=window._gaq||[];e="mobile_"+e,t.push(["_trackEvent",this.gaCategory,e,a])}},MobileModalShare.prototype.viralshareTracking=function(e,a){e&&a&&$.post("/share/viralshare",{data:{id:e,network:a}})},MobileModalShare.prototype.repositionShareModal=function(){this.$overlay.css("position","static")},MobileModalShare.prototype.applyAppropriateOrientationCSS=function(){this.orientation=this.getDeviceOrientation(),"portrait"===this.orientation?this.$modalShare.removeClass("landscape"):this.$modalShare.addClass("landscape")},MobileModalShare.prototype.bindModalEvents=function(){var e=this;this.$shareList.on("click","li",function(){e.gaTracking("social",$(this).data("ga"))}),window.slideshare_mobile_object&&e.$shareList.data("slideshow-id",slideshare_mobile_object.slideshow.slideshowId),this.$shareList.on("click","[data-network]",function(){e.viralshareTracking(e.$shareList.data("slideshow-id"),$(this).data("network"))}),"undefined"==typeof $mainNav&&this.isIpadAndChrome()&&this.$shareList.on("click","a",function(){window.open($(this).data("url"),"_blank")}),this.$modalShare.find(".btn, .share-overlay, .j-close").click(function(){e.close()}),$(window).on("resize orientationchange",function(){e.applyAppropriateOrientationCSS()})},MobileModalShare.prototype.bindModalToShareBtns=function(){var e=this;$(this.config.parentEl).on("click",this.config.shareBtn,function(a){if(e.IOS4REGEX.test(navigator.userAgent)&&e.repositionShareModal(),window.mobilePlayer)return void e.open();var t=$(this).closest(".iso_slideshow").data("slideshowid"),i=$(this).closest(".iso_slideshow");if(t){data={ssLink:i.data("sslink"),social:{linkedin:i.data("linkedinshareurl"),facebook:i.data("facebookshareurl"),twitter:i.data("twittershareurl"),sms:i.data("smsshareurl"),whatsapp:i.data("whatsappshareurl"),googleplus:i.data("googleshareurl"),email:i.data("emailshareurl"),pinterest:i.data("pinterestshareurl")}};var o=data.social.linkedin,n=data.social.facebook,s=data.social.twitter,r=data.social.email,l=data.social.sms,d=data.social.whatsapp,h=data.social.googleplus,c=data.social.pinterest;e.$linkShare.attr("href",data.ssLink),e.$linkShare.html(data.ssLink),e.$shareList.find(".li-share-btn > a").attr("href",o),e.$shareList.find(".fb-share-btn > a").attr("href",n),e.$shareList.find(".tw-share-btn > a").attr("href",s),e.$shareList.find(".whatsapp-share-btn > a").attr("href",d),e.$shareList.find(".email-share-btn > a").attr("href",r),e.$shareList.find(".sms-share-btn > a").attr("href",l),e.$shareList.find(".gplus-share-btn > a").attr("href",h),e.$shareList.find(".pinterest-share-btn > a").attr("href",c),e.$shareList.data("slideshow-id",t),e.open()}})},function(e,a){function t(e){this.config=e,this.init()}t.prototype.init=function(){this.modalId=this.config.modalElementId,this.contentLoaded=!1,this.modalMessages=null,this.fromType=null,this.fromSource=null,this.iFrameElement=null,a.event.trigger("modalSignupLoaded"),this.initModal(),this.bindTriggers(),this.bindEvents(),e.registerMessageReceiver(a.proxy(this.messageReceiver,this))},t.prototype.initModal=function(){var e;if(null!==window.location.href.match("/upload")){var t='a[href*="/login?"], a[href$="/login"],a[href*="/signup?"], a[href$="/signup"], a[href*="/upload?"],a[href$="/upload"]';e=a(t).filter(":not(.void_fancybox, .smt-link)")}else{var i='a[href*="/login?"], a[href$="/login"],a[href*="/signup?"], a[href$="/signup"], button[href*="/signup"]';e=a(i).filter(":not(.void_fancybox, .smt-link)")}e.attr("data-toggle","modal"),e.attr("data-target","#"+this.modalId),a("body").append('<div class="modal fade FBlogin login-wrapper hide" id="'+this.modalId+'" style="width:470px;height:347px;"></div>'),this.modalElement=a("#"+this.modalId)},t.prototype.appendHeader=function(){this.modalMessages||(this.modalMessages={download:" to download...",addcontact:" to follow...",favorite:" to like...",comments:" to post a comment...",AddToCommunity:" to add this document to a group/event...",follow:" to follow this user...",business:" to continue...",upload:" to start uploading...",contest:" to vote...",rsvp:" to join this meeting...",user:" to register the username...",zipcast:" to schedule a meeting...",create:" to start creating...",clip:". Don't lose your clips!",_end:""}),this.fromType&&"undefined"!=typeof this.modalMessages[this.fromType]&&this.modalMessages[this.fromType].length>1&&(a("#modal-login-heading").children("span").remove(),a("#modal-login-heading").append("<span>"+this.modalMessages[this.fromType]+this.modalMessages._end+"</span>"))},t.prototype.bindTriggers=function(e){a(document).on("click","a[data-toggle=modal], button[data-toggle=modal]",a.proxy(function(e){var t=a(e.currentTarget);href=t.attr("href"),href&&href.length>0||(href=t.data("href")),e.currentTarget&&href&&href.length>0&&!t.hasClass("j-pro-hero-slideshow")&&(e.preventDefault(),this.open(href,t.attr("data-target")))},this))},t.prototype.bindEvents=function(){a(".modal-header .close").on("click",a.proxy(this.closedHandler,this)),a("#fb-login-modalbox").on("click",function(){e.ga("Signup","fancybox_fblogin_clicked")})},t.prototype.messageReceiver=function(e){switch(e){case"Signup_show_from_iframe":a("#j-facebook-text span").text("connect"),a("#modal-login-heading").html("Signup for SlideShare"),this.appendHeader(),a(".btn-fb-modal").show(),slideshare_object.ga("Signup","Signup_loaded");break;case"login_show_from_iframe":a("#j-facebook-text span").text("login"),a("#modal-login-heading").html("Login to SlideShare"),this.appendHeader(),slideshare_object.ga("Signup","Login_clicked");break;case"modalLoginSubmit":this.modalLoginCallBack();break;case"hideSpinner":a(".spinnerForIframe").hide(),a("#j-fb-modal-btn").show(),a("#modal_login_iframe").show();break;case"toggle_fb_message":var t=a(".btn-fb-modal, .btn-fb-modal-other, .btn-fb-modal-de");t.is(":visible")?t.fadeOut(200):t.fadeIn(500);break;case"fbconnectNewUser":case"fbconnectExistingUser":window.location.replace("/fbconnect/landingpage?from="+this.fromSource);break;case"fbconnectExistingUserWithLinkedAccount":var i=getUrlVar("from",this.url),o=decodeURIComponent(this.fromSource);void 0!==getUrlVars(this.fromSource).from_logout&&"undefined"==typeof i?window.location.replace("/?ss"):window.location.pathname.startsWith("/upload")&&/loggedout_/.test(window.location.href)?window.location.replace(window.location.href.replace("loggedout_","loggedin_loggedout_")):this.fromSource&&isInternalRedirect(this.fromSource)&&window.location.href!==o?window.location.href=decodeURIComponent(this.fromSource):window.location.reload();break;case"fbconnectFailed":a("#page-error span").html("Login unsuccessful. Please try again."),a("#page-error").show(),this.closeModal();break;case"fbconnectSuspendedUser":a("#page-error span").html("Oops! Your account was suspended after violating <a href='https://www.slideshare.net/terms' target='_blank' class='blue_link_bold'>SlideShare's Terms of Service</a> and/or <a href='http://www.slideshare.net/community_guidelines' target='_blank' class='blue_link_bold'>Community Guidelines</a>. Please read the <a href='https://help.linkedin.com/app/answers/detail/a_id/54677/kw/slideshare+suspend' target='_blank' class='blue_link_bold'>Suspended Users FAQ</a> to resolve this issue and log in."),a("#page-error").show(),this.closeModal();break;case"fbconnectDefault":window.location.reload()}},t.prototype.open=function(e,t){if(this.openModal(),this.url=e.replace("/login","/account/render_iframe_login"),this.url=this.url.replace("/signup","/account/render_iframe_login"),this.url=this.url||"/account/render_iframe_login",t=t||"#"+this.modalId,this.fromType=getUrlVar("from",this.url),this.fromSource=getUrlVar("from_source",this.url),this.contentLoaded===!1){var i=t;a(i).load(this.url,a.proxy(this.appendHeader,this)),this.contentLoaded=!0}else this.appendHeader()},t.prototype.openModal=function(e,t){a("#"+this.modalId).modal("show")},t.prototype.closedHandler=function(a){return e.isDownloadUrl(this.url)?e.ga("Signup","thickbox_closed","download"):e.ga("Signup","thickbox_closed"),!0},t.prototype.modalLoginCallBack=function(){if(e.isDownloadUrl(this.url)||e.ga("Login","ss_login","ss_login_from_fancybox"),window.location.pathname.startsWith("/upload")===!0&&(e.ga("Upload","ss_login_successful"),/loggedout_/.test(window.location.href)))return window.location.replace(window.location.href.replace("loggedout_","loggedin_loggedout_")),!1;var a=-1!==jQuery.inArray(this.fromType,["business","upload","download","favorite","clip"]),t=decodeURIComponent(this.fromSource);a&&this.fromSource&&this.fromSource.length>1&&isInternalRedirect(this.fromSource)&&window.location.href!==t?window.location.href=t:window.location.reload()},"undefined"!=typeof Foundation&&(t.prototype.initModal=function(){a("body").append('<div class="modal-login-wrapper reveal-modal" id="'+this.modalId+'" data-reveal></div>'),this.modalElement=a("#"+this.modalId)},t.prototype.bindTriggers=function(t){a(document).on("click","a[data-reveal-id="+this.modalId+"], button[data-reveal-id="+this.modalId+"]",a.proxy(function(t){if(!e.user||!e.user.loggedin){var i=a(t.currentTarget);t.currentTarget&&(href=i.attr("href"))&&href.length>0&&(t.preventDefault(),this.open(href,i.attr("reveal-id")))}},this))},t.prototype.bindEvents=function(){a(document).on("closed.fndtn.reveal",this.modalElement,a.proxy(this.closedHandler,this))},t.prototype.messageReceiver=function(e){switch(e){case"Signup_show_from_iframe":a("#modal-login-heading").html("Signup for SlideShare"),this.appendHeader(),slideshare_object.ga("Signup","Signup_loaded");break;case"login_show_from_iframe":a("#modal-login-heading").html("Login to SlideShare"),this.appendHeader(),slideshare_object.ga("Signup","Login_clicked");break;case"fbconnectNewUser":case"fbconnectExistingUser":window.location.replace("/fbconnect/landingpage?from="+this.fromSource);break;case"fbconnectExistingUserWithLinkedAccount":var t=getUrlVar("from",this.url),i=decodeURIComponent(this.fromSource);void 0!==getUrlVars(this.fromSource).from_logout&&"undefined"==typeof t?window.location.replace("/?ss"):window.location.pathname.startsWith("/upload")&&/loggedout_/.test(window.location.href)?window.location.replace(window.location.href.replace("loggedout_","loggedin_loggedout_")):isInternalRedirect(this.fromSource)&&window.location.href!==i?window.location.href=decodeURIComponent(this.fromSource):window.location.reload();break;case"fbconnectFailed":this.closeModal();break;case"fbconnectSuspendedUser":this.closeModal();break;case"fbconnectDefault":window.location.reload();break;case"modalLoginSubmit":this.modalLoginCallBack();break;case"hideSpinner":a(".frame-loading").hide();break;case"forgotPassword":window.location.href=a("#forgot-password-url").val()}},t.prototype.openModal=function(){this.modalElement.foundation("reveal","open")},t.prototype.closeModal=function(){this.modalElement.foundation("reveal","close")}),a(document).ready(function(){if(!e.user.loggedin){var a=new t({iFrameSelector:"#modal_login_iframe",modalElementId:"login_modal"});window.initiate_login_modal=function(e,t){a.open(e,t)}}}),window.initiate_login_modal=function(e,a){error("Login modal initialization cannot be performed")}}(slideshare_object,jQuery),function(e,a,t){function i(e,t){t=t||{},this.downloadAction=$(e||".j-download, .j-save"),this._shouldClickPropagate=t.propagate,this._showClippingModal=t.showClippingModal,a.lead_form_on_download||this.bindEvents()}var o=12e4,n=a.getPageKey(),s=a.download_url;i.prototype={constructor:i,_init_loggedout:function(){this.downloadAction.on("click",function(){var e=new Date;e.setTime(e.getTime()+o),$.cookie("logout_action","save",{path:"/",expires:e}),$.cookie("download_start_location",n,{path:"/",expires:e}),$(".player").hasClass("fullscreen")&&$.slideshareEventManager&&$.slideshareEventManager.trigger("leavefullscreen")})},_init:function(){var t=this._shouldClickPropagate;this.downloadAction.on("click",function(o){var n=e.location;o.preventDefault(),t||o.stopPropagation(),n.origin||(n.origin=n.protocol+"//"+n.hostname+(n.port?":"+n.port:"")),a.user&&i.postDownloadRequest($(this).attr("href"))})},bindEvents:function(){t.isUserAuthenticated()?this._init():this._init_loggedout()},unbindEvents:function(){this.downloadAction.off("click")}},i.download=function(){if(t.isUserAuthenticated()){var e=$(".j-action-download, .j-download, .j-save").attr("href");i.postDownloadRequest(e)}else i.downloadFile(s)},i.postDownloadRequest=function(a){$.post(a,function(a){var t;a.success?i.downloadFile(a.download_ss_url):(t=$("#alert-modal"),t.find("p").text(a.notice),t.foundation("reveal","open"),e._gaq.push(["_trackEvent","savedfiles","download_validation_failed"]))})},i.downloadFile=function(a){var t=$("#j-downloading-alert");e._gaq.push(["_trackEvent","savedfiles","download_started_from_loggedin",n]),t.show(),setTimeout(t.hide,3e3),$("#download").attr("src",a)},a.download_interaction=i,t.exports("Downloader",i)}(window,window.slideshare_object,window.slideshare_object.utils);