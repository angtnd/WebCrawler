var AutoSuggest;(function(n){var t;(function(n){var f=function(){function n(){}return n.User="SRCHHPGUSR",n.History="_UR",n}(),t,i,r,u;n.CookieNames=f;t=function(){function n(){}return n.AutoSuggest="AS",n.History="OMW",n}();n.CrumbNames=t;i=function(){function n(){}return n.CursorPosition="cp",n.Options="o",n.ConversationId="cvid",n.SuggestionCount="sc",n.PartialQuery="pq",n.SuggestionPosition="sp",n.SuggestionType="qs",n.PreviewPaneSuggestionType="qsc",n.SkipValue="sk",n.PreviewPaneSkipValue="skc",n.Ghosting="ghc",n.Css="css",n.Count="count",n.DataSet="ds",n.SessionId="sid",n.TimeStamp="qt",n.Query="q",n.ImpressionGuid="ig",n.QFQuery="qry",n.FormCode="form",n.HashedMuid="nclid",n.RequestElToken="elvr",n.AppId="appid",n.History="history",n.ApiTextDecoration="textdecorations",n.ClientId="clientid",n.Market="mkt",n}();n.QueryParams=i;r=function(){function n(){}return n.HistoryEnabled="hs",n.HitHighlighting="h",n.PopularNow="p",n.Local="l",n.Answers="a",n}();n.Options=r;u=function(){function n(){}return n.Id="id",n.Query="query",n.Url="url",n.Navigation="nav",n.Type="stype",n.Autocomplete="hc",n}();n.SuggestionAttributes=u})(t=n.Service||(n.Service={}))})(AutoSuggest||(AutoSuggest={}));_w.Bing=_w.Bing||{};Bing.AS=Bing.AS||{};Bing.AS.EventIds={TextChanged:1,SelectPrevItem:2,SelectNextItem:3,UpdateText:4,NavigateSerp:7,ReadyToProcessEvents:8,SelectLeftItem:9,SelectRightItem:10,NavigateLink:11,EnterKeyPressed:12,EscKeyPressed:13,CloseFlyout:15,MouseEnterSuggestion:16,MouseLeaveSuggestion:17,LastSharedEventId:99,ConfigurationSet:100,Initialized:101,RequestSent:102,ApiCallback:103,ApiServiceReceived:104,ValidResponseReceived:105,SuggestionsRendered:106,NoResults:107,InvalidQuery:108,BeforeNavigate:109,UpdateTextAndRequery:110,QueryChanged:111,InstSubmit:112,GhostedSuggestion:113,GhostingSubmit:114,DropDownShown:115,DropDownHidden:116,Disposed:117,UpdateGhostedText:120};Bing.AS.Constants={KeyCodeBackspace:8,KeyCodeTab:9,KeyCodeEnter:13,KeyCodeEscape:27,KeyCodeSpace:32,KeyCodePageUp:33,KeyCodePageDown:34,KeyCodeEnd:35,KeyCodeArrowLeft:37,KeyCodeArrowUp:38,KeyCodeArrowRight:39,KeyCodeArrowDown:40,KeyCodeInsert:45,KeyCodeDelete:46,KeyCodeImeOpen:229,HitHighlightStartToken:"<strong>",HitHighlightEndToken:"<\/strong>",SuggestionsDataProvider:1};Bing.AS.AutoSuggest=function(){function p(t,i,r,u){if(!v){if(n.config.latencyLag>0&&!u){setTimeout(sj_wf(p,t,i,r,!0),n.config.latencyLag);return}if(n.raiseEvent(Bing.AS.EventIds.ApiCallback),r==n.currentQuery)if(t!=null){if(t.indexOf("NoResults")==0){n.canvas.currentSuggestionList=[];n.raiseEvent(Bing.AS.EventIds.NoResults);return}n.raiseEvent(Bing.AS.EventIds.ValidResponseReceived,r,{},i);s=r;n.canvas.render(t,n.currentQuery,i);l=!0}else n.canvas.currentSuggestionList=[],n.raiseEvent(Bing.AS.EventIds.NoResults)}}function w(n){return r.asf&&!n?g:d}function b(i,u,f){f=f||n.canvas.selectedSuggestion;switch(i){case t.SuggestionCount:return n.canvas.currentSuggestionList.length+"-"+s.length;case t.PartialQuery:return u?encodeURIComponent(n.currentQuery):n.currentQuery;case t.SuggestionPosition:return f?f.ord+1:-1;case t.SuggestionType:return f?f.src:"n";case t.SkipValue:return f&&f.sk?f.sk:"";case t.PreviewPaneSkipValue:var e=null;return f&&f.qsc&&(e=f.skc?f.skc:""),e;case t.PreviewPaneSuggestionType:return f&&f.qsc?f.qsc:null;case t.Ghosting:return n.ghostInstValue>0?n.ghostInstValue:null;case t.ConversationId:return r.asf?_G.IG:null}}function tt(t,i){var h=[],a=t["0"].Type.toString(),v=c[a],e,o,l,r,f;for(u.appendHistory(i,t,v),o=0;o<t.length;o++){if(e=t[o],l=e.Type,r=e.Suggests,!nt[l]){for(f=0;f<r.length;f++)r[f].ServiceType=l,n.lastSuggestionType=r[f].Type;h=h.concat(r)}n.raiseEvent(Bing.AS.EventIds.ApiServiceReceived,e)}s=i;n.canvas.render(h,n.currentQuery)}function k(){v=!0;sj_evt.unbind(a,k);n.raiseEvent(Bing.AS.EventIds.Disposed);Bing.AS.AutoSuggest.prototype.EventRegistry=[]}var n=this,o;n.config=null;n.currentQuery="";n.apiOptions="";n.canvas=null;n.logMeta="";n.popularNowEnabled=!1;n.lastSuggestionType;n.data={};var t=AutoSuggest.Service.QueryParams,f=AutoSuggest.Service.Options,d=[t.PartialQuery,t.SuggestionCount,t.SuggestionPosition,t.SuggestionType,t.SkipValue,t.PreviewPaneSkipValue,t.PreviewPaneSuggestionType,t.Ghosting,t.ConversationId,],g=[t.Ghosting],r,h=0,c={},nt={QR:1,NW:0},s="",u,e=Bing.AS.EtwEventLogger,i,l=!1,a="ajax.unload",v=!1,y;for(sj_evt.bind(a,k,!1),n.init=function(t,e){var h,s,l,a,v,o;if(n.config=r=t,y=e,t.p0)for(h=t.p0.split(","),s=0;s<h.length;s++)l=s.toString(),a=h[l].toString(),c[a]=1;i=new Bing.AS.DataProvider(t,Bing.AS.Constants.SuggestionsDataProvider,p);n.popularNowEnabled=t.ePN;t.eLO&&n.addApiOption(f.Local);t.eAN&&(v=t.as||f.Answers,n.addApiOption(v));u=new Bing.AS.History(t);u.init();n.canvas=new Bing.AS.Canvas(n,t,e);o=new Bing.AS.EventRegistration;o.add(Bing.AS.EventIds.SuggestionsRendered,function(i,r,f,e,o){n.raiseEvent(Bing.AS.EventIds.SuggestionsRendered,i,r,f,e,o);t.asf&&u.setQueryWithoutHistory(i,r)});o.add(Bing.AS.EventIds.UpdateText,function(t,i){n.raiseEvent(Bing.AS.EventIds.UpdateText,t,i)});o.add(Bing.AS.EventIds.NavigateSerp,function(t,i){n.raiseEvent(Bing.AS.EventIds.NavigateSerp,t,i)});o.add(Bing.AS.EventIds.NavigateLink,function(t,i,r,u,f,e){n.raiseEvent(Bing.AS.EventIds.NavigateLink,t,i,r,u,f,e)});o.add(Bing.AS.EventIds.NoItemSelected,function(){n.raiseEvent(Bing.AS.EventIds.NoItemSelected)});o.add(Bing.AS.EventIds.SelectPrevItem,function(t){n.raiseEvent(Bing.AS.EventIds.SelectPrevItem,t)});o.add(Bing.AS.EventIds.SelectNextItem,function(t){n.raiseEvent(Bing.AS.EventIds.SelectNextItem,t)});o.add(Bing.AS.EventIds.MouseEnterSuggestion,function(t){n.raiseEvent(Bing.AS.EventIds.MouseEnterSuggestion,t)});o.add(Bing.AS.EventIds.MouseLeaveSuggestion,function(t){n.raiseEvent(Bing.AS.EventIds.MouseLeaveSuggestion,t)});o.add(Bing.AS.EventIds.NoResults,function(){n.raiseEvent(Bing.AS.EventIds.NoResults)});n.canvas.EventRegistry.push(o);n.raiseEvent(Bing.AS.EventIds.Initialized,this)},n.addApiOption=function(n){i.addApiOption(n)},n.apiCB=function(t){n.raiseEvent(Bing.AS.EventIds.ApiCallback);var i="",r=[],f,u=t.AS;e&&e.log(n,"ApiResponseReceived");try{if(i=u.Query,f=u.FullResults==1,r=u.Results,n.logMeta=u.LogMeta,n.currentQuery!=""&&i!=n.currentQuery)return;if(!r){n.canvas.currentSuggestionList=[];n.raiseEvent(Bing.AS.EventIds.NoResults);return}}catch(o){return}n.raiseEvent(Bing.AS.EventIds.ValidResponseReceived,i,r);tt(r,i)},n.setData=function(t){n.data=t},n.enabledPopularNow=function(t){n.popularNowEnabled=t},n.reset=function(){u.reset()},n.getAllSuggestionInstUrl=function(n,t){for(var f,r=w(t),u=[],i=0;i<r.length;i++)f=b(r[i],!0,n),f!==null&&(u=u.concat(["&",r[i],"=",f]));return u.join("")},n.getAllSuggestionInstObject=function(n,t){for(var u,r=w(t),f={},i=0;i<r.length;i++)u=b(r[i],!1,n),u!==null&&(f[r[i]]=u);return f},n.setCursorPosition=function(n){h=n},n.setDataSet=function(n){this.config.ds=n},n.fetch=function(o){var s,c;i.addParam(t.CursorPosition,h);s=y.parentNode.offsetWidth;r.cors?i.addParam("contentWidth",s):i.addHeader("X-Autosuggest-ContentWidth",s);r.h&&n.currentQuery!=""&&i.addApiOptionN(f.HitHighlighting);n.popularNowEnabled&&i.addApiOptionN(f.PopularNow);u.setDataProviderCallParams(n.currentQuery,i);r.ds&&i.addParam(t.DataSet,r.ds);r.cnt&&r.cnt>0&&i.addParam(t.Count,r.cnt);r.asf&&!l&&i.addParam(t.Css,1);c=i.fetch(o);e&&e.log(n,"ApiRequestSent");n.raiseEvent(Bing.AS.EventIds.RequestSent,n.currentQuery,c)},o=0;o<Bing.AS.AutoSuggest.ScopeExtensions.length;o++)Bing.AS.AutoSuggest.ScopeExtensions[o].init.apply(this)};Bing.AS.AutoSuggest.ScopeExtensions=[];Bing.AS.AutoSuggest.prototype.EventRegistry=[];Bing.AS.AutoSuggest.prototype.InstrumentationTypes=[];Bing.AS.AutoSuggest.prototype.setQuery=function(n){var t=this.config.eHS||this.popularNowEnabled?0:1;n.length>=t?(this.currentQuery=n,this.fetch(n)):this.raiseEvent(Bing.AS.EventIds.InvalidQuery)};Bing.AS.EventRegistration=function(){this.events=[];this.add=function(n,t){this.events[n]=t}};Bing.AS.AutoSuggest.prototype.raiseEvent=function(n){for(var r=arguments.length?[].slice.apply(arguments).slice(1):[],t=0,i;t<this.EventRegistry.length;t++)i=this.EventRegistry[t],i.events[n]&&i.events[n].apply(this,r)};Bing.AS.History=function(n){function s(){return n.eHS&&sj_cook.get(h,c)!="0"}function v(n){var r=s();return(r!=o&&t.reset(),o=r,!r)?!1:i?n.indexOf(i)!=0:!0}var f=AutoSuggest.Service.QueryParams,e=AutoSuggest.Service.Options,t=this;t.config=n;var h="_UR",c="OMW",l="_SS",a="SID",o=s(),i=null,r,u={};n.vid&&(u["hs.ds"]=n.vid);t.setDataProviderCallParams=function(t,i){var o,s;if(r||(r=sj_cook.get(l,a)),v(t)&&r){n.asf?(i.addParam(f.Options,e.HistoryEnabled),n.lafr&&i.addParam("hs.count",t==""?6:3)):(o=t==""?n.maxHSEQ:n.maxHS,o&&(u["hs.count"]=o),i.addParam(f.SessionId,r),i.addParam(f.TimeStamp,sb_gt()),i.addApiOptionN(e.HistoryEnabled));for(s in u)i.addParam(s,u[s])}};t.appendHistory=function(n,r,u){var e=0,o=t.getHistory(n,r),s={Type:"HS",Suggests:o},f;if(e=o.length,e){for(f=0;f<e;f++)s.Suggests[f].isHist=!0;r.splice(u?1:0,1,s)}else i=n};t.setQueryWithoutHistory=function(n,t){for(var u=!1,r=0;r<t.length;r++)if(t[r].stype&&t[r].stype=="HS"){u=!0;break}u||(i=n)};t.reset=function(){i=null}};Bing.AS.History.prototype.init=function(){};Bing.AS.History.prototype.getHistory=function(n,t){for(var i=0;i<t.length;i++)if(t[i].Type=="HS")return t[i].Suggests;return[]};Bing.AS.Utils=new function(){function f(n,t){if(n===t)return!1;while(t&&t!==n)t=t.parentNode;return t===n}var i=new RegExp(Bing.AS.Constants.HitHighlightStartToken,"gi"),r=new RegExp(Bing.AS.Constants.HitHighlightEndToken,"gi"),n,t=[],u=5;this.StripHighlighting=function(n){return n.replace(i,"").replace(r,"")};this.SetInnerText=function(n,t){if(n&&typeof t=="string"){var i="textContent";n[n[i]!==undefined?i:"innerText"]=t}};this.GetComputedStyle=function(n){return _w.getComputedStyle?_w.getComputedStyle(n,null):n.currentStyle};this.GetQueryStringParam=function(n,t){var r=new RegExp("[?&]{1}"+t+"=([^&]+)"),i=n.match(r);return i?i[1]:null};this.LoadScript=function(i){n=n||_d.getElementsByTagName("head")[0];var r=sj_ce("script");n.appendChild(r);r.src=i;t.push(r);t.length>=u&&n.removeChild(t.shift())};this.SetSelectionRange=function(n,t,i){if(n.setSelectionRange)n.setSelectionRange(t,i);else{var r=n.createTextRange();r.moveEnd("sentence",-1e5);r.moveStart("character",t);r.moveEnd("character",i-t);r.select()}};this.TruncateText=function(n,t){return n.length>t&&(n=n.substr(0,t-3),n=n.replace(/\s+$/g,"")+"..."),n};this.GetMouseCoords=function(n){return n=sj_ev(n),{x:n.clientX,y:n.clientY}};this.RewriteAttribsToProps=function(n,t){for(var i,r,u=0;i=t[u++];)r=n.getAttribute(i),r&&(n[i]=r)};this.MouseEnterLeave=function(n,t){return function(i){i=sj_ev(i);var r=i.relatedTarget||(i.type=="mouseout"?i.toElement:i.fromElement);t===r||f(t,r)||n.call(t,i)}};this.getCursorPosition=function(n,t){var i=0,e=_d.selection,o=n.selectionStart,r,u,f;return o!=null?i=o:e&&n.createTextRange&&(t&&n.focus(),r=n.createTextRange(),u=r.duplicate(),f=e.createRange(),t&&r.moveToBookmark(f.getBookmark()),u.setEndPoint("EndToStart",f),i=u.text.length),i};this.RemoveClassName=function(n,t){n&&(n.className=n.className.replace(t,""))};this.AddClassName=function(n,t){var r,i;if(n){for(r=n.className.split(" "),i=0;i<r.length;i++)if(r[i]===t)return;n.className.length>0&&(n.className+=" ");n.className+=t}}};_w.Bing=_w.Bing||{};Bing.AS=Bing.AS||{};Bing.AS.DataProvider=function(n,t,i){function c(t){var i=t,r,e;n.asf&&n.ds&&(r="/AS/Suggestions",i=i.replace(r,r+"/"+n.ds));for(e in u)i+="&"+e+"="+u[e];return u={},f=[],i}function v(n){s.push(n)}function y(n){f.push(n)}function e(n,t){u[n]=t}function p(t,i){if(n.cors)throw"Custom headers are not allowed for cross domain calls";o[t]=i}function w(n,t){var i=t?f:s.concat(f);e(r.Query,encodeURIComponent(n));e(r.Options,i.join("+"));Bing.AS.Utils.LoadScript(c(a))}function b(t){var o=[].slice.call(arguments),i;return e(r.ConversationId,_G.IG),n.lafr&&(i=s.concat(f),u[r.Options]&&i.push(u[r.Options]),e(r.Options,i.join("+"))),o.unshift(c(decodeURIComponent(n.u)+encodeURIComponent(t))),l.apply(_w,o)}function l(n){var t=sj_gx(),r,u;h++;r=[].slice.apply(arguments).slice(1);r.unshift(h);t.open("GET",n,!0);for(u in o)t.setRequestHeader(u,o[u]);return o={},t.onreadystatechange=function(){if(t.readyState==4){t.onreadystatechange=function(){};var n=null;t.status==200&&(n=t.responseText);r.unshift(n);i.apply(_w,r)}},t.withCredentials!==undefined&&(t.withCredentials=!0),t.send(),h}var k=this,r=AutoSuggest.Service.QueryParams,a=[decodeURIComponent(n.u),"&mkt=",n.mkt,"&type=cb&cb=",n.globalId,".apiCB"].join(""),s=[],u={},o={},f=[],h=0;return{addApiOption:v,addApiOptionN:y,addParam:e,fetch:n.asf?b:w,fetchUrl:l,addHeader:p}};Bing.AS.Canvas=function(n,t,i){function ut(n){f=f||u.GetMouseCoords(n)}function ft(n,t){var i=u.GetMouseCoords(n);f&&(f.x!=i.x||f.y!=i.y)&&(f=i,t.className.indexOf(k)==-1&&(r.highlightSuggestion(t),r.raiseEvent(Bing.AS.EventIds.MouseEnterSuggestion,t)))}function lt(n,t,i){for(var f=[],u=0,e,o=n.split(Bing.AS.Constants.HitHighlightStartToken),u=0;u<o.length;u++)f=f.concat(o[u].split(Bing.AS.Constants.HitHighlightEndToken));for(u=0;u<f.length;u++)f[u]&&(e=u%2==0?r.buildSuggestionSegment(f[u],i?"span":0,i):r.buildSuggestionSegment(f[u],"strong",i),t.appendChild(e))}function at(n,t){var e=n.Type,u=r.SuggestionGroupBuilders[e],f,i;return u?u.call(r,n,t):(f=r.SuggestionBuilders[n.Type]||r.buildSuggestion,i=r.ce("li"),r.decorateSuggestion(i,n,t),i=f.call(r,n,i),!i)?!1:(n.SelectTxt||(n.SelectTxt=n.DisplayTxt),r.appendSuggestion(i,n),i)}function vt(){for(var t,i,f=r.suggestionsContainer.childNodes,u=0,n;u<f.length;u++)if(n=f[u],n.overflowElems)for(t=0;t<n.overflowElems.length;t++)i=n.overflowElems[t],i.offsetLeft+i.offsetWidth>r.suggestionsContainer.offsetWidth&&(i.style.display="none")}function yt(n,t){var i;return n?(i=n.getAttribute(h.Navigation))?t==e.right&&n.panel&&!n.panel.visible?void 0:i.split(";")[t]:void 0:v[t]}function c(n){var u,i;(u=yt(s,n))&&(u==t.i?(o(),r.unHighlightSuggestionHandler(),r.raiseEvent(Bing.AS.EventIds.NoItemSelected)):(i=_ge(u),i&&(o(i),r.highlightSuggestion(i))))}function pt(){return u.getCursorPosition(it)==it.value.length}function p(n){for(var t=r.currentSuggestion;t=t[n];)if(!t.hd)return t;return null}function et(n){n=sj_ev(n);sj_sp(n)}function ot(){return t.hn?"http://"+t.hn:""}function st(n){d.test(n.className)||(n.className+=" "+k)}function ht(n){u.RemoveClassName(n,d)}function o(n){if(r.selectedSuggestion=n,!n||n.supressTextOnSelect)r.raiseEvent(Bing.AS.EventIds.UpdateText,tt,!0);else{var t=n.query||r.currentSuggestionList[n.ord];!t&&n.panel&&(t=n.panel.suggestion.query);r.raiseEvent(Bing.AS.EventIds.UpdateText,t)}}function wt(n,i){return t.anc?null:(i.className=this.SuggestionClassName+" sa_2RowImg "+this.SuggestionClassName+n.Type,this.buildSuggestionImage(n,i),this.buildSuggestionTerm(n,i),this.buildSuggestionDescription(n,i),this.addSuggestionUrl(n,i),i.supressTextOnSelect=!0,i)}function bt(n){for(var r="script",e="src",o=y.getElementsByTagName(r),u,t,i,f;o.length;)y.removeChild(o[0]);for(u=n.getElementsByTagName(r);u.length;)t=sj_ce(r),i=u[0],t.type=i.type,f=i.getAttribute(e),f?t.setAttribute(e,f):(t.setAttribute("data-bing-script","1"),t.text=i.innerHTML),i.parentNode.removeChild(i),y.appendChild(t)}function kt(n){for(var i=n.getElementsByTagName("style"),t=0;t<i.length;t++)sj_ic(i[t].innerHTML)}var r=this,w,l,b,a;r.autoSuggestInstance=n;r.config=t;r.container=i;r.currentRenderIndex=0;r.currentSuggestion;r.currentSuggestionList=[];r.selectedSuggestion;r.clickedSuggestion;r.suggestionTypesRendered;r.suggestionsContainer=i;r.SuggestionClassName="sa_sg";var k="sa_hv",d=/(\s|^)sa_hv/g,g="sa_tm",u=Bing.AS.Utils,nt=u.MouseEnterLeave,e={up:0,right:1,down:2,left:3},tt,ct=t.m||5,f,it=_ge(t.i),v=[],s,y=_ge(t.c||"sw_as"),h=AutoSuggest.Service.SuggestionAttributes,rt=new Bing.AS.EventRegistration;for(rt.add(Bing.AS.EventIds.Disposed,function(){Bing.AS.Canvas.prototype.EventRegistry=[]}),n.EventRegistry.push(rt),r.render=function(n,o,c){var y=0,w=[],d,b,l,rt,g,p,a,nt,it,k;if(i.innerHTML="",tt=o,r.currentSuggestionList=[],r.currentSuggestion=null,r.selectedSuggestion=null,s=null,f=null,r.currentRenderIndex=0,r.suggestionTypesRendered={},typeof n=="string"){if(r.InsertAjaxResponseIntoDom(i,n),r.suggestionsContainer=_ge(t.slid),r.suggestionsContainer){for(d=r.suggestionsContainer.getElementsByTagName("li"),b=0;l=d[b];b++)if(l.parentNode.id==t.slid){if(rt=/^https?:\/\/[^\/]+\/search|^\/search/,u.RewriteAttribsToProps(l,[h.Url,h.Query,h.Type,h.Autocomplete]),l.className.indexOf("pp_tile")!=-1&&(l.panel={ot:sb_gt()}),l.className.indexOf("sa_hd")!=-1){l.hd=!0;l=l.nextSibling;continue}r.currentSuggestionList.length==0&&(v[e.down]=l.id);typeof l.url=="string"&&(l.addInst=l.url.indexOf("/search")==0);r.currentSuggestionList.push(l.query);r.decorateSuggestion(l,{},y++);v[e.up]=l.id;w.push(l)}}else{r.raiseEvent(Bing.AS.EventIds.NoResults);return}n={}}else for(it=Math.min(n.length,ct);y<it;y++){if(a=n[y],!a)break;a.DisplayTxt=a.Txt;p=a.ServiceType;p!=nt&&r.HeadingBuilders[p]&&(g=r.HeadingBuilders[p].call(r))&&r.addHeading(g,y==0);r.suggestionTypesRendered[a.Type]==null&&(r.suggestionTypesRendered[a.Type]=0);k=at(a,r.currentRenderIndex);k&&(nt=p,r.suggestionTypesRendered[a.Type]++,r.currentRenderIndex++,w.push(k))}r.raiseEvent(Bing.AS.EventIds.SuggestionsRendered,o,w,n,c,i);sb_st(vt,1)},r.appendSuggestion=function(n,t){var i=u.StripHighlighting(t.SelectTxt);n.query=i;r.suggestionsContainer.appendChild(n);r.currentSuggestionList.push(i)},r.decorateSuggestion=function(n,t,i){n.src=n.stype||t.Type;n.ord=i;n.sk=t.Sk;r.attachSuggestionEvents(n)},r.attachSuggestionEvents=function(n){if(sj_be(n,"mousemove",function(t){ut(t);ft(t,n)}),sj_be(n,"mouseover",nt(function(t){ut(t);ft(t,n)},n)),sj_be(n,"mouseout",nt(function(){r.raiseEvent(Bing.AS.EventIds.MouseLeaveSuggestion,n)},n)),sj_be(n,"mousedown",function(t){r.onMouseDownSuggestion(t,n)}),sj_be(n,"mouseup",function(t){et(t);r.onMouseUpSuggestion(t,n)}),t.asf){var i=window.navigator.msPointerEnabled?"onMSPointerDown":"ontouchstart";i.toLowerCase()in _w&&sj_be(n,i.substr(2),function(t){if(f={x:0,y:0},n.it="m",t.pointerType)switch(t.pointerType){case t.MSPOINTER_TYPE_TOUCH:n.it="t";break;case t.MSPOINTER_TYPE_PEN:n.it="p"}else n.it="t"})}},r.buildSuggestionTerm=function(n,t,i){var f=g,u;n.isHist&&(f+=" "+g+"HS");u=r.ce(i||"div","",f);n.Type=="ID"&&(u.lang="en");t.appendChild(u);lt(n.DisplayTxt,u)},r.buildSuggestionDescription=function(n,t,i){n.Meta1&&t.appendChild(r.buildSuggestionSegment(n.Meta1,i||"div","sa_ds"))},r.buildSuggestionImage=function(n,t,i){if(n.Img){var f=r.ce(i||"div","","sa_img"),u=r.ce("img"),e=n.Img.alt;e&&(u.title=e);u.src=ot()+n.Img.src;u.width=n.Img.w;u.height=n.Img.h;f.appendChild(u);t.appendChild(f)}},r.addSuggestionUrl=function(n,i){n.Url&&(i.url=ot()+n.Url+(t.fc?"&FORM="+t.fc:""),i.addInst=!0)},r.buildSuggestionSegment=function(n,t,i){var f=t?r.ce(t,"",i):_d.createTextNode(n);return t&&u.SetInnerText(f,n),f},r.handleArrowUpKey=function(n){if(t.asf)c(e.up,n),r.currentSuggestion&&r.raiseEvent(Bing.AS.EventIds.SelectPrevItem,r.currentSuggestion);else{var i=r.suggestionsContainer.lastChild;if(r.currentSuggestion&&!(i=p("previousSibling"))){o();r.unHighlightSuggestionHandler();r.raiseEvent(Bing.AS.EventIds.NoItemSelected);return}o(i);r.highlightSuggestion(i)}},r.handleArrowDownKey=function(n){if(t.asf)c(e.down,n),r.currentSuggestion&&r.raiseEvent(Bing.AS.EventIds.SelectNextItem,r.currentSuggestion);else{var i;if(!(r.currentSuggestion&&(i=p("nextSibling")))){if(r.currentSuggestion){o();r.unHighlightSuggestionHandler();r.raiseEvent(Bing.AS.EventIds.NoItemSelected);return}i=r.currentSuggestion=r.suggestionsContainer.firstChild;i.hd&&(i=p("nextSibling"))}o(i);r.highlightSuggestion(i)}},r.handleArrowRightKey=function(n){t.asf&&pt()&&c(e.right,n)},r.handleArrowLeftKey=function(n){t.asf&&c(e.left,n)},r.highlightSuggestion=function(n){r.unHighlightSuggestionHandler();r.currentSuggestion=n;st(r.currentSuggestion);r.currentSuggestion!=n&&st(n);s=n},r.unHighlightSuggestionHandler=function(){s&&(ht(r.currentSuggestion),r.currentSuggestion=null,ht(s),s=null)},r.onMouseDownSuggestion=function(n,t){n=sj_ev(n);var i=n.button;i==2?(et(n),sj_pd(n)):r.clickedSuggestion=t},r.onMouseUpSuggestion=function(n,t){r.clickedSuggestion&&r.clickedSuggestion==t&&(o(r.clickedSuggestion),t.url?r.raiseEvent(Bing.AS.EventIds.NavigateLink,t.url,t.addInst,t.redir,t.query,!1,this.config.eNT):r.raiseEvent(Bing.AS.EventIds.NavigateSerp,t.query),r.clickedSuggestion=null)},w=["DT","IG","MV","SA","SI","SN","SP","SR","TC","TR","WE","WH","WM","WU","ID","NAV"],l=0;l<w.length;l++)b=w[l],this.SuggestionBuilders[b]=wt,Bing.AS.AutoSuggest.prototype.InstrumentationTypes.push(b);for(a=0;a<Bing.AS.Canvas.ScopeExtensions.length;a++)Bing.AS.Canvas.ScopeExtensions[a].init.apply(this);r.InsertAjaxResponseIntoDom=function(n,t){var i,u,f;if(t){for(i=r.ce("div"),i.innerHTML="<br>"+t,u=i.childNodes,i.removeChild(u[0]),bt(i),kt(i),f=_d.createDocumentFragment();u.length;)f.appendChild(u[0]);n.appendChild(f)}};r.ce=function(n,t,i){var r=_d.createElement(n);return t&&(r.id=t),i&&(r.className=i),r}};Bing.AS.Canvas.ScopeExtensions=[];Bing.AS.Canvas.prototype.HeadingBuilders={};Bing.AS.Canvas.prototype.SuggestionBuilders={};Bing.AS.Canvas.prototype.SuggestionGroupBuilders={};Bing.AS.Canvas.prototype.buildSuggestion=function(n,t){return t.className=this.SuggestionClassName+(this.suggestionsContainer.childNodes.length==0?" sa_sg_first ":" ")+this.SuggestionClassName+n.Type,this.buildSuggestionTerm(n,t),this.addSuggestionUrl(n,t),t.hc=n.HC,t.hcs=n.HCS,t};Bing.AS.Canvas.prototype.addHeading=function(n,t){var i=sj_ce("li","","sa_hd"+(t?"_first":""));i.hd=!0;i.innerHTML=n;this.suggestionsContainer.appendChild(i)};Bing.AS.Canvas.prototype.HeadingBuilders.PN=function(){return this.config.ePN?sa_loc.H_PN:null};Bing.AS.Canvas.prototype.HeadingBuilders.AS=function(){return this.config.eWH?sa_loc.H_AS:null};Bing.AS.Canvas.prototype.EventRegistry=[];Bing.AS.Canvas.prototype.raiseEvent=Bing.AS.AutoSuggest.prototype.raiseEvent;Bing.AS.Layout=function(n,t){function s(n,t){n.appendChild(t)}function i(n){var t=parseFloat(n);return isNaN(t)?0:t}var u=this,o=n.asf,h=Bing.AS.Utils.GetComputedStyle(sj_b).direction=="rtl",f=_ge(n.i),r=sj_ce("div","","sa_as"),e;s(t,r);o||(e=sj_ce("ul","sa_ul","sa_drw"),s(r,e));u.getSuggestionsContainer=function(){return o?_ge(n.slid):e};u.getSuggestionsDrawer=function(){return r};u.show=function(){r.style.display="block"};u.hide=function(){r.style.display="none"};u.update=function(){var u,e,n=Bing.AS.Utils.GetComputedStyle(t.parentNode);h?(e=(i(n.paddingRight)+i(n.borderRightWidth))*-1,u=i(n.borderLeftWidth)-i(n.paddingLeft)):(u=(i(n.paddingLeft)+i(n.borderLeftWidth))*-1,e=i(n.borderRightWidth)-i(n.paddingRight));t.style.marginLeft=u+"px";t.style.marginRight=e+"px";f!=null&&f.dir.length>0&&(r.dir=f.dir)}};Bing.AS.Layout.prototype.EventRegistry=[];Bing.AS.Layout.prototype.raiseEvent=Bing.AS.AutoSuggest.prototype.raiseEvent;Bing.AS.Layout.prototype.getLeft=function(){return 0};Bing.AS.Layout.prototype.getWidth=function(){return 0};Bing.AS.SearchForm=function(n){function ct(n){return typeof n=="number"?n:'"'+n.replace(/"/g,'\\"')+'"'}function a(u,f,e){var o,l,y,p,w,a,d,s,v,h;if(n.sbt){for(;y=b.shift();)t.searchForm.removeChild(y);b=[]}for(f&&t.raiseEvent(Bing.AS.EventIds.GhostingSubmit),c=r.getAllSuggestionInstObject(null,f),t.raiseEvent(Bing.AS.EventIds.BeforeNavigate),p=ri(e),o=_ge("sa_ghc"),o&&o.parentNode.removeChild(o),w=0,d=[c,p];a=d[w++];)for(s in a)o=_ge("sa_"+s),l=a[s],o?o.value=l:t.addHiddenField(s,l);r.ghostInstValue=0;ht?ht(i,c):(f||sj_evt.fire("onSearch",t.searchForm),k(),t.fireEvt?(v=t.searchForm.getAttribute("action"),e&&t.searchForm.setAttribute("action",e),t.searchForm.submit(),at(f),v&&t.searchForm.setAttribute("action",v)):t.searchForm.submit());t.fireEvt&&(t.autosuggest.canvas.selectedSuggestion=null,t.autosuggest.ghostInstValue=0,h=_ge("sa_ghc"),!c.ghc&&h&&h.parentNode.removeChild(h))}function k(){var r,i;ot&&n.eUG||(r=t.searchForm.getAttributeNode("onsubmit"),r&&_w.si_T&&(i=r.value.match(/si_T\('(.*)'\)/),i&&i[1]&&si_T(i[1])),ot=!0)}function lt(i,u,e,o,s,h){if(sb_st(f,5),o!=undefined&&y(o),e)sj_cook.set("SCRHDN","ASD","1"),sj_cook.set("SCRHDN","DURL",i),a(o,s);else{if(r.config.asf){if(n.sbt){a(o,s,i);return}n.eUG?k():(t.searchForm.onsubmit&&t.searchForm.onsubmit(),at(s))}var c=i+(u?r.getAllSuggestionInstUrl():"");h?_w.open(c,"_blank"):typeof sj_lc!="undefined"?sj_lc(c):_w.location=c}}function at(n){!n&&t.fireEvt&&t.fireEvt(t.searchForm,"ASSugClicked")}function ri(n){var r={},t;if(n)for(var i,f=/\+/g,e=/([^&=]+)=?([^&]*)/g,u=function(n){return decodeURIComponent(n.replace(f," "))},o=n.substring(n.indexOf("?")+1);i=e.exec(o);)t=u(i[1]).toLowerCase(),t!=="q"&&t!=="form"&&(r[t]=u(i[2]));return r}function vt(n,r){n(sj_b,"click",v);n(sj_b,"touchend",v);n(t.searchForm,"submit",ui);n(i,"keydown",fi);n(i,"keyup",ei);n(i,"click",pt);t.fireEvt&&n(_w,"blur",v);r("focusChange",si);r("hideDrawer",f)}function ui(n){var i,u;sb_st(f,5);t.cdh(n);i=r.canvas.selectedSuggestion;i?(r.config.asf&&_w.sa_si_T(i.getAttribute("id")),u=i.query,i.url?lt(i.url,i.addInst,i.redir,u,!0,t.config.eNT):a(u,!0)):a(r.currentQuery,!0)}function fi(n){t.cancelKeyEvent(n)||yt(n)}function yt(n){var i=n.keyCode;switch(i){case e.KeyCodeEscape:t.config.eAI?(u&&(v(n),sj_sp(n)),sj_pd(n)):t.isQueryGhosted()||(f(),t.cdh(n));break;case e.KeyCodeArrowUp:u&&(r.canvas.handleArrowUpKey(n),t.cdh(n));break;case e.KeyCodeArrowDown:u?r.canvas.handleArrowDownKey(n):wt();break;case e.KeyCodeArrowRight:u&&r.canvas.handleArrowRightKey(n);break;case e.KeyCodeArrowLeft:u&&r.canvas.handleArrowLeftKey(n);break;case e.KeyCodeTab:t.config.asf&&t.config.closeDrawerOnTab&&!t.isQueryGhosted()&&v(n)}}function ei(n){var i=n.keyCode;l||t.cancelKeyEvent(n)||(i==e.KeyCodeArrowUp||i==e.KeyCodeArrowDown||i==e.KeyCodeEscape)&&t.handleUpDownEscOnKeyUp(n)&&yt(n)}function pt(){u?t.shouldHidePanel()&&f():wt()}function wt(){(s&&sb_ct(s),l)||(t.lastQuery=null,bt(t.getCurrentQuery()))}function oi(){o.update();u||(sj_evt.fire("focusChange",i),et.AddClassName(sj_b,tt),o.show(),u=!0,t.raiseEvent(Bing.AS.EventIds.DropDownShown),sb_i6&&sj_evt.fire("autosuggestShown",i),sj_evt.fire("onPopTR"))}function v(){f()}function f(){u&&(et.RemoveClassName(sj_b,tt),o.hide(),gt=u=!1,t.lastQuery=t.getCurrentQuery(),t.raiseEvent(Bing.AS.EventIds.DropDownHidden),sb_i6&&sj_evt.fire("autosuggestHide",i))}function si(n){n[1]!==i&&f()}function hi(){s=sb_st(f,50)}function ci(n){t.updateText(n)}function y(n,t){var r=t?n+t:n,u;i.prefixLength=t?n.length:null;r!==null&&(i.value=r,st||i.setAttribute("value",r),u=r.length,ft(i,u,u))}function li(n,t){if(h=!0,y(n),!t){var r=n.length;i.focus();ft(i,r,r)}}function ai(n,t,i){h=i===undefined?!0:i;y(n,t)}function d(){var n,r;l||(n=t.getCurrentQuery(),t.lastQuery==n&&h||st||i.setAttribute("value",n),h?bt(n):(t.lastQuery=n,h=!0),r=rt,ut&&(r*=1<<Math.max(0,w-kt+1)/2));ni=sb_st(d,r)}function bt(n){if(t.lastQuery!=n){if(n.length<dt){f();return}t.shouldHidePanel()?f():(s&&sb_ct(s),r.setCursorPosition(t.getCursorPosition()),r.setQuery(n),t.lastQuery=n,w++)}}function vi(){w--}function yi(){Bing.AS.SearchForm.prototype.EventRegistry=[];vt(sj_ue,sj_evt.unbind);sb_ct(d);sb_ct(s)}var t=this,p;t.raiseEvent(Bing.AS.EventIds.ConfigurationSet,n);t.config=n;t.searchForm=null;t.searchBox=null;t.autosuggest=null;t.layout=null;t.lastQuery="";var g="SRCHHPGUSR",nt="AS",kt=4,tt="as_on",it,r,o,rt=0,ut,w=0,dt=n.eHS||n.ePN?0:1,s,l,gt,u,i,h=!0,e=Bing.AS.Constants,c,b=[],ni,ft=Bing.AS.Utils.SetSelectionRange,et=Bing.AS.Utils,ot,st=sb_ie&&sb_de.style.opacity===undefined,ti=new RegExp("^\\s*","g"),ii=new RegExp("\\s+","g"),ht=typeof n.cb=="function"?n.cb:null;for(t.init=function(u){var e,h,c,f,s;(t.config.globalId=u,t.config.slid="sa_ul",l=t.isDisabled())||(it=n.i,t.searchForm=_ge(n.f),i=_ge(it),t.searchBox=i,t.searchForm.form&&(n.fc=t.searchForm.form.value),sj_cook.set("SCRHDN","ASD","0"),sj_cook.set("SCRHDN","DURL","#"),e=_ge(n.c||"sw_as"),e.style.display="block",t.layout=o=new Bing.AS.Layout(n,e,i.parentNode),t.layout.update(),t.registerUIElement(e),t.registerUIElement(i),h=_ge("sb_form_go"),h&&t.registerUIElement(h),rt=n.d,ut=n.t,n.ol||(t.lastQuery=t.getCurrentQuery()),c=n.asf?o.getSuggestionsDrawer():o.getSuggestionsContainer(),t.autosuggest=r=new Bing.AS.AutoSuggest,r.init(n,c),f=new Bing.AS.EventRegistration,f.add(Bing.AS.EventIds.ApiCallback,vi),f.add(Bing.AS.EventIds.NoResults,hi),f.add(Bing.AS.EventIds.SuggestionsRendered,oi),f.add(Bing.AS.EventIds.UpdateText,ci),f.add(Bing.AS.EventIds.UpdateTextAndRequery,li),f.add(Bing.AS.EventIds.UpdateGhostedText,ai),f.add(Bing.AS.EventIds.NavigateSerp,a),f.add(Bing.AS.EventIds.NavigateLink,lt),f.add(Bing.AS.EventIds.Disposed,yi),r.EventRegistry.push(f),s=new Bing.AS.EventRegistration,s.add(Bing.AS.EventIds.SelectPrevItem,function(n){t.raiseEvent(Bing.AS.EventIds.SelectPrevItem,n)}),s.add(Bing.AS.EventIds.SelectNextItem,function(n){t.raiseEvent(Bing.AS.EventIds.SelectNextItem,n)}),r.canvas.EventRegistry.push(s),vt(sj_be,sj_evt.bind),d(),t.raiseEvent(Bing.AS.EventIds.Initialized,t))},t.apiCB=function(n){t.autosuggest.apiCB(n)},t.setData=function(n){t.autosuggest.setData(n)},t.isDisabled=function(){return sj_cook.get(g,nt)==0},t.enable=function(n,i){n&&(t.lastQuery=t.getCurrentQuery());l=!n;i||sj_cook.set(g,nt,n?1:0,1,"/")},t.sid=function(t){r.config.sid=n.sid=t},t.registerUIElement=function(n){sj_be(n,"touchend",sj_sp);sj_be(n,"click",sj_sp)},t.addHiddenField=function(i,r){var u=sj_ce("input");return u.id="sa_"+i,u.name=i,u.value=r,u.type="hidden",t.searchForm.appendChild(u),n.sbt&&b.push(u),u},t.drawerIsOpen=function(){return u},t.cp=0,t.cdh=function(n){sj_sp(n);sj_pd(n)},t.setAllSuggestionInstObject=function(n){c=n},t.addToAllSuggestionInstObject=function(n,t){c[n]=t},t.show=pt,t.getCursorPosition=function(){return t.cp=Bing.AS.Utils.getCursorPosition(i,!0),t.cp},_w.sa_si_T=function(i){var u=_ge(i.replace("&","")),e,o,f,s;return u&&document.images&&(e=u.getAttribute("h"),f={a:[],add:function(n,t){this.a.push(ct(n)+":"+ct(t))},get:function(){return this.a.length?"&PR={"+this.a.join(",")+"}":""}},f.add("i",r.canvas.clickedSuggestion?u.it||"m":"k"),r.ghostInstValue&&f.add("ghc",r.ghostInstValue),u.panel&&f.add("et",sb_gt()-u.panel.ot),o=t.autosuggest.data&&t.autosuggest.data.Inst?t.autosuggest.data.Inst.IG:null,o&&e&&(s=new Image,s.src=_G.gpUrl+"IG="+o+"&"+e+f.get()),n.eUG&&k()),!0},t.updateText=function(n){h=!1;y(n)},t.isQueryGhosted=function(){return!!i.prefixLength},t.getCurrentQuery=function(n){var t=i.prefixLength?i.value.substr(0,i.prefixLength):i.value;return n?t:t.replace(ti,"").replace(ii," ").toLowerCase()},p=0;p<Bing.AS.SearchForm.ScopeExtensions.length;p++)Bing.AS.SearchForm.ScopeExtensions[p].init.apply(t)};Bing.AS.SearchForm.ScopeExtensions=[];Bing.AS.SearchForm.prototype.EventRegistry=[];Bing.AS.SearchForm.prototype.cancelKeyEvent=function(){return!1};Bing.AS.SearchForm.prototype.handleUpDownEscOnKeyUp=function(){return!1};Bing.AS.SearchForm.prototype.raiseEvent=Bing.AS.AutoSuggest.prototype.raiseEvent;Bing.AS.SearchForm.prototype.shouldHidePanel=function(){return!1};Bing.AS.SearchForm.ScopeExtensions.push(new function(){this.init=function(){function g(){var u,f;t=o.searchBox;i=Bing.AS.Utils.GetComputedStyle(t);n.style.fontSize=i.fontSize;n.style.fontFamily=i.fontFamily;n.style.position="absolute";t.parentNode.insertBefore(n,t.nextSibling);s=Bing.AS.Utils.GetComputedStyle(t.parentNode);u=new Bing.AS.EventRegistration;u.add(r.ApiServiceReceived,it);u.add(r.SuggestionsRendered,rt);u.add(r.NoResults,a);u.add(r.UpdateText,ft);u.add(r.Disposed,ot);f=o.autosuggest;f.EventRegistry.push(u);f.addApiOption(w)}function e(n){return n.indexOf("px")>0?parseFloat(n):n.indexOf("em")>0?parseFloat(n)*(i.fontSize.indexOf("px")>0?parseInt(i.fontSize):16):0}function nt(){return e(i.paddingLeft)+e(i.marginLeft)+e(s.paddingLeft)}function tt(n){return e(s.paddingTop)+e(i.marginTop)+n+(t.offsetHeight-n)/2-1}function it(n){u=n.Type==b?n.Suggests:null}function rt(n,t){var i=t.length>0&&t[0].hc,r=function(){ut(i)};h=sb_st(r,5)}function ut(n){var r,f,i,t,e;if(a(),!n){if(u)for(t=0;t<u.length;t++)r=parseInt(u[t].Meta1),f=parseInt(u[t].Meta2),r!=NaN&&f!=NaN&&v(r,f);if(i=o.autosuggest.data,i&&i.Speller&&i.Speller.Corrections)for(t=0;e=i.Speller.Corrections[t++];)v(e.From,e.To)}}function a(){for(var n=0;n<f.length;n++)t.parentNode.removeChild(f[n]);f=[]}function ft(){for(var i=o.autosuggest.currentQuery==t.value?"block":"none",n=0;n<f.length;n++)f[n].style.display=i}function v(i,r){var e,o,u;Bing.AS.Utils.SetInnerText(n,t.value.substring(i,r));y();e=n.offsetWidth;o=n.offsetHeight;l();u=sj_ce("div","","sa_spell");u.style.width=e+"px";u.style.height=p+"px";u.style.left=et(i)+"px";u.style.top=tt(o)+"px";u.style.position="absolute";u.style.background="url(/fd/s/as_spell_underline.png)";t.parentNode.appendChild(u);f.push(u)}function et(i){Bing.AS.Utils.SetInnerText(n,t.value.substring(0,i));n.innerHTML=n.innerHTML.replace(k,"&#160;").replace(d,"_");y();var r=n.offsetWidth;return l(),r+nt()}function y(){n.style.display="inline"}function l(){n.style.display="none"}function ot(){h&&sb_ct(h)}var c;if(this.config.spr){var r=Bing.AS.EventIds,p=3,w="qr",b="QR",k=new RegExp(" ","g"),d=new RegExp("-","g"),o=this,t,u,f=[],i,s,h,n=sj_ce("span");n.style.whiteSpace="nowrap";l();c=new Bing.AS.EventRegistration;c.add(r.Initialized,g);this.EventRegistry.push(c)}}});Bing.AS.SearchForm.ScopeExtensions.push(new function(){var g=_w.location.search.indexOf("AutoSuggestTestHook_AlwaysGhost=1")>-1,n,y,w,k,t,i,l,c=0,a=0,v=0,nt=new RegExp("[-']","g"),f=Bing.AS.Utils.SetSelectionRange,tt=1,it=2,rt,d=!1,p=!1,b=!1,r,e,o,u,s,h;Bing.AS.Constants.KeyCodeEnter=13;Bing.AS.Constants.KeyCodePageUp=33;Bing.AS.Constants.KeyCodePageDown=34;Bing.AS.Constants.KeyCodeEnd=35;Bing.AS.Constants.KeyCodeHome=36;Bing.AS.Constants.KeyCodeInsert=45;Bing.AS.Constants.GhostingDelayResponse=0;Bing.AS.Constants.GhostingDelayArrowKey=15;r=Bing.AS.Constants;e=Bing.AS.EventIds;this.init=function(){function wt(i){var r,f,o,s;i.config.eHC&&(u=i.autosuggest,u.ghostInstValue=0,r=new Bing.AS.EventRegistration,r.add(e.SuggestionsRendered,dt),r.add(e.Disposed,hi),u.EventRegistry.push(r),u.addApiOption("hc"),n=i.searchBox,ot.add(e.GhostingSubmit,si),rt=n.style.width,ot.add(e.DropDownHidden,gt),f=Bing.AS.Utils.GetComputedStyle(n),w=f.color,k=f.backgroundColor,t=sj_ce("input","sa_ghostbox",n.className+" sa_ghostbox"),t.setAttribute("autocomplete","off"),o=n.getAttribute("type"),o&&t.setAttribute("type",o),i.registerUIElement(t),t.tabIndex=-1,t.style.zIndex=-1,t.style.position="absolute",s=Bing.AS.Utils.GetComputedStyle(n.parentNode),t.style.left=s.paddingLeft,t.style.top=s.paddingTop,ht(sj_be))}function ht(i){i(t,"keydown",ri);i(t,"keyup",ui);i(t,"focus",fi);i(t,"mouseup",ti);i(t,"mousedown",ii);i(t,"select",lt);i(t,"selectstart",lt);i(sj_b,"mouseup",ni);i(n,"focus",ft);i(n,"keydown",ei);u.config.smg&&i(n,"keypress",oi);i(n,"compositionstart",bt);i(n,"compositionend",kt)}function bt(){p=!0}function kt(){p=!1;b&&(b=!1,sb_ct(l),l=sb_st(ct,r.GhostingDelayResponse))}function dt(n,t){y=t;!c&&u.currentQuery&&(p?b=!0:l=sb_st(ct,r.GhostingDelayResponse))}function ct(){var v,s,r,w,h,l,e,a;if(d||(v=n.parentNode,v.insertBefore(t,v.firstChild),d=!0),l=n.value,e=l.length,o.cp==e&&!c&&!p){if(g)s=y[0];else for(a=0;a<y.length;a++)if(r=y[a],r.src!=null&&(w=r.src.toLowerCase()),r.hc){s=r;break}if(!s){ut();ft();vt();return}(i=s.query,h=l.toLowerCase(),i=i.toLowerCase(),i.indexOf(h)==0||(i=i.replace(nt,""),i.indexOf(h)==0&&i!=h))&&(o.config.discardGhost||(yt(),t.value=l+i.substring(e),i=t.value,i.substring(e).length==0&&(ut(),ft(),vt()),i!=null&&(f(t,e,i.length),t.focus(),o.raiseEvent(Bing.AS.EventIds.GhostedSuggestion,i,w)),i!=null&&u.ghostInstValue==0&&(u.ghostInstValue=tt)))}}function gt(){ft();ut()}function ni(){a&&at();a=0;v=0}function ti(){v&&(a||f(t,i.length,i.length),at(),n.focus());a=0;v=0}function ii(){v=1}function lt(){v&&(a=1)}function ri(t){var e=t.keyCode,s;if(c=0,e==r.KeyCodeBackspace?c=1:t.keyCode==r.KeyCodeArrowUp?u.canvas.handleArrowUpKey(t):t.keyCode==r.KeyCodeArrowDown&&u.canvas.handleArrowDownKey(t),i){if(e==r.KeyCodeDelete||e==r.KeyCodeBackspace||e==Bing.AS.Constants.KeyCodeEscape||t.keyCode==88&&t.ctrlKey){e==r.KeyCodeBackspace&&o.cdh(t);ut();st();return}if(e==65&&t.ctrlKey){et(1);ut();n.focus();return}if(e==r.KeyCodeHome||e==r.KeyCodePageUp){t.shiftKey||(et(),f(n,0,0),n.focus(),pt());return}if(t.keyCode==r.KeyCodeArrowUp||t.keyCode==r.KeyCodeArrowDown){ft();ut();n.focus();s=n.value.length;f(n,s,s);return}if(e==r.KeyCodeTab){o.cdh(t);et(1);ut();ft();n.focus();return}if(e==r.KeyCodeTab){sj_evt.fire("hideDrawer",n);st();return}if(e==r.KeyCodeArrowLeft){o.cdh(t);s=n.value.length;et();f(n,s,s);n.focus();ut();return}if(e==r.KeyCodeEnd||e==r.KeyCodePageDown||e==r.KeyCodeArrowRight){et(1);ut();ft();n.focus();return}if(t.ctrlKey&&e==86){n.focus();ut();f(n,n.value.length,n.value.length);o.config.eAI&&sj_sp(t);return}t.altKey||t.ctrlKey||e>r.KeyCodeEnter&&e<r.KeyCodeSpace||e==r.KeyCodeInsert||e==91||e==93||e>=112&&e<=123||e==144||e==145||st()}}function st(){s=t.selectionStart;h=t.selectionEnd;n.focus();f(n,n.value.length,n.value.length)}function ui(t){if(t.shiftKey&&(t.keyCode==r.KeyCodeHome||t.keyCode==r.KeyCodePageUp||t.keyCode==r.KeyCodeArrowLeft)){var i=n.value.length;et();ft();f(n,0,i);n.focus()}}function at(){var l=t.value,r,c;sb_st(function(){t.value!=l&&u.raiseEvent(e.UpdateTextAndRequery,t.value)},1);var o=_d.selection,s=t.selectionStart,h=t.selectionEnd;o&&t.createTextRange&&(r=t.createTextRange(),c=o.createRange(),s=r.text.length-c.text.length,h=r.text.length);et();n.focus();f(n,s,h);ft();i=null}function fi(){var n=_ge("sw_b");n&&(n.style.borderColor="#3366bb")}function ei(n){c=0;sb_ct(l);ft();i=null;var t=n.keyCode;(t==r.KeyCodeDelete||t==r.KeyCodeBackspace||t==88&&n.ctrlKey)&&(c=1)}function oi(r){var a,c,l,o;i&&r.charCode!=0&&r.charCode!=13&&h>s&&(a=t.value.substring(s,h),c=String.fromCharCode(r.charCode),a[0].toLowerCase()==c.toLowerCase()?(u.raiseEvent(e.UpdateTextAndRequery,n.value+c,!0),l=n.value,o=l.length,n.value.length<t.value.length?(yt(),t.focus(),t.value=l+i.substring(o),f(t,o,i.length),s=o,h=i.length):ut(),r.preventDefault()):(t.value=t.value.substring(0,s),s=h=t.value.length),s==h&&(i=null))}function et(n){i&&(u.raiseEvent(n?e.UpdateTextAndRequery:e.UpdateText,i,!0),u.ghostInstValue=it)}function ft(){n.style.color=w;n.style.backgroundColor=k;t.style.zIndex=-1;t.style.color="transparent"}function vt(){sb_st(function(){n.focus()},1)}function yt(){n.style.color="transparent";n.style.backgroundColor="transparent";t.style.zIndex=2;t.style.color=w}function ut(){i=null;t&&t.value&&(t.value="");pt()}function si(){et(1)}function pt(){s=0;h=0}function hi(){ht(sj_ue);sb_ct(l)}o=this;var ot=new Bing.AS.EventRegistration;ot.add(e.Initialized,wt);this.EventRegistry.push(ot)}});sa_inst=new Bing.AS.SearchForm(sa_config);sa_inst.init("sa_inst");sa_eL&&sa_inst.show();_w.sj_evt&&sj_evt.fire("autoSugLoaded")