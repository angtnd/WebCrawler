/*!CK:659097970!*//*1442932628,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["rp328"]); }

__d('BanzaiReliability',['AsyncSignal','Banzai','TimeSlice','URI','WebStorage','invariant','isInIframe','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p='msys:reliability',q='/bz/reliability',r='start',s='ok',t=l.getLocalStorage(),u=null,v=null,w={delay:i.BASIC.delay,retry:true},x='banzai_reliability_test',y={banzaiSendOnLoad:function(ea){ea(r);ca('banzaiSendOnLoad','OK');},banzaiSendOnUnload:function(ea){ea(r);ca('banzaiSendOnUnload','OK');},module:function(ea){ea(s);},inframe:function(ea){ea(s);},load:function(ea){ea(s);},unload:function(ea){ea(s);},store:function(ea){if(!t){ea('skip');return;}ea(r);try{t.setItem(p,'id_'+u);}catch(fa){ea('setItem',fa);return;}o(y._stored.bind(null,ea),0);},_stored:function(ea){var fa;try{fa=t.getItem(p);}catch(ga){ea('getItem',ga);}if(!(!fa))if(fa.substr(0,3)=='id_'){ea(s,null,fa.substr(3));}else ea('unexpected');},restore:function(ea){if(!t){ea('skip');return;}ea(r);y._stored(ea);try{t.removeItem(p);}catch(fa){ea('removeItem',fa);}}};function z(ea){!(ea in y)?m(0):undefined;function fa(ha,ia,ja){var ka={lid:ja||u,test:ea,status:ha};if(document.activityState)ka.activity_state=document.activityState;if(ia){ka.status='error:'+ha;ka.error=ia.message;}if(v){ka.iframe=true;var la=document.createElement('iframe'),ma={src:new k(q).addQueryData(ka),width:0,height:0,frameborder:0,scrolling:'no',className:'bzHiddenFrame'};Object.keys(ma).forEach(function(na){la.setAttribute(na,ma[na]);});la.setAttribute('aria-hidden','true');document.body.appendChild(la);}else new h(q,ka).send();}try{y[ea](fa);}catch(ga){fa('error',ga);}}var aa=j.guard(function(){z('load');z('store');z('banzaiSendOnLoad');},'BanzaiReliability handleLoad'),ba=j.guard(function(){z('unload');},'BanzaiReliability handleUnload');function ca(ea,fa){i.post(x,{lid:u,test:ea,status:fa},w);}function da(ea,fa){u=ea;v=fa;if(n()){z('inframe');return;}z('module');z('restore');if(b.addEventListener){b.addEventListener('load',aa);b.addEventListener('unload',ba);}else if(b.attachEvent){b.attachEvent('onload',aa);b.attachEvent('onunload',ba);}i.subscribe(i.SHUTDOWN,function(){z('banzaiSendOnUnload');});}g.main=da;},null);