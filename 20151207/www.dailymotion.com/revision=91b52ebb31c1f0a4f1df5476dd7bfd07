!function(e){"use strict";function t(t,i){function o(){D=ae("div"),D.id="pm-video-wrapper-"+Y,D.className="pm-video-wrapper",B.applyStyle(D,{position:"relative",width:i.width+i.unit,height:i.height+i.unit,display:"block",background:i.options.transparent?"transparent":i.options.background,overflow:"hidden",textAlign:"left"}),t.appendChild(D)}function a(){D.parentNode===t&&t.removeChild(D),B.call(i.options.onerror)}function n(){function e(e){n?t(e):s.push(e)}function t(e){var t=B.getWindow(B.getDocument(D));t.sendMessage(e)}var o,a=N.split("?").shift().split("/").pop().split("_").shift(),n=!1,s=[];W("Load Dailymotion Video : %s",a),o=ae("iframe"),o.id="pm-video-"+Y,o.paused=!0,o.src="//www.dailymotion.com/embed/video/"+a+"?chromeless=1&html=1&wmode=transparent&api=postMessage&muted="+(i.options.muted?1:0)+"&start="+i.options.startTime+"&id="+Y+"&autoplay="+(i.options.autoplay?"1":"0"),B.applyStyle(o,{width:"100%",height:"100%",border:0,position:"absolute"}),U={volume:i.options.muted?0:1,currentTime:0,paused:!1,play:function(t){"undefined"!=typeof t&&e("seek="+t),e("play")},seek:function(t){e("seek="+t)},pause:function(){e("pause")},mute:function(){e("mute")},unmute:function(){e("unmute")},eventList:{},addEventListener:function(e,t){U.eventList[e]||(U.eventList[e]=[]),U.eventList[e].push(t)},removeEventListener:function(e,t){U.eventList[e]&&-1!==U.eventList[e].indexOf(t)&&U.eventList[e].splice(U.eventList[e].indexOf(t),1)},dailymotion:!0};var l=function(e){if(e.data.match(/event=(.*?)&/)&&e.data.match(/&id=/)&&parseFloat(e.data.match(/&id=(.*?)$/)[1],10)===Y){var o=e.data.match(/event=(.*?)&/)[1];if("apiready"===o){if(n=!0,s.length>0)for(var a=0;a<s.length;a++)t(s[a]);var l=i.options.muted?0:1;setInterval(function(){U.volume!==l&&(l=U.volume,0===U.volume?U.mute():1===U.volume&&U.unmute())},200)}else"timeupdate"===o?U.currentTime=parseFloat(e.data.match(/time=(.*?)(&|$)/)[1],10):"playing"===o?U.paused=!1:"durationchange"===o?U.duration=parseFloat(e.data.match(/duration=(.*?)(&|$)/)[1],10):"pause"===o?U.paused=!0:"ended"===o?d():"ad_end"===o&&U.play();if(("seeked"===o||"playing"===o)&&(o="canplay"),U.eventList[o]&&U.eventList[o].length>0)for(var r=0;r<U.eventList[o].length;r++)U.eventList[o][r]()}};B.addEvent(B.getWindow(D.ownerDocument),"message",l),D.appendChild(o)}function s(){W("Load HTML5 Video : %s",N),U=ae("video"),U.id="pm-video-"+Y,U.src=N,U.autoplay=!1,U.volume=i.options.muted?0:i.options.maxVol,B.applyStyle(U,{width:"100%",height:"100%",position:"absolute",background:"transparent"}),"desktop"!==B.device.name&&i.poster?U.poster=B.returnAbsolute(i.poster,i.baseUrl):U.poster="//static.adserver.pm/pixel.gif",U.addEventListener("loadstart",function(){W("Loadstart Event")}),U.addEventListener("abort",function(){q("Video aborted"),a()}),U.addEventListener("error",function(e){switch(q("Video error"),e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:q("You aborted the video playback.");break;case e.target.error.MEDIA_ERR_NETWORK:q("A network error caused the video download to fail part-way.");break;case e.target.error.MEDIA_ERR_DECODE:q("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:q("The video could not be loaded, either because the server or network failed or because the format is not supported.");break;default:q("An unknown error occurred.")}a()}),U.addEventListener("onloadeddata",function(){W("Data loaded, duration : %s",U.duration)}),U.addEventListener("loadedmetadata",function(){W("Metadata loaded, duration : %s",U.duration),u(),w(),"canvas"===P&&i.options.autoplay&&r(),"filledletterbox"===i.options.resizeMode&&(z=document.createElement("canvas"),z.style.position="absolute",z.width=B.gbcr(D).width,z.height=B.gbcr(D).height,D.insertBefore(z,U),r()),E()}),U.addEventListener("durationchange",function(){W("Duration changed"),w()}),U.addEventListener("ended",function(){d()}),D.appendChild(U)}function l(){W("Prepare canvas for video"),z=document.createElement("canvas"),z.style.position="relative",D.appendChild(z),z.width=B.gbcr(D).width,z.height=B.gbcr(D).height,U.playsinline=!0,U.webKitPlaysInline=!0,U.pausedonstart=!0,U.allowsInlineMediaPlayback=!0,U.preload="auto",U.autoplay="autoplay",U.load()}function r(){W("Start canvas video playing"),z.setAttribute("data-time",0),z.setAttribute("data-paused",!1),setInterval(function(){if(z.width=z.getAttribute("data-width"),z.height=z.getAttribute("data-height"),z.getContext("2d").drawImage(U,0,0,z.getAttribute("data-width"),z.getAttribute("data-height")),"canvas"===P){if("false"===z.getAttribute("data-paused")){var e=parseFloat(z.getAttribute("data-time"),10)+1e3/i.options.framerate/1e3;e>U.duration?(C(),d(),e=0):U.currentTime=e,z.setAttribute("data-time",e)}}else z.getContext("2d").fillStyle="rgba(0, 0, 0, 0.5)",z.getContext("2d").fillRect(0,0,z.getAttribute("data-width"),z.getAttribute("data-height"))},1e3/i.options.framerate)}function p(){var e=ae("div"),t=!1;D.insertBefore(e,X),B.applyStyle(e,{position:"absolute",width:i.options.layer.width+"px",height:i.options.layer.height+"px",top:i.options.layer.top+"px",left:i.options.layer.left+"px",opacity:i.options.layer.animate?0:1,display:"none"}),B.handleAsset(i.options.layer,e,"video-layer",i.baseUrl),setInterval(function(){R()>=i.options.layer.time&&R()<i.options.layer.time+i.options.layer.duration&&!t&&(t=!0,e.style.display="block",i.options.layer.animate&&B.animate(e,{opacity:1}).play(),setTimeout(function(){t=!1,i.options.layer.animate?B.animate(e,{opacity:0,onplayer:function(){e.style.display="none"}}).play():e.style.display="none"},1e3*i.options.layer.duration))},50)}function d(){function e(){i.options.loop?(L(0),U.hasBeenPaused=!1):(i.options.smartEnd&&M(me),C(),F()),B.call(i.options.onend)}if(U.hasBeenPaused=!0,i.packshot&&i.packshot.file){var t=ae("div");D.insertBefore(t,X),B.applyStyle(t,{position:"absolute",width:"100%",height:"100%",top:"0",left:"0"}),i.packshot.width="100%",i.packshot.height="100%",B.handleAsset(i.packshot,t,"video-packshot",i.baseUrl),te&&(te.style.display="none"),K&&(K.style.display="none"),i.packshot.duration&&setTimeout(function(){e(),t.parentNode.removeChild(t),te&&(te.style.display="block"),K&&(K.style.display="block")},1e3*i.packshot.duration)}else e()}function u(){var e,t=U.videoWidth/U.videoHeight;B.onResize(U.parentNode,function(){var o,a,n,s,l=B.gbcr(U.parentNode),r=l.width/l.height;if("canvas"===P)"fullsize"===i.options.resizeMode?t>r?(a=l.height,o=a*t,s=(l.width-o)/2,n=0):(o=l.width,a=o/t,s=0,n=(l.height-a)/2):(s=0,n=0,t>r?(o=l.width,a=o/t,n=(l.height-a)/2):(a=l.height,o=a*t,s=(l.width-o)/2)),o=parseInt(10*o,10)/10,a=parseInt(10*a,10)/10,n=parseInt(10*n,10)/10,s=parseInt(10*s,10)/10,z.setAttribute("data-width",o),z.setAttribute("data-height",a),z.style.top=n+"px",z.style.left=s+"px";else if(("letterbox"===i.options.resizeMode||"filledletterbox"===i.options.resizeMode)&&(t>r?(o=l.width,a=o/t,n="B"===i.options.align[1]?l.height-a:"M"===i.options.align[1]?(l.height-a)/2:0,B.applyStyle(U,{height:a+"px",width:o+"px",top:n+"px",left:0})):(a=l.height,o=a*t,s="R"===i.options.align[0]?l.width-o:"M"===i.options.align[0]?(l.width-o)/2:0,B.applyStyle(U,{height:a+"px",width:o+"px",left:s+"px",top:0}))),"fullsize"===i.options.resizeMode||"filledletterbox"===i.options.resizeMode){var p="filledletterbox"===i.options.resizeMode&&z?z:U;r>t?(o=l.width,a=o/t,n=(l.height-a)/2,B.applyStyle(p,{height:a+"px",width:o+"px",top:n+"px",left:0})):(a=l.height,o=a*t,s=(l.width-o)/2,B.applyStyle(p,{height:a+"px",width:o+"px",left:s+"px",top:0})),z&&(z.setAttribute("data-width",o),z.setAttribute("data-height",a))}ie&&!i.options.fullsize&&B.applyStyle(ie,{width:U.style.width,height:U.style.height,left:U.style.left,top:U.style.top}),e=i.options.resizeMode})}function c(){W("Load Flash Video : %s",N);var e,t,o=(new Date).getTime();t=B.embedSWF({file:ue,wrapper:D,width:"100%",height:"100%",id:i.id+"-"+o,flashvars:{src:N,resizeMode:i.options.resizeMode,callback:"pmFlashNotification"+o,maxVol:i.options.maxVol},params:{wmode:i.options.transparent?"transparent":"opaque"},attributes:{wmode:i.options.transparent?"transparent":"opaque"}}),e=function(e,i){try{if(t.control)return t.control(e,i)}catch(o){q("Flash communication error : %s",o)}},H["pmFlashNotification"+o]=function(t,o){"ready"===t?(W("Flash framework ready - js side"),U.duration=o,U.ready=!0,i.options.muted||U.unmute(),E(),e("resize"),w()):"video-end"===t?d():"log"===t&&W(o)},U={unmute:function(){e("unmute")},mute:function(t){t?e("mute",t):e("mute")},play:function(t){U.paused=!1,e("play",t)},pause:function(){return U.paused=!0,e("pause")},getTime:function(){return e("getTime")},seek:function(t){e("seek",t)},object:t,duration:30,paused:!0,id:i.id,ready:!1}}function h(){function e(){U.paused?(B.applyStyle(t,{display:"block"}),B.applyStyle(i,{display:"none"})):(B.applyStyle(i,{display:"block"}),B.applyStyle(t,{display:"none"}))}Z=ae("div"),Z.className="pm-video-controls-play-button",B.applyStyle(Z,{width:"20px",height:"20px",position:"absolute",bottom:"5px",left:"9px",cursor:"pointer"});var t,i;if(ve){t=ae("canvas"),i=ae("canvas");var o=t.getContext("2d"),a=i.getContext("2d");t.width=t.height=i.width=i.height=20,o.fillStyle="#FFFFFF",o.moveTo(4,4),o.lineTo(4,16),o.lineTo(16,10),o.lineTo(4,4),o.fill(),a.fillStyle="#FFFFFF",a.fillRect(5,5,3,10),a.fillRect(10,5,3,10)}else t=ae("div"),i=ae("div"),B.applyStyle(t,{background:"url("+de+ce+") 0 0 no-repeat transparent",width:"20px",height:"20px"}),B.applyStyle(i,{background:"url("+de+ce+") -20px 0 no-repeat transparent",width:"20px",height:"20px"});B.applyStyle(t,{position:"absolute",top:"0px",left:"0px"}),B.applyStyle(i,{position:"absolute",top:"0px",left:"0px"}),e(),setInterval(function(){e()},100),B.addEvent(Z,"click",function(e){B.preventDefault(e),U.isEnded?(L(0,!0),U.isEnded=!1,se=!1,T("PLAY")):(se=!U.paused,U.paused?(L(void 0,!0),T("PLAY"),U.hasBeenPaused=!1):(C(!0),T("PAUSE"),U.hasBeenPaused=!0))}),Z.appendChild(t),Z.appendChild(i),te.appendChild(Z)}function m(){G=ae("div"),G.className="pmvideo-controls-scrubbar",J=ae("div");var e=ae("div"),t=oe?110:140;B.applyStyle(G,{width:t+"px",height:"20px",position:"absolute",left:"40px",top:"5px",cursor:"pointer"}),B.applyStyle(e,{width:"100%",height:"2px",position:"relative",left:"0px",top:"9px",background:"#FFF"}),B.applyStyle(J,{width:"0px",height:"2px",position:"absolute",left:"0px",top:"0px",background:re}),e.appendChild(J),G.appendChild(e),te.appendChild(G),setInterval(function(){U.isEnded||B.applyStyle(J,{width:R()/U.duration*100+"%"})},500),B.addEvent(G,"click",function(e){B.preventDefault(e);var i=e||H.event,o=B.getMousePosition(i,G,"left")/t,a=parseInt(U.duration*o,10);W("Scrubbar action, seek to %s% -> %s",parseInt(1e3*o,10)/10,a),M(a)})}function v(){Q=ae("div"),Q.className="pmvideo-controls-timer",B.applyStyle(Q,{width:"50px",height:"16px",paddingTop:"4px",position:"absolute",left:oe?"153px":"183px",top:"5px",textAlign:"center",fontSize:"10px",fontFamily:"Arial, Helvetica, sans-serif",color:"#FFFFFF",letterSpacing:"normal",fontStyle:"bold"}),setInterval(function(){U.isEnded||(Q.innerHTML=B.sprintf(["%s",B.cleanTime(parseInt(R(),10))]))},100),te.appendChild(Q)}function f(){ee=ae("div"),B.applyStyle(ee,{width:"20px",height:"20px",position:"absolute",left:"205px",top:"5px",cursor:"pointer"});var e,t;ve?(e=ae("canvas"),t=e.getContext("2d"),e.width=20,e.height=20,t.fillStyle="#FFFFFF",t.fillRect(3,5,14,1),t.fillRect(16,5,1,10),t.fillRect(3,14,14,1),t.fillRect(3,5,1,10),t.fillRect(6,8,10,6)):(e=ae("div"),B.applyStyle(e,{width:"20px",height:"20px",background:"url("+de+ce+") 0 -20px  no-repeat transparent"})),B.addEvent(ee,"click",function(e){B.preventDefault(e),S(D,!0),A(),L()}),ee.appendChild(e),te.appendChild(ee)}function y(e){K=ae("div"),K.className="pm-video-controls-sound-button",B.applyStyle(K,{width:"20px",height:"20px",position:"absolute",bottom:"5px",right:"5px",cursor:"pointer"});var t,o;ve?(t=ae("canvas"),o=t.getContext("2d"),t.width=20,t.height=20):(t=ae("div"),B.applyStyle(t,{width:"20px",height:"20px",background:"url("+de+ce+") -40px -20px  no-repeat transparent"})),K.appendChild(t),ve&&b("#FFFFFF"),(e?e:D).appendChild(K),i.options.muted||(g(!0),le=!1),B.addEvent(K,"click",function(e){B.preventDefault(e),le?(A(),ne=!1,T("UNMUTE")):(_(),ne=!0,T("MUTE"))})}function g(e){ve?b(e?re:"#FFF"):B.applyStyle(K.getElementsByTagName("div")[0],{background:"url("+de+ce+") "+(e?"-20px":"-40px")+" -20px  no-repeat transparent"}),B.removeClass(K,"pm-sound-state-"+(e?"muted":"unmuted")),B.addClass(K,"pm-sound-state-"+(e?"unmuted":"muted"))}function b(e){var t=1,i=K.querySelector("canvas").getContext("2d");for(i.fillStyle=e;6>t;){var o=10*t/5;i.fillRect(3*t,15-o,2,o),t++}}function x(){te=ae("div"),te.className="pm-video-controls",B.applyStyle(te,{width:i.options.soundbutton?"260px":"235px",height:"30px",position:"absolute",margin:"-50px 0 0 "+(i.options.soundbutton?"-130px":"-117px"),left:"50%",top:"100%"});var e=ae("div");if(e.className="pm-video-controls-background",B.applyStyle(e,{width:"100%",height:"100%",display:"block",position:"absolute",top:"0px",left:"0px"}),ve?B.applyStyle(e,{background:"#000",opacity:"0.7",borderRadius:"5px"}):B.applyStyle(e,{background:"url("+de+ce+") 0px "+(i.options.soundbutton?"-40px":"-70px")+" no-repeat transparent"}),te.appendChild(e),h(),m(),v(),oe&&f(),i.options.soundbutton&&y(te),D.appendChild(te),i.options.hidecontrols){var t;B.addEvent(D,"mousemove",function(){te.style.display="block",clearTimeout(t),t=setTimeout(function(){te.style.display="none"},5e3)})}}function w(){i.trackinginterval||(i.trackinginterval=setInterval(function(){var e=parseInt(R()/U.duration*100,10),t=parseInt(i.currentTimeWv/U.duration*100,10);B.each(he,function(){e>=this.threshold&&!this.sent&&!this.wv&&(this.sent=!0,T(this.name,i.id)),t>=this.threshold&&!this.sent&&this.wv&&0===i.options.threshold&&(this.sent=!0,T(this.name,i.id))})},300))}function F(){U.isEnded=!0,te&&(J&&B.applyStyle(J,{width:"0"}),Q&&(Q.innerHTML="--:--"))}function E(){me=i.options.packshotTime?i.options.packshotTime:Math.ceil(parseInt(.99*U.duration*10,10)/10),W("End pause time -> %s",me)}function k(){return j.documentElement.requestFullscreen||j.documentElement.msRequestFullscreen||j.documentElement.mozRequestFullScreen||j.documentElement.webkitRequestFullscreen||!1}function S(e,t){if(j.fullscreenElement||j.mozFullScreenElement||j.webkitFullscreenElement||j.msFullscreenElement)t&&T("FULLSCREENOFF"),j.exitFullscreen?j.exitFullscreen():j.msExitFullscreen?j.msExitFullscreen():j.mozCancelFullScreen?j.mozCancelFullScreen():j.webkitExitFullscreen&&j.webkitExitFullscreen();else{if(!e)return;t&&T("FULLSCREENON"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.webkitEnterFullscreen&&e.webkitEnterFullscreen()}}function T(e){i.options.track&&"function"==typeof i.options.track?B.call(i.options.track,[e,i.id]):B.w["pmData"+i.options.pmord]?B.track(B.w["pmData"+i.options.pmord],e,i.id):B.log("Event ready %s for %s",e,i.id)}function L(e){"html5"===P?(U.play(),"undefined"==typeof e||isNaN(parseInt(e,10))||(U.dailymotion?U.play(e):U.currentTime=e)):"flash"===P?(clearInterval(U.playInterval),U.ready?U.play(e):U.playInterval=setInterval(function(){U.ready&&(clearInterval(U.playInterval),U.play(e))},20)):"canvas"===P&&("undefined"==typeof e||isNaN(parseInt(e,10))||M(e),z.getAttribute("data-fullscreened",!1)||z.setAttribute("data-paused",!1))}function C(){return"html5"===P?(U.pause(),U.currentTime):"flash"===P?(clearInterval(U.playInterval),U.pause()):void("canvas"===P&&z.setAttribute("data-paused",!0))}function _(e){if("html5"===P){if(e)return U.volume=0,void(le=!0);clearInterval($),$=setInterval(function(){U.volume=parseInt(10*(U.volume-.1<0?0:U.volume-.1),10)/10,U.volume<=0&&(U.volume=0,le=!0,clearInterval($))},25)}else if("flash"===P)U.mute(e),le=!0;else if("canvas"===P)return;K&&g(!1)}function A(){if("html5"===P)clearInterval($),$=setInterval(function(){var e=U.volume+.1;e=e>1?1:e,U.volume=e,U.volume>=i.options.maxVol&&(U.volume=i.options.maxVol,le=!1,clearInterval($))},50);else if("flash"===P)U.unmute(),le=!1;else if("canvas"===P)return;K&&g(!0)}function R(){return"html5"===P?U.currentTime:"flash"===P?U.getTime():"canvas"===P?z.getAttribute("data-time"):void 0}function I(){return"canvas"===P?"false"===z.getAttribute("data-paused"):!U.paused}function M(e){"html5"===P?U.currentTime=e:"flash"===P?U.seek(e):"canvas"===P&&z.setAttribute("data-time",e)}if(!e.piximedia.SweetLib||!t)return!1;var N,P,D,U,z,V={files:"",baseUrl:"",width:300,height:250,unit:"px",id:"VIDEO",options:{forceCss:!1,icon_file:!1,autoplay:!1,controls:!0,soundbutton:!0,rollover:!0,muted:!0,maxVol:1,nofullscreen:!1,loop:!0,packshotTime:!1,smartEnd:!0,resizeMode:"letterbox",hidecontrols:!1,threshold:0,syncMaxDelta:1.5,onend:function(){},onclick:function(){},onerror:function(){},track:!1,pmord:!1,framerate:15,align:"MM",background:"#000",overlay:!1,startTime:0}},B=e.piximedia.SweetLib,W=B.log,q=B.warn,O=B.print,j=B.getDocument(t),H=B.getWindow(j),Y=(new Date).getTime(),$=null,K=!1,Z=!1,G=!1,J=!1,Q=!1,X=!1,ee=!1,te=!1,ie=!1,oe=k()&&!i.options.nofullscreen,ae=function(e){return j.createElement(e)},ne=!1,se=!1,le=!0,re="#04B2F6",pe="//broadcast.pm/",de=pe+"assets/video/",ue=de+"videoFramework.swf",ce="video_icon.v2.png",he=[{threshold:1,name:"LECTUREDEBUT"},{threshold:24,name:"LECTURE25"},{threshold:49,name:"LECTURE50"},{threshold:74,name:"LECTURE75"},{threshold:99,name:"LECTURE100"},{threshold:1,wv:!0,name:"LECTUREDEBUT_WV"},{threshold:24,wv:!0,name:"LECTURE25_WV"},{threshold:49,wv:!0,name:"LECTURE50_WV"},{threshold:74,wv:!0,name:"LECTURE75_WV"},{threshold:99,wv:!0,name:"LECTURE100_WV"}],me=0,ve=!1,fe="dailymotion"===B.getExtention("object"==typeof i.files?i.files[0]:i.files),ye=B.canPlayHTML5Video(i.files),ge=B.canPlayFlashVideo(i.files),be=!1,xe=!1;if(this.play=function(e){U.hasBeenPaused=!1,L(e)},this.pause=function(){U.hasBeenPaused=!0,C(!0)},this.seek=M,this.mute=_,this.unmute=A,this.getTime=R,this.isPlaying=I,this.data=i,this.forceError=a,this.toggleFullScreen=function(){S("desktop"===B.device.name?D:U,!0),"canvas"===P?(z.setAttribute("data-paused",!0),z.setAttribute("data-fullscreened",!0),U.play(),U.addEventListener("webkitendfullscreen",function(){z.setAttribute("data-fullscreened",!1),z.setAttribute("data-paused",!1),z.setAttribute("data-time",U.currentTime)})):L(),A()},W("New video, file : %s, wrapper : ",i.files),W(t),B.extend(i,{options:e.piximedia.videoOptions||{}}),B.extend(i,V),i.options.align.toString().match(/^[LMR][TMB]$/)||(i.options.align="MM"),i.id=i.id.toString().replace(/\s/g,"").replace(/[^a-zA-Z0-9_]/g,""),W("Options : "),W(i),i.options.forceCss&&(ve=!1),i.options.icon_file&&(ce=i.options.icon_file),"ios"===B.device.os&&(i.options.soundbutton=!1),i.packshot&&0===i.packshot.duration&&(i.options.loop=!1),ye||ge){o(),fe?(N=i.files,P="html5",n()):ye?(N=B.returnAbsolute(ye,i.baseUrl),P="html5",s()):(N=B.returnAbsolute(ge,i.baseUrl),P="flash",c());var we=B.getFileName(N);if(e.piximedia.videoFiles||(e.piximedia.videoFiles={}),e.piximedia.videoFiles[we]&&e.piximedia.videoFiles[we].id!==i.id?(xe=!0,e.piximedia.videoFiles[we].slaves||(e.piximedia.videoFiles[we].slaves=[]),e.piximedia.videoFiles[we].slaves.push(this),e.piximedia.videoFiles[we].number_of_slaves++):(e.piximedia.videoFiles[we]={time:0,playing:!1,insync:!1,number_of_slaves_waiting:0,number_of_slaves:0,video:U,masterPlaying:I,id:i.id},be=!0),be)setInterval(function(){e.piximedia.videoFiles[we].time=R(),e.piximedia.videoFiles[we].playing=I()},100);else{var Fe=function(){var t=Math.abs(e.piximedia.videoFiles[we].time-R());if(I()&&e.piximedia.videoFiles[we].masterPlaying()&&t>i.options.syncMaxDelta){if(!e.piximedia.videoFiles[we].insync){e.piximedia.videoFiles[we].insync=!0,O("Slave out of sync, delta",t),O("Slaves global sync :",function(){for(var t=[],i=0;i<e.piximedia.videoFiles[we].slaves.length;i++){var o=e.piximedia.videoFiles[we].slaves[i];o!==U&&t.push(Math.abs(e.piximedia.videoFiles[we].time-o.getTime()))}return t.join(", ")}());for(var o=function(){if(e.piximedia.videoFiles[we].number_of_slaves_waiting--,O("Slave back in sync",e.piximedia.videoFiles[we].number_of_slaves_waiting,"left"),e.piximedia.videoFiles[we].number_of_slaves_waiting<=0){e.piximedia.videoFiles[we].number_of_slaves_waiting=0,e.piximedia.videoFiles[we].video.play();for(var t=0;t<e.piximedia.videoFiles[we].slaves.length;t++){var i=e.piximedia.videoFiles[we].slaves[t];i.wasPlaying&&(i.wasPlaying=!1,i.play(),i.object.removeEventListener("canplay",o))}}},a=0;a<e.piximedia.videoFiles[we].slaves.length;a++){var n=e.piximedia.videoFiles[we].slaves[a];n.isPlaying()||n.wasPlaying?(n.wasPlaying=!0,Math.abs(e.piximedia.videoFiles[we].time-n.getTime())>i.options.syncMaxDelta?(e.piximedia.videoFiles[we].number_of_slaves_waiting++,n.seek(e.piximedia.videoFiles[we].time),n.object.addEventListener("canplay",o)):n.pause()):n.wasPlaying=!1}O("Total out of sync slaves",e.piximedia.videoFiles[we].number_of_slaves_waiting),e.piximedia.videoFiles[we].number_of_slaves_waiting>0&&e.piximedia.videoFiles[we].video.pause()}}else e.piximedia.videoFiles[we].insync=!1};setInterval(Fe,500),Fe()}if(i.options.blur)if(B.canUseCSS3()){var Ee="number"==typeof i.options.blur?i.options.blur:3;B.applyStyle(U,{"-webkit-filter":"blur("+Ee+"px)","-moz-filter":"blur("+Ee+"px)","-o-filter":"blur("+Ee+"px)","-ms-filter":"blur("+Ee+"px)",filter:"blur("+Ee+"px)"})}else{var ke=ae("div");ke.className="pm-video-blur-wrapper",B.applyStyle(ke,{position:"absolute",width:i.width+i.unit,height:i.height+i.unit,display:"block",left:"0",top:"0",background:"url("+de+"blur.png) 0 0 / 100% 100% no-repeat transparent"}),D.appendChild(ke)}if(i.options.overlay&&(ie=ae("div"),B.applyStyle(ie,{position:"absolute",background:i.options.overlay.color,opacity:i.options.overlay.opacity}),i.options.fullsize&&B.applyStyle(ie,{width:"100%",height:"100%",top:"0",left:"0"}),D.appendChild(ie)),this.object=U,this.wrapper=D,X=ae("div"),X.className="pm-video-clicktag",B.applyStyle(X,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",cursor:"pointer",display:"block",background:"url("+de+"pixel.gif) 0 0 no-repeat transparent"}),B.addEvent(X,"click",function(){W("Click on video"),_(!0),B.call(i.options.onclick)}),"desktop"!==B.device.name&&(i.options.controls=!1,i.options.soundbutton=!1,i.options.autoplay))if("ios"===B.device.os&&B.device.version>8)W("We're on mobile, resorting to canvas"),P="canvas",U.style.display="none",D.appendChild(U),l();else{var Se=function(){U.play(),B.removeEvent(B.w,"touchstart",Se)};B.addEvent(B.w,"touchstart",Se)}B.mouseenter(X,function(){i.options.rollover&&!ne&&I()&&i.options.muted&&A()}),B.mouseleave(X,function(){i.options.rollover&&!ne&&I()&&i.options.muted&&_()}),D.appendChild(X),i.options.layer&&i.options.layer.file&&p(),i.options.controls?x():i.options.soundbutton&&y(),D.className+=" pm-video-"+P;var Te,Le;i.currentTimeWv=0,0===i.options.threshold&&(Te=setInterval(function(){Le&&I()&&i.currentTimeWv++},1e3)),B.bindVisibilityTracker({object:this.wrapper,threshold:0===i.options.threshold?60:i.options.threshold},function(e){Le=e,i.options.threshold>0?e?i.options.autoplay&&!se&&L():C():i.options.autoplay&&!U.hasBeenPaused&&e&&L()}),i.options.autoplay&&L()}else q("Sorry, can't play any of this"),this.play=function(){},this.pause=function(){},this.stop=function(){},this.mute=function(){},this.unmute=function(){},this.getTime=function(){},this.isPlaying=function(){},this.forceError=function(){},this.data={error:"Can't play this video"},B.call(i.options.onerror)}if(e.piximedia){try{parent.piximedia||(parent.piximedia=e.piximedia)}catch(i){}window.piximedia.SweetLib&&window.piximedia.SweetLib.log("Piximedia 2014 - Video framework loaded")}else try{e.piximedia=parent.piximedia||{}}catch(i){e.piximedia={}}e.piximedia.Video=t,e.piximedia.libraryLoader&&e.piximedia.libraryLoader["video.js"]&&(e.piximedia.libraryLoader["video.js"].complete=!0)}(window),function(){var e=window,t="video.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];i&&(i.complete=!0)}();