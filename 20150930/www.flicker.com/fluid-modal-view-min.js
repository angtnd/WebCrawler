YUI.add("notifications-menu-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create("notifications-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){if(!YUI.Env.isServer&&this.get("container").get("innerHTML")===""){var t=this.templates("notifications-menu")({user:this.appContext.getViewer()});this.setContainerHTML(t)}return this},loadState:function(){var t=this,n=this.appContext.getViewer();return n.signedIn?(t.set("user",{signedIn:!0}),this.appContext.getModel("person-notifications-models",n.nsid).then(function(r){var i=r.toJSON();t.set("personNotificationsModel",r);if(!YUI.Env.isServer)return r.registry.remote.readUnreadNotificationCount({id:n.nsid},t.appContext).then(function(){i=r.toJSON(),t.set("user",e.merge(t.get("user"),i))});t.set("user",e.merge(t.get("user"),i))})):(t.set("user",{signedIn:!1}),e.Promise.resolve())},buildContainer:function(){var e=this.templates("notifications-menu")({user:this.get("user")});return this.setContainerHTML(e),this},activate:function(){setTimeout(function(){this.get("container").on("mouseenter",this.openMenu,this),this.get("container").on("touchstart",this.openMenu,this)}.bind(this),350),this.get("container").on("click",this.openMenu,this)},openMenu:function(){var e=this.get("personNotificationsModel"),t=this.get("container").one(".c-notification-unreadcount");t&&(t.addClass("viewed"),e.registry.remote.updateUnreadNotificationCount({},this.appContext),e.setValue("unreadNotificationCount",0))},closeMenu:function(){},destructor:function(){}})},"@VERSION@",{requires:["flickr-view","notifications-menu-css","hermes-template-notifications-menu"],langBundles:["notifications-menu","common"]});
YUI.add("hermes-lang-notifications-menu",function(e,t){e.Intl.add("hermes/notifications-menu","en-US",{})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-dialog-tooltip",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" ui-dialog-tooltip-witharrow"}function h(e,t){return" drop-up"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=this,f=n.helperMissing,l=this.escapeExpression;s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-tooltip',o=n["if"].call(t,t.arrow,{hash:{},inverse:a.noop,fn:a.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.dropUp,{hash:{},inverse:a.noop,fn:a.program(3,h,i),data:i});if(o||o===0)s+=o;return s+='" data-action="halt">\n	<span class="ui-dialog-arrow"></span>\n	<div class="ui-dialog-body">\n	',u={hash:{},data:i},s+=l((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,u):f.call(t,"dialogOutlet",t.content,u)))+"\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-tooltip",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-dialog-modal",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-modal">\n	<div class="ui-dialog-body">\n	',u={hash:{},data:i},s+=f((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,u):a.call(t,"dialogOutlet",t.content,u)))+"\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-dialog-alert",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing;return s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-alert">\n    <div class="dialog-title">\n		<h3>'+f((o=(o=t.attrs,o==null||o===!1?o:o.title),typeof o===a?o.apply(t):o))+'</h3>\n		<i class="close-alert ui-dialog-button-close" data-action="dismiss"></i>\n    </div>\n    <div class="dialog-content">\n        <i class="ui-icon-modal-error '+f((o=(o=t.attrs,o==null||o===!1?o:o.level),typeof o===a?o.apply(t):o))+'"></i>\n        <div class="alert-dialog-text">\n    	',u={hash:{},data:i},s+=f((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,u):l.call(t,"dialogOutlet",t.content,u)))+'\n    	</div>\n    </div>\n    <button class="ui-button ui-button-cta" data-action="ok">\n        <span>'+f((o=(o=t.attrs,o==null||o===!1?o:o.confirmLabel),typeof o===a?o.apply(t):o))+"</span>\n    </button>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-alert",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-dialog-cta",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return"ui-buttonbar-vertical"}function d(e,t){var n="",r;return n+='\n				<button class="ui-button ui-button-cta" data-action="confirm"><span>'+l((r=(r=e.attrs,r==null||r===!1?r:r.confirmButtonText),typeof r===f?r.apply(e):r))+"</span></button>\n			",n}function v(e,t){var r="",i;r+="\n				",i=n["if"].call(e,e.buttonMarkup,{hash:{},inverse:c.program(8,g,t),fn:c.program(6,m,t),data:t});if(i||i===0)r+=i;return r+="\n			",r}function m(e,t){var n="",r;return n+="\n					"+l((r=e.buttonMarkup,typeof r===f?r.apply(e):r))+"\n				",n}function g(e,t){var r="",i;r+='\n					<button class="ui-button" ',i=n["if"].call(e,e.buttonAction,{hash:{},inverse:c.noop,fn:c.program(9,y,t),data:t});if(i||i===0)r+=i;return r+="><span>"+l((i=e.buttonLabel,typeof i===f?i.apply(e):i))+"</span></button>\n				",r}function y(e,t){var n="",r;return n+='data-action="'+l((r=e.buttonAction,typeof r===f?r.apply(e):r))+'"',n}function b(e,t){var n="",r;return n+='\n				<button class="ui-button" data-action="decline"><span>'+l((r=(r=e.attrs,r==null||r===!1?r:r.cancelButtonText),typeof r===f?r.apply(e):r))+"</span></button>\n			",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<div class="ui-dialog-wrapper ui-dialog ui-dialog-cta">\n	<h1 class="ui-dialog-title">'+l((o=(o=t.attrs,o==null||o===!1?o:o.title),typeof o===f?o.apply(t):o))+'</h1>\n	<div class="ui-dialog-body">\n		<div class="ui-util-paragraph">\n			',a={hash:{},data:i},s+=l((o=n.dialogOutlet||t.dialogOutlet,o?o.call(t,t.content,a):h.call(t,"dialogOutlet",t.content,a)))+'\n		</div>\n		<div class="ui-buttonbar ',u=n["if"].call(t,(o=t.attrs,o==null||o===!1?o:o.verticalButtonList),{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(u||u===0)s+=u;s+='">\n			',u=n.unless.call(t,(o=t.attrs,o==null||o===!1?o:o.hideConfirmButton),{hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i});if(u||u===0)s+=u;s+="\n			\n			",u=n.each.call(t,(o=t.attrs,o==null||o===!1?o:o.additionalButtons),{hash:{},inverse:c.noop,fn:c.program(5,v,i),data:i});if(u||u===0)s+=u;s+="\n			\n			",u=n["if"].call(t,(o=t.attrs,o==null||o===!1?o:o.useCancelButton),{hash:{},inverse:c.noop,fn:c.program(11,b,i),data:i});if(u||u===0)s+=u;return s+="\n		</div>\n	</div>\n</div>\n\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dialog-cta",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("dialog",function(e){"use strict";var t,n,r={},i=e.config.win,s=e.config.doc;t={css:{state:"c-state-{{state}}",hidden:"ui-util-hidden",loading:"ui-util-loading",working:"ui-util-working",locked:"ui-util-locked",complete:"ui-util-complete",removed:"ui-util-removed",content:"js-content",wrapper:"ui-dialog-wrapper",anchorSelected:"ui-util-selected",curtain:"ui-dialog-modal-curtain",curtainClear:"ui-dialog-modal-curtain-clear",arrow:"ui-dialog-arrow"},transitionTimeout:2e3,debug:!1},n=e.merge(e.flutil,{log:function(){if(!t.debug||!console.log.apply)return;var e=[].slice.call(arguments);e.unshift("DIALOG"),n.dump.apply(null,e)},propagateWrapperAttributes:function(e,n){var r=[],i;return n?(Array.prototype.slice.call(n.getDOMNode().classList).forEach(function(i){if(i===t.css.wrapper)return;n.removeClass(i),e.addClass(i),r.push(i)}),i=n.getAttribute("data-action"),i&&(n.removeAttribute("data-action"),r.push({attr:"data-action",restore:e.getAttribute("data-action")||null}),e.setAttribute("data-action",i)),r):r},rollbackWrapperAttributes:function(e,t){if(!t)return;for(var n=0,r=t.length;n<r;n++)typeof t[n]=="object"?t[1].restore?e.setAttribute(t[n].name,t[n].restore):e.removeAttribute(t[n].name):e.removeClass(t[n])}}),e.namespace("Views").dialog={_dialogs:{},getInstance:function(t,r){var i,s,o;return r.id?s={id:r.id}:(s=e.merge(r),delete s.parent,delete s.rootEl,delete s.template,delete s.appContext,typeof s.content=="object"&&s.content instanceof e.FlickrView?s.content=s.content.get("container").toString():typeof s.content=="function"?s.content=s.content({}):s.content.toString()),i="SGL"+n.createHashCode(s),o=this._dialogs[t+":"+i],o?o:this._new(t,i,r)},getNewInstance:function(e,t){var n="OBJ"+(Object.keys(this._dialogs).length+1)+(new Date).getTime();return this._new(e,n,t)},_new:function(t,n,i){var s,o,u,a,f;if(e.Env.isServer)throw new Error("Dialogs are client-only!");i=e.mix(i||{});if(i.parent)o=i.parent,delete i.parent,a=o.getContainer({subviewName:t,subviewParams:i}),u=o.appContext;else{if(!i.appContext)throw new Error('Either the "appContext" or "parent" parameter is required!');o=null,u=i.appContext,a=e.Node.create("<div/>"),a.addClass("view").addClass(t)}return i.appContext=u,i.container=a,s=new r[t](i),f=t+(n?":"+n:""),s._parent=o,this.registerView(s,f),this._navigateCloseHook||(this._navigateCloseHook=u.flapp.on("navigate",this.close.bind(this))),s},registerView:function(e,t){var n=this;t=t||"REG"+(Object.keys(this._dialogs).length+1),e.manager=this,this._dialogs[t]=e,e.on("destroy",function(){delete n._dialogs[t]})},hide:function(e){this.close(e,"hide")},close:function(e,t){var n=this,r;t=t||"close",typeof e=="string"?r=function(r){if(e!==r.split(/:/)[0])return;n._dialogs[r][t]()}:typeof e=="object"?r=function(r){if(e===n._dialogs[r])return;n._dialogs[r][t]()}:r=function(e){n._dialogs[e].get("autoCloseable")&&n._dialogs[e][t]()},Object.keys(this._dialogs).forEach(r)},isOpen:function(e){},util:n},e.namespace("Views").dialogs=r,r["dialog-base"]=e.Base.create("dialog-base",e.FlickrView,[],{initializer:function(e){return e=e||{},this.state={},this.manager=null,this.appContext=this.appContext||e.appContext,this},render:function(){var n=this.templates(this.get("template"))(this.toJSON());return this.setContainerHTML(n),e.namespace("Views").dialog.util.propagateWrapperAttributes(this.get("container"),this.get("container").one("."+t.css.wrapper)),this.renderContent(),this.activate(),this.get("container").addClass(t.css.hidden),this.anchorToLayout(),this.state.visible=!0,this.hide(),this.state.rendered=!0,this.fire("rendered"),this},renderContent:function(r){var i=this.get("content"),s=this.get("container"),o=s.one("."+t.css.content);e.namespace("Views").dialog.util.rollbackWrapperAttributes(this.get("container"),this._contWrap);if(i instanceof e.FlickrView){i=i.get("container");if(!i)throw new Error("The Content View doesn't have a container");o.setHTML(""),o.appendChild(i)}else i instanceof e.Node?(o.setHTML(""),o.appendChild(i)):typeof i=="function"?(i=i(e.merge(this.toJSON(),r)),o.setHTML(i)):typeof i=="string"&&this.state.rendered&&o.setHTML(i);this._contWrap=n.propagateWrapperAttributes(s,o.one("."+t.css.wrapper))},renderCurtain:function(){var n=this,r,i=e.Number.parse(this.get("tintCurtain"));this.get("curtain")||(r=e.Node.create("<div/>"),r.addClass(t.css.curtain).addClass(t.css.hidden),this.get("visibleShim")||r.addClass(t.css.curtainClear),r.on("click",this.dismiss,this),i&&r.setStyle("backgroundColor","rgba(0, 0, 0, "+i+")"),this.set("curtain",r),this.get("appendCurtainTo")?this.get("appendCurtainTo").appendChild(r):this.get("container").ancestor()&&this.get("container").ancestor().insert(r,"after")),n.get("curtain").removeClass(t.css.hidden)},anchorToLayout:function(){var t=this.get("container"),n=this.get("anchorTo"),r,i=this.get("appendTo")||n||this.get("rootEl");if(!i){var s=new Error("Missing DOM node for anchoring dialog.");throw e.config&&e.config.win&&e.config.win.beaconError&&e.config.win.beaconError("dialogjs.failure "+(this._parent?this._parent.name:""),e.config.win.location.href,s),s}i.appendChild(t),this.get("positioning")?(this.get("dropUp")&&(r="bottomright"),this.refreshPosition(r)):this.manualPosition()},refreshPosition:function(n){var r,s,o,u,a,f,l,c,h=this.get("container"),p=this.get("anchorTo"),d=this.get("offsetLeft")||0,v,m;u=h.getDOMNode().getBoundingClientRect(),this.set("width",h.getComputedStyle("width")),this.set("height",h.getComputedStyle("height")),h.getComputedStyle("position")==="fixed"&&h.setStyles({marginLeft:(-1*u.width/2|0)-d+"px",marginTop:(-1*u.height/2|0)+"px"});if(p){r=p.getDOMNode().getBoundingClientRect(),this.set("anchorWidth",r.width),this.set("anchorHeight",r.height),m=e.merge({top:0,bottom:0,left:0,right:0},this.get("constraints")),c={top:m.top,bottom:i.innerHeight+m.bottom,left:m.left,right:i.innerWidth+m.right},a=[[r.bottom+u.height<c.bottom&&r.right+u.width<c.right,{left:0,top:r.height},"topleft"],[r.bottom+u.height<c.bottom&&r
.left-u.width>c.left,{right:0,top:r.height},"topright"],[r.top>u.height+c.top&&r.right+u.width<c.right,{left:0,bottom:r.height},"bottomleft"],[r.top>u.height+c.top&&r.left-u.width>c.left,{right:0,bottom:r.height},"bottomright"],[!0,{left:Math.round(-1*(u.width-r.width)/2),top:r.height},"topcenter"]],n&&(n=n.toLowerCase(),a=a.filter(function(e){return e[2]===n?(e[0]=!0,!0):!1})||a);while(a.length){l=a.shift();if(l[0]){f=l[1],h.addClass("ui-dialog-tooltip-witharrow-"+l[2]),h.setStyles(e.mix({top:"auto",bottom:"auto",left:"auto",right:"auto"},f,!0));break}}v=h.one("."+t.css.arrow),v&&(s=20,f.left!==0&&f.right!==0?o=Math.round((u.width-s)/2)+"px":o=Math.round((r.width-s)/2)+"px",v.setStyles({right:f.right===undefined?"auto":o,left:f.left===undefined?"auto":o}))}},manualPosition:function(){if(this.get("arrow")){var e=typeof this.get("arrow")=="string"?this.get("arrow"):"topleft";this.get("container").addClass("ui-dialog-tooltip-witharrow-"+e)}},activate:function(){var e={":confirm":this.confirm,":decline":this.decline,":dismiss":this.dismiss,":ok":this.dismiss,":halt":function(e){e.halt()}};return this.attachEvents(e),this},toJSON:function(){var t=this.getAttrs();return Object.keys(t).reduce(function(n,r){var i=t[r];return i instanceof e.Node?n:i instanceof e.FlickrView?n:(i&&i.toJSON&&(i=i.toJSON()),n[r]=i,n)},{})},isVisible:function(){return!!this.state.visible},isLocked:function(){return!!this.state.locked},isWorking:function(){return!!this.state.working},show:function(r){try{var i=this,s=this.get("container"),o=this.get("anchorTo");this.set("dismissing",!1),this.switchToLoading(!1);if(this.state.visible)return;this.state.rendered||this.render(),i.state.visible=!0,s.addClass(this.get("dialogClass")),this.fire("show"),s.removeClass(t.css.removed),setTimeout(function(){n.onTransitionEnd(s,r),s.removeClass(t.css.hidden),o&&o.addClass(t.css.anchorSelected)},10),e.fire("flickr:setKeyEventScope",this.getKeyEventScope())}catch(u){console&&console.error&&console.error("An error occured showing the dialog.")}},handleError:function(e){return function(t){console.error(e,!t.toString||t.toString().match(/^\[object/)?t:t.toString())}},getKeyEventScope:function(){return this.name+this._yuid},close:function(e){if(this._destroyed)return;var t=this;this.set("dismissing",!1),this.fire("close"),this.hide(function(){t.destructor(),e&&e()})},destructor:function(){var t=this.get("container");t.detach(),t.remove(),this.set("container",null),this.set("content",null),this.set("appendTo",null),this.set("anchorTo",null),this.set("rootEl",null),this.set("dialogClass",null),this.manager=null,e.FlickrView.prototype.destroy.call(this),this._destroyed=!0,this.fire("destroy"),this.detachAll()},hide:function(r){e.fire("flickr:removeKeyEventScope",this.getKeyEventScope());if(!this.state.visible)return;var i=this,s=this.get("container"),o=this.get("anchorTo"),u=this.get("curtain"),a=!this.state.rendered;this.state.visible=!1,o&&o.removeClass(t.css.anchorSelected),u?(this.set("curtain",null),u.detach(),n.onTransitionEnd(u,function(){u.remove()}),u.addClass(t.css.hidden)):s.addClass(t.css.removed),e.namespace("Views").dialog.util.onTransitionEnd(s,function(){i.set("dismissing",!1),a||i.fire("hide"),i.state.visible||s.addClass(t.css.removed),r&&r()}),s.addClass(t.css.hidden)},toggle:function(e){this[this.state.visible?"hide":"show"](e),this.fire("toggle",this.state.visible)},switchToLoading:function(e){this.switchToUIState("loading",e)},switchToComplete:function(e){this.switchToUIState("complete",e)},switchToLocked:function(e){this.switchToUIState("locked",e)},switchToWorking:function(e){this.switchToUIState("working",e)},switchToUIState:function(e,n){var r;n=n===!1?!1:!0;if(this.state[e]===n)return;this.state[e]=n,r=t.css[e]||t.css.state.replace(/\{\{state\}\}/,e),this.get("container")[n?"addClass":"removeClass"](r)},confirm:function(t,n){t.halt(),this.fire("confirm",n),this.get("hideOnButtonClick")&&this.hide(),e.namespace("Views").dialog.util.log("CONFIRM")},decline:function(t,n){t.halt(),this.fire("decline",n),this.get("hideOnButtonClick")&&this.hide(),e.namespace("Views").dialog.util.log("DECLINE")},dismiss:function(t,n){if(this.isWorking()||!this.get("hideOnCurtainClick"))if(t.target===this.get("curtain"))return;this.set("dismissing",!0),t.halt(),this.fire("dismiss",n),this.hide(),e.namespace("Views").dialog.util.log("DISMISS")}},{ATTRS:{template:{value:"dialog"},anchorTo:{value:null},offsetLeft:{value:0},appendTo:{value:null},appendCurtainTo:{value:null},hideOnCurtainClick:{value:!0},tintCurtain:{value:0},rootEl:{value:e.Node&&e.one(s&&s.body)},content:{value:null},attrs:{value:{}},stack:{value:!1},hideOnButtonClick:{value:!0},visibleShim:{value:!0},positioning:{value:!0},arrow:{value:!1},dropUp:{value:!1},constraints:{value:{}},dialogClass:{value:""},autoCloseable:{value:!0}}}),r["dialog-tooltip"]=e.Base.create("dialog-tooltip",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager&&this.manager.close&&this.manager.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-tooltip"},offsetLeft:{value:0},visibleShim:{value:!1}}}),r["dialog-modal"]=e.Base.create("dialog-modal",r["dialog-base"],[],{anchorToLayout:function(){this.set("anchorTo",null),r["dialog-base"].prototype.anchorToLayout.apply(this,arguments)},show:function(e,t){var n=t||{},i=n.hideOthers||!1;i?this.get("stack")||this.manager.hide(this):this.get("stack")||this.manager.close(this),r["dialog-base"].prototype.show.call(this,e),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-modal"}}}),r["dialog-alert"]=e.Base.create("dialog-alert",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()}},{ATTRS:{template:{value:"dialog-alert"},offsetLeft:{value:0},visibleShim:{value:!1}}}),r["dialog-cta"]=e.Base.create("dialog-cta",r["dialog-base"],[],{show:function(){this.get("stack")||this.manager
.close(this),r["dialog-base"].prototype.show.apply(this,arguments),this.renderCurtain()},hide:function(){this.get("curtain")&&(this.get("curtain").remove(),this.set("curtain",null)),r["dialog-base"].prototype.hide.apply(this,arguments)}},{ATTRS:{template:{value:"dialog-cta"},offsetLeft:{value:0},visibleShim:{value:!1}}}),r["dialog-progress"]=e.Base.create("dialog-progress",r["dialog-base"],[],{},{ATTRS:{template:{value:"dialog-progress"}}}),e.Handlebars.registerHelper("dialogOutlet",function(n){var r=['<div class="'+t.css.content+'">'];return n instanceof e.FlickrView||n instanceof e.Node?r.push("<!--"+(n.name||"DOM-node")+"-->"):r.push((n||"")+""),r.push("</div>"),new e.Handlebars.SafeString(r.join(""))})},"@VERSION@",{requires:["flickr-view","handlebars-base","flutil","hermes-template-dialog-tooltip","hermes-template-dialog-modal","hermes-template-dialog-alert","hermes-template-dialog-cta","flickrui-css"]});
YUI.add("hermes-template-fluid-droparound",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" html"}function h(e,t){return" subview-droparound"}function p(e,t){return" menu"}function d(e,t){return" auto-size"}function v(e,t){var r="",i;return r+="max-height: ",(i=n.staticHeight)?i=i.call(e,{hash:{},data:t}):(i=e.staticHeight,i=typeof i===u?i.apply(e):i),r+=a(i)+"px; min-height: ",(i=n.staticHeight)?i=i.call(e,{hash:{},data:t}):(i=e.staticHeight,i=typeof i===u?i.apply(e):i),r+=a(i)+"px; ",r}function m(e,t){var r="",i;return r+="width: ",(i=n.staticWidth)?i=i.call(e,{hash:{},data:t}):(i=e.staticWidth,i=typeof i===u?i.apply(e):i),r+=a(i)+"px;",r}function g(e,t){return"position: fixed;"}function y(e,t){return"hide-head"}function b(e,t){var r="",i;r+='\n			<div class="content text-only',i=n["if"].call(e,e.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+='">\n				',(i=n.textMessage)?i=i.call(e,{hash:{},data:t}):(i=e.textMessage,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n			</div>\n		",r}function w(e,t){var r="",i,s;r+='\n			<div class="content html-only',i=n["if"].call(e,e.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+='">\n				',s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlMessage,s):l.call(e,"renderTrustedMarkup",e.htmlMessage,s)))+"\n			</div>\n		",r}function E(e,t){return'\n			<div class="content subview"></div>\n		'}function S(e,t){var r="",i;r+='\n			<div class="content menu">\n				<ul role="menu">\n					',i=n.each.call(e,e.menuItems,{hash:{},inverse:f.noop,fn:f.programWithDepth(24,x,t,e),data:t});if(i||i===0)r+=i;return r+="\n				</ul>\n			</div>\n		",r}function x(e,t,r){var i="",s;i+="\n					",s=n["if"].call(e,r.multiSelect,{hash:{},inverse:f.program(30,k,t),fn:f.program(25,T,t),data:t});if(s||s===0)i+=s;return i+="\n					",i}function T(e,t){var r="",i;r+='\n						<li role="menuitem" ',i=n["if"].call(e,e.selected,{hash:{},inverse:f.noop,fn:f.program(26,N,t),data:t});if(i||i===0)r+=i;r+='><span class="selection"></span>',(i=n.text)?i=i.call(e,{hash:{},data:t}):(i=e.text,i=typeof i===u?i.apply(e):i),r+=a(i)+" - ",(i=n.itemFlag)?i=i.call(e,{hash:{},data:t}):(i=e.itemFlag,i=typeof i===u?i.apply(e):i),r+=a(i),i=n["if"].call(e,e.itemFlag,{hash:{},inverse:f.noop,fn:f.program(28,C,t),data:t});if(i||i===0)r+=i;return r+="</li>\n					",r}function N(e,t){return'class="selected"'}function C(e,t){var r="",i;return r+='<div class="label-new">',(i=n.itemFlag)?i=i.call(e,{hash:{},data:t}):(i=e.itemFlag,i=typeof i===u?i.apply(e):i),r+=a(i)+"</div>",r}function k(e,t){var r="",i;r+='\n						<li role="menuitem">',i=n["if"].call(e,e.href,{hash:{},inverse:f.noop,fn:f.program(31,L,t),data:t});if(i||i===0)r+=i;(i=n.text)?i=i.call(e,{hash:{},data:t}):(i=e.text,i=typeof i===u?i.apply(e):i),r+=a(i),i=n["if"].call(e,e.itemFlag,{hash:{},inverse:f.noop,fn:f.program(28,C,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.href,{hash:{},inverse:f.noop,fn:f.program(34,O,t),data:t});if(i||i===0)r+=i;return r+="</li>\n					",r}function L(e,t){var r="",i;r+='<a href="',(i=n.href)?i=i.call(e,{hash:{},data:t}):(i=e.href,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',i=n["if"].call(e,e.className,{hash:{},inverse:f.noop,fn:f.program(32,A,t),data:t});if(i||i===0)r+=i;return r+=">",r}function A(e,t){var r="",i;return r+=' class="',(i=n.className)?i=i.call(e,{hash:{},data:t}):(i=e.className,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function O(e,t){return"</a>"}function M(e,t){return"hide-foot"}function _(e,t){return'\n		<div class="droparrow up"></div>\n	'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;s+='<div class="droparound',o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:f.noop,fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.subview,{hash:{},inverse:f.noop,fn:f.program(3,h,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.menuItems,{hash:{},inverse:f.noop,fn:f.program(5,p,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,i),data:i});if(o||o===0)s+=o;s+=" ",(o=n.classList)?o=o.call(t,{hash:{},data:i}):(o=t.classList,o=typeof o===u?o.apply(t):o),s+=a(o)+'"\nstyle="',o=n["if"].call(t,t.staticHeight,{hash:{},inverse:f.noop,fn:f.program(9,v,i),data:i});if(o||o===0)s+=o;s+="\n",o=n["if"].call(t,t.staticWidth,{hash:{},inverse:f.noop,fn:f.program(11,m,i),data:i});if(o||o===0)s+=o;s+="\n",o=n["if"].call(t,t.positionFixed,{hash:{},inverse:f.noop,fn:f.program(13,g,i),data:i});if(o||o===0)s+=o;s+='">\n	<div class="head ',o=n.unless.call(t,t.headContent,{hash:{},inverse:f.noop,fn:f.program(15,y,i),data:i});if(o||o===0)s+=o;s+='">\n		',(o=n.headContent)?o=o.call(t,{hash:{},data:i}):(o=t.headContent,o=typeof o===u?o.apply(t):o),s+=a(o)+'\n	</div>\n	<div class="body">\n		',o=n["if"].call(t,t.textMessage,{hash:{},inverse:f.noop,fn:f.program(17,b,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:f.noop,fn:f.program(19,w,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.subview,{hash:{},inverse:f.noop,fn:f.program(21,E,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.menuItems,{hash:{},inverse:f.noop,fn:f.program(23,S,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n	<div class="foot ',o=n.unless.call(t,t.footContent,{hash:{},inverse:f.noop,fn:f.program(36,M,i),data:i});if(o||o===0)s+=o;s+='">\n		',(o=n.footContent)?o=o.call(t,{hash:{},data:i}):(o=t.footContent,o=typeof o===u?o.apply(t):o),s+=a(o)+"\n	</div>\n	",o=n["if"].call(t,t.showDropArrow,{hash:{},inverse:f.noop,fn:f.program(38,_,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-droparound",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",
{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-flickr-balls",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="balls">\n	<div class="blue ball"></div><div class="pink ball"></div>\n</div>'}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/flickr-balls",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("attribute-helpers",function(e){function t(e){if(typeof e=="undefined"||e===null)return!0}function n(n){return t(n)?!0:e.Lang.isString(n)?!0:e.Lang.isNumber(n)?!0:!1}function r(t){return e.Lang.isNumber(t)&&(t=t.toString()),e.Lang.isString(t)?t:undefined}function i(n){return t(n)?!0:[!0,!1].indexOf(n)!==-1?!1:n instanceof Array?!1:(typeof n=="string"&&(n=parseInt(n,10)),typeof n=="object"&&typeof n._d!="undefined"&&(n=n._d),e.moment(n).isValid()?!0:!1)}function s(t){var n=null,r=null;if(e.moment.isMoment(t))return t;if(t&&typeof t=="object"&&t._d){r=e.moment(t),r.isValid()||(r=e.moment(t._d));if(r.isValid())return r}return typeof t=="number"||t===parseInt(t,10).toString()?(n=parseInt(t,10),n.toString().length<=10?r=e.moment(n.toString(),"X"):r=e.moment(n),r):t&&!e.Lang.isBoolean(t)&&e.moment(new Date(t)).isValid()?e.moment(t):undefined}function o(n){return t(n)?!0:(e.Lang.isString(n)&&(n=parseInt(n,10)),e.Lang.isNumber(n)?!0:!1)}function u(t){return e.Lang.isString(t)&&(t=parseInt(t,10)),e.Lang.isNumber(t)?t<0?Math.ceil(t):Math.floor(t):undefined}function a(n){return t(n)?!0:(e.Lang.isString(n)&&(n=parseFloat(n)),e.Lang.isNumber(n)?!0:!1)}function f(t){return e.Lang.isString(t)&&(t=parseFloat(t)),e.Lang.isNumber(t)?t:undefined}function l(n){return t(n)?!0:e.Lang.isBoolean(n)?!0:[0,"0","false"].indexOf(n)>-1?!0:[1,"1","true"].indexOf(n)>-1?!0:!1}function c(e){return[!1,"0",0,"false"].indexOf(e)>-1?!1:[!0,"1",1,"true"].indexOf(e)>-1?!0:undefined}e.AttributeHelpers={validateString:n,coerceString:r,validateInteger:o,coerceInteger:u,validateFloat:a,coerceFloat:f,validateBoolean:l,coerceBoolean:c,validateDate:i,coerceDate:s}},"@VERSION@",{requires:[]});
YUI.add("fluid-overlay-manager-view",function(e){"use strict";var t=0,n=e.Base.create("overlayManager",e.Base,[],{add:function(n){var r=this.get("overlay"),i=n.getAttrs(),s=this;this.get("modals").push(n),r?i.dismissOnOverlayClick&&this.set("dismissOnOverlayClick",!0):(r=e.Node.create(this.get("overlayHTML")),e.one("body").append(r),this.set("overlay",r),t++,this.addOverlayClickHandler(r),this.addOverlayKeyHandler(r),i.dismissOnOverlayClick?this.set("dismissOnOverlayClick",!0):this.set("dismissOnOverlayClick",!1)),this.setOverlayStyle(i),i.dismissOnActionClick&&n.on("actionClick",function(){setTimeout(function(){s.close()},0)}),n.name==="fluid-modal-view"&&n.on("cancelClick",function(){setTimeout(function(){s.close()},0)})},setOverlayStyle:function(e){var t="",n="",r="",i=this.get("overlay");e.hideModalOverlay&&(t="transparent"),e.darkOverlay&&(t="dark-overlay"),e.invisibleOverlay&&(n="invisible"),e.overlayClassList&&(r=e.overlayClassList),i.setAttribute("class",this.get("overlayClass")+" "+r+" "+t+" "+n)},addOverlayClickHandler:function(e){e.getDOMNode().addEventListener("click",this.clickHandler.bind(this))},removeOverlayClickHandler:function(e){e.getDOMNode().removeEventListener("click",this.clickHandler.bind(this))},addOverlayKeyHandler:function(t){e.one("body").getDOMNode().addEventListener("keyup",this.keyHandler.bind(this))},removeOverlayKeyHandler:function(t){e.one("body").getDOMNode().removeEventListener("keyup",this.keyHandler.bind(this))},keyHandler:function(e){e.keyCode===27&&this.clickHandler()},clickHandler:function(){var e=this.get("modals").length-2,t="",n="",r="",i,s=this.get("overlay");this.get("dismissOnOverlayClick")&&(this.set("dismissOnOverlayClick",!1),this.close(),e>-1&&this.get("modals").length>0&&(i=this.get("modals")[e].getAttrs(),i.hideModalOverlay&&(t="transparent"),i.invisibleOverlay&&(n="invisible"),i.overlayClassList&&(r=i.overlayClassList),s.setAttribute("class",this.get("overlayClass")+" "+r+" "+t+" "+n),this.set("dismissOnOverlayClick",i.dismissOnOverlayClick)))},remove:function(e){var t=this.get("modals");if(e.isClosed){var n=t.indexOf(e);n>-1?t.splice(n,1):t.length===1&&(n=0,t.splice(n,1)),this.removeOverlay()}},close:function(){var e=this.get("modals").pop();e&&!e.isClosed&&e.close(),this.removeOverlay()},closeAll:function(){var e=this;this.get("modals").forEach(function(t,n){e.close()})},removeOverlay:function(){var e=this.get("overlay");if(this.get("modals").length===0&&e)this.removeOverlayClickHandler(e),this.removeOverlayKeyHandler(e),e.remove(),this.set("overlay",undefined),t--;else{var n=this.get("modals").length-1;n>-1&&this.setOverlayStyle(this.get("modals")[n].getAttrs())}},alreadyShowingModal:function(e){var t=!1;return e||(e="fluid-modal-view"),this.get("modals").forEach(function(n,r){n.name===e&&(t=!0)}),t}},{ATTRS:{modals:{value:[],validator:function(t){return e.Lang.isArray(t)}},overlayHTML:{},overlayClass:{},overlay:{value:undefined},dismissOnOverlayClick:{value:!0,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},validator:function(t){return e.Lang.isBoolean(t)}}}});e.OverlayManager={DroparoundOverlay:new n({overlayHTML:'<div class="fluid-droparound-overlay"></div>',overlayClass:"fluid-droparound-overlay"}),ModalOverlay:new n({overlayHTML:'<div class="fluid-modal-overlay"><div class="balls"></div></div>',overlayClass:"fluid-modal-overlay"}),SignupInterstitialOverlay:new n({overlayHTML:'<div class="signup-interstitial-overlay interstitial-fade"></div>',overlayClass:"signup-interstitial-overlay interstitial-fade"}),ChalkboardOverlay:new n({overlayHTML:'<div class="fluid-chalkboard-overlay"></div>',overlayClass:"fluid-chalkboard-overlay"}),hasOverlay:function(){return t>0}}},"@VERSION@",{requires:["base","flickr-view","attribute-helpers","fluid-css","fluid-balls-css"],optional:[],langBundles:[],optionalRequires:["fluid"]});
YUI.add("fluid-droparound-view",function(e){"use strict";var t,n;t={css:{destinationContainer:"body",subviewContent:".content.subview",menuContent:".content.menu",droparoundContainer:".droparound",droparoundContent:".body .content",droparrow:".droparrow"},options:{}},n={supportsTransform:!1,droparound:{height:0,width:0}},e.namespace("Views").FluidDroparound=e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){this.set("isActiveViewAgnostic",!0)},buildContainer:function(){return!this.get("textMessage")&&!this.get("htmlMessage")&&!this.get("subview")&&!this.get("menuItems")?(e.Flog.warn("FluidDroparoundView requires a `textMessage`, `htmlMessage`, `subview`, or `menuItems`."),this):(this.get("menuItems")&&this.set("menuItems",this.get("menuItems").filter(function(e){return!e.hidden})),this.setContainerHTML(this.templates("fluid-droparound")({textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),menuItems:this.get("menuItems"),multiSelect:this.get("multiSelect"),showDropArrow:this.get("showDropArrow"),hideModalOverlay:this.get("hideModalOverlay"),classList:this.get("classList"),footContent:this.get("footContent"),headContent:this.get("headContent"),staticWidth:this.get("width"),staticHeight:this.get("height"),positionFixed:this.get("positionFixed"),autoSizeToContent:this.get("autoSizeToContent")})),this.appendAndPosition(),this)},activate:function(){var n=this.get("container"),r=this;return e.OverlayManager.DroparoundOverlay.add(this),this.registerEventHandler(e.on("droparound:reposition",e.bind(this.anchorPositionChange,this))),this.registerEventHandler(e.on("history:change",function(e){if(e.src==="popstate"&&e.prevVal&&e.newVal)if(e.prevVal.flickr&&e.prevVal.flickr.referrer||e.newVal.flickr&&e.newVal.flickr.referrer)return;r.close(e)})),this.get("subview")&&this.loadSubview(),this.get("menuItems")&&this.registerEventHandler(n.one(t.css.menuContent).delegate("click",this.onMenuItemClick.bind(this),"li")),this.get("observePageResize")&&this.observePageResize(),this.get("closeOnScroll")&&this.observePageScroll(),this.fire("activated"),this},getDroparoundContainer:function(){return this.get("container")?this.get("container").one(t.css.droparoundContainer):null},loadSubview:function(){var n,r,i=!1,s=this.get("subview"),o=this;n=this.get("container").one(t.css.subviewContent),n.appendChild(e.Node.create(this.templates("flickr-balls")({})).addClass("flickr-balls")),r=setTimeout(function(){i=!0},40),this.loading=!0,s.appContext=o.appContext,s.set("isActiveViewAgnostic",!0),s.initialize().then(function(e){clearTimeout(r),i&&(e.get("container").addClass("load-transition"),setTimeout(function(){e.get("container").removeClass("load-transition")},1)),o.onSubviewInitialized(e)})},onSubviewInitialized:function(n){var r=this,i=this.get("container").one(t.css.subviewContent);if(!this.loading)return;this.loading=!1,i.one(".flickr-balls").remove(!0),i.appendChild(n.get("container")),n.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&r.fire.apply(r,e.details)}),n.normalizedActivate(),n.recursivelyActivateSubviews(),r.appendAndPosition(),r.registerEventHandler(r.get("subview").on("actionClick",e.bind(r.handleAction,r)))},onMenuItemClick:function(e){var n,r,i;n=e.target.ancestor("li",!0),n&&(r=this.get("container").one(t.css.menuContent).all("li").indexOf(n),r!==-1&&(i=this.get("menuItems")[r],this.get("multiSelect")&&(i.selected=!i.selected,n.toggleClass("selected")),this.fire("selected",{menuItemIndex:r,menuItem:i})))},appendAndPosition:function(){var r=e.one(t.css.destinationContainer),i=this.get("container").one(t.css.droparoundContainer);r&&(r.append(this.get("container")),n.droparound.width=this.get("width")||i.getComputedStyle("width"),n.droparound.height=this.get("height")||i.getComputedStyle("height"),this.repositionToElement(this.get("anchorElement")))},updateTextMessage:function(e){e&&e!==""&&(this.set("textMessage",e),this.buildContainer())},updateHTMLMessage:function(e){e&&e!==""&&(this.set("htmlMessage",e),this.buildContainer())},anchorPositionChange:function(){this.repositionToElement(this.get("anchorElement"))},observePageResize:function(){var t=this;this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(n){e.fire("droparound:reposition"),t.get("closeOnResize")&&t.handleClose(n)}))},observePageScroll:function(){var t=YUI.Env.isServer?0:e.config.win.pageYOffset,n=this;this.get("startingScrollPoint")||this.set("startingScrollPoint",t),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",n.handleScroll.bind(n)))},handleScroll:function(t){var n,r=this.get("startingScrollPoint");r?(n=e.config.win.pageYOffset,r+this.get("closeOnScrollDistance")<n&&this.handleClose(t)):this.set("startingScrollPoint",e.config.win.pageYOffset)},repositionToElement:function(r){var i=this.get("container"),s=e.one("body"),o=i.one(".droparound"),u=o.one(t.css.droparrow),a=r.getXY(),f=this.get("mirrorArrowAdjustment"),l=s.get("offsetWidth"),c=this.get("showDropArrow"),h=this.get("anchorOffsetVertical"),p=this.get("anchorOffsetHorizontal"),d=this.get("anchorPositionOffset"),v=this.get("minVerticalSpace"),m=o.get("offsetHeight"),g=o.get("offsetWidth"),y=parseInt(r.getComputedStyle("width"),10)||r.get("offsetWidth"),b=parseInt(r.getComputedStyle("height"),10)||r.get("offsetHeight"),w=this.get("dropdownArrowWidth"),E=this.get("dropdownArrowHeight"),S=n.droparound.width?parseInt(n.droparound.width,10):parseInt(o.getComputedStyle("width"),10),x=n.droparound.height?parseInt(n.droparound.height,10):parseInt(o.getComputedStyle("height"),10),T=o.one(t.css.droparoundContent),N=this.get("minHorizontalSpace")+Math.max(m,x),C=l-Math.max(g,S)-d-N,k=r.getDOMNode().getBoundingClientRect(),L,A,O,M,_,D,P,H,B,j=this.get("preferLeft"),F=this.get("preferTop"),I=this.get("preferBottom"),q=0,R=this.appContext.viewportData.getHeight();y||(y=0),b||(b=0),L=Math.ceil((y-w)/2),M=S||g,_=x||m,A=a[1]-x-
h,this.get("horizCenterToAnchor")?(O=a[0]+y/2-M/2,q=M/2-w/2):(O=a[0]-p,q=L+f+p),this.get("preferredSide")?this.get("preferredSide")==="left-middle"?(A=a[1]+Math.round(y/2)-h,O=a[0]+y+L+f+p+E,u.removeClass("down").addClass("left").setStyles({left:L+f-Math.round(E/2)+"px",top:(_-E)/2+"px"})):this.get("preferredSide")==="bottom-middle"&&(A=a[1]+Math.round(y/2)-h,O=a[0]+y+L+f+p+E,u.removeClass("down").addClass("up").setStyles({left:(M-w)/2-L+f-Math.round(w/2)+"px",top:_+"px"})):(P=A<v||k.top-x-h<v,H=O>C,B=k.top+k.height+x+h>R,!F&&P||F&&!P||I&&!B?(A=a[1]+b+h,c&&u.removeClass("up").addClass("down").setStyle("left",q+"px")):c&&u.removeClass("down").addClass("up").setStyle("left",q+"px"),this.get("forceLeft")||!j&&H||j&&!H?a[0]+y+p>l?(O=a[0]-S,c&&u.addClass("right").setStyle("left","auto").setStyle("right",L+y+"px")):(O=a[0]-S+y+p,c&&u.addClass("right").setStyle("left","auto").setStyle("right",L+p+"px")):c&&u.removeClass("right").setStyle("right","auto").setStyle("left",q+"px")),o.setXY([O,A]),!this.get("menuItems")&&!this.get("autoSizeToContent")&&(D={width:M+"px",height:_+"px"},T.setStyles(D))},handleClose:function(e){this.close()},handleAction:function(e){this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},show:function(){var e=!this.isActivated,t=this;return this.initialize().then(function(){t.isClosed=!1,e||t.activate()}),this},close:function(){var t=this.get("container");this.loading=!1,this.isClosed=!0,this.fire("closeDroparound"),this.destroy(),this.get("subview")&&this.get("subview").destroy(),t&&t.remove(!0),e.OverlayManager.DroparoundOverlay.remove(this)},destructor:function(){this.detachAll()}},{ATTRS:{dismissOnOverlayClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnActionClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},hideModalOverlay:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},invisibleOverlay:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferredSide:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},footContent:{value:null},headContent:{value:null},width:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},height:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},subview:{value:null},menuItems:{value:null},classList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},anchorElement:{value:null},showDropArrow:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},anchorOffsetVertical:{value:15,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},anchorOffsetHorizontal:{value:5,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},contentPadding:{value:12,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minVerticalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minHorizontalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowWidth:{value:21,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowHeight:{value:11},anchorPositionOffset:{value:15,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},observePageResize:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferLeft:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferTop:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferBottom:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},mirrorArrowAdjustment:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},positionFixed:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScroll:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScrollDistance:{value:40,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},closeOnResize:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},overlayClassList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},forceLeft:{value:null},autoSizeToContent:{value
:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},horizCenterToAnchor:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},multiSelect:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","flog","fluid-css","hermes-template-fluid-droparound","fluid-balls-css","hermes-template-flickr-balls","fluid-overlay-manager-view","attribute-helpers"],optionalRequires:["fluid"]});
YUI.add("hermes-template-person-card",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i,s;r+="\n					"+l((i=(i=e.person,i==null||i===!1?i:i.realname),typeof i===f?i.apply(e):i))+"\n					",s=n["if"].call(e,e.personLocation,{hash:{},inverse:c.noop,fn:c.program(2,d,t),data:t});if(s||s===0)r+=s;return r+="\n				",r}function d(e,t){return" - "}function v(e,t){var r="",i;r+="\n			",i=n.each.call(e,e.photostream,{hash:{},inverse:c.noop,fn:c.program(5,m,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function m(e,t){var r="",i;r+="\n				",i=n["if"].call(e,e.needsInterstitial,{hash:{},inverse:c.program(8,y,t),fn:c.program(6,g,t),data:t});if(i||i===0)r+=i;return r+="\n			",r}function g(e,t){var r="",i;return r+='\n					<a href="',(i=n.url)?i=i.call(e,{hash:{},data:t}):(i=e.url,i=typeof i===f?i.apply(e):i),r+=l(i)+'" title="',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===f?i.apply(e):i),r+=l(i)+'" width="'+l((i=(i=(i=e.sizes,i==null||i===!1?i:i.sq),i==null||i===!1?i:i.width),typeof i===f?i.apply(e):i))+'" height="'+l((i=(i=(i=e.sizes,i==null||i===!1?i:i.sq),i==null||i===!1?i:i.height),typeof i===f?i.apply(e):i))+'" style="background: url(https://s.yimg.com/pw/images/spaceball.gif);" data-track="personCardRecentPhotosClick"></a>\n				',r}function y(e,t){var r="",i;return r+='\n					<a href="',(i=n.url)?i=i.call(e,{hash:{},data:t}):(i=e.url,i=typeof i===f?i.apply(e):i),r+=l(i)+'" title="',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===f?i.apply(e):i),r+=l(i)+'" style="background: url('+l((i=(i=(i=e.sizes,i==null||i===!1?i:i.sq),i==null||i===!1?i:i.displayUrl),typeof i===f?i.apply(e):i))+');" data-track="personCardRecentPhotosClick"></a>\n				',r}function b(e,t){var r="",i,s;return r+='\n			<span class="tertiary">',s={hash:{intlName:"person.NO_PHOTOS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):h.call(e,"intlMessage",s)))+"</span>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='\n<div>\n	<section>\n		<div class="follow-subview">',a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["follow-view"],a):h.call(t,"outlet",t["follow-view"],a)))+'</div>\n\n		<div class="attribution">\n			<a href="'+l((o=(o=t.personURLS,o==null||o===!1?o:o.photostream),typeof o===f?o.apply(t):o))+'" data-track="personCardAttributionNameClick">\n				<h3 class="fade-out">'+l((o=(o=t.person,o==null||o===!1?o:o.username),typeof o===f?o.apply(t):o))+'</h3>\n			</a>\n		</div>\n		<div class="info">\n			<span class="secondary realname fade-out">\n				',u=n["if"].call(t,(o=t.person,o==null||o===!1?o:o.realname),{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(u||u===0)s+=u;s+="\n				",(u=n.personLocation)?u=u.call(t,{hash:{},data:i}):(u=t.personLocation,u=typeof u===f?u.apply(t):u),s+=l(u)+'\n			</span>\n		</div>\n\n		<div class="recent-photos">\n		',u=n["if"].call(t,t.photostream,{hash:{},inverse:c.program(10,b,i),fn:c.program(4,v,i),data:i});if(u||u===0)s+=u;return s+='\n		</div>\n	</section>\n</div>\n\n<div class="links secondary">\n	<a href="'+l((o=(o=t.personURLS,o==null||o===!1?o:o.sendFlickrMail),typeof o===f?o.apply(t):o))+'" data-track="personCardMessageClick">',a={hash:{intlName:"person.MESSAGE"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):h.call(t,"intlMessage",a)))+'</a>\n	<a href="'+l((o=(o=t.personURLS,o==null||o===!1?o:o.albums),typeof o===f?o.apply(t):o))+'" data-track="personCardAlbumsClick">',a={hash:{intlName:"person.ALBUMS"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):h.call(t,"intlMessage",a)))+'</a>\n	<a href="'+l((o=(o=t.personURLS,o==null||o===!1?o:o.favorites),typeof o===f?o.apply(t):o))+'" data-track="personCardFavesClick">',a={hash:{intlName:"person.FAVES"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):h.call(t,"intlMessage",a)))+'</a>\n	<a class="align-right" href="'+l((o=(o=t.personURLS,o==null||o===!1?o:o.profile),typeof o===f?o.apply(t):o))+'" data-track="personCardProfileClick">',a={hash:{intlName:"person.PROFILE"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):h.call(t,"intlMessage",a)))+"</a>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/person-card",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("person-card-view",function(e){e.namespace("Views")[this.name]=e.Base.create("person-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.pathAlias=e.pathAlias,this.set("isActiveViewAgnostic",e.isActiveViewAgnostic||!1),this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"follow-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1}},loadState:function(){var t=this,n={contentType:7};return this.nsid?n.id=this.nsid:n.pathAlias=this.pathAlias,(new e.FlickrPromise({person:this.appContext.getModel("person-models",n),photostream:this.appContext.getModel("photostream-models",n),personProfile:this.appContext.getModel("person-profile-models",n)})).then(function(e){return t.personModel=e.person,t.personLocation=e.personProfile.getValue("location"),e.photostream.getValue("photoPageList").getPage({page:1,perPage:5}).then(function(e){t.photostreamPhotos=e})},function(e){t.loadingError=!0,e.code===1&&e.message==="User not found"&&(t.badUser=!0)})},buildContainer:function(){var t,n;return this.loadingError?this.badUser?n='<span class="no-user">'+this.intlMessage({intlName:"person.NO_LONGER_ON_FLICKR"})+"</span>":n='<span class="error-user">'+this.intlMessage({intlName:"person.ERROR_LOADING"})+"</span>":(t=this.personModel.toJSON(),n=this.templates("person-card")({person:t,photostream:this.photostreamPhotos.map(function(e){return e.toJSON()}),personLocation:this.personLocation,personURLS:e.URLHelper.generatePersonUrls(this.personModel),"follow-view":this.subviews["follow-view"].get("container")})),this.setContainerHTML(n),this},activate:function(){var e=this.get("container"),t=e.one(".follow-view"),n=t.one(".relationship"),r=t.one(".relationship > .is-following"),i=e.one(".attribution");return n?r&&i.addClass("shorter"):i.addClass("full"),this}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-person-card","person-card-css","url-helper"],langBundles:["person","common"]});
YUI.add("hermes-lang-person",function(e,t){e.Intl.add("hermes/person","en-US",{MESSAGE:["Message"],ALBUMS:["Albums"],FAVES:["Faves"],PROFILE:["Profile"],NO_PHOTOS:["This user has no photos visible to you."],NO_LONGER_ON_FLICKR:["This user is not found, or no longer on Flickr."],ERROR_LOADING:["Error loading user card. Please try again."],RELATIONSHIP_FRIEND_ERROR:["There was a problem setting your friend relationship."],RELATIONSHIP_FAMILY_ERROR:["There was a problem setting your family relationship."],SIGN_IN_BEFORE_FOLLOW_TITLE:["You found someone to follow!"],SIGN_IN_BEFORE_FOLLOW_MESSAGE:["That's awesome. Just sign in to follow them."],JOIN_FLICKR_AND_FOLLOW:["Join Flickr to never miss a post from ","${person}","."],SIGN_IN_AND_FOLLOW:["Sign in and follow"],CURATOR_PASS_OVER:["Pass over"],CURATOR_PASS_OVER_UNDO:["Undo pass over"]})},"@VERSION@",{requires:["intl"]});
YUI.add("person-menu-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create("person-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.containerSelector=e.containerSelector,this.excludeSelectors=[".no-menu"].concat(e.excludeSelectors||[]),this.personSelector=".avatar.person, .photo-attribution .attribution-icon, .comment-icon.circle-icon a, .show-person-menu",this.dialogCache=[],this.currentDialog,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerHTML(""),this},toJSON:function(){var t=e.merge(this.get("user"));return t},activate:function(){this.registerEventHandler(e.one(this.containerSelector).delegate("click",this.onClickTarget.bind(this),this.personSelector,this))},onClickTarget:function(t){var n=this,r;this.shouldProcessTarget(t.target)&&(t.preventDefault(),t.halt(),r=t.target.ancestor().one(this.personSelector)||t.target.ancestor(this.personSelector)||t.target.ancestor("a"),this.createParamsAndManageState(r),e.rapidTracker.beacon(n.name,"personCardOpened"))},shouldProcessTarget:function(e){return e.ancestor()!==null&&!this.excludeSelectors.some(function(t){return e.ancestor().one(t)||e.ancestor(t)})},createParamsAndManageState:function(e){var t=this.getParams(e);this.createDialog(t,e)},getParams:function(t){var n={appContext:this.appContext,isActiveViewAgnostic:!0},r="",i;return r=t.getData("person-nsid")||t.ancestor().getData("person-nsid"),r||(i=t.getAttribute("href")||t.ancestor().getAttribute("href"),i.indexOf("/photos")===0?r=i.replace("/photos/","").replace("/",""):i.indexOf("/groups/")===0&&(r=i.slice(i.lastIndexOf("/")+1))),e.TypeValidator.matches.nsid(r)?n.nsid=r:n.pathAlias=r,n.signature=r,n},createDialog:function(t,n){var r,i=this;this.fire("open"),e.fire("personMenuOpen"),this.dialogCache.some(function(e){return e.key===t.signature?(r=e.dialog,!0):!1}),r?r.set("anchorElement",n.ancestor().hasClass("comment-icon")?n.ancestor():n):(r=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,showDropArrow:!0,width:350,height:165,observePageResize:!0,anchorElement:n.ancestor().hasClass("comment-icon")?n.ancestor():n,subview:new e.Views["person-card-view"](t)}),r.on("clickOverlay",function(e){i.nextElClicked=[e.clientX,e.clientY]}),r.on("closeDroparound",function(){setTimeout(function(){if(i.nextElClicked){var t=document.elementFromPoint(i.nextElClicked[0],i.nextElClicked[1]),n;t&&(n=e.one(t),n&&i.personSelector.split(",").some(function(e){return n.hasClass(e.replace(".",""))})&&i.shouldProcessTarget(n)&&i.createParamsAndManageState(n)),i.nextElClicked=null}},10)}),this.dialogCache.length>10&&this.dialogCache.shift(),this.dialogCache.push({key:t.signature,dialog:r})),this.currentDialog=r,r.show()},closeDialog:function(){this.currentDialog&&(this.currentDialog.close(),e.fire("personMenuClose"))},destructor:function(){var t=this;this.currentDialog=null,e.Object.each(this.dialogCache,function(e){t.dialogCache[e]&&(t.dialogCache[e].destroy(),t.dialogCache[e]=null)}),this.dialogCache=[]}})},"@VERSION@",{requires:["flickr-promise","flickr-view","account-menu-css","flickrui-css","dialog","fluid-droparound-view","person-card-view","type-validator"],langBundles:["person","common"]});
YUI.add("hermes-template-group-card",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i;r+="\n			",i=n.each.call(e,e.groupPool,{hash:{},inverse:c.noop,fn:c.program(2,d,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function d(e,t){var r="",i,s;r+='\n				\n				<a href="',(i=n.url)?i=i.call(e,{hash:{},data:t}):(i=e.url,i=typeof i===f?i.apply(e):i),r+=l(i)+'" title="',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===f?i.apply(e):i),r+=l(i)+'" width="'+l((i=(i=(i=e.sizes,i==null||i===!1?i:i.sq),i==null||i===!1?i:i.width),typeof i===f?i.apply(e):i))+'" height="'+l((i=(i=(i=e.sizes,i==null||i===!1?i:i.sq),i==null||i===!1?i:i.height),typeof i===f?i.apply(e):i))+'"\n				',s=n["if"].call(e,e.needsInterstitial,{hash:{},inverse:c.program(5,m,t),fn:c.program(3,v,t),data:t});if(s||s===0)r+=s;return r+="\n				></a>\n				\n			",r}function v(e,t){return'\n					class="restricted"\n				'}function m(e,t){var n="",r;return n+='\n					style="background: url('+l((r=(r=(r=e.sizes,r==null||r===!1?r:r.sq),r==null||r===!1?r:r.displayUrl),typeof r===f?r.apply(e):r))+');"\n				',n}function g(e,t){var r="",i;r+="\n			",i=n["if"].call(e,e.canAddPhotos,{hash:{},inverse:c.program(10,b,t),fn:c.program(8,y,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function y(e,t){var r="",i,s;return r+='\n				<p class="tertiary">',s={hash:{intlName:"groups.BE_THE_FIRST"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):h.call(e,"intlMessage",s)))+'</p>\n				<p class="tertiary"><a href="'+l((i=(i=e.groupURLS,i==null||i===!1?i:i.photos),typeof i===f?i.apply(e):i))+'">',s={hash:{intlName:"groups.ADD_SOME_PHOTOS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):h.call(e,"intlMessage",s)))+"</a></p>\n			",r}function b(e,t){var r="",i,s;return r+="\n				<p>",s={hash:{intlName:"groups.NO_PHOTOS"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):h.call(e,"intlMessage",s)))+"</p>\n			",r}function w(e,t){var r="",i,s;return r+='\n	<a href="'+l((i=(i=e.groupURLS,i==null||i===!1?i:i.admin),typeof i===f?i.apply(e):i))+'">',s={hash:{intlName:"groups.ADMIN_LINK_LABEL"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):h.call(e,"intlMessage",s)))+"</a>\n	",r}function E(e,t){var r="",i,s;r+="\n		",s=n["if"].call(e,(i=e.group,i==null||i===!1?i:i.isModerator),{hash:{},inverse:c.noop,fn:c.program(15,S,t),data:t});if(s||s===0)r+=s;return r+="\n	",r}function S(e,t){var r="",i,s;return r+='\n		<a href="'+l((i=(i=e.groupURLS,i==null||i===!1?i:i.admin),typeof i===f?i.apply(e):i))+'">',s={hash:{intlName:"groups.ADMIN_LINK_LABEL"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):h.call(e,"intlMessage",s)))+"</a>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='\n<div>\n	<section>\n		<div class="join-subview">\n\n			',a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["join-group-view"],a):h.call(t,"outlet",t["join-group-view"],a)))+'\n\n		</div>\n\n		<div class="attribution">\n			<a href="'+l((o=(o=t.groupURLS,o==null||o===!1?o:o.about),typeof o===f?o.apply(t):o))+'">\n				<h3 class="fade-out">',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,(o=t.group,o==null||o===!1?o:o.title),a):h.call(t,"renderTrustedMarkup",(o=t.group,o==null||o===!1?o:o.title),a)))+'</h3>\n			</a>\n		</div>\n		<div class="stats">\n			<span class="secondary fade-out">',a={hash:{intlName:"groups.CREATED_YEAR",createdYear:t.createdYear},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):h.call(t,"intlMessage",a)))+" - ",a={hash:{intlName:"groups.UPDATED_TIME_AGO",updatedAgo:t.updatedAgo},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):h.call(t,"intlMessage",a)))+'</span>\n		</div>\n\n		<div class="recent-photos">\n		',u=n["if"].call(t,t.groupPool,{hash:{},inverse:c.program(7,g,i),fn:c.program(1,p,i),data:i});if(u||u===0)s+=u;s+='\n		</div>\n	</section>\n</div>\n\n<div class="links secondary">\n	<a href="'+l((o=(o=t.groupURLS,o==null||o===!1?o:o.photos),typeof o===f?o.apply(t):o))+'">',a={hash:{intlName:"groups.PHOTOS_LINK_LABEL"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):h.call(t,"intlMessage",a)))+'</a>\n	<a href="'+l((o=(o=t.groupURLS,o==null||o===!1?o:o.discussions),typeof o===f?o.apply(t):o))+'">',a={hash:{intlName:"groups.DISCUSSIONS_LINK_LABEL"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):h.call(t,"intlMessage",a)))+"</a>\n	",u=n["if"].call(t,(o=t.group,o==null||o===!1?o:o.isAdmin),{hash:{},inverse:c.program(14,E,i),fn:c.program(12,w,i),data:i});if(u||u===0)s+=u;return s+="\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/group-card",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("group-card-view",function(e){e.namespace("Views")[this.name]=e.Base.create("group-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.groupId=e.groupId,this.groupPathAlias=e.groupPathAlias,this.set("isActiveViewAgnostic",e.isActiveViewAgnostic||!1),this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"join-group-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,shortLabels:!0,theme:"light"}},loadState:function(){var t=this,n=this.groupId;return(new e.FlickrPromise({groupPool:this.appContext.getModel("group-pool-models",n),group:this.appContext.getModel("group-models",n),groupInfo:this.appContext.getModel("group-info-models",n)})).then(function(e){return t.groupModel=e.group,t.groupInfo=e.groupInfo,e.groupPool.getValue("photoPageList").getPage({page:1,perPage:5}).then(function(e){t.groupPhotos=e})},function(e){t.loadingError=!0})},buildContainer:function(){var t,n,r=!1,i;return this.loadingError?n='<span class="error-group">'+this.intlMessage({intlName:"groups.ERROR_LOADING"})+"</span>":(t=this.groupModel.toJSON(),i=this.groupInfo.getValue("throttle"),r=i.mode!=="disabled"&&i.remaining>0||i.mode==="none",r&&(r=t.isMember),n=this.templates("group-card")({group:t,groupPool:this.groupPhotos.map(function(e){return e.toJSON()}),canAddPhotos:r,groupURLS:e.URLHelper.generateGroupUrls(this.groupModel),createdYear:t.dateCreated.year(),updatedAgo:this.intlMessage(e.Handlebars.helpers._friendlySinceDate(t.latestGroupActivity,!0,!0)),"join-group-view":this.subviews["join-group-view"].get("container")})),this.setContainerHTML(n),this},activate:function(){return this.registerEventHandler(this.get("container").delegate("click",function(e){e.preventDefault(),console.log("join group")},".join")),this}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-group-card","group-card-css","url-helper","handlebars-helpers"],langBundles:["groups","relative-dates"]});
YUI.add("hermes-lang-relative-dates",function(e,t){e.Intl.add("hermes/relative-dates","en-US",{SECOND_LONG:["1 second"],SECONDS_LONG:["${time}"," seconds"],MINUTE_LONG:["1 min"],MINUTES_LONG:["${time}"," mins"],HOUR_LONG:["1 hour"],HOURS_LONG:["${time}"," hours"],DAY_LONG:["1 day"],DAYS_LONG:["${time}"," days"],MONTH_LONG:["1 month"],MONTHS_LONG:["${time}"," months"],YEAR_LONG:["1 year"],YEARS_LONG:["${time}"," years"],SECOND_SHORT:["1s"],SECONDS_SHORT:["${time}","s"],MINUTE_SHORT:["1m"],MINUTES_SHORT:["${time}","m"],HOUR_SHORT:["1h"],HOURS_SHORT:["${time}","h"],DAY_SHORT:["1d"],DAYS_SHORT:["${time}","d"],MONTH_SHORT:["1mo"],MONTHS_SHORT:["${time}","mo"],YEAR_SHORT:["1y"],YEARS_SHORT:["${time}","y"],SECOND_LONG_FUTURE:["in 1 second"],SECONDS_LONG_FUTURE:["in ","${time}"," seconds"],MINUTE_LONG_FUTURE:["in 1 min"],MINUTES_LONG_FUTURE:["in ","${time}"," mins"],HOUR_LONG_FUTURE:["in 1 hour"],HOURS_LONG_FUTURE:["in ","${time}"," hours"],DAY_LONG_FUTURE:["in 1 day"],DAYS_LONG_FUTURE:["in ","${time}"," days"],MONTH_LONG_FUTURE:["in 1 month"],MONTHS_LONG_FUTURE:["in ","${time}"," months"],YEAR_LONG_FUTURE:["in 1 year"],YEARS_LONG_FUTURE:["in ","${time}"," years"],FUTURE_SHORT_FUTURE:["in ","${time}"],SECOND_SHORT_FUTURE:["in 1s"],SECONDS_SHORT_FUTURE:["in ","${time}","s"],MINUTE_SHORT_FUTURE:["in 1m"],MINUTES_SHORT_FUTURE:["in ","${time}","m"],HOUR_SHORT_FUTURE:["in 1h"],HOURS_SHORT_FUTURE:["in ","${time}","h"],DAY_SHORT_FUTURE:["in 1d"],DAYS_SHORT_FUTURE:["in ","${time}","d"],MONTH_SHORT_FUTURE:["in 1mo"],MONTHS_SHORT_FUTURE:["in ","${time}","mo"],YEAR_SHORT_FUTURE:["in 1y"],YEARS_SHORT_FUTURE:["in ","${time}","y"],SECOND_LONG_PAST:["1 second ago"],SECONDS_LONG_PAST:["${time}"," seconds ago"],MINUTE_LONG_PAST:["1 min ago"],MINUTES_LONG_PAST:["${time}"," mins ago"],HOUR_LONG_PAST:["1 hour ago"],HOURS_LONG_PAST:["${time}"," hours ago"],DAY_LONG_PAST:["1 day ago"],DAYS_LONG_PAST:["${time}"," days ago"],MONTH_LONG_PAST:["1 month ago"],MONTHS_LONG_PAST:["${time}"," months ago"],YEAR_LONG_PAST:["1 year ago"],YEARS_LONG_PAST:["${time}"," years ago"],SECOND_SHORT_PAST:["1s ago"],SECONDS_SHORT_PAST:["${time}","s ago"],MINUTE_SHORT_PAST:["1m ago"],MINUTES_SHORT_PAST:["${time}","m ago"],HOUR_SHORT_PAST:["1h ago"],HOURS_SHORT_PAST:["${time}","h ago"],DAY_SHORT_PAST:["1d ago"],DAYS_SHORT_PAST:["${time}","d ago"],MONTH_SHORT_PAST:["1mo ago"],MONTHS_SHORT_PAST:["${time}","mo ago"],YEAR_SHORT_PAST:["1y ago"],YEARS_SHORT_PAST:["${time}","y ago"],NO_DATE:["-"]})},"@VERSION@",{requires:["intl"]});
YUI.add("group-menu-view",function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create("group-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.containerSelector=e.containerSelector,this.excludeSelectors=[".large",".no-menu"].concat(e.excludeSelectors||[]),this.groupSelector=".avatar.group",this.dialogCache=[],this.currentDialog,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerHTML(""),this},activate:function(){this.registerEventHandler(e.one(this.containerSelector).delegate("click",this.onClickTarget.bind(this),this.groupSelector,this))},onClickTarget:function(e){var t;this.shouldProcessTarget(e.target)&&(e.preventDefault(),e.halt(),t=e.target,this.createParamsAndManageState(t))},shouldProcessTarget:function(e){return e.ancestor()!==null&&!this.excludeSelectors.some(function(t){return e.ancestor().one(t)||e.ancestor(t)})},createParamsAndManageState:function(e){var t=this.getParams(e);this.createDialog(t,e)},getParams:function(e){var t={appContext:this.appContext,isActiveViewAgnostic:!0};return t.groupId=e.getData("group-nsid"),t.signature=t.groupId,t},createDialog:function(t,n){var r=this,i;this.fire("open"),this.dialogCache.some(function(e){return e.key===t.signature?(i=e.dialog,!0):!1}),i?i.set("anchorElement",n):(i=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,showDropArrow:!0,width:350,height:165,observePageResize:!0,anchorElement:n,subview:new e.Views["group-card-view"](t)}),i.on("clickOverlay",function(e){r.nextElClicked=[e.clientX,e.clientY]}),i.on("closeDroparound",function(){setTimeout(function(){if(r.nextElClicked){var t=document.elementFromPoint(r.nextElClicked[0],r.nextElClicked[1]),n,i;t&&(n=e.one(t),i=r.groupSelector.split(",").some(function(e){return n.hasClass(e.replace(".",""))}),n&&i&&r.shouldProcessTarget(n)&&r.createParamsAndManageState(n)),r.nextElClicked=null}},10)}),this.dialogCache.length>10&&this.dialogCache.shift(),this.dialogCache.push({key:t.signature,dialog:i})),this.currentDialog=i,i.show()},closeDialog:function(){this.currentDialog&&this.currentDialog.close()},destructor:function(){var t=this;this.currentDialog=null,e.Object.each(this.dialogCache,function(e){t.dialogCache[e]&&(t.dialogCache[e].destroy(),t.dialogCache[e]=null)}),this.dialogCache=null}})},"@VERSION@",{requires:["flickr-promise","flickr-view","account-menu-css","flickrui-css","dialog","fluid-droparound-view","group-card-view"],langBundles:["common"]});
YUI.add("science",function(e,t){e.Science=function(t){return e.Promise.resolve(t.getViewer())},e.mix(e.namespace("Science"),{signedIn:function(){return function(e){if(e.signedIn)return e;throw new Error("Viewer is not signed in")}},percentage:function(e){return function(t){var n=parseInt(t.nsid,10)%100;if(n<e)return t;throw new Error("Viewer is not in the percentage")}},load:function(t){return function(n){var r=e.StorageHelper.getItem(t);if(!r||r<Date.now())return n;throw new Error("Experiment has already been run")}},save:function(t,n){return function(){e.StorageHelper.setItem(t,Date.now()+n)}}})},"@VERSION@",{requires:["promise","storage-helper"]});
YUI.add("autosuggest-experiment",function(e,t){function i(e){return function(t){return e.callAPI("flickr.autosuggest.getContextResults",{context_type:"user",context_id:t.nsid})}}var n=864e5,r=100;e[t]=function(s){return e.Science(s).then(e.Science.signedIn()).then(e.Science.percentage(r)).then(e.Science.load(t)).then(i(s)).then(e.Science.save(t,n)).then(function(){e.Flog.debug("[%s]",t,"Experiment run and saved")},function(n){e.Flog.debug("[%s]",t,n.message)})}},"@VERSION@",{requires:["promise","science","flog"]});
YUI.add("hermes-template-fluid-modal",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" html-modal"}function h(e,t){return" subview-modal"}function p(e,t){return'<div class="close-x"></div>'}function d(e,t){var r="",i;r+='\n		<div class="head">\n			',i=n["if"].call(e,e.navBarView,{hash:{},inverse:l.program(10,m,t),fn:l.program(8,v,t),data:t});if(i||i===0)r+=i;return r+='\n			<div class="extra"></div>\n		</div>\n	',r}function v(e,t){return'\n				<div class="nav"></div>\n			'}function m(e,t){var r="",i;r+='\n				<div class="title">\n					',i=n["if"].call(e,e.title,{hash:{},inverse:l.program(13,y,t),fn:l.program(11,g,t),data:t});if(i||i===0)r+=i;return r+="\n				</div>\n			",r}function g(e,t){var r="",i;return r+="\n						",(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n					",r}function y(e,t){var r="",i,s;return r+="\n						",s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlTitle,s):f.call(e,"renderTrustedMarkup",e.htmlTitle,s)))+"\n					",r}function b(e,t){return" lines"}function w(e,t){var r="",i;r+='\n			<div class="content text-only ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='">\n				',(i=n.textMessage)?i=i.call(e,{hash:{},data:t}):(i=e.textMessage,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n			</div>\n		",r}function E(e,t){return" no-scroll"}function S(e,t){return" has-footer"}function x(e,t){var r="",i,s;r+='\n			<div class="content html-only ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='">\n				',s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlMessage,s):f.call(e,"renderTrustedMarkup",e.htmlMessage,s)))+"\n			</div>\n		",r}function T(e,t){var r="",i;r+='\n			<div class="content subview ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='"></div>\n		',r}function N(e,t){var r="",i,s;r+='\n		<div class="foot">\n			',s=n["if"].call(e,(i=e.buttons,i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(27,C,t),data:t});if(s||s===0)r+=s;return r+="\n		</div>\n	",r}function C(e,t){var r="",i,s;r+='\n			<div class="buttons">\n				',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(28,k,t),data:t});if(s||s===0)r+=s;r+="\n				",s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.cancel),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(33,O,t),data:t});if(s||s===0)r+=s;r+="\n				",s=n["if"].call(e,(i=e.buttons,i==null||i===!1?i:i.flavorText),{hash:{},inverse:l.noop,fn:l.program(35,M,t),data:t});if(s||s===0)r+=s;return r+="\n			</div>\n			",r}function k(e,t){var r="",i,s;r+='<button class="mini ',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.isDangerous),{hash:{},inverse:l.noop,fn:l.program(29,L,t),data:t});if(s||s===0)r+=s;r+=' action"',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.disabled),{hash:{},inverse:l.noop,fn:l.program(31,A,t),data:t});if(s||s===0)r+=s;return r+=">"+a((i=(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.label),typeof i===u?i.apply(e):i))+"</button>",r}function L(e,t){return"danger"}function A(e,t){return' disabled="disabled"'}function O(e,t){var n="",r;return n+='<button class="mini alt cancel">'+a((r=(r=(r=e.buttons,r==null||r===!1?r:r.cancel),r==null||r===!1?r:r.label),typeof r===u?r.apply(e):r))+"</button>",n}function M(e,t){var r="",i,s,o;r+='\n				<div class="flavor-text secondary',s=n.unless.call(e,(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(36,_,t),data:t});if(s||s===0)r+=s;return r+='">',o={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.text),o):f.call(e,"renderTrustedMarkup",(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.text),o)))+"</div>\n				",r}function _(e,t){return" hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;s+='<div class="modal',o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.subview,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=" ",(o=n.classList)?o=o.call(t,{hash:{},data:i}):(o=t.classList,o=typeof o===u?o.apply(t):o),s+=a(o)+'">\n	',o=n["if"].call(t,t.showCancelX,{hash:{},inverse:l.noop,fn:l.program(5,p,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,t.showHeader,{hash:{},inverse:l.noop,fn:l.program(7,d,i),data:i});if(o||o===0)s+=o;s+='\n	<div class="body',o=n["if"].call(t,t.showBodyLines,{hash:{},inverse:l.noop,fn:l.program(15,b,i),data:i});if(o||o===0)s+=o;s+='">\n		',o=n["if"].call(t,t.textMessage,{hash:{},inverse:l.noop,fn:l.program(17,w,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:l.noop,fn:l.program(22,x,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.subview,{hash:{},inverse:l.noop,fn:l.program(24,T,i),data:i});if(o||o===0)s+=o;s+="\n	</div>\n	",o=n["if"].call(t,t.showFooter,{hash:{},inverse:l.noop,fn:l.program(26,N,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials
):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-modal-view",function(e,t){"use strict";var n,r;n={css:{destinationContainer:"body",closeX:".close-x",buttonCancel:"button.cancel",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content"},options:{}},r={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").FluidModal=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.set("isActiveViewAgnostic",!0);var t=this.get("modalOverlayType");return this.alreadyShowingModal=t.alreadyShowingModal(),this.alreadyShowingModal||t.add(this),this},activate:function(){var t=this.get("container"),r=this;return this.get("showCancelX")&&this.registerEventHandler(t.one(n.css.closeX).on("click",e.bind(this.handleCancel,this))),this.get("showFooter")&&this.get("showCancelButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(n.css.buttonCancel).on("click",e.bind(this.handleCancel,this))),this.get("showFooter")&&this.get("showActionButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(n.css.buttonAction).on("click",e.bind(this.handleAction,this))),this.registerEventHandler(this.appContext.flapp.on("activeViewChange",function(e){r.close(e)})),this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){r.reposition()})),this.get("navBarView")&&r.get("navBarView").activate(),this.get("subview")&&(r.get("subview").activate(),r.registerEventHandler(r.get("subview").on("actionClick",e.bind(r.handleAction,r)))),this.fire("activated"),this},show:function(){return this.initialize().then(null,function(t){e.Flog.error("[fluid-modal-view] Error initializing modal: ",t)}),this.isClosed=!1,this.freeze(),e.fire("flickr:setKeyEventScope",this.getKeyEventScope()),this},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})},enableActionButton:function(){var e=this.get("container").one("button.action");e&&e.getAttribute("disabled")&&e.removeAttribute("disabled")},disableActionButton:function(){var e=this.get("container").one("button.action");e&&e.setAttribute("disabled",!0)},showFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.removeClass("hidden")},hideFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.addClass("hidden")},buildContainer:function(){if(!this.alreadyShowingModal){var t=this,i=e.one(n.css.destinationContainer),s;s={showCancelX:this.get("showCancelX"),title:this.get("title"),htmlTitle:this.get("htmlTitle"),navBarView:!!this.get("navBarView"),noScroll:this.get("noScroll"),textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),showBodyLines:this.get("showBodyLines"),hideModalOverlay:this.get("hideModalOverlay"),darkOverlay:this.get("darkOverlay"),showHeader:this.get("showHeader"),showFooter:this.get("showFooter"),buttons:{visible:this.get("showButtons"),action:{visible:this.get("showActionButton"),label:this.get("actionButtonLabel"),disabled:this.get("actionButtonDisabled"),isDangerous:this.get("actionButtonIsDangerous")},cancel:{visible:this.get("showCancelButton"),label:this.get("cancelButtonLabel")}},classList:this.get("classList")},this.get("buttonFlavorText")&&(s.buttons.flavorText={visible:this.get("showButtonFlavorText"),text:this.get("buttonFlavorText")}),this.setContainerHTML(this.templates("fluid-modal")(s)),r.modal.width=this.get("width"),r.modal.minWidth=this.get("minWidth"),r.modal.height=this.get("height"),this.get("navBarView")&&(this.get("navBarView").appContext=t.appContext,this.get("navBarView").initialize().then(function(e){e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("subview")&&e.details[0]==="navigation"?t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)):t.get("subview")&&e.details[0]==="search"&&t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(n.css.navBarContent).appendChild(e.get("container")),t.get("subview")||t.activate()})),this.get("subview")?(this.get("subview").appContext=t.appContext,this.get("subview").set("isActiveViewAgnostic",!0),this.get("subview").initialize().then(function(e){t.on("parentViewEvent",function(t){t&&t.details&&t.details.length&&e.fire.apply(e,["parentViewEvent"].concat(t.details))}),e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("navBarView")&&e.details[0]==="backToList"&&t.get("navBarView").fire.apply(t.get("navBarView"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(n.css.subviewContent).appendChild(e.get("container")),i&&(i.append(t.get("container")),t.reposition()),t.activate()},function(t){e.Flog.error("[fluid-modal-view] Error initializing modal subview: ",t)})):i&&(i.append(this.get("container")),this.reposition())}return this},reposition:function(){var t=this.get("container"),i=t.one(this.get("modalSelector")),s=e.one(e.config.win),o=parseInt(s.get("innerWidth"),10),u=parseInt(s.get("innerHeight"),10),a=r.modal.width?parseInt(r.modal.width,10):parseInt(i.getComputedStyle("width"),10),f,l=20,c={},h,p,d=i.one(".body"),v=0,m=this.get("showFooter")?parseInt(i.one(".foot").getComputedStyle("height"),10):0,g=0,y=parseInt(d.getComputedStyle("borderTopWidth"),10)+parseInt(d.getComputedStyle("borderBottomWidth"),10),b={};r.modal.height&&(v=parseInt(i.one(".head").getComputedStyle("height"),10),g=r.modal.height,i.get("showFooter")&&(m=parseInt(i.one(".foot").getComputedStyle("height"),10)),r.modal.height+v+m+4*l+y>=u&&(u<=700?g=u-v-m-y:g=u-v-m-4*l-y),i.setStyles({maxHeight:"none"}),this.get("fullWindow")?b.height=g+"px":this.get("maxHeight")&&(b.maxHeight=g+"px"),i.one(n.css.modalContent).setStyles(b)),f=parseInt(i.getComputedStyle("height"),10),h=i.getDOMNode().scrollHeight,p=i.getDOMNode
().scrollWidth,c={top:"50%",left:"50%",width:r.modal.width?a+"px":"",marginTop:-(f/2)+"px",marginLeft:-(a/2)+"px",minWidth:r.modal.minWidth?r.modal.minWidth+"px":""},f+2*l>u||h>f+1||a+2*l>o||p>a?(u<=700&&r.modal.height?c.maxHeight=u-10+"px":(c.maxHeight=u-2*l+"px",c.overflow="auto"),c.maxWidth=o-2*l+"px",c.marginTop=-(parseInt(c.maxHeight,10)/2)+"px",c.marginLeft=-(parseInt(c.maxWidth,10)/2)+"px"):(c.maxHeight="inherit",c.maxWidth="inherit",c.overflow="visible"),i.setStyles(c)},handleCancel:function(n){var r=this.get("subview");e.rapidTracker.beacon(t,"modalCancelClick"),r&&r.handleCancel&&r.handleCancel(),this.fire("cancelClick",n),this.close(n)},handleAction:function(e){var t=this.get("subview");this.fire("actionClick",e),t&&t.handleAction&&t.handleAction(),this.get("dismissOnActionClick")&&this.close(e)},close:function(t){e.fire("flickr:removeKeyEventScope",this.getKeyEventScope());var n=this.get("container");this.isClosed=!0,e.one("body").removeClass("scroll-fluid-modal"),this.get("subview")&&this.get("subview").destroy(),this.get("navBarView")&&this.get("navBarView").destroy(),n&&n.remove(!0),this.fire("close",t),this.destroy(),this.get("modalOverlayType").remove(this)},getKeyEventScope:function(){return this.name+this._yuid},destructor:function(){this.unfreeze(),this.detachAll()}},{ATTRS:{showCancelX:{value:!0},showCancelButton:{value:!0},showBodyLines:{value:!1},showActionButton:{value:!0},hideModalOverlay:{value:!1},darkOverlay:{value:!1},actionButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.OK"})}},actionButtonIsDangerous:{value:!1},cancelButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.CANCEL"})}},actionButtonDisabled:{value:!1},showButtons:{value:!0},dismissOnOverlayClick:{value:!1},dismissOnActionClick:{value:!0},title:{value:""},htmlTitle:{value:""},navBarView:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},width:{value:0},minWidth:{value:0},height:{value:0},fullWindow:{value:!1},subview:{value:null},classList:{value:""},buttonFlavorText:{value:""},showButtonFlavorText:{value:!0},showHeader:{value:!0},showFooter:{value:!0},noScroll:{value:!1},maxHeight:{value:!0},modalSelector:{value:".modal"},modalOverlayType:{value:e.OverlayManager.ModalOverlay}}})},"@VERSION@",{requires:["flickr-view","fluid-css","hermes-template-fluid-modal","fluid-overlay-manager-view","flog"],optionalRequires:["fluid"],langBundles:["common"]});
