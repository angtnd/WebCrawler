var MG_Modal=(function(){var g,b;function e(){var j={autoOpen:false,className:"generalMTubes",closeButton:true,closeDocument:true,closeKey:false,content:"",maxWidth:"",minWidth:"",overlay:true,position:"",pageScrolling:false,timeMs:null};this.closeButton=null;this.container=null;this.modal=null;this.options=MG_Utils.extendDefaults(j,arguments[0]);if(this.options.autoOpen){this.openModal()}}e.prototype={constructor:e,closeModal:function(k){g=0;MG_Utils.removeClass(document.body,"isOpenMTubes");if(this.container.parentNode){this.container.parentNode.removeChild(this.container)}if(this.options.timeMs){clearTimeout(b)}if(this.options.pageScrolling){var j=document.body;MG_Utils.removeClass(j,"scrollMTubes");j.style.height=""}if(k&&typeof k=="function"){k(this.container,this.modal)}},openModal:function(k){if(!g){f.call(this);d.call(this);MG_Utils.addClass(document.body,"isOpenMTubes");MG_Utils.addClassMultiple([this.modal,this.container],"elOpenMTubes");if(this.options.timeMs){var j=this;b=setTimeout(function(){j.closeModal()},this.options.timeMs)}if(k&&typeof k=="function"){k(this.container,this.modal)}}g=1}};function f(){var k,l,j=document.createDocumentFragment();if(typeof this.options.content==="string"){k=this.options.content}else{k=this.options.content.innerHTML.replace(/MHP1138-/gi,"")}a.call(this);c.call(this);h.call(this);i.call(this,k,j);document.body.appendChild(j)}function a(){this.container=document.createElement("div");this.container.id="modalWrapMTubes";this.container.className=(!MG_Utils.isRbga()?"noRbga ":"")+"fadeInMTubes containerMTubes "+this.options.className;return this.container}function c(){this.modal=document.createElement("div");this.modal.className="modalMTubes "+this.options.className;this.modal.style.minWidth=this.options.minWidth;this.modal.style.maxWidth=this.options.maxWidth;return this.modal}function i(k,j){contentHolder=document.createElement("div");contentHolder.className="contentMTubes";contentHolder.innerHTML=k;this.modal.appendChild(contentHolder);this.container.appendChild(this.modal);j.appendChild(this.container);return j}function d(){var l=this;if(this.closeButton){var j=function(){l.closeModal();MG_Utils.removeEventHandler(l.closeButton,"click",j)};MG_Utils.addEventHandler(l.closeButton,"click",j)}if(this.container&&this.options.closeDocument){var m=function(n){if((n.target&&n.target.id||n.srcElement.id)==="modalWrapMTubes"){l.closeModal();MG_Utils.removeEventHandler(l.container,"click",m)}};MG_Utils.addEventHandler(l.container,"click",m)}if(this.container&&this.options.closeKey){var k=function(o){var n=o.keyCode?o.keyCode:o.charCode;if(o.keyCode==27){l.closeModal();MG_Utils.removeEventHandler(document,"keyup",k)}};MG_Utils.addEventHandler(document,"keyup",k)}}function h(){if(this.options.closeButton){this.closeButton=document.createElement("button");this.closeButton.className="closeMTubes buttonMTubes";this.modal.appendChild(this.closeButton)}if(this.options.overlay){MG_Utils.addClass(this.container,"isVisibleMTubes")}if(this.options.pageScrolling){var j=document.body;MG_Utils.addClassMultiple([this.container,j],"scrollMTubes");j.style.height=MG_Utils.docHeight()+"px"}if(this.options.position){this.modal.style.marginTop=this.options.position}}return{modal:e}})();