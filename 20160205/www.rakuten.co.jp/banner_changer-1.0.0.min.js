/*
 banner_changer-1.0.0.js
 Copyright (c) 2016 Rakuten.Inc
 Date : 2016-02-03 19:24:37
*/
(function(g){if("function"===typeof g){var d={noopF:function(){return!1},getSeconds:function(){return(new Date).getTime()/1E3|0}};d.Storage=function(b){this.isAvailable=function(){if(!window.JSON||!window.JSON.stringify)return!1;try{return window.localStorage.setItem("__testKey__","1"),window.localStorage.removeItem("__testKey__"),!0}catch(b){return!1}};this.set=function(c,a,e){a={d:a};if(0<=e)a.t=d.getSeconds()+e;try{window.localStorage.setItem(b+":"+c,window.JSON.stringify(a))}catch(g){return!1}return!0};
this.get=function(c){var a=window.localStorage.getItem(b+":"+c);if(a)if(a=window.JSON.parse(a),a.t&&a.t<d.getSeconds())this.remove(c);else return a.d};this.remove=function(c){c=b+":"+c;window.localStorage.removeItem(c)};(function(){if(!this.isAvailable())this.set=d.noopF,this.get=g.noop,this.clear=this.remove=d.noopF}).apply(this,arguments)};var i=new d.Storage("bannerChanger"),h=g("#bannerChangerConfig"),k=+h.attr("data-cache-period")||15552E3,j=h.attr("data-target-class")||"bannerChangerTarget",
l=h.attr("data-tgif-url")||"http://yesno.event.rakuten.co.jp/t.gif";g("."+j).each(function(){var b=g(this),c=+b.attr("data-banner-type"),a,e=b.attr("id")+"/"+b.attr("data-round"),d=+b.attr("data-max-times");a=+i.get(e)||0;var f="after";d>a&&(f="before",i.set(e,a+1,k));a=f;d=b.attr("data-image-"+a);f=b.attr("data-tgif-"+a);e=b.attr("data-width-"+a);a=b.attr("data-height-"+a);f=g("<img>").attr("src",l+(f?"?"+f:""));1===c?(b.css("background-image","url("+d+")"),e&&f.attr("width",e),a&&f.attr("height",
a),b.find("a").append(f)):2===c&&(c=g("<img>").attr("src",d),e&&c.attr("width",e),a&&c.attr("height",a),b.append(f.css("display","none")).find("a").append(c));b.removeClass(j)})}})(window.jQuery);
