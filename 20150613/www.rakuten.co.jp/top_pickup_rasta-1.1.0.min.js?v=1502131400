/*
 margin_adjuster-1.1.0.js
 Copyright (c) 2015 Rakuten.Inc
 Date : 2015-02-12 17:42:39
*/
(function(){if(void 0!==window.jQuery){var b=jQuery.noConflict(),e=function(a,b){this.$root=a;this.$items=b;this.$hiddenBox=this.$tr1=this.$tr0=this.$table=this.$frame=void 0;this.frameSelector=this.$root.attr("data-frameSelector")||this.defaults.selectors.frame;this.tableSelector=this.$root.attr("data-tableSelector")||this.defaults.selectors.table;this.hiddenBoxSelector=this.$root.attr("data-hiddenBoxSelector")||this.defaults.selectors.hiddenBox;this.rastaDisplaySelector=this.$root.attr("data-rastaDisplaySelector")||
this.defaults.selectors.rastaDisplay;this.itemWidth=+this.$root.attr("data-itemWidth")||this.defaults.itemWidth;this.minMargin=+this.$root.attr("data-minMargin")||this.defaults.minMargin;this.maxOneRowItems=+this.$root.attr("data-maxOneRowItems")||this.defaults.maxOneRowItems;this.itemsPerTr=this.frameWidth=0;this.getElements()};e.prototype={defaults:{selectors:{rastaDisplay:".rad-table-existItemDisplay",table:"#topPickUpRASTATable",frame:".ritAdColumn",hiddenBox:".topPickUpRASTAHiddenBox"},itemWidth:95,
minMargin:5,maxOneRowItems:6},getElements:function(){this.$frame=this.$root.find(this.frameSelector);this.$table=this.$root.find(this.tableSelector);this.$tr0=this.$table.find("tr").eq(0);this.$tr1=this.$table.find("tr").eq(1);this.$hiddenBox=this.$root.find(this.hiddenBoxSelector);this.$root.find(this.rastaDisplaySelector).remove();this.$root.show();this.handleWindowResize()},handleWindowResize:function(){var a=this;a.frameWidth=a.$frame.width();a.updateTable(a.frameWidth,a.itemWidth,a.minMargin);
b(window).bind("resize",function(){a.frameWidth=a.$frame.width();a.updateTable(a.frameWidth,a.itemWidth,a.minMargin)})},updateTable:function(a,b,c){var d=this.itemsPerTr;this.itemsPerTr=(a-c)/(b+c)|0;this.itemsPerTr=this.itemsPerTr>this.$items.length?this.$items.length:this.itemsPerTr;if(0===d||d!==this.itemsPerTr)this.$tr0.append(this.$items.slice(0,this.itemsPerTr)),this.$tr1.append(this.$items.slice(this.itemsPerTr,2*this.itemsPerTr)),this.$hiddenBox.append(this.$items.slice(2*this.itemsPerTr)),
this.itemsPerTr>=this.maxOneRowItems?this.$tr1.hide():this.$tr1.show()}};var c=b("#RJSTopPickUpRASTA"),h=c.attr("data-eventName"),i=h.split(" "),j=c.attr("data-rastaItems").split(","),f=b(),g=b(),d=0,k;c.bind(h,function(a){0===d&&(k=setTimeout(function(){var a=b.merge(f,g);new e(c,a)},1E3));a.type===i[0]?(d++,f=b(j[0])):a.type===i[1]&&(d++,g=b(j[1]));2===d&&(clearTimeout(k),a=b.merge(f,g),new e(c,a))})}})();
