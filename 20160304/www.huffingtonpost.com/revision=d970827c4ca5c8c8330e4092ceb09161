!function(e,t){window._piximediaBrowserDetect=function(){"use strict;";function i(e){var i=t.createElement("a");return i.href=e,i}function n(){try{return""===top.document.referrer?!0:i(top.document.referrer).hostname==top.window.location.hostname?!1:!0}catch(n){}try{return""===t.referrer?!0:i(t.referrer).hostname==e.location.hostname?!1:!0}catch(n){return!1}}function o(){var t="",i="";return e.screen&&e.screen.width&&e.screen.height&&(t=e.screen.width,i=e.screen.height),{width:t,height:i,resolution:parseInt(t,10)&&parseInt(i,10)?t+"x"+i:"n/a"}}function a(){try{var e,t,i=parent.window?parent.window:window;return"undefined"!=typeof i.innerWidth?(e=i.innerWidth,t=i.innerHeight):"undefined"!=typeof i.document.documentElement&&"undefined"!=typeof i.document.documentElement.clientWidth&&0!==i.document.documentElement.clientWidth?(e=i.document.documentElement.clientWidth,t=i.document.documentElement.clientHeight):(e=i.document.getElementsByTagName("body")[0].clientWidth,t=i.document.getElementsByTagName("body")[0].clientHeight),{width:e,height:t}}catch(n){return{width:"",height:""}}}function r(){var e="unknown";return-1!=navigator.appVersion.indexOf("Win")?e="windows":-1!=navigator.appVersion.indexOf("Mac")?e="mac_os":-1!=navigator.appVersion.indexOf("X11")?e="unix":-1!=navigator.appVersion.indexOf("Linux")&&(e="linux"),{name:e}}function s(){var e,t,i,n=navigator.userAgent,o=navigator.appName,a=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return-1!=(t=n.indexOf("Opera"))?(o="opera",a=n.substring(t+6),-1!=(t=n.indexOf("Version"))&&(a=n.substring(t+8))):-1!=(t=n.indexOf("MSIE"))?(o="msie",a=n.substring(t+5)):-1!=(t=n.indexOf("Edge"))?(o="edge",a=n.substring(t+5)):-1!=(t=n.indexOf("Trident"))?(o="trident",a=n.substring(t+8)):-1!=(t=n.indexOf("Chrome"))?(o="chrome",a=n.substring(t+7)):-1!=(t=n.indexOf("Safari"))?(o="safari",a=n.substring(t+7),-1!=(t=n.indexOf("Version"))&&(a=n.substring(t+8))):-1!=(t=n.indexOf("Firefox"))?(o="firefox",a=n.substring(t+8)):(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(o=n.substring(e,t),a=n.substring(t+1),o.toLowerCase()==o.toUpperCase()&&(o=navigator.appName)),-1!=(i=a.indexOf(";"))&&(a=a.substring(0,i)),-1!=(i=a.indexOf(" "))&&(a=a.substring(0,i)),r=parseInt(""+a,10),isNaN(r)&&(a=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),r>100&&(r=""),o.indexOf("/")>=0&&(o=o.split("/")[0]),{name:o,full_version:a,major_version:r}}function l(){var e=new Date;return{hour:e.getHours(),week_day:e.getDay()}}function c(){var t=e.name,i=/^pm\-(\S*)\-(\S*)\-(\d*)\-(\d*)\-(\S*)\-(\d*)$/,n=[];return t&&""!==t&&i.exec(t)?(n=i.exec(t),{site_id:n[1]&&""!==n[1]?n[1]:"",placement_id:n[2]&&""!==n[2]?n[2]:"",ad_id:n[3]&&""!==n[3]?n[3]:"",creative_id:n[4]&&""!==n[4]?n[4]:"",options:n[5]&&""!==n[5]?n[5]:"",sequence_number:n[6]&&""!==n[6]?n[6]:""}):{site_id:"",placement_id:"",ad_id:"",creative_id:"",options:"",sequence_number:""}}function d(){return{adr:function(){return void 0}()||""}}function p(){try{return window.top._piximediaiframetest=!0,window&&window.parent&&window.hasOwnProperty&&!window.parent.hasOwnProperty?!0:!1}catch(e){return!0}}function u(){var e,t;try{e=top.location.hostname,t=top.location.pathname}catch(i){}if(!e)try{e=parent.parent.parent.location.hostname,t=parent.parent.parent.location.pathname}catch(i){}if(!e)try{e=parent.parent.location.hostname,t=parent.parent.location.pathname}catch(i){}if(!e)try{e=parent.location.hostname,t=parent.location.pathname}catch(i){}if(!e)try{e=window.location.hostname,t=window.location.pathname}catch(i){}return{crossdomain:p()?1:0,hostname:e,path:(t||"").substring(0,128),section:(((t||"").match(/^\/([a-z0-9]+)/)||[])[1]||"").substring(0,32),firstpage:n()?1:0}}function m(e){var t,i,n={};if(e){for(t in e)if(e.hasOwnProperty(t)&&v[t])if("all"===e[t])for(i in v[t])v[t].hasOwnProperty(i)&&(n[t+"_"+i]=v[t][i]);else for(i in e[t])e[t].hasOwnProperty(i)&&v[t][i]&&(n[t+"_"+i]=v[t][i])}else for(t in v)if(v.hasOwnProperty(t))for(i in v[t])v[t].hasOwnProperty(i)&&(n[t+"_"+i]=v[t][i]);return n}var h={flash_major:"F",flash_minor:"f",flash_release:"r",viewport_width:"w",viewport_height:"h",screen_width:"W",screen_height:"H",screen_resolution:"R",os_name:"O",browser_name:"b",browser_full_version:"U",browser_major_version:"u",external_site_id:"s",external_placement_id:"p",external_ad_id:"a",external_creative_id:"c",external_options:"o",external_sequence_number:"n",time_hour:"T",time_week_day:"y",location_crossdomain:"X",location_hostname:"N",location_section:"S",location_path:"P",location_firstpage:"i",alliance_adr:"A",alliance_rtapos:"x"},f=function(){var e="undefined",t="object",i="Shockwave Flash",n="ShockwaveFlash.ShockwaveFlash",o="application/x-shockwave-flash",a=window,r=document,s=navigator,l=!1,c=function(){var c=typeof r.getElementById!=e&&typeof r.getElementsByTagName!=e&&typeof r.createElement!=e,d=s.userAgent.toLowerCase(),p=s.platform.toLowerCase(),u=p?/win/.test(p):/win/.test(d),m=p?/mac/.test(p):/mac/.test(d),h=/webkit/.test(d)?parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,f=!function(){return 1}(),v=[0,0,0],g=null;if(typeof s.plugins!=e&&typeof s.plugins[i]==t)g=s.plugins[i].description,!g||typeof s.mimeTypes!=e&&s.mimeTypes[o]&&!s.mimeTypes[o].enabledPlugin||(l=!0,f=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),v[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),v[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),v[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof a.ActiveXObject!=e)try{var y=new a.ActiveXObject(n);y&&(g=y.GetVariable("$version"),g&&(f=!0,g=g.split(" ")[1].split(","),v=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:c,pv:v,wk:h,ie:f,win:u,mac:m}}();return{getFlashPlayerVersion:function(){return{major:c.pv[0],minor:c.pv[1],release:c.pv[2]}}}}(),v={};v.flash=f.getFlashPlayerVersion(),v.viewport=a(),v.screen=o(),v.os=r(),v.browser=s(),v.external=c(),v.time=l(),v.location=u(),v.alliance=d();var g="";return{getData:function(){var e=arguments[0]||!1;return m(e)},setId:function(e){g=e},toString:function(e,t){e=e||!1;var i,n=t?t:this.getData(e),o="";for(i in n)n.hasOwnProperty(i)&&(o+=(h[i]?h[i]:i)+"="+n[i].toString().replace(/\||%7c/gi,"-")+";");return o+=g+";"}}}()}(window,document),function(){"use strict";function e(){try{var e=window.piximedia&&window.piximedia.pam?window.piximedia.pam:{},t=(e.globalOptions||{}).pageLoadStart||new Date(0),i=((new Date-t)/1e3).toString();return i.match(/\..$/)&&(i+="00"),i.match(/\...$/)&&(i+="0"),"[pam]["+i+"] "}catch(n){return"[pam] "}}function t(i,n){t.trail=t.trail||[],t.trail.push("["+i+"] "+e()+Array.prototype.slice.call(n).join(", "))}function i(){if(t("debug",arguments),R){var i=Array.prototype.slice.call(arguments);i[0]&&(i[0]=e()+i[0]),C.console&&C.console.debug&&(C.console.debug.apply?C.console.debug.apply(C.console,i):C.console.debug(i[0]))}}function n(){if(t("warn",arguments),R){var i=Array.prototype.slice.call(arguments);i[0]&&(i[0]=e()+i[0]),C.console&&C.console.warn&&(C.console.warn.apply?C.console.warn.apply(C.console,i):C.console.warn(i[0]))}}function o(){if(t("error",arguments),R){var i=Array.prototype.slice.call(arguments);i[0]&&(i[0]=e()+i[0]),C.console&&C.console.error&&(C.console.error.apply?C.console.error.apply(C.console,i):C.console.error(i[0]))}}function a(){if(t("log",arguments),R){var i=Array.prototype.slice.call(arguments);i[0]&&(i[0]=e()+i[0]),C.console&&C.console.log&&(C.console.log.apply?C.console.log.apply(C.console,i):C.console.log(i[0]))}}function r(e){return"document.write('"+e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"');"}function s(e){for(var t=e.replace(/\\r/g,"\n").split("\n"),i="",n=0;n<t.length;n++){var o=t[n];o&&(i+="document.write('"+o.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"');")}return i}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e,t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}function d(e,t,i){for(var n=[],o=0;o<e.length;o++){var a,r=e[o];a="function"==typeof t?t(r):i?r[t]===i:r===t,a||n.push(r)}return n}function p(e){var t=new Image;C._piximedia.images.push(t),t.src=e}function u(e){var t=(e||"").split("."),i=t.shift();return t.sort(function(e,t){var i=e.match(/^[0-9]+$/),n=t.match(/^[0-9]+$/);if(i&&n){var o=parseInt(e,10),a=parseInt(t,10);return a>o?-1:o>a?1:0}return n&&!i?-1:i&&!n?1:t>e?-1:e>t?1:0}),i+(t.length?"."+t.join("."):"")}function m(e){var t=e.match(/^ *([a-zA-Z0-9_.-]+) *=>/);return t?t[1]:e}function h(e){return e.toString().match(/^[0-9]+%$/)?parseInt(e,10)+"pct":parseInt(e,10)}function f(e){if(Object.keys)return Object.keys(e);var t=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=n.length;if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var a,r,s=[];for(a in e)t.call(e,a)&&s.push(a);if(i)for(r=0;o>r;r++)t.call(e,n[r])&&s.push(n[r]);return s}function v(e){switch(e.nodeType){case Node.DOCUMENT_NODE:return v(e.documentElement||e.children[0]);case Node.ELEMENT_NODE:var t={name:e.nodeName,children:[]},i=e.attributes;for(var n in i)if(i.hasOwnProperty(n)){var o=i[n];t[o.nodeName]=o.nodeValue}for(var a={},r=0;r<e.childNodes.length;r++){var s=v(e.childNodes[r]);"object"==typeof s&&(a[s.name]=!0,t[s.name]=t[s.name]||[],t[s.name].push(s)),t.children.push(s)}1===t.children.length&&(t.value=t.children[0]);for(var l in a)a.hasOwnProperty(l)&&1===t[l].length&&(t[l+"_value"]=t[l][0]);return t;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:return e.textContent}}function g(e){e.style.margin=0,e.style.padding=0,e.style.border=0,e.style.position="relative",e.style.overflow="visible",e.style.cursor="default",e.style.lineHeight="normal",e.style.wordSpacing="normal",e.style.fontSize="11px",e.style.fontStyle="normal",e.style.letterSpacing="0px",e.style.WebkitFontSmoothing="antialiased",e.style.MozOsxFontSmoothing="grayscale",e.style.fontFamily="Arial, Helvetica, sans-serif",e.style.left=e.style.right=0,e.style.textAlign="left",e.style.display="block",e.style.clear="both",e.style.maxWidth="none"}function y(e,t){this.events={},this.id=t,this.target=e||this}function b(e,t){var i=this;this.pam=e;for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);e&&e.eventEmitterForObject&&(e.eventEmitterForObject(this,this.uniqid),i.pam.master&&(e.on("something-has-been-seen",function(){i.somethingHasBeenSeen()}),i.on("send-cpmview-click",function(){i.sendCpmviewClick()}),i.on("load-event-once",function(e,t,n){i.loadEventOnce(e,t,n)})))}function w(e,t,i){b.call(this,e,i),this.position=t}function x(e,t){for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i]);this.cgAd=e,this.cgOptions=t,this.cgOptions.id_reporting&&(this.creativeId=this.cgOptions.id_reporting),this.cgOptions.args&&(this.args=this.cgOptions.args)}function k(e,t,n){var a=this;this.pam=e,this.options=n||{},this.position=t,this.active=!0,t.iframes=t.iframes||[],t.iframes.push(this),this.pam.eventEmitterForObject(this,"iframe:"+t.positionId),a.pam.master&&(this.on("host-room",function(e,t){a.hostRoom(e,t)}),this.on("enable-responsive-events",function(){a.enableResponsiveEvents()}),this.on("remove",function(){a.pam.emit("iframe:remove",t.positionId),t.decoratedBy&&t.decoratedBy.emit("iframe:remove",t.positionId)})),this.trackVisibility=this.pam.master&&t.decoratedBy?t.decoratedBy.getAllVisibilityForPixiPositionId(t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId)):[],this.trackingVisibility=!1,this.on("error",function(e){a.lastError=e}),this.options.doNotResize||this.on("resize",function(n){if(a.active){var r=function(){if(!a.iframe)return setTimeout(r,50);if(a.pam.master)if(n.onlyIfNoSurface&&(parseInt(a.iframe.style.width,10)||0)>1&&(parseInt(a.iframe.style.height,10)||0)>1)i("Not resizing iframe because it already has a surface");else if(setTimeout(function(){e.emit("position-has-been-decorated",t.positionId),e.tryAndActivateAds()},0),n.animation)a.pam.loadLibrary("sweetlib.js",function(){C.piximedia.SweetLib.animate(a.iframe,n.animation).play()}),a.pam.debug("** Resizing iframe for PAM "+a.pam.siteId+"/"+a.pam.placementId+":"+a.pam.mode+" to animation="+JSON.stringify(n.animation),a.iframe);else{var s,l,c,d,p,u,m,f,v=n.css||{},y=v.position,b=!1;if(a.position.positionId.match(/^room\./))for(var w=a.iframe.parentNode;w&&void 0!==w.className;w=w.parentNode)if(w.className.match(/pmRoom|pmBodyPosition/)){s=w;break}for(var x=a.iframe.parentNode;x&&void 0!==x.className;x=x.parentNode)if(x.className.match(/pmContainer/)){l=x;break}l&&l.parentNode&&l.parentNode.parentNode&&l.parentNode.parentNode.className.match(/pmMarkerContainer/)&&(c=l.parentNode.parentNode),l&&l.parentNode&&l.parentNode&&l.parentNode.className.match(/pmMarkerContainer/)&&(c=l.parentNode),l&&l.parentNode&&l.parentNode&&l.parentNode.className.match(/pmFillerRoomContainer/)&&(d=l.parentNode),n.width&&(n.width.toString().match(/^.*%$/)?(m=n.width,p=1):p=parseInt(n.width,10)),n.height&&(n.height.toString().match(/^.*%$/)?(f=n.height,b=!0,u=1):u=parseInt(n.height,10)),p&&d&&d.parentNode&&(d.parentNode.style.width=m||p+"px"),(p||u)&&l&&(n.resizeParent||l.className.match(/pmZeroSurface/))&&(l.className=l.className.replace(/pmZeroSurface/,""),l.style.position="relative"),v.hasOwnProperty("display")&&(""===v.display||"none"===v.display||"block"===v.display)&&l&&(l.style.display=v.display),function(e){return n.wallpaper?(n.container=n.container||{},n.container.css=n.container.css||{},n.container.css.position=n.container.css.position||"relative",n.container.css.overflow=n.container.css.overflow||"hidden",n.container.css.left=n.container.css.left||"50%",n.container.css.right=n.container.css.right||"",n.container.css.marginLeft=n.container.css.marginLeft||-p/2+"px",n.container.css.maxWidth=n.container.css.maxWidth||p+"px",a.pam.loadLibrary("sweetlib.js",function(){var i=C.piximedia.SweetLib,r=function(e){for(e=e.parentNode;e;e=e.nextSibling)if(e.children&&e.children.length&&!(e.id||"").match(/^(pm|pixi)/)){for(var t,n=0;n<e.children.length;n++){var a=e.children[n];if(a&&!(a.id||"").match(/^(pm|pixi)/)&&!(a.className||"").match(/pm|pixi/)){t=!0;break}}if(!t)continue;var r=i.gbcr(e);if(r.width&&r.height)return e}o("Couldn't find page container after marker")};a.pam.loadMarkerForPosition(t,function(o){var s,l=r(o);return i.fixPageContainerForWallpaper(l),void 0!==n.moveTop&&(s=i.moveTopOfPageContainer(l,n.moveTop,n.moveTopOptions),a.pageContainer=l,a.moveTop=n.moveTop),n.bodyBackgroundColor&&i.setBodyBackgroundColor({color:n.bodyBackgroundColor}),s&&!s.pmHostedRoom&&(s.pmHostedRoom=!0,a.pam.hostRoom("pcfiller",{masterPositionId:t.positionId},function(){var e=s.ownerDocument.createElement("div");return e.className="pmFillerRoomContainer",g(e),s.style.marginLeft="auto",s.style.marginRight="auto",s.appendChild(e),e})),e()})}),void 0):e()}(function(){if(p){var e,o=(m||"").match(/^([0-9]+)%$/);o&&(e=parseFloat(o[1],10)),"absolute"!==y||n.takeover||(a.iframe.parentNode.style.width=m||p+"px"),i("Resizing iframe to width="+(m||p),a.iframe),a.iframe.style.width=m||p+"px",a.iframe.style.maxWidth="none",l&&(t.decoratedBy&&t.decoratedBy.shouldBeBeforeBody&&t.decoratedBy.shouldBeBeforeBody(t)?(e?l.style.left=(100-e)/2+"%":(l.style.left="50%",l.style.marginLeft=-parseFloat(a.iframe.style.width,10)/2+"px"),l.style.marginRight=""):(parseInt(l.style.width||0,10)<=1||n.wallpaper)&&(l.style.width=m||p+"px",l.style.marginLeft=l.style.marginRight="auto")),s&&(s.style.width=m||p+"px",s.className.match(/pmCentered/)&&(s.style.marginLeft=Math.round(-p/2)+"px"))}u&&("absolute"!==y||n.takeover||(a.iframe.parentNode.style.height=f||u+"px"),i("Resizing iframe to height="+(f||u),a.iframe),a.iframe.style.height=s&&b?"100%":f||u+"px",s&&!n.takeover&&(s.style.height=f||u+"px"),s&&b&&(s.style.height=f||u+"px",l&&(l.style.height="100%")),n.resizeFifContainer&&l&&(l.style.height=f||u+"px"));for(var r in v)if(v.hasOwnProperty(r))try{a.iframe.style[r]=v[r]}catch(d){}if(l){var g="pmContainerSurface"+h(a.iframe.style.width||0)+"x"+h(a.iframe.style.height||0);if(l.className=(l.className||"").replace(/ +pmContainerSurface[0-9%pct]+x[0-9%pct]+/g,"")+" "+g,n.wallpaper&&(l.className=(l.className||"").replace(/ +pmContainerSurfaceWallpaper/,"")+" pmContainerSurfaceWallpaper"),n.container){var w=n.container.css;if(w)for(var x in w)if(w.hasOwnProperty(x))try{l.style[x]=w[x]}catch(d){}}}a.pam.debug("** Resizing iframe for PAM "+a.pam.siteId+"/"+a.pam.placementId+":"+a.pam.mode+" to width="+n.width+", height="+n.height,a.iframe),!n.dontCenter&&n.width,a.pam.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib;e.breakOverflow(a.iframe,n)}),n.stickToTop?a.pam.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib;if("mobile"!==e.device.name){var t=function(){var t,i,o,r,s,l,d=C.piximedia.SweetLib.gbcrfp(a.iframe).top,p=function(t){if(t){var i=a.iframe.parentNode.style.paddingTop;a.iframe.parentNode.style.paddingTop="0px";var n=e.gbcr(a.iframe.parentNode);a.iframe.parentNode.style.paddingTop=i;var o=n.top,r=Math.max(0,t-o);Math.round(parseFloat(a.iframe.parentNode.style.paddingTop,10)||0)!==Math.round(r)&&(a.iframe.parentNode.style.hasOwnProperty("transition")?(a.iframe.parentNode.style.transition="padding 0.2s",a.iframe.parentNode.style.paddingTop=r+"px",C.piximedia.SweetLib.addEventOnce(a.iframe.parentNode,"transitionend",function(){a.iframe.parentNode.style.transition=""})):a.iframe.parentNode.style.paddingTop=r+"px")}else a.iframe.parentNode.style.paddingTop=""},u=function(){if(a.iframe.pmFixed)a.iframe.pmFixed=!1,a.iframe.style.position="",a.iframe.style.marginTop="",a.iframe.parentNode.style.position=t,a.iframe.parentNode.style.height=i,a.iframe.parentNode.style.top=o,c&&(c.style.position=r,c.style.top=s,c.style.overflow=l);else{var e=C.piximedia.SweetLib.gbcrfp(a.iframe).top;e&&(d=e)}},m=function(e){a.iframe.pmFixed||(a.iframe.pmFixed=!0,a.iframe.style.position="relative",a.iframe.style.top="0px",t=a.iframe.parentNode.style.position,i=a.iframe.parentNode.style.height,o=a.iframe.parentNode.style.top,a.iframe.parentNode.style.position="fixed",a.iframe.parentNode.style.top=-(e.translateX||0)+"px",a.iframe.parentNode.style.height=(parseFloat(a.iframe.style.height,10)||0)+(parseFloat(a.iframe.parentNode.style.paddingTop,10)||0)+"px",c&&(r=c.style.position,s=c.style.top,l=c.style.overflow,c.style.position="fixed",c.style.top=0,c.style.overflow=""))},h=function(){if(!(a.iframe.ownerDocument.body.className||"").match(/pmBodyAnimation/)&&!(a.pam.getTopmostDocument().body.className||"").match(/pmBodyAnimation/)){var e=a.iframe.ownerDocument.getElementById("pmFiller"),t=0,i=0;if(e)if(t=C.piximedia.SweetLib.gbcr(e).top,n.stickToTopFromTop)t+=n.stickToTopFromTop,i=-n.stickToTopFromTop;else if(n.stickToTopOnPCTop){var o=C.piximedia.SweetLib.gbcr(e);t=o.bottom,i=-o.height}else t=C.piximedia.SweetLib.gbcr(e).top;var r=C.piximedia.SweetLib.getHeightOfPositionFixedHeaders(a.iframe.ownerDocument,void 0,{force:!0})||0;p(r),Math.round(t)>Math.round(r)?u():m({hopfh:r,translateX:-i})}};h();var f=setInterval(h,100);return{remove:function(){clearInterval(f),u()}}};a.scrollToTheTop&&a.scrollToTheTop.remove(),a.scrollToTheTop=t()}}):n.stickToTop===!1&&a.pam.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib;if("mobile"!==e.device.name){var t=function(){var t=function(){var t=a.iframe.ownerDocument.getElementById("pmFiller"),i=C.piximedia.SweetLib.getHeightOfPositionFixedHeaders(a.iframe.ownerDocument,void 0,{force:!0})||0;if(t){t.style.marginTop="0px";var n=e.gbcrfp(t).top;t.style.marginTop=Math.max(0,i-n)+"px"}var o=e.gbcrfp(a.iframe).top;a.iframe.parentNode.style.paddingTop=Math.max(0,(parseFloat(a.iframe.parentNode.style.paddingTop,10)||0)+i-o)+"px"},i=setInterval(t,100);return{remove:function(){clearInterval(i),t()}}};a.scrollToTheTop&&a.scrollToTheTop.remove(),a.scrollToTheTop=t()}})})}else{a.iframe.style.width="100%",a.iframe.style.height="100%";var k=a.iframe.parentNode,S=a.iframe.contentDocument&&a.iframe.contentDocument.body?a.iframe.contentDocument.body:void 0,I=S?S.parentNode:void 0;k&&(k.style.width="100%",k.style.height="100%"),S&&(S.style.width="100%",S.style.height="100%"),I&&(I.style.width="100%",I.style.height="100%"),n&&n.css&&n.css.background&&(a.iframe.style.background=n.css.background)}if(a.trackVisibility.length&&!a.trackingVisibility&&parseInt(a.iframe.style.width,10)&&parseInt(a.iframe.style.height,10)){a.trackingVisibility=!0,i("Tracking visibility for",a);var P=function(e){return function(){if(i("Reached visibility for position"),t.loadEventWait(e.event?e.event:10===e.duration&&.6===e.threshold?"AP_VIEWABLE":"AP_VIEWABLE:"+Math.round(100*e.threshold)+"PCT:"+e.duration+"S",{detail:t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId)||t.positionId}),.5===e.threshold&&1===e.duration){var n="isAnyViewable50pct1sForCampaign"+(t.decoratedBy||t.decoratedByCG||{}).campaignId;a.pam[n]||(a.pam[n]=!0,t.loadEventWait("AP_VIEWABLE:50PCT:1S:CAMPAIGN"))}}};a.pam.loadLibrary("sweetlib.js",function(){for(var e=0;e<a.trackVisibility.length;e++){var t=a.trackVisibility[e];t.threshold||(t.threshold=.6),t.duration||(t.duration=10),C.piximedia.SweetLib.bindViewTracker({object:a.iframe,threshold:100*t.threshold,duration:t.duration},P(t))}})}};r()}else i("(not resizing inactive iframe)")}),a.pam.master&&(this.on("set-message-duration",function(e){return a.setMessageDuration(e)}),this.on("register-visibility-callback",function(e){var t=e.callback;a.pam.loadLibrary("sweetlib.js",function(){if(!a.iframe)return void(a.visibilityCallbackOnHold=e);var i={object:a.iframe};for(var n in e)if(e.hasOwnProperty(n))switch(n){case"callback":break;default:i[n]=e[n]}C.piximedia.SweetLib.bindVisibilityTracker(i,function(e){a.emit(t,e)})})}))}function S(e,t){var n=this;this.pam=e,this.eventQueue=[];for(var a in t)t.hasOwnProperty(a)&&(this[a]=t[a]);this.pam.eventEmitterForObject(this,"position:"+this.positionId),this.pam.master&&(this.on("start-timetracker-hover",function(){n.startTimetrackerHover()}),this.on("stop-timetracker-hover",function(){n.stopTimetrackerHover()}),this.on("load-event-once",function(e,t,i){n.loadEventOnce(e,t,i)})),this.on("expand",function(){if(n.expandedCount=(n.expandedCount||0)+1,n.pam.master&&1===n.expandedCount&&n.decoratedBy){var e=n.pixiPositionId||n.decoratedBy.getPixiPositionIdForPositionId(n.positionId);n.loadEventWait("EXPAND",{detail:e}),n.pam.loadLibrary("sweetlib.js",function(){n.timetrackerExpand=C.piximedia.SweetLib.setTimer("EXPAND",function(t,i){n.decoratedBy&&n.loadEventWait("TIMETRACKER::"+t,{duration:i,detail:e})}),n.timetrackerExpand.start()})}}),this.on("collapse",function(){if(!n.expandedCount)return o("Position has been collapsed, but was not expanded",n);if(!--n.expandedCount&&n.pam.master){var e=n.pixiPositionId||n.decoratedBy.getPixiPositionIdForPositionId(n.positionId);n.loadEventWait("COLLAPSE",{detail:e}),n.pam.loadLibrary("sweetlib.js",function(){n.timetrackerExpand.stop(),n.timetrackerExpand=void 0})}}),this.on("responsive",function(e){e.pageContainerWidth&&(this.pageContainerWidth=e.pageContainerWidth)}),this.pam.master&&(this.on("injected-into-pixi-position-id",function(e){i("Host injected as "+e),n.pixiPositionId=e}),this.on("injected-into-creative-group",function(e){i("Host injected as create group member"),n.setDecoratedByCG(new x(n.decoratedBy,e))}))}function I(e){if(this.pam=e,this.deferredObjects=[],C.pmAdData&&C.pmAdData.ajax)for(;C.pmAdData.ajax.length>0;){var t=C.pmAdData.ajax.shift();t&&(this.pam.msie&&6===this.pam.msie&&(t.use_pb=!0),this.loadAd(t))}}function P(e,t,n,a,r){var s,l,d,p=this,u=(a||{}).mode||"alliance",m=e+"/"+t+":"+u,h=a&&a.uniqid?a.uniqid:"pam"+Math.round(1e16*Math.random());if(this.numberOfEventsSent={},this.birthdateCookie=this.getBirthdateCookie(),this.birthdateLS=this.getBirthdateLS(),C.piximedia._.pams=C.piximedia._.pams||{},C.piximedia._.pams[m]=C.piximedia._.pams[h]=C.piximedia.pam=this,!a.pageLoadStart){var f=this.getTopmostWindow();f.performance&&f.performance.timing&&f.performance.timing.responseStart?a.pageLoadStart=f.performance.timing.responseStart:a.pageLoadStart=new Date}if(this.msie=function(){var e=!1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}return e}(),this.chrome=function(){try{return navigator.userAgent.search("Chrome")>=0?parseInt(navigator.userAgent.match(/Chrome\/([0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.safari=function(){try{return-1===navigator.userAgent.search("Chrome")&&navigator.userAgent.search("Safari")>=0?parseInt(navigator.userAgent.match(/Version\/([.0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.firefox=function(){try{return navigator.userAgent.search("Firefox")>=0?parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.cssCalc=!(this.msie&&this.msie<9||this.safari&&this.safari<8||this.firefox&&this.firefox<31||this.chrome&&this.chrome<34),this.window=C,this.document=T,this.pixelQueue=[],this.animations={},this.containerClassName=R?"pmContainer_"+m.replace(/[^A-Za-z0-9]/g,"-"):"",this.globalEmitter=new y,this.globalOptions=a||{},this.master=!this.globalOptions.hosted,this.mode=u,this.positions={},this.winlostIframeIds={},this.allAvailableAds=n,this.explicitlyRegisteredPositionIds={},this.trackingAdPixelsCalled={},this.trackingAdCreativePixelsCalled={},this.availableAds=[],this.decorativeAds=[],this.realAds=[],this.clickUrl=r,this.siteId=e,this.placementId=t,this.uniqKey=h,this.globalOptions.uniqid=h,this.campaignIdsWithImpressions={},this.adIdsWithImpressions={},this.checkTopDomain(),this.numberOfExplicitPositions=0,this.globalOptions.loadPixelRandom=this.globalOptions.loadPixelRandom||Math.random(),this.master&&!this.globalOptions.location)try{this.globalOptions.location=this.getTopmostWindow().location.toString()}catch(v){}if(this.globalOptions.autoFacetPosition)try{(function(){var e=this.getTopmostWindow();"resources.pm"===e.location.hostname&&"/tools/preview/"===e.location.pathname&&(this.globalOptions.autoFacetPosition=void 0,this.globalOptions.facets=void 0)}).apply(this)}catch(v){}if(this.globalOptions.autoFacetPosition)switch(this.facets=JSON.parse(JSON.stringify(this.globalOptions.facets||[])),this.currentFacetIndex=0,this.globalOptions.autoFacetPosition){case"shuffle":this.facets=this.facets.sort(function(){return Math.random()<.5})}this.eventEmitterForObject(this,"pam:"+this.globalOptions.uniqid),a.hasOwnProperty("documentHasFocus")&&(this.documentHasFocus=a.documentHasFocus),this.syncDocumentHasFocus(),this.master&&(this.on("js-impression-ad-campaign",function(e,t,i,n){p.sendJSImpressionAdCampaign(e,t,i,n)}),this.on("create-opaque-animation",function(e,t,i){p.createOpaqueAnimation(e,t,i)}),this.on("play-opaque-animation",function(e,t,i){p.playOpaqueAnimation(e,t,i)}),this.on("reverse-opaque-animation",function(e,t,i){p.reverseOpaqueAnimation(e,t,i)}),this.on("clear-opaque-animation",function(e){p.clearOpaqueAnimation(e)}),this.on("wait-top-dom-loaded",function(e){p.waitTopDomLoaded(function(){p.emit(e)})}),this.on("bind-visibility-tracker",function(e,t,i,n){p.bindVisibilityTracker(e,t,i,n)}),this.on("start-navigation-tracking",function(e){p.startNavigationTracking(e)}));var g=!1;try{var w=p.getTopmostWindow().name;(w||"").match(/pmpassback/)&&(g=!0)}catch(v){}for(s=0;s<n.length;s++){if(d=n[s],d.uniqid||(d.uniqid="ad"+this.rand()),d.remapSnippets&&d.remapSnippets.length)for(var x=0;x<d.remapSnippets.length;x++){var k=d.remapSnippets[x];try{new Function(["pam"],k).call(d,p)}catch(v){o(v)}}var S=!0;if(d.require&&d.require.context)for(l=0;l<d.require.context.length;l++)if(!d.require.context[l]()){S=!1;break}if(g&&!d.passback&&(S=!1),S){var P=new b(this,d);this.availableAds.push(P),P.passback||this.realAds.push(P),d.require&&d.require.positions&&d.require.positions.length||!d.use||!d.use.positions||!d.use.positions.length||this.decorativeAds.push(P)}}if(!this.realAds.length&&this.globalOptions.keepAdringForRTA){T.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",T.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT";var E=this.globalOptions.pixiAdrName;T.cookie=E+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",T.cookie=E="=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"}C.piximedia.request_pos=C.piximedia.request_pos||{},C.piximedia.request_pos_sp=C.piximedia.request_pos_sp||{},C.piximedia.request_pos_sp[this.siteId]=C.piximedia.request_pos_sp[this.siteId]||{};var A=this.request_pos=C.piximedia.request_pos_sp[this.siteId][this.placementId]=C.piximedia.request_pos_sp[this.siteId][this.placementId]||{},_=this.globalOptions.rtaPositionsToRequestOnlyWhenRequired||[];for(s=0;s<this.availableAds.length;s++){if(d=this.availableAds[s],d.require&&d.require.positions)for(var O=this.parseRequestedPositions(d.require.positions),N=0;N<O.length;N++){A[O[N]]=!0,C.piximedia.request_pos[O[N]]=!0;var D=p.getPrerequisiteVirtualPosition(O[N]);D&&(A[D]=!0,C.piximedia.request_pos[D]=!0)}if(!d.passback&&d.use&&d.use.positions)for(var L=this.parseRequestedPositions(d.use.positions),M=0;M<L.length;M++){var j=L[M];if(-1===c(_,j)){A[j]=!0,C.piximedia.request_pos[j]=!0;var B=p.getPrerequisiteVirtualPosition(j);B&&(A[B]=!0,C.piximedia.request_pos[B]=!0)}}}if(this.globalOptions.requestPosJSSnippet)try{new Function(["request_pos","pam"],this.globalOptions.requestPosJSSnippet).call(p,C.piximedia.request_pos,p),new Function(["request_pos","pam"],this.globalOptions.requestPosJSSnippet).call(p,A,p)}catch(V){o("Could not execute request_pos JS snippet: ",V)}if(u.match(/^alliance/)){C.piximedia.core||(C.piximedia.core=new I(this));var q=this.siteId+"|"+this.placementId,U=setInterval(function(){try{var e=p.getTopmostWindow();e&&e.pmLoopBlocker&&e.pmLoopBlocker.hasOwnProperty(q)&&(clearInterval(U),p.loadEvent("PANIC",void 0,void 0,{fail_reason:"both_v1_and_position_tags"}))}catch(t){}},2e3);setTimeout(function(){p.sendStatistics()},1.5*(this.globalOptions.rendezvous_duration||F))}if(this.globalOptions.enableFooter&&this.hello({implicit:!0,ajax:!0,positionId:"footer"}),this.globalOptions.bwd_probability&&Math.random()<this.globalOptions.bwd_probability)try{var H=W.getData();this.loadEvent("BWD",void 0,void 0,{c1:H.browser_name,c2:H.browser_major_version,c3:H.os_name})}catch(v){}i(this.master?"Master PAM Created":"Hosted PAM Created"),this.globalOptions.pamela&&this.waitDomLoaded(function(){var e=p.getTopmostDocument(),t=e.createElement("script");e.body.appendChild(t),t.src="http://resources.pm/tools/pamela/pamelight.js"})}function E(e,t){for(var i=u(e.positionId||""),n=u(t.positionId||""),o=i.split("."),a=n.split("."),r=0;r<o.length;r++){if(r>=a.length)return 1;var s=o[r],l=a[r];if(s.match(/^[0-9]+$/)&&l.match(/^[0-9]+$/)&&(s=parseInt(s,10),l=parseInt(l,10)),l>s)return-1;if(s>l)return 1}return a.length>o.length?-1:0}function A(e,t,i,n){var a,r=e.split(":"),s=[],l=[];a=r[0].split(".");for(var d in i)if(i.hasOwnProperty(d)){var p=i[d],m=p.positionId,h=m.split("."),f=h.slice(1);if(""===a[0]||"*"===a[0]||a[0]===h[0]){for(var v=!0,g=1;g<a.length;g++)if(-1===c(f,a[g])){v=!1;break}if(v){if(s.push(p),t.activeAndNotUsed&&(!p.active||p.used))continue;if(t.notRequestedByActiveAd&&(!p.active||p.used||p.requested))continue;if(t.decoratedBy&&p.decoratedBy!==t.decoratedBy)continue;l.push(p)}}}l.sort(E);for(var y=1;y<r.length;y++){var b=r[y];if("free_mp"===b&&(b=n?"optional":"free"),l.length){switch(b){case"odd":b="mod2=0";break;case"even":b="mod2=1"}if("first"===b)l=[l[0]];else if("last"===b)l=[l[l.length-1]];else if("#"===b.charAt(0)){var w=parseInt(b.substr(1),10);l=l[w-1]?[l[w-1]]:[]}else if("optional"===b)l.length||l.push({});else if("decorated"===b){
for(var x=[],k=0;k<l.length;k++)for(var S=l[k].iframes||[],I=0;I<S.length;I++){var P=S[I].iframe;P&&parseInt(P.style.width,10)>1&&parseInt(P.style.height,10)>1&&x.push(l[k])}l=x}else if("used"===b||"free"===b){for(var A="used"===b,C=[],T=!0,_=0;_<s.length;_++)(s[_].used?!0:!1)!==A&&(T=!1);if(T)for(var O=0;O<l.length;O++)(l[O].used?!0:!1)===A&&C.push(l[O]);l=C}else if("exact"===b){for(var N=u(r[0]),F=[],D=0;D<l.length;D++){var L=u(l[D].positionId||"");N===L&&F.push(l[D])}l=F}else if("primaryposition"===b)l=l;else{var M=b.match(/^mod([0-9]+)={1,3}([0-9]+)$/);if(M){for(var R=parseInt(M[1],10),j=parseInt(M[2],10),B=[],V=0;V<l.length;V++)V%R===j&&B.push(l[V]);l=B}else o("Unknown restrictive: "+b),l=[]}}else switch(b){case"free":case"optional":if(!t.positions){var W=!0;if("free"===b)for(var q=0;q<s.length;q++)s[q].used&&(W=!1);W&&l.push({})}}}return l}var C=window,T=document;if(!C.piximedia){try{!C.piximedia&&parent.piximedia&&(C.piximedia=parent.piximedia)}catch(_){}try{!C.piximedia&&parent.parent.piximedia&&(C.piximedia=parent.parent.piximedia)}catch(_){}try{!C.piximedia&&top.piximedia&&(C.piximedia=top.piximedia)}catch(_){}C.piximedia=C.piximedia||{};try{parent.piximedia=C.piximedia}catch(_){}try{parent.parent.piximedia=C.piximedia}catch(_){}try{top.piximedia=C.piximedia}catch(_){}}C.piximedia._=C.piximedia._||{},C._piximedia=C._piximedia||{},C._piximedia.images=C._piximedia.images||[];var O,N=2014031001,F=1e3,D="http://static.adserver.pm/host.html/revision=fc4c67e0766ce1bd3321b1e5f6a75ee2",L="ad.piximedia.com",M="static.adserver.pm",R=!1,j=1200,B=.05;t.get=function(){return t.trail||[]};var V="margin: 0; padding: 0; border: 0; position: relative; overflow: visible; cursor: default; word-spacing: normal; font-size: 11px; font-style: normal; letter-spacing: 0px; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; font-family: Arial, Helvetica, sans-serif; left: 0; right: 0; /*top: 0; bottom: 0;*/ text-align: left; display: block; clear: both",W=window._piximediaBrowserDetect;y.globalEmitter=new y,y.forObject=function(e,t,i){if(i=i||{},e._eventEmitter&&!i.purge)return e._eventEmitter;var n=new y(e);if(e.fire=e.emit=function(){return n.fire.apply(n,arguments)},e.fireLocal=e.emitLocal=function(){return n.fireLocal.apply(n,arguments)},e.addListener=e.on=function(){return n.addListener.apply(n,arguments)},e.removeListener=function(){return n.removeListener.apply(n,arguments)},e.removeAllListeners=function(){return n.removeAllListeners.apply(n,arguments)},e._eventEmitter=n,t){n.id=t;var o=i.globalEmitter||y.globalEmitter;n.globalEmitter=o,o.ids=o.ids||{},o.ids[t]=e}return n},y.getID=function(e){return e instanceof y?e.id:e._eventEmitter?e._eventEmitter.id:void 0},y.prototype.fireEventToID=function(e,t,i){if(i=i||{},this.ids&&this.ids.hasOwnProperty(e)){var n=this.ids[e];try{for(var a=[],r=0;r<t.length;r++)a.push(t[r]);"string"==typeof t[0]&&(t[0]={name:t[0]}),i.exceptTo&&(t[0].exceptTo=i.exceptTo),n.fire.apply(n,t)}catch(s){o("Caught error when handling event",s)}}},y.prototype.fire=function(e){var t,i=arguments.length-1,n=this.target||this;"string"==typeof e&&(e={name:e}),t=e.name;var o=this.globalEmitter||y.globalEmitter;if(this!==o&&!e.local&&!this.ids){for(var a=[],r=0;r<arguments.length;r++)a.push(arguments[r]);o.fire({name:"event",exceptTo:e.exceptTo},n,a)}if(this.events[t]){var s,l=[];for(s=0;s<this.events[t].length;s++)l.push(this.events[t][s]);for(s=0;s<l.length;s++){var c,d=l[s];if(!e.exceptTo||e.exceptTo!==d){switch(i){case 0:c=d.call(n);break;case 1:c=d.call(n,arguments[1]);break;case 2:c=d.call(n,arguments[1],arguments[2]);break;default:for(var p=[],u=0;i>u;u++)p[u]=arguments[u+1];try{c=d.apply(n,p)}catch(m){}}if(void 0!==c)return c}}}return void 0},y.prototype.fireLocal=function(e){for(var t=[{name:e,local:!0}],i=1;i<arguments.length;i++)t.push(arguments[i]);return this.fire.apply(this,t)},y.prototype.emit=y.prototype.fire,y.prototype.emitLocal=y.prototype.fireLocal,y.prototype.addListener=function(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),this.target},y.prototype.on=y.prototype.addListener,y.prototype.removeListener=function(e,t){var i=this.events[e];if(i){for(var n=[],o=i.length-1;o>=0;o--){var a=i[o];a!==t&&n.push(a)}this.events[e]=n}return this.target},y.prototype.removeAllListeners=function(){return this.events={},this.target},b.prototype.queryPosition=function(e){return this.pam.queryPosition(e,{decoratedBy:this})},b.prototype.sendCpmviewClick=function(){var e=this;return e.pam.master?void(this.cpmviewClickSent||(this.loadEvent("CLICK",{c5:"cpmview"}),this.cpmviewClickSent=!0)):void(e.emit&&e.emit("send-cpmview-click"))},b.prototype.somethingHasBeenSeen=function(){var e=this;return e.pam.master?void("string"==typeof e.args.delayed_display&&"{}"!==e.args.delayed_display&&(window.pmBypassImpression||e.sentImpression||(e.pam.loadPixel(e.args.impression_pixel),e.sentImpression=!0))):void(e.emit&&e.emit("something-has-been-seen"))},b.prototype.purgeEventEmitter=function(){this.pam.eventEmitterForObject(this,this.uniqid,{purge:!0})},b.prototype.inject=function(e,t,n){"function"!=typeof t||n||(n=t,t={}),t.pixiPositionId||(t.pixiPositionId=m(e)),t.room&&(e="room."+t.room),void 0===t.future&&(t.future=!0),t.future&&(t.present=!0),this.rooms&&this.rooms[e]&&(n=this.makeHostRooms(n,this.rooms[e]));var o;if("string"==typeof e||l(e)){if("string"==typeof e){t.future&&this.injectFuture(e,t,n);var a=this.remapPositions||{};for(var r in a)if(a.hasOwnProperty(r)){var s=new RegExp("\\b"+r+"\\b","g");e=e.replace(s,a[r])}}o=C.piximedia.preview?this.pam.queryPositions("*"):this.positions,o=this.pam.queryPositions(e,{positions:o})}else"object"==typeof e&&(o=[e]);for(var c=0;c<o.length;c++){var d=o[c];d.decoratedBy&&d.decoratedBy!==this&&d.decoratedBy!==this.cgAd||!d.active||d.hosted||(i("Injecting contents into "+d.positionId),t.present&&!d.used&&(d.decoratedBy=this,d.decoratedAt=d.decoratedAt||new Date,d.used=!0,d.justUsed&&d.justUsed(),i("Taking position "+d.positionId),this.positions.push(d)),this.cgOptions&&!d.decoratedByCG&&(d.setDecoratedByCG(this),this.pam.master||d.emit("injected-into-creative-group",this.cgOptions)),d.pixiPositionId=t.pixiPositionId,this.pam.master||d.emit("injected-into-pixi-position-id",d.pixiPositionId||e),this.shouldHostPosition(d)?this.pam.hostPosition(this,d):this.injectPosition(d,t,n))}},b.prototype.injectFuture=function(e,t,n){"function"!=typeof t||n||(n=t,t={});var o=this,a=this.remapPositions||{};for(var r in a)if(a.hasOwnProperty(r)){var s=new RegExp("\\b"+r+"\\b","g");e=e.replace(s,a[r])}var l=function(e){i("Injecting contents into future "+e.positionId),e.decoratedBy=o,e.decoratedAt=e.decoratedAt||new Date,o.cgOptions&&e.setDecoratedByCG(o),e.pixiPositionId=t.pixiPositionId,o.shouldHostPosition(e)?o.pam.hostPosition(o,e):o.injectPosition(e,t,n)};if(this.on("hello",function(t){if(!o.disabled){var n={};n[t.positionId]=t;var a=o.pam.queryPositions(e,{positions:n,ignoreConditions:!0});if(a.length){var r=o.pam.queryPositions(e,{positions:n,conditionPositions:o.pam.positions});if(r.length)l(t);else{i("Found a position to inject that fails to meet its condition, waiting for future positions");var s=!1;o.pam.on("pre-hello",function(){if(!s){var i=o.pam.queryPositions(e,{positions:n,conditionPositions:o.pam.positions});i.length&&(s=!0,l(t))}})}return i("Grabbing position "+t.positionId),o.positions.push(t),t.decoratedAt=new Date,!0}}}),e.match(/=>/)){var c=function(){var t=o.pam.queryPosition(e,{positions:o.positions});t.length&&(o.pam.removeListener("position-has-been-decorated",c),l(t[0]))};o.pam.on("position-has-been-decorated",c)}},b.prototype.makeHostRooms=function(e,t){return function(i,n,a,r){try{e.apply(this,arguments)}catch(s){o("Could not execute callback: "+s)}for(var l=0;l<t.length;l++){var c=t[l];r.hostRoom(c.id,c)}}},b.prototype.makeInject=function(e,t){var i=this;return function(n,a){try{if(i.pam.debug("Calling makeInject()"),!e.clickUrl&&e.positionId.match(/^room\./)&&e.pixiPositionId){var r=e.pixiPositionId,s=this.remapPositions||{};for(var c in s)if(s.hasOwnProperty(c)){var d=new RegExp("\\b"+c+"\\b","g");r=r.replace(d,s[c])}e.clickUrl=e.allClickUrls&&e.allClickUrls[r]||i.pam.positions[r]&&i.pam.positions[r].clickUrl,e.advertiserClickUrl=e.allAdvertiserClickUrls&&e.allAdvertiserClickUrls[r]||i.pam.positions[r]&&i.pam.positions[r].advertiserClickUrl}t.call(e,n,a,e,a.framedIframe),O.emitLocal("ad.inject",n,a,e,a.framedIframe);var p=(i.args||{})["position-css"];p&&i.pam.loadLibrary("sweetlib.js",function(){if(l(p))for(var e=0;e<p.length;e++)C.piximedia.SweetLib.createCSSs(p[e],n);else C.piximedia.SweetLib.createCSSs(p,n)})}catch(u){o("Could not inject position "+e.positionId+": "+u)}}},b.prototype.injectPosition=function(e,t,n){var o=this;n?t=t||{}:(n=t,t={}),o.pam.debug("Injecting into "+e.positionId);var r=t.htmlComments,s="inject"+this.pam.rand();C.piximedia._[s]=this.makeInject(e,n);var l={name:"pmInject_"+e.positionId,javascript:"window.piximedia._."+s+"(document,window)"};r&&(l.htmlComments=r);for(var c in t)t.hasOwnProperty(c)&&(l[c]=t[c]);if(e.decoratedBy||(e.decoratedBy=this,e.decoratedAt=e.decoratedAt||new Date,i("Marking position not yet marked decorated by any ad"),this.positions.push(e)),this.cgOptions&&!e.decoratedByCG&&e.setDecoratedByCG(this),e.decoratedBy&&e.decoratedBy.masterPosition&&e.decoratedBy.iframe&&e.positionId===e.decoratedBy.masterPosition.positionId&&(e.decoratedBy.iframe.doNotSendPixels=!0),this.pam.master&&(e.injectionIndex=e.injectionIndex||0),!e.hosted&&!e.injectionIndex){e.loadEvent("JS:IMPRESSION",{detail:this.getPixiPositionIdForPositionId(e.positionId)});var d=o.campaignId,p=o.adId;if(o.pam.sendJSImpressionAdCampaign(d,p,e.positionId,this.getPixiPositionIdForPositionId(e.positionId)),e.decoratedAt){var u=Math.round((new Date-e.decoratedAt)/1e3);e.loadEvent("JS:DELAY:IMPRESSION",{detail:this.getPixiPositionIdForPositionId(e.positionId),duration:u})}}var m=function(){var t,n=function(){a("Position removed",e),o.pam.unloadPosition(e)},r=function(){a("Position winlost: "+e.positionId,e),e.injectionIndex++,t.unload({hide:!0}),t.removeListener("remove",n),t.removeListener("winlose",r);for(var o=!1,s=0;s<(e.iframes||[]).length;s++)if(e.iframes[s]===t){o=!0;break}o?(i("ZZZ Position still active, reloading"),m()):i("ZZZ Position no longer active")};t=o.pam.injectFriendlyContent(e,l,o).on("remove",n).on("winlose",r)};m()},b.prototype.getTrackedUrl=function(e,t,i){return i=i||{},i=JSON.parse(JSON.stringify(i)),i.detail&&(i.detail=m(i.detail)),!i.c1&&this.args&&this.args.c1&&(i.c1=this.args.c1.toString()),!i.c2&&this.args&&this.args.c2&&(i.c2=this.args.c2.toString()),!i.c3&&this.args&&this.args.c3&&(i.c3=this.args.c3.toString()),!i.c4&&this.args&&this.args.c4&&(i.c4=this.args.c4.toString()),!i.c5&&this.args&&this.args.c5&&(i.c5=this.args.c5.toString()),i.campaignIdAlliance=this.campaignId,i.adIdAlliance=this.adId,i.creativeIdAlliance=this.creativeId,this.pam.getTrackedUrl(e,t,i,this.ticketInfo)},b.prototype.loadEvent=function(e,t){t&&(t=JSON.parse(JSON.stringify(t)),t.detail&&(t.detail=m(t.detail))),!t.c1&&this.args&&this.args.c1&&(t.c1=this.args.c1.toString()),!t.c2&&this.args&&this.args.c2&&(t.c2=this.args.c2.toString()),!t.c3&&this.args&&this.args.c3&&(t.c3=this.args.c3.toString()),!t.c4&&this.args&&this.args.c4&&(t.c4=this.args.c4.toString()),!t.c5&&this.args&&this.args.c5&&(t.c5=this.args.c5.toString()),this.pam.loadEvent(e,{campaignIdAlliance:this.campaignId,adIdAlliance:this.adId,creativeIdAlliance:this.creativeId},this.ticketInfo,t),"AP_SOMETHINGHASBEENSEEN"===e&&this.somethingHasBeenSeen()},b.prototype.loadEventOnce=function(e,t,i){if(t=t||{},i=i||[],!this.pam.master)return this.emit("load-event-once",e,t,i);this.loadEventOnceSems=this.loadEventOnceSems||{};var n=[e,t.c1,t.c2,t.c3,t.c4,t.c5].join("|");if(!this.loadEventOnceSems.hasOwnProperty(n)){this.loadEventOnceSems[n]=!0,this.loadEvent(e,t);for(var o=0;o<i.length;o++)this.pam.loadPixel(i[o])}},b.prototype.getPixiPositionIdForPositionId=function(e){if(this.pam.positions&&this.pam.positions[e]&&this.pam.positions[e].pixiPositionId)return this.pam.positions[e].pixiPositionId;if(e.match(/^room\./))return e;var t=this.remapPositions||{},i={},n=e.split(".");n.length>1&&(e=n[0]),i[e]={positionId:e};var o=[];for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];this.pam.queryPositions(r,{positions:i}).length&&o.push(a)}return o.length?c(o,"mpu")>=0?"mpu":o[0]:e},b.prototype.queryAssets=function(e){var t=((this.args||{}).assets||{}).pool||[];return O.assetsMatchQuery(e,t)},w.prototype=new b({},{}),w.prototype.constructor=w,w.prototype.injectPosition=function(e,t){if(this.position.positionId===e.positionId&&this.pam.positionCurrentlyInline===e.positionId)try{t.call(e,this.framedDocument,this.framedWindow,e)}catch(i){o("Could not inject friendly position: "+e.positionId+": "+i)}else b.prototype.injectPosition.apply(this,arguments)},x.prototype=new b({},{}),x.prototype.constructor=x,k.prototype.registerResponsiveCallback=function(e){this.on("responsive",e),this.enableResponsiveEvents()},k.prototype.setMessageDuration=function(e){var t=this;return t.pam.master?void t.pam.loadLibrary("sweetlib.js",function i(){return t.iframe?void C.piximedia.SweetLib.bindViewTracker({object:t.iframe,threshold:50,duration:e},function(){t.position.loadEventWait("AP_CONSUMED");var e="isAnyConsumedForCampaign"+(t.position.decoratedBy||t.position.decoratedByCG||{}).campaignId;t.pam[e]||(t.pam[e]=!0,t.position.loadEventWait("AP_CONSUMED:CAMPAIGN"))}):setTimeout(i,500)}):t.emit("set-message-duration",e)},k.prototype.enableResponsiveEvents=function(){var e=this;return this.pam.master?void(this.responsiveEventsEnabled||(this.responsiveEventsEnabled=!0,this.pam.loadLibrary("sweetlib.js",function(){var t=C.piximedia.SweetLib,i=t.getPageContainer();t.enableResponsiveEventsForPageContainer(i,function(t){e.position.emit("responsive",t),e.emit("responsive",t)})}))):this.emit("enable-responsive-events")},k.prototype.hostRoom=function(e,t){if(t=t||{},!this.pam.master)return this.emit("host-room",e,t);var i=this;this.pam.hostRoom(e,{injectionIndex:this.position.injectionIndex},function(){var e=i.iframe,n=e.ownerDocument,o=n.createElement("div"),a=n.createElement("div");switch(o.className="pmRoomContainer",o.style.position="absolute",a.className="pmRoom",a.style.position="absolute",t.align||"center"){case"left":break;case"right":7===i.pam.msie&&(o.style.minWidth="100%"),o.style.width="100%",o.style.position="absolute",a.style.position="absolute",a.style.right=0;break;case"center":o.style.width="100%",7===i.pam.msie&&(o.style.minWidth="100%"),a.style.left="50%",a.className+=" pmCentered"}if(t.left&&(o.style.left=parseInt(t.left)+"px"),t.top&&(o.style.top=parseInt(t.top)+"px"),t.css)for(var r in t.css)if(t.css.hasOwnProperty(r))try{a.style[r]=t.css[r]}catch(s){}return o.appendChild(a),e.parentNode.insertBefore(o,e),a})},k.prototype.unload=function(e){var t=this;if(e=e||{},this.active=!1,i("Iframe.unload()"),this.iframe){if(this.pam.isInDOM(this.iframe))i("Iframe is still in DOM: "+this.iframe.id),e.hide?(this.iframe.style.display="none",i("Setting iframe display: none")):this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe);else{i("Iframe is no longer in DOM: "+this.iframe.id);var n=this.iframe.ownerDocument.getElementById(this.iframe.id);n?(i("Found winlost iframe in DOM: "+this.iframe.id),e.hide?(n.style.display="none",i("Setting iframe display: none")):n.parentNode&&n.parentNode.removeChild(n)):i("Winlost iframe not in DOM: "+this.iframe.id),e.hide?(this.iframe.style.display="none",i("Setting iframe display: none")):this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe)}if(this.moveTop&&this.pam.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib;e.moveTopOfPageContainer(t.pageContainer,-t.moveTop)}),e.hide){var o=function(){var e=t.iframe.ownerDocument.getElementById(t.iframe.id);"none"!==e.style.display&&(i("Iframe must be hidden again: "+t.iframe.id),e.style.display="none")},a=setInterval(o,20);setTimeout(function(){clearInterval(a),setInterval(o,500)},1e4)}}else i("no known iframe")},k.prototype.setIframe=function(e){var t=this,n=e.id,o=e.ownerDocument;if(n||(n=e.id="pmAnonIframe"+this.pam.rand()),this.iframe=e,this.visibilityCallbackOnHold&&(this.emit("register-visibility-callback",this.visibilityCallbackOnHold),this.visibilityCallbackOnHold=void 0),t.pam.master&&(this.iframe.onmouseover=function(){t.emitLocal("mouseover")},this.iframe.onmouseout=function(){t.emitLocal("mouseout")},t.position&&t.position.decoratedBy&&t.position.decoratedBy.timetracker&&t.position.decoratedBy.timetracker.hover)){var r=t.position,s=t.position.decoratedBy,l=s.timetracker.hover,d=r.pixiPositionId||r.decoratedBy.getPixiPositionIdForPositionId(r.positionId);"string"==typeof l&&(l=l.split(/ +/)),c(l,d)>=0&&(this.on("mouseover",function(){r.startTimetrackerHover()}),this.on("mouseout",function(){r.stopTimetrackerHover()}))}var p=function(){t.active&&setTimeout(function(){var e=o.getElementById(n);return e?(a("Iframe has been winlost"),t.emitLocal("winlose"),void t.setIframe(e)):void(t.pam.winlostIframeIds[n]?(t.active=!1,a("Iframe has been removed by PAM because of a winlose"),t.emitLocal("winlose")):(a("Iframe has been removed"),t.emitLocal("remove")))},0)};(t.safari||t.chrome)&&e.addEventListener("DOMNodeRemovedFromDocument",function(){p()});var u=e.contentWindow,m=setInterval(function(){var a=o.getElementById(n),r=a?a.contentWindow:void 0;a!==e?(i("Iframe changed, is there a winlose?"),clearInterval(m),p()):t.active&&r!==u&&(i("Iframe content window has changed by an external JavaScript"),e.parentNode.innerHTML="<!--winlose-->"+e.parentNode.innerHTML+"<!--winlose-->")},50)},S.prototype.setDecoratedByCG=function(e){this.decoratedByCG=e;var t=this.eventQueue;this.eventQueue=[];for(var i=0;i<t.length;i++){var n=t[i];this.loadEvent(n.eventId,n.options)}},S.prototype.justUsed=function(){var e=this,t=e.positionId;if(e.pam&&e.pam.globalOptions&&e.pam.globalOptions.positionsUniqueOnPage&&c(e.pam.globalOptions.positionsUniqueOnPage,t)>=0)for(var i in window.piximedia._.pams)if(window.piximedia._.pams.hasOwnProperty(i)&&i.match(/^pam/)){var n=window.piximedia._.pams[i];n&&n.positions&&n.positions[t]&&(n.debug("Registering this position "+t+" as being used"),n.positions[t].used=!0,n.positions[t].usedUniqueOnPage=!0)}if(e.pam.master&&!e.trackingPositionSent){e.trackingPositionSent=!0;var o=e.decoratedBy||{},a=function(t){if(t){"string"==typeof t&&e.pam.loadPixel(t);for(var i=0;i<t.length;i++)e.pam.loadPixel(t[i])}};o.args&&o.args["tracking.ad:impression"]&&o.args["tracking.ad:impression"].pixelUrl&&a(o.args["tracking.ad:impression"].pixelUrl),o.args&&o.args["tracking.creative:impression"]&&o.args["tracking.creative:impression"].pixelUrl&&a(o.args["tracking.creative:impression"].pixelUrl)}},S.prototype.getTrackedUrl=function(e,t,i){var n={};if(i)for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n.detail||(n.detail=this.pixiPositionId||(this.decoratedBy?this.decoratedBy.getPixiPositionIdForPositionId(this.positionId):void 0)),this.decoratedByCG&&this.decoratedByCG.getTrackedUrl?this.decoratedByCG.getTrackedUrl(e,t,n):this.decoratedBy&&this.decoratedBy.getTrackedUrl?this.decoratedBy.getTrackedUrl(e,t,n):this.pam.getTrackedUrl(e,t,n)},S.prototype.loadEvent=function(e,t){var i={};if(t)for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.detail||(i.detail=this.pixiPositionId||(this.decoratedBy?this.decoratedBy.getPixiPositionIdForPositionId(this.positionId):void 0)),this.decoratedByCG?this.decoratedByCG.loadEvent(e,i):this.decoratedBy?this.decoratedBy.loadEvent(e,i):this.pam.loadEvent(e,void 0,void 0,i)},S.prototype.loadEventOnce=function(e,t,i){if(t=t||{},i=i||[],!this.pam.master)return this.emit("load-event-once",e,t,i);this.loadEventOnceSems=this.loadEventOnceSems||{};var n=[e,t.c1,t.c2,t.c3,t.c4,t.c5].join("|");if(!this.loadEventOnceSems.hasOwnProperty(n)){this.loadEventOnceSems[n]=!0,this.loadEvent(e,t);for(var o=0;o<i.length;o++)this.pam.loadPixel(i[o])}},S.prototype.loadEventWait=function(e,t){return this.decoratedBy||o("Cannot use Position.loadEventWait() on positions not associated to an ad"),this.decoratedBy.is_creative_group?this.decoratedByCG?this.loadEvent(e,t):void this.eventQueue.push({eventId:e,options:t}):this.loadEvent(e,t)},S.prototype.startTimetrackerHover=function(){var e=this;if(!e.pam.master)return e.emit("start-timetracker-hover");if(!this.timetrackerHover){var t,i=0,n=0,o=function(){e.pam.loadLibrary("sweetlib.js",function(){i&&!n?t.pause():!i&&n&&(t?t.resume():(t=C.piximedia.SweetLib.setTimer("HOVER",function(t,i){e.loadEventWait("TIMETRACKER::"+t,{duration:i,detail:e.pixiPositionId||e.decoratedBy.getPixiPositionIdForPositionId(e.positionId)})}),t.start())),i=n})};this.timetrackerHover={start:function(){n++,o()},stop:function(){n--,o()}}}this.timetrackerHover.start()},S.prototype.stopTimetrackerHover=function(){return this.pam.master?void(this.timetrackerHover&&this.timetrackerHover.stop()):this.emit("start-timetracker-hover")},I.prototype.loadActivity=function(e){this.pam.loadActivityPixel(e)},I.prototype.loadAd=function(e){var t=this.getUrl(e);if(e.dw)try{T.write('<script type="text/javascript" src="'+t+'"></script>')}catch(i){}else e.defer&&"complete"!==T.readyState?this.deferObj(e):(C.pmIsAlreadyActive&&(e.use_pb=!0,t=this.getUrl(e)),this.pam.loadScript(t))},I.prototype.getUrl=function(e){var t="";return e.use_pb&&(t+=";pb=1"),this.pam.globalOptions.serialId&&(t+=";serial_id="+this.pam.globalOptions.serialId),"//"+L+"/ads_js/stage2.php?"+e.mode+"|"+e.site_id+"|"+e.placement_id+"|"+e.params+t+"|"+W.toString()+"|"+this.pam.rand()+"|click="+e.click},I.prototype.deferObj=function q(e){var t=this;this.deferredObjects.push(e),q.listening||(q.listening=!0,this.pam.waitDomLoaded(function(){t.loadDeferedObjects()}))},I.prototype.loadDeferedObjects=function(){if(!this.deferredObjectsLoaded){this.deferredObjectsLoaded=!0;for(var e=0;e<this.deferredObjects.length;e++)this.loadDeferedAd(this.deferredObjects[e])}},I.prototype.loadDeferedAd=function(e){C.pmIsAlreadyActive&&(e.use_pb=!0),C.pmIsAlreadyActive=!0;var t=this.getUrl(e);this.loadScript(t)},I.prototype.getClickCommand=function(){for(var e=0;e<this.pam.positions.length;e++){var t=this.pam.positions[e];if(t.clickUrl)return t.clickUrl}return this.pam.clickUrl},I.prototype.loadEvent=function(e,t){this.pam.loadEvent(e,t,this.ticketInfos)},I.prototype.loadEventWithPrefix=function(e,t){this.pam.loadEvent(e,t,this.ticketInfos,{prefixURI:this.getClickCommand()})},I.prototype.loadScript=function(e){try{var t=T.createElement("script");t.type="text/javascript",t.async="async",t.src=e,T.getElementsByTagName("head")[0].appendChild(t)}catch(i){}},I.prototype.setTicket=function(e,t){this.ticketInfos={ticket:e,signature:t}},O=P,P.prototype.runPixeldisTest=function(){var e=this.getTopmostWindow();if(this.master&&e===top&&!(Math.random()<.9)){var t;switch(Math.round(5*Math.random())+1){case 1:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/a.html";break;case 2:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/b.html";break;case 3:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/c.html";break;case 4:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/d.html";break;case 5:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/e.html";break;default:case 6:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/f.html"}this.waitDomMutable(function(){var i=e.document.getElementsByTagName("head");if(1===i.length){var n=i[0],o=e.document.createElement("iframe");o.id="pixipixeldis",o.src=t,n.appendChild(o)}})}},P.prototype.sendJSImpressionAdCampaign=function(e,t,i,n){if(!this.master)return this.emit("js-impression-ad-campaign",e,t,i,n);var o=this.positions[i];e&&!this.campaignIdsWithImpressions[e]&&(this.campaignIdsWithImpressions[e]=e,o.loadEvent("JS:IMPRESSION:CAMPAIGN",{detail:n})),t&&!this.adIdsWithImpressions[t]&&(this.adIdsWithImpressions[t]=t,o.loadEvent("JS:IMPRESSION:AD",{detail:n}))},P.prototype.log=a,P.prototype.warn=n,P.prototype.error=o,P.prototype.loadPixel=function(e){if(e&&" "!==e&&"PIXEL_URL"!==e){var t=e.toString().match(/^([0-9.]+)%:(.*)/);if(t){var i=parseFloat(t[1],10)/100;if(this.globalOptions.loadPixelRandom>i)return;e=t[2]}p(e.replace(/%n|\[random_number\]|\[random\]|\[timestamp\]/gi,Math.round(1e16*Math.random()).toString()))}},P.prototype.eventEmitterForObject=function(e,t,i){var n={};if(i)for(var o in n)n.hasOwnProperty(o)&&(n[o]=i[o]);return n.globalEmitter=this.globalEmitter,y.forObject(e,t,n)},P.prototype.syncDocumentHasFocus=function(){var e=this;if(this.master){var t=e.getTopmostDocument();e.documentHasFocus=t.hasFocus(),setInterval(function(){var i=t.hasFocus();i!==e.documentHasFocus&&(e.documentHasFocus=i,e.emit("focus-change",i))},1e3)}else this.on("focus-change",function(t){e.documentHasFocus=t})},P.prototype.cleanupPixiRTAPosCookie=function(e){e=e||{};var t=C.piximedia.request_pos_sp[this.siteId][this.placementId],i=!1;for(var n in t)if(t.hasOwnProperty(n)){i=!0;break}i||"alliance"!==this.mode||(e.keepRTAPos||(T.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",T.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),T.cookie="pixi_adr=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",T.cookie="pixi_adr=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",this.globalOptions.pixiAdrName&&(T.cookie=this.globalOptions.pixiAdrName+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",T.cookie=this.globalOptions.pixiAdrName+"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"))},P.prototype.getBirthdateCookie=function(){for(var e=T.cookie.split(/; */),t=/pixi_birthdate=(.*)/,i=e.length-1;i>=0;i--){var n=e[i].match(t);if(n&&n[1])return parseInt(n[1],10)}},P.prototype.getBirthdateLS=function(){try{if(C.localStorage&&C.localStorage.getItem)return parseInt(C.localStorage.getItem("pixi_birthdate"),10)||void 0}catch(e){}},P.prototype.exposePixiRTAPosCookie=function(e){e=e||{},e.expires||(e.expires=new Date((new Date).getTime()+1e3*j)),e.pixiRTAPosExpires||(e.pixiRTAPosExpires=new Date((new Date).getTime()+1e3*(this.globalOptions.pixiRTAPosExpires||j)));var t=[];for(var i in C.piximedia.request_pos)C.piximedia.request_pos.hasOwnProperty(i)&&t.push(i);if(T.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",T.cookie="pixi_rta_pos="+escape(t.join(";"))+"; path=/; "+this.getDomainPartForCookies()+(e.pixiRTAPosExpires?"; expires="+e.pixiRTAPosExpires.toUTCString():""),T.cookie="pixi_rta_v="+escape("1;"+(new Date).getTime())+"; path=/; "+this.getDomainPartForCookies()+(e.expires?"; expires="+e.expires.toUTCString():""),this.globalOptions.exposeRTAPosHelperJS){var n=this.getTopmostWindow();try{n.Function(["req_pos","window","document"],this.globalOptions.exposeRTAPosHelperJS).call(n,t,n,n.document)}catch(a){o("Could not execute RTA position helper: "+a)}}var r=+new Date,s=void 0!==this.getBirthdateCookie();s||(T.cookie="pixi_birthdate="+escape(r)+"; path=/; "+this.getDomainPartForCookies()+"; expires="+new Date((new Date).getTime()+31536e6).toUTCString());try{C.localStorage&&C.localStorage.getItem&&C.localStorage.setItem&&(C.localStorage.getItem("pixi_birthdate")||C.localStorage.setItem("pixi_birthdate",r))}catch(l){}},P.prototype.stringify=function(e){return void 0===e?"undefined":null===e?"null":"number"==typeof e?e:(e=e.toString(),'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"')},P.get=P.prototype.get=function(e,t,i){var n=e+"/"+t+":"+(i||"alliance");return(C.piximedia._.pams||{})[n]},P.prototype.loadActivityPixel=function(e,t){t=t||{};var i=C.piximedia._.contextBySP?C.piximedia._.contextBySP[this.siteId+"/"+this.placementId]:void 0;p("//"+L+"/activity/?|||advertiser_id="+e.advertiser_id+";page_id="+e.page_id+";activity_type="+e.activity_type+";sale_amount="+e.sale_amount+";sale_quantity="+e.sale_quantity+";sale_currency="+e.sale_currency+";customer_user_id="+e.customer_user_id+";http_secure="+C.location.protocol+";save_last_url="+(e.save_last_url?"true":"false")+";|"+i+"|"+this.rand()+"|")},P.prototype.getTrackedUrl=function(e,t,i,n){i=i||{};var o=(void 0===i.c1?"":i.c1.toString()).replace(/;/g,","),a=(void 0===i.c2?"":i.c2.toString()).replace(/;/g,","),r=(void 0===i.c3?"":i.c3.toString()).replace(/;/g,","),s=(void 0===i.c4?"":i.c4.toString()).replace(/;/g,","),l=(void 0===i.c5?"":i.c5.toString()).replace(/;/g,","),c=(this.globalOptions.l_id?this.globalOptions.l_id.toString():"").replace(/;/g,","),d=void 0===i.firstOnAd?"":i.firstOnAd?1:0,p=void 0===i.firstOnUnit?"":i.firstOnUnit?1:0,u=void 0===i.duration?"":i.duration.toString(),m=void 0===i.fail_reason?"":i.fail_reason.toString(),h=void 0===i.detail?"":i.detail.toString(),f=";c1="+o+";c2="+a+";c3="+r+";c4="+s+";c5="+l+";l_id="+c+";duration="+u+";first_on_ad="+d+";first_on_unit="+p+";detail="+h+";error="+m;i.campaignIdAlliance&&(f+=";campaign_id="+i.campaignIdAlliance),i.adIdAlliance&&(f+=";ad_id="+i.adIdAlliance),i.creativeIdAlliance&&(f+=";creative_id="+i.creativeIdAlliance);var v=C.piximedia._.contextBySP?C.piximedia._.contextBySP[this.siteId+"/"+this.placementId]:void 0;return v||(v=W.toString(),C.piximedia._.contextBySP=C.piximedia._.contextBySP||{},C.piximedia._.contextBySP[this.siteId+"/"+this.placementId]=v),(this.globalOptions.protocol||"http")+"://"+L+"/event/?P|"+this.siteId+"|"+this.placementId+"|event="+e+f+(n?";ticket="+n.ticket+";signature="+n.signature:"")+"|"+v+"|"+this.rand()+"|click="+t},P.prototype.loadEvent=function(e,t,i,n){switch(n=n||{},e){case"IMPRESSION":case"CLICK":break;default:if(this.numberOfEventsSent[e]=(this.numberOfEventsSent[e]||0)+1,this.numberOfEventsSent[e]>=50){if(50!==this.numberOfEventsSent[e])return;n.detail=(n.detail||"").toString()+":"+e,e="TOO_MANY_EVENTS"}}!t||i&&i.ticket&&i.signature||n.noTicket||this.globalOptions.noTicket||!this.mode.match(/^alliance/)||o("Required ticketInfos");var a,r=C.piximedia._.contextBySP?C.piximedia._.contextBySP[this.siteId+"/"+this.placementId]:void 0;if(r||(r=W.toString(),C.piximedia._.contextBySP=C.piximedia._.contextBySP||{},C.piximedia._.contextBySP[this.siteId+"/"+this.placementId]=r),t&&t.params)a=";"+t.params;else{var s=(void 0===n.c1?"":n.c1.toString()).replace(/;/g,","),l=(void 0===n.c2?"":n.c2.toString()).replace(/;/g,","),c=(void 0===n.c3?"":n.c3.toString()).replace(/;/g,","),d=(void 0===n.c4?"":n.c4.toString()).replace(/;/g,","),u=(void 0===n.c5?"":n.c5.toString()).replace(/;/g,","),m=(void 0===this.globalOptions.l_id?"":this.globalOptions.l_id.toString()).replace(/;/g,","),h=void 0===n.firstOnAd?"":n.firstOnAd?1:0,f=void 0===n.firstOnUnit?"":n.firstOnUnit?1:0,v=void 0===n.duration?"":n.duration.toString(),g=void 0===n.fail_reason?"":n.fail_reason.toString(),y=void 0===n.detail?"":n.detail.toString();a=";c1="+s+";c2="+l+";c3="+c+";c4="+d+";c5="+u+";l_id="+m+";duration="+v+";first_on_ad="+h+";first_on_unit="+f+";detail="+y+";error="+g,t&&(a+=";campaign_id="+t.campaignIdAlliance+";ad_id="+t.adIdAlliance+";creative_id="+t.creativeIdAlliance)}this.globalOptions.serialId&&(a+=";serial_id="+this.globalOptions.serialId);var b;if(n.prefixURI)b=!1;else switch(e){case"IMPRESSION":case"CLICK":case"AP_NAVIGATION":case"AP_NAV_10":case"AP_NAV_30":b=!1;break;default:b=!1}if(b){var w=this,x=a+(i?";ticket="+i.ticket+";signature="+i.signature:"");this.pixelQueue[x]=this.pixelQueue[x]||[],this.pixelQueue[x].push(e),this.pixelQueueTimer||(this.pixelQueueTimer=setTimeout(function(){w.pixelQueueTimer=void 0;var e=w.pixelQueue;w.pixelQueue=[];for(var t in e)e.hasOwnProperty(t)&&p("//"+L+"/eventq/?P|"+w.siteId+"|"+w.placementId+"|eventq="+e[t].join(",")+t+"|"+r+"|"+w.rand()+"|")},1500))}else p((n.prefixURI||"")+"//"+L+"/event/?P|"+this.siteId+"|"+this.placementId+"|event="+e+a+(i?";ticket="+i.ticket+";signature="+i.signature:"")+"|"+r+"|"+this.rand()+"|");switch(e){
case"CLICK":case"AP_NAVIGATION":case"AP_NAV_10":case"AP_NAV_30":p("//"+L+"/profile/location.php?e="+e+"&p="+escape(a))}switch(e){case"JS:POSITION_USED":var k=(n.detail||"").toString(),S=Math.random()<B;if(k){var I=this.mode+"/"+this.siteId+"/"+this.placementId+"/"+k,E=this.getTopmostWindow();if(E.pmTimePositions&&E.pmTimePositions[I]){var A=E.pmTimePositions[I];if(A.events=A.events||{},!A.events[e]){A.events[e]=!0;var T,_=Math.round((new Date-A.date)/1e3);if(_>=0&&120>_){switch(e){case"JS:POSITION_USED":T="JS:DELAY:POSITION_USED"}var O=W.getData();if(S&&this.loadEvent(T,t,i,{detail:k,duration:_,c1:O.browser_name,c2:O.browser_major_version}),"JS:POSITION_USED"===e&&E.performance&&E.performance.timing&&E.performance.timing.responseStart){var N=new Date(E.performance.timing.responseStart);_=Math.round((A.date-N)/1e3),_>=0&&120>_&&S&&this.loadEvent("JS:DELAY:POSITION",t,i,{detail:k,duration:_,c1:O.browser_name,c2:O.browser_major_version})}}}}}}setTimeout(function(){P.emit("event",e,t,n)},0)},P.prototype.getDomainPartForCookies=function U(){if(U.cache)return U.cache;try{var e=this.getDocumentAndWindowInfos().window;switch(e.location.protocol){case"http:":case"https:":return U.cache="domain=."+e.location.hostname.split(".").slice(-2).join(".")+"; "}}catch(t){}return""},P.prototype.getTopmostWindow=function(){return this.getDocumentAndWindowInfos().window},P.prototype.watchForRemoval=function(e,t){var i=this;if(this.safari||this.chrome)e.addEventListener("DOMNodeRemovedFromDocument",t);else var n=setInterval(function(){return i.isInDOM(e)?void 0:(clearInterval(n),t())},500)},P.prototype.isInDOM=function(e){try{for(var t=e,i=0;100>i;i++,t=t.parentNode){if(!t.parentNode)return!1;if("HTML"===t.parentNode.tagName)return!0}}catch(t){return!1}},P.prototype.isInHead=function(e){for(var t=e,i=0;100>i;i++,t=t.parentNode){if(!t.parentNode)return!1;if("HEAD"===t.parentNode.tagName)return!0;if("HTML"===t.parentNode.tagName)return!1}},P.prototype.getTopmostDocument=function(){return this.getDocumentAndWindowInfos().document},P.prototype.loadLibraries=function(e,t){var i=this,n=function(){try{return t.call(i)}catch(e){return void o("Caught exception when calling loadLibraries() callback: "+e)}},a=e.length;if(!a)return n();for(var r=function(){return--a?void 0:n()},s=0;s<e.length;s++)this.loadLibrary(e[s],r)},P.prototype.getPmLoaderDoc=function(){var e,t=this.getTopmostDocument();if(this.msie&&this.msie<8)e=t;else{var i=t.getElementById("pmFiFLoader");if(!i){var n,o=t.getElementsByTagName("head")[0];i=t.createElement("iframe"),i.id="pmFiFLoader";var a=t.createElement("iframe"),r=t.createElement("iframe");a.id="pmFiFLoader_protect_before",r.id="pmFiFLoader_protect_after",a.className="this_should_be_empty web_designer",r.className="this_should_be_empty web_designer",o.appendChild(a),o.appendChild(i),o.appendChild(r);try{n=i.contentWindow,e=i.contentDocument||i.contentWindow.document}catch(s){var l=this.getTopmostDocument();try{i.src="javascript:document.write('<head><script>document.domain=\""+l.domain+"\";</script></head><body></body>')",e=i.contentDocument||i.contentWindow.document,n=i.contentWindow}catch(s){i.src="javascript:document.write('<head><script>document.domain=\""+i.ownerDocument.domain+"\";</script></head><body></body>')",e=i.contentDocument||i.contentWindow.document,n=i.contentWindow}}e.write("<html><head></head><body><script>setTimeout(function(){document.close();},0);</script></body></html>"),i.contentWindow._piximediaIsFiFLoader=!0}i.contentWindow.piximedia=i.contentWindow.piximedia||C.piximedia,e=i.contentDocument||i.contentWindow.document}return e},P.prototype.loadLibrary=function(e,t){if(l(e))return this.loadLibraries(e,t);var n,a=this,r=function(){try{return t.apply(a,arguments)}catch(i){return void o("Caught exception when calling loadLibrary() callback for "+e+": "+i)}},s=C.piximedia.libraryLoader=C.piximedia.libraryLoader||{};if(s.hasOwnProperty(e))n=s[e],n.loaded?r():n.callbacks.push(r);else{if(!this.globalOptions.libs){var c=W.getData();this.loadEvent("PANIC",void 0,void 0,{fail_reason:"no_libs",c1:c.browser_name})}var d=(this.globalOptions.libs||{})[e];d||(d="//"+M+"/lib/"+e+(R?"/debug":"")),n=s[e]={callbacks:[r]};var p=this.getPmLoaderDoc(),u=p.createElement("script");u.src=d;var m,h,f=function(){if(!n.loaded){n.loaded=!0;for(var t=n.callbacks,o=0;o<t.length;o++)t[o]();var r=setInterval(function(){if(!a.isInDOM(u)){var t=W.getData();a.loadEvent("PANIC",void 0,void 0,{fail_reason:"loader_winlost",c1:t.browser_name}),i("No longer in DOM: "+e),n.loaded=!1,delete s[e],clearInterval(r),a.loadLibrary(e,function(){i("Back in DOM: "+e)})}},50)}},v=function(){n.complete&&f()},g=function(){n.complete&&(h.clearInterval(m),f())};n.onloads=n.onloads||[],n.onloads.push(g);var y=function(){var e=p.getElementsByTagName("head")[0];if(e){e.appendChild(u);var t=a.getTopmostWindow();h=t,m=h.setInterval(g,50)}else C.setTimeout(y,50)};u.addEventListener?u.addEventListener("load",v,!1):u.readyState&&(u.onreadystatechange=v),y()}},P.prototype.loadCSSs=function(e,t){var i=this,n=function(){try{return t.call(i)}catch(e){return void o("Caught exception when calling loadCSSs() callback: "+e)}},a=e.length;if(!a)return n();for(var r=function(){return--a?void 0:n()},s=0;s<e.length;s++)this.loadCSS(e[s],r)},P.prototype.loadCSS=function(e,t){if(l(e))return this.loadCSSs(e,t);var i,n=this,a=function(){if(t)try{return t.apply(n,arguments)}catch(i){return void o("Caught exception when calling loadLibrary() callback for "+e+": "+i)}},r=C.piximedia.cssLoader=C.piximedia.cssLoader||{};if(r.hasOwnProperty(e))i=r[e],i.loaded?i.callCallback(t):i.callbacks.push(a);else{var s=this.globalOptions.css[e];if(!s)throw new Error("Unknown CSS: "+e);i=r[e]={callbacks:[a]};var c=this.getPmLoaderDoc(),d=c.createElement("script");d.src=s;var p=function(){if(!i.loaded){i.loaded=!0;for(var e=i.callbacks,t=0;t<e.length;t++)i.callCallback(e[t])}},u=function(){i.complete&&p()};i.onloads=i.onloads||[];var m,h,f=function(){i.complete&&(h.clearInterval(m),p())};i.onloads.push(f);var v=function(){var e=c.getElementsByTagName("head")[0];if(e){e.appendChild(d);var t=n.getTopmostWindow();h=t,m=h.setInterval(f,50)}else C.setTimeout(v,50)};d.addEventListener?d.addEventListener("load",u,!1):d.readyState&&(d.onreadystatechange=u),v()}},P.prototype.loadCSSInDocument=function(e,t,i){this.loadCSS(e,function(e){return e.loadCSSInDocument(t),i()})},P.prototype.getDocumentAndWindowInfos=function H(){if(H._cache)return H._cache;var e,t={};if(!t.window)try{e=C.parent.parent.parent.document,e._piximediaiframetest=!0,t.window=C.parent.parent.parent.window}catch(i){}if(!t.window)try{e=C.parent.parent.document,e._piximediaiframetest=!0,t.window=C.parent.parent.window}catch(i){}if(!t.window)try{e=C.parent.document,e._piximediaiframetest=!0,t.window=C.parent.window}catch(i){}if(t.window||(t.window=window),!t.document)try{e=C.parent.parent.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}if(!t.document)try{e=C.parent.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}if(!t.document)try{e=C.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}return t.document||(t.document=document),(!this.msie||this.msie>8)&&(H._cache=t),t},P.prototype.hello=function(e){var t=this;if(!e.implicit&&this.master){var n=this.globalOptions.autoFacetDevice;switch(this.globalOptions.autoFacetPosition){case"shuffle":case"sequence":var a=this.facets[this.currentFacetIndex++];this.currentFacetIndex>=this.facets.length&&(this.currentFacetIndex=0),e.positionId+="."+a;break;case"device":n=!0}n&&(e.positionId+="."+t.globalOptions.device)}if(t.globalOptions.addFacets&&(e.positionId+="."+t.globalOptions.addFacets.join(".")),i(e.positionId?'hello({positionId:"'+e.positionId+'"})':"hello()"),e||o("Missing options"),this.globalOptions.positionsUniqueOnPage&&c(this.globalOptions.positionsUniqueOnPage,e.positionId)>=0)for(var r in window.piximedia._.pams)if(window.piximedia._.pams.hasOwnProperty(r)&&r.match(/^pam/)){var s=window.piximedia._.pams[r];if(s&&s!==this&&s.positions&&s.positions[e.positionId]&&s.positions[e.positionId].used)return o("Cannot register "+e.positionId+" because another PAM has a used footer"),void this.loadEvent("PANIC",void 0,void 0,{fail_reason:"registered_multiple_"+e.positionId})}if(e.implicit){if(this.master){var l=function(e){if(e){"string"==typeof e&&t.loadPixel(e);for(var i=0;i<e.length;i++)t.loadPixel(e[i])}},d={};d[e.positionId]={positionId:e.positionId};for(var u in t.globalOptions.positionArgs||{})if(t.globalOptions.positionArgs.hasOwnProperty(u)&&t.queryPosition(u,{positions:d}).length){var m=t.globalOptions.positionArgs[u],h=m["tracking.position"],f=m["tracking.placement"];h&&(l(h.pixelUrl),e.advertiserClickUrl=((h["tracking.position"]||{}).clickUrl||[])[0]||e.advertiserClickUrl);var v=t.globalOptions.l_id||"";p("//"+L+"/event/?P|"+t.siteId+"|"+t.placementId+"|event=JS:POSITION:IMPLICIT;l_id="+v+";detail="+e.positionId+"||"+Math.random()+"|");try{var g=t.getTopmostWindow(),b=t.mode+"/"+t.siteId+"/"+t.placementId;g._piximedia=g._piximedia||{},g._piximedia.pixelSPSent=g._piximedia.pixelSPSent||{},g._piximedia.pixelSPSent[b]||(g._piximedia.pixelSPSent[b]=!0,f&&l(f.pixelUrl),p("//"+L+"/event/?P|"+t.siteId+"|"+t.placementId+"|event=JS:PLACEMENT;l_id="+v+";detail="+e.positionId+"||"+Math.random()+"|"))}catch(w){}break}}}else this.numberOfExplicitPositions++;if(this.mode.match(/^alliance/)&&!this.globalOptions.inline&&!this.globalOptions.enableRTA&&!this.globalOptions.legacyPosition)switch(e.positionId){case"default":case"footer":break;default:this.loadEvent("PANIC",void 0,void 0,{fail_reason:"registered_position_"+e.positionId+"_without_RTA_support"})}if(e.masterPositionId){var x=this.positions[e.masterPositionId];x&&(e.clickUrl||(e.clickUrl=x.clickUrl),e.advertiserClickUrl||(e.advertiserClickUrl=x.advertiserClickUrl))}if(!e.virtual&&this.globalOptions.virtualPositions&&this.globalOptions.virtualPositions.hasOwnProperty(e.positionId)&&(e.virtual=this.globalOptions.virtualPositions[e.positionId]),e.document,e.document&&!e.id&&!e.virtual)if(e.id="pixiMarker"+Math.round(1e16*Math.random()),e.element){var k=e.element.ownerDocument,I=k.createElement("div");I||o("markerDiv is not as real as expected: "+JSON.stringify(I)),I.id=e.id,this.isInHead(e.element)||!t.isInDOM(e.element)?(e.element.ownerDocument.body||e.element.ownerDocument.write("<body>"),e.element.ownerDocument.body.appendChild(I)):e.element.parentNode.insertBefore(I,e.element)}else e.document.write('<div style="display:none" id="'+e.id+'"></div>');var P,E=e.positionId;if(e.implicit||(t.explicitlyRegisteredPositionIds[E]=!0),this.positions.hasOwnProperty(E))for(var A=2;;A++)if(!this.positions.hasOwnProperty(E+"."+A)){E=E+"."+A,P=A;break}switch((e.virtual||{}).type){case"immediate":if(!e.implicit&&t.master)return o("Virtual position cannot be explicit: "+E),t.loadEvent("PANIC",void 0,void 0,{detail:E,fail_reason:"virtual_immediate_cannot_be_explicit"}),void setTimeout(function(){t.registerVirtualPositions()},0);break;case"override":if(P)return o("Virtual override cannot be multiple: "+E),void t.loadEvent("PANIC",void 0,void 0,{detail:E,fail_reason:"virtual_override_cannot_be_multiple"})}i("Registering position "+E+" on "+(this.master?"master pam":"hosted pam"));var T=new Date;this.firstPositionRegisteredAt||(this.firstPositionRegisteredAt=T);var _=this.positions[E]=new S(this,{positionId:E,registeredAt:T,active:!0,id:e.id,clickUrl:t.globalOptions.disablePublisherCC?"":e.clickUrl||this.clickUrl||"",advertiserClickUrl:e.advertiserClickUrl,document:e.document,window:e.window,implicit:e.implicit,virtual:e.virtual,injectionIndex:e.injectionIndex,pageContainerWidth:e.pageContainerWidth,decoratedAt:e.decoratedAt?new Date(e.decoratedAt):void 0,allAdvertiserClickUrls:e.allAdvertiserClickUrls,allClickUrls:e.allClickUrls,alwaysHosted:e.alwaysHosted,inlineScript:e.inlineScript,passbackSrc:e.passbackSrc,dynamicArgs:e.dynamicArgs});e.alwaysHosted&&(this.somePositionsAreAlwaysHosted=!0),y.forObject(_),e.window&&!e.window.piximedia&&(e.window.piximedia=C.piximedia),void 0!==e.implicit&&(_.implicit=e.implicit),"footer"!==E&&this.globalOptions.enableFooter&&this.positions.footer&&!this.positions.footer.clickUrl&&e.clickUrl&&!t.globalOptions.disablePublisherCC&&(this.positions.footer.clickUrl=e.clickUrl),e.ajax||(this.positionCurrentlyInline=E),e.last&&this.stopWaitingForOtherPositions(),_.implicit||t.registerVirtualPositions(),this.emitLocal("pre-hello",_);var O={};if(O[E]={positionId:E},e.activateAds!==!1){var N,F=!1,D={};D[E]=_;for(var M=0;M<this.availableAds.length;M++){var R=this.availableAds[M];if(R.active){if(R.require&&R.require.positions&&this.queryPositions(R.require.positions,{positions:D,notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length){F=!0,N=R;break}if(R.use&&R.use.positions&&this.queryPositions(R.use.positions,{conditionPositions:this.positions,positions:D,notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length){F=!0,N=R;break}}else if(R.require&&R.require.positions){var j=!!this.queryPositions(R.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length,B=!!this.queryPositions(R.require.positions,{spaceIsOr:!0,positions:O}).length;if(B&&!j&&this.loadEvent("DEBUG:PRED20160219"),j&&B){if(this.queryPositions(R.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,requireAll:!0}).length){F=!0,N=R;break}if(!this.performedRendezVous){F=!0,this.scheduleRendezVous();break}}else if(R.use&&R.use.positions&&this.queryPositions(R.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length&&!this.performedRendezVous){F=!0,this.scheduleRendezVous();break}}else if(R.use&&R.use.positions){var V=!!this.queryPositions(R.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0,onlyActive:!0}).length;if(V){F=!0,N=R;break}}}if(F&&N)if(N.passback||this.numberOfExplicitPositions||this.globalOptions.allowActiveAdsWithNoExplicitPositions)if(N.active&&!N.disabled){if(N.active){_.requested=!0,_.requestedBy=N;var W=N.emitLocal("hello",_);_.used=!0,_.justUsed&&_.justUsed(),_.decoratedBy=N,!_.implicit&&this.mode.match(/^alliance/)&&_.loadEvent("JS:POSITION_USED",{detail:E}),W||(i("Pushing position "+_.positionId),N.positions.push(_))}}else this.activateAd(N);else this.performedRendezVous||this.scheduleRendezVous();if(t.globalOptions.reportPositionWithNoAds&&!_.implicit){var q,U,H,z=t.availableAds.length,J="",G=0;for(var X in t.positions)if(t.positions.hasOwnProperty(X)){var $=t.positions[X];if(J+=X+($.used?".USED,":".NOTUSED,"),++G>4)break}if(t.availableAds.length){var K=t.availableAds[0];q=((K.require||{}).positions||[])[0],U=((K.use||{}).positions||[])[0],H="active="+(K.active?1:0)+","}var Y=setInterval(function(){(!t.scheduledRendezVous||t.performedRendezVous)&&(clearInterval(Y),(!_.used||_.decoratedBy&&_.decoratedBy.passback)&&t.loadEvent("JS:NO_ADS",void 0,void 0,{detail:_.positionId,c1:z,c2:q,c3:U,c4:H,c5:J}))},500)}}return this.positionCurrentlyInline=void 0,this.decorativeAds.length&&_.id&&(i("schedule rendez-vous because of decorative ads"),this.scheduleRendezVous()),this.emitLocal("post-hello",_),this.master&&_.positionId.match(/^1x1\b/)&&this.globalOptions.enableImplicitTakeover&&!this.registeredImplicitTakeover&&(this.registeredImplicitTakeover=!0,setTimeout(function(){t.hello({implicit:!0,ajax:!0,positionId:"takeover",advertiserClickUrl:_.advertiserClickUrl,clickUrl:_.clickUrl})},0)),this.master&&setTimeout(function(){_.used||_.sentBlank||_.implicit||(_.sentBlank=!0,t.loadEvent("JS:BLANK",void 0,void 0,{detail:_.positionId}),t.globalOptions.reportPositionWithNoAds&&t.loadEvent("JS:BLANK:UNEXPECTED",void 0,void 0,{detail:_.positionId}))},1e4),_},P.prototype.registerVirtualPositions=function(){var e=this;if(e.globalOptions.virtualPositions){var t,n=e.getTopmostDocument(),o=e.getTopmostWindow(),a=!1;for(var r in e.positions)if(e.positions.hasOwnProperty(r)){var s=e.positions[r];if(!s.implicit&&s.clickUrl){t=s.clickUrl;break}}var l=[];for(var c in e.globalOptions.virtualPositions)if(e.globalOptions.virtualPositions.hasOwnProperty(c)){if(e.positions.hasOwnProperty(c))continue;var d=e.globalOptions.virtualPositions[c];if(d.prerequisite&&!(e.queryPositions(d.prerequisite)||[]).length)continue;"override"!==d.type&&(d.immediate||"immediate"===d.type||e.performedRendezVous||d.prerequisite?(i("Registering virtual position"),l.push({siteId:e.siteId,placementId:e.placementId,positionId:c,clickUrl:t,document:n,window:o,id:null,ajax:!0,implicit:!0,virtual:d,advertiserClickUrl:((d["tracking.position"]||{}).clickUrl||[])[0]})):a=!0)}if(1===l.length)e.hello(l[0]);else if(l.length>1){for(var p=0;p<l.length;p++){var u=l[p];u.activateAds=!1,e.hello(u)}e.tryAndActivateAds()}a&&(i("Scheduling rendez-vous for non-immediate virtual position"),e.scheduleRendezVous())}},P.prototype.tryAndActivateAds=function(e){i("try and activate ads");var t=this;e=e||{};for(var n=[],o=function(e){return function(){e.passback||t.numberOfExplicitPositions||t.globalOptions.allowActiveAdsWithNoExplicitPositions?t.activateAd(e):t.performedRendezVous||t.scheduleRendezVous()}},a=0;a<this.availableAds.length;a++){var r=this.availableAds[a];if(!r.active){var s=o(r);if(r.require&&r.require.positions){var l=!!this.queryPositions(r.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length;if(l){var c=!!this.queryPositions(r.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,requireAll:!0}).length;c?s():this.performedRendezVous||(n.push(r),this.scheduleRendezVous())}}else if(r.use&&r.use.positions&&r.use.positions.length&&!e.onlyConsiderRequires){var d=this.queryPositions(r.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0,onlyActive:!0});if(d.length){var p=!1;e:for(var u=0;u<n.length;u++){var m=n[u],h=!1,f=!1;if(m.require&&m.require.positions&&(h=!!this.queryPositions(m.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,seekOverlapWith:d}).length),m.use&&m.use.positions&&(f=!!this.queryPositions(m.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,seekOverlapWith:d}).length),h||f){p=!0;break e}}p||s()}}}}if(!this.scheduledRendezVous||this.performedRendezVous){var v=function(e){setTimeout(function(){e.used||e.sentBlank||e.implicit||(e.sentBlank=!0,t.loadEvent("JS:BLANK",void 0,void 0,{detail:e.positionId}),t.globalOptions.reportPositionWithNoAds&&t.loadEvent("JS:BLANK:UNEXPECTED",void 0,void 0,{detail:e.positionId}))},1e4)};for(var g in this.positions)this.positions.hasOwnProperty(g)&&v(this.positions[g])}},P.prototype.scheduleRendezVous=function(){var e=this;this.scheduledRendezVous||(i("Schedule rendez-vous"),this.scheduledRendezVous=!0,this.globalOptions.rendezvous_fast_duration&&(this.timeoutRendezVousFast=setTimeout(function(){i("Rendez-vous fast!"),e.tryAndActivateAds(),e.on("post-hello",function(){e.performedRendezVous||setTimeout(function(){e.tryAndActivateAds()},0)})},this.globalOptions.rendezvous_fast_duration)),this.timeoutRendezVous=setTimeout(function(){e.timeoutRendezVous=void 0,this.timeoutRendezVousFast&&(clearTimeout(this.timeoutRendezVousFast),this.timeoutRendezVousFast=void 0),i("Rendez-vous!"),e.performedRendezVous=!0,e.registerVirtualPositions(),e.tryAndActivateAds(),setTimeout(function(){e.sendStatistics()},2e3)},this.globalOptions.rendezvous_duration||F))},P.prototype.sendStatistics=function(){if(!this.sentStatistics&&(this.sentStatistics=!0,this.mode.match(/^alliance/)&&this.master&&!C.piximedia.preview)){for(var e=(this.globalOptions.context||{}).alliance_rtapos?",had_rta_pos":",no_rta_pos",t=f(this.explicitlyRegisteredPositionIds).length,i=f(this.explicitlyRegisteredPositionIds).sort().slice(0,10),n=f(this.positions).sort().slice(0,10),o=[],a=[],r=0;r<i.length;r++){var s=i[r].replace(/\.[0-9]+/,"");-1===c(o,s)&&o.push(s)}o=o.join(",");for(var l=0;l<n.length;l++){var d=n[l].replace(/\.[0-9]+/,"");-1===c(a,d)&&a.push(d)}a=this.numberOfExplicitPositions||this.globalOptions.allowActiveAdsWithNoExplicitPositions?a.join(","):"";var p=this.numberOfActiveAds||0;p>=3&&(p="3MORE");var u=this.realAds.length;if(u>=10?u="10MORE":u>=5?u="5-10":u>0&&(u="1-4"),this.loadEvent("JS:STATS",void 0,void 0,{c1:p||0,c2:u,c3:e,c4:o,c5:a,duration:t}),!this.numberOfActiveAds)for(var m=0;m<this.allAvailableAds.length;m++){var h=this.allAvailableAds[m];if(!h.passback&&h.args&&h.args.not_enough_pos_pixel){this.loadPixel(h.args.not_enough_pos_pixel);break}}}},P.prototype.stopWaitingForOtherPositions=function(){i("We no longer expect other positions"),this.timeoutRendezVousFast&&(clearTimeout(this.timeoutRendezVousFast),this.timeoutRendezVousFast=void 0),this.timeoutRendezVous&&(clearTimeout(this.timeoutRendezVous),this.timeoutRendezVous=void 0),this.scheduledRendezVous=!0,this.performedRendezVous=!0},P.prototype.queryPositions=function(e,t){"string"==typeof e&&(e=[e]),t=t||{};for(var i=[],n=0;n<e.length;n++){var o=this.queryPosition(e[n],t);if(t.requireAll&&!o.length)return[];if(t.seekOverlapWith)for(var a=0;a<o.length;a++)-1===c(i,o[a])&&-1!==c(t.seekOverlapWith,o[a])&&i.push(o[a]);else for(var r=0;r<o.length;r++)-1===c(i,o[r])&&i.push(o[r])}if(t.onlyActive){for(var s=[],l=0;l<i.length;l++)i[l].active&&s.push(i[l]);i=s}return i},P.prototype.parseRequestedPositions=function(e){l(e)||(e=[e]);for(var t=[],i=0;i<e.length;i++)for(var n=e[i].split(","),o=0;o<n.length;o++)for(var a=n[o],r=a.split(" "),s=0;s<r.length;s++){var d=r[s];if(d){var p=d.split(":"),u=p[0];-1===c(t,u)&&t.push(u)}}return t},P.prototype.queryPosition=function(e,t){if("string"!=typeof e)return this.queryPositions(e);var i,n=e.split(/ *=> */);if(n&&n.length>=2){for(var o=0;o<n.length-1;o++){var a=n[o];if(!t.ignoreConditions&&!this.queryPosition(a,{positions:t.conditionPositions||t.positions||this.positions}).length)return[]}i=n[n.length-1]}else i=e.replace(/, +/g,",");t=t||{};var r=t.positions||this.positions,s=i.split(" "),l=[];e:for(var d=0;d<s.length;d++){var p=s[d];if(p){for(var u=p.split(","),m=[],h=0;h<u.length;h++){var f=u[h];if(f)for(var v=A(f,t,r,this.globalOptions.isRedirect),g=0;g<v.length;g++)m.push(v[g])}if(!m.length&&!t.seekOverlapWith&&!t.spaceIsOr){l=[];break e}for(var y=0;y<m.length;y++)l.push(m[y])}}var b=[];if(t.seekOverlapWith)for(var w=0;w<l.length;w++)-1===c(b,l[w])&&-1!==c(t.seekOverlapWith,l[w])&&b.push(l[w]);else for(var x=0;x<l.length;x++)-1===c(b,l[x])&&b.push(l[x]);return b},P.prototype.addEvent=function(e,t,i){if(e)if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else if(e["on"+t]){if("function"==typeof e["on"+t]){var n=e["on"+t];e["on"+t]=function(){i.apply(e,arguments),n.apply(e,arguments)}}}else e["on"+t]=i},P.prototype.removeEvent=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]===i&&(e["on"+t]=null)},P.prototype.waitTopDomLoaded=function(e){if(!this.master){var t="waitTopDomLoadedCallback"+this.rand();return this.emit("wait-top-dom-loaded",{callbackId:t})}var i=this.getTopmostWindow(),n=i.document,o=this,a=!1,r=function(){return a?void 0:(a=!0,"function"==typeof e?void e.apply(o):"string"==typeof e?void window[e].apply(o):!1)},s=function(){"complete"===n.readyState&&(n.detachEvent("onreadystatechange",s),r())};if("interactive"===n.readyState||"complete"===n.readyState)return void r();if(n.addEventListener?n.addEventListener("DOMContentLoaded",function(){r()},!1):n.all&&!C.opera&&n.attachEvent&&n.attachEvent("onreadystatechange",s),/Safari/i.test(navigator.userAgent))var l=i.setInterval(function(){/loaded|complete/.test(n.readyState)&&(r(),i.clearInterval(l))},50);this.addEvent(i,"load",r,!1)},P.prototype.waitDomLoaded=function z(e){var t=this,i=!1,n=function(){return i?void 0:(z.once=!0,i=!0,"function"==typeof e?void e.apply(t):"string"==typeof e?void window[e].apply(t):!1)},o=function(){"complete"===T.readyState&&(T.detachEvent("onreadystatechange",o),n())};if(z.once||"interactive"===T.readyState||"complete"===T.readyState)return void n();if(T.addEventListener?T.addEventListener("DOMContentLoaded",function(){n()},!1):T.all&&!C.opera&&T.attachEvent&&T.attachEvent("onreadystatechange",o),/Safari/i.test(navigator.userAgent))var a=t.getTopmostWindow(),r=a.setInterval(function(){/loaded|complete/.test(T.readyState)&&(n(),a.clearInterval(r))},50);this.addEvent(C,"load",n,!1)},P.prototype.waitDomMutable=function(e){var t=this;this.waitDomLoaded(function(){if(t.msie&&t.msie<=8&&-1===navigator.userAgent.search("Trident/"))var i=t.getTopmostDocument(),n=t.getTopmostWindow(),o=n.setInterval(function(){"complete"===i.readyState&&(n.clearInterval(o),e.apply(t))},50);else e.apply(t)})},P.prototype.getMarkerForPosition=function(e){var t;return this.loadMarkerForPosition(e,function(e){t=e}),t},P.prototype.loadMarkerForPosition=function(e,t){var i=this;if("function"!=typeof t&&o("cb should be a function"),"string"==typeof e){var n=this.queryPosition(e);if(1!==n.length)return t();e=n[0]}if(e.virtualMarker)return this.isInDOM(e.virtualMarker)?t(e.virtualMarker,e.virtualMarker2||e.virtualMarker):t(e.virtualMarker=e.virtualMarker.ownerDocument.getElementById(e.virtualMarker.id));var a,r,s=function(){var t,n=i.getTopmostWindow(),o=n.document;if(e.virtual.javascript)if(i.master){var r;try{r=n.localStorage.getItem("pixi_test_virtual_js_"+e.positionId)}catch(s){}r||(r=e.virtual.javascript);try{t=new Function("return function(document, window) {\n"+r+"\n}")()(o,n)}catch(s){}}else t=document.body;else e.virtual.getContainer&&(t=e.virtual.getContainer());if(t){var l=t.ownerDocument.createElement("div");e.id=l.id="pixiMarkerVirtual"+Math.round(1e16*Math.random()),t.appendChild(l),e.marker=e.virtualMarker=l,a=e.marker}};if(e.virtual&&"override"===e.virtual.type)s();else if(e.id&&e.document){var l=e.document.getElementById(e.id);if(l&&(a=l),e.window||(a=void 0),!a)try{a=e.window.parent.document.getElementById(e.id)}catch(c){a=void 0}if(a){var d=i.getTopmostFiFForElement(a);if(d){d.style.height=0,d.style.display="block",d.style.width=0,(d.id||"").match(/^sas_/)&&(d.className+=" pmIframeContainer",this.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib;e.createCSS(".pmIframeContainer","height: 0 !important; width: 0 !important",d.ownerDocument)})),r=e.virtualMarker2=a;var p=d.ownerDocument.createElement("div");p.id="pixiMarkerTopmostIframe"+Math.round(1e16*Math.random()),g(p),d.parentNode.insertBefore(p,d),a=p}e.virtualMarker=a}}else a=e.marker?e.marker:void 0;if(!a&&e.virtual&&s(),!e.decoratedBy||!e.decoratedBy.shouldBeBeforePageContainer(e)){if(e.decoratedBy&&e.decoratedBy.shouldBeBeforeBody(e)){r=a,e.virtualMarker2=r;var u=i.getTopmostDocument(),m=u.getElementsByTagName("body")[0],h=u.createElement("div");g(h),h.className="pmTakeoverFiller";var f=u.createElement("div"),v=u.createElement("div");return f.appendChild(v),f.className="pmBodyPosition pmCentered",v.id="pixiMarkerBody"+Math.round(1e16*Math.random()),m.insertBefore(f,m.firstChild),m.insertBefore(h,f),e.virtualMarker=v,t(v,r)}return t(a)}r=a,e.virtualMarker2=r,this.loadLibrary("sweetlib.js",function(){var n=C.piximedia.SweetLib,o=i.getTopmostDocument();n.loadPageContainer({document:o,hints:i.globalOptions.pagecontainerHints},function(o,a){var s=o.ownerDocument,l=s.createElement("div"),c=s.createElement("div");c.className="pmMarkerContainer",c.id="pixiMarkerPCContainer"+Math.round(1e16*Math.random()),c.appendChild(l),g(c),c.style.position="absolute",c.style.overflow="hidden";var d=n.getScrollbarWidth();i.cssCalc?(c.style.width="calc(100vw - "+d+"px)",c.style.left="50%",c.style.marginLeft="calc(-50vw + "+d/2+"px)"):(c.style.left="50%",setInterval(function(){var e=n.getViewportSize()[0]-d;parseFloat(c.style.minWidth,10)!==e&&(c.style.minWidth=e+"px",c.style.marginLeft=-(e/2)+"px")},50)),l.id="pixiMarkerPC"+Math.round(1e16*Math.random());var p;for(p=o;p&&"pmFiller"!==p.id;p=p.previousSibling);o.parentNode.insertBefore(c,p||o),e.virtualMarker=l,e.pageContainerWidth=a.width;var u=n.getPropertyValue(o,"clear");if("left"===u||"right"===u||"both"===u){var m=c.ownerDocument.createElement("div");g(m),m.style.clear=u,c.parentElement.insertBefore(m,c)}return t(l,r)})})},P.prototype.loadMarkersForPositions=function(e,t){var i=[],n=this,o=0,a=function(){if(o===e.length)return t(i);var r=e[o];n.loadMarkerForPosition(r,function(e){i.push(e),o++,a()})};a()},P.prototype.rand=function(){return Math.round(1e16*Math.random())},P.prototype.htmlentities=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},P.prototype.injectFriendlyContent=function(e,t,n){C.piximedia.callbacks=C.piximedia.callbacks||{};var o,a,l,c=this,d=e.document,p="pmFif"+Math.round(1e16*Math.random()),u=0,m=0,h="callbackWrite"+p,f="callbackOnLoad"+p,v="";i("Injecting friendly contents");var y=t.htmlComments||null;a=new k(this,e,t.iframeOptions||{}),!n||n.iframe||e.hosted||(n.iframe=a),C.piximedia.callbacks[f]=function(e,t){var n=t.name||"untitled";i("["+n+"] Iframe loaded, checking surface ***",o);var r,s=function(){var o,l,h,f,v=e.body;c.globalOptions.ignoreSiteResizes&&(a.iframe&&parseFloat(a.iframe.width,10)&&parseFloat(a.iframe.width,10)>1&&(o=a.iframe.width,a.iframe.width=""),a.iframe&&parseFloat(a.iframe.height,10)&&parseFloat(a.iframe.height,10)>1&&(l=a.iframe.height,a.iframe.height=""),a.iframe&&a.iframe.style&&parseFloat(a.iframe.style.width,10)&&parseFloat(a.iframe.style.width,10)>1&&(h=a.iframe.style.width,a.iframe.style.width=""),a.iframe&&a.iframe.style&&parseFloat(a.iframe.style.height,10)&&parseFloat(a.iframe.style.height,10)>1&&(f=a.iframe.style.height,a.iframe.style.height=""));var g=v.scrollWidth,y=v.scrollHeight;if(c.globalOptions.ignoreSiteResizes&&(void 0!==o&&(a.iframe.width=o),void 0!==l&&(a.iframe.height=l),void 0!==h&&(a.iframe.style.width=h),void 0!==f&&(a.iframe.style.height=f)),g&&y&&g!==u&&y!==m){i("["+n+"] Found surface: "+g+"x"+y),r&&t.clearInterval(r);var b=(d||T).getElementById(p);i("["+n+"] Found iframe: ",b),a.options.doNotResize?i("["+n+"] (not resizing)"):(i("["+n+"] (resizing)"),a.emit("resize",{width:g,height:y,onlyIfNoSurface:!0}))}else r||(r=t.setInterval(s,10))};s()};var b,w="",x="",S="";if(C.piximedia._.iframes=C.piximedia._.iframes||{},C.piximedia._.iframes[p]=a,y&&(x+="<!-- Pixi Begin Javascript: "+y.label+"-->\n"),w+="window.inFIF=true; window.inDapIF=true;\n",w+="window.name="+this.stringify(t.name||"untitled")+";\n",w+="window.pmFIFID="+this.stringify(p)+";\n",w+="window.piximedia = parent.piximedia;\n",w+="window.framedPam = parent.piximedia._.pams["+this.stringify(this.uniqKey)+"];\n",w+="window.framedIframe = parent.piximedia._.iframes["+this.stringify(p)+"];\n",w+="window.pmContext = window.framedPam.globalOptions.context || {};\n",n&&n.injectedOnce&&(w+="window.pmBypassImpression = 1;\n"),n){var I="ad"+this.rand();C.piximedia._.ads=C.piximedia._.ads||{},C.piximedia._.ads[I]=n,w+="window.framedAd = parent.piximedia._.ads["+this.stringify(I)+"];\n",w+="window.framedAd.framedDocument=document;window.framedAd.framedWindow=window;\n"}var P="position"+this.rand();C.piximedia._.positions=C.piximedia._.positions||{},C.piximedia._.positions[P]=e,w+="window.framedPosition = parent.piximedia._.positions["+this.stringify(P)+"];\n",w+="try{for(var pmk in window.piximedia){if(window.piximedia.hasOwnProperty(pmk)){var s=pmk.toString();if(s.match(/^pmData/)){window[s]=window.piximedia[s];}}}}catch(e){}\n";for(var E in C)if(E.toString().match(/^pmData/)){var A=this.stringify(E);w+="window["+A+"] = parent["+A+"];\n"}return t.javascript?(t.javascript=t.javascript.replace(/MACRO_PUBLISHER_CLICK_COMMAND/g,e.clickUrl),b=this.msie?"<script>"+t.javascript+"</script><script>\nfunction pmCloseDocument() { setTimeout(function() { document.close(); }, 200); }\nfunction pmWaitAllScripts(secondTry) { document.pmWaiting = (document.pmWaiting || 0) + 1; var scripts = document.getElementsByTagName('script'), allComplete = true; for(var i = scripts.length - 1; i >= 0; i--) { if(scripts[i].readyState !== 'complete') { allComplete = false; break; } } if(allComplete) { setTimeout(function() { secondTry? pmCloseDocument(): pmWaitAllScripts(true); }, 1000); } else { setTimeout(pmWaitAllScripts, 1000); } }\nsetTimeout(pmWaitAllScripts, 1000);\n</script>":"<script>"+t.javascript+"</script><script>setTimeout(function() { document.close(); }, 200)</script>\n"):t.src&&(t.src=t.src.replace(/MACRO_PUBLISHER_CLICK_COMMAND/g,e.clickUrl),
v+=this.msie?r("<script>\nfunction pmWaitAllScripts(secondTry) { var scripts = document.getElementsByTagName('script'), allComplete = true; for(var i = scripts.length - 1; i >= 0; i--) { if(scripts[i].readyState !== 'complete') { allComplete = false; break; } } if(allComplete) { setTimeout(function() { secondTry? document.close(): pmWaitAllScripts(true); }, 1000); } else { setTimeout(pmWaitAllScripts, 1000); } }\n</script><script src=\""+t.src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+'" onreadystatechange="pmWaitAllScripts()"></script>\n'):s('<script src="'+t.src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+'"></script>\n<script>setTimeout(function() { document.close(); }, 200); </script>\n')),y&&(S+="\n<!-- Pixi End Javascript: "+y.label+"-->"),b?c.msie&&c.msie>6?(C.piximedia.callbacks[h+"_w"]=r("<head></head><body onload='if(parent.piximedia&&parent.piximedia.callbacks){return parent.piximedia.callbacks."+f+"(document,window)}'>\n"+x+"<script>"+w+"</script>\n"+b+S),C.piximedia.callbacks[h]=r("<script>setTimeout(function() { if(parent.piximedia&&parent.piximedia.callbacks)window.location.replace('javascript:new Function(parent.piximedia.callbacks."+h+"_w)()'); }, 0)\n</script>\n")):C.piximedia.callbacks[h]=r("<head></head><body onload='parent.piximedia.callbacks."+f+"(document,window)'>\n"+x+"<script>"+w+"</script>\n"+b+S):C.piximedia.callbacks[h]=s("<head></head>\n<body onload='parent.piximedia.callbacks."+f+"(document,window)'>\n"+x+"<script>"+w+"</script>\n")+v+s(S+"</body>\n"),this.msie&&(u=1,m=1),function(n){return e.positionId===c.positionCurrentlyInline&&e.document&&!c.globalOptions.ajax&&!t.container&&(i("Injecting inline position"),e.document.write('<div style="'+V+'"><iframe allowfullscreen name="'+t.name+'" src="javascript:false" class="pmFiF" id="'+p+'" style="display: block; background: white; height: '+m+"px; width: "+u+'px" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="'+u+'" height="'+m+'"></iframe></div>'),o=e.document.getElementById(p))?n(o):void(o||c.waitDomMutable(function(){!function(i){return t.container?i(t.container):void c.loadMarkerForPosition(e,i)}(function(e,r){if(!e){var s=c.getTopmostDocument();e=s.createElement("div");var d="pixiMarkerAuto"+Math.round(1e16*Math.random());e.id=d,s.body.appendChild(e)}var h=e.ownerDocument;if(o=h.createElement("iframe"),o.name=t.name,o.id=p,o.className="pmFiF",o.style.display="block",o.style.background="white",o.style.height=m+"px",o.style.width=u+"px",o.marginWidth=0,o.marginHeight=0,o.frameBorder=0,o.scrolling="no",o.allowFullscreen=!0,o.width=u,o.height=m,"HEAD"===e.nodeName)e.appendChild(o);else{var f=h.createElement("div");if(f.className="pmFiFContainer pmContainer "+c.containerClassName,g(f),t.container?e.appendChild(f):e.parentNode.insertBefore(f,e),y&&(l=f.ownerDocument.createComment("Pixi Iframe Container: "+y.label),f.parentNode.insertBefore(l,f),l=f.ownerDocument.createComment("Pixi Iframe: "+y.label),f.appendChild(l)),f.appendChild(o),(u||m)&&7!==c.msie){f.style.position="absolute",f.className+=" pmZeroSurface";var v=h.defaultView||h.parentWindow,b=0,w=v.setInterval(function(){var e;try{e=f.getBoundingClientRect()}catch(t){return i("couldn't fetch getBoundingClientRect()"),void(b++>10&&clearInterval(w))}var n=e.right-e.left,o=e.bottom-e.top;n>1&&o>1&&(f.className.match(/pmZeroSurface/)&&(f.className=f.className.replace(/pmZeroSurface/,""),f.style.position="relative"),v.clearInterval(w))},50)}}return r&&c.watchForRemoval(r,function(){a.emit("remove")}),n(o)})}))}(function(e){e.onerror=function(){a.emit("error",arguments)};var t,i=c.getTopmostDocument();try{t=e.contentWindow.document}catch(n){c.debug("Couldn't acess content document, probably because of mismatching document.domain");try{e.src="javascript:document.write('<head><script>document.domain=\""+i.domain+"\";</script></head><body></body>')",t=e.contentDocument||e.contentWindow.document}catch(n){try{c.warn("Couldn't still access document, probably because of still mismatching document.domain"),e.src="javascript:document.write('<head><script>document.domain=\""+e.ownerDocument.domain+"\";</script></head><body></body>')",t=e.contentDocument||e.contentWindow.document}catch(n){c.error("Couldn't REALLY access document :-(")}}t=e.contentDocument||e.contentWindow.document}c.msie?t.open().write("<script>window.location.replace(\"javascript:var x;try{x=parent.piximedia.callbacks;}catch(e){document.domain='"+i.domain+"';}new Function(parent.piximedia.callbacks."+h+')()")</script>'):t.open().write("<script>new Function(parent.piximedia.callbacks."+h+")()</script>"),a.setIframe(e)}),n&&!n.passback&&(a.on("remove",function(){if(!a.doNotSendPixels){if(!a.sentRemoved){a.sentRemoved=!0;var t=e.registeredAt?(new Date-e.registeredAt)/1e3:void 0;e.loadEvent("JS:REMOVED",{detail:e.positionId,duration:t})}n.shouldBeBeforePageContainer(e)&&this.pam.loadLibrary("sweetlib.js",function(){var e=C.piximedia.SweetLib;e.setBodyBackgroundColor({color:null}),e.moveTopOfPageContainer(e.getPageContainer(),0)})}}),a.on("winlose",function _(){_.ids=_.ids||{},a.doNotSendPixels||_.ids[e.positionId]||(_.ids[e.positionId]=!0,e.loadEvent("JS:WINLOSE",{detail:e.positionId}),setTimeout(function(){_.ids[e.positionId]=!1},1e4))})),a},b.prototype.getAllVisibilityForPixiPositionId=function(e){if(!this.visibility)return[];var t={};t[e]={positionId:{}};for(var i in this.visibility)if(this.visibility.hasOwnProperty(i)&&this.pam.queryPositions(i,t).length)return this.visibility[i];return[]},b.prototype.loadLibrary=function(e,t){return l(e)?this.loadLibraries(e,t):void this.pam.loadLibrary(this.args[e]||e,t)},b.prototype.loadLibraries=function(e,t){var i=this,n=function(){try{return t.call(i)}catch(e){return void o("Caught exception when calling loadLibraries() callback: "+e)}},a=e.length;if(!a)return n();for(var r=function(){return--a?void 0:n()},s=0;s<e.length;s++)this.loadLibrary(e[s],r)},b.prototype.shouldHostPosition=function(e){var t=this.remapPositions||{};if(!this.pam.master)return!1;if(this.pam.msie&&this.pam.msie<8)return!1;if(this.pam.safari&&this.pam.safari<7)return!1;if("object"==typeof e&&e.alwaysHosted)return!0;if("string"==typeof e&&(this.pam.positions[e]||{}).alwaysHosted)return!0;var i=this.pam.getTopmostWindow();if("never-host"===i.name)return!1;if(!this.hosted_positions)return!1;var n=this.hosted_positions;"string"==typeof n&&(n=n.split(/ +/));for(var o=0;o<n.length;o++){var a=n[o];for(var r in t)if(t.hasOwnProperty(r)){var s=new RegExp("\\b"+r+"\\b","g");a=a.replace(s,t[r])}var l={};l[e.positionId]=e;var c=!1;if(this.require&&this.require.positions&&this.pam.queryPositions(this.require.positions,{positions:l,seekOverlapWith:[e]}).length&&(c=!0),this.use&&this.use.positions&&this.pam.queryPositions(this.use.positions,{positions:l,seekOverlapWith:[e]}).length&&(c=!0),c&&this.pam.queryPositions(a,{positions:l}).length)return!0}return!1},b.prototype.shouldBeBeforeBody=function(e){if(!this.pam.master)return!1;var t=this.remapPositions||{};if(!this.positions_before_body)return!1;var i=this.positions_before_body;"string"==typeof i&&(i=i.split(/ +/));for(var n=0;n<i.length;n++){var o=i[n];for(var a in t)if(t.hasOwnProperty(a)){var r=new RegExp("\\b"+a+"\\b","g");o=o.replace(r,t[a])}var s={};if(s[e.positionId]=e,this.pam.queryPositions(o,{positions:s}).length)return!0}return!1},b.prototype.shouldBeBeforePageContainer=function(e){if(!this.pam.master)return!1;var t=this.remapPositions||{};if(!this.positions_before_page_container)return!1;var i=this.positions_before_page_container;"string"==typeof i&&(i=i.split(/ +/));for(var n=0;n<i.length;n++){var o=i[n];for(var a in t)if(t.hasOwnProperty(a)){var r=new RegExp("\\b"+a+"\\b","g");o=o.replace(r,t[a])}var s={};if(s[e.positionId]=e,this.pam.queryPositions(o,{positions:s}).length)return!0}return!1},P.prototype.activateAd=function(e,t){var n=this;t=t||{},i("Activating ad: ",e);var r=new Date;if(e.active&&i("Ad was already active"),e.active=!e.alwaysAvailable,!e.passback){if(n.numberOfActiveAds=n.numberOfActiveAds||0,n.numberOfActiveAds++,n.globalOptions.enableActiveAdsCapping&&void 0!==n.globalOptions.numberOfActiveAdsCapping&&n.globalOptions.numberOfActiveAdsCapping>=n.numberOfActiveAds){i("Deactivating other ads because capping was met");for(var s=0;s<n.availableAds.length;s++){var c=n.availableAds[s];c===e||c.passback||c.active||(c.require={positions:["disabled-ad-capping"]},c.disabledBecauseAdCapping=!0,c.disabledBecauseAdCappingLog="active-ads-capping")}}if(n.globalOptions.enableTvCodeProtection&&e.tv_code){i("Deactivating other ads with code "+e.tv_code);for(var d=0;d<n.availableAds.length;d++){var p=n.availableAds[d];p===e||p.passback||p.active||p.tv_code!==e.tv_code||p.campaignId===e.campaignId||(p.require={positions:["disabled-tv-code"]},p.disabledBecauseAdCapping=!0,p.disabledBecauseAdCappingLog="tv-code")}}n.globalOptions.keepAdringForRTA||(T.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",T.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),T.cookie="pixi_adr=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",T.cookie="pixi_adr=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",this.globalOptions.pixiAdrName&&(n.globalOptions.keepAdringForRTA||(T.cookie=this.globalOptions.pixiAdrName+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",T.cookie=this.globalOptions.pixiAdrName+"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"))}if(e.active&&e.use&&e.use.positions&&n.on("hello",function(t){var i={};i[t.positionId]=t,n.queryPositions(e.use.positions,{spaceIsOr:!0,positions:i}).length&&(t.requested=!0,t.requestedBy=e)}),t.positions){e.positions=t.positions;for(var u=0;u<e.positions.length;u++){var m=e.positions[u];this.positions.hasOwnProperty(m.positionId)||(this.positions[m.positionId]=m)}}else{if(e.positions=[],e.require&&e.require.positions)for(var h=this.queryPositions(e.require.positions,{activeAndNotUsed:!0,requireAll:!0}),f=0;f<h.length&&!e.disabled;f++){var g=h[f];g.active&&(i("Associating required position "+g.positionId),g.used=!0,g.decoratedBy=e,g.decoratedAt=r,g.justUsed&&g.justUsed(),e.positions.push(g))}if(e.use&&e.use.positions)for(var y=this.queryPositions(e.use.positions,{activeAndNotUsed:!0,spaceIsOr:!0}),b=0;b<y.length&&!e.disabled;b++){var w=y[b];w.active&&(i("Associating used position "+y[b]),e.positions.push(w))}}for(var x=0;x<e.positions.length;x++)if(e.positions[x].used=!0,e.positions[x].decoratedBy=e,e.positions[x].decoratedAt=r,e.positions[x].justUsed&&e.positions[x].justUsed(),!e.positions[x].implicit&&!e.passback&&this.mode.match(/^alliance/)){var k=e.positions[x];this.master?void 0===k.injectionIndex&&k.loadEvent("JS:POSITION_USED",{detail:k.positionId}):k.loadEvent("JS:POSITION_USED:HOSTED",{detail:k.positionId})}if(this.master){var S=function(e){if(e){"string"==typeof e&&n.loadPixel(e);for(var t=0;t<e.length;t++)n.loadPixel(e[t])}};this.trackingAdPixelsCalled[e.adId]||(this.trackingAdPixelsCalled[e.adId]=!0,e.loadEvent("JS:ACTIVATE:AD",{}),e.args&&e.args["tracking.ad"]&&e.args["tracking.ad"].pixelUrl&&S(e.args["tracking.ad"].pixelUrl)),this.trackingAdCreativePixelsCalled[e.adId+"|"+e.creativeId]||(this.trackingAdCreativePixelsCalled[e.adId+"|"+e.creativeId]=!0,e.loadEvent("JS:ACTIVATE:CREATIVE",{}),e.args&&e.args["tracking.creative"]&&e.args["tracking.creative"].pixelUrl&&S(e.args["tracking.creative"].pixelUrl))}!function(t){if(!n.master)return t();for(var i=e.args&&e.args.assets&&e.args.assets.pool?e.args.assets.pool:[],o=0,a=function(){return o--,o?void 0:t()},r=function(t){var i=!1,r=!1,s=function(){return i=!0,a()};t.name.match(/^vast/)&&(r=!0,setTimeout(function(){var i=t.uri,o=new window.XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){"object"!=typeof t.metadata&&(t.metadata={}),t.metadata.vast=v(o.responseXML);try{var i=t.metadata.vast.Ad_value.InLine_value.Impression;e.loadEvent("JS:IMPRESSION:VAST_LOADED",{c3:"asset:"+t.id});for(var a=0;a<i.length;a++){var r=i[a].value;n.loadPixel(r)}}catch(l){}return s()}},o.open("GET",i,!0),o.send()},0)),r&&(setTimeout(function(){i||e.loadEvent("COULD_NOT_LOAD_ASSET",{c1:t.id})},1e4),o++)},s=0;s<i.length;s++)r(i[s]);return o?void 0:t()}(function(){n.loadMarkersForPositions(e.positions,function(t){try{if(e.tag)e.tag.apply(n,t);else if(e.fif){var s=e.positions[0];if(n.master){var c=[],d=null,p=!!e.main_js_in_head,u=!!e.main_js_always_in_head;if(n.somePositionsAreAlwaysHosted||e.hosted_positions&&e.hosted_positions.length){e.shouldHostPosition(s)?c.push(s):d=s,e.on("hello",function(t){return e.shouldHostPosition(t)?(t.decoratedBy=e,t.decoratedAt=t.decoratedAt||new Date,n.hostPosition(e,t),!1):void 0});for(var m=1;m<e.positions.length;m++){var h=e.positions[m];e.shouldHostPosition(h)?c.push(h):d||(d=h)}}else d=s;for(var f=0;f<c.length;f++){var v=c[f];v.decoratedBy=e,v.decoratedAt=new Date,n.hostPosition(e,v)}if(d||u){if(p||u){var g=n.getTopmostDocument();n.injectFriendlyContent({positionId:"head",document:g,marker:g.head},e.fif,e)}else e.masterPosition=d||s,n.injectFriendlyContent(e.masterPosition,e.fif,e);e.iframe.on("remove",function(){i("Ad has been removed from DOM"),n.unloadAd(e)}).on("winlose",function(){i("Ad has been winlost");var t=e.positions;n.unloadAd(e,{hide:!0}),n.activateAd(e,{positions:t})}),e.injectedOnce=!0}}else n.injectFriendlyContent(s,e.fif,e)}else if(e.passback){e.active=!1;var y={htmlComments:{label:"Passback for "+(e.use||{}).positions}},b=n.globalOptions.passbackMode;switch(e.passback.type){case"javascript":case"inline":case"redirect":i("Activating JavaScript passback");var w;switch(w="var callPbSrc;if(window.framedPosition.passbackSrc){\n",w+="  callPbSrc=function(){\n",w+="    window.framedPosition.loadEvent('JS:PASSBACK_CALL');\n",w+="    var s = document.createElement('script'); s.src = window.framedPosition.passbackSrc; s.appendChild(document.createTextNode(window.framedPosition.inlineScript)); document.body.appendChild(s); \n",w+="  };\n",w+="}\n",e.passback.type){case"javascript":w+=e.passback.contents?"var platformScript = "+JSON.stringify(e.passback.contents).replace(/script/g,'scr"+"ipt')+";\n":"var platformScript;\n";break;case"redirect":w+=e.passback.contents?"var platformScript = "+JSON.stringify("document.write('<script src=\""+e.passback.contents+"\"></script>');").replace(/script/g,'scr"+"ipt')+";\n":"var platformScript;\n";break;default:w+="var platformScript;\n"}switch(w+="var passbackScript, inlineScript = window.framedPosition.inlineScript, hasInlineScript = (inlineScript||'').replace(/s/g, '').length;\n",b){case"platform":w+="passbackScript = platformScript;\n";break;case"platform,dynamic":w+="passbackScript = platformScript || (callPbSrc? callPbSrc(): inlineScript);\n";break;case"dynamic,platform":w+="passbackScript = callPbSrc? callPbSrc(): (hasInlineScript? inlineScript: platformScript);\n"}w+="if(passbackScript) {\n",w+="  window.framedPosition.loadEvent('JS:PASSBACK_CALL');\n",w+="  new Function(passbackScript)();\n",w+="}\n";var x;x="for(var k in parent){ if((!parent.hasOwnProperty || parent.hasOwnProperty(k)) && k.match(/^(sas|Smart|weborama_url_backup)/) && !k.match(/^(sas_ajax)$/)){ window[k] = parent[k]; } }\n";try{"pmdebugpassback"===top.window.name&&(x+="debugger;\n")}catch(k){}y.javascript=x+w;break;default:y=void 0}if(y)for(var S=function(e,t,o){var r=n.injectFriendlyContent(e,t,o);r.iframe&&r.iframe.style&&(r.iframe.style.marginLeft="auto",r.iframe.style.marginRight="auto"),r.on("winlose",function(){i("Passback has been winlost"),e.injectionIndex=(e.injectionIndex||0)+1,n.loadEvent("JS:PASSBACK_WINLOST",void 0,void 0,{detail:e.positionId});var a=r.iframe.ownerDocument.getElementById(r.iframe.id);a&&a.parentNode.removeChild(a),S(e,t,o)}),r.on("error",function(){a("Passback error",arguments),n.loadEvent("JS:PASSBACK_ERROR",void 0,void 0,{detail:e.positionId});try{var t=r.iframe.contentDocument.createComment("Passback Failed To Load (Error)");r.iframe.contentDocument.body.appendChild(t),t=r.iframe.ownerDocument.createComment("Pixi Iframe: Passback Failed To Load (Error)"),r.iframe.parentNode.insertBefore(t,r.iframe),t=r.iframe.ownerDocument.createComment("Pixi Iframe Container: Passback Failed To Load (Error)"),r.iframe.parentNode.parentNode.insertBefore(t,r.iframe.parentNode)}catch(i){}});var s=setTimeout(function(){a("Passback timeout"),o.emit("passback-timeout"),n.loadEvent("JS:PASSBACK_TIMEOUT",void 0,void 0,{detail:e.positionId});try{var t=r.iframe.contentDocument.createComment("Passback Failed To Load (Timeout)");r.iframe.contentDocument.body.appendChild(t),t=r.iframe.ownerDocument.createComment("Pixi Iframe: Passback Failed To Load (Timeout)"),r.iframe.parentNode.insertBefore(t,r.iframe),t=r.iframe.ownerDocument.createComment("Pixi Iframe Container: Passback Failed To Load (Timeout)"),r.iframe.parentNode.parentNode.insertBefore(t,r.iframe.parentNode)}catch(i){}},1e4);r.on("resize",function(t){t&&t.width>1&&t.height>1&&(n.loadEvent("JS:PASSBACK_OK",void 0,void 0,{detail:e.positionId}),clearTimeout(s))})},I=0;I<e.positions.length;I++){var P=e.positions[I],E=P.positionId;if(n.scheduledRendezVous){var A=r-n.firstPositionRegisteredAt,T=3*(n.globalOptions.rendezvous_duration||F),_=Math.round(10*A/T);E+=0>_?":0":_>10?":MORE":":"+_}var O=C.piximedia.request_pos_sp[n.siteId][n.placementId],N=[];for(var D in O)O.hasOwnProperty(D)&&N.push(D);P.implicit||(E+=":explicit"),E+=":pos="+N.join(","),n.scheduledRendezVous&&n.performedRendezVous&&(E+=":rv"),n.loadEvent("JS:PASSBACK",void 0,void 0,{detail:E}),S(P,y,e)}}}catch(k){o("Could not activate ad: "+k)}e.timetracker&&e.timetracker.global&&n.master&&n.loadLibrary("sweetlib.js",function(){e.timetrackerGlobal||(e.timetrackerGlobal=C.piximedia.SweetLib.setTimer("GLOBAL",function(t,i){e.loadEvent("TIMETRACKER::"+t,{duration:i})}),e.timetrackerGlobal.start())});var L;try{var M=C.localStorage?C.localStorage.getItem("pmCustomFieldsCSS"):"";if(M){var R=JSON.parse(M);R&&R.css&&(L=R.css)}}catch(k){}!L&&e&&e.args&&(L=e.args.css),L&&n.master&&n.loadLibrary("sweetlib.js",function(){var e=n.getTopmostDocument();if(l(L))for(var t=0;t<L.length;t++)C.piximedia.SweetLib.createCSSs(L[t],e);else C.piximedia.SweetLib.createCSSs(L,e)})})})},P.prototype.unloadPosition=function(e){i("Unloading position",e);for(var t=0;t<(e.iframes||[]).length;t++){var n=e.iframes[t];i("Unloading iframe"),n.unload()}var o=e.decoratedBy;o&&(o.positions=d(o.positions,"positionId",e.positionId)),delete this.positions[e.positionId]},P.prototype.unloadAd=function(e,t){if(i("Unloading ad",e),t=t||{},e.positions)for(var n=0;n<e.positions.length;n++){for(var o=e.positions[n],a=0;a<(o.iframes||[]).length;a++){var r=o.iframes[a];i("Unloading iframe"),r.unload({hide:t.hide})}o.iframes=[],o.decoratedAt=o.decoratedBy=void 0,o.used=!1,delete this.positions[o.positionId]}e.iframe&&(e.iframe.unload({hide:t.hide}),e.iframe=void 0),e.purgeEventEmitter(),e.active=!1},P.prototype.hostPosition=function(e,t){var n=this;t.hosted=!0,i("Prepare to host position",t),this.waitDomMutable(function(){i("DOM is mutable for hosted position",t);var a,r;r=function(e,t){var i=y.getID(e);if(i)try{a.fireEventToID(i,t,function(){},function(){})}catch(n){o("Caught exc, maybe destroyed rpc channel",n)}},n.globalEmitter.on("event",r),i("Injecting hosted position",t,e.positions),e.injectPosition(t,{iframeOptions:{doNotResize:!0}},function(o,s){i("Loading marker for hosted position",t),n.loadMarkerForPosition(t,function(o,l){if(!o){var c=n.getTopmostDocument();o=c.createElement("div");var d="pixiMarkerHosted"+Math.round(1e16*Math.random());o.id=d,c.body.appendChild(o)}if(i("Found marker for position "+t.positionId,o),a){i("Destroying dangling RPC channel");try{a.destroy()}catch(p){}}for(var u,m=o.childNodes,h=new k(n,t),f=0;f<m.length;f++)if(m[f].className.indexOf("pmContainer")>=0){u=m[f];for(var v=u.getElementsByTagName("iframe"),y=0;y<v.length;y++){var b=v[y];n.winlostIframeIds[b.id]=!0}u.parentNode.removeChild(u);break}u=o.ownerDocument.createElement("div"),u.className="pmHostedContainer pmContainer "+n.containerClassName,g(u),u.style.fontSize=0,o.appendChild(u);var w=u.getElementsByTagName("iframe");if(w.length)for(var x=0;x<w.length;x++){var S=w[x];n.winlostIframeIds[S.id]=!0,u.removeChild(S)}var I,P,E;P=u.ownerDocument,E=P.defaultView||P.parentWindow,E._piximedia=E._piximedia||{},function(e){return E._piximedia.easyXDM||(s.piximedia.injectEasyXDM(E,P,n.getTopmostWindow().location),E._piximedia.easyXDM=E.easyXDM.noConflict("_piximedia")),e()}(function(){I=E._piximedia.easyXDM,i("Creating RPC channel"),a=new I.Rpc({container:u,hash:!0,props:{style:{width:n.msie?1:0,height:n.msie?1:0},allowfullscreen:"allowfullscreen",scrolling:"no",width:n.msie?1:0,height:n.msie?1:0},remote:D,onReady:function(){i("master is ready")}},{local:{getConfig:function(){for(var o=[],a=[],r=0;r<n.allAvailableAds.length;r++)if(e.uniqid===n.allAvailableAds[r].uniqid){var s=n.allAvailableAds[r];s.injectedOnce=e.main_js_always_in_head||e.injectedOnce,o=[s];break}e.injectedOnce=!0;var l={},c={};for(var d in n.positions)if(n.positions.hasOwnProperty(d)){var p=n.positions[d];p.clickUrl&&(l[d]=p.clickUrl),p.advertiserClickUrl&&(c[d]=p.advertiserClickUrl)}var u={positionId:t.positionId,pixiPositionId:t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId),decoratedAt:t.decoratedAt,clickUrl:t.clickUrl,implicit:t.implicit,injectionIndex:t.injectionIndex,pageContainerWidth:t.pageContainerWidth,advertiserClickUrl:t.advertiserClickUrl,allAdvertiserClickUrls:c,allClickUrls:l};i("Config position: ",u),a.push(u);var m={siteId:n.siteId,placementId:n.placementId,globalOptions:n.globalOptions,allAvailableAds:o,positions:a,documentHasFocus:n.documentHasFocus};return m},fireEventToID:function(e,t,i,o){try{return n.globalEmitter.fireEventToID(e,t,{exceptTo:r}),i()}catch(a){return o()}}},remote:{fireEventToID:{}}});var o=function(){var e=u.getElementsByTagName("iframe");if(!e.length)return setTimeout(o,10);var t=e[0];i("Found RPC iframe",t),h.setIframe(t),l&&n.watchForRemoval(l,function(){i("Secondary marker has been removed"),h.emit("remove")})};i("Looking for RPC iframe"),o()})})})})},P.prototype.hostRoom=function(e,t,n){if(!this.master)return o("PAM.prototype.hostRoom() might only be called on the master PAM");t=t||{},i("Registering room "+e);var a="room."+e,r={siteId:this.siteId,placementId:this.placementId,positionId:a,ajax:!0,implicit:!0,virtual:{getContainer:n}};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);this.hello(r)},P.prototype.getTopmostFiFForElement=function(e){var t=e.ownerDocument,i=t.defaultView||t.parentWindow,n=this.getTopmostWindow();if(!i.inFIF&&!i.inDapIF&&!i.inDapMgrIf)return void 0;var o,a="pmBeacon"+this.rand(),r=i.name,s=n.document.getElementsByTagName("iframe");i.name=a;for(var l=0;l<s.length;l++){var c=s[l];try{if(c.contentWindow&&c.contentWindow.name===a){o=c;break}}catch(d){}}if(!o)e:for(var p=0;p<s.length;p++){var u=s[p];try{if(u.contentWindow&&(u.contentWindow.inFIF||u.contentWindow.inDapIF||u.contentWindow.inDapMgrIf))for(var m=u.contentWindow.document,h=m.getElementsByTagName("iframe"),f=0;f<h.lenght;f++){var v=h[f];try{if(v.contentWindow&&v.contentWindow.name===a){o=u;break e}}catch(d){}}}catch(d){}}return i.name=r,o},P.prototype.checkTopDomain=function(){var e,t=this;try{e=top.pmOriginalDomain}catch(i){return}if(e){var n=function(){var i;try{i=top.document.domain}catch(a){return o("Top document changed from â"+e+"â to unknown value!"),void t.loadEvent("PANIC",void 0,void 0,{fail_reason:"top_domain_changed",c1:e,c2:"EXCEPTION"})}i!==e?(o("Top document changed from â"+e+"â to â"+i+"â!"),t.loadEvent("PANIC",void 0,void 0,{fail_reason:"top_domain_changed",c1:e,c2:i})):setTimeout(n,1e4)};setTimeout(n,1e4)}},P.prototype.debug=function(){return arguments.length?i.apply(this,arguments):(R=!0,void(C.console&&C.console.log&&C.console.log(t.get().join("\n"))))},P.prototype.clearCSS=function(e){g(e)},P.prototype.createOpaqueAnimation=function J(e,t,i){var n=this;return J.prefix||(J.prefix="animation-"+n.rand()+"-",J.seq=0),i||(i=J.prefix+J.seq++),n.master?n.loadLibrary("sweetlib.js",function(){var o=n.getTopmostDocument(),a=C.piximedia.SweetLib.querySelector(e,o);n.animations[i]=C.piximedia.SweetLib.animate(a,t)}):n.emit("create-opaque-animation",e,t,i),i},P.prototype.createAnimation=function(e,t){var i=this,n=i.createOpaqueAnimation(e,t);return{play:function(e){i.playOpaqueAnimation(n,e)},reverse:function(e){i.reverseOpaqueAnimation(n,e)},clear:function(){i.clearOpaqueAnimation(n)}}},P.prototype.playOpaqueAnimation=function(e,t,i){var n=this;i||(i="fire-"+n.rand());var a="play-opaque-animation:callback:"+i;if(n.master){var r=n.animations[e];if(!r)return o("Could not find animation "+e);r.play(function(){n.emit(a)})}else n.on(a,function s(){n.removeListener(a,s),t(e)}),n.emit("play-opaque-animation",e,void 0,i)},P.prototype.reverseOpaqueAnimation=function(e,t,i){var n=this;i||(i="fire-"+n.rand());var a="reverse-opaque-animation:callback:"+i;if(n.master){var r=n.animations[e];if(!r)return o("Could not find animation "+e);r.reverse(function(){n.emit(a)})}else n.on(a,function s(){n.removeListener(a,s),t(e)}),n.emit("reverse-opaque-animation",e,void 0,i)},P.prototype.clearOpaqueAnimation=function(e){var t=this;if(t.master){var i=t.animations[e];if(!i)return o("Could not find animation "+e);i.clear()}else t.emit("clear-opaque-animation",e)},P.prototype.listBroadcastPm=function(e,t){var i=C.XMLHttpRequest?new C.XMLHttpRequest:void 0;if(e.match(/\/$/)||(e+="/"),"withCredentials"in i)i.open("GET","//"+M+"/list-of-broadcast.pm/"+e+"json",!0),i.onreadystatechange=function(){return 4===i.readyState?t(200!==i.status?{error:"failed: "+i.responseText}:JSON.parse(i.responseText)):void 0},i.send(null);else{var n="listbroadcastpm"+this.rand(),o=C.document.getElementsByTagName("head")[0],a=C.document.createElement("script");a.async=!0,a.src="//"+M+"/list-of-broadcast.pm/"+e+"jsonp=piximedia._."+encodeURIComponent(n),o.appendChild(a),C.piximedia._[n]=t}},P.prototype.startNavigationTracking=function(e){var t=this;return t.master?void t.loadLibrary("sweetlib.js",function(){var t=C.piximedia.SweetLib;t.startNavigationTracking(e)}):t.emit("start-navigation-tracking",e)},P.prototype.bindVisibilityTracker=function(e,t,i,n){var o=this;return n||(n="fire-"+o.rand()),o.master?void o.loadLibrary("sweetlib.js",function(){var a=C.piximedia.SweetLib,r={object:a.querySelector(e)};for(var s in t)if(t.hasOwnProperty(s))switch(s){case"callback":break;default:r[s]=t[s]}a.bindVisibilityTracker(r,function(e){return i?i(e):void o.emit(n,e)})}):(o.on(n,i),o.emit("bind-visibility-tracker",e,t,void 0,n))},P.upscaleAssetQuery=function(e){if("object"==typeof e.match)return e;"string"==typeof e&&"{"===e.substr(0,1)&&(e=JSON.parse(e));var t=function(e){switch(e.length){case 5:break;case 4:e=[e[0],e[1],null,e[2],e[3]];break;case 3:e=[null,e[0],e[1],e[2],null];break;case 2:e=[null,e[0],null,e[1],null];break;case 1:e=[null,null,e[0],null,null]}for(var t=0;t<e.length;t++)e[t]=null===e[t]?null:parseFloat(e[t],10);return null===e[0]&&(null!==e[1]?e[0]=e[1]:e[0]=e[2]),null===e[4]&&(null!==e[3]?e[4]=e[3]:e[4]=e[2]),e},i=function(e){if("true"===e)return!0;if("false"===e)return!1;var t=parseFloat(e,10);return t.toString()===e?t:e};if("string"==typeof e.require){var n=P.upscaleAssetQuery(e.require);if(e.use){var o=P.upscaleAssetQuery(e.require).match.grabAllAssets;n.match.grabSomeAssets=[];for(var a in o)o.hasOwnProperty(a)&&(n.match.grabSomeAssets=n.match.grabSomeAssets.concat(o[a].grabSomeAssets))}return n}if("string"==typeof e){for(var r=e.replace(/,\s+/g,",").split(/\s+/),s={grabAllAssets:[]},c=0;c<r.length;c++){var d=r[c],p=d.split(","),u={grabSomeAssets:[]};s.grabAllAssets.push(u);for(var m=0;m<p.length;m++){var h=p[m],v={and:[]};u.grabSomeAssets.push(v);var g=h.split("."),y=g.shift();y&&v.and.push([{property:"type"},"==",y]);for(var b in g)if(g.hasOwnProperty(b)){var w=g[b],x=w.match(/^[0-9]+x[0-9]+$/);if(x)v.and.push([{property:"surface"},"==",w]);else if(x=w.match(/^([a-z_]+)\*(.*)$/))v.and.push([{property:x[1]},"*",t(x[2].split("*"))]);else if(x=w.match(/^([a-z_]+)(=|<=|<|>=|>|<>|!=)(.*)$/)){var k=x[1],S=x[2],I=x[3];"provides"===k?v.and.push({property:k+"_"+I}):v.and.push([{property:k},S,i(I)])}else v.and.push({property:w})}}}e={match:s}}else if("object"==typeof e){var E=f(e)[0];if(void 0===E)throw new Error("Invalid query (1)");var A=e[E];if(void 0===A)throw new Error("Invalid query (2)");if(A.desc||A.requires){var C={grabAllAssets:[],grabMatchingAssets:[]};for(var T in e)if(e.hasOwnProperty(T)){var _=e[T];i(_.mandatory)?C.grabAllAssets.push({grabName:T,value:P.upscaleAssetQuery(_.requires)}):C.grabMatchingAssets.push({grabName:T,value:P.upscaleAssetQuery(_.requires)})}e={match:C}}else{var O={and:[]},N={grabAllAssets:[O]},F=function(e,n){var o=function(e){return e};switch(e){case"weight":o=function(e){return 1024*e},e="file_size";break;case"iframable":e="iframeable"}if(l(n)){for(var a=[],r=0;r<n.length;r++)a[r]=o(n[r]);return[{property:e},"*",t(a)]}if("string"!=typeof n)return[{property:e},"==",i(n)];var s=n.substr(n.length-1,1),c=n.substr(0,n.length-1);switch(s){case"+":case"-":case"!":switch(n=o(i(c)),s){case"+":return[{property:e},">=",n];case"-":return[{property:e},"<=",n];case"!":return[{property:e},"!==",n]}break;default:return[{property:e},"==",o(i(n))]}};for(var D in e)if(e.hasOwnProperty(D)){var L=e[D];if("mandatory"===D)continue;"provides"===D?O.and.push(F("provides_"+L,!0)):""!==L&&O.and.push(F(D,L))}e={match:N}}}if(e.match&&e.match.grabAllAssets)for(var M=0;M<e.match.grabAllAssets.length;M++){var R=e.match.grabAllAssets[M];R.grabSomeAssets||R.grabMatchingAssets||R.grabAllAssets||(e.match.grabAllAssets[M]={grabAllAssets:[R]})}return e},P.assetsMatchQuery=function(e,t,i){i=i||{};var n,o,a,r,s=i.trailMissing||[],d={},p=i.assetsUsedOnce||{},u={},m=[],h={},f=[],v=function(e){n=e,n.name===n._splitname?(o=n._classes,a=n._type):(o=n.name.split("."),a=o.shift(),n._classes=o,n._type=a,n._splitname=n.name),n.metadataObject?r=n.metadataObject||{}:(r=n.metadata||{},"string"==typeof r&&(r=JSON.parse(r)||{},n.metadataObject=r))},g=function(e){switch(e){case"asset_id":return n.asset_id;case"type":return a;case"bytes":case"file_size":return n.file_size;case"provides_animation":return n._classes.indexOf("provides_animation")>=0||"image"===n._type||"html5"===n._type;case"provides_movie":return n._classes.indexOf("provides_movie")>=0||"video"===n._type||"vast"===n._type;case"site":return n._classes.indexOf("provides_site")>=0||"url"===n._type;default:var t=r.tags;return t&&c(t,e)>=0?!0:r[e]}},y=function(e){var t=e.id||e.asset_id;p[t]=!0;for(var i=0;i<f.length;i++){var n=f[i];h[n]=h[n]||[],u[n+":"+t]||(u[n+":"+t]=!0,h[n].push(e))}u[t]||(u[t]=!0,m.push(e))},b=function(e){e=e.grabName&&e.value?e.value:e,e.match&&(e=e.match);var t=JSON.stringify(e);d[t]||(d[t]=!0,s.push(JSON.parse(t)))},w=function(e){if(!e)return e;e.value&&(e=e.value),"object"==typeof e&&e.match&&(e=e.match);var o,a,r,s,c,d,p,u,m;if(e.grabSomeAssets||e.grabMatchingAssets||e.grabAllAssets){for(var h=e.grabSomeAssets||e.grabMatchingAssets||e.grabAllAssets,x=[],k=!1,S=h.length?!0:!1,I=0;I<h.length;I++){for(var P=h[I],E=!1,A=0;A<t.length;A++){v(t[A]);var C;if(P.and){C=!0;e:do for(p=0;p<P.and.length;p++)if(u=P.and[p],u&&void 0!==u.length&&l(u)){if(m=void 0,a=u[0],o=a&&a.property?g(a.property):w(a),1===u.length)m=o;else if(c=u[1],d=u[2],"*"===c)r=d[0],s=d[4],m=r&&r>o?!1:s&&o>s?!1:!0;else{switch(typeof u[2]){case"string":case"number":case"boolean":d=u[2];break;default:d=w(u[2])}switch(c){case"<":m=d>o;break;case">":m=o>d;break;case"<=":m=d>=o;break;case">=":m=o>=d;break;case"=":case"==":case"===":m=o===d||"*"===d;break;case"<>":case"!==":case"!=":m=o!==d}}if(!m){C=!1;break e}}else if(!w(P.and[p])){C=!1;break e}while(!1)}else{var T=P.grabName;T&&f.push(T),C=w(P),T&&f.pop()}C&&(E=!0,y(n))}E?k=!0:(x.push(P),S=!1)}var _;if(_=e.grabAllAssets&&!i.forceOr?S:k,
!_)for(var O=0;O<x.length;O++){var N=x[O];b(N)}return k}if(void 0===e.length||!l(e)){if(e.property)return g(e.property);if(e.and){for(p=0;p<e.and.length;p++)if(u=e.and[p],u&&void 0!==u.length&&l(u)){if(m=void 0,a=u[0],o=a&&a.property?g(a.property):w(a),1===u.length)m=o;else if(c=u[1],d=u[2],"*"===c)r=d[0],s=d[4],m=void 0===o?!1:r&&r>o?!1:s&&o>s?!1:!0;else{switch(typeof u[2]){case"string":case"number":case"boolean":d=u[2];break;default:d=w(u[2])}switch(c){case"<":m=d>o;break;case">":m=o>d;break;case"<=":m=d>=o;break;case">=":m=o>=d;break;case"=":case"==":case"===":m=o===d;break;case"<>":case"!==":case"!=":m=o!==d}}if(!m)return!1}else if(!w(e.and[p]))return!1;return!0}if(e.or){for(var F=0;F<e.and.length;F++)if(w(e.or[F]))return!0;return!1}return"object"==typeof e&&e.match?w(e.match):e}if(a=e[0],o=a&&a.property?g(a.property):w(e[0]),1===e.length)return o;if(c=e[1],d=e[2],"*"===c)return r=d[0],s=d[4],r&&r>o?!1:s&&o>s?!1:!0;switch(typeof e[2]){case"string":case"number":case"boolean":d=e[2];break;default:d=w(e[2])}switch(c){case"<":return d>o;case">":return o>d;case"<=":return d>=o;case">=":return o>=d;case"=":case"==":case"===":return o===d;case"<>":case"!==":case"!=":return o!==d}};if(e=P.upscaleAssetQuery(e),!e.match||!e.match.grabAllAssets)throw new Error("Don't know how to parse this expression");for(var x=!0,k=!1,S=0;S<e.match.grabAllAssets.length;S++){var I=e.match.grabAllAssets[S],E=I.grabName;f.push(E),w(I)?k=!0:x=!1,f.pop()}if(e.match.grabMatchingAssets)for(var A=0;A<e.match.grabMatchingAssets.length;A++){var C=e.match.grabMatchingAssets[A],T=C.grabName;f.push(T),w(C),f.pop()}var _;return x?_=m:(k&&(i.partial=!0),_=[]),_},P.convertTrailMissing=function(e){var t=function(e){for(var t="*",i=[],n=function(e){if(e.property)-1===i.indexOf(e.property)&&i.push(e.property);else{if(!l(e))throw new Error("Unexepcted trail entry (4)");var n=e[0],o=e[1],a=e[2];if(n&&n.property){if("type"===n.property){if("=="!==o&&"==="!==o)throw new Error("Unexpected trail entry (3)");return void(t=a)}n=n.property}var r;switch(o){case"*":r=n+"*"+a.join("*");break;case"=":case"==":case"===":r=n+"="+a;break;case"!=":case"<>":case"!==":r=n+"!="+a;break;default:r=n+o+a}-1===i.indexOf(r)&&i.push(r)}};e.grabAllAssets&&e.grabAllAssets&&1===e.grabAllAssets.length;)e=e.grabAllAssets[0];if(e.and)for(var o=0;o<e.and.length;o++)n(e.and[o]);return t+(i.length?"."+i.join("."):"")};if(e.grabSomeAssets){for(var i=[],n=0;n<e.grabSomeAssets.length;n++)i.push(t(e.grabSomeAssets[n]));return i.join(",")}return t(e)},P.prototype.getPrerequisiteVirtualPosition=function(e){try{if(!this.globalOptions||!this.globalOptions.virtualPositions)return;for(var t in this.globalOptions.virtualPositions)if(this.globalOptions.virtualPositions.hasOwnProperty(t)){var i=this.globalOptions.virtualPositions[t];if(i.prerequisite){var n={};if(n[t]={positionId:t},this.queryPosition(e,{positions:n}).length)return i.prerequisite}}}catch(o){return}},P.prototype.getPositionById=function(e){return this.positions[e]||null},P.VERSION=N,P.DEBUG=R,P.RENDEZVOUS_DURATION=F,P.SUPPORTS_TRACKING_AD=!0,P.SUPPORTS_TRACKING_CREATIVE=!0,P.browserDetect=W,P.EventEmitter=y,P.Ad=b,P.Position=S,P.Iframe=k,P.AdProxy=w,P.CGAdProxy=x,P.isArray=l,y.forObject(P),C.piximedia["PAM"+N]=P,(!C.piximedia.PAM||C.piximedia.PAM.VERSION<N)&&(C.piximedia.PAM=P,C.piximedia.browserDetect=W)}(),window.piximedia._.injectEasyXDM=function(e,t,i){!function(e,t,i,n,o,a){function r(e,t){var i=typeof e[t];return"function"==i||!("object"!=i||!e[t])||"unknown"==i}function s(e,t){return!("object"!=typeof e[t]||!e[t])}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(){var e="Shockwave Flash",t="application/x-shockwave-flash";if(!b(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var i=navigator.plugins[e].description;i&&!b(navigator.mimeTypes)&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(C=i.match(/\d+/g))}if(!C){var n;try{n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),C=Array.prototype.slice.call(n.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),n=null}catch(o){}}if(!C)return!1;var a=parseInt(C[0],10),r=parseInt(C[1],10);return T=a>9&&r>0,!0}function d(){if(!H){H=!0;for(var e=0;e<z.length;e++)z[e]();z.length=0}}function p(t,i){return e.piximedia&&e.piximedia.pam&&e.piximedia.pam.waitDomMutable?e.piximedia.pam.waitDomMutable(function(){t.call(i)}):H?void t.call(i):void z.push(function(){t.call(i)})}function u(){var e=parent;if(""!==j)for(var t=0,i=j.split(".");t<i.length;t++)e=e[i[t]];return e.easyXDM}function m(t){return e.easyXDM=V,j=t,j&&(W="easyXDM_"+j.replace(".","_")+"_"),B}function h(e){return e.match(L)[3]}function f(e){return e.match(L)[4]||""}function v(e){var t=e.toLowerCase().match(L),i=t[2],n=t[3],o=t[4]||"";return("http:"==i&&":80"==o||"https:"==i&&":443"==o)&&(o=""),i+"//"+n+o}function g(e){if(e=e.replace(R,"$1/"),!e.match(/^(http||https):\/\//)){var t="/"===e.substring(0,1)?"":i.pathname;"/"!==t.substring(t.length-1)&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=i.protocol+"//"+i.host+t+e}for(;M.test(e);)e=e.replace(M,"");return e}function y(e,t){var i="",n=e.indexOf("#");-1!==n&&(i=e.substring(n),e=e.substring(0,n));var o=[];for(var r in t)t.hasOwnProperty(r)&&o.push(r+"="+a(t[r]));return e+(q?"#":-1==e.indexOf("?")?"?":"&")+o.join("&")+i}function b(e){return"undefined"==typeof e}function w(e,t,i){var n;for(var o in t)t.hasOwnProperty(o)&&(o in e?(n=t[o],"object"==typeof n?w(e[o],n,i):i||(e[o]=t[o])):e[o]=t[o]);return e}function x(){var e=t.body.appendChild(t.createElement("form")),i=e.appendChild(t.createElement("input"));i.name=W+"TEST"+F,A=i!==e.elements[i.name],t.body.removeChild(e)}function k(e){b(A)&&x();var i;A?i=t.createElement('<iframe name="'+e.props.name+'"/>'):(i=t.createElement("IFRAME"),i.name=e.props.name),i.id=i.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=t.getElementById(e.container)),e.container||(w(i.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=t.body);var n=e.props.src;if(e.props.src="javascript:false",w(i,e.props),i.border=i.frameBorder=0,i.allowTransparency=!0,e.container.appendChild(i),e.onLoad&&_(i,"load",e.onLoad),e.usePost){var o,a=e.container.appendChild(t.createElement("form"));if(a.target=i.name,a.action=n,a.method="POST","object"==typeof e.usePost)for(var r in e.usePost)e.usePost.hasOwnProperty(r)&&(A?o=t.createElement('<input name="'+r+'"/>'):(o=t.createElement("INPUT"),o.name=r),o.value=e.usePost[r],a.appendChild(o));a.submit(),a.parentNode.removeChild(a)}else i.src=n;return e.props.src=n,i}function S(e,t){"string"==typeof e&&(e=[e]);for(var i,n=e.length;n--;)if(i=e[n],i=new RegExp("^"==i.substr(0,1)?i:"^"+i.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),i.test(t))return!0;return!1}function I(n){var o,a=n.protocol;if(n.isHost=n.isHost||b(G.xdm_p),q=n.hash||!1,n.props||(n.props={}),n.isHost)n.remote=g(n.remote),n.channel=n.channel||"default"+F++,n.secret=Math.random().toString(16).substring(2),b(a)&&(a=v(i.href)==v(n.remote)?"4":r(e,"postMessage")||r(t,"postMessage")?"1":n.swf&&r(e,"ActiveXObject")&&c()?"6":"Gecko"===navigator.product&&"frameElement"in e&&-1==navigator.userAgent.indexOf("WebKit")?"5":n.remoteHelper?"2":"0");else if(n.channel=G.xdm_c.replace(/["'<>\\]/g,""),n.secret=G.xdm_s,n.remote=G.xdm_e.replace(/["'<>\\]/g,""),a=G.xdm_p,n.acl&&!S(n.acl,n.remote))throw new Error("Access denied for "+n.remote);switch(n.protocol=a,a){case"0":if(w(n,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),n.isHost){if(!n.local){for(var s,l=i.protocol+"//"+i.host,d=t.body.getElementsByTagName("img"),p=d.length;p--;)if(s=d[p],s.src.substring(0,l.length)===l){n.local=s.src;break}n.local||(n.local=e)}var u={xdm_c:n.channel,xdm_p:0};n.local===e?(n.usePolling=!0,n.useParent=!0,n.local=i.protocol+"//"+i.host+i.pathname+i.search,u.xdm_e=n.local,u.xdm_pa=1):u.xdm_e=g(n.local),n.container&&(n.useResize=!1,u.xdm_po=1),n.remote=y(n.remote,u)}else w(n,{channel:G.xdm_c,remote:G.xdm_e,useParent:!b(G.xdm_pa),usePolling:!b(G.xdm_po),useResize:n.useParent?!1:n.useResize});o=[new B.stack.HashTransport(n),new B.stack.ReliableBehavior({}),new B.stack.QueueBehavior({encode:!0,maxLength:4e3-n.remote.length}),new B.stack.VerifyBehavior({initiate:n.isHost})];break;case"1":o=[new B.stack.PostMessageTransport(n)];break;case"2":n.isHost&&(n.remoteHelper=g(n.remoteHelper)),o=[new B.stack.NameTransport(n),new B.stack.QueueBehavior,new B.stack.VerifyBehavior({initiate:n.isHost})];break;case"3":o=[new B.stack.NixTransport(n)];break;case"4":o=[new B.stack.SameOriginTransport(n)];break;case"5":o=[new B.stack.FrameElementTransport(n)];break;case"6":C||c(),o=[new B.stack.FlashTransport(n)]}return o.push(new B.stack.QueueBehavior({lazy:n.lazy,remove:!0})),o}function P(e){for(var t,i={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},n=0,o=e.length;o>n;n++)t=e[n],w(t,i,!0),0!==n&&(t.down=e[n-1]),n!==o-1&&(t.up=e[n+1]);return t}function E(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}var A,C,T,_,O,N=e,F=Math.floor(1e4*Math.random()),D=Function.prototype,L=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,M=/[\-\w]+\/\.\.\//,R=/([^:])\/\//g,j="",B={},V=e.easyXDM,W="easyXDM_",q=!1;if(r(e,"addEventListener"))_=function(e,t,i){e.addEventListener(t,i,!1)},O=function(e,t,i){e.removeEventListener(t,i,!1)};else{if(!r(e,"attachEvent"))throw new Error("Browser not supported");_=function(e,t,i){e.attachEvent("on"+t,i)},O=function(e,t,i){e.detachEvent("on"+t,i)}}var U,H=!1,z=[];if("readyState"in t?(U=t.readyState,H="complete"==U||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==U||"interactive"==U)):H=!!t.body,!H){if(r(e,"addEventListener"))_(t,"DOMContentLoaded",d);else if(_(t,"readystatechange",function(){"complete"==t.readyState&&d()}),t.documentElement.doScroll&&e===top){var J=function(){if(!H){try{t.documentElement.doScroll("left")}catch(e){return void n(J,1)}d()}};J()}_(e,"load",d)}var G=function(e){e=e.substring(1).split("&");for(var t,i={},n=e.length;n--;)t=e[n].split("="),i[t[0]]=o(t[1]);return i}(/xdm_e=/.test(i.search)?i.search:i.hash),X=function(){var e={},t={a:[1,2,3]},i='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(t).replace(/\s/g,"")===i?JSON:(Object.toJSON&&Object.toJSON(t).replace(/\s/g,"")===i&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(t=i.evalJSON(),t.a&&3===t.a.length&&3===t.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(X=function(){return e},e):null)};w(B,{version:"2.4.19.3",query:G,stack:{},apply:w,getJSONObject:X,whenReady:p,noConflict:m}),B.DomHelper={on:_,un:O,requiresJSON:function(i){s(e,"JSON")||t.write('<script type="text/javascript" src="'+i+'"></script>')}},function(){var e={};B.Fn={set:function(t,i){e[t]=i},get:function(t,i){if(e.hasOwnProperty(t)){var n=e[t];return i&&delete e[t],n}}}}(),B.Socket=function(e){var t=P(I(e).concat([{incoming:function(t,i){e.onMessage(t,i)},callback:function(t){e.onReady&&e.onReady(t)}}])),i=v(e.remote);this.origin=v(e.remote),this.destroy=function(){t.destroy()},this.postMessage=function(e){t.outgoing(e,i)},t.init()},B.Rpc=function(e,t){if(t.local)for(var i in t.local)if(t.local.hasOwnProperty(i)){var n=t.local[i];"function"==typeof n&&(t.local[i]={method:n})}var o=P(I(e).concat([new B.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=v(e.remote),this.destroy=function(){o.destroy()},o.init()},B.stack.SameOriginTransport=function(e){var t,o,a,r;return t={outgoing:function(e,t,i){a(e),i&&i()},destroy:function(){o&&(o.parentNode.removeChild(o),o=null)},onDOMReady:function(){r=v(e.remote),e.isHost?(w(e.props,{src:y(e.remote,{xdm_e:i.protocol+"//"+i.host+i.pathname,xdm_c:e.channel,xdm_p:4}),name:W+e.channel+"_provider"}),o=k(e),B.Fn.set(e.channel,function(e){return a=e,n(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,r)}})):(a=u().Fn.get(e.channel,!0)(function(e){t.up.incoming(e,r)}),n(function(){t.up.callback(!0)},0))},init:function(){p(t.onDOMReady,t)}}},B.stack.FlashTransport=function(e){function o(e,t){n(function(){s.up.incoming(e,c)},0)}function r(i){var n=e.swf+"?host="+e.isHost,o="easyXDM_swf_"+Math.floor(1e4*Math.random());B.Fn.set("flash_loaded"+i.replace(/[\-.]/g,"_"),function(){B.stack.FlashTransport[i].swf=d=u.firstChild;for(var e=B.stack.FlashTransport[i].queue,t=0;t<e.length;t++)e[t]();e.length=0}),e.swfContainer?u="string"==typeof e.swfContainer?t.getElementById(e.swfContainer):e.swfContainer:(u=t.createElement("div"),w(u.style,T&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),t.body.appendChild(u));var r="callback=flash_loaded"+a(i.replace(/[\-.]/g,"_"))+"&proto="+N.location.protocol+"&domain="+a(h(N.location.href))+"&port="+a(f(N.location.href))+"&ns="+a(j);u.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+o+"' data='"+n+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+n+"'></param><param name='flashvars' value='"+r+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+r+"' allowScriptAccess='always' wmode='transparent' src='"+n+"' height='1' width='1'></embed></object>"}var s,l,c,d,u;return s={outgoing:function(t,i,n){d.postMessage(e.channel,t.toString()),n&&n()},destroy:function(){try{d.destroyChannel(e.channel)}catch(t){}d=null,l&&(l.parentNode.removeChild(l),l=null)},onDOMReady:function(){c=e.remote,B.Fn.set("flash_"+e.channel+"_init",function(){n(function(){s.up.callback(!0)})}),B.Fn.set("flash_"+e.channel+"_onMessage",o),e.swf=g(e.swf);var t=h(e.swf),a=function(){B.stack.FlashTransport[t].init=!0,d=B.stack.FlashTransport[t].swf,d.createChannel(e.channel,e.secret,v(e.remote),e.isHost),e.isHost&&(T&&e.swfNoThrottle&&w(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),w(e.props,{src:y(e.remote,{xdm_e:v(i.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:W+e.channel+"_provider"}),l=k(e))};B.stack.FlashTransport[t]&&B.stack.FlashTransport[t].init?a():B.stack.FlashTransport[t]?B.stack.FlashTransport[t].queue.push(a):(B.stack.FlashTransport[t]={queue:[a]},r(t))},init:function(){p(s.onDOMReady,s)}}},B.stack.PostMessageTransport=function(t){function o(e){if(e.origin)return v(e.origin);if(e.uri)return v(e.uri);if(e.domain)return i.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function a(e){var i=o(e);i==c&&e.data.substring(0,t.channel.length+1)==t.channel+" "&&r.up.incoming(e.data.substring(t.channel.length+1),i)}var r,s,l,c;return r={outgoing:function(e,i,n){l.postMessage(t.channel+" "+e,i||c),n&&n()},destroy:function(){O(e,"message",a),s&&(l=null,s.parentNode.removeChild(s),s=null)},onDOMReady:function(){if(c=v(t.remote),t.isHost){var o=function(i){i.data==t.channel+"-ready"&&(l="postMessage"in s.contentWindow?s.contentWindow:s.contentWindow.document,O(e,"message",o),_(e,"message",a),n(function(){r.up.callback(!0)},0))};_(e,"message",o),w(t.props,{src:y(t.remote,{xdm_e:v(i.href),xdm_c:t.channel,xdm_p:1}),name:W+t.channel+"_provider"}),s=k(t)}else _(e,"message",a),l="postMessage"in e.parent?e.parent:e.parent.document,l.postMessage(t.channel+"-ready",c),n(function(){r.up.callback(!0)},0)},init:function(){p(r.onDOMReady,r)}}},B.stack.FrameElementTransport=function(o){var a,r,s,l;return a={outgoing:function(e,t,i){s.call(this,e),i&&i()},destroy:function(){r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){l=v(o.remote),o.isHost?(w(o.props,{src:y(o.remote,{xdm_e:v(i.href),xdm_c:o.channel,xdm_p:5}),name:W+o.channel+"_provider"}),r=k(o),r.fn=function(e){return delete r.fn,s=e,n(function(){a.up.callback(!0)},0),function(e){a.up.incoming(e,l)}}):(t.referrer&&v(t.referrer)!=G.xdm_e&&(e.top.location=G.xdm_e),s=e.frameElement.fn(function(e){a.up.incoming(e,l)}),a.up.callback(!0))},init:function(){p(a.onDOMReady,a)}}},B.stack.NameTransport=function(e){function t(t){var i=e.remoteHelper+(s?"#_3":"#_2")+e.channel;l.contentWindow.sendMessage(t,i)}function i(){s?2!==++d&&s||r.up.callback(!0):(t("ready"),r.up.callback(!0))}function o(e){r.up.incoming(e,m)}function a(){u&&n(function(){u(!0)},0)}var r,s,l,c,d,u,m,h;return r={outgoing:function(e,i,n){u=n,t(e)},destroy:function(){l.parentNode.removeChild(l),l=null,s&&(c.parentNode.removeChild(c),c=null)},onDOMReady:function(){s=e.isHost,d=0,m=v(e.remote),e.local=g(e.local),s?(B.Fn.set(e.channel,function(t){s&&"ready"===t&&(B.Fn.set(e.channel,o),i())}),h=y(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),w(e.props,{src:h+"#"+e.channel,name:W+e.channel+"_provider"}),c=k(e)):(e.remoteHelper=e.remote,B.Fn.set(e.channel,o));var t=function(){var o=l||this;O(o,"load",t),B.Fn.set(e.channel+"_load",a),function r(){"function"==typeof o.contentWindow.sendMessage?i():n(r,50)}()};l=k({props:{src:e.local+"#_4"+e.channel},onLoad:t})},init:function(){p(r.onDOMReady,r)}}},B.stack.HashTransport=function(t){function i(e){if(f){var i=t.remote+"#"+m++ +"_"+e;(l||!g?f.contentWindow:f).location=i}}function o(e){u=e,s.up.incoming(u.substring(u.indexOf("_")+1),y)}function a(){if(h){var e=h.location.href,t="",i=e.indexOf("#");-1!=i&&(t=e.substring(i)),t&&t!=u&&o(t)}}function r(){c=setInterval(a,d)}var s,l,c,d,u,m,h,f,g,y;return s={outgoing:function(e,t){i(e)},destroy:function(){e.clearInterval(c),(l||!g)&&f.parentNode.removeChild(f),f=null},onDOMReady:function(){if(l=t.isHost,d=t.interval,u="#"+t.channel,m=0,g=t.useParent,y=v(t.remote),l){if(w(t.props,{src:t.remote,name:W+t.channel+"_provider"}),g)t.onLoad=function(){h=e,r(),s.up.callback(!0)};else{var i=0,o=t.delay/50;!function a(){if(++i>o)throw new Error("Unable to reference listenerwindow");try{h=f.contentWindow.frames[W+t.channel+"_consumer"]}catch(e){}h?(r(),s.up.callback(!0)):n(a,50)}()}f=k(t)}else h=e,r(),g?(f=parent,s.up.callback(!0)):(w(t,{props:{src:t.remote+"#"+t.channel+new Date,name:W+t.channel+"_consumer"},onLoad:function(){s.up.callback(!0)}}),f=k(t))},init:function(){p(s.onDOMReady,s)}}},B.stack.ReliableBehavior=function(e){var t,i,n=0,o=0,a="";return t={incoming:function(e,r){var s=e.indexOf("_"),l=e.substring(0,s).split(",");e=e.substring(s+1),l[0]==n&&(a="",i&&i(!0)),e.length>0&&(t.down.outgoing(l[1]+","+n+"_"+a,r),o!=l[1]&&(o=l[1],t.up.incoming(e,r)))},outgoing:function(e,r,s){a=e,i=s,t.down.outgoing(o+","+ ++n+"_"+e,r)}}},B.stack.QueueBehavior=function(e){function t(){if(e.remove&&0===s.length)return void E(i);if(!l&&0!==s.length&&!r){l=!0;var o=s.shift();i.down.outgoing(o.data,o.origin,function(e){l=!1,o.callback&&n(function(){o.callback(e)},0),t()})}}var i,r,s=[],l=!0,c="",d=0,p=!1,u=!1;return i={init:function(){b(e)&&(e={}),e.maxLength&&(d=e.maxLength,u=!0),e.lazy?p=!0:i.down.init()},callback:function(e){l=!1;var n=i.up;t(),n.callback(e)},incoming:function(t,n){if(u){var a=t.indexOf("_"),r=parseInt(t.substring(0,a),10);c+=t.substring(a+1),0===r&&(e.encode&&(c=o(c)),i.up.incoming(c,n),c="")}else i.up.incoming(t,n)},outgoing:function(n,o,r){e.encode&&(n=a(n));var l,c=[];if(u){for(;0!==n.length;)l=n.substring(0,d),n=n.substring(l.length),c.push(l);for(;l=c.shift();)s.push({data:c.length+"_"+l,origin:o,callback:0===c.length?r:null})}else s.push({data:n,origin:o,callback:r});p?i.down.init():t()},destroy:function(){r=!0,i.down.destroy()}}},B.stack.VerifyBehavior=function(e){function t(){n=Math.random().toString(16).substring(2),i.down.outgoing(n)}var i,n,o;return i={incoming:function(a,r){var s=a.indexOf("_");-1===s?a===n?i.up.callback(!0):o||(o=a,e.initiate||t(),i.down.outgoing(a)):a.substring(0,s)===o&&i.up.incoming(a.substring(s+1),r)},outgoing:function(e,t,o){i.down.outgoing(n+"_"+e,t,o)},callback:function(i){e.initiate&&t()}}},B.stack.RpcBehavior=function(e,t){function i(e){e.jsonrpc="2.0",a.down.outgoing(r.stringify(e))}function n(e,t){var n=Array.prototype.slice;return function(){var o,a=arguments.length,r={method:t};a>0&&"function"==typeof arguments[a-1]?(a>1&&"function"==typeof arguments[a-2]?(o={success:arguments[a-2],error:arguments[a-1]},r.params=n.call(arguments,0,a-2)):(o={success:arguments[a-1]},r.params=n.call(arguments,0,a-1)),c[""+ ++s]=o,r.id=s):r.params=n.call(arguments,0),e.namedParams&&1===r.params.length&&(r.params=r.params[0]),i(r)}}function o(e,t,n,o){if(!n)return void(t&&i({id:t,error:{code:-32601,message:"Procedure not found."}}));var a,r;t?(a=function(e){a=D,i({id:t,result:e})},r=function(e,n){r=D;var o={id:t,error:{code:-32099,message:e}};n&&(o.error.data=n),i(o)}):a=r=D,l(o)||(o=[o]);try{var s=n.method.apply(n.scope,o.concat([a,r]));b(s)||a(s)}catch(c){r(c.message)}}var a,r=t.serializer||X(),s=0,c={};return a={incoming:function(e,n){var a=r.parse(e);if(a.method)t.handle?t.handle(a,i):o(a.method,a.id,t.local[a.method],a.params);else{var s=c[a.id];a.error?s&&s.error&&s.error(a.error):s&&s.success&&s.success(a.result),delete c[a.id]}},init:function(){if(t.remote)for(var i in t.remote)t.remote.hasOwnProperty(i)&&(e[i]=n(t.remote[i],i));a.down.init()},destroy:function(){for(var i in t.remote)t.remote.hasOwnProperty(i)&&e.hasOwnProperty(i)&&delete e[i];a.down.destroy()}}},N.easyXDM=B}(e,t,i,e.setTimeout,decodeURIComponent,encodeURIComponent)},window.piximedia.injectEasyXDM=function(e,t,i){window.piximedia._.injectEasyXDM.call(e,e,t,i)},window.piximedia.injectEasyXDM(window,document,window.location),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,o,a,r,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,i=0;a>i;i+=1)r[i]=str(i,l)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(a=rep.length,i=0;a>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var i,n,o=e[t];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=walk(o,i),void 0!==n?o[i]=n:delete o[i]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),!function(){"use strict";function e(){var e=this;i.on("event",function(t,i,n){e.validateEvent(t,i,n)})}var t=window,i=t.piximedia.PAM;e.prototype.validateEvent=function(e,n,o){n=n||{};var a=n.adIdAlliance,r=n.creativeIdAlliance,s=o.c1,l=o.c2,c=o.c3,d=o.c4,p=o.c5;i.DEBUG&&t.console.log("Event: "+e+", adId="+a+", creativeId="+r+", c1="+s+", c2="+l+", c3="+c+", c4="+d+", c5="+p)},t.piximedia.Validatr=e,e.instance||(e.instance=new e),t.piximedia.libraryLoader&&t.piximedia.libraryLoader["validatr.js"]&&(t.piximedia.libraryLoader["validatr.js"].complete=!0)}(),function(){var e=window,t="validatr.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var n=0;n<i.onloads.length;n++)i.onloads[n]()}(),window.piximedia.libraryLoader=window.piximedia.libraryLoader||{},window.piximedia.libraryLoader["validatr.js"]=window.piximedia.libraryLoader["validatr.js"]||{},window.piximedia.libraryLoader["validatr.js"].loaded=!0,!function(){"use strict";var e=window;e.piximedia=e.piximedia||{},e.piximedia._=e.piximedia._||{};var t,i="2014031402",n=2500,o=2147483647,a=2147483646,r=2147483645,s=2147483644,l=10;try{t=window.top&&window.top.name&&"debug"===window.top.name?!0:!1}catch(c){t="debug"===window.name?!0:!1}var d=t,p={start:function(){p.setWindowAndDocument(),p.bindFocusEvent(),p.lastMouseCoordinate=[0,0],p.addEvent(p.d,"mouseout",function(e){p.lastMouseCoordinate=[e.clientX,e.clientY]}),p.browser=p.getBrowser(),p.device=p.getDevice(),e.piximedia.preview&&e.piximedia.preview.emulation&&(p.browser=e.piximedia.preview.emulation.browser||p.browser,p.device=e.piximedia.preview.emulation.device||p.device),"msie"!==p.browser.name&&"trident"!==p.browser.name&&"desktop"===p.device.name&&p.hasFlash()&&!function(){function e(e){e.parentNode&&"piximedia-sweetlib-flashcheckobject-wrapper"===e.parentNode.id?p.remove(e.parentNode):p.remove(e)}p.flashCheckCallback=function(){if("safari"===p.browser.name)var t=0,i=setInterval(function(){t++,p.overrideFlashValue="undefined"!=typeof p.flashCheckObject.PercentLoaded,(p.overrideFlashValue||10===t)&&(clearInterval(i),e(p.get("piximedia-sweetlib-flashcheckobject")))},0);else p.overrideFlashValue="undefined"!=typeof p.flashCheckObject.PercentLoaded,e(p.get("piximedia-sweetlib-flashcheckobject"))};var t=function(){p.flashCheckObject=p.d.createElement("object"),p.flashCheckObject.type="application/x-shockwave-flash",p.flashCheckObject.id="piximedia-sweetlib-flashcheckobject",p.d.body.appendChild(p.flashCheckObject),p.flashCheckCallback()};p.d.body?t():(p.overrideFlashValue=!1,p.domload(t))}(),p.browserCSSLoaded=!1;var t=["piximedia.style.20161402.css"],i=function(){p.w.piximedia.pam?p.w.piximedia.pam.loadCSSs(t,function(){p.browserCSSLoaded=!0}):setTimeout(i,200)};i()},logstack:[],pageActive:!1,stylesheets:{},resizeCallbacks:{},resizeObjects:[],pcBonusWidthWhenGluedText:20,blockContentTagNames:["DIV","P","SPAN","TABLE","SECTION","NAV","FORM","CENTER","HEADER","MAIN"],registeredMouseEventsObjects:{},allowedFlashVideoFormat:["mp4","f4v","flv"],allowedHTML5VideoFormat:["mp4","ogv","ogg","webm","dailymotion"],html5VideoRules:function(e){var t=p.browser,i=p.device;if("msie"===t.name)return!1;if("dailymotion"===e)return!0;if("vp9"===e){if("firefox"===t.name)return t.version>=28?!0:!1;if("chrome"===t.name)return t.version>=29?!0:!1;if("trident"===t.name||"msie"===t.name)return!1}else if("vp8"===e){if("firefox"===t.name)return t.version>=26?!0:!1;if("chrome"===t.name)return t.version>=20?!0:!1;if("trident"===t.name||"msie"===t.name)return!1}else if("mp4"===e){if("msie"===t.name&&t.version>=9||"trident"===t.name)return!0;if("mobile"===i.name||"tablet"===i.name)return!0;if("safari"===t.name&&"windows"!==i.os||"chrome"===t.name||"edge"===t.name)return!0}return void 0},prefixedEvent:{chrome:{transitionend:"webkitTransitionEnd"},safari:{transitionend:"webkitTransitionEnd"},firefox:{transitionend:"transitionend"},msie:{transitionend:"transitionend"},"default":{transitionend:"transitionend"}},prefixedProperty:{chrome:{transform:"-webkit-transform"},safari:{transform:"-webkit-transform"},firefox:{},msie:{transform:"-ms-transform"}},setWindowAndDocument:function(){p.w=function(){var e;try{return e=parent.parent.parent.document,e.piximediaiframetest=!0,parent.parent.parent.window}catch(t){}try{return e=parent.parent.document,e.piximediaiframetest=!0,parent.parent.window}catch(t){}try{return e=parent.document,e.piximediaiframetest=!0,parent.window}catch(t){}return window}(),p.d=p.w.document},getNavigator:function(){return window.navigator&&window.navigator.userAgent?window.navigator:{userAgent:"",appName:""}},print:function(){p.console("log",arguments,!1,!0)},log:function(){p.console("log",arguments)},warn:function(){p.console("warn",arguments)},console:function(e,t,i,n){var o=i?"Saved message : ":"["+p.getDeltaTime()+"] "+e+" : ",a=!1,r=!1;"object"==typeof t[0]||n?a=!0:o+=p.sprintf(t,!0),n&&(r=p.copy(t),r.unshift(o)),d&&window.console&&window.console[e]&&(a&&!n?window.console[e](t[0]):n?window.console[e].apply(window.console,r):window.console[e](o)),p.logstack.push&&!i&&p.logstack.push({message:a?t[0]:o,method:e,new_way:r})},hardlog:function(e,t,i){window.console&&window.console[e]&&(i?window.console[e].apply(window.console,t):window.console[e](t))},debug:function(){d=!0,p.each(p.logstack,function(){p.hardlog(this.method,this.new_way?this.new_way:this.message,this.new_way?!0:!1)})},hasClass:function(e,t){return e&&e.className?new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className):!1},removeClass:function(e,t){return e?void(p.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))):!1},addClass:function(e,t){return e?void(p.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)):!1},isSecured:function(){return"https:"===p.w.location.protocol?!0:!1},getDeltaTime:function(){for(var e=p.now(),t=p.ref,i=(e-t).toString();i.length<5;)i="0"+i;return i+"ms"},now:function(){return p.ref||(p.ref=(new Date).getTime()),(new Date).getTime()},random:function(){return Math.floor(1e13*Math.random())},getTime:function(){return p.now()},isArray:function(e){var t=p.getTrueType(e);switch(t){case"array":case"arguments":case"htmlcollection":case"htmlallcollection":case"nodelist":return!0;case"boolean":case"string":case"number":return!1;default:return e&&e[0]&&"number"==typeof e.length?!0:!1}},getTrueType:function(e){return Object.prototype.toString.call(e).match(/\[object (.*?)\]/)[1].toLowerCase()},copy:function(e,t){var i;if(Array.prototype.slice&&(p.isArray(e)||t))return Array.prototype.slice.call(e);if(p.isArray(e)||t)i=[],p.each(e,function(t){i[t]=e[t]});else{i={};var n=function(e,t){p.each(e,function(i){if("object"==typeof e[i])try{JSON.stringify(e[i]),t[i]=p.isArray(e[i])?[]:{},n(e[i],t[i])}catch(o){t[i]=e[i]}else t[i]=e[i]})};n(e,i)}return i},shuffle:function(e){for(var t,i,n=e.length;n;t=Math.floor(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);return e},sprintf:function(e,t){var i=p.copy(e,!0),n=i.shift();if("string"==typeof n){for(;n.match(/%[sSd]/);){var o=i.shift(),a=n.match(/%[sSd]/)?n.match(/%[sSd]/)[0]:"",r="%S"===a,s="%d"===a;o=void 0===o?"":""===o?t?"(Empty String)":"":t?o.toString():o,r?o=o.toUpperCase():s&&(o=parseFloat(o,10)),n=n.replace(/%[sSd]/,o)}return n}return n},camelize:function(e){return e.replace(/(?:^|[-_])(\w)/g,function(e,t){return t?t.toUpperCase():""})},dasherize:function(e){return e.trim().replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase();
},htmlentities:function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},shorten:function(e,t){return e.length>t?e.substr(0,t).replace(/\s\S+$/,"")+"...":e},addZero:function(e){var t=parseFloat(e,10);return 10>t?"0"+e:e},cleanTime:function(e){if(isNaN(parseInt(e,10)))return"00:00";if(parseInt(e,10)/60<=1)return"00:"+p.addZero(parseInt(e,10));var t=parseInt(e/60,10),i=parseInt(e-60*t,10);return p.sprintf(["%s:%s",t,p.addZero(i)])},twiterize:function(e){return e},each:function(e,t){function i(i){try{var n=t.call(e[i],i);if(void 0!==n)return n}catch(o){p.warn("Error looping through %s at key %d",p.getFnName(t),i),p.warn(o)}}var n,o;if(!e)return e;if(p.isArray(e)){for(n=0;n<e.length;n++)if(o=i(n),void 0!==o)return o}else for(var a in e)if(e.hasOwnProperty(a)&&(o=i(a),void 0!==o))return o},exist:function(e,t){return!p.isArray(t)||p.isArray(e)?!1:p.each(t,function(i){return t[i].toLowerCase&&t[i].toLowerCase()===e.toLowerCase()?this:void 0})},getFnName:function(e){if(e.name&&""!==e.name)return e.name;var t="Anonymous function";return e.toString&&e.toString.match&&e.toString.match(/function(.*)?\(/)?e.toString.match(/function(.*)?\(/)[1]:t},extend:function(e,t){p.each(t,function(i){try{var n=e[i],o=t[i];"undefined"==typeof n||""===n||null===n?e[i]=o:"number"!=typeof o||isNaN(parseFloat(n,10))||n===o?"object"!=typeof n&&"undefined"!=typeof n||"object"!=typeof o||p.extend(e[i],o):e[i]=parseFloat(n,10)}catch(a){p.warn(a)}})},isIframed:function(e){var t=e||window;return t.parent&&t.parent.location?t.parent.location!==t.location:!1},isCrossDomained:function(e){try{var t=e||window;return t.parent.document.piximediaCrossDomainTest=!0,window&&window.parent&&window.hasOwnProperty&&!window.parent.hasOwnProperty}catch(i){return!0}},getDocument:function(e){return e.ownerDocument},getWindow:function(e,t){var i=t?p.getDocument(t):e;return"defaultView"in i?i.defaultView:i.parentWindow},getOwnerFif:function(e){var t,i="pm-"+p.random(),n=p.getWindow(p.d,e),o=n.name,a=p.d.getElementsByTagName("iframe");return n.name=i,p.each(a,function(e){try{if(a[e]&&a[e].contentWindow&&a[e].contentWindow.name===i)return t=a[e],!0}catch(n){}}),n.name=o,t?t:void 0},addEvent:function(e,t,i){if(e)if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else if(e["on"+t]){if("function"==typeof e["on"+t]){var n=e["on"+t];e["on"+t]=function(){i.apply(e,arguments),n.apply(e,arguments)}}}else e["on"+t]=i},addEventOnce:function(e,t,i){p.addEvent(e,t,function n(){return p.removeEvent(e,t,n),i.apply(this,arguments)})},removeEvent:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]===i&&(e["on"+t]=null)},preventDefault:function(e){var t=e||window.event;t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1},fireEvent:function(e){if(document.addEventListener){var t=document.createEvent("UIEvents");t.initEvent(e,!1,!1),document.dispatchEvent(t)}else document.documentElement[e]++},bindEvent:function(e,t){document.addEventListener?document.addEventListener(e,function(){t()},!1):(document.documentElement[e]||(document.documentElement[e]=0),document.documentElement.attachEvent("onpropertychange",function(i){i.propertyName===e&&t()}))},onResize:function(e,t){e.pmResizeId||(e.pmResizeId="pmResizeId-"+p.random()),p.resizeCallbacks[e.pmResizeId]||(p.resizeCallbacks[e.pmResizeId]=[]),p.resizeCallbacks[e.pmResizeId].push(t),p.exist(e.pmResizeId,p.resizeObjects)||p.resizeObjects.push(e),p.intervalStarted||(p.intervalStarted=!0,p.checkResize())},checkResize:function(){var e,t,i,n=100,o=n;i=function(){var i,a;p.each(p.resizeObjects,function(){if(a=this.pmResizeId,this.getBoundingClientRect)i=p.gbcr(this),(Math.abs(i.width-(this.pmResizePreviousWidth||0))>.5||Math.abs(i.height-(this.pmResizePreviousHeight||0))>.5||o===n)&&p.resizeCallbacks[a].length>0&&(this.pmResizePreviousWidth=i.width,this.pmResizePreviousHeight=i.height,p.each(p.resizeCallbacks[a],function(){p.call(this)}));else{i=p.getViewportSize();var r=i[0],s=i[1];(e!==r||t!==s||o===n)&&p.resizeCallbacks[a].length>0&&(e=r,t=s,p.each(p.resizeCallbacks[a],function(){p.call(this)}))}}),o===n?o=0:o++},p.addEvent(p.w,"resize",function(){i()}),setInterval(function(){i()},20)},centerMeVertically:function(e,t,i){var n,o=p.getPropertyValue(e,"position");p.applyStyle(e,{position:"static"===o?"absolute":o}),n=function(){var i=0;if("fixed"===o)i=(p.getViewportSize()[1]-p.gbcr(e).height)/2;else if(t){for(var n=(p.getViewportSize()[1]-p.gbcr(e).height)/2,a=e.parentNode,r=0;a!==p.getDocument(a).body;)r+=p.gbcr(a).top-p.gbcr(a.parentNode).top,a=a.parentNode;i=n+p.getPageScroll()[1]-r}else i=(p.gbcr(e.parentNode).height-p.gbcr(e).height)/2;p.applyStyle(e,{top:i+"px"})},p.onResize(e,n),p.onResize(e.parentNode,n),p.onResize(p.w,n),i&&p.addEvent(p.w,"scroll",n)},getPrefixedEvent:function(e){return p.prefixedEvent[p.browser.name]&&p.prefixedEvent[p.browser.name][e]?p.prefixedEvent[p.browser.name][e]:e},getPrefixedProperty:function(e){return p.prefixedProperty[p.browser.name]&&p.prefixedProperty[p.browser.name][e]?p.prefixedProperty[p.browser.name][e]:e},track:function(e,t,i,n){var o,a=!1,r=!1,s=t.match(/^timetracker/i)?"duration":"PANIC"===t?"error":"detail",l="undefined"!=typeof i?i:"default";if(e.trackedEvents||(e.trackedEvents={}),e.trackedEvents[t]||(e.trackedEvents[t]={},a=!0),e.trackedEvents[t][l]||(e.trackedEvents[t][l]=!0,r=!0),p.log("Loging event : %s, %s : %s | Custom ? %s | First on ad ? %s, First on unit ? %s",t,t.match(/^timetracker/i)?"duration":"PANIC"===t?"error":"unit",l,n?n:"(no custom)",a,r),o=p.sprintf(["ad_id=%d;creative_id=%d;c1=%s;c2=%s;c3=%s;c4=%s;c5=%s;first_on_ad=%s;first_on_unit=%s;%s=%s",e.adIdAlliance,e.creativeIdAlliance,e.custom1?e.custom1:"",e.custom2?e.custom2:"",e.custom3?e.custom3:"",e.custom4?e.custom4:"",n||"",a?"1":"0",r?"1":"0",s,i]),!e.adIdAlliance||!e.creativeIdAlliance)return p.log("Not sending it, because adIdAlliance wan't provided nor creativeIdAlliance"),void p.log("Query string should like that : %s",o);var c={c1:e.custom1?e.custom1:"",c2:e.custom2?e.custom2:"",c3:e.custom3?e.custom3:"",c5:n||"",firstOnAd:a?"1":"0",firstOnUnit:r?"1":"0",duration:"duration"===s?i:"",failReason:"error"===s?i:""};e.framedPosition&&e.framedPosition.loadEvent?e.framedPosition.loadEvent(t,c):e.framedAd&&e.framedAd.iframe&&e.framedAd.iframe.position&&e.framedAd.iframe.position.loadEvent?e.framedAd.iframe.position.loadEvent(t,c):e.framedAd&&e.framedAd.loadEvent?(c.detail=i,e.framedAd.loadEvent(t,c)):window.piximedia.core&&window.piximedia.core.loadEvent&&999!==e.adIdAlliance?window.piximedia.core.loadEvent(t,{mode:"P",site_id:e.c1,placement_id:e.c2,params:o,click:""}):p.PixelPrinter("http://ad.piximedia.com/event/?P|"+e.c1+"|"+e.c2+"|event="+t+";"+o+"|"+p.random()+"|")},gbcr:function(e){if(!e)return{};var t,i=0;return e.getBoundingClientRect?(t=e.getBoundingClientRect(),"msie"===p.browser.name&&p.browser.version<=7&&(i=2),{left:t.left-i,right:t.right-i,top:t.top-i,bottom:t.bottom-i,width:t.width?t.width:t.right-t.left,height:t.height?t.height:t.bottom-t.top}):{left:0,top:0,right:0,bottom:0,width:0,height:0,error:!0}},gbcrfp:function(e){var t=p.gbcr(e),i=p.getPageScroll(),n=i[0],o=i[1];return t.left+=n,t.right+=n,t.top+=o,t.bottom+=o,t},getPositionTop:function(e){var t=[],i=[],n=p.getPageScroll()[1];return t=p.isArray(e)?e:[e],p.each(t,function(){if("#pmFiller"===this.toString()){if(p.d.querySelector("#pmFiller")){var e=p.gbcr(p.d.querySelector("#pmFiller"));i.push(e.top+e.height+n)}}else p.w.piximedia.pam.positions[this.toString()]&&p.each(p.w.piximedia.pam.positions[this.toString()].iframes,function(){var e=p.gbcr(this.iframe);i.push(e.top+e.height+n)})}),0===i.length?0:Math.max.apply(null,i)},getBodyHeight:function(e){var t=e||p.d,i=parseInt(p.gbcr(t.body).height,10),n=i-p.getViewportSize(p.getWindow(t))[1];if(n>-1||1>n){var o=t.body.childNodes;i=0;for(var a=0;a<o.length;a++){var r=p.gbcr(o[a]),s=1===o[a].nodeType?p.getPropertyValue(o[a],"position"):"",l="relative"===s||"static"===s?r.height:0;i+=l}}return i},getTextWidth:function(e,t){var i=p.getTextWidth.canvas||(p.getTextWidth.canvas=document.createElement("canvas")),n=i.getContext("2d");n.font=t;var o=n.measureText(e);return Math.floor(o.width)+1},registerMouseEventObject:function(e,t,i){e.customPmId||(e.customPmId="pmMouseEventId-"+p.random()),p.registeredMouseEventsObjects[e.customPmId]||(p.registeredMouseEventsObjects[e.customPmId]={enter:{callbacks:[]},leave:{callbacks:[]},object:e}),p.registeredMouseEventsObjects[e.customPmId][i].callbacks.push(t)},mouseenter:function(e,t){p.registerMouseEventObject(e,t,"enter"),p.addEvent(e,"mouseover",function(){e.isMouseOvered||(e.isMouseOvered=!0,p.each(p.registeredMouseEventsObjects[e.customPmId].enter.callbacks,function(t){p.call(p.registeredMouseEventsObjects[e.customPmId].enter.callbacks[t])}))}),p.mouseleave(e,function(){},!0)},mouseleave:function(e,t,i){function n(){try{e.isMouseOvered=!1}catch(t){return}p.each(p.registeredMouseEventsObjects[e.customPmId].leave.callbacks,function(t){p.call(p.registeredMouseEventsObjects[e.customPmId].leave.callbacks[t])})}i||p.registerMouseEventObject(e,t,"leave"),p.addEvent(e,"mouseout",function(t){var i,o=p.gbcr(e),a=t.clientX<=o.left||t.clientX>=o.right,r=t.clientY<=o.top||t.clientY>=o.bottom;try{i=e.isMouseOvered}catch(s){}(a||r)&&i&&n()}),p.bindEvent("focus-change",function(){var t;try{t=e.isMouseOvered}catch(i){}!p.pageActive&&t&&n()})},isMouseInside:function(e){function t(e,t,i){var n="top"===e||"bottom"===e?"y":"x",o="y"===n?["left","right"]:["top","bottom"],a="y"===n?i.height:i.width;return t[e]<10&&t[e]>-1*a&&t[o[0]]<0&&t[o[1]]<0?!0:!1}var i=p.gbcr(e),n=p.lastMouseCoordinate,o={top:parseInt(i.top-n[1],10),right:parseInt(n[0]-i.right,10),bottom:parseInt(n[1]-i.bottom,10),left:parseInt(i.left-n[0],10)};return t("top",o,i)||t("right",o,i)||t("bottom",o,i)||t("left",o,i)},getMousePosition:function(e,t,i){return e.clientX-p.gbcr(t)[i]},bindRollTracker:function(e,t,i){t.pmRollTracked||(t.pmRollTracked=!0,p.mouseenter(t,function(){clearTimeout(t.pmRollTrackerTimeout),clearTimeout(t.pmRollTrackerTimeoutInstant),t.pmRollTrackerTimeoutInstant=setTimeout(function(){t.cantTrackInstantHover||(p.track(e,"HOVER:0MS",i),setTimeout(function(){t.cantTrackInstantHover=!1},2e3)),t.cantTrackInstantHover=!0},0),t.pmRollTrackerTimeout=setTimeout(function(){p.track(e,"HOVER:2500MS",i)},n)}),p.mouseleave(t,function(){clearTimeout(t.pmRollTrackerTimeout)}))},call:function(e,t){if(e)try{e.apply(this,t||[])}catch(i){p.warn("Callback error"),p.warn(i)}},contentload:function(e){var t=p.d,i=400,n=function(){return t.body&&(t.body.scrollHeight>=i||p.gbcr(t.body).height>=i)?e():void setTimeout(n,10)};n()},domload:function(e,t){function i(){a||(a=!0,o())}var n=t||p.d,o=function(){n.pmdomready||(n.pmdomready=!0),p.call(e)},a=!1,r=function(){"complete"!==n.readyState||a||(n.detachEvent("onreadystatechange",r),a=!0,o())};if("complete"===n.readyState||n.pmdomready)return a=!0,o(),!0;if(n.addEventListener?n.addEventListener("DOMContentLoaded",function(){a||(a=!0,o())},!1):n.all&&!window.opera&&n.attachEvent&&n.attachEvent("onreadystatechange",r),/Safari/i.test(p.getNavigator().userAgent))var s=setInterval(function(){/loaded|complete/.test(n.readyState)&&!a&&(a=!0,o(),clearInterval(s))},50);return p.addEvent(p.getWindow(n),"load",i,!1),!1},getBrowser:function(){var e=p.getNavigator(),t=e.userAgent;if(t.search("Edge")>=0)try{return{name:"edge",version:parseInt(t.match(/Edge\/([0-9]+)/)[1],10)}}catch(i){}else if(t.search("Chrome")>=0)try{return{name:"chrome",version:parseInt(t.match(/Chrome\/([0-9]+)/)[1],10)}}catch(i){}else if(t.search("Safari")>=0)try{return{name:"safari",version:parseInt(t.match(/Version\/([.0-9]+)/)[1],10)}}catch(i){}else if(t.search("Firefox")>=0)try{return{name:"firefox",version:parseInt(t.match(/Firefox\/([0-9]+)/)[1],10)}}catch(i){}else if("Microsoft Internet Explorer"===e.appName)try{var n=!1,o=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!==o.exec(t)&&(n=parseFloat(RegExp.$1)),10===n?{name:"trident",version:6}:{name:"msie",version:n}}catch(i){}else if(e.userAgent.match(/Trident/))try{return{name:"trident",version:e.userAgent.match(/Trident\/([0-9])\./)[1]}}catch(i){}return{name:"other",version:1}},getDevice:function(){var e,t,i,n=p.getNavigator(),o=n.userAgent,a=o.match(/iPad|iPod|iPhone/)?"ios":o.match(/Android/)?"android":o.match(/Windows/)?"windows":o.match(/Macintosh/)?"mac":"";return i=o.match(/GoogleTV|SmartTV|Internet TV|NetCast|NETTV|AppleTV|boxee|Kylo|Roku|DLNADOC|CE\-HTML/i)?"desktop":o.match(/Xbox|PLAYSTATION 3|Wii/i)?"desktop":o.match(/iP(a|ro)d/i)||o.match(/tablet/i)&&!o.match(/RX-34/i)||o.match(/FOLIO/i)?"tablet":o.match(/Linux/i)&&o.match(/Android/i)&&!o.match(/Fennec|mobi|HTC Magic|HTCX06HT|Nexus One|SC-02B|fone 945/i)?"tablet":o.match(/Kindle/i)||o.match(/Mac OS/i)&&o.match(/Silk/i)?"tablet":o.match(/GT-P10|SC-01C|SHW-M180S|SGH-T849|SCH-I800|SHW-M180L|SPH-P100|SGH-I987|zt180|HTC( Flyer|_Flyer)|Sprint ATP51|ViewPad7|pandigital(sprnova|nova)|Ideos S7|Dell Streak 7|Advent Vega|A101IT|A70BHT|MID7015|Next2|nook/i)||o.match(/MB511/i)&&o.match(/RUTEM/i)?"tablet":o.match(/BOLT|Fennec|Iris|Maemo|Minimo|Mobi|mowser|NetFront|Novarra|Prism|RX-34|Skyfire|Tear|XV6875|XV6975|Google Wireless Transcoder/i)?"mobile":o.match(/Opera/i)&&o.match(/Windows NT 5/i)&&o.match(/HTC|Xda|Mini|Vario|SAMSUNG\-GT\-i8000|SAMSUNG\-SGH\-i9/i)?"mobile":o.match(/Windows (NT|XP|ME|9)/)&&!o.match(/Phone/i)&&!o.match(/Bot|Spider|ia_archiver|NewsGator/i)||o.match(/Win( ?9|NT)/i)?"desktop":o.match(/Macintosh|PowerPC/i)&&!o.match(/Silk/i)?"desktop":o.match(/Linux/i)&&o.match(/X11/i)&&!o.match(/Charlotte/i)?"desktop":o.match(/CrOS/)?"desktop":o.match(/Solaris|SunOS|BSD/i)?"desktop":o.match(/curl|Bot|B-O-T|Crawler|Spider|Spyder|Yahoo|ia_archiver|Covario-IDS|findlinks|DataparkSearch|larbin|Mediapartners-Google|NG-Search|Snappy|Teoma|Jeeves|Charlotte|NewsGator|TinEye|Cerberian|SearchSight|Zao|Scrubby|Qseero|PycURL|Pompos|oegp|SBIder|yoogliFetchAgent|yacy|webcollage|VYU2|voyager|updated|truwoGPS|StackRambler|Sqworm|silk|semanticdiscovery|ScoutJet|Nymesis|NetResearchServer|MVAClient|mogimogi|Mnogosearch|Arachmo|Accoona|holmes|htdig|ichiro|webis|LinkWalker|lwp-trivial|facebookexternalhit/i)&&!o.match(/phone|Playstation/i)?"bot":"desktop",e=o.match(/(OS|Android|Windows Phone OS) ([0-9._]+)/),t=e?parseFloat(e[2].replace(/[_.]/,"@").replace(/[._]/g,"").replace("@","."),10):o.match(/Windows NT 6.1/)?7:o.match(/Windows NT 6.2/)?8:o.match(/Windows NT 6.1/)?9:void 0,"tablet"===i&&"windows"===a&&(i="desktop"),{name:i,version:t,os:a}},hasFlash:function(){if("undefined"!=typeof p.overrideFlashValue)return p.overrideFlashValue;var e=!1,t=p.getNavigator();try{t.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=!0)}catch(i){}var n;if(!e)try{n=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),e=!!n}catch(i){}if(!e)try{n=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),e=!!n}catch(i){}if(!e)try{n=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e=!!n}catch(i){}return"safari"===p.browser.name&&(e=!1),e},canPlayVideo:function(e){return p.canPlayHTML5Video(e)||p.canPlayFlashVideo(e)},canPlayHTML5Video:function(e){var t=[];if("string"==typeof e){if(!p.exist(p.getExtention(e),p.allowedHTML5VideoFormat))return void 0;p.canPlayThisVideo(e)&&t.push(p.canPlayThisVideo(e))}else"object"==typeof e&&p.each(e,function(){p.exist(p.getExtention(this),p.allowedHTML5VideoFormat)&&p.canPlayThisVideo(this)&&t.push(p.canPlayThisVideo(this))});if(t.length>0){for(var i=0;i<t.length;i++)if("vp9"===p.getCodec(t[i]))return t[i];return t[0]}return void 0},canPlayFlashVideo:function(e){return p.hasFlash()?"string"==typeof e?p.exist(p.getExtention(e),p.allowedFlashVideoFormat)?e:void 0:"object"==typeof e?p.each(e,function(){return p.exist(p.getExtention(this),p.allowedFlashVideoFormat)?this:void 0}):void 0:void 0},canPlayThisVideo:function(e){var t,i="video/"+p.getExtention(e),n=document.createElement("video"),o=p.getCodec(e);return t=p.html5VideoRules(p.getCodec(e)),void 0===t&&(t=n.canPlayType&&"probably"===n.canPlayType(i+(o.match(/^vp/)?";codecs="+o:""))?!0:!1),t?e:void 0},getCodec:function(e){return"webm"===p.getExtention(e)?e.match(/\.vp9\.webm/i)?"vp9":"vp8":p.getExtention(e)},getExtention:function(e){if(!e)return"";if(e.match(/dai\.ly/)||e.match(/\:\/\/www.dailymotion.com/))return"dailymotion";var t=e.replace(/\?.*?$/gi,"").match(/\.([a-zA-Z0-9]{2,5})$/);return t&&t[1]?t[1].toLowerCase():""},getFileName:function(e){if(!e)return"";var t=e.replace(/\?.*?$/gi,"").split("/").pop();return t.replace("."+t.getExtention,"")},getFileType:function(e){var t=e;switch("object"==typeof e&&(t=e[0]),p.getExtention(t)){case"swf":return"swf";case"png":case"gif":case"jpg":case"jpeg":return"image";case"flv":case"f4v":case"mp4":case"ogg":case"ogv":case"webm":case"video":case"dailymotion":return"video";case"php":case"html":return"html";default:return!1}},getVideoCodec:function(e){if(!e)return"";var t=e.replace(/\?.*?$/gi,"").match(/.{1,}\.([a-zA-Z0-9]{2,5})\.[a-zA-Z0-9]{2,5}$/);return t&&t[1]?t[1].toLowerCase():""},applyStyle:function(e,t){p.each(t,function(t){try{p.setPropertyValue(e,t,this.toString())}catch(i){}})},addBorders:function(e,t){var i={color:"#000",size:1,side:["top","right","bottom","left"],zIndex:2147483647};"static"===p.getPropertyValue(e,"position")&&(e.style.position="relative",e.style.top="0px",e.style.left="0px"),p.extend(t,i),p.log("Adding border to %s %s",e,t);var n=p.getDocument(e),o=function(i){var o=n.createElement("div");p.applyStyle(o,{width:"top"===i||"bottom"===i?"100%":t.size+"px",height:"top"===i||"bottom"===i?t.size+"px":"100%",background:t.color,position:"absolute",zIndex:t.zIndex,top:"bottom"===i?"auto":0,bottom:"bottom"===i?0:"auto",left:"right"===i?"auto":0,right:"right"===i?0:"auto"}),e.appendChild(o)};p.each(t.side,function(){o(this.toString())})},createCSS:function(e,t,i){if("string"!=typeof t){var n=[];for(var o in t)t.hasOwnProperty(o)&&n.push(o+": "+t[o]);t=n.join("; ")}try{var a=i||p.d;if(!a.styleSheets||0===a.getElementsByTagName("head").length)return;a.pmCreateCSSId||(a.pmCreateCSSId=p.random()),"undefined"==typeof p.stylesheets[a.pmCreateCSSId]&&(p.stylesheets[a.pmCreateCSSId]=!1);var r,s,l,c=p.stylesheets[a.pmCreateCSSId];if(c||(l=a.createElement("style"),l.type="text/css",a.getElementsByTagName("head")[0].appendChild(l),p.stylesheets[a.pmCreateCSSId]=l.sheet||a.styleSheets[a.styleSheets.length-1],c=p.stylesheets[a.pmCreateCSSId]),s=c.media,r=typeof s,"string"===r){for(var d=0;d<c.rules.length;d++)if(c.rules[d].selectorText.toLowerCase()===e.toLowerCase())return void(c.rules[d].style.cssText+=t);c.addRule(e,t)}else if("object"===r){for(var u=0;u<c.cssRules.length;u++)try{if(c.cssRules[u]&&c.cssRules[u].selectorText&&c.cssRules[u].selectorText.toLowerCase()===e.toLowerCase())return void(c.cssRules[u].style.cssText+=t)}catch(m){}c.insertRule(e+"{"+t+"}",0)}}catch(m){p.warn(m)}},createCSSs:function(e,t){for(var i in e)e.hasOwnProperty(i)&&p.createCSS(i,e[i],t)},loadScript:function(e){var t=e.document||p.d,i=t.createElement("script");i.src=e.uri,t.body.appendChild(i);var n=function(){return e.validate?void(e.validate()&&!i.validated?(i.validated=!0,e.callback()):setTimeout(n,50)):!0};i.addEventListener?i.addEventListener("load",n,!1):i.onreadystatechange=function(){"loaded"===this.readyState&&n()}},getPropertyValue:function(e,t){if(e){switch(t){case"scrollTop":case"scroll-top":return"BODY"===e.nodeName?p.getPageScroll()[1]:(e.documentElement||e).scrollTop||e.scrollTop}return p.w.getComputedStyle?p.w.getComputedStyle(e).getPropertyValue(p.dasherize(t)):e.currentStyle?e.currentStyle[t]:void 0}},setPropertyValue:function(e,t,i){switch(t){case"scrollTop":return"BODY"===e.nodeName&&e.ownerDocument.documentElement&&"number"==typeof e.ownerDocument.documentElement.scrollTop&&(e.ownerDocument.documentElement.scrollTop=parseInt(i,10)),e.scrollTop=parseInt(i,10)}return e.style[t]=i},returnAbsolute:function(e,t){return e.match(/^(http|\/\/)/i)?e:t+e},get:function(e,t){var i=t||p.d;return i.getElementById(e)?i.getElementById(e):document.getElementById(e)},remove:function(e){e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)},getPrevElement:function(e){for(var t=0,i=e.previousSibling;1!==i.nodeType&&20>t;)i=i.previousSibling,t++;return 1===i.nodeType?i:null},getNextElement:function(e){for(var t=0,i=e.nextSibling;1!==i.nodeType&&20>t;)i=i.nextSibling,t++;return 1===i.nodeType?i:null},handleAsset:function(t,i,n,o,a){var r,s=null,l=t.files||t.file;if(l&&""!==l||(t.backup&&""!==t.backup?(l=t.backup,s=!1):p.warn("No file provided to handleAsset for %s",n)),r=p.getFileType(t.file),s=null!==s&&""!==s?p.getExtention(t.backup):!1,p.log("Load assets for "+n+", type : "+r),t.overrideFileType&&(r=t.overrideFileType),"video"===r||"dailymotion"===r){if(e.piximedia.Video&&t.handleVideo){var c=p.copy(t);return c.position=a.position,new e.piximedia.Video(i,{files:l,width:100,height:100,unit:"%",poster:t.backup,packshot:t.packshot||!1,options:c})}return"video"}if(p.isArray(t.file)&&(t.file=t.file[0]),"swf"===r)return p.hasFlash()?p.embedSWF({file:p.returnAbsolute(l,o),wrapper:i,id:n,width:t.width,height:t.height,version:t.flashversion,flashvars:t.flashvars,params:t.params,attributes:t.attributes}):t.backup?(p.log("Flash is off, switching to backup"),p.loadImage(p.returnAbsolute(t.backup,o),i,n,t.width,t.height)):(p.log("Flash is off and no backup provided"),!1);if("image"===r)return p.loadImage(p.returnAbsolute(t.file,o),i,n,t.width,t.height);if("html"===r){var d=parseFloat(t.zoom,10)||1;return t.width="number"==typeof t.width?t.width/d:t.width,t.height="number"==typeof t.height?t.height/d:t.height,p.loadIframe(p.returnAbsolute(t.file,o),i,n,t.width,t.height,a,d,t.scaleIframe,t.waitExpandToDecorate,t.options)}return!1},loadImage:function(e,t,i,n,o){if(e&&""!==e){var a=p.getDocument(t).createElement("img");return p.applyStyle(a,{width:n+(p.getUnit(n,!0)?"":"px"),height:o+(p.getUnit(o,!0)?"":"px"),display:"block",border:"0"}),a.id="pm-image-"+i,a.src=e,t.appendChild(a),a}},loadIframe:function(t,i,n,o,a,r,s,l,c,d){if(d=d||{},t&&""!==t){var u,m=!1,h=!1,f={getOptions:{method:function(){return d}},getClickActions:{method:function(){return r?r.clickUrl:[]}},track:{method:function(e,t){return r?(p.track(r,e,n,t),{event:[e,t],success:!0}):(p.warn("pmData not here"),{event:[e,t],success:!1})}},show:{method:function(){p.getWindow(i.ownerDocument).setStage&&p.getWindow(i.ownerDocument).setStage(!1,"show")}},hide:{method:function(){p.getWindow(i.ownerDocument).setStage&&p.getWindow(i.ownerDocument).setStage(!1,"hide")}},close:{method:function(){p.getWindow(i.ownerDocument).setStage&&p.getWindow(i.ownerDocument).setStage(!1,"close")}},replayTakeover:{method:function(){r.framedAd&&r.framedAd.pam.emit("replay-takeover",{id_ad:r.adIdAlliance})}},"footer-action":{method:function(e,t){switch(e){case"expand":m.expand(r.clickUrl&&r.clickUrl[t].url?r.clickUrl[t].url:t,m.isExpanded?!0:!1);break;case"collapse":m.collapse();break;case"show":m.show();break;case"hide":m.hide()}}}};if(r)var v=0,g=setInterval(function(){e.piximedia.pmData5418_1&&e.piximedia.pmData5418_1.adIdAlliance===r.adIdAlliance&&"click"!==e.piximedia.pmData5418_1.openmode&&(m=e.piximedia.pmData5418_1,h&&u()),(m||200===v)&&clearInterval(g),v++},50);var y,b,w=!1;if(w){var x,k;x=p.w.piximedia.easyXDM,p.log("Creating RPC channel"),k=new x.Rpc({container:i,hash:!0,props:{id:"pm-fif-"+n,style:{width:o+(p.getUnit(o,!0)?"":"px"),height:a+(p.getUnit(a,!0)?"":"px")},allowfullscreen:"allowfullscreen",scrolling:"no"},onReady:function(){p.log("master is ready")},remote:t.match(/^\/\//)?p.w.location.protocol+t:t},{local:f,remote:{}}),y=i.querySelector("iframe")}else y=p.getDocument(i).createElement("iframe"),y.style.width=o+(p.getUnit(o,!0)?"":"px"),y.style.height=a+(p.getUnit(a,!0)?"":"px"),y.style.border="0",y.allowfullscreen=!0,y.scrolling="no",c?(y.src="",y.setAttribute("data-src",t)):y.src=t,i.appendChild(y);return 1!==s&&(y.style.zoom=s),u=function(){y.contentWindow.postMessage({method:"allowFooterExpand"},"*")},b=function(e){if(e.data.method&&f[e.data.method]){var t=f[e.data.method].method.apply(this,e.data.args);e.source&&e.source.postMessage({method:e.data.callback,args:t},e.origin),"getClickActions"===e.data.method&&m&&e.source&&e.source.postMessage({method:"allowFooterExpand"},e.origin),h=!0}},p.addEvent(p.getWindow(i.ownerDocument),"message",b),y.destroy=function(){p.removeEvent(p.getWindow(i.ownerDocument),"message",b)},l&&(y.style.position="relative",p.onResize(i,function(){var e=p.gbcr(i);y.style.transform="scale("+e.width/o+")",y.style.left=(e.width-o)/2+"px",y.style.top=(e.height-a)/2+"px"})),y}},insertText:function(e,t,i){var n=p.getDocument(i),o=n.createElement("div");o.appendChild(n.createTextNode(e)),p.applyStyle(o,t),i.appendChild(o)},embedSWF:function(t){function i(){var e="";return p.each(t.params,function(t){e+="<param name='"+t+"' value='"+this+"'>"}),e}function n(){var e=" ";return p.each(t.attributes,function(t){e+=" "+t+"='"+this+"'"}),e}function o(){var i="";return p.each(t.flashvars,function(n){var o=t.flashvars[n];"function"!=typeof o&&"object"!=typeof o&&(o="undefined"!=typeof o?o.toString():"undefined","string"==typeof o?(o.match(/^\/\//)&&(o=(e.piximedia.pam?e.piximedia.pam.globalOptions.protocol+":":p.w.location.protocol)+o),i+=o.match(/&/)?n+"="+encodeURIComponent(o)+"&":n+"="+o+"&"):i+=n+"="+o+"&")}),i=i.replace(/\&$/i,"")}if(!p.hasFlash())return void p.warn("Flash is not available");if(!t.file||!t.wrapper)return void p.warn("embedSWF improper arguments");var a={file:"",wrapper:{},id:"unit",width:"300",height:"250",version:"9.0.0",flashvars:p.flashdata.getDefaultFlashvars(),params:p.flashdata.getDefaultParams(),attributes:p.flashdata.getDefaultAttributes(),addWrapper:!1},r="",s=p.getDocument(t.wrapper).createElement("div");p.extend(t,a),r='<!--[if !IE]> --><object id="pmfooter-flash-'+t.id+'" type="application/x-shockwave-flash"  data="'+t.file+'" width="'+t.width+'" height="'+t.height+'"'+n()+'><!-- <![endif]--><!--[if IE]><object id="pmfooter-flash-'+t.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"  width="'+t.width+'" height="'+t.height+'"><param name="movie" value="'+t.file+'"/><!--><!--dgx--> <param name="allowscriptaccess" value="always" />'+i()+'<param name="flashvars" value="'+o()+'" /></object>',t.addWrapper?(t.wrapper.appendChild(s),s.innerHTML=r):t.wrapper.innerHTML+=r;var l=p.getDocument(t.wrapper).getElementById("pmfooter-flash-"+t.id);return l&&!l.style.width&&(l.style.width=t.width+(p.hasUnit(t.width)?"":"px")),l&&!l.style.height&&(l.style.height=t.height+(p.hasUnit(t.height)?"":"px")),p.getDocument(t.wrapper).getElementById("pmfooter-flash-"+t.id)},flashdata:{getDefaultFlashvars:function(){return{}},getDefaultParams:function(){return{loop:!0,menu:!1,quality:"high",salign:"tr",allowfullscreen:"true",wmode:"opaque",scale:"noscale"}},getDefaultAttributes:function(){return{salign:"bottom",wmode:"opaque",style:"position : relative; visibility : visible;"}}},isMobileSite:function(e){var t=e||p.d,i=p.getViewportSize(p.getWindow(t)),n=i[0]>i[1]?1:0;return screen.width&&parseInt(i[n]-screen.width,10)<10?!0:!1},canUseCSS3:function(){var e=function(){var e=document.createElement("div"),t="Khtml Ms O Moz Webkit".split(" "),i=t.length;return function(n){if(n in e.style)return!0;for(n=n.replace(/^[a-z]/,function(e){return e.toUpperCase()});i--;)if(t[i]+n in e.style)return!0;return!1}}();return e("transition")?!0:!1},fixTracking:function(e,t){if("string"!=typeof e.clickUrl[0]){if(e.tracking&&e.tracking.clickUrl)for(var i=0;i<e.tracking.clickUrl.length;i++)e.clickUrl[i]||(e.clickUrl[i]={url:""}),e.clickUrl[i].url=e.tracking.clickUrl[i];if(e.tracking&&e.tracking.pixelUrl)for(var n=0;n<e.tracking.pixelUrl.length;n++)e.pixelUrl[n]=e.tracking.pixelUrl[n];t.advertiserClickUrl&&(e.clickUrl[0].url=t.advertiserClickUrl),t.clickUrl&&(e.clickUrl[0].url=t.clickUrl+e.clickUrl[0].url),p.each(e.clickUrl,function(){this.tracking=t.getTrackedUrl("CLICK","")}),"string"==typeof e.clickUrl[0].url&&e.clickUrl.unshift("")}},PixelPrinter:function(e,t){if(e){var i=e.replace(/\[timestamp\]/gi,p.random()).replace(/\[random\]/gi,p.random()).replace(/\[random_number\]/gi,p.random());if(p.log("Printing pixel : "+i),"msie"===p.browser.name&&p.browser.version<9||!document.body||!t){var n=new Image;n.src=i}else{var o=document.createElement("img");o.style.display="none",o.width=o.height=o.border="0",t.appendChild(o),o.src=i}}},getViewportSize:function(e){var t,i,n=e||p.w,o=p.getNavigator();return o.userAgent.match(/ipad/i)?(t=n.innerWidth,i=n.innerHeight):"undefined"!=typeof n.innerWidth?(t=n.innerWidth,i=n.innerHeight):"undefined"!=typeof n.document.documentElement&&"undefined"!=typeof n.document.documentElement.clientWidth&&0!==n.document.documentElement.clientWidth?(t=n.document.documentElement.clientWidth,i=n.document.documentElement.clientHeight):(t=n.document.getElementsByTagName("body")[0].clientWidth,i=n.document.getElementsByTagName("body")[0].clientHeight),[t,i]},getPageScroll:function(e){var t=e||p.w,i=t.document,n=0,o=0;return void 0!==t.self.pageYOffset?(o=t.pageYOffset,n=t.pageXOffset):i.documentElement&&void 0!==i.documentElement.scrollTop&&i.documentElement.scrollTop?(o=i.documentElement.scrollTop,n=i.documentElement.scrollLeft):i.body&&i.body.scrollTop&&(o=i.body.scrollTop,n=i.body.scrollLeft),[n,o]},setDocumentFocus:function(){p.pageActive||(p.pageActive=!0,p.fireEvent("focus-change",p.pageActive))},bindFocusEvent:function(){function t(){p.pageActive||(p.pageActive=!0,p.fireEvent("focus-change",p.pageActive)),p.removeEvent(p.d,"mousemove",t)}function i(){p.pageActive&&(p.pageActive=!1,p.fireEvent("focus-change",p.pageActive))}var n=p.getBrowser(),o=p.getDevice();("mobile"===o.name||"tablet"===o.name)&&t(),"msie"===n.name&&n.version<10?(p.mouseenter(p.d,t),p.addEvent(p.d,"focusin",function(){t()}),p.addEvent(p.d,"focusout",function(){i()})):(p.addEvent(p.w,"focus",t),p.addEvent(p.w,"blur",function(){var e=p.d.getElementsByTagName("iframe"),t=!1;p.each(e,function(){try{t=p.isMouseInside(this)}catch(e){}}),t||i(),i()}),p.mouseenter(p.d,t)),p.addEvent(p.w,"scroll",t),p.addEvent(p.d,"mousemove",t),e.piximedia.preview&&t()},bindVisibilityTracker:function(e,t){var i,n={object:null,threshold:60},o=!1;if(p.extend(e,n),!e.object&&!e.query)return void p.warn("bindVisibilityTracker %s","object missing or not an object");if(e.query&&(e.object=p.querySelector(e.query)),p.getDocument(e.object)!==p.d){var a=p.getOwnerFif(e.object);e.object=a||e.object}return i=setInterval(function(){if(p.pageActive){var n=p.gbcr(e.object),a=p.getViewportSize(),r={top:parseInt((n.height+n.top)/Math.min(n.height,a[1])*100,10),right:parseInt((n.right-a[0]-n.width)/Math.min(n.width,a[0])*-100,10),bottom:parseInt((n.bottom-a[1]-n.height)/Math.min(n.height,a[1])*-100,10),left:parseInt((n.width+n.left)/Math.min(n.width,a[0])*100,10)},s=!1;if(n.error)return clearInterval(i),void p.call(t,[!1,!0]);r.top>e.threshold&&r.right>e.threshold&&r.bottom>e.threshold&&r.left>e.threshold&&(s=!0),s!==o&&(p.call(t,[s]),o=s),e.object.isVisible=s}},500),p.bindEvent("focus-change",function(){p.pageActive?o&&(e.object.isVisible=!0,p.call(t,[!0])):(e.object.isVisible=!1,p.call(t,[!1]))}),{clear:function(){clearInterval(i)}}},bindVisibilityTrackerWithoutFocus:function(e,t){var i,n={object:null,threshold:60},o=!1;if(p.extend(e,n),!e.object)return void p.warn("bindVisibilityTracker %s","object missing or not an object");if(p.getDocument(e.object)!==p.d){var a=p.getOwnerFif(e.object);e.object=a||e.object}return i=setInterval(function(){var n=p.gbcr(e.object),a=p.getViewportSize(),r={top:parseInt((n.height+n.top)/Math.min(n.height,a[1])*100,10),right:parseInt((n.right-a[0]-n.width)/Math.min(n.width,a[0])*-100,10),
bottom:parseInt((n.bottom-a[1]-n.height)/Math.min(n.height,a[1])*-100,10),left:parseInt((n.width+n.left)/Math.min(n.width,a[0])*100,10)},s=!1;return n.error?(clearInterval(i),void p.call(t,[!1,!0])):(r.top>e.threshold&&r.right>e.threshold&&r.bottom>e.threshold&&r.left>e.threshold&&(s=!0),s!==o&&(p.call(t,[s]),o=s),void(e.object.isVisibleWithoutFocus=s))},500),{clear:function(){clearInterval(i)}}},getVisibility:function(e){var t,i,n,o=p.gbcr(e);if(t=o.top>0?0:o.top,i=o.bottom>0?0:o.bottom,n=o.height+t+i,!p.pageActive)return 0;if(0>n)return 0;var a=o.top>p.getViewportSize()[1]||isNaN(n/o.height)?0:n/o.height;return a},watchVisibility:function(e){e.percents=[],e.getAverage=function(){var i=t(e.percents);return e.percents=[],i};var t=function(e){var t,i=0;return p.each(e,function(){i+=this}),t=i/e.length},i=function(){var i=0;e.objects.length&&(p.each(e.objects,function(){var e=p.getVisibility(this.dom);if(i+=e,!this.percents){var n=this;n.percents=[],n.getAverage=function(){var e=t(n.percents);return n.percents=[],e}}this.percents.push(e)}),i>1&&(i=1),e.percents.push(i))};i(),setInterval(function(){i()},500)},bindViewTracker:function(e,t){var i,n,o={object:null,threshold:60,duration:10},a=0,r=!1;return p.extend(e,o),e.object?(n=p.bindVisibilityTracker(e,function(e,t){t?clearInterval(i):r=e}),void(i=setInterval(function(){r&&a++,e.object.viewTimer=a,a===e.duration&&(clearInterval(i),n.clear(),p.call(t))},1e3))):void p.warn("bindViewTracker %s","object missing or not an object")},gettext:function(e){return e.toUpperCase()},Browser:function(e){var t=e.uri;e.uri=e.exposureTime>0?e.newtab?e.position.getTrackedUrl("AP_VISIT_NEW_TAB",e.uri):e.position.getTrackedUrl("AP_VISIT",e.uri):e.position.getTrackedUrl("CLICK",e.uri);var i=p.d.createElement("div");i.id="pm-browser",i.innerHTML="<div id='pm-browser-header'>	<div id='pm-browser-title'><span>"+(e.title||"")+"</span></div>	<div id='pm-browser-tools'>		<div id='pm-browser-facebook' class='pm-browser-tool'>			<span class='pm-browser-icon pm-browser-facebook'></span>			<span class='pm-browser-tooltip'>"+p.gettext("Partage sur Facebook")+"</span>		</div>		<div id='pm-browser-twitter' class='pm-browser-tool'>			<span class='pm-browser-icon pm-browser-twitter'></span>			<span class='pm-browser-tooltip'>"+p.gettext("Partage sur Twitter")+"</span>		</div>		<div id='pm-browser-close' class='pm-browser-tool'>			"+p.gettext("FERMER")+" X		</div>	</div></div><div id='pm-browser-iframe'><iframe width='100%' height='100%' frameborder='0'></iframe></div>",p.each(i.querySelectorAll(".pm-browser-tool"),function(){var e=this;p.addEvent(e,"mouseenter",function(){p.addClass(e,"pm-browser-tool-display-tooltip")}),p.addEvent(e,"mouseleave",function(){p.removeClass(e,"pm-browser-tool-display-tooltip")})}),p.addEvent(i.querySelector("#pm-browser-facebook"),"click",function(){e.position.loadEvent("AP_FACEBOOK"),window.open("http://www.facebook.com/share.php?v=4&src=bm&u="+encodeURIComponent(t),"_blank")}),p.addEvent(i.querySelector("#pm-browser-twitter"),"click",function(){e.position.loadEvent("AP_TWITTER"),window.open("http://twitter.com/share?url="+t+"&text="+e.title,"_blank")}),p.addEvent(i.querySelector("#pm-browser-close"),"click",function(){e.position.loadEvent("AP_CLOSE"),a()}),p.addEvent(i.querySelector("#pm-browser-title span"),"click",function(){a(),e.newtab=!0;var t=new p.Browser(e);t.open()});var n,o=function(){if(e.newtab)window.open(e.uri,"_blank"),p.startNavigationTrackingForBrowser(e);else{if(!p.browserCSSLoaded)return setTimeout(o,100);p.d.body.appendChild(i),setTimeout(function(){p.animate(i,{height:"100%",oncompleted:function(){i.querySelector("#pm-browser-iframe iframe").src=e.uri,n=p.startNavigationTrackingForBrowser(e),p.animate(i.querySelector("#pm-browser-header"),{top:0}).play()}}).play()},0),p.setTimer("OUVERTURE",function(t,i){e.position.loadEvent("TIMETRACKER::"+t,{duration:i})}).start()}},a=function(t){n.clear&&n.clear(),p.animate(i.querySelector("#pm-browser-header"),{top:30,duration:100,oncompleted:function(){p.animate(i,{height:"0%",oncompleted:function(){p.d.body.removeChild(i),t||e.clearCallback()}}).play()}}).play()};return{open:o,close:function(){a(!0)}}},startNavigationTrackingForBrowser:function(e){var t,i=function(t){return"NAV"===t?e.newtab?"AP_NEW_TAB_NAV_":"AP_NAV_":"VISIT"===t?e.newtab?"AP_VISIT_NEW_TAB":"AP_VISIT":void 0},n=[3,5,10,15,20,30],o=!0,a=0,r=setInterval(function(){a++,-1!==n.indexOf(a)&&e.position.loadEvent(i("NAV")+a),e.exposureTime&&e.exposureTime===a&&e.position.loadEvent("CLICK")},1e3);return setTimeout(function(){o=!1},5e3),t=function(){o&&e.position.loadEvent("AP_REBOUND"),clearInterval(r),e.newtab&&(p.removeEvent(p.w,"focus",t),p.removeEvent(p.w,"focusin",t),p.removeEvent(p.w,"mousemove",t))},e.newtab&&(p.addEvent(p.w,"focus",t),p.addEvent(p.w,"focusin",t),p.addEvent(p.w,"mousemove",t)),e.exposureTime||e.position.loadEvent(i("VISIT")),{clear:t}},startViewTracking:function(t){var i={isVisible:!1};e.piximedia["view_"+t.adIdAlliance]||(e.piximedia["view_"+t.adIdAlliance]={viewableMetrics:{5:!0,10:!0,20:!0,30:!0,40:!0},viewableCount:0});var n=e.piximedia["view_"+t.adIdAlliance];return setInterval(function(){i.isVisible&&n.viewableCount++,n.viewableMetrics[n.viewableCount]&&(n.viewableMetrics[n.viewableCount]=!1,t.framedAd.loadEventOnce("AP_VIEWABLE_GLOBAL:"+n.viewableCount+"S")),"cpm"===t.saleMode&&t.minExposureTime>0&&(n.viewableCount!==t.minExposureTime||n.clickSent||(n.clickSent=!0,t.kpiPixels&&t.kpiPixels&&""!==t.kpiPixels&&t.kpiPixels.length>0&&("string"==typeof t.kpiPixels?p.PixelPrinter(t.kpiPixels):p.each(t.kpiPxels,function(){p.PixelPrinter(this.toString())})),t.position.loadEvent(t,"CLICK","cpmview")))},1e3),i},startNavigationTracking:function(e){e.positionId&&(e.framedPosition=window.piximedia.pam.positions["1x1"]);var t,i=[3,5,10,15,20,30],n=!0,o=0,a=setInterval(function(){o++,-1!==i.indexOf(o)&&p.track(e,"AP_NEW_TAB_NAV_"+o)},1e3);setTimeout(function(){n=!1},5e3),t=function(){n&&p.track(e,"AP_REBOUND"),clearInterval(a),p.removeEvent(p.w,"focus",t),p.removeEvent(p.w,"focusin",t),p.removeEvent(p.w,"mousemove",t)},p.addEvent(p.w,"focus",t),p.addEvent(p.w,"focusin",t),p.addEvent(p.w,"mousemove",t),p.track(e,"AP_VISIT_NEW_TAB")},setTimer:function(e,t){function i(){a||(a=!0,p.call(t,[e,o])),clearInterval(n),p.removeEvent(window,"beforeunload",i),p.removeEvent(window,"unload",i)}var n,o=0,a=!1,r=!1;return p.addEvent(window,"beforeunload",i),p.addEvent(window,"unload",i),{start:function(){n=setInterval(function(){p.pageActive&&!r&&o++},1e3)},pause:function(){r=!0},resume:function(){r=!1},stop:function(){i()}}},setObjectTimer:function(e,t,i){function n(){r||(r=!0,p.call(i,[e,a])),clearInterval(o),p.removeEvent(window,"beforeunload",n),p.removeEvent(window,"unload",n)}var o,a=0,r=!1,s=!1;return p.addEvent(window,"beforeunload",n),p.addEvent(window,"unload",n),p.bindVisibilityTracker({object:t}),{start:function(){o=setInterval(function(){t.isVisible&&!s&&a++},1e3)},pause:function(){s=!0},resume:function(){s=!1},stop:function(){n()}}},cookie:{set:function(e,t,i){var n=i||1,o=new Date,a=o.getTime()+864e5*parseInt(n,10);a=new Date(a),document.cookie=e+"="+t+(n?";expires="+a.toGMTString():"")+";path=/"},get:function(e){var t=document.cookie.split(";"),i="",n="",o="",a=!1;return p.each(t,function(){return i=this.split("="),n=i[0].replace(/^\s+|\s+$/g,""),n===e?(a=!0,i.length>1&&(o=window.unescape(i[1].replace(/^\s+|\s+$/g,""))),o):(i=null,void(n=""))}),a?o:null}},supportFullScreen:function(e){var t=e||p.d;return t.documentElement.requestFullscreen||t.documentElement.msRequestFullscreen||t.documentElement.mozRequestFullScreen||t.documentElement.webkitRequestFullscreen||!1},toggleFullScreen:function(e,t){var i=t||p.d;if(i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement||i.msFullscreenElement)i.exitFullscreen?i.exitFullscreen():i.msExitFullscreen?i.msExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen&&i.webkitExitFullscreen();else{if(!e)return;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},hasUnit:function(e){return parseInt(e,10).toString()!==e.toString()},getUnit:function(e,t){var i="px";return"number"==typeof e||parseFloat(e,10)===e?t?!1:i:e.replace(/^(\-|[0-9]|\.)+/i,"")},animate:function(e,t){function i(i){l.clear();var n=!1;if(null!==t.zindex&&p.applyStyle(e,{zIndex:t.zindex}),t.css){var o={},a=function(o){n||(n=!0,setTimeout(function(){n=!1},200),p.removeEvent(e,p.getPrefixedEvent("transitionend"),a),l.clear=function(){},setTimeout(function(){p.call(t.onplayed),p.call(t.oncompleted),p.call(i),o||p.call(t.onchange)},0))};p.addEvent(e,p.getPrefixedEvent("transitionend"),a),l.clear=function(){p.removeEvent(e,p.getPrefixedEvent("transitionend"),a)};var r=!0;p.each(c,function(t){var i=c[t];i.hack?(i.getHack(e,i.rule).toString()!==i.end.toString()&&(r=!1),i.hack(e,i.end+i.unit)):(p.getPropertyValue(e,i.rule).toString()!==(i.end+i.unit).toString()&&(r=!1),o[i.rule]=i.end+i.unit)}),r?a(!0):p.applyStyle(e,o)}else{m=m?c[0].length-m:0;var s=setInterval(function(){p.each(c,function(t){var i=c[t],n={};n[i.rule]=i.play_array[m]+i.unit,p.applyStyle(e,n),c[t].hack&&c[t].hack(e,i.play_array[m]+i.unit)}),m++,m===c[0].length&&(clearInterval(s),n||(n=!0,setTimeout(function(){n=!1,m=0},200),p.call(t.onplayed),p.call(t.oncompleted),l.clear=function(){}))},h);l.clear=function(){clearInterval(s)}}}function n(i){l.clear();var n=!1;if(t.css){var o={},a=function(o){n||(n=!0,setTimeout(function(){n=!1},200),p.removeEvent(e,p.getPrefixedEvent("transitionend"),a),l.clear=function(){},setTimeout(function(){p.call(t.onreversed),p.call(t.oncompleted),p.call(i),o||p.call(t.onchange)},0))};p.addEvent(e,p.getPrefixedEvent("transitionend"),a),p.each(c,function(t){var i=c[t];i.hack?i.hack(e,i.start+i.unit):o[i.rule]=i.start+i.unit}),l.clear=function(){p.removeEvent(e,p.getPrefixedEvent("transitionend"),a)},p.applyStyle(e,o)}else{m=m?c[0].length-m:0;var r=setInterval(function(){p.each(c,function(t){var i=c[t],n={};n[i.rule]=i.reverse_array[m]+i.unit,p.applyStyle(e,n),c[t].hack&&c[t].hack(e,i.reverse_array[m]+i.unit)}),m++,m===c[0].length&&(clearInterval(r),n||(n=!0,setTimeout(function(){n=!1,m=0},200),p.call(t.onreversed),p.call(t.oncompleted),l.clear=function(){}))},h);l.clear=function(){clearInterval(r)}}}if(!e||!t)return p.warn("No object or no options provided"),{play:function(){},reverse:function(){}};if(!p.isInDOM(e))return p.warn("Object is not in DOM!"),{play:function(){},reverse:function(){}};p.log("New animation on :"),p.log(e),p.log("Options :"),p.log(t);var o,a,r,s,l={},c=[],d=e.id||"sweetlib-animate-id-"+p.random(),u=p.getDocument(e),m=0,h=t.framerate||10;if(l.play=i,l.reverse=n,l.options=t,l.properties=c,l.clear=function(){},o={forcejs:!1,nojs:!1,duration:500,effect:"ease-in",css:!1,animateanyway:!1,zindex:null,oncompleted:function(){},onplayed:function(){},onreversed:function(){}},r=["forcejs","nojs","duration","effect","css","animateanyway","oncompleted","onplayed","onreversed","anchor","zindex"],s=["width","height","top","right","bottom","left"],a={opacity:{unit:"",hack:{set:function(e,t){"msie"===p.browser.name&&p.browser.version<=8?e.style.filter="alpha(opacity="+100*t+")":e.style.opacity=t},get:function(e){if("msie"===p.browser.name&&p.browser.version<=8)return p.getPropertyValue(e,"filter")&&p.getPropertyValue(e,"filter").match(/opacity=([0-9]+)/i)?parseInt(p.getPropertyValue(e,"filter").match(/opacity=([0-9]+)/i)[1],10)/100:1;var t=p.getPropertyValue(e,"opacity");return void 0===t||""===t?1:t}}},transform:{unit:"",hack:{set:function(e,t){e.style[p.getPrefixedProperty("transform")]=t},get:function(e,t){var i=p.getPropertyValue(e,p.getPrefixedProperty("transform"));if(!i||"none"===i){var n=t.match(/^[a-z]+\((.*?)\)/i)[1];i=t.replace(n,"0")}return i}}},zIndex:{unit:""},zoom:{unit:""}},p.extend(t,o),e.SweetLibAnimate)e.SweetLibAnimate.clear();else if(t.anchor)switch(e.parentNode.style.width=p.gbcr(e).width+"px",e.parentNode.style.height=p.gbcr(e).height+"px",e.style.position="absolute",t.anchor){case"TR":e.style.right="0",e.style.top="0"}if(e.SweetLibAnimate=l,(p.canUseCSS3()&&!t.forcejs||t.nojs)&&(t.css=!0),e.id||(e.id=d),p.each(t,function(i){if(!p.exist(i,r)){var n,o,l,d,u=t[i],m="",h=!1;"string"==typeof u?(u.match(/^(\+|\-)=/i)?(m=u.match(/(^.*?)[0-9]/i)[1],l=u.replace(m,"")):u.match(/^[a-z]+\(.*?\)/i)?(l=u,h=!0):l=u,h||(parseFloat(l,10).toString()!==l&&(d=p.getUnit(l)),l=parseFloat(l,10))):l=u,o=a[i]&&a[i].hack&&a[i].hack.get?a[i].hack.get(e,t[i]):parseFloat(p.getPropertyValue(e,i),10),!isNaN(o)||a[i]&&a[i].hack&&a[i].hack.get||(o="auto"===p.getPropertyValue(e,i)&&p.exist(i,s)?p.gbcr(e)[i]:0),n={rule:i,rawvalue:t[i],start:o,end:m?"+="===m?o+l:"-="===m?o-l:l:l,unit:d?d:a[i]?a[i].unit:"px",hack:a[i]&&a[i].hack&&a[i].hack.set?a[i].hack.set:!1,getHack:a[i]&&a[i].hack&&a[i].hack.get?a[i].hack.get:!1,duration:t.duration,effect:t.effect},c.push(n)}}),t.css){var f=[];p.each(c,function(t){var i=c[t],n=p.getPrefixedProperty(p.dasherize(i.rule));f.push(n+" "+i.duration/1e3+"s "+i.effect),e.style[n]=i.start+i.unit}),f=f.join(",")+" !important;";var v=p.getPropertyValue(e,"transition")||"",g=p.getPropertyValue(e,"-ms-transition")||"";v.match(/all /)&&(v=""),g.match(/all /)&&(g=""),v.match(/[a-z]/)&&(v+=", "),g.match(/[a-z]/)&&(g+=", "),p.createCSS("#"+e.id,"transition : "+v+" "+f,u),p.createCSS("#"+e.id,"-ms-transition : "+g+" "+f,u)}else p.each(c,function(e){c[e].play_array=[],c[e].reverse_array=[];for(var t=parseInt(c[e].duration/h,10),i=(c[e].end-c[e].start)/t,n=c[e].start,o=c[e].end,a=0;t>=a;a++)a===t-1?(c[e].play_array.push(o),c[e].reverse_array.push(n)):(c[e].play_array.push(n+i*a),c[e].reverse_array.push(o-i*a));c[e].length=t});return l},parseCSSInt:function(e){switch(e){case"auto":case"inherit":return 0;case"thin":return 1;case"medium":return 3;case"thick":return 5;default:return e?parseInt(e,10):0}},hasGluedText:function(e,t){t||(t=0);var i,n,o,a,r,s=e.getClientRects();if(!s)return!1;for(r=0;r<s.length;r++)(void 0===i||s[r].left<i)&&(i=s[r].left),(void 0===n||s[r].top<n)&&(n=s[r].top),(void 0===o||s[r].bottom>o)&&(o=s[r].bottom);a=o-n;var l=function(e){var o;try{if(e.innerHTML&&!e.innerHTML.match(/</)&&e.innerHTML.match(/\S/)){var r=e.getClientRects();for(o=0;o<r.length;r++)if(r[o].right-r[o].left>0&&r[o].left>=i&&r[o].left-i<=t){var s;try{s=p.getPropertyValue(e,"padding-left")}catch(c){}if(r[o].left-i+p.parseCSSInt(s)<=t&&"center"!==p.getPropertyValue(e,"text-align"))return r[o].top}}else{var d,u;for(o=0;e.children&&e.children.length&&o<e.children.length;o++){var m=e.children[o],h=p.gbcrfp(m);if(h.left>=i){var f=l(e.children[o]);f&&(!u||u>f)&&(u=f,d=m)}}if(u){var v=u-n;return.9*a>v}}return!1}catch(c){}};return l(e)},getInheritedBackground:function(e){var t=p.getPropertyValue(e,"background"),i=!1;if(!e.ownerDocument.pmDefaultBackground){var n=e.ownerDocument.createElement("div");n.style.background="none",e.ownerDocument.body.appendChild(n),e.ownerDocument.pmDefaultBackground=p.getPropertyValue(n,"background"),e.ownerDocument.body.removeChild(n)}switch(t){case"auto":return"white";case"transparent":case"inherit":case"rgba(0, 0, 0, 0)":case"":i=!0;break;default:t===e.ownerDocument.pmDefaultBackground&&(i=!0)}return i?"HTML"===e.tagName?"white":p.getInheritedBackground(e.parentNode):t},getInheritedBackgroundColor:function(e){var t=p.getPropertyValue(e,"background-color");switch(t){case"auto":return"white";case"transparent":case"inherit":case"rgba(0, 0, 0, 0)":case"":return"HTML"===e.tagName?"white":p.getInheritedBackgroundColor(e.parentNode);default:return t}},hardenWidthOfPageContainer:function(e,t){e.pmNodesWithHardenedWidth=[];for(var i=p.getAllFlowedSiblings(e),n=e.ownerDocument.pmPagecontainerHints,o="pc-only"===n["harden-width-of"],a=0;a<i.length;a++){var r=i[a];if(!o||r===e){var s=p.gbcr(r);if(!a||s.width>t){if(p.isWidthInPercentage(r)){var l=p.getPropertyValue(r,"left"),c=p.getPropertyValue(r,"margin-left"),d=p.getPropertyValue(r,"margin-right");"auto"!==l&&"0px"!==l||"0px"!==c||"0px"!==d||(r.style.margin="0 auto")}if("content-box"===p.getPropertyValue(r,"box-sizing")){var u=parseFloat(p.getPropertyValue(r,"padding-left")||0,10),m=parseFloat(p.getPropertyValue(r,"padding-right")||0,10);u>0&&(t-=u),m>0&&(t-=m)}r.style.width=t+"px",r.style.maxWidth=t+"px",e.pmNodesWithHardenedWidth.push(r)}}}if("mobile"===p.device.name){for(var h,f,v=e.ownerDocument,g=v.getElementsByTagName("meta"),y=0;y<g.length;y++)if(f=g[y],"viewport"===f.name){h=!0;break}if(!h){f=v.createElement("meta"),f.name="viewport",f.content="width="+t;var b=v.getElementsByTagName("head")[0];b&&b.appendChild(f)}}},getPositionFixedHeaders:function(e,t){e=e||p.d,t=t||{};var i=!!t.force;if(i){if(e._pmPositionFixedHeadersForcedAt){var n=Date.now()-e._pmPositionFixedHeadersForcedAt;if(200>n)return e._pmPositionFixedHeadersForcedData}}else if(e._pmPositionFixedHeaders)return e._pmPositionFixedHeaders;var o,a=[],r=p.getViewportSize(),s=0,l=p.getPageScroll(),c=l[0];do{o=!1;for(var d=0;d<p.blockContentTagNames.length;d++)for(var u=e.getElementsByTagName(p.blockContentTagNames[d]),m=0;m<u.length;m++){var h=u[m],f=p.gbcr(h);if(!(f.right<=0||f.bottom<=0)&&"0px"!==p.getPropertyValue(h,"bottom")){var v=p.getPropertyValue(h,"top"),g=p.getPropertyValue(h,"position");if(f.left+=c,f.right+=c,("fixed"===g||(g=p.getPropertyValue(h.parentNode,"position"),"fixed"===g))&&("auto"===v&&0===f.top&&(v=0),(!v||Math.abs(f.top-s)<=4&&Math.abs(parseInt(v,10)-s)<=4)&&f.width>300&&0!==f.height&&f.height<500&&Math.round(f.height)!==r[1])){if(!p.isVisible(h))continue;try{if("auto"===v)continue;if(h.className.match(/pmContainer|oPmTV_sticker|pmMarkerContainer/))continue;if("clickable"===h.id)continue;var y=parseInt(f.bottom,10);y>s&&(s=y,o=!0),a.push(h)}catch(b){}}}}}while(o);return i?(e._pmPositionFixedHeadersForcedAt=Date.now(),e._pmPositionFixedHeadersForcedData=a):e._pmPositionFixedHeaders=a,a},getHeightOfPositionFixedHeaders:function(e,t,i){var n=p.getPositionFixedHeaders(e,i);if(i=i||{},n&&n.length){var o=0,a=0;t&&(a=p.gbcr(t).top),i.fillerHeight&&(a-=i.fillerHeight);for(var r,s,l=0;l<n.length;l++){var c=p.gbcr(n[l]);c.height&&((void 0===r||c.top<r)&&(r=c.top),(void 0===s||c.bottom>s)&&(s=c.bottom)),c.top>=a&&(o+=c.height)}return void 0!==r&&void 0!==s?s-r:o}},preventMarginCollapse:function(e,t){if(!e.pmPreventedMarginCollapse){var i=e.ownerDocument.createElement("div");return e.pmPreventedMarginCollapse=i,i.style.display="block",i.style.padding="0.1px 0 0 0",i.style.margin="-0.1px 0 0 0",i.style.border="none",i.className="pmPreventMarginCollapse",e.insertBefore(i,t||e.firstChild),i}},isWidthInPercentage:function(e){if(!e.parentNode)return!1;var t=p.gbcr(e.parentNode),i=e.parentNode.style.width,n=p.getPropertyValue(e,"width");e.parentNode.style.width=t.width+2+"px";var o=p.getPropertyValue(e,"width");e.parentNode.style.width=i,e.parentNode.style.width=t.width-2+"px";var a=p.getPropertyValue(e,"width");return e.parentNode.style.width=i,n!==o&&n!==a},fixPageContainerForWallpaper:function u(e){if(e){e.id||(e.id="pmPageContainer");var t=e.ownerDocument.pmPagecontainerHints||p.getPageContainerHints()||{},i=t["enable-fix-pc-static"]===!1?!1:!0;if(t.cssFixForPageContainerAndWallpaper&&p.applyStyle(e,t.cssFixForPageContainerAndWallpaper),t.css&&p.createCSSs(t.css),!t.noDefaultFixPageContainerForWallpaper){u.store=u.store||{};var n=u.store[e.id]=u.store[e.id]||{},o=p.getPropertyValue(e,"left");if(("0px"===o||"0"===o||"auto"===o)&&(o=0),e&&!o){var a;if("object"==typeof t.width&&t.width.query)a=n.pageContainerOriginalWidth=p.getPageContainerWidth(e);else if(n.pageContainerOriginalWidth)a=n.pageContainerOriginalWidth;else if(e.pmPCWidth)a=n.pageContainerOriginalWidth=e.pmPCWidth;else{if(a=p.getPageContainerWidth(e),p.hasGluedText(e)){p.log("Text is glued to the PC, can we add some bonus?"),a+=p.pcBonusWidthWhenGluedText;var r=e.style.width;e.style.width=a+"px",p.hasGluedText(e)&&(p.log("We cannot enlarge the PC, maybe we can add some padding, though"),a-=p.pcBonusWidthWhenGluedText,e.style.width=r,e.style.paddingLeft=p.parseCSSInt(p.getPropertyValue(e,"padding-left"))+p.pcBonusWidthWhenGluedText/2+"px",e.style.paddingRight=p.parseCSSInt(p.getPropertyValue(e,"padding-right"))+p.pcBonusWidthWhenGluedText/2+"px")}try{var s=p.gbcrfp(e.parentNode),l=p.parseCSSInt(p.getPropertyValue(e.parentNode,"padding-left")),c=p.parseCSSInt(p.getPropertyValue(e.parentNode,"padding-right")),d=p.parseCSSInt(p.getPropertyValue(e,"border-left-width")),m=p.parseCSSInt(p.getPropertyValue(e,"border-right-width"));a-=d,a-=m;var h=s.width-l-c;if((a===h||a+d+m===h)&&p.isWidthInPercentage(e)&&p.isWidthInPercentage(e.parentNode)){var f=function(e){for(var t=null,i=0;e.children&&e.children.length&&i<e.children.length;i++){var n=e.children[i],o=p.gbcrfp(n),a=o.width,r=parseInt(p.getPropertyValue(n,"max-width"),10)||0;r&&r===Math.round(h)&&(t=Math.max(t,Math.min(h,r))),a>=h&&(a=f(n)),h>a&&a>t&&o.height>50&&(t=a)}return t},v=f(e);if(v){v>a&&(a=v);for(var g=!0,y=e.parentNode;y&&"BODY"!==y.tagName;y=y.parentNode)if(!p.isWidthInPercentage(y)){g=!1;break}g&&(a=v)}}n.pageContainerOriginalWidth=a}catch(b){}}e.style.position="relative",p.createCSS("#"+e.id,"position: relative !important",e.ownerDocument),a&&p.hardenWidthOfPageContainer(e,a);var w=p.getPropertyValue(e,"float"),x=p.getPropertyValue(e,"display");"left"===w||"right"===w||"inline-block"===x?(e.style.left="50%",e.style.marginLeft=-(a/2)+"px"):e.style.marginLeft=e.style.marginRight="auto",n.preventMarginCollapse||(n.preventMarginCollapse=p.preventMarginCollapse(e));for(var k=p.getAllFlowedSiblings(e),S=0;S<k.length;S++){var I=k[S];try{var P=p.getPropertyValue(I,"background-image");if(!P.match(/url/)){var E=p.getInheritedBackgroundColor(I);I.style.backgroundColor=E}}catch(b){}}for(var A=p.getPositionFixedHeaders(e.ownerDocument),C=0;C<A.length;C++){var b=A[C];try{var T=p.getPropertyValue(b,"top");T&&0!==parseInt(T,10)||(b.style.top="0px")}catch(_){}}for(var O=!1,N=e.parentNode.children||[],F=!1,D=0;D<N.length;D++){var L=N[D];if(L!==e){if(F&&"static"===p.getPropertyValue(L,"position")){var M=p.gbcr(L);if(M.width>1&&M.height>1){O=!0;break}}}else F=!0}for(var R=[],j=0;j<k.length;j++){var B=k[j];if("static"===p.getPropertyValue(B,"position")){var V=p.gbcr(B);V.width>1&&V.height>1&&(O=!0,R.push(B))}}if(O){if("android"===p.device.os)for(var W=e.parentNode.children||[],q=0;q<W.length;q++){var U=W[q];"static"===p.getPropertyValue(U,"position")&&(U.className+=" pmFixPCChildStatic")}else"BODY"!==e.parentNode.tagName&&(i&&(e.parentNode.className+=" pmFixPCStatic"),p.createCSS(".pmFixPCStatic > *","transform: translateZ(0.001px)"),p.createCSS(".pmFixPCStatic > .pmBodyPosition","transform: none"));for(var H=0;H<R.length;H++)R[H].className+=" pmFixPCChildStatic";p.createCSS(".pmFixPCChildStatic","position: relative; float: none !important")}}p.fixSite(e)}}},getHeightOfNextSiblings:function(e){for(var t=0;e&&(e=e.nextSibling);)if(1===e.nodeType)switch(p.getPropertyValue(e,"position")){case"absolute":case"fixed":break;default:var i=p.gbcrfp(e);i.height&&(t+=i.height)}return t},getAllFlowedSiblings:function m(e,t){t=t||{};var i,n=function(e){var t=p.gbcrfp(e);if(!t.height)for(var i=0;e.children&&e.children.length&&i<e.children.length;i++){var n=e.children[i],o=p.gbcrfp(n);if(o.height)return o}return t},o=[e],a=n(e),r=a.bottom,s=a.width,c=p.isWidthInPercentage(e)||a.width===p.getViewportSize()[0],d=p.getViewportSize()[0],u=!1,h=e.pmPCHintedAbove;m.revision=m.revision||0;for(var f=m.revision++;;){var v=0;do{i=!1;e:for(var g=e.parentNode.firstChild;g;g=g.nextSibling)if(1===g.nodeType)switch(p.getPropertyValue(g,"position")){case"absolute":case"fixed":break;default:var y=n(g);if(c&&y.height&&y.width<s)break e;if(c&&y.height&&s===d&&y.width>s)break e;if(e.pmPCHintedAbove)y.top>=a.top+1&&o.push(g);else if(Math.abs(y.top-r)<.5&&y.height){if(u&&y.width-l>s)break e;if(g.pmGetAllFlowedSiblingsRevision!==f){g.pmGetAllFlowedSiblingsRevision=f,o.push(g),r=y.bottom,i=!0;break e}}}}while(i&&!h&&v++<300);if(i||h)break;if(t.lookupParent===!1)break;if(e=e.parentNode,u=!0,!e||"HTML"===e.tagName)break}return o},getAllFlowedSiblingsHeight:function(e){for(var t=p.getAllFlowedSiblings(e),i=0,n=0;n<t.length;n++)i+=p.gbcr(t[n]).height||0;return i},setBodyBackgroundColor:function(e){if(e=e||{},void 0!==e.color){for(var t=e.hints||p.getPageContainerHints()||{},i=(t.bodyBackgroundSelector||"body").split(","),n=[],o=p.d,a=0;a<i.length;a++)n.push("html.pmBodyBackground "+i[a]);null!==e.color?(p.createCSS(n.join(","),"background-color: "+e.color+" !important",o),o.body.parentNode.className.match("pmBodyBackground")||(o.body.parentNode.className+=" pmBodyBackground")):o.body.parentNode.className=o.body.parentNode.className.replace(/ pmBodyBackground/g,"")}},moveTopOfPageContainer:function h(e,t,i){if(e){e.id||(e.id="pmPageContainer"),i=i||{},h.store=h.store||{};var n=h.store[e.id]=h.store[e.id]||{};if(n.movedTopOfPageContainer=!0,n.oldPageContainerMetrics=n.oldPageContainerMetrics||{},!n.filler){var o=e.ownerDocument.getElementById("pmFiller");if(o)n.filler=o;else{var a=function(e){for(var t,i,n=p.gbcr(e).top,o=e.children||[],r=0;r<o.length;r++){var s=o[r];if("absolute"!==p.getPropertyValue(s,"position")){var l=parseFloat(p.getPropertyValue(s,"margin-top"),10),c=p.gbcr(s).top;Math.abs(c-l-n)<.5>0&&(!t||l>t)&&(t=l,i=s)}if(s.children&&s.children.length){var d=a(s),u=d.marginTop;u>0&&(!t||u>t)&&(t=u,i=d.element)}}return{marginTop:t,element:i}},r=a(e)||{},s=r.marginTop,l=r.element;n.filler=e.ownerDocument.createElement("span"),n.filler.id="pmFiller",n.filler.style.margin=0,n.filler.style.padding=0,n.filler.style.border="none",n.filler.style.display="block";var c=p.getOverflowYScroll(e),d=!c,u=p.getHeightOfPositionFixedHeaders(e.ownerDocument,e);s&&u>=s&&(d&&(n.filler.style.marginTop=s+"px"),l&&l.style&&(l.style.marginTop="0")),e.parentNode.insertBefore(n.filler,e);var m=p.gbcrfp(n.filler),f=m.top;if(u&&u>f){var v=parseInt(n.filler.style.marginTop,10)||0;if(d){n.filler.style.marginTop=v+(u-f)+"px";var g=p.gbcrfp(n.filler);g.top<u&&(n.filler.style.marginTop=v+"px")}}}}return i.duration?(void 0===n.filler.style.height&&(n.filler.style.height=0),p.animate(n.filler,{height:t+"px",duration:i.duration}).play()):n.filler.style.height=t+"px",n.filler.style.width=0,n.filler}},getVisiblePreviousSiblingUpwards:function(e){if(e||(e=this.getPageContainer())){var t=p.gbcrfp(e);if(t&&t.top){var i=function(e){for(var n=e.previousSibling;n;n=n.previousSibling)try{var o=p.gbcrfp(n),a=n.id.toString().match("ad")||n.id.toString().match("728x90")||n.className.match("728x90"),r=a&&o.height<20;if(o&&o.height&&!r&&o.width&&o.bottom>=0&&o.bottom<=t.top&&o.width>100)return n}catch(s){}return e=e.parentNode,"BODY"===e.tagName?void 0:i(e)};return i(e)}}},fixSite:function(e){if(p.log("Applying global fixes"),e){var t=e.ownerDocument;p.createCSS("body","margin: 0; width: 100% !important;",t);var i=p.gbcrfp(e),n=e.id;if(i.height){var o=p.parseCSSInt(p.getPropertyValue(e,"margin-top")),a=p.getVisiblePreviousSiblingUpwards(e),r=0;if(a){var s=p.gbcrfp(a);s&&(r=Math.max(0,i.top-s.bottom))}else r=i.top;r&&(n=e.id,n||(n="pmPageContainer",e.id=n),p.createCSS("body #"+n,"top: "+p.parseCSSInt(p.getPropertyValue(e,"top"))-r+"px",t),"static"===p.getPropertyValue(e,"position")&&p.createCSS("body #"+n,"position: relative",t),i.top-=r);var l,c=i.top,d=0,u=p.parseCSSInt(p.getPropertyValue(e,"margin-top")),m=p.parseCSSInt(p.getPropertyValue(e,"padding-top"));u>0&&(n||(n=e.id="pmPageContainer"),u-r>=0?p.hasGluedText(e)?(p.log("Merging page container margin-top: "+u+"px + paddingTop: "+m+"px"),p.createCSS("body #"+n,"margin-top: 0;	padding-top: "+(u+m)+"px !important",t)):(p.log("Dropping margin-top above page container: "+u+"px + paddingTop: "+m+"px"),p.createCSS("body #"+n,"margin-top: 0 !important",t)):r>0&&(p.log("Dropping margin-top above page container and below content: "+u+"px + paddingTop: "+m+"px"),p.createCSS("body #"+n,"margin-top: 0 !important",t)));for(var h=p.getPositionFixedHeaders(t),f=0;f<h.length;f++){var v=h[f];i=p.gbcrfp(v),i.height&&(d+=i.height)}if(c-o>=d){var g=p.getInheritedBackground(e),y=p.getInheritedBackground(e.parentNode);if(50>r&&g!==y)for(var b=p.gbcrfp(e).top,w=e.parentNode;"HTML"!==w.tagName&&p.gbcrfp(w).top===b;w=w.parentNode)if(parseInt(p.getPropertyValue(w,"margin-top"),10)===r){w.id||(w.id="pmPageContainerParentMarginZero"),p.createCSS("body #"+w.id,"margin-top: 0 !important",w.ownerDocument);break}}if(l=c-o,d>l){var x=d-l;l+=x}p.log("positionFixedHeaderHeight="+d),p.log("pageContainerTop="+c),p.log("pageContainerMarginTop="+o),p.log("setGoToTheTop="+l),l&&p.createCSS("body .pmGoToTheTop","top: "+l+"px !important;",t);var k=function(e){var t=p.gbcrfp(e);if(t.width&&t.height&&t.bottom<=c){p.log("Fixing background for header: ",e);var i=p.getInheritedBackgroundColor(e);e.style.backgroundColor=i}},S=function(e){for(var t=e.previousSibling;t;t=t.previousSibling)k(t);e.parentNode&&"HTML"!==e.parentNode.tagName&&S(e.parentNode)};S(e)}}},isInDOM:function(e){for(var t=e,i=0;100>i;i++,t=t.parentNode){if(!t.parentNode)return!1;if("HTML"===t.parentNode.tagName)return!0}},isVisible:function(e){var t=e.ownerDocument,i=function(e,i){return window.getComputedStyle?t.defaultView.getComputedStyle(e,null)[i]:e.currentStyle?e.currentStyle[i]:void 0},n=function(e){for(;e=e.parentNode;)if(e===t)return!0;return!1},o=function(e,t,a,r,s,l,c){var d=e.parentNode,p=2;return n(e)?9===d.nodeType?!0:"0"===i(e,"opacity")||"none"===i(e,"display")||"hidden"===i(e,"visibility")?!1:(("undefined"==typeof t||"undefined"==typeof a||"undefined"==typeof r||"undefined"==typeof s||"undefined"==typeof l||"undefined"==typeof c)&&(t=e.offsetTop,s=e.offsetLeft,r=t+e.offsetHeight,a=s+e.offsetWidth,l=e.offsetWidth,c=e.offsetHeight),d?"hidden"!==i(d,"overflow")&&"scroll"!==i(d,"overflow")||!(s+p>d.offsetWidth+d.scrollLeft||s+l-p<d.scrollLeft||t+p>d.offsetHeight+d.scrollTop||t+c-p<d.scrollTop)?(e.offsetParent===d&&(s+=d.offsetLeft,t+=d.offsetTop),o(d,t,a,r,s,l,c)):!1:!0):!1};return o(e)},breakOverflow:function(e,t){p.breakOverflowCalledOnce||(p.breakOverflowCalledOnce=!0,p.createCSS("body .pixi-break-overflow","overflow : visible !important;"));for(var i=p.getDocument(e).body,n=e.parentNode;n!==i;){var o="hidden"===p.getPropertyValue(n,"overflow"),a=!1;(n.className||"").match(/pmMarkerContainer/)||o&&(t.width&&p.gbcr(n).width<t.width&&(a=!0),t.height&&p.gbcr(n).height<t.height&&(a=!0),a?p.addClass(n,"pixi-break-overflow"):p.removeClass(n,"pixi-break-overflow")),n=n.parentNode}},coolDown:function(e,t){"function"==typeof e&&(t=e,e={});var i,n,o=e.interval||20,a=e.interval||21,r=e.duration||2e3,s=new Date,l=!1,c=0,d=function(){return l?void 0:(clearTimeout(i),clearInterval(n),l=!0,t())};i=setTimeout(d,r),n=setInterval(function(){var e=new Date;return c++,e.getTime()-s.getTime()<=a?d():void(s=e)},o)},querySelector:function(e,t){if(t=t||p.d,t.querySelector)return t.querySelector(e);var i=p.querySelectorAll(e);return i&&i.length?i[0]:null},querySelectorAll:function(e,t){if(t=t||p.d,t.querySelectorAll)return t.querySelectorAll(e);var i,n=t.createElement("style"),o=[];for(t.documentElement.firstChild.appendChild(n),t._qsa=[],n.styleSheet.cssText=e+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),n.parentNode.removeChild(n);t._qsa.length;)i=t._qsa.shift(),i.style.removeAttribute("x-qsa"),o.push(i);return t._qsa=null,o},getPageContainerHints:function f(){var e;if(f.cache)return f.cache;try{var t=p.getWindow(p.d);if(t.pmPageContainerHints)e=t.pmPageContainerHints;else{var i=p.w.localStorage.getItem("pmCustomFields");if(i){var n=JSON.parse(i);n.pageContainerHints&&(e=n.pageContainerHints)}}}catch(o){}if(!e&&p.w.piximedia&&p.w.piximedia._&&p.w.piximedia._.pams)for(var a in p.w.piximedia._.pams)if(p.w.piximedia._.pams.hasOwnProperty(a)){var r=p.w.piximedia._.pams[a];
if(r&&r.globalOptions&&r.globalOptions.pageContainerHints){e=r.globalOptions.pageContainerHints;break}}if(e){for(var s in e)e.hasOwnProperty(s)&&null===e[s]&&delete e[s];return f.cache=e,e}},getPageContainerWidth:function(e,t){t=t||{};var i=t.hints||p.getPageContainerHints()||{};if(void 0!==e.pmPCWidth&&("object"!=typeof i.width||!i.width.query))return e.pmPCWidth;var n;if("object"==typeof i.width){var o=p.querySelector(i.width.query);o?n=p.gbcr(o).width:void 0!==i.width.defaults&&(n=parseFloat(i.width.defaults,10))}void 0===n&&(n=void 0!==i.width?parseFloat(i.width,10):void 0);var a=p.getAllFlowedSiblings(e);if(void 0===n){n=p.gbcr(e).width;for(var r=0,s=0;s<a.length;s++){var c=a[s],d=p.gbcr(c).width,u=parseFloat(p.getPropertyValue(c,"padding-left"),10),m=parseFloat(p.getPropertyValue(c,"padding-right"),10);d=d-(isNaN(u)?0:u)-(isNaN(m)?0:m),r=n+l>d?Math.max(r,Math.min(n+l,d)):(980===d||990===d||1e3===d||1200===d)&&n+5*l>d?Math.max(r,Math.min(n+5*l,d)):Math.max(r,n)}r>n&&(n=r)}return e.pmPCWidth=n,n},loadPageContainer:function v(e,t){"function"!=typeof e||t||(t=e,e={}),e=e||{};var i=e.hints||p.getPageContainerHints()||{},n=e.document||p.d;n.pmPagecontainerHints||(n.pmPagecontainerHints=i);var o=function(e){for(var o=p.getPageContainerWidth(e),a=p.getAllFlowedSiblings(e),r=0,s=0;s<a.length;s++){var l=p.gbcr(a[s]);l.height&&(r+=l.height)}for(var c=0,d=0;d<a.length;d++){var u=a[d];if(!p.isWidthInPercentage(u)){var m=p.gbcr(u);c+=m.height,!i.width&&m.width>o&&m.height&&.3*r>c&&(o=m.width)}}n.pmPageContainerSL=e;try{var h=p.getWindow(n);if(h.localStorage&&h.localStorage.getItem&&h.localStorage.setItem&&n.querySelectorAll){e.pmRandom=Math.random().toString();var f,g=h.localStorage.getItem("pmpccache"),y=h.localStorage.getItem("pmpccache_stats"),b=y?JSON.parse(y):{creation_date:Date.now(),counters:{}};if(g){var w=!1,x=JSON.parse(g)||{};if(x){if(Date.now()-x.date<864e5){var k=n.querySelector(x.query);w=k&&k.pmRandom===e.pmRandom}f=w?"match":"did-not-match"}else f="too-old"}else f="not-in-cache";f&&(h.piximedia&&h.piximedia.pam&&f!==v.lastStatus&&(v.lastStatus=f,h.piximedia.pam.loadEvent("JS:PC_CACHE",void 0,void 0,{detail:f})),b.counters[f]=(b.counters[f]||0)+1);var S=e.tagName;e.id&&!e.id.match(/^pm/)&&(S+="#"+e.id),e.className&&(S+="."+e.className.split(/\s+/).join("."));var I=n.querySelectorAll(S);if(1===I.length){var P=I[0];P.pmRandom===e.pmRandom&&h.localStorage.setItem("pmpccache",JSON.stringify({date:Date.now(),version:1,query:S}))}h.localStorage.setItem("pmpccache_stats",JSON.stringify(b))}}catch(E){}return t(e,{width:o})},a=function(e){e=e||{};var a=p.getPageContainer(n,{lastChance:e.lastChance});switch(i.heuristics){case"above":for(var r,s,l=0;n.body.children&&n.body.children.length&&l<n.body.children.length;l++){var c=n.body.children[l],d=p.gbcrfp(c);p.innerHTML(c).length>100&&d.height>1&&d.top>=0&&(void 0===r||d.top<r)&&(r=d.top,s=c)}return n.pmPageContainerSL=s,s.pmPCWidth=p.getPageContainerWidth(a),s.pmPCHintedAbove=!0,t(s,{width:s.pmPCWidth});case"below":return o(a);default:return o(a)}};p.contentload(function(){if(i.query){var e=!1;p.domload(function(){setTimeout(function(){e=!0},2e3)},n);var t=function(){var r=p.querySelector(i.query,n);return r?o(r):e?a({lastChance:!0}):setTimeout(t,50)};t()}else p.domload(function(){return a()},n)})},innerHTML:function(e){try{return e.innerHTML}catch(t){try{return e.innerText}catch(i){return""}}},getOverflowYScroll:function(e){for(var t=0;e&&"HTML"!==e.tagName&&50>t;e=e.parentNode,t++)if("scroll"===p.getPropertyValue(e,"overflow-y"))return e;return void 0},getPageContainer:function(e,t){t=t||{},e=e||p.d;var i=e.pmPagecontainerHints||p.getPageContainerHints()||{};if(i.query){var n=p.querySelector(i.query,e);if(!t.lastChance||n)return n}if(e.pmPageContainerSL&&p.isInDOM(e.pmPageContainerSL))return e.pmPageContainerSL;for(var o,a,r=p.innerHTML,s=r(e.body).length,l=0,c=e.getElementsByTagName("script"),d=0;d<c.length;d++)try{l+=r(c[d]).length}catch(u){}s=r(e.body).length;var m,h=0,f=p.getViewportSize()[0],v=p.gbcr(e.body),g=function(e){var t,i=e.clientWidth,n=e.clientHeight,o=p.gbcrfp(e);return o&&(t=o.top),t>=0&&2>t&&n>0&&i>0&&100>n&&((e.id||"").toString().match(/cookie/i)||(e.className||"").match(/cookie/i)||(r(e)||"").match(/cookie/i))?("absolute"!==e.style.position&&"fixed"!==e.style.position&&(h=((o||{}).top||0)+n),!0):void 0},y=function(e,t){var i=e.clientWidth;t=t||p.getAllFlowedSiblings(e);for(var n=0,o=0;o<t.length;o++)n+=p.gbcr(t[o]).height;if(i===f){var a=m(e);if(a){var r=p.gbcr(a);if(r.width&&r.width<i)return a===e?e:y(a)}}var s=p.gbcrfp(t[0]);if(p.isWidthInPercentage(e))for(var l=0;l<t.length;l++){var c=p.gbcrfp(t[l]);if(c.top-s.top<500&&c.height>10){var d=m(t[l]);return d?d===e?e:y(d):t[l]===e?e:y(t[l])}}return e};m=function(e){for(var t=0;e.children&&e.children.length&&t<e.children.length;t++){var i=e.children[t];if(!g(i)){for(var n=0;n<p.blockContentTagNames.length;n++)if(i.tagName===p.blockContentTagNames[n]){var c,d=i.clientWidth,u=p.gbcrfp(i);if(u&&(c=u.top),0!==i.id.toString().search("pm")&&d>=Math.min(.5*v.width,890)&&u.height>0&&"fixed"!==i.style.position&&p.isVisible(i)&&i.children&&i.children.length>0){for(var f=p.getAllFlowedSiblings(i,{lookupParent:!1}),b=0,w=0;w<f.length;w++)b+=p.gbcr(f[w]).height;if(b>400){for(var x=0,k=0;k<f.length;k++)x+=r(f[k]).length;if(x>.05*(s-l)){if(!(h>=c)||p.getOverflowYScroll(i))return y(i,f);var S=m(i);if(S)return S;o=S||i}else o||(o=i),c>0&&!a&&(a=i)}}break}if(i.children&&i.children.length){var I=m(i);if(I)return I}}}};var b=m(e.body);return!b&&a&&(b=a),!b&&o&&(b=o),e.pmPageContainerSL=b,b},addOverlay:function(e){var t={root:p.d.body,fade:!1,timeout:0,onclick:null,before:!0,css:{width:"100%",height:"100%",background:"#000",opacity:.6,position:"fixed",top:"0",left:"0",display:"none",zIndex:2147483392}};e||(e={}),p.extend(e,t),e.onclick&&(e.css.cursor="pointer");var i,n=p.getDocument(e.root).createElement("div");return p.applyStyle(n,e.css),e.before?e.root.insertBefore(n,e.root.firstChild):e.root.appendChild(n),e.onclick&&p.addEvent(n,"click",e.onclick),{show:function(){e.fade&&p.applyStyle(n,{display:"block",opacity:0}),i=setTimeout(function(){e.fade?p.animate(n,{opacity:e.css.opacity}).play():p.applyStyle(n,{display:"block"})},e.timeout)},hide:function(){clearTimeout(i),e.fade?p.animate(n,{opacity:0,oncompleted:function(){p.applyStyle(n,{display:"none"})}}).play():p.applyStyle(n,{display:"none"})}}},makeUnderlay:function(e,t){e=e||{};var i=e.opacityDuration||250,n=top.document,o=n.createElement("div");o.id="pmUnderlay",o.className="pmUnderlay",o.style.position="fixed",t&&(o.style.cursor="pointer"),o.style.background="#222",o.style.border="3px solid #555",o.style.left=0,o.style.top=0,o.style.width="100%",o.style.height="100%",o.style.zIndex=s,o.style.opacity=0,p.addEvent(o,"click",t),n.body.appendChild(o);var a=p.animate(o,{duration:i,opacity:1});return a.play(),{remove:function(e){e=e||{},void 0!==e.duration&&(a.duration=e.duration),a.reverse(function(){o.parentNode.removeChild(o)})}}},getScrollbarWidth:function g(e){if(!e&&void 0!==g.cache)return g.cache;var t=(e||p.d.body).ownerDocument.createElement("div");t.style.width="100px",t.style.height="100px",t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.margin="0",t.style.padding="0",(e||p.d.body).appendChild(t);var i=t.offsetWidth-t.clientWidth;return(e||p.d.body).removeChild(t),e||(g.cache=i),i},makeClose:function(e,t){e=e||{};var i=e.opacityDuration||250,n=top.document,o=n.createElement("div");o.style.position=e.position||"fixed",o.style.background="#555",o.style.border="3px solid #555",o.style.padding=e.padding,o.style.left=0,o.style.fontSize="18pt",o.style.color="white",o.style.top=e.top||0,o.style.cursor="pointer",o.style.textDecoration=e.textDecoration,o.innerHTML=e.text||"X",o.style.zIndex=p.LAYER_CLOSE,o.style.boxShadow="grey 2px 0px 10px",o.style.opacity=0,p.addEvent(o,"click",t),o.style.transition="all "+i/1e3+"s",n.body.appendChild(o);var a=p.animate(o,{duration:i,opacity:1});return a.play(),{element:o,remove:function(e){e=e||{},void 0!==e.duration&&(a.duration=e.duration),a.reverse(function(){o.parentNode.removeChild(o)})}}},enableResponsiveEventsForPageContainer:function(e,t){var i=p.getPageContainerHints()||{},n=p.gbcr(e).width;if("object"==typeof i.width&&i.width.query){var o=function(){var n=p.querySelector(i.width.query);return n?void setInterval(function(){for(var i=p.gbcr(e).width,o=e.pmNodesWithHardenedWidth||[],a=[],r=0;r<o.length;r++){var s=o[r];a[r]={width:s.style.width,maxWidth:s.style.maxWidth},s.style.width="",s.style.maxWidth=""}for(var l=p.gbcr(n).width,c=0;c<o.length;c++){var d=o[c];d.style.width=a[c].width,d.style.maxWidth=a[c].maxWidth}if(l!==i){p.hardenWidthOfPageContainer(e,l);var u={pageContainerWidth:l};t(u)}},500):setTimeout(o,100)};o()}p.onResize(e,function(){e.ownerDocument.body.className.match(/pmBodyAnimation/)||p.loadPageContainer({document:e.ownerDocument},function(e,i){var o=i.width;if(!(Math.abs(n-o)<.5)){n=o;var a={pageContainerWidth:o};t(a)}})})},eachSeries:function(e,t,i){e=e||[],i=i||function(){};var n=0,o=function(){n>=e.length?i():t(e[n],function(){n++,setTimeout(function(){o()},0)})};o()}};e.piximedia.PAM&&e.piximedia.PAM.on("ad.inject",function(e,t,i){i.pam.loadCSSInDocument("piximedia.style.20161402.css",e,function(){})}),p.VERSION=i,p.LAYER_CLOSE=o,p.LAYER_HIGHEST=a,p.LAYER_ALPHA=r,p.LAYER_UNDERLAY=s,e.piximedia["SweetLib"+i]=p,(!e.piximedia.SweetLib||e.piximedia.SweetLib.VERSION<i)&&(e.piximedia.SweetLib=p,p.start()),e.piximedia.libraryLoader&&e.piximedia.libraryLoader["sweetlib.js"]&&(e.piximedia.libraryLoader["sweetlib.js"].complete=!0)}(),function(){var e=window,t="sweetlib.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var n=0;n<i.onloads.length;n++)i.onloads[n]()}(),window.piximedia.libraryLoader=window.piximedia.libraryLoader||{},window.piximedia.libraryLoader["sweetlib.js"]=window.piximedia.libraryLoader["sweetlib.js"]||{},window.piximedia.libraryLoader["sweetlib.js"].loaded=!0,!function(e){"use strict";function t(t,i){function n(){M=oe("div"),M.id="pm-video-wrapper-"+J,M.className="pm-video-wrapper",V.applyStyle(M,{position:"relative",width:i.width+i.unit,height:i.height+i.unit,display:"block",background:i.options.transparent?"transparent":i.options.background,overflow:"hidden",textAlign:"left"}),t.appendChild(M)}function o(){M.parentNode===t&&t.removeChild(M),V.call(i.options.onerror)}function a(){function e(e){a?t(e):r.push(e)}function t(e){var t=V.getWindow(V.getDocument(M));t.sendMessage(e)}var n,o=D.split("?").shift().split("/").pop().split("_").shift(),a=!1,r=[];W("Load Dailymotion Video : %s",o),n=oe("iframe"),n.id="pm-video-"+J,n.paused=!0,n.src="//www.dailymotion.com/embed/video/"+o+"?chromeless=1&html=1&wmode=transparent&api=postMessage&muted="+(i.options.muted?1:0)+"&start="+i.options.startTime+"&id="+J+"&autoplay="+(i.options.autoplay?"1":"0"),V.applyStyle(n,{width:"100%",height:"100%",border:0,position:"absolute"}),R={volume:i.options.muted?0:1,currentTime:0,paused:!1,play:function(t){"undefined"!=typeof t&&R.seek(t),e("play")},seek:function(t){0===t&&(t=.1),e("seek="+t)},pause:function(){e("pause")},mute:function(){e("mute")},unmute:function(){e("unmute")},eventList:{},addEventListener:function(e,t){R.eventList[e]||(R.eventList[e]=[]),R.eventList[e].push(t)},removeEventListener:function(e,t){R.eventList[e]&&-1!==R.eventList[e].indexOf(t)&&R.eventList[e].splice(R.eventList[e].indexOf(t),1)},triggerEnd:function(){d()},dailymotion:!0};var s=function(e){if(e.data.match(/event=(.*?)&/)&&e.data.match(/&id=/)&&parseFloat(e.data.match(/&id=(.*?)$/)[1],10)===J){var n=e.data.match(/event=(.*?)&/)[1];if("apiready"===n){if(a=!0,r.length>0)for(var o=0;o<r.length;o++)t(r[o]);var s=i.options.muted?0:1,l=0;setInterval(function(){R.volume!==s&&(s=R.volume,0===R.volume?R.mute():1===R.volume&&R.unmute()),Math.abs(R.currentTime-R.duration)<1&&l===R.currentTime&&R.triggerEnd(),l=R.currentTime},200),x()}else"timeupdate"===n?R.currentTime=parseFloat(e.data.match(/time=(.*?)(&|$)/)[1],10):"playing"===n?R.paused=!1:"durationchange"===n?R.duration=parseFloat(e.data.match(/duration=(.*?)(&|$)/)[1],10):"pause"===n?R.paused=!0:"ended"===n?d():"ad_end"===n&&R.play();if(("seeked"===n||"playing"===n)&&(n="canplay"),R.eventList[n]&&R.eventList[n].length>0)for(var c=0;c<R.eventList[n].length;c++)R.eventList[n][c]()}};V.addEvent(V.getWindow(M.ownerDocument),"message",s),M.appendChild(n)}function r(){W("Load HTML5 Video : %s",D),R=oe("video"),R.id="pm-video-"+J,R.src=D,R.autoplay=!1,R.volume=i.options.muted?0:i.options.maxVol,V.applyStyle(R,{width:"100%",height:"100%",position:"absolute",background:"transparent"}),"desktop"!==V.device.name&&i.poster?R.poster=V.returnAbsolute(i.poster,i.baseUrl):R.poster="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",R.addEventListener("loadstart",function(){W("Loadstart Event")}),R.addEventListener("abort",function(){q("Video aborted"),o()}),R.addEventListener("error",function(e){switch(q("Video error"),e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:q("You aborted the video playback.");break;case e.target.error.MEDIA_ERR_NETWORK:q("A network error caused the video download to fail part-way.");break;case e.target.error.MEDIA_ERR_DECODE:q("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:q("The video could not be loaded, either because the server or network failed or because the format is not supported.");break;default:q("An unknown error occurred.")}o()}),R.addEventListener("onloadeddata",function(){W("Data loaded, duration : %s",R.duration)}),R.addEventListener("loadedmetadata",function(){W("Metadata loaded, duration : %s",R.duration),p(),x(),"canvas"===L&&i.options.autoplay&&l(),"filledletterbox"===i.options.resizeMode&&(j=document.createElement("canvas"),j.style.position="absolute",j.width=V.gbcr(M).width,j.height=V.gbcr(M).height,M.insertBefore(j,R),l()),S()}),R.addEventListener("durationchange",function(){W("Duration changed"),x()}),R.addEventListener("ended",function(){d()}),M.appendChild(R)}function s(){W("Prepare canvas for video"),j=document.createElement("canvas"),j.style.position="relative",M.appendChild(j),j.width=V.gbcr(M).width,j.height=V.gbcr(M).height,R.playsinline=!0,R.webKitPlaysInline=!0,R.pausedonstart=!0,R.allowsInlineMediaPlayback=!0,R.preload="auto",R.autoplay="autoplay",R.load()}function l(){W("Start canvas video playing"),j.setAttribute("data-time",0),j.setAttribute("data-paused",!1),setInterval(function(){if(j.width=j.getAttribute("data-width"),j.height=j.getAttribute("data-height"),j.getContext("2d").drawImage(R,0,0,j.getAttribute("data-width"),j.getAttribute("data-height")),"canvas"===L){if("false"===j.getAttribute("data-paused")){var e=parseFloat(j.getAttribute("data-time"),10)+1e3/i.options.framerate/1e3;e>R.duration?(C(),d(),e=0):R.currentTime=e,j.setAttribute("data-time",e)}}else j.getContext("2d").fillStyle="rgba(0, 0, 0, 0.5)",j.getContext("2d").fillRect(0,0,j.getAttribute("data-width"),j.getAttribute("data-height"))},1e3/i.options.framerate)}function c(){var e=oe("div"),t=!1;M.insertBefore(e,Z),V.applyStyle(e,{position:"absolute",width:i.options.layer.width+"px",height:i.options.layer.height+"px",top:i.options.layer.top+"px",left:i.options.layer.left+"px",opacity:i.options.layer.animate?0:1,display:"none"}),V.handleAsset(i.options.layer,e,"video-layer",i.baseUrl),setInterval(function(){O()>=i.options.layer.time&&O()<i.options.layer.time+i.options.layer.duration&&!t&&(t=!0,e.style.display="block",i.options.layer.animate&&V.animate(e,{opacity:1}).play(),setTimeout(function(){t=!1,i.options.layer.animate?V.animate(e,{opacity:0,onplayer:function(){e.style.display="none"}}).play():e.style.display="none"},1e3*i.options.layer.duration))},50)}function d(){function e(){i.options.loop?(V.each(me,function(){this.sentThisLoop=!1}),A(0),R.hasBeenPaused=!1,ke++):(i.options.smartEnd&&(R._smartEndCalled||(R._smartEndCalled=!0,F(he))),C(),k()),V.call(i.options.onend)}if(R.hasBeenPaused=!0,i.packshot&&i.packshot.file){var t=oe("div");M.insertBefore(t,Z),V.applyStyle(t,{position:"absolute",width:"100%",height:"100%",top:"0",left:"0"}),i.packshot.width="100%",i.packshot.height="100%",V.handleAsset(i.packshot,t,"video-packshot",i.baseUrl),te&&(te.style.display="none"),X&&(X.style.display="none"),i.packshot.duration&&setTimeout(function(){e(),t.parentNode.removeChild(t),te&&(te.style.display="block"),X&&(X.style.display="block")},1e3*i.packshot.duration)}else e()}function p(){var e,t=R.videoWidth/R.videoHeight;V.onResize(R.parentNode,function(){var n,o,a,r,s=V.gbcr(R.parentNode),l=s.width/s.height;if("canvas"===L)"fullsize"===i.options.resizeMode?t>l?(o=s.height,n=o*t,r=(s.width-n)/2,a=0):(n=s.width,o=n/t,r=0,a=(s.height-o)/2):(r=0,a=0,t>l?(n=s.width,o=n/t,a=(s.height-o)/2):(o=s.height,n=o*t,r=(s.width-n)/2)),n=parseInt(10*n,10)/10,o=parseInt(10*o,10)/10,a=parseInt(10*a,10)/10,r=parseInt(10*r,10)/10,j.setAttribute("data-width",n),j.setAttribute("data-height",o),j.style.top=a+"px",j.style.left=r+"px";else{var c=t>l?"fullsize"===i.options.resizeMode?"vertical":"horizontal":"fullsize"!==i.options.resizeMode?"vertical":"horizontal",d="auto",p="100%";"safari"===V.browser.name&&("vertical"===c?(d=s.height*t+"px",p=s.height+"px"):(d=s.width/t+"px",p=s.width+"px")),V.applyStyle(R,{height:"horizontal"===c?d:p,width:"horizontal"===c?p:d,left:"auto",right:"auto",top:"auto",bottom:"auto",transform:"none",webkitTransform:"none"}),"horizontal"===c?("B"===i.options.align[1]?R.style.bottom=0:"M"===i.options.align[1]?(R.style.top="50%",R.style.transform="translate(0, -50%)",R.style.webkitTransform="translate(0, -50%)"):R.style.top=0,R.style.right=0):("R"===i.options.align[0]?R.style.right=0:"M"===i.options.align[0]?(R.style.right="50%",R.style.transform="translate(50%, 0)",R.style.webkitTransform="translate(50%, 0)"):R.style.left=0,R.style.top=0),"filledletterbox"===i.options.resizeMode&&j&&(j.setAttribute("data-width","horizontal"===c?s.width:s.height*t),j.setAttribute("data-height","horizontal"===c?s.width/t:s.height),j.style.left=("horizontal"===c?0:(s.width-s.height*t)/2)+"px",j.style.top=("horizontal"===c?(s.height-s.width/t)/2:0)+"px")}ie&&!i.options.fullsize&&V.applyStyle(ie,{width:R.style.width,height:R.style.height,left:R.style.left,right:R.style.right,top:R.style.top,bottom:R.style.bottom}),e=i.options.resizeMode})}function u(){W("Load Flash Video : %s",D);var e,t,n=(new Date).getTime();t=V.embedSWF({file:pe,wrapper:M,width:"100%",height:"100%",id:i.id+"-"+n,flashvars:{src:D,resizeMode:i.options.resizeMode,callback:"pmFlashNotification"+n,maxVol:i.options.maxVol},params:{wmode:i.options.transparent?"transparent":"opaque"},attributes:{wmode:i.options.transparent?"transparent":"opaque"}}),e=function(e,i){try{if(t.control)return t.control(e,i)}catch(n){q("Flash communication error : %s",n)}},z["pmFlashNotification"+n]=function(t,n){"ready"===t?(W("Flash framework ready - js side"),R.duration=n,R.ready=!0,i.options.muted||R.unmute(),S(),e("resize"),x()):"video-end"===t?d():"log"===t&&W(n)},R={unmute:function(){e("unmute")},mute:function(t){t?e("mute",t):e("mute")},play:function(t){R.paused=!1,e("play",t)},pause:function(){return R.paused=!0,e("pause")},getTime:function(){return e("getTime")},seek:function(t){e("seek",t)},object:t,duration:30,paused:!0,id:i.id,ready:!1}}function m(){function e(){R.paused?(V.applyStyle(t,{display:"block"}),V.applyStyle(i,{display:"none"})):(V.applyStyle(i,{display:"block"}),V.applyStyle(t,{display:"none"}))}$=oe("div"),$.className="pm-video-controls-play-button",V.applyStyle($,{width:"20px",height:"20px",position:"absolute",bottom:"5px",left:"9px",cursor:"pointer"});var t,i;if(fe){t=oe("canvas"),i=oe("canvas");var n=t.getContext("2d"),o=i.getContext("2d");t.width=t.height=i.width=i.height=20,n.fillStyle="#FFFFFF",n.moveTo(4,4),n.lineTo(4,16),n.lineTo(16,10),n.lineTo(4,4),n.fill(),o.fillStyle="#FFFFFF",o.fillRect(5,5,3,10),o.fillRect(10,5,3,10)}else t=oe("div"),i=oe("div"),V.applyStyle(t,{background:"url("+de+ue+") 0 0 no-repeat transparent",width:"20px",height:"20px"}),V.applyStyle(i,{background:"url("+de+ue+") -20px 0 no-repeat transparent",width:"20px",height:"20px"});V.applyStyle(t,{position:"absolute",top:"0px",left:"0px"}),V.applyStyle(i,{position:"absolute",top:"0px",left:"0px"}),e(),setInterval(function(){e()},100),V.addEvent($,"click",function(e){V.preventDefault(e),R.isEnded?(A(0,!0),R.isEnded=!1,re=!1,E("PLAY")):(re=!R.paused,R.paused?(A(void 0,!0),E("PLAY"),R.hasBeenPaused=!1):(C(!0),E("PAUSE"),R.hasBeenPaused=!0))}),$.appendChild(t),$.appendChild(i),te.appendChild($)}function h(){K=oe("div"),K.className="pmvideo-controls-scrubbar",Y=oe("div");var e=oe("div"),t=ne?110:140;V.applyStyle(K,{width:t+"px",height:"20px",position:"absolute",left:"40px",top:"5px",cursor:"pointer"}),V.applyStyle(e,{width:"100%",height:"2px",position:"relative",left:"0px",top:"9px",background:"#FFF"}),V.applyStyle(Y,{width:"0px",height:"2px",position:"absolute",left:"0px",top:"0px",background:le}),e.appendChild(Y),K.appendChild(e),te.appendChild(K),setInterval(function(){R.isEnded||V.applyStyle(Y,{width:O()/R.duration*100+"%"})},500),V.addEvent(K,"click",function(e){V.preventDefault(e);var i=e||z.event,n=V.getMousePosition(i,K,"left")/t,o=parseInt(R.duration*n,10);W("Scrubbar action, seek to %s% -> %s",parseInt(1e3*n,10)/10,o),F(o)})}function f(){Q=oe("div"),Q.className="pmvideo-controls-timer",V.applyStyle(Q,{width:"50px",height:"16px",paddingTop:"4px",position:"absolute",left:ne?"153px":"183px",top:"5px",textAlign:"center",fontSize:"10px",fontFamily:"Arial, Helvetica, sans-serif",color:"#FFFFFF",letterSpacing:"normal",fontStyle:"bold"}),setInterval(function(){R.isEnded||(Q.innerHTML=V.sprintf(["%s",V.cleanTime(parseInt(O(),10))]))},100),te.appendChild(Q)}function v(){ee=oe("div"),V.applyStyle(ee,{width:"20px",height:"20px",position:"absolute",left:"205px",top:"5px",cursor:"pointer"});var e,t;fe?(e=oe("canvas"),t=e.getContext("2d"),e.width=20,e.height=20,t.fillStyle="#FFFFFF",t.fillRect(3,5,14,1),t.fillRect(16,5,1,10),t.fillRect(3,14,14,1),t.fillRect(3,5,1,10),t.fillRect(6,8,10,6)):(e=oe("div"),V.applyStyle(e,{width:"20px",height:"20px",background:"url("+de+ue+") 0 -20px  no-repeat transparent"})),V.addEvent(ee,"click",function(e){V.preventDefault(e),P(M,!0),_(),A()}),ee.appendChild(e),te.appendChild(ee)}function g(e){X=oe("div"),X.className="pm-video-controls-sound-button",V.applyStyle(X,{width:"20px",height:"20px",position:"absolute",bottom:"5px",right:"5px",cursor:"pointer"});var t,n;fe?(t=oe("canvas"),n=t.getContext("2d"),t.width=20,t.height=20):(t=oe("div"),V.applyStyle(t,{width:"20px",height:"20px",background:"url("+de+ue+") -40px -20px  no-repeat transparent"})),X.appendChild(t),fe&&b("#FFFFFF"),(e?e:M).appendChild(X),i.options.muted||(y(!0),se=!1),V.addEvent(X,"click",function(e){V.preventDefault(e),se?(_(),ae=!1,E("UNMUTE")):(T(),ae=!0,E("MUTE"))})}function y(e){fe?b(e?le:"#FFF"):V.applyStyle(X.getElementsByTagName("div")[0],{background:"url("+de+ue+") "+(e?"-20px":"-40px")+" -20px  no-repeat transparent"}),V.removeClass(X,"pm-sound-state-"+(e?"muted":"unmuted")),V.addClass(X,"pm-sound-state-"+(e?"unmuted":"muted"))}function b(e){var t=1,i=X.querySelector("canvas").getContext("2d");for(i.fillStyle=e;6>t;){var n=10*t/5;i.fillRect(3*t,15-n,2,n),t++}}function w(){te=oe("div"),te.className="pm-video-controls",V.applyStyle(te,{width:i.options.soundbutton?"260px":"235px",height:"30px",position:"absolute",margin:"-50px 0 0 "+(i.options.soundbutton?"-130px":"-117px"),left:"50%",top:"100%"});var e=oe("div");if(e.className="pm-video-controls-background",V.applyStyle(e,{width:"100%",height:"100%",display:"block",position:"absolute",top:"0px",left:"0px"}),fe?V.applyStyle(e,{background:"#000",opacity:"0.7",borderRadius:"5px"}):V.applyStyle(e,{background:"url("+de+ue+") 0px "+(i.options.soundbutton?"-40px":"-70px")+" no-repeat transparent"}),te.appendChild(e),m(),h(),f(),ne&&v(),i.options.soundbutton&&g(te),M.appendChild(te),i.options.hidecontrols){var t;V.addEvent(M,"mousemove",function(){te.style.display="block",clearTimeout(t),t=setTimeout(function(){te.style.display="none"},5e3)})}}function x(){i.trackinginterval||(i.trackinginterval=setInterval(function(){var t=parseInt(O()/R.duration*100,10),n=parseInt(i.currentTimeWv/R.duration*100,10);V.each(me,function(){if((t>=this.threshold||ke>0&&99===this.threshold)&&!this.wv){var o=!1;if(!this.sent)if(this.sent=!0,i.options.uniqueTracking&&i.options.asset_id&&this.name.match(/LECTURE/)){o=parseInt(1e4*(e.piximedia.visibleVideos[i.options.adId].getAverage()||0),10);var a=e.piximedia.vastTrackings&&i.options.asset_id&&e.piximedia.vastTrackings[i.options.asset_id]?e.piximedia.vastTrackings[i.options.asset_id][this.name]:{};i.options.framedAd.loadEventOnce(this.name,{c3:"asset_id="+i.options.asset_id,duration:o},a)}else E(this.name,i.id);if(we&&this.name.match(/LECTURE[0-9]+/)&&!this.sentThisLoop){this.sentThisLoop=!0,o===!1&&(o=parseInt(1e4*(e.piximedia.visibleVideos[i.options.adId].getAverage()||0),10));var r=function(e,t){return"LECTURE25"===e?t?"VIDEO_ERP:25PCT":"VIDEO_GRP:25PCT":"LECTURE50"===e?t?"VIDEO_ERP:50PCT":"VIDEO_GRP:50PCT":"LECTURE75"===e?t?"VIDEO_ERP:75PCT":"VIDEO_GRP:75PCT":"LECTURE100"===e?t?"VIDEO_ERP:100PCT":"VIDEO_GRP:100PCT":null};if(0===o)return;this.previousGRPDuration||(this.previousGRPDuration=0),this.previousERPDuration||(this.previousERPDuration=0);var s=o,l=o;1e4!==this.previousGRPDuration&&(this.previousGRPDuration+o>1e4&&(s=1e4-this.previousGRPDuration),i.options.framedAd.loadEvent(r(this.name),{duration:s}),this.previousGRPDuration+=s),1e4!==this.previousERPDuration&&o>5e3&&(this.previousERPDuration+o>1e4&&(l=1e4-this.previousERPDuration),i.options.framedAd.loadEvent(r(this.name,!0),{duration:l}),this.previousERPDuration+=l)}}n>=this.threshold&&!this.sent&&this.wv&&0===i.options.threshold&&(this.sent=!0,E(this.name,i.id))})},50))}function k(){R.isEnded=!0,te&&(Y&&V.applyStyle(Y,{width:"0"}),Q&&(Q.innerHTML="--:--"))}function S(){he=i.options.packshotTime?i.options.packshotTime:Math.ceil(parseInt(.99*R.duration*10,10)/10),W("End pause time -> %s",he)}function I(){return H.documentElement.requestFullscreen||H.documentElement.msRequestFullscreen||H.documentElement.mozRequestFullScreen||H.documentElement.webkitRequestFullscreen||!1}function P(e,t){if(H.fullscreenElement||H.mozFullScreenElement||H.webkitFullscreenElement||H.msFullscreenElement)t&&E("FULLSCREENOFF"),H.exitFullscreen?H.exitFullscreen():H.msExitFullscreen?H.msExitFullscreen():H.mozCancelFullScreen?H.mozCancelFullScreen():H.webkitExitFullscreen&&H.webkitExitFullscreen();else{if(!e)return;t&&E("FULLSCREENON"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.webkitEnterFullscreen&&e.webkitEnterFullscreen()}}function E(e){i.options.track&&"function"==typeof i.options.track?V.call(i.options.track,[e,i.id]):V.w["pmData"+i.options.pmord]?V.track(V.w["pmData"+i.options.pmord],e,i.id):V.log("Event ready %s for %s",e,i.id)}function A(e){"html5"===L?(R.play(),"undefined"==typeof e||isNaN(parseInt(e,10))||(R.dailymotion?R.play(e):R.currentTime=e)):"flash"===L?(clearInterval(R.playInterval),R.ready?R.play(e):R.playInterval=setInterval(function(){R.ready&&(clearInterval(R.playInterval),R.play(e))},20)):"canvas"===L&&("undefined"==typeof e||isNaN(parseInt(e,10))||F(e),j.getAttribute("data-fullscreened",!1)||j.setAttribute("data-paused",!1))}function C(){return"html5"===L?(R.pause(),R.currentTime):"flash"===L?(clearInterval(R.playInterval),R.pause()):void("canvas"===L&&j.setAttribute("data-paused",!0))}function T(e){if("html5"===L){if(e)return R.volume=0,void(se=!0);clearInterval(G),G=setInterval(function(){R.volume=parseInt(10*(R.volume-.1<0?0:R.volume-.1),10)/10,R.volume<=0&&(R.volume=0,se=!0,clearInterval(G))},25)}else if("flash"===L)R.mute(e),se=!0;else if("canvas"===L)return;X&&y(!1)}function _(){if("html5"===L)clearInterval(G),G=setInterval(function(){var e=R.volume+.1;e=e>1?1:e,R.volume=e,R.volume>=i.options.maxVol&&(R.volume=i.options.maxVol,se=!1,clearInterval(G))},50);else if("flash"===L)R.unmute(),se=!1;else if("canvas"===L)return;X&&y(!0)}function O(){return"html5"===L?R.currentTime:"flash"===L?R.getTime():"canvas"===L?j.getAttribute("data-time"):void 0}function N(){return"canvas"===L?"false"===j.getAttribute("data-paused"):!R.paused}function F(e){"html5"===L?R.currentTime=e:"flash"===L?R.seek(e):"canvas"===L&&j.setAttribute("data-time",e)}if(!e.piximedia.SweetLib||!t)return!1;var D,L,M,R,j,B={files:"",baseUrl:"",width:300,height:250,unit:"px",id:"VIDEO",options:{forceCss:!1,icon_file:!1,autoplay:!0,controls:!0,soundbutton:!0,rollover:!0,muted:!0,maxVol:1,nofullscreen:!1,loop:!0,packshotTime:!1,smartEnd:!0,resizeMode:"letterbox",hidecontrols:!1,threshold:0,syncMaxDelta:1.5,onend:function(){},onclick:function(){},onerror:function(){},track:!1,pmord:!1,framerate:15,align:"MM",background:"#000",overlay:!1,startTime:0}},V=e.piximedia.SweetLib,W=V.log,q=V.warn,U=V.print,H=V.getDocument(t),z=V.getWindow(H),J=(new Date).getTime(),G=null,X=!1,$=!1,K=!1,Y=!1,Q=!1,Z=!1,ee=!1,te=!1,ie=!1,ne=I()&&!i.options.nofullscreen,oe=function(e){return H.createElement(e)},ae=!1,re=!1,se=!0,le="#04B2F6",ce="//broadcast.pm/",de=ce+"assets/video/",pe=de+"videoFramework.swf",ue="video_icon.v2.png",me=[{threshold:1,name:"LECTUREDEBUT"},{threshold:24,name:"LECTURE25"},{threshold:49,name:"LECTURE50"},{threshold:74,name:"LECTURE75"},{threshold:99,name:"LECTURE100"},{threshold:1,wv:!0,name:"LECTUREDEBUT_WV"},{threshold:24,wv:!0,name:"LECTURE25_WV"},{threshold:49,wv:!0,name:"LECTURE50_WV"},{threshold:74,wv:!0,name:"LECTURE75_WV"},{threshold:99,wv:!0,name:"LECTURE100_WV"}],he=0,fe=!1,ve="dailymotion"===V.getExtention("object"==typeof i.files?i.files[0]:i.files),ge=V.canPlayHTML5Video(i.files),ye=V.canPlayFlashVideo(i.files),be=!1,we=!1,xe=!1,ke=0;if(this.play=function(e){R.hasBeenPaused=!1,A(e)},this.pause=function(){R.hasBeenPaused=!0,C(!0)},this.seek=F,this.mute=T,this.unmute=_,this.getTime=O,this.isPlaying=N,this.data=i,this.forceError=o,this.toggleFullScreen=function(){P("desktop"===V.device.name?M:R,!0),"canvas"===L?(j.setAttribute("data-paused",!0),j.setAttribute("data-fullscreened",!0),R.play(),R.addEventListener("webkitendfullscreen",function(){j.setAttribute("data-fullscreened",!1),j.setAttribute("data-paused",!1),j.setAttribute("data-time",R.currentTime)})):A(),_()},W("New video, file : %s, wrapper : ",i.files),W(t),V.extend(i,{options:e.piximedia.videoOptions||{}}),V.extend(i,B),i.options.align.toString().match(/^[LMR][TMB]$/)||(i.options.align="MM"),i.id=i.id.toString().replace(/\s/g,"").replace(/[^a-zA-Z0-9_]/g,""),W("Options : "),W(i),i.options.forceCss&&(fe=!1),i.options.icon_file&&(ue=i.options.icon_file),"ios"===V.device.os&&(i.options.soundbutton=!1),i.packshot&&0===i.packshot.duration&&(i.options.loop=!1),i.options.controls.type&&("sound"===i.options.controls.type?(i.options.controls=!1,i.options.soundbutton=!0):i.options.controls=!0),ge||ye){n(),ve?(D=i.files,L="html5",a()):ge?(D=V.returnAbsolute(ge,i.baseUrl),L="html5",r()):(D=V.returnAbsolute(ye,i.baseUrl),L="flash",u());var Se=V.getFileName(D);if(e.piximedia.videoFiles||(e.piximedia.videoFiles={}),e.piximedia.videoFiles[Se]&&e.piximedia.videoFiles[Se].id!==i.id?(xe=!0,e.piximedia.videoFiles[Se].slaves||(e.piximedia.videoFiles[Se].slaves=[]),e.piximedia.videoFiles[Se].slaves.push(this),e.piximedia.videoFiles[Se].number_of_slaves++):(e.piximedia.videoFiles[Se]={time:0,playing:!1,insync:!1,number_of_slaves_waiting:0,number_of_slaves:0,video:R,masterPlaying:N,id:i.id},be=!0),"undefined"!=typeof i.options.adId){e.piximedia.visibleVideos||(e.piximedia.visibleVideos={}),
e.piximedia.visibleVideos[i.options.adId]||(we=!0,e.piximedia.visibleVideos[i.options.adId]={objects:[]},V.watchVisibility(e.piximedia.visibleVideos[i.options.adId]));var Ie=V.d!==H?V.getOwnerFif(t):t;if(e.piximedia.visibleVideos[i.options.adId].objects.push({dom:Ie,position:i.options.position}),V.setObjectTimer){var Pe=V.setObjectTimer("LECTURE",Ie,function(e,t){i.options.position.loadEvent("TIMETRACKER::"+e,{duration:t})});Pe.start()}}if(be)setInterval(function(){e.piximedia.videoFiles[Se].time=O(),e.piximedia.videoFiles[Se].playing=N()},100);else{var Ee=function(){var t=Math.abs(e.piximedia.videoFiles[Se].time-O());if(N()&&e.piximedia.videoFiles[Se].masterPlaying()&&t>i.options.syncMaxDelta){if(!e.piximedia.videoFiles[Se].insync){e.piximedia.videoFiles[Se].insync=!0,U("Slave out of sync, delta",t),U("Slaves global sync :",function(){for(var t=[],i=0;i<e.piximedia.videoFiles[Se].slaves.length;i++){var n=e.piximedia.videoFiles[Se].slaves[i];n!==R&&t.push(Math.abs(e.piximedia.videoFiles[Se].time-n.getTime()))}return t.join(", ")}());for(var n=function(){if(e.piximedia.videoFiles[Se].number_of_slaves_waiting--,U("Slave back in sync",e.piximedia.videoFiles[Se].number_of_slaves_waiting,"left"),e.piximedia.videoFiles[Se].number_of_slaves_waiting<=0){e.piximedia.videoFiles[Se].number_of_slaves_waiting=0,e.piximedia.videoFiles[Se].video.play();for(var t=0;t<e.piximedia.videoFiles[Se].slaves.length;t++){var i=e.piximedia.videoFiles[Se].slaves[t];i.wasPlaying&&(i.wasPlaying=!1,i.play(),i.object.removeEventListener("canplay",n))}}},o=0;o<e.piximedia.videoFiles[Se].slaves.length;o++){var a=e.piximedia.videoFiles[Se].slaves[o];a.isPlaying()||a.wasPlaying?(a.wasPlaying=!0,Math.abs(e.piximedia.videoFiles[Se].time-a.getTime())>i.options.syncMaxDelta?(e.piximedia.videoFiles[Se].number_of_slaves_waiting++,a.seek(e.piximedia.videoFiles[Se].time),a.object.addEventListener("canplay",n)):a.pause()):a.wasPlaying=!1}U("Total out of sync slaves",e.piximedia.videoFiles[Se].number_of_slaves_waiting),e.piximedia.videoFiles[Se].number_of_slaves_waiting>0&&e.piximedia.videoFiles[Se].video.pause()}}else e.piximedia.videoFiles[Se].insync=!1};setInterval(Ee,500),Ee()}if(i.options.blur)if(V.canUseCSS3()){var Ae="number"==typeof i.options.blur?i.options.blur:3;V.applyStyle(R,{"-webkit-filter":"blur("+Ae+"px)","-moz-filter":"blur("+Ae+"px)","-o-filter":"blur("+Ae+"px)","-ms-filter":"blur("+Ae+"px)",filter:"blur("+Ae+"px)"})}else{var Ce=oe("div");Ce.className="pm-video-blur-wrapper",V.applyStyle(Ce,{position:"absolute",width:i.width+i.unit,height:i.height+i.unit,display:"block",left:"0",top:"0",background:"url("+de+"blur.png) 0 0 / 100% 100% no-repeat transparent"}),M.appendChild(Ce)}if(i.options.overlay&&(ie=oe("div"),V.applyStyle(ie,{position:"absolute",background:i.options.overlay.color,opacity:i.options.overlay.opacity}),i.options.fullsize&&V.applyStyle(ie,{width:"100%",height:"100%",top:"0",left:"0"}),M.appendChild(ie)),this.object=R,this.wrapper=M,Z=oe("div"),Z.className="pm-video-clicktag",V.applyStyle(Z,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",cursor:"pointer",display:"block",background:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) 0 0 no-repeat transparent"}),V.addEvent(Z,"click",function(){W("Click on video"),T(!0),V.call(i.options.onclick)}),"desktop"!==V.getDevice().name&&(i.options.controls=!1,i.options.soundbutton=!1,i.options.autoplay))if("ios"===V.device.os&&V.device.version>=8)W("We're on mobile, resorting to canvas"),L="canvas",R.style.display="none",M.appendChild(R),s();else{var Te=function(){R.play(),V.removeEvent(V.w,"touchstart",Te)};V.addEvent(V.w,"touchstart",Te)}V.mouseenter(Z,function(){i.options.rollover&&!ae&&N()&&i.options.muted&&_()}),V.mouseleave(Z,function(){i.options.rollover&&!ae&&N()&&i.options.muted&&T()}),M.appendChild(Z),i.options.layer&&i.options.layer.file&&c(),i.options.controls?w():i.options.soundbutton&&g(),M.className+=" pm-video-"+L;var _e,Oe;i.currentTimeWv=0,0===i.options.threshold&&(_e=setInterval(function(){Oe&&N()&&i.currentTimeWv++},1e3)),V.bindVisibilityTracker({object:this.wrapper,threshold:0===i.options.threshold?60:i.options.threshold},function(e){Oe=e,i.options.threshold>0?e?i.options.autoplay&&!re&&A():C():i.options.autoplay&&!R.hasBeenPaused&&e&&A()}),i.options.autoplay&&A()}else q("Sorry, can't play any of this"),this.play=function(){},this.pause=function(){},this.stop=function(){},this.mute=function(){},this.unmute=function(){},this.getTime=function(){},this.isPlaying=function(){},this.forceError=function(){},this.data={error:"Can't play this video"},V.call(i.options.onerror)}if(e.piximedia){try{parent.piximedia||(parent.piximedia=e.piximedia)}catch(i){}window.piximedia.SweetLib&&window.piximedia.SweetLib.log("Piximedia 2014 - Video framework loaded")}else try{e.piximedia=parent.piximedia||{}}catch(i){e.piximedia={}}e.piximedia.Video=t,e.piximedia.libraryLoader&&e.piximedia.libraryLoader["video.js"]&&(e.piximedia.libraryLoader["video.js"].complete=!0)}(window),function(){var e=window,t="video.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var n=0;n<i.onloads.length;n++)i.onloads[n]()}(),window.piximedia.libraryLoader=window.piximedia.libraryLoader||{},window.piximedia.libraryLoader["video.js"]=window.piximedia.libraryLoader["video.js"]||{},window.piximedia.libraryLoader["video.js"].loaded=!0,function(){"use strict";function e(e){t.console&&t.console.log&&(t.console.log.apply?t.console.log.apply(t.console,arguments):t.console.log(e))}var t=window;t.piximedia.easyXDM=t.easyXDM.noConflict("piximedia"),t.piximedia.Lib={};var i="callbackLib";if(t._piximedia&&t._piximedia[i]){var n=t._piximedia[i];t._piximedia[i]=void 0;for(var o=0;o<n.length;o++){var a=n[o];if(a.window)try{a.window.piximedia=a.window.piximedia||t.piximedia}catch(r){}if(a.windows)for(var s=0;s<a.windows.length;s++){var l=a.windows[s];try{l.piximedia=l.piximedia||t.piximedia}catch(r){}}try{a()}catch(r){e("Error in callback: "+r)}}}}();