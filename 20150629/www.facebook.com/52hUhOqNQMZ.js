/*!CK:4109741690!*//*1435184861,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["T58gq"]); }

__d("AdsConnectionObjTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PAGE:1,APPLICATION:2,EVENT:3,GROUP:4,REVIEW:5,PLACE:6,DOMAIN:7,STATUS:8,PLAN:9,VIDEO:10,SHARE:11,PHOTO:12,MOBILE_STORE_OBJECT:13,COUPON:14};},null);
__d("CustomAudienceDataSourceSubType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ANYTHING:"ANYTHING",NOTHING:"NOTHING",HASHES:"HASHES",USER_IDS:"USER_IDS",HASHES_OR_USER_IDS:"HASHES_OR_USER_IDS",MOBILE_ADVERTISER_IDS:"MOBILE_ADVERTISER_IDS",EXTERNAL_IDS:"EXTERNAL_IDS",MULTI_HASHES:"MULTI_HASHES",WEB_PIXEL_HITS:"WEB_PIXEL_HITS",MOBILE_APP_EVENTS:"MOBILE_APP_EVENTS",MOBILE_APP_COMBINATION_EVENTS:"MOBILE_APP_COMBINATION_EVENTS",VIDEO_EVENTS:"VIDEO_EVENTS",WEB_PIXEL_COMBINATION_EVENTS:"WEB_PIXEL_COMBINATION_EVENTS",CUSTOM_AUDIENCE_USERS:"CUSTOM_AUDIENCE_USERS",PAGE_FANS:"PAGE_FANS",CONVERSION_PIXEL_HITS:"CONVERSION_PIXEL_HITS",APP_USERS:"APP_USERS",S_EXPR:"S_EXPR",DYNAMIC_RULE:"DYNAMIC_RULE",CAMPAIGN_CONVERSIONS:"CAMPAIGN_CONVERSIONS",WEB_PIXEL_HITS_CUSTOM_AUDIENCE_USERS:"WEB_PIXEL_HITS_CUSTOM_AUDIENCE_USERS",MOBILE_APP_CUSTOM_AUDIENCE_USERS:"MOBILE_APP_CUSTOM_AUDIENCE_USERS",COMBINATION_CUSTOM_AUDIENCE_USERS:"COMBINATION_CUSTOM_AUDIENCE_USERS",REV_SHARE_CUSTOM_AUDIENCE_USERS:"REV_SHARE_CUSTOM_AUDIENCE_USERS",INTEREST_ENGAGERS:"INTEREST_ENGAGERS",VIDEO_EVENT_USERS:"VIDEO_EVENT_USERS",MAIL_CHIMP_EMAIL_HASHES:"MAIL_CHIMP_EMAIL_HASHES",CONSTANT_CONTACTS_EMAIL_HASHES:"CONSTANT_CONTACTS_EMAIL_HASHES",COPY_PASTE_EMAIL_HASHES:"COPY_PASTE_EMAIL_HASHES",USER_PROPERTIES:"USER_PROPERTIES",CONTACT_IMPORTER:"CONTACT_IMPORTER"};},null);
__d("CustomAudienceDataSourceType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UNKNOWN:"UNKNOWN",FILE_IMPORTED:"FILE_IMPORTED",EVENT_BASED:"EVENT_BASED",SEED_BASED:"SEED_BASED",THIRD_PARTY_IMPORTED:"THIRD_PARTY_IMPORTED",COPY_PASTE:"COPY_PASTE",CLAIM_BASED:"CLAIM_BASED",CONTACT_IMPORTER:"CONTACT_IMPORTER"};},null);
__d("CustomAudienceSharingCapabilities",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={USE_FOR_ADS:"USE_FOR_ADS",USE_FOR_INSIGHTS:"USE_FOR_INSIGHTS"};},null);
__d("SavedTargetSpecSyncStatus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};},null);
__d("AdsReachEstimateActionTypes",["AdsDispatchActionTypeUtils"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={LOAD_SUCCESS:null,LOAD_ERROR:null},i=g.createActionTypeMap('REACH_ESTIMATE_',h);e.exports=i;},null);
__d("AdsReachEstimateServerActions",["AdsReachEstimateActionTypes","AdsDispatcher"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={updateReachEstimate:function(j,k){h.handleUpdateFromServerResponse({data:j,params:k,type:g.LOAD_SUCCESS});},failReachEstimate:function(j,k){h.handleUpdateFromServerResponse({error:j,params:k,type:g.LOAD_ERROR});}};e.exports=i;},null);
__d("AdsSentenceLinesActionTypes",["AdsDispatchActionTypeUtils"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={TARGETING_LOAD_ERROR:null,TARGETING_LOAD_SUCCESS:null},i=g.createActionTypeMap('SENTENCE_LINES_',h);e.exports=i;},null);
__d("AdsSentenceLinesServerActions",["AdsSentenceLinesActionTypes","AdsDispatcher"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={updateTargeting:function(j,k){h.handleUpdateFromServerResponse({params:j,sentenceLines:k,type:g.TARGETING_LOAD_SUCCESS});},failTargeting:function(j,k){h.handleUpdateFromServerResponse({error:k,params:j,type:g.TARGETING_LOAD_ERROR});}};e.exports=i;},null);
__d("AdsAMConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={THIRD_PARTY:'third_party',DATA_FILE:'file'};e.exports={CREATION_STRATEGY:g,FILE_UPLOAD_CONCURRENCY:4};},null);
__d("AudienceManagerRequestBatch",["AdsFBBatch_DEPRECATED","adsGKCheck"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={execute:function(j,k,l){var m=new g(),n=[],o=false;j.forEach(function(p){var q=h('audience_manager_api_versioning')?'/v2.2'+p.getEndpoint():p.getEndpoint();m.add(p.getMethod(),q,p.getParameters(),function(r,s){if(r.error)o=true;n.push(r);s();});});m.run(function(p){if(!o){k(n);}else if(l)l(n);});}};e.exports=i;},null);
__d("AudienceManagerAPIRequest",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){"use strict";this.$AudienceManagerAPIRequest0=h;this.$AudienceManagerAPIRequest1=i;}g.prototype.getMethod=function(){"use strict";return this.$AudienceManagerAPIRequest0;};g.prototype.getParameters=function(){"use strict";return this.$AudienceManagerAPIRequest1;};g.prototype.isParamsValid=function(){"use strict";return true;};g.prototype.getEndpoint=function(){"use strict";return null;};e.exports=g;},null);
__d("AudienceManagerUpdateRequest",["AudienceManagerAPIRequest"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k){"use strict";g.call(this,'POST',k);this.$AudienceManagerUpdateRequest0=k.id;}j.prototype.getEndpoint=function(){"use strict";return '/'+this.$AudienceManagerUpdateRequest0;};j.prototype.isParamsValid=function(){"use strict";return this.$AudienceManagerUpdateRequest0;};e.exports=j;},null);
/**
 * @providesModule sha256
 * @preserve-header
 *
 * Copyright (c) 2003, Christoph Bichlmeier
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the copyright holder nor the names of contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ''AS IS'' AND ANY EXPRESS
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHORS OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
 * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */__d("sha256",["str2rstr"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(fa,ga){return ((ga>>>fa)|(ga<<(32-fa)));}function i(fa,ga,ha){return ((fa&ga)^(~fa&ha));}function j(fa,ga,ha){return ((fa&ga)^(fa&ha)^(ga&ha));}function k(fa){return (h(2,fa)^h(13,fa)^h(22,fa));}function l(fa){return (h(6,fa)^h(11,fa)^h(25,fa));}function m(fa){return (h(7,fa)^h(18,fa)^(fa>>>3));}function n(fa){return (h(17,fa)^h(19,fa)^(fa>>>10));}function o(fa,ga){return (fa[ga&15]+=n(fa[(ga+14)&15])+fa[(ga+9)&15]+m(fa[(ga+1)&15]));}var p=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),q=new Array(8),r=new Array(2),s=new Array(64),t=new Array(16),u="0123456789abcdef";function v(fa,ga){var ha=(fa&65535)+(ga&65535),ia=(fa>>16)+(ga>>16)+(ha>>16);return (ia<<16)|(ha&65535);}function w(){r[0]=r[1]=0;q[0]=1779033703;q[1]=3144134277;q[2]=1013904242;q[3]=2773480762;q[4]=1359893119;q[5]=2600822924;q[6]=528734635;q[7]=1541459225;}function x(){var fa,ga,ha,ia,ja,ka,la,ma,na,oa;fa=q[0];ga=q[1];ha=q[2];ia=q[3];ja=q[4];ka=q[5];la=q[6];ma=q[7];for(var pa=0;pa<16;pa++)t[pa]=((s[(pa<<2)+3])|(s[(pa<<2)+2]<<8)|(s[(pa<<2)+1]<<16)|(s[pa<<2]<<24));for(var qa=0;qa<64;qa++){na=ma+l(ja)+i(ja,ka,la)+p[qa];if(qa<16){na+=t[qa];}else na+=o(t,qa);oa=k(fa)+j(fa,ga,ha);ma=la;la=ka;ka=ja;ja=v(ia,na);ia=ha;ha=ga;ga=fa;fa=v(na,oa);}q[0]+=fa;q[1]+=ga;q[2]+=ha;q[3]+=ia;q[4]+=ja;q[5]+=ka;q[6]+=la;q[7]+=ma;}function y(fa,ga){var ha,ia,ja=0;ia=((r[0]>>3)&63);var ka=(ga&63);if((r[0]+=(ga<<3))<(ga<<3))r[1]++;r[1]+=(ga>>29);for(ha=0;ha+63<ga;ha+=64){for(var la=ia;la<64;la++)s[la]=fa.charCodeAt(ja++);x();ia=0;}for(var la=0;la<ka;la++)s[la]=fa.charCodeAt(ja++);}function z(){var fa=((r[0]>>3)&63);s[fa++]=128;if(fa<=56){for(var ga=fa;ga<56;ga++)s[ga]=0;}else{for(var ga=fa;ga<64;ga++)s[ga]=0;x();for(var ga=0;ga<56;ga++)s[ga]=0;}s[56]=(r[1]>>>24)&255;s[57]=(r[1]>>>16)&255;s[58]=(r[1]>>>8)&255;s[59]=r[1]&255;s[60]=(r[0]>>>24)&255;s[61]=(r[0]>>>16)&255;s[62]=(r[0]>>>8)&255;s[63]=r[0]&255;x();}function aa(){var fa=0,ga=new Array(32);for(var ha=0;ha<8;ha++){ga[fa++]=((q[ha]>>>24)&255);ga[fa++]=((q[ha]>>>16)&255);ga[fa++]=((q[ha]>>>8)&255);ga[fa++]=(q[ha]&255);}return ga;}function ba(){var fa=new String();for(var ga=0;ga<8;ga++)for(var ha=28;ha>=0;ha-=4)fa+=u.charAt((q[ga]>>>ha)&15);return fa;}function ca(fa){var ga=0;for(var ha=0;ha<8;ha++)for(var ia=28;ia>=0;ia-=4)fa[ga++]=u.charCodeAt((q[ha]>>>ia)&15);}function da(fa,ga){w();y(fa,fa.length);z();if(ga){ca(ga);}else return ba();}function ea(fa,ga,ha){if(fa===null||fa===(void 0))return null;ga=(typeof ga=='undefined')?true:ga;if(ga)fa=g(fa);return da(fa,ha);}e.exports=ea;},null);
__d("ads-crypto-email-hash",["sha256"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='sha256',i={getHashType:function(){return h;},hashEmail:function(j,k){return g(j,true,k);}};e.exports=i;},null);
__d("isInternationalPhoneNumber",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/^1\(?\d{3}\)?\d{7}$/,h=/^47\d{8}$/,i=/^\d{1,4}\(?\d{2,3}\)?\d{4,}$/;function j(k){k=k.replace(/[\-\s]+/g,'').replace(/^\+?0{0,2}/,'');if(k.startsWith('0'))return false;if(k.startsWith('1'))return g.test(k);if(k.startsWith('47'))return h.test(k);return i.test(k);}e.exports=j;},null);
__d("AudienceTokenProcessor",["ads-crypto-email-hash","isEmail","isInternationalPhoneNumber","ads-cluster-constants","CustomAudienceHashIdSchemaTypesJS","CustomAudienceSimpleIdSchemaTypesJS"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=/^\d+$/,n=/^[0-9a-f]{32}$/,o=/^[0-9a-f]{64}$/,p=/^0*/,q=/[\-@#<>'",; ]|\(|\)|\+|[a-z]/gi,r=/[0-9a-z_\-]+/i;function s(t){"use strict";this.$AudienceTokenProcessor0=t;}s.prototype.processToken=function(t,u){"use strict";if(!t)return false;if(!this.$AudienceTokenProcessor0)this.$AudienceTokenProcessor0=this.$AudienceTokenProcessor1(t);switch(this.$AudienceTokenProcessor0){case j.UPLOAD_TYPE_PHONE:return this.$AudienceTokenProcessor2(t,u);case j.UPLOAD_TYPE_EMAIL:return this.$AudienceTokenProcessor3(t,u);case j.UPLOAD_TYPE_UID:return this.$AudienceTokenProcessor4(t,u);case j.UPLOAD_TYPE_PARTNER_TOKEN:return this.$AudienceTokenProcessor5(t,u);case j.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:case j.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.getPayloadSchema=function(){"use strict";switch(this.$AudienceTokenProcessor0){case j.UPLOAD_TYPE_PHONE:return this.$AudienceTokenProcessor7==='md5'?k.PHONE_MD5:k.PHONE_SHA256;case j.UPLOAD_TYPE_EMAIL:return this.$AudienceTokenProcessor7==='md5'?k.EMAIL_MD5:k.EMAIL_SHA256;case j.UPLOAD_TYPE_UID:return l.UID;case j.UPLOAD_TYPE_PARTNER_TOKEN:return l.TOKEN;case j.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return l.THIRD_PARTY_TOKEN;case j.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:return l.MOBILE_ADVERTISER_ID;}};s.prototype.isHash=function(){"use strict";return !!this.$AudienceTokenProcessor7;};s.prototype.$AudienceTokenProcessor6=function(t,u,v,w){"use strict";if(u.getUserCount()>0)u.appendString(',');u.appendString('"');u.appendUserToken(t,v,w);u.appendString('"');};s.prototype.$AudienceTokenProcessor2=function(t,u){"use strict";if(i(t)){t=t.replace(q,'').replace(p,'');this.$AudienceTokenProcessor6(t,u,g.hashEmail,64);return true;}else if(o.test(t)){this.$AudienceTokenProcessor8('sha256');this.$AudienceTokenProcessor6(t,u);return true;}else if(n.test(t)){this.$AudienceTokenProcessor8('md5');this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor4=function(t,u){"use strict";if(m.test(t)){this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor5=function(t,u){"use strict";if(r.test(t)){this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor3=function(t,u){"use strict";t=t.toLowerCase();if(h(t)){this.$AudienceTokenProcessor6(t,u,g.hashEmail,64);return true;}else if(o.test(t)){this.$AudienceTokenProcessor8('sha256');this.$AudienceTokenProcessor6(t,u);return true;}else if(n.test(t)){this.$AudienceTokenProcessor8('md5');this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor8=function(t){"use strict";if(this.$AudienceTokenProcessor7)return;this.$AudienceTokenProcessor7=t;};s.prototype.$AudienceTokenProcessor1=function(t){"use strict";if(h(t))return j.UPLOAD_TYPE_EMAIL;if(r.test(t))return j.UPLOAD_TYPE_PARTNER_TOKEN;return j.UPLOAD_TYPE_EMAIL;};s.prototype.getType=function(){"use strict";return this.$AudienceTokenProcessor0;};e.exports=s;},null);
__d("CustomAudienceBigPostPool",["ads-lib-connect_DEPRECATED","invariant","ads-cluster-constants","CustomAudienceGraphVersion","UserAgent_DEPRECATED","UrlMap","URI","WebApiApplication"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=g.FB,p=k.chrome()>22,q=3;function r(t){"use strict";this.$CustomAudienceBigPostPool0=t;this.$CustomAudienceBigPostPool1=0;this.$CustomAudienceBigPostPool2=[];}r.prototype.acquireBigPost=function(){"use strict";h(this.$CustomAudienceBigPostPool1<this.$CustomAudienceBigPostPool0);this.$CustomAudienceBigPostPool1++;if(this.$CustomAudienceBigPostPool2.length===0){return new s(this.releaseBigPost.bind(this));}else return this.$CustomAudienceBigPostPool2.shift();};r.prototype.releaseBigPost=function(t){"use strict";var u=false;for(var v=0;v<this.$CustomAudienceBigPostPool2.length;v++)if(this.$CustomAudienceBigPostPool2[v]===t)u=true;h(!u);this.$CustomAudienceBigPostPool2.push(t);this.$CustomAudienceBigPostPool1--;};function s(t){"use strict";if(p)this.$CustomAudienceBigPost0=new Uint8Array(i.CLUSTER_API_MAX_SIZE*500);this.$CustomAudienceBigPost1();this.releaseCallback=t;}s.prototype.$CustomAudienceBigPost1=function(){"use strict";if(p){this.$CustomAudienceBigPost2=0;this.$CustomAudienceBigPost3=0;this.appendString('payload');this.appendRawString('=');}else this.$CustomAudienceBigPost4='';this.$CustomAudienceBigPost5=0;this.appendString('{"data":[');};s.prototype.appendString=function(t){"use strict";if(p)t=encodeURIComponent(t);this.appendRawString(t);};s.prototype.appendRawString=function(t){"use strict";if(p){for(var u=0;u<t.length;u++)this.$CustomAudienceBigPost0[this.$CustomAudienceBigPost2++]=t.charCodeAt(u);}else this.$CustomAudienceBigPost4+=t;};s.prototype.appendUserToken=function(t,u,v){"use strict";if(u){if(p){var w=new Uint8Array(this.$CustomAudienceBigPost0.buffer,this.$CustomAudienceBigPost2,v);u(t,w);this.$CustomAudienceBigPost2+=v;}else this.$CustomAudienceBigPost4+=u(t);}else this.appendString(t);this.$CustomAudienceBigPost5++;};s.prototype.appendAppIDs=function(t){"use strict";this.appendString('], "app_ids": [');this.appendString(t.join());};s.prototype.appendPayloadSchema=function(t){"use strict";this.appendString('], "schema":"');this.appendString(t);this.appendString('"}');};s.prototype.request=function(t,u,v,w){"use strict";if(p){this.$CustomAudienceBigPost6(t,u,v,w);}else{v.payload=this.$CustomAudienceBigPost4;o.api(t,u,v,w);}};s.prototype.$CustomAudienceBigPost6=function(t,u,v,w){"use strict";if(this.$CustomAudienceBigPost3===0){if(!v.access_token)v.access_token=n.getAccessToken();v.suppress_http_code=1;u=(u||'get').toLowerCase();v.method=u;u=u==='get'?'get':'post';for(var x in v){this.appendRawString('&');this.appendString(x);this.appendRawString('=');this.appendString(v[x]);}}var y=new m(t),z=l.resolve('graph')+'/'+j.GRAPH_VERSION+y.getPath(),aa=new XMLHttpRequest();aa.open(u,z,true);aa.setRequestHeader('Content-type','application/x-www-form-urlencoded');aa.onload=function(){var ba=JSON.parse(aa.responseText);if(!ba||ba.error)if(this.$CustomAudienceBigPost7(t,u,v,w))return;this.$CustomAudienceBigPost8();w(ba);}.bind(this);aa.onerror=function(){if(!this.$CustomAudienceBigPost7(t,u,v,w)){this.$CustomAudienceBigPost8();w(JSON.parse(aa.responseText));}}.bind(this);aa.send(new Uint8Array(this.$CustomAudienceBigPost0.buffer,0,this.$CustomAudienceBigPost2));};s.prototype.$CustomAudienceBigPost7=function(t,u,v,w){"use strict";if(this.$CustomAudienceBigPost3<q){this.$CustomAudienceBigPost3++;this.$CustomAudienceBigPost6(t,u,v,w);return true;}else return false;};s.prototype.$CustomAudienceBigPost8=function(){"use strict";this.$CustomAudienceBigPost1();this.releaseCallback(this);};s.prototype.getUserCount=function(){"use strict";return this.$CustomAudienceBigPost5;};e.exports=r;},null);
__d("CAUploadSessionStatus",["invariant","CustomAudienceSessionTypesJS"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(k){"use strict";this.seq=k;this.size=0;this.last=false;this.status=i.INIT;this.startTime=0;this.latency=0;}i.prototype.start=function(){"use strict";this.startTime=Date.now();this.status=i.REQUESTED;};i.prototype.end=function(k){"use strict";this.latency=Date.now()-this.startTime;if(k){this.error=k;this.status=i.FAILED;}else this.status=i.SUCCEEDED;};i.prototype.toObject=function(){"use strict";var k={seq:this.seq,size:this.size,status:this.status,start_time:Math.round(this.startTime/1000),latency:this.latency};if(this.error)k.error=this.error;if(this.last)k.last=this.last;return k;};Object.assign(i,{INIT:'INIT',REQUESTED:'REQUESTED',FAILED:'FAILED',SUCCEEDED:'SUCCEEDED'});function j(){"use strict";this.name='ClusterUploadSession';this.clear();}j.prototype.clear=function(){"use strict";this.$CAUploadSessionStatus0=Math.ceil(Math.random()*16777216);this.$CAUploadSessionStatus1=0;this.$CAUploadSessionStatus2=0;this.$CAUploadSessionStatus3=0;this.$CAUploadSessionStatus4=0;this.$CAUploadSessionStatus5=0;this.$CAUploadSessionStatus6=0;this.$CAUploadSessionStatus7={};this.$CAUploadSessionStatus8=null;};j.prototype.isSessionCompleted=function(){"use strict";if(!this.isLastBatch())return false;for(var k in this.$CAUploadSessionStatus7){var l=this.$CAUploadSessionStatus7[k];if(l.status!=i.FAILED&&l.status!=i.SUCCEEDED)return false;}return true;};j.prototype.start=function(){"use strict";this.$CAUploadSessionStatus1=Date.now();};j.prototype.end=function(){"use strict";this.$CAUploadSessionStatus2=Date.now()-this.$CAUploadSessionStatus1;};j.prototype.startBatch=function(k,l){"use strict";this.$CAUploadSessionStatus4+=l;var m=this.$CAUploadSessionStatus9(k);m.size=l;m.start();};j.prototype.setBatchResult=function(k,l){"use strict";var m=this.$CAUploadSessionStatus9(k),n=l&&!l.error;if(n){this.$CAUploadSessionStatus5+=m.size;m.end();}else{this.$CAUploadSessionStatus6+=m.size;m.end(l?l.error:'no response');}};j.prototype.getNumUploadAttempted=function(){"use strict";return this.$CAUploadSessionStatus4;};j.prototype.getNumUploadSucceeded=function(){"use strict";return this.$CAUploadSessionStatus5;};j.prototype.getNumUploadFailed=function(){"use strict";return this.$CAUploadSessionStatus6;};j.prototype.getSessionID=function(){"use strict";return this.$CAUploadSessionStatus0;};j.prototype.getTotalBatchID=function(){"use strict";return this.$CAUploadSessionStatus3;};j.prototype.getCurrentBatchID=function(){"use strict";return this.$CAUploadSessionStatus3;};j.prototype.createNewBatch=function(){"use strict";++this.$CAUploadSessionStatus3;this.$CAUploadSessionStatus7[this.$CAUploadSessionStatus3]=new i(this.$CAUploadSessionStatus3);return this;};j.prototype.markLastBatch=function(){"use strict";this.$CAUploadSessionStatus9(this.$CAUploadSessionStatus3).last=true;return this;};j.prototype.noBatchCreated=function(){"use strict";return (this.$CAUploadSessionStatus3===0);};j.prototype.isFirstBatch=function(){"use strict";return (this.$CAUploadSessionStatus3===1);};j.prototype.isLastBatch=function(){"use strict";if(this.$CAUploadSessionStatus3===0)return false;return this.$CAUploadSessionStatus9(this.$CAUploadSessionStatus3).last;};j.prototype.getAPISpecForCurrentBatch=function(){"use strict";return {session_type:h.ACTION_BASED_SESSION,session_id:this.getSessionID(),batch_seq:this.getCurrentBatchID(),last_batch_flag:this.isLastBatch()};};j.prototype.setSessionException=function(k){"use strict";this.$CAUploadSessionStatus8=k;};j.prototype.toObject=function(){"use strict";var k=[],l=0,m=0;for(var n in this.$CAUploadSessionStatus7){var o=this.$CAUploadSessionStatus7[n];if(o.status!==i.SUCCEEDED)k.push(o.toObject());if(o.status===i.SUCCEEDED||o.status===i.FAILED){l+=o.latency;m++;}}var p={local_session_id:this.$CAUploadSessionStatus0,num_batches:this.getTotalBatchID(),time_start_ui:Math.round(this.$CAUploadSessionStatus1/1000),time_upload_ui:Math.round(this.$CAUploadSessionStatus2/1000),num_attempted_ui:this.$CAUploadSessionStatus4,num_succeeded_ui:this.$CAUploadSessionStatus5,num_failed_ui:this.$CAUploadSessionStatus6,batches_detail:JSON.stringify(k),error_msg:this.$CAUploadSessionStatus8};if(m>0)p.avg_batch_latency=Math.round(l/m);return p;};j.prototype.$CAUploadSessionStatus9=function(k){"use strict";g(this.$CAUploadSessionStatus7.hasOwnProperty(k));return this.$CAUploadSessionStatus7[k];};e.exports=j;},null);
__d("CustomAudienceCreationErrors",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({FILE_IMPORT_NO_VALID_ENTRY:null,FILE_IMPORT_TOKEN_ERROR:null,FILE_IMPORT_ERROR_LIMIT_REACH:null,COPY_PASTE_TOKEN_ERROR:null,COPY_PASTE_REQUEST_ERROR:null,FILE_IMPORT_CSV_CONVERT_ERROR:null,FATAL_ERROR:null});e.exports=h;},null);
__d("AdsMigrationOverrides",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};e.exports=Object.keys(g).length?JSON.stringify(g):'';},null);
__d("BufferedTokenReader",["ArbiterMixin","fileSlice","invariant","mixin"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j(g);for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(o,p){"use strict";i(a.FileReader!==(void 0));this.$BufferedTokenReader0=o;this.$BufferedTokenReader1=new a.FileReader();this.$BufferedTokenReader1.onloadend=this.$BufferedTokenReader2.bind(this);this.$BufferedTokenReader3='';this.$BufferedTokenReader4=0;this.$BufferedTokenReader5=1;this.$BufferedTokenReader6=0;this.$BufferedTokenReader7=p;this.$BufferedTokenReader8=0;this.$BufferedTokenReader9=null;this.$BufferedTokenReadera=null;}n.prototype.nextToken=function(){"use strict";if(this.$BufferedTokenReaderb())return this.$BufferedTokenReaderc();while(this.$BufferedTokenReadera){this.$BufferedTokenReader9=this.$BufferedTokenReadera;this.$BufferedTokenReadera=null;this.$BufferedTokenReader8=0;this.readLines();if(this.$BufferedTokenReaderb())return this.$BufferedTokenReaderc();}if(!this.currentlyReading()&&!this.hasMore())if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return this.$BufferedTokenReaderc();}else return n.EOF;this.readLines();return null;};n.prototype.hasMore=function(){"use strict";return this.$BufferedTokenReader6<this.$BufferedTokenReader0.size;};n.prototype.progress=function(){"use strict";return this.$BufferedTokenReader6/this.$BufferedTokenReader0.size;};n.prototype.getNumTokens=function(){"use strict";return this.$BufferedTokenReader4;};n.prototype.getLineNumber=function(){"use strict";return this.$BufferedTokenReader5;};n.prototype.getFileSize=function(){"use strict";return this.$BufferedTokenReader0.size;};n.prototype.readLines=function(){"use strict";if(this.currentlyReading())return;if(this.hasMore())this.$BufferedTokenReader1.readAsText(this.$BufferedTokenReaderd());};n.prototype.currentlyReading=function(){"use strict";return this.$BufferedTokenReader1.readyState===a.FileReader.LOADING;};n.prototype.$BufferedTokenReaderb=function(){"use strict";if(this.$BufferedTokenReader9&&this.$BufferedTokenReader8<this.$BufferedTokenReader9.length)while(this.$BufferedTokenReader8<this.$BufferedTokenReader9.length){var o=this.$BufferedTokenReader9.charAt(this.$BufferedTokenReader8);if(n.LINE_BREAKS[o])if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return true;}else{this.$BufferedTokenReader5++;this.$BufferedTokenReader8++;var p=this.$BufferedTokenReader9.charAt(this.$BufferedTokenReader8);if(o!=p&&n.LINE_BREAKS[p])this.$BufferedTokenReader8++;continue;}this.$BufferedTokenReader8++;if(o==='\0')continue;if(n.TOKEN_BREAKS[o]){if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return true;}continue;}this.$BufferedTokenReader3+=o;}return false;};n.prototype.$BufferedTokenReaderc=function(){"use strict";var o=this.$BufferedTokenReader3;this.$BufferedTokenReader3='';return o;};n.prototype.$BufferedTokenReader2=function(){"use strict";i(!this.$BufferedTokenReadera);this.$BufferedTokenReadera=this.$BufferedTokenReader1.result;this.inform(n.DATA_LOADED_EVENT);};n.prototype.$BufferedTokenReaderd=function(){"use strict";var o=this.$BufferedTokenReader6,p=Math.min(this.$BufferedTokenReader6+this.$BufferedTokenReader7,this.$BufferedTokenReader0.size);this.$BufferedTokenReader6=p;return h.call(this.$BufferedTokenReader0,o,p);};Object.assign(n,{EOF:'\0\0',DATA_LOADED_EVENT:'bufferedlinereader_data_loaded',LINE_BREAKS:{'\r':true,'\n':true},TOKEN_BREAKS:{'<':true,'>':true,'"':true,"'":true,',':true,' ':true,'|':true,';':true,'\t':true}});e.exports=n;},null);
__d("CustomAudienceUiLogger",["AsyncRequest"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='/ajax/ads/manage/custom_audience/log/',i={EVENT_UI_SESSION_FINISH:'ui_session_finish',log:function(j){var k=new g(h);k.setData(j||{}).send();}};e.exports=i;},null);
__d("CustomAudienceUploader",["ads-cluster-constants","AdsMigrationOverrides","ArbiterMixin","AudienceTokenProcessor","CustomAudienceBigPostPool","BufferedTokenReader","CAUploadSessionStatus","CustomAudienceUiLogger","CustomAudienceSessionTypesJS","CustomAudienceHashIdSchemaTypesJS","CustomAudienceSimpleIdSchemaTypesJS","WebApiApplication","fbt","invariant","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=b('ads-cluster-constants').ERROR_THRESHOLD_RATE,w={INIT:"INIT",READING:"READING",FILE_LOADING:"FILE_LOADING",WAITING_FOR_ERROR_CHECK:"WAITING_FOR_ERROR_CHECK",WAITING_FOR_REQUEST:"WAITING_FOR_REQUEST",WAITING_REQUEST_SENT:"WAITING_REQUEST_SENT",STOPPED:"STOPPED",DONE:"DONE"},x=u(i);for(var y in x)if(x.hasOwnProperty(y))aa[y]=x[y];var z=x===null?null:x.prototype;aa.prototype=Object.create(z);aa.prototype.constructor=aa;aa.__superConstructor__=x;function aa(ba,ca){"use strict";this.dao=ba;this.N_UPLOAD_CONCURRENCY=ca;this._clusterReader=null;this._numUploaded=0;this._clusterID=0;this._removeUsers=false;this._encOption=null;this._state=w.INIT;this._uploadSession=new m();this._bigPostPool=new k(ca+2);this._bigPost=this._bigPostPool.acquireBigPost();this._hashType=null;this._requestNumber=0;this._waitingRequest=null;this._currentLineInfo={lineNum:0,numValidTokens:0,firstInvalidToken:null};this._numInvalidLines=0;this._appIDs=null;}aa.prototype.createCluster=function(ba,ca,da){"use strict";this._encOption=da.encOption;this._uploadType=da.uploadType;this._accountId=da.accountId;this._createCluster=true;this._appIDs=da.appIDs;this.inform(aa.PROGRESS_CREATING_CLUSTER);this._readFile(ca);this._errorLimitCallback=function(){this.dao.add.createCustomAudience.one(function(ea){this._clusterID=ea.id;this.inform(aa.CREATING_CLUSTER_FINISHED,{audienceId:this._clusterID,audienceName:ba});if(this._state!=w.STOPPED)this._continueAfterFirstBatchCheck();}.bind(this),{migrations_override:h,name:ba,accountId:da.accountId,opt_out_link:da.optOutLink,rev_share_policy_id:da.revSharePolicyID,description:da.description,partner_reference_key:da.partnerReferenceKey,is_partner_category:!!da.isPartnerCategory,creation_params:{type:'file',file_name:ca.name},subtype:this.inferAudienceSubtype(da),handleError:function(ea,fa){var ga={type:'FatalError',message:fa.error.message};this.inform(aa.FATAL_ERROR,ga);}.bind(this)});}.bind(this);};aa.prototype.inferAudienceSubtype=function(ba){"use strict";if(!!ba.revSharePolicyID)return 'managed';return 'custom';};aa.prototype.modifyUsers=function(ba,ca,da){"use strict";this._accountId=da.accountId;this._uploadType=da.uploadType;this._encOption=da.encOption;this._removeUsers=da.removeUsers;this._clusterID=ba;this._appIDs=da.appIDs;this._readFile(ca);this._errorLimitCallback=function(){this._continueAfterFirstBatchCheck();}.bind(this);};aa.prototype.removeUsersFromAllAudiences=function(ba,ca){"use strict";this._accountId=ca.accountId;this._uploadType=ca.uploadType;this._encOption=ca.encOption;this._optOut=true;this._readFile(ba);this._errorLimitCallback=function(){this._continueAfterFirstBatchCheck();}.bind(this);};aa.prototype.getNumErrors=function(){"use strict";return this._numInvalidLines;};aa.prototype.getNumUploaded=function(){"use strict";var ba=this._uploadSession.getNumUploadSucceeded()-(this._uploadSession.getTotalBatchID()-1);if(ba<0)ba=0;return ba;};aa.prototype.getNumFailed=function(){"use strict";return this._uploadSession.getNumUploadFailed();};aa.prototype.getNumTokens=function(){"use strict";return this._clusterReader.getNumTokens();};aa.prototype.getNumLines=function(){"use strict";return this._clusterReader.getLineNumber();};aa.prototype.getProgress=function(){"use strict";if(this._uploadSession.isSessionCompleted())return 100;return this._clusterReader?this._clusterReader.progress()*100:0;};aa.prototype.stop=function(){"use strict";t(this._state==w.READING||this._state==w.FILE_LOADING||this._state==w.WAITING_FOR_REQUEST||this._state==w.WAITING_FOR_ERROR_CHECK);this._state=w.STOPPED;this._uploadSession.end();this._logToServer(false);this._clusterReader=null;};aa.prototype._continueAfterFirstBatchCheck=function(){"use strict";t(this._state==w.WAITING_FOR_ERROR_CHECK);this.inform(aa.PROGRESS_START_UPLOADING);if(this._waitingRequest){this._sendWaitingRequest();}else this._endUpload();};aa.prototype._handleLine=function(){"use strict";while(true){if(this._state===w.STOPPED)break;t(this._state===w.READING);var ba=this._clusterReader.nextToken();if(ba===null){this._state=w.FILE_LOADING;break;}if(ba==l.EOF){this._mayTriggerTokenErrorEvent();this._endOfFile=true;if(this._bigPost.getUserCount()>0){this._sendRequest();}else if(this._bigPost.getUserCount()===0&&this._uploadSession.noBatchCreated()){this.inform(aa.NO_VALID_ENTRIES);return;}break;}if(this._currentLineInfo.line&&this._clusterReader.getLineNumber()>this._currentLineInfo.line)this._mayTriggerTokenErrorEvent();if(ba==='')continue;this._currentLineInfo.line=this._clusterReader.getLineNumber();var ca=this._tokenProcessor.processToken(ba,this._bigPost);if(!ca){if(this._currentLineInfo.firstInvalidToken===null)this._currentLineInfo.firstInvalidToken=ba;continue;}this._currentLineInfo.numValidTokens++;if(this._bigPost.getUserCount()==g.CLUSTER_API_MAX_SIZE){var da=!this._sendRequest();this._tokenProcessor.processToken(ba,this._bigPost);if(da)break;}}if(this._state!=w.STOPPED)this.inform(aa.PROGRESS_PARSING);if(this._state==w.WAITING_FOR_ERROR_CHECK)if(this._numInvalidLines/this._clusterReader.getLineNumber()>v){this.inform(aa.ERROR_LIMIT_REACHED,{numErrors:this._numInvalidLines,numLines:this._clusterReader.getLineNumber(),errorRate:this._numInvalidLines/this._clusterReader.getLineNumber(),continueCallback:this._errorLimitCallback});}else this._errorLimitCallback();};aa.prototype._readFile=function(ba){"use strict";this._endOfFile=false;this._tokenProcessor=new j(this._uploadType);this._clusterReader=new l(ba,10000);this._clusterReader.subscribe(l.DATA_LOADED_EVENT,this._continueReadFile.bind(this));this._uploadSession.start();this._continueReadFile();this.inform(aa.PROGRESS_START_READING);};aa.prototype._continueReadFile=function(){"use strict";if(this._state==w.INIT||this._state==w.FILE_LOADING||this._state==w.WAITING_REQUEST_SENT){this._state=w.READING;try{this._handleLine();}catch(ba){this._uploadSession.setSessionException(ba.message);this._logToServer(false);throw ba;}}};aa.prototype._onTokenError=function(ba,ca){"use strict";var da=this._tokenProcessor.getType(),ea=this._getUploadTypeString(da);if(this._tokenProcessor.isHash()){da=g.UPLOAD_TYPE_HASH;ea=s._("hash");}var fa={type:da,message:s._("line {line} contains {token}",[s.param("line",ca),s.param("token",ba)]),token:ba};this._numInvalidLines++;this.inform(aa.ERROR,fa);};aa.prototype._getUploadTypeString=function(ba){"use strict";switch(ba){case g.UPLOAD_TYPE_EMAIL:return s._("email");case g.UPLOAD_TYPE_UID:return s._("UID");case g.UPLOAD_TYPE_PHONE:return s._("phone number");case g.UPLOAD_TYPE_PARTNER_TOKEN:return s._("partner token");case g.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return s._("App User ID");case g.UPLOAD_TYPE_MOBILE_ADVERTISER_Id:return s._("Mobile Advertising ID");}return '';};aa.prototype._sendRequest=function(){"use strict";this._uploadSession.createNewBatch();if(this._endOfFile)this._uploadSession.markLastBatch();t(this._createCluster&&this._uploadSession.isFirstBatch()||this._clusterID||this._optOut);t(this.dao);t(this._state==w.READING);var ba=this._bigPost;this._bigPost=this._bigPostPool.acquireBigPost();var ca=ba.getUserCount();t(this._endOfFile&&ca>0||ca==g.CLUSTER_API_MAX_SIZE);var da=this._makeUploadingAPIParams(ba);if(this._uploadSession.isFirstBatch()||this._requestNumber>=this.N_UPLOAD_CONCURRENCY){this._waitingRequest=function(){this._callUploadingAPI(ba,da);}.bind(this);this._state=this._uploadSession.isFirstBatch()?w.WAITING_FOR_ERROR_CHECK:w.WAITING_FOR_REQUEST;return false;}this._callUploadingAPI(ba,da);return true;};aa.prototype._requestCallback=function(ba){"use strict";return (function(ca){this._uploadSession.setBatchResult(ba,ca);this.inform(aa.PROGRESS_UPLOADING);if(!ca||ca.error){var da=s._("Unknown error");if(ca&&ca.error)da=ca.error.message;var ea={type:'UploadRequest',message:da};this.inform(aa.ERROR,ea);}this._requestNumber--;if(this._uploadSession.isSessionCompleted()){this._endUpload();return;}if(this._state==w.WAITING_FOR_REQUEST)this._sendWaitingRequest();}).bind(this);};aa.prototype._sendWaitingRequest=function(){"use strict";t(this._state==w.WAITING_FOR_REQUEST||this._state==w.WAITING_FOR_ERROR_CHECK);var ba=this._waitingRequest;this._waitingRequest=null;ba();this._state=w.WAITING_REQUEST_SENT;this._continueReadFile();};aa.prototype._makeUploadingAPIParams=function(ba){"use strict";if(this._appIDs)ba.appendAppIDs(this._appIDs);ba.appendPayloadSchema(this._tokenProcessor.getPayloadSchema());var ca=this._uploadSession.getAPISpecForCurrentBatch();ca.estimated_num_total=Math.round((this._uploadSession.getNumUploadAttempted()+ba.getUserCount())/this.getProgress()*100);return ca;};aa.prototype._callUploadingAPI=function(ba,ca){"use strict";this._requestNumber++;this._uploadSession.startBatch(ca.batch_seq,ba.getUserCount());var da={session:JSON.stringify(ca)};if(this._optOut){ba.request('/act_'+this._accountId+'/usersofanyaudience','DELETE',da,this._requestCallback(this._uploadSession.getCurrentBatchID()));}else ba.request('/'+this._clusterID+'/users',this._removeUsers?'DELETE':'POST',da,this._requestCallback(this._uploadSession.getCurrentBatchID()));};aa.prototype._endUpload=function(){"use strict";this._state=w.DONE;this._uploadSession.end();this._logToServer(true);this.inform(aa.FINISHED,{audienceId:this._clusterID,sessionId:this._uploadSession.getSessionID()});};aa.prototype._mayTriggerTokenErrorEvent=function(){"use strict";if(this._currentLineInfo.line&&this._currentLineInfo.numValidTokens===0&&this._currentLineInfo.firstInvalidToken)this._onTokenError(this._currentLineInfo.firstInvalidToken,this._currentLineInfo.line);this._currentLineInfo.line=0;this._currentLineInfo.numValidTokens=0;this._currentLineInfo.firstInvalidToken=null;};aa.prototype._logToServer=function(ba){"use strict";var ca=this._uploadSession.toObject();ca.app_id=r.getClientID();ca.audience_id=this._clusterID;if(this._accountId)ca.ad_account_id=this._accountId;ca.event_name=n.EVENT_UI_SESSION_FINISH;ca.num_invalid_ui=this._numInvalidLines;ca.num_lines_ui=this._clusterReader.getLineNumber();ca.file_size=this._clusterReader.getFileSize();ca.session_type=o.ACTION_BASED_SESSION;ca.action_type=this._getActionType();ca.payload_schema=this._getPayloadSchema();if(ba){ca.upload_progress=100;}else ca.upload_progress=Math.round(this.getProgress()/100*99);n.log(ca);};aa.prototype._getActionType=function(){"use strict";if(this._optOut)return "OPTOUT";if(this._removeUsers)return "REMOVE_USER";return "ADD_USER";};aa.prototype._getPayloadSchema=function(){"use strict";switch(this._uploadType){case g.UPLOAD_TYPE_EMAIL:return p.EMAIL_SHA256;case g.UPLOAD_TYPE_UID:return q.UID;case g.UPLOAD_TYPE_PHONE:return p.PHONE_SHA256;case g.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return q.THIRD_PARTY_TOKEN;case g.UPLOAD_TYPE_PARTNER_TOKEN:return q.TOKEN;case g.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:return q.MOBILE_ADVERTISER_ID;}};Object.assign(aa,{PROGRESS_START_READING:'progress_reading',PROGRESS_PARSING:'progress_parsing',PROGRESS_START_UPLOADING:'progress_start_uploading',PROGRESS_UPLOADING:'progress_uploading',PROGRESS_CREATING_CLUSTER:'progress_creating_cluster',NO_VALID_ENTRIES:'no_valid_entries_event',ERROR_LIMIT_REACHED:'error_limit_reached_event',ERROR:'error_event',FATAL_ERROR:'fatal_error_event',CREATING_CLUSTER_FINISHED:'creating_cluster_finished_event',FINISHED:'finished_event',STATES:w});e.exports=aa;},null);
__d("XAdsCreatorController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ads\/create\/",{business_id:{type:"Int"},act:{type:"Int"},campaign:{type:"Int"},ad_set:{type:"Int"},campaign_id:{type:"Int"},campaign_placement:{type:"String"},oid:{type:"Int"},fbid:{type:"Int"},storyid:{type:"Int"},objective:{type:"String"},edit_ad_link:{type:"Bool",defaultValue:false},conversion_pixel_id:{type:"Int"},targeting_spec:{type:"String"},ref:{type:"String"},desturl:{type:"String"},coupon_code:{type:"String"},coupon_error:{type:"Bool",defaultValue:false}});},null);
__d("AdsAMCreateAudienceServerActions",["AdsAMActionTypes","AdsAMConstants","AdsCustomAudienceThirdPartyEmailImportStrategyTypes","AdsDispatcher","AudienceDaoManager","AudienceManagerRequestBatch","AudienceManagerUpdateRequest","AudienceTokenProcessor","CustomAudienceBigPostPool","BusinessURI.brands","CAUploadSessionStatus","CustomAudienceCreationErrors","CustomAudienceUploader","ads-cluster-constants","XAdsCreatorController","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=10,x={DELETE:'DELETE',POST:'POST'},y={validRecord:0,invalidRecord:0,totalRecord:0},z=null,aa={uploadSelectedFileToServer:function(na,oa,pa,qa,ra,sa){var ta=k.getPrimedDao(na);ta.add.acceptCustomAudiencesTos.one(function(){return da(qa,function(ua){return ea(na,sa,oa,pa,ua);});},{tos_id:ra});},continueUploadSelectedFileToServer:function(){if(z){z();}else j.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR});},uploadCopyPasteEmailsToServer:function(na,oa,pa,qa,ra,sa){var ta=k.getPrimedDao(na);ta.add.acceptCustomAudiencesTos.one(function(){return ka(na,sa,oa,pa,qa);},{tos_id:ra});},uploadMailChimpListsToServer:function(na,oa,pa,qa){var ra=k.getPrimedDao(na);ra.add.acceptCustomAudiencesTos.one(function(){return ma(na,qa,oa);},{tos_id:pa});},updateAudienceNameDescription:function(na,oa,pa){var qa=k.getPrimedDao(na),ra={id:oa.id,handleError:function(sa,ta){j.handleUpdateFromServerResponse({actionType:g.UPDATE_AUDIENCE_ERROR,audienceID:oa.id,rawData:ta,result:sa});},name:oa.name,description:oa.description};qa.mutate.customAudience.one(function(){var sa=[];sa[oa.id]=oa;j.handleUpdateFromServerResponse({actionType:g.UPDATE_NAME_DESCRIPTION_COMPLETE,audiences:sa});pa();},ra);},batchUpdateAudienceNameDescription:function(na,oa,pa){var qa=oa.map(function(ta){var ua={id:ta.id,name:ta.name,description:ta.description};return new m(ua);}),ra=function(ta){j.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_ERROR});},sa=function(ta){j.handleUpdateFromServerResponse({actionType:g.UPDATE_NAME_DESCRIPTION_COMPLETE,audiences:oa});pa();};l.execute(qa,sa,ra);},batchCreateAd:function(na,oa){var pa=[];Object.keys(oa).forEach(function(sa){pa.push({id:oa[sa].id,name:oa[sa].name});});var qa={custom_audiences:pa},ra=p((u.getURIBuilder()).setInt('act',na).setString('targeting_spec',JSON.stringify(qa)).getURI());window.open(ra,'_blank');},fetchContactListsFromServer:function(na,oa,pa){var qa=k.getPrimedDao(na),ra={accountId:na,third_party_data:{strategy_type:i.MAILCHIMP,access_token:oa,start_page:pa-1}};qa.fetch.contactsLists.one(function(sa){j.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_FETCH_COMPLETE,currentPage:pa,totalPage:Math.ceil(sa.total/w),contactsLists:sa.lists});},ra);},uploadFileAddUsers:function(na,oa,pa,qa,ra){da(ra,function(sa){return fa(na,oa,pa,qa,sa);});},uploadFileRemoveUsers:function(na,oa,pa,qa,ra){da(ra,function(sa){return ga(na,oa,pa,qa,sa);});},copyPasteAddUsers:function(na,oa,pa,qa,ra){la(na,oa,pa,qa,ra,x.POST);},copyPasteRemoveUsers:function(na,oa,pa,qa,ra){la(na,oa,pa,qa,ra,x.DELETE);},removeUsersFromAllCustomAudiences:function(na,oa,pa){ha(na,oa,pa);}};function ba(){y={validRecord:0,invalidRecord:0,totalRecord:0};}function ca(na){var oa=k.getPrimedDao(na),pa=new s(oa,h.FILE_UPLOAD_CONCURRENCY),qa=[pa.subscribe(s.ERROR_LIMIT_REACHED,function(ra,sa){if(sa.numErrors<sa.numLines){j.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,errorType:r.FILE_IMPORT_ERROR_LIMIT_REACH,errorDetails:{numErrors:sa.numErrors,numLines:sa.numLines}});z=sa.continueCallback;}}),pa.subscribe(s.PROGRESS_START_UPLOADING,function(){return j.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_START_UPLOAD});}),pa.subscribe(s.PROGRESS_UPLOADING,function(){return j.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_UPLOAD_PROGRESS,progress:pa.getProgress()});}),pa.subscribe(s.ERROR,function(ra,sa){return j.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,errorType:r.FILE_IMPORT_TOKEN_ERROR,error:sa});}),pa.subscribe(s.NO_VALID_ENTRIES,function(){return j.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,errorType:r.FILE_IMPORT_NO_VALID_ENTRY});}),pa.subscribe(s.FATAL_ERROR,function(ra,sa){return j.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,errorType:r.FATAL_ERROR,error:sa});}),pa.subscribe(s.CREATING_CLUSTER_FINISHED,function(ra,sa){return j.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_CREATE_AUDIENCE_COMPLETE,audienceID:sa.audienceId,audienceName:sa.audienceName});}),pa.subscribe(s.FINISHED,function(ra,sa){y={validRecord:pa.getNumUploaded(),invalidRecord:pa.getNumFailed(),totalRecord:pa.getNumTokens()};j.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_UPLOAD_COMPLETE,numberOfRecords:y});ba();qa.forEach(pa.unsubscribe,pa);})];return pa;}function da(na,oa){if(ja(na)){ia(na,function(pa){return oa(pa);});}else oa(na);}function ea(na,oa,pa,qa,ra){var sa=ca(na),ta={uploadType:pa,accountId:na};if(pa===t.UPLOAD_TYPE_UID)ta.appIDs=qa.map(function(ua){return ua.getUniqueID();});sa.createCluster(oa,ra,ta);}function fa(na,oa,pa,qa,ra){var sa=ca(na),ta={uploadType:pa,accountId:na,removeUsers:false};if(pa===t.UPLOAD_TYPE_UID)ta.appIDs=qa.map(function(ua){return ua.getUniqueID();});sa.modifyUsers(oa,ra,ta);}function ga(na,oa,pa,qa,ra){var sa=ca(na),ta={uploadType:pa,accountId:na,removeUsers:true};if(pa===t.UPLOAD_TYPE_UID)ta.appIDs=qa.map(function(ua){return ua.getUniqueID();});sa.modifyUsers(oa,ra,ta);}function ha(na,oa,pa){var qa=ca(na),ra={uploadType:oa,accountId:na};qa.removeUsersFromAllAudiences(pa,ra);}function ia(na,oa){}function ja(na){return na.name.endsWith('.xls')||na.name.endsWith('.xlsx');}function ka(na,oa,pa,qa,ra){var sa=k.getPrimedDao(na);sa.add.createCustomAudience.one(function(ta){la(na,ta.id,pa,qa,ra,x.POST);j.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_CREATE_AUDIENCE_COMPLETE,audienceID:ta.id,audienceName:oa});},{name:oa,subtype:'custom',creation_params:{type:'copy_paste'},handleError:function(ta,ua){return j.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,type:r.FATAL_ERROR,error:ua.error});}});}function la(na,oa,pa,qa,ra,sa){var ta=new o(1),ua=ta.acquireBigPost(),va=new n(pa);ra.map(function(bb){var cb=va.processToken(bb,ua);if(!cb){var db={type:pa,token:bb};j.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_ERROR,type:r.COPY_PASTE_TOKEN_ERROR,error:db});}});var wa=new q();wa.createNewBatch();wa.markLastBatch();if(pa===t.UPLOAD_TYPE_UID){var xa=qa.map(function(bb){return bb.getUniqueID();});ua.appendAppIDs(xa);}ua.appendPayloadSchema(va.getPayloadSchema());var ya=wa.getAPISpecForCurrentBatch();ya.estimated_num_total=ua.getUserCount();var za={session:JSON.stringify(ya)},ab=function(bb){wa.setBatchResult(wa.getCurrentBatchID(),bb);j.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_UPLOAD_PROGRESS,progress:100});if(!bb||bb.error)j.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_ERROR,type:r.COPY_PASTE_REQUEST_ERROR,errorDetails:bb.error});y={validRecord:bb.num_received-bb.num_invalid_entries,invalidRecord:bb.num_invalid_entries,totalRecord:bb.num_received};wa.end();j.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_UPLOAD_COMPLETE,numberOfRecords:y});ba();};ua.request('/'+oa+'/users',sa,za,ab);}function ma(na,oa,pa){var qa=pa.length,ra=0,sa={},ta=k.getPrimedDao(na);pa.forEach(function(ua){var va={name:ua.name,third_party_data:{list_id:ua.list_id,strategy_type:i.MAILCHIMP,access_token:oa}};ta.add.audiencesImport.one(function(wa){ra++;sa[wa.id]={id:wa.id,name:ua.name};var xa=ra/qa*100;j.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_UPLOAD_PROGRESS,progress:xa});if(ra===qa)j.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_UPLOAD_COMPLETE,audiences:sa});},va);});}e.exports=aa;},null);
__d("AdsAMCreateAudienceViewActions",["AdsAMActionTypes","AdsAMCreateAudienceServerActions","AdsDispatcher"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={reset:function(){i.handleUpdateFromViewAction({actionType:g.CREATE_AUDIENCE_RESET});},setViewStage:function(k){i.handleUpdateFromViewAction({actionType:g.CREATE_AUDIENCE_SET_VIEW_STAGE,viewStage:k});},setViewDialogType:function(k){i.handleUpdateFromViewAction({actionType:g.CREATE_AUDIENCE_SET_VIEW_DIALOG_TYPE,viewDialogType:k});},showMobileAppDialog:function(){i.handleUpdateFromViewAction({actionType:g.CREATE_AUDIENCE_SHOW_MACA_DIALOG});},startFileImport:function(k,l,m,n,o,p){i.handleUpdateFromViewAction({actionType:g.FILE_IMPORT_CHECK_FILE});h.uploadSelectedFileToServer(k,l,m,n,o,p);},startCopyPasteUpload:function(k,l,m,n,o,p){i.handleUpdateFromViewAction({actionType:g.COPY_PASTE_START_UPLOAD});h.uploadCopyPasteEmailsToServer(k,l,m,n,o,p);},startMailChimpUpload:function(k,l,m,n){i.handleUpdateFromViewAction({actionType:g.MAIL_CHIMP_START_UPLOAD});h.uploadMailChimpListsToServer(k,l,m,n);},updateAudiencesNameDescription:function(k,l,m){if(l.length===0){m();}else if(l.length===1){h.updateAudienceNameDescription(k,l[0],m);}else h.batchUpdateAudienceNameDescription(k,l,m);},handleMailChimpLogin:function(k,l){h.fetchContactListsFromServer(k,l,1);},loadContactsList:function(k,l,m){h.fetchContactListsFromServer(k,l,m);}};e.exports=j;},null);
__d("AudiencePropertyConstants",["AdsAPISpec","AdsUtils"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.CUSTOM_AUDIENCE_FIELDS_WITH_EXPANSION.map(h.underscoreKey),j=function(){var k=['capabilities'],l=i;k.forEach(function(m){if(l.indexOf(m)===-1)l.push(m);});return l;};e.exports={ACCOUNT_ID:'account_id',APPROXIMATE_COUNT:'approximate_count',DATA_SOURCE:'data_source',DESCRIPTION:'description',ID:'id',NAME:'name',PARENT_AUDIENCE_ID:'parent_audience_id',PARENT_CATEGORY:'parent_category',RETENTION_DAYS:'retention_days',RULE:'rule',STATUS:'status',DELIVERY_STATUS:'delivery_status',OPERATION_STATUS:'operation_status',PERMISSION_FOR_ACTIONS:'permission_for_actions',SUBTYPE:'subtype',SUBTYPE_NAME:'subtype_name',TIME_CONTENT_UPDATED:'time_content_updated',TIME_CREATED:'time_created',TIME_UPDATED:'time_updated',TYPE:'type',TYPE_NAME:'type_name',INCLUDED_CUSTOM_AUDIENCES:'included_custom_audiences',EXCLUDED_CUSTOM_AUDIENCES:'excluded_custom_audiences',LOOKALIKE_SPEC:'lookalike_spec',LOOKALIKE_AUDIENCE_IDS:'lookalike_audience_ids',CAPABILITIES:'capabilities',AUDIENCE_MANAGER_FIELDS:j()};},null);
__d("SavedTargetSpecAPIFields",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={ID:'id',AUDIENCE_ID:'audience_id',ACCOUNT_ID:'account_id',AUDIENCE_NAME:'audience_name',TARGET_SPEC:'target_spec',TIME_UPDATED_TIMESTAMP:'time_updated_timestamp',APPROXIMATE_COUNT:'approximate_count',TARGETING_SENTENCE_LINES:'targeting_sentence_lines',IS_SAVED_TARGET_SPEC:'isSavedTargetSpec'};e.exports={FIELDS:g,DEFAULT_FIELDS_FOR_AUDIENCE_MANAGER:[g.ID,g.ACCOUNT_ID,g.AUDIENCE_NAME,g.APPROXIMATE_COUNT,g.TARGET_SPEC,g.TIME_UPDATED_TIMESTAMP,g.TARGETING_SENTENCE_LINES]};},null);
__d("AdsAudienceDataLoader",["AudiencePropertyConstants","AudienceManagerUIConstants","GraphAPI","SavedTargetSpecAPIFields"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.AUDIENCE_MANAGER_FIELDS;k.push('external_event_source.fields(last_fired_time, name)');var l=j.DEFAULT_FIELDS_FOR_AUDIENCE_MANAGER,m=h.SAVED_AUDIENCE_API_FIELDS,n={getPromiseForAudienceUpdate:function(o,p){for(var q in p)if(p[q]===null||p[q]===(void 0))delete p[q];return i('2.2').object('audience',o).post(p);},getPromiseToDeleteAudience:function(o){return i('2.2').object('audience',o).remove();},fetchAudience:function(o){return i('2.2').object('audience',o).get({fields:k});},fetchAudiencMetadata:function(o){return i('2.2').object('audience',o).get({metadata:true});},getPromiseForSavedTargetSpecUpdate:function(o,p){return i('2.2').object('saved_target_group',o).post({name:p.name,targeting_spec:p.targetSpec});},getPromiseToRemoveCapabilities:function(o,p){return i('2.2').object('audience',o).edge('capabilities').batched().remove({adaccounts:p});},getPromiseToUpdateCapabilities:function(o,p){return i('2.2').object('audience',o).edge('capabilities').batched().post({accounts_capabilities:p});},fetchSavedTargetSpec:function(o){return i('2.2').object('saved_target_group',o).get({fields:l});},fetchSavedAudience:function(o){return i('2.2').object('saved_audience',o).get({fields:m,date_format:'U'});},fetchLookalikeNames:function(o){return i('2.2').objects('audience',o).get({fields:['name']});},fetchAppName:function(o){return i('2.2').object('app_info',o).get({fields:['name']});},fetchAdAccountNames:function(o){return i('2.2').adaccounts(o).get({fields:['name']});},fetchAdgroupsUsingAudience:function(o){return i('2.2').object('audience',o).edge('adgroups').batched().get({adgroup_status:['ACTIVE'],fields:['name']});},fetchAudiencOverlap:function(o,p,q){return i('2.3').adaccount(o).edge('audienceoverlap').get({pivot_id:p,comparison_ids:q});}};e.exports=n;},null);
__d("AdsAudienceDataSourceUtils",["CustomAudienceDataSourceType","CustomAudienceDataSourceSubType","Map","Set","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=g,m=h,n=l.FILE_IMPORTED,o=new i([[l.UNKNOWN,k._("Unknown")],[l.FILE_IMPORTED,k._("Data File")],[l.EVENT_BASED,k._("Event")],[l.SEED_BASED,k._("Lookalike")],[l.THIRD_PARTY_IMPORTED,k._("Email Provider")],[l.COPY_PASTE,k._("Copy & Paste")],[l.CLAIM_BASED,k._("Claim")]]),p=new i([[m.ANYTHING,k._("Anything")],[m.NOTHING,k._("Nothing")],[m.HASHES,k._("Hashes")],[m.USER_IDS,k._("UIDs")],[m.HASHES_OR_USER_IDS,k._("Hashes & UIDs")],[m.MOBILE_ADVERTISER_IDS,k._("Mobile Advertiser IDs")],[m.EXTERNAL_IDS,k._("External IDs")],[m.MULTI_HASHES,k._("Multi Hashes")],[m.WEB_PIXEL_HITS,k._("Website")],[m.WEB_PIXEL_COMBINATION_EVENTS,k._("Website")],[m.MOBILE_APP_EVENTS,k._("App")],[m.MOBILE_APP_COMBINATION_EVENTS,k._("App")],[m.CUSTOM_AUDIENCE_USERS,k._("Custom Audience")],[m.PAGE_FANS,k._("Page Fans")],[m.CONVERSION_PIXEL_HITS,k._("Conversion Pixel Hits")],[m.APP_USERS,k._("App Users")],[m.S_EXPR,k._("Saved Target Group")],[m.MAIL_CHIMP_EMAIL_HASHES,k._("MailChimp")],[m.CONSTANT_CONTACTS_EMAIL_HASHES,k._("ConstantContacts")],[m.COPY_PASTE_EMAIL_HASHES,k._("Emails")],[m.USER_PROPERTIES,k._("User Properties")]]),q=new j([l.CLAIM_BASED]),r=new j([m.USER_PROPERTIES]),s=new j([m.WEB_PIXEL_COMBINATION_EVENTS,m.MOBILE_APP_COMBINATION_EVENTS,m.WEB_PIXEL_HITS,m.MOBILE_APP_EVENTS]),t={TYPES:l,SUBTYPES:m,isDisallowedByDataSource:function(u){return q.has(u.type)||r.has(u.sub_type);},isDisallowedByWCA:function(u){return s.has(u.sub_type);},textByType:function(u){return o.get(u)||o.get(n);},textBySubType:function(u){return p.get(u)||'';},detailOfAudience:function(u){var v=u.data_source.type;if(!v)return '';var w;switch(v){case l.FILE_IMPORTED:w=JSON.parse(u.data_source.creation_params);return (w&&w.file_name)||'';case l.SEED_BASED:var x=u.data_source.sub_type,y='';if(x)switch(x){case m.PAGE_FANS:y='Page: ';break;case m.CUSTOM_AUDIENCE_USERS:case m.WEB_PIXEL_HITS_CUSTOM_AUDIENCE_USERS:case m.MOBILE_APP_CUSTOM_AUDIENCE_USERS:case m.REV_SHARE_CUSTOM_AUDIENCE_USERS:case m.COMBINATION_CUSTOM_AUDIENCE_USERS:case m.DYNAMIC_RULE:case m.VIDEO_EVENT_USERS:y='Custom Audience: ';break;case m.CONVERSION_PIXEL_HITS:y='Pixel: ';break;default:y='';break;}var z=u.lookalike_spec&&u.lookalike_spec.origin;if(z&&z.length){var aa=y+z.map(function(ba){return ba.name;}).join(', ');return k._("{name}",[k.param("name",aa)]);}return '';case l.THIRD_PARTY_IMPORTED:w=JSON.parse(u.data_source.creation_params);return (w&&w.list_name)||'';default:return '';}},textByDataSource:function(u){var v=t.textBySubType(u.sub_type);if(!v)v=t.textByType(u.type);return v;},textForTypeInUI:function(u){if(u.type===l.FILE_IMPORTED){return k._("Customer List");}else if(u===l.UNKNOWN||u.type===l.EVENT_BASED||u.type===l.THIRD_PARTY_IMPORTED){return t.textBySubType(u.sub_type);}else return t.textByType(u.type);}};e.exports=t;},null);
__d("AdvertiserActivityLogStore",["Arbiter","CurrentLocale","ImmutableObject","adsDaoGraphFetch"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=b("adsDaoGraphFetch").fetch,k=Object.assign(new g(),{getLogs:function(l,m,n,o,p,q){n=n||{};n.accountId=l;n.locale=h.get();n.since=Math.floor(m.start/1000);n.until=Math.floor(m.end/1000);for(var r in n)if(n[r]===null)delete n[r];if(q)n.errorHandler=q;j.logsForAccount.one(this._processLogFromAPI.bind(null,p,o),n);},_processLogFromAPI:function(l,m,n){var o=n.after,p=n.data,q=p.map(function(s){return new i({actorID:s.actor_id,actorName:s.actor_name?s.actor_name:s.actor_id,appID:s.application_id,appName:s.application_name?s.application_name:s.application_id,actionType:s.action_type,objectID:s.object_id,objectName:s.object_name?s.object_name:s.object_id,objectType:s.object_type,eventTime:new Date(s.event_time*1000),eventType:s.event_type,translatedEventType:s.translated_event_type,extraData:JSON.parse(s.extra_data),dateTimeInTimezone:s.date_time_in_timezone});}),r=m?m.concat(q):q;l(r,o);}});e.exports=k;},null);
__d("AdsAudienceDetailActions",["AdsAMActionTypes","AdsAudienceDataLoader","AdsAudienceDataSourceUtils","AdvertiserActivityLogStore","AdsDispatcher","BusinessURI.brands","d3/time/day","XAdsCreatorController","dotAccess","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q="adaudience",r="savedaudience",s={initializeAudienceDetails:function(t,u){h.fetchAudiencMetadata(u).then(function(x){if(x.metadata.type===q){this._initializeAudienceDetailsSavedTargetSpec(u);}else if(x.metadata.type===r){this._initializeAudienceDetailsSavedAudience(u);}else this._initializeAudienceDetailsCustomAudience(t,u);}.bind(this));var v=Date.now(),w=m.offset(v,-30).getTime();this._loadingAudienceActivities();j.getLogs(t,{start:w,end:v},{oid:u,accountId:t},null,this._initializeAudienceActivities,this._initializeAudienceActivitiesError);},_initializeAudienceDetailsCustomAudience:function(t,u){h.fetchAudience(u).then(function(v){k.handleUpdateFromInitialServer({audience:v,type:g.AUDIENCE_DETAILS_INIT_AUDIENCE});if(v.lookalike_audience_ids){this._loadAudienceLookalikeNames();this._fetchLookalikeNames(v.lookalike_audience_ids);}var w=o(v,'data_source.sub_type');if(w===i.SUBTYPES.MOBILE_APP_EVENTS||w===i.SUBTYPES.MOBILE_APP_COMBINATION_EVENTS){this._loadAudienceApp();var x=this._getAppIDFromAudience(v);this._fetchAppInformation(x);}var y=o(v,'capabilities.data.0.capabilities');if(!p(y)&&t===v.account_id){this._loadAudienceSharingInfo();this._fetchAudienceSharedWith(Object.keys(y));}else if(t!==v.account_id){this._loadAudienceSharingInfo();this._fetchAudienceSharedBy(v.account_id);}}.bind(this))["catch"](function(v){return this._errorGettingAudience(v);}.bind(this));},_fetchLookalikeNames:function(t){h.fetchLookalikeNames(t).then(function(u){k.handleUpdateFromServerResponse({lookalikeNames:u,type:g.AUDIENCE_DETAILS_GET_AUDIENCE_LOOKALIKE_NAMES});})["catch"](function(u){return this._errorGettingAudience(u);}.bind(this));},_fetchAppInformation:function(t){h.fetchAppName(t).then(function(u){k.handleUpdateFromServerResponse({appName:u.name,type:g.AUDIENCE_DETAILS_GET_AUDIENCE_APP});})["catch"](function(u){return this._errorGettingAudience(u);}.bind(this));},_fetchAudienceSharedWith:function(t){h.fetchAdAccountNames(t).then(function(u){k.handleUpdateFromServerResponse({accounts:u,type:g.AUDIENCE_DETAILS_GET_AUDIENCE_SHARED_WTIH_ACCOUNTS});})["catch"](function(u){return this._errorGettingAudience(u);}.bind(this));},_fetchAudienceSharedBy:function(t){h.fetchAdAccountNames([t]).then(function(u){k.handleUpdateFromServerResponse({actionType:g.AUDIENCE_DETAILS_GET_AUDIENCE_SHARED_BY_ACCOUNT,account:u['act_'+t]});})["catch"](function(u){return this._errorGettingAudience(u);}.bind(this));},_getAppIDFromAudience:function(t){var u='';if(t.included_custom_audiences){u=o(t,'included_custom_audiences.0.rule');}else u=t.rule;var v=JSON.parse(u.replace(/'/g,'"'));return v._application;},fetchNewlyCreatedLookalikeName:function(t){this._loadAudienceLookalikeNames();h.fetchLookalikeNames([t]).then(function(u){k.handleUpdateFromServerResponse({actionType:g.AUDIENCE_DETAILS_APPEND_LOOKALIKE_NAME,lookalikeName:u[t]});})["catch"](function(u){return this._errorGettingAudience(u);}.bind(this));},_initializeAudienceDetailsSavedTargetSpec:function(t){h.fetchSavedTargetSpec(t).then(function(u){u.isSavedTargetSpec=true;k.handleUpdateFromInitialServer({audience:u,type:g.AUDIENCE_DETAILS_INIT_AUDIENCE});})["catch"](function(u){return this._errorGettingAudience(u);}.bind(this));},_initializeAudienceDetailsSavedAudience:function(t){h.fetchSavedAudience(t).then(function(u){u.isSavedAudience=true;u.isSavedTargetSpec=true;k.handleUpdateFromInitialServer({audience:u,type:g.AUDIENCE_DETAILS_INIT_AUDIENCE});})["catch"](function(u){return this._errorGettingAudience(u);}.bind(this));},_loadAudienceLookalikeNames:function(){k.handleUpdateFromViewAction({type:g.AUDIENCE_DETAILS_LOAD_AUDIENCE_LOOKALIKE_NAMES});},_loadAudienceApp:function(){k.handleUpdateFromViewAction({type:g.AUDIENCE_DETAILS_LOAD_AUDIENCE_APP});},_loadAudienceSharingInfo:function(){k.handleUpdateFromViewAction({type:g.AUDIENCE_DETAILS_LOAD_AUDIENCE_SHARING_INFO});},_initializeAudienceActivities:function(t,u){k.handleUpdateFromServerResponse({activities:t,type:g.AUDIENCE_DETAILS_GET_AUDIENCE_ACTIVITIES});},_loadingAudienceActivities:function(){k.handleUpdateFromViewAction({type:g.AUDIENCE_DETAILS_LOAD_AUDIENCE_ACTIVITIES});},_initializeAudienceActivitiesError:function(){k.handleUpdateFromServerResponse({type:g.AUDIENCE_DETAILS_GET_AUDIENCE_ACTIVITIES_ERROR});},updateAudience:function(t,u){h.getPromiseForAudienceUpdate(t,u).then(function(v){h.fetchAudience(t).then(function(w){k.handleUpdateFromServerResponse({audience:w,type:g.AUDIENCE_DETAILS_UPDATE_AUDIENCE});})["catch"](function(w){return this._errorGettingAudience(w);}.bind(this));}.bind(this))["catch"](function(v){return this._errorUpdatingAudience(v);}.bind(this));},updateTargetSpec:function(t,u){h.getPromiseForSavedTargetSpecUpdate(t,u).then(function(v){h.fetchSavedTargetSpec(t).then(function(w){w.isSavedTargetSpec=true;k.handleUpdateFromServerResponse({audience:w,type:g.AUDIENCE_DETAILS_UPDATE_AUDIENCE});})["catch"](function(w){return this._errorGettingAudience(w);}.bind(this));}.bind(this))["catch"](function(v){return this._errorUpdatingAudience(v);}.bind(this));},deleteAudience:function(t){this._deletingAudience();h.getPromiseToDeleteAudience(t).done(function(u){k.handleUpdateFromServerResponse({type:g.AUDIENCE_DETAILS_DELETE_AUDIENCE_DONE});},function(u){k.handleUpdateFromServerResponse({type:g.AUDIENCE_DETAILS_DELETE_AUDIENCE_ERROR});});},_deletingAudience:function(){k.handleUpdateFromServerResponse({type:g.AUDIENCE_DETAILS_DELETE_AUDIENCE});},changeCapabilities:function(t,u,v){h.getPromiseToRemoveCapabilities(t,v).then(function(w){h.getPromiseToUpdateCapabilities(t,u).then(function(x){if(!p(x)){this._loadAudienceSharingInfo();this._fetchAudienceSharedWith(Object.keys(x));}}.bind(this))["catch"](function(x){return this._errorUpdatingAudience(x);}.bind(this));}.bind(this))["catch"](function(w){return this._errorUpdatingAudience(w);}.bind(this));},_errorGettingAudience:function(t){k.handleUpdateFromServerResponse({error:t,type:g.AUDIENCE_DETAILS_GET_AUDIENCE_ERROR});},_errorUpdatingAudience:function(t){k.handleUpdateFromServerResponse({error:t,type:g.AUDIENCE_DETAILS_UPDATE_AUDIENCE_ERROR});},createAdFromCustomAudience:function(t,u,v){var w={custom_audiences:[{id:t,name:u}]},x=l(n.getURIBuilder().setInt('act',v).setString('targeting_spec',JSON.stringify(w)).getURI().toString());window.open(x,'_blank');},createAdFromSavedTargetGroup:function(t,u){var v=l(n.getURIBuilder().setInt('act',u).setString('targeting_spec',JSON.stringify(t)).getURI().toString());window.open(v,'_blank');}};e.exports=s;},null);
__d("AudienceManagerFBCustomAudienceTerm.react",["BusinessURI.brands","Link.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=i.createClass({displayName:"AudienceManagerFBCustomAudienceTerm",propTypes:{accountID:l.string.isRequired,termsAlreadyAccepted:l.bool.isRequired,termsBoxChecked:l.bool.isRequired,onTermsCheckboxChanged:l.func.isRequired},getDefaultProps:function(){return {termsAlreadyAccepted:false};},render:function(){if(this.props.termsAlreadyAccepted)return null;return (i.createElement("input",{type:"checkbox",checked:this.props.termsBoxChecked,onChange:this.props.onTermsCheckboxChanged},j._("I agree to the {link}",[j.param("link",i.createElement(h,{target:"_blank",href:g('/ads/manage/customaudiences/tos.php?act='+this.props.accountID)},"Facebook Custom Audiences Terms"))])));}});e.exports=m;},null);
__d("AdsAppTokenizerToken.react",["React","XUITokenizerToken.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"AdsAppTokenizerToken",propTypes:h.propTypes,render:function(){var l=(("_13w9")+(this.props.entry.getAuxiliaryData()&&this.props.entry.getAuxiliaryData().invalid?' '+"_13wa":''));return (g.createElement(h,g.__spread({},this.props,{className:j(this.props.className,l)})));}});e.exports=k;},null);
__d("DummySearchSource",["AbstractSearchSource"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.searchImpl=function(k,l,m){"use strict";l([],k);};e.exports=j;},null);
__d("AudienceManagerAppIDInput.react",["AudienceDaoManager","AdsAppTokenizerToken.react","AdsConnectionObjTypes","DummySearchSource","Link.react","React","SearchableEntry","XUIError.react","XUIGrayText.react","XUITokenizer.react","XUITypeaheadTextOnlyView.react","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=l,v=u.PropTypes,w=10,x=l.createClass({displayName:"AudienceManagerAppIDInput",propTypes:{accountID:v.string.isRequired,onAppEntriesUpdated:v.func.isRequired},componentWillMount:function(){var y=g.getPrimedDao(this.props.accountID),z=function(aa){aa.data=aa.data.filter(function(da){return da.type===i.APPLICATION;});if(aa.data.length>1)return;var ba=this.state.appIdEntries,ca=function(da){if(da.is_first_party_app===false){var ea=new m({uniqueID:da.id,title:da.id,auxiliaryData:{invalid:false}});ba.push(ea);}};y.fetch.appInfo.one(function(da){ca(da);this.setState({appIdEntries:ba});this.props.onAppEntriesUpdated(ba);}.bind(this),{appId:aa.data[0].id,fields:['is_first_party_app']});}.bind(this);y.fetch.connectionObjectsForAccount.one(z,{});},getInitialState:function(){return {appIdEntries:[],queryString:'',searchSource:new j()};},render:function(){var y={ViewRenderer:q,TokenRenderer:h,useLayer:true};return (l.createElement("div",null,l.createElement(o,{weight:"bold",display:"block",shade:"medium",className:"_3-95"},t._("Add a Facebook App ID")),l.createElement(n,{xuiError:this._getAppIDErrorMessage()},l.createElement(p,{entries:this.state.appIdEntries,limit:w,onAddEntryAttempt:this._onAddEntryAttempt,onEnterWithoutSelection:this._onEnterWithoutSelection,onQueryStringChange:this._onQueryStringChange,onRemoveEntryAttempt:this._onRemoveEntryAttempt,placeholder:this._getTokenizerPlaceholder(),presenter:y,queryString:this.state.queryString,searchSource:this.state.searchSource,tokenizeQueryStringOnBlur:this._tokenizeQueryString})),l.createElement("div",{className:"_3-8x"},t._("You can only upload IDs for people that download or use your Facebook app."),' ',t._("You can find the ID for your Facebook apps in {=App Dashboard}",[t.param("=App Dashboard",l.createElement(k,{target:"_blank",href:new r('https://developers.facebook.com/apps')},t._("App Dashboard")))]))));},_getAppIDErrorMessage:function(){if(this.state.appIdEntries.length===0||this._isAppIDTokensValid())return null;return (t._("One or more of the Facebook app IDs aren't connected to your account"));},_getTokenizerPlaceholder:function(){return (t._("Add Facebook App ID"));},_tokenizeQueryString:function(y){if(y)return new m({uniqueID:y,title:y});},_onEnterWithoutSelection:function(event){var y=event.target.value;if(y)this._onAddEntryAttempt(this._tokenizeQueryString(y));},_onQueryStringChange:function(event){this.setState({queryString:event.target.value});},_onAddEntryAttempt:function(y){var z=y.getUniqueID(),aa=this.state.appIdEntries,ba=aa.some(function(da){return da.getUniqueID()===z;});if(ba)return;var ca=g.getPrimedDao(this.props.accountID);ca.fetch.appInfo.one(function(da){if(da.is_first_party_app===false){y=new m({uniqueID:z,title:z,auxiliaryData:{invalid:false}});}else y=new m({uniqueID:z,title:z,auxiliaryData:{invalid:true}});aa.push(y);this.setState({appIdEntries:aa,queryString:''});this.props.onAppEntriesUpdated(aa);}.bind(this),{appId:z,fields:['is_first_party_app'],handleError:function(da,ea,fa){y=new m({uniqueID:z,title:z,auxiliaryData:{invalid:true}});aa.push(y);this.setState({appIdEntries:aa,queryString:''});this.props.onAppEntriesUpdated(aa);}.bind(this)});},_onRemoveEntryAttempt:function(y){var z=this.state.appIdEntries,aa=z.indexOf(y);if(aa>=0)z.splice(aa,1);this.setState({appIdEntries:z});this.props.onAppEntriesUpdated(z);},_isAppIDTokensValid:function(){var y=this.state.appIdEntries,z=y.some(function(aa){return aa.getAuxiliaryData().invalid;});return y.length>0&&!z;}});e.exports=x;},null);
__d("AudienceManagerDownloadReportLink.react",["AdInterfacesUiLogger","AudienceManagerLoggingEvents","React","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=(a.Blob||a.BlobBuilder||a.WebKitBlobBuilder)&&(a.URL||a.webkitURL);function o(s){var t=s.join("\n"),u=a.Blob;if(u)return new u([t],{type:'text/plain'});var v=a.BlobBuilder||a.WebKitBlobBuilder;if(v){var w=new v();w.append(t);return w.getBlob('text/plain');}return null;}function p(){g.log(h.AM_CA_CREATE_VIEW_ERROR_REPORT);}function q(s){var t=o(s);if(!t)return;var u=a.URL||a.webkitURL;k(u.createObjectURL);var v=u.createObjectURL(t);return (i.createElement("a",{download:'export.csv',href:v,onClick:p},j._("View error report")));}var r=i.createClass({displayName:"AudienceManagerDownloadReportLink",propTypes:{errorTokenLists:m.array},render:function(){if(this.props.errorTokenLists&&this.props.errorTokenLists.length>0&&n)return q(this.props.errorTokenLists);return null;}});e.exports=r;},null);
__d("AudienceManagerCompleteUploadMessage.react",["AudienceManagerDownloadReportLink.react","ImageBlock.react","Image.react","InlineBlock.react","React","XUIGrayText.react","cx","ix","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=k,q=p.PropTypes,r=n('/images/ads/audience_manager/ca_done.png'),s=44,t=k.createClass({displayName:"AudienceManagerCompleteUploadMessage",propTypes:{message:q.string.isRequired,numberOfValidRecords:q.number,numberOfTotalRecords:q.number,errorTokenLists:q.array},render:function(){return (k.createElement("div",{className:"_3-97"},k.createElement(h,{spacing:"large"},k.createElement(i,{src:r}),k.createElement(j,{alignv:"middle",height:s},k.createElement(l,{weight:"bold",size:"medium",display:"block"},this.props.message),k.createElement("div",null,this._renderRecordMessage(),' ',k.createElement(g,{errorTokenLists:this.props.errorTokenLists}))))));},_renderRecordMessage:function(){if(this.props.numberOfValidRecords&&this.props.numberOfTotalRecords)return (k.createElement(l,{size:"small"},o._({"*":"{number of successfully-uploaded records} records uploaded."},[o.param("number of successfully-uploaded records",this.props.numberOfValidRecords,[0])])));return null;}});e.exports=t;},null);
__d("AudienceManagerCompleteUploadNotice.react",["React","XUINotice.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=g.createClass({displayName:"AudienceManagerCompleteUploadNotice",render:function(){return (g.createElement("div",{className:"_3-8z _3-97"},g.createElement(h,null,g.createElement(i,{size:"small",display:"block"},k._("It will take up to 30 minutes for your audience to be ready for use. We'll notify you when your audience is ready. You can also check status in Audience Manager.")))));}});e.exports=l;},null);
__d("AudienceManagerDataTypeSelector.react",["AudienceManagerUIConstants","React","XUISelector.react","XUIGrayText.react","cx","fbt","getObjectValues","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=i.Option,p=h,q=p.PropTypes,r=g.CUSTOM_AUDIENCE_DATA_TYPE_LABEL,s=h.createClass({displayName:"AudienceManagerDataTypeSelector",propTypes:{defaultValue:q.oneOf(m(n)),onTypeChange:q.func.isRequired},getDefaultProps:function(){return {defaultValue:n.UPLOAD_TYPE_EMAIL};},render:function(){var t=[h.createElement(o,{value:n.UPLOAD_TYPE_EMAIL,key:n.UPLOAD_TYPE_EMAIL},r[n.UPLOAD_TYPE_EMAIL]),h.createElement(o,{value:n.UPLOAD_TYPE_UID,key:n.UPLOAD_TYPE_UID},r[n.UPLOAD_TYPE_UID]),h.createElement(o,{value:n.UPLOAD_TYPE_PHONE,key:n.UPLOAD_TYPE_PHONE},r[n.UPLOAD_TYPE_PHONE]),h.createElement(o,{value:n.UPLOAD_TYPE_MOBILE_ADVERTISER_ID,key:n.UPLOAD_TYPE_MOBILE_ADVERTISER_ID},r[n.UPLOAD_TYPE_MOBILE_ADVERTISER_ID])];return (h.createElement("div",null,h.createElement(j,{weight:"bold",display:"block",shade:"medium",className:"_2pin"},l._("Data Type")),h.createElement(i,{defaultValue:this.props.defaultValue,onChange:this.props.onTypeChange},t)));}});e.exports=s;},null);
__d("AudienceManagerErrorContextualDialog.react",["HasLayerContextMixin","React","ReactLayer","ContextualDialog","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=i.createClass({displayName:"AudienceManagerErrorContextualDialogLayer",propTypes:{shown:m.bool,context:m.object.isRequired,offsetY:m.number},getDefaultProps:function(){return {shown:true};},createLayer:function(p){var q=new j({theme:{wrapperClassName:"_1tpb",arrowDimensions:{offset:12,length:16},position:'right',offsetY:this.props.offsetY}},p);q.shouldSetARIAProperties(false);this._setProps(this.props,q);return q;},receiveProps:function(p){this._setProps(p,this.layer);},_setProps:function(p,q){q.setContext(p.context);q.conditionShow(p.shown);}}),o=h.createClass({displayName:"AudienceManagerErrorContextualDialog",mixins:[g],propTypes:{contextRef:m.func.isRequired,shown:m.bool,offsetY:m.number},render:function(){var p=this.props.children,q=(h.createElement(n,{shown:this.props.shown,context:this.getContextNode(),offsetY:this.props.offsetY},h.createElement("div",{className:"_1tp9"},h.createElement("div",{className:"_1tpa"}),h.createElement("div",{className:"_1tp8"},h.createElement("div",null,p)))));return q;}});e.exports=o;},null);
__d("AudienceManagerUploadDialogContent.react",["AdsXUIProgressBar.react","React","XUIDialogBody.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"AudienceManagerUploadDialogContent",propTypes:{progress:n.number.isRequired},render:function(){return (h.createElement(i,null,h.createElement(g,{className:"_5go",animated:true,value:this.props.progress}),h.createElement("div",{className:"_5gp"},h.createElement(j,{weight:"bold",size:"small"},l._("UPLOADING")))));}});e.exports=o;},null);
__d("AudienceManagerUploadErrorDialogContent.react",["AudienceManagerDownloadReportLink.react","Image.react","React","XUIDialogBody.react","XUIButton.react","cx","ix","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=m('/images/ads/audience_manager/error.png'),q=i,r=q.PropTypes,s=i.createClass({displayName:"AudienceManagerUploadErrorDialogContent",propTypes:{numLines:r.number,numErrors:r.number.isRequired,errorTokenLists:r.array,onUploadAnotherFileClick:r.func.isRequired,onContinueCreateAudience:r.func.isRequired},getDefaultProps:function(){return {numLines:1};},render:function(){return (i.createElement(j,null,i.createElement("div",{className:"_50_z _5wby"},this._renderErrorMessage(),this._renderErrorSampleMessage(),i.createElement(g,{errorTokenLists:this.props.errorTokenLists}),i.createElement("div",null,n._("You can choose a new file or continue uploading file.")),this._renderButtons())));},_renderErrorMessage:function(){var t;if(this.props.numLines<o.CLUSTER_API_MAX_SIZE){t=n._("We found {numErrors} errors in your file",[n.param("numErrors",this.props.numErrors)]);}else t=n._("We found {numErrors} errors in the first 10,000 records of your file",[n.param("numErrors",this.props.numErrors)]);return (i.createElement("div",null,i.createElement(h,{src:p,className:"_2pii"}),i.createElement("span",{className:"_5wb_ _1ols"},t)));},_renderErrorSampleMessage:function(){var t=(this.props.errorTokenLists||[]).slice(0,2),u=t.join("; ");return (i.createElement("div",null,n._("E.g. {errorTokens}",[n.param("errorTokens",u)])));},_renderButtons:function(){return (i.createElement("div",{className:"_3-8x"},i.createElement(k,{onClick:this.props.onUploadAnotherFileClick,label:n._("Choose a New File")}),i.createElement("span",{className:"_2pis _2pii"},n._("OR")),i.createElement(k,{onClick:this.props.onContinueCreateAudience,label:n._("Continue Uploading File")})));}});e.exports=s;},null);
__d("AudienceManagerUploadFileErrorDialogContent.react",["Image.react","React","XUIDialogBody.react","XUIButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=h,n=m.PropTypes,o='/images/ads/audience_manager/error.png',p=h.createClass({displayName:"AudienceManagerUploadFileErrorDialogContent",propTypes:{errorDetails:n.string.isRequired,onUploadAnotherFileClick:n.func.isRequired},render:function(){return (h.createElement(i,null,h.createElement("div",{className:"_50_z _5wby"},this._renderErrorMessage(),this._renderErrorDetailsMessage(),this._renderButtons())));},_renderErrorMessage:function(){var q=l._("We are not able to upload your file.");return (h.createElement("div",null,h.createElement(g,{src:o,className:"_2pii"}),h.createElement("span",{className:"_5wb_ _1ols"},q)));},_renderErrorDetailsMessage:function(){return (h.createElement("div",null,l._("Error: {error details}",[l.param("error details",this.props.errorDetails)])));},_renderButtons:function(){return (h.createElement("div",{className:"_3-8x"},h.createElement(j,{onClick:this.props.onUploadAnotherFileClick,href:{url:'#'},label:l._("Choose a New File")})));}});e.exports=p;},null);
__d("AudienceManagerViewFormatingExampleLink.react",["AdInterfacesUiLogger","AudienceManagerLoggingEvents","AudienceManagerUIConstants","AudienceManagerURLConstants","LeftRight.react","Link.react","React","ReactLayeredComponentMixin","XUISelector.react","XUICloseButton.react","XUIContextualDialog.react","XUIContextualDialogTitle.react","XUIContextualDialogBody.react","XUIGrayText.react","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x=o.Option,y=m,z=y.PropTypes,aa=i.CUSTOM_AUDIENCE_DATA_TYPE_LABEL,ba=m.createClass({displayName:"AudienceManagerViewFormatingExampleLink",mixins:[n],propTypes:{exampleContents:z.array},getDefaultProps:function(){return {exampleContents:[{name:w.UPLOAD_TYPE_EMAIL,label:aa[w.UPLOAD_TYPE_EMAIL],content:m.createElement("p",null,v._("Ex."),m.createElement("br",null),"name1@example.com",m.createElement("br",null),"name2@example.com",m.createElement("br",null),"name3@example.com",m.createElement("br",null),"name1@example.com,name2@example.com",m.createElement("br",null),"name1@example.com;name2@example.com",m.createElement("br",null))},{name:w.UPLOAD_TYPE_UID,label:aa[w.UPLOAD_TYPE_UID],content:m.createElement("p",null,m.createElement("ul",{className:"_4wii"},m.createElement("li",null,v._("Numeric characters only"))),v._("Ex."),m.createElement("br",null),"1234567890",m.createElement("br",null),"1443637309",m.createElement("br",null))},{name:w.UPLOAD_TYPE_PHONE,label:aa[w.UPLOAD_TYPE_PHONE],content:m.createElement("p",null,m.createElement("ul",{className:"_4wii"},m.createElement("li",null,v._("Country code + Area Code + Number")),m.createElement("li",null,v._("No leading zeros from country code")),m.createElement("li",null,v._("Numeric characters only"))),v._("Ex."),m.createElement("br",null),"16505551234",m.createElement("br",null),"16505551235",m.createElement("br",null))},{name:w.UPLOAD_TYPE_MOBILE_ADVERTISER_ID,label:aa[w.UPLOAD_TYPE_MOBILE_ADVERTISER_ID],content:m.createElement("p",null,v._("We support:"),m.createElement("ul",{className:"_4wii"},m.createElement("li",null,v._("Android's advertising ID,")),m.createElement("li",null,v._("Apple's Advertising Identifier(IDFA),and")),m.createElement("li",null,v._("Facebook App User IDs"))),m.createElement(l,{href:j.MOBILE_ADVERTISING_IDS_DOC,target:"_blank"},v._("Learn more")))}]};},getInitialState:function(){return {dialogShown:false,currentContent:this.props.exampleContents[0]};},onLinkClick:function(){this.setState({dialogShown:!this.state.dialogShown});g.log(h.AM_CA_CREATE_VIEW_EXAMPLE_CLICK);},onSelectorClick:function(ca){this.setState({currentContent:this._findContentByName(ca.value)});},_findContentByName:function(ca){for(var da=0;da<this.props.exampleContents.length;da++)if(this.props.exampleContents[da].name===ca)return this.props.exampleContents[da];},_getSelectorOptions:function(){var ca=this.props.exampleContents.map(function(da){return (m.createElement(x,{value:da.name,key:da.name},da.label));});return ca;},renderLayers:function(){return {contextualDialog:m.createElement(q,{contextRef:function(){return this.refs.link;}.bind(this),shown:this.state.dialogShown,position:"below",alignment:"right",autoFocus:true,width:q.WIDTH.NORMAL},m.createElement(r,null,m.createElement(k,null,m.createElement(o,{defaultValue:this.state.currentContent.name,onChange:this.onSelectorClick},this._getSelectorOptions()),m.createElement("div",null,m.createElement(p,{use:"confirm",label:v._("Close"),onClick:this.onLinkClick})))),m.createElement(s,null,m.createElement(t,{shade:"light",size:"small",display:"block"},this.state.currentContent.content)))};},render:function(){return (m.createElement(l,{ref:"link",onClick:this.onLinkClick},v._("View formatting examples.")));}});e.exports=ba;},null);
__d("AudienceNameAndDescriptionInput.react",["AdsClearableTextInput.react","FBReplaceLink.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"AudienceNameAndDescriptionInput",propTypes:{audienceName:n.string.isRequired,description:n.string,onAudienceNameChange:n.func.isRequired,onDescriptionChange:n.func.isRequired},render:function(){return (i.createElement("div",null,i.createElement("div",{className:"_3-8z _3-97"},i.createElement(j,{weight:"bold",display:"block",shade:"medium",className:"_3-95"},l._("Audience Name")),i.createElement(g,{placeholder:l._("Name your audience"),height:"tall",defaultValue:this.props.audienceName,onChange:this.props.onAudienceNameChange})),this._renderDescription()));},_renderDescription:function(){if(this.props.description){return this._renderClearableDescription();}else return (i.createElement(h,{label:l._("Add a description")},this._renderClearableDescription()));},_renderClearableDescription:function(){return (i.createElement("div",{className:"_3-8z _3-97"},i.createElement(j,{weight:"bold",shade:"medium",display:"block",className:"_3-95"},l._("Description")),i.createElement(g,{placeholder:l._("Add a description"),height:"tall",defaultValue:this.props.description||'',onChange:this.props.onDescriptionChange})));}});e.exports=o;},null);
__d("CreateCADialogTypes",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({MACA:null,CUSTOMER_LIST:null,LOOKALIKE:null});e.exports=h;},null);
__d("CreateCAStages",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({CREATE_AUDIENCE_INIT:null,CUSTOMER_LIST:null,COPY_PASTE_INIT:null,COPY_PASTE_UPLOAD:null,COPY_PASTE_UPLOAD_COMPLETE:null,FILE_IMPORT_INIT:null,FILE_IMPORT_CHECK_FILE:null,FILE_IMPORT_UPLOAD:null,FILE_IMPORT_UPLOAD_CONVERT_ERROR:null,FILE_IMPORT_NO_VALID_ENTRY:null,FILE_IMPORT_UPLOAD_COMPLETE:null,FILE_IMPORT_UPLOAD_ERROR:null,MAIL_CHIMP_INIT:null,MAIL_CHIMP_AUTHENTICATE:null,MAIL_CHIMP_FETCH_COMPLETE:null,MAIL_CHIMP_UPLOAD:null,MAIL_CHIMP_UPLOAD_COMPLETE:null,CREATION_COMPLETE_NEXT_STEP:null,EDIT_AUDIENCE_INIT:null,OPT_OUT_USER_FILE_IMPORT_INIT:null,FATAL_ERROR:null});e.exports=h;},null);
__d("AdsAMAudienceUtils",["AdsAudienceDataSourceUtils","AudienceManagerUIConstants","BusinessURI.brands"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j='/ads/audience/details',k={isSavedTargetSpec:function(l){return !!l.isSavedTargetSpec;},isSavedAudience:function(l){return !!l.isSavedAudience;},getAudienceDetailsURI:function(l,m){var n=new i(j);n.addQueryData({audience_id:l,act:m});return n;},getAudienceType:function(l){if(k.isSavedTargetSpec(l))if(k.isSavedAudience(l)){return h.SAVED_AUDIENCE_DISPLAY_NAME;}else return h.STS_DISPLAY_NAME;var m=l.data_source;switch(m.type){case g.TYPES.SEED_BASED:return h.LAL_DISPLAY_NAME;case g.TYPES.CLAIM_BASED:return h.PRODUCT_AUDIENCE_DISPLAY_NAME;default:return h.CA_DISPLAY_NAME;}}};e.exports=k;},null);
__d("AudienceManagerDeleteDialog.react",["AdsAMViewActions","AdsAMAudienceUtils","AudienceManagerUIConstants","React","XUISortableDataTable.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUISpinner.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=j,v=u.PropTypes,w=j.createClass({displayName:"AudienceManagerDeleteDialog",propTypes:{audience:v.object.isRequired,dao:v.object.isRequired,onAudienceDeleted:v.func.isRequired},getInitialState:function(){return {adGroups:null,lookalikes:null};},_loadLookalikes:function(x){this.props.dao.fetch.anyIDs.one(function(y){this.setState({lookalikes:y});this._loadAdGroups(Object.keys(y).concat(this.props.audience.id));}.bind(this),{ids:x});},_loadAdGroups:function(x){var y={},z=x.map(function(aa){return {parameters:{audienceId:aa},callback:function(ba){ba.forEach(function(ca){var da=ca.id;if(y[da]){y[da].audiences.push(aa);}else{ca.audiences=[aa];y[da]=ca;}});}};});this.props.dao.fetch.adGroupsForCustomaudiences.multi(function(){return this.setState({adGroups:y});}.bind(this),{requests:z});},componentWillMount:function(){if(h.isSavedTargetSpec(this.props.audience)){this.setState({lookalikes:{},adGroups:{}});}else{var x=this.props.audience.id,y=this.props.audience.lookalike_audience_ids;if(y&&y.length>0){this._loadLookalikes(y);}else{this.setState({lookalikes:{}});this._loadAdGroups([x]);}}},render:function(){var x=this.state.lookalikes&&Object.keys(this.state.lookalikes).length>0;return (j.createElement(l,{shown:true,width:i.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},j.createElement(q,null,j.createElement("span",null,t._("Delete audience {audience name}?",[t.param("audience name",this.props.audience.name)]))),j.createElement(m,null,j.createElement("div",{className:"_5rkr"},this._renderDialogBody())),j.createElement(o,null,j.createElement(n,{use:"default",action:"close",onClick:this._onCancelClick}),j.createElement(p,{use:"confirm",action:"confirm",onClick:this._onDeleteClick,enabled:this._dataLoaded(),label:x?(t._("Delete Audiences")):(t._("Delete Audience"))}))));},_dataLoaded:function(){var x=this.state;return x.adGroups!==null&&x.lookalikes!==null;},_renderDialogBody:function(){if(!this._dataLoaded()){return (j.createElement("div",{className:"_5saq"},j.createElement("p",null,t._("Please wait while we find the ads which use this audience...")),j.createElement(r,{size:"large"})));}else return this._renderConfirmMessage();},_renderConfirmMessage:function(){if(h.isSavedTargetSpec(this.props.audience))return this._getMessageForSavedTargetGroup();var x=this.state.adGroups,y=this.state.lookalikes,z=this.props.audience.name;if(Object.keys(x).length===0)if(Object.keys(y).length===0){return this._getMessageForAudienceWithNoLookalikeNoAd();}else return this._getMessageForAudienceWithLookalikesButNoAd();var aa=[{id:'adGroup',label:t._("Ad")},{id:'audiences',label:t._("Audiences")}],ba=Object.keys(x).map(function(da){var ea=x[da];return {adGroup:ea.name,audiences:ea.audiences.map(function(fa){if(fa===this.props.audience.id){return z;}else return y[fa].name;}.bind(this)).map(function(fa){return j.createElement("span",null,fa,j.createElement("br",null));})};}.bind(this)),ca=(j.createElement("div",{className:"_256f"},j.createElement(k,{rows:ba,columns:aa,columnToSortBy:"adGroup",outerBorder:true})));if(Object.keys(y).length>0){return (j.createElement("div",null,this._getMessageForAudienceWithBothAdsAndLookalikes(),ca));}else return (j.createElement("div",null,this._getMessageForAudienceWithAdsButNoLookalike(),ca));},_getMessageForSavedTargetGroup:function(){var x=this.props.audience.name;return (j.createElement("div",null,t._("Deleting \"{name}\" will permanently remove it from your account. Are you sure you want to delete this saved target group?",[t.param("name",x)])));},_getMessageForAudienceWithNoLookalikeNoAd:function(){var x=this.props.audience.name;return (j.createElement("div",null,t._("Deleting \"{name}\" will permanently remove it from your account. You won't be able to restart any ads that used this audience in the past.",[t.param("name",x)])));},_getMessageForAudienceWithLookalikesButNoAd:function(){var x=this.props.audience.name;return (j.createElement("div",null,j.createElement("p",null,t._("\"{name}\" was used to create one or more lookalike audiences.",[t.param("name",x)])),j.createElement("p",null,t._("Deleting this audience will permanently remove it from your account along with the associated lookalike audiences. You won't be able restart any ads that have used these audiences in the past."))));},_getMessageForAudienceWithAdsButNoLookalike:function(){var x=this.props.audience.name;return (j.createElement("div",null,j.createElement("p",null,t._("\"{name}\" is currently being used in active ads.",[t.param("name",x)])),j.createElement("p",null,t._("Deleting this audience will permanently remove it from your account and automatically stop the following ads. You won't be able restart any ads that used this audience in the past."))));},_getMessageForAudienceWithBothAdsAndLookalikes:function(){var x=this.props.audience.name;return (j.createElement("div",null,j.createElement("p",null,t._("\"{name}\" was used to create one or more lookalike audiences. These audiences are also currently being used in active ads.",[t.param("name",x)])),j.createElement("p",null,t._("Deleting these audiences will permanently remove them from your account and automatically stop the following ads. You won't be able to restart any ads that have used these audiences in the past."))));},_onCancelClick:function(){g.closeDeleteAudienceDialog();},_onDeleteClick:function(){this.props.onAudienceDeleted(this.props.audience);g.closeDeleteAudienceDialog();},_onToggle:function(){g.closeDeleteAudienceDialog();}});e.exports=w;},null);
__d("AudienceManagerEditAudienceCompleteDialogContent.react",["AudienceManagerCompleteUploadMessage.react","AudienceManagerCompleteUploadNotice.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=i,p=o.PropTypes,q=i.createClass({displayName:"AudienceManagerEditAudienceCompleteDialogContent",propTypes:{numberOfValidRecords:p.number,numberOfTotalRecords:p.number,errorTokenLists:p.array,onCompleteClick:p.func.isRequired},render:function(){var r=n._("Thanks for editing a Custom Audience");return (i.createElement("div",null,i.createElement(j,null,i.createElement("div",{className:"_5rkr"},i.createElement(g,{message:r,numberOfValidRecords:this.props.numberOfValidRecords,numberOfTotalRecords:this.props.numberOfTotalRecords,errorTokenLists:this.props.errorTokenLists}),i.createElement("hr",null),i.createElement(h,null))),i.createElement(l,null,i.createElement(k,{onClick:this.props.onCompleteClick,label:n._("Done")}))));}});e.exports=q;},null);
__d("AdsAMCreateAudienceStore",["AdsAMActionTypes","AdsDispatcher","Arbiter","CreateCAStages","CreateCADialogTypes","CustomAudienceCreationErrors","ImmutableObject","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o,p,q,r,s,t,u,v,w,x,y,z;function aa(){o=0;q=k.CUSTOMER_LIST;p=j.CREATE_AUDIENCE_INIT;r={validRecord:0,invalidRecord:0,totalRecord:0};v=[];w={};x=0;y=0;s={};t=[];u={};z="";}function ba(da){switch(da.errorType){case l.FILE_IMPORT_CSV_CONVERT_ERROR:p=j.FILE_IMPORT_UPLOAD_CONVERT_ERROR;z=da.errorDetails;break;case l.FILE_IMPORT_NO_VALID_ENTRY:p=j.FILE_IMPORT_NO_VALID_ENTRY;z=n._("No valid entries were found. Please upload a different file.");break;case l.FILE_IMPORT_TOKEN_ERROR:case l.COPY_PASTE_TOKEN_ERROR:t.push(da.error);return;case l.FILE_IMPORT_ERROR_LIMIT_REACH:u=da.errorDetails;p=j.FILE_IMPORT_UPLOAD_ERROR;return;case l.FATAL_ERROR:z=da.error.message;p=j.FATAL_ERROR;return;}}aa();var ca=Object.assign(new i(),{getViewDialogType:function(){return q;},getViewStage:function(){return p;},getNumberOfRecords:function(){return new m(r);},getContactsLists:function(){return v;},getTotalPage:function(){return x;},getCurrentPage:function(){return y;},getProgress:function(){return o;},getSelectableContactsLists:function(){var da={};for(var ea in w)da[ea]=new m(w[ea]);return da;},getAudiences:function(){return s;},getErrorTokenLists:function(){var da=[];da=t.map(function(ea){return ea.token;});return da;},getErrorDetailsForLimitReach:function(){return new m(u);},getErrorMessage:function(){return z;},dispatchToken:h.register(function(da){var ea=da.action,fa=true;switch(ea.actionType){case g.CREATE_AUDIENCE_RESET:aa();break;case g.CREATE_AUDIENCE_SET_VIEW_STAGE:p=ea.viewStage;break;case g.CREATE_AUDIENCE_SET_VIEW_DIALOG_TYPE:q=ea.viewDialogType;break;case g.CREATE_AUDIENCE_SHOW_MACA_DIALOG:q=k.MACA;break;case g.FILE_IMPORT_CHECK_FILE:p=j.FILE_IMPORT_CHECK_FILE;break;case g.FILE_IMPORT_START_UPLOAD:p=j.FILE_IMPORT_UPLOAD;break;case g.FILE_IMPORT_UPLOAD_PROGRESS:case g.COPY_PASTE_UPLOAD_PROGRESS:case g.MAIL_CHIMP_UPLOAD_PROGRESS:o=ea.progress;break;case g.FILE_IMPORT_CREATE_AUDIENCE_COMPLETE:s[ea.audienceID]={id:ea.audienceID,name:ea.audienceName};break;case g.FILE_IMPORT_UPLOAD_COMPLETE:p=j.FILE_IMPORT_UPLOAD_COMPLETE;r=ea.numberOfRecords;break;case g.COPY_PASTE_START_UPLOAD:p=j.COPY_PASTE_UPLOAD;break;case g.COPY_PASTE_CREATE_AUDIENCE_COMPLETE:s[ea.audienceID]={id:ea.audienceID,name:ea.audienceName};break;case g.COPY_PASTE_UPLOAD_COMPLETE:p=j.COPY_PASTE_UPLOAD_COMPLETE;r=ea.numberOfRecords;break;case g.MAIL_CHIMP_FETCH_COMPLETE:p=j.MAIL_CHIMP_FETCH_COMPLETE;x=ea.totalPage;y=ea.currentPage;v=ea.contactsLists;v.forEach(function(ga){w[ga.list_id]=ga;});break;case g.MAIL_CHIMP_START_UPLOAD:p=j.MAIL_CHIMP_UPLOAD;break;case g.MAIL_CHIMP_UPLOAD_COMPLETE:p=j.MAIL_CHIMP_UPLOAD_COMPLETE;s=ea.audiences;break;case g.FILE_IMPORT_ERROR:case g.COPY_PASTE_ERROR:ba(ea);break;case g.UPDATE_NAME_DESCRIPTION_COMPLETE:Object.keys(ea.audiences).forEach(function(ga){s[ga]=ea.audiences[ga];});break;default:fa=false;break;}if(fa)ca.inform('change');})});e.exports=ca;},null);
__d("CustomAudienceUploadErrorBox.react",["React","cx","fbt","ix","Image.react","List.react"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g,n=m.PropTypes,o=g.createClass({displayName:"CustomAudienceUploadErrorBox",propTypes:{message:n.string.isRequired,type:n.string,numMissing:n.number,numInvalid:n.number,errorList:n.array},getDefaultProps:function(){return {message:null,type:'',numMissing:0,numInvalid:0,errorList:null};},_renderErrorList:function(){var p=this.props.errorList;return (g.createElement(l,{border:"none",spacing:"none"},p.map(function(q){return g.createElement("li",{key:q.line}," ",q.token," ");})));},_renderType:function(p){switch(p){case 'email':return i._("Email");case 'uid':return i._("Uid");case 'phone number':return i._("Phone Number");case 'hash':return i._("Hash");default:return '';}},render:function(){var p=this.props.message,q=this.props.type,r=this.props.numMissing,s=this.props.numInvalid,t=this.props.errorList,u=null;if(t){var v=i._({"*":"{Number of errors} {Type of token} Errors"},[i.param("Number of errors",r+s,[0]),i.param("Type of token",this._renderType(q))]),w=null,x=null;if(r>0&&s>0){w=g.createElement("div",null,i._("Missing: {Number of missing tokens}",[i.param("Number of missing tokens",g.createElement("span",{className:"_5od5"},r))]));x=g.createElement("div",null,i._("Incorrectly formatted: {Number of invalid tokens}",[i.param("Number of invalid tokens",g.createElement("span",{className:"_5od5"},s))]));}u=g.createElement("div",{className:"_5od3"},g.createElement("div",{className:"_5od4"},v),w,x,g.createElement("div",{className:"_5od6"},this._renderErrorList()));}return (g.createElement("div",{className:"_5od7"},g.createElement("span",{className:"_5od8"},g.createElement(k,{src:j('images/ads/createflow/creative/error-white.png')})),g.createElement("span",{className:"_5od9"},p,u)));}});e.exports=o;},null);
__d("FBDragDropBox.react",["DragDropTarget","FileInput.react","Image.react","InlineBlock.react","React","XUIButton.react","fbt","cx","glyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=k,q=p.PropTypes,r="/images/icons/groups/files/file-plain-32.png",s=k.createClass({displayName:"FBDragDropBox",propTypes:{onFilesSelection:q.func.isRequired,onFileChange:q.func.isRequired,onFileRemove:q.func.isRequired,selectedFile:q.object,hasError:q.bool,allowedFileTypes:q.array},getDefaultProps:function(){return {allowedFileTypes:['text/plain','text/csv']};},_handleFilesSelection:function(t){this.props.onFilesSelection(t);},_handleFileChange:function(t){this.props.onFileChange(t);},componentDidMount:function(){new g(k.findDOMNode(this)).setOnFilesDropCallback(this._handleFileChange).enable();},_renderDragAndDropBox:function(){var t;if(this.props.selectedFile&&this.props.selectedFile.name){var u=(this.props.selectedFile.name);t=(k.createElement("div",{className:"_82m"},k.createElement(i,{src:r,className:"_82n"}),u,k.createElement(i,{className:"_82o",onClick:this.props.onFileRemove,src:o('remove')})));}else t=(k.createElement("div",null,m._("Drag and drop your file here or"),' ',k.createElement(h,{accept:this.props.allowedFileTypes.join(', '),onChange:this._handleFilesSelection},k.createElement(l,{href:{url:'#'},label:m._("Upload File")}))));return (k.createElement(j,{alignv:"middle",height:76,fullWidth:true},t));},render:function(){return (k.createElement("div",{className:(("_82p")+(this.props.selectedFile&&this.props.selectedFile.name?' '+"_82q":'')+(this.props.hasError?' '+"_82r":''))},this._renderDragAndDropBox()));}});e.exports=s;},null);
__d("AudienceManagerEditAudienceInitDialogContent.react",["AbstractTextArea.react","AudienceManagerAppIDInput.react","AudienceManagerDataTypeSelector.react","AudienceManagerErrorContextualDialog.react","AudienceManagerFBCustomAudienceTerm.react","AudienceManagerViewFormatingExampleLink.react","AudienceNameAndDescriptionInput.react","CustomAudienceUploadErrorBox.react","FBDragDropBox.react","RadioList.react","React","ReactLayeredComponentMixin","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","isEmail","isInternationalPhoneNumber","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();'use strict';var ba=p.LabeledItem,ca={ADD:'add',REMOVE:'remove'},da={COPY_PASTE:'copy_paste',FILE_IMPORT:'file'},ea=/^\d+$/,fa=q,ga=fa.PropTypes,ha=20,ia=17,ja=['csv','txt'],ka=/\r\n|\n|\r|;|,/,la=q.createClass({displayName:"AudienceManagerEditAudienceInitDialogContent",mixins:[r],propTypes:{accountID:ga.string.isRequired,audienceName:ga.string.isRequired,description:ga.string,termsAlreadyAccepted:ga.bool,onEditMetaData:ga.func.isRequired,onUploadFileAdd:ga.func.isRequired,onUploadFileRemove:ga.func.isRequired,onCopyPasteAdd:ga.func.isRequired,onCopyPasteRemove:ga.func.isRequired,onNoUpload:ga.func.isRequired},getInitialState:function(){return {audienceName:this.props.audienceName,description:this.props.description,fileError:null,selectedFile:null,pasteBin:'',selectedDataType:aa.UPLOAD_TYPE_EMAIL,addRemoveMode:ca.ADD,uploadMethod:da.FILE_IMPORT,termsBoxChecked:true,appIDEntries:[]};},renderLayers:function(){if(this.state.uploadMethod===da.FILE_IMPORT)return {contextualDialog:q.createElement(j,{contextRef:function(){return this.refs.dragdropbox;}.bind(this),shown:this._getShouldShowErrorDialog(),offsetY:ia},this.state.fileError)};return null;},render:function(){return (q.createElement("div",null,q.createElement(s,null,q.createElement("div",{className:"_50_z"},q.createElement(m,{audienceName:this.props.audienceName,description:this.props.description,onAudienceNameChange:this._onAudienceNameChange,onDescriptionChange:this._onDescriptionChange}),q.createElement("div",{className:"_3-97 _3-8z"},q.createElement(i,{defaultValue:this.state.selectedDataType,canUploadAppUserID:this.props.canUploadAppUserID,onTypeChange:this._onDataTypeChange})),this._renderAppIDInput(),this._renderAddRemoveModeSection(),this._renderEditSection(),q.createElement("div",null,q.createElement(k,{accountID:this.props.accountID,termsAlreadyAccepted:this.props.termsAlreadyAccepted,termsBoxChecked:this.state.termsBoxChecked,onTermsCheckboxChanged:this._onTermsCheckboxChanged})))),q.createElement(u,null,q.createElement(t,{use:"confirm",disabled:!this._getShouldEnableSaveButton(),onClick:this._onSaveAudienceButtonClick,label:z._("Save")}))));},_renderAddRemoveModeSection:function(){return (q.createElement("div",{className:"_3-8z _3-97"},q.createElement(v,{weight:"bold",display:"block",shade:"medium",className:"_3-95"},z._("Update Audience")),q.createElement("div",null,q.createElement(p,{selectedValue:this.state.addRemoveMode,onValueChange:this._onAddRemoveModeChange},q.createElement(ba,{value:ca.ADD,className:"_iv3 _3-8w _3-94"},z._("Add People")),q.createElement(ba,{value:ca.REMOVE,className:"_iv3 _3-8w _3-94"},z._("Remove People"))))));},_renderEditSection:function(){var ma=null;if(this.state.uploadMethod===da.COPY_PASTE){ma=this._renderCopyPasteSection();}else if(this.state.uploadMethod===da.FILE_IMPORT)ma=this._renderFileUploadSection();return (q.createElement("div",{className:"_3-8z _3-97"},q.createElement(v,{weight:"bold",display:"block",shade:"medium",className:"_3-95"},z._("How do you want to add customers?")),q.createElement("div",null,q.createElement(p,{selectedValue:this.state.uploadMethod,onValueChange:this._onUploadMethodChange},q.createElement(ba,{value:da.FILE_IMPORT,className:"_iv3 _3-8w _3-94"},z._("Upload a File")),q.createElement(ba,{value:da.COPY_PASTE,className:"_iv3 _3-8w _3-94"},z._("Copy and Paste")))),ma));},_renderCopyPasteSection:function(){var ma=null;if(!!this.state.error)ma=q.createElement(n,{message:this.state.error});return (q.createElement("div",null,q.createElement("div",{className:"_3-8- _3-98"},q.createElement(g,{className:"_5ukc",value:this.state.pasteBin,onChange:this._onPasteBinChange,placeholder:z._("Paste your customer list here.")}),ma),q.createElement("div",null,z._("You can copy columns from a spreadsheet with one record per row or a list of records separated by a comma."),' ',q.createElement(l,null))));},_renderFileUploadSection:function(){return (q.createElement("div",null,q.createElement("div",{className:"_3-8- _3-98"},q.createElement(o,{ref:"dragdropbox",onFilesSelection:this._onFilesSelection,onFileRemove:this._onFileRemove,onFileChange:this._onFileChange,selectedFile:this.state.selectedFile,hasError:this._getShouldShowErrorDialog()})),q.createElement("div",null,z._("You can upload files in .csv or .txt format."),' ',q.createElement(l,null))));},_renderAppIDInput:function(){if(this.state.selectedDataType===aa.UPLOAD_TYPE_UID)return (q.createElement(h,{accountID:this.props.accountID,onAppEntriesUpdated:this._onAppEntriesUpdated}));return null;},_getShouldShowErrorDialog:function(){return !!this.state.fileError;},_getShouldEnableSaveButton:function(){if((this.state.audienceName!==this.props.audienceName||this.state.description!==this.props.description)&&this.state.termsBoxChecked&&!this.state.fileError&&!this.state.error)return true;if(this.state.selectedDataType===aa.UPLOAD_TYPE_UID){var ma=this.state.appIDEntries.some(function(na){return na.getAuxiliaryData().invalid;});if(this.state.appIDEntries.length<=0||!!ma)return false;}if(this.state.uploadMethod===da.FILE_IMPORT){return !!this.state.audienceName&&!!this.state.selectedFile&&!!this.state.termsBoxChecked&&!this.state.fileError;}else if(this.state.uploadMethod===da.COPY_PASTE)return !!this.state.audienceName&&!!this.state.pasteBin&&!!this.state.termsBoxChecked;},_onAudienceNameChange:function(ma){this.setState({audienceName:ma});},_onDescriptionChange:function(ma){this.setState({description:ma});},_onAddRemoveModeChange:function(ma){this.setState({addRemoveMode:ma});},_onUploadMethodChange:function(ma){this.setState({uploadMethod:ma,selectedFile:null,pasteBin:'',error:null,fileError:null});},_onTermsCheckboxChanged:function(ma){this.setState({termsBoxChecked:ma.target.checked});},_onDataTypeChange:function(ma){this.setState({selectedDataType:ma.value});},_onAppEntriesUpdated:function(ma){this.setState({appIDEntries:ma});},_onFileRemove:function(){this.setState({fileError:null,selectedFile:null});},_onFilesSelection:function(ma){this._onFileChange(ma.target.files);},_onFileChange:function(ma){var na=ma[0];if(na){if(!na.size){this.setState({selectedFile:na,fileError:z._("File appears to be empty.")});return;}var oa='',pa='';if(na.name.indexOf('.')>=0){oa=na.name.split('.').pop();pa=na.name.substr(0,na.name.lastIndexOf('.'));}var qa=ja.indexOf(oa.toLowerCase())!=-1;if(!qa){this.setState({selectedFile:na,fileError:z._("File must be .csv or .txt format.")});return;}this.setState({selectedFile:na,fileError:null});}},_onPasteBinChange:function(ma){this.setState({pasteBin:ma.target.value});},_onSaveAudienceButtonClick:function(){if(this.state.audienceName!==this.props.audienceName||this.state.description!==this.props.description)this.props.onEditMetaData(this.state.audienceName,this.state.description);if(this.state.uploadMethod===da.FILE_IMPORT&&!!this.state.selectedFile){if(this.state.addRemoveMode===ca.ADD){this.props.onUploadFileAdd(this.state.selectedDataType,this.state.appIDEntries,this.state.selectedFile);}else this.props.onUploadFileRemove(this.state.selectedDataType,this.state.appIDEntries,this.state.selectedFile);}else if(this.state.uploadMethod===da.COPY_PASTE&&!!this.state.pasteBin){var ma=this.state.pasteBin.trim().split(ka).map(function(oa){return oa.trim();});ma=ma.filter(function(oa){return !!oa;});if(ma.length>aa.CLUSTER_API_MAX_SIZE){this.setState({error:z._("You can upload at most {max number of entries} entries using copy and paste. Try uploading a file instead.",[z.param("max number of entries",aa.CLUSTER_API_MAX_SIZE)])});return;}var na=this._onCheckError(ma);if(!na){if(this.state.addRemoveMode===ca.ADD){this.props.onCopyPasteAdd(this.state.selectedDataType,this.state.appIDEntries,ma);}else this.props.onCopyPasteRemove(this.state.selectedDataType,this.state.appIDEntries,ma);}else this.setState({error:z._("You need to add at least {mininum number of entries} valid entries to continue.",[z.param("mininum number of entries",ha)])});}else this.props.onNoUpload();},_onCheckError:function(ma){var na=ma;if(this.state.selectedDataType===aa.UPLOAD_TYPE_EMAIL){na=ma.filter(function(oa){oa=oa.toLowerCase();return w(oa);});}else if(this.state.selectedDataType===aa.UPLOAD_TYPE_PHONE){na=ma.filter(function(oa){return x(oa);});}else if(this.state.selectedDataType===aa.UID)na=ma.filter(function(oa){return ea(oa);});if(na.length<ha)return true;return false;}});e.exports=la;},null);
__d("AudienceManagerEditAudienceNameDescriptionInitDialogContent.react",["AudienceManagerFBCustomAudienceTerm.react","AudienceNameAndDescriptionInput.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=i,p=o.PropTypes,q=i.createClass({displayName:"AudienceManagerEditAudienceNameDescriptionInitDialogContent",propTypes:{accountID:p.string.isRequired,audienceName:p.string.isRequired,description:p.string,termsAlreadyAccepted:p.bool,onEditMetaData:p.func.isRequired},getInitialState:function(){return {audienceName:this.props.audienceName,description:this.props.description,termsBoxChecked:true};},render:function(){return (i.createElement("div",null,i.createElement(j,null,i.createElement("div",{className:"_50_z"},i.createElement(h,{audienceName:this.props.audienceName,description:this.props.description,onAudienceNameChange:this._onAudienceNameChange,onDescriptionChange:this._onDescriptionChange}),i.createElement("div",{className:"_3-8z"},i.createElement(g,{accountID:this.props.accountID,termsAlreadyAccepted:this.props.termsAlreadyAccepted,termsBoxChecked:this.state.termsBoxChecked,onTermsCheckboxChanged:this._onTermsCheckboxChanged})))),i.createElement(l,null,i.createElement(k,{use:"confirm",disabled:!this._getShouldEnableSaveButton(),onClick:this._onSaveAudienceButtonClick,label:n._("Save")}))));},_getShouldEnableSaveButton:function(){return (this.state.audienceName!==this.props.audienceName||this.state.description!==this.props.description)&&this.state.termsBoxChecked;},_onAudienceNameChange:function(r){this.setState({audienceName:r});},_onDescriptionChange:function(r){this.setState({description:r});},_onTermsCheckboxChanged:function(r){this.setState({termsBoxChecked:r.target.checked});},_onSaveAudienceButtonClick:function(){this.props.onEditMetaData(this.state.audienceName,this.state.description);}});e.exports=q;},null);
__d("AudienceManagerEditAudienceDialog.react",["AdInterfacesUiLogger","AdsAMCreateAudienceServerActions","AdsAudienceDataSourceUtils","AdsAMCreateAudienceStore","AdsAMCreateAudienceViewActions","AdsCustomAudienceType","AudienceManagerEditAudienceCompleteDialogContent.react","AudienceManagerEditAudienceInitDialogContent.react","AudienceManagerEditAudienceNameDescriptionInitDialogContent.react","AudienceManagerLoggingEvents","AudienceManagerUIConstants","AudienceManagerUploadDialogContent.react","AudienceManagerUploadErrorDialogContent.react","AudienceManagerUploadFileErrorDialogContent.react","CreateCAStages","React","StoreBasedStateMixin","XUIDialog.react","XUIDialogTitle.react","XUISpinner.react","XUIText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();var ea=v,fa=ea.PropTypes,ga=l.SUBTYPES,ha=v.createClass({displayName:"AudienceManagerEditAudienceDialog",mixins:[w(j)],propTypes:{accountID:fa.string.isRequired,audience:fa.object.isRequired,tosAccepted:fa.object.isRequired,tosRequirementsForAccount:fa.object.isRequired,onAudienceChanged:fa.func.isRequired,onClose:fa.func.isRequired},calculateState:function(){return {viewStage:j.getViewStage(),progress:j.getProgress(),numberOfRecords:j.getNumberOfRecords(),errorTokenLists:j.getErrorTokenLists(),errorDetailsForLimitReach:j.getErrorDetailsForLimitReach(),errorMessage:j.getErrorMessage()};},componentDidMount:function(){this.refs.dialog.layer.updatePosition=ca;k.setViewStage(u.EDIT_AUDIENCE_INIT);},render:function(){return (v.createElement(x,{layerHideOnBlur:false,shown:true,ref:"dialog",width:q.DEFAULT_DIALOG_WIDTH,fixedTopPosition:q.DEFAULT_DIALOG_TOP_POS,onToggle:this._onToggle},v.createElement(y,null,v.createElement(aa,{weight:"bold",size:"medium"},da._("Edit a Custom Audience"))),this._renderDialogContentForStage()));},_renderDialogContentForStage:function(){switch(this.state.viewStage){case u.EDIT_AUDIENCE_INIT:var ia=this._isTermsAccepted();if(this._isCreatedFromFile())return (v.createElement(n,{accountID:this.props.accountID,audienceName:this.props.audience.name,description:this.props.audience.description,termsAlreadyAccepted:ia,onEditMetaData:this._onEditMetaData,onUploadFileAdd:this._onUploadFileAddUsers,onUploadFileRemove:this._onUploadFileRemoveUsers,onCopyPasteAdd:this._onCopyPasteAddUsers,onCopyPasteRemove:this._onCopyPasteRemoveUsers,onNoUpload:this._onClose}));return (v.createElement(o,{accountID:this.props.accountID,audienceName:this.props.audience.name,description:this.props.audience.description,termsAlreadyAccepted:ia,onEditMetaData:this._onEditMetaDataOnly}));case u.FILE_IMPORT_CHECK_FILE:return (v.createElement("div",{className:"_3773"},v.createElement(z,{background:"light",size:"large"})));case u.COPY_PASTE_UPLOAD:case u.FILE_IMPORT_UPLOAD:return (v.createElement(r,{progress:this.state.progress}));case u.FILE_IMPORT_UPLOAD_CONVERT_ERROR:case u.FILE_IMPORT_NO_VALID_ENTRY:return (v.createElement(t,{errorDetails:this.state.errorMessage,onUploadAnotherFileClick:this._onFileImportAnotherFileClick}));case u.COPY_PASTE_UPLOAD_COMPLETE:case u.FILE_IMPORT_UPLOAD_COMPLETE:return (v.createElement(m,{numberOfValidRecords:this.state.numberOfRecords.validRecord,numberOfTotalRecords:this.state.numberOfRecords.totalRecord,errorTokenLists:this.state.errorTokenLists,onCompleteClick:this._onEditCompleteClick}));case u.FILE_IMPORT_UPLOAD_ERROR:return (v.createElement(s,{numLines:this.state.errorDetailsForLimitReach.numLines,numErrors:this.state.errorDetailsForLimitReach.numErrors,errorTokenLists:this.state.errorTokenLists,onUploadAnotherFileClick:this._onFileImportAnotherFileClick,onContinueCreateAudience:this._onFileImportContinueCreateAudienceClick}));}},_isCreatedFromFile:function(){if(!this.props.audience.data_source||this.props.audience.subtype!==ga.REGULAR)return false;var ia=this.props.audience.data_source.type;if(ia===i.TYPES.FILE_IMPORTED||ia===i.TYPES.UNKNOWN)return true;return false;},_onEditMetaData:function(ia,ja){g.log(p.AM_CA_EDIT_UPDATE_META_DATA,{audience_id:this.props.audience.id});this.props.onAudienceChanged(this.props.audience,{name:ia,description:ja});},_onEditMetaDataOnly:function(ia,ja){g.log(p.AM_CA_EDIT_UPDATE_META_DATA_ONLY,{audience_id:this.props.audience.id});this.props.onAudienceChanged(this.props.audience,{name:ia,description:ja});this._onClose();},_onUploadFileAddUsers:function(ia,ja,ka){g.log(p.AM_CA_EDIT_FILE_IMPORT_ADD_USERS,{audience_id:this.props.audience.id});k.setViewStage(u.FILE_IMPORT_CHECK_FILE);h.uploadFileAddUsers(this.props.accountID,this.props.audience.id,ia,ja,ka);},_onUploadFileRemoveUsers:function(ia,ja,ka){g.log(p.AM_CA_EDIT_FILE_IMPORT_REMOVE_USERS,{audience_id:this.props.audience.id});k.setViewStage(u.FILE_IMPORT_CHECK_FILE);h.uploadFileRemoveUsers(this.props.accountID,this.props.audience.id,ia,ja,ka);},_onCopyPasteAddUsers:function(ia,ja,ka){g.log(p.AM_CA_EDIT_COPY_PASTE_ADD_USERS,{audience_id:this.props.audience.id});h.copyPasteAddUsers(this.props.accountID,this.props.audience.id,ia,ja,ka);},_onCopyPasteRemoveUsers:function(ia,ja,ka){g.log(p.AM_CA_EDIT_COPY_PASTE_REMOVE_USERS,{audience_id:this.props.audience.id});h.copyPasteRemoveUsers(this.props.accountID,this.props.audience.id,ia,ja,ka);},_onFileImportAnotherFileClick:function(){g.log(p.AM_CA_EDIT_FILE_IMPORT_CHOOSE_ANOTHER_FILE_CLICK,{audience_id:this.props.audience.id});k.setViewStage(u.EDIT_AUDIENCE_INIT);},_onFileImportContinueCreateAudienceClick:function(){g.log(p.AM_CA_EDIT_FILE_IMPORT_CONTINUE_EDIT_AUDIENCE_CLICK,{audience_id:this.props.audience.id});h.continueUploadSelectedFileToServer();},_onEditCompleteClick:function(){g.log(p.AM_CA_EDIT_FINISH_SUCCESS,{audience_id:this.props.audience.id});this._onClose();},_onToggle:function(ia){if(!ia){g.log(p.AM_CA_EDIT_CLOSE_DIALOG,{audience_id:this.props.audience_id});this._onClose();}},_onClose:function(){this.props.onClose();k.reset();},_isTermsAccepted:function(){var ia=this.props.tosRequirementsForAccount.custom_audience;return this.props.tosAccepted.hasOwnProperty(ia)&&(this.props.tosAccepted[ia]==1);}});e.exports=ha;},null);
__d("AdsSavedAudienceDataManager",["AdsAPIAdAccountFields","AdsBaseDataManager","AdsSavedAudienceActions","AdsTargetingSavedAudienceDataLoader","GraphAPI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';for(var m in h)if(h.hasOwnProperty(m))o[m]=h[m];var n=h===null?null:h.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=h;function o(){if(h!==null)h.apply(this,arguments);}o.prototype.loadAll=function(p){p.forEach(function(q){return this.load(q);}.bind(this));};o.prototype.load=function(p){j.loadSavedAudienceByID(p).done(function(q){return this.__handleSuccess(['load'],p,null,q);}.bind(this),function(q){return this.__handleError(['load'],p,null,q);}.bind(this));};o.prototype.__onBatchLoaded=function(p){i.savedAudiencesLoaded(p);};o.prototype.__onBatchLoadError=function(p){i.savedAudiencesLoadError(p);};o.prototype.__onBatchCreated=function(p){i.savedAudiencesCreated(p);};o.prototype.__onBatchCreateError=function(p){i.savedAudiencesCreateError(p);};o.prototype.__onBatchUpdated=function(p){i.savedAudiencesUpdated(p);};o.prototype.__onBatchUpdateError=function(p){i.savedAudiencesUpdateError(p);};o.prototype.__onBatchDeleted=function(p){i.savedAudiencesDeleted(Array.from(p.keys()));};o.prototype.__onBatchDeleteError=function(p){i.savedAudiencesDeleteError(p);};o.prototype.__getObjectTypeLabel=function(){return (l._("Saved Audience"));};o.prototype.create=function(p){k('2.3').adaccount(p.accountID).edge(g.SAVED_AUDIENCES).batched().post({name:p.name,targeting:p.targeting}).done(function(q){this.__handleSuccess(['create'],p.tempID,null,{accountID:p.accountID,id:q.id,name:p.name,targeting:p.targeting,tempID:p.tempID});}.bind(this),function(q){q.accountID=p.accountID;this.__handleError(['create'],p.tempID,null,q);}.bind(this));};o.prototype.update=function(p){k('2.3').object('saved_audience',p.id).batched().post({name:p.name,targeting:p.targeting}).done(function(q){this.__handleSuccess(['update'],p.id,null,{id:p.id,name:p.name,targeting:p.targeting,sync_status:q.sync_status});}.bind(this),function(q){this.__handleError(['update'],p.id,null,q);}.bind(this));};o.prototype["delete"]=function(p){k('2.3').object('saved_audience',p).batched().remove().done(function(q){this.__handleSuccess(['delete'],p,null,{id:p});}.bind(this),function(q){this.__handleError(['delete'],p,null,q);}.bind(this));};e.exports=new o();},null);
__d("AdsSavedAudienceStore",["AdsBaseDataStore","AdsLoadState","AdsSavedAudienceActionTypes","AdsSavedAudienceDataManager"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';for(var k in g)if(g.hasOwnProperty(k))m[k]=g[k];var l=g===null?null:g.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=g;function m(){if(g!==null)g.apply(this,arguments);}m.prototype.getDataManager=function(){return j;};m.prototype.onDispatchToken=function(n){var o=n.action,p=[];switch(o.actionType){case i.SAVED_AUDIENCE.BATCH_LOADED:this.__handleData(o.savedAudiences,h.LOADED);break;case i.SAVED_AUDIENCE.BATCH_CREATED:this.__handleData(o.savedAudiences,h.LOADED);p=this.$AdsSavedAudienceStore0(o.savedAudiences);this.__invalidateAll(p);this.getAll(p);break;case i.SAVED_AUDIENCE.BATCH_UPDATED:p=this.$AdsSavedAudienceStore0(o.savedAudiences);this.__invalidateAll(p);this.getAll(p);break;case i.SAVED_AUDIENCE.BATCH_DELETED:this.__invalidateAll(o.savedAudienceIDs);break;case i.SAVED_AUDIENCE.BATCH_CREATE_ERROR:case i.SAVED_AUDIENCE.BATCH_DELETE_ERROR:case i.SAVED_AUDIENCE.BATCH_LOAD_ERROR:case i.SAVED_AUDIENCE.BATCH_UPDATE_ERROR:this.__handleData(o.errors,h.ERROR);break;case i.SAVED_AUDIENCE.CREATE_BATCH:this.__updateLoading(o.savedAudiences.map(function(q){return q.tempID;}));o.savedAudiences.forEach(function(q){return j.create(q);});break;case i.SAVED_AUDIENCE.DELETE_BATCH:o.savedAudienceIDs.forEach(function(q){return this.__delete(q);}.bind(this));break;case i.SAVED_AUDIENCE.UPDATE_BATCH:this.__updatePendingWrite(o.savedAudiences.map(function(q){return q.id;}));o.savedAudiences.forEach(function(q){return j.update(q);});break;}};m.prototype.$AdsSavedAudienceStore0=function(n){var o=Array.from(n.values()),p=o.map(function(q){return q.id;});return p;};e.exports=new m();},null);
__d("AudienceManagerSavedTargetSpecUtils",["AdsAPIObjectives"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=['AudienceEditor','LocationEditor','AgeEditor','GenderEditor','LanguagesEditor','AdvancedDemographicsDropdownEditor','SectionDivider','InterestsEditor','SectionDivider','BehaviorsEditor','SectionDivider','CategoriesEditor','ConnectionsEditor'],i=['AudienceEditor','LocationEditor','AgeEditor','GenderEditor','LanguagesEditor','AdvancedDemographicsDropdownEditor','SectionDivider','InterestsEditor','SectionDivider','BehaviorsEditor','SectionDivider','CategoriesEditor','ConnectionsEditor'],j=['TargetingSentences'],k={getDetailsViewConfiguration:function(){var l=h.map(function(m){return {component:m};});return l;},getDialogLeftSideConfiguration:function(){var l=i.map(function(m){return {component:m};});return l;},getDialogRightSideConfiguration:function(){var l=j.map(function(m){return {component:m};});return l;},getExtraData:function(l,m){return {accountID:l,dao:m,objectiveData:{shouldDisableInclusion:true,isObjectiveAppStoreMedia:true,objective:g.MOBILE_APP_INSTALLS},destinationData:{}};},validateSpec:function(l){var m=l.geo_locations||l.custom_audiences;return !!m;},toLegacy:function(l){return Object.assign({},l,{isSavedTargetSpec:true,targeting_sentence_lines:l.sentence_lines,target_spec:l.targeting,time_updated_timestamp:l.time_updated||0});}};e.exports=k;},null);
__d("AudienceManagerErrorTypes",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({ACCOUNT_INIT:null,AUDIENCE_INIT:null,AUDIENCE_DELETE:null,AUDIENCE_ADD:null,AUDIENCE_UPDATE:null,AUDIENCE_GET:null,CAPABILITY_REMOVE:null,CAPABILITY_UPDATE:null,PIXEL_GET:null,STS_GET:null}),i=g({INIT_ERRORS:null,NON_INIT_ERRORS:null}),j={};j[i.INIT_ERRORS]=[h.ACCOUNT_INIT,h.AUDIENCE_INIT,h.PIXEL_GET];j[i.NON_INIT_ERRORS]=[h.AUDIENCE_DELETE,h.AUDIENCE_UPDATE,h.AUDIENCE_ADD,h.AUDIENCE_GET,h.CAPABILITY_REMOVE,h.CAPABILITY_UPDATE];e.exports={Errors:h,ErrorTypes:i,ErrorTypeToErrors:j};},null);
__d("FixedDataTableSortFunctions",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(j,k){if(j>k)return 1;if(j<k)return -1;return 0;}function h(j,k){if(j!==null&&j!==(void 0)&&k!==null&&k!==(void 0))return null;j=(j===null||j===(void 0))?1:0;k=(k===null||k===(void 0))?1:0;return j-k;}var i={compareNumber:function(j,k){var l=h(j,k);if(l===null)l=parseFloat(j)-parseFloat(k);return l;},compareString:function(j,k){var l=h(j,k);if(l===null)l=g(j.toLowerCase(),k.toLowerCase());return l;},compareDate:function(j,k){var l=h(j,k);if(l===null)l=j.getTime()-k.getTime();return l;}};e.exports=i;},null);
__d("AdsAMAudienceStore",["AdsAMActionTypes","AdsAMAudienceUtils","AdsBaseStore","AdsDispatcher","AdsSavedAudienceActionTypes","AdsSavedAudienceStore","AudienceManagerSavedTargetSpecUtils","AudienceManagerUIConstants","AudiencePropertyConstants","FixedDataTableSortFunctions","ImmutableObject","invariant","AudienceManagerErrorTypes"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=b('AudienceManagerErrorTypes').ErrorTypeToErrors,t=n.SORT_ORDER;for(var u in i)if(i.hasOwnProperty(u))w[u]=i[u];var v=i===null?null:i.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=i;function w(){i.call(this);this.$AdsAMAudienceStoreClass0={};this.$AdsAMAudienceStoreClass1={customAudiences:[],savedTargetSpecs:[]};this.$AdsAMAudienceStoreClass2();this.$AdsAMAudienceStoreClass3();}w.prototype.$AdsAMAudienceStoreClass2=function(){this.$AdsAMAudienceStoreClass4=false;this.$AdsAMAudienceStoreClass5={};this.$AdsAMAudienceStoreClass6={sortOrder:t.DESC,sortKey:o.TIME_CREATED,compareFunction:p.compareNumber};};w.prototype.$AdsAMAudienceStoreClass3=function(){this.$AdsAMAudienceStoreClass7=false;this.$AdsAMAudienceStoreClass8={};};w.prototype.$AdsAMAudienceStoreClass9=function(y){y[o.NAME]=y.audience_name||y.name;if(!y[o.TIME_CREATED])y[o.TIME_CREATED]=y.time_updated_timestamp;};w.prototype.$AdsAMAudienceStoreClassa=function(y){(y||[]).forEach(function(z){if(h.isSavedTargetSpec(z))this.$AdsAMAudienceStoreClass9(z);this.$AdsAMAudienceStoreClass5[z.id]=z;}.bind(this));};w.prototype.$AdsAMAudienceStoreClassb=function(y,z){this.$AdsAMAudienceStoreClass5[y]=Object.assign({},this.$AdsAMAudienceStoreClass5[y],z);};w.prototype.$AdsAMAudienceStoreClassc=function(y,z){var aa=this.$AdsAMAudienceStoreClass6.compareFunction(y[this.$AdsAMAudienceStoreClass6.sortKey],z[this.$AdsAMAudienceStoreClass6.sortKey]);return this.$AdsAMAudienceStoreClass6.sortOrder===t.ASC?aa:-aa;};w.prototype.getState=function(y){var z=this.$AdsAMAudienceStoreClass5[y];r(z);return new q(z);};w.prototype.getAllAudiences=function(){var y=[];for(var z in this.$AdsAMAudienceStoreClass5)y.push(new q(this.$AdsAMAudienceStoreClass5[z]));y.sort(function(aa,ba){return this.$AdsAMAudienceStoreClassc(aa,ba);}.bind(this));return y;};w.prototype.hasAllContent=function(){return this.$AdsAMAudienceStoreClass4&&this.$AdsAMAudienceStoreClass7;};w.prototype.hasError=function(y){return !!this.$AdsAMAudienceStoreClass0[y];};w.prototype.getErrorsByType=function(y){var z=[],aa=s[y]||[];for(var ba=0;ba<aa.length;ba++)if(this.$AdsAMAudienceStoreClass0[aa[ba]])z.push(this.$AdsAMAudienceStoreClass0[aa[ba]]);return z;};w.prototype.getAccount=function(){return new q(this.$AdsAMAudienceStoreClass8);};w.prototype.getSortState=function(){return this.$AdsAMAudienceStoreClass6;};w.prototype.getCustomAudiencesFromBuffer=function(){return this.$AdsAMAudienceStoreClass1.customAudiences;};w.prototype.getSavedTargetSpecFromBuffer=function(){return this.$AdsAMAudienceStoreClass1.savedTargetSpecs;};w.prototype.$AdsAMAudienceStoreClassd=function(y){var z=l.getAll(y);z.forEach(function(aa){aa=m.toLegacy(aa);aa.isSavedAudience=true;this.$AdsAMAudienceStoreClassb(aa.id,aa);}.bind(this));};w.prototype.onDispatchToken=function(y){var z=y.action,aa=false;switch(z.actionType){case g.ACCOUNT_INIT:this.$AdsAMAudienceStoreClass3();this.$AdsAMAudienceStoreClass8=z.account;this.$AdsAMAudienceStoreClass7=true;aa=true;break;case g.AUDIENCE_INIT:this.$AdsAMAudienceStoreClass2();this.$AdsAMAudienceStoreClassa(z.audiences);this.$AdsAMAudienceStoreClass4=true;aa=true;break;case g.AUDIENCE_ADD:this.$AdsAMAudienceStoreClassa([z.audience]);aa=true;break;case g.AUDIENCE_BULK_ADD:this.$AdsAMAudienceStoreClassa(z.audiences);aa=true;break;case g.AUDIENCE_DELETE:delete this.$AdsAMAudienceStoreClass5[z.audience.id];aa=true;break;case g.AUDIENCE_BULK_DELETE:z.audiences.forEach(function(ca){delete this.$AdsAMAudienceStoreClass5[ca.id];}.bind(this));aa=true;break;case g.AUDIENCE_CHANGE:this.$AdsAMAudienceStoreClassb(z.audienceID,z.changedProperties);aa=true;break;case g.AUDIENCE_SAVE_TO_CA_BUFFER:this.$AdsAMAudienceStoreClass1.customAudiences=z.audiences;break;case g.AUDIENCE_SAVE_TO_STS_BUFFER:this.$AdsAMAudienceStoreClass1.savedTargetSpecs=z.audiences;break;case g.AUDIENCE_SORT:this.$AdsAMAudienceStoreClass6.sortOrder=z.sortOrder;this.$AdsAMAudienceStoreClass6.sortKey=z.sortKey;this.$AdsAMAudienceStoreClass6.compareFunction=z.compareFunction;aa=true;break;case g.ERROR:this.$AdsAMAudienceStoreClass0[z.error]=z.rawData.error;aa=true;break;case g.VIEW_CLEAR_ERRORS:this.$AdsAMAudienceStoreClass0={};aa=true;break;case k.SAVED_AUDIENCE.BATCH_DELETED:z.savedAudienceIDs.forEach(function(ca){delete this.$AdsAMAudienceStoreClass5[ca];}.bind(this));aa=true;break;case k.SAVED_AUDIENCE.BATCH_LOADED:j.waitFor([l.dispatchToken]);var ba=Array.from(z.savedAudiences.keys());this.$AdsAMAudienceStoreClassd(ba);aa=true;break;}if(aa)this.inform('change');};var x=new w();e.exports=x;},null);
__d("AdsCreateLookalikeDialogRangeInput.react",["Event","React","UserAgent_DEPRECATED","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=135,o=h.createClass({displayName:"AdsCreateLookalikeDialogRangeInput",propTypes:{className:m.string,min:m.number.isRequired,max:m.number.isRequired,step:m.number,value:m.number,disabled:m.bool,onChange:m.func},getInitialState:function(){return {value:this.props.value||this.props.min,pressed:false};},componentDidMount:function(){var p=i.ie()<9?document.documentElement:window;g.listen(p,{mousemove:function(q){return this._onMouseMove(q);}.bind(this),mouseup:function(q){return this._onMouseUp(q);}.bind(this)});},componentWillReceiveProps:function(p){if(p.value!==this.props.value)this.setState({value:p.value});},_onMouseDown:function(event){if(!this.props.disabled){g.prevent(event);this.setState({pressed:true,dragStartValue:this.state.value,dragStartX:event.nativeEvent.clientX});}},_onMouseMove:function(event){if(this.state.pressed){var p=(event.clientX-this.state.dragStartX),q=(this.props.max-this.props.min)/n,r=this.state.dragStartValue+(p*q),s=this.props.min,t=this.props.max;r=r<s?s:r;r=r>t?t:r;this.setState({value:r});this._onChange();}},_onMouseUp:function(event){if(this.state.pressed)this.setState({pressed:false});},_onChange:function(){if(this.props.onChange){var p=this.state.value,q=this.props.step;if(q){p=Math.round(p/q)*q;this.props.onChange(p);}}},render:function(){var p=this.props,q=this.state,r=p.max-p.min,s=(q.value-p.min)/r,t=Math.round(s*n),u=(("_38v0")+(p.disabled?' '+"_19ys":''));return (h.createElement("div",h.__spread({},this.props,{className:k(this.props.className,u)}),h.createElement("div",{ref:"thumbWrapper",className:"_5cy-",style:{left:t+'px'},onMouseDown:p.disabled?null:this._onMouseDown,onDragStart:g.prevent},h.createElement("div",{className:(("_5cy_")+(q.pressed?' '+"_38v3":''))}))));},getThumb:function(){return this.refs&&this.refs.thumbWrapper;}});e.exports=o;},null);
__d("AdsCreateLookalikeDialogTooltipRangeInput.react",["AdsCreateLookalikeDialogRangeInput.react","React","Tooltip","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"AdsCreateLookalikeDialogTooltipRangeInput",propTypes:{min:m.number.isRequired,max:m.number.isRequired,step:m.number,value:m.number,tooltip:m.string,onChange:m.func},render:function(){return (h.createElement(g,h.__spread({},this.props,{ref:"rangeInput",className:k(this.props.className,"_2blb")})));},componentDidMount:function(){this._updateTooltip();},componentDidUpdate:function(){this._updateTooltip();},_updateTooltip:function(){var o=h.findDOMNode(this.refs.rangeInput.getThumb()),p=this.props.tooltip;if(p){i.set(o,p,'above','center');}else i.remove(o);}});e.exports=n;},null);
__d("AdsAudienceTypeaheadPresenter.react",["AdsSBTokenizerConstants","AdsSBTokenizerWhiteBox.react","ScrollableArea.react","List.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=k,o=n.PropTypes,p=430,q=100,r=213,s=g.WHITE_BOX.WIDTH;function t(y){var z={},aa=y.getAuxiliaryData()||{};z.description=aa.description;z.reach=aa.reach;var ba=aa.lookalikeSpec||{};if(ba.origin&&ba.origin.length>0)z.source=ba.origin.map(function(ca){return ca.name;}).join(",");return z;}var u=k.createClass({displayName:"ViewRenderer",propTypes:{entries:o.array.isRequired,highlightedEntry:o.object,onSelect:o.func.isRequired,onHighlight:o.func,width:o.number},render:function(){var y=this.props.entries,z=this.props.excludedEntries||{};y=y.filter(function(ea){return !z[ea.getUniqueID()];},this);if(y&&y.length){var aa=y.map(this._renderRow,this),ba=k.createElement("div",{className:"_hpi _5d4-"},k.createElement(h,{info:t(this.props.highlightedEntry),type:g.ACTIVE_STATES.SEARCH,uniqueID:"audience_tokenizer"})),ca=this.props.width?this.props.width:p,da=ca+s;return (k.createElement("div",{className:"_5d4_",style:{width:da}},k.createElement("div",{className:"_5d50",style:{width:ca}},k.createElement("div",{className:"_5m8_"},k.createElement(i,{height:r,width:ca},k.createElement(j,{border:"none",spacing:"none"},aa))),ba)));}return k.createElement("ul",{className:"_5m90"});},_renderRow:function(y){if(y.getUniqueID()==='-1')return (k.createElement("li",{className:"_5m91"},k.createElement("div",{className:"fwb"},m._("No Matches Found")),k.createElement("div",{className:"_5xs_"},m._("Check your spelling, formatting or enter another audience name"))));if(y.getUniqueID()==='-2')return (k.createElement("li",{className:"_5m91"},k.createElement("div",{className:"fwb"},m._("No existing audience in this account")),k.createElement("div",null,m._("Create a new audience to use this targeting option."))));return (k.createElement(v,{key:y.getUniqueID(),entry:y,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,highlighted:y===this.props.highlightedEntry}));}}),v=k.createClass({displayName:"EntryRowView",propTypes:{entry:o.object.isRequired,highlighted:o.bool,onSelect:o.func.isRequired,onHighlight:o.func},render:function(){var y=(("_5m91")+(this.props.highlighted?' '+"_5m92":''));return (k.createElement("li",{className:y,onMouseDown:this._onMouseDown,onMouseEnter:this._onMouseEnter},this._renderTitle(),k.createElement("span",{className:"_5oe5"},this._getGroupName()),k.createElement("div",{className:"_5oe8"})));},_renderTitle:function(){var y=this.props.entry,z=y.getTitle(),aa=0,ba=0,ca=y.getAuxiliaryData(),da=ca&&ca.matchedText;if(da){var ea=z.toLowerCase().indexOf(da.toLowerCase());if(ea>=0){aa=ea;ba=ea+da.length;}}var fa=z.substring(0,aa),ga=z.substring(aa,ba),ha=z.substring(ba);return (k.createElement("span",null,fa,k.createElement("span",{className:"_5olf"},ga),ha));},_getGroupName:function(){return this.props.entry.getSubtitle();},_onMouseDown:function(y){this.props.onSelect(this.props.entry,y);},_onMouseEnter:function(){this.props.onHighlight&&this.props.onHighlight(this.props.entry);}}),w={ViewRenderer:u,useLayer:true,maxEntries:q,sortEntries:function(y){y.sort(x);return y;}};function x(y,z){return y.getTitle().toLowerCase()>z.getTitle().toLowerCase()?1:-1;}e.exports=w;},null);
__d("AdsCreateLookalikeDialogCountryTypeahead.react",["AbstractTypeahead.react","AdsAudienceTypeaheadPresenter.react","AdsCreateLookalikeConfig","AdsStaticSearchSource","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=i.countries,o=k,p=o.PropTypes,q=k.createClass({displayName:"AdsCreateLookalikeDialogCountryTypeahead",propTypes:{country:p.string,onSelectAttempt:p.func.isRequired},getInitialState:function(){return {country:undefined,queryString:''};},componentWillMount:function(){this._updateSelectedCountry(this.props.country);var r=[];for(var s in n)r.push({key:s,name:this._getCountryDisplayName(s,n[s].name)});this._searchSource=new j(r,{getAllForEmptyQuery:true,limit:r.length});this._presenter=Object.assign(h,{maxEntries:r.length});},componentWillReceiveProps:function(r){this._updateSelectedCountry(r.country);},render:function(){return (k.createElement(g,{className:"_5w0y",selectedEntry:null,placeholder:m._("Choose a country to target."),presenter:this._presenter,searchSource:this._searchSource,queryString:this.state.queryString,showEntriesOnFocus:true,entriesWidthMatchContext:this.isMounted(),onSelectAttempt:this._onSelectAttempt,onChange:this._onInputChange,onBlur:this._onBlur,autoHighlight:true}));},componentDidMount:function(){this.forceUpdate();},_getCountryDisplayName:function(r){return (m._("{name} ({countryCode})",[m.param("name",n[r].name),m.param("countryCode",r)]));},_updateSelectedCountry:function(r){this.setState({country:r,queryString:r&&this._getCountryDisplayName(r)||''});},_onBlur:function(){var r=this.state.country;if(r)this.setState({queryString:this._getCountryDisplayName(r)});},_onInputChange:function(event){var r=event.target.value;if(!r){this.props.onSelectAttempt(undefined);}else this.setState({queryString:r});},_onSelectAttempt:function(r){var s=r.getUniqueID();this.props.onSelectAttempt(s);}});e.exports=q;},null);
__d("XAdsLookalikeAppCreationController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ads\/targeting\/lookalike\/app_creation\/",{});},null);
__d("AdsCreateLookalikeDialogSourceTypeahead.react",["AbstractTypeahead.react","AdsAudienceTypeaheadPresenter.react","AsyncRequest","React","SearchableEntry","WebAsyncSearchSource","XAdsLookalikeAppCreationController","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=j,q=p.PropTypes,r='/ajax/typeahead/ads_lookalike_source.php',s={},t=j.createClass({displayName:"AdsCreateLookalikeDialogSourceTypeahead",propTypes:{accountID:q.string.isRequired,source:q.instanceOf(k),onSelectAttempt:q.func.isRequired},getInitialState:function(){return {placeholder:(o._("Choose a Custom Audience, a conversion tracking pixel, or a Page.")),source:undefined,queryString:''};},componentWillMount:function(){this._updateSelectedSource(this.props.source);},componentWillReceiveProps:function(u){this._updateSelectedSource(u.source);},render:function(){return (j.createElement(g,{className:"_5w0y",selectedEntry:null,placeholder:this.state.placeholder,presenter:h,searchSource:this._getSearchSource(this.props.accountID),queryString:this.state.queryString,showEntriesOnFocus:true,entriesWidthMatchContext:this.isMounted(),onSelectAttempt:this.props.onSelectAttempt,onChange:this._onInputChange,onBlur:this._onBlur,autoHighlight:true}));},componentDidMount:function(){this._updatePlaceholder();this.forceUpdate();},_getSearchSource:function(u){if(!s[u]){var v={uri:r,data:{account_id:u}};s[u]=new l({bootstrapRequests:[v],queryRequests:[v],getAllForEmptyQuery:true});}return s[u];},_updatePlaceholder:function(){var u=false,v=(m.getURIBuilder()).getURI(),w=(new i()).setURI(v).setHandler((function(x){u=x&&x.payload;if(u)this.setState({placeholder:(o._("Choose a Custom Audience, a conversion tracking pixel, a Page, or an application."))});}.bind(this)).bind(this)).setErrorHandler(function(x){});w.send();},_updateSelectedSource:function(u){this.setState({source:u,queryString:u&&u.getTitle()||''});},_onBlur:function(){var u=this.state.source;if(u)this.setState({queryString:u.getTitle()});},_onInputChange:function(event){var u=event.target.value;if(!u){this.props.onSelectAttempt(undefined);}else this.setState({queryString:u});}});e.exports=t;},null);
__d("XAdsLookalikeSuggestedCountryController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ads\/ajax\/lookalike\/suggested_country\/",{origin_audience_id:{type:"Int",required:true}});},null);
__d("AudienceManagerLookalikeDialog.react",["AdsAccountCapabilities","AdsAccountUtils","AdsAMAudienceStore","AdsCreateLookalikeConfig","AdsCreateLookalikeDialogTooltipRangeInput.react","AdsCreateLookalikeDialogCountryTypeahead.react","AdsCreateLookalikeDialogSourceTypeahead.react","AsyncRequest","ads-cluster-constants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","LayerHideOnEscape","React","SearchableEntry","XAdsLookalikeSuggestedCountryController","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUINotice.react","XUISpinner.react","TooltipLink.react","InsightsNumberUtils","adsGKCheck","copyProperties","cx","fbt","ads-lib-formatters"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja){b.__markCompiled&&b.__markCompiled();var ka=b('ads-lib-formatters').createLimitedSigFigNumberFormatter(0,2),la=t,ma=la.PropTypes,na=j.countries,oa=o.LOOKALIKE_SOURCE_TYPE,pa=o.LOOKALIKE_CUSTOM_RATIO_LIMIT,qa={CUSTOM_AUDIENCE:(ja._("Custom Audience")),CONVERSION_PIXEL:(ja._("Conversion Pixel")),PAGE:(ja._("Page")),APPLICATION:(ja._("Application"))},ra=t.createClass({displayName:"AudienceManagerLookalikeDialog",propTypes:{accountID:ma.string.isRequired,audience:ma.object,dao:ma.object.isRequired,onAudienceAdded:ma.func.isRequired,onClose:ma.func.isRequired},getInitialState:function(){return {loading:false,isFinancialService:false,error:null,source:undefined,country:undefined,ratio:pa.MIN,minSize:undefined,maxSize:undefined};},render:function(){return (t.createElement(w,{shown:true,width:630,behaviors:{LayerHideOnEscape:s},onToggle:this._onToggle},t.createElement(ba,null,ja._("Create Lookalike Audience")),t.createElement(x,null,t.createElement("div",{className:"_wm-"},this._renderError(),this._renderDialogBody())),t.createElement(z,null,t.createElement(y,{onClick:this.props.onClose,disabled:this.state.loading}),t.createElement(aa,{use:"confirm",action:"confirm",label:ja._("Create Audience"),disabled:this.state.loading||!this._canCreate(),onClick:this._onCreateLookalike}))));},_renderDialogBody:function(){if(this.state.loading)return (t.createElement("div",{className:"_5saq"},t.createElement(da,{background:"light",size:"large"})));var sa=(t.createElement(q,{label:ja._("Size"),className:"_wn2",type:"data"},t.createElement("div",null,t.createElement("div",null,t.createElement("span",{className:"_wn3"},this.state.minSize),t.createElement("div",{className:"_wn4"},t.createElement(k,{min:pa.MIN,max:pa.MAX,step:pa.GRANULARITY,initValue:this.state.ratio,tooltip:this._getAudienceSizeText(),disabled:!this._canCreate(),onChange:this._onAudienceSizeChange})),t.createElement("span",{className:"_wn3"},this.state.maxSize)),t.createElement("p",{className:"_wn5"},ja._("Size range is based on the total audience in the country you choose. Smaller audiences most closely match your source audience. Creating a larger audience increases your potential reach, but reduces the level of similarity to your source."))))),ta=[t.createElement(q,{label:ja._("Source"),className:"_wn1",type:"data"},t.createElement(m,{accountID:this.props.accountID,source:this.state.source,onSelectAttempt:this._onSourceSelected})),t.createElement(q,{label:ja._("Country"),className:"_wn1",type:"data"},t.createElement(l,{ref:"countryTypeahead",country:this.state.country,onSelectAttempt:this._onCountrySelected}))];if(this.state.country!==undefined)ta.push(sa);if(ga('financial_service_lookalike')||h.hasCapability(i.getAccount(),g.AD_BUSINESS_FINANCIAL_SERVICE_LOOKALIKE))ta.push(t.createElement(q,null,t.createElement("div",null,t.createElement("input",{type:"checkbox",checked:this.state.isFinancialService,onChange:this._toggleFinancialService}),t.createElement(ea,{tooltip:"FCRA-compliant lookalikes are created without using age,"+' '+"gender, or race."},ja._("Use FCRA-compliant matching for financial services advertising")))));return (t.createElement("div",null,t.createElement("p",{className:"_wm_"},ja._("Reach new people who are similar to an audience you care about. Select a source and a country below, then choose an optimization.")),t.createElement(p,{className:"_wn0"},t.createElement(r,null,ta))));},componentWillMount:function(){this._init();},_init:function(){if(this.props.audience){var sa={uniqueID:this.props.audience.id,title:this.props.audience.name};sa.subtitle=qa.CUSTOM_AUDIENCE;sa.type=oa.CUSTOM_AUDIENCE;this.setState({source:new u(sa)});this._loadSuggestedCountry(this.props.audience.id);}},_canCreate:function(){return !!(this.state.source&&this.state.country);},_toggleFinancialService:function(sa){this.setState({isFinancialService:sa.target.checked});},_onSourceSelected:function(sa){var ta=this.state.source;if(sa&&(!ta||sa.getUniqueID()!==ta.getUniqueID()))this._loadSuggestedCountry(sa.getUniqueID());this.setState({source:sa});},_onCountrySelected:function(sa){this.setState({country:sa,minSize:fa.abbrevInt(this._getApproximateAudienceSize(sa,pa.MIN)),maxSize:fa.abbrevInt(this._getApproximateAudienceSize(sa,pa.MAX))});},_onAudienceSizeChange:function(sa){this.setState({ratio:parseFloat(sa),ratioChanged:true});},_getApproximateAudienceSize:function(sa,ta){var ua=Math.floor(na[sa].count*ta);return ua;},_getAudienceSizeText:function(){if(!this._canCreate())return '';var sa=this._getApproximateAudienceSize(this.state.country,this.state.ratio);return (ja._({"*":"{size} people"},[ja.param("size",ka(sa),[0,sa])]));},_renderError:function(){if(this.state.error)return (t.createElement("div",{className:"_wn6"},t.createElement(ca,{use:"warn"},this.state.error.message)));},_onCreateLookalike:function(){var sa=this.state.source,ta=this.state.country,ua=this.state.ratio,va;this.setState({error:null});var wa={accountId:this.props.accountID,lookalike_spec:{country:ta,ratio:ua,is_financial_service:this.state.isFinancialService},handleError:(function(xa,ya){this.setState({loading:false,error:ya&&ya.error});}).bind(this)};switch(sa.getType()){case oa.CUSTOM_AUDIENCE:va='createLookalikeCluster';wa.origin_audience_id=sa.getUniqueID();wa.lookalike_spec.type=o.LOOKALIKE_CUSTOM_RATIO;break;case oa.CONVERSION_PIXEL:va='createActionsLookalike';ha(wa.lookalike_spec,{pixel_ids:[sa.getUniqueID()],conversion_type:'offsite'});break;case oa.PAGE:va='createActionsLookalike';ha(wa.lookalike_spec,{page_id:sa.getUniqueID(),conversion_type:'page_like'});break;case oa.APPLICATION:va='createActionsLookalike';ha(wa.lookalike_spec,{app_id:sa.getUniqueID(),conversion_type:'engaged_app_users'});break;default:return;}this.props.dao.add[va].one((function(xa){this.setState({loading:false});this.props.onAudienceAdded(xa.id);this.props.onClose();}.bind(this)),wa);this.setState({loading:true});},_loadSuggestedCountry:function(sa){var ta=(v.getURIBuilder()).setInt('origin_audience_id',sa).getURI(),ua=(new n()).setURI(ta).setHandler((function(va){var wa=this.state.source.getUniqueID(),xa=this.refs.countryTypeahead;if(wa===sa&&!xa.state.queryString){var ya=va&&va.payload;if(na[ya])this._onCountrySelected(ya);}}.bind(this))).setErrorHandler(function(va){});ua.send();},_onToggle:function(sa){if(!sa)this.props.onClose();}});e.exports=ra;},null);
__d("AdAccountIDSearchSource",["AbstractSearchSource","SearchableEntry"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=null;for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m){"use strict";i;this.$AdAccountIDSearchSource0=m;}l.prototype.searchImpl=function(m,n,o){"use strict";var p=[];if(!m)return;if(!isNaN(m)){this.$AdAccountIDSearchSource0.fetch.validateAccountIDs.one(function(q){if(q[m].valid)p.push(new h({uniqueID:m,title:m}));n(p,m);},{adaccounts:[m]});return;}n(p,m);};l.getInstance=function(m){if(!i)i=new l(m);return i;};e.exports=l;},null);
__d("FreeTextTypeaheadPresenter",["List.react","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=h,l=k.PropTypes,m=h.createClass({displayName:"ViewRenderer",propTypes:{entries:l.array.isRequired,highlightedEntry:l.object,onSelect:l.func.isRequired,onHighlight:l.func},render:function(){var p=this.props.excludedEntries||{},q=this.props.entries.filter(function(t){return !p[t.getUniqueID()];});if(!q.length)return h.createElement("span",null);var r=q.map(this._renderRow,this),s=j("_5tbq",this.props.className);return (h.createElement("div",{className:s},h.createElement(g,{border:"none",spacing:"none"},r)));},_renderRow:function(p){return (h.createElement(n,{key:p.getUniqueID(),entry:p,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,highlighted:p===this.props.highlightedEntry}));}}),n=h.createClass({displayName:"EntryRowView",propTypes:{entry:l.object.isRequired,onSelect:l.func.isRequired,onHighlight:l.func,highlighted:l.bool},render:function(){return (h.createElement("li",{className:(("_5tbr")+(this.props.highlighted?' '+"_5tbs":'')),onMouseDown:this._onMouseDown,onMouseEnter:this._onMouseEnter},this.props.entry.getTitle()));},_onMouseDown:function(p){this.props.onSelect(this.props.entry,p);},_onMouseEnter:function(){this.props.onHighlight&&this.props.onHighlight(this.props.entry);}}),o={ViewRenderer:m,useLayer:true};e.exports=o;},null);
__d("SharedAdAccountCapabilitySelector.react",["CustomAudienceSharingCapabilities","React","XUISelector.react","areEqual","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g.USE_FOR_ADS,n=g.USE_FOR_INSIGHTS,o=i.Option,p={TARGETING:1,TARGETING_AND_INSIGHTS:2,UNSHARE:3},q=h,r=q.PropTypes,s=h.createClass({displayName:"SharedAdAccountCapabilitySelector",propTypes:{adAccountID:r.string.isRequired,capability:r.array.isRequired,description:r.string.isRequired,onUpdateCapability:r.func.isRequired,onRemoveAdAccount:r.func.isRequired},render:function(){var t=p.TARGETING_AND_INSIGHTS;if(j(this.props.capability,[m]))t=p.TARGETING;return (h.createElement("li",{className:"_5tbm"},this.props.description,h.createElement(i,{className:"_z9u",suppressed:true,size:"large",onChange:this._onChange,defaultValue:t},h.createElement(o,{value:p.TARGETING_AND_INSIGHTS},l._("Targeting and Insights")),h.createElement(o,{value:p.TARGETING},l._("Targeting Only")),h.createElement(o,{value:p.UNSHARE},l._("Stop Sharing")))));},_onChange:function(t){switch(t.value){case p.TARGETING:this.props.onUpdateCapability(this.props.adAccountID,[m]);break;case p.TARGETING_AND_INSIGHTS:this.props.onUpdateCapability(this.props.adAccountID,[m,n]);break;case p.UNSHARE:this.props.onRemoveAdAccount(this.props.adAccountID);break;}}});e.exports=s;},null);
__d("AudienceManagerCapabilityTokenizer.react",["AbstractTypeahead.react","AdAccountIDSearchSource","FreeTextTypeaheadPresenter","List.react","React","SharedAdAccountCapabilitySelector.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=k,p=o.PropTypes,q=k.createClass({displayName:"AudienceManagerCapabilityTokenizer",propTypes:{capabilities:p.object.isRequired,onUpdateAttempt:p.func.isRequired,onSelectAttempt:p.func.isRequired,onRemoveAttempt:p.func.isRequired,dao:p.object.isRequired},getInitialState:function(){return {queryString:''};},render:function(){var r=i,s={};for(var t in this.props.capabilities)s[t]=true;r.extraRendererProps={excludedEntries:s};return (k.createElement("div",null,this._renderSharedAdAccountsList(),k.createElement(g,{className:"_5tbo",selectedEntry:null,placeholder:n._("Enter an Account ID"),presenter:r,searchSource:h.getInstance(this.props.dao),queryString:this.state.queryString,onChange:this._onInputChange,onSelectAttempt:this._onSelectAttempt,autoHighlight:true,selectOnBlur:true,ref:"typeahead"})));},_renderSharedAdAccountsList:function(){if(this.props.capabilities.length===0)return null;return (k.createElement(j,{border:"none",spacing:"none",className:"_5tbp"},this._renderSharedAdAccounts()));},_renderSharedAdAccounts:function(){return Object.keys(this.props.capabilities).map(function(r){var s=r;return (k.createElement(l,{key:r,adAccountID:r,capability:this.props.capabilities[r],description:s,onUpdateCapability:this.props.onUpdateAttempt,onRemoveAdAccount:this.props.onRemoveAttempt}));}.bind(this));},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onSelectAttempt:function(r){if(r&&this.props.onSelectAttempt)this.props.onSelectAttempt(r.getUniqueID());this.setState({queryString:''});this.refs.typeahead.clearActiveEntries();}});e.exports=q;},null);
__d("AudienceManagerShareAudienceTokenizer.react",["AbstractTypeahead.react","AdAccountIDSearchSource","FreeTextTypeaheadPresenter","List.react","React","XUICloseButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=k,p=o.PropTypes,q=k.createClass({displayName:"SharedAdAccountItem",propTypes:{adAccountID:p.string.isRequired,onRemoveAdAccount:p.func.isRequired},render:function(){return (k.createElement("li",{className:"_5tbm"},k.createElement("div",{className:"_5tbn"},k.createElement(l,{size:"small",onClick:this._onRemoveAdAccount})),this.props.adAccountID));},_onRemoveAdAccount:function(){this.props.onRemoveAdAccount(this.props.adAccountID);}}),r=k.createClass({displayName:"AudienceManagerShareAudienceTokenizer",propTypes:{selectedAdAccounts:p.array.isRequired,onSelectAttempt:p.func.isRequired,onRemoveAttempt:p.func.isRequired,dao:p.object.isRequired},getInitialState:function(){return {queryString:''};},render:function(){var s=i,t={};this.props.selectedAdAccounts.forEach(function(u){t[u]=true;});s.extraRendererProps={excludedEntries:t};return (k.createElement("div",null,this._renderSharedAdAccountsList(),k.createElement(g,{className:"_5tbo",selectedEntry:null,placeholder:n._("Enter an Account ID"),presenter:s,searchSource:h.getInstance(this.props.dao),queryString:this.state.queryString,onChange:this._onInputChange,onSelectAttempt:this._onSelectAttempt,autoHighlight:true,selectOnBlur:true,ref:"typeahead"})));},_renderSharedAdAccountsList:function(){if(!this.props.selectedAdAccounts.length)return k.createElement("span",null);return (k.createElement(j,{border:"none",spacing:"none",className:"_5tbp"},this._renderSharedAdAccounts()));},_renderSharedAdAccounts:function(){return this.props.selectedAdAccounts.map(function(s){var t=s+"";return (k.createElement(q,{key:t,adAccountID:t,onRemoveAdAccount:this.props.onRemoveAttempt}));},this);},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onSelectAttempt:function(s){if(s&&this.props.onSelectAttempt)this.props.onSelectAttempt(s.getUniqueID());this.setState({queryString:''});this.refs.typeahead.clearActiveEntries();}});e.exports=r;},null);
__d("AudienceManagerShareDialog.react",["AdsAMViewActions","AudienceManagerCapabilityTokenizer.react","AudienceManagerShareAudienceTokenizer.react","AudienceManagerUIConstants","CustomAudienceSharingCapabilities","React","InfoTable.react","InfoTableRow.react","InfoTableSection.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUISpinner.react","adsGKCheck","areEqual","copyProperties","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();var ba=l,ca=ba.PropTypes,da=k.USE_FOR_ADS,ea=k.USE_FOR_INSIGHTS,fa=l.createClass({displayName:"AudienceManagerShareDialog",propTypes:{audience:ca.object.isRequired,dao:ca.object.isRequired,onUpdateAudienceCapabilities:ca.func.isRequired},getInitialState:function(){return {newCapabilities:{},loading:true};},componentWillMount:function(){this.props.dao.fetch.capabilitiesForAudience.clearCache();this.props.dao.fetch.capabilitiesForAudience.one(function(ga){var ha=(ga[0]&&ga[0].capabilities)||[];if(ha.length===0)ha={};this.setState({originalCapabilities:ha,newCapabilities:y({},ha),loading:false});}.bind(this),{audienceId:this.props.audience.id});},render:function(){return (l.createElement(p,{shown:true,width:j.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},l.createElement(u,null,l.createElement("span",null,aa._("Share {audience name}",[aa.param("audience name",this.props.audience.name)]))),l.createElement(q,null,l.createElement("div",{className:"_5rkr"},this._renderDialogBody())),l.createElement(s,null,l.createElement(r,{use:"default",action:"close",onClick:this._onCancelClick}),l.createElement(t,{disabled:this.state.loading,use:"confirm",action:"confirm",label:aa._("Update"),onClick:this._onUpdateButtonClick}))));},_renderDialogBody:function(){if(this.state.loading){return (l.createElement("div",{className:"_5saq"},l.createElement("p",null,aa._("Please wait while we find the shared accounts...")),l.createElement(v,{size:"large"})));}else return (l.createElement("div",null,this._renderDescriptionByGK(),l.createElement(m,{className:"_4x0p"},l.createElement(o,null,l.createElement(n,{label:aa._("Account IDs"),type:"data"},this._renderTokenizer())))));},_renderDescriptionByGK:function(){if(!w('audience_insights_v1'))return (l.createElement("div",null,l.createElement("p",null,aa._("Enter an ad account ID to give them permission to target ads for this audience. They will not be able to edit or share your audience."))));return (l.createElement("p",null,aa._("Enter an ad account ID to give them permission to target ads and see insights for this audience. They will not be able to edit or share your audience.")));},_renderTokenizer:function(){if(!w('audience_insights_v1')){var ga=Object.keys(this.state.newCapabilities);return (l.createElement("div",null,l.createElement(i,{selectedAdAccounts:ga,onSelectAttempt:this._onAddAdAccountAttempt,onRemoveAttempt:this._onRemoveAdAccountAttempt,dao:this.props.dao})));}return (l.createElement("div",null,l.createElement(h,{capabilities:this.state.newCapabilities,dao:this.props.dao,onRemoveAttempt:this._onRemoveAdAccountAttempt,onSelectAttempt:this._onAddAdAccountAttempt,onUpdateAttempt:this._onUpdateCapabilityAttempt})));},_onUpdateButtonClick:function(){var ga=this.state.originalCapabilities,ha=this.state.newCapabilities,ia={},ja=[];for(var ka in ga)if(!ha[ka]){ja.push(ka);}else if(!x(ga[ka],ha))ia[ka]=ha[ka];for(var la in ha)if(!ga[la])ia[la]=ha[la];this.props.onUpdateAudienceCapabilities(this.props.audience.id,ia,ja);g.closeShareAudienceDialog();},_onAddAdAccountAttempt:function(ga){var ha=this.state.newCapabilities;if(!w('audience_insights_v1')){ha[ga]=[da];}else ha[ga]=[da,ea];this.setState({newCapabilities:ha});},_onRemoveAdAccountAttempt:function(ga){var ha=this.state.newCapabilities;delete ha[ga];this.setState({newCapabilities:ha});},_onUpdateCapabilityAttempt:function(ga,ha){var ia=this.state.newCapabilities;ia[ga]=ha;this.setState({newCapabilities:ia});},_onToggle:function(){g.closeShareAudienceDialog();},_onCancelClick:function(){g.closeShareAudienceDialog();}});e.exports=fa;},null);
__d("AudienceManagerSavedTargetSpecDialog.react",["AdsCommonTargetingViewController.react","AudienceManagerSavedTargetSpecUtils","AudienceManagerTextInput","AudienceManagerUIConstants","Grid.react","InfoTable.react","InfoTableRow.react","InfoTableSection.react","LayerHideOnEscape","React","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=k.GridItem,z=p,aa=z.PropTypes,ba=p.createClass({displayName:"AudienceManagerSavedTargetSpecDialog",propTypes:{accountID:aa.string.isRequired,dao:aa.object.isRequired,onClose:aa.func,title:aa.string.isRequired,saveButtonLabel:aa.string.isRequired,savedTargetSpec:aa.object,onTargetSpecChanged:aa.func,onTargetSpecCreated:aa.func},getInitialState:function(){return {name:this.props.savedTargetSpec?this.props.savedTargetSpec.audience_name:''};},componentWillMount:function(){this._controller=new g();this._controller.setConfiguration(h.getDialogLeftSideConfiguration());this._controller.setExtraData(h.getExtraData(this.props.accountID,this.props.dao));this._rightSideController=new g();this._rightSideController.setConfiguration(h.getDialogRightSideConfiguration());this._rightSideController.setExtraData(h.getExtraData(this.props.accountID,this.props.dao));if(this.props.savedTargetSpec){this._controller.setApiSpec(this.props.savedTargetSpec.target_spec);this._rightSideController.setApiSpec(this.props.savedTargetSpec.target_spec);}this._controller.subscribeApiChange(this._handleSpecChanged);},render:function(){return (p.createElement(q,{width:j.STS_DIALOG_WIDTH,fixedTopPosition:j.DEFAULT_DIALOG_TOP_POS,onToggle:this._handleToggle,behaviors:{LayerHideOnEscape:o},shown:true},this._renderDialogTitle(),this._renderDialogBody(),this._renderDialogFooter()));},componentWillUnmount:function(){this._controller.destroy();this._controller.clearAllState();this._rightSideController.destroy();this._rightSideController.clearAllState();},_renderDialogTitle:function(){return (p.createElement(v,null,this.props.title));},_renderDialogBody:function(){var ca=p.createElement(k,{cols:2},p.createElement(y,{className:"_3gzt"},p.createElement(l,{className:"_5rkp"},p.createElement(n,null,p.createElement(m,{label:x._("Name"),className:"_2pi3"},p.createElement(i,{value:this.state.name,onChange:this._handleNameChanged})))),p.createElement("div",null,this._controller.render())),p.createElement(y,{className:"_3gzu"},this._rightSideController.render()));return (p.createElement(r,null,ca));},_handleNameChanged:function(ca){this.setState({name:ca});},_renderDialogFooter:function(){return (p.createElement(t,{leftContent:this._renderLeftFooter()},p.createElement(s,{use:"default",onClick:this._handleClose}),p.createElement(u,{use:"confirm",action:"confirm",onClick:this._handleSaveClicked,disabled:this._shouldDisableSave(),label:this.props.saveButtonLabel})));},_renderLeftFooter:function(){return p.createElement("div",null,j.STS_FORM_INSTRUCTION);},_handleSpecChanged:function(ca){this.forceUpdate();},_shouldDisableSave:function(){return !this.state.name||!this.state.name.trim()||!h.validateSpec(this._controller.getApiSpec());},_handleSaveClicked:function(){if(!this.props.savedTargetSpec){this.props.onTargetSpecCreated(this.state.name,this._controller.getApiSpec());}else{var ca={name:this.state.name,targetSpec:this._controller.getApiSpec()};this.props.onTargetSpecChanged(this.props.savedTargetSpec,ca);}this._handleClose();},_handleToggle:function(){this._handleClose();},_handleClose:function(){this.props.onClose&&this.props.onClose();}});e.exports=ba;},null);
__d("WebsiteCustomAudienceRuleSentence.react",["intlList","React","WebsiteCustomAudienceTrafficType","WebsiteCustomAudienceModel","dotAccess","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j.Operations,o=h,p=o.PropTypes,q=h.createClass({displayName:"WebsiteCustomAudienceRuleSentence",propTypes:{audience:p.object.isRequired},componentWillReceiveProps:function(r){if(this.props.audience&&this.props.audience!=r.audience){var s=this._setupAudience(r.audience);this.setState({audience:s});}},getInitialState:function(){var r=this._setupAudience(this.props.audience);return {audience:r};},_setupAudience:function(r){var s={};s.retention_days=r.retention_days;var t=k(r,'data_source.creation_params');if(!t)return null;var u=JSON.parse(t);if(r.rule){var v=n.deserializeRule(r.rule);if(!v||!n.validateRule(v))return null;s.inclusion_rules=[v];if(v.event||v.clauses.length>1){s.trafficType=i.CUSTOM;}else if(parseInt(u.traffic_type,10)===1||j.RuleTemplates.isAllVisitors(r.rule)){s.trafficType=i.ALL_WEBSITE_VISITORS;}else s.trafficType=i.SPECIFIC_PAGE_VISITORS;}else if(r.included_custom_audiences){s.inclusion_rules=[];s.exclusion_rules=[];s.trafficType=Number(u.traffic_type);var w=r.included_custom_audiences,x=r.excluded_custom_audiences||[];for(var y=0;y<w.length;y++){var z=w[y];s.retention_days=z.retention_days;var aa=n.deserializeRule(z.rule);aa.id=z.id;s.inclusion_rules.push(aa);}for(y=0;y<x.length;y++){var ba=x[y];aa=n.deserializeRule(ba.rule);aa.id=ba.id;s.exclusion_rules.push(aa);}if(s.trafficType==i.CHURNED_VISITORS)s.retention_days=x[0].retention_days;}return s;},render:function(){if(!this.state.audience)return h.createElement("div",null,"--");try{switch(this.state.audience.trafficType){case i.ALL_WEBSITE_VISITORS:return this._renderAllWebsiteVisitors(this.state.audience);case i.SPECIFIC_PAGE_VISITORS:return this._renderSpecificPageVisitors(this.state.audience);case i.SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION:return this._renderSpecificPageVisitorsWithExclusion(this.state.audience);case i.CHURNED_VISITORS:return this._renderChurnedVistors(this.state.audience);case i.CUSTOM:return this._renderCustomCombination(this.state.audience);default:}}catch(r){}return h.createElement("div",null,"--");},_renderAllWebsiteVisitors:function(r){var s=l._("Anyone who visited your website");return (h.createElement("div",null,s,h.createElement("br",null),l._("In the last: {number of days} days.",[l.param("number of days",r.retention_days)])));},_renderSpecificPageVisitors:function(r){return (h.createElement("div",null,this._renderVisitText(r.inclusion_rules[0],r.retention_days,true)));},_renderSpecificPageVisitorsWithExclusion:function(r){var s=this._renderVisitText(r.inclusion_rules[0],r.retention_days,true),t=this._renderVisitText(r.exclusion_rules[0],r.retention_days,false);return (h.createElement("div",null,s,h.createElement("br",null),t));},_renderVisitText:function(r,s,t){var u=r.clauses[0].tokens,v=r.clauses[0].filter,w=g(u,g.CONJUNCTIONS.OR),x=h.createElement("div",null,l._("People who visited: {websites}",[l.param("websites",w)]),h.createElement("br",null),l._("In the last {number of days} days.",[l.param("number of days",s)])),y=h.createElement("div",null,l._("But who did not visit: {websites}",[l.param("websites",w)]),h.createElement("br",null),l._("In the last {number of days} days.",[l.param("number of days",s)]));if(v=='i_contains'){x=h.createElement("div",null,l._("People who visited URLs containing: {websites}",[l.param("websites",w)]),h.createElement("br",null),l._("In the last {number of days} days.",[l.param("number of days",s)]));y=h.createElement("div",null,l._("But did not visit URLs containing: {websites}",[l.param("websites",w)]),h.createElement("br",null),l._("In the last {number of days} days.",[l.param("number of days",s)]));}return (t?x:y);},_renderChurnedVistors:function(r){var s=r.retention_days;return (h.createElement("div",null,l._("People who visited your website"),h.createElement("br",null),l._("In the last 180 days."),h.createElement("br",null),l._("But haven't returned in: {notDuration} days",[l.param("notDuration",s)])));},_renderCustomCombination:function(r){var s=r.retention_days,t=null,u=null;if(r.inclusion_rules)t=this._parseCustomAudiences(r.inclusion_rules,true);if(r.exclusion_rules)u=this._parseCustomAudiences(r.exclusion_rules,false);return (h.createElement("div",null,t,h.createElement("br",null),u,h.createElement("div",null,l._("In the last {number of days} days.",[l.param("number of days",s)]))));},_parseCustomAudiences:function(r,s){var t=r.length,u=[];for(var v=0;v<t;v++){if(v===0){u.push(h.createElement("div",{key:"condition_text_"+v},l._({"Include":"Include traffic that meets the following conditions:","Exclude":"Exclude traffic that meets the following conditions:"},[l['enum'](s?'Include':'Exclude',{Include:"Include",Exclude:"Exclude"})])));}else u.push(h.createElement("div",{key:"condition_text_"+v},l._("Or, traffic that meets the following conditions:")));u.push(this._parseRule(r[v]));}return u;},_parseRule:function(r){var s=n.isEventBasedRule(r),t=r.clauses.length,u=[];for(var v=0;v<t;v++)u.push(h.createElement("div",{key:"rule_clause_"+v},this._parseClause(r.clauses[v],!s,v===t-1)));return u;},_parseClause:function(r,s,t){var u=r.tokens,v=g(u,g.CONJUNCTIONS.OR);if(s){return (h.createElement("div",null,l._({"":"URL {operator} {key words}"," And":"URL {operator} {key words} And"},[l.param("operator",this._getOperatorText(r.filter)),l.param("key words",v),l['enum'](t?'':' And',{"":""," And":" And"})])));}else return (h.createElement("div",null,l._({"":"Event {custom_field} {operator} {key words}"," And":"Event {custom_field} {operator} {key words} And"},[l.param("custom_field",r.customfield),l.param("operator",this._getOperatorText(r.filter)),l.param("key words",v),l['enum'](t?'':' And',{"":""," And":" And"})])));},_getOperatorText:function(r){switch(r){case 'i_contains':return (l._("Contains (case insensitive)"));case 'i_not_contains':return (l._("Does not contain (case insensitive)"));case 'contains':return (l._("Contains (case sensitive)"));case 'not_contains':return (l._("Does not contain (case sensitive)"));case 'eq':return (l._("Equal to (case sensitive)"));case 'neq':return (l._("Not equal to (case sensitive)"));case 'lt':return (l._("Less than"));case 'lte':return (l._("Less than or equal to"));case 'gt':return (l._("Greater than"));case 'gte':return (l._("Greater than or equal to"));case 'regex_match':return (l._("Matches regular expression"));default:m(true);}}});e.exports=q;},null);
__d("AudienceManagerPlacement",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({NEW_ADS_MANAGER:null,POWER_EDITOR:null,STAND_ALONE:null});e.exports=h;},null);
__d("AdsAMViewStore",["AdsAMActionTypes","AdsDispatcher","Arbiter","ImmutableObject","StrSet","dotAccess"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m,n,o,p,q,r,s,t,u,v,w;function x(){m={showCreateCustomAudienceDialog:false,showDeleteDialog:false,showPixelDialog:false,showRegularEditDialog:false,showSavedAudienceEditDialog:false,showSavedAudienceCreateDialog:false,showWCADialog:false,showMACADialog:false,showShareDialog:false,showLookalikeDialog:false,showSavedTargetSpecDialog:false,showBulkDeleteDialog:false,showOptOutDialog:false,showFilterPane:false};n=null;o=null;p=null;q=null;r={name:true,type:true,source:true,size:true,status:true,dateCreated:true,audienceID:false,sharing:false,debug:true};s=false;t=false;u=null;v=false;w=new k();}x();var y=Object.assign(new i(),{getViewState:function(){return new j(m);},getAudienceIdClicked:function(){return n;},hasFilterContent:function(){return v;},getNameFilter:function(){return o?o.name:null;},setNameFilter:function(z){v=true;o=o||{};o.name=z;},getCustomAudienceAfterCursor:function(){return p;},getSavedTargetSpecAfterCursor:function(){return q;},getColumnsShown:function(){return r;},getFilterSet:function(){return u;},getSelectedAudienceIDs:function(){return w.toArray();},isFiltering:function(){return s;},isLoadingMoreAudiences:function(){return t;},dispatchToken:h.register(function(z){var aa=z.action,ba=true;switch(aa.actionType){case g.VIEW_SHOW_CREATE_CA_DIALOG:m.showCreateCustomAudienceDialog=true;break;case g.VIEW_CLOSE_CREATE_CA_DIALOG:m.showCreateCustomAudienceDialog=false;break;case g.VIEW_SHOW_DELETE_AUDIENCE_DIALOG:m.showDeleteDialog=true;n=aa.audienceId;break;case g.VIEW_CLOSE_DELETE_AUDIENCE_DIALOG:m.showDeleteDialog=false;n=null;break;case g.VIEW_SHOW_PIXEL_DIALOG:m.showPixelDialog=true;n=aa.audienceId;break;case g.VIEW_CLOSE_PIXEL_DIALOG:m.showPixelDialog=false;break;case g.VIEW_SHOW_REGULAR_EDIT_DIALOG:m.showRegularEditDialog=true;n=aa.audienceId;break;case g.VIEW_CLOSE_REGULAR_EDIT_DIALOG:m.showRegularEditDialog=false;n=null;break;case g.VIEW_SHOW_WCA_DIALOG:m.showWCADialog=true;n=aa.audienceId;break;case g.VIEW_CLOSE_WCA_DIALOG:m.showWCADialog=false;n=null;break;case g.VIEW_SHOW_MACA_DIALOG:m.showMACADialog=true;break;case g.VIEW_CLOSE_MACA_DIALOG:m.showMACADialog=false;break;case g.VIEW_SHOW_SHARE_AUDIENCE_DIALOG:m.showShareDialog=true;n=aa.audienceId;break;case g.VIEW_CLOSE_SHARE_AUDIENCE_DIALOG:m.showShareDialog=false;n=null;break;case g.VIEW_SHOW_LOOKALIKE_DIALOG:m.showLookalikeDialog=true;n=aa.audienceId;break;case g.VIEW_CLOSE_LOOKALIKE_DIALOG:m.showLookalikeDialog=false;n=null;break;case g.VIEW_SHOW_SAVED_AUDIENCE_EDIT_DIALOG:m.showSavedAudienceEditDialog=true;n=aa.audienceId;break;case g.VIEW_CLOSE_SAVED_AUDIENCE_EDIT_DIALOG:m.showSavedAudienceEditDialog=false;break;case g.VIEW_SHOW_SAVED_AUDIENCE_CREATE_DIALOG:m.showSavedAudienceCreateDialog=true;break;case g.VIEW_CLOSE_SAVED_AUDIENCE_CREATE_DIALOG:m.showSavedAudienceCreateDialog=false;break;case g.VIEW_SHOW_SAVED_TARGET_SPEC_DIALOG:m.showSavedTargetSpecDialog=true;n=aa.audienceId;break;case g.VIEW_CLOSE_SAVED_TARGET_SPEC_DIALOG:m.showSavedTargetSpecDialog=false;n=null;break;case g.VIEW_SHOW_BULK_DELETE_DIALOG:m.showBulkDeleteDialog=true;break;case g.VIEW_CLOSE_BULK_DELETE_DIALOG:m.showBulkDeleteDialog=false;break;case g.VIEW_SHOW_OPT_OUT_DIALOG:m.showOptOutDialog=true;n=aa.audienceId;break;case g.VIEW_CLOSE_OPT_OUT_DIALOG:m.showOptOutDialog=false;n=null;break;case g.VIEW_CUSTOM_AUDIENCE_CURSOR_CHANGE:if(l(aa,'paging.cursors.after')){p=l(aa,'paging.cursors.after');}else p=null;ba=false;break;case g.VIEW_SAVED_TARGET_SPEC_CURSOR_CHANGE:if(l(aa,'paging.cursors.after')){q=l(aa,'paging.cursors.after');}else q=null;ba=false;break;case g.VIEW_INIT_COLUMN_DISPLAY:r=aa.columnsShown;ba=false;break;case g.VIEW_COLUMN_DISPLAY_CHANGE:r[aa.column]=aa.show;break;case g.VIEW_SHOW_FILTER_PANE:m.showFilterPane=true;break;case g.VIEW_HIDE_FILTER_PANE:m.showFilterPane=false;break;case g.VIEW_UPDATE_FILTER_SET:v=true;u=aa.filterSet;break;case g.VIEW_UPDATE_FILTERING_STATE:s=aa.isFiltering;break;case g.VIEW_UPDATE_LOADING_MORE_AUDIENCES:t=aa.isLoadingMoreAudiences;break;case g.VIEW_CLICK_AUDIENCE_CHECKBOX:if(aa.selected){w.add(aa.audienceID);}else w.remove(aa.audienceID);break;case g.VIEW_CLEAR_AUDIENCE_SELECTION:w=new k();break;default:ba=false;break;}if(ba)y.inform('change');})});e.exports=y;},null);
__d("AdsCommonTargetingSentencesRenderer.react",["React","XUIGrayText.react","XUIText.react","cx","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=g,n=m.PropTypes,o=g.createClass({displayName:"AdsCommonTargetingSentencesRenderer",propTypes:{sentences:n.arrayOf(n.oneOfType([n.object,n.string])).isRequired},render:function(){var p=this.props.sentences.map(this._renderSentence);return (g.createElement("ul",null,p));},_renderSentence:function(p){if(!p.content)return g.createElement("li",{key:p},p);var q=p.children.reduce(function(r,s){return r+s;},p.content);return (g.createElement("li",{className:"_3v3m",key:q},g.createElement(i,{size:"small"},k._("{category name, ends with colon} {list of selected options}",[k.param("category name, ends with colon",g.createElement(h,null,p.content)),k.param("list of selected options",l(p.children,l.CONJUNCTIONS.NONE))]))));}});e.exports=o;},null);
__d("adsFormatErrorMessage",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h){h=h||{};var i=h.error_user_msg||h.message||'Unknown error';if(h.error_subcode&&!i.contains(h.error_subcode))i+=(" (#"+h.code+"."+h.error_subcode+")");return i;}e.exports=g;},null);
__d("isValidTargetingSpec",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i){if(!i||Object.keys(i).length===0)return false;var j=i.geo_locations&&typeof i.geo_locations==='object'&&Object.keys(i.geo_locations).length>0,k=i.custom_audiences&&Array.isArray(i.custom_audiences)&&i.custom_audiences.length>0,l=i.engagement_specs&&Array.isArray(i.engagement_specs)&&i.engagement_specs.length>0;if(!j&&!k&&!l)return false;return true;}h.errorMessage=g._("Your audience targeting is incomplete. You must either select location targeting or use a Custom Audience.");e.exports=h;},null);
__d("AdsTargetingEstimatedReach.react",["GraphAPI","LoadingIndicator.react","React","XUINotice.react","adsFormatErrorMessage","areEqual","cachedGraphAPI","fbt","ads-lib-formatters","isValidTargetingSpec"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=i,r=q.PropTypes,s=o.createIntlLongNumberFormatter(0),t=i.createClass({displayName:"AdsTargetingEstimatedReach",propTypes:{width:r.number,targetingApiSpec:r.object.isRequired,accountID:r.string.isRequired},getInitialState:function(){return {loading:false,estimates:null,error:null};},componentWillMount:function(){this.setState({loading:true,estimates:null,error:null});this._updateEstimatedReach(this.props);},componentWillReceiveProps:function(u){if(l(this.props,u))return;this.setState({loading:true,estimates:null,error:null},function(){return this._updateEstimatedReach(u);}.bind(this));},_updateEstimatedReach:function(u){if(!p(u.targetingApiSpec)){this.setState({loading:false,estimates:null,error:p.errorMessage});return;}m(g('2.2').adaccount(u.accountID).edge('reachestimate')).get({targeting_spec:u.targetingApiSpec}).done(function(v){if(!this.isMounted())return;var w=null;if(!v.estimate_ready){w=n._("It will take up to 30 minutes to calculate the size of this audience. You can continue creating this ad or come back and select this audience again to view the potential reach");v=null;}this.setState({loading:false,estimates:v,error:w});}.bind(this),function(v){if(!this.isMounted())return;this.setState({loading:false,estimates:null,error:k(v)});}.bind(this));},render:function(){return (i.createElement("div",{style:{width:this.props.width}},this._renderLoadingIndicator(),this._renderEstimatedReach(),this._renderError()));},_renderLoadingIndicator:function(){if(this.state.loading)return i.createElement(h,{size:"small",color:"blue"});return null;},_renderEstimatedReach:function(){if(!this.state.estimates)return null;return (i.createElement("div",null,n._("Potential Reach:")," ",n._({"*":"{num_of_people} people"},[n.param("num_of_people",s(this.state.estimates.users),[0,this.state.estimates.users])])));},_renderError:function(){if(!this.state.error)return null;return (i.createElement(j,null,n._("Accurate information about your audience size isn't available: {error message}",[n.param("error message",this.state.error)])));}});e.exports=t;},null);
__d("TargetingSentences.react",["GraphAPI","React","adsGKCheck","cachedGraphAPI","cx","fbt","isValidTargetingSpec"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=h,o=n.PropTypes,p=h.createClass({displayName:"TargetingSentences",propTypes:{targetingApiSpec:o.object.isRequired,accountID:o.string.isRequired},getInitialState:function(){return {sentences:[]};},componentWillMount:function(){this._updateTargetingSentencesIfValid(this.props);},componentWillReceiveProps:function(q){this._updateTargetingSentencesIfValid(q);},_updateTargetingSentencesIfValid:function(q){if(!m(q.targetingApiSpec))return;var r=i('ads_migration_2_3_targeting')?g('2.3'):g('2.2');j(r.adaccount(q.accountID).edge('targetingsentencelines')).get({discard_placements:true,targeting_spec:q.targetingApiSpec}).done(function(s){if(this.isMounted())this.setState({sentences:s.targetingsentencelines});}.bind(this));},render:function(){var q=[];if(!this.state.sentences.length){q.push(h.createElement("li",{key:"all"},l._("Everyone")));}else q=this.state.sentences.map(function(r,s){if(!r.content)return h.createElement("li",{key:r},r);return (h.createElement("li",{key:r.content},h.createElement("div",null,r.content),h.createElement("ul",{className:"_xg0 pll"},(r.children||[]).map(function(t,u){return (h.createElement("li",{key:t},t));}))));});return (h.createElement("div",{className:"_xg1","data-testid":"targeting-estimate-feedback"},h.createElement("span",{className:"fwb"},l._("Audience Details:")),h.createElement("ul",{className:"_xg2 pll pts"},q)));}});e.exports=p;},null);
__d("AdsPromotableAppStore",["AdsBaseConnectionObjectStore","AdsConnectionObjectUtils"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(){if(g!==null)g.apply(this,arguments);}k.prototype.__filterConnectionObject=function(m){return h.isApp(m);};var l=new k();e.exports=l;},null);
__d("AdsPromotableEventStore",["AdsBaseConnectionObjectStore","AdsConnectionObjectUtils"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(){if(g!==null)g.apply(this,arguments);}k.prototype.__filterConnectionObject=function(m){return h.isEvent(m);};var l=new k();e.exports=l;},null);
__d("AdsPromotablePageStore",["AdsBaseConnectionObjectStore","AdsConnectionObjectUtils"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(){if(g!==null)g.apply(this,arguments);}k.prototype.__filterConnectionObject=function(m){return h.isPage(m);};var l=new k();e.exports=l;},null);
__d("AdsTargetingConnectionsLoggingEvents",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={CHANGE_TARGETING_TYPE:'connections_change_targeting_type',CLEAR_TARGETING:'connections_clear_targeting',CLOSED_VIDEO_NUX:'connections_video_nux_closed',CLOSED_CONNECTIONS_UI_NUX:'connections_ui_nux_closed',PE_TARGETING_DIALOG_CANCELLED:'pe_targeting_dialog_cancelled',PE_TARGETING_DIALOG_CONFIRMED:'pe_targeting_dialog_confirmed',PE_TARGETING_DIALOG_OPENED:'pe_targeting_dialog_opened',SELECT_MENU:'connections_select_menu',UPDATE_ENGAGEMENT_SPECS:'connections_update_engagement_specs',UPDATE_EXCLUDED_CONNECTIONS:'connections_update_excluded_connections',UPDATE_EXCLUDED_ENGAGEMENT_SPECS:'connections_update_excluded_engagement_specs',UPDATE_FRIENDS_OF_CONNECTIONS:'connections_update_friends_of_connections',UPDATE_INCLUDED_CONNECTIONS:'connections_update_included_connections',VIDEO_INFO_LOAD_TIME:'video_info_load_time',VIDEOS_LOAD_TIME:'videos_load_time',PAGES_LOAD_TIME:'pages_load_time'};e.exports=g;},null);
__d("compactArray",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h){var i=[];for(var j=0;j<h.length;++j){var k=h[j];if(k!=null)i.push(k);}return i;}e.exports=g;},null);
__d("AdsConnectionsUIUtils",["AdsAPIObjectives","AdInterfacesUiLogger","AdsAccountCapabilities","AdsAccountUtils","AdsDestinationTypes","AdsLoadState","AdsLoadStateUtils","AdsPromotableAppStore","AdsPromotableEventStore","AdsPromotablePageStore","AdsTargetingConnectionsLabels","AdsTargetingConnectionsLoggingEvents","adsGKCheck","compactArray","invariant","AdsTargetingConnectionsMenuOptions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=b('AdsTargetingConnectionsMenuOptions').connectionStatuses,w=b('AdsTargetingConnectionsMenuOptions').connectionsType,x=b('AdsTargetingConnectionsMenuOptions').menuOptions,y=b('AdsTargetingConnectionsMenuOptions').optionName,z='exclude',aa='friends';function ba(wa,xa){if(xa===null)return wa;if(xa===v.ADVANCED)return v.ADVANCED;if(wa===v.ALL)return xa;return wa;}function ca(wa,xa,ya){var za=[];for(var ab in xa){var bb=xa[ab];if(bb.length>0)za.push({type:ab,destinations:bb});}if(za.length>1)return v.ADVANCED;if(za.length===0)return ba(v.ALL,ya);var cb=za[0];switch(cb.type){case w.includedConnection:case w.friendsOfConnection:case w.excludedConnection:var db=da(wa,cb.destinations);if(db===l.LOADING)return db;return ba(db,ya);}if(ya===v.VIDEOS||ya===v.ADS)return ya;return v.ADVANCED;}function da(wa,xa){var ya=xa.map(function(fb){return fb.id;}),za=n.getAllFor(wa,ya),ab=p.getAllFor(wa,ya),bb=o.getAllFor(wa,ya);if(m.anyLoading(za,bb,ab))return l.LOADING;var cb=m.getLoadedValues(za),db=m.getLoadedValues(ab),eb=m.getLoadedValues(bb);if(cb.length!==0&&cb.length===xa.length)return v.APPS;if(db.length!==0&&db.length===xa.length)return v.PAGES;if(eb.length!==0&&eb.length===xa.length)return v.EVENTS;return v.ADVANCED;}function ea(wa,xa,ya){var za=xa.excludedConnections||[],ab=xa.includedConnections||[],bb=xa.friendsOfConnections||[];if(za.length!==0){switch(wa){case v.APPS:return y.excludeConnectedToApp;case v.PAGES:return y.excludeConnectedToPage;case v.EVENTS:return y.excludeConnectedToEvent;}return null;}if(ab.length!==0){switch(wa){case v.APPS:return y.connectedToApp;case v.PAGES:return y.connectedToPage;case v.EVENTS:return y.connectedToEvent;}return null;}if(bb.length!==0){switch(wa){case v.APPS:return y.friendsConnectedToApp;case v.PAGES:return y.friendsConnectedToPage;case v.EVENTS:return y.friendsConnectedToEvent;}return null;}return ya;}function fa(){h.log(r.PE_TARGETING_DIALOG_CANCELLED);}function ga(){h.log(r.PE_TARGETING_DIALOG_CONFIRMED);}function ha(){h.log(r.PE_TARGETING_DIALOG_OPENED);}function ia(wa,xa,ya){var za=s('ads_cf_event_engagement')&&xa===g.EVENT_RESPONSES,ab=j.hasCapabilityFromList(wa,i.CONNECTIONS_VIDEO_UI_V2),bb=(ya&&(ya.showAdEngagementOption)&&j.hasCapabilityFromList(wa,i.CONNECTIONS_AD_ENGAGEMENT_UI_V2)),cb=j.hasCapabilityFromList(wa,i.CONNECTIONS_UI_V2),db=xa===g.MOBILE_APP_ENGAGEMENT,eb=xa===g.MOBILE_APP_INSTALLS||xa===g.MOBILE_APP_ENGAGEMENT,fb=xa===g.EVENT_RESPONSES;return {canSeeEventEngagementOptions:za,canSeeVideoOptions:ab,canSeeAdsOptions:bb,canSeeConnectionsEditorV2:cb,shouldHideAppConnections:eb,isMobileAppEngagementObjective:db,canQueryEvents:fb};}function ja(wa,xa){return (!!wa&&!!xa&&xa.indexOf(z)>-1);}function ka(wa,xa){return (!!wa&&!!xa&&xa.indexOf(aa)>-1);}function la(wa,xa){return ja(wa,xa);}function ma(wa){var xa=t([x.pageOptions,(wa&&wa.shouldHideAppConnections)?(void 0):x.appOptions,x.eventOptions,(wa&&wa.canSeeVideoOptions)?x.videoOptions:(void 0),(wa&&wa.canSeeAdsOptions)?x.adsOptions:(void 0),{name:y.menuSeparator},x.advancedOptions]);if(wa)xa=oa(xa,!!wa.shouldHideExcludedConnections,!!wa.shouldHideFriendsOfConnections);return xa;}function na(wa,xa,ya){var za={name:wa.name,toggleName:wa.toggleName,children:[]};if(wa.children)za.children=wa.children.filter(function(ab){var bb=ja(xa,ab.toggleName),cb=ka(ya,ab.toggleName);return !bb&&!cb;});return za;}function oa(wa,xa,ya){return wa.map(function(za){return na(za,xa,ya);});}function pa(wa,xa){return {label:q.apps,options:na(x.appOptions,wa,xa),placeholder:q.addApp,searchSourceOptionsValidEntryTypes:[k.APP],secondPlaceholder:q.addAnotherApp};}function qa(wa,xa){return {label:q.events,options:na(x.eventOptions,wa,xa),placeholder:q.addEvent,searchSourceOptionsValidEntryTypes:[k.EVENT],secondPlaceholder:q.addAnotherEvent};}function ra(wa,xa){return {label:q.pages,options:na(x.pageOptions,wa,xa),placeholder:q.addPage,searchSourceOptionsValidEntryTypes:[k.PAGE,k.PLACE,k.PAGE_AND_PLACE],secondPlaceholder:q.addAnotherPage};}function sa(wa,xa){return {label:q.videos,options:na(x.videoOptions,wa,xa)};}function ta(wa,xa){var ya=x,za=ya.adsOptions;return {label:q.ads,options:na(za,wa,xa)};}function ua(wa,xa,ya){xa=!!xa;ya=!!ya;switch(wa){case v.ALL:case v.NONE:return {label:q.addConnection};case v.ADVANCED:return {label:q.advancedCombinations};case v.APPS:return pa(xa,ya);case v.EVENTS:return qa(xa,ya);case v.PAGES:return ra(xa,ya);case v.VIDEOS:return sa(xa,ya);case v.ADS:return ta(xa,ya);}u(true);return {};}var va={getConfig:ua,getConnectionsProperties:ia,getConnectionStatus:ca,getSelectedOption:ea,getMenuOptions:ma,logDialogCancelled:fa,logDialogConfirmed:ga,logDialogOpened:ha,shouldHideOption:la};e.exports=va;},null);
__d("AdsCommonTargetingViewWrapper.react",["AdsCommonTargetingViewController.react","AdsConnectionsUIUtils","React","areEqual"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=600,n=i.createClass({displayName:"AdsCommonTargetingViewWrapper",propTypes:{account:l.object.isRequired,targetingAPISpec:l.object.isRequired,onTargetingChange:l.func.isRequired,width:l.number},shouldComponentUpdate:function(o){return !j(this.props.targetingAPISpec,o.targetingAPISpec);},componentWillMount:function(){var o=this._getConnectionEditorConfig(),p=new g();p.subscribeApiChange(this.props.onTargetingChange);p.setConfiguration([{component:'SectionDivider'},{component:'AudienceEditor'},{component:'LocationEditor'},{component:'DemographicsEditor'},{component:'LanguagesEditor'},{component:'AdvancedDemographicsDropdownEditor'},{component:'SectionDivider'},{component:'InterestsEditor'},{component:'SectionDivider'},{component:'BehaviorsEditor'},{component:'SectionDivider'},{component:'CategoriesEditor'},o]);p.setExtraData({accountID:this.props.account.account_id,defaultWidth:this.props.width||m,destinationData:{},objectiveData:{}});p.setApiSpec(this.props.targetingAPISpec);this.setState({targetingController:p});},_getConnectionEditorConfig:function(){var o=h.getConnectionsProperties(this.props.account.capabilities,null,{showAdEngagementOption:true});return {component:'ConnectionsEditor',customProperties:o};},componentWillUnmount:function(){this.state.targetingController.destroy();},render:function(){return this.state.targetingController.render();}});e.exports=n;},null);
__d("AdsSavedAudienceTargetingDialogBody.react",["AdsAccountStore","AdsCommonTargetingViewWrapper.react","AdsInfoTable.react","AdsInfoTableRow.react","AdsInfoTableSection.react","AdsLoadState","AdsTargetingEstimatedReach.react","AdsTextInput.react","LeftRight.react","React","StoreAndPropBasedStateMixin","TargetingSentences.react","XUISpinner.react","fbt","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=p,w=v.PropTypes,x=600,y=p.createClass({displayName:"AdsSavedAudienceTargetingDialogBody",mixins:[q(g)],propTypes:{accountID:w.string.isRequired,audienceName:w.string.isRequired,onAudienceNameChange:w.func.isRequired,onTargetingChange:w.func.isRequired,targetingAPISpec:w.object.isRequired},statics:{calculateState:function(z){var aa=g.get(z.accountID);return {account:aa,loading:aa.loadState===l.LOADING};}},render:function(){return (p.createElement("div",null,this._renderTopRow(),p.createElement(o,null,this._renderEditor(),p.createElement("div",{className:"_1s96"},this._renderReach(),this._renderTargetingSentences()))));},_renderEditor:function(){if(this.state.loading)return p.createElement(s,{size:"large"});return (p.createElement(h,{account:this.state.account,onTargetingChange:this.props.onTargetingChange,targetingAPISpec:this.props.targetingAPISpec}));},_renderTopRow:function(){return (p.createElement("div",{style:{width:x}},p.createElement(i,null,p.createElement(k,null,p.createElement(j,{className:"_1s97",label:t._("Audience Name")},p.createElement(n,{placeholder:t._("Name your audience"),onChange:this.props.onAudienceNameChange,value:this.props.audienceName}))))));},_renderReach:function(){return (p.createElement(m,{accountID:this.props.accountID,targetingApiSpec:this.props.targetingAPISpec}));},_renderTargetingSentences:function(){return (p.createElement(r,{accountID:this.props.accountID,targetingApiSpec:this.props.targetingAPISpec}));}});e.exports=y;},null);
__d("AdsSavedAudienceLoggingEvents",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={CANCEL_IN_CAMPAIGN_LIST_DIALOG:'sa_cancel_in_campaign_list_dialog',SAVE_AS_IN_CAMPAIGN_LIST_DIALOG:'sa_save_as_in_campaign_list_dialog',UPDATE_IN_CAMPAIGN_LIST_DIALOG:'sa_update_in_campaign_list_dialog',SAVE_AS_IN_EDIT_DIALOG:'sa_save_as_in_edit_dialog',UPDATE_IN_EDIT_DIALOG_NO_ADS:'sa_update_in_edit_dialog_no_ads',UPDATE_IN_EDIT_DIALOG_WITH_ADS:'sa_update_in_edit_dialog_with_ads',CHECK_SAVE_THIS_AUDIENCE:'sa_save_this_audience_box_checked',SELECT_NEW_AUDIENCE:'sa_new_audience_item_selected',SELECT_SAVED_AUDIENCES:'sa_saved_audiences_item_selected',SAVE_TARGETING_CLICKED:'sa_save_targeting_clicked',SAVE_TARGETING_COMPLETE:'sa_save_targeting_complete',SAVE_AS_COMPLETE:'sa_save_as_complete',SAVED_AUDIENCE_TAB_OPENED:'sa_saved_audience_tab_opened',CREATE_NEW_TAB_OPENED:'sa_create_new_tab_opened',CREATE_FROM_AM_CLICKED:'sa_create_from_am_clicked',CREATE_FROM_AM_COMPLETED:'sa_create_from_am_completed'};e.exports=g;},null);
__d("AdsCreateSavedAudienceDialog.react",["AdsCommonTargetingSentencesRenderer.react","AdInterfacesUiLogger","AdsInfoTable.react","AdsInfoTableRow.react","AdsInfoTableSection.react","AdsLoadState","AdsSavedAudienceLoggingEvents","AdsTextInput.react","LayerFadeOnHide","LayerHideOnEscape","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react","XUINotice.react","XUISpinner.react","XUIText.react","cx","fbt","ads-lib-formatters"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();'use strict';var ea=b('ads-lib-formatters').createLimitedSigFigNumberFormatter(0,2),fa=q,ga=fa.PropTypes,ha=600,ia=q.createClass({displayName:"AdsCreateSavedAudienceDialog",mixins:[r],propTypes:{audienceName:ga.string.isRequired,isLoading:ga.bool.isRequired,isSaveAs:ga.bool,isShown:ga.bool.isRequired,onAudienceNameChange:ga.func.isRequired,onCancel:ga.func.isRequired,onSave:ga.func.isRequired,reach:ga.object.isRequired,sentences:ga.object.isRequired,restoreOriginalAudience:ga.func.isRequired},render:function(){return null;},renderLayers:function(){return {dialog:q.createElement(s,{behaviors:{LayerFadeOnHide:o,LayerHideOnEscape:p},className:"_4x9b",onToggle:this._onToggle,shown:this.props.isShown,width:ha},q.createElement(x,{showCloseButton:true},da._("Save Audience")),q.createElement(t,null,this._renderDialogContent()),q.createElement(w,null,q.createElement(v,{onClick:this.props.onCancel}),q.createElement(u,{use:"confirm",action:"confirm",label:da._("Save"),onClick:this._onSave,disabled:!this._canSave()})))};},_onSave:function(){var event=this.props.isSaveAs?m.SAVE_AS_COMPLETE:m.SAVE_TARGETING_COMPLETE;h.log(event);this.props.onSave();},_canSave:function(){return this.props.audienceName.trim().length>0;},_onToggle:function(ja){if(!ja){this.props.onCancel();this.props.restoreOriginalAudience();}},_isSentencesError:function(){return (this.props.sentences.loadingStatus===l.ERROR||!this.props.sentences.sentenceLines);},_isReachError:function(){return (this.props.reach.loadingStatus===l.ERROR||!this.props.reach.users);},_renderDialogContent:function(){if(this.props.isLoading){return q.createElement(aa,{size:"large"});}else if(this._isSentencesError())return (q.createElement(z,{use:"warn"},da._("Could not retrieve targeting information.")));return (q.createElement("div",{className:"_3qgi"},q.createElement(i,null,q.createElement(k,null,q.createElement(j,{label:da._("Audience Name")},q.createElement(n,{placeholder:"Name your audience",onChange:this._onChangeAudienceName,value:this.props.audienceName})),q.createElement(j,null,this._renderReach(),q.createElement(g,{sentences:this.props.sentences.sentenceLines}))))));},_renderReach:function(){if(this._isReachError())return null;return (q.createElement(ba,{size:"small"},q.createElement(y,null,da._("Size:")),' ',da._("{number of people can be reached} people",[da.param("number of people can be reached",ea(this.props.reach.users))])));},_onChangeAudienceName:function(ja){this.props.onAudienceNameChange(ja);}});e.exports=ia;},null);
__d("AdsParamsToResultCache",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){"use strict";g(i>0&&j>=i);this.$AdsParamsToResultCache0=[];this.$AdsParamsToResultCache1={};this.$AdsParamsToResultCache2=j;this.$AdsParamsToResultCache3=i;}h.prototype.get=function(i){"use strict";var j=JSON.stringify(i);return (j in this.$AdsParamsToResultCache1)?this.$AdsParamsToResultCache1[j]:(void 0);};h.prototype.set=function(i,j){"use strict";var k=JSON.stringify(i);if(!(k in this.$AdsParamsToResultCache1))this.$AdsParamsToResultCache0.unshift(k);this.$AdsParamsToResultCache1[k]=j;if(this.$AdsParamsToResultCache0.length>this.$AdsParamsToResultCache2)while(this.$AdsParamsToResultCache0.length>this.$AdsParamsToResultCache3)delete this.$AdsParamsToResultCache1[this.$AdsParamsToResultCache0.pop()];};e.exports=h;},null);
__d("AdsReachEstimateDataLoader",["GraphAPI"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(k,l,m,n,o){var p={targeting_spec:m,currency:l,bid_for:((void 0)),creative_action_spec:((void 0))};if(o)p.bid_for=o;if(n)p.creative_action_spec=n;return g('2.2').adaccount(k).edge('reachestimate').get(p);}function i(k){return g('2.2').object('adgroup',k).edge('reachestimate').get();}var j={loadReachEstimateForAccount:h,loadReachEstimateForAd:i};e.exports=j;},null);
__d("AdsReachEstimateDataDispatcher",["AdsReachEstimateDataLoader","AdsReachEstimateServerActions"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(l,m,n,o,p){var q=Array.prototype.slice.call(arguments);g.loadReachEstimateForAccount.apply(g,q).done(function(r){h.updateReachEstimate(r.data,q);},function(r){h.failReachEstimate(r,q);});}function j(l){var m=[l];g.loadReachEstimateForAd(l).done(function(n){h.updateReachEstimate(n.data,m);},function(n){h.failReachEstimate(n,m);});}var k={loadReachEstimateForAccount:i,loadReachEstimateForAd:j};e.exports=k;},null);
__d("AdsReachEstimateStore",["AdsBaseStore","AdsLoadState","AdsParamsToResultCache","AdsReachEstimateActionTypes","AdsReachEstimateDataDispatcher","ImmutableObject"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=new l({loadingStatus:h.LOADING}),n=new l({loadingStatus:h.ERROR});for(var o in g)if(g.hasOwnProperty(o))q[o]=g[o];var p=g===null?null:g.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=g;function q(){g.call(this);this.$AdsReachEstimateStoreClass0=new i(20,50);}q.prototype.getStoreName=function(){return 'AdsReachEstimateStore';};q.prototype.getReachEstimateForAccount=function(s,t,u,v,w){var x=Array.prototype.slice.call(arguments),y=this.$AdsReachEstimateStoreClass0.get(x);if(y!==(void 0))return y;this.$AdsReachEstimateStoreClass0.set(x,m);k.loadReachEstimateForAccount.apply(k,x);return m;};q.prototype.getReachEstimateForAd=function(s){var t=[s],u=this.$AdsReachEstimateStoreClass0.get(t);if(u!==(void 0))return u;this.$AdsReachEstimateStoreClass0.set(t,m);k.loadReachEstimateForAd(s);return m;};q.prototype.onDispatchToken=function(s){var t=s.action;switch(t.actionType){case j.LOAD_SUCCESS:this.$AdsReachEstimateStoreClass0.set(t.params,new l(t.data));this.inform('change');break;case j.LOAD_ERROR:this.$AdsReachEstimateStoreClass0.set(t.params,n);this.inform('change');break;}};var r=new q();a.debug_AdsReachEstimateStore=r;e.exports=r;},null);
__d("AdsSentenceLinesDataLoader",["GraphAPI","adsGKCheck"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(k,l){var m=h('ads_migration_2_3_targeting')?g('2.3'):g('2.2');return m.adaccount(k).edge('targetingsentencelines').batched().get({discard_placements:true,targeting_spec:l});}var j={loadTargeting:i};e.exports=j;},null);
__d("AdsSentenceLinesDataDispatcher",["AdsSentenceLinesDataLoader","AdsSentenceLinesServerActions"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(k,l){var m=Array.prototype.slice.call(arguments);g.loadTargeting(k,l).done(function(n){h.updateTargeting(m,n.targetingsentencelines);},function(n){h.failTargeting(m,n);});}var j={loadTargeting:i};e.exports=j;},null);
__d("AdsSentenceLinesStore",["AdsBaseStore","AdsLoadState","AdsParamsToResultCache","AdsSentenceLinesActionTypes","AdsSentenceLinesDataDispatcher","deepFreezeValue"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m={loadingStatus:h.LOADING};for(var n in g)if(g.hasOwnProperty(n))p[n]=g[n];var o=g===null?null:g.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=g;function p(){g.call(this);this.$AdsSentenceLinesStoreClass0=new i(20,5000);}p.prototype.getStoreName=function(){return 'AdsSentenceLinesStore';};p.prototype.getTargeting=function(r,s){var t=Array.prototype.slice.call(arguments),u=this.$AdsSentenceLinesStoreClass0.get(t);if(!u){u=m;this.$AdsSentenceLinesStoreClass0.set(t,u);k.loadTargeting(r,s);}return u;};p.prototype.onDispatchToken=function(r){var s=r.action;switch(s.actionType){case j.TARGETING_LOAD_SUCCESS:this.$AdsSentenceLinesStoreClass0.set(s.params,{loadingStatus:h.LOADED,sentenceLines:s.sentenceLines});this.inform('change');break;case j.TARGETING_LOAD_ERROR:this.$AdsSentenceLinesStoreClass0.set(s.params,{loadingStatus:h.ERROR,error:s.error});this.inform('change');break;}};var q=new p();a.debug_AdsSentenceLinesStore=q;e.exports=q;},null);
__d("ads-lib-newIds",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g=0;function h(){return Date.now()+(g++);}function i(){return -h();}function j(k){return +k<0;}f.isNew=j;f.newNegativeId=i;f.newUniqueId=h;},null);
__d("AdsCreateSavedAudienceDialogContainer.react",["AdsCreateSavedAudienceDialog.react","AdsLoadState","AdsReachEstimateStore","AdsSavedAudienceActions","AdsSentenceLinesStore","ads-lib-newIds","React","StoreAndPropBasedStateMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m,p=o.PropTypes,q=m.createClass({displayName:"AdsCreateSavedAudienceDialogContainer",mixins:[n(i,k)],getInitialState:function(){return {audienceName:this.props.defaultName||''};},statics:{calculateState:function(r){var s=k.getTargeting(r.accountID,r.targetingAPISpec),t=i.getReachEstimateForAccount(r.accountID,null,r.targetingAPISpec),u=s.loadingStatus===h.LOADING||t.loadingStatus===h.LOADING;return {isLoading:u,reach:t,sentences:s};}},propTypes:{accountID:p.string.isRequired,isSaveAs:p.bool,isShown:p.bool.isRequired,onClose:p.func.isRequired,onSavedAudienceChange:p.func.isRequired,targetingAPISpec:p.object.isRequired,defaultName:p.string,restoreOriginalAudience:p.func.isRequired},render:function(){return (m.createElement(g,{audienceName:this.state.audienceName,isLoading:this.state.isLoading,isSaveAs:!!this.props.isSaveAs,reach:this.state.reach,sentences:this.state.sentences,onAudienceNameChange:this._onAudienceNameChange,onCancel:this.props.onClose,onSave:this._onSave,isShown:this.props.isShown,restoreOriginalAudience:this.props.restoreOriginalAudience}));},_onAudienceNameChange:function(r){this.setState({audienceName:r});},_onSave:function(){var r=l.newNegativeId().toString();j.createSavedAudiences([{accountID:this.props.accountID,name:this.state.audienceName,targeting:this.props.targetingAPISpec,tempID:r}]);this.props.onSavedAudienceChange({id:r,name:this.state.audienceName});this.props.onClose();}});e.exports=q;},null);
__d("AdsSavedAudienceErrorStore",["AdsBaseStore","AdsSavedAudienceActionTypes","Map","SavedTargetSpecSyncStatus"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';for(var k in g)if(g.hasOwnProperty(k))m[k]=g[k];var l=g===null?null:g.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=g;function m(){g.call(this);this.$AdsSavedAudienceErrorStoreClass0=new i();}m.prototype.getStoreName=function(){return 'AdsSavedAudienceErrorStore';};m.prototype.onDispatchToken=function(o){var p=o.action;switch(p.actionType){case h.SAVED_AUDIENCE.BATCH_UPDATED:p.savedAudiences.forEach(function(q){this.$AdsSavedAudienceErrorStoreClass1(q.id,q.sync_status);}.bind(this));this.inform('change');break;case h.VIEW.CLEAR_SYNC_ERROR:this.$AdsSavedAudienceErrorStoreClass0["delete"](p.audienceID);this.inform('change');break;}};m.prototype.$AdsSavedAudienceErrorStoreClass1=function(o,p){var q=new i();p.forEach(function(r){if(r.status===j.FAILURE)q.set(r.campaign_id,r.details);});this.$AdsSavedAudienceErrorStoreClass0.set(o,q);};m.prototype.getSyncErrorByAudienceID=function(o){return this.$AdsSavedAudienceErrorStoreClass0.get(o);};var n=new m();e.exports=n;},null);
__d("AdsEditSavedAudienceDialog.react",["AdsSavedAudienceTargetingDialogBody.react","LayerFadeOnHide","LayerHideOnEscape","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","fbt","isValidTargetingSpec"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=j,t=s.PropTypes,u=910,v=j.createClass({displayName:"AdsEditSavedAudienceDialog",mixins:[k],propTypes:{accountID:t.string.isRequired,audienceName:t.string.isRequired,isShown:t.bool.isRequired,onAudienceNameChange:t.func.isRequired,onCancel:t.func.isRequired,onUpdate:t.func.isRequired,onSaveAs:t.func.isRequired,onTargetingChange:t.func.isRequired,targetingAPISpec:t.object.isRequired,isAudienceChanged:t.bool.isRequired,restoreOriginalAudience:t.func.isRequired},render:function(){return null;},renderLayers:function(){return {dialog:j.createElement(l,{fixedTopPosition:100,width:u,onToggle:this._onToggle,behaviors:{LayerFadeOnHide:h,LayerHideOnEscape:i},shown:this.props.isShown},j.createElement(p,null,q._("Edit Audience")),j.createElement(m,null,j.createElement(g,{accountID:this.props.accountID,audienceName:this.props.audienceName,onAudienceNameChange:this.props.onAudienceNameChange,onTargetingChange:this.props.onTargetingChange,targetingAPISpec:this.props.targetingAPISpec})),j.createElement(o,null,j.createElement(n,{disabled:!this._canSave(),use:"default",label:q._("Save As New"),onClick:this.props.onSaveAs}),j.createElement(n,{disabled:!this._canSave(),use:"confirm",label:q._("Update"),onClick:this.props.onUpdate})))};},_canSave:function(){return (this.props.isAudienceChanged&&this.props.audienceName.trim().length>0&&r(this.props.targetingAPISpec));},_onToggle:function(w){if(!w){this.props.onCancel();this.props.restoreOriginalAudience();}}});e.exports=v;},null);
__d("AdsScheduleUtils",["DateConsts","FBDate","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g.SEC_PER_MIN*g.MS_PER_SEC,k=j*g.MIN_PER_HOUR,l=k*g.HOUR_PER_DAY,m=1,n={getTimerangeUIData:function(o,p){var q=null;if(o)q=h.createFromISOString(o,m);var r=null;if(p)r=h.createFromISOString(p,m);return this.getTimerangeUIDataByParsedDates(q,r,false);},getTimerangeUIDataByParsedDates:function(o,p,q){var r,s;if(o){var t=o.format('M j, Y'),u=o.format('M d, Y g:ia');}else if(q){t=i._("When published");u=t;}if(!p){s=i._("{start} \u2013 Ongoing",[i.param("start",u)]);r=i._("{start} \u2013 Ongoing",[i.param("start",t)]);return ({range:r,rangeFull:s});}var v=p.format('M j, Y'),w=p.format('M d, Y g:ia');s=i._("{start} \u2013 {end}",[i.param("start",u),i.param("end",w)]);r=i._("{start} \u2013 {end}",[i.param("start",t),i.param("end",v)]);return ({range:r,rangeFull:s,duration:o&&this.getDateDifference(o.getUnixTimestamp(),p.getUnixTimestamp())});},getDateDifference:function(o,p){var q=p-o;if(q<k){return (i._("{minutes} minutes",[i.param("minutes",Math.round(q/j))]));}else if(q<l){var r=Math.floor(q/k);return r>1?i._("{hours} hours",[i.param("hours",r)]):i._("{hours} hour",[i.param("hours",r)]);}else{var s=Math.floor(q/l);return s>1?i._("{days} days",[i.param("days",s)]):i._("{days} day",[i.param("days",s)]);}},getLabelsForTable:function(o,p){var q;if(o.equals(p)){q=o.format('g:ia');}else if(o.addDays(1).equals(p)){q=i._("Tomorrow");}else if(o.subtractDays(1).equals(p)){q=i._("Yesterday");}else q=o.format('M j, Y');return {label:q,fullLabel:o.format('M d, Y g:ia')};}};e.exports=n;},null);
__d("AdsSavedAudienceCampaignListDialog.react",["AdInterfacesUiLogger","AdsSavedAudienceLoggingEvents","AdsScheduleUtils","FixedDataTable.react","FixedDataTableColumn.react","LayerFadeOnHide","LayerHideOnEscape","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react","XUINotice.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();'use strict';var z=n,aa=z.PropTypes,ba=n.createClass({displayName:"AdsSavedAudienceCampaignListDialog",mixins:[o],propTypes:{campaigns:aa.array.isRequired,isShown:aa.bool.isRequired,onCancel:aa.func.isRequired,onUpdate:aa.func.isRequired,onSaveAs:aa.func.isRequired,restoreOriginalAudience:aa.func.isRequired},render:function(){return null;},renderLayers:function(){return {dialog:n.createElement(p,{onToggle:this._onToggle,behaviors:{LayerFadeOnHide:l,LayerHideOnEscape:m},shown:this.props.isShown,width:750},n.createElement(u,null,y._("This Audience is Used in {number of ad sets} Ad Sets",[y.param("number of ad sets",this.props.campaigns.length)])),n.createElement(q,null,this._renderDialogContent()),n.createElement(t,{leftContent:n.createElement(s,{action:"cancel",onClick:this._onCancel})},n.createElement(r,{use:"default",label:y._("Save As New"),onClick:this._onSaveAs}),n.createElement(r,{use:"confirm",label:y._("Update"),onClick:this._onUpdate})))};},_onToggle:function(ca){if(!ca){this._onCancel();this.props.restoreOriginalAudience();}},_onCancel:function(){g.log(h.CANCEL_IN_CAMPAIGN_LIST_DIALOG);this.props.onCancel();},_onSaveAs:function(){g.log(h.SAVE_AS_IN_CAMPAIGN_LIST_DIALOG);this.props.onSaveAs();},_onUpdate:function(){g.log(h.UPDATE_IN_CAMPAIGN_LIST_DIALOG);this.props.onUpdate();},_renderDialogContent:function(){var ca=[];this.props.campaigns.forEach(function(ea){ca.push({name:ea.name,schedule:i.getTimerangeUIData(ea.start_time,ea.end_time).range});});var da=function(ea){return ca[ea];};return (n.createElement("div",{className:"_1drc"},n.createElement(v,{shade:"medium",size:"medium",weight:"bold"},y._("Updating this audience will also update the following ad sets:")),n.createElement("div",{className:"_3-8z _3-97"},n.createElement(j,{rowHeight:50,headerHeight:40,rowGetter:da,rowsCount:ca.length,width:650,maxHeight:250},n.createElement(k,{label:y._("Ad Set Name"),width:400,dataKey:'name'}),n.createElement(k,{label:y._("Schedule"),width:250,dataKey:'schedule'}))),n.createElement(w,null,y._("If you don't want to update the audience for these ad sets, you can save the changes as a new audience."))));}});e.exports=ba;},null);
__d("AdsSavedAudienceSyncStatusErrorDialog.react",["FixedDataTable.react","FixedDataTableColumn.react","Map","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react","XUINotice.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=j,v=u.PropTypes,w=50,x=j.createClass({displayName:"AdsSavedAudienceSyncStatusErrorDialog",mixins:[k],propTypes:{campaigns:v.array.isRequired,error:v.object.isRequired,onClose:v.func.isRequired},render:function(){return null;},renderLayers:function(){return {dialog:j.createElement(l,{onToggle:this._onToggle,shown:true,width:750},j.createElement(p,null,t._("Cannot update {number of faliures} of the {number of ad sets} Ad Sets",[t.param("number of faliures",this.props.error.size),t.param("number of ad sets",this.props.campaigns.length)])),j.createElement(m,null,this._renderDialogContent()),j.createElement(o,null,j.createElement(n,{use:"confirm",label:t._("OK"),onClick:this.props.onClose})))};},_onToggle:function(y){if(!y)this.props.onClose();},_getRows:function(){var y=[],z=new i();this.props.campaigns.forEach(function(aa){z.set(aa.id,aa.name);});this.props.error.forEach(function(aa,ba){y.push({name:z.get(ba),details:aa});});return y;},_renderDialogContent:function(){var y=this._getRows(),z=function(ba){return y[ba];},aa=function(ba){return w*Math.ceil(y[ba].details.length/100);};return (j.createElement("div",{className:"_y7m"},j.createElement(q,{shade:"medium",weight:"bold"},t._("We cannot update the following Ad Sets:")),j.createElement("div",{className:"_3-8p"},j.createElement(g,{rowHeight:w,headerHeight:40,rowGetter:z,rowHeightGetter:aa,rowsCount:y.length,width:650,maxHeight:250},j.createElement(h,{label:t._("Ad Set Name"),width:250,dataKey:'name'}),j.createElement(h,{label:t._("Reason"),width:400,dataKey:'details'}))),j.createElement(r,null,t._("These ad sets will continue to run with the original targeting settings. It will no longer be associated with the updated saved audience."))));}});e.exports=x;},null);
__d("AdsSavedAudienceViewActions",["AdsDispatcher","AdsSavedAudienceActionTypes"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={clearSyncError:function(j){g.handleUpdateFromViewAction({audienceID:j,type:h.VIEW.CLEAR_SYNC_ERROR});},updateName:function(j){g.handleUpdateFromViewAction({name:j,type:h.VIEW.UPDATE_NAME});},toggleAudienceCreation:function(j){g.handleUpdateFromViewAction({isSaveEnabled:j,type:h.VIEW.TOGGLE_SAVE});},clearAudienceSaveState:function(){g.handleUpdateFromViewAction({type:h.VIEW.CLEAR_AUDIENCE_SAVE_STATE});}};e.exports=i;},null);
__d("SpinnerDialog.react",["React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUISpinner.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=g,m=l.PropTypes,n=g.createClass({displayName:"SpinnerDialog",mixins:[h],propTypes:{isShown:m.bool.isRequired},render:function(){return null;},renderLayers:function(){return {dialog:g.createElement(i,{layerHideOnBlur:false,shown:this.props.isShown,width:500},g.createElement(j,null,g.createElement(k,{size:"large"})))};}});e.exports=n;},null);
__d("AdsEditSavedAudienceDialogContainer.react",["AdInterfacesUiLogger","AdsCommonTargetingUtils","AdsCreateSavedAudienceDialogContainer.react","AdsEditSavedAudienceDialog.react","AdsLoadState","AdsSavedAudienceActions","AdsSavedAudienceCampaignListDialog.react","AdsSavedAudienceErrorStore","AdsSavedAudienceLoggingEvents","AdsSavedAudienceStore","AdsSavedAudienceSyncStatusErrorDialog.react","AdsSavedAudienceViewActions","React","StoreAndPropBasedStateMixin","SpinnerDialog.react","fbt","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x=s,y=x.PropTypes,z=w({CAMPAIGN_LIST:null,EDIT_TARGETING:null,SAVE_AS:null}),aa=' - '+v._("copy"),ba=s.createClass({displayName:"AdsEditSavedAudienceDialogContainer",mixins:[t(n,p)],propTypes:{accountID:y.string.isRequired,audienceID:y.string.isRequired,isShown:y.bool.isRequired,onClose:y.func.isRequired,onSavedAudienceChange:y.func.isRequired,onSavedAudienceUpdated:y.func},componentWillReceiveProps:function(ca){var da=this.state.viewState,ea=this.state.currentTargeting;if(ca.isShown)da=z.EDIT_TARGETING;if(ca.audienceID!==this.props.audienceID)ea=null;this.setState({currentTargeting:ea,viewState:da});},getInitialState:function(){return {viewState:z.EDIT_TARGETING,audienceChanged:false};},statics:{calculateState:function(ca){var da=p.get(ca.audienceID),ea=n.getSyncErrorByAudienceID(ca.audienceID);return {error:ea,originalAudience:da,loading:da.loadState===k.LOADING||da.loadState===k.PENDING_WRITE};}},render:function(){if(this.state.error&&this.state.error.size>0&&!this.state.loading)return (s.createElement(q,{campaigns:this.state.originalAudience.adcampaigns.data,error:this.state.error,onClose:this._onClearError}));if(this.state.loading)return (s.createElement(u,{isShown:true}));if(!this.props.isShown)return null;var ca=this._getNewOrOldTargeting(),da=this._getNewOrOldName();switch(this.state.viewState){case z.EDIT_TARGETING:return (s.createElement(j,{accountID:this.props.accountID,audienceName:da,onAudienceNameChange:this._onAudienceNameChange,onCancel:this.props.onClose,onSaveAs:this._onSaveAs,onTargetingChange:this._onTargetingChange,onUpdate:this._onUpdate,isShown:true,targetingAPISpec:ca,isAudienceChanged:this.state.audienceChanged,restoreOriginalAudience:this._restoreOriginalAudience}));case z.CAMPAIGN_LIST:return (s.createElement(m,{campaigns:this.state.originalAudience.adcampaigns.data,isShown:true,onCancel:this.props.onClose,onSaveAs:this._onSaveAs,onUpdate:this._onUpdateConfirmed,restoreOriginalAudience:this._restoreOriginalAudience}));case z.SAVE_AS:return (s.createElement(i,{accountID:this.props.accountID,defaultName:this._getNewOrOldName()+aa,isSaveAs:true,targetingAPISpec:ca,onClose:this.props.onClose,onSavedAudienceChange:this.props.onSavedAudienceChange,isShown:true,restoreOriginalAudience:this._restoreOriginalAudience}));default:return null;}},_onClearError:function(){r.clearSyncError(this.props.audienceID);this.props.onClose();},_onAudienceNameChange:function(ca){var da=this.state.originalAudience.name!==ca;this.setState({currentName:ca,audienceChanged:da});},_onTargetingChange:function(ca){var da=this.state.originalAudience.name!==this._getNewOrOldName()||!h.areApiSpecEqual(this.state.originalAudience.targeting,ca);this.setState({currentTargeting:ca,audienceChanged:da});},_onSaveAs:function(){g.log(o.SAVE_AS_IN_EDIT_DIALOG);this.setState({viewState:z.SAVE_AS});},_onUpdate:function(){if(!this.state.audienceChanged){this.props.onClose();return;}if(this.state.originalAudience.adcampaigns&&this.state.audienceChanged){g.log(o.UPDATE_IN_EDIT_DIALOG_WITH_ADS);this.setState({viewState:z.CAMPAIGN_LIST});return;}g.log(o.UPDATE_IN_EDIT_DIALOG_NO_ADS);this._updateSavedAudience();},_onUpdateConfirmed:function(){this._updateSavedAudience();},_updateSavedAudience:function(){var ca={id:this.props.audienceID,name:this._getNewOrOldName(),targeting:this._getNewOrOldTargeting()};l.updateSavedAudiences([ca]);if(this.props.onSavedAudienceUpdated)this.props.onSavedAudienceUpdated(ca);this.props.onClose();},_getNewOrOldName:function(){return this.state.currentName||this.state.originalAudience.name;},_getNewOrOldTargeting:function(){return this.state.currentTargeting||this.state.originalAudience.targeting;},_restoreOriginalAudience:function(){if(this.isMounted())this.setState({currentTargeting:null,audienceChanged:false});}});e.exports=ba;},null);