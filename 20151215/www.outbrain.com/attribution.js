var OBCustomerAttribution=OBCustomerAttribution||{stringSeporator:"--s-e-p--",cookieSession:"obCASession",errorCookies:"Error",kissErrorEventName:"attribution cookie error debug",hasSession:!1,attributionCookiesRegex:new RegExp('^\\"(.+)\\-\\-s\\-e\\-p\\-\\-([a-zA-Z0-9_]+)\\"$'),attributionCookiesName:[{name:"obCACP",event:"AT_Current_Page_URL"},{name:"obCALP",event:"AT_Landing_Page_URL"},{name:"obCAReferral",event:"AT_Referral_URL"},{name:"obCAMedium",event:"AT_Medium"},{name:"obCASource",event:"AT_Source"},{name:"obCACampaign",event:"AT_Campaign"},{name:"obCATerm",event:"AT_Term"},{name:"obCAContent",event:"AT_Content"},{name:"obCATrueMedium",event:"AT_True_Medium"}],events:{visit:"New Visit",startRegistration:"Start Registration",completeRegistration:"Complete Registration"},attributionCookies:{},attributionProperties:{},defaultEnvironment:"production",defaultDomain:"www.outbrain.com",environments:{dev:["www.outbrain.local","ob-marketing.herokuapp.local"],test:["www-test.outbrain.com","my2.outbrain.com","wpadmin-test.outbrain.com"],production:["www.outbrain.com","my.outbrain.com","help.outbrain.com","wpadmin.outbrain.com","outbrain.mytribehr.com","outbrain.desk.com"]},getEnvironment:function(){for(var a in OBCustomerAttribution.environments)if(OBCustomerAttribution.environments[a].indexOf(window.location.host)>-1)return a;return OBCustomerAttribution.defaultEnvironment},getEnvironmentDomain:function(){var a=OBCustomerAttribution.getEnvironment();return OBCustomerAttribution.environments||OBCustomerAttribution.environments[a]||OBCustomerAttribution.environments[a][0]?OBCustomerAttribution.environments[a][0]:OBCustomerAttribution.defaultDomain},getCookie:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1);if(0===e.indexOf(b))return decodeURIComponent(e.substring(b.length,e.length))}return""},checkSessionCookie:function(){OBCustomerAttribution.hasSession="1"===OBCustomerAttribution.getCookie(OBCustomerAttribution.cookieSession)},getAttributionCookies:function(){return OBCustomerAttribution.attributionCookies},getAttributionProperties:function(){return OBCustomerAttribution.attributionProperties},setAttributionCookiesAndProperties:function(){OBCustomerAttribution.attributionCookies=OBCustomerAttribution.attributionCookies||{},OBCustomerAttribution.attributionProperties=OBCustomerAttribution.attributionProperties||{};for(var a=0;a<OBCustomerAttribution.attributionCookiesName.length;a++){var b=OBCustomerAttribution.getCookie(OBCustomerAttribution.attributionCookiesName[a].name),c=b.match(OBCustomerAttribution.attributionCookiesRegex);c&&c.length>2?(OBCustomerAttribution.attributionCookies[OBCustomerAttribution.attributionCookiesName[a].name]=c[1],OBCustomerAttribution.attributionProperties[c[2]]=c[1]):(OBCustomerAttribution.attributionCookies[OBCustomerAttribution.attributionCookiesName[a].name]=OBCustomerAttribution.errorCookies,OBCustomerAttribution.attributionProperties[OBCustomerAttribution.attributionCookiesName[a].event]=OBCustomerAttribution.errorCookies,"undefined"!=typeof _kmq&&_kmq.push(["record",OBCustomerAttribution.kissErrorEventName,{cookieName:OBCustomerAttribution.attributionCookiesName[a].name,cookieValue:b}]))}},appendPixel:function(a,b,c){var d=new Image,e=[];for(var f in b)e.push(encodeURIComponent(f)+"="+encodeURIComponent(b[f]));if(e.length>0){var g=a.indexOf("?")>-1?"&":"?";a+=g+e.join("&")}d.setAttribute("style","display:none;position:absolute;left:0;top:-100000em;z-index:10000;visiblity:hidden;opacity:0;"),d.src=a,d.width="0",d.height="0",d.border="0",d.onload=function(){c()},document.body.appendChild(d)},mergeObjects:function(a){for(var b={},c=0;a.length>c;c++)if(a[c]&&"[object Object]"===Object.prototype.toString.call(a[c]))for(var d in a[c])b[d]=a[c][d];return b},recordEvent:function(a,b){var c=OBCustomerAttribution.getAttributionProperties(),d=OBCustomerAttribution.mergeObjects([c,b]);"undefined"!=typeof _kmq&&_kmq.push(["record",a,d])},appendAttributionPixel:function(){OBCustomerAttribution.checkSessionCookie(),OBCustomerAttribution.appendPixel("//"+OBCustomerAttribution.getEnvironmentDomain()+"/customerattribution",{url:document.location.href,referral:document.referrer},function(){OBCustomerAttribution.setAttributionCookiesAndProperties(),OBCustomerAttribution.hasSession||OBCustomerAttribution.recordEvent(OBCustomerAttribution.events.visit)})}};OBCustomerAttribution.appendAttributionPixel();