!function(e,t){window._piximediaBrowserDetect=function(){"use strict;";function i(e){var i=t.createElement("a");return i.href=e,i}function o(){try{return""===top.document.referrer?!0:i(top.document.referrer).hostname==top.window.location.hostname?!1:!0}catch(o){}try{return""===t.referrer?!0:i(t.referrer).hostname==e.location.hostname?!1:!0}catch(o){return!1}}function n(){var t="",i="";return e.screen&&e.screen.width&&e.screen.height&&(t=e.screen.width,i=e.screen.height),{width:t,height:i,resolution:parseInt(t,10)&&parseInt(i,10)?t+"x"+i:"n/a"}}function a(){try{var e,t,i=parent.window?parent.window:window;return"undefined"!=typeof i.innerWidth?(e=i.innerWidth,t=i.innerHeight):"undefined"!=typeof i.document.documentElement&&"undefined"!=typeof i.document.documentElement.clientWidth&&0!==i.document.documentElement.clientWidth?(e=i.document.documentElement.clientWidth,t=i.document.documentElement.clientHeight):(e=i.document.getElementsByTagName("body")[0].clientWidth,t=i.document.getElementsByTagName("body")[0].clientHeight),{width:e,height:t}}catch(o){return{width:"",height:""}}}function r(){var e="unknown";return-1!=navigator.appVersion.indexOf("Win")?e="windows":-1!=navigator.appVersion.indexOf("Mac")?e="mac_os":-1!=navigator.appVersion.indexOf("X11")?e="unix":-1!=navigator.appVersion.indexOf("Linux")&&(e="linux"),{name:e}}function s(){var e,t,i,o=navigator.userAgent,n=navigator.appName,a=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return-1!=(t=o.indexOf("Opera"))?(n="opera",a=o.substring(t+6),-1!=(t=o.indexOf("Version"))&&(a=o.substring(t+8))):-1!=(t=o.indexOf("MSIE"))?(n="msie",a=o.substring(t+5)):-1!=(t=o.indexOf("Edge"))?(n="edge",a=o.substring(t+5)):-1!=(t=o.indexOf("Trident"))?(n="trident",a=o.substring(t+8)):-1!=(t=o.indexOf("Chrome"))?(n="chrome",a=o.substring(t+7)):-1!=(t=o.indexOf("Safari"))?(n="safari",a=o.substring(t+7),-1!=(t=o.indexOf("Version"))&&(a=o.substring(t+8))):-1!=(t=o.indexOf("Firefox"))?(n="firefox",a=o.substring(t+8)):(e=o.lastIndexOf(" ")+1)<(t=o.lastIndexOf("/"))&&(n=o.substring(e,t),a=o.substring(t+1),n.toLowerCase()==n.toUpperCase()&&(n=navigator.appName)),-1!=(i=a.indexOf(";"))&&(a=a.substring(0,i)),-1!=(i=a.indexOf(" "))&&(a=a.substring(0,i)),r=parseInt(""+a,10),isNaN(r)&&(a=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),r>100&&(r=""),n.indexOf("/")>=0&&(n=n.split("/")[0]),{name:n,full_version:a,major_version:r}}function l(){var e=new Date;return{hour:e.getHours(),week_day:e.getDay()}}function c(){var t=e.name,i=/^pm\-(\S*)\-(\S*)\-(\d*)\-(\d*)\-(\S*)\-(\d*)$/,o=[];return t&&""!==t&&i.exec(t)?(o=i.exec(t),{site_id:o[1]&&""!==o[1]?o[1]:"",placement_id:o[2]&&""!==o[2]?o[2]:"",ad_id:o[3]&&""!==o[3]?o[3]:"",creative_id:o[4]&&""!==o[4]?o[4]:"",options:o[5]&&""!==o[5]?o[5]:"",sequence_number:o[6]&&""!==o[6]?o[6]:""}):{site_id:"",placement_id:"",ad_id:"",creative_id:"",options:"",sequence_number:""}}function d(){return{adr:function(){return void 0}()||""}}function p(){try{return window.top._piximediaiframetest=!0,window&&window.parent&&window.hasOwnProperty&&!window.parent.hasOwnProperty?!0:!1}catch(e){return!0}}function u(){var e,t;try{e=top.location.hostname,t=top.location.pathname}catch(i){}if(!e)try{e=parent.parent.parent.location.hostname,t=parent.parent.parent.location.pathname}catch(i){}if(!e)try{e=parent.parent.location.hostname,t=parent.parent.location.pathname}catch(i){}if(!e)try{e=parent.location.hostname,t=parent.location.pathname}catch(i){}if(!e)try{e=window.location.hostname,t=window.location.pathname}catch(i){}return{crossdomain:p()?1:0,hostname:e,path:(t||"").substring(0,128),section:(((t||"").match(/^\/([a-z0-9]+)/)||[])[1]||"").substring(0,32),firstpage:o()?1:0}}function m(e){var t,i,o={};if(e){for(t in e)if(e.hasOwnProperty(t)&&v[t])if("all"===e[t])for(i in v[t])v[t].hasOwnProperty(i)&&(o[t+"_"+i]=v[t][i]);else for(i in e[t])e[t].hasOwnProperty(i)&&v[t][i]&&(o[t+"_"+i]=v[t][i])}else for(t in v)if(v.hasOwnProperty(t))for(i in v[t])v[t].hasOwnProperty(i)&&(o[t+"_"+i]=v[t][i]);return o}var h={flash_major:"F",flash_minor:"f",flash_release:"r",viewport_width:"w",viewport_height:"h",screen_width:"W",screen_height:"H",screen_resolution:"R",os_name:"O",browser_name:"b",browser_full_version:"U",browser_major_version:"u",external_site_id:"s",external_placement_id:"p",external_ad_id:"a",external_creative_id:"c",external_options:"o",external_sequence_number:"n",time_hour:"T",time_week_day:"y",location_crossdomain:"X",location_hostname:"N",location_section:"S",location_path:"P",location_firstpage:"i",alliance_adr:"A",alliance_rtapos:"x"},f=function(){var e="undefined",t="object",i="Shockwave Flash",o="ShockwaveFlash.ShockwaveFlash",n="application/x-shockwave-flash",a=window,r=document,s=navigator,l=!1,c=function(){var c=typeof r.getElementById!=e&&typeof r.getElementsByTagName!=e&&typeof r.createElement!=e,d=s.userAgent.toLowerCase(),p=s.platform.toLowerCase(),u=p?/win/.test(p):/win/.test(d),m=p?/mac/.test(p):/mac/.test(d),h=/webkit/.test(d)?parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,f=!function(){return 1}(),v=[0,0,0],g=null;if(typeof s.plugins!=e&&typeof s.plugins[i]==t)g=s.plugins[i].description,!g||typeof s.mimeTypes!=e&&s.mimeTypes[n]&&!s.mimeTypes[n].enabledPlugin||(l=!0,f=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),v[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),v[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),v[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof a.ActiveXObject!=e)try{var y=new a.ActiveXObject(o);y&&(g=y.GetVariable("$version"),g&&(f=!0,g=g.split(" ")[1].split(","),v=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:c,pv:v,wk:h,ie:f,win:u,mac:m}}();return{getFlashPlayerVersion:function(){return{major:c.pv[0],minor:c.pv[1],release:c.pv[2]}}}}(),v={};v.flash=f.getFlashPlayerVersion(),v.viewport=a(),v.screen=n(),v.os=r(),v.browser=s(),v.external=c(),v.time=l(),v.location=u(),v.alliance=d();var g="";return{getData:function(){var e=arguments[0]||!1;return m(e)},setId:function(e){g=e},toString:function(e,t){e=e||!1;var i,o=t?t:this.getData(e),n="";for(i in o)o.hasOwnProperty(i)&&(n+=(h[i]?h[i]:i)+"="+o[i].toString().replace(/\||%7c/gi,"-")+";");return n+=g+";"}}}()}(window,document),function(){"use strict";function e(){try{var e=window.piximedia&&window.piximedia.pam?window.piximedia.pam:{},t=(e.globalOptions||{}).pageLoadStart||new Date(0),i=((new Date-t)/1e3).toString();return i.match(/\..$/)&&(i+="00"),i.match(/\...$/)&&(i+="0"),"[pam]["+i+"] "}catch(o){return"[pam] "}}function t(i,o){t.trail=t.trail||[],t.trail.push("["+i+"] "+e()+Array.prototype.slice.call(o).join(", "))}function i(){if(t("debug",arguments),L){var i=Array.prototype.slice.call(arguments);i[0]&&(i[0]=e()+i[0]),A.console&&A.console.log&&(A.console.log.apply?A.console.log.apply(A.console,i):A.console.log(i[0]))}}function o(){if(t("error",arguments),L){var i=Array.prototype.slice.call(arguments);i[0]&&(i[0]=e()+i[0]),A.console&&A.console.error&&(A.console.error.apply?A.console.error.apply(A.console,i):A.console.error(i[0]))}}function n(){if(t("log",arguments),L){var i=Array.prototype.slice.call(arguments);i[0]&&(i[0]=e()+i[0]),A.console&&A.console.log&&(A.console.log.apply?A.console.log.apply(A.console,i):A.console.log(i[0]))}}function a(e){return"document.write('"+e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"');"}function r(e){for(var t=e.replace(/\\r/g,"\n").split("\n"),i="",o=0;o<t.length;o++){var n=t[o];n&&(i+="document.write('"+n.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"');")}return i}function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e,t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}function c(e,t,i){for(var o=[],n=0;n<e.length;n++){var a,r=e[n];a="function"==typeof t?t(r):i?r[t]===i:r===t,a||o.push(r)}return o}function d(e){var t=new Image;A._piximedia.images.push(t),t.src=e}function p(e){var t=(e||"").split("."),i=t.shift();return t.sort(function(e,t){var i=e.match(/^[0-9]+$/),o=t.match(/^[0-9]+$/);if(i&&o){var n=parseInt(e,10),a=parseInt(t,10);return a>n?-1:n>a?1:0}return o&&!i?-1:i&&!o?1:t>e?-1:e>t?1:0}),i+(t.length?"."+t.join("."):"")}function u(e){var t=e.match(/^ *([a-zA-Z0-9_.-]+) *=>/);return t?t[1]:e}function m(e){return e.toString().match(/^[0-9]+%$/)?parseInt(e,10)+"pct":parseInt(e,10)}function h(e){if(Object.keys)return Object.keys(e);var t=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=o.length;if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var a,r,s=[];for(a in e)t.call(e,a)&&s.push(a);if(i)for(r=0;n>r;r++)t.call(e,o[r])&&s.push(o[r]);return s}function f(e){switch(e.nodeType){case Node.DOCUMENT_NODE:return f(e.documentElement||e.children[0]);case Node.ELEMENT_NODE:var t={name:e.nodeName,children:[]},i=e.attributes;for(var o in i)if(i.hasOwnProperty(o)){var n=i[o];t[n.nodeName]=n.nodeValue}for(var a={},r=0;r<e.childNodes.length;r++){var s=f(e.childNodes[r]);"object"==typeof s&&(a[s.name]=!0,t[s.name]=t[s.name]||[],t[s.name].push(s)),t.children.push(s)}1===t.children.length&&(t.value=t.children[0]);for(var l in a)a.hasOwnProperty(l)&&1===t[l].length&&(t[l+"_value"]=t[l][0]);return t;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:return e.textContent}}function v(e){e.style.margin=0,e.style.padding=0,e.style.border=0,e.style.position="relative",e.style.overflow="visible",e.style.cursor="default",e.style.lineHeight="normal",e.style.wordSpacing="normal",e.style.fontSize="11px",e.style.fontStyle="normal",e.style.letterSpacing="0px",e.style.WebkitFontSmoothing="antialiased",e.style.MozOsxFontSmoothing="grayscale",e.style.fontFamily="Arial, Helvetica, sans-serif",e.style.left=e.style.right=0,e.style.textAlign="left",e.style.display="block",e.style.clear="both",e.style.maxWidth="none"}function g(e,t){this.events={},this.id=t,this.target=e||this}function y(e,t){var i=this;this.pam=e;for(var o in t)t.hasOwnProperty(o)&&(this[o]=t[o]);e&&e.eventEmitterForObject&&(e.eventEmitterForObject(this,this.uniqid),i.pam.master&&(e.on("something-has-been-seen",function(){i.somethingHasBeenSeen()}),i.on("send-cpmview-click",function(){i.sendCpmviewClick()}),i.on("load-event-once",function(e,t,o){i.loadEventOnce(e,t,o)})))}function b(e,t,i){y.call(this,e,i),this.position=t}function w(e,t){for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i]);this.cgAd=e,this.cgOptions=t,this.cgOptions.id_reporting&&(this.creativeId=this.cgOptions.id_reporting),this.cgOptions.args&&(this.args=this.cgOptions.args)}function x(e,t,a){var r=this;this.pam=e,this.options=a||{},this.position=t,this.active=!0,t.iframes=t.iframes||[],t.iframes.push(this),this.pam.eventEmitterForObject(this,"iframe:"+t.positionId),r.pam.master&&(this.on("host-room",function(e,t){r.hostRoom(e,t)}),this.on("enable-responsive-events",function(){r.enableResponsiveEvents()}),this.on("remove",function(){r.pam.emit("iframe:remove",t.positionId),t.decoratedBy&&t.decoratedBy.emit("iframe:remove",t.positionId)})),this.trackVisibility=this.pam.master&&t.decoratedBy?t.decoratedBy.getAllVisibilityForPixiPositionId(t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId)):[],this.trackingVisibility=!1,this.on("error",function(e){r.lastError=e}),this.options.doNotResize||this.on("resize",function(a){if(r.active){var s=function(){if(!r.iframe)return setTimeout(s,50);if(r.pam.master)if(a.onlyIfNoSurface&&(parseInt(r.iframe.style.width,10)||0)>1&&(parseInt(r.iframe.style.height,10)||0)>1)i("Not resizing iframe because it already has a surface");else if(setTimeout(function(){e.emit("position-has-been-decorated",t.positionId),e.tryAndActivateAds()},0),a.animation)r.pam.loadLibrary("sweetlib.js",function(){A.piximedia.SweetLib.animate(r.iframe,a.animation).play()}),r.pam.log("** Resizing iframe for PAM "+r.pam.siteId+"/"+r.pam.placementId+":"+r.pam.mode+" to animation="+JSON.stringify(a.animation),r.iframe);else{var l,c,d,p,u,h,f,g,y=a.css||{},b=y.position,w=!1;if(r.position.positionId.match(/^room\./))for(var x=r.iframe.parentNode;x&&void 0!==x.className;x=x.parentNode)if(x.className.match(/pmRoom|pmBodyPosition/)){l=x;break}for(var k=r.iframe.parentNode;k&&void 0!==k.className;k=k.parentNode)if(k.className.match(/pmContainer/)){c=k;break}c&&c.parentNode&&c.parentNode.parentNode&&c.parentNode.parentNode.className.match(/pmMarkerContainer/)&&(d=c.parentNode.parentNode),c&&c.parentNode&&c.parentNode&&c.parentNode.className.match(/pmMarkerContainer/)&&(d=c.parentNode),c&&c.parentNode&&c.parentNode&&c.parentNode.className.match(/pmFillerRoomContainer/)&&(p=c.parentNode),a.width&&(a.width.toString().match(/^.*%$/)?(f=a.width,u=1):u=parseInt(a.width,10)),a.height&&(a.height.toString().match(/^.*%$/)?(g=a.height,w=!0,h=1):h=parseInt(a.height,10)),u&&p&&p.parentNode&&(p.parentNode.style.width=f||u+"px"),(u||h)&&c&&(a.resizeParent||c.className.match(/pmZeroSurface/))&&(c.className=c.className.replace(/pmZeroSurface/,""),c.style.position="relative"),y.hasOwnProperty("display")&&(""===y.display||"none"===y.display||"block"===y.display)&&c&&(c.style.display=y.display),function(e){return a.wallpaper?(a.container=a.container||{},a.container.css=a.container.css||{},a.container.css.position=a.container.css.position||"relative",a.container.css.overflow=a.container.css.overflow||"hidden",a.container.css.left=a.container.css.left||"50%",a.container.css.right=a.container.css.right||"",a.container.css.marginLeft=a.container.css.marginLeft||-u/2+"px",a.container.css.maxWidth=a.container.css.maxWidth||u+"px",r.pam.loadLibrary("sweetlib.js",function(){var i=A.piximedia.SweetLib,n=function(e){for(e=e.parentNode;e;e=e.nextSibling)if(e.children&&e.children.length&&!(e.id||"").match(/^(pm|pixi)/)){for(var t,n=0;n<e.children.length;n++){var a=e.children[n];if(a&&!(a.id||"").match(/^(pm|pixi)/)&&!(a.className||"").match(/pm|pixi/)){t=!0;break}}if(!t)continue;var r=i.gbcr(e);if(r.width&&r.height)return e}o("Couldn't find page container after marker")};r.pam.loadMarkerForPosition(t,function(o){var s,l=n(o);return i.fixPageContainerForWallpaper(l),void 0!==a.moveTop&&(s=i.moveTopOfPageContainer(l,a.moveTop,a.moveTopOptions),r.pageContainer=l,r.moveTop=a.moveTop),a.bodyBackgroundColor&&i.setBodyBackgroundColor({color:a.bodyBackgroundColor}),s&&!s.pmHostedRoom&&(s.pmHostedRoom=!0,r.pam.hostRoom("pcfiller",{masterPositionId:t.positionId},function(){var e=s.ownerDocument.createElement("div");return e.className="pmFillerRoomContainer",v(e),s.style.marginLeft="auto",s.style.marginRight="auto",s.appendChild(e),e})),e()})}),void 0):e()}(function(){if(u){var e,o=(f||"").match(/^([0-9]+)%$/);o&&(e=parseFloat(o[1],10)),"absolute"!==b||a.takeover||(r.iframe.parentNode.style.width=f||u+"px"),i("Resizing iframe to width="+(f||u),r.iframe),r.iframe.style.width=f||u+"px",r.iframe.style.maxWidth="none",c&&(t.decoratedBy&&t.decoratedBy.shouldBeBeforeBody&&t.decoratedBy.shouldBeBeforeBody(t)?(e?c.style.left=(100-e)/2+"%":(c.style.left="50%",c.style.marginLeft=-parseFloat(r.iframe.style.width,10)/2+"px"),c.style.marginRight=""):(parseInt(c.style.width||0,10)<=1||a.wallpaper)&&(c.style.width=f||u+"px",c.style.marginLeft=c.style.marginRight="auto")),l&&(l.style.width=f||u+"px",l.className.match(/pmCentered/)&&(l.style.marginLeft=Math.round(-u/2)+"px"))}h&&("absolute"!==b||a.takeover||(r.iframe.parentNode.style.height=g||h+"px"),i("Resizing iframe to height="+(g||h),r.iframe),r.iframe.style.height=l&&w?"100%":g||h+"px",l&&!a.takeover&&(l.style.height=g||h+"px"),l&&w&&(l.style.height=g||h+"px",c&&(c.style.height="100%")));for(var n in y)if(y.hasOwnProperty(n))try{r.iframe.style[n]=y[n]}catch(s){}if(c){var p="pmContainerSurface"+m(r.iframe.style.width||0)+"x"+m(r.iframe.style.height||0);if(c.className=(c.className||"").replace(/ +pmContainerSurface[0-9%pct]+x[0-9%pct]+/g,"")+" "+p,a.wallpaper&&(c.className=(c.className||"").replace(/ +pmContainerSurfaceWallpaper/,"")+" pmContainerSurfaceWallpaper"),a.container){var v=a.container.css;if(v)for(var x in v)if(v.hasOwnProperty(x))try{c.style[x]=v[x]}catch(s){}}}r.pam.log("** Resizing iframe for PAM "+r.pam.siteId+"/"+r.pam.placementId+":"+r.pam.mode+" to width="+a.width+", height="+a.height,r.iframe),!a.dontCenter&&a.width,r.pam.loadLibrary("sweetlib.js",function(){var e=A.piximedia.SweetLib;e.breakOverflow(r.iframe,a)}),a.stickToTop?r.pam.loadLibrary("sweetlib.js",function(){var e=A.piximedia.SweetLib;if("mobile"!==e.device.name){var t=function(){var t,i,o,n,s,l,c=A.piximedia.SweetLib.gbcrfp(r.iframe).top,p=function(t){if(t){var i=r.iframe.parentNode.style.paddingTop;r.iframe.parentNode.style.paddingTop="0px";var o=e.gbcrfp(r.iframe.parentNode);r.iframe.parentNode.style.paddingTop=i;var n=o.top,a=Math.max(0,t-n);Math.round(parseFloat(r.iframe.parentNode.style.paddingTop,10)||0)!==Math.round(a)&&(r.iframe.parentNode.style.hasOwnProperty("transition")?(r.iframe.parentNode.style.transition="padding 0.2s",r.iframe.parentNode.style.paddingTop=a+"px",A.piximedia.SweetLib.addEventOnce(r.iframe.parentNode,"transitionend",function(){r.iframe.parentNode.style.transition=""})):r.iframe.parentNode.style.paddingTop=a+"px")}else r.iframe.parentNode.style.paddingTop=""},u=function(){if(r.iframe.pmFixed)r.iframe.pmFixed=!1,r.iframe.style.position="",r.iframe.style.marginTop="",r.iframe.parentNode.style.position=t,r.iframe.parentNode.style.height=i,r.iframe.parentNode.style.top=o,d&&(d.style.position=n,d.style.top=s,d.style.overflow=l);else{var e=A.piximedia.SweetLib.gbcrfp(r.iframe).top;e&&(c=e)}},m=function(e){r.iframe.pmFixed||(r.iframe.pmFixed=!0,r.iframe.style.position="relative",r.iframe.style.top="0px",t=r.iframe.parentNode.style.position,i=r.iframe.parentNode.style.height,o=r.iframe.parentNode.style.top,r.iframe.parentNode.style.position="fixed",r.iframe.parentNode.style.top=-(e.translateX||0)+"px",r.iframe.parentNode.style.height=(parseFloat(r.iframe.style.height,10)||0)+(parseFloat(r.iframe.parentNode.style.paddingTop,10)||0)+"px",d&&(n=d.style.position,s=d.style.top,l=d.style.overflow,d.style.position="fixed",d.style.top=0,d.style.overflow=""))},h=function(){if(!(r.iframe.ownerDocument.body.className||"").match(/pmBodyAnimation/)&&!(r.pam.getTopmostDocument().body.className||"").match(/pmBodyAnimation/)){var e=r.iframe.ownerDocument.getElementById("pmFiller"),t=0,i=0;if(e)if(t=A.piximedia.SweetLib.gbcr(e).top,a.stickToTopFromTop)t+=a.stickToTopFromTop,i=-a.stickToTopFromTop;else if(a.stickToTopOnPCTop){var o=A.piximedia.SweetLib.gbcr(e);t=o.bottom,i=-o.height}else t=A.piximedia.SweetLib.gbcr(e).top;var n=A.piximedia.SweetLib.getHeightOfPositionFixedHeaders(r.iframe.ownerDocument,void 0,{force:!0})||0;p(n),Math.round(t)>Math.round(n)?u():m({hopfh:n,translateX:-i})}};h();var f=setInterval(h,100);return{remove:function(){clearInterval(f),u()}}};r.scrollToTheTop&&r.scrollToTheTop.remove(),r.scrollToTheTop=t()}}):a.stickToTop===!1&&r.pam.loadLibrary("sweetlib.js",function(){var e=A.piximedia.SweetLib;if("mobile"!==e.device.name){var t=function(){var t=function(){var t=r.iframe.ownerDocument.getElementById("pmFiller"),i=A.piximedia.SweetLib.getHeightOfPositionFixedHeaders(r.iframe.ownerDocument,void 0,{force:!0})||0;if(t){t.style.marginTop="0px";var o=e.gbcrfp(t).top;t.style.marginTop=Math.max(0,i-o)+"px"}var n=e.gbcrfp(r.iframe).top;r.iframe.parentNode.style.paddingTop=Math.max(0,(parseFloat(r.iframe.parentNode.style.paddingTop,10)||0)+i-n)+"px"},i=setInterval(t,100);return{remove:function(){clearInterval(i),t()}}};r.scrollToTheTop&&r.scrollToTheTop.remove(),r.scrollToTheTop=t()}})})}else{r.iframe.style.width="100%",r.iframe.style.height="100%";var S=r.iframe.parentNode,I=r.iframe.contentDocument&&r.iframe.contentDocument.body?r.iframe.contentDocument.body:void 0,P=I?I.parentNode:void 0;S&&(S.style.width="100%",S.style.height="100%"),I&&(I.style.width="100%",I.style.height="100%"),P&&(P.style.width="100%",P.style.height="100%"),a&&a.css&&a.css.background&&(r.iframe.style.background=a.css.background)}if(r.trackVisibility.length&&!r.trackingVisibility&&parseInt(r.iframe.style.width,10)&&parseInt(r.iframe.style.height,10)){r.trackingVisibility=!0,n("Tracking visibility for",r);var E=function(e){return function(){if(n("Reached visibility for position"),t.loadEventWait(e.event?e.event:10===e.duration&&.6===e.threshold?"AP_VIEWABLE":"AP_VIEWABLE:"+Math.round(100*e.threshold)+"PCT:"+e.duration+"S",{detail:t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId)||t.positionId}),.5===e.threshold&&1===e.duration){var i="isAnyViewable50pct1sForCampaign"+(t.decoratedBy||t.decoratedByCG||{}).campaignId;r.pam[i]||(r.pam[i]=!0,t.loadEventWait("AP_VIEWABLE:50PCT:1S:CAMPAIGN"))}}};r.pam.loadLibrary("sweetlib.js",function(){for(var e=0;e<r.trackVisibility.length;e++){var t=r.trackVisibility[e];t.threshold||(t.threshold=.6),t.duration||(t.duration=10),A.piximedia.SweetLib.bindViewTracker({object:r.iframe,threshold:100*t.threshold,duration:t.duration},E(t))}})}};s()}else i("(not resizing inactive iframe)")}),r.pam.master&&(this.on("set-message-duration",function(e){return r.setMessageDuration(e)}),this.on("register-visibility-callback",function(e){var t=e.callback;r.pam.loadLibrary("sweetlib.js",function(){if(!r.iframe)return void(r.visibilityCallbackOnHold=e);var i={object:r.iframe};for(var o in e)if(e.hasOwnProperty(o))switch(o){case"callback":break;default:i[o]=e[o]}A.piximedia.SweetLib.bindVisibilityTracker(i,function(e){r.emit(t,e)})})}))}function k(e,t){var n=this;this.pam=e,this.eventQueue=[];for(var a in t)t.hasOwnProperty(a)&&(this[a]=t[a]);this.pam.eventEmitterForObject(this,"position:"+this.positionId),this.pam.master&&(this.on("start-timetracker-hover",function(){n.startTimetrackerHover()}),this.on("stop-timetracker-hover",function(){n.stopTimetrackerHover()}),this.on("load-event-once",function(e,t,i){n.loadEventOnce(e,t,i)})),this.on("expand",function(){if(n.expandedCount=(n.expandedCount||0)+1,n.pam.master&&1===n.expandedCount&&n.decoratedBy){var e=n.pixiPositionId||n.decoratedBy.getPixiPositionIdForPositionId(n.positionId);n.loadEventWait("EXPAND",{detail:e}),n.pam.loadLibrary("sweetlib.js",function(){n.timetrackerExpand=A.piximedia.SweetLib.setTimer("EXPAND",function(t,i){n.decoratedBy&&n.loadEventWait("TIMETRACKER::"+t,{duration:i,detail:e})}),n.timetrackerExpand.start()})}}),this.on("collapse",function(){if(!n.expandedCount)return o("Position has been collapsed, but was not expanded",n);if(!--n.expandedCount&&n.pam.master){var e=n.pixiPositionId||n.decoratedBy.getPixiPositionIdForPositionId(n.positionId);n.loadEventWait("COLLAPSE",{detail:e}),n.pam.loadLibrary("sweetlib.js",function(){n.timetrackerExpand.stop(),n.timetrackerExpand=void 0})}}),this.on("responsive",function(e){e.pageContainerWidth&&(this.pageContainerWidth=e.pageContainerWidth)}),this.pam.master&&(this.on("injected-into-pixi-position-id",function(e){i("Host injected as "+e),n.pixiPositionId=e}),this.on("injected-into-creative-group",function(e){i("Host injected as create group member"),n.setDecoratedByCG(new w(n.decoratedBy,e))}))}function S(e){if(this.pam=e,this.deferredObjects=[],A.pmAdData&&A.pmAdData.ajax)for(;A.pmAdData.ajax.length>0;){var t=A.pmAdData.ajax.shift();t&&(this.pam.msie&&6===this.pam.msie&&(t.use_pb=!0),this.loadAd(t))}}function I(e,t,i,a,r){var s,c,d,p=this,u=(a||{}).mode||"alliance",m=e+"/"+t+":"+u,h=a&&a.uniqid?a.uniqid:"pam"+Math.round(1e16*Math.random());if(this.numberOfEventsSent={},this.birthdateCookie=this.getBirthdateCookie(),this.birthdateLS=this.getBirthdateLS(),A.piximedia._.pams=A.piximedia._.pams||{},A.piximedia._.pams[m]=A.piximedia._.pams[h]=A.piximedia.pam=this,!a.pageLoadStart){var f=this.getTopmostWindow();f.performance&&f.performance.timing&&f.performance.timing.responseStart?a.pageLoadStart=f.performance.timing.responseStart:a.pageLoadStart=new Date}if(this.msie=function(){var e=!1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}return e}(),this.chrome=function(){try{return navigator.userAgent.search("Chrome")>=0?parseInt(navigator.userAgent.match(/Chrome\/([0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.safari=function(){try{return-1===navigator.userAgent.search("Chrome")&&navigator.userAgent.search("Safari")>=0?parseInt(navigator.userAgent.match(/Version\/([.0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.firefox=function(){try{return navigator.userAgent.search("Firefox")>=0?parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)/)[1],10):void 0}catch(e){}return void 0}(),this.cssCalc=!(this.msie&&this.msie<9||this.safari&&this.safari<8||this.firefox&&this.firefox<31||this.chrome&&this.chrome<34),this.window=A,this.document=C,this.pixelQueue=[],this.animations={},this.containerClassName=L?"pmContainer_"+m.replace(/[^A-Za-z0-9]/g,"-"):"",this.globalEmitter=new g,this.globalOptions=a||{},this.master=!this.globalOptions.hosted,this.mode=u,this.positions={},this.winlostIframeIds={},this.allAvailableAds=i,this.explicitlyRegisteredPositionIds={},this.trackingAdPixelsCalled={},this.trackingAdCreativePixelsCalled={},this.availableAds=[],this.decorativeAds=[],this.realAds=[],this.clickUrl=r,this.siteId=e,this.placementId=t,this.uniqKey=h,this.globalOptions.uniqid=h,this.campaignIdsWithImpressions={},this.adIdsWithImpressions={},this.checkTopDomain(),this.numberOfExplicitPositions=0,this.globalOptions.loadPixelRandom=this.globalOptions.loadPixelRandom||Math.random(),this.master&&!this.globalOptions.location)try{this.globalOptions.location=this.getTopmostWindow().location.toString()}catch(v){}if(this.globalOptions.autoFacetPosition)try{(function(){var e=this.getTopmostWindow();"resources.pm"===e.location.hostname&&"/tools/preview/"===e.location.pathname&&(this.globalOptions.autoFacetPosition=void 0,this.globalOptions.facets=void 0)}).apply(this)}catch(v){}if(this.globalOptions.autoFacetPosition)switch(this.facets=JSON.parse(JSON.stringify(this.globalOptions.facets||[])),this.currentFacetIndex=0,this.globalOptions.autoFacetPosition){case"shuffle":this.facets=this.facets.sort(function(){return Math.random()<.5})}this.eventEmitterForObject(this,"pam:"+this.globalOptions.uniqid),a.hasOwnProperty("documentHasFocus")&&(this.documentHasFocus=a.documentHasFocus),this.syncDocumentHasFocus(),this.master&&(this.on("js-impression-ad-campaign",function(e,t,i,o){p.sendJSImpressionAdCampaign(e,t,i,o)}),this.on("create-opaque-animation",function(e,t,i){p.createOpaqueAnimation(e,t,i)}),this.on("play-opaque-animation",function(e,t,i){p.playOpaqueAnimation(e,t,i)}),this.on("reverse-opaque-animation",function(e,t,i){p.reverseOpaqueAnimation(e,t,i)}),this.on("clear-opaque-animation",function(e){p.clearOpaqueAnimation(e)}),this.on("wait-top-dom-loaded",function(e){p.waitTopDomLoaded(function(){p.emit(e)})}),this.on("bind-visibility-tracker",function(e,t,i,o){p.bindVisibilityTracker(e,t,i,o)}),this.on("start-navigation-tracking",function(e){p.startNavigationTracking(e)}));var b=!1;try{var w=p.getTopmostWindow().name;(w||"").match(/pmpassback/)&&(b=!0)}catch(v){}for(s=0;s<i.length;s++){if(d=i[s],d.uniqid||(d.uniqid="ad"+this.rand()),d.remapSnippets&&d.remapSnippets.length)for(var x=0;x<d.remapSnippets.length;x++){var k=d.remapSnippets[x];try{new Function(["pam"],k).call(d,p)}catch(v){o(v)}}var I=!0;if(d.require&&d.require.context)for(c=0;c<d.require.context.length;c++)if(!d.require.context[c]()){I=!1;break}if(b&&!d.passback&&(I=!1),I){var P=new y(this,d);this.availableAds.push(P),P.passback||this.realAds.push(P),d.require&&d.require.positions&&d.require.positions.length||!d.use||!d.use.positions||!d.use.positions.length||this.decorativeAds.push(P)}}if(!this.realAds.length&&this.globalOptions.keepAdringForRTA){C.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",C.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT";var E=this.globalOptions.pixiAdrName;C.cookie=E+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",C.cookie=E="=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"}A.piximedia.request_pos=A.piximedia.request_pos||{},A.piximedia.request_pos_sp=A.piximedia.request_pos_sp||{},A.piximedia.request_pos_sp[this.siteId]=A.piximedia.request_pos_sp[this.siteId]||{};var T=this.request_pos=A.piximedia.request_pos_sp[this.siteId][this.placementId]=A.piximedia.request_pos_sp[this.siteId][this.placementId]||{},_=this.globalOptions.rtaPositionsToRequestOnlyWhenRequired||[];for(s=0;s<this.availableAds.length;s++){if(d=this.availableAds[s],d.require&&d.require.positions)for(var O=this.parseRequestedPositions(d.require.positions),F=0;F<O.length;F++){T[O[F]]=!0,A.piximedia.request_pos[O[F]]=!0;var D=p.getPrerequisiteVirtualPosition(O[F]);D&&(T[D]=!0,A.piximedia.request_pos[D]=!0)}if(!d.passback&&d.use&&d.use.positions)for(var M=this.parseRequestedPositions(d.use.positions),R=0;R<M.length;R++){var j=M[R];if(-1===l(_,j)){T[j]=!0,A.piximedia.request_pos[j]=!0;var B=p.getPrerequisiteVirtualPosition(j);B&&(T[B]=!0,A.piximedia.request_pos[B]=!0)}}}if(this.globalOptions.requestPosJSSnippet)try{new Function(["request_pos","pam"],this.globalOptions.requestPosJSSnippet).call(p,A.piximedia.request_pos,p),new Function(["request_pos","pam"],this.globalOptions.requestPosJSSnippet).call(p,T,p)}catch(W){n("Could not execute request_pos JS snippet: ",W)}if(u.match(/^alliance/)){A.piximedia.core||(A.piximedia.core=new S(this));var q=this.siteId+"|"+this.placementId,U=setInterval(function(){try{var e=p.getTopmostWindow();e&&e.pmLoopBlocker&&e.pmLoopBlocker.hasOwnProperty(q)&&(clearInterval(U),p.loadEvent("PANIC",void 0,void 0,{fail_reason:"both_v1_and_position_tags"}))}catch(t){}},2e3);setTimeout(function(){p.sendStatistics()},1.5*(this.globalOptions.rendezvous_duration||N))}if(this.globalOptions.enableFooter&&this.hello({implicit:!0,ajax:!0,positionId:"footer"}),this.globalOptions.bwd_probability&&Math.random()<this.globalOptions.bwd_probability)try{var H=V.getData();this.loadEvent("BWD",void 0,void 0,{c1:H.browser_name,c2:H.browser_major_version,c3:H.os_name})}catch(v){}n(this.master?"Master PAM Created":"Hosted PAM Created"),this.globalOptions.pamela&&this.waitDomLoaded(function(){var e=p.getTopmostDocument(),t=e.createElement("script");e.body.appendChild(t),t.src="http://resources.pm/tools/pamela/pamelight.js"})}function P(e,t){for(var i=p(e.positionId||""),o=p(t.positionId||""),n=i.split("."),a=o.split("."),r=0;r<n.length;r++){if(r>=a.length)return 1;var s=n[r],l=a[r];if(s.match(/^[0-9]+$/)&&l.match(/^[0-9]+$/)&&(s=parseInt(s,10),l=parseInt(l,10)),l>s)return-1;if(s>l)return 1}return a.length>n.length?-1:0}function E(e,t,i,n){var a,r=e.split(":"),s=[],c=[];a=r[0].split(".");for(var d in i)if(i.hasOwnProperty(d)){var u=i[d],m=u.positionId,h=m.split("."),f=h.slice(1);if(""===a[0]||"*"===a[0]||a[0]===h[0]){for(var v=!0,g=1;g<a.length;g++)if(-1===l(f,a[g])){v=!1;break}if(v){if(s.push(u),t.activeAndNotUsed&&(!u.active||u.used))continue;if(t.notRequestedByActiveAd&&(!u.active||u.used||u.requested))continue;if(t.decoratedBy&&u.decoratedBy!==t.decoratedBy)continue;c.push(u)}}}c.sort(P);for(var y=1;y<r.length;y++){var b=r[y];if("free_mp"===b&&(b=n?"optional":"free"),c.length){switch(b){case"odd":b="mod2=0";break;case"even":b="mod2=1"}if("first"===b)c=[c[0]];else if("last"===b)c=[c[c.length-1]];else if("#"===b.charAt(0)){var w=parseInt(b.substr(1),10);c=c[w-1]?[c[w-1]]:[]}else if("optional"===b)c.length||c.push({});else if("decorated"===b){for(var x=[],k=0;k<c.length;k++)for(var S=c[k].iframes||[],I=0;I<S.length;I++){var E=S[I].iframe;E&&parseInt(E.style.width,10)>1&&parseInt(E.style.height,10)>1&&x.push(c[k])}c=x}else if("used"===b||"free"===b){for(var A="used"===b,C=[],T=!0,_=0;_<s.length;_++)(s[_].used?!0:!1)!==A&&(T=!1);
if(T)for(var O=0;O<c.length;O++)(c[O].used?!0:!1)===A&&C.push(c[O]);c=C}else if("exact"===b){for(var N=p(r[0]),F=[],D=0;D<c.length;D++){var M=p(c[D].positionId||"");N===M&&F.push(c[D])}c=F}else if("primaryposition"===b)c=c;else{var L=b.match(/^mod([0-9]+)={1,3}([0-9]+)$/);if(L){for(var R=parseInt(L[1],10),j=parseInt(L[2],10),B=[],V=0;V<c.length;V++)V%R===j&&B.push(c[V]);c=B}else o("Unknown restrictive: "+b),c=[]}}else switch(b){case"free":case"optional":if(!t.positions){var W=!0;if("free"===b)for(var q=0;q<s.length;q++)s[q].used&&(W=!1);W&&c.push({})}}}return c}var A=window,C=document;if(!A.piximedia){try{!A.piximedia&&parent.piximedia&&(A.piximedia=parent.piximedia)}catch(T){}try{!A.piximedia&&parent.parent.piximedia&&(A.piximedia=parent.parent.piximedia)}catch(T){}try{!A.piximedia&&top.piximedia&&(A.piximedia=top.piximedia)}catch(T){}A.piximedia=A.piximedia||{};try{parent.piximedia=A.piximedia}catch(T){}try{parent.parent.piximedia=A.piximedia}catch(T){}try{top.piximedia=A.piximedia}catch(T){}}A.piximedia._=A.piximedia._||{},A._piximedia=A._piximedia||{},A._piximedia.images=A._piximedia.images||[];var _,O=2014031001,N=1e3,F="http://static.adserver.pm/host.html/revision=56e9dd63a145f45ea9bb4b4f523d85ac",D="ad.piximedia.com",M="static.adserver.pm",L=!1,R=1200,j=.05;t.get=function(){return t.trail||[]};var B="margin: 0; padding: 0; border: 0; position: relative; overflow: visible; cursor: default; word-spacing: normal; font-size: 11px; font-style: normal; letter-spacing: 0px; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; font-family: Arial, Helvetica, sans-serif; left: 0; right: 0; /*top: 0; bottom: 0;*/ text-align: left; display: block; clear: both",V=window._piximediaBrowserDetect;g.globalEmitter=new g,g.forObject=function(e,t,i){if(i=i||{},e._eventEmitter&&!i.purge)return e._eventEmitter;var o=new g(e);if(e.fire=e.emit=function(){return o.fire.apply(o,arguments)},e.fireLocal=e.emitLocal=function(){return o.fireLocal.apply(o,arguments)},e.addListener=e.on=function(){return o.addListener.apply(o,arguments)},e.removeListener=function(){return o.removeListener.apply(o,arguments)},e.removeAllListeners=function(){return o.removeAllListeners.apply(o,arguments)},e._eventEmitter=o,t){o.id=t;var n=i.globalEmitter||g.globalEmitter;o.globalEmitter=n,n.ids=n.ids||{},n.ids[t]=e}return o},g.getID=function(e){return e instanceof g?e.id:e._eventEmitter?e._eventEmitter.id:void 0},g.prototype.fireEventToID=function(e,t,i){if(i=i||{},this.ids&&this.ids.hasOwnProperty(e)){var n=this.ids[e];try{for(var a=[],r=0;r<t.length;r++)a.push(t[r]);"string"==typeof t[0]&&(t[0]={name:t[0]}),i.exceptTo&&(t[0].exceptTo=i.exceptTo),n.fire.apply(n,t)}catch(s){o("Caught error when handling event",s)}}},g.prototype.fire=function(e){var t,i=arguments.length-1,o=this.target||this;"string"==typeof e&&(e={name:e}),t=e.name;var n=this.globalEmitter||g.globalEmitter;if(this!==n&&!e.local&&!this.ids){for(var a=[],r=0;r<arguments.length;r++)a.push(arguments[r]);n.fire({name:"event",exceptTo:e.exceptTo},o,a)}if(this.events[t]){var s,l=[];for(s=0;s<this.events[t].length;s++)l.push(this.events[t][s]);for(s=0;s<l.length;s++){var c,d=l[s];if(!e.exceptTo||e.exceptTo!==d){switch(i){case 0:c=d.call(o);break;case 1:c=d.call(o,arguments[1]);break;case 2:c=d.call(o,arguments[1],arguments[2]);break;default:for(var p=[],u=0;i>u;u++)p[u]=arguments[u+1];try{c=d.apply(o,p)}catch(m){}}if(void 0!==c)return c}}}return void 0},g.prototype.fireLocal=function(e){for(var t=[{name:e,local:!0}],i=1;i<arguments.length;i++)t.push(arguments[i]);return this.fire.apply(this,t)},g.prototype.emit=g.prototype.fire,g.prototype.emitLocal=g.prototype.fireLocal,g.prototype.addListener=function(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),this.target},g.prototype.on=g.prototype.addListener,g.prototype.removeListener=function(e,t){var i=this.events[e];if(i){for(var o=[],n=i.length-1;n>=0;n--){var a=i[n];a!==t&&o.push(a)}this.events[e]=o}return this.target},g.prototype.removeAllListeners=function(){return this.events={},this.target},y.prototype.queryPosition=function(e){return this.pam.queryPosition(e,{decoratedBy:this})},y.prototype.sendCpmviewClick=function(){var e=this;return e.pam.master?void(this.cpmviewClickSent||(this.loadEvent("CLICK",{c5:"cpmview"}),this.cpmviewClickSent=!0)):void(e.emit&&e.emit("send-cpmview-click"))},y.prototype.somethingHasBeenSeen=function(){var e=this;return e.pam.master?void("string"==typeof e.args.delayed_display&&"{}"!==e.args.delayed_display&&(window.pmBypassImpression||e.sentImpression||(e.pam.loadPixel(e.args.impression_pixel),e.sentImpression=!0))):void(e.emit&&e.emit("something-has-been-seen"))},y.prototype.purgeEventEmitter=function(){this.pam.eventEmitterForObject(this,this.uniqid,{purge:!0})},y.prototype.inject=function(e,t,i){"function"!=typeof t||i||(i=t,t={}),t.pixiPositionId||(t.pixiPositionId=u(e)),t.room&&(e="room."+t.room),void 0===t.future&&(t.future=!0),t.future&&(t.present=!0),this.rooms&&this.rooms[e]&&(i=this.makeHostRooms(i,this.rooms[e]));var o;if("string"==typeof e||s(e)){if("string"==typeof e){t.future&&this.injectFuture(e,t,i);var a=this.remapPositions||{};for(var r in a)if(a.hasOwnProperty(r)){var l=new RegExp("\\b"+r+"\\b","g");e=e.replace(l,a[r])}}o=A.piximedia.preview?this.pam.queryPositions("*"):this.positions,o=this.pam.queryPositions(e,{positions:o})}else"object"==typeof e&&(o=[e]);for(var c=0;c<o.length;c++){var d=o[c];d.decoratedBy&&d.decoratedBy!==this&&d.decoratedBy!==this.cgAd||!d.active||d.hosted||(n("Injecting contents into "+d.positionId),t.present&&!d.used&&(d.decoratedBy=this,d.decoratedAt=d.decoratedAt||new Date,d.used=!0,d.justUsed&&d.justUsed(),n("Taking position "+d.positionId),this.positions.push(d)),this.cgOptions&&!d.decoratedByCG&&(d.setDecoratedByCG(this),this.pam.master||d.emit("injected-into-creative-group",this.cgOptions)),d.pixiPositionId=t.pixiPositionId,this.pam.master||d.emit("injected-into-pixi-position-id",d.pixiPositionId||e),this.shouldHostPosition(d)?this.pam.hostPosition(this,d):this.injectPosition(d,t,i))}},y.prototype.injectFuture=function(e,t,i){"function"!=typeof t||i||(i=t,t={});var o=this,a=this.remapPositions||{};for(var r in a)if(a.hasOwnProperty(r)){var s=new RegExp("\\b"+r+"\\b","g");e=e.replace(s,a[r])}var l=function(e){n("Injecting contents into future "+e.positionId),e.decoratedBy=o,e.decoratedAt=e.decoratedAt||new Date,o.cgOptions&&e.setDecoratedByCG(o),e.pixiPositionId=t.pixiPositionId,o.shouldHostPosition(e)?o.pam.hostPosition(o,e):o.injectPosition(e,t,i)};if(this.on("hello",function(t){if(!o.disabled){var i={};i[t.positionId]=t;var a=o.pam.queryPositions(e,{positions:i,ignoreConditions:!0});if(a.length){var r=o.pam.queryPositions(e,{positions:i,conditionPositions:o.pam.positions});if(r.length)l(t);else{n("Found a position to inject that fails to meet its condition, waiting for future positions");var s=!1;o.pam.on("pre-hello",function(){if(!s){var n=o.pam.queryPositions(e,{positions:i,conditionPositions:o.pam.positions});n.length&&(s=!0,l(t))}})}return n("Grabbing position "+t.positionId),o.positions.push(t),t.decoratedAt=new Date,!0}}}),e.match(/=>/)){var c=function(){var t=o.pam.queryPosition(e,{positions:o.positions});t.length&&(o.pam.removeListener("position-has-been-decorated",c),l(t[0]))};o.pam.on("position-has-been-decorated",c)}},y.prototype.makeHostRooms=function(e,t){return function(i,n,a,r){try{e.apply(this,arguments)}catch(s){o("Could not execute callback: "+s)}for(var l=0;l<t.length;l++){var c=t[l];r.hostRoom(c.id,c)}}},y.prototype.makeInject=function(e,t){var i=this;return function(n,a){try{if(i.pam.log("Calling makeInject()"),!e.clickUrl&&e.positionId.match(/^room\./)&&e.pixiPositionId){var r=e.pixiPositionId,l=this.remapPositions||{};for(var c in l)if(l.hasOwnProperty(c)){var d=new RegExp("\\b"+c+"\\b","g");r=r.replace(d,l[c])}e.clickUrl=e.allClickUrls&&e.allClickUrls[r]||i.pam.positions[r]&&i.pam.positions[r].clickUrl,e.advertiserClickUrl=e.allAdvertiserClickUrls&&e.allAdvertiserClickUrls[r]||i.pam.positions[r]&&i.pam.positions[r].advertiserClickUrl}t.call(e,n,a,e,a.framedIframe);var p=(i.args||{})["position-css"];p&&i.pam.loadLibrary("sweetlib.js",function(){if(s(p))for(var e=0;e<p.length;e++)A.piximedia.SweetLib.createCSSs(p[e],n);else A.piximedia.SweetLib.createCSSs(p,n)})}catch(u){o("Could not inject position "+e.positionId+": "+u)}}},y.prototype.injectPosition=function(e,t,i){var o=this;i?t=t||{}:(i=t,t={}),o.pam.log("Injecting into "+e.positionId);var a=t.htmlComments,r="inject"+this.pam.rand();A.piximedia._[r]=this.makeInject(e,i);var s={name:"pmInject_"+e.positionId,javascript:"window.piximedia._."+r+"(document,window)"};a&&(s.htmlComments=a);for(var l in t)t.hasOwnProperty(l)&&(s[l]=t[l]);if(e.decoratedBy||(e.decoratedBy=this,e.decoratedAt=e.decoratedAt||new Date,n("Marking position not yet marked decorated by any ad"),this.positions.push(e)),this.cgOptions&&!e.decoratedByCG&&e.setDecoratedByCG(this),e.decoratedBy&&e.decoratedBy.masterPosition&&e.decoratedBy.iframe&&e.positionId===e.decoratedBy.masterPosition.positionId&&(e.decoratedBy.iframe.doNotSendPixels=!0),this.pam.master&&(e.injectionIndex=e.injectionIndex||0),!e.hosted&&!e.injectionIndex){e.loadEvent("JS:IMPRESSION",{detail:this.getPixiPositionIdForPositionId(e.positionId)});var c=o.campaignId,d=o.adId;if(o.pam.sendJSImpressionAdCampaign(c,d,e.positionId,this.getPixiPositionIdForPositionId(e.positionId)),e.decoratedAt){var p=Math.round((new Date-e.decoratedAt)/1e3);e.loadEvent("JS:DELAY:IMPRESSION",{detail:this.getPixiPositionIdForPositionId(e.positionId),duration:p})}}var u=function(){var t,i=function(){n("Position removed",e),o.pam.unloadPosition(e)},a=function(){n("Position winlost: "+e.positionId,e),e.injectionIndex++,t.unload({hide:!0}),t.removeListener("remove",i),t.removeListener("winlose",a);for(var o=!1,r=0;r<(e.iframes||[]).length;r++)if(e.iframes[r]===t){o=!0;break}o?(n("ZZZ Position still active, reloading"),u()):n("ZZZ Position no longer active")};t=o.pam.injectFriendlyContent(e,s,o).on("remove",i).on("winlose",a)};u()},y.prototype.getTrackedUrl=function(e,t,i){return i=i||{},i=JSON.parse(JSON.stringify(i)),i.detail&&(i.detail=u(i.detail)),!i.c1&&this.args&&this.args.c1&&(i.c1=this.args.c1.toString()),!i.c2&&this.args&&this.args.c2&&(i.c2=this.args.c2.toString()),!i.c3&&this.args&&this.args.c3&&(i.c3=this.args.c3.toString()),!i.c4&&this.args&&this.args.c4&&(i.c4=this.args.c4.toString()),!i.c5&&this.args&&this.args.c5&&(i.c5=this.args.c5.toString()),i.campaignIdAlliance=this.campaignId,i.adIdAlliance=this.adId,i.creativeIdAlliance=this.creativeId,this.pam.getTrackedUrl(e,t,i,this.ticketInfo)},y.prototype.loadEvent=function(e,t){t&&(t=JSON.parse(JSON.stringify(t)),t.detail&&(t.detail=u(t.detail))),!t.c1&&this.args&&this.args.c1&&(t.c1=this.args.c1.toString()),!t.c2&&this.args&&this.args.c2&&(t.c2=this.args.c2.toString()),!t.c3&&this.args&&this.args.c3&&(t.c3=this.args.c3.toString()),!t.c4&&this.args&&this.args.c4&&(t.c4=this.args.c4.toString()),!t.c5&&this.args&&this.args.c5&&(t.c5=this.args.c5.toString()),this.pam.loadEvent(e,{campaignIdAlliance:this.campaignId,adIdAlliance:this.adId,creativeIdAlliance:this.creativeId},this.ticketInfo,t),"AP_SOMETHINGHASBEENSEEN"===e&&this.somethingHasBeenSeen()},y.prototype.loadEventOnce=function(e,t,i){if(t=t||{},i=i||[],!this.pam.master)return this.emit("load-event-once",e,t,i);this.loadEventOnceSems=this.loadEventOnceSems||{};var o=[e,t.c1,t.c2,t.c3,t.c4,t.c5].join("|");if(!this.loadEventOnceSems.hasOwnProperty(o)){this.loadEventOnceSems[o]=!0,this.loadEvent(e,t);for(var n=0;n<i.length;n++)this.pam.loadPixel(i[n])}},y.prototype.getPixiPositionIdForPositionId=function(e){if(this.pam.positions&&this.pam.positions[e]&&this.pam.positions[e].pixiPositionId)return this.pam.positions[e].pixiPositionId;if(e.match(/^room\./))return e;var t=this.remapPositions||{},i={},o=e.split(".");o.length>1&&(e=o[0]),i[e]={positionId:e};var n=[];for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];this.pam.queryPositions(r,{positions:i}).length&&n.push(a)}return n.length?l(n,"mpu")>=0?"mpu":n[0]:e},y.prototype.queryAssets=function(e){var t=((this.args||{}).assets||{}).pool||[];return _.assetsMatchQuery(e,t)},b.prototype=new y({},{}),b.prototype.constructor=b,b.prototype.injectPosition=function(e,t){if(this.position.positionId===e.positionId&&this.pam.positionCurrentlyInline===e.positionId)try{t.call(e,this.framedDocument,this.framedWindow,e)}catch(i){o("Could not inject friendly position: "+e.positionId+": "+i)}else y.prototype.injectPosition.apply(this,arguments)},w.prototype=new y({},{}),w.prototype.constructor=w,x.prototype.registerResponsiveCallback=function(e){this.on("responsive",e),this.enableResponsiveEvents()},x.prototype.setMessageDuration=function(e){var t=this;return t.pam.master?void t.pam.loadLibrary("sweetlib.js",function i(){return t.iframe?void A.piximedia.SweetLib.bindViewTracker({object:t.iframe,threshold:50,duration:e},function(){t.position.loadEventWait("AP_CONSUMED");var e="isAnyConsumedForCampaign"+(t.position.decoratedBy||t.position.decoratedByCG||{}).campaignId;t.pam[e]||(t.pam[e]=!0,t.position.loadEventWait("AP_CONSUMED:CAMPAIGN"))}):setTimeout(i,500)}):t.emit("set-message-duration",e)},x.prototype.enableResponsiveEvents=function(){var e=this;return this.pam.master?void(this.responsiveEventsEnabled||(this.responsiveEventsEnabled=!0,this.pam.loadLibrary("sweetlib.js",function(){var t=A.piximedia.SweetLib,i=t.getPageContainer();t.enableResponsiveEventsForPageContainer(i,function(t){e.position.emit("responsive",t),e.emit("responsive",t)})}))):this.emit("enable-responsive-events")},x.prototype.hostRoom=function(e,t){if(t=t||{},!this.pam.master)return this.emit("host-room",e,t);var i=this;this.pam.hostRoom(e,{injectionIndex:this.position.injectionIndex},function(){var e=i.iframe,o=e.ownerDocument,n=o.createElement("div"),a=o.createElement("div");switch(n.className="pmRoomContainer",n.style.position="absolute",a.className="pmRoom",a.style.position="absolute",t.align||"center"){case"left":break;case"right":7===i.pam.msie&&(n.style.minWidth="100%"),n.style.width="100%",n.style.position="absolute",a.style.position="absolute",a.style.right=0;break;case"center":n.style.width="100%",7===i.pam.msie&&(n.style.minWidth="100%"),a.style.left="50%",a.className+=" pmCentered"}if(t.left&&(n.style.left=parseInt(t.left)+"px"),t.top&&(n.style.top=parseInt(t.top)+"px"),t.css)for(var r in t.css)if(t.css.hasOwnProperty(r))try{a.style[r]=t.css[r]}catch(s){}return n.appendChild(a),e.parentNode.insertBefore(n,e),a})},x.prototype.unload=function(e){var t=this;if(e=e||{},this.active=!1,i("Iframe.unload()"),this.iframe){if(this.pam.isInDOM(this.iframe))i("Iframe is still in DOM: "+this.iframe.id),e.hide?(this.iframe.style.display="none",i("Setting iframe display: none")):this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe);else{i("Iframe is no longer in DOM: "+this.iframe.id);var o=this.iframe.ownerDocument.getElementById(this.iframe.id);o?(i("Found winlost iframe in DOM: "+this.iframe.id),e.hide?(o.style.display="none",i("Setting iframe display: none")):o.parentNode&&o.parentNode.removeChild(o)):i("Winlost iframe not in DOM: "+this.iframe.id),e.hide?(this.iframe.style.display="none",i("Setting iframe display: none")):this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe)}if(this.moveTop&&this.pam.loadLibrary("sweetlib.js",function(){var e=A.piximedia.SweetLib;e.moveTopOfPageContainer(t.pageContainer,-t.moveTop)}),e.hide){var n=function(){var e=t.iframe.ownerDocument.getElementById(t.iframe.id);"none"!==e.style.display&&(i("Iframe must be hidden again: "+t.iframe.id),e.style.display="none")},a=setInterval(n,20);setTimeout(function(){clearInterval(a),setInterval(n,500)},1e4)}}else i("no known iframe")},x.prototype.setIframe=function(e){var t=this,o=e.id,a=e.ownerDocument;if(o||(o=e.id="pmAnonIframe"+this.pam.rand()),this.iframe=e,this.visibilityCallbackOnHold&&(this.emit("register-visibility-callback",this.visibilityCallbackOnHold),this.visibilityCallbackOnHold=void 0),t.pam.master&&(this.iframe.onmouseover=function(){t.emitLocal("mouseover")},this.iframe.onmouseout=function(){t.emitLocal("mouseout")},t.position&&t.position.decoratedBy&&t.position.decoratedBy.timetracker&&t.position.decoratedBy.timetracker.hover)){var r=t.position,s=t.position.decoratedBy,c=s.timetracker.hover,d=r.pixiPositionId||r.decoratedBy.getPixiPositionIdForPositionId(r.positionId);"string"==typeof c&&(c=c.split(/ +/)),l(c,d)>=0&&(this.on("mouseover",function(){r.startTimetrackerHover()}),this.on("mouseout",function(){r.stopTimetrackerHover()}))}var p=function(){t.active&&setTimeout(function(){var e=a.getElementById(o);return e?(n("Iframe has been winlost"),t.emitLocal("winlose"),void t.setIframe(e)):void(t.pam.winlostIframeIds[o]?(t.active=!1,n("Iframe has been removed by PAM because of a winlose"),t.emitLocal("winlose")):(n("Iframe has been removed"),t.emitLocal("remove")))},0)};(t.safari||t.chrome)&&e.addEventListener("DOMNodeRemovedFromDocument",function(){p()});var u=e.contentWindow,m=setInterval(function(){var n=a.getElementById(o),r=n?n.contentWindow:void 0;n!==e?(i("Iframe changed, is there a winlose?"),clearInterval(m),p()):t.active&&r!==u&&(i("Iframe content window has changed by an external JavaScript"),e.parentNode.innerHTML="<!--winlose-->"+e.parentNode.innerHTML+"<!--winlose-->")},50)},k.prototype.setDecoratedByCG=function(e){this.decoratedByCG=e;var t=this.eventQueue;this.eventQueue=[];for(var i=0;i<t.length;i++){var o=t[i];this.loadEvent(o.eventId,o.options)}},k.prototype.justUsed=function(){var e=this,t=e.positionId;if(e.pam&&e.pam.globalOptions&&e.pam.globalOptions.positionsUniqueOnPage&&l(e.pam.globalOptions.positionsUniqueOnPage,t)>=0)for(var i in window.piximedia._.pams)if(window.piximedia._.pams.hasOwnProperty(i)&&i.match(/^pam/)){var o=window.piximedia._.pams[i];o&&o.positions&&o.positions[t]&&(o.log("Registering this position "+t+" as being used"),o.positions[t].used=!0,o.positions[t].usedUniqueOnPage=!0)}if(e.pam.master&&!e.trackingPositionSent){e.trackingPositionSent=!0;var n=e.decoratedBy||{},a=function(t){if(t){"string"==typeof t&&e.pam.loadPixel(t);for(var i=0;i<t.length;i++)e.pam.loadPixel(t[i])}};n.args&&n.args["tracking.ad:impression"]&&n.args["tracking.ad:impression"].pixelUrl&&a(n.args["tracking.ad:impression"].pixelUrl),n.args&&n.args["tracking.creative:impression"]&&n.args["tracking.creative:impression"].pixelUrl&&a(n.args["tracking.creative:impression"].pixelUrl)}},k.prototype.getTrackedUrl=function(e,t,i){var o={};if(i)for(var n in i)i.hasOwnProperty(n)&&(o[n]=i[n]);return o.detail||(o.detail=this.pixiPositionId||(this.decoratedBy?this.decoratedBy.getPixiPositionIdForPositionId(this.positionId):void 0)),this.decoratedByCG&&this.decoratedByCG.getTrackedUrl?this.decoratedByCG.getTrackedUrl(e,t,o):this.decoratedBy&&this.decoratedBy.getTrackedUrl?this.decoratedBy.getTrackedUrl(e,t,o):this.pam.getTrackedUrl(e,t,o)},k.prototype.loadEvent=function(e,t){var i={};if(t)for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);i.detail||(i.detail=this.pixiPositionId||(this.decoratedBy?this.decoratedBy.getPixiPositionIdForPositionId(this.positionId):void 0)),this.decoratedByCG?this.decoratedByCG.loadEvent(e,i):this.decoratedBy?this.decoratedBy.loadEvent(e,i):this.pam.loadEvent(e,void 0,void 0,i)},k.prototype.loadEventOnce=function(e,t,i){if(t=t||{},i=i||[],!this.pam.master)return this.emit("load-event-once",e,t,i);this.loadEventOnceSems=this.loadEventOnceSems||{};var o=[e,t.c1,t.c2,t.c3,t.c4,t.c5].join("|");if(!this.loadEventOnceSems.hasOwnProperty(o)){this.loadEventOnceSems[o]=!0,this.loadEvent(e,t);for(var n=0;n<i.length;n++)this.pam.loadPixel(i[n])}},k.prototype.loadEventWait=function(e,t){return this.decoratedBy||o("Cannot use Position.loadEventWait() on positions not associated to an ad"),this.decoratedBy.is_creative_group?this.decoratedByCG?this.loadEvent(e,t):void this.eventQueue.push({eventId:e,options:t}):this.loadEvent(e,t)},k.prototype.startTimetrackerHover=function(){var e=this;if(!e.pam.master)return e.emit("start-timetracker-hover");if(!this.timetrackerHover){var t,i=0,o=0,n=function(){e.pam.loadLibrary("sweetlib.js",function(){i&&!o?t.pause():!i&&o&&(t?t.resume():(t=A.piximedia.SweetLib.setTimer("HOVER",function(t,i){e.loadEventWait("TIMETRACKER::"+t,{duration:i,detail:e.pixiPositionId||e.decoratedBy.getPixiPositionIdForPositionId(e.positionId)})}),t.start())),i=o})};this.timetrackerHover={start:function(){o++,n()},stop:function(){o--,n()}}}this.timetrackerHover.start()},k.prototype.stopTimetrackerHover=function(){return this.pam.master?void(this.timetrackerHover&&this.timetrackerHover.stop()):this.emit("start-timetracker-hover")},S.prototype.loadActivity=function(e){this.pam.loadActivityPixel(e)},S.prototype.loadAd=function(e){var t=this.getUrl(e);if(e.dw)try{C.write('<script type="text/javascript" src="'+t+'"></script>')}catch(i){}else e.defer&&"complete"!==C.readyState?this.deferObj(e):(A.pmIsAlreadyActive&&(e.use_pb=!0,t=this.getUrl(e)),this.pam.loadScript(t))},S.prototype.getUrl=function(e){var t="";return e.use_pb&&(t+=";pb=1"),this.pam.globalOptions.serialId&&(t+=";serial_id="+this.pam.globalOptions.serialId),"//"+D+"/ads_js/stage2.php?"+e.mode+"|"+e.site_id+"|"+e.placement_id+"|"+e.params+t+"|"+V.toString()+"|"+this.pam.rand()+"|click="+e.click},S.prototype.deferObj=function W(e){var t=this;this.deferredObjects.push(e),W.listening||(W.listening=!0,this.pam.waitDomLoaded(function(){t.loadDeferedObjects()}))},S.prototype.loadDeferedObjects=function(){if(!this.deferredObjectsLoaded){this.deferredObjectsLoaded=!0;for(var e=0;e<this.deferredObjects.length;e++)this.loadDeferedAd(this.deferredObjects[e])}},S.prototype.loadDeferedAd=function(e){A.pmIsAlreadyActive&&(e.use_pb=!0),A.pmIsAlreadyActive=!0;var t=this.getUrl(e);this.loadScript(t)},S.prototype.getClickCommand=function(){for(var e=0;e<this.pam.positions.length;e++){var t=this.pam.positions[e];if(t.clickUrl)return t.clickUrl}return this.pam.clickUrl},S.prototype.loadEvent=function(e,t){this.pam.loadEvent(e,t,this.ticketInfos)},S.prototype.loadEventWithPrefix=function(e,t){this.pam.loadEvent(e,t,this.ticketInfos,{prefixURI:this.getClickCommand()})},S.prototype.loadScript=function(e){try{var t=C.createElement("script");t.type="text/javascript",t.async="async",t.src=e,C.getElementsByTagName("head")[0].appendChild(t)}catch(i){}},S.prototype.setTicket=function(e,t){this.ticketInfos={ticket:e,signature:t}},_=I,I.prototype.runPixeldisTest=function(){var e=this.getTopmostWindow();if(this.master&&e===top&&!(Math.random()<.9)){var t;switch(Math.round(5*Math.random())+1){case 1:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/a.html";break;case 2:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/b.html";break;case 3:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/c.html";break;case 4:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/d.html";break;case 5:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/e.html";break;default:case 6:t="//d26ljjbiopow12.cloudfront.net/alliance/sandbox/pixeldis/f.html"}this.waitDomMutable(function(){var i=e.document.getElementsByTagName("head");if(1===i.length){var o=i[0],n=e.document.createElement("iframe");n.id="pixipixeldis",n.src=t,o.appendChild(n)}})}},I.prototype.sendJSImpressionAdCampaign=function(e,t,i,o){if(!this.master)return this.emit("js-impression-ad-campaign",e,t,i,o);var n=this.positions[i];e&&!this.campaignIdsWithImpressions[e]&&(this.campaignIdsWithImpressions[e]=e,n.loadEvent("JS:IMPRESSION:CAMPAIGN",{detail:o})),t&&!this.adIdsWithImpressions[t]&&(this.adIdsWithImpressions[t]=t,n.loadEvent("JS:IMPRESSION:AD",{detail:o}))},I.prototype.log=n,I.prototype.error=o,I.prototype.debug=i,I.prototype.loadPixel=function(e){if(e&&" "!==e&&"PIXEL_URL"!==e){var t=e.toString().match(/^([0-9.]+)%:(.*)/);if(t){var i=parseFloat(t[1],10)/100;if(this.globalOptions.loadPixelRandom>i)return;e=t[2]}d(e.replace(/%n|\[random_number\]|\[random\]|\[timestamp\]/gi,Math.round(1e16*Math.random()).toString()))}},I.prototype.eventEmitterForObject=function(e,t,i){var o={};if(i)for(var n in o)o.hasOwnProperty(n)&&(o[n]=i[n]);return o.globalEmitter=this.globalEmitter,g.forObject(e,t,o)},I.prototype.syncDocumentHasFocus=function(){var e=this;if(this.master){var t=e.getTopmostDocument();e.documentHasFocus=t.hasFocus(),setInterval(function(){var i=t.hasFocus();i!==e.documentHasFocus&&(e.documentHasFocus=i,e.emit("focus-change",i))},1e3)}else this.on("focus-change",function(t){e.documentHasFocus=t})},I.prototype.cleanupPixiRTAPosCookie=function(e){e=e||{};var t=A.piximedia.request_pos_sp[this.siteId][this.placementId],i=!1;for(var o in t)if(t.hasOwnProperty(o)){i=!0;break}i||"alliance"!==this.mode||(e.keepRTAPos||(C.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",C.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),C.cookie="pixi_adr=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",C.cookie="pixi_adr=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",this.globalOptions.pixiAdrName&&(C.cookie=this.globalOptions.pixiAdrName+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",C.cookie=this.globalOptions.pixiAdrName+"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"))},I.prototype.getBirthdateCookie=function(){for(var e=C.cookie.split(/; */),t=/pixi_birthdate=(.*)/,i=e.length-1;i>=0;i--){var o=e[i].match(t);if(o&&o[1])return parseInt(o[1],10)}},I.prototype.getBirthdateLS=function(){try{if(A.localStorage&&A.localStorage.getItem)return parseInt(A.localStorage.getItem("pixi_birthdate"),10)||void 0}catch(e){}},I.prototype.exposePixiRTAPosCookie=function(e){e=e||{},e.expires||(e.expires=new Date((new Date).getTime()+1e3*R)),e.pixiRTAPosExpires||(e.pixiRTAPosExpires=new Date((new Date).getTime()+1e3*(this.globalOptions.pixiRTAPosExpires||R)));var t=[];for(var i in A.piximedia.request_pos)A.piximedia.request_pos.hasOwnProperty(i)&&t.push(i);if(C.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",C.cookie="pixi_rta_pos="+escape(t.join(";"))+"; path=/; "+this.getDomainPartForCookies()+(e.pixiRTAPosExpires?"; expires="+e.pixiRTAPosExpires.toUTCString():""),C.cookie="pixi_rta_v="+escape("1;"+(new Date).getTime())+"; path=/; "+this.getDomainPartForCookies()+(e.expires?"; expires="+e.expires.toUTCString():""),this.globalOptions.exposeRTAPosHelperJS){var n=this.getTopmostWindow();try{n.Function(["req_pos","window","document"],this.globalOptions.exposeRTAPosHelperJS).call(n,t,n,n.document)}catch(a){o("Could not execute RTA position helper: "+a)}}var r=+new Date,s=void 0!==this.getBirthdateCookie();s||(C.cookie="pixi_birthdate="+escape(r)+"; path=/; "+this.getDomainPartForCookies()+"; expires="+new Date((new Date).getTime()+31536e6).toUTCString());try{A.localStorage&&A.localStorage.getItem&&A.localStorage.setItem&&(A.localStorage.getItem("pixi_birthdate")||A.localStorage.setItem("pixi_birthdate",r))}catch(l){}},I.prototype.stringify=function(e){return void 0===e?"undefined":null===e?"null":"number"==typeof e?e:(e=e.toString(),'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"')},I.get=I.prototype.get=function(e,t,i){var o=e+"/"+t+":"+(i||"alliance");return(A.piximedia._.pams||{})[o]},I.prototype.loadActivityPixel=function(e,t){t=t||{};var i=A.piximedia._.contextBySP?A.piximedia._.contextBySP[this.siteId+"/"+this.placementId]:void 0;d("//"+D+"/activity/?|||advertiser_id="+e.advertiser_id+";page_id="+e.page_id+";activity_type="+e.activity_type+";sale_amount="+e.sale_amount+";sale_quantity="+e.sale_quantity+";sale_currency="+e.sale_currency+";customer_user_id="+e.customer_user_id+";http_secure="+A.location.protocol+";save_last_url="+(e.save_last_url?"true":"false")+";|"+i+"|"+this.rand()+"|")},I.prototype.getTrackedUrl=function(e,t,i,o){i=i||{};var n=(void 0===i.c1?"":i.c1.toString()).replace(/;/g,","),a=(void 0===i.c2?"":i.c2.toString()).replace(/;/g,","),r=(void 0===i.c3?"":i.c3.toString()).replace(/;/g,","),s=(void 0===i.c4?"":i.c4.toString()).replace(/;/g,","),l=(void 0===i.c5?"":i.c5.toString()).replace(/;/g,","),c=(this.globalOptions.l_id?this.globalOptions.l_id.toString():"").replace(/;/g,","),d=void 0===i.firstOnAd?"":i.firstOnAd?1:0,p=void 0===i.firstOnUnit?"":i.firstOnUnit?1:0,u=void 0===i.duration?"":i.duration.toString(),m=void 0===i.fail_reason?"":i.fail_reason.toString(),h=void 0===i.detail?"":i.detail.toString(),f=";c1="+n+";c2="+a+";c3="+r+";c4="+s+";c5="+l+";l_id="+c+";duration="+u+";first_on_ad="+d+";first_on_unit="+p+";detail="+h+";error="+m;i.campaignIdAlliance&&(f+=";campaign_id="+i.campaignIdAlliance),i.adIdAlliance&&(f+=";ad_id="+i.adIdAlliance),i.creativeIdAlliance&&(f+=";creative_id="+i.creativeIdAlliance);var v=A.piximedia._.contextBySP?A.piximedia._.contextBySP[this.siteId+"/"+this.placementId]:void 0;return v||(v=V.toString(),A.piximedia._.contextBySP=A.piximedia._.contextBySP||{},A.piximedia._.contextBySP[this.siteId+"/"+this.placementId]=v),(this.globalOptions.protocol||"http")+"://"+D+"/event/?P|"+this.siteId+"|"+this.placementId+"|event="+e+f+(o?";ticket="+o.ticket+";signature="+o.signature:"")+"|"+v+"|"+this.rand()+"|click="+t},I.prototype.loadEvent=function(e,t,i,n){switch(n=n||{},e){case"IMPRESSION":case"CLICK":break;default:if(this.numberOfEventsSent[e]=(this.numberOfEventsSent[e]||0)+1,this.numberOfEventsSent[e]>=50){if(50!==this.numberOfEventsSent[e])return;n.detail=(n.detail||"").toString()+":"+e,e="TOO_MANY_EVENTS"}}!t||i&&i.ticket&&i.signature||n.noTicket||this.globalOptions.noTicket||!this.mode.match(/^alliance/)||o("Required ticketInfos");var a,r=A.piximedia._.contextBySP?A.piximedia._.contextBySP[this.siteId+"/"+this.placementId]:void 0;if(r||(r=V.toString(),A.piximedia._.contextBySP=A.piximedia._.contextBySP||{},A.piximedia._.contextBySP[this.siteId+"/"+this.placementId]=r),t&&t.params)a=";"+t.params;else{var s=(void 0===n.c1?"":n.c1.toString()).replace(/;/g,","),l=(void 0===n.c2?"":n.c2.toString()).replace(/;/g,","),c=(void 0===n.c3?"":n.c3.toString()).replace(/;/g,","),p=(void 0===n.c4?"":n.c4.toString()).replace(/;/g,","),u=(void 0===n.c5?"":n.c5.toString()).replace(/;/g,","),m=(void 0===this.globalOptions.l_id?"":this.globalOptions.l_id.toString()).replace(/;/g,","),h=void 0===n.firstOnAd?"":n.firstOnAd?1:0,f=void 0===n.firstOnUnit?"":n.firstOnUnit?1:0,v=void 0===n.duration?"":n.duration.toString(),g=void 0===n.fail_reason?"":n.fail_reason.toString(),y=void 0===n.detail?"":n.detail.toString();a=";c1="+s+";c2="+l+";c3="+c+";c4="+p+";c5="+u+";l_id="+m+";duration="+v+";first_on_ad="+h+";first_on_unit="+f+";detail="+y+";error="+g,t&&(a+=";campaign_id="+t.campaignIdAlliance+";ad_id="+t.adIdAlliance+";creative_id="+t.creativeIdAlliance)}this.globalOptions.serialId&&(a+=";serial_id="+this.globalOptions.serialId);var b;if(n.prefixURI)b=!1;else switch(e){case"IMPRESSION":case"CLICK":case"AP_NAVIGATION":case"AP_NAV_10":case"AP_NAV_30":b=!1;break;default:b=!1}if(b){var w=this,x=a+(i?";ticket="+i.ticket+";signature="+i.signature:"");this.pixelQueue[x]=this.pixelQueue[x]||[],this.pixelQueue[x].push(e),this.pixelQueueTimer||(this.pixelQueueTimer=setTimeout(function(){w.pixelQueueTimer=void 0;var e=w.pixelQueue;w.pixelQueue=[];for(var t in e)e.hasOwnProperty(t)&&d("//"+D+"/eventq/?P|"+w.siteId+"|"+w.placementId+"|eventq="+e[t].join(",")+t+"|"+r+"|"+w.rand()+"|")},1500))}else d((n.prefixURI||"")+"//"+D+"/event/?P|"+this.siteId+"|"+this.placementId+"|event="+e+a+(i?";ticket="+i.ticket+";signature="+i.signature:"")+"|"+r+"|"+this.rand()+"|");switch(e){case"CLICK":case"AP_NAVIGATION":case"AP_NAV_10":case"AP_NAV_30":d("//"+D+"/profile/location.php?e="+e+"&p="+escape(a))}switch(e){case"JS:POSITION_USED":var k=(n.detail||"").toString(),S=Math.random()<j;if(k){var P=this.mode+"/"+this.siteId+"/"+this.placementId+"/"+k,E=this.getTopmostWindow();if(E.pmTimePositions&&E.pmTimePositions[P]){var C=E.pmTimePositions[P];
if(C.events=C.events||{},!C.events[e]){C.events[e]=!0;var T,_=Math.round((new Date-C.date)/1e3);if(_>=0&&120>_){switch(e){case"JS:POSITION_USED":T="JS:DELAY:POSITION_USED"}var O=V.getData();if(S&&this.loadEvent(T,t,i,{detail:k,duration:_,c1:O.browser_name,c2:O.browser_major_version}),"JS:POSITION_USED"===e&&E.performance&&E.performance.timing&&E.performance.timing.responseStart){var N=new Date(E.performance.timing.responseStart);_=Math.round((C.date-N)/1e3),_>=0&&120>_&&S&&this.loadEvent("JS:DELAY:POSITION",t,i,{detail:k,duration:_,c1:O.browser_name,c2:O.browser_major_version})}}}}}}setTimeout(function(){I.emit("event",e,t,n)},0)},I.prototype.getDomainPartForCookies=function q(){if(q.cache)return q.cache;try{var e=this.getDocumentAndWindowInfos().window;switch(e.location.protocol){case"http:":case"https:":return q.cache="domain=."+e.location.hostname.split(".").slice(-2).join(".")+"; "}}catch(t){}return""},I.prototype.getTopmostWindow=function(){return this.getDocumentAndWindowInfos().window},I.prototype.watchForRemoval=function(e,t){var i=this;if(this.safari||this.chrome)e.addEventListener("DOMNodeRemovedFromDocument",t);else var o=setInterval(function(){return i.isInDOM(e)?void 0:(clearInterval(o),t())},500)},I.prototype.isInDOM=function(e){try{for(var t=e,i=0;100>i;i++,t=t.parentNode){if(!t.parentNode)return!1;if("HTML"===t.parentNode.tagName)return!0}}catch(t){return!1}},I.prototype.isInHead=function(e){for(var t=e,i=0;100>i;i++,t=t.parentNode){if(!t.parentNode)return!1;if("HEAD"===t.parentNode.tagName)return!0;if("HTML"===t.parentNode.tagName)return!1}},I.prototype.getTopmostDocument=function(){return this.getDocumentAndWindowInfos().document},I.prototype.loadLibraries=function(e,t){var i=this,o=function(){try{return t.call(i)}catch(e){return void n("Caught exception when calling loadLibraries() callback: "+e)}},a=e.length;if(!a)return o();for(var r=function(){return--a?void 0:o()},s=0;s<e.length;s++)this.loadLibrary(e[s],r)},I.prototype.getPmLoaderDoc=function(){var e,t=this.getTopmostDocument();if(this.msie&&this.msie<8)e=t;else{var i=t.getElementById("pmFiFLoader");if(!i){var o,n=t.getElementsByTagName("head")[0];i=t.createElement("iframe"),i.id="pmFiFLoader";var a=t.createElement("iframe"),r=t.createElement("iframe");a.id="pmFiFLoader_protect_before",r.id="pmFiFLoader_protect_after",a.className="this_should_be_empty web_designer",r.className="this_should_be_empty web_designer",n.appendChild(a),n.appendChild(i),n.appendChild(r);try{o=i.contentWindow,e=i.contentDocument||i.contentWindow.document}catch(s){var l=this.getTopmostDocument();try{i.src="javascript:document.write('<head><script>document.domain=\""+l.domain+"\";</script></head><body></body>')",e=i.contentDocument||i.contentWindow.document,o=i.contentWindow}catch(s){i.src="javascript:document.write('<head><script>document.domain=\""+i.ownerDocument.domain+"\";</script></head><body></body>')",e=i.contentDocument||i.contentWindow.document,o=i.contentWindow}}e.write("<html><head></head><body><script>setTimeout(function(){document.close();},0);</script></body></html>"),i.contentWindow._piximediaIsFiFLoader=!0}i.contentWindow.piximedia=i.contentWindow.piximedia||A.piximedia,e=i.contentDocument||i.contentWindow.document}return e},I.prototype.loadLibrary=function(e,t){if(s(e))return this.loadLibraries(e,t);var i,o=this,a=function(){try{return t.call(o)}catch(i){return void n("Caught exception when calling loadLibrary() callback for "+e+": "+i)}},r=A.piximedia.libraryLoader=A.piximedia.libraryLoader||{};if(r.hasOwnProperty(e))i=r[e],i.loaded?a():i.callbacks.push(a);else{var l=this.globalOptions.libs[e];l||(l="//"+M+"/lib/"+e+(L?"/debug":"")),i=r[e]={callbacks:[a]};var c=this.getPmLoaderDoc(),d=c.createElement("script");d.src=l;var p,u,m=function(){if(!i.loaded){i.loaded=!0;for(var t=i.callbacks,a=0;a<t.length;a++)t[a]();var s=setInterval(function(){if(!o.isInDOM(d)){var t=V.getData();o.loadEvent("PANIC",void 0,void 0,{fail_reason:"loader_winlost",c1:t.browser_name}),n("No longer in DOM: "+e),i.loaded=!1,delete r[e],clearInterval(s),o.loadLibrary(e,function(){n("Back in DOM: "+e)})}},50)}},h=function(){i.complete&&m()},f=function(){i.complete&&(u.clearInterval(p),m())};i.onloads=i.onloads||[],i.onloads.push(f);var v=function(){var e=c.getElementsByTagName("head")[0];if(e){e.appendChild(d);var t=o.getTopmostWindow();u=t,p=u.setInterval(f,50)}else A.setTimeout(v,50)};d.addEventListener?d.addEventListener("load",h,!1):d.readyState&&(d.onreadystatechange=h),v()}},I.prototype.loadCSSs=function(e,t){var i=this,o=function(){try{return t.call(i)}catch(e){return void n("Caught exception when calling loadCSSs() callback: "+e)}},a=e.length;if(!a)return o();for(var r=function(){return--a?void 0:o()},s=0;s<e.length;s++)this.loadCSS(e[s],r)},I.prototype.loadCSS=function(e,t){if(s(e))return this.loadCSSs(e,t);var i,o=this,a=function(){if(t)try{return t.call(o)}catch(i){return void n("Caught exception when calling loadLibrary() callback for "+e+": "+i)}},r=A.piximedia.cssLoader=A.piximedia.cssLoader||{};if(r.hasOwnProperty(e))i=r[e],i.loaded?a():i.callbacks.push(a);else{var l=this.globalOptions.css[e];if(!l)throw new Error("Unknown CSS: "+e);i=r[e]={callbacks:[a]};var c=this.getPmLoaderDoc(),d=c.createElement("script");d.src=l;var p=function(){if(!i.loaded){i.loaded=!0;for(var e=i.callbacks,t=0;t<e.length;t++)e[t]()}},u=function(){i.complete&&p()};i.onloads=i.onloads||[];var m,h,f=function(){i.complete&&(h.clearInterval(m),p())};i.onloads.push(f);var v=function(){var e=c.getElementsByTagName("head")[0];if(e){e.appendChild(d);var t=o.getTopmostWindow();h=t,m=h.setInterval(f,50)}else A.setTimeout(v,50)};d.addEventListener?d.addEventListener("load",u,!1):d.readyState&&(d.onreadystatechange=u),v()}},I.prototype.getDocumentAndWindowInfos=function U(){if(U._cache)return U._cache;var e,t={};if(!t.window)try{e=A.parent.parent.parent.document,e._piximediaiframetest=!0,t.window=A.parent.parent.parent.window}catch(i){}if(!t.window)try{e=A.parent.parent.document,e._piximediaiframetest=!0,t.window=A.parent.parent.window}catch(i){}if(!t.window)try{e=A.parent.document,e._piximediaiframetest=!0,t.window=A.parent.window}catch(i){}if(t.window||(t.window=window),!t.document)try{e=A.parent.parent.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}if(!t.document)try{e=A.parent.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}if(!t.document)try{e=A.parent.document,e._piximediaiframetest=!0,t.document=e}catch(i){}return t.document||(t.document=document),(!this.msie||this.msie>8)&&(U._cache=t),t},I.prototype.hello=function(e){var t=this;if(!e.implicit&&this.master)switch(this.globalOptions.autoFacetPosition){case"shuffle":case"sequence":var a=this.facets[this.currentFacetIndex++];this.currentFacetIndex>=this.facets.length&&(this.currentFacetIndex=0),e.positionId+="."+a;break;case"device":e.positionId+="."+t.globalOptions.device}if(t.globalOptions.addFacets&&(e.positionId+="."+t.globalOptions.addFacets.join(".")),i(e.positionId?'hello({positionId:"'+e.positionId+'"})':"hello()"),e||o("Missing options"),this.globalOptions.positionsUniqueOnPage&&l(this.globalOptions.positionsUniqueOnPage,e.positionId)>=0)for(var r in window.piximedia._.pams)if(window.piximedia._.pams.hasOwnProperty(r)&&r.match(/^pam/)){var s=window.piximedia._.pams[r];if(s&&s!==this&&s.positions&&s.positions[e.positionId]&&s.positions[e.positionId].used)return n("Cannot register "+e.positionId+" because another PAM has a used footer"),void this.loadEvent("PANIC",void 0,void 0,{fail_reason:"registered_multiple_"+e.positionId})}if(e.implicit){if(this.master){var c=function(e){if(e){"string"==typeof e&&t.loadPixel(e);for(var i=0;i<e.length;i++)t.loadPixel(e[i])}},p={};p[e.positionId]={positionId:e.positionId};for(var u in t.globalOptions.positionArgs||{})if(t.globalOptions.positionArgs.hasOwnProperty(u)&&t.queryPosition(u,{positions:p}).length){var m=t.globalOptions.positionArgs[u],h=m["tracking.position"],f=m["tracking.placement"];h&&(c(h.pixelUrl),e.advertiserClickUrl=((h["tracking.position"]||{}).clickUrl||[])[0]||e.advertiserClickUrl);var v=t.globalOptions.l_id||"";d("//"+D+"/event/?P|"+t.siteId+"|"+t.placementId+"|event=JS:POSITION:IMPLICIT;l_id="+v+";detail="+e.positionId+"||"+Math.random()+"|");try{var y=t.getTopmostWindow(),b=t.mode+"/"+t.siteId+"/"+t.placementId;y._piximedia=y._piximedia||{},y._piximedia.pixelSPSent=y._piximedia.pixelSPSent||{},y._piximedia.pixelSPSent[b]||(y._piximedia.pixelSPSent[b]=!0,f&&c(f.pixelUrl),d("//"+D+"/event/?P|"+t.siteId+"|"+t.placementId+"|event=JS:PLACEMENT;l_id="+v+";detail="+e.positionId+"||"+Math.random()+"|"))}catch(w){}break}}}else this.numberOfExplicitPositions++;if(this.mode.match(/^alliance/)&&!this.globalOptions.inline&&!this.globalOptions.enableRTA&&!this.globalOptions.legacyPosition)switch(e.positionId){case"default":case"footer":break;default:this.loadEvent("PANIC",void 0,void 0,{fail_reason:"registered_position_"+e.positionId+"_without_RTA_support"})}if(e.masterPositionId){var x=this.positions[e.masterPositionId];x&&(e.clickUrl||(e.clickUrl=x.clickUrl),e.advertiserClickUrl||(e.advertiserClickUrl=x.advertiserClickUrl))}if(!e.virtual&&this.globalOptions.virtualPositions&&this.globalOptions.virtualPositions.hasOwnProperty(e.positionId)&&(e.virtual=this.globalOptions.virtualPositions[e.positionId]),e.document,e.document&&!e.id&&!e.virtual)if(e.id="pixiMarker"+Math.round(1e16*Math.random()),e.element){var S=e.element.ownerDocument,I=S.createElement("div");I||o("markerDiv is not as real as expected: "+JSON.stringify(I)),I.id=e.id,this.isInHead(e.element)||!t.isInDOM(e.element)?(e.element.ownerDocument.body||e.element.ownerDocument.write("<body>"),e.element.ownerDocument.body.appendChild(I)):e.element.parentNode.insertBefore(I,e.element)}else e.document.write('<div style="display:none" id="'+e.id+'"></div>');var P,E=e.positionId;if(e.implicit||(t.explicitlyRegisteredPositionIds[E]=!0),this.positions.hasOwnProperty(E))for(var C=2;;C++)if(!this.positions.hasOwnProperty(E+"."+C)){E=E+"."+C,P=C;break}switch((e.virtual||{}).type){case"immediate":if(!e.implicit&&t.master)return n("Virtual position cannot be explicit: "+E),t.loadEvent("PANIC",void 0,void 0,{detail:E,fail_reason:"virtual_immediate_cannot_be_explicit"}),void setTimeout(function(){t.registerVirtualPositions()},0);break;case"override":if(P)return n("Virtual override cannot be multiple: "+E),void t.loadEvent("PANIC",void 0,void 0,{detail:E,fail_reason:"virtual_override_cannot_be_multiple"})}i("Registering position "+E+" on "+(this.master?"master pam":"hosted pam"));var T=new Date;this.firstPositionRegisteredAt||(this.firstPositionRegisteredAt=T);var _=this.positions[E]=new k(this,{positionId:E,registeredAt:T,active:!0,id:e.id,clickUrl:t.globalOptions.disablePublisherCC?"":e.clickUrl||this.clickUrl||"",advertiserClickUrl:e.advertiserClickUrl,document:e.document,window:e.window,implicit:e.implicit,virtual:e.virtual,injectionIndex:e.injectionIndex,pageContainerWidth:e.pageContainerWidth,decoratedAt:e.decoratedAt?new Date(e.decoratedAt):void 0,allAdvertiserClickUrls:e.allAdvertiserClickUrls,allClickUrls:e.allClickUrls,alwaysHosted:e.alwaysHosted,inlineScript:e.inlineScript,passbackSrc:e.passbackSrc,dynamicArgs:e.dynamicArgs});if(e.alwaysHosted&&(this.somePositionsAreAlwaysHosted=!0),g.forObject(_),e.window&&!e.window.piximedia&&(e.window.piximedia=A.piximedia),void 0!==e.implicit&&(_.implicit=e.implicit),"footer"!==E&&this.globalOptions.enableFooter&&this.positions.footer&&!this.positions.footer.clickUrl&&e.clickUrl&&!t.globalOptions.disablePublisherCC&&(this.positions.footer.clickUrl=e.clickUrl),e.ajax||(this.positionCurrentlyInline=E),e.last&&this.stopWaitingForOtherPositions(),_.implicit||t.registerVirtualPositions(),this.emitLocal("pre-hello",_),e.activateAds!==!1){var O,N=!1,F={};F[E]=_;for(var M=0;M<this.availableAds.length;M++){var L=this.availableAds[M];if(L.active){if(L.require&&L.require.positions&&this.queryPositions(L.require.positions,{positions:F,notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length){N=!0,O=L;break}if(L.use&&L.use.positions&&this.queryPositions(L.use.positions,{conditionPositions:this.positions,positions:F,notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length){N=!0,O=L;break}}else if(L.require&&L.require.positions){if(this.queryPositions(L.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length){if(this.queryPositions(L.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,requireAll:!0}).length){N=!0,O=L;break}if(!this.performedRendezVous){N=!0,this.scheduleRendezVous();break}}else if(L.use&&L.use.positions&&this.queryPositions(L.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length&&!this.performedRendezVous){N=!0,this.scheduleRendezVous();break}}else if(L.use&&L.use.positions){var R=!!this.queryPositions(L.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0,onlyActive:!0}).length;if(R){N=!0,O=L;break}}}if(N&&O)if(O.passback||this.numberOfExplicitPositions||this.globalOptions.allowActiveAdsWithNoExplicitPositions)if(O.active&&!O.disabled){if(O.active){_.requested=!0,_.requestedBy=O;var j=O.emitLocal("hello",_);_.used=!0,_.justUsed&&_.justUsed(),_.decoratedBy=O,!_.implicit&&this.mode.match(/^alliance/)&&_.loadEvent("JS:POSITION_USED",{detail:E}),j||(n("Pushing position "+_.positionId),O.positions.push(_))}}else this.activateAd(O);else this.performedRendezVous||this.scheduleRendezVous();if(t.globalOptions.reportPositionWithNoAds&&!_.implicit){var B,V,W,q=t.availableAds.length,U="",H=0;for(var z in t.positions)if(t.positions.hasOwnProperty(z)){var J=t.positions[z];if(U+=z+(J.used?".USED,":".NOTUSED,"),++H>4)break}if(t.availableAds.length){var G=t.availableAds[0];B=((G.require||{}).positions||[])[0],V=((G.use||{}).positions||[])[0],W="active="+(G.active?1:0)+","}var X=setInterval(function(){(!t.scheduledRendezVous||t.performedRendezVous)&&(clearInterval(X),(!_.used||_.decoratedBy&&_.decoratedBy.passback)&&t.loadEvent("JS:NO_ADS",void 0,void 0,{detail:_.positionId,c1:q,c2:B,c3:V,c4:W,c5:U}))},500)}}return this.positionCurrentlyInline=void 0,this.decorativeAds.length&&_.id&&(i("schedule rendez-vous because of decorative ads"),this.scheduleRendezVous()),this.emitLocal("post-hello",_),this.master&&_.positionId.match(/^1x1\b/)&&this.globalOptions.enableImplicitTakeover&&!this.registeredImplicitTakeover&&(this.registeredImplicitTakeover=!0,setTimeout(function(){t.hello({implicit:!0,ajax:!0,positionId:"takeover",advertiserClickUrl:_.advertiserClickUrl,clickUrl:_.clickUrl})},0)),this.master&&setTimeout(function(){_.used||_.sentBlank||_.implicit||(_.sentBlank=!0,t.loadEvent("JS:BLANK",void 0,void 0,{detail:_.positionId}),t.globalOptions.reportPositionWithNoAds&&t.loadEvent("JS:BLANK:UNEXPECTED",void 0,void 0,{detail:_.positionId}))},1e4),_},I.prototype.registerVirtualPositions=function(){var e=this;if(e.globalOptions.virtualPositions){var t,o=e.getTopmostDocument(),n=e.getTopmostWindow(),a=!1;for(var r in e.positions)if(e.positions.hasOwnProperty(r)){var s=e.positions[r];if(!s.implicit&&s.clickUrl){t=s.clickUrl;break}}var l=[];for(var c in e.globalOptions.virtualPositions)if(e.globalOptions.virtualPositions.hasOwnProperty(c)){if(e.positions.hasOwnProperty(c))continue;var d=e.globalOptions.virtualPositions[c];if(d.prerequisite&&!(e.queryPositions(d.prerequisite)||[]).length)continue;"override"!==d.type&&(d.immediate||"immediate"===d.type||e.performedRendezVous||d.prerequisite?(i("Registering virtual position"),l.push({siteId:e.siteId,placementId:e.placementId,positionId:c,clickUrl:t,document:o,window:n,id:null,ajax:!0,implicit:!0,virtual:d,advertiserClickUrl:((d["tracking.position"]||{}).clickUrl||[])[0]})):a=!0)}if(1===l.length)e.hello(l[0]);else if(l.length>1){for(var p=0;p<l.length;p++){var u=l[p];u.activateAds=!1,e.hello(u)}e.tryAndActivateAds()}a&&(i("Scheduling rendez-vous for non-immediate virtual position"),e.scheduleRendezVous())}},I.prototype.tryAndActivateAds=function(e){i("try and activate ads");var t=this;e=e||{};for(var o=[],n=function(e){return function(){e.passback||t.numberOfExplicitPositions||t.globalOptions.allowActiveAdsWithNoExplicitPositions?t.activateAd(e):t.performedRendezVous||t.scheduleRendezVous()}},a=0;a<this.availableAds.length;a++){var r=this.availableAds[a];if(!r.active){var s=n(r);if(r.require&&r.require.positions){var l=!!this.queryPositions(r.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0}).length;if(l){var c=!!this.queryPositions(r.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,requireAll:!0}).length;c?s():this.performedRendezVous||(o.push(r),this.scheduleRendezVous())}}else if(r.use&&r.use.positions&&r.use.positions.length&&!e.onlyConsiderRequires){var d=this.queryPositions(r.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,spaceIsOr:!0,onlyActive:!0});if(d.length){var p=!1;e:for(var u=0;u<o.length;u++){var m=o[u],h=!1,f=!1;if(m.require&&m.require.positions&&(h=!!this.queryPositions(m.require.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,seekOverlapWith:d}).length),m.use&&m.use.positions&&(f=!!this.queryPositions(m.use.positions,{notRequestedByActiveAd:!0,activeAndNotUsed:!0,seekOverlapWith:d}).length),h||f){p=!0;break e}}p||s()}}}}if(!this.scheduledRendezVous||this.performedRendezVous){var v=function(e){setTimeout(function(){e.used||e.sentBlank||e.implicit||(e.sentBlank=!0,t.loadEvent("JS:BLANK",void 0,void 0,{detail:e.positionId}),t.globalOptions.reportPositionWithNoAds&&t.loadEvent("JS:BLANK:UNEXPECTED",void 0,void 0,{detail:e.positionId}))},1e4)};for(var g in this.positions)this.positions.hasOwnProperty(g)&&v(this.positions[g])}},I.prototype.scheduleRendezVous=function(){var e=this;this.scheduledRendezVous||(i("Schedule rendez-vous"),this.scheduledRendezVous=!0,this.globalOptions.rendezvous_fast_duration&&(this.timeoutRendezVousFast=setTimeout(function(){i("Rendez-vous fast!"),e.tryAndActivateAds(),e.on("post-hello",function(){e.performedRendezVous||setTimeout(function(){e.tryAndActivateAds()},0)})},this.globalOptions.rendezvous_fast_duration)),this.timeoutRendezVous=setTimeout(function(){e.timeoutRendezVous=void 0,this.timeoutRendezVousFast&&(clearTimeout(this.timeoutRendezVousFast),this.timeoutRendezVousFast=void 0),i("Rendez-vous!"),e.performedRendezVous=!0,e.registerVirtualPositions(),e.tryAndActivateAds(),setTimeout(function(){e.sendStatistics()},2e3)},this.globalOptions.rendezvous_duration||N))},I.prototype.sendStatistics=function(){if(!this.sentStatistics&&(this.sentStatistics=!0,this.mode.match(/^alliance/)&&this.master&&!A.piximedia.preview)){for(var e=(this.globalOptions.context||{}).alliance_rtapos?",had_rta_pos":",no_rta_pos",t=h(this.explicitlyRegisteredPositionIds).length,i=h(this.explicitlyRegisteredPositionIds).sort().slice(0,10),o=h(this.positions).sort().slice(0,10),n=[],a=[],r=0;r<i.length;r++){var s=i[r].replace(/\.[0-9]+/,"");-1===l(n,s)&&n.push(s)}n=n.join(",");for(var c=0;c<o.length;c++){var d=o[c].replace(/\.[0-9]+/,"");-1===l(a,d)&&a.push(d)}a=this.numberOfExplicitPositions||this.globalOptions.allowActiveAdsWithNoExplicitPositions?a.join(","):"";var p=this.numberOfActiveAds||0;p>=3&&(p="3MORE");var u=this.realAds.length;if(u>=10?u="10MORE":u>=5?u="5-10":u>0&&(u="1-4"),this.loadEvent("JS:STATS",void 0,void 0,{c1:p||0,c2:u,c3:e,c4:n,c5:a,duration:t}),!this.numberOfActiveAds)for(var m=0;m<this.allAvailableAds.length;m++){var f=this.allAvailableAds[m];if(!f.passback&&f.args&&f.args.not_enough_pos_pixel){this.loadPixel(f.args.not_enough_pos_pixel);break}}}},I.prototype.stopWaitingForOtherPositions=function(){i("We no longer expect other positions"),this.timeoutRendezVousFast&&(clearTimeout(this.timeoutRendezVousFast),this.timeoutRendezVousFast=void 0),this.timeoutRendezVous&&(clearTimeout(this.timeoutRendezVous),this.timeoutRendezVous=void 0),this.scheduledRendezVous=!0,this.performedRendezVous=!0},I.prototype.queryPositions=function(e,t){"string"==typeof e&&(e=[e]),t=t||{};for(var i=[],o=0;o<e.length;o++){var n=this.queryPosition(e[o],t);if(t.requireAll&&!n.length)return[];if(t.seekOverlapWith)for(var a=0;a<n.length;a++)-1===l(i,n[a])&&-1!==l(t.seekOverlapWith,n[a])&&i.push(n[a]);else for(var r=0;r<n.length;r++)-1===l(i,n[r])&&i.push(n[r])}if(t.onlyActive){for(var s=[],c=0;c<i.length;c++)i[c].active&&s.push(i[c]);i=s}return i},I.prototype.parseRequestedPositions=function(e){s(e)||(e=[e]);for(var t=[],i=0;i<e.length;i++)for(var o=e[i].split(","),n=0;n<o.length;n++)for(var a=o[n],r=a.split(" "),c=0;c<r.length;c++){var d=r[c];if(d){var p=d.split(":"),u=p[0];-1===l(t,u)&&t.push(u)}}return t},I.prototype.queryPosition=function(e,t){if("string"!=typeof e)return this.queryPositions(e);var i,o=e.split(/ *=> */);if(o&&o.length>=2){for(var n=0;n<o.length-1;n++){var a=o[n];if(!t.ignoreConditions&&!this.queryPosition(a,{positions:t.conditionPositions||t.positions||this.positions}).length)return[]}i=o[o.length-1]}else i=e.replace(/, +/g,",");t=t||{};var r=t.positions||this.positions,s=i.split(" "),c=[];e:for(var d=0;d<s.length;d++){var p=s[d];if(p){for(var u=p.split(","),m=[],h=0;h<u.length;h++){var f=u[h];if(f)for(var v=E(f,t,r,this.globalOptions.isRedirect),g=0;g<v.length;g++)m.push(v[g])}if(!m.length&&!t.seekOverlapWith&&!t.spaceIsOr){c=[];break e}for(var y=0;y<m.length;y++)c.push(m[y])}}var b=[];if(t.seekOverlapWith)for(var w=0;w<c.length;w++)-1===l(b,c[w])&&-1!==l(t.seekOverlapWith,c[w])&&b.push(c[w]);else for(var x=0;x<c.length;x++)-1===l(b,c[x])&&b.push(c[x]);return b},I.prototype.addEvent=function(e,t,i){if(e)if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else if(e["on"+t]){if("function"==typeof e["on"+t]){var o=e["on"+t];e["on"+t]=function(){i.apply(e,arguments),o.apply(e,arguments)}}}else e["on"+t]=i},I.prototype.removeEvent=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]===i&&(e["on"+t]=null)},I.prototype.waitTopDomLoaded=function(e){if(!this.master){var t="waitTopDomLoadedCallback"+this.rand();return this.emit("wait-top-dom-loaded",{callbackId:t})}var i=this.getTopmostWindow(),o=i.document,n=this,a=!1,r=function(){return a?void 0:(a=!0,"function"==typeof e?void e.apply(n):"string"==typeof e?void window[e].apply(n):!1)},s=function(){"complete"===o.readyState&&(o.detachEvent("onreadystatechange",s),r())};if("interactive"===o.readyState||"complete"===o.readyState)return void r();if(o.addEventListener?o.addEventListener("DOMContentLoaded",function(){r()},!1):o.all&&!A.opera&&o.attachEvent&&o.attachEvent("onreadystatechange",s),/Safari/i.test(navigator.userAgent))var l=i.setInterval(function(){/loaded|complete/.test(o.readyState)&&(r(),i.clearInterval(l))},50);this.addEvent(i,"load",r,!1)},I.prototype.waitDomLoaded=function H(e){var t=this,i=!1,o=function(){return i?void 0:(H.once=!0,i=!0,"function"==typeof e?void e.apply(t):"string"==typeof e?void window[e].apply(t):!1)},n=function(){"complete"===C.readyState&&(C.detachEvent("onreadystatechange",n),o())};if(H.once||"interactive"===C.readyState||"complete"===C.readyState)return void o();if(C.addEventListener?C.addEventListener("DOMContentLoaded",function(){o()},!1):C.all&&!A.opera&&C.attachEvent&&C.attachEvent("onreadystatechange",n),/Safari/i.test(navigator.userAgent))var a=t.getTopmostWindow(),r=a.setInterval(function(){/loaded|complete/.test(C.readyState)&&(o(),a.clearInterval(r))},50);this.addEvent(A,"load",o,!1)},I.prototype.waitDomMutable=function(e){var t=this;this.waitDomLoaded(function(){if(t.msie&&t.msie<=8&&-1===navigator.userAgent.search("Trident/"))var i=t.getTopmostDocument(),o=t.getTopmostWindow(),n=o.setInterval(function(){"complete"===i.readyState&&(o.clearInterval(n),e.apply(t))},50);else e.apply(t)})},I.prototype.getMarkerForPosition=function(e){var t;return this.loadMarkerForPosition(e,function(e){t=e}),t},I.prototype.loadMarkerForPosition=function(e,t){var i=this;if("function"!=typeof t&&o("cb should be a function"),"string"==typeof e){var n=this.queryPosition(e);if(1!==n.length)return t();e=n[0]}if(e.virtualMarker)return this.isInDOM(e.virtualMarker)?t(e.virtualMarker,e.virtualMarker2||e.virtualMarker):t(e.virtualMarker=e.virtualMarker.ownerDocument.getElementById(e.virtualMarker.id));var a,r,s=function(){var t,o=i.getTopmostWindow(),n=o.document;if(e.virtual.javascript)if(i.master){var r;try{r=o.localStorage.getItem("pixi_test_virtual_js_"+e.positionId)}catch(s){}r||(r=e.virtual.javascript);try{t=new Function("return function(document, window) {\n"+r+"\n}")()(n,o)}catch(s){}}else t=document.body;else e.virtual.getContainer&&(t=e.virtual.getContainer());if(t){var l=t.ownerDocument.createElement("div");e.id=l.id="pixiMarkerVirtual"+Math.round(1e16*Math.random()),t.appendChild(l),e.marker=e.virtualMarker=l,a=e.marker}};if(e.virtual&&"override"===e.virtual.type)s();else if(e.id&&e.document){var l=e.document.getElementById(e.id);if(l&&(a=l),e.window||(a=void 0),!a)try{a=e.window.parent.document.getElementById(e.id)}catch(c){a=void 0}if(a){var d=i.getTopmostFiFForElement(a);if(d){d.style.height=0,d.style.display="block",d.style.width=0,(d.id||"").match(/^sas_/)&&(d.className+=" pmIframeContainer",this.loadLibrary("sweetlib.js",function(){var e=A.piximedia.SweetLib;e.createCSS(".pmIframeContainer","height: 0 !important; width: 0 !important",d.ownerDocument)})),r=e.virtualMarker2=a;var p=d.ownerDocument.createElement("div");p.id="pixiMarkerTopmostIframe"+Math.round(1e16*Math.random()),v(p),d.parentNode.insertBefore(p,d),a=p}e.virtualMarker=a}}else a=e.marker?e.marker:void 0;if(!a&&e.virtual&&s(),!e.decoratedBy||!e.decoratedBy.shouldBeBeforePageContainer(e)){if(e.decoratedBy&&e.decoratedBy.shouldBeBeforeBody(e)){r=a,e.virtualMarker2=r;var u=i.getTopmostDocument(),m=u.getElementsByTagName("body")[0],h=u.createElement("div");v(h),h.className="pmTakeoverFiller";var f=u.createElement("div"),g=u.createElement("div");return f.appendChild(g),f.className="pmBodyPosition pmCentered",g.id="pixiMarkerBody"+Math.round(1e16*Math.random()),m.insertBefore(f,m.firstChild),m.insertBefore(h,f),e.virtualMarker=g,t(g,r)}return t(a)}r=a,e.virtualMarker2=r,this.loadLibrary("sweetlib.js",function(){var o=A.piximedia.SweetLib,n=i.getTopmostDocument();o.loadPageContainer({document:n,hints:i.globalOptions.pagecontainerHints},function(n,a){var s=n.ownerDocument,l=s.createElement("div"),c=s.createElement("div");c.className="pmMarkerContainer",c.id="pixiMarkerPCContainer"+Math.round(1e16*Math.random()),c.appendChild(l),v(c),c.style.position="absolute",c.style.overflow="hidden";var d=o.getScrollbarWidth();i.cssCalc?(c.style.width="calc(100vw - "+d+"px)",c.style.left="50%",c.style.marginLeft="calc(-50vw + "+d/2+"px)"):(c.style.left="50%",setInterval(function(){var e=o.getViewportSize()[0]-d;parseFloat(c.style.minWidth,10)!==e&&(c.style.minWidth=e+"px",c.style.marginLeft=-(e/2)+"px")},50)),l.id="pixiMarkerPC"+Math.round(1e16*Math.random());var p;for(p=n;p&&"pmFiller"!==p.id;p=p.previousSibling);n.parentNode.insertBefore(c,p||n),e.virtualMarker=l,e.pageContainerWidth=a.width;var u=o.getPropertyValue(n,"clear");if("left"===u||"right"===u||"both"===u){var m=c.ownerDocument.createElement("div");v(m),m.style.clear=u,c.parentElement.insertBefore(m,c)}return t(l,r)})})},I.prototype.loadMarkersForPositions=function(e,t){var i=[],o=this,n=0,a=function(){if(n===e.length)return t(i);var r=e[n];o.loadMarkerForPosition(r,function(e){i.push(e),n++,a()})};a()},I.prototype.rand=function(){return Math.round(1e16*Math.random())},I.prototype.htmlentities=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},I.prototype.injectFriendlyContent=function(e,t,o){A.piximedia.callbacks=A.piximedia.callbacks||{};var s,l,c,d=this,p=e.document,u="pmFif"+Math.round(1e16*Math.random()),m=0,h=0,f="callbackWrite"+u,g="callbackOnLoad"+u,y="";i("Injecting friendly contents");var b=t.htmlComments||null;l=new x(this,e,t.iframeOptions||{}),!o||o.iframe||e.hosted||(o.iframe=l),A.piximedia.callbacks[g]=function(e,t){var i=t.name||"untitled";n("["+i+"] Iframe loaded, checking surface ***",s);var o,a=function(){var r,s,c,f,v=e.body;d.globalOptions.ignoreSiteResizes&&(l.iframe&&parseFloat(l.iframe.width,10)&&parseFloat(l.iframe.width,10)>1&&(r=l.iframe.width,l.iframe.width=""),l.iframe&&parseFloat(l.iframe.height,10)&&parseFloat(l.iframe.height,10)>1&&(s=l.iframe.height,l.iframe.height=""),l.iframe&&l.iframe.style&&parseFloat(l.iframe.style.width,10)&&parseFloat(l.iframe.style.width,10)>1&&(c=l.iframe.style.width,l.iframe.style.width=""),l.iframe&&l.iframe.style&&parseFloat(l.iframe.style.height,10)&&parseFloat(l.iframe.style.height,10)>1&&(f=l.iframe.style.height,l.iframe.style.height=""));var g=v.scrollWidth,y=v.scrollHeight;if(d.globalOptions.ignoreSiteResizes&&(void 0!==r&&(l.iframe.width=r),void 0!==s&&(l.iframe.height=s),void 0!==c&&(l.iframe.style.width=c),void 0!==f&&(l.iframe.style.height=f)),g&&y&&g!==m&&y!==h){n("["+i+"] Found surface: "+g+"x"+y),o&&t.clearInterval(o);var b=(p||C).getElementById(u);n("["+i+"] Found iframe: ",b),l.options.doNotResize?n("["+i+"] (not resizing)"):(n("["+i+"] (resizing)"),l.emit("resize",{width:g,height:y,onlyIfNoSurface:!0}))}else o||(o=t.setInterval(a,10))};a()};var w,k="",S="",I="";if(A.piximedia._.iframes=A.piximedia._.iframes||{},A.piximedia._.iframes[u]=l,b&&(S+="<!-- Pixi Begin Javascript: "+b.label+"-->\n"),k+="window.inFIF=true; window.inDapIF=true;\n",k+="window.name="+this.stringify(t.name||"untitled")+";\n",k+="window.pmFIFID="+this.stringify(u)+";\n",k+="window.piximedia = parent.piximedia;\n",k+="window.framedPam = parent.piximedia._.pams["+this.stringify(this.uniqKey)+"];\n",k+="window.framedIframe = parent.piximedia._.iframes["+this.stringify(u)+"];\n",k+="window.pmContext = window.framedPam.globalOptions.context || {};\n",o&&o.injectedOnce&&(k+="window.pmBypassImpression = 1;\n"),o){var P="ad"+this.rand();A.piximedia._.ads=A.piximedia._.ads||{},A.piximedia._.ads[P]=o,k+="window.framedAd = parent.piximedia._.ads["+this.stringify(P)+"];\n",k+="window.framedAd.framedDocument=document;window.framedAd.framedWindow=window;\n"}var E="position"+this.rand();A.piximedia._.positions=A.piximedia._.positions||{},A.piximedia._.positions[E]=e,k+="window.framedPosition = parent.piximedia._.positions["+this.stringify(E)+"];\n",k+="try{for(var pmk in window.piximedia){if(window.piximedia.hasOwnProperty(pmk)){var s=pmk.toString();if(s.match(/^pmData/)){window[s]=window.piximedia[s];}}}}catch(e){}\n";for(var T in A)if(T.toString().match(/^pmData/)){var _=this.stringify(T);k+="window["+_+"] = parent["+_+"];\n"}return t.javascript?(t.javascript=t.javascript.replace(/MACRO_PUBLISHER_CLICK_COMMAND/g,e.clickUrl),w=this.msie?"<script>"+t.javascript+"</script><script>\nfunction pmCloseDocument() { setTimeout(function() { document.close(); }, 200); }\nfunction pmWaitAllScripts(secondTry) { document.pmWaiting = (document.pmWaiting || 0) + 1; var scripts = document.getElementsByTagName('script'), allComplete = true; for(var i = scripts.length - 1; i >= 0; i--) { if(scripts[i].readyState !== 'complete') { allComplete = false; break; } } if(allComplete) { setTimeout(function() { secondTry? pmCloseDocument(): pmWaitAllScripts(true); }, 1000); } else { setTimeout(pmWaitAllScripts, 1000); } }\nsetTimeout(pmWaitAllScripts, 1000);\n</script>":"<script>"+t.javascript+"</script><script>setTimeout(function() { document.close(); }, 200)</script>\n"):t.src&&(t.src=t.src.replace(/MACRO_PUBLISHER_CLICK_COMMAND/g,e.clickUrl),y+=this.msie?a("<script>\nfunction pmWaitAllScripts(secondTry) { var scripts = document.getElementsByTagName('script'), allComplete = true; for(var i = scripts.length - 1; i >= 0; i--) { if(scripts[i].readyState !== 'complete') { allComplete = false; break; } } if(allComplete) { setTimeout(function() { secondTry? document.close(): pmWaitAllScripts(true); }, 1000); } else { setTimeout(pmWaitAllScripts, 1000); } }\n</script><script src=\""+t.src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+'" onreadystatechange="pmWaitAllScripts()"></script>\n'):r('<script src="'+t.src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+'"></script>\n<script>setTimeout(function() { document.close(); }, 200); </script>\n')),
b&&(I+="\n<!-- Pixi End Javascript: "+b.label+"-->"),w?d.msie&&d.msie>6?(A.piximedia.callbacks[f+"_w"]=a("<head></head><body onload='if(parent.piximedia&&parent.piximedia.callbacks){return parent.piximedia.callbacks."+g+"(document,window)}'>\n"+S+"<script>"+k+"</script>\n"+w+I),A.piximedia.callbacks[f]=a("<script>setTimeout(function() { if(parent.piximedia&&parent.piximedia.callbacks)window.location.replace('javascript:new Function(parent.piximedia.callbacks."+f+"_w)()'); }, 0)\n</script>\n")):A.piximedia.callbacks[f]=a("<head></head><body onload='parent.piximedia.callbacks."+g+"(document,window)'>\n"+S+"<script>"+k+"</script>\n"+w+I):A.piximedia.callbacks[f]=r("<head></head>\n<body onload='parent.piximedia.callbacks."+g+"(document,window)'>\n"+S+"<script>"+k+"</script>\n")+y+r(I+"</body>\n"),this.msie&&(m=1,h=1),function(o){return e.positionId===d.positionCurrentlyInline&&e.document&&!d.globalOptions.ajax&&!t.container&&(i("Injecting inline position"),e.document.write('<div style="'+B+'"><iframe allowfullscreen name="'+t.name+'" src="javascript:false" class="pmFiF" id="'+u+'" style="display: block; background: white; height: '+h+"px; width: "+m+'px" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="'+m+'" height="'+h+'"></iframe></div>'),s=e.document.getElementById(u))?o(s):void(s||d.waitDomMutable(function(){!function(i){return t.container?i(t.container):void d.loadMarkerForPosition(e,i)}(function(e,n){if(!e){var a=d.getTopmostDocument();e=a.createElement("div");var r="pixiMarkerAuto"+Math.round(1e16*Math.random());e.id=r,a.body.appendChild(e)}var p=e.ownerDocument;if(s=p.createElement("iframe"),s.name=t.name,s.id=u,s.className="pmFiF",s.style.display="block",s.style.background="white",s.style.height=h+"px",s.style.width=m+"px",s.marginWidth=0,s.marginHeight=0,s.frameBorder=0,s.scrolling="no",s.allowFullscreen=!0,s.width=m,s.height=h,"HEAD"===e.nodeName)e.appendChild(s);else{var f=p.createElement("div");if(f.className="pmFiFContainer pmContainer "+d.containerClassName,v(f),t.container?e.appendChild(f):e.parentNode.insertBefore(f,e),b&&(c=f.ownerDocument.createComment("Pixi Iframe Container: "+b.label),f.parentNode.insertBefore(c,f),c=f.ownerDocument.createComment("Pixi Iframe: "+b.label),f.appendChild(c)),f.appendChild(s),(m||h)&&7!==d.msie){f.style.position="absolute",f.className+=" pmZeroSurface";var g=p.defaultView||p.parentWindow,y=0,w=g.setInterval(function(){var e;try{e=f.getBoundingClientRect()}catch(t){return i("couldn't fetch getBoundingClientRect()"),void(y++>10&&clearInterval(w))}var o=e.right-e.left,n=e.bottom-e.top;o>1&&n>1&&(f.className.match(/pmZeroSurface/)&&(f.className=f.className.replace(/pmZeroSurface/,""),f.style.position="relative"),g.clearInterval(w))},50)}}return n&&d.watchForRemoval(n,function(){l.emit("remove")}),o(s)})}))}(function(e){e.onerror=function(){l.emit("error",arguments)};var t,i=d.getTopmostDocument();try{t=e.contentWindow.document}catch(o){d.log("Couldn't acess content document, probably because of mismatching document.domain");try{e.src="javascript:document.write('<head><script>document.domain=\""+i.domain+"\";</script></head><body></body>')",t=e.contentDocument||e.contentWindow.document}catch(o){try{d.log("Couldn't still access document, probably because of still mismatching document.domain"),e.src="javascript:document.write('<head><script>document.domain=\""+e.ownerDocument.domain+"\";</script></head><body></body>')",t=e.contentDocument||e.contentWindow.document}catch(o){d.log("Couldn't REALLY access document :-(")}}t=e.contentDocument||e.contentWindow.document}d.msie?t.open().write("<script>window.location.replace(\"javascript:var x;try{x=parent.piximedia.callbacks;}catch(e){document.domain='"+i.domain+"';}new Function(parent.piximedia.callbacks."+f+')()")</script>'):t.open().write("<script>new Function(parent.piximedia.callbacks."+f+")()</script>"),l.setIframe(e)}),o&&!o.passback&&(l.on("remove",function(){if(!l.doNotSendPixels){if(!l.sentRemoved){l.sentRemoved=!0;var t=e.registeredAt?(new Date-e.registeredAt)/1e3:void 0;e.loadEvent("JS:REMOVED",{detail:e.positionId,duration:t})}o.shouldBeBeforePageContainer(e)&&this.pam.loadLibrary("sweetlib.js",function(){var e=A.piximedia.SweetLib;e.setBodyBackgroundColor({color:null}),e.moveTopOfPageContainer(e.getPageContainer(),0)})}}),l.on("winlose",function O(){O.ids=O.ids||{},l.doNotSendPixels||O.ids[e.positionId]||(O.ids[e.positionId]=!0,e.loadEvent("JS:WINLOSE",{detail:e.positionId}),setTimeout(function(){O.ids[e.positionId]=!1},1e4))})),l},y.prototype.getAllVisibilityForPixiPositionId=function(e){if(!this.visibility)return[];var t={};t[e]={positionId:{}};for(var i in this.visibility)if(this.visibility.hasOwnProperty(i)&&this.pam.queryPositions(i,t).length)return this.visibility[i];return[]},y.prototype.loadLibrary=function(e,t){return s(e)?this.loadLibraries(e,t):void this.pam.loadLibrary(this.args[e]||e,t)},y.prototype.loadLibraries=function(e,t){var i=this,o=function(){try{return t.call(i)}catch(e){return void n("Caught exception when calling loadLibraries() callback: "+e)}},a=e.length;if(!a)return o();for(var r=function(){return--a?void 0:o()},s=0;s<e.length;s++)this.loadLibrary(e[s],r)},y.prototype.shouldHostPosition=function(e){var t=this.remapPositions||{};if(!this.pam.master)return!1;if(this.pam.msie&&this.pam.msie<8)return!1;if(this.pam.safari&&this.pam.safari<7)return!1;if("object"==typeof e&&e.alwaysHosted)return!0;if("string"==typeof e&&(this.pam.positions[e]||{}).alwaysHosted)return!0;var i=this.pam.getTopmostWindow();if("never-host"===i.name)return!1;if(!this.hosted_positions)return!1;var o=this.hosted_positions;"string"==typeof o&&(o=o.split(/ +/));for(var n=0;n<o.length;n++){var a=o[n];for(var r in t)if(t.hasOwnProperty(r)){var s=new RegExp("\\b"+r+"\\b","g");a=a.replace(s,t[r])}var l={};l[e.positionId]=e;var c=!1;if(this.require&&this.require.positions&&this.pam.queryPositions(this.require.positions,{positions:l,seekOverlapWith:[e]}).length&&(c=!0),this.use&&this.use.positions&&this.pam.queryPositions(this.use.positions,{positions:l,seekOverlapWith:[e]}).length&&(c=!0),c&&this.pam.queryPositions(a,{positions:l}).length)return!0}return!1},y.prototype.shouldBeBeforeBody=function(e){if(!this.pam.master)return!1;var t=this.remapPositions||{};if(!this.positions_before_body)return!1;var i=this.positions_before_body;"string"==typeof i&&(i=i.split(/ +/));for(var o=0;o<i.length;o++){var n=i[o];for(var a in t)if(t.hasOwnProperty(a)){var r=new RegExp("\\b"+a+"\\b","g");n=n.replace(r,t[a])}var s={};if(s[e.positionId]=e,this.pam.queryPositions(n,{positions:s}).length)return!0}return!1},y.prototype.shouldBeBeforePageContainer=function(e){if(!this.pam.master)return!1;var t=this.remapPositions||{};if(!this.positions_before_page_container)return!1;var i=this.positions_before_page_container;"string"==typeof i&&(i=i.split(/ +/));for(var o=0;o<i.length;o++){var n=i[o];for(var a in t)if(t.hasOwnProperty(a)){var r=new RegExp("\\b"+a+"\\b","g");n=n.replace(r,t[a])}var s={};if(s[e.positionId]=e,this.pam.queryPositions(n,{positions:s}).length)return!0}return!1},I.prototype.activateAd=function(e,t){var a=this;t=t||{},i("Activating ad: ",e);var r=new Date;if(e.active&&n("Ad was already active"),e.active=!e.alwaysAvailable,!e.passback){if(a.numberOfActiveAds=a.numberOfActiveAds||0,a.numberOfActiveAds++,a.globalOptions.enableActiveAdsCapping&&void 0!==a.globalOptions.numberOfActiveAdsCapping&&a.globalOptions.numberOfActiveAdsCapping>=a.numberOfActiveAds){n("Deactivating other ads because capping was met");for(var l=0;l<a.availableAds.length;l++){var c=a.availableAds[l];c===e||c.passback||c.active||(c.require={positions:["disabled-ad-capping"]},c.disabledBecauseAdCapping=!0,c.disabledBecauseAdCappingLog="active-ads-capping")}}if(a.globalOptions.enableTvCodeProtection&&e.tv_code){n("Deactivating other ads with code "+e.tv_code);for(var d=0;d<a.availableAds.length;d++){var p=a.availableAds[d];p===e||p.passback||p.active||p.tv_code!==e.tv_code||p.campaignId===e.campaignId||(p.require={positions:["disabled-tv-code"]},p.disabledBecauseAdCapping=!0,p.disabledBecauseAdCappingLog="tv-code")}}a.globalOptions.keepAdringForRTA||(C.cookie="pixi_rta_pos=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",C.cookie="pixi_rta_pos=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),C.cookie="pixi_adr=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",C.cookie="pixi_adr=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",this.globalOptions.pixiAdrName&&(a.globalOptions.keepAdringForRTA||(C.cookie=this.globalOptions.pixiAdrName+"=; path=/; "+this.getDomainPartForCookies()+"expires=Thu, 01 Jan 1970 00:00:00 GMT",C.cookie=this.globalOptions.pixiAdrName+"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"))}if(e.active&&e.use&&e.use.positions&&a.on("hello",function(t){var i={};i[t.positionId]=t,a.queryPositions(e.use.positions,{spaceIsOr:!0,positions:i}).length&&(t.requested=!0,t.requestedBy=e)}),t.positions){e.positions=t.positions;for(var u=0;u<e.positions.length;u++){var m=e.positions[u];this.positions.hasOwnProperty(m.positionId)||(this.positions[m.positionId]=m)}}else{if(e.positions=[],e.require&&e.require.positions)for(var h=this.queryPositions(e.require.positions,{activeAndNotUsed:!0,requireAll:!0}),v=0;v<h.length&&!e.disabled;v++){var g=h[v];g.active&&(n("Associating required position "+g.positionId),g.used=!0,g.decoratedBy=e,g.decoratedAt=r,g.justUsed&&g.justUsed(),e.positions.push(g))}if(e.use&&e.use.positions)for(var y=this.queryPositions(e.use.positions,{activeAndNotUsed:!0,spaceIsOr:!0}),b=0;b<y.length&&!e.disabled;b++){var w=y[b];w.active&&(n("Associating used position "+y[b]),e.positions.push(w))}}for(var x=0;x<e.positions.length;x++)if(e.positions[x].used=!0,e.positions[x].decoratedBy=e,e.positions[x].decoratedAt=r,e.positions[x].justUsed&&e.positions[x].justUsed(),!e.positions[x].implicit&&!e.passback&&this.mode.match(/^alliance/)){var k=e.positions[x];this.master?void 0===k.injectionIndex&&k.loadEvent("JS:POSITION_USED",{detail:k.positionId}):k.loadEvent("JS:POSITION_USED:HOSTED",{detail:k.positionId})}if(this.master){var S=function(e){if(e){"string"==typeof e&&a.loadPixel(e);for(var t=0;t<e.length;t++)a.loadPixel(e[t])}};this.trackingAdPixelsCalled[e.adId]||(this.trackingAdPixelsCalled[e.adId]=!0,e.loadEvent("JS:ACTIVATE:AD",{}),e.args&&e.args["tracking.ad"]&&e.args["tracking.ad"].pixelUrl&&S(e.args["tracking.ad"].pixelUrl)),this.trackingAdCreativePixelsCalled[e.adId+"|"+e.creativeId]||(this.trackingAdCreativePixelsCalled[e.adId+"|"+e.creativeId]=!0,e.loadEvent("JS:ACTIVATE:CREATIVE",{}),e.args&&e.args["tracking.creative"]&&e.args["tracking.creative"].pixelUrl&&S(e.args["tracking.creative"].pixelUrl))}!function(t){if(!a.master)return t();for(var i=e.args&&e.args.assets&&e.args.assets.pool?e.args.assets.pool:[],o=0,n=function(){return o--,o?void 0:t()},r=function(t){var i=!1,r=!1,s=function(){return i=!0,n()};t.name.match(/^vast/)&&(r=!0,setTimeout(function(){var i=t.uri,o=new window.XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){"object"!=typeof t.metadata&&(t.metadata={}),t.metadata.vast=f(o.responseXML);try{var i=t.metadata.vast.Ad_value.InLine_value.Impression;e.loadEvent("JS:IMPRESSION:VAST_LOADED",{c3:"asset:"+t.id});for(var n=0;n<i.length;n++){var r=i[n].value;a.loadPixel(r)}}catch(l){}return s()}},o.open("GET",i,!0),o.send()},0)),r&&(setTimeout(function(){i||e.loadEvent("COULD_NOT_LOAD_ASSET",{c1:t.id})},1e4),o++)},s=0;s<i.length;s++)r(i[s]);return o?void 0:t()}(function(){a.loadMarkersForPositions(e.positions,function(t){try{if(e.tag)e.tag.apply(a,t);else if(e.fif){var l=e.positions[0];if(a.master){var c=[],d=null,p=!!e.main_js_in_head,u=!!e.main_js_always_in_head;if(a.somePositionsAreAlwaysHosted||e.hosted_positions&&e.hosted_positions.length){e.shouldHostPosition(l)?c.push(l):d=l,e.on("hello",function(t){return e.shouldHostPosition(t)?(t.decoratedBy=e,t.decoratedAt=t.decoratedAt||new Date,a.hostPosition(e,t),!1):void 0});for(var m=1;m<e.positions.length;m++){var h=e.positions[m];e.shouldHostPosition(h)?c.push(h):d||(d=h)}}else d=l;for(var f=0;f<c.length;f++){var v=c[f];v.decoratedBy=e,v.decoratedAt=new Date,a.hostPosition(e,v)}if(d||u){if(p||u){var g=a.getTopmostDocument();a.injectFriendlyContent({positionId:"head",document:g,marker:g.head},e.fif,e)}else e.masterPosition=d||l,a.injectFriendlyContent(e.masterPosition,e.fif,e);e.iframe.on("remove",function(){n("Ad has been removed from DOM"),a.unloadAd(e)}).on("winlose",function(){n("Ad has been winlost");var t=e.positions;a.unloadAd(e,{hide:!0}),a.activateAd(e,{positions:t})}),e.injectedOnce=!0}}else a.injectFriendlyContent(l,e.fif,e)}else if(e.passback){e.active=!1;var y={htmlComments:{label:"Passback for "+(e.use||{}).positions}};switch(e.passback.type){case"javascript":case"inline":i("Activating JavaScript passback");var b;switch(e.passback.type){case"javascript":b=e.passback.contents;break;case"inline":b="if(window.framedPosition.passbackSrc){\n",b+="  var s = document.createElement('script'); s.src = window.framedPosition.passbackSrc; s.appendChild(document.createTextNode(window.framedPosition.inlineScript)); document.body.appendChild(s); \n",b+="} else {\n",b+="new Function(window.framedPosition.inlineScript)()",b+="}\n"}if(b){var w;w="for(var k in parent){ if((!parent.hasOwnProperty || parent.hasOwnProperty(k)) && k.match(/^(sas|Smart|weborama_url_backup)/) && !k.match(/^(sas_ajax)$/)){ window[k] = parent[k]; } }\n";try{"pmdebugpassback"===top.window.name&&(w+="debugger;\n")}catch(x){}y.javascript=w+b}else y=void 0;break;case"redirect":i("Activating redirect passback"),e.passback.contents?y.src=e.passback.contents:y=void 0;break;default:y=void 0}if(y)for(var k=function(e,t,i){var o=a.injectFriendlyContent(e,t,i);o.iframe&&o.iframe.style&&(o.iframe.style.marginLeft="auto",o.iframe.style.marginRight="auto"),o.on("winlose",function(){n("Passback has been winlost"),e.injectionIndex=(e.injectionIndex||0)+1,a.loadEvent("JS:PASSBACK_WINLOST",void 0,void 0,{detail:e.positionId});var r=o.iframe.ownerDocument.getElementById(o.iframe.id);r&&r.parentNode.removeChild(r),k(e,t,i)}),o.on("error",function(){n("Passback error",arguments),a.loadEvent("JS:PASSBACK_ERROR",void 0,void 0,{detail:e.positionId});try{var t=o.iframe.contentDocument.createComment("Passback Failed To Load (Error)");o.iframe.contentDocument.body.appendChild(t),t=o.iframe.ownerDocument.createComment("Pixi Iframe: Passback Failed To Load (Error)"),o.iframe.parentNode.insertBefore(t,o.iframe),t=o.iframe.ownerDocument.createComment("Pixi Iframe Container: Passback Failed To Load (Error)"),o.iframe.parentNode.parentNode.insertBefore(t,o.iframe.parentNode)}catch(i){}});var r=setTimeout(function(){n("Passback timeout"),i.emit("passback-timeout"),a.loadEvent("JS:PASSBACK_TIMEOUT",void 0,void 0,{detail:e.positionId});try{var t=o.iframe.contentDocument.createComment("Passback Failed To Load (Timeout)");o.iframe.contentDocument.body.appendChild(t),t=o.iframe.ownerDocument.createComment("Pixi Iframe: Passback Failed To Load (Timeout)"),o.iframe.parentNode.insertBefore(t,o.iframe),t=o.iframe.ownerDocument.createComment("Pixi Iframe Container: Passback Failed To Load (Timeout)"),o.iframe.parentNode.parentNode.insertBefore(t,o.iframe.parentNode)}catch(r){}},1e4);o.on("resize",function(t){t&&t.width>1&&t.height>1&&(a.loadEvent("JS:PASSBACK_OK",void 0,void 0,{detail:e.positionId}),clearTimeout(r))})},S=0;S<e.positions.length;S++){var I=e.positions[S],P=I.positionId;if(a.scheduledRendezVous){var E=r-a.firstPositionRegisteredAt,C=3*(a.globalOptions.rendezvous_duration||N),T=Math.round(10*E/C);P+=0>T?":0":T>10?":MORE":":"+T}var _=A.piximedia.request_pos_sp[a.siteId][a.placementId],O=[];for(var F in _)_.hasOwnProperty(F)&&O.push(F);I.implicit||(P+=":explicit"),P+=":pos="+O.join(","),a.scheduledRendezVous&&a.performedRendezVous&&(P+=":rv"),a.loadEvent("JS:PASSBACK",void 0,void 0,{detail:P}),k(I,y,e)}}}catch(x){o("Could not activate ad: "+x)}e.timetracker&&e.timetracker.global&&a.master&&a.loadLibrary("sweetlib.js",function(){e.timetrackerGlobal||(e.timetrackerGlobal=A.piximedia.SweetLib.setTimer("GLOBAL",function(t,i){e.loadEvent("TIMETRACKER::"+t,{duration:i})}),e.timetrackerGlobal.start())});var D;try{var M=A.localStorage?A.localStorage.getItem("pmCustomFieldsCSS"):"";if(M){var L=JSON.parse(M);L&&L.css&&(D=L.css)}}catch(x){}!D&&e&&e.args&&(D=e.args.css),D&&a.master&&a.loadLibrary("sweetlib.js",function(){var e=a.getTopmostDocument();if(s(D))for(var t=0;t<D.length;t++)A.piximedia.SweetLib.createCSSs(D[t],e);else A.piximedia.SweetLib.createCSSs(D,e)})})})},I.prototype.unloadPosition=function(e){n("Unloading position",e);for(var t=0;t<(e.iframes||[]).length;t++){var i=e.iframes[t];n("Unloading iframe"),i.unload()}var o=e.decoratedBy;o&&(o.positions=c(o.positions,"positionId",e.positionId)),delete this.positions[e.positionId]},I.prototype.unloadAd=function(e,t){if(n("Unloading ad",e),t=t||{},e.positions)for(var i=0;i<e.positions.length;i++){for(var o=e.positions[i],a=0;a<(o.iframes||[]).length;a++){var r=o.iframes[a];n("Unloading iframe"),r.unload({hide:t.hide})}o.iframes=[],o.decoratedAt=o.decoratedBy=void 0,o.used=!1,delete this.positions[o.positionId]}e.iframe&&(e.iframe.unload({hide:t.hide}),e.iframe=void 0),e.purgeEventEmitter(),e.active=!1},I.prototype.hostPosition=function(e,t){var a=this;t.hosted=!0,n("Prepare to host position",t),this.waitDomMutable(function(){i("DOM is mutable for hosted position",t);var r,s;s=function(e,t){var i=g.getID(e);if(i)try{r.fireEventToID(i,t,function(){},function(){})}catch(n){o("Caught exc, maybe destroyed rpc channel",n)}},a.globalEmitter.on("event",s),i("Injecting hosted position",t,e.positions),e.injectPosition(t,{iframeOptions:{doNotResize:!0}},function(o,l){i("Loading marker for hosted position",t),a.loadMarkerForPosition(t,function(o,c){if(!o){var d=a.getTopmostDocument();o=d.createElement("div");var p="pixiMarkerHosted"+Math.round(1e16*Math.random());o.id=p,d.body.appendChild(o)}if(i("Found marker for position "+t.positionId,o),r){i("Destroying dangling RPC channel");try{r.destroy()}catch(u){}}for(var m,h=o.childNodes,f=new x(a,t),g=0;g<h.length;g++)if(h[g].className.indexOf("pmContainer")>=0){m=h[g];for(var y=m.getElementsByTagName("iframe"),b=0;b<y.length;b++){var w=y[b];a.winlostIframeIds[w.id]=!0}m.parentNode.removeChild(m);break}m=o.ownerDocument.createElement("div"),m.className="pmHostedContainer pmContainer "+a.containerClassName,v(m),m.style.fontSize=0,o.appendChild(m);var k=m.getElementsByTagName("iframe");if(k.length)for(var S=0;S<k.length;S++){var I=k[S];a.winlostIframeIds[I.id]=!0,m.removeChild(I)}var P,E,A;E=m.ownerDocument,A=E.defaultView||E.parentWindow,A._piximedia=A._piximedia||{},function(e){return A._piximedia.easyXDM||(l.piximedia.injectEasyXDM(A,E,a.getTopmostWindow().location),A._piximedia.easyXDM=A.easyXDM.noConflict("_piximedia")),e()}(function(){P=A._piximedia.easyXDM,i("Creating RPC channel"),r=new P.Rpc({container:m,hash:!0,props:{style:{width:a.msie?1:0,height:a.msie?1:0},allowfullscreen:"allowfullscreen",scrolling:"no",width:a.msie?1:0,height:a.msie?1:0},remote:F,onReady:function(){n("master is ready")}},{local:{getConfig:function(){for(var o=[],n=[],r=0;r<a.allAvailableAds.length;r++)if(e.uniqid===a.allAvailableAds[r].uniqid){var s=a.allAvailableAds[r];s.injectedOnce=e.main_js_always_in_head||e.injectedOnce,o=[s];break}e.injectedOnce=!0;var l={},c={};for(var d in a.positions)if(a.positions.hasOwnProperty(d)){var p=a.positions[d];p.clickUrl&&(l[d]=p.clickUrl),p.advertiserClickUrl&&(c[d]=p.advertiserClickUrl)}var u={positionId:t.positionId,pixiPositionId:t.pixiPositionId||t.decoratedBy.getPixiPositionIdForPositionId(t.positionId),decoratedAt:t.decoratedAt,clickUrl:t.clickUrl,implicit:t.implicit,injectionIndex:t.injectionIndex,pageContainerWidth:t.pageContainerWidth,advertiserClickUrl:t.advertiserClickUrl,allAdvertiserClickUrls:c,allClickUrls:l};i("Config position: ",u),n.push(u);var m={siteId:a.siteId,placementId:a.placementId,globalOptions:a.globalOptions,allAvailableAds:o,positions:n,documentHasFocus:a.documentHasFocus};return m},fireEventToID:function(e,t,i,o){try{return a.globalEmitter.fireEventToID(e,t,{exceptTo:s}),i()}catch(n){return o()}}},remote:{fireEventToID:{}}});var o=function(){var e=m.getElementsByTagName("iframe");if(!e.length)return setTimeout(o,10);var t=e[0];i("Found RPC iframe",t),f.setIframe(t),c&&a.watchForRemoval(c,function(){n("Secondary marker has been removed"),f.emit("remove")})};i("Looking for RPC iframe"),o()})})})})},I.prototype.hostRoom=function(e,t,i){if(!this.master)return o("PAM.prototype.hostRoom() might only be called on the master PAM");t=t||{},n("Registering room "+e);var a="room."+e,r={siteId:this.siteId,placementId:this.placementId,positionId:a,ajax:!0,implicit:!0,virtual:{getContainer:i}};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);this.hello(r)},I.prototype.getTopmostFiFForElement=function(e){var t=e.ownerDocument,i=t.defaultView||t.parentWindow,o=this.getTopmostWindow();if(!i.inFIF&&!i.inDapIF&&!i.inDapMgrIf)return void 0;var n,a="pmBeacon"+this.rand(),r=i.name,s=o.document.getElementsByTagName("iframe");i.name=a;for(var l=0;l<s.length;l++){var c=s[l];try{if(c.contentWindow&&c.contentWindow.name===a){n=c;break}}catch(d){}}if(!n)e:for(var p=0;p<s.length;p++){var u=s[p];try{if(u.contentWindow&&(u.contentWindow.inFIF||u.contentWindow.inDapIF||u.contentWindow.inDapMgrIf))for(var m=u.contentWindow.document,h=m.getElementsByTagName("iframe"),f=0;f<h.lenght;f++){var v=h[f];try{if(v.contentWindow&&v.contentWindow.name===a){n=u;break e}}catch(d){}}}catch(d){}}return i.name=r,n},I.prototype.checkTopDomain=function(){var e,t=this;try{e=top.pmOriginalDomain}catch(i){return}if(e){var o=function(){var i;try{i=top.document.domain}catch(a){return n("Top document changed from â"+e+"â to unknown value!"),void t.loadEvent("PANIC",void 0,void 0,{fail_reason:"top_domain_changed",c1:e,c2:"EXCEPTION"})}i!==e?(n("Top document changed from â"+e+"â to â"+i+"â!"),t.loadEvent("PANIC",void 0,void 0,{fail_reason:"top_domain_changed",c1:e,c2:i})):setTimeout(o,1e4)};setTimeout(o,1e4)}},I.prototype.debug=function(){L=!0,A.console&&A.console.log&&A.console.log(t.get().join("\n"))},I.prototype.clearCSS=function(e){v(e)},I.prototype.createOpaqueAnimation=function z(e,t,i){var o=this;return z.prefix||(z.prefix="animation-"+o.rand()+"-",z.seq=0),i||(i=z.prefix+z.seq++),o.master?o.loadLibrary("sweetlib.js",function(){var n=o.getTopmostDocument(),a=A.piximedia.SweetLib.querySelector(e,n);o.animations[i]=A.piximedia.SweetLib.animate(a,t)}):o.emit("create-opaque-animation",e,t,i),i},I.prototype.createAnimation=function(e,t){var i=this,o=i.createOpaqueAnimation(e,t);return{play:function(e){i.playOpaqueAnimation(o,e)},reverse:function(e){i.reverseOpaqueAnimation(o,e)},clear:function(){i.clearOpaqueAnimation(o)}}},I.prototype.playOpaqueAnimation=function(e,t,i){var n=this;i||(i="fire-"+n.rand());var a="play-opaque-animation:callback:"+i;if(n.master){var r=n.animations[e];if(!r)return o("Could not find animation "+e);r.play(function(){n.emit(a)})}else n.on(a,function s(){n.removeListener(a,s),t(e)}),n.emit("play-opaque-animation",e,void 0,i)},I.prototype.reverseOpaqueAnimation=function(e,t,i){var n=this;i||(i="fire-"+n.rand());var a="reverse-opaque-animation:callback:"+i;if(n.master){var r=n.animations[e];if(!r)return o("Could not find animation "+e);r.reverse(function(){n.emit(a)})}else n.on(a,function s(){n.removeListener(a,s),t(e)}),n.emit("reverse-opaque-animation",e,void 0,i)},I.prototype.clearOpaqueAnimation=function(e){var t=this;if(t.master){var i=t.animations[e];if(!i)return o("Could not find animation "+e);i.clear()}else t.emit("clear-opaque-animation",e)},I.prototype.listBroadcastPm=function(e,t){var i=A.XMLHttpRequest?new A.XMLHttpRequest:void 0;if(e.match(/\/$/)||(e+="/"),"withCredentials"in i)i.open("GET","//"+M+"/list-of-broadcast.pm/"+e+"json",!0),i.onreadystatechange=function(){return 4===i.readyState?t(200!==i.status?{error:"failed: "+i.responseText}:JSON.parse(i.responseText)):void 0},i.send(null);else{var o="listbroadcastpm"+this.rand(),n=A.document.getElementsByTagName("head")[0],a=A.document.createElement("script");a.async=!0,a.src="//"+M+"/list-of-broadcast.pm/"+e+"jsonp=piximedia._."+encodeURIComponent(o),n.appendChild(a),A.piximedia._[o]=t}},I.prototype.startNavigationTracking=function(e){var t=this;return t.master?void t.loadLibrary("sweetlib.js",function(){var t=A.piximedia.SweetLib;t.startNavigationTracking(e)}):t.emit("start-navigation-tracking",e)},I.prototype.bindVisibilityTracker=function(e,t,i,o){var n=this;return o||(o="fire-"+n.rand()),n.master?void n.loadLibrary("sweetlib.js",function(){var a=A.piximedia.SweetLib,r={object:a.querySelector(e)};for(var s in t)if(t.hasOwnProperty(s))switch(s){case"callback":break;default:r[s]=t[s]}a.bindVisibilityTracker(r,function(e){return i?i(e):void n.emit(o,e)})}):(n.on(o,i),n.emit("bind-visibility-tracker",e,t,void 0,o))},I.upscaleAssetQuery=function(e){if("object"==typeof e.match)return e;"string"==typeof e&&"{"===e.substr(0,1)&&(e=JSON.parse(e));var t=function(e){switch(e.length){case 5:break;case 4:e=[e[0],e[1],null,e[2],e[3]];break;case 3:e=[null,e[0],e[1],e[2],null];break;case 2:e=[null,e[0],null,e[1],null];break;case 1:e=[null,null,e[0],null,null]}for(var t=0;t<e.length;t++)e[t]=null===e[t]?null:parseFloat(e[t],10);return null===e[0]&&(null!==e[1]?e[0]=e[1]:e[0]=e[2]),null===e[4]&&(null!==e[3]?e[4]=e[3]:e[4]=e[2]),e},i=function(e){if("true"===e)return!0;if("false"===e)return!1;var t=parseFloat(e,10);return t.toString()===e?t:e};if("string"==typeof e.require){var o=I.upscaleAssetQuery(e.require);if(e.use){var n=I.upscaleAssetQuery(e.require).match.grabAllAssets;o.match.grabSomeAssets=[];for(var a in n)n.hasOwnProperty(a)&&(o.match.grabSomeAssets=o.match.grabSomeAssets.concat(n[a].grabSomeAssets))}return o}if("string"==typeof e){for(var r=e.replace(/,\s+/g,",").split(/\s+/),l={grabAllAssets:[]},c=0;c<r.length;c++){var d=r[c],p=d.split(","),u={grabSomeAssets:[]};l.grabAllAssets.push(u);for(var m=0;m<p.length;m++){var f=p[m],v={and:[]};u.grabSomeAssets.push(v);var g=f.split("."),y=g.shift();y&&v.and.push([{property:"type"},"==",y]);for(var b in g)if(g.hasOwnProperty(b)){var w=g[b],x=w.match(/^[0-9]+x[0-9]+$/);if(x)v.and.push([{property:"surface"},"==",w]);else if(x=w.match(/^([a-z_]+)\*(.*)$/))v.and.push([{property:x[1]},"*",t(x[2].split("*"))]);else if(x=w.match(/^([a-z_]+)(=|<=|<|>=|>|<>|!=)(.*)$/)){var k=x[1],S=x[2],P=x[3];v.and.push([{property:k},S,i(P)])}else v.and.push({property:w})}}}e={match:l}}else if("object"==typeof e){var E=h(e)[0];if(void 0===E)throw new Error("Invalid query (1)");var A=e[E];if(void 0===A)throw new Error("Invalid query (2)");if(A.desc||A.requires){var C={grabAllAssets:[],grabMatchingAssets:[]};for(var T in e)if(e.hasOwnProperty(T)){var _=e[T];i(_.mandatory)?C.grabAllAssets.push({grabName:T,value:I.upscaleAssetQuery(_.requires)}):C.grabMatchingAssets.push({grabName:T,value:I.upscaleAssetQuery(_.requires)})}e={match:C}}else{var O={and:[]},N={grabAllAssets:[O]},F=function(e,o){var n=function(e){return e};switch(e){case"weight":n=function(e){return 1024*e},e="file_size";break;case"iframable":e="iframeable"}if(s(o)){for(var a=[],r=0;r<o.length;r++)a[r]=n(o[r]);return[{property:e},"*",t(a)]}if("string"!=typeof o)return[{property:e},"==",i(o)];var l=o.substr(o.length-1,1),c=o.substr(0,o.length-1);switch(l){case"+":case"-":case"!":switch(o=n(i(c)),l){case"+":return[{property:e},">=",o];case"-":return[{property:e},"<=",o];case"!":return[{property:e},"!==",o]}break;default:return[{property:e},"==",n(i(o))]}};for(var D in e)if(e.hasOwnProperty(D)){var M=e[D];""!==M&&O.and.push(F(D,M))}e={match:N}}}if(e.match&&e.match.grabAllAssets)for(var L=0;L<e.match.grabAllAssets.length;L++){var R=e.match.grabAllAssets[L];R.grabSomeAssets||R.grabMatchingAssets||R.grabAllAssets||(e.match.grabAllAssets[L]={grabAllAssets:[R]})}return e},I.assetsMatchQuery=function(e,t,i){i=i||{};var o,n,a,r,c=i.trailMissing||[],d={},p=i.assetsUsedOnce||{},u={},m=[],h={},f=[],v=function(e){o=e,o.name===o._splitname?(n=o._classes,a=o._type):(n=o.name.split("."),a=n.shift(),o._classes=n,o._type=a,o._splitname=o.name),o.metadataObject?r=o.metadataObject||{}:(r=o.metadata||{},"string"==typeof r&&(r=JSON.parse(r)||{},o.metadataObject=r))},g=function(e){switch(e){case"asset_id":return o.asset_id;case"type":return a;case"bytes":case"file_size":return o.file_size;default:var t=r.tags;return t&&l(t,e)>=0?!0:r[e]}},y=function(e){var t=e.id||e.asset_id;p[t]=!0;for(var i=0;i<f.length;i++){var o=f[i];h[o]=h[o]||[],u[o+":"+t]||(u[o+":"+t]=!0,h[o].push(e))}u[t]||(u[t]=!0,m.push(e))},b=function(e){e=e.grabName&&e.value?e.value:e,e.match&&(e=e.match);var t=JSON.stringify(e);d[t]||(d[t]=!0,c.push(JSON.parse(t)))},w=function(e){if(!e)return e;e.value&&(e=e.value),"object"==typeof e&&e.match&&(e=e.match);var n,a,r,l,c,d,p,u,m;if(e.grabSomeAssets||e.grabMatchingAssets||e.grabAllAssets){for(var h=e.grabSomeAssets||e.grabMatchingAssets||e.grabAllAssets,f=[],x=!1,k=h.length?!0:!1,S=0;S<h.length;S++){for(var I=h[S],P=!1,E=0;E<t.length;E++){v(t[E]);var A;if(I.and){A=!0;e:do for(p=0;p<I.and.length;p++)if(u=I.and[p],u&&void 0!==u.length&&s(u)){if(m=void 0,a=u[0],n=a&&a.property?g(a.property):w(a),1===u.length)m=n;else if(c=u[1],d=u[2],"*"===c)r=d[0],l=d[4],m=r&&r>n?!1:l&&n>l?!1:!0;else{switch(typeof u[2]){case"string":case"number":case"boolean":d=u[2];break;default:d=w(u[2])}switch(c){case"<":m=d>n;break;case">":m=n>d;break;case"<=":m=d>=n;break;case">=":m=n>=d;break;case"=":case"==":case"===":m=n===d;break;case"<>":case"!==":case"!=":m=n!==d}}if(!m){A=!1;break e}}else if(!w(I.and[p])){A=!1;break e}while(!1)}else A=w(I);A&&(P=!0,y(o))}P?x=!0:(f.push(I),k=!1)}var C;if(C=e.grabAllAssets&&!i.forceOr?k:x,!C)for(var T=0;T<f.length;T++){var _=f[T];b(_)}return x}if(void 0===e.length||!s(e)){if(e.property)return g(e.property);if(e.and){for(p=0;p<e.and.length;p++)if(u=e.and[p],u&&void 0!==u.length&&s(u)){if(m=void 0,a=u[0],n=a&&a.property?g(a.property):w(a),1===u.length)m=n;else if(c=u[1],d=u[2],"*"===c)r=d[0],l=d[4],m=r&&r>n?!1:l&&n>l?!1:!0;else{switch(typeof u[2]){case"string":case"number":case"boolean":d=u[2];break;default:d=w(u[2])}switch(c){case"<":m=d>n;break;case">":m=n>d;break;case"<=":m=d>=n;break;case">=":m=n>=d;break;case"=":case"==":case"===":m=n===d;break;case"<>":case"!==":case"!=":m=n!==d}}if(!m)return!1}else if(!w(e.and[p]))return!1;return!0}if(e.or){for(var O=0;O<e.and.length;O++)if(w(e.or[O]))return!0;return!1}return"object"==typeof e&&e.match?w(e.match):e}if(a=e[0],n=a&&a.property?g(a.property):w(e[0]),1===e.length)return n;if(c=e[1],d=e[2],"*"===c)return r=d[0],l=d[4],r&&r>n?!1:l&&n>l?!1:!0;switch(typeof e[2]){case"string":case"number":case"boolean":d=e[2];break;default:d=w(e[2])}switch(c){case"<":return d>n;case">":return n>d;case"<=":return d>=n;case">=":return n>=d;case"=":case"==":case"===":return n===d;case"<>":case"!==":case"!=":return n!==d}};if(e=I.upscaleAssetQuery(e),!e.match||!e.match.grabAllAssets)throw new Error("Don't know how to parse this expression");for(var x=!0,k=!1,S=0;S<e.match.grabAllAssets.length;S++){var P=e.match.grabAllAssets[S],E=P.grabName;f.push(E),w(P)?k=!0:x=!1,f.pop()}var A;return x?A=m:(k&&(i.partial=!0),A=[]),A},I.convertTrailMissing=function(e){var t=function(e){for(var t="*",i=[],o=function(e){if(e.property)-1===i.indexOf(e.property)&&i.push(e.property);else{if(!s(e))throw new Error("Unexepcted trail entry (4)");var o=e[0],n=e[1],a=e[2];if(o&&o.property){if("type"===o.property){if("=="!==n&&"==="!==n)throw new Error("Unexpected trail entry (3)");return void(t=a)}o=o.property}var r;switch(n){case"*":r=o+"*"+a.join("*");break;case"=":case"==":case"===":r=o+"="+a;break;case"!=":case"<>":case"!==":r=o+"!="+a;break;default:r=o+n+a}-1===i.indexOf(r)&&i.push(r)}};e.grabAllAssets&&e.grabAllAssets&&1===e.grabAllAssets.length;)e=e.grabAllAssets[0];if(e.and)for(var n=0;n<e.and.length;n++)o(e.and[n]);
return t+(i.length?"."+i.join("."):"")};if(e.grabSomeAssets){for(var i=[],o=0;o<e.grabSomeAssets.length;o++)i.push(t(e.grabSomeAssets[o]));return i.join(",")}return t(e)},I.prototype.getPrerequisiteVirtualPosition=function(e){try{if(!this.globalOptions||!this.globalOptions.virtualPositions)return;for(var t in this.globalOptions.virtualPositions)if(this.globalOptions.virtualPositions.hasOwnProperty(t)){var i=this.globalOptions.virtualPositions[t];if(i.prerequisite){var o={};if(o[t]={positionId:t},this.queryPosition(e,{positions:o}).length)return i.prerequisite}}}catch(n){return}},I.prototype.getPositionById=function(e){return this.positions[e]||null},I.VERSION=O,I.DEBUG=L,I.RENDEZVOUS_DURATION=N,I.SUPPORTS_TRACKING_AD=!0,I.SUPPORTS_TRACKING_CREATIVE=!0,I.browserDetect=V,I.EventEmitter=g,I.Ad=y,I.Position=k,I.Iframe=x,I.AdProxy=b,I.CGAdProxy=w,I.isArray=s,g.forObject(I),A.piximedia["PAM"+O]=I,(!A.piximedia.PAM||A.piximedia.PAM.VERSION<O)&&(A.piximedia.PAM=I,A.piximedia.browserDetect=V)}(),window.piximedia._.injectEasyXDM=function(e,t,i){!function(e,t,i,o,n,a){function r(e,t){var i=typeof e[t];return"function"==i||!("object"!=i||!e[t])||"unknown"==i}function s(e,t){return!("object"!=typeof e[t]||!e[t])}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(){var e="Shockwave Flash",t="application/x-shockwave-flash";if(!b(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var i=navigator.plugins[e].description;i&&!b(navigator.mimeTypes)&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(C=i.match(/\d+/g))}if(!C){var o;try{o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),C=Array.prototype.slice.call(o.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),o=null}catch(n){}}if(!C)return!1;var a=parseInt(C[0],10),r=parseInt(C[1],10);return T=a>9&&r>0,!0}function d(){if(!H){H=!0;for(var e=0;e<z.length;e++)z[e]();z.length=0}}function p(t,i){return e.piximedia&&e.piximedia.pam&&e.piximedia.pam.waitDomMutable?e.piximedia.pam.waitDomMutable(function(){t.call(i)}):H?void t.call(i):void z.push(function(){t.call(i)})}function u(){var e=parent;if(""!==j)for(var t=0,i=j.split(".");t<i.length;t++)e=e[i[t]];return e.easyXDM}function m(t){return e.easyXDM=V,j=t,j&&(W="easyXDM_"+j.replace(".","_")+"_"),B}function h(e){return e.match(M)[3]}function f(e){return e.match(M)[4]||""}function v(e){var t=e.toLowerCase().match(M),i=t[2],o=t[3],n=t[4]||"";return("http:"==i&&":80"==n||"https:"==i&&":443"==n)&&(n=""),i+"//"+o+n}function g(e){if(e=e.replace(R,"$1/"),!e.match(/^(http||https):\/\//)){var t="/"===e.substring(0,1)?"":i.pathname;"/"!==t.substring(t.length-1)&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=i.protocol+"//"+i.host+t+e}for(;L.test(e);)e=e.replace(L,"");return e}function y(e,t){var i="",o=e.indexOf("#");-1!==o&&(i=e.substring(o),e=e.substring(0,o));var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(r+"="+a(t[r]));return e+(q?"#":-1==e.indexOf("?")?"?":"&")+n.join("&")+i}function b(e){return"undefined"==typeof e}function w(e,t,i){var o;for(var n in t)t.hasOwnProperty(n)&&(n in e?(o=t[n],"object"==typeof o?w(e[n],o,i):i||(e[n]=t[n])):e[n]=t[n]);return e}function x(){var e=t.body.appendChild(t.createElement("form")),i=e.appendChild(t.createElement("input"));i.name=W+"TEST"+F,A=i!==e.elements[i.name],t.body.removeChild(e)}function k(e){b(A)&&x();var i;A?i=t.createElement('<iframe name="'+e.props.name+'"/>'):(i=t.createElement("IFRAME"),i.name=e.props.name),i.id=i.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=t.getElementById(e.container)),e.container||(w(i.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=t.body);var o=e.props.src;if(e.props.src="javascript:false",w(i,e.props),i.border=i.frameBorder=0,i.allowTransparency=!0,e.container.appendChild(i),e.onLoad&&_(i,"load",e.onLoad),e.usePost){var n,a=e.container.appendChild(t.createElement("form"));if(a.target=i.name,a.action=o,a.method="POST","object"==typeof e.usePost)for(var r in e.usePost)e.usePost.hasOwnProperty(r)&&(A?n=t.createElement('<input name="'+r+'"/>'):(n=t.createElement("INPUT"),n.name=r),n.value=e.usePost[r],a.appendChild(n));a.submit(),a.parentNode.removeChild(a)}else i.src=o;return e.props.src=o,i}function S(e,t){"string"==typeof e&&(e=[e]);for(var i,o=e.length;o--;)if(i=e[o],i=new RegExp("^"==i.substr(0,1)?i:"^"+i.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),i.test(t))return!0;return!1}function I(o){var n,a=o.protocol;if(o.isHost=o.isHost||b(G.xdm_p),q=o.hash||!1,o.props||(o.props={}),o.isHost)o.remote=g(o.remote),o.channel=o.channel||"default"+F++,o.secret=Math.random().toString(16).substring(2),b(a)&&(a=v(i.href)==v(o.remote)?"4":r(e,"postMessage")||r(t,"postMessage")?"1":o.swf&&r(e,"ActiveXObject")&&c()?"6":"Gecko"===navigator.product&&"frameElement"in e&&-1==navigator.userAgent.indexOf("WebKit")?"5":o.remoteHelper?"2":"0");else if(o.channel=G.xdm_c.replace(/["'<>\\]/g,""),o.secret=G.xdm_s,o.remote=G.xdm_e.replace(/["'<>\\]/g,""),a=G.xdm_p,o.acl&&!S(o.acl,o.remote))throw new Error("Access denied for "+o.remote);switch(o.protocol=a,a){case"0":if(w(o,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),o.isHost){if(!o.local){for(var s,l=i.protocol+"//"+i.host,d=t.body.getElementsByTagName("img"),p=d.length;p--;)if(s=d[p],s.src.substring(0,l.length)===l){o.local=s.src;break}o.local||(o.local=e)}var u={xdm_c:o.channel,xdm_p:0};o.local===e?(o.usePolling=!0,o.useParent=!0,o.local=i.protocol+"//"+i.host+i.pathname+i.search,u.xdm_e=o.local,u.xdm_pa=1):u.xdm_e=g(o.local),o.container&&(o.useResize=!1,u.xdm_po=1),o.remote=y(o.remote,u)}else w(o,{channel:G.xdm_c,remote:G.xdm_e,useParent:!b(G.xdm_pa),usePolling:!b(G.xdm_po),useResize:o.useParent?!1:o.useResize});n=[new B.stack.HashTransport(o),new B.stack.ReliableBehavior({}),new B.stack.QueueBehavior({encode:!0,maxLength:4e3-o.remote.length}),new B.stack.VerifyBehavior({initiate:o.isHost})];break;case"1":n=[new B.stack.PostMessageTransport(o)];break;case"2":o.isHost&&(o.remoteHelper=g(o.remoteHelper)),n=[new B.stack.NameTransport(o),new B.stack.QueueBehavior,new B.stack.VerifyBehavior({initiate:o.isHost})];break;case"3":n=[new B.stack.NixTransport(o)];break;case"4":n=[new B.stack.SameOriginTransport(o)];break;case"5":n=[new B.stack.FrameElementTransport(o)];break;case"6":C||c(),n=[new B.stack.FlashTransport(o)]}return n.push(new B.stack.QueueBehavior({lazy:o.lazy,remove:!0})),n}function P(e){for(var t,i={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},o=0,n=e.length;n>o;o++)t=e[o],w(t,i,!0),0!==o&&(t.down=e[o-1]),o!==n-1&&(t.up=e[o+1]);return t}function E(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}var A,C,T,_,O,N=e,F=Math.floor(1e4*Math.random()),D=Function.prototype,M=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,L=/[\-\w]+\/\.\.\//,R=/([^:])\/\//g,j="",B={},V=e.easyXDM,W="easyXDM_",q=!1;if(r(e,"addEventListener"))_=function(e,t,i){e.addEventListener(t,i,!1)},O=function(e,t,i){e.removeEventListener(t,i,!1)};else{if(!r(e,"attachEvent"))throw new Error("Browser not supported");_=function(e,t,i){e.attachEvent("on"+t,i)},O=function(e,t,i){e.detachEvent("on"+t,i)}}var U,H=!1,z=[];if("readyState"in t?(U=t.readyState,H="complete"==U||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==U||"interactive"==U)):H=!!t.body,!H){if(r(e,"addEventListener"))_(t,"DOMContentLoaded",d);else if(_(t,"readystatechange",function(){"complete"==t.readyState&&d()}),t.documentElement.doScroll&&e===top){var J=function(){if(!H){try{t.documentElement.doScroll("left")}catch(e){return void o(J,1)}d()}};J()}_(e,"load",d)}var G=function(e){e=e.substring(1).split("&");for(var t,i={},o=e.length;o--;)t=e[o].split("="),i[t[0]]=n(t[1]);return i}(/xdm_e=/.test(i.search)?i.search:i.hash),X=function(){var e={},t={a:[1,2,3]},i='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(t).replace(/\s/g,"")===i?JSON:(Object.toJSON&&Object.toJSON(t).replace(/\s/g,"")===i&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(t=i.evalJSON(),t.a&&3===t.a.length&&3===t.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(X=function(){return e},e):null)};w(B,{version:"2.4.19.3",query:G,stack:{},apply:w,getJSONObject:X,whenReady:p,noConflict:m}),B.DomHelper={on:_,un:O,requiresJSON:function(i){s(e,"JSON")||t.write('<script type="text/javascript" src="'+i+'"></script>')}},function(){var e={};B.Fn={set:function(t,i){e[t]=i},get:function(t,i){if(e.hasOwnProperty(t)){var o=e[t];return i&&delete e[t],o}}}}(),B.Socket=function(e){var t=P(I(e).concat([{incoming:function(t,i){e.onMessage(t,i)},callback:function(t){e.onReady&&e.onReady(t)}}])),i=v(e.remote);this.origin=v(e.remote),this.destroy=function(){t.destroy()},this.postMessage=function(e){t.outgoing(e,i)},t.init()},B.Rpc=function(e,t){if(t.local)for(var i in t.local)if(t.local.hasOwnProperty(i)){var o=t.local[i];"function"==typeof o&&(t.local[i]={method:o})}var n=P(I(e).concat([new B.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=v(e.remote),this.destroy=function(){n.destroy()},n.init()},B.stack.SameOriginTransport=function(e){var t,n,a,r;return t={outgoing:function(e,t,i){a(e),i&&i()},destroy:function(){n&&(n.parentNode.removeChild(n),n=null)},onDOMReady:function(){r=v(e.remote),e.isHost?(w(e.props,{src:y(e.remote,{xdm_e:i.protocol+"//"+i.host+i.pathname,xdm_c:e.channel,xdm_p:4}),name:W+e.channel+"_provider"}),n=k(e),B.Fn.set(e.channel,function(e){return a=e,o(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,r)}})):(a=u().Fn.get(e.channel,!0)(function(e){t.up.incoming(e,r)}),o(function(){t.up.callback(!0)},0))},init:function(){p(t.onDOMReady,t)}}},B.stack.FlashTransport=function(e){function n(e,t){o(function(){s.up.incoming(e,c)},0)}function r(i){var o=e.swf+"?host="+e.isHost,n="easyXDM_swf_"+Math.floor(1e4*Math.random());B.Fn.set("flash_loaded"+i.replace(/[\-.]/g,"_"),function(){B.stack.FlashTransport[i].swf=d=u.firstChild;for(var e=B.stack.FlashTransport[i].queue,t=0;t<e.length;t++)e[t]();e.length=0}),e.swfContainer?u="string"==typeof e.swfContainer?t.getElementById(e.swfContainer):e.swfContainer:(u=t.createElement("div"),w(u.style,T&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),t.body.appendChild(u));var r="callback=flash_loaded"+a(i.replace(/[\-.]/g,"_"))+"&proto="+N.location.protocol+"&domain="+a(h(N.location.href))+"&port="+a(f(N.location.href))+"&ns="+a(j);u.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+n+"' data='"+o+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+o+"'></param><param name='flashvars' value='"+r+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+r+"' allowScriptAccess='always' wmode='transparent' src='"+o+"' height='1' width='1'></embed></object>"}var s,l,c,d,u;return s={outgoing:function(t,i,o){d.postMessage(e.channel,t.toString()),o&&o()},destroy:function(){try{d.destroyChannel(e.channel)}catch(t){}d=null,l&&(l.parentNode.removeChild(l),l=null)},onDOMReady:function(){c=e.remote,B.Fn.set("flash_"+e.channel+"_init",function(){o(function(){s.up.callback(!0)})}),B.Fn.set("flash_"+e.channel+"_onMessage",n),e.swf=g(e.swf);var t=h(e.swf),a=function(){B.stack.FlashTransport[t].init=!0,d=B.stack.FlashTransport[t].swf,d.createChannel(e.channel,e.secret,v(e.remote),e.isHost),e.isHost&&(T&&e.swfNoThrottle&&w(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),w(e.props,{src:y(e.remote,{xdm_e:v(i.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:W+e.channel+"_provider"}),l=k(e))};B.stack.FlashTransport[t]&&B.stack.FlashTransport[t].init?a():B.stack.FlashTransport[t]?B.stack.FlashTransport[t].queue.push(a):(B.stack.FlashTransport[t]={queue:[a]},r(t))},init:function(){p(s.onDOMReady,s)}}},B.stack.PostMessageTransport=function(t){function n(e){if(e.origin)return v(e.origin);if(e.uri)return v(e.uri);if(e.domain)return i.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function a(e){var i=n(e);i==c&&e.data.substring(0,t.channel.length+1)==t.channel+" "&&r.up.incoming(e.data.substring(t.channel.length+1),i)}var r,s,l,c;return r={outgoing:function(e,i,o){l.postMessage(t.channel+" "+e,i||c),o&&o()},destroy:function(){O(e,"message",a),s&&(l=null,s.parentNode.removeChild(s),s=null)},onDOMReady:function(){if(c=v(t.remote),t.isHost){var n=function(i){i.data==t.channel+"-ready"&&(l="postMessage"in s.contentWindow?s.contentWindow:s.contentWindow.document,O(e,"message",n),_(e,"message",a),o(function(){r.up.callback(!0)},0))};_(e,"message",n),w(t.props,{src:y(t.remote,{xdm_e:v(i.href),xdm_c:t.channel,xdm_p:1}),name:W+t.channel+"_provider"}),s=k(t)}else _(e,"message",a),l="postMessage"in e.parent?e.parent:e.parent.document,l.postMessage(t.channel+"-ready",c),o(function(){r.up.callback(!0)},0)},init:function(){p(r.onDOMReady,r)}}},B.stack.FrameElementTransport=function(n){var a,r,s,l;return a={outgoing:function(e,t,i){s.call(this,e),i&&i()},destroy:function(){r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){l=v(n.remote),n.isHost?(w(n.props,{src:y(n.remote,{xdm_e:v(i.href),xdm_c:n.channel,xdm_p:5}),name:W+n.channel+"_provider"}),r=k(n),r.fn=function(e){return delete r.fn,s=e,o(function(){a.up.callback(!0)},0),function(e){a.up.incoming(e,l)}}):(t.referrer&&v(t.referrer)!=G.xdm_e&&(e.top.location=G.xdm_e),s=e.frameElement.fn(function(e){a.up.incoming(e,l)}),a.up.callback(!0))},init:function(){p(a.onDOMReady,a)}}},B.stack.NameTransport=function(e){function t(t){var i=e.remoteHelper+(s?"#_3":"#_2")+e.channel;l.contentWindow.sendMessage(t,i)}function i(){s?2!==++d&&s||r.up.callback(!0):(t("ready"),r.up.callback(!0))}function n(e){r.up.incoming(e,m)}function a(){u&&o(function(){u(!0)},0)}var r,s,l,c,d,u,m,h;return r={outgoing:function(e,i,o){u=o,t(e)},destroy:function(){l.parentNode.removeChild(l),l=null,s&&(c.parentNode.removeChild(c),c=null)},onDOMReady:function(){s=e.isHost,d=0,m=v(e.remote),e.local=g(e.local),s?(B.Fn.set(e.channel,function(t){s&&"ready"===t&&(B.Fn.set(e.channel,n),i())}),h=y(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),w(e.props,{src:h+"#"+e.channel,name:W+e.channel+"_provider"}),c=k(e)):(e.remoteHelper=e.remote,B.Fn.set(e.channel,n));var t=function(){var n=l||this;O(n,"load",t),B.Fn.set(e.channel+"_load",a),function r(){"function"==typeof n.contentWindow.sendMessage?i():o(r,50)}()};l=k({props:{src:e.local+"#_4"+e.channel},onLoad:t})},init:function(){p(r.onDOMReady,r)}}},B.stack.HashTransport=function(t){function i(e){if(f){var i=t.remote+"#"+m++ +"_"+e;(l||!g?f.contentWindow:f).location=i}}function n(e){u=e,s.up.incoming(u.substring(u.indexOf("_")+1),y)}function a(){if(h){var e=h.location.href,t="",i=e.indexOf("#");-1!=i&&(t=e.substring(i)),t&&t!=u&&n(t)}}function r(){c=setInterval(a,d)}var s,l,c,d,u,m,h,f,g,y;return s={outgoing:function(e,t){i(e)},destroy:function(){e.clearInterval(c),(l||!g)&&f.parentNode.removeChild(f),f=null},onDOMReady:function(){if(l=t.isHost,d=t.interval,u="#"+t.channel,m=0,g=t.useParent,y=v(t.remote),l){if(w(t.props,{src:t.remote,name:W+t.channel+"_provider"}),g)t.onLoad=function(){h=e,r(),s.up.callback(!0)};else{var i=0,n=t.delay/50;!function a(){if(++i>n)throw new Error("Unable to reference listenerwindow");try{h=f.contentWindow.frames[W+t.channel+"_consumer"]}catch(e){}h?(r(),s.up.callback(!0)):o(a,50)}()}f=k(t)}else h=e,r(),g?(f=parent,s.up.callback(!0)):(w(t,{props:{src:t.remote+"#"+t.channel+new Date,name:W+t.channel+"_consumer"},onLoad:function(){s.up.callback(!0)}}),f=k(t))},init:function(){p(s.onDOMReady,s)}}},B.stack.ReliableBehavior=function(e){var t,i,o=0,n=0,a="";return t={incoming:function(e,r){var s=e.indexOf("_"),l=e.substring(0,s).split(",");e=e.substring(s+1),l[0]==o&&(a="",i&&i(!0)),e.length>0&&(t.down.outgoing(l[1]+","+o+"_"+a,r),n!=l[1]&&(n=l[1],t.up.incoming(e,r)))},outgoing:function(e,r,s){a=e,i=s,t.down.outgoing(n+","+ ++o+"_"+e,r)}}},B.stack.QueueBehavior=function(e){function t(){if(e.remove&&0===s.length)return void E(i);if(!l&&0!==s.length&&!r){l=!0;var n=s.shift();i.down.outgoing(n.data,n.origin,function(e){l=!1,n.callback&&o(function(){n.callback(e)},0),t()})}}var i,r,s=[],l=!0,c="",d=0,p=!1,u=!1;return i={init:function(){b(e)&&(e={}),e.maxLength&&(d=e.maxLength,u=!0),e.lazy?p=!0:i.down.init()},callback:function(e){l=!1;var o=i.up;t(),o.callback(e)},incoming:function(t,o){if(u){var a=t.indexOf("_"),r=parseInt(t.substring(0,a),10);c+=t.substring(a+1),0===r&&(e.encode&&(c=n(c)),i.up.incoming(c,o),c="")}else i.up.incoming(t,o)},outgoing:function(o,n,r){e.encode&&(o=a(o));var l,c=[];if(u){for(;0!==o.length;)l=o.substring(0,d),o=o.substring(l.length),c.push(l);for(;l=c.shift();)s.push({data:c.length+"_"+l,origin:n,callback:0===c.length?r:null})}else s.push({data:o,origin:n,callback:r});p?i.down.init():t()},destroy:function(){r=!0,i.down.destroy()}}},B.stack.VerifyBehavior=function(e){function t(){o=Math.random().toString(16).substring(2),i.down.outgoing(o)}var i,o,n;return i={incoming:function(a,r){var s=a.indexOf("_");-1===s?a===o?i.up.callback(!0):n||(n=a,e.initiate||t(),i.down.outgoing(a)):a.substring(0,s)===n&&i.up.incoming(a.substring(s+1),r)},outgoing:function(e,t,n){i.down.outgoing(o+"_"+e,t,n)},callback:function(i){e.initiate&&t()}}},B.stack.RpcBehavior=function(e,t){function i(e){e.jsonrpc="2.0",a.down.outgoing(r.stringify(e))}function o(e,t){var o=Array.prototype.slice;return function(){var n,a=arguments.length,r={method:t};a>0&&"function"==typeof arguments[a-1]?(a>1&&"function"==typeof arguments[a-2]?(n={success:arguments[a-2],error:arguments[a-1]},r.params=o.call(arguments,0,a-2)):(n={success:arguments[a-1]},r.params=o.call(arguments,0,a-1)),c[""+ ++s]=n,r.id=s):r.params=o.call(arguments,0),e.namedParams&&1===r.params.length&&(r.params=r.params[0]),i(r)}}function n(e,t,o,n){if(!o)return void(t&&i({id:t,error:{code:-32601,message:"Procedure not found."}}));var a,r;t?(a=function(e){a=D,i({id:t,result:e})},r=function(e,o){r=D;var n={id:t,error:{code:-32099,message:e}};o&&(n.error.data=o),i(n)}):a=r=D,l(n)||(n=[n]);try{var s=o.method.apply(o.scope,n.concat([a,r]));b(s)||a(s)}catch(c){r(c.message)}}var a,r=t.serializer||X(),s=0,c={};return a={incoming:function(e,o){var a=r.parse(e);if(a.method)t.handle?t.handle(a,i):n(a.method,a.id,t.local[a.method],a.params);else{var s=c[a.id];a.error?s&&s.error&&s.error(a.error):s&&s.success&&s.success(a.result),delete c[a.id]}},init:function(){if(t.remote)for(var i in t.remote)t.remote.hasOwnProperty(i)&&(e[i]=o(t.remote[i],i));a.down.init()},destroy:function(){for(var i in t.remote)t.remote.hasOwnProperty(i)&&e.hasOwnProperty(i)&&delete e[i];a.down.destroy()}}},N.easyXDM=B}(e,t,i,e.setTimeout,decodeURIComponent,encodeURIComponent)},window.piximedia.injectEasyXDM=function(e,t,i){window.piximedia._.injectEasyXDM.call(e,e,t,i)},window.piximedia.injectEasyXDM(window,document,window.location),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,o,n,a,r,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,i=0;a>i;i+=1)r[i]=str(i,l)||"null";return n=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,n}if(rep&&"object"==typeof rep)for(a=rep.length,i=0;a>i;i+=1)"string"==typeof rep[i]&&(o=rep[i],n=str(o,l),n&&r.push(quote(o)+(gap?": ":":")+n));else for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n=str(o,l),n&&r.push(quote(o)+(gap?": ":":")+n));return n=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,i){var o;if(gap="",indent="","number"==typeof i)for(o=0;i>o;o+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var i,o,n=e[t];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o=walk(n,i),void 0!==o?n[i]=o:delete n[i]);return reviver.call(e,t,n)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),!function(){"use strict";function e(){var e=this;i.on("event",function(t,i,o){e.validateEvent(t,i,o)})}var t=window,i=t.piximedia.PAM;e.prototype.validateEvent=function(e,o,n){o=o||{};var a=o.adIdAlliance,r=o.creativeIdAlliance,s=n.c1,l=n.c2,c=n.c3,d=n.c4,p=n.c5;i.DEBUG&&t.console.log("Event: "+e+", adId="+a+", creativeId="+r+", c1="+s+", c2="+l+", c3="+c+", c4="+d+", c5="+p)},t.piximedia.Validatr=e,e.instance||(e.instance=new e),t.piximedia.libraryLoader&&t.piximedia.libraryLoader["validatr.js"]&&(t.piximedia.libraryLoader["validatr.js"].complete=!0)}(),function(){var e=window,t="validatr.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var o=0;o<i.onloads.length;o++)i.onloads[o]()}(),window.piximedia.libraryLoader["validatr.js"]=window.piximedia.libraryLoader["validatr.js"]||{},window.piximedia.libraryLoader["validatr.js"].loaded=!0,!function(){"use strict";var e=window;e.piximedia=e.piximedia||{},e.piximedia._=e.piximedia._||{};var t,i="2014031402",o=2500,n=2147483647,a=2147483646,r=2147483645,s=2147483644,l=10;try{t=window.top&&window.top.name&&"debug"===window.top.name?!0:!1}catch(c){t="debug"===window.name?!0:!1}var d=t,p={start:function(){p.setWindowAndDocument(),p.bindFocusEvent(),p.lastMouseCoordinate=[0,0],p.addEvent(p.d,"mouseout",function(e){p.lastMouseCoordinate=[e.clientX,e.clientY]}),p.browser=p.getBrowser(),p.device=p.getDevice(),e.piximedia.preview&&e.piximedia.preview.emulation&&(p.browser=e.piximedia.preview.emulation.browser||p.browser,p.device=e.piximedia.preview.emulation.device||p.device),"msie"!==p.browser.name&&"trident"!==p.browser.name&&"desktop"===p.device.name&&p.hasFlash()&&!function(){function e(e){e.parentNode&&"piximedia-sweetlib-flashcheckobject-wrapper"===e.parentNode.id?p.remove(e.parentNode):p.remove(e)}p.flashCheckCallback=function(){if("safari"===p.browser.name)var t=0,i=setInterval(function(){t++,p.overrideFlashValue="undefined"!=typeof p.flashCheckObject.PercentLoaded,(p.overrideFlashValue||10===t)&&(clearInterval(i),e(p.get("piximedia-sweetlib-flashcheckobject")))},0);else p.overrideFlashValue="undefined"!=typeof p.flashCheckObject.PercentLoaded,e(p.get("piximedia-sweetlib-flashcheckobject"))};var t=function(){p.flashCheckObject=p.d.createElement("object"),p.flashCheckObject.type="application/x-shockwave-flash",p.flashCheckObject.id="piximedia-sweetlib-flashcheckobject",p.d.body.appendChild(p.flashCheckObject),p.flashCheckCallback()};p.d.body?t():(p.overrideFlashValue=!1,p.domload(t))}(),p.browserCSSLoaded=!1;var t=["piximedia.style.20161402.css"],i=function(){p.w.piximedia.pam?p.w.piximedia.pam.loadCSSs(t,function(){p.browserCSSLoaded=!0}):setTimeout(i,200)};i()},logstack:[],pageActive:!1,stylesheets:{},resizeCallbacks:{},resizeObjects:[],pcBonusWidthWhenGluedText:20,blockContentTagNames:["DIV","P","SPAN","TABLE","SECTION","NAV","FORM","CENTER","HEADER","MAIN"],registeredMouseEventsObjects:{},allowedFlashVideoFormat:["mp4","f4v","flv"],allowedHTML5VideoFormat:["mp4","ogv","ogg","webm","dailymotion"],html5VideoRules:function(e){var t=p.browser,i=p.device;if("msie"===t.name)return!1;if("dailymotion"===e)return!0;if("vp9"===e){if("firefox"===t.name)return t.version>=28?!0:!1;if("chrome"===t.name)return t.version>=29?!0:!1;if("trident"===t.name||"msie"===t.name)return!1}else if("vp8"===e){if("firefox"===t.name)return t.version>=26?!0:!1;if("chrome"===t.name)return t.version>=20?!0:!1;if("trident"===t.name||"msie"===t.name)return!1}else if("mp4"===e){if("msie"===t.name&&t.version>=9||"trident"===t.name)return!0;if("mobile"===i.name||"tablet"===i.name)return!0;if("safari"===t.name&&"windows"!==i.os||"chrome"===t.name||"edge"===t.name)return!0}return void 0},prefixedEvent:{chrome:{transitionend:"webkitTransitionEnd"},safari:{transitionend:"webkitTransitionEnd"},firefox:{transitionend:"transitionend"},msie:{transitionend:"transitionend"},"default":{transitionend:"transitionend"}},prefixedProperty:{chrome:{transform:"-webkit-transform"},safari:{transform:"-webkit-transform"},firefox:{},msie:{transform:"-ms-transform"}},setWindowAndDocument:function(){p.w=function(){var e;try{return e=parent.parent.parent.document,e.piximediaiframetest=!0,parent.parent.parent.window}catch(t){}try{return e=parent.parent.document,e.piximediaiframetest=!0,parent.parent.window}catch(t){}try{return e=parent.document,e.piximediaiframetest=!0,parent.window}catch(t){}return window}(),p.d=p.w.document},getNavigator:function(){return window.navigator&&window.navigator.userAgent?window.navigator:{userAgent:"",appName:""}},print:function(){p.console("log",arguments,!1,!0)},log:function(){p.console("log",arguments)},warn:function(){p.console("warn",arguments)},console:function(e,t,i,o){var n=i?"Saved message : ":"["+p.getDeltaTime()+"] "+e+" : ",a=!1,r=!1;"object"==typeof t[0]||o?a=!0:n+=p.sprintf(t,!0),o&&(r=p.copy(t),r.unshift(n)),d&&window.console&&window.console[e]&&(a&&!o?window.console[e](t[0]):o?window.console[e].apply(window.console,r):window.console[e](n)),p.logstack.push&&!i&&p.logstack.push({message:a?t[0]:n,method:e,new_way:r})},hardlog:function(e,t,i){window.console&&window.console[e]&&(i?window.console[e].apply(window.console,t):window.console[e](t))},debug:function(){d=!0,p.each(p.logstack,function(){p.hardlog(this.method,this.new_way?this.new_way:this.message,this.new_way?!0:!1)})},hasClass:function(e,t){return e&&e.className?new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className):!1},removeClass:function(e,t){return e?void(p.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))):!1},addClass:function(e,t){return e?void(p.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)):!1},isSecured:function(){return"https:"===p.w.location.protocol?!0:!1},getDeltaTime:function(){for(var e=p.now(),t=p.ref,i=(e-t).toString();i.length<5;)i="0"+i;return i+"ms"},now:function(){return p.ref||(p.ref=(new Date).getTime()),(new Date).getTime()},random:function(){return Math.floor(1e13*Math.random())},getTime:function(){return p.now()},isArray:function(e){var t=p.getTrueType(e);switch(t){case"array":case"arguments":case"htmlcollection":case"htmlallcollection":case"nodelist":return!0;case"boolean":case"string":case"number":return!1;default:return e&&e[0]&&"number"==typeof e.length?!0:!1}},getTrueType:function(e){return Object.prototype.toString.call(e).match(/\[object (.*?)\]/)[1].toLowerCase()},copy:function(e,t){var i;if(Array.prototype.slice&&(p.isArray(e)||t))return Array.prototype.slice.call(e);if(p.isArray(e)||t)i=[],p.each(e,function(t){i[t]=e[t]});else{i={};var o=function(e,t){p.each(e,function(i){if("object"==typeof e[i])try{JSON.stringify(e[i]),t[i]={},o(e[i],t[i])}catch(n){t[i]=e[i]}else t[i]=e[i]})};o(e,i)}return i},shuffle:function(e){for(var t,i,o=e.length;o;t=Math.floor(Math.random()*o),i=e[--o],e[o]=e[t],e[t]=i);return e},sprintf:function(e,t){var i=p.copy(e,!0),o=i.shift();if("string"==typeof o){for(;o.match(/%[sSd]/);){var n=i.shift(),a=o.match(/%[sSd]/)?o.match(/%[sSd]/)[0]:"",r="%S"===a,s="%d"===a;n=void 0===n?"":""===n?t?"(Empty String)":"":t?n.toString():n,r?n=n.toUpperCase():s&&(n=parseFloat(n,10)),o=o.replace(/%[sSd]/,n)}return o}return o},camelize:function(e){return e.replace(/(?:^|[-_])(\w)/g,function(e,t){return t?t.toUpperCase():""})},dasherize:function(e){return e.trim().replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},htmlentities:function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},shorten:function(e,t){return e.length>t?e.substr(0,t).replace(/\s\S+$/,"")+"...":e},addZero:function(e){var t=parseFloat(e,10);return 10>t?"0"+e:e},cleanTime:function(e){if(isNaN(parseInt(e,10)))return"00:00";if(parseInt(e,10)/60<=1)return"00:"+p.addZero(parseInt(e,10));var t=parseInt(e/60,10),i=parseInt(e-60*t,10);return p.sprintf(["%s:%s",t,p.addZero(i)])},twiterize:function(e){return e},each:function(e,t){function i(i){try{var o=t.call(e[i],i);if(void 0!==o)return o}catch(n){p.warn("Error looping through %s at key %d",p.getFnName(t),i),p.warn(n)}}var o,n;if(!e)return e;if(p.isArray(e)){for(o=0;o<e.length;o++)if(n=i(o),void 0!==n)return n}else for(var a in e)if(e.hasOwnProperty(a)&&(n=i(a),void 0!==n))return n},exist:function(e,t){return!p.isArray(t)||p.isArray(e)?!1:p.each(t,function(i){return t[i].toLowerCase&&t[i].toLowerCase()===e.toLowerCase()?this:void 0})},getFnName:function(e){if(e.name&&""!==e.name)return e.name;var t="Anonymous function";return e.toString&&e.toString.match&&e.toString.match(/function(.*)?\(/)?e.toString.match(/function(.*)?\(/)[1]:t},extend:function(e,t){p.each(t,function(i){try{var o=e[i],n=t[i];"undefined"==typeof o||""===o||null===o?e[i]=n:"number"!=typeof n||isNaN(parseFloat(o,10))||o===n?"object"!=typeof o&&"undefined"!=typeof o||"object"!=typeof n||p.extend(e[i],n):e[i]=parseFloat(o,10)}catch(a){p.warn(a)}})},isIframed:function(e){var t=e||window;return t.parent&&t.parent.location?t.parent.location!==t.location:!1},isCrossDomained:function(e){try{var t=e||window;return t.parent.document.piximediaCrossDomainTest=!0,window&&window.parent&&window.hasOwnProperty&&!window.parent.hasOwnProperty}catch(i){return!0}},getDocument:function(e){return e.ownerDocument},getWindow:function(e,t){var i=t?p.getDocument(t):e;return"defaultView"in i?i.defaultView:i.parentWindow},getOwnerFif:function(e){var t,i="pm-"+p.random(),o=p.getWindow(p.d,e),n=o.name,a=p.d.getElementsByTagName("iframe");return o.name=i,p.each(a,function(e){try{if(a[e]&&a[e].contentWindow&&a[e].contentWindow.name===i)return t=a[e],!0}catch(o){}}),o.name=n,t?t:void 0},addEvent:function(e,t,i){if(e)if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else if(e["on"+t]){if("function"==typeof e["on"+t]){var o=e["on"+t];e["on"+t]=function(){
i.apply(e,arguments),o.apply(e,arguments)}}}else e["on"+t]=i},addEventOnce:function(e,t,i){p.addEvent(e,t,function o(){return p.removeEvent(e,t,o),i.apply(this,arguments)})},removeEvent:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]===i&&(e["on"+t]=null)},preventDefault:function(e){var t=e||window.event;t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1},fireEvent:function(e){if(document.addEventListener){var t=document.createEvent("UIEvents");t.initEvent(e,!1,!1),document.dispatchEvent(t)}else document.documentElement[e]++},bindEvent:function(e,t){document.addEventListener?document.addEventListener(e,function(){t()},!1):(document.documentElement[e]||(document.documentElement[e]=0),document.documentElement.attachEvent("onpropertychange",function(i){i.propertyName===e&&t()}))},onResize:function(e,t){e.pmResizeId||(e.pmResizeId="pmResizeId-"+p.random()),p.resizeCallbacks[e.pmResizeId]||(p.resizeCallbacks[e.pmResizeId]=[]),p.resizeCallbacks[e.pmResizeId].push(t),p.exist(e.pmResizeId,p.resizeObjects)||p.resizeObjects.push(e),p.intervalStarted||(p.intervalStarted=!0,p.checkResize())},checkResize:function(){var e,t,i,o=100,n=o;i=function(){var i,a;p.each(p.resizeObjects,function(){if(a=this.pmResizeId,this.getBoundingClientRect)i=p.gbcr(this),(Math.abs(i.width-(this.pmResizePreviousWidth||0))>.5||Math.abs(i.height-(this.pmResizePreviousHeight||0))>.5||n===o)&&p.resizeCallbacks[a].length>0&&(this.pmResizePreviousWidth=i.width,this.pmResizePreviousHeight=i.height,p.each(p.resizeCallbacks[a],function(){p.call(this)}));else{i=p.getViewportSize();var r=i[0],s=i[1];(e!==r||t!==s||n===o)&&p.resizeCallbacks[a].length>0&&(e=r,t=s,p.each(p.resizeCallbacks[a],function(){p.call(this)}))}}),n===o?n=0:n++},p.addEvent(p.w,"resize",function(){i()}),setInterval(function(){i()},20)},centerMeVertically:function(e,t,i){var o,n=p.getPropertyValue(e,"position");p.applyStyle(e,{position:"static"===n?"absolute":n}),o=function(){var i=0;if("fixed"===n)i=(p.getViewportSize()[1]-p.gbcr(e).height)/2;else if(t){for(var o=(p.getViewportSize()[1]-p.gbcr(e).height)/2,a=e.parentNode,r=0;a!==p.getDocument(a).body;)r+=p.gbcr(a).top-p.gbcr(a.parentNode).top,a=a.parentNode;i=o+p.getPageScroll()[1]-r}else i=(p.gbcr(e.parentNode).height-p.gbcr(e).height)/2;p.applyStyle(e,{top:i+"px"})},p.onResize(e,o),p.onResize(e.parentNode,o),p.onResize(p.w,o),i&&p.addEvent(p.w,"scroll",o)},getPrefixedEvent:function(e){return p.prefixedEvent[p.browser.name]&&p.prefixedEvent[p.browser.name][e]?p.prefixedEvent[p.browser.name][e]:e},getPrefixedProperty:function(e){return p.prefixedProperty[p.browser.name]&&p.prefixedProperty[p.browser.name][e]?p.prefixedProperty[p.browser.name][e]:e},track:function(e,t,i,o){var n,a=!1,r=!1,s=t.match(/^timetracker/i)?"duration":"PANIC"===t?"error":"detail",l="undefined"!=typeof i?i:"default";if(e.trackedEvents||(e.trackedEvents={}),e.trackedEvents[t]||(e.trackedEvents[t]={},a=!0),e.trackedEvents[t][l]||(e.trackedEvents[t][l]=!0,r=!0),p.log("Loging event : %s, %s : %s | Custom ? %s | First on ad ? %s, First on unit ? %s",t,t.match(/^timetracker/i)?"duration":"PANIC"===t?"error":"unit",l,o?o:"(no custom)",a,r),n=p.sprintf(["ad_id=%d;creative_id=%d;c1=%s;c2=%s;c3=%s;c4=%s;c5=%s;first_on_ad=%s;first_on_unit=%s;%s=%s",e.adIdAlliance,e.creativeIdAlliance,e.custom1?e.custom1:"",e.custom2?e.custom2:"",e.custom3?e.custom3:"",e.custom4?e.custom4:"",o||"",a?"1":"0",r?"1":"0",s,i]),!e.adIdAlliance||!e.creativeIdAlliance)return p.log("Not sending it, because adIdAlliance wan't provided nor creativeIdAlliance"),void p.log("Query string should like that : %s",n);var c={c1:e.custom1?e.custom1:"",c2:e.custom2?e.custom2:"",c3:e.custom3?e.custom3:"",c5:o||"",firstOnAd:a?"1":"0",firstOnUnit:r?"1":"0",duration:"duration"===s?i:"",failReason:"error"===s?i:""};e.framedPosition&&e.framedPosition.loadEvent?e.framedPosition.loadEvent(t,c):e.framedAd&&e.framedAd.iframe&&e.framedAd.iframe.position&&e.framedAd.iframe.position.loadEvent?e.framedAd.iframe.position.loadEvent(t,c):e.framedAd&&e.framedAd.loadEvent?(c.detail=i,e.framedAd.loadEvent(t,c)):window.piximedia.core&&window.piximedia.core.loadEvent&&999!==e.adIdAlliance?window.piximedia.core.loadEvent(t,{mode:"P",site_id:e.c1,placement_id:e.c2,params:n,click:""}):p.PixelPrinter("http://ad.piximedia.com/event/?P|"+e.c1+"|"+e.c2+"|event="+t+";"+n+"|"+p.random()+"|")},gbcr:function(e){if(!e)return{};var t,i=0;try{t=e.getBoundingClientRect()}catch(o){return{left:0,top:0,right:0,bottom:0,width:0,height:0,error:!0}}return"msie"===p.browser.name&&p.browser.version<=7&&(i=2),{left:t.left-i,right:t.right-i,top:t.top-i,bottom:t.bottom-i,width:t.width?t.width:t.right-t.left,height:t.height?t.height:t.bottom-t.top}},gbcrfp:function(e){var t=p.gbcr(e),i=p.getPageScroll(),o=i[0],n=i[1];return t.left+=o,t.right+=o,t.top+=n,t.bottom+=n,t},getPositionTop:function(e){var t=[],i=[],o=p.getPageScroll()[1];return t=p.isArray(e)?e:[e],p.each(t,function(){if("#pmFiller"===this.toString()){if(p.d.querySelector("#pmFiller")){var e=p.gbcr(p.d.querySelector("#pmFiller"));i.push(e.top+e.height+o)}}else p.each(p.w.piximedia.pam.positions[this.toString()].iframes,function(){var e=p.gbcr(this.iframe);i.push(e.top+e.height+o)})}),0===i.length?0:Math.max.apply(null,i)},getBodyHeight:function(e){var t=e||p.d,i=parseInt(p.gbcr(t.body).height,10),o=i-p.getViewportSize(p.getWindow(t))[1];if(o>-1||1>o){var n=t.body.childNodes;i=0;for(var a=0;a<n.length;a++){var r=p.gbcr(n[a]),s=1===n[a].nodeType?p.getPropertyValue(n[a],"position"):"",l="relative"===s||"static"===s?r.height:0;i+=l}}return i},registerMouseEventObject:function(e,t,i){e.customPmId||(e.customPmId="pmMouseEventId-"+p.random()),p.registeredMouseEventsObjects[e.customPmId]||(p.registeredMouseEventsObjects[e.customPmId]={enter:{callbacks:[]},leave:{callbacks:[]},object:e}),p.registeredMouseEventsObjects[e.customPmId][i].callbacks.push(t)},mouseenter:function(e,t){p.registerMouseEventObject(e,t,"enter"),p.addEvent(e,"mouseover",function(){e.isMouseOvered||(e.isMouseOvered=!0,p.each(p.registeredMouseEventsObjects[e.customPmId].enter.callbacks,function(t){p.call(p.registeredMouseEventsObjects[e.customPmId].enter.callbacks[t])}))}),p.mouseleave(e,function(){},!0)},mouseleave:function(e,t,i){function o(){try{e.isMouseOvered=!1}catch(t){return}p.each(p.registeredMouseEventsObjects[e.customPmId].leave.callbacks,function(t){p.call(p.registeredMouseEventsObjects[e.customPmId].leave.callbacks[t])})}i||p.registerMouseEventObject(e,t,"leave"),p.addEvent(e,"mouseout",function(t){var i,n=p.gbcr(e),a=t.clientX<=n.left||t.clientX>=n.right,r=t.clientY<=n.top||t.clientY>=n.bottom;try{i=e.isMouseOvered}catch(s){}(a||r)&&i&&o()}),p.bindEvent("focus-change",function(){var t;try{t=e.isMouseOvered}catch(i){}!p.pageActive&&t&&o()})},isMouseInside:function(e){function t(e,t,i){var o="top"===e||"bottom"===e?"y":"x",n="y"===o?["left","right"]:["top","bottom"],a="y"===o?i.height:i.width;return t[e]<10&&t[e]>-1*a&&t[n[0]]<0&&t[n[1]]<0?!0:!1}var i=p.gbcr(e),o=p.lastMouseCoordinate,n={top:parseInt(i.top-o[1],10),right:parseInt(o[0]-i.right,10),bottom:parseInt(o[1]-i.bottom,10),left:parseInt(i.left-o[0],10)};return t("top",n,i)||t("right",n,i)||t("bottom",n,i)||t("left",n,i)},getMousePosition:function(e,t,i){return e.clientX-p.gbcr(t)[i]},bindRollTracker:function(e,t,i){t.pmRollTracked||(t.pmRollTracked=!0,p.mouseenter(t,function(){clearTimeout(t.pmRollTrackerTimeout),clearTimeout(t.pmRollTrackerTimeoutInstant),t.pmRollTrackerTimeoutInstant=setTimeout(function(){t.cantTrackInstantHover||(p.track(e,"HOVER:0MS",i),setTimeout(function(){t.cantTrackInstantHover=!1},2e3)),t.cantTrackInstantHover=!0},0),t.pmRollTrackerTimeout=setTimeout(function(){p.track(e,"HOVER:2500MS",i)},o)}),p.mouseleave(t,function(){clearTimeout(t.pmRollTrackerTimeout)}))},call:function(e,t){if(e)try{e.apply(this,t||[])}catch(i){p.warn("Callback error"),p.warn(i)}},contentload:function(e){var t=p.d,i=400,o=function(){return t.body&&(t.body.scrollHeight>=i||p.gbcr(t.body).height>=i)?e():void setTimeout(o,10)};o()},domload:function(e,t){function i(){a||(a=!0,n())}var o=t||p.d,n=function(){o.pmdomready||(o.pmdomready=!0),p.call(e)},a=!1,r=function(){"complete"!==o.readyState||a||(o.detachEvent("onreadystatechange",r),a=!0,n())};if("complete"===o.readyState||o.pmdomready)return a=!0,n(),!0;if(o.addEventListener?o.addEventListener("DOMContentLoaded",function(){a||(a=!0,n())},!1):o.all&&!window.opera&&o.attachEvent&&o.attachEvent("onreadystatechange",r),/Safari/i.test(p.getNavigator().userAgent))var s=setInterval(function(){/loaded|complete/.test(o.readyState)&&!a&&(a=!0,n(),clearInterval(s))},50);return p.addEvent(p.getWindow(o),"load",i,!1),!1},getBrowser:function(){var e=p.getNavigator(),t=e.userAgent;if(t.search("Edge")>=0)try{return{name:"edge",version:parseInt(t.match(/Edge\/([0-9]+)/)[1],10)}}catch(i){}else if(t.search("Chrome")>=0)try{return{name:"chrome",version:parseInt(t.match(/Chrome\/([0-9]+)/)[1],10)}}catch(i){}else if(t.search("Safari")>=0)try{return{name:"safari",version:parseInt(t.match(/Version\/([.0-9]+)/)[1],10)}}catch(i){}else if(t.search("Firefox")>=0)try{return{name:"firefox",version:parseInt(t.match(/Firefox\/([0-9]+)/)[1],10)}}catch(i){}else if("Microsoft Internet Explorer"===e.appName)try{var o=!1,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!==n.exec(t)&&(o=parseFloat(RegExp.$1)),10===o?{name:"trident",version:6}:{name:"msie",version:o}}catch(i){}else if(e.userAgent.match(/Trident/))try{return{name:"trident",version:e.userAgent.match(/Trident\/([0-9])\./)[1]}}catch(i){}return{name:"other",version:1}},getDevice:function(){var e,t,i,o=p.getNavigator(),n=o.userAgent,a=n.match(/iPad|iPod|iPhone/)?"ios":n.match(/Android/)?"android":n.match(/Windows/)?"windows":n.match(/Macintosh/)?"mac":"";return i=n.match(/GoogleTV|SmartTV|Internet TV|NetCast|NETTV|AppleTV|boxee|Kylo|Roku|DLNADOC|CE\-HTML/i)?"desktop":n.match(/Xbox|PLAYSTATION 3|Wii/i)?"desktop":n.match(/iP(a|ro)d/i)||n.match(/tablet/i)&&!n.match(/RX-34/i)||n.match(/FOLIO/i)?"tablet":n.match(/Linux/i)&&n.match(/Android/i)&&!n.match(/Fennec|mobi|HTC Magic|HTCX06HT|Nexus One|SC-02B|fone 945/i)?"tablet":n.match(/Kindle/i)||n.match(/Mac OS/i)&&n.match(/Silk/i)?"tablet":n.match(/GT-P10|SC-01C|SHW-M180S|SGH-T849|SCH-I800|SHW-M180L|SPH-P100|SGH-I987|zt180|HTC( Flyer|_Flyer)|Sprint ATP51|ViewPad7|pandigital(sprnova|nova)|Ideos S7|Dell Streak 7|Advent Vega|A101IT|A70BHT|MID7015|Next2|nook/i)||n.match(/MB511/i)&&n.match(/RUTEM/i)?"tablet":n.match(/BOLT|Fennec|Iris|Maemo|Minimo|Mobi|mowser|NetFront|Novarra|Prism|RX-34|Skyfire|Tear|XV6875|XV6975|Google Wireless Transcoder/i)?"mobile":n.match(/Opera/i)&&n.match(/Windows NT 5/i)&&n.match(/HTC|Xda|Mini|Vario|SAMSUNG\-GT\-i8000|SAMSUNG\-SGH\-i9/i)?"mobile":n.match(/Windows (NT|XP|ME|9)/)&&!n.match(/Phone/i)&&!n.match(/Bot|Spider|ia_archiver|NewsGator/i)||n.match(/Win( ?9|NT)/i)?"desktop":n.match(/Macintosh|PowerPC/i)&&!n.match(/Silk/i)?"desktop":n.match(/Linux/i)&&n.match(/X11/i)&&!n.match(/Charlotte/i)?"desktop":n.match(/CrOS/)?"desktop":n.match(/Solaris|SunOS|BSD/i)?"desktop":n.match(/curl|Bot|B-O-T|Crawler|Spider|Spyder|Yahoo|ia_archiver|Covario-IDS|findlinks|DataparkSearch|larbin|Mediapartners-Google|NG-Search|Snappy|Teoma|Jeeves|Charlotte|NewsGator|TinEye|Cerberian|SearchSight|Zao|Scrubby|Qseero|PycURL|Pompos|oegp|SBIder|yoogliFetchAgent|yacy|webcollage|VYU2|voyager|updated|truwoGPS|StackRambler|Sqworm|silk|semanticdiscovery|ScoutJet|Nymesis|NetResearchServer|MVAClient|mogimogi|Mnogosearch|Arachmo|Accoona|holmes|htdig|ichiro|webis|LinkWalker|lwp-trivial|facebookexternalhit/i)&&!n.match(/phone|Playstation/i)?"bot":"desktop",e=n.match(/(OS|Android|Windows Phone OS) ([0-9._]+)/),t=e?parseFloat(e[2].replace(/[_.]/,"@").replace(/[._]/g,"").replace("@","."),10):n.match(/Windows NT 6.1/)?7:n.match(/Windows NT 6.2/)?8:n.match(/Windows NT 6.1/)?9:void 0,"tablet"===i&&"windows"===a&&(i="desktop"),{name:i,version:t,os:a}},hasFlash:function(){if("undefined"!=typeof p.overrideFlashValue)return p.overrideFlashValue;var e=!1,t=p.getNavigator();try{t.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=!0)}catch(i){}var o;if(!e)try{o=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),e=!!o}catch(i){}if(!e)try{o=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),e=!!o}catch(i){}if(!e)try{o=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e=!!o}catch(i){}return"safari"===p.browser.name&&(e=!1),e},canPlayVideo:function(e){return p.canPlayHTML5Video(e)||p.canPlayFlashVideo(e)},canPlayHTML5Video:function(e){var t=[];if("string"==typeof e){if(!p.exist(p.getExtention(e),p.allowedHTML5VideoFormat))return void 0;p.canPlayThisVideo(e)&&t.push(p.canPlayThisVideo(e))}else"object"==typeof e&&p.each(e,function(){p.exist(p.getExtention(this),p.allowedHTML5VideoFormat)&&p.canPlayThisVideo(this)&&t.push(p.canPlayThisVideo(this))});if(t.length>0){for(var i=0;i<t.length;i++)if("vp9"===p.getCodec(t[i]))return t[i];return t[0]}return void 0},canPlayFlashVideo:function(e){return p.hasFlash()?"string"==typeof e?p.exist(p.getExtention(e),p.allowedFlashVideoFormat)?e:void 0:"object"==typeof e?p.each(e,function(){return p.exist(p.getExtention(this),p.allowedFlashVideoFormat)?this:void 0}):void 0:void 0},canPlayThisVideo:function(e){var t,i="video/"+p.getExtention(e),o=document.createElement("video"),n=p.getCodec(e);return t=p.html5VideoRules(p.getCodec(e)),void 0===t&&(t=o.canPlayType&&"probably"===o.canPlayType(i+(n.match(/^vp/)?";codecs="+n:""))?!0:!1),t?e:void 0},getCodec:function(e){return"webm"===p.getExtention(e)?e.match(/\.vp9\.webm/i)?"vp9":"vp8":p.getExtention(e)},getExtention:function(e){if(!e)return"";if(e.match(/dai\.ly/)||e.match(/\:\/\/www.dailymotion.com/))return"dailymotion";var t=e.replace(/\?.*?$/gi,"").match(/\.([a-zA-Z0-9]{2,5})$/);return t&&t[1]?t[1].toLowerCase():""},getFileName:function(e){if(!e)return"";var t=e.replace(/\?.*?$/gi,"").split("/").pop();return t.replace("."+t.getExtention,"")},getFileType:function(e){var t=e;switch("object"==typeof e&&(t=e[0]),p.getExtention(t)){case"swf":return"swf";case"png":case"gif":case"jpg":case"jpeg":return"image";case"flv":case"f4v":case"mp4":case"ogg":case"ogv":case"webm":case"video":case"dailymotion":return"video";case"php":case"html":return"html";default:return!1}},getVideoCodec:function(e){if(!e)return"";var t=e.replace(/\?.*?$/gi,"").match(/.{1,}\.([a-zA-Z0-9]{2,5})\.[a-zA-Z0-9]{2,5}$/);return t&&t[1]?t[1].toLowerCase():""},applyStyle:function(e,t){p.each(t,function(t){try{p.setPropertyValue(e,t,this.toString())}catch(i){}})},addBorders:function(e,t){var i={color:"#000",size:1,side:["top","right","bottom","left"],zIndex:2147483647};"static"===p.getPropertyValue(e,"position")&&(e.style.position="relative",e.style.top="0px",e.style.left="0px"),p.extend(t,i),p.log("Adding border to %s %s",e,t);var o=p.getDocument(e),n=function(i){var n=o.createElement("div");p.applyStyle(n,{width:"top"===i||"bottom"===i?"100%":t.size+"px",height:"top"===i||"bottom"===i?t.size+"px":"100%",background:t.color,position:"absolute",zIndex:t.zIndex,top:"bottom"===i?"auto":0,bottom:"bottom"===i?0:"auto",left:"right"===i?"auto":0,right:"right"===i?0:"auto"}),e.appendChild(n)};p.each(t.side,function(){n(this.toString())})},createCSS:function(e,t,i){if("string"!=typeof t){var o=[];for(var n in t)t.hasOwnProperty(n)&&o.push(n+": "+t[n]);t=o.join("; ")}try{var a=i||p.d;if(!a.styleSheets||0===a.getElementsByTagName("head").length)return;a.pmCreateCSSId||(a.pmCreateCSSId=p.random()),"undefined"==typeof p.stylesheets[a.pmCreateCSSId]&&(p.stylesheets[a.pmCreateCSSId]=!1);var r,s,l,c=p.stylesheets[a.pmCreateCSSId];if(c||(l=a.createElement("style"),l.type="text/css",a.getElementsByTagName("head")[0].appendChild(l),p.stylesheets[a.pmCreateCSSId]=l.sheet||a.styleSheets[a.styleSheets.length-1],c=p.stylesheets[a.pmCreateCSSId]),s=c.media,r=typeof s,"string"===r){for(var d=0;d<c.rules.length;d++)if(c.rules[d].selectorText.toLowerCase()===e.toLowerCase())return void(c.rules[d].style.cssText+=t);c.addRule(e,t)}else if("object"===r){for(var u=0;u<c.cssRules.length;u++)try{if(c.cssRules[u]&&c.cssRules[u].selectorText&&c.cssRules[u].selectorText.toLowerCase()===e.toLowerCase())return void(c.cssRules[u].style.cssText+=t)}catch(m){}c.insertRule(e+"{"+t+"}",0)}}catch(m){p.warn(m)}},createCSSs:function(e,t){for(var i in e)e.hasOwnProperty(i)&&p.createCSS(i,e[i],t)},loadScript:function(e){var t=e.document||p.d,i=t.createElement("script");i.src=e.uri,t.body.appendChild(i);var o=function(){return e.validate?void(e.validate()&&!i.validated?(i.validated=!0,e.callback()):setTimeout(o,50)):!0};i.addEventListener?i.addEventListener("load",o,!1):i.onreadystatechange=function(){"loaded"===this.readyState&&o()}},getPropertyValue:function(e,t){if(e){switch(t){case"scrollTop":case"scroll-top":return"BODY"===e.nodeName?p.getPageScroll()[1]:(e.documentElement||e).scrollTop||e.scrollTop}return p.w.getComputedStyle?p.w.getComputedStyle(e).getPropertyValue(p.dasherize(t)):e.currentStyle?e.currentStyle[t]:void 0}},setPropertyValue:function(e,t,i){switch(t){case"scrollTop":return"BODY"===e.nodeName&&e.ownerDocument.documentElement&&"number"==typeof e.ownerDocument.documentElement.scrollTop&&(e.ownerDocument.documentElement.scrollTop=parseInt(i,10)),e.scrollTop=parseInt(i,10)}return e.style[t]=i},returnAbsolute:function(e,t){return e.match(/^(http|\/\/)/i)?e:t+e},get:function(e,t){var i=t||p.d;return i.getElementById(e)?i.getElementById(e):document.getElementById(e)},remove:function(e){e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)},getPrevElement:function(e){for(var t=0,i=e.previousSibling;1!==i.nodeType&&20>t;)i=i.previousSibling,t++;return 1===i.nodeType?i:null},getNextElement:function(e){for(var t=0,i=e.nextSibling;1!==i.nodeType&&20>t;)i=i.nextSibling,t++;return 1===i.nodeType?i:null},handleAsset:function(t,i,o,n,a){var r,s=null,l=t.files||t.file;if(l&&""!==l||(t.backup&&""!==t.backup?(l=t.backup,s=!1):p.warn("No file provided to handleAsset for %s",o)),r=p.getFileType(t.file),s=null!==s&&""!==s?p.getExtention(t.backup):!1,p.log("Load assets for "+o+", type : "+r),t.overrideFileType&&(r=t.overrideFileType),"swf"===r)return p.hasFlash()?p.embedSWF({file:p.returnAbsolute(l,n),wrapper:i,id:o,width:t.width,height:t.height,version:t.flashversion,flashvars:t.flashvars,params:t.params,attributes:t.attributes}):t.backup?(p.log("Flash is off, switching to backup"),p.loadImage(p.returnAbsolute(t.backup,n),i,o,t.width,t.height)):(p.log("Flash is off and no backup provided"),!1);if("image"===r)return p.loadImage(p.returnAbsolute(t.file,n),i,o,t.width,t.height);if("video"===r||"dailymotion"===r){if(e.piximedia.Video&&t.handleVideo){var c=p.copy(t);return c.position=a.position,new e.piximedia.Video(i,{files:l,width:100,height:100,unit:"%",poster:t.backup,packshot:t.packshot||!1,options:c})}return"video"}if("html"===r){var d=parseFloat(t.zoom,10)||1;return t.width="number"==typeof t.width?t.width/d:t.width,t.height="number"==typeof t.height?t.height/d:t.height,p.loadIframe(p.returnAbsolute(t.file,n),i,o,t.width,t.height,a,d,t.scaleIframe,t.waitExpandToDecorate)}return!1},loadImage:function(e,t,i,o,n){if(e&&""!==e){var a=p.getDocument(t).createElement("img");return p.applyStyle(a,{width:o+(p.getUnit(o,!0)?"":"px"),height:n+(p.getUnit(n,!0)?"":"px"),display:"block",border:"0"}),a.id="pm-image-"+i,a.src=e,t.appendChild(a),a}},loadIframe:function(t,i,o,n,a,r,s,l,c){if(t&&""!==t){var d,u=!1,m=!1,h={getClickActions:{method:function(){return r?r.clickUrl:[]}},track:{method:function(e,t){return r?(p.track(r,e,o,t),{event:[e,t],success:!0}):(p.warn("pmData not here"),{event:[e,t],success:!1})}},show:{method:function(){p.getWindow(i.ownerDocument).setStage&&p.getWindow(i.ownerDocument).setStage(!1,"show")}},hide:{method:function(){p.getWindow(i.ownerDocument).setStage&&p.getWindow(i.ownerDocument).setStage(!1,"hide")}},close:{method:function(){p.getWindow(i.ownerDocument).setStage&&p.getWindow(i.ownerDocument).setStage(!1,"close")}},replayTakeover:{method:function(){r.framedAd&&r.framedAd.pam.emit("replay-takeover",{id_ad:r.adIdAlliance})}},"footer-action":{method:function(e,t){switch(e){case"expand":u.expand(r.clickUrl&&r.clickUrl[t].url?r.clickUrl[t].url:t,u.isExpanded?!0:!1);break;case"collapse":u.collapse();break;case"show":u.show();break;case"hide":u.hide()}}}};if(r)var f=0,v=setInterval(function(){e.piximedia.pmData5418_1&&e.piximedia.pmData5418_1.adIdAlliance===r.adIdAlliance&&"click"!==e.piximedia.pmData5418_1.openmode&&(u=e.piximedia.pmData5418_1,m&&d()),(u||200===f)&&clearInterval(v),f++},50);var g,y,b=!1;if(b){var w,x;w=p.w.piximedia.easyXDM,p.log("Creating RPC channel"),x=new w.Rpc({container:i,hash:!0,props:{id:"pm-fif-"+o,style:{width:n+(p.getUnit(n,!0)?"":"px"),height:a+(p.getUnit(a,!0)?"":"px")},allowfullscreen:"allowfullscreen",scrolling:"no"},onReady:function(){p.log("master is ready")},remote:t.match(/^\/\//)?p.w.location.protocol+t:t},{local:h,remote:{}}),g=i.querySelector("iframe")}else g=p.getDocument(i).createElement("iframe"),g.style.width=n+(p.getUnit(n,!0)?"":"px"),g.style.height=a+(p.getUnit(a,!0)?"":"px"),g.style.border="0",g.allowfullscreen=!0,g.scrolling="no",c?(g.src="",g.setAttribute("data-src",t)):g.src=t,i.appendChild(g);return 1!==s&&(g.style.zoom=s),d=function(){g.contentWindow.postMessage({method:"allowFooterExpand"},"*")},y=function(e){if(e.data.method&&h[e.data.method]){var t=h[e.data.method].method.apply(this,e.data.args);e.source&&e.source.postMessage({method:e.data.callback,args:t},e.origin),"getClickActions"===e.data.method&&u&&e.source&&e.source.postMessage({method:"allowFooterExpand"},e.origin),m=!0}},p.addEvent(p.getWindow(i.ownerDocument),"message",y),g.destroy=function(){p.removeEvent(p.getWindow(i.ownerDocument),"message",y)},l&&(g.style.position="relative",p.onResize(i,function(){var e=p.gbcr(i);g.style.transform="scale("+e.width/n+")",g.style.left=(e.width-n)/2+"px",g.style.top=(e.height-a)/2+"px"})),g}},insertText:function(e,t,i){var o=p.getDocument(i),n=o.createElement("div");n.appendChild(o.createTextNode(e)),p.applyStyle(n,t),i.appendChild(n)},embedSWF:function(t){function i(){var e="";return p.each(t.params,function(t){e+="<param name='"+t+"' value='"+this+"'>"}),e}function o(){var e=" ";return p.each(t.attributes,function(t){e+=" "+t+"='"+this+"'"}),e}function n(){var i="";return p.each(t.flashvars,function(o){var n=t.flashvars[o];"function"!=typeof n&&"object"!=typeof n&&(n="undefined"!=typeof n?n.toString():"undefined","string"==typeof n?(n.match(/^\/\//)&&(n=(e.piximedia.pam?e.piximedia.pam.globalOptions.protocol+":":p.w.location.protocol)+n),i+=n.match(/&/)?o+"="+encodeURIComponent(n)+"&":o+"="+n+"&"):i+=o+"="+n+"&")}),i=i.replace(/\&$/i,"")}if(!p.hasFlash())return void p.warn("Flash is not available");if(!t.file||!t.wrapper)return void p.warn("embedSWF improper arguments");var a={file:"",wrapper:{},id:"unit",width:"300",height:"250",version:"9.0.0",flashvars:p.flashdata.getDefaultFlashvars(),params:p.flashdata.getDefaultParams(),attributes:p.flashdata.getDefaultAttributes(),addWrapper:!1},r="",s=p.getDocument(t.wrapper).createElement("div");p.extend(t,a),r='<!--[if !IE]> --><object id="pmfooter-flash-'+t.id+'" type="application/x-shockwave-flash"  data="'+t.file+'" width="'+t.width+'" height="'+t.height+'"'+o()+'><!-- <![endif]--><!--[if IE]><object id="pmfooter-flash-'+t.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"  width="'+t.width+'" height="'+t.height+'"><param name="movie" value="'+t.file+'"/><!--><!--dgx--> <param name="allowscriptaccess" value="always" />'+i()+'<param name="flashvars" value="'+n()+'" /></object>',t.addWrapper?(t.wrapper.appendChild(s),s.innerHTML=r):t.wrapper.innerHTML+=r;var l=p.getDocument(t.wrapper).getElementById("pmfooter-flash-"+t.id);return l&&!l.style.width&&(l.style.width=t.width+(p.hasUnit(t.width)?"":"px")),l&&!l.style.height&&(l.style.height=t.height+(p.hasUnit(t.height)?"":"px")),p.getDocument(t.wrapper).getElementById("pmfooter-flash-"+t.id)},flashdata:{getDefaultFlashvars:function(){return{}},getDefaultParams:function(){return{loop:!0,menu:!1,quality:"high",salign:"tr",allowfullscreen:"true",wmode:"opaque",scale:"noscale"}},getDefaultAttributes:function(){return{salign:"bottom",wmode:"opaque",style:"position : relative; visibility : visible;"}}},isMobileSite:function(e){var t=e||p.d,i=p.getViewportSize(p.getWindow(t)),o=i[0]>i[1]?1:0;return screen.width&&parseInt(i[o]-screen.width,10)<10?!0:!1},canUseCSS3:function(){var e=function(){var e=document.createElement("div"),t="Khtml Ms O Moz Webkit".split(" "),i=t.length;return function(o){if(o in e.style)return!0;for(o=o.replace(/^[a-z]/,function(e){return e.toUpperCase()});i--;)if(t[i]+o in e.style)return!0;return!1}}();return e("transition")?!0:!1},fixTracking:function(e,t){if(e.tracking&&e.tracking.clickUrl)for(var i=0;i<e.tracking.clickUrl.length;i++)e.clickUrl[i]||(e.clickUrl[i]={url:""}),e.clickUrl[i].url=e.tracking.clickUrl[i];if(e.tracking&&e.tracking.pixelUrl)for(var o=0;o<e.tracking.pixelUrl.length;o++)e.pixelUrl[o]=e.tracking.pixelUrl[o];t.advertiserClickUrl&&(e.clickUrl[0].url=t.advertiserClickUrl),t.clickUrl&&(e.clickUrl[0].url=t.clickUrl+e.clickUrl[0].url),p.each(e.clickUrl,function(){this.tracking=t.getTrackedUrl("CLICK","")}),"string"==typeof e.clickUrl[0].url&&e.clickUrl.unshift("")},PixelPrinter:function(e,t){if(e){var i=e.replace(/\[timestamp\]/gi,p.random()).replace(/\[random\]/gi,p.random()).replace(/\[random_number\]/gi,p.random());if(p.log("Printing pixel : "+i),"msie"===p.browser.name&&p.browser.version<9||!document.body||!t){var o=new Image;o.src=i}else{var n=document.createElement("img");n.style.display="none",n.width=n.height=n.border="0",t.appendChild(n),n.src=i}}},getViewportSize:function(e){var t,i,o=e||p.w,n=p.getNavigator();return n.userAgent.match(/ipad/i)?(t=o.innerWidth,i=o.innerHeight):"undefined"!=typeof o.innerWidth?(t=o.innerWidth,i=o.innerHeight):"undefined"!=typeof o.document.documentElement&&"undefined"!=typeof o.document.documentElement.clientWidth&&0!==o.document.documentElement.clientWidth?(t=o.document.documentElement.clientWidth,i=o.document.documentElement.clientHeight):(t=o.document.getElementsByTagName("body")[0].clientWidth,i=o.document.getElementsByTagName("body")[0].clientHeight),[t,i]},getPageScroll:function(e){var t=e||p.w,i=t.document,o=0,n=0;return void 0!==t.self.pageYOffset?(n=t.pageYOffset,o=t.pageXOffset):i.documentElement&&void 0!==i.documentElement.scrollTop&&i.documentElement.scrollTop?(n=i.documentElement.scrollTop,o=i.documentElement.scrollLeft):i.body&&i.body.scrollTop&&(n=i.body.scrollTop,o=i.body.scrollLeft),[o,n]},setDocumentFocus:function(){p.pageActive||(p.pageActive=!0,p.fireEvent("focus-change",p.pageActive))},bindFocusEvent:function(){function t(){p.pageActive||(p.pageActive=!0,p.fireEvent("focus-change",p.pageActive)),p.removeEvent(p.d,"mousemove",t)}function i(){p.pageActive&&(p.pageActive=!1,p.fireEvent("focus-change",p.pageActive))}var o=p.getBrowser(),n=p.getDevice();("mobile"===n.name||"tablet"===n.name)&&t(),"msie"===o.name&&o.version<10?(p.mouseenter(p.d,t),p.addEvent(p.d,"focusin",function(){t()}),p.addEvent(p.d,"focusout",function(){i()})):(p.addEvent(p.w,"focus",t),p.addEvent(p.w,"blur",function(){var e=p.d.getElementsByTagName("iframe"),t=!1;p.each(e,function(){try{t=p.isMouseInside(this)}catch(e){}}),t||i(),i()}),p.mouseenter(p.d,t)),p.addEvent(p.w,"scroll",t),p.addEvent(p.d,"mousemove",t),e.piximedia.preview&&t()},bindVisibilityTracker:function(e,t){var i,o={object:null,threshold:60},n=!1;if(p.extend(e,o),!e.object&&!e.query)return void p.warn("bindVisibilityTracker %s","object missing or not an object");if(e.query&&(e.object=p.querySelector(e.query)),p.getDocument(e.object)!==p.d){var a=p.getOwnerFif(e.object);e.object=a||e.object}return i=setInterval(function(){if(p.pageActive){var o=p.gbcr(e.object),a=p.getViewportSize(),r={top:parseInt((o.height+o.top)/Math.min(o.height,a[1])*100,10),right:parseInt((o.right-a[0]-o.width)/Math.min(o.width,a[0])*-100,10),bottom:parseInt((o.bottom-a[1]-o.height)/Math.min(o.height,a[1])*-100,10),left:parseInt((o.width+o.left)/Math.min(o.width,a[0])*100,10)},s=!1;if(o.error)return clearInterval(i),void p.call(t,[!1,!0]);r.top>e.threshold&&r.right>e.threshold&&r.bottom>e.threshold&&r.left>e.threshold&&(s=!0),s!==n&&(p.call(t,[s]),n=s),e.object.isVisible=s}},500),p.bindEvent("focus-change",function(){p.pageActive?n&&(e.object.isVisible=!0,p.call(t,[!0])):(e.object.isVisible=!1,p.call(t,[!1]))}),{clear:function(){clearInterval(i)}}},bindVisibilityTrackerWithoutFocus:function(e,t){var i,o={object:null,threshold:60},n=!1;if(p.extend(e,o),!e.object)return void p.warn("bindVisibilityTracker %s","object missing or not an object");if(p.getDocument(e.object)!==p.d){var a=p.getOwnerFif(e.object);e.object=a||e.object}return i=setInterval(function(){var o=p.gbcr(e.object),a=p.getViewportSize(),r={top:parseInt((o.height+o.top)/Math.min(o.height,a[1])*100,10),right:parseInt((o.right-a[0]-o.width)/Math.min(o.width,a[0])*-100,10),bottom:parseInt((o.bottom-a[1]-o.height)/Math.min(o.height,a[1])*-100,10),left:parseInt((o.width+o.left)/Math.min(o.width,a[0])*100,10)},s=!1;return o.error?(clearInterval(i),void p.call(t,[!1,!0])):(r.top>e.threshold&&r.right>e.threshold&&r.bottom>e.threshold&&r.left>e.threshold&&(s=!0),s!==n&&(p.call(t,[s]),n=s),void(e.object.isVisibleWithoutFocus=s))},500),{clear:function(){clearInterval(i)}}},getVisibility:function(e){var t,i,o,n=p.gbcr(e);if(t=n.top>0?0:n.top,i=n.bottom>0?0:n.bottom,o=n.height+t+i,!p.pageActive)return 0;if(0>o)return 0;var a=n.top>p.getViewportSize()[1]||isNaN(o/n.height)?0:o/n.height;return a},watchVisibility:function(e){e.percents=[],e.getAverage=function(){var i=t(e.percents);return e.percents=[],i};var t=function(e){var t,i=0;return p.each(e,function(){i+=this}),t=i/e.length},i=function(){var i=0;e.objects.length&&(p.each(e.objects,function(){var e=p.getVisibility(this.dom);if(i+=e,!this.percents){var o=this;o.percents=[],o.getAverage=function(){var e=t(o.percents);return o.percents=[],e}}this.percents.push(e)}),i>1&&(i=1),e.percents.push(i))};i(),setInterval(function(){i()},500)},bindViewTracker:function(e,t){var i,o,n={object:null,threshold:60,duration:10},a=0,r=!1;return p.extend(e,n),e.object?(o=p.bindVisibilityTracker(e,function(e,t){t?clearInterval(i):r=e}),void(i=setInterval(function(){r&&a++,e.object.viewTimer=a,a===e.duration&&(clearInterval(i),o.clear(),p.call(t))},1e3))):void p.warn("bindViewTracker %s","object missing or not an object")},gettext:function(e){return e.toUpperCase()},Browser:function(e){var t=e.uri;e.uri=e.exposureTime>0?e.newtab?e.position.getTrackedUrl("AP_VISIT_NEW_TAB",e.uri):e.position.getTrackedUrl("AP_VISIT",e.uri):e.position.getTrackedUrl("CLICK",e.uri);var i=p.d.createElement("div");i.id="pm-browser",i.innerHTML="<div id='pm-browser-header'>	<div id='pm-browser-title'><span>"+(e.title||"")+"</span></div>	<div id='pm-browser-tools'>		<div id='pm-browser-facebook' class='pm-browser-tool'>			<span class='pm-browser-icon pm-browser-facebook'></span>			<span class='pm-browser-tooltip'>"+p.gettext("Partage sur Facebook")+"</span>		</div>		<div id='pm-browser-twitter' class='pm-browser-tool'>			<span class='pm-browser-icon pm-browser-twitter'></span>			<span class='pm-browser-tooltip'>"+p.gettext("Partage sur Twitter")+"</span>		</div>		<div id='pm-browser-close' class='pm-browser-tool'>			"+p.gettext("FERMER")+" X		</div>	</div></div><div id='pm-browser-iframe'><iframe width='100%' height='100%' frameborder='0'></iframe></div>",p.each(i.querySelectorAll(".pm-browser-tool"),function(){var e=this;p.addEvent(e,"mouseenter",function(){p.addClass(e,"pm-browser-tool-display-tooltip")}),p.addEvent(e,"mouseleave",function(){p.removeClass(e,"pm-browser-tool-display-tooltip")})}),p.addEvent(i.querySelector("#pm-browser-facebook"),"click",function(){
e.position.loadEvent("AP_FACEBOOK"),window.open("http://www.facebook.com/share.php?v=4&src=bm&u="+encodeURIComponent(t),"_blank")}),p.addEvent(i.querySelector("#pm-browser-twitter"),"click",function(){e.position.loadEvent("AP_TWITTER"),window.open("http://twitter.com/share?url="+t+"&text="+e.title,"_blank")}),p.addEvent(i.querySelector("#pm-browser-close"),"click",function(){e.position.loadEvent("AP_CLOSE"),a()}),p.addEvent(i.querySelector("#pm-browser-title span"),"click",function(){a(),e.newtab=!0;var t=new p.Browser(e);t.open()});var o,n=function(){if(e.newtab)window.open(e.uri,"_blank"),p.startNavigationTrackingForBrowser(e);else{if(!p.browserCSSLoaded)return setTimeout(n,100);p.d.body.appendChild(i),setTimeout(function(){p.animate(i,{height:"100%",oncompleted:function(){i.querySelector("#pm-browser-iframe iframe").src=e.uri,o=p.startNavigationTrackingForBrowser(e),p.animate(i.querySelector("#pm-browser-header"),{top:0}).play()}}).play()},0),p.setTimer("OUVERTURE",function(t,i){e.position.loadEvent("TIMETRACKER::"+t,{duration:i})}).start()}},a=function(t){o.clear&&o.clear(),p.animate(i.querySelector("#pm-browser-header"),{top:30,duration:100,oncompleted:function(){p.animate(i,{height:"0%",oncompleted:function(){p.d.body.removeChild(i),t||e.clearCallback()}}).play()}}).play()};return{open:n,close:function(){a(!0)}}},startNavigationTrackingForBrowser:function(e){var t,i=function(t){return"NAV"===t?e.newtab?"AP_NEW_TAB_NAV_":"AP_NAV_":"VISIT"===t?e.newtab?"AP_VISIT_NEW_TAB":"AP_VISIT":void 0},o=[3,5,10,15,20,30],n=!0,a=0,r=setInterval(function(){a++,-1!==o.indexOf(a)&&e.position.loadEvent(i("NAV")+a),e.exposureTime&&e.exposureTime===a&&e.position.loadEvent("CLICK")},1e3);return setTimeout(function(){n=!1},5e3),t=function(){n&&e.position.loadEvent("AP_REBOUND"),clearInterval(r),e.newtab&&(p.removeEvent(p.w,"focus",t),p.removeEvent(p.w,"focusin",t),p.removeEvent(p.w,"mousemove",t))},e.newtab&&(p.addEvent(p.w,"focus",t),p.addEvent(p.w,"focusin",t),p.addEvent(p.w,"mousemove",t)),e.exposureTime||e.position.loadEvent(i("VISIT")),{clear:t}},startViewTracking:function(t){var i={isVisible:!1};e.piximedia["view_"+t.adIdAlliance]||(e.piximedia["view_"+t.adIdAlliance]={viewableMetrics:{5:!0,10:!0,20:!0,30:!0,40:!0},viewableCount:0});var o=e.piximedia["view_"+t.adIdAlliance];return setInterval(function(){i.isVisible&&o.viewableCount++,o.viewableMetrics[o.viewableCount]&&(o.viewableMetrics[o.viewableCount]=!1,t.framedAd.loadEventOnce("AP_VIEWABLE_GLOBAL:"+o.viewableCount+"S")),"cpm"===t.saleMode&&t.minExposureTime>0&&(o.viewableCount!==t.minExposureTime||o.clickSent||(o.clickSent=!0,t.kpiPixels&&t.kpiPixels&&""!==t.kpiPixels&&t.kpiPixels.length>0&&("string"==typeof t.kpiPixels?p.PixelPrinter(t.kpiPixels):p.each(t.kpiPxels,function(){p.PixelPrinter(this.toString())})),t.position.loadEvent(t,"CLICK","cpmview")))},1e3),i},startNavigationTracking:function(e){e.positionId&&(e.framedPosition=window.piximedia.pam.positions["1x1"]);var t,i=[3,5,10,15,20,30],o=!0,n=0,a=setInterval(function(){n++,-1!==i.indexOf(n)&&p.track(e,"AP_NEW_TAB_NAV_"+n)},1e3);setTimeout(function(){o=!1},5e3),t=function(){o&&p.track(e,"AP_REBOUND"),clearInterval(a),p.removeEvent(p.w,"focus",t),p.removeEvent(p.w,"focusin",t),p.removeEvent(p.w,"mousemove",t)},p.addEvent(p.w,"focus",t),p.addEvent(p.w,"focusin",t),p.addEvent(p.w,"mousemove",t),p.track(e,"AP_VISIT_NEW_TAB")},setTimer:function(e,t){function i(){a||(a=!0,p.call(t,[e,n])),clearInterval(o),p.removeEvent(window,"beforeunload",i),p.removeEvent(window,"unload",i)}var o,n=0,a=!1,r=!1;return p.addEvent(window,"beforeunload",i),p.addEvent(window,"unload",i),{start:function(){o=setInterval(function(){p.pageActive&&!r&&n++},1e3)},pause:function(){r=!0},resume:function(){r=!1},stop:function(){i()}}},setObjectTimer:function(e,t,i){function o(){r||(r=!0,p.call(i,[e,a])),clearInterval(n),p.removeEvent(window,"beforeunload",o),p.removeEvent(window,"unload",o)}var n,a=0,r=!1,s=!1;return p.addEvent(window,"beforeunload",o),p.addEvent(window,"unload",o),p.bindVisibilityTracker({object:t}),{start:function(){n=setInterval(function(){t.isVisible&&!s&&a++},1e3)},pause:function(){s=!0},resume:function(){s=!1},stop:function(){o()}}},cookie:{set:function(e,t,i){var o=i||1,n=new Date,a=n.getTime()+864e5*parseInt(o,10);a=new Date(a),document.cookie=e+"="+t+(o?";expires="+a.toGMTString():"")+";path=/"},get:function(e){var t=document.cookie.split(";"),i="",o="",n="",a=!1;return p.each(t,function(){return i=this.split("="),o=i[0].replace(/^\s+|\s+$/g,""),o===e?(a=!0,i.length>1&&(n=window.unescape(i[1].replace(/^\s+|\s+$/g,""))),n):(i=null,void(o=""))}),a?n:null}},supportFullScreen:function(e){var t=e||p.d;return t.documentElement.requestFullscreen||t.documentElement.msRequestFullscreen||t.documentElement.mozRequestFullScreen||t.documentElement.webkitRequestFullscreen||!1},toggleFullScreen:function(e,t){var i=t||p.d;if(i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement||i.msFullscreenElement)i.exitFullscreen?i.exitFullscreen():i.msExitFullscreen?i.msExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen&&i.webkitExitFullscreen();else{if(!e)return;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},hasUnit:function(e){return parseInt(e,10).toString()!==e.toString()},getUnit:function(e,t){var i="px";return"number"==typeof e||parseFloat(e,10)===e?t?!1:i:e.replace(/^(\-|[0-9]|\.)+/i,"")},animate:function(e,t){function i(i){l.clear();var o=!1;if(null!==t.zindex&&p.applyStyle(e,{zIndex:t.zindex}),t.css){var n={},a=function(n){o||(o=!0,setTimeout(function(){o=!1},200),p.removeEvent(e,p.getPrefixedEvent("transitionend"),a),l.clear=function(){},setTimeout(function(){p.call(t.onplayed),p.call(t.oncompleted),p.call(i),n||p.call(t.onchange)},0))};p.addEvent(e,p.getPrefixedEvent("transitionend"),a),l.clear=function(){p.removeEvent(e,p.getPrefixedEvent("transitionend"),a)};var r=!0;p.each(c,function(t){var i=c[t];i.hack?(i.getHack(e,i.rule).toString()!==i.end.toString()&&(r=!1),i.hack(e,i.end+i.unit)):(p.getPropertyValue(e,i.rule).toString()!==(i.end+i.unit).toString()&&(r=!1),n[i.rule]=i.end+i.unit)}),r?a(!0):p.applyStyle(e,n)}else{m=m?c[0].length-m:0;var s=setInterval(function(){p.each(c,function(t){var i=c[t],o={};o[i.rule]=i.play_array[m]+i.unit,p.applyStyle(e,o),c[t].hack&&c[t].hack(e,i.play_array[m]+i.unit)}),m++,m===c[0].length&&(clearInterval(s),o||(o=!0,setTimeout(function(){o=!1,m=0},200),p.call(t.onplayed),p.call(t.oncompleted),l.clear=function(){}))},h);l.clear=function(){clearInterval(s)}}}function o(i){l.clear();var o=!1;if(t.css){var n={},a=function(n){o||(o=!0,setTimeout(function(){o=!1},200),p.removeEvent(e,p.getPrefixedEvent("transitionend"),a),l.clear=function(){},setTimeout(function(){p.call(t.onreversed),p.call(t.oncompleted),p.call(i),n||p.call(t.onchange)},0))};p.addEvent(e,p.getPrefixedEvent("transitionend"),a),p.each(c,function(t){var i=c[t];i.hack?i.hack(e,i.start+i.unit):n[i.rule]=i.start+i.unit}),l.clear=function(){p.removeEvent(e,p.getPrefixedEvent("transitionend"),a)},p.applyStyle(e,n)}else{m=m?c[0].length-m:0;var r=setInterval(function(){p.each(c,function(t){var i=c[t],o={};o[i.rule]=i.reverse_array[m]+i.unit,p.applyStyle(e,o),c[t].hack&&c[t].hack(e,i.reverse_array[m]+i.unit)}),m++,m===c[0].length&&(clearInterval(r),o||(o=!0,setTimeout(function(){o=!1,m=0},200),p.call(t.onreversed),p.call(t.oncompleted),l.clear=function(){}))},h);l.clear=function(){clearInterval(r)}}}if(!e||!t)return p.warn("No object or no options provided"),{play:function(){},reverse:function(){}};if(!p.isInDOM(e))return p.warn("Object is not in DOM!"),{play:function(){},reverse:function(){}};p.log("New animation on :"),p.log(e),p.log("Options :"),p.log(t);var n,a,r,s,l={},c=[],d=e.id||"sweetlib-animate-id-"+p.random(),u=p.getDocument(e),m=0,h=t.framerate||10;if(l.play=i,l.reverse=o,l.options=t,l.properties=c,l.clear=function(){},n={forcejs:!1,nojs:!1,duration:500,effect:"ease-in",css:!1,animateanyway:!1,zindex:null,oncompleted:function(){},onplayed:function(){},onreversed:function(){}},r=["forcejs","nojs","duration","effect","css","animateanyway","oncompleted","onplayed","onreversed","anchor","zindex"],s=["width","height","top","right","bottom","left"],a={opacity:{unit:"",hack:{set:function(e,t){"msie"===p.browser.name&&p.browser.version<=8?e.style.filter="alpha(opacity="+100*t+")":e.style.opacity=t},get:function(e){if("msie"===p.browser.name&&p.browser.version<=8)return p.getPropertyValue(e,"filter")&&p.getPropertyValue(e,"filter").match(/opacity=([0-9]+)/i)?parseInt(p.getPropertyValue(e,"filter").match(/opacity=([0-9]+)/i)[1],10)/100:1;var t=p.getPropertyValue(e,"opacity");return void 0===t||""===t?1:t}}},transform:{unit:"",hack:{set:function(e,t){e.style[p.getPrefixedProperty("transform")]=t},get:function(e,t){var i=p.getPropertyValue(e,p.getPrefixedProperty("transform"));if(!i||"none"===i){var o=t.match(/^[a-z]+\((.*?)\)/i)[1];i=t.replace(o,"0")}return i}}},zIndex:{unit:""},zoom:{unit:""}},p.extend(t,n),e.SweetLibAnimate)e.SweetLibAnimate.clear();else if(t.anchor)switch(e.parentNode.style.width=p.gbcr(e).width+"px",e.parentNode.style.height=p.gbcr(e).height+"px",e.style.position="absolute",t.anchor){case"TR":e.style.right="0",e.style.top="0"}if(e.SweetLibAnimate=l,(p.canUseCSS3()&&!t.forcejs||t.nojs)&&(t.css=!0),e.id||(e.id=d),p.each(t,function(i){if(!p.exist(i,r)){var o,n,l,d,u=t[i],m="",h=!1;"string"==typeof u?(u.match(/^(\+|\-)=/i)?(m=u.match(/(^.*?)[0-9]/i)[1],l=u.replace(m,"")):u.match(/^[a-z]+\(.*?\)/i)?(l=u,h=!0):l=u,h||(parseFloat(l,10).toString()!==l&&(d=p.getUnit(l)),l=parseFloat(l,10))):l=u,n=a[i]&&a[i].hack&&a[i].hack.get?a[i].hack.get(e,t[i]):parseFloat(p.getPropertyValue(e,i),10),!isNaN(n)||a[i]&&a[i].hack&&a[i].hack.get||(n="auto"===p.getPropertyValue(e,i)&&p.exist(i,s)?p.gbcr(e)[i]:0),o={rule:i,rawvalue:t[i],start:n,end:m?"+="===m?n+l:"-="===m?n-l:l:l,unit:d?d:a[i]?a[i].unit:"px",hack:a[i]&&a[i].hack&&a[i].hack.set?a[i].hack.set:!1,getHack:a[i]&&a[i].hack&&a[i].hack.get?a[i].hack.get:!1,duration:t.duration,effect:t.effect},c.push(o)}}),t.css){var f=[];p.each(c,function(t){var i=c[t],o=p.getPrefixedProperty(p.dasherize(i.rule));f.push(o+" "+i.duration/1e3+"s "+i.effect),e.style[o]=i.start+i.unit}),f=f.join(",")+" !important;";var v=p.getPropertyValue(e,"transition")||"",g=p.getPropertyValue(e,"-ms-transition")||"";v.match(/all /)&&(v=""),g.match(/all /)&&(g=""),v.match(/[a-z]/)&&(v+=", "),g.match(/[a-z]/)&&(g+=", "),p.createCSS("#"+e.id,"transition : "+v+" "+f,u),p.createCSS("#"+e.id,"-ms-transition : "+g+" "+f,u)}else p.each(c,function(e){c[e].play_array=[],c[e].reverse_array=[];for(var t=parseInt(c[e].duration/h,10),i=(c[e].end-c[e].start)/t,o=c[e].start,n=c[e].end,a=0;t>=a;a++)a===t-1?(c[e].play_array.push(n),c[e].reverse_array.push(o)):(c[e].play_array.push(o+i*a),c[e].reverse_array.push(n-i*a));c[e].length=t});return l},parseCSSInt:function(e){switch(e){case"auto":case"inherit":return 0;case"thin":return 1;case"medium":return 3;case"thick":return 5;default:return e?parseInt(e,10):0}},hasGluedText:function(e,t){t||(t=0);var i,o,n,a,r,s=e.getClientRects();if(!s)return!1;for(r=0;r<s.length;r++)(void 0===i||s[r].left<i)&&(i=s[r].left),(void 0===o||s[r].top<o)&&(o=s[r].top),(void 0===n||s[r].bottom>n)&&(n=s[r].bottom);a=n-o;var l=function(e){var n;try{if(e.innerHTML&&!e.innerHTML.match(/</)&&e.innerHTML.match(/\S/)){var r=e.getClientRects();for(n=0;n<r.length;r++)if(r[n].right-r[n].left>0&&r[n].left>=i&&r[n].left-i<=t){var s;try{s=p.getPropertyValue(e,"padding-left")}catch(c){}if(r[n].left-i+p.parseCSSInt(s)<=t&&"center"!==p.getPropertyValue(e,"text-align"))return r[n].top}}else{var d,u;for(n=0;e.children&&e.children.length&&n<e.children.length;n++){var m=e.children[n],h=p.gbcrfp(m);if(h.left>=i){var f=l(e.children[n]);f&&(!u||u>f)&&(u=f,d=m)}}if(u){var v=u-o;return.9*a>v}}return!1}catch(c){}};return l(e)},getInheritedBackground:function(e){var t=p.getPropertyValue(e,"background"),i=!1;if(!e.ownerDocument.pmDefaultBackground){var o=e.ownerDocument.createElement("div");o.style.background="none",e.ownerDocument.body.appendChild(o),e.ownerDocument.pmDefaultBackground=p.getPropertyValue(o,"background"),e.ownerDocument.body.removeChild(o)}switch(t){case"auto":return"white";case"transparent":case"inherit":case"rgba(0, 0, 0, 0)":case"":i=!0;break;default:t===e.ownerDocument.pmDefaultBackground&&(i=!0)}return i?"HTML"===e.tagName?"white":p.getInheritedBackground(e.parentNode):t},getInheritedBackgroundColor:function(e){var t=p.getPropertyValue(e,"background-color");switch(t){case"auto":return"white";case"transparent":case"inherit":case"rgba(0, 0, 0, 0)":case"":return"HTML"===e.tagName?"white":p.getInheritedBackgroundColor(e.parentNode);default:return t}},hardenWidthOfPageContainer:function(e,t){e.pmNodesWithHardenedWidth=[];for(var i=p.getAllFlowedSiblings(e),o=e.ownerDocument.pmPagecontainerHints,n="pc-only"===o["harden-width-of"],a=0;a<i.length;a++){var r=i[a];if(!n||r===e){var s=p.gbcr(r);if(!a||s.width>t){if(p.isWidthInPercentage(r)){var l=p.getPropertyValue(r,"left"),c=p.getPropertyValue(r,"margin-left"),d=p.getPropertyValue(r,"margin-right");"auto"!==l&&"0px"!==l||"0px"!==c||"0px"!==d||(r.style.margin="0 auto")}if("content-box"===p.getPropertyValue(r,"box-sizing")){var u=parseFloat(p.getPropertyValue(r,"padding-left")||0,10),m=parseFloat(p.getPropertyValue(r,"padding-right")||0,10);u>0&&(t-=u),m>0&&(t-=m)}r.style.width=t+"px",r.style.maxWidth=t+"px",e.pmNodesWithHardenedWidth.push(r)}}}if("mobile"===p.device.name){for(var h,f,v=e.ownerDocument,g=v.getElementsByTagName("meta"),y=0;y<g.length;y++)if(f=g[y],"viewport"===f.name){h=!0;break}if(!h){f=v.createElement("meta"),f.name="viewport",f.content="width="+t;var b=v.getElementsByTagName("head")[0];b&&b.appendChild(f)}}},getPositionFixedHeaders:function(e,t){e=e||p.d,t=t||{};var i=!!t.force;if(i){if(e._pmPositionFixedHeadersForcedAt){var o=Date.now()-e._pmPositionFixedHeadersForcedAt;if(200>o)return e._pmPositionFixedHeadersForcedData}}else if(e._pmPositionFixedHeaders)return e._pmPositionFixedHeaders;var n,a=[],r=p.getViewportSize(),s=0,l=p.getPageScroll(),c=l[0];do{n=!1;for(var d=0;d<p.blockContentTagNames.length;d++)for(var u=e.getElementsByTagName(p.blockContentTagNames[d]),m=0;m<u.length;m++){var h=u[m],f=p.gbcr(h);if(!(f.right<=0||f.bottom<=0)&&"0px"!==p.getPropertyValue(h,"bottom")){var v=p.getPropertyValue(h,"top"),g=p.getPropertyValue(h,"position");if(f.left+=c,f.right+=c,("fixed"===g||(g=p.getPropertyValue(h.parentNode,"position"),"fixed"===g))&&(!v||Math.abs(f.top-s)<=4&&Math.abs(parseInt(v,10)-s)<=4)&&f.width>300&&0!==f.height&&f.height<500&&Math.round(f.height)!==r[1]){if(!p.isVisible(h))continue;try{if("auto"===v)continue;if(h.className.match(/pmContainer|oPmTV_sticker|pmMarkerContainer/))continue;if("clickable"===h.id)continue;var y=parseInt(f.bottom,10);y>s&&(s=y,n=!0),a.push(h)}catch(b){}}}}}while(n);return i?(e._pmPositionFixedHeadersForcedAt=Date.now(),e._pmPositionFixedHeadersForcedData=a):e._pmPositionFixedHeaders=a,a},getHeightOfPositionFixedHeaders:function(e,t,i){var o=p.getPositionFixedHeaders(e,i);if(i=i||{},o&&o.length){var n=0,a=0;t&&(a=p.gbcr(t).top),i.fillerHeight&&(a-=i.fillerHeight);for(var r=0;r<o.length;r++){var s=p.gbcr(o[r]);s.top>=a&&(n+=s.height)}return n}},preventMarginCollapse:function(e,t){if(!e.pmPreventedMarginCollapse){var i=e.ownerDocument.createElement("div");return e.pmPreventedMarginCollapse=i,i.style.display="block",i.style.padding="0.1px 0 0 0",i.style.margin="-0.1px 0 0 0",i.style.border="none",i.className="pmPreventMarginCollapse",e.insertBefore(i,t||e.firstChild),i}},isWidthInPercentage:function(e){if(!e.parentNode)return!1;var t=p.gbcr(e.parentNode),i=e.parentNode.style.width,o=p.getPropertyValue(e,"width");e.parentNode.style.width=t.width+2+"px";var n=p.getPropertyValue(e,"width");e.parentNode.style.width=i,e.parentNode.style.width=t.width-2+"px";var a=p.getPropertyValue(e,"width");return e.parentNode.style.width=i,o!==n&&o!==a},fixPageContainerForWallpaper:function u(e){if(e){e.id||(e.id="pmPageContainer");var t=e.ownerDocument.pmPagecontainerHints||p.getPageContainerHints()||{},i=t["enable-fix-pc-static"]===!1?!1:!0;if(t.cssFixForPageContainerAndWallpaper&&p.applyStyle(e,t.cssFixForPageContainerAndWallpaper),t.css&&p.createCSSs(t.css),!t.noDefaultFixPageContainerForWallpaper){u.store=u.store||{};var o=u.store[e.id]=u.store[e.id]||{},n=p.getPropertyValue(e,"left");if(("0px"===n||"0"===n||"auto"===n)&&(n=0),e&&!n){var a;if("object"==typeof t.width&&t.width.query)a=o.pageContainerOriginalWidth=p.getPageContainerWidth(e);else if(o.pageContainerOriginalWidth)a=o.pageContainerOriginalWidth;else if(e.pmPCWidth)a=o.pageContainerOriginalWidth=e.pmPCWidth;else{if(a=p.getPageContainerWidth(e),p.hasGluedText(e)){p.log("Text is glued to the PC, can we add some bonus?"),a+=p.pcBonusWidthWhenGluedText;var r=e.style.width;e.style.width=a+"px",p.hasGluedText(e)&&(p.log("We cannot enlarge the PC, maybe we can add some padding, though"),a-=p.pcBonusWidthWhenGluedText,e.style.width=r,e.style.paddingLeft=p.parseCSSInt(p.getPropertyValue(e,"padding-left"))+p.pcBonusWidthWhenGluedText/2+"px",e.style.paddingRight=p.parseCSSInt(p.getPropertyValue(e,"padding-right"))+p.pcBonusWidthWhenGluedText/2+"px")}try{var s=p.gbcrfp(e.parentNode),l=p.parseCSSInt(p.getPropertyValue(e.parentNode,"padding-left")),c=p.parseCSSInt(p.getPropertyValue(e.parentNode,"padding-right")),d=p.parseCSSInt(p.getPropertyValue(e,"border-left-width")),m=p.parseCSSInt(p.getPropertyValue(e,"border-right-width"));a-=d,a-=m;var h=s.width-l-c;if((a===h||a+d+m===h)&&p.isWidthInPercentage(e)&&p.isWidthInPercentage(e.parentNode)){var f=function(e){for(var t=null,i=0;e.children&&e.children.length&&i<e.children.length;i++){var o=e.children[i],n=p.gbcrfp(o),a=n.width,r=parseInt(p.getPropertyValue(o,"max-width"),10)||0;r&&r===Math.round(h)&&(t=Math.max(t,Math.min(h,r))),a>=h&&(a=f(o)),h>a&&a>t&&n.height>50&&(t=a)}return t},v=f(e);if(v){v>a&&(a=v);for(var g=!0,y=e.parentNode;y&&"BODY"!==y.tagName;y=y.parentNode)if(!p.isWidthInPercentage(y)){g=!1;break}g&&(a=v)}}o.pageContainerOriginalWidth=a}catch(b){}}e.style.position="relative",p.createCSS("#"+e.id,"position: relative !important",e.ownerDocument),a&&p.hardenWidthOfPageContainer(e,a);var w=p.getPropertyValue(e,"float"),x=p.getPropertyValue(e,"display");"left"===w||"right"===w||"inline-block"===x?(e.style.left="50%",e.style.marginLeft=-(a/2)+"px"):e.style.marginLeft=e.style.marginRight="auto",o.preventMarginCollapse||(o.preventMarginCollapse=p.preventMarginCollapse(e));for(var k=p.getAllFlowedSiblings(e),S=0;S<k.length;S++){var I=k[S];try{var P=p.getPropertyValue(I,"background-image");if(!P.match(/url/)){var E=p.getInheritedBackgroundColor(I);I.style.backgroundColor=E}}catch(b){}}for(var A=p.getPositionFixedHeaders(e.ownerDocument),C=0;C<A.length;C++){var b=A[C];try{var T=p.getPropertyValue(b,"top");T&&0!==parseInt(T,10)||(b.style.top="0px")}catch(_){}}for(var O=!1,N=e.parentNode.children||[],F=!1,D=0;D<N.length;D++){var M=N[D];if(M!==e){if(F&&"static"===p.getPropertyValue(M,"position")){var L=p.gbcr(M);if(L.width>1&&L.height>1){O=!0;break}}}else F=!0}for(var R=[],j=0;j<k.length;j++){var B=k[j];if("static"===p.getPropertyValue(B,"position")){var V=p.gbcr(B);V.width>1&&V.height>1&&(O=!0,R.push(B))}}if(O){if("android"===p.device.os)for(var W=e.parentNode.children||[],q=0;q<W.length;q++){var U=W[q];"static"===p.getPropertyValue(U,"position")&&(U.className+=" pmFixPCChildStatic")}else"BODY"!==e.parentNode.tagName&&(i&&(e.parentNode.className+=" pmFixPCStatic"),p.createCSS(".pmFixPCStatic > *","transform: translateZ(0.001px)"),p.createCSS(".pmFixPCStatic > .pmBodyPosition","transform: none"));for(var H=0;H<R.length;H++)R[H].className+=" pmFixPCChildStatic";p.createCSS(".pmFixPCChildStatic","position: relative; float: none !important")}}p.fixSite(e)}}},getHeightOfNextSiblings:function(e){for(var t=0;e&&(e=e.nextSibling);)if(1===e.nodeType)switch(p.getPropertyValue(e,"position")){case"absolute":case"fixed":break;default:var i=p.gbcrfp(e);i.height&&(t+=i.height)}return t},getAllFlowedSiblings:function m(e,t){t=t||{};var i,o=function(e){var t=p.gbcrfp(e);if(!t.height)for(var i=0;e.children&&e.children.length&&i<e.children.length;i++){var o=e.children[i],n=p.gbcrfp(o);if(n.height)return n}return t},n=[e],a=o(e),r=a.bottom,s=a.width,c=p.isWidthInPercentage(e)||a.width===p.getViewportSize()[0],d=p.getViewportSize()[0],u=!1,h=e.pmPCHintedAbove;m.revision=m.revision||0;for(var f=m.revision++;;){var v=0;do{i=!1;e:for(var g=e.parentNode.firstChild;g;g=g.nextSibling)if(1===g.nodeType)switch(p.getPropertyValue(g,"position")){case"absolute":case"fixed":break;default:var y=o(g);if(c&&y.height&&y.width<s)break e;if(c&&y.height&&s===d&&y.width>s)break e;if(e.pmPCHintedAbove)y.top>=a.top+1&&n.push(g);else if(Math.abs(y.top-r)<.5&&y.height){if(u&&y.width-l>s)break e;if(g.pmGetAllFlowedSiblingsRevision!==f){g.pmGetAllFlowedSiblingsRevision=f,n.push(g),r=y.bottom,i=!0;break e}}}}while(i&&!h&&v++<300);if(i||h)break;if(t.lookupParent===!1)break;if(e=e.parentNode,u=!0,!e||"HTML"===e.tagName)break}return n},getAllFlowedSiblingsHeight:function(e){for(var t=p.getAllFlowedSiblings(e),i=0,o=0;o<t.length;o++)i+=p.gbcr(t[o]).height||0;return i},setBodyBackgroundColor:function(e){if(e=e||{},void 0!==e.color){for(var t=e.hints||p.getPageContainerHints()||{},i=(t.bodyBackgroundSelector||"body").split(","),o=[],n=p.d,a=0;a<i.length;a++)o.push("html.pmBodyBackground "+i[a]);null!==e.color?(p.createCSS(o.join(","),"background-color: "+e.color+" !important",n),n.body.parentNode.className.match("pmBodyBackground")||(n.body.parentNode.className+=" pmBodyBackground")):n.body.parentNode.className=n.body.parentNode.className.replace(/ pmBodyBackground/g,"")}},moveTopOfPageContainer:function h(e,t,i){if(e){e.id||(e.id="pmPageContainer"),i=i||{},h.store=h.store||{};var o=h.store[e.id]=h.store[e.id]||{};if(o.movedTopOfPageContainer=!0,o.oldPageContainerMetrics=o.oldPageContainerMetrics||{},!o.filler){var n=e.ownerDocument.getElementById("pmFiller");if(n)o.filler=n;else{var a=function(e){for(var t,i,o=p.gbcr(e).top,n=e.children||[],r=0;r<n.length;r++){var s=n[r];if("absolute"!==p.getPropertyValue(s,"position")){var l=parseFloat(p.getPropertyValue(s,"margin-top"),10),c=p.gbcr(s).top;Math.abs(c-l-o)<.5>0&&(!t||l>t)&&(t=l,i=s)}if(s.children&&s.children.length){var d=a(s),u=d.marginTop;u>0&&(!t||u>t)&&(t=u,i=d.element)}}return{marginTop:t,element:i}},r=a(e)||{},s=r.marginTop,l=r.element;o.filler=e.ownerDocument.createElement("span"),o.filler.id="pmFiller",o.filler.style.margin=0,o.filler.style.padding=0,o.filler.style.border="none",o.filler.style.display="block";var c=p.getOverflowYScroll(e),d=!c,u=p.getHeightOfPositionFixedHeaders(e.ownerDocument,e);s&&u>=s&&(d&&(o.filler.style.marginTop=s+"px"),l&&l.style&&(l.style.marginTop="0")),e.parentNode.insertBefore(o.filler,e);var m=p.gbcrfp(o.filler),f=m.top;if(u&&u>f){var v=parseInt(o.filler.style.marginTop,10)||0;if(d){o.filler.style.marginTop=v+(u-f)+"px";var g=p.gbcrfp(o.filler);g.top<u&&(o.filler.style.marginTop=v+"px")}}}}return i.duration?(void 0===o.filler.style.height&&(o.filler.style.height=0),p.animate(o.filler,{height:t+"px",duration:i.duration}).play()):o.filler.style.height=t+"px",o.filler.style.width=0,o.filler}},getVisiblePreviousSiblingUpwards:function(e){if(e||(e=this.getPageContainer())){var t=p.gbcrfp(e);if(t&&t.top){var i=function(e){for(var o=e.previousSibling;o;o=o.previousSibling)try{var n=p.gbcrfp(o),a=o.id.toString().match("ad")||o.id.toString().match("728x90")||o.className.match("728x90"),r=a&&n.height<20;if(n&&n.height&&!r&&n.width&&n.bottom>=0&&n.bottom<=t.top&&n.width>100)return o}catch(s){}return e=e.parentNode,"BODY"===e.tagName?void 0:i(e)};return i(e)}}},fixSite:function(e){if(p.log("Applying global fixes"),e){var t=e.ownerDocument;p.createCSS("body","margin: 0; width: 100% !important;",t);var i=p.gbcrfp(e),o=e.id;if(i.height){var n=p.parseCSSInt(p.getPropertyValue(e,"margin-top")),a=p.getVisiblePreviousSiblingUpwards(e),r=0;if(a){var s=p.gbcrfp(a);s&&(r=Math.max(0,i.top-s.bottom))}else r=i.top;r&&(o=e.id,o||(o="pmPageContainer",e.id=o),p.createCSS("body #"+o,"top: "+p.parseCSSInt(p.getPropertyValue(e,"top"))-r+"px",t),"static"===p.getPropertyValue(e,"position")&&p.createCSS("body #"+o,"position: relative",t),i.top-=r);var l,c=i.top,d=0,u=p.parseCSSInt(p.getPropertyValue(e,"margin-top")),m=p.parseCSSInt(p.getPropertyValue(e,"padding-top"));u>0&&(o||(o=e.id="pmPageContainer"),u-r>=0?p.hasGluedText(e)?(p.log("Merging page container margin-top: "+u+"px + paddingTop: "+m+"px"),p.createCSS("body #"+o,"margin-top: 0;	padding-top: "+(u+m)+"px !important",t)):(p.log("Dropping margin-top above page container: "+u+"px + paddingTop: "+m+"px"),p.createCSS("body #"+o,"margin-top: 0 !important",t)):r>0&&(p.log("Dropping margin-top above page container and below content: "+u+"px + paddingTop: "+m+"px"),p.createCSS("body #"+o,"margin-top: 0 !important",t)));for(var h=p.getPositionFixedHeaders(t),f=0;f<h.length;f++){var v=h[f];i=p.gbcrfp(v),i.height&&(d+=i.height)}if(c-n>=d){var g=p.getInheritedBackground(e),y=p.getInheritedBackground(e.parentNode);if(50>r&&g!==y)for(var b=p.gbcrfp(e).top,w=e.parentNode;"HTML"!==w.tagName&&p.gbcrfp(w).top===b;w=w.parentNode)if(parseInt(p.getPropertyValue(w,"margin-top"),10)===r){w.id||(w.id="pmPageContainerParentMarginZero"),p.createCSS("body #"+w.id,"margin-top: 0 !important",w.ownerDocument);break}}if(l=c-n,d>l){var x=d-l;l+=x}p.log("positionFixedHeaderHeight="+d),p.log("pageContainerTop="+c),p.log("pageContainerMarginTop="+n),p.log("setGoToTheTop="+l),l&&p.createCSS("body .pmGoToTheTop","top: "+l+"px !important;",t);var k=function(e){var t=p.gbcrfp(e);if(t.width&&t.height&&t.bottom<=c){p.log("Fixing background for header: ",e);var i=p.getInheritedBackgroundColor(e);e.style.backgroundColor=i}},S=function(e){for(var t=e.previousSibling;t;t=t.previousSibling)k(t);e.parentNode&&"HTML"!==e.parentNode.tagName&&S(e.parentNode)};S(e)}}},isInDOM:function(e){for(var t=e,i=0;100>i;i++,t=t.parentNode){if(!t.parentNode)return!1;if("HTML"===t.parentNode.tagName)return!0}},isVisible:function(e){var t=e.ownerDocument,i=function(e,i){return window.getComputedStyle?t.defaultView.getComputedStyle(e,null)[i]:e.currentStyle?e.currentStyle[i]:void 0},o=function(e){for(;e=e.parentNode;)if(e===t)return!0;return!1},n=function(e,t,a,r,s,l,c){var d=e.parentNode,p=2;return o(e)?9===d.nodeType?!0:"0"===i(e,"opacity")||"none"===i(e,"display")||"hidden"===i(e,"visibility")?!1:(("undefined"==typeof t||"undefined"==typeof a||"undefined"==typeof r||"undefined"==typeof s||"undefined"==typeof l||"undefined"==typeof c)&&(t=e.offsetTop,s=e.offsetLeft,r=t+e.offsetHeight,a=s+e.offsetWidth,l=e.offsetWidth,c=e.offsetHeight),d?"hidden"!==i(d,"overflow")&&"scroll"!==i(d,"overflow")||!(s+p>d.offsetWidth+d.scrollLeft||s+l-p<d.scrollLeft||t+p>d.offsetHeight+d.scrollTop||t+c-p<d.scrollTop)?(e.offsetParent===d&&(s+=d.offsetLeft,t+=d.offsetTop),n(d,t,a,r,s,l,c)):!1:!0):!1};return n(e)},breakOverflow:function(e,t){p.breakOverflowCalledOnce||(p.breakOverflowCalledOnce=!0,p.createCSS("body .pixi-break-overflow","overflow : visible !important;"));for(var i=p.getDocument(e).body,o=e.parentNode;o!==i;){var n="hidden"===p.getPropertyValue(o,"overflow"),a=!1;(o.className||"").match(/pmMarkerContainer/)||n&&(t.width&&p.gbcr(o).width<t.width&&(a=!0),t.height&&p.gbcr(o).height<t.height&&(a=!0),a?p.addClass(o,"pixi-break-overflow"):p.removeClass(o,"pixi-break-overflow")),o=o.parentNode}},coolDown:function(e,t){"function"==typeof e&&(t=e,e={});var i,o,n=e.interval||20,a=e.interval||21,r=e.duration||2e3,s=new Date,l=!1,c=0,d=function(){return l?void 0:(clearTimeout(i),clearInterval(o),l=!0,t())};i=setTimeout(d,r),o=setInterval(function(){var e=new Date;return c++,e.getTime()-s.getTime()<=a?d():void(s=e)},n)},querySelector:function(e,t){if(t=t||p.d,t.querySelector)return t.querySelector(e);var i=p.querySelectorAll(e);return i&&i.length?i[0]:null},querySelectorAll:function(e,t){if(t=t||p.d,t.querySelectorAll)return t.querySelectorAll(e);var i,o=t.createElement("style"),n=[];for(t.documentElement.firstChild.appendChild(o),t._qsa=[],o.styleSheet.cssText=e+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),o.parentNode.removeChild(o);t._qsa.length;)i=t._qsa.shift(),i.style.removeAttribute("x-qsa"),n.push(i);return t._qsa=null,n},getPageContainerHints:function f(){var e;if(f.cache)return f.cache;try{var t=p.w.localStorage.getItem("pmCustomFields");if(t){var i=JSON.parse(t);i.pageContainerHints&&(e=i.pageContainerHints)}}catch(o){}if(!e&&p.w.piximedia&&p.w.piximedia._&&p.w.piximedia._.pams)for(var n in p.w.piximedia._.pams)if(p.w.piximedia._.pams.hasOwnProperty(n)){var a=p.w.piximedia._.pams[n];if(a&&a.globalOptions&&a.globalOptions.pageContainerHints){e=a.globalOptions.pageContainerHints;break}}if(e){for(var r in e)e.hasOwnProperty(r)&&null===e[r]&&delete e[r];return f.cache=e,e}},getPageContainerWidth:function(e,t){t=t||{};var i=t.hints||p.getPageContainerHints()||{};if(void 0!==e.pmPCWidth&&("object"!=typeof i.width||!i.width.query))return e.pmPCWidth;var o;if("object"==typeof i.width){var n=p.querySelector(i.width.query);n?o=p.gbcr(n).width:void 0!==i.width.defaults&&(o=parseFloat(i.width.defaults,10))}void 0===o&&(o=void 0!==i.width?parseFloat(i.width,10):void 0);var a=p.getAllFlowedSiblings(e);if(void 0===o){o=p.gbcr(e).width;for(var r=0,s=0;s<a.length;s++){var c=a[s],d=p.gbcr(c).width,u=parseFloat(p.getPropertyValue(c,"padding-left"),10),m=parseFloat(p.getPropertyValue(c,"padding-right"),10);d=d-(isNaN(u)?0:u)-(isNaN(m)?0:m),r=o+l>d?Math.max(r,Math.min(o+l,d)):(980===d||990===d||1e3===d||1200===d)&&o+5*l>d?Math.max(r,Math.min(o+5*l,d)):Math.max(r,o)}r>o&&(o=r)}return e.pmPCWidth=o,o},loadPageContainer:function v(e,t){"function"!=typeof e||t||(t=e,e={}),e=e||{};var i=e.hints||p.getPageContainerHints()||{},o=e.document||p.d;o.pmPagecontainerHints||(o.pmPagecontainerHints=i);var n=function(e){for(var n=p.getPageContainerWidth(e),a=p.getAllFlowedSiblings(e),r=0,s=0;s<a.length;s++){var l=p.gbcr(a[s]);l.height&&(r+=l.height)}for(var c=0,d=0;d<a.length;d++){var u=a[d];if(!p.isWidthInPercentage(u)){var m=p.gbcr(u);c+=m.height,!i.width&&m.width>n&&m.height&&.3*r>c&&(n=m.width)}}o.pmPageContainerSL=e;try{var h=p.getWindow(o);if(h.localStorage&&h.localStorage.getItem&&h.localStorage.setItem&&o.querySelectorAll){e.pmRandom=Math.random().toString();var f,g=h.localStorage.getItem("pmpccache"),y=h.localStorage.getItem("pmpccache_stats"),b=y?JSON.parse(y):{creation_date:Date.now(),counters:{}};if(g){var w=!1,x=JSON.parse(g)||{};if(x){if(Date.now()-x.date<864e5){var k=o.querySelector(x.query);w=k&&k.pmRandom===e.pmRandom}f=w?"match":"did-not-match"}else f="too-old"}else f="not-in-cache";f&&(h.piximedia&&h.piximedia.pam&&f!==v.lastStatus&&(v.lastStatus=f,h.piximedia.pam.loadEvent("JS:PC_CACHE",void 0,void 0,{detail:f})),b.counters[f]=(b.counters[f]||0)+1);var S=e.tagName;e.id&&!e.id.match(/^pm/)&&(S+="#"+e.id),e.className&&(S+="."+e.className.split(/\s+/).join("."));var I=o.querySelectorAll(S);if(1===I.length){var P=I[0];P.pmRandom===e.pmRandom&&h.localStorage.setItem("pmpccache",JSON.stringify({date:Date.now(),version:1,query:S}))}h.localStorage.setItem("pmpccache_stats",JSON.stringify(b))}}catch(E){}return t(e,{width:n})},a=function(e){e=e||{};var a=p.getPageContainer(o,{lastChance:e.lastChance});switch(i.heuristics){case"above":for(var r,s,l=0;o.body.children&&o.body.children.length&&l<o.body.children.length;l++){var c=o.body.children[l],d=p.gbcrfp(c);p.innerHTML(c).length>100&&d.height>1&&d.top>=0&&(void 0===r||d.top<r)&&(r=d.top,s=c)}return o.pmPageContainerSL=s,s.pmPCWidth=p.getPageContainerWidth(a),s.pmPCHintedAbove=!0,t(s,{width:s.pmPCWidth});case"below":return n(a);default:return n(a)}};p.contentload(function(){
if(i.query){var e=!1;p.domload(function(){setTimeout(function(){e=!0},2e3)},o);var t=function(){var r=p.querySelector(i.query,o);return r?n(r):e?a({lastChance:!0}):setTimeout(t,50)};t()}else p.domload(function(){return a()},o)})},innerHTML:function(e){try{return e.innerHTML}catch(t){try{return e.innerText}catch(i){return""}}},getOverflowYScroll:function(e){for(var t=0;e&&"HTML"!==e.tagName&&50>t;e=e.parentNode,t++)if("scroll"===p.getPropertyValue(e,"overflow-y"))return e;return void 0},getPageContainer:function(e,t){t=t||{},e=e||p.d;var i=e.pmPagecontainerHints||p.getPageContainerHints()||{};if(i.query){var o=p.querySelector(i.query,e);if(!t.lastChance||o)return o}if(e.pmPageContainerSL&&p.isInDOM(e.pmPageContainerSL))return e.pmPageContainerSL;for(var n,a,r=p.innerHTML,s=r(e.body).length,l=0,c=e.getElementsByTagName("script"),d=0;d<c.length;d++)try{l+=r(c[d]).length}catch(u){}s=r(e.body).length;var m,h=0,f=p.getViewportSize()[0],v=p.gbcr(e.body),g=function(e){var t,i=e.clientWidth,o=e.clientHeight,n=p.gbcrfp(e);return n&&(t=n.top),t>=0&&2>t&&o>0&&i>0&&100>o&&((e.id||"").toString().match(/cookie/i)||(e.className||"").match(/cookie/i)||(r(e)||"").match(/cookie/i))?("absolute"!==e.style.position&&"fixed"!==e.style.position&&(h=((n||{}).top||0)+o),!0):void 0},y=function(e,t){var i=e.clientWidth;t=t||p.getAllFlowedSiblings(e);for(var o=0,n=0;n<t.length;n++)o+=p.gbcr(t[n]).height;if(i===f){var a=m(e);if(a){var r=p.gbcr(a);if(r.width&&r.width<i)return a===e?e:y(a)}}var s=p.gbcrfp(t[0]);if(p.isWidthInPercentage(e))for(var l=0;l<t.length;l++){var c=p.gbcrfp(t[l]);if(c.top-s.top<500&&c.height>10){var d=m(t[l]);return d?d===e?e:y(d):t[l]===e?e:y(t[l])}}return e};m=function(e){for(var t=0;e.children&&e.children.length&&t<e.children.length;t++){var i=e.children[t];if(!g(i)){for(var o=0;o<p.blockContentTagNames.length;o++)if(i.tagName===p.blockContentTagNames[o]){var c,d=i.clientWidth,u=p.gbcrfp(i);if(u&&(c=u.top),0!==i.id.toString().search("pm")&&d>=Math.min(.5*v.width,890)&&u.height>0&&"fixed"!==i.style.position&&p.isVisible(i)&&i.children&&i.children.length>0){for(var f=p.getAllFlowedSiblings(i,{lookupParent:!1}),b=0,w=0;w<f.length;w++)b+=p.gbcr(f[w]).height;if(b>400){for(var x=0,k=0;k<f.length;k++)x+=r(f[k]).length;if(x>.05*(s-l)){if(!(h>=c)||p.getOverflowYScroll(i))return y(i,f);var S=m(i);if(S)return S;n=S||i}else n||(n=i),c>0&&!a&&(a=i)}}break}if(i.children&&i.children.length){var I=m(i);if(I)return I}}}};var b=m(e.body);return!b&&a&&(b=a),!b&&n&&(b=n),e.pmPageContainerSL=b,b},addOverlay:function(e){var t={root:p.d.body,fade:!1,timeout:0,onclick:null,before:!0,css:{width:"100%",height:"100%",background:"#000",opacity:.6,position:"fixed",top:"0",left:"0",display:"none",zIndex:2147483392}};e||(e={}),p.extend(e,t),e.onclick&&(e.css.cursor="pointer");var i,o=p.getDocument(e.root).createElement("div");return p.applyStyle(o,e.css),e.before?e.root.insertBefore(o,e.root.firstChild):e.root.appendChild(o),e.onclick&&p.addEvent(o,"click",e.onclick),{show:function(){e.fade&&p.applyStyle(o,{display:"block",opacity:0}),i=setTimeout(function(){e.fade?p.animate(o,{opacity:e.css.opacity}).play():p.applyStyle(o,{display:"block"})},e.timeout)},hide:function(){clearTimeout(i),e.fade?p.animate(o,{opacity:0,oncompleted:function(){p.applyStyle(o,{display:"none"})}}).play():p.applyStyle(o,{display:"none"})}}},makeUnderlay:function(e,t){e=e||{};var i=e.opacityDuration||250,o=top.document,n=o.createElement("div");n.id="pmUnderlay",n.className="pmUnderlay",n.style.position="fixed",t&&(n.style.cursor="pointer"),n.style.background="#222",n.style.border="3px solid #555",n.style.left=0,n.style.top=0,n.style.width="100%",n.style.height="100%",n.style.zIndex=s,n.style.opacity=0,p.addEvent(n,"click",t),o.body.appendChild(n);var a=p.animate(n,{duration:i,opacity:1});return a.play(),{remove:function(e){e=e||{},void 0!==e.duration&&(a.duration=e.duration),a.reverse(function(){n.parentNode.removeChild(n)})}}},getScrollbarWidth:function g(e){if(!e&&void 0!==g.cache)return g.cache;var t=(e||p.d.body).ownerDocument.createElement("div");t.style.width="100px",t.style.height="100px",t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.margin="0",t.style.padding="0",(e||p.d.body).appendChild(t);var i=t.offsetWidth-t.clientWidth;return(e||p.d.body).removeChild(t),e||(g.cache=i),i},makeClose:function(e,t){e=e||{};var i=e.opacityDuration||250,o=top.document,n=o.createElement("div");n.style.position=e.position||"fixed",n.style.background="#555",n.style.border="3px solid #555",n.style.padding=e.padding,n.style.left=0,n.style.fontSize="18pt",n.style.color="white",n.style.top=e.top||0,n.style.cursor="pointer",n.style.textDecoration=e.textDecoration,n.innerHTML=e.text||"X",n.style.zIndex=p.LAYER_CLOSE,n.style.boxShadow="grey 2px 0px 10px",n.style.opacity=0,p.addEvent(n,"click",t),n.style.transition="all "+i/1e3+"s",o.body.appendChild(n);var a=p.animate(n,{duration:i,opacity:1});return a.play(),{element:n,remove:function(e){e=e||{},void 0!==e.duration&&(a.duration=e.duration),a.reverse(function(){n.parentNode.removeChild(n)})}}},enableResponsiveEventsForPageContainer:function(e,t){var i=p.getPageContainerHints()||{},o=p.gbcr(e).width;if("object"==typeof i.width&&i.width.query){var n=function(){var o=p.querySelector(i.width.query);return o?void setInterval(function(){for(var i=p.gbcr(e).width,n=e.pmNodesWithHardenedWidth||[],a=[],r=0;r<n.length;r++){var s=n[r];a[r]={width:s.style.width,maxWidth:s.style.maxWidth},s.style.width="",s.style.maxWidth=""}for(var l=p.gbcr(o).width,c=0;c<n.length;c++){var d=n[c];d.style.width=a[c].width,d.style.maxWidth=a[c].maxWidth}if(l!==i){p.hardenWidthOfPageContainer(e,l);var u={pageContainerWidth:l};t(u)}},500):setTimeout(n,100)};n()}p.onResize(e,function(){e.ownerDocument.body.className.match(/pmBodyAnimation/)||p.loadPageContainer({document:e.ownerDocument},function(e,i){var n=i.width;if(!(Math.abs(o-n)<.5)){o=n;var a={pageContainerWidth:n};t(a)}})})}};p.VERSION=i,p.LAYER_CLOSE=n,p.LAYER_HIGHEST=a,p.LAYER_ALPHA=r,p.LAYER_UNDERLAY=s,e.piximedia["SweetLib"+i]=p,(!e.piximedia.SweetLib||e.piximedia.SweetLib.VERSION<i)&&(e.piximedia.SweetLib=p,p.start()),e.piximedia.libraryLoader&&e.piximedia.libraryLoader["sweetlib.js"]&&(e.piximedia.libraryLoader["sweetlib.js"].complete=!0)}(),function(){var e=window,t="sweetlib.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var o=0;o<i.onloads.length;o++)i.onloads[o]()}(),window.piximedia.libraryLoader["sweetlib.js"]=window.piximedia.libraryLoader["sweetlib.js"]||{},window.piximedia.libraryLoader["sweetlib.js"].loaded=!0,!function(e){"use strict";function t(t,i){function o(){L=ne("div"),L.id="pm-video-wrapper-"+J,L.className="pm-video-wrapper",V.applyStyle(L,{position:"relative",width:i.width+i.unit,height:i.height+i.unit,display:"block",background:i.options.transparent?"transparent":i.options.background,overflow:"hidden",textAlign:"left"}),t.appendChild(L)}function n(){L.parentNode===t&&t.removeChild(L),V.call(i.options.onerror)}function a(){function e(e){a?t(e):r.push(e)}function t(e){var t=V.getWindow(V.getDocument(L));t.sendMessage(e)}var o,n=D.split("?").shift().split("/").pop().split("_").shift(),a=!1,r=[];W("Load Dailymotion Video : %s",n),o=ne("iframe"),o.id="pm-video-"+J,o.paused=!0,o.src="//www.dailymotion.com/embed/video/"+n+"?chromeless=1&html=1&wmode=transparent&api=postMessage&muted="+(i.options.muted?1:0)+"&start="+i.options.startTime+"&id="+J+"&autoplay="+(i.options.autoplay?"1":"0"),V.applyStyle(o,{width:"100%",height:"100%",border:0,position:"absolute"}),R={volume:i.options.muted?0:1,currentTime:0,paused:!1,play:function(t){"undefined"!=typeof t&&R.seek(t),e("play")},seek:function(t){0===t&&(t=.1),e("seek="+t)},pause:function(){e("pause")},mute:function(){e("mute")},unmute:function(){e("unmute")},eventList:{},addEventListener:function(e,t){R.eventList[e]||(R.eventList[e]=[]),R.eventList[e].push(t)},removeEventListener:function(e,t){R.eventList[e]&&-1!==R.eventList[e].indexOf(t)&&R.eventList[e].splice(R.eventList[e].indexOf(t),1)},triggerEnd:function(){d()},dailymotion:!0};var s=function(e){if(e.data.match(/event=(.*?)&/)&&e.data.match(/&id=/)&&parseFloat(e.data.match(/&id=(.*?)$/)[1],10)===J){var o=e.data.match(/event=(.*?)&/)[1];if("apiready"===o){if(a=!0,r.length>0)for(var n=0;n<r.length;n++)t(r[n]);var s=i.options.muted?0:1,l=0;setInterval(function(){R.volume!==s&&(s=R.volume,0===R.volume?R.mute():1===R.volume&&R.unmute()),Math.abs(R.currentTime-R.duration)<1&&l===R.currentTime&&R.triggerEnd(),l=R.currentTime},200),x()}else"timeupdate"===o?R.currentTime=parseFloat(e.data.match(/time=(.*?)(&|$)/)[1],10):"playing"===o?R.paused=!1:"durationchange"===o?R.duration=parseFloat(e.data.match(/duration=(.*?)(&|$)/)[1],10):"pause"===o?R.paused=!0:"ended"===o?d():"ad_end"===o&&R.play();if(("seeked"===o||"playing"===o)&&(o="canplay"),R.eventList[o]&&R.eventList[o].length>0)for(var c=0;c<R.eventList[o].length;c++)R.eventList[o][c]()}};V.addEvent(V.getWindow(L.ownerDocument),"message",s),L.appendChild(o)}function r(){W("Load HTML5 Video : %s",D),R=ne("video"),R.id="pm-video-"+J,R.src=D,R.autoplay=!1,R.volume=i.options.muted?0:i.options.maxVol,V.applyStyle(R,{width:"100%",height:"100%",position:"absolute",background:"transparent"}),"desktop"!==V.device.name&&i.poster?R.poster=V.returnAbsolute(i.poster,i.baseUrl):R.poster="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",R.addEventListener("loadstart",function(){W("Loadstart Event")}),R.addEventListener("abort",function(){q("Video aborted"),n()}),R.addEventListener("error",function(e){switch(q("Video error"),e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:q("You aborted the video playback.");break;case e.target.error.MEDIA_ERR_NETWORK:q("A network error caused the video download to fail part-way.");break;case e.target.error.MEDIA_ERR_DECODE:q("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:q("The video could not be loaded, either because the server or network failed or because the format is not supported.");break;default:q("An unknown error occurred.")}n()}),R.addEventListener("onloadeddata",function(){W("Data loaded, duration : %s",R.duration)}),R.addEventListener("loadedmetadata",function(){W("Metadata loaded, duration : %s",R.duration),p(),x(),"canvas"===M&&i.options.autoplay&&l(),"filledletterbox"===i.options.resizeMode&&(j=document.createElement("canvas"),j.style.position="absolute",j.width=V.gbcr(L).width,j.height=V.gbcr(L).height,L.insertBefore(j,R),l()),S()}),R.addEventListener("durationchange",function(){W("Duration changed"),x()}),R.addEventListener("ended",function(){d()}),L.appendChild(R)}function s(){W("Prepare canvas for video"),j=document.createElement("canvas"),j.style.position="relative",L.appendChild(j),j.width=V.gbcr(L).width,j.height=V.gbcr(L).height,R.playsinline=!0,R.webKitPlaysInline=!0,R.pausedonstart=!0,R.allowsInlineMediaPlayback=!0,R.preload="auto",R.autoplay="autoplay",R.load()}function l(){W("Start canvas video playing"),j.setAttribute("data-time",0),j.setAttribute("data-paused",!1),setInterval(function(){if(j.width=j.getAttribute("data-width"),j.height=j.getAttribute("data-height"),j.getContext("2d").drawImage(R,0,0,j.getAttribute("data-width"),j.getAttribute("data-height")),"canvas"===M){if("false"===j.getAttribute("data-paused")){var e=parseFloat(j.getAttribute("data-time"),10)+1e3/i.options.framerate/1e3;e>R.duration?(C(),d(),e=0):R.currentTime=e,j.setAttribute("data-time",e)}}else j.getContext("2d").fillStyle="rgba(0, 0, 0, 0.5)",j.getContext("2d").fillRect(0,0,j.getAttribute("data-width"),j.getAttribute("data-height"))},1e3/i.options.framerate)}function c(){var e=ne("div"),t=!1;L.insertBefore(e,Z),V.applyStyle(e,{position:"absolute",width:i.options.layer.width+"px",height:i.options.layer.height+"px",top:i.options.layer.top+"px",left:i.options.layer.left+"px",opacity:i.options.layer.animate?0:1,display:"none"}),V.handleAsset(i.options.layer,e,"video-layer",i.baseUrl),setInterval(function(){O()>=i.options.layer.time&&O()<i.options.layer.time+i.options.layer.duration&&!t&&(t=!0,e.style.display="block",i.options.layer.animate&&V.animate(e,{opacity:1}).play(),setTimeout(function(){t=!1,i.options.layer.animate?V.animate(e,{opacity:0,onplayer:function(){e.style.display="none"}}).play():e.style.display="none"},1e3*i.options.layer.duration))},50)}function d(){function e(){i.options.loop?(V.each(me,function(){this.sentThisLoop=!1}),A(0),R.hasBeenPaused=!1,ke++):(i.options.smartEnd&&(R._smartEndCalled||(R._smartEndCalled=!0,F(he))),C(),k()),V.call(i.options.onend)}if(R.hasBeenPaused=!0,i.packshot&&i.packshot.file){var t=ne("div");L.insertBefore(t,Z),V.applyStyle(t,{position:"absolute",width:"100%",height:"100%",top:"0",left:"0"}),i.packshot.width="100%",i.packshot.height="100%",V.handleAsset(i.packshot,t,"video-packshot",i.baseUrl),te&&(te.style.display="none"),X&&(X.style.display="none"),i.packshot.duration&&setTimeout(function(){e(),t.parentNode.removeChild(t),te&&(te.style.display="block"),X&&(X.style.display="block")},1e3*i.packshot.duration)}else e()}function p(){var e,t=R.videoWidth/R.videoHeight;V.onResize(R.parentNode,function(){var o,n,a,r,s=V.gbcr(R.parentNode),l=s.width/s.height;if("canvas"===M)"fullsize"===i.options.resizeMode?t>l?(n=s.height,o=n*t,r=(s.width-o)/2,a=0):(o=s.width,n=o/t,r=0,a=(s.height-n)/2):(r=0,a=0,t>l?(o=s.width,n=o/t,a=(s.height-n)/2):(n=s.height,o=n*t,r=(s.width-o)/2)),o=parseInt(10*o,10)/10,n=parseInt(10*n,10)/10,a=parseInt(10*a,10)/10,r=parseInt(10*r,10)/10,j.setAttribute("data-width",o),j.setAttribute("data-height",n),j.style.top=a+"px",j.style.left=r+"px";else{var c=t>l?"fullsize"===i.options.resizeMode?"vertical":"horizontal":"fullsize"!==i.options.resizeMode?"vertical":"horizontal",d="auto",p="100%";"safari"===V.browser.name&&("vertical"===c?(d=s.height*t+"px",p=s.height+"px"):(d=s.width/t+"px",p=s.width+"px")),V.applyStyle(R,{height:"horizontal"===c?d:p,width:"horizontal"===c?p:d,left:"auto",right:"auto",top:"auto",bottom:"auto",transform:"none",webkitTransform:"none"}),"horizontal"===c?("B"===i.options.align[1]?R.style.bottom=0:"M"===i.options.align[1]?(R.style.top="50%",R.style.transform="translate(0, -50%)",R.style.webkitTransform="translate(0, -50%)"):R.style.top=0,R.style.right=0):("R"===i.options.align[0]?R.style.right=0:"M"===i.options.align[0]?(R.style.right="50%",R.style.transform="translate(50%, 0)",R.style.webkitTransform="translate(50%, 0)"):R.style.left=0,R.style.top=0),"filledletterbox"===i.options.resizeMode&&j&&(j.setAttribute("data-width","horizontal"===c?s.width:s.height*t),j.setAttribute("data-height","horizontal"===c?s.width/t:s.height),j.style.left=("horizontal"===c?0:(s.width-s.height*t)/2)+"px",j.style.top=("horizontal"===c?(s.height-s.width/t)/2:0)+"px")}ie&&!i.options.fullsize&&V.applyStyle(ie,{width:R.style.width,height:R.style.height,left:R.style.left,right:R.style.right,top:R.style.top,bottom:R.style.bottom}),e=i.options.resizeMode})}function u(){W("Load Flash Video : %s",D);var e,t,o=(new Date).getTime();t=V.embedSWF({file:pe,wrapper:L,width:"100%",height:"100%",id:i.id+"-"+o,flashvars:{src:D,resizeMode:i.options.resizeMode,callback:"pmFlashNotification"+o,maxVol:i.options.maxVol},params:{wmode:i.options.transparent?"transparent":"opaque"},attributes:{wmode:i.options.transparent?"transparent":"opaque"}}),e=function(e,i){try{if(t.control)return t.control(e,i)}catch(o){q("Flash communication error : %s",o)}},z["pmFlashNotification"+o]=function(t,o){"ready"===t?(W("Flash framework ready - js side"),R.duration=o,R.ready=!0,i.options.muted||R.unmute(),S(),e("resize"),x()):"video-end"===t?d():"log"===t&&W(o)},R={unmute:function(){e("unmute")},mute:function(t){t?e("mute",t):e("mute")},play:function(t){R.paused=!1,e("play",t)},pause:function(){return R.paused=!0,e("pause")},getTime:function(){return e("getTime")},seek:function(t){e("seek",t)},object:t,duration:30,paused:!0,id:i.id,ready:!1}}function m(){function e(){R.paused?(V.applyStyle(t,{display:"block"}),V.applyStyle(i,{display:"none"})):(V.applyStyle(i,{display:"block"}),V.applyStyle(t,{display:"none"}))}$=ne("div"),$.className="pm-video-controls-play-button",V.applyStyle($,{width:"20px",height:"20px",position:"absolute",bottom:"5px",left:"9px",cursor:"pointer"});var t,i;if(fe){t=ne("canvas"),i=ne("canvas");var o=t.getContext("2d"),n=i.getContext("2d");t.width=t.height=i.width=i.height=20,o.fillStyle="#FFFFFF",o.moveTo(4,4),o.lineTo(4,16),o.lineTo(16,10),o.lineTo(4,4),o.fill(),n.fillStyle="#FFFFFF",n.fillRect(5,5,3,10),n.fillRect(10,5,3,10)}else t=ne("div"),i=ne("div"),V.applyStyle(t,{background:"url("+de+ue+") 0 0 no-repeat transparent",width:"20px",height:"20px"}),V.applyStyle(i,{background:"url("+de+ue+") -20px 0 no-repeat transparent",width:"20px",height:"20px"});V.applyStyle(t,{position:"absolute",top:"0px",left:"0px"}),V.applyStyle(i,{position:"absolute",top:"0px",left:"0px"}),e(),setInterval(function(){e()},100),V.addEvent($,"click",function(e){V.preventDefault(e),R.isEnded?(A(0,!0),R.isEnded=!1,re=!1,E("PLAY")):(re=!R.paused,R.paused?(A(void 0,!0),E("PLAY"),R.hasBeenPaused=!1):(C(!0),E("PAUSE"),R.hasBeenPaused=!0))}),$.appendChild(t),$.appendChild(i),te.appendChild($)}function h(){K=ne("div"),K.className="pmvideo-controls-scrubbar",Y=ne("div");var e=ne("div"),t=oe?110:140;V.applyStyle(K,{width:t+"px",height:"20px",position:"absolute",left:"40px",top:"5px",cursor:"pointer"}),V.applyStyle(e,{width:"100%",height:"2px",position:"relative",left:"0px",top:"9px",background:"#FFF"}),V.applyStyle(Y,{width:"0px",height:"2px",position:"absolute",left:"0px",top:"0px",background:le}),e.appendChild(Y),K.appendChild(e),te.appendChild(K),setInterval(function(){R.isEnded||V.applyStyle(Y,{width:O()/R.duration*100+"%"})},500),V.addEvent(K,"click",function(e){V.preventDefault(e);var i=e||z.event,o=V.getMousePosition(i,K,"left")/t,n=parseInt(R.duration*o,10);W("Scrubbar action, seek to %s% -> %s",parseInt(1e3*o,10)/10,n),F(n)})}function f(){Q=ne("div"),Q.className="pmvideo-controls-timer",V.applyStyle(Q,{width:"50px",height:"16px",paddingTop:"4px",position:"absolute",left:oe?"153px":"183px",top:"5px",textAlign:"center",fontSize:"10px",fontFamily:"Arial, Helvetica, sans-serif",color:"#FFFFFF",letterSpacing:"normal",fontStyle:"bold"}),setInterval(function(){R.isEnded||(Q.innerHTML=V.sprintf(["%s",V.cleanTime(parseInt(O(),10))]))},100),te.appendChild(Q)}function v(){ee=ne("div"),V.applyStyle(ee,{width:"20px",height:"20px",position:"absolute",left:"205px",top:"5px",cursor:"pointer"});var e,t;fe?(e=ne("canvas"),t=e.getContext("2d"),e.width=20,e.height=20,t.fillStyle="#FFFFFF",t.fillRect(3,5,14,1),t.fillRect(16,5,1,10),t.fillRect(3,14,14,1),t.fillRect(3,5,1,10),t.fillRect(6,8,10,6)):(e=ne("div"),V.applyStyle(e,{width:"20px",height:"20px",background:"url("+de+ue+") 0 -20px  no-repeat transparent"})),V.addEvent(ee,"click",function(e){V.preventDefault(e),P(L,!0),_(),A()}),ee.appendChild(e),te.appendChild(ee)}function g(e){X=ne("div"),X.className="pm-video-controls-sound-button",V.applyStyle(X,{width:"20px",height:"20px",position:"absolute",bottom:"5px",right:"5px",cursor:"pointer"});var t,o;fe?(t=ne("canvas"),o=t.getContext("2d"),t.width=20,t.height=20):(t=ne("div"),V.applyStyle(t,{width:"20px",height:"20px",background:"url("+de+ue+") -40px -20px  no-repeat transparent"})),X.appendChild(t),fe&&b("#FFFFFF"),(e?e:L).appendChild(X),i.options.muted||(y(!0),se=!1),V.addEvent(X,"click",function(e){V.preventDefault(e),se?(_(),ae=!1,E("UNMUTE")):(T(),ae=!0,E("MUTE"))})}function y(e){fe?b(e?le:"#FFF"):V.applyStyle(X.getElementsByTagName("div")[0],{background:"url("+de+ue+") "+(e?"-20px":"-40px")+" -20px  no-repeat transparent"}),V.removeClass(X,"pm-sound-state-"+(e?"muted":"unmuted")),V.addClass(X,"pm-sound-state-"+(e?"unmuted":"muted"))}function b(e){var t=1,i=X.querySelector("canvas").getContext("2d");for(i.fillStyle=e;6>t;){var o=10*t/5;i.fillRect(3*t,15-o,2,o),t++}}function w(){te=ne("div"),te.className="pm-video-controls",V.applyStyle(te,{width:i.options.soundbutton?"260px":"235px",height:"30px",position:"absolute",margin:"-50px 0 0 "+(i.options.soundbutton?"-130px":"-117px"),left:"50%",top:"100%"});var e=ne("div");if(e.className="pm-video-controls-background",V.applyStyle(e,{width:"100%",height:"100%",display:"block",position:"absolute",top:"0px",left:"0px"}),fe?V.applyStyle(e,{background:"#000",opacity:"0.7",borderRadius:"5px"}):V.applyStyle(e,{background:"url("+de+ue+") 0px "+(i.options.soundbutton?"-40px":"-70px")+" no-repeat transparent"}),te.appendChild(e),m(),h(),f(),oe&&v(),i.options.soundbutton&&g(te),L.appendChild(te),i.options.hidecontrols){var t;V.addEvent(L,"mousemove",function(){te.style.display="block",clearTimeout(t),t=setTimeout(function(){te.style.display="none"},5e3)})}}function x(){i.trackinginterval||(i.trackinginterval=setInterval(function(){var t=parseInt(O()/R.duration*100,10),o=parseInt(i.currentTimeWv/R.duration*100,10);V.each(me,function(){if((t>=this.threshold||ke>0&&99===this.threshold)&&!this.wv){var n=!1;if(!this.sent)if(this.sent=!0,i.options.uniqueTracking&&i.options.asset_id&&this.name.match(/LECTURE/)){n=parseInt(1e4*(e.piximedia.visibleVideos[i.options.adId].getAverage()||0),10);var a=e.piximedia.vastTrackings&&i.options.asset_id&&e.piximedia.vastTrackings[i.options.asset_id]?e.piximedia.vastTrackings[i.options.asset_id][this.name]:{};i.options.framedAd.loadEventOnce(this.name,{c3:"asset_id="+i.options.asset_id,duration:n},a)}else E(this.name,i.id);if(we&&this.name.match(/LECTURE[0-9]+/)&&!this.sentThisLoop){this.sentThisLoop=!0,n===!1&&(n=parseInt(1e4*(e.piximedia.visibleVideos[i.options.adId].getAverage()||0),10));var r=function(e,t){return"LECTURE25"===e?t?"VIDEO_ERP:25PCT":"VIDEO_GRP:25PCT":"LECTURE50"===e?t?"VIDEO_ERP:50PCT":"VIDEO_GRP:50PCT":"LECTURE75"===e?t?"VIDEO_ERP:75PCT":"VIDEO_GRP:75PCT":"LECTURE100"===e?t?"VIDEO_ERP:100PCT":"VIDEO_GRP:100PCT":null};if(0===n)return;this.previousGRPDuration||(this.previousGRPDuration=0),this.previousERPDuration||(this.previousERPDuration=0);var s=n,l=n;1e4!==this.previousGRPDuration&&(this.previousGRPDuration+n>1e4&&(s=1e4-this.previousGRPDuration),i.options.framedAd.loadEvent(r(this.name),{duration:s}),this.previousGRPDuration+=s),1e4!==this.previousERPDuration&&n>5e3&&(this.previousERPDuration+n>1e4&&(l=1e4-this.previousERPDuration),i.options.framedAd.loadEvent(r(this.name,!0),{duration:l}),this.previousERPDuration+=l)}}o>=this.threshold&&!this.sent&&this.wv&&0===i.options.threshold&&(this.sent=!0,E(this.name,i.id))})},50))}function k(){R.isEnded=!0,te&&(Y&&V.applyStyle(Y,{width:"0"}),Q&&(Q.innerHTML="--:--"))}function S(){he=i.options.packshotTime?i.options.packshotTime:Math.ceil(parseInt(.99*R.duration*10,10)/10),W("End pause time -> %s",he)}function I(){return H.documentElement.requestFullscreen||H.documentElement.msRequestFullscreen||H.documentElement.mozRequestFullScreen||H.documentElement.webkitRequestFullscreen||!1}function P(e,t){if(H.fullscreenElement||H.mozFullScreenElement||H.webkitFullscreenElement||H.msFullscreenElement)t&&E("FULLSCREENOFF"),H.exitFullscreen?H.exitFullscreen():H.msExitFullscreen?H.msExitFullscreen():H.mozCancelFullScreen?H.mozCancelFullScreen():H.webkitExitFullscreen&&H.webkitExitFullscreen();else{if(!e)return;t&&E("FULLSCREENON"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.webkitEnterFullscreen&&e.webkitEnterFullscreen()}}function E(e){i.options.track&&"function"==typeof i.options.track?V.call(i.options.track,[e,i.id]):V.w["pmData"+i.options.pmord]?V.track(V.w["pmData"+i.options.pmord],e,i.id):V.log("Event ready %s for %s",e,i.id)}function A(e){"html5"===M?(R.play(),"undefined"==typeof e||isNaN(parseInt(e,10))||(R.dailymotion?R.play(e):R.currentTime=e)):"flash"===M?(clearInterval(R.playInterval),R.ready?R.play(e):R.playInterval=setInterval(function(){R.ready&&(clearInterval(R.playInterval),R.play(e))},20)):"canvas"===M&&("undefined"==typeof e||isNaN(parseInt(e,10))||F(e),j.getAttribute("data-fullscreened",!1)||j.setAttribute("data-paused",!1))}function C(){return"html5"===M?(R.pause(),R.currentTime):"flash"===M?(clearInterval(R.playInterval),R.pause()):void("canvas"===M&&j.setAttribute("data-paused",!0))}function T(e){if("html5"===M){if(e)return R.volume=0,void(se=!0);clearInterval(G),G=setInterval(function(){R.volume=parseInt(10*(R.volume-.1<0?0:R.volume-.1),10)/10,R.volume<=0&&(R.volume=0,se=!0,clearInterval(G))},25)}else if("flash"===M)R.mute(e),se=!0;else if("canvas"===M)return;X&&y(!1)}function _(){if("html5"===M)clearInterval(G),G=setInterval(function(){var e=R.volume+.1;e=e>1?1:e,R.volume=e,R.volume>=i.options.maxVol&&(R.volume=i.options.maxVol,se=!1,clearInterval(G))},50);else if("flash"===M)R.unmute(),se=!1;else if("canvas"===M)return;X&&y(!0)}function O(){return"html5"===M?R.currentTime:"flash"===M?R.getTime():"canvas"===M?j.getAttribute("data-time"):void 0}function N(){return"canvas"===M?"false"===j.getAttribute("data-paused"):!R.paused}function F(e){"html5"===M?R.currentTime=e:"flash"===M?R.seek(e):"canvas"===M&&j.setAttribute("data-time",e)}if(!e.piximedia.SweetLib||!t)return!1;var D,M,L,R,j,B={files:"",baseUrl:"",width:300,height:250,unit:"px",id:"VIDEO",options:{forceCss:!1,icon_file:!1,autoplay:!0,controls:!0,soundbutton:!0,rollover:!0,muted:!0,maxVol:1,nofullscreen:!1,loop:!0,packshotTime:!1,smartEnd:!0,resizeMode:"letterbox",hidecontrols:!1,threshold:0,syncMaxDelta:1.5,onend:function(){},onclick:function(){},onerror:function(){},track:!1,pmord:!1,framerate:15,align:"MM",background:"#000",overlay:!1,startTime:0}},V=e.piximedia.SweetLib,W=V.log,q=V.warn,U=V.print,H=V.getDocument(t),z=V.getWindow(H),J=(new Date).getTime(),G=null,X=!1,$=!1,K=!1,Y=!1,Q=!1,Z=!1,ee=!1,te=!1,ie=!1,oe=I()&&!i.options.nofullscreen,ne=function(e){return H.createElement(e)},ae=!1,re=!1,se=!0,le="#04B2F6",ce="//broadcast.pm/",de=ce+"assets/video/",pe=de+"videoFramework.swf",ue="video_icon.v2.png",me=[{threshold:1,name:"LECTUREDEBUT"},{threshold:24,name:"LECTURE25"},{threshold:49,name:"LECTURE50"},{threshold:74,name:"LECTURE75"},{threshold:99,name:"LECTURE100"},{threshold:1,wv:!0,name:"LECTUREDEBUT_WV"},{threshold:24,wv:!0,name:"LECTURE25_WV"},{threshold:49,wv:!0,name:"LECTURE50_WV"},{threshold:74,wv:!0,name:"LECTURE75_WV"},{threshold:99,wv:!0,name:"LECTURE100_WV"}],he=0,fe=!1,ve="dailymotion"===V.getExtention("object"==typeof i.files?i.files[0]:i.files),ge=V.canPlayHTML5Video(i.files),ye=V.canPlayFlashVideo(i.files),be=!1,we=!1,xe=!1,ke=0;if(this.play=function(e){R.hasBeenPaused=!1,A(e)},this.pause=function(){R.hasBeenPaused=!0,C(!0)},this.seek=F,this.mute=T,this.unmute=_,this.getTime=O,this.isPlaying=N,this.data=i,this.forceError=n,this.toggleFullScreen=function(){P("desktop"===V.device.name?L:R,!0),"canvas"===M?(j.setAttribute("data-paused",!0),j.setAttribute("data-fullscreened",!0),R.play(),R.addEventListener("webkitendfullscreen",function(){j.setAttribute("data-fullscreened",!1),j.setAttribute("data-paused",!1),j.setAttribute("data-time",R.currentTime)})):A(),_()},W("New video, file : %s, wrapper : ",i.files),W(t),V.extend(i,{options:e.piximedia.videoOptions||{}}),V.extend(i,B),i.options.align.toString().match(/^[LMR][TMB]$/)||(i.options.align="MM"),i.id=i.id.toString().replace(/\s/g,"").replace(/[^a-zA-Z0-9_]/g,""),W("Options : "),W(i),i.options.forceCss&&(fe=!1),i.options.icon_file&&(ue=i.options.icon_file),"ios"===V.device.os&&(i.options.soundbutton=!1),i.packshot&&0===i.packshot.duration&&(i.options.loop=!1),i.options.controls.type&&("sound"===i.options.controls.type?(i.options.controls=!1,i.options.soundbutton=!0):i.options.controls=!0),ge||ye){o(),ve?(D=i.files,M="html5",a()):ge?(D=V.returnAbsolute(ge,i.baseUrl),M="html5",r()):(D=V.returnAbsolute(ye,i.baseUrl),M="flash",u());var Se=V.getFileName(D);if(e.piximedia.videoFiles||(e.piximedia.videoFiles={}),e.piximedia.videoFiles[Se]&&e.piximedia.videoFiles[Se].id!==i.id?(xe=!0,e.piximedia.videoFiles[Se].slaves||(e.piximedia.videoFiles[Se].slaves=[]),e.piximedia.videoFiles[Se].slaves.push(this),e.piximedia.videoFiles[Se].number_of_slaves++):(e.piximedia.videoFiles[Se]={time:0,playing:!1,insync:!1,number_of_slaves_waiting:0,number_of_slaves:0,video:R,masterPlaying:N,id:i.id},be=!0),"undefined"!=typeof i.options.adId){e.piximedia.visibleVideos||(e.piximedia.visibleVideos={}),e.piximedia.visibleVideos[i.options.adId]||(we=!0,e.piximedia.visibleVideos[i.options.adId]={objects:[]},V.watchVisibility(e.piximedia.visibleVideos[i.options.adId]));var Ie=V.d!==H?V.getOwnerFif(t):t;if(e.piximedia.visibleVideos[i.options.adId].objects.push({dom:Ie,position:i.options.position}),V.setObjectTimer){var Pe=V.setObjectTimer("LECTURE",Ie,function(e,t){i.options.position.loadEvent("TIMETRACKER::"+e,{duration:t})});Pe.start()}}if(be)setInterval(function(){e.piximedia.videoFiles[Se].time=O(),e.piximedia.videoFiles[Se].playing=N()},100);else{var Ee=function(){var t=Math.abs(e.piximedia.videoFiles[Se].time-O());if(N()&&e.piximedia.videoFiles[Se].masterPlaying()&&t>i.options.syncMaxDelta){if(!e.piximedia.videoFiles[Se].insync){e.piximedia.videoFiles[Se].insync=!0,U("Slave out of sync, delta",t),U("Slaves global sync :",function(){for(var t=[],i=0;i<e.piximedia.videoFiles[Se].slaves.length;i++){var o=e.piximedia.videoFiles[Se].slaves[i];o!==R&&t.push(Math.abs(e.piximedia.videoFiles[Se].time-o.getTime()))}return t.join(", ")}());for(var o=function(){if(e.piximedia.videoFiles[Se].number_of_slaves_waiting--,U("Slave back in sync",e.piximedia.videoFiles[Se].number_of_slaves_waiting,"left"),e.piximedia.videoFiles[Se].number_of_slaves_waiting<=0){e.piximedia.videoFiles[Se].number_of_slaves_waiting=0,e.piximedia.videoFiles[Se].video.play();for(var t=0;t<e.piximedia.videoFiles[Se].slaves.length;t++){var i=e.piximedia.videoFiles[Se].slaves[t];i.wasPlaying&&(i.wasPlaying=!1,i.play(),i.object.removeEventListener("canplay",o))}}},n=0;n<e.piximedia.videoFiles[Se].slaves.length;n++){var a=e.piximedia.videoFiles[Se].slaves[n];a.isPlaying()||a.wasPlaying?(a.wasPlaying=!0,Math.abs(e.piximedia.videoFiles[Se].time-a.getTime())>i.options.syncMaxDelta?(e.piximedia.videoFiles[Se].number_of_slaves_waiting++,a.seek(e.piximedia.videoFiles[Se].time),a.object.addEventListener("canplay",o)):a.pause()):a.wasPlaying=!1}U("Total out of sync slaves",e.piximedia.videoFiles[Se].number_of_slaves_waiting),e.piximedia.videoFiles[Se].number_of_slaves_waiting>0&&e.piximedia.videoFiles[Se].video.pause()}}else e.piximedia.videoFiles[Se].insync=!1};setInterval(Ee,500),Ee()}if(i.options.blur)if(V.canUseCSS3()){var Ae="number"==typeof i.options.blur?i.options.blur:3;V.applyStyle(R,{"-webkit-filter":"blur("+Ae+"px)","-moz-filter":"blur("+Ae+"px)","-o-filter":"blur("+Ae+"px)","-ms-filter":"blur("+Ae+"px)",filter:"blur("+Ae+"px)"})}else{var Ce=ne("div");Ce.className="pm-video-blur-wrapper",V.applyStyle(Ce,{position:"absolute",width:i.width+i.unit,height:i.height+i.unit,display:"block",left:"0",top:"0",background:"url("+de+"blur.png) 0 0 / 100% 100% no-repeat transparent"}),L.appendChild(Ce)}if(i.options.overlay&&(ie=ne("div"),V.applyStyle(ie,{position:"absolute",background:i.options.overlay.color,opacity:i.options.overlay.opacity}),i.options.fullsize&&V.applyStyle(ie,{width:"100%",height:"100%",top:"0",left:"0"}),L.appendChild(ie)),this.object=R,this.wrapper=L,Z=ne("div"),Z.className="pm-video-clicktag",V.applyStyle(Z,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",cursor:"pointer",display:"block",background:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) 0 0 no-repeat transparent"}),V.addEvent(Z,"click",function(){W("Click on video"),T(!0),V.call(i.options.onclick)}),"desktop"!==V.getDevice().name&&(i.options.controls=!1,
i.options.soundbutton=!1,i.options.autoplay))if("ios"===V.device.os&&V.device.version>=8)W("We're on mobile, resorting to canvas"),M="canvas",R.style.display="none",L.appendChild(R),s();else{var Te=function(){R.play(),V.removeEvent(V.w,"touchstart",Te)};V.addEvent(V.w,"touchstart",Te)}V.mouseenter(Z,function(){i.options.rollover&&!ae&&N()&&i.options.muted&&_()}),V.mouseleave(Z,function(){i.options.rollover&&!ae&&N()&&i.options.muted&&T()}),L.appendChild(Z),i.options.layer&&i.options.layer.file&&c(),i.options.controls?w():i.options.soundbutton&&g(),L.className+=" pm-video-"+M;var _e,Oe;i.currentTimeWv=0,0===i.options.threshold&&(_e=setInterval(function(){Oe&&N()&&i.currentTimeWv++},1e3)),V.bindVisibilityTracker({object:this.wrapper,threshold:0===i.options.threshold?60:i.options.threshold},function(e){Oe=e,i.options.threshold>0?e?i.options.autoplay&&!re&&A():C():i.options.autoplay&&!R.hasBeenPaused&&e&&A()}),i.options.autoplay&&A()}else q("Sorry, can't play any of this"),this.play=function(){},this.pause=function(){},this.stop=function(){},this.mute=function(){},this.unmute=function(){},this.getTime=function(){},this.isPlaying=function(){},this.forceError=function(){},this.data={error:"Can't play this video"},V.call(i.options.onerror)}if(e.piximedia){try{parent.piximedia||(parent.piximedia=e.piximedia)}catch(i){}window.piximedia.SweetLib&&window.piximedia.SweetLib.log("Piximedia 2014 - Video framework loaded")}else try{e.piximedia=parent.piximedia||{}}catch(i){e.piximedia={}}e.piximedia.Video=t,e.piximedia.libraryLoader&&e.piximedia.libraryLoader["video.js"]&&(e.piximedia.libraryLoader["video.js"].complete=!0)}(window),function(){var e=window,t="video.js";e.piximedia.libraryLoader=e.piximedia.libraryLoader||{};var i=e.piximedia.libraryLoader[t];if(i&&(i.complete=!0,i.onloads))for(var o=0;o<i.onloads.length;o++)i.onloads[o]()}(),window.piximedia.libraryLoader["video.js"]=window.piximedia.libraryLoader["video.js"]||{},window.piximedia.libraryLoader["video.js"].loaded=!0,function(){"use strict";function e(e){t.console&&t.console.log&&(t.console.log.apply?t.console.log.apply(t.console,arguments):t.console.log(e))}var t=window;t.piximedia.easyXDM=t.easyXDM.noConflict("piximedia"),t.piximedia.Lib={};var i="callbackLib";if(t._piximedia&&t._piximedia[i]){var o=t._piximedia[i];t._piximedia[i]=void 0;for(var n=0;n<o.length;n++){var a=o[n];if(a.window)try{a.window.piximedia=a.window.piximedia||t.piximedia}catch(r){}if(a.windows)for(var s=0;s<a.windows.length;s++){var l=a.windows[s];try{l.piximedia=l.piximedia||t.piximedia}catch(r){}}try{a()}catch(r){e("Error in callback: "+r)}}}}();