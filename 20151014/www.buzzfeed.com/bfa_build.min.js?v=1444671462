!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){(function(global){(function(module,exports,require,define,browserify_shim__define__module__export__){function Visitor(m,s){if(!m)throw"Visitor requires Adobe Marketing Cloud Org ID";var a=this;a.version="1.5.1";var l=window,j=l.Visitor;l.s_c_in||(l.s_c_il=[],l.s_c_in=0),a._c="Visitor",a._il=l.s_c_il,a._in=l.s_c_in,a._il[a._in]=a,l.s_c_in++;var n=l.document,h=j.Na;h||(h=null);var x=j.Oa;x||(x=void 0);var i=j.la;i||(i=!0);var k=j.Ma;k||(k=!1),a.T=function(a){var b,e,c=0;if(a)for(b=0;b<a.length;b++)e=a.charCodeAt(b),c=(c<<5)-c+e,c&=c;return c},a.q=function(a){var f,c="0123456789",b="",e="",g=8,i=10,h=10;if(1==a){for(c+="ABCDEF",a=0;16>a;a++)f=Math.floor(Math.random()*g),b+=c.substring(f,f+1),f=Math.floor(Math.random()*g),e+=c.substring(f,f+1),g=16;return b+"-"+e}for(a=0;19>a;a++)f=Math.floor(Math.random()*i),b+=c.substring(f,f+1),0==a&&9==f?i=3:(1==a||2==a)&&10!=i&&2>f?i=10:a>2&&(i=10),f=Math.floor(Math.random()*h),e+=c.substring(f,f+1),0==a&&9==f?h=3:(1==a||2==a)&&10!=h&&2>f?h=10:a>2&&(h=10);return b+e},a.oa=function(){var a;if(!a&&l.location&&(a=l.location.hostname),a)if(/^[0-9.]+$/.test(a))a="";else{var c=a.split("."),b=c.length-1,e=b-1;if(b>1&&2>=c[b].length&&(2==c[b-1].length||0>",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,et,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,".indexOf(","+c[b]+","))&&e--,e>0)for(a="";b>=e;)a=c[b]+(a?".":"")+a,b--}return a},a.cookieRead=function(a){var a=encodeURIComponent(a),c=(";"+n.cookie).split(" ").join(";"),b=c.indexOf(";"+a+"="),e=0>b?b:c.indexOf(";",b+1);return 0>b?"":decodeURIComponent(c.substring(b+2+a.length,0>e?c.length:e))},a.cookieWrite=function(d,c,b){var f,e=a.cookieLifetime,c=""+c,e=e?(""+e).toUpperCase():"";return b&&"SESSION"!=e&&"NONE"!=e?(f=""!=c?parseInt(e?e:0,10):-60)?(b=new Date,b.setTime(b.getTime()+1e3*f)):1==b&&(b=new Date,f=b.getYear(),b.setYear(f+2+(1900>f?1900:0))):b=0,d&&"NONE"!=e?(n.cookie=encodeURIComponent(d)+"="+encodeURIComponent(c)+"; path=/;"+(b?" expires="+b.toGMTString()+";":"")+(a.cookieDomain?" domain="+a.cookieDomain+";":""),a.cookieRead(d)==c):0},a.g=h,a.P=function(a,c){try{"function"==typeof a?a.apply(l,c):a[1].apply(a[0],c)}catch(b){}},a.sa=function(d,c){c&&(a.g==h&&(a.g={}),a.g[d]==x&&(a.g[d]=[]),a.g[d].push(c))},a.o=function(d,c){if(a.g!=h){var b=a.g[d];if(b)for(;0<b.length;)a.P(b.shift(),c)}},a.j=h,a.qa=function(d,c,b){var g,e=0,f=0;if(c&&n){for(g=0;!e&&2>g;){try{e=(e=n.getElementsByTagName(g>0?"HEAD":"head"))&&0<e.length?e[0]:0}catch(i){e=0}g++}if(!e)try{n.body&&(e=n.body)}catch(j){e=0}if(e)for(g=0;!f&&2>g;){try{f=n.createElement(g>0?"SCRIPT":"script")}catch(k){f=0}g++}}c&&e&&f?(f.type="text/javascript",f.setAttribute("async","async"),f.src=c,e.firstChild?e.insertBefore(f,e.firstChild):e.appendChild(f),b&&(a.j==h&&(a.j={}),a.j[d]=setTimeout(b,a.loadTimeout))):b&&b()},a.ma=function(d){a.j!=h&&a.j[d]&&(clearTimeout(a.j[d]),a.j[d]=0)},a.U=k,a.V=k,a.isAllowed=function(){return!a.U&&(a.U=i,a.cookieRead(a.cookieName)||a.cookieWrite(a.cookieName,"T",1))&&(a.V=i),a.V},a.a=h,a.e=h;var z=j.ab;z||(z="MC");var q=j.fb;q||(q="MCMID");var A=j.bb;A||(A="MCCIDH");var B=j.eb;B||(B="MCSYNCS");var D=j.cb;D||(D="MCIDTS");var y=j.Za;y||(y="A");var o=j.Wa;o||(o="MCAID");var w=j.$a;w||(w="AAM");var v=j.Ya;v||(v="MCAAMLH");var p=j.Xa;p||(p="MCAAMB");var r=j.gb;r||(r="NONE"),a.B=0,a.S=function(){if(!a.B){var d=a.version;a.audienceManagerServer&&(d+="|"+a.audienceManagerServer),a.audienceManagerServerSecure&&(d+="|"+a.audienceManagerServerSecure),a.B=a.T(d)}return a.B},a.W=k,a.f=function(){if(!a.W){a.W=i;var e,f,g,d=a.S(),c=k,b=a.cookieRead(a.cookieName),j=new Date;if(a.a==h&&(a.a={}),b&&"T"!=b)for(b=b.split("|"),b[0].match(/^[\-0-9]+$/)&&(parseInt(b[0],10)!=d&&(c=i),b.shift()),1==b.length%2&&b.pop(),d=0;d<b.length;d+=2)e=b[d].split("-"),f=e[0],g=b[d+1],e=1<e.length?parseInt(e[1],10):0,c&&(f==A&&(g=""),e>0&&(e=j.getTime()/1e3-60)),f&&g&&(a.c(f,g,1),e>0&&(a.a["expire"+f]=e,j.getTime()>=1e3*e&&(a.e||(a.e={}),a.e[f]=i)));!a.b(o)&&(b=a.cookieRead("s_vi"))&&(b=b.split("|"),1<b.length&&0<=b[0].indexOf("v1")&&(g=b[1],d=g.indexOf("["),d>=0&&(g=g.substring(0,d)),g&&g.match(/^[0-9a-fA-F\-]+$/)&&a.c(o,g)))}},a.ua=function(){var c,b,d=a.S();for(c in a.a)!Object.prototype[c]&&a.a[c]&&"expire"!=c.substring(0,6)&&(b=a.a[c],d+=(d?"|":"")+c+(a.a["expire"+c]?"-"+a.a["expire"+c]:"")+"|"+b);a.cookieWrite(a.cookieName,d,1)},a.b=function(d,c){return a.a==h||!c&&a.e&&a.e[d]?h:a.a[d]},a.c=function(d,c,b){a.a==h&&(a.a={}),a.a[d]=c,b||a.ua()},a.pa=function(d,c){var b=a.b(d,c);return b?b.split("*"):h},a.ta=function(d,c,b){a.c(d,c?c.join("*"):"",b)},a.Ta=function(d,c){var b=a.pa(d,c);if(b){var f,e={};for(f=0;f<b.length;f+=2)e[b[f]]=b[f+1];return e}return h},a.Va=function(d,c,b){var f,e=h;if(c)for(f in e=[],c)Object.prototype[f]||(e.push(f),e.push(c[f]));a.ta(d,e,b)},a.l=function(d,c){var b=new Date;b.setTime(b.getTime()+1e3*c),a.a==h&&(a.a={}),a.a["expire"+d]=Math.floor(b.getTime()/1e3),0>c?(a.e||(a.e={}),a.e[d]=i):a.e&&(a.e[d]=k)},a.R=function(a){return a&&("object"==typeof a&&(a=a.d_mid?a.d_mid:a.visitorID?a.visitorID:a.id?a.id:a.uuid?a.uuid:""+a),a&&(a=a.toUpperCase(),"NOTARGET"==a&&(a=r)),!a||a!=r&&!a.match(/^[0-9a-fA-F\-]+$/))&&(a=""),a},a.i=function(d,c){if(a.ma(d),a.h!=h&&(a.h[d]=k),d==z){var b=a.b(q);if(!b){if(b="object"==typeof c&&c.mid?c.mid:a.R(c),!b){if(a.u)return void a.getAnalyticsVisitorID(h,k,i);b=a.q()}a.c(q,b)}b&&b!=r||(b=""),"object"==typeof c&&((c.d_region||c.dcs_region||c.d_blob||c.blob)&&a.i(w,c),a.u&&c.mid&&a.i(y,{id:c.id})),a.o(q,[b])}if(d==w&&"object"==typeof c){b=604800,c.id_sync_ttl!=x&&c.id_sync_ttl&&(b=parseInt(c.id_sync_ttl,10));var e=a.b(v);e||((e=c.d_region)||(e=c.dcs_region),e&&(a.l(v,b),a.c(v,e))),e||(e=""),a.o(v,[e]),e=a.b(p),(c.d_blob||c.blob)&&((e=c.d_blob)||(e=c.blob),a.l(p,b),a.c(p,e)),e||(e=""),a.o(p,[e]),!c.error_msg&&a.s&&a.c(A,a.s),a.idSyncDisableSyncs?t.ca=i:(t.ca=k,t.Ka({H:c.ibs,d:c.subdomain}))}d==y&&(b=a.b(o),b||((b=a.R(c))?a.l(p,-1):b=r,a.c(o,b)),b&&b!=r||(b=""),a.o(o,[b]))},a.h=h,a.r=function(d,c,b,e){var g,f="";return a.isAllowed()&&(a.f(),f=a.b(d),!f&&(d==q?g=z:d==v||d==p?g=w:d==o&&(g=y),g))?(!c||a.h!=h&&a.h[g]||(a.h==h&&(a.h={}),a.h[g]=i,a.qa(g,c,function(){if(!a.b(d)){var b="";d==q?b=a.q():g==w&&(b={error_msg:"timeout"}),a.i(g,b)}})),a.sa(d,b),c||a.i(g,{id:r}),""):(d!=q&&d!=o||f!=r||(f="",e=i),b&&e&&a.P(b,[f]),f)},a._setMarketingCloudFields=function(d){a.f(),a.i(z,d)},a.setMarketingCloudVisitorID=function(d){a._setMarketingCloudFields(d)},a.u=k,a.getMarketingCloudVisitorID=function(d,c){if(a.isAllowed()){a.marketingCloudServer&&0>a.marketingCloudServer.indexOf(".demdex.net")&&(a.u=i);var b=a.A("_setMarketingCloudFields");return a.r(q,b,d,c)}return""},a.ra=function(){a.getAudienceManagerBlob()},j.AuthState={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},a.p={},a.Q=k,a.s="",a.setCustomerIDs=function(d){if(a.isAllowed()&&d){a.f();var c,b;for(c in d)if(!Object.prototype[c]&&(b=d[c]))if("object"==typeof b){var e={};b.id&&(e.id=b.id),b.authState!=x&&(e.authState=b.authState),a.p[c]=e}else a.p[c]={id:b};var d=a.getCustomerIDs(),e=a.b(A),f="";e||(e=0);for(c in d)Object.prototype[c]||(b=d[c],f+=(f?"|":"")+c+"|"+(b.id?b.id:"")+(b.authState?b.authState:""));a.s=a.T(f),a.s!=e&&(a.Q=i,a.ra())}},a.getCustomerIDs=function(){a.f();var c,b,d={};for(c in a.p)Object.prototype[c]||(b=a.p[c],d[c]||(d[c]={}),b.id&&(d[c].id=b.id),d[c].authState=b.authState!=x?b.authState:j.AuthState.UNKNOWN);return d},a._setAnalyticsFields=function(d){a.f(),a.i(y,d)},a.setAnalyticsVisitorID=function(d){a._setAnalyticsFields(d)},a.getAnalyticsVisitorID=function(d,c,b){if(a.isAllowed()){var e="";if(b||(e=a.getMarketingCloudVisitorID(function(){a.getAnalyticsVisitorID(d,i)})),e||b){var f=b?a.marketingCloudServer:a.trackingServer,g="";return a.loadSSL&&(b?a.marketingCloudServerSecure&&(f=a.marketingCloudServerSecure):a.trackingServerSecure&&(f=a.trackingServerSecure)),f&&(g="http"+(a.loadSSL?"s":"")+"://"+f+"/id?callback=s_c_il%5B"+a._in+"%5D._set"+(b?"MarketingCloud":"Analytics")+"Fields&mcorgid="+encodeURIComponent(a.marketingCloudOrgID)+(e?"&mid="+e:"")),a.r(b?q:o,g,d,c)}}return""},a._setAudienceManagerFields=function(d){a.f(),a.i(w,d)},a.A=function(d){var c=a.audienceManagerServer,b="",e=a.b(q),f=a.b(p,i),g=a.b(o),g=g&&g!=r?"&d_cid_ic=AVID%01"+encodeURIComponent(g):"";if(a.loadSSL&&a.audienceManagerServerSecure&&(c=a.audienceManagerServerSecure),c){var h,j,b=a.getCustomerIDs();if(b)for(h in b)Object.prototype[h]||(j=b[h],g+="&d_cid_ic="+encodeURIComponent(h)+"%01"+encodeURIComponent(j.id?j.id:"")+(j.authState?"%01"+j.authState:""));d||(d="_setAudienceManagerFields"),b="http"+(a.loadSSL?"s":"")+"://"+c+"/id?d_rtbd=json&d_ver=2"+(!e&&a.u?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(a.marketingCloudOrgID)+"&d_nsid="+(a.idSyncContainerID||0)+(e?"&d_mid="+e:"")+(f?"&d_blob="+encodeURIComponent(f):"")+g+"&d_cb=s_c_il%5B"+a._in+"%5D."+d}return b},a.getAudienceManagerLocationHint=function(d,c){if(a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerLocationHint(d,i)})){var b=a.b(o);if(b||(b=a.getAnalyticsVisitorID(function(){a.getAudienceManagerLocationHint(d,i)})),b)return b=a.A(),a.r(v,b,d,c)}return""},a.getAudienceManagerBlob=function(d,c){if(a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerBlob(d,i)})){var b=a.b(o);if(b||(b=a.getAnalyticsVisitorID(function(){a.getAudienceManagerBlob(d,i)})),b)return b=a.A(),a.Q&&a.l(p,-1),a.r(p,b,d,c)}return""},a.m="",a.t={},a.C="",a.D={},a.getSupplementalDataID=function(d,c){!a.m&&!c&&(a.m=a.q(1));var b=a.m;return a.C&&!a.D[d]?(b=a.C,a.D[d]=i):b&&(a.t[d]&&(a.C=a.m,a.D=a.t,a.m=b=c?"":a.q(1),a.t={}),b&&(a.t[d]=i)),b};var u={k:!!l.postMessage,ja:1,O:864e5};a.Pa=u,a.Y={postMessage:function(a,c,b){var e=1;c&&(u.k?b.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(b.location=c.replace(/#.*$/,"")+"#"+ +new Date+e++ +"&"+a))},K:function(a,c){var b;try{u.k&&(a&&(b=function(b){return"string"==typeof c&&b.origin!==c||"[object Function]"===Object.prototype.toString.call(c)&&!1===c(b.origin)?!1:void a(b)}),window.addEventListener?window[a?"addEventListener":"removeEventListener"]("message",b,!1):window[a?"attachEvent":"detachEvent"]("onmessage",b))}catch(e){}}};var E={Z:function(){return n.addEventListener?function(a,c,b){a.addEventListener(c,function(a){"function"==typeof b&&b(a)},k)}:n.attachEvent?function(a,c,b){a.attachEvent("on"+c,function(a){"function"==typeof b&&b(a)})}:void 0}(),map:function(a,c){if(Array.prototype.map)return a.map(c);if(void 0===a||a===h)throw new TypeError;var b=Object(a),e=b.length>>>0;if("function"!=typeof c)throw new TypeError;for(var f=Array(e),g=0;e>g;g++)g in b&&(f[g]=c.call(c,b[g],g,b));return f},Aa:function(a,c){return this.map(a,function(a){return encodeURIComponent(a)}).join(c)}};a.Ua=E;var t={ka:3e4,N:649,ga:k,id:h,I:h,ba:function(a){return"string"==typeof a?(a=a.split("/"),a[0]+"//"+a[2]):void 0},d:h,url:h,Ca:function(){var d="http://fast.",c="?d_nsid="+a.idSyncContainerID+"#"+encodeURIComponent(n.location.href);return this.d||(this.d="nosubdomainreturned"),a.loadSSL&&(d=a.idSyncSSLUseAkamai?"https://fast.":"https://"),d=d+this.d+".demdex.net/dest5.html"+c,this.I=this.ba(d),this.id="destination_publishing_iframe_"+this.d+"_"+a.idSyncContainerID,d},wa:function(){var d="?d_nsid="+a.idSyncContainerID+"#"+encodeURIComponent(n.location.href);"string"==typeof a.z&&a.z.length&&(this.id="destination_publishing_iframe_"+(new Date).getTime()+"_"+a.idSyncContainerID,this.I=this.ba(a.z),this.url=a.z+d)},ca:h,G:k,M:k,v:h,hb:h,Ia:h,ib:h,L:k,w:[],Ga:[],Ha:[],da:u.k?15:100,J:[],Ea:[],aa:i,ea:k,$:function(){function a(){e=document.createElement("iframe"),e.id=b.id,e.style.cssText="display: none; width: 0; height: 0;",e.src=b.url,b.Ia=i,c(),document.body.appendChild(e)}function c(){E.Z(e,"load",function(){e.className="aamIframeLoaded",b.v=i,b.n()})}this.M=i;var b=this,e=document.getElementById(this.id);e?"IFRAME"!==e.nodeName?(this.id+="_2",a()):"aamIframeLoaded"!==e.className?c():(this.v=i,this.n()):a(),this.Da=e},n:function(d){var c=this;d===Object(d)&&this.J.push(d),(this.ea||!u.k||this.v)&&this.J.length&&(this.Ja(this.J.shift()),this.n()),!a.idSyncDisableSyncs&&this.v&&this.w.length&&!this.L&&(this.ga||(this.ga=i,setTimeout(function(){c.da=u.k?15:150},this.ka)),this.L=i,this.fa())},Ja:function(a){var b,e,f,g,h,c=encodeURIComponent;if((b=a.H)&&b instanceof Array&&(e=b.length))for(f=0;e>f;f++)g=b[f],h=[c("ibs"),c(g.id||""),c(g.tag||""),E.Aa(g.url||[],","),c(g.ha||""),"","",g.Ba?"true":"false"],this.aa?this.F(h.join("|")):g.Ba&&this.xa(g,h.join("|"));this.Ea.push(a)},xa:function(d,c){a.f();var b=a.b(B),e=k,f=k,g=Math.ceil((new Date).getTime()/u.O);b?(b=b.split("*"),f=this.La(b,d.id,g),e=f.ya,f=f.za,e&&f||(this.F(c),b.push(d.id+"-"+(g+Math.ceil(d.ha/60/24))),this.Fa(b),a.c(B,b.join("*")))):(this.F(c),a.c(B,d.id+"-"+(g+Math.ceil(d.ha/60/24))))},La:function(a,c,b){var g,h,j,e=k,f=k;for(h=0;h<a.length;h++)g=a[h],j=parseInt(g.split("-")[1],10),g.match("^"+c+"-")?(e=i,j>b?f=i:(a.splice(h,1),h--)):b>=j&&(a.splice(h,1),h--);return{ya:e,za:f}},Fa:function(a){if(a.join("*").length>this.N)for(a.sort(function(a,b){return parseInt(a.split("-")[1],10)-parseInt(b.split("-")[1],10)});a.join("*").length>this.N;)a.shift()},F:function(d){var c=encodeURIComponent;this.w.push(c(a.Ra?"---destpub-debug---":"---destpub---")+d)},fa:function(){var c,d=this;this.w.length?(c=this.w.shift(),a.Y.postMessage(c,this.url,this.Da.contentWindow),this.Ga.push(c),setTimeout(function(){d.fa()},this.da)):this.L=k},K:function(a){var c=/^---destpub-to-parent---/;"string"==typeof a&&c.test(a)&&(c=a.replace(c,"").split("|"),"canSetThirdPartyCookies"===c[0]&&(this.aa="true"===c[1]?i:k,this.ea=i,this.n()),this.Ha.push(a))},Ka:function(d){this.url===h&&(this.d="string"==typeof a.X&&a.X.length?a.X:d.d||"",this.url=this.Ca()),d.H instanceof Array&&d.H.length&&(this.G=i),(this.G||a.na)&&this.d&&"nosubdomainreturned"!==this.d&&!this.M&&(j.ia||"complete"===n.readyState||"loaded"===n.readyState)&&this.$(),"function"==typeof a.idSyncIDCallResult?a.idSyncIDCallResult(d):this.n(d),"function"==typeof a.idSyncAfterIDCallResult&&a.idSyncAfterIDCallResult(d)},va:function(d,c){return a.Sa||!d||c-d>u.ja}};if(a.Qa=t,0>m.indexOf("@")&&(m+="@AdobeOrg"),a.marketingCloudOrgID=m,a.cookieName="AMCV_"+m,a.cookieDomain=a.oa(),a.cookieDomain==l.location.hostname&&(a.cookieDomain=""),a.loadSSL=0<=l.location.protocol.toLowerCase().indexOf("https"),a.loadTimeout=500,a.marketingCloudServer=a.audienceManagerServer="dpm.demdex.net",s&&"object"==typeof s){for(var C in s)!Object.prototype[C]&&(a[C]=s[C]);a.idSyncContainerID=a.idSyncContainerID||0,a.f(),C=a.b(D);var F=Math.ceil((new Date).getTime()/u.O);!a.idSyncDisableSyncs&&t.va(C,F)&&(a.l(p,-1),a.c(D,F)),a.getMarketingCloudVisitorID(),a.getAudienceManagerLocationHint(),a.getAudienceManagerBlob()}if(!a.idSyncDisableSyncs){t.wa(),E.Z(window,"load",function(){var d=t;j.ia=i,(d.G||a.na)&&d.d&&"nosubdomainreturned"!==d.d&&d.url&&!d.M&&d.$()});try{a.Y.K(function(a){t.K(a.data)},t.I)}catch(G){}}}window.Visitor=Visitor,Visitor.getInstance=function(m,s){var a,j,l=window.s_c_il;if(0>m.indexOf("@")&&(m+="@AdobeOrg"),l)for(j=0;j<l.length;j++)if((a=l[j])&&"Visitor"==a._c&&a.marketingCloudOrgID==m)return a;return new Visitor(m,s)},function(){function m(){s.ia=a}var s=window.Visitor,a=s.la;a||(a=!0),window.addEventListener?window.addEventListener("load",m):window.attachEvent&&window.attachEvent("onload",m)}(),function(){var BF_ID="695B8A1A54FA3AC00A4C98A6@AdobeOrg",OLD_ID="1ECE43625269AB1E0A490D45@AdobeOrg",newVisitor=new Visitor(BF_ID);if(newVisitor.cookieRead("AMCV_"+OLD_ID)&&!newVisitor.cookieRead("AMCV_"+BF_ID)){var oldVisitor=new Visitor(OLD_ID);newVisitor.setAnalyticsVisitorID(oldVisitor.getAnalyticsVisitorID()),newVisitor.setMarketingCloudVisitorID(oldVisitor.getMarketingCloudVisitorID()),newVisitor.cookieWrite("AMCV_"+OLD_ID,"",new Date)}newVisitor.trackingServer="buzzfeed.d1.sc.omtrdc.net",newVisitor.trackingServerSecure="buzzfeed.d1.sc.omtrdc.net",window.VisitorAPIVisitor=newVisitor}(),browserify_shim__define__module__export__("undefined"!=typeof VisitorAPIVisitor?VisitorAPIVisitor:window.VisitorAPIVisitor)}).call(global,void 0,void 0,void 0,void 0,function(ex){module.exports=ex})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(require,module){(function(global){(function(module,exports,require,define,browserify_shim__define__module__export__){function s_doPlugins(bf_s){var now=new Date;bf_s.eVar20=bf_s.getTimeParting("n","-5"),bf_s.eVar22=bf_s.prop22="D=g",bf_s.eVar24=document.location.host+document.location.pathname+document.location.search,bf_s.eVar25="string"==typeof bf_s.eVar25?bf_s.eVar25.toLowerCase():"",bf_s.eVar28=bf_s.getPreviousValue(bf_s.eVar24,"s_gpv_v28"),bf_s.eVar29=bf_s.getPreviousValue(bf_s.pageName,"s_gpv_v29"),"1"==bf_s.Util.getQueryParam("b")?(bf_s.eVar61="Buzzfeed organic",bf_s.events=bf_s.apl("event61",bf_s.events,",",2)):bf_s.eVar61="not organic",bf_s.eVar75=bf_s.lastUpdated,bf_s.server=document.domain;var visitCookie=bf_s.Util.cookieRead("aa_visits"),visits={};visitCookie&&(visits=JSON.parse(visitCookie)||{}),visits.first=visits.first?new Date(visits.first):now,visits.last=visits.last?new Date(visits.last):now,visits.home=visits.home?new Date(visits.home):!1,bf_s.eVar4=Math.floor((now-visits.last)/36e5),bf_s.eVar5=Math.floor((now-visits.first)/864e5),bf_s.eVar6=visits.home?Math.floor((now-visits.home)/864e5):!1,visitCookie=JSON.stringify({first:visits.first,last:now,home:"/"===document.location.pathname?now:visits.home});var visitCookieExpire=new Date;visitCookieExpire.setYear(visitCookieExpire.getFullYear()+2),bf_s.Util.cookieWrite("aa_visits",visitCookie,visitCookieExpire),bf_s.getPageVisibility(),bf_s.eVar7=bf_s.inList("event42",bf_s.events,",")?"+1":"",bf_s.eVar8=bf_s.inList("event41",bf_s.events,",")?"+1":"",bf_s.eVar9=bf_s.inList("event43",bf_s.events,",")?"+1":"",bf_s.eVar10=bf_s.inList("event45",bf_s.events,",")?"+1":"",bf_s.eVar11=bf_s.inList("event31",bf_s.events,",")?"+1":"",bf_s.eVar59=bf_s.inList("event58",bf_s.events,",")?"+1":"",bf_s.varDupes={prop1:["v1","eVar1"],prop2:["v2","eVar2"],prop3:["v3","eVar3"],prop20:["v20","eVar20"],eVar21:["pageName","pageName"],prop23:["v23","eVar23"],prop24:["v24","eVar24"],prop25:["v25","eVar25"],prop26:["v26","eVar26"],prop28:["v28","eVar28"],prop31:["v31","eVar31"],prop33:["v33","eVar33"],prop34:["v34","eVar34"],prop35:["v35","eVar35"],prop36:["v36","eVar36"],prop37:["v37","eVar37"],prop38:["v38","eVar38"],prop40:["v40","eVar40"],prop41:["v41","eVar41"],prop42:["v42","eVar42"],prop43:["v43","eVar43"],prop45:["v45","eVar45"],prop46:["v46","eVar46"],prop49:["v49","eVar49"],prop50:["v50","eVar50"],prop51:["v51","eVar51"],prop52:["v52","eVar52"],prop53:["v53","eVar53"],prop54:["v54","eVar54"],prop57:["v57","eVar57"],prop58:["v58","eVar58"],prop61:["v61","eVar61"],prop75:["v75","eVar75"]};for(var v in bf_s.varDupes)bf_s.varDupes.hasOwnProperty(v)&&("undefined"!=typeof bf_s[bf_s.varDupes[v][1]]&&bf_s[bf_s.varDupes[v][1]]?(bf_s[v]=bf_s.dynamicVariablePrefix+bf_s.varDupes[v][0],bf_s.linkType&&(bf_s.linkTrackVars=bf_s.apl(bf_s.linkTrackVars,v,",",2))):bf_s[v]="");if(bf_s.linkType){for(var n=0,v=bf_s.trackEveryCall.length;v>n;n++)bf_s.linkTrackVars=bf_s.apl(bf_s.linkTrackVars,bf_s.trackEveryCall[n],",",2);bf_s.events=bf_s.events.replace(/(event21(?:,|$))/gi,""),bf_s.eVar12=""}else bf_s.events=bf_s.apl(bf_s.events,"event21",",",2),bf_s.eVar12="+1",bf_s.prop21=bf_s.getLoadTime()}function AppMeasurement(){var a=this;a.version="1.5.1";var k=window;k.s_c_in||(k.s_c_il=[],k.s_c_in=0),a._il=k.s_c_il,a._in=k.s_c_in,a._il[a._in]=a,k.s_c_in++,a._c="s_c";var q=k.AppMeasurement.zb;q||(q=null);var n,t,r=k;try{for(n=r.parent,t=r.location;n&&n.location&&t&&""+n.location!=""+t&&r.location&&""+n.location!=""+r.location&&n.location.host==t.host;)r=n,n=r.parent}catch(u){}a.ob=function(a){try{console.log(a)}catch(b){}},a.za=function(a){return""+parseInt(a)==""+a},a.replace=function(a,b,d){return!a||0>a.indexOf(b)?a:a.split(b).join(d)},a.escape=function(c){var b,d;if(!c)return c;for(c=encodeURIComponent(c),b=0;7>b;b++)d="+~!*()'".substring(b,b+1),0<=c.indexOf(d)&&(c=a.replace(c,d,"%"+d.charCodeAt(0).toString(16).toUpperCase()));return c},a.unescape=function(c){if(!c)return c;c=0<=c.indexOf("+")?a.replace(c,"+"," "):c;try{return decodeURIComponent(c)}catch(b){}return unescape(c)},a.fb=function(){var d,c=k.location.hostname,b=a.fpCookieDomainPeriods;if(b||(b=a.cookieDomainPeriods),c&&!a.cookieDomain&&!/^[0-9.]+$/.test(c)&&(b=b?parseInt(b):2,b=b>2?b:2,d=c.lastIndexOf("."),d>=0)){for(;d>=0&&b>1;)d=c.lastIndexOf(".",d-1),b--;a.cookieDomain=d>0?c.substring(d):c}return a.cookieDomain},a.c_r=a.cookieRead=function(c){c=a.escape(c);var b=" "+a.d.cookie,d=b.indexOf(" "+c+"="),f=0>d?d:b.indexOf(";",d);return c=0>d?"":a.unescape(b.substring(d+2+c.length,0>f?b.length:f)),"[[B]]"!=c?c:""},a.c_w=a.cookieWrite=function(c,b,d){var g,f=a.fb(),e=a.cookieLifetime;return b=""+b,e=e?(""+e).toUpperCase():"",d&&"SESSION"!=e&&"NONE"!=e&&((g=""!=b?parseInt(e?e:0):-60)?(d=new Date,d.setTime(d.getTime()+1e3*g)):1==d&&(d=new Date,g=d.getYear(),d.setYear(g+5+(1900>g?1900:0)))),c&&"NONE"!=e?(a.d.cookie=c+"="+a.escape(""!=b?b:"[[B]]")+"; path=/;"+(d&&"SESSION"!=e?" expires="+d.toGMTString()+";":"")+(f?" domain="+f+";":""),a.cookieRead(c)==b):0},a.G=[],a.ba=function(c,b,d){if(a.ta)return 0;a.maxDelay||(a.maxDelay=250);var f=0,e=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,m=["webkitvisibilitychange","visibilitychange"];if(g||(g=a.d.webkitVisibilityState),g&&"prerender"==g){if(!a.ca)for(a.ca=1,d=0;d<m.length;d++)a.d.addEventListener(m[d],function(){var c=a.d.visibilityState;c||(c=a.d.webkitVisibilityState),"visible"==c&&(a.ca=0,a.delayReady())});f=1,e=0}else d||a.l("_d")&&(f=1);return f&&(a.G.push({m:c,a:b,t:e}),a.ca||setTimeout(a.delayReady,a.maxDelay)),f},a.delayReady=function(){var d,c=(new Date).getTime(),b=0;for(a.l("_d")?b=1:a.na();0<a.G.length;){if(d=a.G.shift(),b&&!d.t&&d.t>c){a.G.unshift(d),setTimeout(a.delayReady,parseInt(a.maxDelay/2));break}a.ta=1,a[d.m].apply(a,d.a),a.ta=0}},a.setAccount=a.sa=function(c){var b,d;if(!a.ba("setAccount",arguments))if(a.account=c,a.allAccounts)for(b=a.allAccounts.concat(c.split(",")),a.allAccounts=[],b.sort(),d=0;d<b.length;d++)0!=d&&b[d-1]==b[d]||a.allAccounts.push(b[d]);else a.allAccounts=c.split(",")},a.foreachVar=function(c,b){var d,f,e,g,m="";for(e=f="",a.lightProfileID?(d=a.K,(m=a.lightTrackVars)&&(m=","+m+","+a.ga.join(",")+",")):(d=a.c,(a.pe||a.linkType)&&(m=a.linkTrackVars,f=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(m=a[e].yb,f=a[e].xb))),m&&(m=","+m+","+a.A.join(",")+","),f&&m&&(m+=",events,")),b&&(b=","+b+","),f=0;f<d.length;f++)e=d[f],(g=a[e])&&(!m||0<=m.indexOf(","+e+","))&&(!b||0<=b.indexOf(","+e+","))&&c(e,g)},a.B=function(c,b,d,f,e){var m,p,k,w,g="",n=0;if("contextData"==c&&(c="c"),b){for(m in b)if(!(Object.prototype[m]||e&&m.substring(0,e.length)!=e)&&b[m]&&(!d||0<=d.indexOf(","+(f?f+".":"")+m+","))){if(k=!1,n)for(p=0;p<n.length;p++)m.substring(0,n[p].length)==n[p]&&(k=!0);if(!k&&(""==g&&(g+="&"+c+"."),p=b[m],e&&(m=m.substring(e.length)),0<m.length))if(k=m.indexOf("."),k>0)p=m.substring(0,k),k=(e?e:"")+p+".",n||(n=[]),n.push(k),g+=a.B(p,b,d,f,k);else if("boolean"==typeof p&&(p=p?"true":"false"),p){if("retrieveLightData"==f&&0>e.indexOf(".contextData."))switch(k=m.substring(0,4),w=m.substring(4),m){case"transactionID":m="xact";break;case"channel":m="ch";break;case"campaign":m="v0";break;default:a.za(w)&&("prop"==k?m="c"+w:"eVar"==k?m="v"+w:"list"==k?m="l"+w:"hier"==k&&(m="h"+w,p=p.substring(0,255)))}g+="&"+a.escape(m)+"="+a.escape(p)}}""!=g&&(g+="&."+c)}return g},a.hb=function(){var b,d,f,e,g,m,p,k,c="",n="",r="",s=e="";if(a.lightProfileID?(b=a.K,(n=a.lightTrackVars)&&(n=","+n+","+a.ga.join(",")+",")):(b=a.c,(a.pe||a.linkType)&&(n=a.linkTrackVars,r=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(n=a[e].yb,r=a[e].xb))),n&&(n=","+n+","+a.A.join(",")+","),r&&(r=","+r+",",n&&(n+=",events,")),a.events2&&(s+=(""!=s?",":"")+a.events2)),a.visitor&&1.5<=parseFloat(a.visitor.version)&&a.visitor.getCustomerIDs){if(e=q,g=a.visitor.getCustomerIDs())for(d in g)Object.prototype[d]||(f=g[d],e||(e={}),f.id&&(e[d+".id"]=f.id),f.authState&&(e[d+".as"]=f.authState));e&&(c+=a.B("cid",e))}for(a.AudienceManagement&&a.AudienceManagement.isReady()&&(c+=a.B("d",a.AudienceManagement.getEventCallConfigParams())),d=0;d<b.length;d++){if(e=b[d],g=a[e],f=e.substring(0,4),m=e.substring(4),!g&&"events"==e&&s&&(g=s,s=""),g&&(!n||0<=n.indexOf(","+e+","))){switch(e){case"supplementalDataID":e="sdid";break;case"timestamp":e="ts";break;case"dynamicVariablePrefix":e="D";break;case"visitorID":e="vid";break;case"marketingCloudVisitorID":e="mid";break;case"analyticsVisitorID":e="aid";break;case"audienceManagerLocationHint":e="aamlh";break;case"audienceManagerBlob":e="aamb";break;case"authState":e="as";break;case"pageURL":e="g",255<g.length&&(a.pageURLRest=g.substring(255),g=g.substring(0,255));break;case"pageURLRest":e="-g";break;case"referrer":e="r";break;case"vmk":case"visitorMigrationKey":e="vmt";break;case"visitorMigrationServer":e="vmf",a.ssl&&a.visitorMigrationServerSecure&&(g="");break;case"visitorMigrationServerSecure":e="vmf",!a.ssl&&a.visitorMigrationServer&&(g="");break;case"charSet":e="ce";break;case"visitorNamespace":e="ns";break;case"cookieDomainPeriods":e="cdp";break;case"cookieLifetime":e="cl";break;case"variableProvider":e="vvp";break;case"currencyCode":e="cc";break;case"channel":e="ch";break;case"transactionID":e="xact";break;case"campaign":e="v0";break;case"latitude":e="lat";break;case"longitude":e="lon";break;case"resolution":e="s";break;case"colorDepth":e="c";break;case"javascriptVersion":e="j";break;case"javaEnabled":e="v";break;case"cookiesEnabled":e="k";break;case"browserWidth":e="bw";break;case"browserHeight":e="bh";break;case"connectionType":e="ct";break;case"homepage":e="hp";break;case"events":if(s&&(g+=(""!=g?",":"")+s),r)for(m=g.split(","),g="",f=0;f<m.length;f++)p=m[f],k=p.indexOf("="),k>=0&&(p=p.substring(0,k)),k=p.indexOf(":"),k>=0&&(p=p.substring(0,k)),0<=r.indexOf(","+p+",")&&(g+=(g?",":"")+m[f]);break;case"events2":g="";break;case"contextData":c+=a.B("c",a[e],n,e),g="";break;case"lightProfileID":e="mtp";break;case"lightStoreForSeconds":e="mtss",a.lightProfileID||(g="");break;case"lightIncrementBy":e="mti",a.lightProfileID||(g="");break;case"retrieveLightProfiles":e="mtsr";break;case"deleteLightProfiles":e="mtsd";break;case"retrieveLightData":a.retrieveLightProfiles&&(c+=a.B("mts",a[e],n,e)),g="";break;default:a.za(m)&&("prop"==f?e="c"+m:"eVar"==f?e="v"+m:"list"==f?e="l"+m:"hier"==f&&(e="h"+m,g=g.substring(0,255)))}g&&(c+="&"+e+"="+("pev"!=e.substring(0,3)?a.escape(g):g))}"pev3"==e&&a.e&&(c+=a.e)}return c},a.u=function(a){var b=a.tagName;return"undefined"!=""+a.Cb||"undefined"!=""+a.sb&&"HTML"!=(""+a.sb).toUpperCase()?"":(b=b&&b.toUpperCase?b.toUpperCase():"","SHAPE"==b&&(b=""),b&&(("INPUT"==b||"BUTTON"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&(b="A")),b)},a.va=function(a){var d,f,e,b=a.href?a.href:"";return d=b.indexOf(":"),f=b.indexOf("?"),e=b.indexOf("/"),b&&(0>d||f>=0&&d>f||e>=0&&d>e)&&(f=a.protocol&&1<a.protocol.length?a.protocol:l.protocol?l.protocol:"",d=l.pathname.lastIndexOf("/"),b=(f?f+"//":"")+(a.host?a.host:l.host?l.host:"")+("/"!=h.substring(0,1)?l.pathname.substring(0,0>d?0:d)+"/":"")+b),b},a.H=function(c){var d,f,b=a.u(c),e="",g=0;return b&&(d=c.protocol,f=c.onclick,!c.href||"A"!=b&&"AREA"!=b||f&&d&&!(0>d.toLowerCase().indexOf("javascript"))?f?(e=a.replace(a.replace(a.replace(a.replace(""+f,"\r",""),"\n",""),"	","")," ",""),g=2):"INPUT"==b||"SUBMIT"==b?(c.value?e=c.value:c.innerText?e=c.innerText:c.textContent&&(e=c.textContent),g=3):c.src&&"IMAGE"==b&&(e=c.src):e=a.va(c),e)?{id:e.substring(0,100),type:g}:0},a.Ab=function(c){for(var b=a.u(c),d=a.H(c);c&&!d&&"BODY"!=b;)(c=c.parentElement?c.parentElement:c.parentNode)&&(b=a.u(c),d=a.H(c));return d&&"BODY"!=b||(c=0),c&&(b=c.onclick?""+c.onclick:"",0<=b.indexOf(".tl(")||0<=b.indexOf(".trackLink("))&&(c=0),c},a.rb=function(){var c,b,g,m,d=a.linkObject,f=a.linkType,e=a.linkURL;if(a.ha=1,d||(a.ha=0,d=a.clickObject),d){for(c=a.u(d),b=a.H(d);d&&!b&&"BODY"!=c;)(d=d.parentElement?d.parentElement:d.parentNode)&&(c=a.u(d),b=a.H(d));if(b&&"BODY"!=c||(d=0),d){var p=d.onclick?""+d.onclick:"";(0<=p.indexOf(".tl(")||0<=p.indexOf(".trackLink("))&&(d=0)}}else a.ha=1;if(!e&&d&&(e=a.va(d)),e&&!a.linkLeaveQueryString&&(g=e.indexOf("?"),g>=0&&(e=e.substring(0,g))),!f&&e){var q,n=0,r=0;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(p=e.toLowerCase(),g=p.indexOf("?"),m=p.indexOf("#"),g>=0?m>=0&&g>m&&(g=m):g=m,g>=0&&(p=p.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(","),m=0;m<g.length;m++)(q=g[m])&&p.substring(p.length-(q.length+1))=="."+q&&(f="d");if(a.trackExternalLinks&&!f&&(p=e.toLowerCase(),a.ya(p)&&(a.linkInternalFilters||(a.linkInternalFilters=k.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(","),n=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(",")),g))){for(m=0;m<g.length;m++)q=g[m],0<=p.indexOf(q)&&(r=1);r?n&&(f="e"):n||(f="e")}}a.linkObject=d,a.linkURL=e,a.linkType=f,(a.trackClickMap||a.trackInlineStats)&&(a.e="",d&&(f=a.pageName,e=1,d=d.sourceIndex,f||(f=a.pageURL,e=0),k.s_objectID&&(b.id=k.s_objectID,d=b.type=1),f&&b&&b.id&&c&&(a.e="&pid="+a.escape(f.substring(0,255))+(e?"&pidt="+e:"")+"&oid="+a.escape(b.id.substring(0,100))+(b.type?"&oidt="+b.type:"")+"&ot="+c+(d?"&oi="+d:""))))},a.ib=function(){var c=a.ha,b=a.linkType,d=a.linkURL,f=a.linkName;if(b&&(d||f)&&(b=b.toLowerCase(),"d"!=b&&"e"!=b&&(b="o"),a.pe="lnk_"+b,a.pev1=d?a.escape(d):"",a.pev2=f?a.escape(f):"",c=1),a.abort&&(c=0),a.trackClickMap||a.trackInlineStats){var m,p,k,b={},d=0,e=a.cookieRead("s_sq"),g=e?e.split("&"):0,e=0;if(g)for(m=0;m<g.length;m++)p=g[m].split("="),f=a.unescape(p[0]).split(","),p=a.unescape(p[1]),b[p]=f;if(f=a.account.split(","),c||a.e){c&&!a.e&&(e=1);for(p in b)if(!Object.prototype[p])for(m=0;m<f.length;m++)for(e&&(k=b[p].join(","),k==a.account&&(a.e+=("&"!=p.charAt(0)?"&":"")+p,b[p]=[],d=1)),g=0;g<b[p].length;g++)k=b[p][g],k==f[m]&&(e&&(a.e+="&u="+a.escape(k)+("&"!=p.charAt(0)?"&":"")+p+"&u=0"),b[p].splice(g,1),d=1);if(c||(d=1),d){e="",m=2,!c&&a.e&&(e=a.escape(f.join(","))+"="+a.escape(a.e),m=1);for(p in b)!Object.prototype[p]&&m>0&&0<b[p].length&&(e+=(e?"&":"")+a.escape(b[p].join(","))+"="+a.escape(p),m--);a.cookieWrite("s_sq",e)}}}return c},a.jb=function(){if(!a.wb){var d,f,c=new Date,b=r.location,e=f=d="",g="",m="",k="1.2",n=a.cookieWrite("s_cc","true",0)?"Y":"N",q="",s="";if(c.setUTCDate&&(k="1.3",0..toPrecision&&(k="1.5",c=[],c.forEach))){k="1.6",f=0,d={};try{f=new Iterator(d),f.next&&(k="1.7",c.reduce&&(k="1.8",k.trim&&(k="1.8.1",Date.parse&&(k="1.8.2",Object.create&&(k="1.8.5")))))
}catch(t){}}d=screen.width+"x"+screen.height,e=navigator.javaEnabled()?"Y":"N",f=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,g=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth,m=a.w.innerHeight?a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior("#default#homePage"),q=a.b.Bb(b)?"Y":"N"}catch(u){}try{a.b.addBehavior("#default#clientCaps"),s=a.b.connectionType}catch(x){}a.resolution=d,a.colorDepth=f,a.javascriptVersion=k,a.javaEnabled=e,a.cookiesEnabled=n,a.browserWidth=g,a.browserHeight=m,a.connectionType=s,a.homepage=q,a.wb=1}},a.L={},a.loadModule=function(c,b){var d=a.L[c];if(!d){d=k["AppMeasurement_Module_"+c]?new k["AppMeasurement_Module_"+c](a):{},a.L[c]=a[c]=d,d.Na=function(){return d.Ra},d.Sa=function(b){(d.Ra=b)&&(a[c+"_onLoad"]=b,a.ba(c+"_onLoad",[a,d],1)||b(a,d))};try{Object.defineProperty?Object.defineProperty(d,"onLoad",{get:d.Na,set:d.Sa}):d._olc=1}catch(f){d._olc=1}}b&&(a[c+"_onLoad"]=b,a.ba(c+"_onLoad",[a,d],1)||b(a,d))},a.l=function(c){var b,d;for(b in a.L)if(!Object.prototype[b]&&(d=a.L[b])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[c]&&d[c]()))return 1;return 0},a.mb=function(){var c=Math.floor(1e13*Math.random()),b=a.visitorSampling,d=a.visitorSamplingGroup,d="s_vsn_"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?"_"+d:""),f=a.cookieRead(d);if(b){if(f&&(f=parseInt(f)),!f){if(!a.cookieWrite(d,c))return 0;f=c}if(f%1e4>v)return 0}return 1},a.M=function(c,b){var d,f,e,g,m,k;for(d=0;2>d;d++)for(f=d>0?a.oa:a.c,e=0;e<f.length;e++)if(g=f[e],(m=c[g])||c["!"+g]){if(!b&&("contextData"==g||"retrieveLightData"==g)&&a[g])for(k in a[g])m[k]||(m[k]=a[g][k]);a[g]=m}},a.Ga=function(c,b){var d,f,e,g;for(d=0;2>d;d++)for(f=d>0?a.oa:a.c,e=0;e<f.length;e++)g=f[e],c[g]=a[g],b||c[g]||(c["!"+g]=1)},a.cb=function(a){var b,d,f,e,g,k,m=0,n="",q="";if(a&&255<a.length&&(b=""+a,d=b.indexOf("?"),d>0&&(k=b.substring(d+1),b=b.substring(0,d),e=b.toLowerCase(),f=0,"http://"==e.substring(0,7)?f+=7:"https://"==e.substring(0,8)&&(f+=8),d=e.indexOf("/",f),d>0&&(e=e.substring(f,d),g=b.substring(d),b=b.substring(0,d),0<=e.indexOf("google")?m=",q,ie,start,search_key,word,kw,cd,":0<=e.indexOf("yahoo.co")&&(m=",p,ei,"),m&&k)))){if((a=k.split("&"))&&1<a.length){for(f=0;f<a.length;f++)e=a[f],d=e.indexOf("="),d>0&&0<=m.indexOf(","+e.substring(0,d)+",")?n+=(n?"&":"")+e:q+=(q?"&":"")+e;n&&q?k=n+"&"+q:q=""}d=253-(k.length-q.length)-b.length,a=b+(d>0?g.substring(0,d):"")+"?"+k}return a},a.Ma=function(c){var b=a.d.visibilityState,d=["webkitvisibilitychange","visibilitychange"];if(b||(b=a.d.webkitVisibilityState),b&&"prerender"==b){if(c)for(b=0;b<d.length;b++)a.d.addEventListener(d[b],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState),"visible"==b&&c()});return!1}return!0},a.Y=!1,a.D=!1,a.Ta=function(){a.D=!0,a.i()},a.W=!1,a.Q=!1,a.Qa=function(c){a.marketingCloudVisitorID=c,a.Q=!0,a.i()},a.T=!1,a.N=!1,a.Ia=function(c){a.analyticsVisitorID=c,a.N=!0,a.i()},a.V=!1,a.P=!1,a.Ka=function(c){a.audienceManagerLocationHint=c,a.P=!0,a.i()},a.U=!1,a.O=!1,a.Ja=function(c){a.audienceManagerBlob=c,a.O=!0,a.i()},a.La=function(c){return a.maxDelay||(a.maxDelay=250),a.l("_d")?(c&&setTimeout(function(){c()},a.maxDelay),!1):!0},a.X=!1,a.C=!1,a.na=function(){a.C=!0,a.i()},a.isReadyToTrack=function(){var c=!0,b=a.visitor;return a.Y||a.D||(a.Ma(a.Ta)?a.D=!0:a.Y=!0),a.Y&&!a.D?!1:(b&&b.isAllowed()&&(a.W||a.marketingCloudVisitorID||!b.getMarketingCloudVisitorID||(a.W=!0,a.marketingCloudVisitorID=b.getMarketingCloudVisitorID([a,a.Qa]),a.marketingCloudVisitorID&&(a.Q=!0)),a.T||a.analyticsVisitorID||!b.getAnalyticsVisitorID||(a.T=!0,a.analyticsVisitorID=b.getAnalyticsVisitorID([a,a.Ia]),a.analyticsVisitorID&&(a.N=!0)),a.V||a.audienceManagerLocationHint||!b.getAudienceManagerLocationHint||(a.V=!0,a.audienceManagerLocationHint=b.getAudienceManagerLocationHint([a,a.Ka]),a.audienceManagerLocationHint&&(a.P=!0)),a.U||a.audienceManagerBlob||!b.getAudienceManagerBlob||(a.U=!0,a.audienceManagerBlob=b.getAudienceManagerBlob([a,a.Ja]),a.audienceManagerBlob&&(a.O=!0)),a.W&&!a.Q&&!a.marketingCloudVisitorID||a.T&&!a.N&&!a.analyticsVisitorID||a.V&&!a.P&&!a.audienceManagerLocationHint||a.U&&!a.O&&!a.audienceManagerBlob)&&(c=!1),a.X||a.C||(a.La(a.na)?a.C=!0:a.X=!0),a.X&&!a.C&&(c=!1),c)},a.k=q,a.o=0,a.callbackWhenReadyToTrack=function(c,b,d){var f;f={},f.Xa=c,f.Wa=b,f.Ua=d,a.k==q&&(a.k=[]),a.k.push(f),0==a.o&&(a.o=setInterval(a.i,100))},a.i=function(){var c;if(a.isReadyToTrack()&&(a.o&&(clearInterval(a.o),a.o=0),a.k!=q))for(;0<a.k.length;)c=a.k.shift(),c.Wa.apply(c.Xa,c.Ua)},a.Oa=function(c){var b,d,f=q,e=q;if(!a.isReadyToTrack()){if(b=[],c!=q)for(d in f={},c)f[d]=c[d];return e={},a.Ga(e,!0),b.push(f),b.push(e),a.callbackWhenReadyToTrack(a,a.track,b),!0}return!1},a.gb=function(){var f,c=a.cookieRead("s_fid"),b="",d="";f=8;var e=4;if(!c||0>c.indexOf("-")){for(c=0;16>c;c++)f=Math.floor(Math.random()*f),b+="0123456789ABCDEF".substring(f,f+1),f=Math.floor(Math.random()*e),d+="0123456789ABCDEF".substring(f,f+1),f=e=16;c=b+"-"+d}return a.cookieWrite("s_fid",c,1)||(c=0),c},a.t=a.track=function(c,b){var d,f=new Date,e="s"+Math.floor(f.getTime()/108e5)%10+Math.floor(1e13*Math.random()),g=f.getYear(),g="t="+a.escape(f.getDate()+"/"+f.getMonth()+"/"+(1900>g?g+1900:g)+" "+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds()+" "+f.getDay()+" "+f.getTimezoneOffset());a.visitor&&(a.visitor.eb&&(a.authState=a.visitor.eb()),!a.supplementalDataID&&a.visitor.getSupplementalDataID&&(a.supplementalDataID=a.visitor.getSupplementalDataID("AppMeasurement:"+a._in,a.expectSupplementalData?!1:!0))),a.l("_s"),a.Oa(c)||(b&&a.M(b),c&&(d={},a.Ga(d,0),a.M(c)),a.mb()&&(a.analyticsVisitorID||a.marketingCloudVisitorID||(a.fid=a.gb()),a.rb(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&(a.abort||(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(f.getTime()/1e3)),f=k.location,a.pageURL||(a.pageURL=f.href?f.href:f),a.referrer||a.Ha||(a.referrer=r.document.referrer),a.Ha=1,a.referrer=a.cb(a.referrer),a.l("_g")),a.ib()&&!a.abort&&(a.jb(),g+=a.hb(),a.qb(e,g),a.l("_t"),a.referrer=""))),c&&a.M(d,1)),a.abort=a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=k.s_objectID=a.pe=a.pev1=a.pev2=a.pev3=a.e=a.lightProfileID=0},a.tl=a.trackLink=function(c,b,d,f,e){return a.linkObject=c,a.linkType=b,a.linkName=d,e&&(a.j=c,a.q=e),a.track(f)},a.trackLight=function(c,b,d,f){return a.lightProfileID=c,a.lightStoreForSeconds=b,a.lightIncrementBy=d,a.track(f)},a.clearVars=function(){var c,b;for(c=0;c<a.c.length;c++)b=a.c[c],("prop"==b.substring(0,4)||"eVar"==b.substring(0,4)||"hier"==b.substring(0,4)||"list"==b.substring(0,4)||"channel"==b||"events"==b||"eventList"==b||"products"==b||"productList"==b||"purchaseID"==b||"transactionID"==b||"state"==b||"zip"==b||"campaign"==b)&&(a[b]=void 0)},a.tagContainerMarker="",a.qb=function(c,b){var d,f=a.trackingServer;d="";var e=a.dc,g="sc.",k=a.visitorNamespace;f?a.trackingServerSecure&&a.ssl&&(f=a.trackingServerSecure):(k||(k=a.account,f=k.indexOf(","),f>=0&&(k=k.substring(0,f)),k=k.replace(/[^A-Za-z0-9]/g,"")),d||(d="2o7.net"),e=e?(""+e).toLowerCase():"d1","2o7.net"==d&&("d1"==e?e="112":"d2"==e&&(e="122"),g=""),f=k+"."+e+"."+g+d),d=a.ssl?"https://":"http://",e=a.AudienceManagement&&a.AudienceManagement.isReady(),d+=f+"/b/ss/"+a.account+"/"+(a.mobile?"5.":"")+(e?"10":"1")+"/JS-"+a.version+(a.vb?"T":"")+(a.tagContainerMarker?"-"+a.tagContainerMarker:"")+"/"+c+"?AQB=1&ndh=1&pf=1&"+(e?"callback=s_c_il["+a._in+"].AudienceManagement.passData&":"")+b+"&AQE=1",a.ab(d),a.da()},a.ab=function(c){a.g||a.kb(),a.g.push(c),a.fa=a.r(),a.Fa()},a.kb=function(){a.g=a.nb(),a.g||(a.g=[])},a.nb=function(){var c,b;if(a.ka()){try{(b=k.localStorage.getItem(a.ia()))&&(c=k.JSON.parse(b))}catch(d){}return c}},a.ka=function(){var c=!0;return a.trackOffline&&a.offlineFilename&&k.localStorage&&k.JSON||(c=!1),c},a.wa=function(){var c=0;return a.g&&(c=a.g.length),a.v&&c++,c},a.da=function(){if(!a.v)if(a.xa=q,a.ja)a.fa>a.J&&a.Da(a.g),a.ma(500);else{var c=a.Va();c>0?a.ma(c):(c=a.ua())&&(a.v=1,a.pb(c),a.tb(c))}},a.ma=function(c){a.xa||(c||(c=0),a.xa=setTimeout(a.da,c))},a.Va=function(){var c;return!a.trackOffline||0>=a.offlineThrottleDelay?0:(c=a.r()-a.Ca,a.offlineThrottleDelay<c?0:a.offlineThrottleDelay-c)},a.ua=function(){return 0<a.g.length?a.g.shift():void 0},a.pb=function(c){if(a.debugTracking){var b="AppMeasurement Debug: "+c;c=c.split("&");var d;for(d=0;d<c.length;d++)b+="\n	"+a.unescape(c[d]);a.ob(b)}},a.Pa=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID},a.S=!1;var s;try{s=JSON.parse('{"x":"y"}')}catch(x){s=null}s&&"y"==s.x?(a.S=!0,a.R=function(a){return JSON.parse(a)}):k.$&&k.$.parseJSON?(a.R=function(a){return k.$.parseJSON(a)},a.S=!0):a.R=function(){return null},a.tb=function(c){var b,d,f;if(a.Pa()&&2047<c.length&&("undefined"!=typeof XMLHttpRequest&&(b=new XMLHttpRequest,"withCredentials"in b?d=1:b=0),b||"undefined"==typeof XDomainRequest||(b=new XDomainRequest,d=2),b&&a.AudienceManagement&&a.AudienceManagement.isReady()&&(a.S?b.pa=!0:b=0)),!b&&a.lb&&(c=c.substring(0,2047)),!b&&a.d.createElement&&a.AudienceManagement&&a.AudienceManagement.isReady()&&(b=a.d.createElement("SCRIPT"))&&"async"in b&&((f=(f=a.d.getElementsByTagName("HEAD"))&&f[0]?f[0]:a.d.body)?(b.type="text/javascript",b.setAttribute("async","async"),d=3):b=0),b||(b=new Image,b.alt=""),b.ra=function(){try{a.la&&(clearTimeout(a.la),a.la=0),b.timeout&&(clearTimeout(b.timeout),b.timeout=0)}catch(c){}},b.onload=b.ub=function(){if(b.ra(),a.$a(),a.Z(),a.v=0,a.da(),b.pa){b.pa=!1;try{var c=a.R(b.responseText);AudienceManagement.passData(c)}catch(d){}}},b.onabort=b.onerror=b.bb=function(){b.ra(),(a.trackOffline||a.ja)&&a.v&&a.g.unshift(a.Za),a.v=0,a.fa>a.J&&a.Da(a.g),a.Z(),a.ma(500)},b.onreadystatechange=function(){4==b.readyState&&(200==b.status?b.ub():b.bb())},a.Ca=a.r(),1==d||2==d){var e=c.indexOf("?");f=c.substring(0,e),e=c.substring(e+1),e=e.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),1==d?(b.open("POST",f,!0),b.send(e)):2==d&&(b.open("POST",f),b.send(e))}else if(b.src=c,3==d){if(a.Aa)try{f.removeChild(a.Aa)}catch(g){}f.firstChild?f.insertBefore(b,f.firstChild):f.appendChild(b),a.Aa=a.Ya}b.abort&&(a.la=setTimeout(b.abort,5e3)),a.Za=c,a.Ya=k["s_i_"+a.replace(a.account,",","_")]=b,(a.useForcedLinkTracking&&a.F||a.q)&&(a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=250),a.aa=setTimeout(a.Z,a.forcedLinkTrackingTimeout))},a.$a=function(){if(a.ka()&&!(a.Ba>a.J))try{k.localStorage.removeItem(a.ia()),a.Ba=a.r()}catch(c){}},a.Da=function(c){if(a.ka()){a.Fa();try{k.localStorage.setItem(a.ia(),k.JSON.stringify(c)),a.J=a.r()}catch(b){}}},a.Fa=function(){if(a.trackOffline)for((!a.offlineLimit||0>=a.offlineLimit)&&(a.offlineLimit=10);a.g.length>a.offlineLimit;)a.ua()},a.forceOffline=function(){a.ja=!0},a.forceOnline=function(){a.ja=!1},a.ia=function(){return a.offlineFilename+"-"+a.visitorNamespace+a.account},a.r=function(){return(new Date).getTime()},a.ya=function(a){return a=a.toLowerCase(),0!=a.indexOf("#")&&0!=a.indexOf("about:")&&0!=a.indexOf("opera:")&&0!=a.indexOf("javascript:")?!0:!1},a.setTagContainer=function(c){var b,d,f;for(a.vb=c,b=0;b<a._il.length;b++)if((d=a._il[b])&&"s_l"==d._c&&d.tagContainerName==c){if(a.M(d),d.lmq)for(b=0;b<d.lmq.length;b++)f=d.lmq[b],a.loadModule(f.n);if(d.ml)for(f in d.ml)if(a[f])for(b in c=a[f],f=d.ml[f])!Object.prototype[b]&&("function"!=typeof f[b]||0>(""+f[b]).indexOf("s_c_il"))&&(c[b]=f[b]);if(d.mmq)for(b=0;b<d.mmq.length;b++)f=d.mmq[b],a[f.m]&&(c=a[f.m],c[f.f]&&"function"==typeof c[f.f]&&(f.a?c[f.f].apply(c,f.a):c[f.f].apply(c)));if(d.tq)for(b=0;b<d.tq.length;b++)a.track(d.tq[b]);d.s=a;break}},a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,getQueryParam:function(c,b,d){var f;return b||(b=a.pageURL?a.pageURL:k.location),d||(d="&"),c&&b&&(b=""+b,f=b.indexOf("?"),f>=0&&(b=d+b.substring(f+1)+d,f=b.indexOf(d+c+"="),f>=0&&(b=b.substring(f+d.length+c.length+1),f=b.indexOf(d),f>=0&&(b=b.substring(0,f)),0<b.length)))?a.unescape(b):""}},a.A="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData pe pev1 pev2 pev3 pageURLRest".split(" "),a.c=a.A.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" ")),a.ga="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" "),a.K=a.ga.slice(0),a.oa="account allAccounts debugTracking visitor trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData AudienceManagement".split(" ");for(n=0;250>=n;n++)76>n&&(a.c.push("prop"+n),a.K.push("prop"+n)),a.c.push("eVar"+n),a.K.push("eVar"+n),6>n&&a.c.push("hier"+n),4>n&&a.c.push("list"+n);n="latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage".split(" "),a.c=a.c.concat(n),a.A=a.A.concat(n),a.ssl=0<=k.location.protocol.toLowerCase().indexOf("https"),a.charSet="UTF-8",a.contextData={},a.offlineThrottleDelay=0,a.offlineFilename="AppMeasurement.offline",a.Ca=0,a.fa=0,a.J=0,a.Ba=0,a.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",a.w=k,a.d=k.document;try{a.lb="Microsoft Internet Explorer"==navigator.appName}catch(y){}a.Z=function(){a.aa&&(k.clearTimeout(a.aa),a.aa=q),a.j&&a.F&&a.j.dispatchEvent(a.F),a.q&&("function"==typeof a.q?a.q():a.j&&a.j.href&&(a.d.location=a.j.href)),a.j=a.F=a.q=0},a.Ea=function(){a.b=a.d.body,a.b?(a.p=function(c){var b,d,f,e,g;if(!(a.d&&a.d.getElementById("cppXYctnr")||c&&c["s_fe_"+a._in])){if(a.qa){if(!a.useForcedLinkTracking)return a.b.removeEventListener("click",a.p,!0),void(a.qa=a.useForcedLinkTracking=0);a.b.removeEventListener("click",a.p,!1)}else a.useForcedLinkTracking=0;a.clickObject=c.srcElement?c.srcElement:c.target;try{if(!a.clickObject||a.I&&a.I==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||a.clickObject.parentNode))a.clickObject=0;else{var m=a.I=a.clickObject;if(a.ea&&(clearTimeout(a.ea),a.ea=0),a.ea=setTimeout(function(){a.I==m&&(a.I=0)},1e4),f=a.wa(),a.track(),f<a.wa()&&a.useForcedLinkTracking&&c.target){for(e=c.target;e&&e!=a.b&&"A"!=e.tagName.toUpperCase()&&"AREA"!=e.tagName.toUpperCase();)e=e.parentNode;if(e&&(g=e.href,a.ya(g)||(g=0),d=e.target,c.target.dispatchEvent&&g&&(!d||"_self"==d||"_top"==d||"_parent"==d||k.name&&d==k.name))){try{b=a.d.createEvent("MouseEvents")}catch(n){b=new k.MouseEvent}if(b){try{b.initMouseEvent("click",c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}catch(q){b=0}b&&(b["s_fe_"+a._in]=b.s_fe=1,c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),a.j=c.target,a.F=b)}}}}}catch(r){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.p):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&a.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&k.MouseEvent)&&(a.qa=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.p,!0)),a.b.addEventListener("click",a.p,!1))):setTimeout(a.Ea,30)},a.Ea()}function s_gi(a){var k,r,n,u,s,q=window.s_c_il,t=a.split(","),x=0;if(q)for(r=0;!x&&r<q.length;){if(k=q[r],"s_c"==k._c&&(k.account||k.oun))if(k.account&&k.account==a)x=1;else for(n=k.account?k.account:k.oun,n=k.allAccounts?k.allAccounts:n.split(","),u=0;u<t.length;u++)for(s=0;s<n.length;s++)t[u]==n[s]&&(x=1);r++}return x||(k=new AppMeasurement),k.setAccount?k.setAccount(a):k.sa&&k.sa(a),k}function s_pgicq(){var q,r,n,a=window,k=a.s_giq;if(k)for(q=0;q<k.length;q++)r=k[q],n=s_gi(r.oun),n.setAccount(r.un),n.setTagContainer(r.tagContainerName);a.s_giq=0}window.AppMeasurement=AppMeasurement,window.bf_s=new AppMeasurement,bf_s.lastUpdated="2015.09.14",bf_s.account="www.buzzfeed.com"==document.domain?"buzzfeedprod":"buzzfeeddev",bf_s.debugTracking=!1,bf_s.trackingServer="buzzfeed.d1.sc.omtrdc.net",bf_s.visitorNamespace="buzzfeed",bf_s.trackDownloadLinks=!0,bf_s.trackExternalLinks=!0,bf_s.trackInlineStats=!0,bf_s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",bf_s.linkInternalFilters="javascript:,buzzfeed.com",bf_s.linkLeaveQueryString=!0,bf_s.linkTrackVars="None",bf_s.linkTrackEvents="None",bf_s.usePlugins=!0,bf_s.dynamicVariablePrefix="D=",bf_s.pvel="event22,event23,event24",bf_s.trackEveryCall=["prop1","eVar1","prop2","eVar2","prop4","eVar4","eVar5","eVar6","prop20","eVar20","eVar21","prop22","eVar22","prop23","eVar23","prop24","eVar24","prop25","eVar25","prop26","eVar26","prop31","eVar31","prop32","prop33","eVar33","prop34","eVar34","prop35","eVar35","prop36","eVar36","prop37","eVar37","prop38","eVar38","prop39","prop40","eVar40","prop45","eVar45","prop49","eVar49","prop75","eVar75"],window.VisitorAPIVisitor&&window.VisitorAPIVisitor instanceof Visitor&&(bf_s.visitor=window.VisitorAPIVisitor),bf_s.doPlugins=s_doPlugins,bf_s._tpDST={2013:"3/10,11/3",2014:"3/9,11/2",2015:"3/8,11/1",2016:"3/13,11/6",2017:"3/12,11/5",2018:"3/11,11/4",2019:"3/10,11/3",2020:"3/8,11/1",2021:"3/14,11/7",2022:"3/13,11/6",2023:"3/12,11/5",2024:"3/10,11/3",2025:"3/9,11/2",2026:"3/8,11/1",2027:"3/14,11/7",2028:"3/12,11/5",2029:"3/11,11/4",2030:"3/10,11/3",2031:"3/9,11/2",2032:"3/14,11/7",2033:"3/13,11/6",2034:"3/12,11/5",2035:"3/11,11/4",2036:"3/9,11/2",2037:"3/8,11/1",2038:"3/14,11/7",2039:"3/13,11/6",2040:"3/11,11/4"},bf_s.getTimeParting=new Function("h","z","var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMonth()!=0){return'Data Not Available';}else{var H,M,D,U,ds,de,tm,da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d=new Date();z=z?z:0;z=parseFloat(z);if(s._tpDST){var dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&&d>ds&&d<de){z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d.getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();U=' AM';if(H>=12){U=' PM';H=H-12;}if(H==0){H=12;}D=da[D];tm=H+':'+M+U;return(tm+'|'+D);}"),bf_s.getLoadTime=function(){if(!window.s_loadT){var b=(new Date).getTime(),o=window.performance?performance.timing:0,a=o?o.requestStart:window.inHeadTS||0;s_loadT=a?Math.round((b-a)/100):""}return s_loadT},bf_s.inList=function(f,a,d,e){var b=[],c=0;if(d=d?d:",",e=e?String(e):"","undefined"!=typeof a&&("string"==typeof a||a instanceof String))if(this.split)b=this.split(a,d);else{if(!a.split)return-1;b=a.split(d)}else{if("undefined"==typeof a||!("array"==typeof a||a instanceof Array))return!1;b=a}for(;c<b.length;){if(f==(e&&("string"==typeof b[c]||b[c]instanceof String)?b[c].split(e)[0]:b[c]))return!0;c++}return!1},bf_s.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),bf_s.apl=new Function("l","v","d","u","var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)l=l?l+d+v:v;return l"),bf_s.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),bf_s.getVisitStart=new Function("c","var s=this,n,t=new Date;if(typeof s.callType=='function'&&s.callType()=='+')return 0;if(!c)c='s_visit';t.setTime(t.getTime()+18e5);n=s.c_r(c)?0:1;if(!s.c_w(c,1,t))s.c_w(c,1,0);if(!s.c_r(c))n=0;return n"),bf_s.getPageVisibility=new Function("","var s=this;if(s.getVisitStart()){s.Util.cookieWrite('s_pvs','');s.Util.cookieWrite('s_tps','');}if(s.Util.cookieRead('s_pvs')&&s.pvt<1){if(parseInt(s.Util.cookieRead('s_pvs'))<=parseInt(s.Util.cookieRead('s_tps'))){s.pve=s.pvel.split(',');s.events=s.apl(s.events,s.pve[0]+'='+(parseInt(s.Util.cookieRead('s_pvs'))),',',2);s.Util.cookieWrite('s_pvs','');s.events=s.apl(s.events,s.pve[1]+'='+(parseInt(s.Util.cookieRead('s_tps'))),',',2);s.Util.cookieWrite('s_tps','');s.events=s.apl(s.events,s.pve[2],',',2);}}s.pvi=setInterval(s.pvx,1000);s.wpvi=setInterval(s.wpvc,5000);"),bf_s.gbp=new Function("","if('hidden'in document){return null;}var bp=['moz','ms','o','webkit'];for(var i=0;i<bp.length;i++){var p=bp[i]+'Hidden';if(p in document){return bp[i];}}return null;"),bf_s.hp=new Function("p","if(p){return p+'Hidden';}else{return'hidden';}"),bf_s.vs=new Function("p","if(p){return p+'VisibilityState';}else{return'visibilityState';}"),bf_s.ve=new Function("p","if(p){return p+'visibilitychange';}else{return'visibilitychange';}"),bf_s.pvx=new Function("","bf_s.pvt+=1;"),bf_s.wpvc=function(){var tempDate=Date.now();bf_s.Util.cookieWrite("s_tps",Math.ceil((tempDate-bf_s.totalTime)/1e3)),bf_s.Util.cookieWrite("s_pvs",bf_s.pvt)},document.addEventListener("visibilitychange",function(){var s=bf_s;document.hidden?(s.visibility=!1,clearTimeout(bf_s.pvi)):(s.visibility=!0,s.pvi=setInterval(s.pvx,1e3))}),bf_s.totalTime=new Date,bf_s.pvt=0,bf_s.prefix=bf_s.gbp,bf_s.hidden=bf_s.hp(bf_s.prefix),bf_s.visibility=!0,bf_s.visibilityState=bf_s.vs(bf_s.prefix),bf_s.visibilityEvent=bf_s.ve(bf_s.prefix),AppMeasurement.getInstance=s_gi,window.s_objectID||(window.s_objectID=0),s_pgicq(),browserify_shim__define__module__export__("undefined"!=typeof bf_s?bf_s:window.bf_s)}).call(global,void 0,void 0,void 0,void 0,function(ex){module.exports=ex})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(require,module,exports){(function(global){(function(module,define){(function(){function baseToString(value){return null==value?"":value+""}function charsLeftIndex(string,chars){for(var index=-1,length=string.length;++index<length&&chars.indexOf(string.charAt(index))>-1;);return index}function charsRightIndex(string,chars){for(var index=string.length;index--&&chars.indexOf(string.charAt(index))>-1;);return index}function isObjectLike(value){return!!value&&"object"==typeof value}function isSpace(charCode){return 160>=charCode&&charCode>=9&&13>=charCode||32==charCode||160==charCode||5760==charCode||6158==charCode||charCode>=8192&&(8202>=charCode||8232==charCode||8233==charCode||8239==charCode||8287==charCode||12288==charCode||65279==charCode)}function trimmedLeftIndex(string){for(var index=-1,length=string.length;++index<length&&isSpace(string.charCodeAt(index)););return index}function trimmedRightIndex(string){for(var index=string.length;index--&&isSpace(string.charCodeAt(index)););return index}function lodash(){}function arrayCopy(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function arrayEach(array,iteratee){for(var index=-1,length=array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}function arrayEvery(array,predicate){for(var index=-1,length=array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function baseAssign(object,source){return null==source?object:baseCopy(source,keys(source),object)}function baseCopy(source,props,object){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;return"function"==type?thisArg===undefined?func:bindCallback(func,thisArg,argCount):null==func?identity:"object"==type?baseMatches(func):thisArg===undefined?property(func):baseMatchesProperty(func,thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer&&(result=object?customizer(value,key,object):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return arrayCopy(value,result)}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag!=objectTag&&tag!=argsTag&&(!isFunc||object))return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{};if(isHostObject(value))return object?value:{};if(result=initCloneObject(isFunc?{}:value),!isDeep)return baseAssign(result,value)}stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];return stackA.push(value),stackB.push(result),(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)}),result}function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseGet(object,path,pathKey){if(null!=object){object=toObject(object),pathKey!==undefined&&pathKey in object&&(path=[pathKey]);for(var index=0,length=path.length;null!=object&&length>index;)object=toObject(object)[path[index++]];return index&&index==length?object:undefined}}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){return value===other?!0:null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag==argsTag?objTag=objectTag:objTag!=objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag==argsTag?othTag=objectTag:othTag!=objectTag&&(othIsArr=isTypedArray(other)));var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB)}if(!isSameTag)return!1;stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==object)return stackB[length]==other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=toObject(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else{var result=customizer?customizer(objValue,srcValue,key):undefined;if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,!0):result))return!1}}return!0}function baseMatches(source){var matchData=getMatchData(source);if(1==matchData.length&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){return null==object?!1:(object=toObject(object),object[key]===value&&(value!==undefined||key in object))}}return function(object){return baseIsMatch(object,matchData)}}function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=path+"";return path=toPath(path),function(object){if(null==object)return!1;var key=pathKey;if(object=toObject(object),!(!isArr&&isCommon||key in object)){if(object=1==path.length?object:baseGet(object,baseSlice(path,0,-1)),null==object)return!1;key=last(path),object=toObject(object)}return object[key]===srcValue?srcValue!==undefined||key in object:baseIsEqual(srcValue,object[key],undefined,!0)}}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object))return object;var isSrcArr=isArrayLike(source)&&(isArray(source)||isTypedArray(source)),props=isSrcArr?undefined:keys(source);return arrayEach(props||source,function(srcValue,key){if(props&&(key=srcValue,srcValue=source[key]),isObjectLike(srcValue))stackA||(stackA=[]),stackB||(stackB=[]),baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB);else{var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;isCommon&&(result=srcValue),result===undefined&&(!isSrcArr||key in object)||!isCommon&&(result===result?result===value:value!==value)||(object[key]=result)}}),object}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){for(var length=stackA.length,srcValue=source[key];length--;)if(stackA[length]==srcValue)return void(object[key]=stackB[length]);var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;isCommon&&(result=srcValue,isArrayLike(srcValue)&&(isArray(srcValue)||isTypedArray(srcValue))?result=isArray(value)?value:isArrayLike(value)?arrayCopy(value):[]:isPlainObject(srcValue)||isArguments(srcValue)?result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{}:isCommon=!1),stackA.push(srcValue),stackB.push(result),isCommon?object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB):(result===result?result!==value:value===value)&&(object[key]=result)}function baseProperty(key){return function(object){return null==object?undefined:toObject(object)[key]}}function basePropertyDeep(path){var pathKey=path+"";return path=toPath(path),function(object){return baseGet(object,path,pathKey)}}function basePullAt(array,indexes){for(var length=array?indexes.length:0;length--;){var index=indexes[length];if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1)}}return array}function baseSlice(array,start,end){var index=-1,length=array.length;start=null==start?0:+start||0,0>start&&(start=-start>length?0:length+start),end=end===undefined||end>length?length:+end||0,0>end&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function bindCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if(thisArg===undefined)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)
};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){var result=new ArrayBuffer(buffer.byteLength),view=new Uint8Array(result);return view.set(new Uint8Array(buffer)),result}function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=null==object?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;for("function"==typeof customizer?(customizer=bindCallback(customizer,thisArg,5),length-=2):(customizer="function"==typeof thisArg?thisArg:undefined,length-=customizer?1:0),guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=3>length?undefined:customizer,length=1);++index<length;){var source=sources[index];source&&assigner(object,source,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length))return eachFunc(collection,iteratee);for(var index=fromRight?length:-1,iterable=toObject(collection);(fromRight?index--:++index<length)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:++index<length;){var key=props[index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return"function"==typeof iteratee&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength))return!1;for(;++index<arrLength;){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):undefined;if(result!==undefined){if(result)continue;return!1}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}))return!1}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))return!1}return!0}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+""}return!1}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key)))return!1}for(var skipCtor=isLoose;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):undefined;if(!(result===undefined?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result))return!1;skipCtor||(skipCtor="constructor"==key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor))return!1}return!0}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;return result=result===callback?baseCallback:result,argCount?result(func,thisArg,argCount):result}function getMatchData(object){for(var result=pairs(object),length=result.length;length--;)result[length][2]=isStrictComparable(result[length][1]);return result}function getNative(object,key){var value=null==object?undefined:object[key];return isNative(value)?value:undefined}function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){var Ctor=object.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor||(Ctor=Object),new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:Ctor instanceof Ctor&&(Ctor=ctorByTag[tag]);var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function isArrayLike(value){return null!=value&&isLength(getLength(value))}function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&length>value}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;if("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object){var other=object[index];return value===value?value===other:other!==other}return!1}function isKey(value,object){var type=typeof value;if("string"==type&&reIsPlainProp.test(value)||"number"==type)return!0;if(isArray(value))return!1;var result=!reIsDeepProp.test(value);return result||null!=object&&value in toObject(object)}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isStrictComparable(value){return value===value&&!isObject(value)}function shimKeys(object){for(var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object)||isString(object)),index=-1,result=[];++index<propsLength;){var key=props[index];(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key))&&result.push(key)}return result}function toObject(value){if(lodash.support.unindexedChars&&isString(value)){for(var index=-1,length=value.length,result=Object(value);++index<length;)result[index]=value.charAt(index);return result}return isObject(value)?value:Object(value)}function toPath(value){if(isArray(value))return value;var result=[];return baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function remove(array,predicate,thisArg){var result=[];if(!array||!array.length)return result;var index=-1,indexes=[],length=array.length;for(predicate=getCallback(predicate,thisArg,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}return basePullAt(array,indexes),result}function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;return thisArg&&isIterateeCall(collection,predicate,thisArg)&&(predicate=undefined),("function"!=typeof predicate||thisArg!==undefined)&&(predicate=getCallback(predicate,thisArg,3)),func(collection,predicate)}function restParam(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=nativeMax(start===undefined?func.length-1:+start||0,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);++index<length;)rest[index]=args[start+index];switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);for(index=-1;++index<start;)otherArgs[index]=args[index];return otherArgs[start]=rest,func.apply(this,otherArgs)}}function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isNative(value){return null==value?!1:isFunction(value)?reIsNative.test(fnToString.call(value)):isObjectLike(value)&&(isHostObject(value)?reIsNative:reIsHostCtor).test(value)}function isPlainObject(value){var Ctor;if(!isObjectLike(value)||objToString.call(value)!=objectTag||isHostObject(value)||isArguments(value)||!hasOwnProperty.call(value,"constructor")&&(Ctor=value.constructor,"function"==typeof Ctor&&!(Ctor instanceof Ctor)))return!1;var result;return lodash.support.ownLast?(baseForIn(value,function(subValue,key,object){return result=hasOwnProperty.call(object,key),!1}),result!==!1):(baseForIn(value,function(subValue,key){result=key}),result===undefined||hasOwnProperty.call(value,result))}function isString(value){return"string"==typeof value||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function isUndefined(value){return value===undefined}function toPlainObject(value){return baseCopy(value,keysIn(value))}function get(object,path,defaultValue){var result=null==object?undefined:baseGet(object,toPath(path),path+"");return result===undefined?defaultValue:result}function has(object,path){if(null==object)return!1;var result=hasOwnProperty.call(object,path);if(!result&&!isKey(path)){if(path=toPath(path),object=1==path.length?object:baseGet(object,baseSlice(path,0,-1)),null==object)return!1;path=last(path),result=hasOwnProperty.call(object,path)}return result||isLength(object.length)&&isIndex(path,object.length)&&(isArray(object)||isArguments(object)||isString(object))}function keysIn(object){if(null==object)return[];isObject(object)||(object=Object(object));var length=object.length,support=lodash.support;length=length&&isLength(length)&&(isArray(object)||isArguments(object)||isString(object))&&length||0;for(var Ctor=object.constructor,index=-1,proto=isFunction(Ctor)&&Ctor.prototype||objectProto,isProto=proto===object,result=Array(length),skipIndexes=length>0,skipErrorProps=support.enumErrorProps&&(object===errorProto||object instanceof Error),skipProto=support.enumPrototypes&&isFunction(object);++index<length;)result[index]=index+"";for(var key in object)skipProto&&"prototype"==key||skipErrorProps&&("message"==key||"name"==key)||skipIndexes&&isIndex(key,length)||"constructor"==key&&(isProto||!hasOwnProperty.call(object,key))||result.push(key);if(support.nonEnumShadows&&object!==objectProto){var tag=object===stringProto?stringTag:object===errorProto?errorTag:objToString.call(object),nonEnums=nonEnumProps[tag]||nonEnumProps[objectTag];for(tag==objectTag&&(proto=objectProto),length=shadowProps.length;length--;){key=shadowProps[length];var nonEnum=nonEnums[key];isProto&&nonEnum||(nonEnum?!hasOwnProperty.call(object,key):object[key]===proto[key])||result.push(key)}}return result}function pairs(object){object=toObject(object);for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}function set(object,path,value){if(null==object)return object;var pathKey=path+"";path=null!=object[pathKey]||isKey(path,object)?[pathKey]:toPath(path);for(var index=-1,length=path.length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var key=path[index];isObject(nested)&&(index==lastIndex?nested[key]=value:null==nested[key]&&(nested[key]=isIndex(path[index+1])?[]:{})),nested=nested[key]}return object}function startsWith(string,target,position){return string=baseToString(string),position=null==position?0:nativeMin(0>position?0:+position||0,string.length),string.lastIndexOf(target,position)==position}function trim(string,chars,guard){var value=string;return(string=baseToString(string))?(guard?isIterateeCall(value,chars,guard):null==chars)?string.slice(trimmedLeftIndex(string),trimmedRightIndex(string)+1):(chars+="",string.slice(charsLeftIndex(string,chars),charsRightIndex(string,chars)+1)):string}function callback(func,thisArg,guard){return guard&&isIterateeCall(func,thisArg,guard)&&(thisArg=undefined),isObjectLike(func)?matches(func):baseCallback(func,thisArg)}function identity(value){return value}function matches(source){return baseMatches(baseClone(source,!0))}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}var undefined,VERSION="3.10.1",FUNC_ERROR_TEXT="Expected a function",argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,reEscapeChar=/\\(\\)?/g,reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^\d+$/,shadowProps=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=!1;var objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&"object"==typeof global&&global&&global.Object&&global,freeSelf=objectTypes[typeof self]&&self&&self.Object&&self,freeWindow=objectTypes[typeof window]&&window&&window.Object&&window,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this,isHostObject=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(value){return"function"!=typeof value.toString&&"string"==typeof(value+"")}}(),arrayProto=Array.prototype,errorProto=Error.prototype,objectProto=Object.prototype,stringProto=String.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ArrayBuffer=root.ArrayBuffer,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,Uint8Array=root.Uint8Array,nativeIsArray=getNative(Array,"isArray"),nativeKeys=getNative(Object,"keys"),nativeMax=Math.max,nativeMin=Math.min,MAX_SAFE_INTEGER=9007199254740991,ctorByTag={};ctorByTag[float32Tag]=root.Float32Array,ctorByTag[float64Tag]=root.Float64Array,ctorByTag[int8Tag]=root.Int8Array,ctorByTag[int16Tag]=root.Int16Array,ctorByTag[int32Tag]=root.Int32Array,ctorByTag[uint8Tag]=Uint8Array,ctorByTag[uint8ClampedTag]=root.Uint8ClampedArray,ctorByTag[uint16Tag]=root.Uint16Array,ctorByTag[uint32Tag]=root.Uint32Array;var nonEnumProps={};nonEnumProps[arrayTag]=nonEnumProps[dateTag]=nonEnumProps[numberTag]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},nonEnumProps[boolTag]=nonEnumProps[stringTag]={constructor:!0,toString:!0,valueOf:!0},nonEnumProps[errorTag]=nonEnumProps[funcTag]=nonEnumProps[regexpTag]={constructor:!0,toString:!0},nonEnumProps[objectTag]={constructor:!0},arrayEach(shadowProps,function(key){for(var tag in nonEnumProps)if(hasOwnProperty.call(nonEnumProps,tag)){var props=nonEnumProps[tag];props[key]=hasOwnProperty.call(props,key)}});var support=lodash.support={};!function(x){var Ctor=function(){this.x=x},object={0:x,length:x},props=[];Ctor.prototype={valueOf:x,y:x};for(var key in new Ctor)props.push(key);support.enumErrorProps=propertyIsEnumerable.call(errorProto,"message")||propertyIsEnumerable.call(errorProto,"name"),support.enumPrototypes=propertyIsEnumerable.call(Ctor,"prototype"),support.nonEnumShadows=!/valueOf/.test(props),support.ownLast="x"!=props[0],support.spliceObjects=(splice.call(object,0,1),!object[0]),support.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0);var baseEach=createBaseEach(baseForOwn),baseFor=createBaseFor(),getLength=baseProperty("length"),forEach=createForEach(arrayEach,baseEach),isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag},merge=createAssigner(baseMerge),keys=nativeKeys?function(object){var Ctor=null==object?undefined:object.constructor;return"function"==typeof Ctor&&Ctor.prototype===object||("function"==typeof object?lodash.support.enumPrototypes:isArrayLike(object))?shimKeys(object):isObject(object)?nativeKeys(object):[]}:shimKeys;lodash.callback=callback,lodash.forEach=forEach,lodash.keys=keys,lodash.keysIn=keysIn,lodash.matches=matches,lodash.merge=merge,lodash.pairs=pairs,lodash.property=property,lodash.remove=remove,lodash.restParam=restParam,lodash.set=set,lodash.toPlainObject=toPlainObject,lodash.each=forEach,lodash.iteratee=callback,lodash.every=every,lodash.get=get,lodash.has=has,lodash.identity=identity,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isFunction=isFunction,lodash.isNative=isNative,lodash.isObject=isObject,lodash.isPlainObject=isPlainObject,lodash.isString=isString,lodash.isTypedArray=isTypedArray,lodash.isUndefined=isUndefined,lodash.last=last,lodash.startsWith=startsWith,lodash.trim=trim,lodash.all=every,lodash.VERSION=VERSION,"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=lodash,define(function(){return lodash})):freeExports&&freeModule?moduleExports?(freeModule.exports=lodash)._=lodash:freeExports._=lodash:root._=lodash}).call(this)}).call(global,module,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(require,module){!function(){"use strict";function BFAnalytics(){this.initializedCheckTimePeriod=50,this.integrations={},this.unhandledCallsQueue=[]}var AnalyticsIntegrationBase=require("./integrations/integration_base.js"),BFEventInfo=require("./models/bf_event_info.js"),bfaSettings=require("./common/bfa_settings.js"),defs=require("./common/bfa_defs.js"),context=require("./common/bfa_context.js"),lodash=require("lodash"),logger=require("./common/logger.js")("BFAnalytics");BFAnalytics.prototype={constructor:BFAnalytics,name:"BFAnalytics",initialized:!1},BFAnalytics.prototype.setSettings=function(settings){return bfaSettings.setSettings(settings),logger.info("setSettings fired"),this},BFAnalytics.prototype.setPage=function(page){return context.setPage(page),logger.info("setPage fired"),this},BFAnalytics.prototype.setUser=function(user){return context.setUser(user),logger.info("setUser fired"),this},BFAnalytics.prototype.push=function(){return arguments?this.initialized?(this[arguments[0]]&&this[arguments[0]]instanceof Function&&this[arguments[0]].apply(this,Array.prototype.slice.call(arguments,1)),this):(this.unhandledCallsQueue.push(arguments),this):this},BFAnalytics.prototype.track=function(eventType,eventName,eventLocation,eventDescription,eventData,options){var eventInfo=new BFEventInfo(eventType,eventName,eventLocation,eventDescription,eventData);logger.info("track method call: "+eventType+"; "+eventName+"; "+eventLocation+"; "+eventDescription);for(var integrationName in this.integrations)if(this.integrations.hasOwnProperty(integrationName)&&this.integrations[integrationName].isEnabled()===!0)switch(this.integrations[integrationName].getTrackBehavior()){case defs.trackingBehavior.ifSpecified:lodash.isPlainObject(options)&&options.force instanceof Array&&(-1!==options.force.indexOf("all")||-1!==options.force.indexOf(integrationName))&&this.integrations[integrationName].push(eventInfo);break;case defs.trackingBehavior.byDefault:default:(!lodash.isPlainObject(options)||!(options.ignore instanceof Array)||-1===options.ignore.indexOf("all")&&-1===options.ignore.indexOf(integrationName)||options.force instanceof Array&&-1!==options.force.indexOf(integrationName))&&this.integrations[integrationName].push(eventInfo)}return this},BFAnalytics.prototype.addIntegration=function(integration){if(!(integration&&integration instanceof AnalyticsIntegrationBase))throw new TypeError("attempted to add an invalid integration to "+this.name);if(!integration.name)throw new Error("attempted to add an unnamed integration to "+this.name);return this.integrations[integration.name]=this.integrations[integration.name]||integration,this},BFAnalytics.prototype._isInitializedCheck=function(){var initialized=!0;for(var integrationName in this.integrations)if(this.integrations.hasOwnProperty(integrationName)&&this.integrations[integrationName].isEnabled()===!0&&this.integrations[integrationName].initialized!==!0){initialized=!1;break}if(this.initialized=initialized,this.initialized===!0){for(logger.info("Unhandled calls handling started");this.unhandledCallsQueue.length>0;){var currentObj=this.unhandledCallsQueue.shift();"track"===currentObj[0]&&this[currentObj[0]].apply(this,Array.prototype.slice.call(currentObj,1))}return logger.info("Init finished"),!0}return setTimeout(this._isInitializedCheck.bind(this),this.initializedCheckTimePeriod),!1},BFAnalytics.prototype.addUnhandledCalls=function(unhandledCalls){if(unhandledCalls&&unhandledCalls instanceof Array)for(var i=0;i<unhandledCalls.length;i++)this.unhandledCallsQueue.push(unhandledCalls[i])},BFAnalytics.prototype.init=BFAnalytics.prototype.initialize=function(){if(logger.info("Init started"),this.unhandledCallsQueue.length>0)for(var notTrackCalls=lodash.remove(this.unhandledCallsQueue,function(c){return"track"!==c[0]}),callId=0;callId<notTrackCalls.length;callId++){var currentObj=notTrackCalls[callId];"init"!==currentObj[0]&&this[currentObj[0]]&&this[currentObj[0]]instanceof Function&&this[currentObj[0]].apply(this,Array.prototype.slice.call(currentObj,1))}lodash.remove(this.integrations,function(i){return!i.isEnabled()});for(var integrationName in this.integrations)this.integrations.hasOwnProperty(integrationName)&&this.integrations[integrationName].initialize();return this._isInitializedCheck(),this},module.exports=BFAnalytics}()},{"./common/bfa_context.js":6,"./common/bfa_defs.js":7,"./common/bfa_settings.js":8,"./common/logger.js":9,"./integrations/integration_base.js":12,"./models/bf_event_info.js":15,lodash:3}],5:[function(require){(function(global){!function(){"use strict";function onReady(callback){if("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState)return logger.info("onReady method: document.readyState is '"+document.readyState+"' and callback will be fired immediately"),void callback();if(document.addEventListener)logger.info("onReady method: callback will be added to EventListener"),document.addEventListener("DOMContentLoaded",callback,!1);else if(document.attachEvent)document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&callback()});else{logger.info("onReady method: callback will be added to window onload");var oldOnload=window.onload;window.onload=function(){oldOnload&&oldOnload(),callback()}}}var BFAnalytics=require("./analytics.js"),BFAdobeIntegration=require("./integrations/adobe/integration_adobe.js"),BFLotameIntegration=require("./integrations/lotame/integration_lotame.js"),BFAContextAggregator=require("./utils/bfa_context_aggregator.js"),logger=require("./common/logger.js")("BFAInitPoint"),context=require("./common/bfa_context.js"),defs=require("./common/bfa_defs.js"),bfAnalytics=new BFAnalytics;document.location.search.indexOf("bfadebug=true")>-1&&(bfAnalytics.setSettings({debug:!0}),logger.info("bfadebug is true")),bfAnalytics.addIntegration(new BFAdobeIntegration),logger.info("Adobe integration added"),bfAnalytics.addIntegration(new BFLotameIntegration),logger.info("Lotame integration added");var contextAggregator=new BFAContextAggregator(bfAnalytics),bfData=window.bfa?window.bfa.c:null;bfAnalytics.addUnhandledCalls(bfData),window.bfa=function(){bfAnalytics.push.apply(bfAnalytics,arguments)},logger.info("window.bfa function replaced with real bfAnalytics functionality"),onReady(function(){logger.info("onReady init callback: Started"),contextAggregator.aggregatePageContext(),contextAggregator.aggregateUserContext(),logger.info("onReady init callback: context is filled");var bfLogin="undefined"!=typeof window?window.bf_login:"undefined"!=typeof global?global.bf_login:null;if(bfLogin&&bfLogin instanceof Object&&(logger.info("onReady init callback: aggregateUserContext added to bfLogin.loggedInCallbacks"),bfLogin.loggedInCallbacks.push(contextAggregator.aggregateUserContext.bind(contextAggregator))),logger.info("onReady init callback: bfAnalytics init started"),bfAnalytics.init(),window.bfaBinder){var binderConfig=window.bfaBinder.configuration;if(logger.info("onReady init callback: window.bfaBinder init started"),context.page.post&&(binderConfig.scroll.enabled=!0,binderConfig.scroll.platform=context.page.platform,"long"!==context.page.post.listFormat&&"no_list"!==context.page.post.listFormat&&context.page.post.subBuzzAmount>0?(binderConfig.scroll.mode="element",binderConfig.scroll.elements.count=context.page.post.subBuzzAmount,binderConfig.scroll.elements.locator=".buzz_superlist_item",logger.info("onReady init callback: window.bfaBinder scroll mode is 'element'")):(binderConfig.scroll.mode="pixel",logger.info("onReady init callback: window.bfaBinder scroll mode is 'percent'"))),context.page.platform===defs.platform.mobileweb){for(var i=0;i<binderConfig.dom.mapping.click.length;i++)"mousedown"===binderConfig.dom.mapping.click[i].event&&(binderConfig.dom.mapping.click[i].event="click");logger.info("onReady init callback: window.bfaBinder dom events replaced with click events")}window.bfaBinder.init()}logger.info("onReady init callback: finished")}.bind(this))}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./analytics.js":4,"./common/bfa_context.js":6,"./common/bfa_defs.js":7,"./common/logger.js":9,"./integrations/adobe/integration_adobe.js":10,"./integrations/lotame/integration_lotame.js":13,"./utils/bfa_context_aggregator.js":17}],6:[function(require,module){!function(){"use strict";var defs=require("./bfa_defs.js"),lodash=require("lodash"),bfaContext={setPage:function(page){lodash.merge(this.page,page)},setUser:function(user){lodash.merge(this.user,user)},page:{platform:defs.platform.desktop},user:{}};module.exports=bfaContext}()},{"./bfa_defs.js":7,lodash:3}],7:[function(require,module){!function(){"use strict";var bfaDefs={platform:{desktop:1,mobileweb:2},trackingBehavior:{byDefault:1,ifSpecified:2}};Object.freeze(bfaDefs),module.exports=bfaDefs}()},{}],8:[function(require,module){!function(){"use strict";var lodash=require("lodash"),defs=require("./bfa_defs.js"),bfaSettings={setSettings:function(settings){lodash.merge(this,settings)},debug:!1,develop:!1,AdobeAnalyticsTracker:{enabled:!0,trackBehavior:defs.trackingBehavior.byDefault},LotameAnalyticsTracker:{enabled:!0,trackBehavior:defs.trackingBehavior.byDefault}};module.exports=bfaSettings}()},{"./bfa_defs.js":7,lodash:3}],9:[function(require,module){!function(){"use strict";function getFormattedCurrentTime(){var now=new Date,minutes=now.getMinutes(),seconds=now.getSeconds(),milliseconds=now.getMilliseconds();return 10>minutes&&(minutes="0"+minutes),10>seconds&&(seconds="0"+seconds),minutes+":"+seconds+"."+milliseconds}function coerce(val){return val instanceof Error?val.stack||val.message:val.toString()}function logger(name){return{log:function(type,msgobj){if(bfaSettings.develop===!0||bfaSettings.debug===!0){msgobj=coerce(msgobj);var msg="BF_Analytics: [ "+name+", "+type+", Time: "+getFormattedCurrentTime()+', "'+msgobj+'" ]';window.console&&console.log&&Function.prototype.apply.call(console.log,console,[msg])}},info:function(msgobj){this.log("INFO",msgobj)},error:function(msgobj){this.log("ERROR",msgobj)}}}var bfaSettings=require("./bfa_settings.js");module.exports=logger}()},{"./bfa_settings.js":8}],10:[function(require,module){!function(){"use strict";function AdobeAnalyticsTracker(){this.initializedCheckTimePeriod=100,this.mappedMethods.page=this.page,this.mappedMethods.click=this.click,this.mappedMethods.quiz=this.quiz,this.mappedMethods.scroll=this.scroll,this.mappedMethods.search=this.search}var AnalyticsIntegrationBase=require("../integration_base.js"),bfaSettings=require("../../common/bfa_settings.js"),automapper=require("../../utils/bf_automapper.js"),context=require("../../common/bfa_context.js"),logger=require("../../common/logger.js")("AdobeAnalyticsTracker"),mappingConfigurator=require("./integration_adobe_mapping.js");AdobeAnalyticsTracker.prototype=new AnalyticsIntegrationBase,AdobeAnalyticsTracker.prototype.constructor=AdobeAnalyticsTracker,AdobeAnalyticsTracker.prototype.name="AdobeAnalyticsTracker",AdobeAnalyticsTracker.prototype.page=function(){return bfaSettings.develop!==!0&&(automapper.map("context","adobeExternalTracker",context,this.adobeExternalTracker,this),this.adobeExternalTracker.t()),logger.info("Page view event: page = '"+context.page.type+"', page_template = '"+context.page.templateType+"', platform = '"+context.page.platform+"'"),this},AdobeAnalyticsTracker.prototype.scroll=function(eventInfo){return context.page.post?(context.page.post.isPromoted===!0?(bfaSettings.develop!==!0&&(automapper.map("ScrollEventInfo","adobeExternalTracker",eventInfo,this.adobeExternalTracker,this),this.adobeExternalTracker.tl(!0,"o",eventInfo.eventDescription+"%")),logger.info("Partner post additional scroll event "+eventInfo.eventDescription+"% tracked")):100===eventInfo.eventDescription&&(bfaSettings.develop!==!0&&(automapper.map("ScrollEventInfo","adobeExternalTracker",eventInfo,this.adobeExternalTracker,this),this.adobeExternalTracker.tl(!0,"o",eventInfo.eventDescription+"%")),logger.info("Post Scroll event "+eventInfo.eventDescription+"% tracked")),this):this
},AdobeAnalyticsTracker.prototype.click=function(eventInfo){return bfaSettings.develop!==!0&&(automapper.map("clickEventInfo","adobeExternalTracker",eventInfo,this.adobeExternalTracker,this),this.adobeExternalTracker.tl(!0,"o","click")),logger.info("Click event"),this},AdobeAnalyticsTracker.prototype.search=function(eventInfo){return bfaSettings.develop!==!0&&(automapper.map("SearchResultEventInfo","adobeExternalTracker",eventInfo,this.adobeExternalTracker,this),this.adobeExternalTracker.tl(!0,"o","searchResult")),logger.info("Search result page event."),this},AdobeAnalyticsTracker.prototype.quiz=function(eventInfo){return bfaSettings.develop!==!0&&(automapper.map("quizEventInfo","adobeExternalTracker",eventInfo,this.adobeExternalTracker,this),this.adobeExternalTracker.tl(!0,"o","quiz")),logger.info("Click event"),this},AdobeAnalyticsTracker.prototype.init=AdobeAnalyticsTracker.prototype.initialize=function(){return logger.info("Init started"),mappingConfigurator.initAllMaps(),logger.info("Enabled: "+this.isEnabled()),this.isEnabled()===!0&&(this.adobeExternalVisitor=require("adobe_visitor"),this.adobeExternalTracker=require("adobe_tracker"),this._checkExternalAdobeTracker()),this},AdobeAnalyticsTracker.prototype._checkExternalAdobeTracker=function(){return logger.info("External adobe libs checking"),this.adobeExternalTracker&&"object"==typeof this.adobeExternalTracker&&this.adobeExternalTracker.isReadyToTrack()?(logger.info("Initialized"),this.initialized=!0,!0):(logger.info("External adobe libs are not initialized yet"),setTimeout(this._checkExternalAdobeTracker.bind(this),this.initializedCheckTimePeriod),!1)},module.exports=AdobeAnalyticsTracker}()},{"../../common/bfa_context.js":6,"../../common/bfa_settings.js":8,"../../common/logger.js":9,"../../utils/bf_automapper.js":16,"../integration_base.js":12,"./integration_adobe_mapping.js":11,adobe_tracker:2,adobe_visitor:1}],11:[function(require,module){!function(){"use strict";function AdobeTrackerMappingConfigurator(){}var automapper=require("../../utils/bf_automapper.js"),defs=require("../../common/bfa_defs.js"),lodash=require("lodash");AdobeTrackerMappingConfigurator.prototype.initPageViewMap=function(){if(!automapper.isExists("context","adobeExternalTracker")){var pageViewMap=automapper.createMap("context","adobeExternalTracker",{});pageViewMap.addMapTo("pageName").mapFrom(function(src){if(src.page.post)return src.page.post.name.toLowerCase();var pagePath=src.page.uriObject?lodash.trim(src.page.uriObject.cleanedPath,"/"):"";return""===pagePath||"index"===pagePath.toLowerCase()?"{{home}}":pagePath}),pageViewMap.addMapTo("channel").mapFrom("page.metavertical"),pageViewMap.addMapTo("eVar25").mapFrom(function(src){return"index"===src.page.type?"home":"Error"===src.page.templateType?"Error":src.page.type}),pageViewMap.addMapTo("eVar26").mapFrom(function(src){return(src.page.platform===defs.platform.desktop?"desktop":"mobile web")+"|"+src.page.country+"|"+src.page.language},[automapper.formatters.strToLowerCase]),pageViewMap.addMapTo("eVar1","").mapFrom("user.id"),pageViewMap.addMapTo("eVar2","visitor").mapFrom(function(src){return src.user.isLoggedIn?src.user.isAdmin?"administrator":src.user.isEditor?"editor":src.user.isAdvertiser?"advertiser":"user":"visitor"}),pageViewMap.addMapTo("referrer","").mapFrom(function(src){var referrer=src.user.referrer;if(src.user.userAgent){var agent=src.user.userAgent.toString().toLowerCase();agent.match(/fban\/messenger/)?referrer="http://msgr.facebook.com":agent.match(/fban/)&&!referrer.match(/m\.facebook/)?referrer="http://app.facebook.com":agent.match(/twitter/i)?referrer="http://app.twitter.com":agent.match(/pinterest/i)&&(referrer="http://app.pinterest.com")}return referrer}),pageViewMap.addMapTo("eVar31","none").mapFrom("page.post.id"),pageViewMap.addMapTo("eVar49","").mapFrom(function(src){return src.page.post?src.page.post.isPromoted===!0?src.page.uriObject.query&&src.page.uriObject.query.match(/([&\?]+b=1)/)?"social":"seed":!src.user.referrer||src.user.referrer.match(/^(https?|ftp):\/\/.*/)&&!src.user.referrer.match(/^(https?|ftp):\/\/[^\/]*?buzzfeed.com\/.*/)?"social":"seed":"none"}),pageViewMap.addMapTo("prop32","").mapFrom(function(src){return src.page.post&&src.page.post.published?src.page.post.published.substr(0,10):""}),pageViewMap.addMapTo("eVar34","").mapFrom("page.post.author"),pageViewMap.addMapTo("eVar35","").mapFrom(function(src){var postType="";if(!src.page.post)return postType;switch(src.page.post.listFormat){case"long":postType="Longform";break;case"breaking":postType="Breaking";break;case"dec_up":postType="Numbered List";break;case"dec_down":postType="Countdown List";break;case"none":case"disc":postType="Plain List";break;default:postType="Article"}switch(src.page.post.postFormat){case"wide":postType+=",Wide";break;default:postType+=",Standard"}return postType}),pageViewMap.addMapTo("eVar39","").mapFrom(function(src){return src.page.post&&!src.page.post.isPromoted!=!0?"long"===src.page.post.listFormat?src.page.post.wordsCount?src.page.post.wordsCount:0:src.page.post.mainSubBuzzAmount:""}),pageViewMap.addMapTo("eVar36","").mapFrom(function(src){return src.page.post&&src.page.post.category?src.page.post.category:"none"},[automapper.formatters.strToLowerCase]),pageViewMap.addMapTo("eVar37","").mapFrom(function(src){return src.page.post?"raw:"+src.page.post.raw.toString()+",editor:"+src.page.post.editor.toString()+",ad:"+src.page.post.ad.toString()+",nsfw:"+src.page.post.nsfw.toString()+",partner:"+src.page.post.partner.toString()+",user:"+src.page.post.user.toString()+",trigger:"+src.page.post.trigger.toString():""}),pageViewMap.addMapTo("eVar38","").mapFrom("page.post.badges",[automapper.formatters.strToLowerCase]),pageViewMap.addMapTo("list1","").mapFrom(function(src){if(!src.page.post||!src.page.post.tags)return"";var resultedTags=src.page.post.tags,primaryStart=resultedTags.indexOf("--primarykeyword-");return primaryStart>-1&&(resultedTags=resultedTags.substring(primaryStart+"--primarykeyword-".length)),resultedTags.replace(/(--([^,]*),)/g,"")},[automapper.formatters.strToLowerCase]),pageViewMap.addMapTo("events","").mapFrom(function(src){return src.page.post?"event31":""}),pageViewMap.addMapTo("eVar40","").mapFrom(function(src){return src.page.post&&src.page.post.isPromoted===!0?src.page.post.id:""}),pageViewMap.addMapTo("eVar45","").mapFrom(function(src){return src.page.post&&src.page.post.isPromoted===!0?src.page.post.author:""}),pageViewMap.addMapTo("list2","").mapFrom(function(src){var result="none";if(src.page.post&&src.page.post.isPromoted===!0&&src.page.post.tags&&src.page.post.tags.indexOf("--content-theme")>-1)for(var matches,re=/--content-theme-([^,]*),/g;null!==(matches=re.exec(src.page.post.tags));)result+=matches[1]+",";return result}),pageViewMap.addMapTo("pageType","").mapFrom(function(src){return"Error"===src.page.templateType?"errorPage":""}),pageViewMap.addMapTo("events","").mapFrom(function(src,dest){return src.page.post&&src.page.post.uriObject&&src.page.uriObject.cleanedPath&&"/post"===src.page.uriObject.cleanedPath?dest.events?dest.events+",event44":"event44":dest.events}),pageViewMap.addMapTo("events","").mapFrom(function(src,dest){return src.page.post&&src.page.post.isPromoted?dest.events?dest.events+",event33":"event33":dest.events}),pageViewMap.addMapTo("eVar33","").mapFrom(function(src){return src.page.post&&src.page.post.publishedAgo>=0?src.page.post.publishedAgo.toString():""})}},AdobeTrackerMappingConfigurator.prototype.initClickEventsMap=function(){if(!automapper.isExists("clickEventInfo","adobeExternalTracker")){var adobeClickMapRouter=automapper.createRouter("clickEventInfo","adobeExternalTracker",{}),shareMap=adobeClickMapRouter.createConfigForRoute(function(src){return"Share"===src.eventName});shareMap.addMapTo("eVar8","+1"),shareMap.addMapTo("eVar41","").mapFrom(function(src){return src.data.idx?src.eventDescription+":"+src.eventName+":"+src.eventLocation+":"+src.data.idx:src.eventDescription+":"+src.eventName+":"+src.eventLocation},[automapper.formatters.strToLowerCase]),shareMap.addMapTo("events","event41"),shareMap.addMapTo("linkTrackVars","eVar8,eVar41,events"),shareMap.addMapTo("linkTrackEvents","event41");var reactionMap=adobeClickMapRouter.createConfigForRoute(function(src){return"Standard-Reaction"===src.eventName||"Gif-Reaction"===src.eventName||"Standard"===src.eventName&&"Reactions"===src.eventLocation});reactionMap.addMapTo("eVar7","+1"),reactionMap.addMapTo("eVar42","").mapFrom("eventDescription",[automapper.formatters.strToLowerCase]),reactionMap.addMapTo("events","event42"),reactionMap.addMapTo("linkTrackVars","eVar7,eVar42,events"),reactionMap.addMapTo("linkTrackEvents","event42");var postCommentMap=adobeClickMapRouter.createConfigForRoute(function(src){return"Submit"===src.eventName&&"Contributions"===src.eventLocation});postCommentMap.addMapTo("eVar9","+1"),postCommentMap.addMapTo("eVar43","").mapFrom("eventDescription",[automapper.formatters.strToLowerCase]),postCommentMap.addMapTo("events","event43"),postCommentMap.addMapTo("linkTrackVars","eVar9,eVar43,events"),postCommentMap.addMapTo("linkTrackEvents","event43");var dfpSponsoredLinkMap=adobeClickMapRouter.createConfigForRoute(function(src){return"Thumbstrip"===src.eventLocation&&"Thumb-dfp"===src.eventName});dfpSponsoredLinkMap.applyTemplateByName("dfpAdobeDefault"),dfpSponsoredLinkMap.addMapTo("eVar40","").mapFrom("data.adbuzzid"),dfpSponsoredLinkMap.addMapTo("eVar56","").mapFrom(function(src){var result="";return src.data.adtitle&&(result=src.data.adtitle),result+="|",src.data.adimageurl&&(result+=src.data.adimageurl.replace(/^(https?|ftp):\/\/[^\/]*?buzzfee?d.com\/static\//,"")),result},[automapper.formatters.strToLowerCase]),dfpSponsoredLinkMap.addMapTo("linkTrackVars","eVar52,eVar51,eVar56,eVar40,eVar50,events"),dfpSponsoredLinkMap.addMapTo("linkTrackEvents","event50,event56,event51"),dfpSponsoredLinkMap.addMapTo("events","event50,event56,event51");var dfpLinkMap=adobeClickMapRouter.createConfigForRoute(function(src){return-1!==src.eventName.indexOf("-dfp")&&"Username-dfp"!==src.eventName});dfpLinkMap.applyTemplateByName("dfpAdobeDefault"),dfpLinkMap.addMapTo("linkTrackVars","eVar52,eVar51,eVar50,events"),dfpLinkMap.addMapTo("linkTrackEvents","event50,event51"),dfpLinkMap.addMapTo("events","event50,event51");var extLinkMap=adobeClickMapRouter.createConfigForRoute(function(src){return"Exit-Link"===src.eventName});extLinkMap.addMapTo("eVar54","").mapFrom(function(src){return src.data.url?src.data.url.replace(/^(https?|ftp):\/\//,"").replace(/#(.*)/,""):""},[automapper.formatters.strToLowerCase]),extLinkMap.addMapTo("eVar53","").mapFrom("data.anchorDesc",[automapper.formatters.strToLowerCase]),extLinkMap.addMapTo("linkTrackVars","eVar54,eVar53,events"),extLinkMap.addMapTo("linkTrackEvents","event53"),extLinkMap.addMapTo("events","event53");var cmsPublishPost=adobeClickMapRouter.createConfigForRoute(function(src){return"CMS"===src.eventLocation&&"Publish-Now"===src.eventDescription});cmsPublishPost.addMapTo("eVar10","+1"),cmsPublishPost.addMapTo("events","event45"),cmsPublishPost.addMapTo("linkTrackVars","eVar10,events"),cmsPublishPost.addMapTo("linkTrackEvents","event45");var signUpFormView=adobeClickMapRouter.createConfigForRoute(function(src){return"Login"===src.eventName&&"Account-Set-Up"===src.eventDescription});signUpFormView.addMapTo("events","event5"),signUpFormView.addMapTo("linkTrackVars","events"),signUpFormView.addMapTo("linkTrackEvents","event5");var signUpFormComplete=adobeClickMapRouter.createConfigForRoute(function(src){return"Login"===src.eventName&&"Sign-Up"===src.eventDescription});signUpFormComplete.addMapTo("events","event1"),signUpFormComplete.addMapTo("linkTrackVars","events"),signUpFormComplete.addMapTo("linkTrackEvents","event1");var connectedWithFacebook=adobeClickMapRouter.createConfigForRoute(function(src){return"Login"===src.eventName&&"Sign-Up-FB"===src.eventDescription});connectedWithFacebook.addMapTo("events","event2"),connectedWithFacebook.addMapTo("linkTrackVars","events"),connectedWithFacebook.addMapTo("linkTrackEvents","event2");var userSignIn=adobeClickMapRouter.createConfigForRoute(function(src){return"Login"===src.eventName&&("Sign-In-FB"===src.eventDescription||"Sign-In-Google"===src.eventDescription||"Sign-In"===src.eventDescription)});userSignIn.addMapTo("eVar3","").mapFrom("data.platform"),userSignIn.addMapTo("events","event3"),userSignIn.addMapTo("linkTrackVars","eVar3,events"),userSignIn.addMapTo("linkTrackEvents","event3");var newsletterSignUp=adobeClickMapRouter.createConfigForRoute(function(src){return"Login"===src.eventName&&"Newsletter"===src.eventDescription});newsletterSignUp.addMapTo("events","event4"),newsletterSignUp.addMapTo("linkTrackVars","events"),newsletterSignUp.addMapTo("linkTrackEvents","event4");var mainNavMap=adobeClickMapRouter.createDefaultConfig();mainNavMap.addMapTo("eVar52","").mapFrom("data.url",[automapper.formatters.strToLowerCase]),mainNavMap.addMapTo("eVar51","").mapFrom(function(src){var description=""!==src.eventDescription?src.eventDescription:"(no description)";return-1!==src.eventName.indexOf("Video-")&&src.data.videoUrl&&(description=src.data.videoUrl.replace(/^(https?|ftp):\/\/(www\.)?/,"").replace(/\?.*/,"")),src.eventLocation+"|"+src.eventName+"|"+description}),mainNavMap.addMapTo("linkTrackVars","eVar52,eVar51,events"),mainNavMap.addMapTo("linkTrackEvents","event51"),mainNavMap.addMapTo("events","event51")}},AdobeTrackerMappingConfigurator.prototype.initScrollEventsMap=function(){function getEvent(src){var targetEvent="";switch(src.eventDescription){case 25:targetEvent="event37";break;case 50:targetEvent="event38";break;case 75:targetEvent="event39";break;case 100:targetEvent="event32"}return targetEvent}if(!automapper.isExists("ScrollEventInfo","adobeExternalTracker")){var adobeScrollMapRouter=automapper.createMap("ScrollEventInfo","adobeExternalTracker",{});adobeScrollMapRouter.addMapTo("linkTrackVars","events"),adobeScrollMapRouter.addMapTo("linkTrackEvents","").mapFrom(getEvent),adobeScrollMapRouter.addMapTo("events","").mapFrom(getEvent)}},AdobeTrackerMappingConfigurator.prototype.initQuizEventsMap=function(){function getAnswerStr(src){return src.data?src.data.quizId+"|"+src.data.questionId+"|"+src.data.answerId:""}if(!automapper.isExists("quizEventInfo","adobeExternalTracker")){var adobeQuizMapRouter=automapper.createRouter("quizEventInfo","adobeExternalTracker",{}),quizAnswerMap=adobeQuizMapRouter.createConfigForRoute(function(src){return"Answer"===src.eventName&&"poll"!==src.data.quizType});quizAnswerMap.addMapTo("eVar46","").mapFrom(getAnswerStr,[automapper.formatters.strToLowerCase]),quizAnswerMap.addMapTo("eVar51","").mapFrom(function(src){return src.eventLocation+"|Quiz-Answer|(no description)"}),quizAnswerMap.addMapTo("linkTrackVars","eVar46,eVar51,events"),quizAnswerMap.addMapTo("linkTrackEvents","event46"),quizAnswerMap.addMapTo("events","event46");var pollAnswerMap=adobeQuizMapRouter.createConfigForRoute(function(src){return"Answer"===src.eventName&&"poll"===src.data.quizType});pollAnswerMap.addMapTo("eVar46","").mapFrom(getAnswerStr,[automapper.formatters.strToLowerCase]),pollAnswerMap.addMapTo("eVar47","").mapFrom(getAnswerStr,[automapper.formatters.strToLowerCase]),pollAnswerMap.addMapTo("eVar51","").mapFrom(function(src){return src.eventLocation+"|Poll-Answer|(no description)"}),pollAnswerMap.addMapTo("linkTrackVars","eVar46,eVar47,eVar51,events"),pollAnswerMap.addMapTo("linkTrackEvents","event46,event47"),pollAnswerMap.addMapTo("events","event46,event47");var completeMap=adobeQuizMapRouter.createConfigForRoute(function(src){return"Complete"===src.eventName});completeMap.addMapTo("eVar47","").mapFrom(function(src){return src.data?src.data.quizId+"|"+src.data.result:""},[automapper.formatters.strToLowerCase]),completeMap.addMapTo("eVar51","").mapFrom(function(src){return src.eventLocation+"|Quiz-Complete|(no description)"}),completeMap.addMapTo("linkTrackVars","eVar47,eVar51,events"),completeMap.addMapTo("linkTrackEvents","event47"),completeMap.addMapTo("events","event47")}},AdobeTrackerMappingConfigurator.prototype.initSearchResultPageMap=function(){if(!automapper.isExists("SearchResultEventInfo","adobeExternalTracker")){var adobeSearchResultMapRouter=automapper.createMap("SearchResultEventInfo","adobeExternalTracker",{});adobeSearchResultMapRouter.addMapTo("linkTrackVars","eVar58,prop59,events"),adobeSearchResultMapRouter.addMapTo("linkTrackEvents","event58"),adobeSearchResultMapRouter.addMapTo("eVar58","").mapFrom("data.keywords",[automapper.formatters.strToLowerCase,automapper.formatters.strCutTo255Characters]),adobeSearchResultMapRouter.addMapTo("prop59","").mapFrom("data.resultsCount"),adobeSearchResultMapRouter.addMapTo("events","event58")}},AdobeTrackerMappingConfigurator.prototype.initTemplates=function(){var dfpAdobeDefault=automapper.createMapTemplate("dfpAdobeDefault");dfpAdobeDefault.addMapTo("eVar50","").mapFrom(function(src){return src.data.adpartner?src.data.adpartner:""}),dfpAdobeDefault.addMapTo("eVar51","").mapFrom(function(src){var description="(no description)";return src.eventDescription?description=src.eventDescription:"Big-Story"!==src.eventLocation&&"Bottom-Promo"!==src.eventLocation||!src.data.adbuzzid||(description=src.data.adbuzzid),src.eventLocation+"|"+src.eventName+"|"+description}),dfpAdobeDefault.addMapTo("eVar52","").mapFrom(function(src){return src.data.adbuzzurl?src.data.adbuzzurl.replace(/^(https?|ftp):\/\//,"").replace(/^[^\/]*?buzzfeed.com\//,"").replace(/#(.*)/,""):""},[automapper.formatters.strToLowerCase])},AdobeTrackerMappingConfigurator.prototype.initAllMaps=function(){this.initTemplates(),this.initPageViewMap(),this.initClickEventsMap(),this.initScrollEventsMap(),this.initQuizEventsMap(),this.initSearchResultPageMap()},module.exports=new AdobeTrackerMappingConfigurator}()},{"../../common/bfa_defs.js":7,"../../utils/bf_automapper.js":16,lodash:3}],12:[function(require,module){!function(){"use strict";function AnalyticsIntegrationBase(){this.initialized=!1,this.mappedMethods={}}var BFEventInfo=require("../models/bf_event_info.js"),bfaSettings=require("../common/bfa_settings.js");AnalyticsIntegrationBase.prototype={constructor:AnalyticsIntegrationBase,name:"AnalyticsIntegrationBase"},AnalyticsIntegrationBase.prototype.init=AnalyticsIntegrationBase.prototype.initialize=function(){},AnalyticsIntegrationBase.prototype.isEnabled=function(){return bfaSettings[this.name].enabled},AnalyticsIntegrationBase.prototype.getTrackBehavior=function(){return bfaSettings[this.name].trackBehavior},AnalyticsIntegrationBase.prototype.push=function(eventInfo){return this.isEnabled()===!0&&this.initialized===!0&&eventInfo&&eventInfo instanceof BFEventInfo&&this.mappedMethods.hasOwnProperty(eventInfo.eventType)&&this.mappedMethods[eventInfo.eventType].call(this,eventInfo),this},module.exports=AnalyticsIntegrationBase}()},{"../common/bfa_settings.js":8,"../models/bf_event_info.js":15}],13:[function(require,module){(function(global){!function(){"use strict";function LotameAnalyticsTracker(){this.initializedCheckTimePeriod=100,this.mappedMethods.page=this.page,this.mappedMethods.click=this.click,this.mappedMethods.quiz=this.quiz}var AnalyticsIntegrationBase=require("../integration_base.js"),bfaSettings=require("../../common/bfa_settings.js"),automapper=require("../../utils/bf_automapper.js"),context=require("../../common/bfa_context.js"),logger=require("../../common/logger.js")("LotameAnalyticsTracker"),mappingConfigurator=require("./integration_lotame_mapping.js");LotameAnalyticsTracker.prototype=new AnalyticsIntegrationBase,LotameAnalyticsTracker.prototype.constructor=LotameAnalyticsTracker,LotameAnalyticsTracker.prototype.name="LotameAnalyticsTracker",LotameAnalyticsTracker.prototype.init=LotameAnalyticsTracker.prototype.initialize=function(){return logger.info("Init started"),mappingConfigurator.initAllMaps(),logger.info("Enabled: "+this.isEnabled()),this.isEnabled()===!0&&this._checkExternalLotameTracker(),this},LotameAnalyticsTracker.prototype._checkExternalLotameTracker=function(){logger.info("External Lotame libs checking");var lotame="undefined"!=typeof window?window.LOTCC:"undefined"!=typeof global?global.LOTCC:null;return lotame&&"object"==typeof lotame?(logger.info("Lotame Initialized"),this.initialized=!0,this.lotameExternalTracker=lotame,void 0):(logger.info("External Lotame libs are not initialized yet"),setTimeout(this._checkExternalLotameTracker.bind(this),this.initializedCheckTimePeriod),!1)},LotameAnalyticsTracker.prototype.page=function(){return bfaSettings.develop!==!0&&(automapper.map("context","lotameExternalTracker",context,this.lotameExternalTracker,this),this.lotameExternalTracker.bcp()),logger.info("Page view event: page = '"+context.page.type+"', page_template = '"+context.page.templateType+"', platform = '"+context.page.platform+"'"),this},LotameAnalyticsTracker.prototype.click=function(eventInfo){return bfaSettings.develop!==!0&&(automapper.map("clickEventInfo","lotameExternalTracker",eventInfo,this.lotameExternalTracker,this),this.lotameExternalTracker.bcp()),logger.info("Click event"),this},LotameAnalyticsTracker.prototype.quiz=function(eventInfo){return bfaSettings.develop!==!0&&(automapper.map("quizEventInfo","lotameExternalTracker",eventInfo,this.lotameExternalTracker,this),this.lotameExternalTracker.bcp()),logger.info("Click event"),this},module.exports=LotameAnalyticsTracker}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/bfa_context.js":6,"../../common/bfa_settings.js":8,"../../common/logger.js":9,"../../utils/bf_automapper.js":16,"../integration_base.js":12,"./integration_lotame_mapping.js":14}],14:[function(require,module){!function(){"use strict";function LotameTrackerMappingConfigurator(){}var automapper=require("../../utils/bf_automapper.js"),defs=require("../../common/bfa_defs.js"),lodash=require("lodash");LotameTrackerMappingConfigurator.prototype.initPageViewMap=function(){if(!automapper.isExists("context","lotameExternalTracker")){var pageViewMapRouter=automapper.createRouter("context","lotameExternalTracker",{}),pageViewMap=pageViewMapRouter.createConfigForRoute(function(src){return"buzz"===lodash.get(src,"page.type")});pageViewMap.addMapTo("_","").mapFrom(function(src,dest){if(lodash.has(src,"page.post.tags"))for(var cleanTags=lodash.get(src,"page.post.tags").split(",").filter(function(tag){return null!==tag&&void 0!==tag&&""!==tag}),i=0;i<cleanTags.length;i++)dest.add("med","tag:"+cleanTags[i])}),pageViewMap.addMapTo("_","").mapFrom(function(src,dest){dest.add("med","section:"+lodash.get(src,"page.post.category"))}),pageViewMap.addMapTo("_","").mapFrom(function(src,dest){dest.add("med","type:"+(lodash.get(src,"page.post.isPromoted")?"sponsored":"editorial"))}),pageViewMap.addMapTo("_","").mapFrom(function(src,dest){var result="none";if(lodash.get(src,"page.post.isPromoted")===!0&&lodash.has(src,"page.post.tags")&&src.page.post.tags.indexOf("--content-theme")>-1)for(var matches,re=/--content-theme-([^,]*),/g;null!==(matches=re.exec(src.page.post.tags));)result+=matches[1]+",";dest.add("med","theme: "+result)}),pageViewMap.addMapTo("_","").mapFrom(function(src,dest){dest.add("comp","username:"+lodash.get(src,"page.post.author"))}),pageViewMap.addMapTo("_","").mapFrom(function(src,dest){var referrer=src.user.referrer;if(src.user.userAgent){var agent=src.user.userAgent.toString().toLowerCase();agent.match(/fban\/messenger/)||agent.match(/fban/)&&!referrer.match(/m\.facebook/)?referrer="Facebook":agent.match(/twitter/i)?referrer="Twitter":agent.match(/pinterest/i)&&(referrer="Pinterest")}dest.add("sm","socialreferral: "+referrer)}),pageViewMap.addMapTo("_","").mapFrom(function(src,dest){dest.add("geo","buzzID:"+lodash.get(src,"page.post.id"))}),pageViewMap.addMapTo("_","").mapFrom(function(src,dest){var platform="mobileapp";switch(src.page.platform){case defs.platform.desktop:platform="desktop";break;case defs.platform.mobileweb:platform="mobileweb"}dest.add("sm","platform: "+platform)}),pageViewMap.addMapTo("_","").mapFrom(function(src,dest){dest.add("sm","edition: "+src.page.country)}),pageViewMap.addMapTo("_","").mapFrom(function(src,dest){if(lodash.get(src,"page.post.isPromoted")){var soDisco;soDisco=src.page.uriObject.path.indexOf("/h1/")>-1?"SoDiscoSeed":src.page.uriObject.path.indexOf("/h2/")>-1?"SoDiscoSocial":lodash(src,"user.referrer")&&src.user.referrer.match(/^(https?|ftp):\/\/[^\/]*?buzzfeed.com\/.*/)&&!src.page.uriObject.query.match(/[&\?]+b=1/)?"NonSoDiscoSeed":"NonSoDiscoSocial",dest.add("geo","sponsored: "+soDisco),dest.add("geo","sponsored - "+soDisco+": buzzID-"+lodash.get(src,"page.post.id")),dest.add("geo","sponsored: buzzID-"+lodash.get(src,"page.post.id"))}else{var seedSocial=!lodash.get(src,"user.referrer")||src.user.referrer.match(/^(https?|ftp):\/\/.*/)&&!src.user.referrer.match(/^(https?|ftp):\/\/[^\/]*?buzzfeed.com\/.*/)?"social":"seed";dest.add("int","editorial - "+seedSocial),dest.add("int","editorial - "+seedSocial+": buzzID-"+lodash.get(src,"page.post.id")),dest.add("int","editorial: buzzID-"+lodash.get(src,"page.post.id")),dest.add("int","editorial - "+seedSocial+": section-"+lodash.get(src,"page.post.category"))}})}},LotameTrackerMappingConfigurator.prototype.initClickEventsMap=function(){if(!automapper.isExists("clickEventInfo","lotameExternalTracker")){var lotameClickMapRouter=automapper.createRouter("clickEventInfo","lotameExternalTracker",{}),shareMap=lotameClickMapRouter.createConfigForRoute(function(src){return"Share"===src.eventName});shareMap.addMapTo("_","").mapFrom(function(src,dest){var context=require("../../common/bfa_context.js");dest.add("act","share: "+src.eventDescription),dest.add("act","share: "+src.eventDescription+" : section-"+lodash.get(context,"page.post.category"));var seedSocial,editorial=lodash.get(context,"page.post.isPromoted")?"sponsored":"editorial";seedSocial=lodash.get(context,"page.post.isPromoted")?context.page.uriObject.query&&context.page.uriObject.query.match(/([&\?]+b=1)/)?"social":"seed":!lodash.get(context,"user.referrer")||context.user.referrer.match(/^(https?|ftp):\/\/.*/)&&!context.user.referrer.match(/^(https?|ftp):\/\/[^\/]*?buzzfeed.com\/.*/)?"social":"seed",dest.add("act","share: "+src.eventDescription+" : "+editorial+"-"+seedSocial)});var bookmark=lotameClickMapRouter.createConfigForRoute(function(src){return"Bookmark"===src.eventName});bookmark.addMapTo("_","").mapFrom(function(src,dest){dest.add("act","bookmark")})}},LotameTrackerMappingConfigurator.prototype.initQuizEventsMap=function(){if(!automapper.isExists("quizEventInfo","lotameExternalTracker")){var lotameQuizAndPollMapRouter=automapper.createRouter("quizEventInfo","lotameExternalTracker",{}),answerMap=lotameQuizAndPollMapRouter.createConfigForRoute(function(src){return"Answer"===src.eventName});answerMap.addMapTo("_","").mapFrom(function(src,dest){dest.add("act","AnsweredQuiz")});var completeMap=lotameQuizAndPollMapRouter.createConfigForRoute(function(src){return"Complete"===src.eventName});completeMap.addMapTo("_","").mapFrom(function(src,dest){dest.add("act","CompletedQuiz")})}},LotameTrackerMappingConfigurator.prototype.initAllMaps=function(){this.initPageViewMap(),this.initClickEventsMap(),this.initQuizEventsMap()},module.exports=new LotameTrackerMappingConfigurator}()},{"../../common/bfa_context.js":6,"../../common/bfa_defs.js":7,"../../utils/bf_automapper.js":16,lodash:3}],15:[function(require,module){!function(){"use strict";function BFEventInfo(eventType,eventName,eventLocation,eventDescription,eventData){this.eventType=eventType||"",this.eventName=eventName||"",this.eventLocation=eventLocation||"",this.eventDescription=eventDescription||"",this.data=eventData||{}}module.exports=BFEventInfo}()},{}],16:[function(require,module){!function(){"use strict";function BFAutomapperMapTo(destinationVarPath,defaultValue){if(lodash.isString(destinationVarPath)===!1||destinationVarPath.length<=0)throw new TypeError("'mapTo' should be a non empty string");lodash.isUndefined(defaultValue)&&(defaultValue=null),this.destinationVarPath=destinationVarPath,this.mappingType=BFAutomapperMapTo.prototype.mappingTypes.sourcePath,this.mappingFrom=void 0,this.preFormatters=[],this.defaultValue=defaultValue}function BFAutomapperMapConfig(options){this.options=options,this.mapToCollection=[]}function BFAutomapperMapConfigExtended(options){this.options=options,this.templatesToApply=[],this.mapToCollection=[]}function BFAutomapperRoute(routeFunc,mapConfig){if(!routeFunc||!lodash.isFunction(routeFunc))throw new Error("routeFunc should be a function that receives src object as parameter and returns bool");if(!(mapConfig&&mapConfig instanceof BFAutomapperMapConfig))throw new Error("mapConfig should be an instance of BFAutomapperMapConfig");this.routeFunc=routeFunc,this.mapConfig=mapConfig}function BFAutomapperRouter(sourceTypeName,destinationTypeName,options){this.sourceTypeName=sourceTypeName,this.destinationTypeName=destinationTypeName,this.options=options,this.routers=[],this.defaultMapConfig=null}function BFAutomapper(){}var lodash=require("../../lib/lodash/lodash.build.js");BFAutomapperMapTo.prototype={constructor:BFAutomapperMapTo,name:"BFAutomapperMapTo",mappingTypes:{sourcePath:1,"function":2}},BFAutomapperMapTo.prototype.mapFrom=function(mapFrom,preFormatters){if(lodash.isFunction(mapFrom))this.mappingType=this.mappingTypes.function,this.mappingFrom=mapFrom;else{if(!lodash.isString(mapFrom))throw new TypeError("'mapFrom' is object of wrong type: "+(typeof mapFrom).toString());this.mappingType=this.mappingTypes.sourcePath,this.mappingFrom=mapFrom}return lodash.isArray(preFormatters)&&lodash.every(preFormatters,function(v){return v instanceof Function})&&this.preFormatters.push.apply(this.preFormatters,preFormatters),this},BFAutomapperMapTo.prototype.map=function(source,destination,currentContext){var result=this.defaultValue;if(!lodash.isUndefined(this.mappingFrom))switch(this.mappingType){case this.mappingTypes.function:result=this.mappingFrom.call(currentContext,source,destination);break;case this.mappingTypes.sourcePath:result=lodash.get(source,this.mappingFrom,this.defaultValue)}return lodash.isUndefined(result)&&(result=this.defaultValue),this.preFormatters.length>0&&lodash.forEach(this.preFormatters,function(formatter){result=formatter.call(currentContext,result)}),lodash.set(destination,this.destinationVarPath,result),result},BFAutomapperMapConfig.prototype={constructor:BFAutomapperMapConfig,name:"BFAutomapperMapConfig"},BFAutomapperMapConfig.prototype.addMapTo=function(destinationVarPath,defaultValue){var newMapTo=new BFAutomapperMapTo(destinationVarPath,defaultValue);return this.mapToCollection.push(newMapTo),newMapTo},BFAutomapperMapConfigExtended.prototype=new BFAutomapperMapConfig(null),BFAutomapperMapConfigExtended.prototype.constructor=BFAutomapperMapConfigExtended,BFAutomapperMapConfigExtended.prototype.name="BFAutomapperMapConfigExtended",BFAutomapperMapConfigExtended.prototype.applyTemplateByName=function(templateName){-1===this.templatesToApply.indexOf(templateName)&&this.templatesToApply.push(templateName)},BFAutomapperRouter.prototype={constructor:BFAutomapperRouter,name:"BFAutomapperRouter"},BFAutomapperRouter.prototype.getMapConfig=function(src,context){for(var resultedMapConfig=null,i=0;i<this.routers.length;i++){var route=this.routers[i];if(route.routeFunc(src,context)===!0){resultedMapConfig=route.mapConfig;break}}return null===resultedMapConfig&&(resultedMapConfig=this.defaultMapConfig),resultedMapConfig},BFAutomapperRouter.prototype.createConfigForRoute=function(routeFunc){var newRoute=new BFAutomapperRoute(routeFunc,new BFAutomapperMapConfigExtended(this.options));return this.routers.push(newRoute),newRoute.mapConfig},BFAutomapperRouter.prototype.createDefaultConfig=function(){return this.defaultMapConfig=new BFAutomapperMapConfigExtended(this.options),this.defaultMapConfig
},BFAutomapper.prototype={constructor:BFAutomapper,name:"BFAutomapper",mapRouters:{},mapTemplates:{}},BFAutomapper.prototype.createMap=function(sourceTypeName,destinationTypeName,options){var newMapRouterName=this.buildMapRouterName(sourceTypeName,destinationTypeName);if(this.mapRouters[newMapRouterName])throw new TypeError("Configuration for "+newMapRouterName+" already exists");var newMapRouter=new BFAutomapperRouter(sourceTypeName,destinationTypeName,options);return this.mapRouters[newMapRouterName]=newMapRouter,newMapRouter.createDefaultConfig()},BFAutomapper.prototype.isExists=function(sourceTypeName,destinationTypeName){var mapRouterName=this.buildMapRouterName(sourceTypeName,destinationTypeName);return this.mapRouters.hasOwnProperty(mapRouterName)},BFAutomapper.prototype.createRouter=function(sourceTypeName,destinationTypeName,options){var newMapRouterName=this.buildMapRouterName(sourceTypeName,destinationTypeName);if(this.mapRouters.hasOwnProperty(newMapRouterName))throw new TypeError("Configuration for "+newMapRouterName+" already exists");var newMapRouter=new BFAutomapperRouter(sourceTypeName,destinationTypeName,options);return this.mapRouters[newMapRouterName]=newMapRouter,newMapRouter},BFAutomapper.prototype.createMapTemplate=function(templateName,options){if(!lodash.isString(templateName))throw new TypeError("templateName should be String");if(this.mapTemplates[templateName])throw new TypeError("Template with name "+templateName+" already exists");var newMapConfig=new BFAutomapperMapConfig(options);return this.mapTemplates[templateName]=newMapConfig,newMapConfig},BFAutomapper.prototype.buildMapRouterName=function(sourceTypeName,destinationTypeName){if(lodash.isString(sourceTypeName)===!1||sourceTypeName.length<=0)throw new TypeError("'sourceTypeName' should be a non empty string");if(lodash.isString(destinationTypeName)===!1||destinationTypeName.length<=0)throw new TypeError("'destinationTypeName' should be a non empty string");var mapName=sourceTypeName+"_"+destinationTypeName;return mapName},BFAutomapper.prototype.map=function(sourceTypeName,destinationTypeName,source,destination,executionContext){if("undefined"==typeof source)return destination;var mapRouterName=this.buildMapRouterName(sourceTypeName,destinationTypeName);if(this.mapRouters.hasOwnProperty(mapRouterName)===!1)throw new Error("Configuration for "+mapRouterName+" doesn't exist");var validExecutionContext=executionContext?executionContext:this,mapConfig=this.mapRouters[mapRouterName].getMapConfig(source,validExecutionContext);if(destination||(destination={}),null===mapConfig)return destination;var mapToCollection=mapConfig.mapToCollection;mapToCollection.length>0&&lodash.forEach(mapToCollection,function(mapToObj){mapToObj.map(source,destination,validExecutionContext)});var templatesToApply=mapConfig.templatesToApply;if(templatesToApply.length>0){var _this=this;lodash.forEach(templatesToApply,function(templateName){if(_this.mapTemplates.hasOwnProperty(templateName)){var templateMapToColl=_this.mapTemplates[templateName].mapToCollection;lodash.forEach(templateMapToColl,function(mapToObj){mapToObj.map(source,destination,validExecutionContext)})}})}return destination},BFAutomapper.prototype.formatters={strToLowerCase:function(val){return lodash.isString(val)?val.toLowerCase():val},strCutTo255Characters:function(val){return lodash.isString(val)&&val.length>255?val.substr(0,255):val}},module.exports=new BFAutomapper}()},{"../../lib/lodash/lodash.build.js":3}],17:[function(require,module){(function(global){!function(){"use strict";function BFAContextAggregator(bfAnalytics){if(!(bfAnalytics&&bfAnalytics instanceof BFAnalytics))throw new TypeError("attempted to add an invalid BFAnalytics to "+this.name);this.bfAnalytics=bfAnalytics}var BFAnalytics=require("../analytics.js"),defs=require("../common/bfa_defs.js"),lodash=require("../../lib/lodash/lodash.build.js"),logger=require("../common/logger.js")("BFAContextAggregator");BFAContextAggregator.prototype.name="BFAContextAggregator",BFAContextAggregator.prototype.aggregatePageContext=function(){logger.info("aggregatePageContext: started");var page={},bfStatic="undefined"!=typeof window?window.BF_STATIC:"undefined"!=typeof global?global.BF_STATIC:null;bfStatic&&bfStatic instanceof Object&&(page.uriObject={url:document.location.href,host:document.location.host,path:document.location.pathname,canonical:document.location.canonical,cleanedPath:document.location.pathname,query:document.location.search,hash:document.location.hash,protocol:document.location.protocol},bfStatic.web_root&&page.uriObject.cleanedPath&&lodash.startsWith(page.uriObject.cleanedPath,bfStatic.web_root)&&(page.uriObject.cleanedPath=page.uriObject.cleanedPath.substr(bfStatic.web_root.length)),page.country=bfStatic.country,page.metavertical="",page.language=bfStatic.language,page.env=bfStatic.bf_env,page.type=bfStatic.page_type,page.platform=lodash.startsWith(bfStatic.tt_page,"Mobile")?defs.platform.mobileweb:defs.platform.desktop,page.templateType=bfStatic.tt_page,logger.info("aggregatePageContext: page object is filled"));var bfPostDetails="undefined"!=typeof window?window.buzzDetails:"undefined"!=typeof global?global.buzzDetails:null;return bfPostDetails&&bfPostDetails instanceof Object&&(logger.info("aggregatePageContext: started"),page.post={},page.post.form=bfPostDetails.form,page.post.id=bfStatic.campaignid,page.post.name=bfStatic.buzz_name,page.post.published=bfPostDetails.published,page.post.publishedAgo=bfPostDetails.published_ago,page.post.postFormat=bfPostDetails.postFormat,page.post.listFormat=bfPostDetails.listFormat,page.post.author=bfStatic.username,page.post.badges=bfPostDetails.postBadges,page.post.tags=bfPostDetails.postTags,page.post.metavertical="tbd",page.post.category=bfPostDetails.category_name,page.post.ad=0!==bfPostDetails.ad,page.post.user=0!==bfPostDetails.user,page.post.editor=0!==bfPostDetails.editor,page.post.trigger=0!==bfPostDetails.trigger,page.post.partner=0!==bfPostDetails.f_partner,page.post.raw=0!==bfPostDetails.raw,page.post.isPromoted=1===parseInt(bfStatic.f_ad),page.post.nsfw=0!==bfPostDetails.nsfw,page.post.subBuzzAmount=""!==bfPostDetails.subBuzzCount?parseInt(bfPostDetails.subBuzzCount):0,page.post.mainSubBuzzAmount=bfPostDetails.mainSubBuzzCount?parseInt(bfPostDetails.mainSubBuzzCount):0,page.post.wordsCount=bfPostDetails.wordsCount?parseInt(bfPostDetails.wordsCount):null,logger.info("aggregatePageContext: post object is filled")),this.bfAnalytics.push("setPage",page),logger.info("aggregatePageContext: finished"),this},BFAContextAggregator.prototype.aggregateUserContext=function(){logger.info("aggregateUserContext: started");var user={},BFUser="undefined"!=typeof window?window.BF_User:"undefined"!=typeof global?global.BF_User:null;if(BFUser&&BFUser instanceof Function){var currentUser=new BFUser;if(user.isLoggedIn=currentUser.isLoggedIn(),user.referrer=document.referrer,user.userAgent=navigator.userAgent,logger.info("aggregateUserContext: user filled"),user.isLoggedIn){var userInfo=currentUser.getUserInfo();user.email=userInfo.email,user.id=userInfo.userid,user.name=userInfo.username,user.isEditor="true"===userInfo.p_editor_admin,user.isAdmin="true"===userInfo.p_admin,user.isAdvertiser="true"===userInfo.f_ad,logger.info("aggregateUserContext: auth user filled")}}return this.bfAnalytics.push("setUser",user),logger.info("aggregateUserContext: finished"),this},module.exports=BFAContextAggregator}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib/lodash/lodash.build.js":3,"../analytics.js":4,"../common/bfa_defs.js":7,"../common/logger.js":9}]},{},[5]);