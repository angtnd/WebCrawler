define("components/card",["exports","module","flight/index","../components/content-warning","../components/google-analytics","../components/loop-tracker","../mixins/page-info","../components/player","../components/volume-control","../mixins/with-child-components"],function(t,e,i,n,o,s,r,a,d,u){"use strict";var h=function(t){return t&&t.__esModule?t["default"]:t},l=h(i),c=h(n),m=h(o),f=h(s),p=h(r),g=h(a),v=h(d),w=h(u),b=l.component(p,function(){var t=$(document.body);this.attributes({videoContainerSelector:".video-container",videoWrapperSelector:".video-wrapper",contentWarningSelector:".warning-overlay",volumeControlSelector:".VolumeControl"}),this.after("initialize",function(){this.attachChild(m,document);var e=this.select("videoContainerSelector");this.attachChild(g,e),this.attachChild(f,document),this.attachChild(c,this.select("contentWarningSelector")),this.attachChild(v,this.select("volumeControlSelector")),this.on("dataVideoPlay",function(){t.addClass("embed-playing")}),this.on("dataVideoPaused",function(){t.removeClass("embed-playing")}),this.on("uiVideoMute",function(){t.addClass("embed-muted")}),this.on("uiVideoUnmute",function(){t.removeClass("embed-muted")}),t.on("mouseenter",function(){t.addClass("embed-hover")}),t.on("mouseleave",function(){t.removeClass("embed-hover")}),$(window).on("resize",function(){var t=Math.min($(window).width(),$(window).height());this.select("videoWrapperSelector").width(t).height(t)}.bind(this)).resize(),this.trigger("dataCurrentVideo",window.POST_DATA),this.page.startUnmuted?e.trigger("uiVideoUnmute"):e.trigger("uiVideoMute"),this.page.autoplayDisabled||e.trigger("uiScrolledInToView")}),this.after("teardown",function(){$(window).off("resize")})},w);e.exports=b}),define("components/content-warning",["exports","module","flight/index","../mixins/current-video"],function(t,e,i,n){"use strict";var o=function(t){return t&&t.__esModule?t["default"]:t},s=o(i),r=o(n),a=s.component(r,function(){this.attributes({viewBtnSelector:"button",hasDismissedWarning:!1}),this.currentVideoChanged=function(t,e){this.attr.hasDismissedWarning||(e.explicitContent&&!this.attr.hasDismissedWarning?(this.$node.show(),this.trigger("dataShowingContentWarning")):!e.explicitContent&&t.explicitContent&&(this.$node.hide(),this.trigger("dataHidingContentWarning")))},this.onClick=function(t){t.stopPropagation(),this.trigger("uiCloseContentWarning"),this.attr.hasDismissedWarning=!0,this.$node.hide()},this.after("initialize",function(){this.on(this.select("viewBtnSelector"),"click",this.onClick)})});e.exports=a}),define("components/google-analytics",["exports","module","flight/index"],function(t,e,i){"use strict";var n=function(t){return t&&t.__esModule?t["default"]:t},o=n(i),s=!1,r=!1,a=o.component(function(){this.attributes({account:"UA-34240974-1"}),this.initializeAnalytics=function(){s=this.attr.account,window._gaq=window._gaq||[],window._gaq.push(["_setAccount",this.attr.account]),window._gaq.push(["_setDomainName","none"]),window._gaq.push(["_trackPageview"]);var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"stats.g.doubleclick.net/dc.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)},this.onTrackEvent=function(t,e){this.push(["_trackEvent",e.category,e.action,e.label,e.value,!!e.nonInteraction])},this.push=function(t){window._gaq.push(t)},this.after("initialize",function(){if(s?this.attr.account!==s&&console.warn("Google Analytics already initialized with account",s):window.__karma__||this.initializeAnalytics(),r){if(window.__karma__)return;return console.error("Google Analytics component is currently attached. Bailing to avoid duplicate reporting.")}r=!0,this.on(document,"dataTrackEvent",this.onTrackEvent)}),this.after("teardown",function(){r=!1})});e.exports=a}),define("components/loop-tracker",["exports","module","flight/index","../mixins/current-video"],function(t,e,i,n){"use strict";var o,s=function(t){return t&&t.__esModule?t["default"]:t},r=s(i),a=s(n),d=.5;o=r.component(function(){function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"===t?e:3&e|8;return i.toString(16)})}this.attributes({recordedLoop:!1,unsentLoops:0,lastLoopTime:0,totalLoopsRecorded:0,nextUpdateTimestamp:0,requestInProgress:!1,enabled:!0}),this.currentVideoChanged=function(){this.attr.unsentLoops&&this.flush(!0),this.attr.recordedLoop=!1,this.attr.unsentLoops=0,this.attr.lastLoopTime=0,this.attr.totalLoopsRecorded=0,this.attr.enabled=!0},this.onVideoLooped=function(){this.attr.recordedLoop=!1},this.onVideoTimeUpdate=function(t,e){!this.attr.recordedLoop&&e.currentTime>d&&(this.recordLoop(),this.attr.recordedLoop=!0)},this.recordLoop=function(){if(this.attr.enabled){var t=Date.now();if(t-this.attr.lastLoopTime<900)return void(this.attr.enabled=0);this.attr.lastLoopTime=t,this.attr.totalLoopsRecorded<25&&this.attr.unsentLoops++,this.attr.totalLoopsRecorded++,this.flush()}},this.flush=function(e){if(0!==this.attr.unsentLoops&&(e||!(this.attr.requestInProgress||Date.now()<this.attr.nextUpdateTimestamp))){var i=this.attr.unsentLoops;this.attr.unsentLoops=0,this.attr.requestInProgress=!0,$.ajax({url:"/api/loops",async:!e,type:"post",headers:{"X-Vine-Client":window.VINE_CLIENT,"X-Request-Id":t()},contentType:"application/json",data:JSON.stringify({loops:[{postId:this.attr.currentVideo.postIdStr,count:i,ts:Date.now()/1e3}]})}).then(function(t){t=t||{},this.attr.nextUpdateTimestamp=Date.now()+1e3*(t.nextAfter||30),this.trigger("dataLoopsRecorded",t)}.bind(this)).always(function(){this.attr.requestInProgress=!1}.bind(this))}},this.after("initialize",function(){this.on(document,"dataVideoTimeUpdate",this.onVideoTimeUpdate),this.on(document,"dataVideoLooped",this.onVideoLooped),this.on(window,"unload",this.flush.bind(this,!0))}),this.after("teardown",function(){this.flush()})},a),e.exports=o}),define("components/mute-button",["exports","module","flight/index","../mixins/browser-info"],function(t,e,i,n){"use strict";var o=function(t){return t&&t.__esModule?t["default"]:t},s=o(i),r=o(n),a=s.component(r,function(){this.attributes({videoContainer:$(".video-container"),embedType:""}),this.onClick=function(t){this.$node.hasClass("muted")?(this.trigger("dataTrackEvent",{category:"Post",action:"user unmute",label:this.attr.embedType}),$(this.attr.videoContainer).trigger("uiVideoUnmute"),$(this.attr.videoContainer).trigger("uiVideoRestart")):(this.trigger("dataTrackEvent",{category:"Post",action:"user mute",label:this.attr.embedType}),$(this.attr.videoContainer).trigger("uiVideoMute")),t.stopPropagation()},this.onMuted=function(){this.$node.addClass("muted")},this.onUnmuted=function(){this.$node.removeClass("muted")},this.after("initialize",function(){return this.browser.iOS?void this.$node.hide():(this.on("click",this.onClick),this.on(this.attr.videoContainer,"dataVideoMuted",this.onMuted),void this.on(this.attr.videoContainer,"dataVideoUnmuted",this.onUnmuted))})});e.exports=a}),define("components/player",["exports","module","flight/index","mp4","../mixins/browser-info","../mixins/page-info","../mixins/current-video","../mixins/host-script-status","../mixins/page-visibility-status"],function(t,e,i,n,o,s,r,a,d){"use strict";var u=function(t){return t&&t.__esModule?t["default"]:t},h=u(i),l=u(n),c=u(o),m=u(s),f=u(r),p=u(a),g=u(d),v=.7,w=h.component(function(){var t="h264",e="dash",i=200,n=.5;this.attributes({mediaElement:!1,shouldMute:!0,needsContentWarningDismissal:!1,videoSelector:"video",thumbnailSelector:".thumbnail",mediaElementSelector:"video, .me-plugin",pluginPath:"/swf/",shouldResumeOnVisibility:!1,mediaUrls:{},embedType:"",volumeLevel:v}),this.videoContainer=function(){return this.$node},this.onClick=function(){return this.browser.iOS&&!this.attr.firstClickSkipped?void(this.attr.firstClickSkipped=!0):void(this.attr.mediaElement.paused?(this.trigger("dataTrackEvent",{category:"Post",action:"user play",label:this.attr.embedType}),this.onUiVideoPlay()):(this.trigger("dataTrackEvent",{category:"Post",action:"user pause",label:this.attr.embedType}),this.attr.manuallyPaused=!0,this.onUiVideoPause()))},this.onPageBecameHidden=function(){this.attr.shouldResumeOnVisibility=this.attr.mediaElement?!this.attr.mediaElement.paused:!1,this.onUiVideoPause()},this.onPageBecameVisible=function(){this.attr.shouldResumeOnVisibility&&this.onUiVideoPlay(),delete this.attr.shouldResumeOnVisibility},this.onUiVideoPlay=function(){this.attr.mediaElement?this.attr.mediaElement.play():this.createMediaElement(),this.attr.manuallyPaused=!1},this.onUiVideoPause=function(){this.attr.mediaElement&&this.attr.mediaElement.pause(),this.trigger("dataVideoPaused")},this.onUiVideoSetVolume=function(t,e){this.attr.mediaElement&&(this.attr.volumeLevel=e.newVolumeLevel,this.attr.mediaElement.setVolume(e.newVolumeLevel),this.attr.mediaElement.setMuted(!1))},this.onUiVideoMute=function(){this.attr.shouldMute=!0,this.attr.mediaElement&&(this.attr.priorAudioState!==this.attr.mediaElement.muted&&(this.attr.priorAudioState=this.attr.mediaElement.muted),this.attr.mediaElement.muted=!0,this.attr.mediaElement.setMuted&&this.attr.mediaElement.setMuted(!0)),this.trigger("sendMessage",{message:"mute"}),this.trigger("dataVideoMuted")},this.onUiVideoUnmute=function(){this.attr.shouldMute=!1,this.attr.mediaElement&&(this.attr.priorAudioState!==this.attr.mediaElement.muted&&(this.attr.priorAudioState=this.attr.mediaElement.muted),this.attr.mediaElement.muted=!1,this.attr.mediaElement.setMuted&&this.attr.mediaElement.setMuted(!1)),this.trigger("sendMessage",{message:"unmute",volumeLevel:this.attr.volumeLevel}),this.trigger("dataVideoUnmuted")},this.onUiVideoRestart=function(){this.attr.mediaElement&&(this.attr.mediaElement.setCurrentTime?this.attr.mediaElement.setCurrentTime(0):this.attr.mediaElement.currentTime=0)},this.onUiVideoRestoreAudio=function(){"undefined"!=typeof this.attr.priorAudioState&&(this.attr.priorAudioState?this.onUiVideoUnmute():this.onUiVideoMute(),delete this.attr.priorAudioState)},this.onVideoEnded=function(){this.attr.mediaElement.setCurrentTime(0),this.attr.mediaElement.play(),this.trigger("dataVideoLooped")},this.onVideoCanPlay=function(){this.trigger("dataVideoCanPlay")},this.lastTimeUpdateSentAt=0,this.onVideoTimeUpdate=function(){var t=Date.now();t-this.lastTimeUpdateSentAt<250||(this.lastTimeUpdateSentAt=t,this.attr.mediaElement&&(this.canPlaySeamlessly()&&this.attr.duration?this.trigger("dataVideoTimeUpdate",{currentTime:this.attr.mediaElement.currentTime%this.attr.duration,duration:this.attr.duration}):this.trigger("dataVideoTimeUpdate",{currentTime:this.attr.mediaElement.currentTime,duration:this.attr.mediaElement.duration})))},this.onDataVideoPlaying=function(){this.attr.mediaElement.muted=this.attr.shouldMute,this.attr.mediaElement.setMuted&&this.attr.mediaElement.setMuted(this.attr.shouldMute)},this.onDataVideoElementCreated=function(t,e){this.attr.mediaElement=e,this.attr.mediaElement.setVolume(v),this.on(e,"pause",this.trigger.bind(this,"dataVideoPaused")),this.on(e,"play",this.trigger.bind(this,"dataVideoPlay")),this.on(e,"playing",this.trigger.bind(this,"dataVideoPlaying")),this.on(e,"ended",this.onVideoEnded.bind(this)),this.on(e,"canplay",this.onVideoCanPlay.bind(this)),this.on(e,"timeupdate",this.onVideoTimeUpdate.bind(this)),$(window).on("webkitendfullscreen",function(){this.trigger("uiVideoPause")}.bind(this)),this.select("thumbnailSelector").hide(),this.attr.manuallyPaused||this.attr.needsContentWarningDismissal||this.browser.iPhone||this.trigger("uiVideoPlay"),this.attr.mediaElement.setVolume(this.attr.volumeLevel)},this.currentVideoChanged=function(){this.attr.mediaUrls={}},this.mediaUrl=function(t){function n(t){return t.replace(/^http:/,"https:")}if(this.attr.mediaUrls[t])return this.attr.mediaUrls[t];var o;if(this.attr.currentVideo.videoUrls){var s=this.attr.currentVideo.videoUrls.filter(function(e){return e.format===t});if(!s.length)return null;if(s.sort(function(t,e){return t.rate<e.rate?1:t.rate>e.rate?-1:0}),this.page.forceLd)o=n(s[s.length-1].videoUrl);else if(this.page.forceHd)o=n(s[0].videoUrl);else if(this.browser.mobile){var r=s.reduce(function(t,e){return t||(t=e.rate<=i?e:null)},null);r=r||s[0],o=n(r.videoUrl)}else o=n(s[0].videoUrl)}else o=n(this.attr.currentVideo[t===e?"videoDashUrl":"videoUrl"]);return this.attr.mediaUrls[t]=o,o},this.canPlaySeamlessly=function(){if(this.attr.seamlessPlaybackDisabled||this.page.disableSeamless)return!1;window.MediaSource=window.MediaSource||window.WebKitMediaSource;var t=this.mediaUrl(e),i=!this.browser.chromium&&this.browser.chrome&&this.browser.chrome>=30;return i&&t&&window.MediaSource},this.seamlessFailover=function(){this.attr.seamlessPlaybackDisabled=!0,this.destroyMediaElement(),this.createMediaElement()},this.clientForSeamlessMediaRequest=function(){return new window.XMLHttpRequest},this.createSeamlessMedia=function(t){var i,o=.05,s=25,r=this.mediaUrl(e),a=this.clientForSeamlessMediaRequest();a.addEventListener("error",function(t){return console.error("xhr error",t),this.seamlessFailover()}.bind(this)),a.onload=function(){var e=new window.MediaSource;t.src=window.URL.createObjectURL(e);var r=new Uint8Array(a.response);e.addEventListener("sourceopen",function(){function d(){c.length&&c.shift()()}try{i=e.addSourceBuffer('video/mp4; codecs="avc1.4d401e, mp4a.40.2"')}catch(u){return console.error("sourcebuffer error"),this.seamlessFailover()}var h,c=[],m=function(){var t=i.buffered.length>0?i.buffered.end(i.buffered.length-1):o;return h&&h-n>t?(i.removeEventListener("updateend",d),void this.seamlessFailover()):(i.timestampOffset=t-o,i.appendWindowEnd=t+this.attr.duration-2*o,i.appendWindowStart=t,i.appendBuffer(r),void(h=i.appendWindowEnd))};m=m.bind(this);for(var f=0;s>f;f++)c.push(function(){try{m()}catch(t){i.removeEventListener("updateend",d),this.seamlessFailover()}}.bind(this));c.push(function(){e.endOfStream(),t.currentTime=o+.011;var i=0;this.seamlessTimeupdateListener=function(){Math.floor(t.currentTime/this.attr.duration)>i&&(i++,this.trigger("dataVideoLooped"))}.bind(this),t.addEventListener("timeupdate",this.seamlessTimeupdateListener,!0);var n=setTimeout(function(){t.paused||this.seamlessFailover()}.bind(this),200);$(t).one("playing",function(){clearTimeout(n)}),this.trigger("dataVideoElementCreated",t)}.bind(this)),i.addEventListener("updateend",d),this.attr.duration?c.shift()():l({file:a.response,type:"arraybuffer"},function(t,e){return t?(console.error("mp4.js error"),this.seamlessFailover()):(this.attr.duration=parseFloat(e["com.vineapp.duration"]),void c.shift()())}.bind(this))}.bind(this))}.bind(this),a.open("GET",r,!0),a.responseType="arraybuffer",a.send()},this.createMediaElement=function(){if(!this.attr.mediaElementCreatedPromise){this.attr.mediaElementCreatedPromise=$.Deferred(),$('<video id="video" muted type="video/mp4" preload="auto"></video>').attr({poster:this.attr.currentVideo.thumbnailUrl,src:this.mediaUrl(t)}).prependTo(this.videoContainer());var e,i=this.select("videoSelector").get(0),n=Math.min(this.$node.width(),$(window).height());e={defaultVideoWidth:n,defaultVideoHeight:n,videoWidth:n,videoHeight:n,features:[],plugins:["flash"],pluginPath:window.PLUGIN_PATH||this.attr.pluginPath,enablePluginSmoothing:!0,flashName:"flashmediaelement.2.swf",success:function(e){this.canPlaySeamlessly()?(this.createSeamlessMedia(e),this.attr.mediaElementCreatedPromise.resolve()):(e.setSrc([{src:this.mediaUrl(t),type:"video/mp4"}]),setTimeout(function(){this.trigger("dataVideoElementCreated",e),this.attr.mediaElementCreatedPromise.resolve()}.bind(this),"native"===e.pluginType?1:250))}.bind(this),error:function(t){this.trigger("dataVideoElementCreationFailed",t)}.bind(this)},new window.MediaElement(i,e)}},this.destroyMediaElement=function(){var t=this;this.attr.mediaElementCreatedPromise.then(function(){t.select("thumbnailSelector").show(),t.select("mediaElementSelector").remove(),t.attr.mediaElement&&($(t.attr.mediaElement).unbind(),t.attr.mediaElement.removeEventListener&&t.attr.mediaElement.removeEventListener("timeupdate",t.seamlessTimeupdateListener,!0),t.attr.mediaElement.pause&&t.attr.mediaElement.pause(),t.attr.mediaElement=null),t.attr.mediaElementCreatedPromise=null,t.trigger("dataVideoElementDestroyed")})},this.after("initialize",function(){this.on("click",this.onClick.bind(this)),this.on("uiVideoPlay",this.onUiVideoPlay.bind(this)),this.on("uiVideoPause",this.onUiVideoPause.bind(this)),this.on("uiVideoMute",this.onUiVideoMute.bind(this)),this.on("uiVideoUnmute",this.onUiVideoUnmute.bind(this)),this.on("uiVideoSetVolume",this.onUiVideoSetVolume.bind(this)),this.on("uiVideoRestart",this.onUiVideoRestart.bind(this)),this.on("uiVideoRestoreAudio",this.onUiVideoRestoreAudio.bind(this)),this.on("dataVideoPlaying",this.onDataVideoPlaying.bind(this)),this.on("dataVideoElementCreated",this.onDataVideoElementCreated.bind(this)),this.on("dataVideoElementCreationFailed",function(t,e){console.error("Player initialization failed:",e)}),this.on(document,"uiScrolledInToView",function(){this.page.autoplayDisabled||this.attr.needsContentWarningDismissal||this.createMediaElement()}.bind(this)),this.on(document,"uiCreateMediaElement",function(){this.createMediaElement()}),this.on(document,"uiScrolledOutOfView",function(){this.destroyMediaElement()}),this.on(document,"dataShowingContentWarning",function(){this.attr.needsContentWarningDismissal=!0}),this.on(document,"dataHidingContentWarning",function(){this.attr.needsContentWarningDismissal=!1}),this.on("uiCloseContentWarning",function(){this.attr.needsContentWarningDismissal=!1,this.createMediaElement()}),this.initTimer=setTimeout(function(){this.trigger("dataPlayerInitialized")}.bind(this),200)}),this.after("teardown",function(){$(window).unbind("webkitendfullscreen"),clearTimeout(this.initTimer)})},c,m,f,p,g);e.exports=w}),define("components/volume-control",["exports","module","flight/index"],function(t,e,i){"use strict";var n=function(t){return t&&t.__esModule?t["default"]:t},o=n(i),s=120,r=3e3,a=!1,d=!1,u=!1,h=o.component(function(){this.attributes({textWrapper:".VolumeControl__text-wrapper",text:".VolumeControl__text",volumeSlider:".VolumeControl__slider",handle:".VolumeControl__slider-handle",volumeOn:".VolumeControl__slider-volume-on",iconWrapper:".VolumeControl__icon-wrapper",videoContainer:$(".video-container")}),this.after("initialize",function(){this.sliderNode=this.select("volumeSlider"),this.on(this.attr.videoContainer,"sendMessage",this.onVideoContainerMessage),this.volumeSliderCollection=this.select("handle"),this.volumeSliderCollection=this.volumeSliderCollection.add(this.select("volumeOn")),this.on(this.select("volumeSlider"),"mousedown",this.onSliderMouseDown),this.on(this.select("iconWrapper"),"click",this.onIconClick),this.on(this.select("text"),"click",this.onTextClick),this.on("mouseenter",this.onMouseEnter),this.on("mouseleave",this.onMouseLeave),this.on(document,"uiScrolledInToView",this.setupTextHidingAnimation),this.on(document,"uiFullyInView",this.unmute),this.on(document,"mouseenter",this.setupTextHidingAnimation),this.on(document,"unmutedOtherEmbed",this.hideClickForSoundText)}),this.onTextClick=function(t){this.textAnimationTimeout&&clearTimeout(this.textAnimationTimeout),this.hideClickForSoundText(),this.onIconClick()},this.unmute=function(){$(this.attr.videoContainer).trigger("uiVideoUnmute"),$(this.attr.videoContainer).trigger("uiVideoRestart"),this.hideClickForSoundText()},this.onIconClick=function(t){this.hideClickForSoundText(),this.$node.hasClass("VolumeControl--muted")?($(document).trigger("sendMessage",{message:"userUnmute"}),this.trigger("dataTrackEvent",{category:"Post",action:"user unmute"}),$(this.attr.videoContainer).trigger("uiVideoUnmute"),$(this.attr.videoContainer).trigger("uiVideoRestart")):($(document).trigger("sendMessage",{message:"userMute"}),this.trigger("dataTrackEvent",{category:"Post",action:"user mute"}),$(this.attr.videoContainer).trigger("uiVideoMute"))},this.onVideoContainerMessage=function(t,e){"mute"===e.message?this.setSliderPosition(s):"unmute"===e.message&&this.setSliderPosition(s-e.volumeLevel*s)},this.setupTextHidingAnimation=function(){if(!this.textHidingAnimationSetUp){this.textHidingAnimationSetUp=!0;var t=this.select("textWrapper");t.width(t.width()),this.textAnimationTimeout=setTimeout(this.hideClickForSoundText.bind(this),r)}},this.hideClickForSoundText=function(){this.select("textWrapper").width(0),this.$node.removeClass("VolumeControl--show-click-for-sound-text")},this.setSliderPosition=function(t){this.volumeSliderCollection.css("transform","translateY("+t+"px)"),this.$node.toggleClass("VolumeControl--muted",t===s)},this.removeHoverClass=function(){this.$node.removeClass("VolumeControl--hover")},this.onMouseEnter=function(t){u?(this.$node.addClass("VolumeControl--hover VolumeControl--show-slider"),d=!1):this.$node.addClass("VolumeControl--hover"),this.setupTextHidingAnimation()},this.onMouseLeave=function(t){a?d=!0:this.removeHoverClass()},this.onSliderMouseDown=function(t){t.preventDefault(),this.sliderY=this.sliderNode.offset().top,this.on(document,"mousemove",this.onSliderMove),this.on(document,"mouseup",this.onSliderMouseUp),this.onSliderMove(t),a=!0},this.onSliderMove=function(t){t.preventDefault();var e=t.clientY,i=Math.min(s,Math.max(0,e-this.sliderY));this.setSliderPosition(i);var n=1-i/s;this.trigger(this.attr.videoContainer,"uiVideoSetVolume",{newVolumeLevel:n})},this.onSliderMouseUp=function(){this.off(document,"mousemove",this.onSliderMove),this.off(document,"mouseup",this.onSliderMouseUp),a=!1,d&&this.removeHoverClass()}});e.exports=h}),define("mixins/browser-info",["exports","module"],function(t,e){"use strict";function i(){this.attributes({browserOverrides:!1,userAgent:!1}),this.userAgent=function(){return this.attr.userAgent||navigator.userAgent},this.parse=function(t){var e=/android/i.test(t),i=/ipad/i.test(t),n=/iphone|ipod/i.test(t),o=i||n,s=/Windows Phone/i.test(t),r=/blackberry|mini|palm/i.test(t),a=o||e||s||r,d=/opr\/\d+/i.test(t),u=/chromium/i.test(t),h=t.match(/Chrome\/(\d+)/);return{android:e,iPad:i,iPhone:n,iOS:o,windowsPhone:s,blackberry:r,mobile:a,opera:d,chromium:u,chrome:d||a||!h?!1:parseInt(h[1],10)}},this.resetBrowserInfo=function(){n=this.parse(this.userAgent()),this.browser=$.extend({},n,this.attr.browserOverrides||{})},this.after("initialize",function(){n||this.resetBrowserInfo(),this.browser=$.extend({},n,this.attr.browserOverrides||{})})}var n;$(document).on("__browserInfoReset",function(){n=!1}),e.exports=i}),define("mixins/current-video",["exports","module"],function(t,e){"use strict";function i(){this.attributes({currentVideo:!1}),this.onCurrentVideo=function(t,e){if(this.attr.currentVideo!==e){var i=this.attr.currentVideo;this.attr.currentVideo=e,this.currentVideoChanged&&this.currentVideoChanged(i,e)}},this.after("initialize",function(){this.on(document,"dataCurrentVideo",this.onCurrentVideo),this.attr.currentVideo&&this.currentVideoChanged&&this.currentVideoChanged(null,this.attr.currentVideo)})}e.exports=i}),define("mixins/host-script-status",["exports","module"],function(t,e){"use strict";function i(){o=!1,s=!1}function n(){this.triggerIfAlreadyHasHostScript=function(){o?(this.hasHostScript=!0,this.onHostScriptFound&&this.onHostScriptFound()):s&&(this.hasHostScript=!1,this.onHostScriptTimeout&&this.onHostScriptTimeout())},this.after("initialize",function(){this.on(document,"dataHostScriptTimeout __dataHostScriptTimeout",function(){this.hasHostScript=!1,this.onHostScriptTimeout&&this.onHostScriptTimeout()}),this.on(document,"dataHostScriptFound __dataHostScriptFound",function(){this.hasHostScript=!0,this.onHostScriptFound&&this.onHostScriptFound()}),this.triggerIfAlreadyHasHostScript()})}var o=!1,s=!1;$(document).on("dataHostScriptTimeout",function(){s=!0,o=!1}),$(document).on("dataHostScriptFound",function(){o=!0,s=!1}),i(),$(document).on("__hostScriptReset",i),e.exports=n}),define("mixins/page-info",["exports","module"],function(t,e){"use strict";function i(){this.attributes({pageOverrides:!1,embedType:!1,locationHref:!1}),this.embedType=function(){return this.attr.embedType||window.EMBED_TYPE},this.locationHref=function(){return this.attr.locationHref||window.location.href},this.queryFlagSet=function(t){return new RegExp("\\?(.*&|)"+t+"(&|$)","g").test(this.locationHref())},this.parsePageInfo=function(){var t=this.embedType(),e="card"===t,i="simple"===t,n="postcard"===t;return{isCard:e,isEmbed:i||n,isSimpleEmbed:i,isPostcardEmbed:n,autoplayDisabled:this.queryFlagSet("autoplay=no")||this.queryFlagSet("autoplay=0"),startUnmuted:this.queryFlagSet("audio=1")||this.queryFlagSet("audio=yes"),unmuteOnHover:this.queryFlagSet("unmuteOnHover=1"),noSharing:this.queryFlagSet("sharing=no"),disableSeamless:this.queryFlagSet("seamless=no"),forceHd:this.queryFlagSet("quality=hd"),forceLd:this.queryFlagSet("quality=low")}},this.resetPageInfo=function(){n=this.parsePageInfo(),this.page=$.extend({},n,this.attr.pageOverrides||{})},this.after("initialize",function(){n||this.resetPageInfo(),this.page=$.extend({},n,this.attr.pageOverrides||{})})}var n;$(document).on("__pageInfoReset",function(){n=!1}),e.exports=i}),define("mixins/page-visibility-status",["exports","module"],function(t,e){"use strict";function i(){this.getPageIsHidden=function(){return document[n]},this.after("initialize",function(){this.attr.visibilityChangeEvent=o,this.on(document,o,function(){this.getPageIsHidden()?this.onPageBecameHidden&&this.onPageBecameHidden():this.onPageBecameVisible&&this.onPageBecameVisible()})})}var n,o;"undefined"!=typeof document.hidden?(n="hidden",o="visibilitychange"):"undefined"!=typeof document.mozHidden?(n="mozHidden",o="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(n="msHidden",o="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(n="webkitHidden",o="webkitvisibilitychange"),e.exports=i}),define("mixins/with-child-components",["exports","module"],function(t,e){"use strict";function i(){this.defaultAttrs({teardownOn:""}),this.after("initialize",function(){if(this.attr.teardownOn){if(this.attr.teardownOn===this.childTeardownEvent)throw new Error("Component initialized to listen for its own teardown event.");this.on(document,this.attr.teardownOn,function(){this.teardown()})}})}function n(){this.before("initialize",function(){this.childTeardownEvent=this.childTeardownEvent||n.nextTeardownEvent()}),this.before("teardown",function(){this.trigger(this.childTeardownEvent)}),this.attachChild=function(t,e,n){n=n||{},n.teardownOn||(n.teardownOn=this.childTeardownEvent);var o=t.prototype.mixedIn||[],s=o.indexOf(i)>-1?!0:!1;(s?t:t.mixin(i)).attachTo(e,n)}}var o=0;n.nextTeardownEvent=function(){return o+=1,"_teardownEvent"+o},n.withBoundLifecycle=i,e.exports=n});var config=JSON.parse(document.getElementById("configuration").innerHTML);window.EMBED_TYPE="card",window.CARD_TYPE=document.body.getAttribute("data-cardtype"),window.POST_DATA=config.post,window.VINE_CLIENT=config.client,window.CDN_HOST=config.cdnHost,window._gaq=window._gaq||[],window._gaq.push(["_setCustomVar",1,"Posttype",window.CARD_TYPE+"-card"]),require("components/card").attachTo(document);
//# sourceMappingURL=card.map