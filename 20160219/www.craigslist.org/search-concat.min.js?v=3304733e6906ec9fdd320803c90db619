!function(a,b){"$:nomunge";var c,d=a.jQuery||a.Cowboy||(a.Cowboy={});d.throttle=c=function(a,c,e,f){function g(){function d(){i=+new Date,e.apply(j,l)}function g(){h=b}var j=this,k=+new Date-i,l=arguments;f&&!h&&d(),h&&clearTimeout(h),f===b&&k>a?d():c!==!0&&(h=setTimeout(f?g:d,f===b?a-k:a))}var h,i=0;return"boolean"!=typeof c&&(f=e,e=c,c=b),d.guid&&(g.guid=e.guid=e.guid||d.guid++),g},d.debounce=function(a,d,e){return e===b?c(a,d,!1):c(a,e,d!==!1)}}(this),function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==kb?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ib.length;){if(c=ib[g],e=c?c+f:b,e in a)return e;g++}return d}function w(){return ob++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:rb?N:sb?Q:qb?S:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&yb&&d-e===0,g=b&(Ab|Bb)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=nb(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===yb||f.eventType===Ab)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Bb&&(i>xb||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=mb(l.x)>mb(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:lb(a.pointers[c].clientX),clientY:lb(a.pointers[c].clientY)},c++;return{timeStamp:nb(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:lb(a[0].clientX),y:lb(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:lb(c/b),y:lb(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Cb:mb(a)>=mb(b)?a>0?Db:Eb:b>0?Fb:Gb}function I(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Kb);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],Lb)-J(a[1],a[0],Lb)}function L(a,b){return I(b[0],b[1],Lb)/I(a[0],a[1],Lb)}function M(){this.evEl=Nb,this.evWin=Ob,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Rb,this.evWin=Sb,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ub,this.evWin=Vb,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Ab|Bb)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Xb,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(yb|zb)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===yb)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ab|Bb)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bc))return bc;var b=q(a,cc),c=q(a,dc);return b&&c?cc+" "+dc:b||c?b?cc:dc:q(a,ac)?ac:_b}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=ec,this.simultaneous={},this.requireFail=[]}function W(a){return a&jc?"cancel":a&hc?"end":a&gc?"move":a&fc?"start":""}function X(a){return a==Gb?"down":a==Fb?"up":a==Db?"left":a==Eb?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function ab(){V.apply(this,arguments),this._timer=null,this._input=null}function bb(){Z.apply(this,arguments)}function cb(){Z.apply(this,arguments)}function db(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function eb(a,b){return b=b||{},b.recognizers=m(b.recognizers,eb.defaults.preset),new fb(a,b)}function fb(a,b){b=b||{},this.options=i(b,eb.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),gb(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function gb(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function hb(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ib=["","webkit","moz","MS","ms","o"],jb=b.createElement("div"),kb="function",lb=Math.round,mb=Math.abs,nb=Date.now,ob=1,pb=/mobile|tablet|ip(ad|hone|od)|android/i,qb="ontouchstart"in a,rb=v(a,"PointerEvent")!==d,sb=qb&&pb.test(navigator.userAgent),tb="touch",ub="pen",vb="mouse",wb="kinect",xb=25,yb=1,zb=2,Ab=4,Bb=8,Cb=1,Db=2,Eb=4,Fb=8,Gb=16,Hb=Db|Eb,Ib=Fb|Gb,Jb=Hb|Ib,Kb=["x","y"],Lb=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Mb={mousedown:yb,mousemove:zb,mouseup:Ab},Nb="mousedown",Ob="mousemove mouseup";j(M,y,{handler:function(a){var b=Mb[a.type];b&yb&&0===a.button&&(this.pressed=!0),b&zb&&1!==a.which&&(b=Ab),this.pressed&&this.allow&&(b&Ab&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:vb,srcEvent:a}))}});var Pb={pointerdown:yb,pointermove:zb,pointerup:Ab,pointercancel:Bb,pointerout:Bb},Qb={2:tb,3:ub,4:vb,5:wb},Rb="pointerdown",Sb="pointermove pointerup pointercancel";a.MSPointerEvent&&(Rb="MSPointerDown",Sb="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Pb[d],f=Qb[a.pointerType]||a.pointerType,g=f==tb,h=s(b,a.pointerId,"pointerId");e&yb&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ab|Bb)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Tb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Ub="touchstart",Vb="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Tb[a.type];if(b===yb&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Ab|Bb)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}});var Wb={touchstart:yb,touchmove:zb,touchend:Ab,touchcancel:Bb},Xb="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Wb[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:tb,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==tb,e=c.pointerType==vb;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Ab|Bb)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Yb=v(jb.style,"touchAction"),Zb=Yb!==d,$b="compute",_b="auto",ac="manipulation",bc="none",cc="pan-x",dc="pan-y";T.prototype={set:function(a){a==$b&&(a=this.compute()),Zb&&(this.manager.element.style[Yb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Zb){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bc),f=q(d,dc),g=q(d,cc);return e||f&&c&Hb||g&&c&Ib?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var ec=1,fc=2,gc=4,hc=8,ic=hc,jc=16,kc=32;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;hc>d&&b(!0),b(),d>=hc&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=kc)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(kc|ec)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ic|jc|kc)&&(this.state=ec),this.state=this.process(b),void(this.state&(fc|gc|hc|jc)&&this.tryEmit(b))):(this.reset(),void(this.state=kc))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fc|gc),e=this.attrTest(a);return d&&(c&Bb||!e)?b|jc:d||e?c&Ab?b|hc:b&fc?b|gc:fc:kc}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Jb},getTouchAction:function(){var a=this.options.direction,b=[];return a&Hb&&b.push(dc),a&Ib&&b.push(cc),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Hb?(e=0===f?Cb:0>f?Db:Eb,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Cb:0>g?Fb:Gb,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fc||!(this.state&fc)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fc)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(ab,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_b]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ab|Bb)&&!f)this.reset();else if(a.eventType&yb)this.reset(),this._timer=e(function(){this.state=ic,this.tryEmit()},b.time,this);else if(a.eventType&Ab)return ic;return kc},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ic&&(a&&a.eventType&Ab?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=nb(),this.manager.emit(this.options.event,this._input)))}}),j(bb,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bc]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fc)}}),j(cb,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Hb|Ib,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Hb|Ib)?b=a.velocity:c&Hb?b=a.velocityX:c&Ib&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&mb(b)>this.options.velocity&&a.eventType&Ab},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(db,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ac]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&yb&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ab)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ic,this.tryEmit()},b.interval,this),fc):ic}return kc},failTimeout:function(){return this._timer=e(function(){this.state=kc},this.options.interval,this),kc},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ic&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),eb.VERSION="2.0.4",eb.defaults={domEvents:!1,touchAction:$b,enable:!0,inputTarget:null,inputClass:null,preset:[[bb,{enable:!1}],[_,{enable:!1},["rotate"]],[cb,{direction:Hb}],[$,{direction:Hb},["swipe"]],[db],[db,{event:"doubletap",taps:2},["tap"]],[ab]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var lc=1,mc=2;fb.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?mc:lc},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ic)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===mc||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fc|gc|hc)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&hb(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&gb(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(eb,{INPUT_START:yb,INPUT_MOVE:zb,INPUT_END:Ab,INPUT_CANCEL:Bb,STATE_POSSIBLE:ec,STATE_BEGAN:fc,STATE_CHANGED:gc,STATE_ENDED:hc,STATE_RECOGNIZED:ic,STATE_CANCELLED:jc,STATE_FAILED:kc,DIRECTION_NONE:Cb,DIRECTION_LEFT:Db,DIRECTION_RIGHT:Eb,DIRECTION_UP:Fb,DIRECTION_DOWN:Gb,DIRECTION_HORIZONTAL:Hb,DIRECTION_VERTICAL:Ib,DIRECTION_ALL:Jb,Manager:fb,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:db,Pan:$,Swipe:cb,Pinch:_,Rotate:bb,Press:ab,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==kb&&define.amd?define(function(){return eb}):"undefined"!=typeof module&&module.exports?module.exports=eb:a[c]=eb}(window,document,"Hammer"),function(){var a,b,c,d,e,f,g=$("body"),h=$("#map"),i={},j=$("<div>"+(window.currencySymbol||"")+"</div>").text(),k=function(a){a.find(".viewcontainer").toggleClass("pics info"),a.filter(".viewcontainer").toggleClass("pics info")},l=function(a){var b=["posting","cluster"],c=b.indexOf(a);-1!==c&&(delete b[c],b=b.join(" "),d.addClass(a).removeClass(b))},m=function(){var a=$(".lbframe"),b=parseInt(a.css("top"),10),c=0,d="",e={transform:"","-webkit-transform":"","-ms-transform":""};0>b&&(c=1+2*b/a.height(),d="scale("+c+", "+c+")",Object.keys(e).forEach(function(a){e[a]=d})),a.css(e)},n=function(a){v.activeMarker=a,CL.page.isMobile?CL.lightbox(d,{afterCenter:m}):v.openPopup=L.popup({offset:L.point(1,-5),autoPanPadding:[50,5]}).setLatLng(a.getLatLng()).setContent(d[0]).openOn(v.map)},o=function(){CL.page.isMobile?CL.lightbox.close():v.openPopup&&v.map.closePopup(v.openPopup)},p=function(a,b){var c=$("#postbubble");c.find(".title").toggleClass("banished",b);var d=$("#clusterbubble");d.find('.posting[data-pid="'+a+'"]').toggleClass("banished",b)};CL.banish.events.on("banish unbanish",function(a,b){var c=v.marker.containingPID[b];c&&("banish"===a.type?(c.banishedCount++,c.unbanishedCount--):"unbanish"===a.type&&(c.banishedCount--,c.unbanishedCount++),v.marker.updateIcon(b)),CL.maps.countMarkers()}),CL.banish.events.on("banish unbanish",function(a,b){if("map"===CL.page.viewMode&&v.openPopup&&v.activeMarker&&-1!==v.activeMarker.options.pids.indexOf(b)){var c=v.marker.containingPID[b];"banish"===a.type?(p(b,!0),CL.page.showBanished||(0===c.unbanishedCount?o():c.banishedCount+c.unbanishedCount>1&&$(".backtolist").click())):"unbanish"===a.type&&p(b,!1),v.marker.updateIcon(c.marker)}}),CL.banish.events.on("showBanished hideBanished",function(){CL.maps.countMarkers()});var q=function(a,b){CL.favorites.init(a.find(".star"),function(){v.marker.updateIcon(v.activeMarker)}),a.find(".contenttoggle a").off("click touchstart").on("click touchstart",function(b){b.preventDefault(),k(a)}),CL.swipe.makeGallery(a),s(a,b),a.find(".showcontact").on("click",function(a){a.preventDefault(),CL.page.showContactInfo(this.href)})},r=function(){this.title&&this.marker&&!v.openPopup?(v.activeMarker=this.marker,v.openPopup=L.popup({offset:L.point(1,-5),closeButton:!1,autoPan:!1,isTitlePreview:!0}).setLatLng(this.marker.getLatLng()).setContent('<div style="margin: -10px 0;">'+this.title+"</div>").openOn(v.map)):v.openPopup&&v.openPopup.options.isTitlePreview&&o()},s=function(a,b){CL.banish.ready.done(function(){a.find(".map-banish-unbanish").find(".banish").off("click").on("click",{pid:b},function(a){CL.banish.ban(a.data.pid),L.DomEvent.stopPropagation(a)}).end().find(".unbanish").off("click").on("click",{pid:b},function(a){CL.banish.unban(a.data.pid),L.DomEvent.stopPropagation(a)})}).fail(function(){a.find(".map-banish-unbanish").hide()})},t=function(a){var c=this,d=a.target;v.activeMarker=d;var g="",h=function(a){e.html(a),l("cluster"),n(d),f.off("click").on("click",".backtolist",function(){l("cluster"),CL.lightbox.center(),CL.favorites.init(e.find(".star"),function(){v.marker.updateIcon(d)})}),e.off("click").on("click",".posting",function(){var a=$(this).addClass("visited").data("pid"),b=x(a);CL.jls.setItem(a,1),f.html(b.dom()),l("posting"),p(a,CL.banish.isBanished(a)),b.buildMapBubble(function(b){f.html(b.dom()),p(a,CL.banish.isBanished(a)),q(f,a)}),CL.maps.openPopup?CL.maps.openPopup._adjustPan():CL.lightbox.center()}),a.each(function(a,b){var c=$(b),d=c.data("pid");p(d,CL.banish.isBanished(d)),s(c,d)}),CL.favorites.init(e.find(".star"),function(){v.marker.updateIcon(d)})};f.addClass("iscluster");var j=["s"],k=CL.url.params();j.forEach(function(a){delete k[a]});var m=decodeURI(c.url+"&"+$.param(k)),o=this.PostingID,r=this.GeoCluster;CL.jls.setItem(r,o),d.options.visited=!0,v.marker.updateIcon(d),i[m]?h(i[m]):$.getJSON(m).done(function(a){var c;a[0].forEach(function(a){if(a.visited=CL.jls.getItem(a.PostingID)?"visited":"",a.ImageThumb&&a.ImageThumb.indexOf(",")>0){var c=a.ImageThumb.split(",");a.ImageThumb=c[0]+"_50x50c.jpg"}a.ImageThumb||(a.ImageThumb="/images/peace-sm.jpg"),x(a.PostingID).data(a),g+=L.Util.template(b,a)}),c=$(g),i[m]=c,h(c)})},u=function(a){var b=this.PostingID,c=x(b);c.data()||c.data(this);var d=a.target;v.activeMarker=d,d.options.visited=!0,v.marker.updateIcon(d),f.removeClass("iscluster"),CL.jls.setItem(b,1),f.html(c.dom()),l("posting"),n(d),p(b,CL.banish.isBanished(b)),s(f,b),c.buildMapBubble(function(a){f.html(a.dom()),p(b,CL.banish.isBanished(b)),q(f,b)})},v=CL.maps,w=function(){v.openPopup&&v.openPopup._map&&v.openPopup._adjustPan()},x=function(){var a={},b=function(b){var c=b;a[c]||(a[c]={}),this.id=function(){return c}};return b.prototype.buildMapBubble=function(b){var c=a[this.id()],d=this,e=function(a){var b,c,d,e,f;if(b=a.match(/imgList\s+=\s+(\[[^\]]*\])/),b&&2===b.length)try{b=JSON.parse(b[1])}catch(g){b=[]}else b=[];return b=b.map(function(a){return(a.url||"").replace(/600x450/,"300x300")}),c=$(a),d=c.find("#postingbody"),e=c.find(".attrgroup"),f=c.find(".bigattr"),0===d.length&&(d=c.find(".userbody")),{imgList:b,$postingBody:d,$attrs:e,$bigattr:f}};return c.data.fullyLoaded?"function"==typeof b&&b(d):$.get(c.data.PostingURL).done(function(a){var f=e(a),g=f.imgList;c.data.imgList=g,c.dom.find(".infocontainer").append(f.$attrs,f.$bigattr,f.$postingBody),g.length&&!CL.browser.ieVersion<7?(c.dom.find(".swipe-wrap").html(g.map(function(a){return'<div><img src="'+a+'" /></div>'}).join("")),c.dom.find(".contenttoggle").show()):(c.dom.find(".swipe").remove(),k(c.dom)),c.dom.removeClass("loading"),c.data.fullyLoaded=!0,"function"==typeof b&&b(d)}),d},b.prototype.clear=function(){return a[this.id()]={},this},b.prototype.data=function(b){var d=a[this.id()];if(b){d.data=d.data||{};var e=new Date(1e3*b.PostedDate);return b.currencySymbol=j,b.hasPrice=b.Ask||0===b.Ask?"":"no",b.BedroomsContent=b.Bedrooms?b.Bedrooms+"BR":"",b.isoPostedDate=CL.util.isoDateString(e),b.humanPostedDate=e.toLocaleString(),$.extend(d.data,b),d.dom=$(L.Util.template(c,d.data)).find(".timeago").timeago().end().find(".star").data("pid",this.id()).end(),this}return d.data},b.prototype.dom=function(){var b=a[this.id()];return b.dom.clone()},function(a){return new b(a)}}(),y={},z=function(a){$.getJSON(a).done(function(a){CL.when.localStorageAvailable.always(function(){var b=a[0],c=a[1],d=b.length,e=500;navigator.userAgent.match(/iPhone OS 7/)&&d>e&&(b.length=d=e);var f,g=0,i=CL.page.isMobile?64:32,k=10,l=0,m=CL.cookies.getItem("cl_map");if(m){var n=m.split(","),o=new L.LatLng(n[1],n[0]),p=new L.LatLng(n[3],n[2]);f=new L.LatLngBounds(o,p)}var q=$("#mapcontainer"),s=new L.LatLng(q.data("arealat"),q.data("arealon"));if(d>0){var x=c.clat,z=c.clng;s=new L.LatLng(x,z);var A=c.zoom;k=A>1?A:15,k>17&&(k=17)}for(var B=new L.MarkerClusterGroup({zoomToBoundsOnClick:!1,spiderifyOnMaxZoom:!1,showCoverageOnHover:!1,maxClusterRadius:i,disableClusteringAtZoom:17,iconCreateFunction:function(a){var b=0,c=0,d=0,e=!1;return a.getAllChildMarkers().forEach(function(a){b=Math.max(b,a.options.posteddate),c+=a.options.numposts,e=e||a.options.visited,d+=v.marker.containingPID[a.options.pids[0]].unbanishedCount}),isNaN(d)&&(d=c),v.makeIcon({unbanishedCount:d,totalCount:c,visited:e,posteddate:b,cluster:!0,fav:!1,marker:a})}}),C=0,D=[],E=0;d>E;E++){var F,G,H,I=b[E],J=Number(I.NumPosts)||1,K=I.PostingID,M="";J>1?(F=CL.jls.getItem(I.GeoCluster)==K,H=K.split(",").map(Number).sort(),C+=J,G=CL.maps.marker.create(I.Latitude,I.Longitude,{visited:F,numposts:J,posteddate:1e3*I.PostedDate,pids:H}),G.on("click",t,I)):(F=null!==CL.jls.getItem(K),H=[Number(K)],C++,M=I.Ask?'<span class="price">'+j+I.Ask+"</span> - ":"",M+=I.PostingTitle,G=CL.maps.marker.create(I.Latitude,I.Longitude,{visited:F,numposts:1,posteddate:1e3*I.PostedDate,pids:H}),G.on("click",u,I).on("mouseover",r,{title:M,marker:G}).on("mouseout",r)),v.marker.updateIcon(G),f&&f.contains(G.getLatLng())&&l++,y[K]=G,D.push(G),g++}B.addLayers(D);var N=$("#mapcontainer");if(0===g){var O=$("#noresult-overlay, #noresult-text");O.css("line-height",N.height()+"px").addClass("visible").on("click",function(){O.removeClass("visible")})}if(v.map)v.map.setView(s,k);else{v.map=new L.Map("map",{center:s,zoom:k,minZoom:1,maxZoom:17,maxBounds:[[-90,-180],[90,180]],layers:[v.tilelayer],zoomControl:!1});var P=new L.Control.ZoomFS;v.map.addControl(P),$(".closeFS").on("click",function(){P.fullscreen()});var Q=L.control.scale({metric:"US"!==window.areaCountry,imperial:"US"===window.areaCountry,updateWhenIdle:!0});v.map.addControl(Q),v.map.attributionControl.setPrefix(""),$("a.leaflet-bar-part").text(""),CL.page.isMobile&&(P.fullscreen(),w())}m&&f&&l>0&&setTimeout(function(){v.map.fitBounds(f,{animate:!1})},0);var R=function(){var a=v.map.getBounds().toBBoxString();CL.cookies.setItem("cl_map",a,{path:"/"}),CL.maps.countMarkers()};v.map.addLayer(B),h.removeClass("loading"),v.map.on("popupopen",function(a){a.popup===v.openPopup&&(a.popup._close(1),v.openPopup=void 0)}).on("popupclose",function(){v.openPopup=void 0}).on("enterFullscreen exitFullscreen",function(){w()}).on("moveend",R),$("#subAbb").on("change",function(){CL.cookies.removeItem("cl_map",{path:"/"})});var S=function(a){var b=a.latlng,c=v.map.getZoom(),d=v.map.getBoundsZoom(a.layer.getConvexHull()),e=c+Math.round((d-c)/2);v.map.setView(b,e)};B.on("clusterclick",S),CL.maps.ready.resolve(v.map)})})},A=$(".displaycount"),B=$(".hidden_count.withmap");CL.extend("maps",{init:function(){a=$("#popuptemplate").html().trim(),b=$("#clustertemplate").html().trim(),c=$("#postingtemplate").html().trim(),d=$(a),e=d.find("#clusterbubble"),f=d.find("#postbubble"),d.on("click",function(a){a.stopPropagation()}),$(window).on("resize",function(){CL.lightbox.center()}),$(document).on("keydown",function(a){a.shiftKey&&h.addClass("xhair")}).on("keyup",function(a){a.shiftKey||h.removeClass("xhair")}),L.Icon.Default.imagePath="//www.craigslist.org/images/map",v.tilelayer=new L.TileLayer(v.clMapsUrl,{subdomains:"0123456789",setView:!0,enableHighAccuracy:!0,attribution:'&copy; craigslist - Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> - <a href="https://forums.craigslist.org/?forumID=3132">Report a problem</a>'});var g=["jsonsearch",window.catAbb||"fav"];window.subarea&&g.push(window.subarea),g.push(window.location.search);var i=decodeURIComponent("/"+g.join("/"));z(i),CL.maps.init=CL.util.noop},countMarkers:function(){var a=CL.maps.map;if(a&&"map"===CL.page.viewMode){var b=CL.maps.marker.byID,c=0,d=0,e=0,f=a.getBounds();Object.keys(b).forEach(function(a){var e=b[a];f.contains(e.marker.getLatLng())&&(d+=e.unbanishedCount+e.banishedCount,c+=e.unbanishedCount)}),e=d-c,g.toggleClass("has-banished",e>0),A.text(CL.page.showBanished?d:c),B.text(e)}},ready:new $.Deferred,zoomToPosting:function(a){this.ready.done(function(b){var c=y[a];c&&b&&(b.setView(c.getLatLng(),17,{animate:!1}),c.fireEvent("click"))})}})}(),function(){var a=$("body");if(a.hasClass("search")){CL.page.isMobile&&$(".autosubmit").removeClass("autosubmit"),delete Hammer.defaults.cssProps.userSelect,delete Hammer.defaults.cssProps.touchCallout;var b={},c=!1,d=$("input[name=searchNearby]"),e=$(".nearbyAreas"),f=e.find("input[name=nearbyArea]");d.on("change",function(){c=!0;var a=d.is(":checked");e.toggleClass("doSearchNearby",a&&!d.hasClass("autosubmit")),a?f.removeAttr("disabled"):f.attr("disabled",!0)});var g=$("#nearbyNumber"),h=$(".nextNearbyZone");h.on("click",function(){var a=$(this),b=Number(a.data("zone"));if($(".nearbyZone.nearbyZone_"+b).removeClass("nearbyZone"),$(".nearbyZone").length){for(var c=0;0===c&&4>b;)b++,c=$(".nearbyZone.nearbyZone_"+b).length,a.data("zone",b);g.text(c)}else a.hide()}),CL.when.localStorageAvailable.done(function(){b=CL.jls.getItem("chosenLocals");var a=b&&Object.keys(b).length>0;b=b||{},d.is(":checked")?f.each(function(){var d=$(this);b[d.val()]&&d.parent().parent().removeClass("nearbyZone"),d.is(":checked")?(b[d.val()]=!0,d.parent().parent().removeClass("nearbyZone")):!a||b[d.val()]||c||d.removeAttr("checked")}):c||b&&Object.keys(b).length>0&&f.each(function(){var a=$(this);b[a.val()]?a.parent().parent().removeClass("nearbyZone"):a.removeAttr("checked")}),g.text($(".nearbyZone.nearbyZone_"+h.data("zone")).length)}),f.each(function(){var a=$(this);a.on("click",function(){c=!0;var d=a.val();b[d]=a.is(":checked")?!0:void 0,CL.jls.setItem("chosenLocals",b)})});var i=$(".hidden_count.nomap"),j=0,k=function(){i.text(j),a.toggleClass("has-banished",Boolean(j)),0===j&&"map"!==CL.page.viewMode&&CL.banish.hide()},l=function(){0!==CL.banish.banishedCount()&&(j=0,$(".row").each(function(){var a=$(this),b=a.data("pid"),c=a.data("repost-of");(CL.banish.isBanished(b)||CL.banish.update(c,b))&&(a.addClass("banished"),j++)}),k())};CL.banish.ready.done(function(){var b=_?encodeURIComponent(_.curSearch()):"";l(),a.on("click",".banish",function(a){a.stopPropagation(),a.preventDefault(),CL.banish.ban($(this).closest(".row").data("pid"))}),a.on("click",".unbanish",function(a){a.stopPropagation(),a.preventDefault(),CL.banish.unban($(this).closest(".row").data("pid"))}),$(".mobile-discards, .discards, .includes-hidden .close").on("click",function(){CL.browser.hashChange?CL.page.showBanished?history.back():location.hash="hidden":CL.page.showBanished?CL.banish.hide():CL.banish.show()}),CL.banish.events.on("banish unbanish",function(a,c){var d=$(".row[data-pid="+c+"]");
d.length&&("banish"===a.type?($.get("/flag/?async=async&flagCode=35&postingID="+c+"&search="+b),CL.browser.transitions?d.on("transitionend",function(){d.addClass("banished").removeClass("newly-banished")}).addClass("newly-banished"):d.addClass("banished"),CL.favorites.isFavorite(c)&&d.find(".star").trigger("click"),j++):"unbanish"===a.type&&($.get("/flag/?async=async&flagCode=36&postingID="+c+"&search="+b),d.removeClass("newly-banished banished"),j--),k())})}).fail(function(){$(".banish-unbanish").hide()});var m=function(a){var b=(a||window.location.pathname).split("/").filter(Boolean),c=b.shift(),d={category:b.pop(),subArea:b.pop(),area:window.location.hostname.split(".")[0],isSearch:"search"===c,isFavorites:"favorites"===c,purveyor:void 0};window.purveyorCategories&&Object.keys(window.purveyorCategories).some(function(a){return window.purveyorCategories[a]===d.category?(d.purveyor=a,1):void 0});var e=Object.create(d),f=function(a){return e.hasOwnProperty(a)?e[a]:void 0},g={category:function(a){return"undefined"==typeof a?e.category:(e.category=a,g)},subArea:function(a){return"undefined"==typeof a?e.subArea:(e.subArea=a,g)},area:function(a){return"undefined"==typeof a?e.area:(e.area=a,g)},purveyor:function(a){if("undefined"==typeof a)return e.purveyor;var b={o:"owner",d:"dealer",a:"all"};b[a]&&(a=b[a]);var c={owner:1,dealer:1,all:1};if(!c[a])throw new Error("Invalid purveyor type! Must be one of: "+Object.keys(c).join(" "));return e.purveyor=a,g},isSearch:function(a){return a?(e.isSearch=Boolean(a),e.isFavorites=!1,g):e.isSearch},isFavorites:function(a){return a?(e.isFavorites=Boolean(a),e.isSearch=!1,g):e.isFavorites},toString:function(){var a="",b=[];return f("area")&&(a="//"+e.area+"."+CL.url.baseDomain),e.isSearch?(window.purveyorCategories&&f("purveyor")&&window.purveyorCategories[e.purveyor]&&(e.category=window.purveyorCategories[e.purveyor]),b=["search",e.subArea,e.category]):e.isFavorites&&(b=["favorites"]),b=b.filter(Boolean),b.unshift(""),a+b.join("/")}};return g},n=function(a){var b=a.delimiter||"-",c=[];"string"==typeof a.values?(c=a.values.trim(),c=c?c.split(b).map(Number):[]):a.values&&a.values.length&&(c=a.values.map(Number));var d;if(a.isUncompressed)d=c;else if(c.length>0){d=[c[0]];for(var e=1;e<c.length;e++)d.push(d[e-1]+c[e])}else d=[];return d=d.sort(function(a,b){return a-b}),{real_values:d,add:function(a){var b=this;return a.map(Number).map(function(a){b.real_values.push(a)}),this.real_values=this.real_values.sort(function(a,b){return a-b}),b},remove:function(a){a=a.map(Number);for(var b={},c=0;c<a.length;c++)b[a[c]]=!0;var d=this,e=[];for(c=0;c<d.real_values.length;c++)b[d.real_values[c]]||e.push(d.real_values[c]);return e=e.sort(function(a,b){return a-b}),this.real_values=e,d},asDiffArray:function(){if(0===this.real_values.length)return[];for(var a=[this.real_values[0]],b=1;b<this.real_values.length;b++){var c=this.real_values[b]-this.real_values[b-1];c>0&&a.push(c)}return a},asDiffString:function(){return this.asDiffArray().join(b)},asFullArray:function(){return this.real_values.slice(0)}}},o=$(window),p=$("#searchform"),q=new m,r=p.find("input, select, .searchInput"),s=$("#query"),t=$(".categories").find("input[type=checkbox]").not(".selectallcb").removeAttr("name");!function(){var a=function(a,b){b?a.renameAttr("data-name","name"):a.renameAttr("name","data-name")},b=function(a,b){(a.hasClass("min")||a.hasClass("max"))&&a.val(b.replace(/[.,]\d{1,2}$/,"").replace(/[^\d.,k]/g,""))},c=$("#excats"),d=function(){var a=t.not(":checked"),b="";if(a.length===t.length);else if(a.length!==t.length-1||q.isFavorites()){var d=[];q.isFavorites()||q.category(window.sectionAbb),a.each(function(a,b){var c=b.value.split(",");d=d.concat(c)}),b=n({values:d,isUncompressed:!0}).asDiffString()}else q.category(t.filter(":checked").data("abb"));c.val(b)};p.on("submit",function(){d(),r.each(function(){var c=$(this),d=c.val();a(c,""!==d),b(c,d)}),p.attr("action",q),$("#query").trigger("autocompletesubmit")}),$(".autosubmit").on("change",function(){p.submit()})}();var u=$("#map"),v=function(){var a=Math.round($("footer").offset().top-u.offset().top-1);u.height(a),CL.maps.map&&CL.maps.map.invalidateSize()},w={},x=0,y="changed_input",z=y+" clickme",A=$(".searchbtn"),B=$(".searchlink"),C=!1,D=function(a,b,c,d,e){a!==Boolean(w[b])&&(c.toggleClass(y,a),w[b]=!w[b],x+=a?1:-1,C=Boolean(x),A.toggleClass(z,C),B.toggleClass(z,C),e&&e(b,c,d))},E=function(a,b,c,d){var e,f=$(a),g=f[0].type,h=f.attr(b?"id":"name");"undefined"==typeof c||"undefined"==typeof c[h]?(e="checkbox"===g?f.prop("checked"):"radio"===g?b?$("input[id="+f.attr("id")+"]:checked").val():$("input[name="+f.attr("name")+"]:checked").val():f.val(),c&&(c[h]=e)):e=c[h],f.on("change keyup",function(a,b,c,d){if("checkbox"===g)return function(){D(a.prop("checked")!=c,b,a.parent(),a,d)};if("radio"===g){var e=$("input[name="+a.attr("name")+"]");return function(){D(e.filter(":checked").val()!==c,b,e.parent(),e,d)}}return function(e,f){D(a.val()!==c,b,f||a,f||a,d)}}(f,h,e,d))};r.not(".selectallcb").not(".autosubmit").not(".no_changed_input").each(function(){var a=$(this);E(this,a.hasClass("multi_checkbox")||a.hasClass("use-id"),void 0,a.hasClass("multi_checkbox")?function(a,b,c){var d=$("#headerattr_"+c.data("attr")),e=Number(d.data("checked-count"))||0;c.prop("checked")?e++:e--,d.data("checked-count",e),d.removeClass("strong"),e>0&&d.addClass("strong")}:void 0)});var F=function(a,b){var c=a.indexOf(":");switch(b){case"thumb":b="50x50c";break;case"gallery":b="300x300";break;default:b="50x50c"}return window.imageHost+"/"+a.substr(c+1)+"_"+b+".jpg"},G=function(){var a=$("#floater"),b=a.find("img.payload"),c=!1;CL.page.isMobile||$(".i").on("mouseover",function(){var d=($(this).data("idList")||[])[0];d&&(a.show(),b.attr("src",F(d,"gallery")).on("load",function(){$("#floater").addClass("f")}),c=!0)}).on("mouseout",function(){a.hide().removeClass("f"),b.attr("src",""),c=!1}).on("mousemove",function(a){c&&$("#floater").css({left:a.pageX+15+"px",top:a.pageY+15+"px"})})},H=function(){$(".i").off(),$("#floater").hide()},I=$("#gallerycarousel").html().trim();a.on("click",".row .arrow",function(a){a.preventDefault()});var J=function(a,b,c){return c=c||"",'<img alt="" class="'+c+'" src="'+F(a,b)+'">'},K={},L={},M=function(a){var b=$("p.row");b.each(function(b,c){var d=$(c),e=b+"-"+d.data("pid"),f=d.find(".i"),g=f.data("idList");if(Array.isArray(g)||(g=f.data("ids")||"",g=g?g.split(","):[],f.data("idList",g)),0===g.length)f.addClass("empty").attr("title",window.noImageText);else if("thumb"!==a||K[e]){if("gallery"===a&&!L[e])if(L[e]=!0,CL.browser.iosVersion[0]>=7&&(g.length=1),1===g.length)f.prepend(J(g[0],"gallery"));else{var h=g.map(function(a,b){var c=0===b?J(a,"gallery"):"";return"<div>"+c+"</div>"}).join("");f.append('<div class="swipe"><div class="swipe-wrap">'+h+"</div></div>"+I);var i=!1;CL.swipe.makeGallery(f,{callback:function(){i||(f.find(".swipe-wrap div").each(function(a,b){0!==a&&$(b).html(J(g[a]||g[a-g.length],"gallery"))}),i=!0)}})}}else K[e]=!0,f.prepend(J(g[0],"thumb","thumb"))})};$(".attr_picker").on("click",function(){var a=$(this).data("attr");$("#ul_"+a).toggleClass("hideme").hasClass("hideme")?$("#plusminus_"+a).text("+"):$("#plusminus_"+a).html("&ndash;")}),$(".multi_checkbox").not(".selectallcb").on("click",function(){var a=$(this),b=a.data("attr"),c=$("#headerattr_"+b),d=Number(c.data("checked-count")),e=a.closest("ul").find(".selectallcb"),f=e.prop("checked");(0===d&&f||d>0&&!f)&&e.prop("checked",!f).closest(".selectall").toggleClass("checked",!f)}),$(".attr_picker_moreless").on("click",function(){var a=$(this),b=a.data("attr");if("hiding"==a.data("state"))$(".attr_"+b).removeClass("hideme"),$("#more_"+b+", #less_"+b).data("state","showing").parent("li").toggle();else{var c=$(".attr_"+b).find(".multi_checkbox:checked");c.length?($(".attr_"+b).filter(function(){return!$(this).find(".multi_checkbox").prop("checked")}).addClass("hideme"),$("#more_"+b+", #less_"+b).data("state","hiding").parent("li").toggle()):$("#headerattr_"+b).trigger("click")}});var N={},O=function(a){var b="cl_tocmode";if("undefined"==typeof a){var c=CL.cookies.getItem(b);return c&&c.split(",").forEach(function(a){a=a.split(":"),N[a[0]]=a[1]}),N[window.sectionBase]||window.defaultView}var d=new Date;d.setTime(d.getTime()+31536e6),N[window.sectionBase]=a;var e=Object.keys(N).map(function(a){return a+":"+N[a]}).join(",");CL.cookies.removeItem(b,{path:"/"}),CL.cookies.setItem(b,e,{expires:d,path:"/",domain:CL.url.baseDomain})};$(".buttongroup").on("click",".button.sel",function(a){a.preventDefault()}),$(".backtotop").on("click",function(a){$(window).scrollTop(0),a.preventDefault()}),CL.page.viewMode=O();var P,Q=$(".search-legend .mode"),R=Q.find("a"),S=function(b){var c={list:function(){k()},pic:function(){G(),M("thumb"),k()},grid:function(){H(),M("gallery"),k()},map:function(){CL.maps.init(),v(),CL.maps.countMarkers()}};P=CL.page.viewMode,c[b]||(b="list"),Q.removeClass("sel").has("#"+b+"view").addClass("sel"),a.removeClass(Object.keys(c).join(" ")).addClass(b),CL.page.viewMode=b,c[b](),O(b)};R.on("click",function(a){var b=$(this).data("view");CL.browser.hashChange||a.preventDefault(),b!==CL.page.viewMode&&S(b)});var T="",U=(location.hash||"").replace("#","");U?"hidden"===U?(S(CL.page.viewMode),CL.banish.show()):S(U):(T=CL.page.viewMode,S(T)),CL.browser.hashChange&&o.on("hashchange",function(){var a=(location.hash||"").replace("#","");return"hidden"===a?(P=CL.page.viewMode,void CL.banish.show()):("hidden"!==a&&CL.page.showBanished&&(CL.banish.hide(),a=a||CL.page.viewMode),!a&&T&&(a=T),void(a!==CL.page.viewMode&&S(a)))});var V=$("#is_paid");$(".remuneration").on("click","a",function(a){a.preventDefault(),V.val($(this).data("val")),p.submit()}),$(".purveyor").on("click","a",function(a){a.preventDefault(),q.purveyor($(this).data("val")),p.submit()}),function(){var b=$(".totallink"),c=$('<div id="narrowsearch"></div>').on("mousedown touchstart",function(a){a.stopPropagation()}),d=$(".searchgroup.categories, .searchgroup.minmax, #subArea, #query, .hasPic"),e=!1,f=function(d){return e?void c.show():($('<iframe src="'+b.attr("href")+'"></iframe>').hide().on("load",function(){var b=$(this.contentDocument||this.contentWindow.document);c.append(b.find("#postingbody").html()).appendTo(a).offset({left:d.left-c.outerWidth()/2,top:d.top}).spotlight()}).appendTo(a),void(e=!0))};b.on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this),e=b.offset(),g=b.width(),h=b.height();f({top:e.top+h,left:e.left+g/2}),d.spotlight({onEnd:function(){c.hide()}})})}();var W=$(".savealert a");W.on("click",function(a){var b=this,c=b.href;a.preventDefault(),$.ajax("/session/?v=1",{dataType:"json",timeout:1500}).done(function(a){if(window.location.href=c+encodeURIComponent("&_csrf="+a.csrf),C){var d=$(b).data("action");p.append('<input type="hidden" name="'+d+'" value="1">').append('<input type="hidden" name="_csrf" value="'+a.csrf+'">').submit()}}).fail(function(){if(window.location.href=c,C){var a=$(b).data("action");p.append('<input type="hidden" name="'+a+'" value="1">').submit()}})}),$.fn.DefaultValue&&!CL.browser.placeholder&&$("input[placeholder]").each(function(a,b){var c=$(b);c.DefaultValue(c.attr("placeholder"))}),$(".experimentalFeature a").on("click",function(a){var b=$(this).data("query");b&&(a.preventDefault(),s.val(b),p.submit())}),function(){var b=$(".morecats"),c=$(".othercats"),d=$(".showoptions"),e=$(".searchoptions"),f=!c.hasClass("closed"),g=!1;b.on("click",function(){f=!f,c.add(b).toggleClass("closed")}),$(".form-tab").on("click",function(){var b=a.toggleClass("hide-search").hasClass("hide-search")?1:0;v(),CL.cookies.setItem("hidesearch",b,{path:"/",domain:CL.url.baseDomain})}),d.on("click",function(){g=!g,e.toggle(g),d.toggleClass("open closed")})}();var X=$(".catcheck");X.on("change",function(){var a=$(this),b=n({values:$("#breadcrumbform #excats").val()});a.is(":checked")?b.remove(a.val().split(",").map(Number)):b.add(a.val().split(",").map(Number)),$("#searchform #excats,#breadcrumbform #excats").val(b.asDiffString()),a.closest(".selectall").toggleClass("checked").closest(".searchgroup").find("input[type=checkbox]").not(a).prop("checked",a.prop("checked")).trigger("change")});var Y=$(".selectallcb").not(".catcheck");Y.on("change",function(){var a=$(this),b=a.prop("checked"),c=a.data("attr");b?($(".select_all_"+c).hide(),$(".deselect_all_"+c).show()):($(".select_all_"+c).show(),$(".deselect_all_"+c).hide()),$(".multi_"+c).prop("checked",b).trigger("change")});var Z,_;CL.when.localStorageAvailable.done(function(){try{_=CL.searchStream.fetch(document.location.href.replace(/^https?:../,"")),_.resultHeaderScan(),_.save(),Z=_.curSearch(),a.on("click",".hdrlnk",function(){_.setSearch(Z)})}catch(b){}}),function(){if(CL.browser.pushState){var a=100,b=CL.url.params(),c=$(".rows"),d=$(".paginator"),e=Math.min(Number(d.find(".totalcount").first().text()),window.maxResults),f=d.find("a.first"),g=d.find("a.prev"),h=d.find("a.next"),i=Number(b.s)||0,j=!1;if(!(0!==i&&i%a>0)){var k=$(".paginator .range"),m={},n=function(a){return m[a]?(m[i]=c.find(".row, #moon").detach(),c.prepend(m[a]),S(CL.page.viewMode),CL.favorites.init(),$(".hdrlnk").on("click",function(){_.setSearch(Z)}),!0):!1},p=function(a){var b=q({index:a,ajax:!0});!m[a]&&a>=0&&e>a&&$.get(b).done(function(b){m[a]=$(b.trim()).find(".content .row")})},q=function(a){a=a||{},a.index?b.s=a.index:delete b.s;var c=window.location.pathname,d=Object.keys(b).sort().map(function(a){var c;return c=Array.isArray(b[a])?b[a].join("&"+a+"="):b[a],a+"="+c}),e=d.join("&");return e&&(e="?"+e),c+e},r=function(){var b=i+1,c=Math.min(i+a,i+m[i].length);k.text(b+" - "+c)},s=function(){g.attr("href",q({index:i-a})),h.attr("href",q({index:i+a}))},t=function(b,c,f){n(i+f)&&(c.preventDefault(),o.scrollTop(0),i+=f,r(),s(),l(),history.pushState({index:i},void 0,q({index:i})),d.toggleClass("firstpage",0===i),d.toggleClass("lastpage",i+a>=e),0>f&&p(i+f),j=!1)};p(i-a),f.on("click",function(a){t(this,a,-i)}),g.on("click",function(b){t(this,b,-a)}),h.on("click",function(b){t(this,b,a)}),window.onpopstate=function(a){var b=a.state&&a.state.index||Number(CL.url.params().s)||0;n(b)?(r(),i=b):b!==i&&window.location.reload()}}}}();var ab=$("#breadcrumbform").on("submit",function(){$(this).attr("action",bb)});ab.find("select").removeAttr("name").end().find("input").each(function(){var a=$(this);""===a.val()&&a.removeAttr("name")});var bb=new m($("#breadcrumbform").attr("action"));$("#areaAbb").on("change",function(){bb.area($(this).val()).subArea(""),ab.submit()}),$("#subArea").on("change",function(){bb.subArea($(this).val()),ab.submit()}),$("#catAbb, #subcatAbb").on("change",function(){bb.category($(this).val()).isSearch(!0),ab.find("input[name=excats]").remove(),ab.find("input[name=fl]").remove(),ab.submit()}),function(a,b){var c=0,d=$(a),e=Math.max;d.each(function(){var a=$(this).width();c=e(c,a)}),c+=b,d.css("min-width",c)}(".event_attr_label",7),function(){a.on("click",".row",function(){if(CL.page.isMobile){var a=$(this).find(".pl a").attr("href");a&&(window.location.href=a)}})}()}}();
/* {"sources":{"search-concat.js":"f166b495d68eecb3f1d3e4caec9e5e3e"}} */