!function(e){"use strict";var t="images/",o="media/",n={},i={gAudioPreloadPreference:"auto",gVideoPreloadPreference:"auto"},a=[],r=[],l={stage:{version:"6.0.0",minimumCompatibleVersion:"5.0.0",build:"6.0.0.400",scaleToFit:"none",centerStage:"none",resizeInstances:!1,content:{dom:[{id:"video_group",type:"group",rect:["0px","0px","970px","250px","auto","auto"],c:[{id:"video",display:"block",volume:"0",type:"video",tag:"video",rect:["0px","0px","970px","250","auto","auto"],autoplay:"autoplay",opacity:"1",source:[o+"video.mp4"],preload:"metadata"}]},{id:"bg_loader",display:"block",type:"image",rect:["0px","0px","970px","250px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"bg_loader.jpg","0px","0px"]},{id:"bg_endcard",display:"none",type:"image",rect:["0","0","970px","250px","auto","auto"],opacity:"0",fill:["rgba(0,0,0,0)",t+"bg_endcard.jpg","0px","0px"]},{id:"packshot",display:"none",type:"image",rect:["148px","78px","110px","160px","auto","auto"],opacity:"0",fill:["rgba(0,0,0,0)",t+"packshot.png","0px","0px"]},{id:"thenewfragrance",display:"none",type:"image",rect:["124px","227px","142px","10px","auto","auto"],opacity:"0",fill:["rgba(0,0,0,0)",t+"thenewfragrance.png","0px","0px"]},{id:"trad2",display:"none",type:"image",rect:["424px","225px","124px","15px","auto","auto"],fill:["rgba(0,0,0,0)",t+"trad2.png","0px","0px"]},{id:"trad1",display:"none",type:"image",rect:["438px","225px","95px","14px","auto","auto"],fill:["rgba(0,0,0,0)",t+"trad1.png","0px","0px"]},{id:"logo_dior_endcard",display:"none",type:"image",rect:["140px","16px","113px","45px","auto","auto"],opacity:"0",fill:["rgba(0,0,0,0)",t+"logo_dior_endcard.png","0px","0px"]},{id:"replay_group",type:"group",rect:["0px","0px","0px","0px","auto","auto"],c:[{id:"replay_button",display:"none",type:"image",rect:["3px","auto","18px","20px","auto","-247px"],fill:["rgba(0,0,0,0)",t+"replay.png","0px","0px"]}]},{id:"mute_group",type:"group",rect:["0px","0px","0","0","auto","auto"],c:[{id:"mute_button",symbolName:"mute_button",display:"block",type:"rect",rect:["7px","auto","43","26","auto","-251px"],overflow:"visible"}]},{id:"cta",type:"image",rect:["661px","206px","221px","31px","auto","auto"],fill:["rgba(0,0,0,0)",t+"cta.png","0px","0px"]},{id:"loader",type:"image",rect:["506px","123px","35px","5px","auto","auto"],fill:["rgba(0,0,0,0)",t+"loader.gif","0px","0px"]},{id:"logo_poison_endcard",display:"none",type:"image",rect:["663px","41px","219px","140px","auto","auto"],overflow:"visible",opacity:"1",fill:["rgba(0,0,0,0)",t+"logo_poison.png","0px","0px"]},{id:"logo_poison_video",display:"block",type:"image",rect:["42px","94px","157px","101px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"logo_poison_video.png","0px","0px"]},{id:"logo_dior_video",display:"block",type:"image",rect:["61px","40px","119px","48px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"logo_dior_video.png","0px","0px"]},{id:"click_to_play_poster",symbolName:"click_to_play_poster",display:"none",type:"rect",rect:["0","0","100%","100%","auto","auto"]},{id:"border_l",type:"rect",rect:["0px","0px","1px","100%","auto","auto"],opacity:"1",fill:["rgba(0,0,0,1.00)"],stroke:[0,"rgb(0, 0, 0)","none"]},{id:"border_r",type:"rect",rect:["auto","0px","1px","100%","0px","auto"],opacity:"1",fill:["rgba(0,0,0,1.00)"],stroke:[0,"rgb(0, 0, 0)","none"]},{id:"border_t",type:"rect",rect:["0px","0px","100%","1px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,1.00)"],stroke:[0,"rgb(0, 0, 0)","none"]},{id:"border_b",type:"rect",rect:["0px","auto","100%","1px","auto","0px"],opacity:"1",fill:["rgba(0,0,0,1.00)"],stroke:[0,"rgb(0, 0, 0)","none"]}],style:{"${collapse}":{isStage:!0,rect:["null","null","970px","250px","auto","auto"],sizeRange:["0px","","",""],overflow:"hidden",fill:["rgba(255,255,255,1.00)"]}}},timeline:{duration:23e3,autoPlay:!1,labels:{endshot:19051,frozen:23e3},data:[["eid259","top",10218,0,"easeInOutQuad","${logo_dior_video}","40px","40px"],["eid273","display",1e3,0,"linear","${trad2}","none","block"],["eid274","display",1693,0,"linear","${trad2}","block","none"],["eid278","display",13727,0,"linear","${trad2}","none","block"],["eid279","display",14920,0,"linear","${trad2}","block","none"],["eid141","opacity",15513,1e3,"linear","${bg_endcard}","0","1"],["eid211","display",15333,0,"easeInOutQuad","${logo_dior_endcard}","none","block"],["eid221","opacity",15467,287,"easeInOutQuad","${packshot}","0","1"],["eid198","opacity",0,500,"linear","${bg_loader}","1","0"],["eid250","display",0,0,"linear","${logo_poison_endcard}","none","none"],["eid237","display",15800,0,"easeInOutQuad","${logo_poison_endcard}","none","block"],["eid256","opacity",14563,582,"easeInOutQuad","${logo_poison_video}","1","0"],["eid253","opacity",0,0,"linear","${logo_poison_endcard}","1","1"],["eid223","opacity",15800,287,"easeInOutQuad","${logo_poison_endcard}","0","1"],["eid194","display",19051,0,"easeInOutQuad","${video}","block","none"],["eid257","display",15145,0,"easeInOutQuad","${logo_poison_video}","block","none"],["eid199","display",501,0,"linear","${bg_loader}","block","none"],["eid168","opacity",14417,582,"easeInOutQuad","${logo_dior_video}","1","0"],["eid105","display",19051,0,"linear","${replay_button}","none","block"],["eid275","display",203,0,"linear","${trad1}","none","block"],["eid272","display",1e3,0,"linear","${trad1}","block","none"],["eid276","display",12494,0,"linear","${trad1}","none","block"],["eid277","display",13727,0,"linear","${trad1}","block","none"],["eid131","display",0,0,"linear","${click_to_play_poster}","none","none"],["eid191","display",14999,0,"easeInOutQuad","${logo_dior_video}","block","none"],["eid115","display",19051,0,"linear","${mute_button}","block","none"],["eid220","opacity",15620,287,"easeInOutQuad","${thenewfragrance}","0","1"],["eid212","display",15620,0,"easeInOutQuad","${thenewfragrance}","none","block"],["eid219","opacity",15333,287,"easeInOutQuad","${logo_dior_endcard}","0","1"],["eid210","display",15467,0,"easeInOutQuad","${packshot}","none","block"],["eid195","display",15513,0,"linear","${bg_endcard}","none","block"],["eid132","trigger",0,function(e,t){this._executeSymbolAction(e,t)},["play","${click_to_play_poster}",[]]]]}},mute_button:{version:"6.0.0",minimumCompatibleVersion:"5.0.0",build:"6.0.0.400",scaleToFit:"none",centerStage:"none",resizeInstances:!1,content:{dom:[{rect:["0px","0px","24px","18px","auto","auto"],overflow:"hidden",id:"sound-on",type:"image",display:"block",fill:["rgba(0,0,0,0)","images/sound-on.png","0px","0px"]},{rect:["0px","0px","24px","18px","auto","auto"],overflow:"visible",id:"sound-off",type:"image",display:"none",fill:["rgba(0,0,0,0)","images/sound-off.png","0px","0px"]}],style:{"${symbolSelector}":{rect:[null,null,"24px","18px"]}}},timeline:{duration:2e3,autoPlay:!1,labels:{on:0,off:2e3},data:[["eid110","display",0,0,"linear","${sound-on}","block","block"],["eid111","display",2e3,0,"linear","${sound-on}","block","none"],["eid109","display",0,0,"linear","${sound-off}","none","none"],["eid112","display",2e3,0,"linear","${sound-off}","none","block"]]}},click_to_play_poster:{version:"6.0.0",minimumCompatibleVersion:"5.0.0",build:"6.0.0.400",scaleToFit:"none",centerStage:"none",resizeInstances:!0,content:{dom:[{rect:["0px","0px","100%","100%","auto","auto"],id:"poster",opacity:"0",type:"image",fill:["rgba(0,0,0,0)","images/click_to_play_poster.jpg","0px","0px"]}],style:{"${symbolSelector}":{rect:[null,null,"100%","100%"]}}},timeline:{duration:1e3,autoPlay:!0,data:[["eid127","opacity",0,0,"linear","${poster}","0","0"],["eid137","opacity",497,0,"linear","${poster}","0","1"],["eid138","opacity",1e3,0,"linear","${poster}","1","1"]]}}};AdobeEdge.registerCompositionDefn(e,l,n,r,a,i)}("collapse");!function(e,t,o){var n=(t.Composition,t.Symbol),i=null;!function(e){n.bindElementAction(o,e,"${collapse}","click",function(e,t){if(i.playHeadIsBeforeEndshotLabel())Enabler.counter("Click_On_Video",true);else Enabler.counter("Click_On_Endshot",true);i.freeze()});n.bindSymbolAction(o,e,"creationComplete",function(e,n){e.getSymbolElement().css({cursor:"pointer"});i=new RichControllerClass(t.getComposition(o));if(!i.muteAudioSupported())e.$("mute_group").hide()});n.bindElementAction(o,e,"document","compositionReady",function(e,t){i.start();var o=e.getSymbol("mute_button");if(null!=o)o.stop(i.isMuted()?"off":"on")});n.bindElementAction(o,e,"${replay_button}","click",function(e,t){t.stopPropagation();t.preventDefault();if(i.isMuted())i.unmute();var o=e.getSymbol("mute_button");if(null!=o)o.stop("on");i.rePlay();Enabler.counter("Click_On_Video_Replay",true)});n.bindElementAction(o,e,"${mute_button}","click",function(e,t){t.stopPropagation();t.preventDefault();var o=i.isMuted();if(o)i.unmute();else i.mute();o=!o;e.getSymbol("mute_button").stop(o?"off":"on");if(o)Enabler.counter("Mute_Video",true);else Enabler.counter("Unmute_Video",true)});n.bindTimelineAction(o,e,"Default Timeline","update",function(e,t){i.update()});n.bindElementAction(o,e,"${click_to_play_poster}","click",function(e,t){t.stopPropagation();t.preventDefault();i.playVideo();Enabler.counter("Click_To_Launch_Video",true)})}("stage");!function(e){}("Preloader");!function(e){}("mute_button");!function(e){}("click_to_play_poster")}(AdobeEdge.$,AdobeEdge,"collapse");var config={autoFreezeTime:28e3,unmutedVolume:.5,cancelFreezeOnYoutubeInteraction:!0},RichControllerClass=function(e){function t(){if(null==$){if(!("YouTubeComp"in window))throw"youtube-comp.js is not included.";$=new YouTubeComp(f.eventBus);if(config.cancelFreezeOnYoutubeInteraction)$.eventBus.addEventListener($.USER_INTERACTION,a)}return $}function o(){if(!document[("mshidden"in document?"ms":"")+"hidden"])if(f.mobile.inPageVideoSupport()&&g&&v.currentTime>1/12&&v.currentTime<v.duration&&!m){if(v.paused)v.play();l()}}function n(){if("Enabler"in window){var e=[],t=v.querySelectorAll("source");if(0==t.length){var o=v.getAttribute("src"),n=o.lastIndexOf("media/");e.push(o.substr(n));v.removeAttribute("src")}else for(var i=0;i<t.length;i++){var o=t[i].src,n=o.lastIndexOf("media/");e.push(o.substr(n));v.removeChild(t[i])}for(var i=0;i<e.length;i++){var a=document.createElement("source");a.src=Enabler.getUrl(e[i]);v.appendChild(a)}}}function i(){a();if(config.autoFreezeTime>=0)b=setTimeout(function(){f.freeze(!0)},config.autoFreezeTime)}function a(){if(null!=b){clearTimeout(b);b=null}}function r(){var e=0,t=!0;setInterval(function(){if(!m)if(!isNaN(v.currentTime)&&!isNaN(v.duration)){if(v.currentTime==e&&v.currentTime<v.duration&&!t){t=!0;y.stop(1e3*v.currentTime)}if(c()&&t){t=!1;y.play(1e3*v.currentTime)}var o=y.getPosition()/1e3;if(o<v.duration&&Math.abs(o-v.currentTime)>.2){console.log("resync video");if(c())y.play(1e3*v.currentTime);else y.stop(1e3*v.currentTime)}e=v.currentTime}},100)}function l(){if(!m)if(!isNaN(v.currentTime)&&!isNaN(v.duration))if(v.currentTime<v.duration)y.play(1e3*v.currentTime)}function u(){var e=0,t={0:function(){Enabler.counter("Video_Progress_0%",true)},.25:function(){Enabler.counter("Video_Progress_25%",true)},.5:function(){Enabler.counter("Video_Progress_50%",true)},.75:function(){Enabler.counter("Video_Progress_75%",true)},1:function(){Enabler.counter("Video_Progress_100%",true);onVideoEnd()}};v.addEventListener("timeupdate",function(){if(!isNaN(v.currentTime)&&!isNaN(v.duration)){var o=v.currentTime/v.duration;if(e!=o){for(var n in t)if(n>=e&&o>=n)t[n]();e=o}}else e=0},!1)}function s(e){function t(){if(c()){v.removeEventListener("canplay",t,!1);v.removeEventListener("timeupdate",t,!1);e()}}v.addEventListener("canplay",t,!1);v.addEventListener("timeupdate",t,!1)}function p(e){e.stop("frozen");for(var t=e.getChildSymbols(),o=0;o<t.length;o++)p(t[o])}function c(){return v.currentTime>1/12&&!v.paused}function d(){var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()},hasTouchScreen:function(){var e=!1,t=function(e){return-1!==window.navigator.userAgent.toLowerCase().indexOf(e)};return("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(t("NT 5")||t("NT 6.1")||t("NT 6.0")||(e=!0)),e},inPageVideoSupport:function(){return!navigator.userAgent.match(/iPhone|iPod/i)}};return e}try{var f=this,g=!0;f.eventBus=new EventBusClass;f.FREEZE="FREEZE";f.mobile=d();f.isFrozen=function(){return m};f.isMuted=function(){return v.volume<=0};f.muteAudioSupported=function(){return!f.mobile.iOS()};e.controller=this;var y=e.getStage(),m=!1,b=null,x=y.$("loader"),v=y.$("video")[0],_=y.$("click_to_play_poster"),h=!0;n();studio.video.Reporter.attach("Intro",v)}catch(k){console.error("%s\n%O",k,k.stack)}f.disableVideoOnMobile=function(){if(f.mobile.any())g=!1};f.start=function(){try{document.addEventListener(("mshidden"in document?"ms":"")+"visibilitychange",o);if(f.mobile.any())Enabler.counter("Mobile_Served",true);else Enabler.counter("Desktop_Served",true);if(!m)i();_.hide();if(f.mobile.inPageVideoSupport()&&g){r();u();if(!m){s(function(){x.hide();h=!1});if(v.currentTime)v.currentTime=0;if(f.mobile.any()){v.pause();_.show()}else v.play()}else{x.hide();h=!1}}else{v.pause();y.$("video_group").hide();x.hide();h=!1;y.$("replay_group").hide();y.play("endshot")}console.log("started with config: %O",config)}catch(e){console.error("%s\n%O",e,e.stack)}};f.update=function(){try{if(m||!y.isPlaying())return;if(y.getPosition()>=y.getLabelPosition("frozen"))f.freeze(!0);f.eventBus.dispatch("UPDATE");var e=v.currentTime/v.duration;y.$("progress").css({width:100*e+"%"})}catch(t){console.error("%s\n%O",t,t.stack)}};f.playVideo=function(){try{m=!1;i();_.hide();v.currentTime=0;v.play()}catch(e){console.error("%s\n%O",e,e.stack)}};f.rePlay=function(){try{f.eventBus.dispatch("REPLAY");f.stopAllYouTubePlayers();m=!1;i();x.show();s(function(){x.hide()});y.play(0);v.load();if(v.currentTime)v.currentTime=0;v.play()}catch(e){console.error("%s\n%O",e,e.stack)}};f.freeze=function(e){try{e=void 0==e?!1:!0;a();if(!m){m=!0;p(y);x.hide();h=!1;_.hide();v.pause();console.log("frozen")}f.eventBus.dispatch(f.FREEZE,f,e)}catch(t){console.error("%s\n%O",t,t.stack)}};f.isVideoLoading=function(){return g&&h};f.playHeadIsBeforeEndshotLabel=function(){try{return y.getPosition()<y.getLabelPosition("endshot")}catch(e){console.error("%s\n%O",e,e.stack)}};f.mute=function(){v.volume=0};f.unmute=function(){v.volume=config.unmutedVolume};f.play=function(){v.play();y.play()};f.pause=function(){v.pause();y.stop()};f.togglePlay=function(){if(f.isPlaying())f.pause();else f.play()};f.isPlaying=function(){return!v.paused};var $=null;f.createYouTubePlayer=function(e,o,n,i){try{t().createYouTubePlayer(e,o,n,i)}catch(a){console.error("%s\n%O",a,a.stack)}};f.setYouTubePlayer=function(e,o,n,i){var a=new YoutubePlayerLoader(this,y,t());a.setPlayer(e,o,n,i)};f.stopAllYouTubePlayers=function(){try{return t().stopAllYouTubePlayers()}catch(e){console.error("%s\n%O",e,e.stack)}return null}},EventBusClass={};EventBusClass=function(){this.listeners={}};EventBusClass.prototype={addEventListener:function(e,t,o){for(var n=[],i=arguments.length,a=0;i>a;a++)n.push(arguments[a]);n=n.length>3?n.splice(3,n.length-1):[];if("undefined"!=typeof this.listeners[e])this.listeners[e].push({scope:o,callback:t,args:n});else this.listeners[e]=[{scope:o,callback:t,args:n}]},removeEventListener:function(e,t,o){if("undefined"!=typeof this.listeners[e]){for(var n=this.listeners[e].length,i=[],a=0;n>a;a++){var r=this.listeners[e][a];if(r.scope==o&&r.callback==t);else i.push(r)}this.listeners[e]=i}},hasEventListener:function(e,t,o){if("undefined"!=typeof this.listeners[e]){var n=this.listeners[e].length;if(void 0===t&&void 0===o)return n>0;for(var i=0;n>i;i++){var a=this.listeners[e][i];if((o?a.scope==o:!0)&&a.callback==t)return!0}}return!1},dispatch:function(e,t){for(var o=0,n={type:e,target:t},i=[],a=arguments.length,r=0;a>r;r++)i.push(arguments[r]);i=i.length>2?i.splice(2,i.length-1):[];i=[n].concat(i);if("undefined"!=typeof this.listeners[e])for(var l=this.listeners[e].length,r=0;l>r;r++){var u=this.listeners[e][r];if(u&&u.callback){var s=i.concat(u.args);u.callback.apply(u.scope,s);o+=1}}},getEvents:function(){var e="";for(var t in this.listeners)for(var o=this.listeners[t].length,n=0;o>n;n++){var i=this.listeners[t][n];e+=i.scope&&i.scope.className?i.scope.className:"anonymous";e+=" listen for '"+t+"'\n"}return e}};var EventBus=new EventBusClass;