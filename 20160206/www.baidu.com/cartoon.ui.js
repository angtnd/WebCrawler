define("ui/Button",["require","exports","module","cartoon"],function(t){"use strict";var e=t("cartoon"),i=e.DisplayObject,s=e.Bitmap,r=e.Text,n=i.extend({type:"Button",_status:-1,_spriteSheet:null,_images:null,_frames:null,init:function(t){this._super(t),this._initSpriteSheet(t.spriteSheet||t.ss,t.baseUrl||""),this._initText(t.text)},_initSpriteSheet:function(t,e){this._spriteSheet=t;for(var i,r,n,a=this,c=t.images,o=t.frames,h=o.length>4?4:o.length,l=0,u=h;u>l;l++)i=o[l],r=c[i[4]],n=new s({render:this.renderMode,image:r,rect:i,visible:!1,baseUrl:e}),n.data({offsetX:i[5],offsetY:i[6]}),n.enable(!1),this.add(n);this.on("mousedown",function(){a.status(1)}),this.on("mouseover",function(){a.status(2)}),this.on("mouseup",function(){a.status(0)}),this.on("mouseout",function(){a.status(0)}),this.status(0)},_initText:function(t){if(t){var e=new r({render:this.renderMode,x:0,y:0,value:t,textAlign:"center",textBaseline:"middle"});e.enable(!1),this.add(e),this.text=e}},status:function(t){var e=this.children[this._status];e&&e.style("visible",!1),this._status=t,e=this.children[this._status],e.style("visible",!0),this.style({width:e.width,height:e.height,transform:{translateX:e.data("offsetX"),translateY:e.data("offsetY")}}),this.text&&(this.text.style({width:e.width,height:e.height}),0===this.renderMode&&(this.text.elemStyle.lineHeight=e.height+"px"))}});return n}),define("editor/Viewer",["require","exports","module","cartoon"],function(require){"use strict";var ct=require("cartoon"),Viewer={};return ct.extend(Viewer,{_baseUrl:"",_cssPrefix:"",_viewIndex:-1,_views:null,_sprites:null,_animations:null,_scriptEnabled:!1,init:function(){this._viewIndex=100,this._views={},this._sprites={}},useCss:function(t){this._cssPrefix=t},play:function(t){var e=this._animations,i=e[t];if(i){var s,r;for(var n in i)s=i[n],r=this.get(n),r&&ct.each(s,function(t,e){if(0===t.time)r.style(t.status);else{var i=s[e-1]?s[e-1].time:0;r.to(t.status,t.time-i,t.ease||"none")}})}},animate:function(t){this._animations=t},isContainer:function(t){return ct.index(["Stage","Canvas","GLCanvas","DisplayObject"],t)>-1},enableScript:function(t){this._scriptEnabled=t},getSprite:function(t){return this._sprites[t]},parse:function(t,e){return ct.setRenderMode(e),this.parseObj(t)},parseObj:function(t,e){var i=this;void 0===t.x&&(t.x=0),void 0===t.y&&(t.y=0);var s=this.parseDisplayObj(t);if(e||(e=s,e._callbacks=[]),t.tag&&(this.setTag(s,t.tag),t.ns_click&&(s.ns_click=t.ns_click,window.A))){var r=(this._cssPrefix+s.tag).replace(/-/g,"_");s.$&&s.$.addClass("OP_LOG_BTN"),s.$&&s.$.attr("data-click",'{ fm: "beha", title: "'+r+'", rsv_act: "'+r+'" }')}return t.children&&ct.each(t.children,function(t,r){s.add(i.parseObj(t,e))}),t.script&&(s.script=t.script,this._scriptEnabled&&e._callbacks.push(s)),e===s&&(this.callback(e._callbacks),e._callbacks=null),s},parseDisplayObj:function(t){var e;switch(t.type){case"Stage":e=new ct.Stage(t);break;case"Canvas":e=new ct.Canvas(t);break;case"DisplayObject":e=new ct.DisplayObject(t);break;case"Bitmap":t.baseUrl=this._baseUrl,e=new ct.Bitmap(t);break;case"Text":e=new ct.Text(t);break;case"Sprite":t.baseUrl=this._baseUrl,e=new ct.Sprite(t),e.gotoAndStop(0);break;case"Rect":e=new ct.Rect(t);break;case"Circle":e=new ct.Circle(t);break;case"Button":t.baseUrl=this._baseUrl,e=new ct.Button(t);break;case"TextField":e=new ct.TextField(t);break;case"ParticleSystem":e=new ct.DisplayObject(t)}return e},json:function(t){return this.jsonObj(t)},jsonObj:function(t,e){var i=this,s={type:t.type};e||(e=t),t.tag&&(s.tag=t.tag),t.ns_click&&(s.ns_click=t.ns_click),this.jsonStyle(s,t),this.jsonDisplay(s,t);var r=this.isContainer(t.type);return r&&t.children.length&&(s.children=[],ct.each(t.children,function(t,r){s.children.push(i.jsonObj(t,e))})),t.script&&(s.script=t.script),s},jsonStyle:function(t,e){this.getProp(t,e,"x",0),this.getProp(t,e,"y",0),this.getProp(t,e,"width",0),this.getProp(t,e,"height",0),this.getProp(t,e,"alpha",1),this.getProp(t,e,"visible",!0),this.getProp(t,e,"cursor","auto");var i=e.transform,s={};this.getProp(s,i,"translateX",0),this.getProp(s,i,"translateY",0),this.getProp(s,i,"rotate",0),this.getProp(s,i,"scaleX",1),this.getProp(s,i,"scaleY",1);for(var r in s)t.transform=s},jsonDisplay:function(t,e){switch(e.type){case"Bitmap":t.image=e._image,t.rect=[e._srcRect.x,e._srcRect.y,e.width,e.height];break;case"Text":t.text=e._value,this.getProp(t,e,"color",void 0),this.getProp(t,e,"fontSize",void 0);break;case"Sprite":t.ss=e._spriteSheet.originName||e._spriteSheet;break;case"Rect":this.getProp(t,e,"fill",void 0),this.getProp(t,e,"stroke",void 0),this.getProp(t,e,"strokeWidth",void 0);break;case"Circle":this.getProp(t,e,"radius",void 0),this.getProp(t,e,"fill",void 0),this.getProp(t,e,"stroke",void 0),this.getProp(t,e,"strokeWidth",void 0);break;case"Button":t.ss=e._spriteSheet.originName||e._spriteSheet;break;case"TextField":t.size=e.fontSize}},jsonTree:function(t,e){var i=this,s=this.isContainer(t.type),r=t.pid=++this._viewIndex;this.set(r,t);var n={name:this.getName(t),drag:!e,pid:r,open:"Stage"===t.type,isParent:s};return s&&(n.children=[],ct.each(t.children,function(t,e){n.children.push(i.jsonTree(t))})),n},getProp:function(t,e,i,s){e[i]!==s&&void 0!==e[i]&&(t[i]=e[i])},set:function(t,e){this._views[t]=e},getName:function(t,e){var i="DisplayObject"===t.type?"Display":"ParticleSystem"===t.type?"Particle":t.type,s=t.tag?" ã"+t.tag+"ã":"";if(e)return i+s;var r=t.script?'<span class="button edit" data-pid="'+t.pid+'"></span>':"",n=t.visible?"":" Ã ";return n+i+s+r},get:function(t){return this._views[t]},setTag:function(t,e){t.tag=e,this.set(e,t),t.tag&&0===t.renderMode&&(t.elem.className=(this._cssPrefix+t.tag).replace(/_/g,"-"))},callback:function(objects){var viewer=this,V=function(t){return viewer.get(t)},_this=viewer._this||{data:{},find:function(t){return $(t)}};ct.each(objects,function(a,i){eval("(function(){"+a.script+"}).call(a)")})}}),Viewer.init(),Viewer}),define("cartoon.ui",["require","exports","module","cartoon","ui/Button","editor/Viewer"],function(t){"use strict";var e=t("cartoon");return e.extend({Button:t("ui/Button"),Viewer:t("editor/Viewer")}),e});