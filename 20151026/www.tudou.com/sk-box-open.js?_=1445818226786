(function(c){window.XBox={version:"v2.2.3",init:function(a){var b=c.defaultConfig(a.site,this.version);c.util.extend(b,a||{});if(",1,2,3,14,15,50,51,52,61,62,63,".indexOf(","+b.site+",")!=-1)c.content=new c.KuBox(b)},clean:function(){c.content.cleanRefresh();c.content._bword()==""&&c.content._uword("")},hide:function(){c.content._handler.documentClick.call(c.content,!0)},kUpdate:function(a){c.content.kUpdate(a)},yUpdate:function(a){c.content.yUpdate(a)},cUpdate:function(){c.content.cUpdate()}};c.util=
{readCookie:function(a){var b="";a+="=";if(document.cookie.length>0&&(offset=document.cookie.indexOf(a),offset!=-1)){offset+=a.length;end=document.cookie.indexOf(";",offset);if(end==-1)end=document.cookie.length;b=unescape(document.cookie.substring(offset,end))}return b},writeCookie:function(a,b,d,e,c){var h="";d!=null&&(h=new Date((new Date).getTime()+d*36E5),h="; expires="+h.toGMTString());document.cookie=a+"="+escape(b)+h+(c==null?"":"; path="+c)+(e==null?"":";domain="+e)},getHistory:function(a){if(!a)return[];
eval("var items="+(this.readCookie(a)||"[]"));return items},updateHistory:function(a,b){try{if(b){var d=this.getHistory(a),e={};e.q=encodeURIComponent(b);for(var c=0;c<d.length;c++){var h=d[c];for(k in h)k=="q"&&h[k]==e.q&&d.splice(c,1)}for(d.unshift(e);d.length>10;)d.pop();e="[";for(c=0;c<d.length;c++){h=d[c];c>0&&(e+=",");e+="{";var o=0;for(k in h)o>0&&(e+=","),o++,e+='"'+k+'":"'+h[k]+'"';e+="}"}e+="]";this.writeCookie(a,e,720,".soku.com","/")}}catch(r){}},cleanHistory:function(a){this.writeCookie(a,
"",720,".soku.com","/")},timeOut:function(a,b,d){if(typeof a==="function"){if(!this.timeOutContext)this.timeOutContext={};var b=b||100,d=d||null,c=this.sample(a);this.timeOutContext[c]&&window.clearTimeout(this.timeOutContext[c]);this.timeOutContext[c]=window.setTimeout(function(){a.apply(d)},b);return this.timeOutContext[c]}},interval:function(a,b,d){if(typeof a==="function"){if(!this.intervalContext)this.intervalContext={};var b=b||100,d=d||null,c=this,f=this.sample(a);this.intervalContext[f]&&
window.clearInterval(this.intervalContext[f]);this.intervalContext[f]=window.setInterval(function(){a.apply(d)&&window.clearInterval(c.intervalContext[f])},b);return this.intervalContext[f]}},delayLocation:function(a){this.timeOut(function(){document.location=a},100)},debounce:function(a,b,d){var c=this;return function(){c.timeOut(a,b,d)}},sample:function(a,b){if(!a)return"";var b=b||30,d=a.toString().match(/[a-zA-Z]/g).join(""),c=Math.floor(d.length/6),f=d.length-c;return d.substring(c,f-c>b?c+b:
f)},localServer:function(){return(window.location.protocol?window.location.protocol:"http:")+"//"+(window.location.hostname?window.location.hostname:"www.soku.com")},localPath:function(a){for(var b="",d=document.getElementsByTagName("script"),c=0;d&&c<d.length;c++){var f=this.trim(d[c].src);if(f&&f.indexOf("js/sk-box")>-1){b=f.indexOf("js/sk-box");b=f.substring(0,b)+(a||"");break}}return b},isFunction:function(a){return Object.prototype.toString.call(a)==="[object Function]"},isArray:function(a){return Object.prototype.toString.call(a)===
"[object Array]"},isNodeList:function(a){return Object.prototype.toString.call(a)==="[object NodeList]"},isObject:function(a){return Object.prototype.toString.call(a)==="[object Object]"},isString:function(a){return Object.prototype.toString.call(a)==="[object String]"},trim:function(a){return String.prototype.trim?a==null||a==void 0?"":String.prototype.trim.call(a):a==null||a==void 0?"":a.toString().replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")},equalsIgnoreCase:function(a,b){a=a?a.toLowerCase():
"";b=b?b.toLowerCase():"";return a==b},extend:function(a,b){for(var d in b)b.hasOwnProperty(d)&&b[d]!=null&&b[d]!=void 0&&(a[d]=b[d])},contain:function(a,b){if(!a||!b)return!1;for(k in a)if(a[k]==b)return!0;return!1},strLength:function(a,b,d){var c=0;if(!a)return c;for(i=0;i<a.length;i++){var f=a.charAt(i);c+=this.isEn(f)?d:b}return c},substr:function(a,b,d,e){a=c.util.trim(a);if(a==""||b<=0)return a;b=this.isEn(a)?d:b;if(a.length<=b)return a;return a.substring(0,b)+(e||"")},isEn:function(a){return/^[0-9a-zA-Z\[\]\/\s.,')("!&?:-]+$/.test(a)},
isEmptyFun:function(a){return!a||a.toString().replace(/[\s]+/g,"")=="function(){}"},htmlEscape:function(a){if(!a)return a;return a.replace(/[<\">&]/g,function(a){switch(a){case "<":return"&lt;";case ">":return"&gt;";case '"':return"&quot;";case "&":return"&amp;"}})},isEmptyObject:function(a){if(!a)return!0;for(k in a)return!1;return!0},isEmpty:function(a){return!c.util.isNotEmpty(a)},isNotEmpty:function(a){return(this.isArray(a)||this.isNodeList(a)||this.isObject(a))&&a.length&&a.length>0}};c.events=
{ev:function(a){return a?a:window.event},element:function(a){a=this.ev(a);return a.target||a.srcElement},stopDefault:function(a){a=this.ev(a);a.preventDefault?a.preventDefault():a.returnValue=!1},stopBubble:function(a){a=this.ev(a);a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},bind:function(a,b){var d=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){var e=c.util.isString(a)?b[a]:a,f=d?d.concat(Array.prototype.slice.call(arguments,0)):arguments;return e.apply(b||
e,f)}},attachEvent:function(a,b,d,c,f){if(a){if(b=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|rv:11|KHTML/)||a.attachEvent))b="keydown";a.addEventListener?a.addEventListener(b,d,c):a.attachEvent&&(a["e"+b+(f||"")+d]=d,a[b+(f||"")+d]=function(){return a["e"+b+(f||"")+d](window.event)},a.attachEvent("on"+b,a[b+(f||"")+d]))}},listen:function(a,b,d){c.events.attachEvent(a,b,d,!1,null)},listenLive:function(a,b,d,e,f){c.events.attachEvent(a,d,this.bind(function(a){var d=c.events.element(a);
(d.getAttribute("sk_live")==b||b=="")&&e.apply(d,arguments)},this),f||!1,b)}};c.browser={ua:navigator.userAgent.toLowerCase(),isOpera:function(){return this.ua.indexOf("opera")>-1},isChrome:function(){return/chrome/.test(this.ua)},isSafari:function(){return!this.isChrome()&&/safari/.test(this.ua)},isIE:function(){return!this.isOpera()&&this.ua.indexOf("msie")>-1},isIE6:function(){return!this.isOpera()&&this.ua.indexOf("msie 6")>-1},isIE7:function(){return!this.isOpera()&&this.ua.indexOf("msie 7")>
-1},isIE8:function(){return!this.isOpera()&&this.ua.indexOf("msie 8")>-1},isGecko:function(){return!this.isSafari()&&this.ua.indexOf("gecko")>-1}};c.dom={g:function(a){if("string"==typeof a||a instanceof String)return document.getElementById(a);else if(a&&a.nodeName&&(a.nodeType==1||a.nodeType==9))return a;return null},visible:function(a){return this.g(a).style.display!="none"},hide:function(){for(var a=0;a<arguments.length;a++)this.g(arguments[a]).style.display="none"},show:function(){for(var a=
0;a<arguments.length;a++)this.g(arguments[a]).style.display="block"},getHeight:function(a){a=this.g(a);return a.offsetHeight},addClass:function(a,b){if(a=this.g(a))a.className=""==a.className?b:a.className+" "+b},removeClass:function(a,b){if(a=this.g(a))a.className=a.className.replace(RegExp("(^| )"+b+"( |$)"),"$1").replace(/ $/,"")},hasClass:function(a,b){for(var d=a.className.split(/\s+/),c=0;c<d.length;c++)if(d[c]==b)return!0;return!1},attr:function(a,b,d){var c=b;if(typeof b==="string")if(d===
void 0)return a&&a.getAttribute(b);else c={},c[b]=d;for(var f in c)a.setAttribute(f,c[f])},isTag:function(a,b){if(!a)return!1;return a.tagName.toLowerCase()==b.toLowerCase()},cleanChild:function(a){for(;a.childNodes.length>0;)a.removeChild(a.firstChild)},selectText:function(a,b,d){a.createTextRange?(a=a.createTextRange(),a.moveStart("character",b),a.moveEnd("character",d),a.select()):(a.setSelectionRange(b,d),a.focus())},gc:function(a,b,d){var e=[],f,h,o;if(!(a=c.util.trim(a)))return null;if("undefined"==
typeof b)b=document;else if(b=this.g(b),!b)return e;d&&(d=c.util.trim(d).toUpperCase());if(b.getElementsByClassName){h=b.getElementsByClassName(a);b=h.length;for(f=0;f<b;f++)o=h[f],d&&o.tagName!=d||(e[e.length]=o)}else{a=RegExp("(^|\\s)"+a+"(\\s|$)");h=d?b.getElementsByTagName(d):b.all||b.getElementsByTagName("*");b=h.length;for(f=0;f<b;f++)o=h[f],a.test(o.className)&&(e[e.length]=o)}return e}};c.defaultConfig=function(a){var b=c.util.localPath(),d=b?b+"css/s_kubox.css":"",e=b?b+"m/css/m_kubox.css":
"",f=function(){$(".yk_search .yk_so input").parent().addClass("yk_on")},h=function(){$(".yk_search .yk_so input").parent().removeClass("yk_on")};switch(a.toString()){case "1":return{kUrl:"http://tip.soku.com/search_tip_1",yUrl:"http://tip.soku.com/search_tip_1",cUrl:"http://tip.soku.com/history",css:d,localPath:b,queryUrl:function(a){return a?c.util.localServer()+"/v?keyword="+encodeURIComponent(a):""}};case "2":return{kUrl:"http://tip.soku.com/search_tip_1",yUrl:"http://tip.soku.com/search_tip_1",
cUrl:"http://tip.soku.com/history",css:d,localPath:b,queryUrl:function(a){return a?c.util.localServer()+"/search_video/q_"+encodeURIComponent(a):""}};case "3":return{kUrl:"http://tip.tudou.soku.com/search_tip_1",yUrl:"http://tip.tudou.soku.com/search_tip_1",cUrl:"http://tip.soku.com/history",css:d,localPath:b,queryUrl:function(a){return a?c.util.localServer()+"/t/nisearch/"+encodeURIComponent(a):""}};case "14":return{clientMark:"__ysuid",target:"_blank",kUrl:"http://tip.soku.com/search_tip_1",yUrl:"http://tip.soku.com/search_tip_1",
cUrl:"http://tip.soku.com/history",css:d,localPath:b,enterOpen:!1,queryUrl:function(a){return a?"http://www.soku.com/search_video/q_"+encodeURIComponent(a):""}};case "15":return{target:"_blank",kUrl:"http://tip.tudou.soku.com/search_tip_1",yUrl:"http://tip.tudou.soku.com/search_tip_1",cUrl:"http://tip.soku.com/history",css:d,localPath:b,cleanDefault:!0,queryUrl:function(a){return a?"http://www.soku.com/t/nisearch/"+encodeURIComponent(a):""}};case "50":return{skin:"simple",contentId:"id_xbox",iframe:!1,
size:6,kUrl:"http://tip.soku.com/searches/soku/kubox/v4/by_keyword.json",yUrl:"http://tip.soku.com/searches/soku/kubox/v4/by_keyword.json",cUrl:"http://tip.soku.com/history",css:e,localPath:b,queryUrl:function(a){return a?c.util.localServer()+"/m/s/video?q="+encodeURIComponent(a):""}};case "51":return{skin:"simple",contentId:"id_xbox",iframe:!1,size:6,kUrl:"http://tip.soku.com/searches/soku/kubox/v4/by_keyword.json",yUrl:"http://tip.soku.com/searches/soku/kubox/v4/by_keyword.json",cUrl:"http://tip.soku.com/history",
css:e,localPath:b,queryUrl:function(a){return a?c.util.localServer()+"/m/y/video?q="+encodeURIComponent(a):""},afterShow:f,inputBegin:f,inputEnd:h};case "52":return{skin:"simple",contentId:"id_xbox",iframe:!1,size:6,kUrl:"http://tip.tudou.soku.com/searches/soku/kubox/v4/by_keyword.json",yUrl:"http://tip.tudou.soku.com/searches/soku/kubox/v4/by_keyword.json",cUrl:"http://tip.soku.com/history",css:e,localPath:b,queryUrl:function(a){return a?c.util.localServer()+"/m/t/video?q="+encodeURIComponent(a):
""},afterShow:f,inputBegin:f,inputEnd:h};case "61":return{skin:"simple",iframe:!1,size:6,clientMark:"__ysuid",target:"_blank",kUrl:"http://tip.soku.com/searches/soku/kubox/v4/by_keyword.json",yUrl:"http://tip.soku.com/searches/soku/kubox/v4/by_keyword.json",cUrl:"http://tip.soku.com/history",css:e,localPath:b,queryUrl:function(a){return a?"http://www.soku.com/m/y/video?q="+encodeURIComponent(a):""}};case "62":return{kUrl:"http://tip.soku.com/search_tip_1",yUrl:"http://tip.soku.com/search_tip_1",cUrl:"http://tip.soku.com/history",
css:d,sendLog:!1,localPath:b,queryUrl:function(a){return a?c.util.localServer()+"/search_video/q_"+encodeURIComponent(a):""}};case "63":return{skin:"simple",iframe:!1,useYunCache:!1,clientMark:"__ysuid",kUrl:"http://tip.soku.com/searches/soku/kubox/v4/by_keyword.json",yUrl:"http://tip.soku.com/searches/soku/kubox/v4/by_keyword.json",cUrl:"http://tip.soku.com/history",css:e,localPath:b,queryUrl:function(a){return a?"http://www.soku.com/search_ikuvideo/q_"+encodeURIComponent(a):""}};default:return{}}};
c.XDomain=function(a){this.settings={proxy:"about:blank"};c.util.extend(this.settings,a||{});this.box=document.body||document.getElementsByTagName("head")[0]};c.util.extend(c.XDomain.prototype,{send:function(a){var b={url:null,success:function(){},dataType:"string"};c.util.extend(b,a||{});if(b.url&&typeof b.url==="string"){b.url+=(b.url.indexOf("?")>0?"&":"?")+"windowname=get";var d=document.createElement("iframe");d.style.display="none";d._state=0;this.box.appendChild(d);c.events.listen(d,"load",
c.events.bind(function(){if(d._state==1){var a=d.contentWindow.name?b.dataType=="object"?eval("("+d.contentWindow.name+")"):b.dataType=="string"?d.contentWindow.name:null:null;b.success&&typeof b.success==="function"&&b.success.call(this,a);this._destory(d)}else if(d._state==0)d._state=1,d.contentWindow.location.replace(this.settings.proxy)},this));d.src=b.url}},_destory:function(a){a.contentWindow.document.write("");a.contentWindow.close();this.box.removeChild(a)}});c.UUID={create:function(){var a=
(new Date(1582,10,15,0,0,0,0)).getTime(),b=(new Date).getTime()-a,a=this._getIntegerBits(b,0,31),d=this._getIntegerBits(b,32,47),b=this._getIntegerBits(b,48,59)+"1",c=this._getIntegerBits(this._rand(4095),0,7),f=this._getIntegerBits(this._rand(4095),0,7),h=this._getIntegerBits(this._rand(819