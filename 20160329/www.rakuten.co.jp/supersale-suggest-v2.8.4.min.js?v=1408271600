/*
 supersale.js 2.8.4
 Copyright (c) 2014 Rakuten.Inc
 Date : 2014-08-22 18:15:58
 suggest.js 2.3.0
 Copyright (c) 2014 Rakuten.Inc
 Date : 2014-08-22 18:15:58
*/
(function(){if("undefined"!=typeof jQuery){jQuery.noConflict();var c=jQuery,l={color:"#BF0000","font-weight":"bold"},a={color:"#FFFFFF","font-weight":"bold"},b="cnaviWrapper"+Math.floor(1E9*Math.random()),i={"background-color":"#fff","font-size":"15px"},e="cnavi"+Math.floor(1E9*Math.random()),d={color:"#000000","line-height":"2em",display:"block","white-space":"nowrap","text-align":"left",overflow:"hidden","float":"left","background-color":"#ffffff",clear:"both",cursor:"pointer"},j={"background-color":"#3366CC",
color:"#FFFFFF"},k={"background-color":"#FFFFFF",color:"#000000"},t={border:"none","border-top":"1px dotted #AEAEAE",height:"1px",color:"#FFFFFF",margin:"0 5px"},s={display:"block","float":"left","padding-left":"3px"},m="cnaviKey"+Math.floor(1E9*Math.random()),p={"font-weight":"bold"},v={"float":"right","padding-right":"3px"},w=/^https?:\/\/[a-z0-9_\.\/\-]+\.(jpg|jpeg|png|gif)(\?[a-z0-9=&]+)*$/i,x=RegExp("[\\s"+unescape("¡¡")+"]+"),f,u=function(){};u.prototype={ssLogoUrl:null,preInit:function(){if("undefined"===
typeof searchplat||!searchplat.suggest||!searchplat.suggest.rsuggest)return!1;f=searchplat.suggest.rsuggest;var a=this;a.ajaxSearchTimeout=1E4;a.ajaxSubmitLogTimeout=3E3;a.afterWaitingforEventTimeout=100;a.justAddedToQueueTimeout=10;a.paramGenre="ge";a.paramGenreUse="gu";a.paramOutputFormat="of";a.paramSortLogic="sl";a.paramExParam="ex";a.suggestDivPos=c("body");a.maxRows=a.getValidIntValue(a.config.attr("maxRows"),10,0,30);a.maxAddGenreRows=a.getValidIntValue(a.config.attr("maxAddGenreRows"),1,0,
10);a.maxEachGenreRows=a.getValidIntValue(a.config.attr("maxEachGenreRows"),3,0,10);var b=a.config.attr("selectboxId");a.noGenreId=a.config.attr("noGenreId")||"0";a.genreSelectBox=c("undefined"!=typeof b&&0<b.length?"#"+b:[{value:a.noGenreId,isDummy:!0}]);if("undefined"==typeof a.genreSelectBox.val()||!a.genreSelectBox.attr("isDummy")&&0==a.genreSelectBox.find("option[value="+a.noGenreId+"]").length)return f.config=c(),!1;var d=a.config.attr("swgQuery")||"swg",g=a.config.attr("swgOutout")||"osgenre",
e=a.config.attr("genreBoostQuery"),i=a.config.attr("genreBoostOutput")||"osgenre",j=a.genreSelectBox.attr("name")||"g";a.genreSelectBox.getAddingQuery=function(){var b;this.val()==a.noGenreId?(b=f.paramSortLogic+"="+d,g&&(b+="&"+f.paramOutputFormat+"="+g)):(b=f.paramGenre+"="+this.val(),e&&(b+="&"+f.paramSortLogic+"="+e),i&&(b+="&"+f.paramOutputFormat+"="+i));return b};a.genreSelectBox.change(function(){a.respInput=""});a.genreSelectBox.setGenreId=function(){var g=f.getGenreId(),d=b+"_hidden_for_suggest";
f.form.children("#"+d).length&&f.form.children("#"+d).remove();this.val()==a.noGenreId&&0<g.length&&(f.genreHidden=c("<input />").attr("id",d).attr("name",j).attr("type","hidden").val(g),f.genreHidden.appendTo(f.form),this.isDummy||c(this).removeAttr("name"))};0==c("body[onunload]").length&&c(window).bind("unload",function(){});a.ssLogoUrl=a.config.attr("sslogourl");return a.ssLogoUrl&&!w.test(a.ssLogoUrl)?!1:!0},postInit:function(){var a=this;a.count=a.maxRows;a.form.bind("reset",function(){setTimeout(function(){a.genreSelectBox.val(a.noGenreId)},
a.afterWaitingforEventTimeout)});a.input.bind("keydown.cnavi",function(b){if(13==b.keyCode&&1==f.clickEnableFlag){if(!f.suggest.children(".cnaviSelect").is(":visible"))return!0;a.clickEnableFlag=0;a.decisionFlag=1;a.cnaviSubmit(1,a.cnaviLink.attr("href"));return!1}})},getTextPos:function(){return this.input.offset()},getValidIntValue:function(a,b,c,g){a=isNaN(a)||0==a.length?b:parseInt(a);return a<c?c:a>g?g:a},getSelectText:function(a){a=a.clone();a.children("span").remove();return a.text()},getGenreId:function(){var a=
c("#suggest div:eq("+this.sggstSelectNum+"):not(."+this.cssNoSelect+") ."+this.cssKeyword+" span[key]");return a.length?a.attr("key"):""},createSuggestDiv:function(){var h=this;h.suggest=c("<div />").attr("id","suggest").hide().appendTo(h.suggestDivPos);for(var q=c("<div />").append(c("<div />").attr("class",h.cssNoSelect).append(c("<span />").attr("class",h.cssKeyword))),n="",g=0,r=h.maxRows;g<r;g++)n+=q.html();h.suggest.append(n);h.suggest.delegate("."+h.cssKeyword,"mouseup",function(a){var b=c(this).text();
1!=a.which||(f.mouseInput!=b||0==f.clickEnableFlag)||(f.over(c(this).text()),f.mouseState=2,f.input.blur(),b=h.getSelectText(c(this)),f.input.val(b),f.sggstSelectNum=f.index,f.usingChar=b,f.clickEnableFlag=0,f.decisionFlag=1,f.submitWay=2,setTimeout(function(){f.button.click()},h.justAddedToQueueTimeout),f.eventStop())});h.suggest.delegate("."+h.cssKeyword,"mousedown",function(a){if(1!=a.which)f.input.blur();else return f.mouseInput=c(this).text(),f.mouseState=1,!1});h.suggest.delegate("."+h.cssKeyword,
"mouseover",function(){f.over(c(this).text())});h.suggest.delegate("."+h.cssKeyword,"mouseout",function(){f.mouseState=0});h.suggest.delegate("."+h.cssKeyword,"mousemove",function(){f.mouseMove=1});q=c("<div>").attr("id",b).addClass("cnaviNoSelect").css(i);n=c("<a>").attr("id",e).attr("href","http://search.rakuten.co.jp/search/event/###SEARCHWORD###/-/ev.27-f.1").css(d);g=c("<div>").append(c("<hr>").css(t)).html();r=c("<div>").append(c("<span>").attr("id",m).css(p)).html()+' ¤ò<span id="cn_emp"> È¾³Û°Ê²¼ </span>¤«¤éÃµ¤¹';
r=c("<div>").append(c("<span>").css(s).html(r)).html();g+=r;h.ssLogoUrl&&(g+=c("<div>").append(c("<img>").attr("src",h.ssLogoUrl).css(v)).html());n.append(g);n.find("#cn_emp").css(l);n.bind("mouseover",function(){h.suggest.children("."+h.cssSelect).removeClass(h.cssSelect).addClass(h.cssNoSelect);f.sggstSelectNum=0;var b=c(this);b.css(j);b.find("#cn_emp").css(a)}).bind("mouseout",function(){var a=c(this);a.css(k);a.find("#cn_emp").css(l)}).bind("click",function(a){a.preventDefault();h.cnaviSubmit(2,
c(this).attr("href"))});h.suggest.append(q.append(n));h.cnaviLink=n;h.remarks=c("<div />").attr("class",h.cssRemarks).append(c("<div />").attr("class",h.cssRemarksBox).append(c("<div />").attr("class",h.cssComment)))},search:function(){if(this.preSearch()&&0!=this.onoffInitFlag){var a=this.input.val();null==a||0==a.replace(this.spaceRegExp,"").length||null!=a.match(this.spaceRegExp)?(this.usingChar="",this.sggstSelectNum=-1,this.hide()):a!=this.lastInput&&(this.backup=this.lastInput=a,clearTimeout(this.ajaxEvent),
this.ajaxEvent=setTimeout(function(){var a=f.lastInput.replace(f.spaceRegExp,"");if(0!=a.length){var b=f.config.attr(f.configCollection);if(0!=b.length){var h=b+f.genreSelectBox.val();"undefined"==typeof f.resultArray[h]&&(f.resultArray[h]=[]);if("undefined"==typeof f.resultArray[h][a])try{var c=f.baseUrl+"/"+f.searchCommand+"?"+f.paramCollection+"="+b+"&"+f.paramReqid+"="+f.sggstReqid+"&"+f.paramSuggestid+"="+f.suggestId+"&"+f.paramInput+"="+encodeURIComponent(a)+"&"+f.paramEncoding+"="+f.encoding+
"&"+f.genreSelectBox.getAddingQuery();0!=f.exParam.length&&(c+="&"+f.exParam);f.read(c)}catch(d){}else f.show(f.resultArray[h][a],a,h)}}},this.justAddedToQueueTimeout),this.postSearch())}},read:function(a){try{var b=this.lastInput,d=this.encoding,g=this.config.attr(this.configCollection)+this.genreSelectBox.val();c.ajax({url:a,cache:!0,timeout:this.ajaxSearchTimeout,dataType:"jsonp",scriptCharset:d,jsonp:f.paramCallback,success:function(a){f.show(a,b,g)}})}catch(e){}},show:function(a,b,d){var g=this;
if(!g.preShow())return!1;if("object"!=typeof a[1]||"object"!=typeof a[2]||"object"!=typeof a[2][0]||"object"!=typeof a[2][1])g.maxIndex=0,g.hide();else if(0!=d.length&&"undefined"==typeof g.resultArray[d][b]&&(g.resultArray[d][b]=a),g.lastInput.replace(g.spaceRegExp,"")==b){var e=c.extend(!0,[],a),i=e[1].length;if(0==i)g.maxIndex=0,g.hide();else{i>g.count&&(i=g.count);g.suggest.children("."+g.cssRemarks).remove();g.index=-1;g.respInput=g.lastInput;var j=0,k=0,m=[""],l=0,t=0,s=0;g.cnaviLink.hide();
g.suggest.children("."+g.cssSelect).attr("class",g.cssNoSelect).end().children("."+g.cssNoSelect).each(function(a,b){if(k<i){var h=e[1][k],d=g.createWordLine(h);"undefined"!=typeof e[2][0][k]&&0!=e[2][0][k].length&&(m=e[2][0][k].slice(0),m.unshift(""),e[2][0][k].length=0);var n=m.shift(),q=e[2][1][n]||" ";""!=n&&(d+='<span key="'+n+'">'+q+"</span>",l++);if(l>=g.maxEachGenreRows||k>=g.maxAddGenreRows)m.length=0;0===k&&(0==s&&g.genreSelectBox.val()==g.noGenreId)&&(g.showCnavi(h),j++,s++);0==m.length&&
(k++,0<l&&t++,l=0,m=[""]);c(b).show().children("."+f.cssKeyword).html(d);j++}else c(b).hide()});g.maxIndex=j;g.suggest.append(g.remarks);g.mouseMove=0;setTimeout(function(){f.mouseMove=1},g.afterWaitingforEventTimeout);1==g.onoff&&g.suggest.show();g.postShow()}}},createWordLine:function(a){if(!a||this.isMatch(a,this.spaceRegExp))return"";for(var a=this.escapeHtml(a),b=this.respInput.toLowerCase().split(x),c,d=0,e=b.length;d<e;d++)c=this.escapeHtml(b[d]),a=a.replace(RegExp("(^|\\s)("+this.escapeRegExp(c)+
")"),"$1<strong>$2</strong>");return a},select:function(b){var d=this.suggest.children("."+this.cssSelect).attr("class",this.cssNoSelect).end().children(".cnaviSelect").attr("class","cnaviNoSelect").end().children("."+this.cssNoSelect+":visible, .cnaviNoSelect").eq(this.index),e=this.cnaviLink.css(k),f=e.find("#cn_emp").css(l);-1!=this.index&&(d.hasClass(this.cssNoSelect)?d.attr("class",this.cssSelect):d.hasClass("cnaviNoSelect")&&(d.attr("class","cnaviSelect"),e.css(j),f.css(a)));b&&(b="",-1>=this.index||
this.index>=this.maxIndex?(b=this.backup,this.usingChar="",this.sggstSelectNum=-1):d.hasClass(this.cssSelect)?(d=d.children("."+this.cssKeyword),this.usingChar=b=this.getSelectText(d),this.sggstSelectNum=this.index):d.hasClass("cnaviSelect")&&(this.usingChar=b=c("#"+m).text(),this.sggstSelectNum=0),this.input.val(b),this.lastInput=b)},preJump:function(){f.genreSelectBox.setGenreId();return!0},sendSubmitLog:function(a){var b=this.config.attr(this.configCollection);if(0!=b.length){var d=this.input.val().replace(this.spaceRegExp,
""),a=this.baseUrl+"/"+this.submitLogCommand+"?"+this.paramSuggestid+"="+this.suggestId+"&"+this.paramCollection+"="+b+"&"+this.paramReqid+"="+this.sggstReqid+"&"+this.paramSuggestOnOff+"="+this.onoff+"&"+this.paramSelectNum+"="+this.sggstSelectNum+"&"+this.paramSelect+"="+encodeURIComponent(this.usingChar)+"&"+this.paramSuggestUse+"="+a+"&"+this.paramSubmitWay+"="+this.submitWay+"&"+this.paramInput+"="+encodeURIComponent(d)+"&"+this.paramGenre+"="+this.genreSelectBox.val()+"&"+this.paramGenreUse+
"="+("undefined"==typeof this.genreHidden?"0":this.genreHidden.val()),a=a+("&cu="+(this.isCNaviUsed?"1":"0"));1==this.sendFormParam&&(a+="&"+this.paramFormParam+"="+encodeURIComponent(this.form.serialize()));0!=this.exParam.length&&(a+="&"+this.paramExParam+"="+encodeURIComponent(this.exParam));try{c.ajax({url:a,cache:!0,timeout:this.ajaxSubmitLogTimeout,async:!1,dataType:!c.browser.msie?"json":"jsonp",scriptCharset:this.encoding})}catch(e){}}},getIe7TextPos:function(){var a=[],b=document.body,d=
b.getBoundingClientRect(),c=(d.right-d.left)/b.offsetWidth,d=(d.bottom-d.top)/b.offsetHeight,e=this.input.offset();a.top=Math.ceil(e.top/d-b.clientTop);a.left=Math.ceil(e.left/c-b.clientLeft);return a},postResize:function(){var a=this.cnaviLink,b=this.suggest.innerWidth(),d=parseInt(a.css("paddingLeft")),c=parseInt(a.css("paddingRight")),d=isNaN(d)?0:d,c=isNaN(c)?0:c;a.width(b-d-c)},showCnavi:function(a){c("#"+m).text(a);a=a.replace(/\+/g,"¡Ü").replace(/\//g,"¡¿");this.cnaviLink.attr("href","http://search.rakuten.co.jp/search/event/###SEARCHWORD###/-/ev.27-f.1".replace("###SEARCHWORD###",
encodeURIComponent(a))).show()},cnaviSubmit:function(a,b){this.isCNaviUsed=!0;this.submitWay=a;this.suggestUse=1;this.usingChar=c("#"+m).text();s_partsCounter("suggestcn1");var d=s_gi(s_account);d.linkTrackVars="eVar13";d.eVar13="Rakuten Top: SearchBox_J";d.tl(this,"o","Top SearchBox_J");1==a?ontrackingidAjax("RakutenTop","Suggest","Search","Enter"):2==a&&ontrackingidAjax("RakutenTop","Suggest","Search","Click");this.jump();setTimeout(function(){window.location.href=b},50);this.eventStop()},escapeRegExp:function(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,
"\\$1")},isMatch:function(a,b){return a&&RegExp(b).test(a)?!0:!1}};window.searchplat={suggest:{hook:u}}}})();
(function(){if("undefined"!=typeof jQuery){jQuery.noConflict();var c=jQuery,l=function(){};l.prototype={resultArray:[],backup:"",lastInput:"",respInput:null,sggstSelectNum:-1,usingChar:"",mouseInput:null,mouseState:0,mouseMove:0,mouseOver:0,enterFlag:1,keyCode:null,currentFontSize:null,maxIndex:0,index:-1,clickEnableFlag:1,IeVersion:0,viewEvent:null,ajaxEvent:null,suggestDivPos:null,onoff:1,onoffInitFlag:0,onElem:null,offElem:null,decisionFlag:0,scVal:0,submitWay:0,blackList:["iphone","ipod","ipad",
"android"],onOffBlackList:[],spaceRegExp:RegExp("^[\\s"+unescape("¡¡")+"]+"),preInit:function(){this.suggestDivPos=this.input.parent();return!0},postInit:function(){},checkBoolNum:function(a){return"undefined"!=typeof a&&0!=a.length&&(0==a||1==a)?a:""},escapeHtml:function(a){return c("<div/>").text(a).html()},initFailure:function(){a.input.attr("autocomplete","")},createSuggestDiv:function(){this.suggest=c("<div />").attr("id","suggest").hide().appendTo(this.suggestDivPos);for(var b=c("<div />").append(c("<div />").attr("class",
this.cssNoSelect).append(c("<span />").attr("class",this.cssKeyword))),i="",e=0,d=this.count;e<d;e++)i+=b.html();this.suggest.append(i);this.suggest.delegate("."+this.cssKeyword,"mouseup",function(b){var d=c(this).text();1!=b.which||(a.mouseInput!=d||0==a.clickEnableFlag)||(a.mouseState=2,a.input.blur(),a.input.val(d),a.sggstSelectNum=a.index,a.usingChar=d,a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=2,setTimeout(function(){a.button.click()},10),a.eventStop())});this.suggest.delegate("."+this.cssKeyword,
"mousedown",function(b){if(1!=b.which)a.input.blur();else return a.mouseInput=c(this).text(),a.mouseState=1,!1});this.suggest.delegate("."+this.cssKeyword,"mouseover",function(){a.over(c(this).text())});this.suggest.delegate("."+this.cssKeyword,"mouseout",function(){a.mouseState=0});this.suggest.delegate("."+this.cssKeyword,"mousemove",function(){a.mouseMove=1});this.remarks=c("<div />").attr("class",this.cssRemarks).append(c("<div />").attr("class",this.cssRemarksBox).append(c("<div />").attr("class",
this.cssComment).append(c("<div />").attr("class",this.cssBetaImg))))},preSearch:function(){return!0},search:function(){if(this.preSearch()&&0!=this.onoffInitFlag){var b=this.input.val();null==b||0==b.replace(this.spaceRegExp,"").length||null!=b.match(this.spaceRegExp)?(this.usingChar="",this.sggstSelectNum=-1,this.hide()):b!=this.lastInput&&(this.backup=this.lastInput=b,clearTimeout(this.ajaxEvent),this.ajaxEvent=setTimeout(function(){var b=a.lastInput.replace(a.spaceRegExp,"");if(0!=b.length){var c=
a.config.attr(a.configCollection);if(0!=c.length)if("undefined"==typeof a.resultArray[c]&&(a.resultArray[c]=[]),"undefined"==typeof a.resultArray[c][b])try{var d=a.baseUrl+"/"+a.searchCommand+"?"+a.paramCollection+"="+c+"&"+a.paramReqid+"="+a.sggstReqid+"&"+a.paramSuggestid+"="+a.suggestId+"&"+a.paramInput+"="+encodeURIComponent(b)+"&"+a.paramEncoding+"="+a.encoding;0!=a.exParam.length&&(d+="&"+a.exParam);a.read(d)}catch(j){}else a.show(a.resultArray[c][b],b,c)}},10),this.postSearch())}},postSearch:function(){},
read:function(b){try{var i=this.lastInput,e=this.encoding,d=this.config.attr(this.configCollection);c.ajax({url:b,cache:!0,timeout:1E4,dataType:"jsonp",scriptCharset:e,jsonp:a.paramCallback,success:function(b){a.show(b,i,d)}})}catch(j){}},eventStart:function(){clearInterval(this.viewEvent);this.clickEnableFlag=!0;this.decisionFlag=!1;this.viewEvent=setInterval(function(){a.nowFontSize=c("html").css("font-size");a.currentFontSize!=a.nowFontSize&&(a.currentFontSize=a.nowFontSize,a.resize());a.controlOnElem();
a.search()},100)},eventStop:function(){clearInterval(this.viewEvent);setTimeout(function(){a.hide()},200)},preShow:function(){return!0},show:function(b,i,e){var d=this;if(!d.preShow())return!1;if("undefined"==typeof b.result||"undefined"==typeof b.status||0!=b.status)d.maxIndex=0,d.hide();else if(0!=e.length&&"undefined"==typeof d.resultArray[e][i]&&(d.resultArray[e][i]=b),d.lastInput.replace(d.spaceRegExp,"")==i){var j=b.result.length;0==j?(d.maxIndex=0,d.hide()):(j>d.count&&(j=d.count),d.maxIndex=
j,d.suggest.children("."+d.cssRemarks).remove(),d.index=-1,d.respInput=d.lastInput,d.suggest.children("."+d.cssSelect).attr("class",d.cssNoSelect).end().children("."+d.cssNoSelect).each(function(e,i){if(e<j){var l=b.result[e][0],m=a.respInput.toLowerCase();if(0==l.indexOf(m)){var p="<strong>"+d.escapeHtml(m)+"</strong>",p=p+d.escapeHtml(l.replace(m,""));c(i).show().children("."+a.cssKeyword).html(p)}else c(i).show().children("."+a.cssKeyword).text(l)}else c(i).hide()}),d.suggest.append(d.remarks),
d.mouseMove=0,setTimeout(function(){a.mouseMove=1},100),1==d.onoff&&d.suggest.show(),d.postShow())}},postShow:function(){},hide:function(a){a&&0!=this.lastInput.length&&(this.input.val(this.backup),this.sggstSelectNum=-1,this.usingChar="");this.lastInput=this.input.val();this.suggest.hide()},select:function(a){var c=this.suggest.children("."+this.cssSelect).attr("class",this.cssNoSelect).end().children("."+this.cssNoSelect).eq(this.index);-1!=this.index&&c.attr("class",this.cssSelect);a&&(a="",-1>=
this.index||this.index>=this.maxIndex?(a=this.backup,this.usingChar="",this.sggstSelectNum=-1):(this.usingChar=a=c.children("."+this.cssKeyword).text(),this.sggstSelectNum=this.index),this.input.val(a),this.lastInput=a)},up:function(){0==this.maxIndex||(0==this.lastInput.length||0==this.config.attr(this.configCollection).length)||(-1>=this.index&&(this.index=this.maxIndex),this.suggest.is(":visible")?(this.index--,this.select(1)):this.respInput==this.lastInput&&1==this.onoff&&(this.select(),this.suggest.show()))},
down:function(){0==this.maxIndex||(0==this.lastInput.length||0==this.config.attr(this.configCollection).length)||(this.index>=this.maxIndex&&(this.index=-1),this.suggest.is(":visible")?(this.index++,this.select(1)):this.respInput==this.lastInput&&1==this.onoff&&(this.select(),this.suggest.show()))},over:function(b){var i=-1;this.suggest.children("."+this.cssSelect).attr("class",this.cssNoSelect).end().children("."+this.cssNoSelect).each(function(a,e){if(b==c(e).text())return i=a,!1});var e=1==this.keywordReplaceOnMouseover&&
1==this.mouseMove;e&&(this.mouseOver=1,this.input.blur(),this.input.focus());this.index=i;this.select(e);setTimeout(function(){a.mouseOver=0},50)},preJump:function(){return!0},jump:function(){if(this.preJump()){var a=this.isUse();this.scVal=1==this.decisionFlag?a:0;this.sendSubmitLog(a)}},sendSubmitLog:function(b){var i=this.config.attr(this.configCollection);if(0!=i.length){var e=this.input.val().replace(this.spaceRegExp,""),b=this.baseUrl+"/"+this.submitLogCommand+"?"+this.paramSuggestid+"="+this.suggestId+
"&"+this.paramCollection+"="+i+"&"+this.paramReqid+"="+this.sggstReqid+"&"+this.paramSuggestOnOff+"="+this.onoff+"&"+this.paramSelectNum+"="+this.sggstSelectNum+"&"+this.paramSelect+"="+encodeURIComponent(this.usingChar)+"&"+this.paramSuggestUse+"="+b+"&"+this.paramSubmitWay+"="+this.submitWay+"&"+this.paramInput+"="+encodeURIComponent(e);1==this.sendFormParam&&(b+="&"+this.paramFormParam+"="+encodeURIComponent(this.form.serialize()));0!=this.exParam.length&&(b+="&"+this.paramExParam+"="+encodeURIComponent(this.exParam));
try{var d=this.encoding;this.config.attr(this.configCollection);c.ajax({url:b,cache:!0,timeout:3E3,async:!1,dataType:!c.browser.msie?"json":"jsonp",scriptCharset:d,jsonp:a.paramCallback,success:function(){}})}catch(j){}}},isUse:function(){return 0!=this.usingChar.length&&0==this.input.val().indexOf(this.usingChar)?1:0},judge:function(){for(var b=this,i=navigator.userAgent.toLowerCase(),e=0;e<b.blackList.length;e++){var d=b.blackList[e];if(0!=d.length&&(d=RegExp("("+d+")"),null!=d.exec(i)))return-1}if(0!=
b.addBlackList.length)for(var j=b.addBlackList.split(","),e=0;e<j.length;e++)if(d=j[e],0!=d.length&&-1!=i.indexOf(d))return-1;c.browser.msie&&(b=this,e=c.browser.version,5<e&&7>e?b.IeVersion=6:6<e&&8>e&&(b.IeVersion=7));6==b.IeVersion&&(a.onoffEnable=0);for(e=0;e<b.onOffBlackList.length;e++)if(d=b.onOffBlackList[e],0!=d.length&&(d=RegExp("("+d+")"),null!=d.exec(i))){a.onoffEnable=0;break}return b.IeVersion},preResize:function(){return!0},resize:function(){if(this.preResize()){var a=this.getTextPos(),
c;7==this.IeVersion&&(a=this.getIe7TextPos(a));c=a.top;var a=a.left,e=Math.ceil(this.input.outerHeight());this.suggest.css({top:c+e,left:a});this.changeSuggestWidth();this.postResize()}},postResize:function(){},getTextPos:function(){return this.input.position()},getIe7TextPos:function(a){var c=[],e=document.body,d=e.getBoundingClientRect(),j=(d.right-d.left)/e.offsetWidth;c.top=Math.ceil(a.top/((d.bottom-d.top)/e.offsetHeight));c.left=Math.ceil(a.left/j);return c},changeSuggestWidth:function(){var a=
this.input.outerWidth(),c=this.suggest.outerWidth();a!=c&&(this.suggest.css({width:a}),c=this.suggest.find("."+this.cssKeyword),c.css({width:a-parseInt(c.css("paddingLeft"))-parseInt(c.css("paddingRight"))}))},onoffReady:function(){1==this.onoffEnable?(this.createOnElm(),this.createOffElm(),this.checkCookie()):this.setInitOnoffNum(1)},checkCookie:function(){c.ajax({type:"GET",url:this.baseUrl+"/"+this.cookieCommand+"?"+this.paramGroupId+"="+this.groupId+"&"+this.paramCookieMethod+"="+this.paramCookieCheck,
dataType:"jsonp",timeout:500,jsonp:a.paramCallback,success:function(b){b=b.result;if("undefined"!=typeof b&&(0==b||1==b))a.setInitOnoffNum(0==b?1:0)}});setTimeout(function(){a.setInitOnoffNum(1)},1E3)},setInitOnoffNum:function(a){1!=this.onoffInitFlag&&(this.onoff=a,this.onoffInitFlag=1,this.displayOnoff())},createOnElm:function(){this.onElem=c("<div />").hide().attr({"class":this.cssOn,title:this.openToolTips}).click(function(){a.setOnoffNum(1);a.input.focus();setTimeout(function(){a.lastInput=""},
120)});this.input.after(this.onElem)},createOffElm:function(){this.offElem=c("<div />").attr({"class":this.cssOff,title:this.hideToolTips}).append(c("<span />").attr("class",this.cssOffImage));this.remarks.children().append(this.offElem);this.suggest.delegate("."+this.cssOff,"mousedown",function(b){if(1!=b.which)a.input.blur();else return a.mouseState=1,a.setOnoffNum(0),a.input.blur(),!1});this.suggest.delegate("."+this.cssOff,"mouseout",function(){a.mouseState=0})},setOnoffNum:function(a){this.onoff=
a;this.setCookie(a);this.displayOnoff()},setCookie:function(b){c.ajax({type:"GET",url:this.baseUrl+"/"+this.cookieCommand+"?"+this.paramGroupId+"="+this.groupId+"&"+this.paramCookieMethod+"="+(1==b?this.paramCookieDelete:this.paramCookieAdd),dataType:"jsonp",timeout:500,jsonp:a.paramCallback,success:function(){}})},displayOnoff:function(){1==this.onoffEnable&&(1==this.onoff?(this.onElem.hide(),this.resize(),this.input.attr("autocomplete","off")):(this.resize(),this.input.attr("autocomplete",""),this.controlOnElem(),
a.suggest.hide()))},controlOnElem:function(){1!=this.onoffEnable||(0!=this.onoff||0==this.byteNumToHideOpenSggst)||(1==this.isByteLengthOver(this.input.val(),this.byteNumToHideOpenSggst)?this.onElem.hide():this.onElem.is(":visible")||this.onElem.show())},isSuggestUse:function(){return"undefined"!=typeof this.scVal&&1==this.scVal},isByteLengthOver:function(a,c){if(void 0===a)return 0;var e=0,d="",j=a.length,k;for(k=0;k<j;k++)if(d=escape(a.charAt(k)),e+=4>d.length&&!/%[0|1|8-9|A-F]\w|%7F/.test(d)?1:
2,e>c)return 1;return 0}};"undefined"===window.searchplat&&(window.searchplat={});searchplat.suggest||(searchplat.suggest={});searchplat.suggest.hook&&c.extend(l.prototype,searchplat.suggest.hook.prototype);var a=new l;a.config=c("#sggstConfig");a.input=c("#"+a.config.attr("input"));a.input.attr("autocomplete","off");c(document).ready(function(){searchplat.suggest.rsuggest=a;if(!a.preInit())return a.initFailure(),!1;a.form=c("#"+a.config.attr("form"));a.baseUrl=a.config.attr("baseUrl")||"";a.button=
c("#"+a.config.attr("button"));a.suggestId=a.config.attr("suggestId")||"";a.encoding=a.config.attr("encoding")||"";a.exParam=a.config.attr("exParam")||"";a.groupId=a.config.attr("groupId")||"";a.sendFormParam=a.checkBoolNum(a.config.attr("sendFormParam"))||1;a.onoffEnable=a.checkBoolNum(a.config.attr("onoff"))||1;a.keywordReplaceOnMouseover=a.checkBoolNum(a.config.attr("keywordReplaceOnMouseover"))||0;a.hookRequired=a.checkBoolNum(a.config.attr("hookRequired"))||0;a.addBlackList=a.config.attr("uaBlackList")||
"";var b=a.config.attr("byteNumToHideOpenSggst")||0;a.byteNumToHideOpenSggst=isNaN(b)||1>parseInt(b)?0:b;a.nowFontSize=c("html").css("font-size");a.hideToolTips=a.config.attr("hideToolTips")||"";a.openToolTips=a.config.attr("openToolTips")||"";if(0==a.input.length||0==a.form.length||0==a.baseUrl.length||0==a.button.length||0==a.suggestId.length||0==a.encoding.length||0==a.groupId.length||0==a.sendFormParam.length||0==a.onoffEnable.length||0==a.keywordReplaceOnMouseover.length||0==a.hookRequired.length||
-1==a.judge()||1!=a.input.parent(".sggstInputWrap").length||1==a.hookRequired&&"undefined"==typeof RSuggestHook){try{a.initFailure()}catch(i){}return!1}a.count=10;a.cssSelect="sggstSelect";a.cssNoSelect="sggstNoselect";a.cssKeyword="sggstKeyword";a.cssOnoff="sggstOnoff";a.cssOffImage="sggstHideimg";a.cssOnImage="sggstOpenimg";a.cssRemarks="sggstComment";a.cssRemarksBox="sggstCommentbox";a.cssComment="sggstBetabtn01";a.cssBetaImg="betaimg";a.cssOff="sggstBetabtn02";a.cssOn="openSuggest";a.configCollection=
"col";a.paramInput="q";a.paramCollection="cl";a.paramSuggestid="sid";a.paramSuggestUse="su";a.paramSelectNum="sn";a.paramSuggestOnOff="so";a.paramFormParam="fp";a.paramReqid="rid";a.sggstReqid=Math.floor(1E10*Math.random());a.paramEncoding="oe";a.paramSelect="ss";a.sggstSelect="";a.searchCommand="suggest";a.submitLogCommand="submit";a.cookieCommand="conf";a.paramGroupId="gi";a.paramCookieMethod="mt";a.paramCookieCheck="c";a.paramCookieAdd="a";a.paramCookieDelete="d";a.paramSubmitWay="sw";a.paramCallback=
"cb";a.paramExParam="ex";a.createSuggestDiv();a.onoffReady();a.resize();c(window).resize(function(){a.resize()});a.input.keydown(function(b){a.enterFlag=0;a.keyCode=b.keyCode;switch(b.keyCode){case 40:a.down();break;case 38:a.up();break;case 9:a.hide()}}).keypress(function(b){a.keyCode=b.keyCode;a.enterFlag=1;switch(b.keyCode){case 27:return 27==a.keyCode&&a.hide(!0),!1;case 13:return 13==a.keyCode&&(1==a.enterFlag&&1==a.clickEnableFlag)&&(a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=1,setTimeout(function(){a.button.click()},
10),a.eventStop()),!1}}).keyup(function(b){switch(b.keyCode){case 27:return 27==a.keyCode&&a.hide(!0),!1;case 13:return 13==a.keyCode&&(1==a.enterFlag&&1==a.clickEnableFlag)&&(a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=1,setTimeout(function(){a.button.click()},10),a.eventStop()),!1}}).focus(function(){a.lastInput=a.input.val();0==a.mouseOver&&(a.backup=a.input.val());a.eventStart()}).blur(function(){0==a.mouseState&&0==a.mouseOver?a.eventStop():(1==a.mouseState||1==a.mouseOver)&&a.input.focus();
a.mouseState=0}).mouseover(function(){1==a.keywordReplaceOnMouseover&&(a.suggest.is(":visible")&&-1!=a.index&&0!=a.backup.length&&a.lastInput==a.input.val())&&(a.input.val(a.backup),a.sggstSelectNum=-1,a.usingChar="")}).attr("maxlength",2048);a.button.click(function(){try{a.jump()}catch(b){}return!0});document.activeElement.id==a.input.attr("id")&&(a.input.blur(),a.input.focus());a.postInit()})}})();
