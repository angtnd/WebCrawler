/* Slot Placement [1.4.2] | Copyright JPMorgan Chase & Co. */
(function(a){function i(b){return typeof h[b]=="function"&&(h[b]=h[b](a,d,e)),h[b]}function j(b,c,f){h[b]=f?c(a,d,e):c}function k(a,b){var d=!1,e=a.charAt(0).toUpperCase()+a.slice(1),f=c.length,g=b.style;if(typeof g[a]=="string")d=!0;else while(f--)if(typeof g[c[f]+e]=="string"){d=!0;break}return d}function l(a){if(a)while(a.lastChild)a.removeChild(a.lastChild);return a}function m(a,c){var d=typeof a[c];return d=="object"?!!a[c]:!b[d]}var b={"boolean":1,number:1,string:1,"undefined":1},c=["Webkit","Moz","O","ms","Khtml"],d=m(a,"document")&&a.document,e=d&&m(d,"createElement")&&d.createElement("DiV"),f=typeof exports=="object"&&exports,g=typeof module=="object"&&module,h={};i.add=j,i.clearElement=l,i.cssprop=k,i.isHostType=m,i._tests=h,i.add("dom",function(a,b,c){return b&&c&&m(a,"location")&&m(b,"documentElement")&&m(b,"getElementById")&&m(b,"getElementsByName")&&m(b,"getElementsByTagName")&&m(b,"createComment")&&m(b,"createElement")&&m(b,"createTextNode")&&m(c,"appendChild")&&m(c,"insertBefore")&&m(c,"removeChild")&&m(c,"getAttribute")&&m(c,"setAttribute")&&m(c,"removeAttribute")&&m(c,"style")&&typeof c.style.cssText=="string"});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("has",[],function(){return i}):f?g&&g.exports==f?(g.exports=i).has=i:f.has=i:a.has=i})(this),define("jquery-cookie",["jquery"],function(a){return function(a,b,c){function d(a){return a}function e(a){return decodeURIComponent(a.replace(f," "))}var f=/\+/g;a.cookie=function(f,g,h){if(g!==c&&!/Object/.test(Object.prototype.toString.call(g))){if(h=a.extend({},a.cookie.defaults,h),null===g&&(h.expires=-1),"number"==typeof h.expires){var j=h.expires,k=h.expires=new Date;k.setDate(k.getDate()+j)}return g=String(g),b.cookie=[encodeURIComponent(f),"=",h.raw?g:encodeURIComponent(g),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}h=g||a.cookie.defaults||{};for(var l,m=h.raw?d:e,o=b.cookie.split("; "),p=0;l=o[p]&&o[p].split("=");p++)if(m(l.shift())===f)return m(l.join("="));return null},a.cookie.defaults={},a.removeCookie=function(b,c){return null!==a.cookie(b,c)?(a.cookie(b,null,c),!0):!1}}(a,document),a.cookie}),!function(a){function b(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function c(a,b){if("function"!=typeof a)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function d(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){d.prototype.dispatch.apply(a,arguments)}}b.prototype={active:!0,params:null,execute:function(a){var b,c;return this.active&&this._listener&&(c=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,c),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},d.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,c,d,e){var f,g=this._indexOfListener(a,d);if(-1!==g){if(f=this._bindings[g],f.isOnce()!==c)throw new Error("You cannot add"+(c?"":"Once")+"() then add"+(c?"Once":"")+"() the same listener without removing the relationship first.")}else f=new b(this,a,c,d,e),this._addBinding(f);return this.memorize&&this._prevParams&&f.execute(this._prevParams),f},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c,d=this._bindings.length;d--;)if(c=this._bindings[d],c._listener===a&&c.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,d){return c(a,"add"),this._registerListener(a,!1,b,d)},addOnce:function(a,b,d){return c(a,"addOnce"),this._registerListener(a,!0,b,d)},remove:function(a,b){c(a,"remove");var d=this._indexOfListener(a,b);return-1!==d&&(this._bindings[d]._destroy(),this._bindings.splice(d,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var a,b=Array.prototype.slice.call(arguments),c=this._bindings.length;if(this.memorize&&(this._prevParams=b),c){a=this._bindings.slice(),this._shouldPropagate=!0;do c--;while(a[c]&&this._shouldPropagate&&a[c].execute(b)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var e=d;e.Signal=d,"function"==typeof define&&define.amd?define("signals",[],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:a.signals=e}(this),define("optional",{load:function(a,b,c,d){if(d.isBuild)c();else{var e=function(a){c(a)},f=function(a){var c=a.requireModules&&a.requireModules[0];window.console&&console.log("Slot Placement - Could not load optional module=["+c+"]"),requirejs.undef(c),define(c,[],function(){return{}}),b([c],e)};b([a],e,f)}}}),define("jquery-isOnScreen",["jquery"],function(a){a.fn.isOnScreen=function(b,c){if(b==null||typeof b=="undefined")b=1;if(c==null||typeof c=="undefined")c=1;var d=a(window),e={top:d.scrollTop(),left:d.scrollLeft()};e.right=e.left+d.width(),e.bottom=e.top+d.height();var f=this.outerHeight(),g=this.outerWidth();if(!g||!f)return!1;var h=this.offset();h.right=h.left+g,h.bottom=h.top+f;var i=!(e.right<h.left||e.left>h.right||e.bottom<h.top||e.top>h.bottom);if(!i)return!1;var j={top:Math.min(1,(h.bottom-e.top)/f),bottom:Math.min(1,(e.bottom-h.top)/f),left:Math.min(1,(h.right-e.left)/g),right:Math.min(1,(e.right-h.left)/g)};return j.left*j.right>=b&&j.top*j.bottom>=c}}),define("slotplacement/config",["jquery","optional!slotplacement/clientconfig","slotplacement/slotplacementconfig"],function(a,b,c){var d={contentServer:a.isEmptyObject(b)||typeof b.contentServer=="undefined"?c.contentServer:b.contentServer,isAuthorMode:a.isEmptyObject(b)||typeof b.isAuthorMode=="undefined"?c.isAuthorMode:b.isAuthorMode,isClassic:a.isEmptyObject(b)||typeof b.isClassic=="undefined"?c.isClassic:b.isClassic,loadingImagePath:a.isEmptyObject(b)||typeof b.loadingImagePath=="undefined"?c.loadingImagePath:b.loadingImagePath,timeout:a.isEmptyObject(b)||typeof b.timeout=="undefined"?c.timeout:b.timeout,excludedQueryPassforwardParams:a.isEmptyObject(b)||typeof b.excludedQueryPassforwardParams=="undefined"?c.excludedQueryPassforwardParams:b.excludedQueryPassforwardParams,adServiceURL:a.isEmptyObject(b)||typeof b.adServiceURL=="undefined"?c.adServiceURL:b.adServiceURL,trackingPixelImagePath:a.isEmptyObject(b)||typeof b.trackingPixelImagePath=="undefined"?c.trackingPixelImagePath:b.trackingPixelImagePath,XPOOrgID:c.XPOOrgID,adTrackingDisabled:a.isEmptyObject(b)||typeof b.adTrackingDisabled=="undefined"?c.adTrackingDisabled:b.adTrackingDisabled,loggingEnabled:a.isEmptyObject(b)||typeof b.loggingEnabled=="undefined"?a.isEmptyObject(c)||typeof c.loggingEnabled=="undefined"?"true":c.loggingEnabled:b.loggingEnabled,debugEnabled:a.isEmptyObject(b)||typeof b.debugEnabled=="undefined"?a.isEmptyObject(c)||typeof c.debugEnabled=="undefined"?"false":c.debugEnabled:b.debugEnabled,activityTagURL:a.isEmptyObject(b)||typeof b.activityTagURL=="undefined"?c.activityTagURL:b.activityTagURL,variationActivityTag:a.isEmptyObject(b)||typeof b.variationActivityTag=="undefined"?c.variationActivityTag:b.variationActivityTag,viewableImpressionTag:a.isEmptyObject(b)||typeof b.viewableImpressionTag=="undefined"?c.viewableImpressionTag:b.viewableImpressionTag,isLoggingEnabled:function(){return window.console&&d.loggingEnabled!=="false"},isDebugEnabled:function(){return window.console&&d.debugEnabled==="true"}};return d}),define("slotplacement/adsize",[],function(){var a={"iab-pop-medrec":{width:300,height:250},"iab-pop-wideskyscraper":{width:160,height:600},"iab-pop-leaderboard":{width:728,height:90},"iab-pop-halfpage":{width:300,height:600},"iab-large-portrait":{width:300,height:1050},"iab-large-billboard":{width:970,height:250},"iab-small-rectangle":{width:180,height:150},"iab-small-button1":{width:120,height:90},"iab-small-button2":{width:120,height:60},"iab-small-microbar":{width:88,height:31},"pb-tile":{width:250,height:65},"pb-tile1":{width:232,height:100},"pb-tile2":{width:232,height:200},"pb-medrec":{width:226,height:157},"pb-halfpage":{width:720,height:360},"cig-navad":{width:155,height:90},"cig-banner":{width:379,height:75},"cig-widebanner":{width:530,height:75},"cig-tout":{width:46,height:88},"cig-halfpage":{width:720,height:700},"cig-marque":{width:572,height:150},"cig-masthead":{width:680,height:287},"cig-carousel":{width:867,height:200},"cig-smallmarquee":{width:350,height:150},"cig-hero-marquee":{width:600,height:250},banw:{width:575,height:350},ban:{width:375,height:35},rtnv1:{width:155,height:90},rtnv2:{width:155,height:90},nvann:{width:155,height:90},interstitial:{width:833,height:380},ur_primary_bnr:{width:894,height:392},ur_dual_bnr:{width:440,height:205},ur_quad_bnr:{width:219,height:195},ur_footer_bnr:{width:468,height:215},"ur-hero-main":{width:716,height:300},"ur-hero-travel":{width:650,height:325},"ur-tile-travel":{width:345,height:204},"pb-tile3":{width:474,height:200},"ur-tile-mobile":{width:575,height:223},"cig-hero-marquee2":{width:960,height:250},"cig-hero-marquee3":{width:930,height:490}};return a}),define("slotplacement/cookie",["jquery","jquery-cookie","has"],function(a,b,c,d){c.add("cookies",function(a,b,c){var d=!1;return"cookie"in b&&(b.cookie="cookietest=1",d=b.cookie.indexOf("cookietest=")!==-1,b.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"),d});if(c("cookies")){var e=window.document.domain,f=window.location.protocol,g=/localhost|127\.0\.0\.1/.test(e),h=/\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b/.test(e),i=/https/.test(f),j=function(){var a;return g||(h?a=e:e.indexOf(".")!==-1&&(a="."+e.split(".").slice(-2).join("."))),a},k=j(),l=function(b,c){l.cookies=l.cookies||{};var d=b&&l.cookies[b];return d||(d={settings:c||{},erase:function(c){var d=a.extend({},this.settings,c||{});try{a.removeCookie(b,d)}catch(e){}},read:function(){var c;try{c=a.cookie(b)}catch(d){}return c},write:function(c,d){var e=a.extend({},this.settings,d||{});try{a.cookie(b,c,e)}catch(f){}}},b&&(l.cookies[b]=d)),d};return a.cookie.defaults=a.extend({path:"/",secure:i,raw:!0},k?{domain:k}:{}),l}}),define("slotplacement/cors",["jquery","has"],function(a,b){function j(a){var b=a.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);return b&&{protocol:b[1],host:b[2],hostname:b[3],port:b[4],pathname:b[5],search:b[6],hash:b[7]}}b.add("xhr-cors",function(a,c,d){return b.isHostType(a,"XMLHttpRequest")&&"withCredentials"in new XMLHttpRequest});var c=Array.prototype.slice,d="Content-Type",e="cors",f={xhrFields:{withCredentials:!0}},g=a.Deferred(),h=g.promise(),i;return a.ajaxPrefilter(function(c,d,g){if(c.dataType===e||c.crossDomain&&c.async&&c.dataType!=="script"&&c.dataType!=="jsonp"){c=a.extend({},f,c);if(!b("xhr-cors"))return e}}),b("xhr-cors")||a.ajaxTransport(e,function(b,c,e){var f,g=function(){f=undefined};if(typeof XDomainRequest!="undefined")return f=new XDomainRequest,b.dataTypes.shift(),{send:function(c,h){var i=function(a,b,c,d){g(),h(a,b,c,d)};c[d]=b.contentType;var j=b.url,k=a(location).attr("protocol")+"//"+a(location).attr("host");c.Origin=k,b.timeout&&(f.timeout=b.timeout),f.open(b.type,j),setTimeout(function(){f.send()},0),f.onerror=function(){b.error()},f.ontimeout=function(){b.error()},f.onprogress=function(){},f.onload=function(){var c={},g=200,h="OK",j=b.contents,k=b.dataTypes,l={},m=b.mimeType||f.contentType||e.getResponseHeader(d)||e.getResponseHeader(d.toLowerCase()),n;while(k[0]==="*")k.shift();if(m){for(n in j)if(j[n]&&j[n].test(m)){k.unshift(n);break}}else k.unshift("text");b.dataType=k[0],b.dataType=="json"?c[k[0]]=a.parseJSON(f.responseText):c[k[0]]=f.responseText,i(g,h,c,l)}},abort:function(){g()}}}),a.corsAjax=function(b,c){a.isPlainObject(b)?(c=b,b=undefined):(c=c||{},c.url=b);var d=a.extend({dataType:"html"},c);return a.ajax(d)},a.corsAjax}),define("slotplacement/contentprovider",["jquery","slotplacement/config","slotplacement/cors"],function(a,b,c){var d=b.contentServer,e=b.isAuthorMode,f=b.isClassic,g={settings:{cache:!0},isCrossDomain:function(a){rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,ajaxLocParts=rurl.exec(a.toLowerCase()),parts=rurl.exec(document.location.protocol+"//"+document.location.host);var b=!(!parts||parts[1]==ajaxLocParts[1]&&parts[2]==ajaxLocParts[2]&&(parts[3]||(parts[1]==="http:"?80:443))==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443)));return b},load:function(a,f,h){var i=a;a.charAt(0)=="/"&&(i=d+a),i=i.replace("jcr:content","_jcr_content"),e||(e="false"),e==="true"&&(i.indexOf("?")===-1?i+="?wcmmode=disabled":i+="&wcmmode=disabled");var j=g.settings;j.error=function(){b.isLoggingEnabled()&&console.log("Slot Placement - Error loading content from URL=["+i+"]"),h()},b.isDebugEnabled()&&console.log("Slot Placement - Loading content from URL=["+i+"]"),c(i,j).then(function(a){b.isDebugEnabled()&&console.log("Slot Placement - Content loaded successfully from URL=["+i+"]"),g.isCrossDomain(i)&&(a=a.replace(/\"\//g,'"'+d+"/"),a=a.replace(/\'\//g,"'"+d+"/")),f(a)})},loadAd:function(a,b,c,d){if(f!=="false"){var e=a.substring(a.lastIndexOf("/"),a.length),h=e.split(".");if(h.length>2){var i="";for(var j=1;j<h.length-1;j++)i+=h[j]+".";a=a.replace("."+i+"html","/_jcr_content/par."+i+"html")}else a.indexOf(".html")!=-1?a=a.replace(".html","/_jcr_content/adcreationcontainer/par.html"):a.indexOf(".htm")!=-1&&(a=a.replace(".htm","/_jcr_content/adcreationcontainer/par.html"))}g.load(a,function(a){a=a.replace("${jpmcPageVar.clickThruUrl}",d),b(a)},c)}};return g}),define("slotplacement/persona",["jquery","slotplacement/cookie","has"],function(a,b,c,d){var e,f={}.toString,g=new Date,h="[object Function]";c.add("cookies",function(a,b,c){var d=!1;return"cookie"in b&&(b.cookie="cookietest=1",d=b.cookie.indexOf("cookietest=")!==-1,b.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"),d}),c.add("date-toisostring",function(a,b,c){return f.call(g.toISOString)==h});if(c("cookies")){var i=window.document,j=window.decodeURIComponent,k=window.encodeURIComponent,l=window.escape,m=window.unescape,n="PC_1_0",o=function(a,b){a=a.split(" ");for(var c=0,e=a.length;c<e;c++)b[a[c]]!==d&&delete b[a[c]]},p=function(){var a=new Date,b;if(c("date-toisostring"))b=a.toISOString().split("T")[0];else{var d=function(a,b){var c=""+a;b=b||2;for(var d=0,e=b-c.length;d<e;d++)c="0"+c;return c},e=a.getFullYear(),f=d(a.getMonth()+1),g=d(a.getDate());b=[e,f,g].join("-")}return b},q=function(a){var b={};if(a)for(var c=0,d=a.length;c<d;c++){var e=a[c];b[e[0]]={},b[e[0]].uratc=e[1],b[e[0]].rwdb=e[2]}return b},r=function(b){var c=v(m(b),"|"),d={};for(var e=0,f=c.length;e<f;e++){var g=c[e].split("="),h=g[0],i=v(j(g[1]),"&");if(a.isArray(i))for(var k=0,l=i.length;k<l;k++){var n=i.shift();n=n.split(","),i.push(n)}else i=v(i,",");d[h]=i}return d},s=function(a,b,c){var d=c[a];if(d)for(var e=0,f=d.length;e<f;e++)if(b==d[e])return"Y";return"N"},t=function(b){var c=[],d,e,f,g;return a.each(b,function(b,h){d=a.isArray(h),e=d&&!!h.length&&a.isArray(h[0]),f=w(b,h);if(f){if(e){for(var i=0,j=h.length;i<j;i++){var m=h.shift();m=m.join(","),h.push(m)}h=u(h,"&")}d&&(h=u(h,",")),g=e?l(b+"=")+h:l(b+"="+k(h)),c.push(g)}}),u(c,"|")},u=function(b,c){return a.isArray(b)?b.join(c)+c:b},v=function(a,b){if(a.indexOf(b)!==-1){var c=a.charAt(a.length-1)===b,d=c&&a.charAt(a.length-2)===b;return(c&&!d?a.substring(0,a.length-1):a).split(b)}return a},w=function(b,c){var d=/^([A-Za-z0-9]{1,5}|,)*$/,e=/^[A-Fa-f0-9]{8}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{12}$/,f=/^\d{4}-\d{2}-\d{2}$/,g=/^(Y|N)$/,h=/^([A-Za-z0-9]{3,4}|,)*$/,i=/^\d{5}-?(\d{4})?$/,j=function(a,b){return a.test(b)},k={AOC:a.proxy(j,this,d),GUID:a.proxy(j,this,g),known:a.proxy(j,this,g),lastSent:a.proxy(j,this,f),lastUpdate:a.proxy(j,this,f),RPC:a.proxy(j,this,h),segment:function(a){return a.length===3},source_code_applied:function(a){return a.length===4},zip:a.proxy(j,this,i)},l=a.isFunction(k[b])?k[b](c):!0;return l},x=a.proxy(b,this,n,{expires:365});e=function(){return{erase:function(){x().erase()},read:function(a){a=a||!1;var b=x().read(),c;if(a)c=b;else try{b=r(b),b.pplr=s("ppl","A",b),b.fieir=s("fiei","Y",b),b.fpeir=s("fpei","Y",b),b.sieir=s("siei","Y",b),b.tieir=s("tiei","Y",b),b.accounts=q(b.accts),c=b}catch(d){}return c},write:function(a){try{var b=p();typeof a=="string"&&(a=r(a)),a.lastUpdate=b,a.lastSent=a.lastSent||a.lastUpdate,a.segment&&a.seg&&delete a.seg,o("fieir fpeir pplr sieir tieir accounts",a),a=t(a),x().write(a)}catch(c){}}}}}return e}),define("slotplacement/topic",["jquery","signals"],function(a,b){function d(a){b.call(this),this.name=a||"",this.memorize=!0}function e(a){var b=a&&c[a];return b||(b=new d(a),a&&(c[a]=b)),b}var c={};return d.prototype=new b,d.constructor=d.prototype.constructor=d,d.prototype.clear=function(){return this.forget.apply(this,arguments)},d.prototype.once=function(){return this.addOnce.apply(this,arguments)},d.prototype.publish=function(a){return this.dispatch.apply(this,arguments)},d.prototype.subscribe=function(a,b,c){return this.add.apply(this,arguments)},d.prototype.unsubscribe=function(){return this.remove.apply(this,arguments)},e.Channel=d,e.channels=c,e.exists=function(a){return!!c[a]},e.publish=function(a,b){var c=a.split(" ");for(var d=0,f=c.length;d<f;d++){var g=e(c[d]);g.publish.apply(g,b||[])}},e.subscribe=function(b,c,d){var f={},g={},h=0,i,j;return a.isPlainObject(b)?(f=b,d=Array.prototype.pop.call(arguments),c=undefined):f[b]=c,a.each(f,function(a,b){i=e(a),d=d||i,j=function(){b.apply(d,arguments)},i.subscribe(j),g[a]=j,h++}),h===1?g[b]:g},e.unsubscribe=function(b,c){var d={};a.isPlainObject(b)?d=b:d[b]=c,a.each(d,function(a,b){e(a).unsubscribe(b)})},e}),define("slotplacement/v1st",["slotplacement/cookie","has"],function(a,b,c){var d="v1st",e;return b.add("cookies",function(a,b,c){var d=!1;return"cookie"in b&&(b.cookie="cookietest=1",d=b.cookie.indexOf("cookietest=")!==-1,b.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"),d}),b("cookies")&&(e=function(){var b=a(d),e=/^\w+$/,f={erase:b.erase,read:function(){var a=b.read();return e.test(a)||(a=c),a},write:function(a){a!==null&&a!==c&&e.test(a)&&b.write(a)}};return f}),e}),define("slotplacement/service",["jquery","slotplacement/config","slotplacement/topic","slotplacement/persona","slotplacement/v1st","slotplacement/cors"],function(a,b,c,d,e,f){var g="",h={},i={},j=function(a){if(a=="")return{};var b={};for(var c=0;c<a.length;++c){var d=a[c].split("=");if(d.length!=2)continue;b[d[0]]=decodeURIComponent(d[1].replace(/\+/g," "))}return b}(window.location.search.substr(1).split("&")),k={init:function(h,k){function l(a){var b=!!a;return b?(a+"").substr(0,5):b}function r(a,b){if(typeof a=="undefined")return;q.test(a)&&(p.data[b]=a)}function s(c){require(["slotplacement/adtracking"],function(d){a.isEmptyObject(i)?i=new d(h,c):i.addPage(h,c),b.isDebugEnabled()&&console.log("Slot Placement - Registered Ad Tracker for Page Id=["+h+"]")})}b.isLoggingEnabled()&&console.log("Slot Placement - Service.init() called with Page Id=["+h+"]"),g=h,this.pageid=h,this.ssv_parameters={},typeof k=="object"&&(this.ssv_parameters.pfid=typeof k.pfid=="undefined"?null:k.pfid,this.ssv_parameters.zip=typeof k.zip=="undefined"?null:k.zip,this.ssv_parameters.cigseg=typeof k.cigseg=="undefined"?null:k.cigseg,this.ssv_parameters.locale=typeof k.locale=="undefined"?null:k.locale,this.ssv_parameters.product=typeof k.product=="undefined"?null:k.product,this.ssv_parameters.userType=typeof k.userType=="undefined"?null:k.userType,this.ssv_parameters.lids=typeof k.lids=="undefined"?null:a.isArray(k.lids)?k.lids.join():k.lids,this.ssv_parameters.eci=typeof k.eci=="undefined"?null:k.eci,this.ssv_parameters.pnpc=typeof k.pnpc=="undefined"?null:k.pnpc,this.ssv_parameters.pageLayout=typeof k.pageLayout=="undefined"?null:k.pageLayout),c("personaUpdated").subscribe(function(){this.start()});if(typeof h=="undefined"){c("adError").publish("error"),b.isDebugEnabled()&&console.log("Slot Placement - [adError] Event Published, Page Id=[undefined]");return}var m=this,n=a.isFunction(d)?d().read():{},o=b.isClassic==="true"?"jsonp":"json",p={url:b.adServiceURL,dataType:o,jsonp:"_callback",cache:!1,timeout:h==="timeout"?"900":b.timeout,xhrFields:{withCredentials:!0},data:{_o:b.XPOOrgID,_t:h,ssv_v1st:a.isFunction(e)?e().read():"",ssv_pfid:this.ssv_parameters.pfid||n.pfid||"",ssv_zip:l(this.ssv_parameters.zip)||l(n.zip)||"",ssv_cigseg:this.ssv_parameters.cigseg||n.segment||"",ssv_locale:this.ssv_parameters.locale||n.locale||"",ssv_random:Math.floor(Math.random()*98+1),ssv_product:this.ssv_parameters.product||"",ssv_userType:this.ssv_parameters.userType||"",ssvm_lids:this.ssv_parameters.lids||"",ssv_eci:this.ssv_parameters.eci||n.ECI,ssv_pnpc:this.ssv_parameters.pnpc||"",ssv_pageLayout:this.ssv_parameters.pageLayout||""},error:function(a){c("adError").publish(h),b.isLoggingEnabled()&&console.log("Slot Placement - [adError] Event Published for Page Id=["+h+"]"),s(a)}},q=/^[0-9a-zA-Z]+$/;r(j.bu,"ssv_bu"),r(j.bi,"ssv_bi"),r(j.ad_id,"ssv_ad"),b.isLoggingEnabled()&&console.log("Slot Placement - Calling XPO with Page Id=["+h+"]"),f(p).then(function(a){c("adUpdate").publish(h,a),b.isLoggingEnabled()&&console.log("Slot Placement - [adUpdate] Event Published for Page Id=["+h+"]"),s(a)})},trackVariation:function(a,c,d,e){var f="?_o="+b.XPOOrgID,g="&_t="+b.variationActivityTag,h="&ssv_transid="+a,i="&ssv_random="+d,j="&ssv_adcontext="+c,k="&ssv_placement="+this.pageid+"/"+e,l=b.activityTagURL+f+g+h+i+j+k;if(document.images){var m=new Image;m.src=l}else document.write('<IMG ALT="" BORDER="0" NAME="DCSIMG" WIDTH="1" HEIGHT="1" SRC="'+l+'">')},destroy:function(d){if(g!==""&&g===d){b.isLoggingEnabled()&&console.log("Slot Placement - Destroying Page Id=["+d+"]"),g="";var e=[];a.each(h,function(a,b){e.push(b)}),k.destroyPlacements(e),k.destroyAdTracker(d),a.each(c.channels,function(a,d){b.isDebugEnabled()&&console.log("Slot Placement - Destroying Topic Channel=["+d.name+"]"),c.channels[a]=null,delete c.channels[a]})}},destroyPlacements:function(){var c=[];for(var d=0;d<arguments.length;d++)typeof arguments[d]=="string"?c.push(arguments[d]):a.isArray(arguments[d])&&a.each(arguments[d],function(a,b){c.push(b)});a.each(c,function(c,d){typeof h[d]!="undefined"&&(b.isDebugEnabled()&&console.log("Slot Placement - Destroying Event Handlers for Placement=["+d+"]"),a("#"+d).children().off(".slotplacement"),h[d]=null,delete h[d])})},destroyAdTracker:function(c){a.isEmptyObject(i)||(b.isDebugEnabled()&&console.log("Slot Placement - Destroying Ad Tracker"),i={})},registerPlacement:function(a){typeof h[a]=="undefined"&&(h[a]=a)}};return k}),define("slotplacement/placement",["jquery","slotplacement/adsize","slotplacement/config","slotplacement/contentprovider","slotplacement/topic","slotplacement/service","jquery-isOnScreen"],function(a,b,c,d,e,f){function n(n){var o=this,p=this;this.arguments=a.extend({},m,n),this.validateInput=function(){var a=!0;this.element.length||(a=!1);if(this.width==0||this.height==0)a=!1;return a},this.AdTracking={Element:a("#"+this.arguments.pid),Debounce:function(a,b,c){var d;return function(){function h(){c||a.apply(f,g),d=null}var f=this,g=arguments;d?clearTimeout(d):c&&a.apply(f,g),d=setTimeout(h,b||100)}},IsElementInViewport:function(a){return a.isOnScreen(.5,.5)}},this.initializePlacement=function(d){this.element=a("#"+d.pid),this.options=a.extend({},m,d),this.width=b[d.size]?b[d.size].width:0,this.height=b[d.size]?b[d.size].height:0,this.pidData={},this.adVariantData={},c.isLoggingEnabled()&&console.log("Slot Placement - Configuring new Slot Placement for PID=["+d.pid+"]");if(!this.validateInput()&&!this.options.responsive)return!1;if(this.options.isDisabled){this.spinner.hide(this);return}var g=this;this.adLabel="XPlusOne",this.spinner.show(this),f.registerPlacement(g.options.pid),e.subscribe("adError",function(a){g.pageId=a,c.isDebugEnabled()&&console.log("Slot Placement - [adError] Event Received for PID=["+g.options.pid+"]"),g.options.failoverReason="decision_fail",g.adDataFail({})}),e.subscribe("adUpdate",function(a,b){c.isDebugEnabled()&&console.log("Slot Placement - [adUpdate] Event Received for PID=["+g.options.pid+"]"),g.pageId=a,b[g.options.pid]==undefined?(g.options.failoverReason="plc_config_fail",g.adDataFail({})):b[g.options.pid].cid?(g.pidData=b[g.options.pid],g.getAd(g.pidData)):(g.pidData=b[g.options.pid],g.options.failoverTreatment==="hide"?(g.spinner.hide(g),g.element.hide()):g.adDataFail({}))})},this.spinner={show:function(a){if(a.options.loadingView.toLowerCase()==="placement-spinner")a.element.css({position:"relative"}),a.element.append("<div class='jpui spinner'/>");else{if(a.options.loadingView.toLowerCase()!=="spinner")return;a.options.responsive===!0?a.element.css({background:'url("'+h+'") no-repeat scroll center center',border:"1px solid #D5DCE2",opacity:"0.75",overflow:"hidden",display:"block","min-height":"60px"}):a.element.css({background:'url("'+h+'") no-repeat scroll center center',border:"1px solid #D5DCE2",opacity:"0.75",overflow:"hidden",display:"block",width:a.width,height:a.height})}},hide:function(a){if(a.options.loadingView.toLowerCase()==="placement-spinner")a.element.removeAttr("style"),a.element.find(".jpui.spinner").remove();else{if(a.options.loadingView.toLowerCase()!=="spinner")return;a.options.responsive===!0?a.element.css({background:"none",opacity:"1",border:"none",display:"block",overflow:"visible"}):a.element.css({background:"none",opacity:"1",border:"none",display:"block",width:a.width,height:a.height,overflow:"visible"})}}},this.loadImage=function(a){var b=this,c=document.createElement("img");c.border=0,c.onerror=function(){c.onload=null,clearTimeout(d),b.options.failoverReason="content_fail",b.adDataFail(a)},c.onload=function(){clearTimeout(d),c.onload=null,b.render(a,c)};var d=window.setTimeout(c.onerror,i);c.src=g+a.cid},this.getAd=function(a,b){a.ctype&&(a.ctype=a.ctype.toLowerCase());var e=this,f=!!a.url&&a.url!=="",g=!!a.turl&&a.turl!=="",h=!!a.wa_aid,i=this.adLabel==="XPlusOne";f&&g&&h&&i&&(a.url=this.track(a.url,"jp_aid_a",a.creativeId||a.wa_aid));if(a.queryPassForward){var k=window.location.search.substr(1),m=/^[0-9a-zA-Z,;_-]+$/,n=a.url,o=n.match(/\?/)?"&":"?";if(k!==""&&k.length>0){k=k.split("&");var p={};for(var q=0;q<k.length;q++){var r=k[q].indexOf("=");m.test(k[q].substring(0,r))&&m.test(k[q].substring(r+1,k[q].length))&&(p[k[q].substring(0,r)]=k[q].substring(r,k[q].length))}if(j!=""&&j!=undefined){var s=j.split(",");for(var q=0;q<s.length;q++)l[s[q]]!=undefined&&delete p[s[q]]}for(var r in p)n=n+o+r+p[r],o==="?"&&(o="&")}a.url=n}if(a.ctype==="image"&&this.adLabel==="XPlusOne"){this.loadImage(a);return}var t=function(){e.render(e.pidData,arguments)},u=function(){e.options.failoverReason="content_fail",e.adDataFail(arguments)};c.isDebugEnabled()&&console.log("Slot Placement - Loading content with CID=["+a.cid+"]"),d.loadAd(a.cid,t,u,a.url)},this.track=function(a,b,c){var d=a.match(/\?/)?"&":"?";return a+=d+b+"="+c,this.adLabel==="XPlusOne"&&(a+="&jp_aid_p="+this.pageId+"/"+this.options.pid),this[b]=c,a},this.adDataFail=function(a){this.adLabel!=="default"&&this.options.failoverAdUrl!==""?(this.adLabel="default",this.options.adLabel="default",a.cid=this.options.failoverAdUrl,a.turl=null,a.url=null,this.getAd(a,this.element)):(this.spinner.hide(this),this.options.failoverTreatment==="hide"&&this.element.hide())},this.render=function(b,d){function w(a){return k[a]?"width="+k[a].width+", height="+k[a].height+",toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes":""}function x(b){var d=a(window),f=window.document;o.options.adLabel=o.adLabel,e("trackAdClick").publish(o.options.pid,o.options,o.adVariantData,o.pageId),c.isDebugEnabled()&&console.log("Slot Placement - [trackAdClick] Event Published for PID=["+o.options.pid+"]"),p&&(window.open(b.currentTarget.href,"popup",q),b.preventDefault());return}var g=b.url,h=b.turl||!1,i=b.alttext||"",j=b.target&&b.target.toLowerCase()||"",l=this.adLabel=="XPlusOne",m=b.ctype=="image"&&l,n=b.ctype=="html",p=j=="window",q=b.targetsize&&w(b.targetsize)||"",r=!!b.data,s=this.element,t=m?"append":"html",u;this.options.creativeId=b.creativeId,m?(d.setAttribute("alt",i),u=a("<a/>").attr("href",g).attr("target",j).attr("style","display:block;line-height:12px;").append(d)):u=d[0];var v=u;s[t](v),this.assignTrackClick=function(a){var c=o.element.find("a");l=o.adLabel=="XPlusOne",!l&&c.attr("href")&&c.attr("href",o.track(c.attr("href"),"jp_aid_a",o.options.failoverAdId)),l&&c.attr("href")&&n&&(c.attr("href",o.track(c.attr("href"),"jp_aid_a",b.creativeId||b.wa_aid)),g=c.attr("href"));var d=o.options.weblinkClickHandler;d&&typeof d=="function"&&c.on("click.slotplacement",d),c.on("click.slotplacement",x)},e.subscribe("placementComplete",function(a,b){c.isDebugEnabled()&&console.log("Slot Placement - [placementComplete] Event Received for PID=["+a+"]");if(a===o.options.pid){o.adVariantData=b,o.invokeAdImpression(),o.assignTrackClick();if(o.adLabel!=="default"&&typeof b!="undefined"&&b!==""){var d=RegExp("[?&]_xt=([^&]*)").exec(o.pidData.turl);d=d&&decodeURIComponent(d[1].replace(/\+/g," "));var e=RegExp("[?&]ssv_random=([^&]*)").exec(o.pidData.turl);e=e&&decodeURIComponent(e[1].replace(/\+/g," ")),d&&f.trackVariation(d,b,e,a)}}}),o.options.responsive||(e("trackAdImpression").publish(o.options.pid,o.options,null,o.pageId),c.isDebugEnabled()&&console.log("Slot Placement - [trackAdImpression] Event Published for PID=["+o.options.pid+"]"),o.assignTrackClick()),this.spinner.hide(this)},this.invokeAdImpression=function(){var b=a(window),d=o.AdTracking.Element;if(d){var f=b.height();o.AdTracking.IsElementInViewport(d)&&(d.hasClass("adimpression")||(e("trackAdImpression").publish(o.options.pid,o.options,o.adVariantData,o.pageId),c.isDebugEnabled()&&console.log("Slot Placement - [trackAdImpression] Event Published for PID=["+o.options.pid+"]"),d.addClass("adimpression"))),d.hasClass("adimpression")||b.on("scroll",o.AdTracking.Debounce(function(){var a=b.scrollTop();o.AdTracking.IsElementInViewport(d)&&(d.hasClass("adimpression")||(e("trackAdImpression").publish(o.options.pid,o.options,o.adVariantData,o.pageId),c.isDebugEnabled()&&console.log("Slot Placement - [trackAdImpression] Event Published for PID=["+o.options.pid+"]"),d.addClass("adimpression")))},1e3))}},this.initializePlacement(n)}var g=c.contentServer,h=c.loadingImagePath,i=c.timeout,j=c.excludedQueryPassforwardParams,k={small:{width:200,height:200},medium:{width:980,height:600},large:{width:1006,height:600}},l=function(a){if(a=="")return{};var b={};for(var c=0;c<a.length;++c){var d=a[c].split("=");if(d.length!=2)continue;b[d[0]]=decodeURIComponent(d[1].replace(/\+/g," "))}return b}(window.location.search.substr(1).split("&")),m={size:null,failoverTreatment:"hide",failoverAdId:"",failoverAdUrl:"",loadingView:"placement-spinner",responsive:!0};return n}),define("slotplacement/adtracking",["jquery","slotplacement/topic","slotplacement/config"],function(a,b,c){function d(d,e){var f=this;this.random=Math.floor(Math.random()*9e8)+1e8,this.pagesData={},this.pagesData[d]=e,this.addPage=function(a,b){this.pagesData[a]=b},this.strictEncodeURIComponent=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape)},this.invokePixelTag=function(a){if(document.images){var b=new Image;b.src=a}else document.write('<IMG ALT="" BORDER="0" NAME="DCSIMG" WIDTH="1" HEIGHT="1" SRC="'+a+'">')},this.createBaseTrackingPixelUrl=function(){return c.trackingPixelImagePath+"&wa_cb="+this.random},this.create_jp_aid_p=function(a,b){return a?"&jp_aid_p="+a+"/"+b:""},this.create_jp_aid_c=function(a){return typeof a!="undefined"&&a!==""?"&jp_aid_c="+a:""},this.create_wa_ad_fi=function(a){return typeof a!="undefined"&&a!==""?"&wa_ad_fi="+a:""},this.create_wa_tp=function(){return"&wa_tp=13"},this.create_wa_uri=function(){return"&wa_uri="+this.strictEncodeURIComponent(document.location.href)},this.insightAdClick=function(a,b,d,e,f){var g=this.createBaseTrackingPixelUrl();g+="&wa_aid_lnk="+a;var h=this.create_jp_aid_p(b,d),i=this.create_jp_aid_c(e),j=this.create_wa_tp(),k=this.create_wa_uri(),l=this.create_wa_ad_fi(f);g+=h+i+j+k+l,this.invokePixelTag(g),c.isDebugEnabled()&&console.log("Slot Placement - [Ad Click] Fired for PID=["+d+"]")},this.insightAdImpression=function(a,b,d,e,f){var g=this.createBaseTrackingPixelUrl();g+="&wa_aid_i="+a;var h=this.create_jp_aid_p(b,d),i=this.create_jp_aid_c(e),j=this.create_wa_tp(),k=this.create_wa_uri(),l=this.create_wa_ad_fi(f);g+=h+i+j+k+l,this.invokePixelTag(g),c.isDebugEnabled()&&console.log("Slot Placement - [Ad Impression] Fired for PID=["+d+"]")},this.adImpression=function(b,c,d,e){typeof this.pagesData[e]!="undefined"&&(this.pidData=this.pagesData[e][b]);var g=a.extend({},c);g.adLabel==="default"?(f.jp_aid_a=g.failoverAdId,f.jp_aid_a&&this.insightAdImpression(f.jp_aid_a,e,b,d,g.failoverReason)):typeof this.pidData!="undefined"&&(f.jp_aid_a=this.pidData.creativeId||this.pidData.wa_aid,f.jp_aid_a&&this.insightAdImpression(this.pidData.creativeId||f.jp_aid_a,e,b,d))},this.trackClick=function(b,d,e,f){var g=a.extend({},d);g.adLabel||(g.adLabel="XPlusOne");var h=a(window),i=window.document,j=typeof this.pagesData[f]!="undefined"?this.pagesData[f][b]:{};g.adLabel==="default"&&(j={},j.cid=g.failoverAdUrl,j.turl=null,j.url=null);if(typeof j!="undefined"){var k=j.turl||!1,l=g.adLabel=="XPlusOne",m=l?j.creativeId?j.creativeId:j.wa_aid:g.failoverAdId;if(k){var n=i.createElement("img");n.src=j.turl}c.adTrackingDisabled!=="true"&&(window.Blue&&window.Blue.version?window.require(["blue/event/channel/analytics"],function(a){a.emit("requestAdvertisementDetails",{placement:b,adId:d.creativeId,location:d.location,variations:e,tagMap:f})}):this.insightAdClick(m,f,b,e,g.failoverReason))}},this.trackOriginImpression=function(a,b,d){typeof this.pagesData[d]!="undefined"&&(this.pidData=this.pagesData[d][a]);if(typeof this.pidData!="undefined"){var e=RegExp("[?&]_xt=([^&]*)").exec(this.pidData.turl);e=e&&decodeURIComponent(e[1].replace(/\+/g," "));var f=RegExp("[?&]ssv_random=([^&]*)").exec(this.pidData.turl);f=f&&decodeURIComponent(f[1].replace(/\+/g," "));var g="?_o="+c.XPOOrgID,h="&_t="+c.viewableImpressionTag,i=typeof e!="undefined"&&e!==""?"&ssv_transid="+e:"",j=typeof f!="undefined"&&f!==""?"&ssv_random="+f:"",k="&ssv_placement="+d+"/"+a,l=b.adLabel==="default"?"&ssv_creativeid="+b.failoverAdId:"&ssv_creativeid="+b.creativeId,m=c.activityTagURL+g+h+i+j+k+l;if(document.images){var n=new Image;n.src=m}else document.write('<IMG ALT="" BORDER="0" NAME="DCSIMG" WIDTH="1" HEIGHT="1" SRC="'+m+'">')}},c.adTrackingDisabled!=="true"&&b.subscribe("trackAdImpression",function(a,b,c,d){window.Blue&&window.Blue.version?(typeof f.pagesData[d]!="undefined"&&(f.pidData=f.pagesData[d][a]),typeof f.pidData!="undefined"&&window.require(["blue/event/channel/analytics"],function(e){e.emit("requestAdvertisementActionsDisplay",{placement:a,adId:b.creativeId,location:b.location,variations:c,tagMap:d})})):f.adImpression(a,b,c,d),f.pagesData[d]!==undefined&&f.trackOriginImpression(a,b,d)}),b.subscribe("trackAdClick",function(a,b,c,d){f.pagesData[d]!==undefined&&f.trackClick(a,b,c,d)})}return d})
