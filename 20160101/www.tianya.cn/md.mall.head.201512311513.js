define('md.mall.head',function(require,exports,module){var $=require('jquery'),formatJson=require('formatJson'),cookie=require('cookie'),mXss=require('xss'),report=require('report');function initHeadEvent(){if(cookie.get("uin")||cookie.get("uid")){$.ajax({type:"GET",dataType:"jsonp",url:"http://mall.midea.com/my/index/getuserinfo?callback=getuserinfoCB",error:function(request){},success:function(result){if("0"==result.errCode||result.errCode==1003){var jUserLoginName=$('#userLoginName'),jOptWrap=$('#optWrap');jOptWrap.addClass('has_login');result.userInfo=result.userInfo||{};if(result.userInfo.strNickname){jUserLoginName.html(mXss.parse(result.userInfo.strNickname,'html'));}
else if(result.userInfo.strMobile){jUserLoginName.html(mXss.parse(result.userInfo.strMobile,'html'));}else{jUserLoginName.html(mXss.parse('ç¨æ·'+cookie.get("uid"),'html'));}
if(result.userInfo.strImageUrl){$('#userLoginImg').attr("src",result.userInfo.strImageUrl);jOptWrap.addClass('has_user_img');}
else{jOptWrap.removeClass('has_user_img');}
if(result.userInfo.nUserType&2){$('#rowInternal').show();$('#navInternal').show();if($('.interval_tag1').length>0){$('.interval_tag1').show();$('.interval_tag0').remove();}else{$('.interval_tag0').show();}
manageInternal();}else{$('.interval_tag1').remove();}
if((result.userInfo.nUserType&8)!=0){showBatchOrderEntrance();}else{hideBatchOederEntrance();}}}});}
else{$('#optWrap').removeClass('has_login');$('#unloginStatus').css("display","block");}
var hoverDelay=300;var itemHoverTimer;var itemHoverClass='item_all_hover';var $itemAll=$('.nav_wrap .item_all');var $subNav=$('.sub_nav_wrap');$itemAll.hover(function(){$(this).addClass(itemHoverClass);$subNav.show();clearTimeout(itemHoverTimer);},function(){var that=this;itemHoverTimer=setTimeout(function(){$(that).removeClass(itemHoverClass);$subNav.hide();},hoverDelay);});$('.sub_nav_wrap').hover(function(){clearTimeout(itemHoverTimer);},function(){itemHoverTimer=setTimeout(function(){$itemAll.removeClass(itemHoverClass);$subNav.hide();},hoverDelay);});$('.opt_search').hover(function(){$(this).addClass('opt_search_hover');if($(this).find('input[type="search"]').val()!=''){$(this).addClass('opt_search_focus');}},function(){$(this).removeClass('opt_search_hover');}).find('input').on('focus',function(){$(this).parents('.opt_search').addClass('opt_search_focus');}).on('blur',function(){$(this).parents('.opt_search').removeClass('opt_search_focus');});var wxHoverTimer;$('.opt_wx').hover(function(){$(this).addClass('opt_wx_hover');$('.wx_wrap').show();clearTimeout(wxHoverTimer);},function(){var that=this;wxHoverTimer=setTimeout(function(){$(that).removeClass('opt_wx_hover');$('.wx_wrap').hide();},hoverDelay);});$('.wx_wrap').hover(function(){clearTimeout(wxHoverTimer);},function(){wxHoverTimer=setTimeout(function(){$('.opt_wx').removeClass('opt_wx_hover');$('.wx_wrap').hide();},hoverDelay);});var userHoverTimer;var userHasLoginDiv=$('.JS_user_haslogin_wrap');$('.opt_user_login_success').hover(function(){$(this).addClass('opt_user_hover');userHasLoginDiv.show();clearTimeout(userHoverTimer);},function(){var that=this;userHoverTimer=setTimeout(function(){$(that).removeClass('opt_user_hover');userHasLoginDiv.hide();},hoverDelay);});userHasLoginDiv.hover(function(){clearTimeout(userHoverTimer);},function(){userHoverTimer=setTimeout(function(){$('.opt_user_login_success').removeClass('opt_user_hover');userHasLoginDiv.hide();},hoverDelay);});var userUnLoginHoverTimer;var userUnLoginDiv=$('.JS_user_unlogin_wrap');$('.opt_user_login_fail').hover(function(){$(this).addClass('opt_user_hover');userUnLoginDiv.show();clearTimeout(userUnLoginHoverTimer);},function(){var that=this;userUnLoginHoverTimer=setTimeout(function(){$(that).removeClass('opt_user_hover');userUnLoginDiv.hide();},hoverDelay);});userUnLoginDiv.hover(function(){clearTimeout(userUnLoginHoverTimer);},function(){userUnLoginHoverTimer=setTimeout(function(){$('.opt_user_login_fail').removeClass('opt_user_hover');userUnLoginDiv.hide();},hoverDelay);});var currentHref=encodeURIComponent(window.location.href);if(!currentHref){currentHref=encodeURIComponent("http://www.midea.com/cn");}
$('.opt_user_login_success').on('click',function(){location.href='http://mall.midea.com/my/index';});$('.opt_user_login_fail').on('click',function(){location.href="https://mall.midea.com/login/web?rurl=http%3A%2F%2Fmall.midea.com%2Fmy%2Findex&mtag=40005.1.9";});$('.row_login_out').on('click',function(){var date=new Date();date.setTime(date.getTime()-10000);cookie.del("uin","/","midea.com",date.toGMTString());cookie.del("uid","/","midea.com",date.toGMTString());cookie.del("wxwebop","/","midea.com",date.toGMTString());cookie.del("qop","/","midea.com",date.toGMTString());cookie.del("wxopenid","/","midea.com",date.toGMTString());cookie.del("skey","/","midea.com",date.toGMTString());location.reload();});var $searchWrap=$('.search_wrap'),$form=$searchWrap.find('form').eq(0),$input=$searchWrap.find('input').eq(0),$defaultLink=$searchWrap.find('input[name="default_link"]');$form.on('submit',function(e){e.preventDefault();if($.trim($input.val())==''){location.href=$defaultLink.val();}else{$(this).get(0).submit();}
return false;});$searchWrap.find('.icon_opt').on('click',function(e){e.preventDefault();if($.trim($input.val())==''){location.href=$defaultLink.val();}else{$form.submit();}
return false;});$('#footLinkWrap').on('click',function(){$(this).toggleClass('foot_links_on');});}
function initMainLeftNav(){activeLiCur();toggleLeftNav();}
function activeLiCur(){var themeName=$.trim($('#themeName').val());if($('.left_wrap')[0]){var navA=$('.left_wrap').find('a');var navALength=navA.length;for(var i=0;i<navALength;i++){if(themeName==$.trim(navA.eq(i).text())){navA.eq(i).attr("href","###");navA.eq(i).parent('li').addClass('cur');if(navA.eq(i).parents('.left_sub_nav')[0]){navA.eq(i).parents('.left_nav_li').addClass('child_cur');}}}}
if($('.set_bar_wrap')[0]){var navB=$('.set_bar_wrap').find('a');var navBLength=navB.length;for(var i=0;i<navBLength;i++){if(themeName==$.trim(navB.eq(i).children('.bar_nav_word').text())){navB.eq(i).parent('li').addClass('cur');if(navB.eq(i).parents('.bar_sub_nav')[0]){navB.eq(i).parents('.bar_nav_li').addClass('child_cur');}}}}}
function toggleLeftNav(){if($('.left_nav_li')[0]){$('.left_nav_li .icon_swtch_nav').on("click",function(){if($(this).parent().hasClass("child_cur")){$(this).parent().removeClass("child_cur");}
else{$(this).parent().addClass("child_cur");}});}
if($('.bar_nav_li')[0]){$('.bar_nav_li .icon_swtch_nav').on("click",function(){if($(this).parent().hasClass("child_cur")){$(this).parent().removeClass("child_cur");}
else{$(this).parent().addClass("child_cur");}});}}
function initHeadNavCur(){var thisUrl=location.href;var hrefArray=[];var about=["/about_midea","/news_center","/investor_relations","/solution","/infomation","/wbwx","/subject","/video"];hrefArray.push(about);var myProduct=["/service/index/detail"];hrefArray.push(myProduct);var service=["/service/index","/my/warranty/record","/service_support","/service/search","/my/index/record"];hrefArray.push(service);var internal=["/my/internal"];hrefArray.push(internal);var cooperation=["/company/cooperation"];hrefArray.push(cooperation);var flag=false;for(var i=0;i<hrefArray.length;i++){if(flag){break;}
var jLength=hrefArray[i].length;for(var j=0;j<jLength;j++){if(thisUrl.indexOf(hrefArray[i][j])>-1){if(i==0){addItemOn("ç¾çéå¢");flag=true;break;}
else if(i==1){addItemOn("ä¸ªäººäº§å");flag=true;break;}
else if(i==2){addItemOn("æå¡æ¯æ");flag=true;break;}else if(i==3){addItemOn("ç¾çåå·¥ç¦å©é¢é");flag=true;break;}else if(i==4){addItemOn("ä¼ä¸éè´­");flag=true;break;}}}}
if(!flag){addItemOn("ç¾çåå");}}
function addItemOn(str){var navList=$('#topNavWrap li');var navListLength=navList.length;for(var n=0;n<navListLength;n++){if($.trim(navList.eq(n).find("a").html())==str){navList.eq(n).addClass('item_on');break;}}}
function manageOperationTime(){var oTimes=$(".operation_time");oTimes.each(function(){var $this=$(this);var startTime=$this.attr("data-time-start");var endTime=$this.attr("data-time-end");var timeRex=/^\d{4}\/\d{2}\/\d{2} \d{2}\:\d{2}\:\d{2}$/;if(timeRex.test(startTime)&&timeRex.test(endTime)){var now=new Date();var t1=new Date(startTime);var t2=new Date(endTime);if(t1<now&&t2>now){$this.css("display","block");}else{$this.remove();}}else{$this.remove();}});}
function showBatchOrderEntrance(){$('.row_batch_order').removeClass('hide').unbind().on('click',function(){location.href='http://mall.midea.com/order/buyer_batch/confirm_order';});$('#js_batchOrderEntrance').removeClass('hide');}
function hideBatchOederEntrance(){$('.row_batch_order').addClass('hide').unbind();$('#js_batchOrderEntrance').addClass('hide');}
function initActDot(){var $oAct=$(".row_my_act");if($oAct.length>0){$(".js_act_dot").show();}}
function manageInternal(){var day=new Date().getDate(),$rowInternal=$("#rowInternal"),$iconNewFunction=$rowInternal.find(".icon_new_function");if(day>=17&&day<=25){$('#dot').show();$iconNewFunction.show();}else{$iconNewFunction.hide();}}
exports.init=function(){initHeadNavCur();initHeadEvent();initMainLeftNav();manageOperationTime();initActDot();}});
