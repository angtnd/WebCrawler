/*
 Admotion Copyright ÃÂ© 2001-2015 Positioning v3.8.1
*/
AdmotionMod.registerModule("positioning",function(y){var a=AdmotionMod.getCore(y);a.Utility.map(a.AD_COMMAND,{EXPAND:"expand",COLLAPSE:"collapse",CANCEL:"cancel",RESIZE:"resize",CROP:"crop",TRANSITION_COLLAPSE:"transition.collapse",TRANSITION_COLLAPSE_BY_BUTTON:"transition.collapseByButton",TRANSITION_EXPAND:"transition.expand",TRANSITION_CANCEL:"transition.cancel",COLLAPSE_AND_REMOVE:"collapseAndRemove",SET_BLIND_COLOR:"setBlindColor",CLEAR_BLIND_COLOR:"clearBlindColor",CALL_API_METHOD:"callAPIMethod"});
a.Lang.pxToFloat=function(b){return a.Lang.isString(b)?"px"==b.substr(-2,b.length)?parseFloat(b.substr(0,b.length-2)):parseFloat(b):b};a.Browser.support.fixed=function(b){b=b||a.WindowContext.getTopAccessWindow().document;var c=b.createElement("div"),d=c.cloneNode(!1),f=!1,e;(e=b.body)||(f=!0,e=b.documentElement.appendChild(b.createElement("body")));var g=e.style.cssText;e.style.cssText="padding:0;margin:0";c.style.cssText="position:fixed;top:42px";e.appendChild(c);e.appendChild(d);var h=c.offsetTop!==
d.offsetTop;e.removeChild(c);e.removeChild(d);e.style.cssText=g;f&&b.documentElement.removeChild(e);return h};y=function(b,c,d){var f=c.prototype,e=function(){};e.prototype=f;var g=new e;b.prototype=g;g.constructor=b;b.superclass=f;c!=Object&&f.constructor==Object.prototype.constructor&&(f.constructor=c);b.inheritInclusive=function(b){f.constructor.apply(b,a.Utility.argumentsToArray(1,null,arguments.callee.caller.arguments))};b.inheritExclusive=function(b){f.constructor.apply(b,a.Utility.argumentsToArray(1))};
d&&a.Utility.foreach(d,function(a,b){g[a]=b});return b};var v=Math.round,w=function(a,c){w=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,g=a.length;c<g;c++)if(a[c]===b)return c;return-1};return w(a,c)};a.Map=function(){var b=[],c=[];this.set=function(a,f){var e=w(b,a);0>e&&(e=b.length);b[e]=a;c[e]=f};this.get=function(a){a=w(b,a);return 0<=a?c[a]:void 0};this.has=function(a){return 0<=w(b,a)};this["delete"]=function(a){a=w(b,a);if(0>a)return!1;b.splice(a,1);
c.splice(a,1);return!0};a.Event.onPageUnload(function(){b=c=null})};a.Map.prototype.remove=function(a){return this["delete"](a)};a.PanelGroupConfig.prototype.getElementSelectors=function(){var b=a.globalSettings.hidePatterns||[{type:"select",browser:{name:"IE",maxVer:6}},{type:"object|embed",attribute:{wmode:"window|null"}},{type:"object",attribute:{windowless:"false"}},{type:"input",attribute:{type:"text"},browser:{name:"IE"}},{type:"input",attribute:{type:"search"}}];this.globalParams.hidePattern&&
b.push(eval("("+this.globalParams.hidePattern+")"));return b};new function(){a.Position.prototype.getOuterNode=function(){return this.outerNode};a.Position.prototype.setAnchorProperties=function(a,c){this.setNodeSize=a;this.hideNode=c};a.Position.prototype.render=function(){if(!this.rendered&&(this.rendered=!0,this.width||this.height)){var b=this.getAnchor();"none"==a.Element.getStyle(b.parentNode).display+""&&a.Element.resetStyle(b.parentNode,"display");if(this.setNodeSize){var c={width:this.width+
"px",height:this.height+"px",display:"inline-block"};this.getStyleState().save(c,!1);a.Element.setStyle(b,c)}this.hideNode&&"IFRAME"==b.tagName&&(b.style.visibility="hidden")}};a.Position.prototype.clear=function(){this.rendered=!1;var a="",c=this.getAnchor();c&&("inline-block"!=c.style.display&&(a=c.style.display),this.getStyleState().restore(),c.style.display=a||c.style.display,this.removeStyleState())}};a.CSS_POSITION={ABSOLUTE:"absolute",RELATIVE:"relative",FIXED:"fixed",STATIC:"static"};new function(){a.Element.addMethod=
function(b,c){a.Element[b]=c;a.Element.prototype[b]=function(){var b=this.getNode();if(b)return c.apply(this,[b].concat(a.Utility.argumentsToArray()))}};a.Element.addMethods=function(b){a.Utility.foreach(b,a.Element.addMethod)};a.Element.addMethods({getFirstNonStaticParent:function(b){try{var c=b.offsetParent}catch(d){return null}for(;c;){b=a.Element.getStyle(c).position;if("relative"==b||"absolute"==b||"fixed"==b)break;c=c.offsetParent}return c},setStyle:function(b,c,d){var f={};a.Lang.isObject(c)?
f=c:a.Lang.testValueType(d,a.ValueType.Number|a.ValueType.String)&&(f[c]=d);a.Utility.map(b.style,f)},resetStyle:function(b,c){var d=b.ownerDocument,f=d.createElement(b.nodeName);d.createDocumentFragment().appendChild(f);b.style[c]=a.Element.getStyle(f)[c]||""},setAttribute:function(b,c,d){a.Lang.isObject(c)?a.Utility.foreach(c,function(a,c){b[a]=c}):a.Lang.testValueType(d,a.ValueType.Number|a.ValueType.String)&&(b[c]=d)},setPosition:function(b,c,d,f){f=f||a.CSS_POSITION.ABSOLUTE;try{var e=a.Element.getFirstNonStaticParent(b),
g=e?a.Element.getPosition(e):[0,0];b.style.position=f;null!==c&&(b.style.left=a.Utility.parsePx(parseFloat(c)-g[0]));null!==d&&(b.style.top=a.Utility.parsePx(parseFloat(d)-g[1]))}catch(h){}},getParent:function(b){return a.Element.instance(b.parentNode)},getChildren:function(b){var c=[];b=b.childNodes;for(var d=0;d<b.length;d++)3!=b[d].nodeType&&(c[c.length]=b[d]);return new a.NodeCollection(c)},parseClip:function(b){b=b.getNode?b.getNode():b;for(var c=a.Element.getStyle(b),c=c.clip?c.clip.match(/(\d+|auto)/g):
["auto","auto","auto","auto"],d=b.style.clip.match(/(\d+|auto)/g),f=0;f<c.length;f++)"auto"==d[f]&&0===c[f]&&(c[f]="auto");var e={top:c[0],right:c[1],bottom:c[2],left:c[3]};e.top="auto"==e.top?0:e.top;e.right="auto"==e.right?b.offsetWidth:e.right;e.bottom="auto"==e.bottom?b.offsetHeight:e.bottom;e.left="auto"==e.left?0:e.left;a.Utility.foreach(e,function(a,b){e[a]=parseInt(b,10)});return e},getSize:function(a){return a?[a.offsetWidth,a.offsetHeight]:null},isBody:function(a){return!!a.ownerDocument&&
a.ownerDocument.body==a},getMarginLeft:function(b){var c=a.Element.getStyle(b),d=c.marginLeft;a.Element.isBody(b)||("0px"!=c.marginLeft||b.offsetLeft==(b.parentNode&&b.parentNode.offsetLeft))&&"auto"!=c.marginLeft||(d="block"==c.display&&"auto"!=c.width?b.offsetLeft-(b.offsetParent&&!a.Element.isBody(b.offsetParent)?b.offsetParent.offsetLeft:0):0);return parseInt(d,10)}});a.FlashPiece.prototype.getPosition=a.ImagePiece.prototype.getPosition=a.Element.prototype.getPosition};a.WindowContext.scrollTo=
function(b,c,d){d=d?a.WindowContext.getNodeWindow(d):window;var f=a.WindowContext.getScroll(d.document);b=a.Lang.isNumber(b)?b:f[0];c=a.Lang.isNumber(c)?c:f[1];a.WindowContext._scroll[d.document]=[b,c];a.Event.forceScroll();delete a.WindowContext._scroll[d.document];d.scrollTo(b,c)};a.WindowContext.getScrollSize=function(b){b=b||a.WindowContext.getTopAccessWindow().document;var c=b.documentElement;if("CSS1Compat"!=b.compatMode||a.Browser.CH||a.Browser.SF)c=b.body;return[c.scrollWidth,c.scrollHeight]};
a.WindowContext.saveScrollBarsPosition=function(){a.WindowContext._scrollPosition=a.WindowContext.getScroll()};a.WindowContext.restoreScrollBarsPosition=function(){var b=a.WindowContext._scrollPosition;b&&a.WindowContext.scrollTo(b[0],b[1],a.WindowContext.getTopAccessWindow().document.body);a.WindowContext._scrollPosition=null};a.WindowContext.disableScrollBars=function(b){b=b||a.WindowContext.getTopAccessWindow();b=b.document;b.documentElement.style.overflow="hidden";b.documentElement.style.overflowX=
"hidden";b.documentElement.style.overflowY="hidden";b.body.scroll="no"};a.WindowContext.enableScrollBars=function(){var b=a.WindowContext.getTopAccessWindow().document;b.documentElement.style.overflow="auto";b.documentElement.style.overflowX="auto";b.documentElement.style.overflowY="auto";b.body.scroll="yes"};a.WindowContext.restoreScrollBarsState=function(){if(a.WindowContext.originalScrollBarsState){var b=a.WindowContext.getTopAccessWindow().document;b.documentElement.style.overflow=a.WindowContext.originalScrollBarsState.overflow;
b.documentElement.style.overflowX=a.WindowContext.originalScrollBarsState.overflowX;b.documentElement.style.overflowY=a.WindowContext.originalScrollBarsState.overflowY;b.body.scroll=a.WindowContext.originalScrollBarsState.scroll}};a.WindowContext.saveScrollBarsState=function(){if(!a.WindowContext.originalScrollBarsState){var b=a.WindowContext.getTopAccessWindow().document;a.WindowContext.originalScrollBarsState={overflow:b.documentElement.style.overflow,overflowY:b.documentElement.style.overflowY,
overflowX:b.documentElement.style.overflowX,scroll:b.body.scroll}}};a.RotationType.incremental="incremental";a.RotationType.cyclic="cyclic";a.RotationCriteria.addCriteria(a.RotationType.incremental,function(a,c,d){return d?0:a<c-1?a+1:c-1});a.RotationCriteria.addCriteria(a.RotationType.cyclic,function(a,c,d){return d?0:a<c-1?a+1:0});new function(){var b=new a.EventManager,c=!1,d,f,e=a.WindowContext.getTopAccessWindow(),g=new a.Event(e),h=!1,k=!1,l=a.Browser.FF?"DOMMouseScroll":"mousewheel",m=function(){h=
!0;g.add("resize",function(){b.fire("resize")});var e=a.WindowContext.getViewportSize(),f=a.WindowContext.getScrollSize();a.Period.setInterval(function(){var d=a.WindowContext.getViewportSize(),g=a.WindowContext.getScrollSize();if(a.Event.autoResize||!c||d[0]!=e[0]||d[1]!=e[1])b.fire("resize"),e=d;g[0]!=f[0]&&b.fire("pushX");g[1]!=f[1]&&b.fire("pushY");f=g},130)},n=function(){k=!0;g.add("scroll",function(){b.fire("scroll")})};a.Event.onPageLoad(function(){a.Period.setTimeout(function(){c=!0},2500)});
a.Event.onScroll=function(a){k||n();b.add("scroll",a)};a.Event.removeOnScroll=function(a){b.remove("scroll",a)};a.Event.forceScroll=function(){b.fire("scroll")};a.Event.onResize=function(a){b.add("resize",a);h||m()};a.Event.removeOnResize=function(a){b.remove("resize",a)};a.Event.forceResize=function(){b.fire("resize")};a.Event.onMouseWheel=function(b,c){a.Event.add(b,l,c)};a.Event.removeOnMouseWheel=function(b,c){a.Event.remove(b,l,c)};a.Event.onPushY=function(a){b.add("pushY",a)};a.Event.removeOnPushY=
function(a){b.remove("pushY",a)};a.Event.forcePushY=function(a){f=a;b.fire("pushY")};a.Event.getPushY=function(){return f||0};a.Event.onPushX=function(a){b.add("pushX",a)};a.Event.removeOnPushX=function(a){b.remove("pushX",a)};a.Event.forcePushX=function(a){d=a;b.fire("pushX")};a.Event.getPushX=function(){return d||0}};a.Page={getContentLeft:function(b){b=(a.WindowContext.getViewportSize()[0]-b)/2;return a.Event.getPushX()?b+a.Event.getPushX():Math.max(b,0)}};a.Format.AddOn={verticalScroll:function(b){var c=
a.WindowContext.getScroll()[1],d=function(){var f=a.WindowContext.getScroll()[1];c!=f&&(b.getPiece().callExternalInterface("jsVerticalScroll"),c=f)};b.addEvent("pieceReadyToRender",function(){a.Event.onScroll(d)});b.addEvent("formatCleared",function(){a.Event.removeOnScroll(d)})},mouseWheel:function(b){var c=function(c){c=c||window.event;if(b.getPiece().getNode()){var f=c.wheelDelta||-c.detail;if(a.Lang.isNumber(f)&&b.getPiece().callExternalInterface("jsMouseWheel",f))if(c.preventDefault)c.preventDefault();
else return!1}};b.addEvent("pieceReadyToRender",function(b){a.Event.onMouseWheel(b.getNode(),c)});b.addEvent("formatCleared",function(){a.Event.removeOnMouseWheel(b.getPiece().getNode(),c)})}};a.FlashPiece.preloader=function(b,c,d,f){b=a.Utility.convertToArray(b);var e=arguments.callee,g=b.shift();if(g)if(g in a.Piece.LoadedFiles&&!f)a.Lang.isFunction(c)&&c(g),e(b,c,d);else{if(a.Panel.getType(g)==a.PieceType.Flash){var h=new a.FlashPiece(g,!0,a.globalSettings.flashContainerConfig);h.setOnLoad(function(){h.remove();
a.Lang.isFunction(c)&&c(g);e(b,c,d)});h.insertFirst(document.body)}}else a.Lang.isFunction(d)&&d()};a.Utility.map(a.Platform.WLHotmail,{WLBounding:function(b){a.Platform.BaseBounding.apply(this,arguments);var c=this;this.init=function(c,f,e,g,h,k){a.Platform.WLHotmail.getAPIFromWindow(b).init({width:c,height:f,offsetLeft:Math.max(-h,0),offsetRight:Math.max(e+h-c,0),offsetTop:Math.max(-k,0),offsetBottom:Math.max(g+k-f,0)});a.Browser.FF&&(a.Platform.WLHotmail.getAPIFromWindow(b).expand(),a.Platform.WLHotmail.getAPIFromWindow(b).collapse())};
this.expand=function(){a.Platform.WLHotmail.getAPIFromWindow(b)&&a.Platform.WLHotmail.getAPIFromWindow(b).expand();c.eventPool.dispatch("expand")};this.collapse=function(){a.Platform.WLHotmail.getAPIFromWindow(b)&&a.Platform.WLHotmail.getAPIFromWindow(b).collapse();c.eventPool.dispatch("collapse")};c.fireEvent("ready",!0)},WLHeaderBounding:function(b){a.Platform.BaseBounding.apply(this,arguments);var c=this,d=a.Platform.WLHotmail.getAPIFromWindow(a.WindowContext.getNodeWindow(b.getNode())),f,e,g;
this.init=function(a,b){f=g=Math.max(a,1);e=b;d.initHeader({height:g,offsetBottom:Math.max(e-g,0)})};this.expand=function(){d.expandHeader();f=e;c.eventPool.dispatch("expand")};this.collapse=function(){d.collapseHeader();f=g;c.eventPool.dispatch("collapse")};this.resize=function(a){a!=f&&(a==g?this.collapse():a==e?this.expand():((a>f?d.expandHeader:d.collapseHeader)({bottom:Math.max(a-g,0)}),f=a))};c.fireEvent("ready",!0)}});a.Platform.SafeFrameBounding=function(b,c,d){a.Platform.BaseBounding.apply(this,
arguments);var f=b.$sf.ext,e={},g=!1,h,k="collapsed",l="collapsed",m=!0,n=this,q=function(){g&&l!=k&&("expanded"==k?f.collapse():f.expand(e))},p=function(b,c,f){var d=h.getNode(),g;try{d.style.position=f||"absolute",e.r>e.l?(d.style.left=a.Utility.parsePx(0),g=d.style.right="auto"):(d.style.left="auto",g=d.style.right=a.Utility.parsePx(0)),e.b>e.t?(d.style.top=a.Utility.parsePx(0),d.style.bottom="auto"):(d.style.top="auto",d.style.bottom=a.Utility.parsePx(0)),a.Browser.CH&&m&&(m=!1,setTimeout(function(){d.style.right=
"auto";setTimeout(function(){d.style.right=g},1)},2E3))}catch(k){}};this.init=function(a,b,c,f,d,g,k){h=k;k.setPosition=p;e={l:Math.max(-d,0),r:Math.max(c+d-a,0),t:Math.max(-g,0),b:Math.max(f+g-b,0)}};this.expand=function(){l="expanded";q()};this.collapse=function(){l="collapsed";q()};this.replacesClipping=!0;var r=function(a){if(g)switch(a){case "collapsed":k=a;n.eventPool.dispatch("collapse");q();break;case "expanded":k=a;n.eventPool.dispatch("expand");q();break;case "geom-update":n.eventPool.dispatch("geom-update");
break;case "failed":n.eventPool.dispatch("expansionFailed")}else g=!0,n.fireEvent("ready",!0)};f.register(c,d,r);g||void 0==f.status()||r(f.status())};a.Platform.MRAIDBounding=function(b){a.Platform.BaseBounding.apply(this,arguments);var c=b.mraid,d=this,f=function(a){switch(a){case "default":d.eventPool.dispatch("collapse");break;case "expanded":d.eventPool.dispatch("expand");break;case "hidden":d.eventPool.dispatch("close")}},e=function(){d.fireEvent("ready",!0);c.addEventListener("stateChange",
f)};this.expand=function(){c.expand&&c.expand()};this.collapse=function(){c.close&&c.close()};this.callAPIMethod=function(a,b){return c[a]?c[a].apply(c,b):null};"loading"===c.getState()?c.addEventListener("ready",e):e()};a.IncrementalExpandable=function(b,c,d){var f=!0,e,g,h=!1,k=function(a,c){e=a;d("trySet",c);c!=b.collapsed[0]||f||a.remove()};this.add=function(c,d){if("expanded"==d||"collapsed"==d){var n=c.getSelfParams(),q=b.expanded["expanded"==d?n.bindingExpansionLevel:0];c.incrementalExpandableRole=
d;c.setParams({expandDelay:-1,collapseDelay:100},!0);f=f&&n.bindingRemovePreviousPiece;if(q){var p;c.addEvent(a.AD_COMMAND.TRANSITION_EXPAND,function(){h||(p=!1,a.Period.setTimeout(function(){p||(c.transitioning=!0,k(c,q))},n.expandDelay))});c.addEvent(a.AD_COMMAND.TRANSITION_CANCEL,function(){p=!0;g&&(g.cancelSwitch(),g.remove(),g=null)})}"expanded"==d&&(c.addEvent(a.AD_COMMAND.TRANSITION_COLLAPSE,function(){k(c,b.collapsed[0])}),c.addEvent(a.AD_COMMAND.TRANSITION_COLLAPSE_BY_BUTTON,function(){h=
!0;a.Period.setTimeout(function(){h=!1},600);k(c,b.collapsed[0])}));e&&(c.keepPrevious=!f&&"collapsed"==e.incrementalExpandableRole,c.previousFormat=e,c.previousFormatRemoveDelay="expanded"==d?150:n.collapseDelay,g=c,g.addEvent("pieceReadyToRender",function(){g=null}),e=null)}};b.expanded.sort(function(a,b){var e=c.getParametersByBehaviorGroupName(a.behaviorGroupName,a.panelGroupName),f=c.getParametersByBehaviorGroupName(b.behaviorGroupName,b.panelGroupName);return e.bindingExpansionLevel-f.bindingExpansionLevel})};
a.ExpandDurationBinding=function(){this.expanded=function(a){a.addEvent("pieceReadyToRender",function(){a.eventTracker.startExpansion()});a.addEvent("formatCleared",function(){a.eventTracker&&a.eventTracker.stopExpansion()})}};a.IncrementalExpandableWithDuration=function(b,c,d){var f=new a.IncrementalExpandable(b,c,d),e=new a.ExpandDurationBinding;this.add=function(a,b){f.add(a,b);"collapsed"!=b&&e.expanded(a)}};a.FormatBinding.addBindings({incrementalExpandable:a.IncrementalExpandableWithDuration});
a.Easing={};a.Easing.Tick=function(){var b=this,c=new a.Timer,d,f=!1;c.start();this.setTick=function(e){c.reset();f=!0;d=a.Period.setInterval(function(){if(f)b.onTick(c.getElapsedTime())},e)};this.clearTick=function(){f=!1;a.Period.clearInterval(d)}};a.Easing.Functions={Identity:function(){return function(a){return a}},Hyperbola:function(b){b=isFinite(b)?b:7;var c;c=0<b?function(a){return-1/(a+1/b)+b}:0>b?function(a){return-1/(a-1+1/b)+b/(1-b)}:new a.Easing.Functions.Identity;var d=c(1);return function(a){return c(a)/
d}}};a.Easing.Player=function(){var b=this,c=null,d=!1,f,e=new a.EventManager(this),g=[],h,k,l=new a.Easing.Tick,m;l.onTick=function(a){m(a)};var n=function(){d&&(l.clearTick(),h=k||h,d=!1,null!==c&&e.fire("interrupt",!1,c))},q=function(a){if(0===g.length)e.fire("finish",!1,c),c=null,l.clearTick(),d=!1;else{var b=g.shift();r(a,h,b);h=b;0===b.timeSpan&&m(a)}},p=function(a){k=a;e.fire("enterframe",!1,a.values)},r=function(b,c,e){var d=c.values,g=e.values;a.Utility.foreach(d,function(a,b){isNaN(g[a])&&
(g[a]=b)});m=function(c){var h={};if(c<b+e.timeSpan){var k=f((c-b)/e.timeSpan);a.Utility.foreach(d,function(a,b){h[a]=b+k*(g[a]-b)});p({timeSpan:0,values:h})}else a.Utility.foreach(g,function(a,b){h[a]=b}),p({timeSpan:0,values:h}),q(b+e.timeSpan)}};this.initialize=function(b,e,d){h&&a.Utility.map(b,h.values,!0);g=[];f=d||f||new a.Easing.Functions.Hyperbola;c=e;h={timeSpan:0,values:b}};this.addKey=function(a,b){g.push({timeSpan:a,values:b})};this.gotoKey=function(a,c,e,d){b.initialize(h.values,e,d);
b.addKey(a,c);b.start()};this.start=function(){n();l.setTick(Math.ceil(1E3/this.fps));d=!0;q(0)};this.fps=100;this.isPlaying=function(){return d};this.stop=n};a.ElementFinder=new function(){var b=function(b){return b?a.Lang.isString(b)?b.split("|"):a.Lang.isArray(b)?b:[b]:[]};this.Finder=new function(){var c={document:a.WindowContext.getTopAccessWindow().document,type:["*"],browser:!0},d=function(c,e){var d=e.operator!=f.Or;a.Utility.foreach(e.data,function(a,g){g=b(g);for(var h=e.getter(c,a),k=!1,
l=0;l<g.length;l++)if(e.isEqual(h,g[l])){k=!0;break}if(e.operator==f.Or){if(k)return d=!0,!1}else if(!k)return d=!1});return d},h=function(b,c,e){var h=c.operator!=f.Or;a.Utility.foreach(c.collection,function(a,e){if(c.operator==f.Or){if(d(b,e))return h=!0,!1}else if(!d(b,e))return h=!1});h&&e.push(b)},k=this.select=function(b){var c=[];if(!b.browser||!b.document||!a.Utility.safeAccess(b.document,"getElementById"))return[];if(b.id){var e=b.document.getElementById(b.id);e&&h(e,b.filters,c)}else for(e=
0;e<b.type.length;e++)for(var d=b.document.getElementsByTagName(b.type[e]),f=0;f<d.length;f++)h(d[f],b.filters,c);return c},l=this.convertToSelector=function(b){a.Lang.isString(b)&&(b="{"==b.charAt(0)?a.Utility.fromJSON(b):{id:b});b=a.Utility.convertToArray(b);for(var d=0;d<b.length;d++)a.Utility.map(b[d],c,!0);return b},m=this.getFirstNode=function(a){a=l(a);a=n(a);for(var b=null,c=0;c<a.length;c++)a[c]&&(b=a[c]);return b},n=this.multiSelect=function(a){for(var b=[],c=0;c<a.length;c++)b=b.concat(k(a[c]));
return b};this.onAvailable=function(b,c,e){var d=m(b);if(d)c(d);else var f=a.Period.setInterval(function(){if(d=m(b))c(d),a.Period.clearInterval(f)},e||100)}};var c=function(b,c){var d=this.collection={},k=function(a){return"or"==(a+"").toLowerCase()||a==f.Or?f.Or:f.And};this.operator=k(c);a.Utility.foreach(b,function(a,b){f.Constructor[a]&&(d[a]=new f.Constructor[a](b.data,k(b.operator)))})};this.QueryBuilder=function(){var e={document:document,type:["*"],browser:!0},d={};this.setId=function(a){e.id=
a};this.setType=function(a){e.type=b(a)};this.setDocument=function(a){e.document=a};this.setFilterOperator=function(a){e.operator=a};this.setFilter=function(a,b){d[a]={data:b}};this.setBrowser=function(b){e.browser=a.Browser.match(b)};this.addFilter=function(a,b,c,e){d[a]||(d[a]={data:{}});d[a].data[b]=c;e&&(d[a].operator=e)};this.getQuery=function(){e.filters=new c(d);return e}};var d=function(a,b){var c=a[b]||a.getAttribute(b);if(!c&&"object"==(a.nodeName+"").toLowerCase()){var d=b.toLowerCase(),
f=a.innerHTML.toLowerCase().match(/<param.+?>/g);if(f)for(var m=new RegExp("<|param|\"|'|name|value|=|\\s|"+d+"|>","g"),n=f.length-1;0<=n;n--)if(-1!=f[n].indexOf(d)){c=f[n].replace(m,"");break}""===c&&(c=null)}return c},f=this.Filter={Or:1,And:2,defaultIsEqual:function(a,b){var c=!1;return c=a&&b&&b.test?b.test(a):(a+"").toLowerCase()==(b+"").toLowerCase()},Constructor:{attribute:function(a,b){this.operator=b;this.data=a;this.getter=d;this.isEqual=f.defaultIsEqual},style:function(b,c){this.operator=
c;this.data=b;this.getter=function(b,c){return a.Element.getStyle(b)[c]};this.isEqual=f.defaultIsEqual},exclude:function(a,b){this.operator=b;this.data=a;this.getter=function(a){return a};this.isEqual=function(a,b){for(var c=0;c<b.length;c++)if(a==b[c])return!1;return!0}}},addFilter:function(b,c){a.ElementFinder.Filter.Constructor[b]=c}}};a.Collision=new function(){var b=this.isOverlapped=function(a,b,f,e){var g=a[0],h=a[0]+b[0],k=a[1];a=a[1]+b[1];b=f[0];var l=f[0]+e[0],m=f[1];f=f[1]+e[1];return(g>=
b&&g<l||h>b&&h<=l||b>=g&&b<h||l>g&&l<=h)&&(k>=m&&k<f||a>m&&a<=f||m>=k&&m<a||f>k&&f<=a)};a.ElementFinder.Filter.addFilter("collision",function(c,d){this.operator=d;this.data=c;this.getter=function(b){return{node:b,position:a.Element.getPosition(b),size:[b.offsetWidth,b.offsetHeight]}};this.isEqual=function(a,c){return a.node==c.getNode()?!1:b(c.getPosition(),c.getSize(),a.position,a.size)}});a.ElementFinder.Filter.addFilter("visibleCollision",function(c,d){this.operator=d;this.data=c;this.getter=function(b){return{node:b,
position:a.Element.getPosition(b),size:[b.offsetWidth,b.offsetHeight]}};this.isEqual=function(c,d){if(c.node==d.getNode())return!1;var g=a.Element.parseClip(d.getNode()),h=d.getPosition();return b([h[0]+g.left,h[1]+g.top],[g.right-g.left,g.bottom-g.top],c.position,c.size)}})};a.NodeCollection=function(b){var c=[],d={},f=[],e=[],g=this,h=function(a,b){for(var c=[],d=a.length,e=b.length,f=!0,g=0;g<d;g++){for(var k=0;k<e;k++)if(a[g]===b[k]){f=!1;break}f?c.push(a[g]):f=!0}return c},k=function(b,c){a.Utility.foreach(c,
function(a,c){for(var d=0;d<b.length;d++)c.clear(b[d])})},l=function(b,c){a.Utility.foreach(c,function(a,c){for(var d=0;d<b.length;d++)c.applyMod(b[d])})};this.addNodes=function(a){c=c.concat(a);e=e.concat(a)};this.setNodes=function(b){f=h(c,b);e=h(b,c);c=a.Lang.isArray(b)?b:[b]};this.update=function(){k(f,d);l(e,d)};this.forEach=function(a){for(var b=0;b<c.length;b++)a(c[b])};this.addModifier=function(b,c){a.Lang.isObject(b)?a.Utility.foreach(b,function(a,b){g.addModifier(a,b)}):d[b]=c};this.removeModifier=
function(a){k(c,d[a]);delete d[a]};this.applyModifiers=function(){l(c,d)};this.clearModifiers=function(){k(c,d)};b&&this.setNodes(b)};a.NodeSelector=function(b,c,d){var f=new a.NodeCollection,e=[],g=b&&b.getNode()?b.getNode().ownerDocument:document,h=[];this.addSelectors=function(c,d){for(var f=0;f<c.length;f++){var h=c[f],q=d,p=new a.ElementFinder.QueryBuilder;p.setDocument(g);h.type&&p.setType(h.type);h.id&&p.setId(h.id);!1!==h.collision&&!0!==h.visibleCollision&&p.addFilter("collision","element",
b);!0===h.visibleCollision&&p.addFilter("visibleCollision","element",b);h.attribute&&p.setFilter("attribute",h.attribute);h.style&&p.setFilter("style",h.style);q&&p.setFilter("exclude",q);h.browser&&p.setBrowser(h.browser);e[e.length]=p.getQuery()}};this.update=function(){h=a.ElementFinder.Finder.multiSelect(e);f.setNodes(h)};this.getCollection=function(){return f};this.addSelectors(c,d)};a.StyleModifier=function(b,c){var d=new a.Map;this.applyMod=function(f){var e=a.Element.getStyle(f),g=!1;a.Utility.foreach(b,
function(a,b){e[a]!=b&&(g=!0)});if(g){if(!c){var h;d.has(f)||(h=new a.StyleState(f),h.save(b),d.set(f,h))}a.Element.setStyle(f,b)}};this.clear=function(b){if(!c){var e=d.get(b);e?(e.restore(),d.remove(b)):a.Element.setStyle(b,c)}}};a.HideControl=function(b,c,d){var f=new a.NodeSelector(b,c,d),e=f.getCollection();b=new a.StyleModifier({visibility:"hidden"});var g,h;e.addModifier("hide",b);this.hide=function(){f.update();e.update();!g&&h&&(g=a.Period.setInterval(function(){f.update();e.update()},h))};
this.setUpdateInterval=function(b){a.Lang.isNumber(b)&&0<=b&&(h=b)};this.clearUpdateInterval=function(){h=null};this.show=function(){a.Period.clearInterval(g);e.clearModifiers();e.setNodes([])}};a.ZIndexModifier=function(b,c,d){this.bringToFront=function(){a.Element.setStyle(b.getNode(),{zIndex:c})};this.sendToBack=function(){a.Element.setStyle(b.getNode(),{zIndex:d})};c=a.Lang.isNumber(c)?c:5E3;d=a.Lang.isNumber(d)?d:1};a.ClipModifier=function(b,c,d){var f=this,e;this.setClip=function(a,b,c,d){e=
"rect("+b+"px, "+(a+c)+"px, "+(b+d)+"px, "+a+"px)"};this.clip=function(){e?b.setClip(e):f.unclip()};this.customClip=function(a,c,d,e){b.setClip("rect("+c+"px, "+(a+d)+"px, "+(c+e)+"px, "+a+"px)")};this.unclip=function(){b.setClip("rect(auto, auto, auto, auto)")};this.setClipToElement=function(c,d,e){c=a.Element.instance(c).getPosition();var f=b.getPosition();this.setClip(c[0]-f[0],c[1]-f[1],d,e)};this.setClipCorner=function(b,f,k,l){k=isFinite(k)?k:c;l=isFinite(l)?l:d;var m=b==a.Alignment.Justified?
"auto":b==a.Alignment.Right?c:k,n=f==a.Alignment.Justified?"auto":f==a.Alignment.Bottom?d:l;b=b==a.Alignment.Justified?"auto":b==a.Alignment.Right?c-k:0;e="rect("+a.Utility.parsePx(f==a.Alignment.Justified?"auto":f==a.Alignment.Bottom?d-l:0)+", "+a.Utility.parsePx(m)+", "+a.Utility.parsePx(n)+", "+a.Utility.parsePx(b)+")"};a.Browser.IE&&7>a.Browser.version&&a.LegacyClipModifier.apply(this,arguments)};a.LegacyClipModifier=function(b){var c=this,d=a.Utility.map({},c),f;this.clip=function(){d.clip();
f=c.clip};this.unclip=function(){var a=b.getSize();b.setClip("rect(0px, "+a[0]+"px, "+a[1]+"px,  0px)");f=c.unclip};a.Event.onResize(function(){f&&f()})};var A=function(a,c,d){return isFinite(c)&&a<c?c:isFinite(d)&&a>d?d:a};a.SideFilter=function(b,c,d,f){f=f||0;this.setWidth=function(c){b=a.Lang.isNumber(c)?c:b};this.get=function(e,g){var h=a.Page.getContentLeft(c),k,l;switch(d){case a.Alignment.Left:k=h-b+f;break;case a.Alignment.Right:l=h+c-f}return{x:A(e,l,k),y:g}}};a.UnscrollFilter=function(b,
c,d,f){this.setHeight=function(b){c=a.Lang.isNumber(b)?b:c};this.get=function(e,g){var h=a.WindowContext.getScrollSize(),k=Math.max(h[0]-b,0),h=Math.max(h[1]-c,0);return{x:d?A(e,0,k):e,y:f?A(g,0,h):g}}};a.AlignmentFilter=function(b,c,d,f,e,g,h){h=h||0;var k=function(b,c,d,f){var e;switch(b){case a.Alignment.Right:case a.Alignment.Bottom:e=(f?c:c-d)+h;break;case a.Alignment.Center:case a.Alignment.Justified:e=(c-d)/2;break;case a.Alignment.Left:case a.Alignment.Top:e=(f?-d:0)-h}return e};this.setSize=
function(d,f){b=a.Lang.isNumber(d)?d:b;c=a.Lang.isNumber(f)?f:c};this.getRelative=function(){var a=this.getAnchorSize();return{x:k(d,a.x,b,e),y:k(f,a.y,c,g)}};this.get=function(a,b){var c=this.getBase(),e=this.getRelative();d&&(a=c.x+e.x);f&&(b=c.y+e.y);return{x:a,y:b}}};a.AnchorFilter=function(b,c,d,f,e,g,h,k){a.AlignmentFilter.call(this,b,c,d,f,e,g);this.getBase=function(){var b=a.Element.getPosition(h,k);return{x:b[0],y:b[1]}};this.getAnchorSize=function(){var b=a.Element.instance(h).getSize();
return{x:b[0],y:b[1]}}};a.WindowFilter=function(b,c,d,f,e,g,h){a.AlignmentFilter.call(this,b,c,d,f,e,g,h);this.getBase=function(){return{x:a.Event.getPushX(),y:0}};this.getAnchorSize=function(){var b=a.WindowContext.getViewportSize();return{x:b[0],y:b[1]}}};a.ContentFilter=function(b,c,d,f,e,g,h,k,l){a.AlignmentFilter.call(this,b,c,d,f,e,g);this.getBase=function(){return{x:a.Page.getContentLeft(h),y:l}};this.getAnchorSize=function(){return{x:h,y:k}}};a.PositionFilter=function(b,c,d,f,e,g){a.AlignmentFilter.call(this,
b,c,d,f);this.getAnchorSize=function(){return{x:e,y:g}};this.get=function(a,b){var c=this.getRelative();d&&(a+=c.x);f&&(b+=c.y);return{x:a,y:b}}};a.SplitScreenFilter=function(a,c,d){this.get=function(f,e){var g=screen.availHeight-d.screenTop-c,h=-d.screenTop;return{x:A(f,-d.screenLeft,(d.screenLeft<screen.availWidth?screen.availWidth:2*screen.availWidth)-d.screenLeft-a),y:A(e,h,g)}}};a.ScrollFilter=function(b,c,d){var f,e,g=d?-1:1;this.get=function(d,e){var l={x:d,y:e};if(b||c)f=a.WindowContext.getScroll(),
b&&(l.x+=f[0]*g),c&&(l.y+=f[1]*g);return l};this.generateScroll=function(a,d,g,m){e&&e.setPosition(b?a+g+f[0]-1:a,c?d+m+f[1]-1:d)};this.clear=function(){e&&e.remove()};d&&(b||c)&&(e=new a.Element(a.WindowContext.getTopAccessWindow().document.body,"div","scrollfilter"),e.setStyle({width:"1px",height:"1px",backgroundColor:"transparent"}),e.insertLast())};a.BackgroundStyleFilter=function(a,c){this.get=function(d,f){a&&(d=a);c&&(f=c);return{x:d,y:f}}};a.OffsetFilter=function(b,c){var d=0,f=0,e=function(b,
c,d){switch(b){case a.Alignment.Right:case a.Alignment.Bottom:c+=d;break;case a.Alignment.Left:case a.Alignment.Top:c-=d}return c};this.setX=function(a){d=a};this.setY=function(a){f=a};this.get=function(a,h){return{x:e(b,a,d),y:e(c,h,f)}}};a.DelayedEvent=function(b,c){var d;this.fire=function(){0<c?(a.Period.clearTimeout(d),d=a.Period.setTimeout(b,c)):b()}};a.PositionModifier=function(b,c,d){var f,e,g,h,k,l,m,n,q,p=0,r=0,u=0,t=0,z=new a.EventManager(this),x,H,E=new a.Easing.Player,D,I,F={},B={},v=
function(){var b={x:0,y:0};f&&!B.anchor&&(b=f.get(b.x,b.y));g&&!B.content&&(b=g.get(b.x,b.y));e&&!B.window&&(b=e.get(b.x,b.y));h&&!B.dock&&(b=h.get(b.x,b.y));k&&!B.scroll&&(b=k.get(b.x,b.y));b.x+=p;b.y+=r;l&&!B.unscroll&&(b=l.get(b.x,b.y));m&&!B.custom&&(b=m.get(b.x,b.y));a.Utility.foreach(F,function(a,c){b=c.get(b.x,b.y)});return b},w=function(a,b,c,d){d&&d.setPosition(a,b,c)},C=function(){var e=v();z.fire("beforeReposition",!1,e.x,e.y);e=v();b&&(a.Browser.IE&&9==a.Browser.version&&9==a.Browser.mode&&
(e.x=Math.round(e.x),e.y=Math.round(e.y)),I(e.x,e.y,D,b));k&&k.generateScroll(e.x,e.y,c,d);z.fire("reposition",!1,e.x,e.y)},A=function(){if(x){var a=v();E.gotoKey(H,{left:a.x,top:a.y})}else C()},y=function(){a.Event.removeOnResize(n);a.Event.removeOnScroll(q);a.Event.removeOnPushX(C);a.Event.removeOnPushY(C)};this.setDelay=function(b,c){u=c||u;t=b||t;n=(new a.DelayedEvent(C,t)).fire;q=(new a.DelayedEvent(A,u)).fire};this.setDelay(!1,!1);this.setAnchor=function(e,g,h,k,p){var l=b?a.WindowContext.getNodeWindow(b.getNode()):
null;f=new a.AnchorFilter(c,d,g,h,k,p,e,l)};this.setRepositionFunction=function(a){I=a||w};this.setRepositionFunction();this.getRelative=function(){var a={x:0,y:0};f&&(a=f.getRelative());return[a.x+p,a.y+r]};this.setAlignment=function(b,f,g,k,p,l,n){e=new a.WindowFilter(c,d,b,f,g,k,l);p&&(h=new a.SideFilter(c,p,b,n))};this.setPageDocking=function(b,e,f,k,p,l,n,m){g=new a.ContentFilter(c,d,k,p,l,n,b,e,f);b&&(h=new a.SideFilter(c,b,k,m))};this.setScroll=function(e,f,g,h){var p=(e||f)&&!g&&a.Browser.support.fixed();
p&&(D=a.CSS_POSITION.FIXED);var n=!!e^p,m=!!f^p;k&&k.clear();k=n||m?new a.ScrollFilter(n,m,p):null;l=!e&&!f||p?null:new a.UnscrollFilter(c,d,e,f);if(x=g)H=h,E.addEvent("enterframe",function(a){b.setPosition(a.left,a.top);z.fire("reposition",!1,a.left,a.top)}),E.initialize({height:v().y})};this.getPositionType=function(){return D};this.setOffset=function(a,b){isFinite(a)&&(p=a);isFinite(b)&&(r=b)};this.setSize=function(b,p){var n,q=[f,g,e,k,h,l,m];c=a.Lang.isNumber(b)?b:c;d=a.Lang.isNumber(p)?p:d;
for(var x=0;x<q.length;x++)if(n=q[x])n.setSize&&n.setSize(c,d),n.setWidth&&n.setWidth(c),n.setHeight&&n.setHeight(d)};this.setCustomFilter=function(a){m=a};this.addCustomFilter=function(a,b){F[a]=b};this.setFilterState=function(a,b){for(var c=0;c<a.length;c++)B[a[c]]=b};this.removeCustomFilter=function(a){delete F[a]};this.setLeft=function(a){p=a};this.setTop=function(a){r=a};this.apply=function(){y();if(f||e||g||h)a.Event.onResize(n),a.Event.onPushX(C),a.Event.onPushY(C);if(k)a.Event.onScroll(q);
this.render()};this.clear=function(){y();k&&k.clear()};this.unsetScroll=function(){a.Event.removeOnScroll(q);l=D=null;k&&(k.clear(),k=null)};this.render=function(){C()};this.getValue=function(){var a=v();return[a.x,a.y]}};a.SizeModifier=function(b){var c=this,d=new a.EventManager(this),f=b.getSize(),e=f[0]/f[1],g=!1,h=!1,k,l,m=function(){return a.WindowContext.getViewportSize(a.WindowContext.getNodeWindow(b.getNode()))},n=function(){var a={value:null,updateOnResize:!1},a=[k?k.rule.call(c,m,e,0,k.argument):
a,l?l.rule.call(c,m,e,1,l.argument):a];b.setSize(a[0].value,a[1].value);d.fire("resize",!1,a[0].value,a[1].value);return a[0].updateOnResize||a[1].updateOnResize};this.enableOnScroll=function(){h||(a.Event.onScroll(n),h=!0)};this.setWidthRule=function(a,b){k={rule:a,argument:b}};this.setHeightRule=function(a,b){l={rule:a,argument:b}};this.apply=function(){this.clear();n()&&!g&&(a.Event.onResize(n),g=!0)};this.clear=function(){a.Event.removeOnResize(n);a.Event.removeOnScroll(n);g=!1}};a.SizeModifier.PredefinedRuleSet=
{bodyPercentageProportional:function(a,c,d,f){a=a();return{value:a[0]/a[1]>c?f/100*a[1]*(0===d?c:1):f/100*a[0]/(1==d?c:1),updateOnResize:!0}},bodyPercentage:function(a,c,d,f){return{value:a()[d]*f/100,updateOnResize:!0}},absolutePixel:function(a,c,d,f){return{value:f,updateOnResize:!1}},clientAreaHeight:function(b,c,d,f){b=a.WindowContext.getViewportSize()[1];return{value:b>f?b-f:0,updateOnResize:!0}}};a.ScrollSlider=function(){var b,c=a.WindowContext.getTopAccessWindow().document;this.slideTo=function(d){a.WindowContext.getViewportSize()[0]-
d>a.WindowContext.getScrollSize()[0]&&(b||(b=c.createElement("div"),b.id="Expander",b.style.width="100px",b.style.height="1px",c.body.appendChild(b)),b.style.width=a.Utility.parsePx(a.WindowContext.getViewportSize()[0]-d));a.WindowContext.scrollTo(-d,null,c.body)};this.restore=function(){b&&c.body.removeChild(b)}};a.MarginSlider=function(b){var c=this,d,f,e,g=function(){return a.Element.isBody(b)?a.WindowContext.getViewportSize()[0]:b.parentNode.offsetWidth};this.slideTo=function(h){if(h){if(!d){f=
g();e=a.Element.getMarginLeft(b);d=new a.StyleState(b);var k={marginLeft:b.style.marginLeft,width:a.Utility.parsePx(b.offsetWidth)};a.Element.isBody(b)&&a.Browser.IE&&(8>a.Browser.version||b.ownerDocument&&b.ownerDocument.documentMode&&8>b.ownerDocument.documentMode)&&(k.position="relative");d.saveAndApply(k)}a.Element.setStyle(b,"marginLeft",a.Utility.parsePx(h+e+(g()-f)/2))}else c.restore();a.Event.forcePushX(h)};this.restore=function(){null!==d&&(d.restore(),d=null)}};a.SliderFactory={create:function(b,
c){return b!=a.Alignment.Right||c||a.Browser.FF?new a.MarginSlider(c||a.WindowContext.getTopAccessWindow().document.body):new a.ScrollSlider}};var J=function(a){a="#"==a.charAt(0)?a.substring(1,7):a;return{r:parseInt(a.substring(0,2),16),g:parseInt(a.substring(2,4),16),b:parseInt(a.substring(4,6),16)}},G=function(a){a=parseInt(a,10).toString(16);return 1==a.length?"0"+a:a},K=function(a){return"#"+G(a.r)+G(a.g)+G(a.b)};a.Blind=function(){var b=this,c,d={},f,e=!0,g,h=0,k=70,l=new a.Easing.Player,m=
new a.Easing.Player,n=[{type:"select",browser:{name:"IE",maxVer:6}},{type:"object|embed",attribute:{wmode:"window|null"}},{type:"object",attribute:{windowless:"false"}}];this.create=function(e,g,h,l,m){var z=a.WindowContext.getTopAccessWindow().document.body,x=a.WindowContext.getScrollSize();c=new a.Element(z,"div");m&&c.setPosition(m[0],m[1]);f=new a.HideControl(c,n,a.globalSettings.omissions);d={zIndex:e,width:a.Utility.parsePx(l[0]||x[0]),height:a.Utility.parsePx(l[1]||x[1]),position:"absolute",
left:m[0]||0,top:m[1]||0};if(a.Lang.isNumber(h)||a.Lang.isString(h))this.setOpacity(h),k=h;this.setStyle(d,!1);f.hide();c.insertLast();b.setColor(g)};this.setStyle=function(b,e){a.Utility.map(d,b,e);c&&c.setStyle(d)};this.addEvent=function(b,d){a.Event.add(c.getNode(),b,d)};this.removeEvent=function(b,d){a.Event.remove(c.getNode(),b,d)};this.remove=function(){f.show();c.remove()};this.hide=function(){e=!1;b.setStyle({visibility:"hidden"},!1)};this.show=function(){e=!0;b.setStyle({visibility:"visible"},
!1)};this.setColor=function(a){b.setStyle({backgroundColor:a},!1);g=a};this.setOpacity=function(a){h=parseInt(a,10);b.setStyle({opacity:h/100,filter:"alpha(opacity="+h+")"},!1)};this.fadeOpacity=function(b,c,d){d=d||750;m.stop();m.initialize({opacity:b},null,new a.Easing.Functions.Hyperbola(4));m.gotoKey(d,{opacity:c})};this.fadeColor=function(b,c,d){d=d||750;l.stop();l.initialize(b,null,new a.Easing.Functions.Hyperbola(4));l.gotoKey(d,c)};this.clear=function(a){l.stop();b.fadeOpacity(h,0,a);e=!1};
this.showBlind=function(a){b.show();b.fadeOpacity(h,k,a)};this.doTransition=function(a,c){e?b.fadeColor(J(g),J(a),c):(b.setColor(a),b.showBlind(c))};m.addEvent("enterframe",function(a){b.setOpacity(parseInt(a.opacity,10));0===h&&!0!==e&&b.hide()});l.addEvent("enterframe",function(a){b.setColor(K(a))})};a.LateralAreaButton=function(b,c,d){d=d||a.WindowContext.getTopAccessWindow().document;a.LateralAreaButton.inheritExclusive(this,d,"div");var f=0,e=new a.PositionModifier(this,0,0),g=new a.SizeModifier(this),
h=function(){g.setHeightRule(function(b){b=b();var c=a.WindowContext.getScrollSize()[1];b=f<=c?c-2:b[1]+a.WindowContext.getScroll()[1];f=c;return{value:b,updateOnResize:!0}});g.setWidthRule(function(a){a=a();return{value:a[0]>b?(a[0]-b)/2:0,updateOnResize:!0}});g.apply();e.apply()};this.setStyle({display:"block",backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90HEw0mMQggkX0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAAAAJiS0dEAP+Hj8y/AAAAC0lEQVQIHWNgYAAAAAMAAU9ICq8AAAAASUVORK5CYII=)",
backgroundRepeat:"repeat",position:"absolute",cursor:"pointer",zIndex:c,top:"0px"});this.dockLeft=function(){e.setAlignment(a.Alignment.Left,null,0,0);h()};this.dockRight=function(){e.setPageDocking(b,0,0,a.Alignment.Right,null,!0,!0);h()};var k=this;a.Event.add(this.getNode(),"click",function(){k.fireEvent("click")})};y(a.LateralAreaButton,a.Element);a.BackgroundState=new function(){var b=null;this.getInstance=function(){return b||(b=new a.StyleState(a.WindowContext.getTopAccessWindow().document.body))}};
a.ImagePreloader=function(){var b=new a.EventManager(this),c=[],d={},f=0,e=function(c){var d=new Image,e=a.Period.setTimeout(function(){b.fire(c,!0,c);b.fire("timeout",!0,c)},12E3);d.onload=function(){a.Period.clearTimeout(e);b.fire(c,!0,c)};d.onerror=function(){a.Period.clearTimeout(e);b.fire(c,!0,c);b.fire("error",!0,c)};d.src=c},g=function(){f--;0>=f&&(b.fire("loaded"),b.fire("firstLoad",!0))};this.addSource=function(a){c.push(a)};this.load=function(){f+=c.length;for(var a=0;a<c.length;a++)d[c[a]]||
e(c[a]),d[c[a]]=1,b.add(c[a],g);c=[]}};a.BackgroundClick=function(b,c,d){var f=new a.LateralAreaButton(c,d),e=new a.LateralAreaButton(c,d);this.setClick=function(a){f.addEvent("click",a);e.addEvent("click",a)};this.remove=function(){f.remove();e.remove()};f.dockLeft();e.dockRight();f.insertLast(b);e.insertLast(b)};a.BackgroundFlashFrame=function(b,c){var d=c.body,f=function(b){b=new a.Element(b,"div");b.setStyle({position:"absolute",top:"0px",left:"0px",overflow:"hidden",textAlign:"left"});var c=
new a.SizeModifier(b);c.enableOnScroll();var e=[0,0],f=function(b,c,d){b=b();c=a.WindowContext.getScrollSize()[d];b=e[d]<=c?c-2:b[d]+a.WindowContext.getScroll()[d];e[d]=c;return{value:b,updateOnResize:!0}};c.setWidthRule(f);c.setHeightRule(f);c.apply();b.insertFirst(d);return b}(d.ownerDocument),e=new a.ZIndexModifier(f,1E7,-1);e.sendToBack();a.BackgroundState.getInstance().save(b.flashStyle);a.Element.setStyle(d,b.flashStyle);this.remove=function(){f.remove();a.BackgroundState.getInstance().restore()};
this.sendToBack=e.sendToBack;this.bringToFront=e.bringToFront;this.getNode=f.getNode};a.BackgroundImage=function(b,c,d,f){a.Piece.apply(this,arguments);var e=c.url,g=new a.ImagePreloader,h=d.ownerDocument.body;g.addEvent("error",function(){});g.addEvent("timeout",function(){});var k=new a.EventManager(this),l=function(){f.imageStyle.backgroundImage="url("+e+")";f.fixed&&(f.imageStyle.backgroundAttachment="fixed");a.Element.setStyle(h,f.imageStyle);a.Period.setTimeout(function(){k.fire("load",!0)},
0)};g.addEvent("loaded",l);this.insertFirst=function(){a.BackgroundState.getInstance().save(f.imageStyle);f.preload?(g.addSource(e),g.load()):l()};this.remove=function(){a.BackgroundState.getInstance().restore()};this.setOnLoad=function(a){k.add("load",a)};this.getNode=function(){return h};this.getSize=this.setSize=this.render=new a.Empty;this.setPosition=function(b,c){a.Element.setStyle(h,{backgroundPosition:a.Utility.parsePx(b)+" "+a.Utility.parsePx(c),backgroundPositionX:a.Utility.parsePx(b),backgroundPositionY:a.Utility.parsePx(c)})}};
a.BackgroundPieceFactory=function(b){var c=b.std;this.createFlashPiece=function(c,f){var e=new a.FlashPiece(f.url,!1,a.globalSettings.flashContainerConfig);e.enableCommandFallback(a.Browser.IE&&11==a.Browser.mode);e.setAdVars(b.adVars);e.disabledReports=["mouseTracker","viewableImpression"];return e};this.createImagePiece=function(d,f){var e=new a.BackgroundImage(c,f,d,b.selfParams);e.disabledReports=["mouseTracker","viewableImpression"];return e}};a.Background=function(b){a.Format.apply(this,arguments);
this.createPieceFactory=function(){return new a.BackgroundPieceFactory(b)};var c=this,d=c.getSelfParams(),f=b.creatives.getLayout("main"),e=b.std,g,h,k,l=b.tryGetPanel("main"),m=l.type;this.previousFormat=a.Background.Current;a.Background.Current=this;this.setParams({urlClick:null,preload:!1,imageStyle:{backgroundImage:"none",backgroundRepeat:"no-repeat",backgroundPosition:"center top",backgroundPositionX:"center",backgroundPositionY:"top"},flashStyle:{backgroundImage:"none",backgroundRepeat:"no-repeat"}},
!0);d.bgColor&&(a.Utility.map(d.imageStyle,{backgroundColor:d.bgColor}),a.Utility.map(d.flashStyle,{backgroundColor:d.bgColor}));this.init=function(){var n=b.position.getOuterNode();m==a.PieceType.Flash&&(g=new a.BackgroundFlashFrame(d,n.ownerDocument),n=g.getNode());c.setPiece(l,n,{pieceSettings:function(d){m==a.PieceType.Image&&(c.remove=function(b){b&&b!=a.PieceType.Flash||(c.fireEvent("formatCleared",!0),d.remove())});f=b.creatives.getLayout("main");d.setSize(f.width,f.height);l.type==a.PieceType.Flash&&
d.setPosition(-1E4,-1E4)},pieceCreated:function(c){var e=a.Utility.copy(d),f=e.hPosition,g=e.vPosition;a.Lang.isString(f)?(e.hAnchorEnabled="dock"==f.split("-")[0],e.hAlignEnabled="align"==f.split("-")[0],e.hAlign=f.split("-")[1]):e.hAnchorEnabled=e.hAlignEnabled=!1;a.Lang.isString(g)?(e.vAnchorEnabled="dock"==g.split("-")[0],e.vAlignEnabled="align"==g.split("-")[0],e.vAlign=g.split("-")[1]):e.vAnchorEnabled=e.vAlignEnabled=!1;k=new a.PieceControl(c,b);k.setAnchoredPosition(e,e.hAnchorEnabled,e.vAnchorEnabled);
l.type==a.PieceType.Flash?(e.scrollY=e.fixed,k.setScroll(e),k.setAlignment(e,0,e.hAlignEnabled,e.vAlignEnabled)):k.setCustomFilter(new a.BackgroundStyleFilter(e.hAlignEnabled&&e.hAlign,e.vAlignEnabled&&e.vAlign))},pieceReadyToRender:function(b){var c="",f="",g=d.clickCommands||"",l=d.commandArguments||"";d.customClickId&&(c=decodeURIComponent(eval("("+e.eventValues+")")[d.customClickId]));f=d.bgUseDefaultClickURL?e.getURLClick():c||d.urlClick;k.render();if(f||g)h=new a.BackgroundClick(n.ownerDocument.body,
e.getPageContentWidth(),d.topZ-1),h.setClick(function(){f&&(open(a.Utility.replaceRandom(f)),b.fireEvent(a.AD_COMMAND.REPORT_EVENT,!1,{args:{Type:a.EventType.Click.name,Identifier:d.customClickId||null}}));g&&a.Piece.sendCommandCollection(b,{cmd:g,arg:l})})}})};this.addEvent("bringToFront",function(){g&&g.bringToFront()});this.addEvent("sendToBack",function(){g&&g.sendToBack()});this.addEvent("formatCleared",function(){h&&h.remove();g&&g.remove()})};a.Background.Current=null;a.Sequence=function(b,
c,d,f){var e,g=function(b){a.FlashPiece.preloader(c.getCurrentUrl(b.behaviorGroupName||b.behaviorGroup.name,b.panelGroupName))},h=function(b,c){if(b.autoInit)d.reset(b,c);else{if(b.preloadOnPageLoad)a.Event.onPageLoad(function(){g(b)});else b.preloadPiece&&g(b);c()}},k=function(a){h(a,function(b){b?(b=b.getPiece())&&b.setOnLoad?!1===a.waitForLoad?m():b.setOnLoad(function(){m()}):m():m()})},l=function(b){a.TagManager.Instance.addEvent(b.positionName,function(){h(b)});m()},m=function(){if(0!==e.length){var c=
e.shift();if(b.canShowRichMedia()||c.sequenceBackup){if(c.freqCap&&a.FrequencyCap.Instance&&a.FrequencyCap.Instance.shouldCap()){if(!c.autoInit||!c.preloadPiece&&!c.preloadOnPageLoad){m();return}c.autoInit=!1}c.waitPosition&&!f.contains(c.positionName)?l(c):k(c)}else m()}};this.start=function(a){e=a;m()}};a.ExpandMethod={Clip:"clip",Size:"size"};a.ExpandControl=function(){var b={},c={},d=!1,f="collapse",e={method:"clip"},g={get:function(a,b){return{x:a,y:b}}},h=function(c,d){d?(b.position.setFilterState(["anchor",
"window"],!0),a.WindowContext.saveScrollBarsPosition(),-1==navigator.userAgent.indexOf("IEMobile/10")&&(a.WindowContext.saveScrollBarsState(),a.WindowContext.disableScrollBars())):(b.position.setFilterState(["anchor","window"],!1),-1==navigator.userAgent.indexOf("IEMobile/10")&&a.WindowContext.restoreScrollBarsState(),a.WindowContext.restoreScrollBarsPosition());"undefined"!=typeof c&&(c?(b.position.setScroll(!0,!0),b.position.apply()):b.position.unsetScroll())};this.setDefaultAction=function(a){f=
a};this.setProperties=function(b){a.Utility.map(e,b)};this.addModifier=function(a,c){c&&(b[a]=c)};this.setSizes=function(b){a.Utility.map(c,b)};this.expand=function(k){if(d||!f){b.zIndex&&b.zIndex.bringToFront();k=k||{};if("size"==(k.method||e.method)){var l=a.SizeModifier.PredefinedRuleSet["percentage"==k.heightRule?"bodyPercentage":"absolutePixel"];b.size.setWidthRule(a.SizeModifier.PredefinedRuleSet["percentage"==k.widthRule?"bodyPercentage":"absolutePixel"],k.width||c.maxWidth);b.size.setHeightRule(l,
k.height||c.maxHeight);b.size.apply();h(k.isFixedPositioning,k.isWindowCoordinates);g.get=function(a,b){return{x:a+(k.left||0),y:b+(k.top||0)}};b.position.render()}else b.clip&&(k.width||k.height?b.clip.customClip(k.left||0,k.top||0,k.width,k.height):b.clip.unclip());b.hiding&&b.hiding.hide()}else f="expand",k&&(e=k)};this.collapse=function(k){if(d||!f){k=k||{};if("size"==(k.method||e.method)){h(k.isFixedPositioning,k.isWindowCoordinates);g.get=function(a,b){return{x:a+(k.left||0),y:b+(k.top||0)}};
var l=a.SizeModifier.PredefinedRuleSet["percentage"==k.heightRule?"bodyPercentage":"absolutePixel"];b.size.setWidthRule(a.SizeModifier.PredefinedRuleSet["percentage"==k.widthRule?"bodyPercentage":"absolutePixel"],k.width||c.minWidth);b.size.setHeightRule(l,k.height||c.minHeight);b.size.apply();b.position.render()}else b.clip&&(k.width||k.height?b.clip.customClip(k.left||0,k.top||0,k.width,k.height):b.clip.clip());b.zIndex&&b.zIndex.sendToBack();b.hiding&&b.hiding.show()}else f="collapse",k&&(e=k)};
this.init=function(){d=!0;b.position.addCustomFilter("size-expansion",g);b.size.addEvent("resize",function(a,c){b.position.setSize(a,c)});if(this[f])this[f](e)};this.clear=function(){b.size.clear();a.WindowContext.restoreScrollBarsState()}};a.PieceControl=function(b,c){var d=this,f=new a.EventManager(this),e,g,h,k,l=c.positionLayout,m=c.creatives.getLayout("main"),n=b.getNode(),q,p,r=function(){if(c.position.wasFired("layoutReady")||a.Event.isPageLoaded())return!0;if(e){var b=c.position.getAnchor(),
b=a.Element.getPosition(b),d=e.getValue();return 0<b[0]&&-150<b[1]+d[1]}return!0},u=function(b,c){var d=a.WindowContext.getNodeWindow(c.getNode());return a.WindowContext.getViewportSize(d)[1]-b-c.getSize()[1]};q=function(b,c,d,e){d==a.CSS_POSITION.FIXED&&(e.setStyle({bottom:a.Utility.parsePx(u(c,e)),top:"auto"}),c=null);e.setPosition(b,c,d)};var t=function(c,d,g){e||(e=new a.PositionModifier(b,m.width,m.height),e.setRepositionFunction(q),e.addEvent("beforeReposition",function(){f.fire("beforeReposition",
!1,arguments)}));if(c)return{h:!1===d?null:c.hAlign,v:!1===g?null:c.vAlign}},z=function(){d.clear()};this.setRepositionFunction=function(a){q=a;e&&e.setRepositionFunction(q)};this.setAnchoredPosition=function(a,b,d,f){b=t(a,b,d);e.setAnchor(f||c.position.getAnchor(),b.h,b.v,a.outX,a.outY);e.setOffset(m.offsetLeft,m.offsetTop)};this.setAlignment=function(a,b,c,d,f){c=t(a,c,d);e.setAlignment(c.h,c.v,a.outX,a.outY,b,null,f);e.setOffset(m.offsetLeft,m.offsetTop)};this.setPageDocking=function(a,b,d,f){b=
t(a,b,d);e.setPageDocking(c.std.getPageContentWidth(),a.pageHeight||0,a.pageTop||0,b.h,b.v,a.outX,a.outY,f);e.setOffset(m.offsetLeft,m.offsetTop)};this.setClipToAnchor=function(){g=new a.ClipModifier(b);p&&p.addModifier("clip",g);var c=e.getRelative();g.setClip(-c[0],-c[1],l.width,l.height)};this.setClipToCorner=function(c){g=new a.ClipModifier(b,m.width,m.height);p&&p.addModifier("clip",g);g.setClipCorner(c.hAlign,c.vAlign,c.clipX,c.clipY)};this.setCustomFilter=function(a){t();e.setCustomFilter(a)};
this.setExpandControl=function(c){t();c=c||{};p||(p=new a.ExpandControl,p.setSizes({minWidth:c.clipX||l.width,minHeight:c.clipY||l.height,maxWidth:m.width,maxHeight:m.height}),p.addModifier("position",e),p.addModifier("size",new a.SizeModifier(b)),p.addModifier("zIndex",h),p.addModifier("hiding",k))};this.setDelay=function(a){e.setDelay(0,a.scrollDelay)};this.setScroll=function(a){e.setScroll(a.scrollX,a.scrollY,a.easingScroll,a.easingDuration)};this.setZIndex=function(c){h=new a.ZIndexModifier(b,
c.topZ,c.defaultZ);p&&p.addModifier("zIndex",h)};this.sendToBack=function(){h&&h.sendToBack()};this.setHiding=function(){k=new a.HideControl(b,c.getElementSelectors(),a.globalSettings.omissions);p&&p.addModifier("hiding",k)};this.setHidingUpdateInterval=function(a){k.setUpdateInterval(a)};this.setDefaultAction=function(a){p&&p.setDefaultAction(a)};this.setProperties=function(a){p&&p.setProperties(a)};this.expand=function(a){p&&p.expand(a)};this.collapse=function(a){p&&p.collapse(a)};this.crop=function(c,
d,e,f){g||(g=new a.ClipModifier(b));h&&h.bringToFront();g.customClip(c,d,e,f);k&&k.hide()};this.hide=function(){a.Element.setStyle(n,{visibility:"hidden"})};this.show=function(){a.Element.setStyle(n,{visibility:"visible"})};this.setSize=function(a,b){e&&e.setSize(a,b)};this.render=function(d){p&&p.init();d&&c.position.render();e&&e.apply();var f=function(){r()?b.render():a.Period.setTimeout(f,100)};f()};this.clear=function(){k&&k.show();e&&e.clear();p&&p.clear();b.removeEvent("piece_removed",z)};
this.reposition=function(){e&&e.render()};this.getPositionCoordinates=function(){return e?e.getValue():a.Element.getPosition(b.getNode())};b.addEvent("piece_removed",z)};a.SlotBounding=function(b,c,d,f){(new a.EventManager(this)).fire("ready",!0);var e=this;a.SlotBounding.inheritExclusive(this,b.getAnchor());var g,h=0;f||(b=this.getNode(),"iframe"==this.getNode().nodeName.toLowerCase()&&(a.Browser.IE&&this.setAttribute("allowTransparency","true"),f=this.getNode().contentWindow,a.WindowContext.getWindowAccess(f)&&
(b=f.document.body)),a.Element.setStyle(b,{"background-color":"transparent"}));this.init=function(a){g=Math.max(a,1);e.checkParentsHeight(g);this.setStyle({overflow:"hidden",display:"inline-block"});this.setSize(c,g)};this.checkParentsHeight=function(b){if(b>h){h=b;for(var c=this.getNode().ownerDocument.body,d=this.getNode().parentNode,e=0;d!=c&&d.offsetHeight<=b+5&&10>e;)"auto"!=a.Element.getStyle(d).height&&a.Element.setStyle(d,"height","auto"),d=d.parentNode,e++}};this.resize=function(b){e.checkParentsHeight(b);
d?this.setStyle("marginBottom",a.Utility.parsePx(b-g)):this.setSize(c,b)};this.expand=this.collapse=new a.Empty};y(a.SlotBounding,a.Element);a.StaticFormat=function(b,c){var d;this.addEvent("pieceCreated",function(f){var e=b.creatives.getLayout(c||"main");b.position.getNode().style.textAlign="left";d=new a.PositionModifier;d.setOffset(e.offsetLeft,e.offsetTop);d.setCustomFilter(new a.PositionFilter(e.width,e.height,b.selfParams.posHAlign,b.selfParams.posVAlign,b.position.width||0,b.position.height||
0));d.addEvent("reposition",function(b,c){a.Element.setStyle(f.getNode(),{marginLeft:a.Utility.parsePx(b),marginTop:a.Utility.parsePx(c)})})});this.addEvent("pieceReadyToRender",function(){d&&(d.apply(),d.clear(),d=null)})};a.Pusher=function(b,c){var d=this,f=new a.Easing.Player,e=c.initHeight,g=!1;new a.EventManager(this);var h=function(b){var c=0,g=function(){c=a.WindowContext.getScroll(b.ownerDocument)[1]};g();d.addEvent("pushStart",function(){a.Event.removeOnScroll(g)});d.addEvent("pushEnd",function(){a.Period.setTimeout(function(){a.Event.onScroll(g)},
0)});f.addEvent("enterframe",function(d){a.WindowContext.scrollTo(null,c+v((d.height-e)/2),b)})},k=function(a){f.addEvent("enterframe",function(b){if(a){var c=a.style;b=Math.max(b.height,e);b=v((b-e)/2);c.marginTop=-b+"px"}})},l=function(b,c){d.fireEvent("pushStart",!1,c)&&f.gotoKey(a.Lang.isNumber(b)?b:400,c)};this.enableExplosion=function(d){!g&&d&&(c.scrollMode||a.Browser.IE&&(8>a.Browser.version||"BackCompat"==b.getNode().ownerDocument.compatMode)?h(d):k(d),g=!0)};this.expand=function(){l(null,
{width:c.width,height:c.height})};this.collapse=function(){l(null,{width:c.initWidth,height:e})};this.push=function(b,c,d){var e={};a.Lang.isNumber(b)&&(e.width=b);a.Lang.isNumber(c)&&(e.height=c);l(d,e)};f.addEvent("enterframe",function(c){d.fireEvent("push",!1,c);b.resize(v(c.height));a.Event.forcePushY()});f.addEvent("finish",function(a){d.fireEvent("pushEnd",!1,a)});f.initialize({width:c.initWidth,height:e})};a.PushDown=function(b){a.Format.apply(this,arguments);a.StaticFormat.apply(this,arguments);
var c=this,d=b.position,f=b.positionLayout,e=b.creatives.getLayout("main"),g=function(a){return a+(c.getPiece().getNode()?parseInt(c.getPiece().getNode().style.marginTop,10):0)};this.initPusher=function(){var g=d.getBounding();g.init(0,e.height);c.pusher=new a.Pusher(g,{scrollMode:b.selfParams.scrollMode,initHeight:f.height,height:e.height})};this.init=function(){d.setBounding(new a.SlotBounding(d,f.width,!1,!1));this.initPusher();c.setPiece(b.tryGetPanel("main"),d.getNode())};this.setPieceSize=function(a){a.setSize(e.width,
e.height)};this.addEvent(a.AD_COMMAND.EXPAND,function(){c.pusher.push(null,g(e.height));c.eventTracker.startExpansion()});this.addEvent(a.AD_COMMAND.COLLAPSE,function(){c.pusher.push(null,g(f.height));c.eventTracker.stopExpansion()});this.addEvent(a.AD_COMMAND.RESIZE,function(b){var d=a.Lang.isNumber(b.args.height)?b.args.height:e.height;c.pusher.push(null,g(d),b.args.timeSpan)});this.addEvent(a.AD_COMMAND.COLLAPSE_AND_REMOVE,function(){c.pusher.addEvent("pushEnd",function k(){c.pusher.removeEvent("pushEnd",
k);c.remove()});c.pusher.push(null,g(0))});this.addEvent("pieceSettings",function(a){c.setPieceSize(a)});this.addEvent("pieceReadyToRender",function(){c.getPiece().render();b.selfParams.showAfterPieceCommand||c.pusher.collapse()})};a.ExplodingPush=function(b){a.PushDown.apply(this,arguments);var c=this;this.addEvent("pieceSettings",function(){c.pusher.enableExplosion(b.position.getAnchor().ownerDocument.body)})};a.Header=function(b){a.PushDown.apply(this,arguments);var c=this,d=b.creatives.getLayout("main");
this.init=function(){b.position.setBounding(a.Platform.WLHotmail.isWLHotmailPlatform()?new a.Platform.WLHotmail.WLHeaderBounding(b.position):new a.SlotBounding(b.position,"100%",!1,!0));c.initPusher();c.setPiece(b.tryGetPanel("main"),b.position.getNode())};this.setPieceSize=function(a){a.setSize("100%",d.height)}};a.FloatingPush=function(b){a.Format.apply(this,arguments);var c=b.positionLayout,d=b.creatives.getLayout("main"),f=this.getSelfParams(),e=this,g=b.position,h,k=c.width,l=c.height;this.addEvent(a.AD_COMMAND.EXPAND,
function(){e.pusher.expand();e.eventTracker.startExpansion()});this.addEvent(a.AD_COMMAND.COLLAPSE,function(){e.pusher.collapse();e.eventTracker.stopExpansion()});this.addEvent(a.AD_COMMAND.RESIZE,function(b){var c=a.Lang.isNumber(b.args.width)?b.args.width:k,d=a.Lang.isNumber(b.args.height)?b.args.height:l;b=a.Lang.isNumber(b.args.timeSpan)?b.args.timeSpan:400;e.pusher.push(c,d,b)});this.addEvent(a.AD_COMMAND.COLLAPSE_AND_REMOVE,function(){e.pusher.addEvent("pushEnd",function q(){e.pusher.removeEvent("pushEnd",
q);e.remove()});e.pusher.push(c.width,0)});var m={pieceSettings:function(c){a.Browser.CH&&c instanceof a.FlashPiece&&c.useContainerClipping();d=b.creatives.getLayout("main");c.setSize(d.width,d.height);c.setPosition(-1E4,-1E4)},pieceCreated:function(c){h=new a.PieceControl(c,b);h.setAnchoredPosition(f);h.setZIndex(f)},pieceReadyToRender:function(){h.render(!0);h.sendToBack();h.crop.apply(h,[(d.width-k)/2,0,k,l]);b.selfParams.showAfterPieceCommand||e.pusher.collapse()}};this.init=function(){var n=
new a.SlotBounding(g,c.width,f.pushWithMargin,!1);g.setBounding(n);n.init(0);e.pusher=new a.Pusher(n,{scrollMode:f.scrollMode,initWidth:c.width,initHeight:c.height,width:d.width,height:d.height});e.pusher.addEvent("push",function(a){k=v(a.width);l=v(a.height);h.crop.apply(h,[(d.width-k)/2,0,k,l])});e.setPiece(b.tryGetPanel("main"),g.getOuterNode(),m)}};a.FloatingExplodingPush=function(b){a.FloatingPush.apply(this,arguments);var c=this;this.addEvent("pieceSettings",function(){c.pusher.enableExplosion(b.position.getAnchor().ownerDocument.body)})};
a.Filmstrip=function(b){b=new a.Banner(b);var c=b.getSelfParams();a.Format.AddOn.verticalScroll(b);c.enableMouseWheel&&a.Format.AddOn.mouseWheel(b);return b};a.Expandable=function(b){a.Format.apply(this,arguments);var c=a.Utility.map({},this),d=this,f,e=b.creatives.getLayout("main"),g=d.getSelfParams(),h=!1,k=b.position.getBounding(),l=k.getFormatEvents(),m=!1,n=function(a){a=a.args;h||(d.eventTracker.startExpansion(),h=!0);f.crop(a.left,a.top,a.width,a.height)};d._expand=function(a){h||(d.eventTracker.startExpansion(),
h=!0);f.expand(a)};d._collapse=function(a){f.collapse(a);d.eventTracker.stopExpansion();h=!1};var q={pieceSettings:function(c){e=b.creatives.getLayout("main");a.Browser.CH&&c instanceof a.FlashPiece&&c.useContainerClipping();c.setSize(e.width,e.height);c.setPosition(-1E4,-1E4)},pieceCreated:function(c,h){f=new a.PieceControl(c,b);f.setExpandControl(g);f.setDefaultAction("collapse");f.setProperties({method:h==a.PieceType.HTML?a.ExpandMethod.Size:a.ExpandMethod.Clip});f.setAnchoredPosition(g);b.position.render();
if(!m){m=!0;var q=b.positionLayout,t=f.getPositionCoordinates();k.init(q.width,q.height,e.width,e.height,t[0],t[1],c)}k.replacesClipping||f.setClipToAnchor();f.setZIndex(g);f.setHiding();f.setHidingUpdateInterval(a.globalSettings.filterRefreshInterval);d.addEvent(a.AD_COMMAND.CROP,n);l.add("collapse",function(a){c.sendMessage("stateChange","default");d._collapse(a&&a.args)});l.add("expand",function(a){c.sendMessage("stateChange","expanded");d._expand(a&&a.args)});l.add("close",function(){c.sendMessage("stateChange",
"hidden")});l.add("expansionFailed",function(){c.sendMessage("stateChange","failed")});d.addEvent(a.AD_COMMAND.EXPAND,function(a){k.expand(a)});d.addEvent(a.AD_COMMAND.COLLAPSE,function(a){k.collapse(a)});d.addEvent(a.AD_COMMAND.CALL_API_METHOD,function(a){a=a.args;k.callAPIMethod&&k.callAPIMethod(a.method,a.args)})},pieceReadyToRender:function(){f.render(!1)}};this.remove=function(a){b.position.clear&&b.position.clear();k.releaseFormatEvents(l);c.remove()};this.init=function(){b.position.setAnchorProperties(!0,
!0);d.setPiece(b.tryGetPanel("main"),b.position.getOuterNode(),q)}};a.Takeover=function(b){a.Expandable.apply(this,arguments);var c=a.Utility.map({},this);this._expand=function(){c._expand({height:100,heightRule:"percentage",isFixedPositioning:!0,isWindowCoordinates:!0,method:"size",width:100,widthRule:"percentage"})};this._collapse=function(){c._collapse({isFixedPositioning:!1,method:"size"})}};a.FloatingFormat=function(b){a.Format.apply(this,arguments);var c=this,d=c.getSelfParams(),f,e=b.creatives.getLayout("main"),
g,h=b.position.getBounding(),k=!1,l=function(a){a=a.args;f.crop(a.left,a.top,a.width,a.height)},m=function(c){if(!b.globalParams.appendToParentNode){var h=c?c.args.color:d.blindColor;c=c?c.args.opacity:d.blindTransparency;var k=[0,0],l=[0,0],m=d.topZ-1;d.blindUsePieceWidth?(k[0]=e.width,l[0]=f.getPositionCoordinates()[0]):d.blindUsePieceHeight&&(k[1]=e.height,l[1]=f.getPositionCoordinates()[1]);g=new a.Blind;g.create(m,h,c,k,l)}},n=function(a){f.expand(a.args)},q=function(a){f.collapse(a.args)};this.addEvent("pieceSettings",
function(c){e=b.creatives.getLayout("main");c.setSize(e.width,e.height);c.setPosition(-1E4,-1E4);(d.scrollX||d.scrollY)&&!d.easingScroll&&a.Browser.support.fixed()&&c.setRenderStyle({position:a.CSS_POSITION.FIXED})});this.addEvent("pieceCreated",function(g){f=new a.PieceControl(g,b);f.setExpandControl(d);f.setZIndex(d);f.setHiding();c.setupPositioning(f,g);g=f.getPositionCoordinates();if(!k){k=!0;var m=b.positionLayout;h.init(m.width,m.height,e.width,e.height,g[0],g[1])}f.setScroll(d);f.setDelay(d);
c.addEvent(a.AD_COMMAND.COLLAPSE,q);c.addEvent(a.AD_COMMAND.CROP,l);c.addEvent(a.AD_COMMAND.EXPAND,n)});this.addEvent("pieceReadyToRender",function(){d.useBlind&&m();f.render(!1);c.applyInitialExpansionState(h,f)});this.addEvent("formatCleared",function(){f&&(c.removeEvent(a.AD_COMMAND.COLLAPSE,q),c.addEvent(a.AD_COMMAND.CROP,l),c.removeEvent(a.AD_COMMAND.EXPAND,n),f.clear(),f=null);h&&h.collapse();g&&g.remove()});this.addEvent(a.AD_COMMAND.SET_BLIND_COLOR,function(a){g?g.doTransition(a.args.color,
a.args.duration):m(a)});this.addEvent(a.AD_COMMAND.CLEAR_BLIND_COLOR,function(a){g&&g.clear(a.args.duration)});this.init=function(){var a=b.position.getOuterNode();c.setPiece(b.tryGetPanel("main"),a)};this.applyInitialExpansionState=function(a,b){a.expand();b.expand()}};a.Layer=function(b){a.FloatingFormat.apply(this,arguments);var c=this.getSelfParams();this.setupPositioning=function(b){c.anchor?b.setAnchoredPosition(c):b.setAlignment(c);b.setHidingUpdateInterval(a.globalSettings.filterRefreshInterval)}};
a.Glider=function(b){a.FloatingFormat.apply(this,arguments);var c,d=b.creatives.getLayout("main"),f=this.getSelfParams();this.setupPositioning=function(b){b.setHidingUpdateInterval(a.globalSettings.filterRefreshInterval);b.setAlignment(f)};var e=function(){b.selfParams.disableScrollBars&&(a.WindowContext.saveScrollBarsState(),a.WindowContext.disableScrollBars())};this.addEvent("pieceCreated",function(f){f.addEvent("load",e);c=new a.SizeModifier(f);c.setWidthRule(a.SizeModifier.PredefinedRuleSet.bodyPercentage,
100);if(!b.selfParams.usePieceHeight)switch(b.selfParams.heightBehaviour){case "piece":break;case "clientArea":c.setHeightRule(a.SizeModifier.PredefinedRuleSet.clientAreaHeight,d.offsetTop);break;default:var h=c;f=a.WindowContext.getScrollSize(f.getNode().ownerDocument)[1];h.setHeightRule(a.SizeModifier.PredefinedRuleSet.absolutePixel,f>d.offsetTop?f-d.offsetTop:0)}});this.addEvent("pieceReadyToRender",function(b){c.apply();a.WindowContext.scrollTo(0,0,b.getNode())});this.addEvent("formatCleared",
function(){c.clear();c=null;b.selfParams.disableScrollBars&&a.WindowContext.restoreScrollBarsState()})};a.Skyscraper=function(b){a.FloatingFormat.apply(this,arguments);var c=a.Utility.map({},this),d=this,f=null,e=b.creatives.getLayout("main"),g=this.getSelfParams(),h=new a.Easing.Player,k=!1,l=0,m;this.setParams({easingDuration:1500,pageContentWidth:b.std.getPageContentWidth(),animDuration:1200},!0);this.setParams({defaultZ:(b.getPanelGroup().parameters||{}).defaultZ||b.selfParams.topZ});var n=function(){h.addEvent("enterframe",
function(a){l=Math.round(a.offset);f.slideTo(l)});h.addEvent("finish",function(){k=!1});h.initialize({offset:0})},q=function(){var b=a.WindowContext.getViewportSize()[0],c=g.clipX||e.width,d=g.pageContentWidth;return(g.hAlign==a.Alignment.Right?-1:1)*(c+d<b?c/2:Math.max((b-d)/2,0))},p=function(){k||(l=q(),f.slideTo(l))};this.setupPositioning=function(c){a.Utility.map(g,{vAlign:"top",outX:g.onContent},!0);b.std.getPageContentWidth()&&g.onContent?c.setPageDocking(g):c.setAlignment(g,g.pageContentWidth);
g.clipX&&c.setClipToCorner(g)};this.init=function(){if(g.slideContent)if(d.addEvent("pieceCreated",function(){f=a.SliderFactory.create(null,m);k=!0;h.gotoKey(g.animDuration,{offset:q()});a.Event.onResize(p)}),d.addEvent("formatRemoved",function(){f.restore();a.Event.removeOnResize(p)}),n(),g.sliderSelector)a.ElementFinder.Finder.onAvailable(g.sliderSelector,function(a){m=a;c.init()});else c.init();else c.init()};this.applyInitialExpansionState=function(a,b){a.collapse();b.collapse()}};a.Footer=function(b){a.FloatingFormat.apply(this,
arguments);var c,d,f=null,e=this.getSelfParams(),g=new a.Easing.Player,h=b.creatives.getLayout("main");this.setParams({vAlign:"bottom",animDuration:600,scrollY:!0},!0);this.setupPositioning=function(b){f=b;f.setAlignment(e);f.setScroll(e);f.setHidingUpdateInterval(a.globalSettings.filterRefreshInterval);f.setCustomFilter(d)};this.addEvent("pieceSettings",function(b){b.setSize(a.WindowContext.getViewportSize()[0],h.height)});this.addEvent("pieceCreated",function(b){c=new a.SizeModifier(b);c.setWidthRule(a.SizeModifier.PredefinedRuleSet.bodyPercentage,
100);c.addEvent("resize",function(a,b){f&&f.setSize(a,b)})});this.addEvent("pieceReadyToRender",function(){c.apply();g.gotoKey(e.animDuration,{y:0})});this.addEvent("formatCleared",function(){c.clear();c=null});(function(){d=new a.OffsetFilter(e.hAlign,e.vAlign);d.setY(h.height);g.initialize({y:h.height},null,new a.Easing.Functions.Hyperbola(-4));g.addEvent("enterframe",function(a){d.setY(a.y);f&&f.reposition()})})()};a.FloatingExpandable=function(b){a.FloatingFormat.apply(this,arguments);this.applyInitialExpansionState=
a.Empty;var c=this,d,f=c.getSelfParams(),e=b.creatives.getLayout("main");this.addEvent("pieceSettings",function(b){a.Browser.CH&&b instanceof a.FlashPiece&&b.useContainerClipping();c.addEvent(a.AD_COMMAND.EXPAND,function(){c.eventTracker.startExpansion()});c.addEvent(a.AD_COMMAND.COLLAPSE,function(){c.eventTracker.stopExpansion()})});this.addEvent("pieceCreated",function(b,c){var e={method:c==a.PieceType.HTML?"size":"clip"};f.hAlign==a.Alignment.Justified&&(e.width=100,e.widthRule="percentage");f.vAlign==
a.Alignment.Justified&&(e.height=100,e.heightRule="percentage");d.setDefaultAction("collapse");d.setProperties(e)});this.setupPositioning=function(c){var h=!1,k;d=c;if(f.isFooter){var l=!1;a.Platform.Mobile.isIOS()&&0===window.orientation?(d.setRepositionFunction(function(a,b,c,d){d.setStyle("left",a+"px");d.setStyle("bottom","auto");d.setStyle("top","auto")}),a.Event.add(document,"touchstart",function(){k=window.pageYOffset;a.Event.add(document,"touchmove",function(){window.pageYOffset!=k&&(h=!0);
a.Event.add(document,"touchend",function(){!l&&h&&(d.setRepositionFunction(function(a,b,c,d){d.setStyle("left",a+"px");d.setStyle("bottom","0px");d.setStyle("top","auto")}),l=!0)})})})):(a.Platform.Mobile.isAndroid()||0!==window.orientation)&&d.setRepositionFunction(function(a,b,c,d){d.setStyle("left",a+"px");d.setStyle("bottom","0px");d.setStyle("top","auto")})}d.setHidingUpdateInterval(a.globalSettings.filterRefreshInterval);b.std.getPageContentWidth()&&f.onContent?(c=f.outX?e.width-f.clipX:e.width,
d.setPageDocking(f,null,null,c)):(c=e.width-f.clipX,d.setAlignment(f,b.std.getPageContentWidth(),null,null,c));d.setClipToCorner(f)}};a.Sidekick=function(b){a.FloatingFormat.apply(this,arguments);var c=a.Utility.map({},this),d=this,f=b.creatives.getLayout("main"),e=d.getSelfParams(),g=new a.Easing.Player,h,k,l,m=!1,n=!1,q=null,p=!1,r;this.setParams({outX:!0,initWidth:0,animDuration:1200},!0);k=Math.max(e.initWidth,1);var u,t=function(){return Math.max((a.WindowContext.getViewportSize()[0]-b.std.getPageContentWidth())/
2,0)},z=function(){m||(m=!0,g.stop(),g.initialize({offset:u(e.initWidth)}),p=!0,g.gotoKey(e.animDuration,{width:f.width,offset:u(f.width)}),d.eventTracker.startExpansion())},x=function(b){m&&(m=!1,b=a.Lang.isNumber(b)?b:e.initWidth,g.stop(),g.initialize({offset:u(f.width)}),p=!0,g.gotoKey(e.animDuration,{width:b,offset:u(b)}),d.eventTracker.stopExpansion())},w=function(){if(h&&!p){var a=m?f.width:e.initWidth;A({width:a,offset:u(a)})}},y=function(){var b=Math.max(k,e.initWidth);return[e.hAlign==a.Alignment.Right?
f.width-b:0,0,b,f.height]},A=function(b){k=v(b.width);h.slideTo(-Math.round(b.offset));e.clip&&(e.hAlign==a.Alignment.Right&&q.setX(Math.round(b.width-f.width)),l.crop.apply(l,y()),l.setSize(Math.max(k,e.initWidth),f.height));l.reposition()};this.addEvent("pieceSettings",function(c){a.Browser.CH&&c instanceof a.FlashPiece&&c.useContainerClipping();f=b.creatives.getLayout("main");d.addEvent(a.AD_COMMAND.EXPAND,z);d.addEvent(a.AD_COMMAND.COLLAPSE,x)});this.addEvent("pieceCreated",function(){h=a.SliderFactory.create(e.hAlign,
r);e.clip&&(l.setSize(Math.max(k,e.initWidth),f.height),l.setCustomFilter(q));a.Event.onResize(w)});this.addEvent("pieceReadyToRender",function(){e.clip&&l.crop.apply(l,y())});this.remove=function(b){n||(m?(n=!0,x(e.hAlign==a.Alignment.Right?-f.offsetLeft:0)):(a.Event.removeOnResize(w),c.remove(),h.restore(),m=!1))};this.init=function(){if(e.sliderSelector)a.ElementFinder.Finder.onAvailable(e.sliderSelector,function(a){r=a;c.init()});else c.init()};this.setupPositioning=function(c){l=c;e.appearOnTop&&
l.setCustomFilter({get:function(b){return{x:b,y:a.WindowContext.getScroll()[1]}}});e.sliderSelector?(u=e.centered?function(a){return 0===a?0:f.offsetLeft+b.std.getPageContentWidth()/2+a/2}:function(b){return e.hAlign==a.Alignment.Left?b:-b},l.setAnchoredPosition(e,null,null,r)):e.onContent?(u=e.centered?function(a){return 0===a?0:f.offsetLeft+b.std.getPageContentWidth()/2+a/2}:function(c){return e.hAlign==a.Alignment.Left?Math.max(c+f.offsetLeft-t(),0):Math.max(t()+b.std.getPageContentWidth()+f.offsetLeft+
c-a.WindowContext.getViewportSize()[0],0)},l.setPageDocking(e)):(u=function(a){return Math.max(a+f.offsetLeft,0)},l.setAlignment(e,b.std.getPageContentWidth()))};(function(){g.addEvent("enterframe",A);g.addEvent("finish",function(){p=!1;n&&(a.Event.removeOnResize(w),c.remove(),h.restore(),n=!1)});g.initialize({width:e.initWidth,offset:0});q=new a.OffsetFilter(e.hAlign,e.vAlign)})()};a.Slider=function(b){a.FloatingFormat.apply(this,arguments);var c=a.Utility.map({},this),d,f,e,g=!1,h=new a.Easing.Player,
k=this.getSelfParams(),l=!a.Browser.FF,m=new a.StyleState(a.WindowContext.getTopAccessWindow().document.documentElement);this.setParams({hAlign:"right",outX:!0,scrollY:!0,animDuration:1200},!0);var n=function(){return-Math.max(a.WindowContext.getViewportSize()[0],b.std.getPageContentWidth())},q=function(){f&&f.slideTo(n())};this.addEvent("pieceSettings",function(b){var c=a.WindowContext.getViewportSize();b.setSize(c[0],c[1])});this.addEvent("pieceCreated",function(b){d=new a.SizeModifier(b);d.setWidthRule(a.SizeModifier.PredefinedRuleSet.bodyPercentage,
100);d.setHeightRule(a.SizeModifier.PredefinedRuleSet.bodyPercentage,100);d.addEvent("resize",function(a,b){e&&e.setSize(a,b)});f=a.SliderFactory.create(k.hAlign,null)});this.addEvent("pieceReadyToRender",function(){d.apply();l&&m.saveAndApply({overflow:"hidden"})});this.addEvent("pieceLoaded",function(){h.gotoKey(k.animDuration,{offset:n()})});this.addEvent("formatCleared",function(){d.clear();d=null});this.setupPositioning=function(a){e=a;e.setAlignment(k,b.std.getPageContentWidth());e.setScroll(k)};
this.remove=function(b){a.Event.removeOnResize(q);g=!0;h.gotoKey(k.animDuration,{offset:0})};(function(){h.addEvent("enterframe",function(a){f.slideTo(a.offset)});h.addEvent("finish",function(){if(g)c.remove(),g=!1,l&&m.restore(),f&&f.restore();else a.Event.onResize(q)});h.initialize({offset:0},null,new a.Easing.Functions.Hyperbola(8))})()}});document.close();
