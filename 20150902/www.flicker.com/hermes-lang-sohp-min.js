YUI.add("signup-modal-view",function(e,t){"use strict";var n,r;n={css:{destinationContainer:"body",closeX:".close-x",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content"},options:{}},r={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").SignUpModal=e.FlickrView.create(this.name,e.Views.FluidModal,[],{initializer:function(e){return this.set("showFooter",!1),this.set("showHeader",!1),this.set("showButtonFlavorText",!1),this.set("showButtons",!1),this.set("showActionButton",!1),this.set("showCancelButton",!1),this.set("signUpHeaderClass",e.signUpHeaderClass),this.set("signUpHeaderImage",e.signUpHeaderImage),this.set("signUpTitle",e.signUpTitle),this.set("signUpMessage",e.signUpMessage),this.set("beaconPrefix",e.beaconPrefix),this.set("classList","signup-modal"),this},buildContainer:function(){if(!this.alreadyShowingModal){var e={signUpHeaderClass:this.get("signUpHeaderClass"),signUpHeaderImage:this.get("signUpHeaderImage"),signUpTitle:this.get("signUpTitle"),signUpMessage:this.get("signUpMessage")};this.set("htmlMessage",this.templates("signup-modal")(e)),this.constructor.superclass.buildContainer.call(this)}return this},activate:function(){return this.get("container").one(".signup-button").on("click",this.handleAction.bind(this)),this.get("container").one(".signin-link").on("click",this.handleSignIn.bind(this)),this.constructor.superclass.activate.call(this),this},handleSignIn:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignInClick"),this.fire("signInClick",t),this.constructor.superclass.handleAction.call(this)},handleAction:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"ModalSignUpClick"),this.fire("signUpClick",t),this.constructor.superclass.handleAction.call(this)},handleCancel:function(t){e.rapidTracker.beacon(this.name,this.get("beaconPrefix")+"CancelClick"),this.constructor.superclass.handleCancel.call(this)}})},"@VERSION@",{requires:["flickr-view","fluid-modal-view","hermes-template-signup-modal","signup-modal-css"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("hermes-template-signup-interstitial",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="signup-interstitial-body interstitial-fade">\n	<div class="close-x"></div>\n	<div class="body">\n		<div class="logo"></div>\n		<h3 class="signup-interstitial-message">',u={hash:{intlName:"common.NEVER_DELETE_WITH_ONE_TB"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):a.call(t,"intlMessage",u)))+'</h3>\n		<div><a href="/signup" data-track="signup" class="butt large action signup-button">',u={hash:{intlName:"common.SIGN_UP_WITH_YAHOO"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):a.call(t,"intlMessage",u)))+'</a></div>\n		<a href="/signin" data-track="signin" class="signin-link">',u={hash:{intlName:"common.SIGN_IN"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):a.call(t,"intlMessage",u)))+"</a>\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/signup-interstitial",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("signup-interstitial-view",function(e,t){"use strict";var n;n={css:{destinationContainer:"body",closeX:".close-x",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content",modalSelector:".modal"},options:{}},e.namespace("Views").SignUpInterstitial=e.FlickrView.create(this.name,e.Views.FluidModal,[],{langBundles:this.details.langBundles,initializer:function(e){return this},buildContainer:function(){var t=e.one(n.css.destinationContainer);if(!this.alreadyShowingModal){var r={signUpMessage:this.get("signUpMessage")};this.setContainerHTML(this.templates("signup-interstitial")(r)),t&&(t.append(this.get("container")),this.reposition(),this.get("modalOverlayType").get("overlay").removeClass("interstitial-fade"),this.get("container").one(".signup-interstitial-body").removeClass("interstitial-fade"))}return this}},{ATTRS:{showFooter:{value:!1},showHeader:{value:!1},showButtonFlavorText:{value:!1},showButtons:{value:!1},showActionButton:{value:!1},showCancelButton:{value:!1},modalSelector:{value:".signup-interstitial-body"},modalOverlayType:{value:e.OverlayManager.SignupInterstitialOverlay}}})},"@VERSION@",{requires:["flickr-view","fluid-modal-view","hermes-template-signup-interstitial","signup-interstitial-css"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("signin-helper",function(e){function t(t,n){e.FlickrStorage.store(t,n)}function n(e,n){var r="fave";t(r,e),m(r,n)}function r(e,t){var n="comment";m(n,t)}function i(e,n){var r="share";t(r,e),m(r,n)}function s(e,n){var r="joingroup";t(r,e),m(r,n)}function o(e,n){var r="follow";t(r,e),m(r,n)}function u(e,n){var r="download";t(r,e),m(r,n)}function a(e,n){var r="fave";t(r,e),y(r,n)}function f(e,t){var n="comment";y(n,t)}function l(e,n){var r="joingroup";t(r,e),y(r,n)}function c(e,n){var r="follow";t(r,e),y(r,n)}function h(e,n){var r="download";t(r,e),y(r,n)}function p(t){var n,r,i=[];if(!t)return;if(e.FlickrStorage.hasEntries()){n=e.FlickrStorage.retrieve();for(r in n)d(t,n[r])||i.push(n[r])}return e.FlickrStorage.remove(),i}function d(e,t){var n=t.key,r=t.value;switch(n){case"fave":return v(e,r),!0;case"share":return!1}}function v(e,t){var n=t.id,r=e.getModelRegistry("photo-engagement-models");r.then(function(e){var t=e.proxy(n);t.registry.addAsFave(n)&&t.remoteUpdate()})}function m(t,n){var r,i;n&&n.withPopup?(r=e.config.win.open(g(n),"_blank","height=650,resizable=1,scrollbars=1,location=yes"),i=setInterval(function(){r.closed&&(clearInterval(i),window.location.reload())},1e3)):e.config.win.location=g(n)}function g(t){t=t||{},t.closeWhenDone&&(t.postLoginUrl=e.url("/photo_grease_postlogin.gne",{protocol:!1}));var n=t.postLoginUrl||e.config.win.location.href,r=t.url||e.url("/signin/yahoo/",{protocol:!1});return r+"?redir="+encodeURIComponent(n)}function y(t,n){n=n||{};var r=n.postLoginUrl||e.config.win.location.href,i=n.url||e.url("/signup/",{protocol:!1});e.config.win.location=i+"?redir="+encodeURIComponent(r)}e.FlickrStorage={_storageKey:"flickrStorage",store:function(t,n){try{var r=[];e.StorageHelper.hasEntries(this._storageKey)&&(r=this.retrieve()),r.push({key:t,value:n}),e.StorageHelper.setItem(this._storageKey,JSON.stringify(r))}catch(i){}},retrieve:function(){var t={};try{t=JSON.parse(e.StorageHelper.getItem(this._storageKey))}catch(n){}return t},remove:function(){try{e.StorageHelper.remove(this._storageKey)}catch(t){}},hasEntries:function(){return e.StorageHelper.hasEntries(this._storageKey)}},e.SigninHelper={savePreLoginAction:t,addPendingFave:n,addPendingComment:r,addPendingShare:i,addPendingFollow:o,addPendingJoinGroup:s,addPendingDownload:u,checkPendingQueue:p,_redirectToSignin:m,_redirectToSignUp:y,_getSigninUrl:g,signUpPendingFave:a,signUpPendingComment:f,signUpPendingFollow:c,signUpPendingJoinGroup:l,signUpPendingDownload:h}},"@VERSION@",{requires:["url","storage-helper"]});
YUI.add("hermes-template-mobile-app-upsell",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){return"is-android"}function c(e,t){return"http://play.google.com/store/apps/details?id=com.yahoo.mobile.client.android.flickr"}function h(e,t){return"http://appstore.com/flickr"}function p(e,t){var r="",i,s;return r+="\n					",s={hash:{intlName:"mobile.APP_ANDROID"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"\n				",r}function d(e,t){var r="",i,s;return r+="\n					",s={hash:{intlName:"mobile.APP_IOS"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"\n				",r}function v(e,t){var r="",i,s;return r+="\n					",s={hash:{intlName:"mobile.APP_ANDROID_FREE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"\n				",r}function m(e,t){var r="",i,s;return r+="\n					",s={hash:{intlName:"mobile.APP_IOS_FREE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"\n				",r}function g(e,t){var r="",i,s;return r+="\n					",s={hash:{intlName:"mobile.INSTALL"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"\n				",r}function y(e,t){var r="",i,s;return r+="\n					",s={hash:{intlName:"mobile.GET"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"\n				",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this;s+='<div id="smartbanner" class="ios">\n	<!-- <button class="sb-close close-banner"></button> -->\n	<div class="sb-container">\n		<span class="sb-icon">\n			<svg class="close-banner icon icon-close"><use xlink:href="#icon-close"></use></svg>\n		</span>\n		<span class="sb-flickr-icon">\n			<div class="outer-logo ',o=n["if"].call(t,t.isAndroid,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='">\n				<div class="ball blue-ball"></div>\n				<div class="ball pink-ball"></div>\n			</div>\n		</span>\n		<div class="sb-info">\n			<a class="sb-button" href="',o=n["if"].call(t,t.isAndroid,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.isIOS,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+='">\n				<strong>\n				',o=n["if"].call(t,t.isAndroid,{hash:{},inverse:f.noop,fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;s+="\n				",o=n["if"].call(t,t.isIOS,{hash:{},inverse:f.noop,fn:f.program(9,d,i),data:i});if(o||o===0)s+=o;s+="\n				</strong>\n				<span>\n				",o=n["if"].call(t,t.isAndroid,{hash:{},inverse:f.program(13,m,i),fn:f.program(11,v,i),data:i});if(o||o===0)s+=o;s+='\n				</span>\n			</a>\n		</div>\n		<div class="sb-view get-app">\n			<span>\n				',o=n["if"].call(t,t.isAndroid,{hash:{},inverse:f.noop,fn:f.program(15,g,i),data:i});if(o||o===0)s+=o;s+="\n				",o=n["if"].call(t,t.isIOS,{hash:{},inverse:f.noop,fn:f.program(17,y,i),data:i});if(o||o===0)s+=o;return s+="\n			</span>\n		</div>\n	</div>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/mobile-app-upsell",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("mobile-app-upsell-view",function(e){var t="show-upsell-banner";e.namespace("Views")[this.name]=e.Base.create("mobile-app-upsell-view",e.FlickrView,[],{langBundles:["common","mobile"],initializer:function(e){return this.nsid=e.nsid,this.photoId=e.photoId,this.buildContainer(),this},buildContainer:function(){var e=this.appContext.getUA().os;return this.setContainerHTML(this.templates("mobile-app-upsell")({isAndroid:e==="android",isIOS:e==="ios"})),this},setRootViewAdditionalViewClasses:function(){var e=[],n=this.appContext.getUA().os;return e.push(n),e.push(t),this.set("rootViewAdditionalViewClasses",e),this},activate:function(){var t=this.get("container"),n=t.one(".close-banner"),r=t.one(".get-app"),i=this;return n&&this.registerEventHandler(i.addBannerEvent(n,"dism",i.dismissBanner.bind(i))),r&&this.registerEventHandler(i.addBannerEvent(r,"inst",i.installApp.bind(i))),e.rapidTracker.beacon(this.name,"app_promo_interstitial_shown",{section:"app-interstitial"}),this},addBannerEvent:function(e,t,n){var r=this;return e.on("click",function(e){e.preventDefault(),r.appContext.setCookie({cookieName:t,path:"/",cookieValue:!0,remove:!0}),r.fire("subviewViewEvent","removeUpsell"),n()})},dismissBanner:function(){if(navigator.cookieEnabled){e.rapidTracker.beacon(this.name,"cookies_off",{section:"app-interstitial"});return}var t=parseInt(this.appContext.getCookie("flaidisn"),10);!t||isNaN(t)?t=0:t+=1,e.rapidTracker.beacon(this.name,"app_promo_interstitial_dismissed"+(t>0?"_"+(t+1):""),{section:"app-interstitial"});var n;t<2?n=e.moment().add(3,"days").toDate():t===2?n=e.moment().add(7,"days").toDate():t===3&&(n=e.moment().add(20,"year").toDate()),this.appContext.setCookie({cookieName:"flaidisn",cookieValue:1,expires:n,remove:!0,path:"/"})},installApp:function(){var t=this.appContext.getUA().os,n=this.appContext.getUA().isWebview,r="photos/"+this.nsid+"/"+this.photoId,i=this;e.rapidTracker.beacon(this.name,"app_promo_interstitial_download",{section:"app-interstitial"}),this.appContext.setCookie({cookieName:"flaidis",cookieValue:1,expires:e.moment().add(20,"year").toDate(),remove:!0,path:"/"}),setTimeout(function(){e.use("mobile-actions-helper",function(e){e.MobileActionsHelper.redirectToAppOrStore({os:t,isWebview:n,pageURL:r,beacon:{name:"app_promo_banner_open",section:"appbanner"},viewName:i.name})})},250)}},{ATTRS:{}}),e.namespace("Views")[this.name].shouldShowBanner=function(e){var t=e.getCookie("dism")||e.getCookie("inst"),n=e.getUA().os,r=n==="ios"||n==="android";return!t&&r}},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-mobile-app-upsell","mobile-app-upsell-css"],langBundles:["common","mobile"]});
YUI.add("hermes-lang-mobile",function(e,t){e.Intl.add("hermes/mobile","en-US",{APP_IOS:["Flickr for iOS"],APP_ANDROID:["Flickr for Android"],APP_IOS_FREE:["Free in the App Store"],APP_ANDROID_FREE:["Free in the Google Play"],GET:["Get"],INSTALL:["Install"]})},"@VERSION@",{requires:["intl"]});
YUI.add("global-nav-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var n,r;typeof t.enableBrowserUpgradeBanner=="undefined"&&(t.enableBrowserUpgradeBanner=!0),this.set("showBrowserUpgradeBanner",!1);if(YUI.Env.isServer&&t.enableBrowserUpgradeBanner){var i=this.appContext.request.headers["user-agent"],s=e.BrowserSupport.isUnsupportedBrowser(i),o=e.BrowserSupport.isBot(i),u=e.BrowserSupport.isSharingBot(i);s&&!o&&!u&&this.set("showBrowserUpgradeBanner",!0)}if(!YUI.Env.isServer){var a=e.StorageHelper.getItem("hasDismissedBrowserUpgradeBanner",!0);a&&a==="true"&&this.set("showBrowserUpgradeBanner",!1)}return this.get("container").get("innerHTML")===""&&this.setContainerHTML('<div class="global-nav-content"></div>'),this.appStateParams=t,this.enableMobileNav=t.enableMobileNav||!1,n=this.appContext.getLocation(),t.modelParams&&t.modelParams.apiParams?r=t.modelParams.apiParams:r=n.href,this.searchUrl=new e.SearchUrl(r,this.appContext,t.searchType),this.useGlobalNavRestyle=t.useGlobalNavRestyle,this.appContext.flipper.isFlipped("enable-signed-out-cta-test")&&this.appContext.lang.toLowerCase()==="en-us"&&(this.signedOutTest=!0),this.appContext.flipper.isFlipped("enable-sign-up-interstitial-test")&&this.appContext.lang.toLowerCase()==="en-us"&&(this.signUpInterstitialTest=!0),this},subviewConfig:{"search-autosuggest-field-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!this.appContext.flipper.isFlipped("enable-new-autosuggest")}},"autosuggest-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,disabled:function(){return this.enableMobileNav||!this.appContext.flipper.isFlipped("autosuggest2")}},"search-bar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("autosuggest")}},"account-menu-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"notifications-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,disabled:function(){return!this.appContext.flipper.isFlipped("notifications-menu")}},"browser-upgrade-banner-view":{requiredToShowOnServer:!0,requiredToShowOnClient:!1,dealbreaker:!1,disabled:function(){return!this.get("showBrowserUpgradeBanner")}},"person-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content",excludeSelectors:[".c-account-menu"],disabled:function(){return!this.appContext.flipper.isFlipped("enable-hover-account-menu")||!this.appContext.flipper.isFlipped("rebootify-group-discussions-list")}},"group-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content",excludeSelectors:[".c-account-menu"],disabled:function(){return!this.appContext.flipper.isFlipped("enable-hover-account-menu")||!this.appContext.flipper.isFlipped("rebootify-group-discussions-list")}},"mobile-app-upsell-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(t){return!t.isMobile||!e.Views["mobile-app-upsell-view"].shouldShowBanner(this.appContext)}}},loadState:function(){var t=this,n=this.appContext.getViewer(),r;return n.signedIn?r=this.appContext.getModel("person-models",n.nsid).then(function(e){t.set("viewer",e),t.elementStates=t.setElementStates(t.appStateParams)}):(this.elementStates=this.setElementStates(this.appStateParams),r=e.Promise.resolve()),r},buildContainer:function(){var t={},n;return this.get("viewer")&&(t=e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))})),n={"account-menu-view":this.subviews["account-menu-view"].get("container"),"browser-upgrade-banner-view":this.subviews["browser-upgrade-banner-view"]?this.subviews["browser-upgrade-banner-view"].get("container"):"","show-browser-upgrade-banner":this.get("showBrowserUpgradeBanner"),showNotificationsMenu:!1,viewer:t,elements:this.elementStates,enableMobileNav:this.enableMobileNav,enableNewAutosugest:this.appContext.flipper.isFlipped("enable-new-autosuggest"),showSmartSearchBar:this.appContext.flipper.isFlipped("autosuggest"),showAutosuggest:!this.enableMobileNav&&this.appContext.flipper.isFlipped("autosuggest2"),searchValue:this.searchUrl.getSearchTerm(),"person-menu-view":this.subviews["person-menu-view"]?this.subviews["person-menu-view"].get("container"):"","group-menu-view":this.subviews["group-menu-view"]?this.subviews["group-menu-view"].get("container"):"","mobile-app-upsell-view":this.subviews["mobile-app-upsell-view"]?this.subviews["mobile-app-upsell-view"].get("container"):""},n.showAutosuggest?n["autosuggest-view"]=this.subviews["autosuggest-view"].get("container"):n.showSmartSearchBar?n["search-bar-view"]=this.subviews["search-bar-view"].get("container"):n.enableNewAutosugest&&(n["search-autosuggest-field-view"]=this.subviews["search-autosuggest-field-view"].get("container")),this.appContext.flipper.isFlipped("notifications-menu")&&(n["notifications-menu-view"]=this.subviews["notifications-menu-view"].get("container"),n.showNotificationsMenu=!0),this.appContext.flipper.isFlipped("global-nav-restyle")||this.useGlobalNavRestyle?this.setContainerHTML(this.templates("global-nav-restyle")(n)):this.setContainerHTML(this.templates("global-nav")(n)),this},activate:function(){var t=this,n=this.appContext.getViewer().prefs.keyboardShortcutsEnabled,r,i,s,o=this.get("container");n&&this.attachKeyEvent("up:83",this.focusSearch.bind(this)),t.subviews["autosuggest-view"]&&(this.registerEventHandler(this.subviews["autosuggest-view"].on("open",function(e){t.subviews["account-menu-view"].closeMenu()})),this.registerEventHandler(this.subviews["account-menu-view"].on("open",function(e){t.subviews["autosuggest-view"].close()}))),this.elementStates.search_bar&&!this.appContext.flipper.isFlipped("enable-new-autosuggest")&&(s=o.one(".gn-tools form"),s&&this.registerEventHandler(s.on("submit",this.executeSearch.bind(this))));if(this.appContext.flipper.isFlipped("global-nav-restyle")||this.useGlobalNavRestyle)this.registerEventHandler
(o.one(".mobile-nav-toggle").on("click",function(n){e.rapidTracker.beacon(t.name,"mobile-nav-toggle",{action:o.one(".global-nav-restyle").hasClass("menu-open")?"close":"open"}),o.one(".global-nav-restyle").toggleClass("menu-open")}.bind(this))),this.registerEventHandler(o.one(".mobile-search-button").on("click",function(n){e.rapidTracker.beacon(t.name,"mobile-nav-search");var r=this.get("container"),i=r.one(".global-nav-restyle"),s=r.one("#gn-search-field"),o=this.appContext.viewportData.getWidth(),u=37,a=46;i.addClass("search-open"),i.hasClass("menu-open")&&i.removeClass("menu-open"),t.appContext.flipper.isFlipped("enable-new-autosuggest")?(t.fire("parentViewEvent","resize-search-field",o-a),t.fire("parentViewEvent","focus-search-field")):(t.appContext.flipper.isFlipped("autosuggest")&&(s=r.one("#autosuggest-input"),a=42),s.setStyles({width:o-u-a+"px"}).focus())}.bind(this))),this.registerEventHandler(o.one(".mobile-search-close-button").on("click",function(e){o.one(".global-nav-restyle").removeClass("search-open"),t.appContext.flipper.isFlipped("autosuggest")?o.one(".global-nav-restyle #autosuggest-input").set("value",""):t.appContext.flipper.isFlipped("enable-new-autosuggest")?t.fire("parentViewEvent","clear-search-field"):o.one(".global-nav-restyle #gn-search-field").set("value","")}.bind(this))),this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){o.one(".global-nav-restyle").removeClass("search-open"),t.appContext.flipper.isFlipped("autosuggest")?o.one(".global-nav-restyle #autosuggest-input").set("value","").setStyles({width:"183px"}):t.appContext.flipper.isFlipped("enable-new-autosuggest")?t.fire("parentViewEvent","resize-search-field"):o.one(".global-nav-restyle #gn-search-field").set("value","").setStyles({width:"183px"})}.bind(this)));return this.signedOutTest&&!this.appContext.getViewer().signedIn&&o.one(".gn-upload .gn-title").on("click",this.signUpAndUpload.bind(this)),this.signUpInterstitialTest&&!this.appContext.getViewer().signedIn&&(i=["photo-page-ad-scrappy-view","sohp-view","products-landing-view","products-marketplace-products-view"],r=this.appContext.flapp.get("activeView").name,i.indexOf(r)<0&&!this.appContext.getUA().isMobileBrowser&&this.startInterstitialTimer()),e["autosuggest-experiment"](this.appContext),this},startInterstitialTimer:function(){var t=this,n,r=!1,i;n=e.StorageHelper.getItem("signUpInterstitialSeen"),n?(n=e.moment(n,"x"),i=e.moment().subtract(2,"days"),i>n&&(r=!0)):r=!0,r&&(this.signUpInterstitialTimer=setTimeout(function(){if(!e.OverlayManager.hasOverlay()){var n=new e.Views.SignUpInterstitial({appContext:t.appContext});n.show(),e.StorageHelper.setItem("signUpInterstitialSeen",e.moment().format("x"))}},1e4))},destructor:function(){clearTimeout(this.signUpInterstitialTimer)},signUpAndUpload:function(t){var n=e.url("/upload/"),r=this.intlMessage({intlName:"global-nav.UPLOAD_MODAL_SIGNUP_TITLE"}),i=this.intlMessage({intlName:"global-nav.UPLOAD_MODAL_SIGNUP_MESSAGE"}),s;t.halt(),e.rapidTracker.beacon(this.name,"uploadButtonClick"),s=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-upload",signUpTitle:r,signUpMessage:i,beaconPrefix:"upload"}),s.on("signUpClick",function(t){e.SigninHelper._redirectToSignUp("upload",{postLoginUrl:n})}),s.on("signInClick",function(t){e.SigninHelper._redirectToSignin("upload",{postLoginUrl:n})}),s.show()},focusSearch:function(e){this.appContext.flipper.isFlipped("autosuggest")?this.subviews["search-bar-view"].get("container").one("#autosuggest-input").focus():this.appContext.flipper.isFlipped("enable-new-autosuggest")||this.get("container").one("#gn-search-field").focus()},executeSearch:function(e){var t=this.get("container").one("#gn-search-field").getDOMNode(),n;n=this.searchUrl.createNewSearch(t.value).getURL(),e.halt(),this.appContext.flapp.navigate(n)},setElementStates:function(e){var t={small_logo:!1,you_link:!1,you_menu:!1,contacts_menu:!1,groups_menu:!1,explore_menu:!1,weekly_flickr:!1,create_link:!1,create_menu:!1,upload_link:!1,upload_icon:!1,account_menu:!1,search_bar:!1,tour_link:!1,signup_link:!1,signin_link:!1,pro_upsell:!1,chronic_link:!1,editr_tour_link:!1,use_uh_eyebrow:!1,right_side_signup:!1},n=this.appContext.getViewer();return!this.appContext.flipper.isFlipped("global-nav-restyle")&&!this.useGlobalNavRestyle?(e.isJobs?t.small_logo=!0:e.isPlayr?t.use_uh_eyebrow=!1:e.isEditr?(t.small_logo=!0,t.you_link=!0,t.chronic_link=!0,t.editr_tour_link=!0,t.account_menu=!0,t.use_uh_eyebrow=!1):e.isHome&&!n.signedIn?(t.tour_link=!0,t.signup_link=!0,t.explore_menu=!0,t.upload_link=!0,t.search_bar=!0,t.signin_link=!0):n.signedIn?(t.you_menu=!0,t.contacts_menu=!0,t.groups_menu=!0,t.explore_menu=!0,t.upload_link=!0,t.search_bar=!0,t.account_menu=!0):(t.tour_link=!0,t.signup_link=!0,t.explore_menu=!0,t.upload_link=!0,t.search_bar=!0,t.signin_link=!0),this.get("viewer")&&(this.appContext.flipper.isFlipped("rebootify-stats")||this.get("viewer").getValue("isPro"))&&(t.stats=!0),this.appContext.lang.toLowerCase()==="en-us"&&(t.weekly_flickr=!0),t.create_link=!0,t.set_not_album=!this.appContext.flipper.isFlipped("rename-set-to-album")):(e.isJobs?t.small_logo=!0:e.isPlayr?t.use_uh_eyebrow=!1:e.isEditr?(t.small_logo=!0,t.you_link=!0,t.chronic_link=!0,t.editr_tour_link=!0,t.account_menu=!0,t.use_uh_eyebrow=!1):e.isHome&&!n.signedIn?(t.tour_link=!0,t.signup_link=!0,t.explore_menu=!0,t.upload_link=!0,t.search_bar=!0,t.signin_link=!0):n.signedIn?(t.you_menu=!0,t.explore_menu=!0,t.upload_link=!0,t.search_bar=!0,t.account_menu=!0):(t.tour_link=!0,t.signup_link=!0,t.explore_menu=!0,t.upload_link=!0,t.search_bar=!0,t.signin_link=!0),this.get("viewer")&&(this.appContext.flipper.isFlipped("rebootify-stats")||this.get("viewer").getValue("isPro"))&&(t.stats=!0),this.appContext.lang.toLowerCase()==="en-us"&&(t.weekly_flickr=!0),t.create_link=!0,t.set_not_album=!this.appContext.flipper.isFlipped("rename-set-to-album"),this.appContext.flipper.isFlipped("enable-global-nav-upload-icon")&&(t
.upload_link=!1,t.upload_icon=!0),this.signedOutTest&&(t.right_side_signup=!0)),t},onSubviewEvent:function(e,t){t&&e==="mobile-app-upsell-view"&&t[0]==="removeUpsell"&&this.subviews["mobile-app-upsell-view"].destroy({remove:!0})}})},"@VERSION@",{requires:["flickr-view","hermes-template-global-nav","hermes-template-global-nav-restyle","global-nav-css","global-nav-restyle-css","search-url","search-autosuggest-field-view","autosuggest-view","search-bar-view","querystring-parse-simple","querystring-stringify-simple","notifications-menu-view","fluid-css","url-helper","person-menu-view","group-menu-view","autosuggest-experiment","browser-support","fluid-modal-view","signup-modal-view","signup-interstitial-view","signin-helper","storage-helper","mobile-app-upsell-view"],langBundles:["global-nav","common","search"]});
YUI.add("hermes-lang-global-nav",function(e,t){e.Intl.add("hermes/global-nav","en-US",{FLICKR_LOGO_ALT:["Flickr logo. If you click it, you'll go home"],YOUR_PHOTOSTREAM:["Your Photostream"],FOLLOWING:["Following"],PHOTOS_OF:["Photos of"],PHOTOS_FROM:["Photos from"],LIST:["List"],COMMUNITIES:["Communities"],GROUPS_LIST:["Groups List"],SEARCH_GROUPS:["Search Groups"],RECENT_DISCUSSIONS:["Recent Discussions"],CREATE_A_GROUP:["Create a Group"],RECENT_PHOTOS:["Recent Photos"],THE_COMMONS:["The Commons"],GETTY_COLLECTION:["Getty Collection"],GALLERIES:["Galleries"],FLICKR_GALLERIES:["Flickr Galleries"],WORLD_MAP:["World Map"],APP_GARDEN:["App Garden"],THE_WEEKLY_FLICKR:["The Weekly Flickr"],FLICKR_BLOG:["Flickr Blog"],UPLOAD:["Upload"],SIGN_IN:["Sign In"],SEARCH:["Search"],CAMERA_FINDER:["Camera Finder"],RECENT_ACTIVITY:["Recent Activity"],STATS:["Stats"],ORGANIZE:["Organize"],CREATIONS:["Creations"],FIND_FRIENDS:["Find Friends"],GROUPS:["Groups"],PEOPLE:["People"],CAMERAROLL:["Camera Roll"],CREATE:["Create"],UPLOAD_MODAL_SIGNUP_TITLE:["Upload your photos securely and privately!"],UPLOAD_MODAL_SIGNUP_MESSAGE:["Join Flickr to unlock 1,000GB of free photo storage."]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-footer-full",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+='\n<div class="foot-mobile-banner">\n	<a class="server-only-link" href="',(i=n.pageUrl)?i=i.call(e,{hash:{},data:t}):(i=e.pageUrl,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',s={hash:{intlName:"common.TRY_MDOT"},data:t},r+=f((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+"</a>\n</div>\n",r}function p(e,t){var r="",i;return r+='\n				<li class="foot-li">\n					<a class="opt-out-www server-only-link" href="',(i=n.pageUrl)?i=i.call(e,{hash:{},data:t}):(i=e.pageUrl,i=typeof i===a?i.apply(e):i),r+=f(i)+'">flickr.com</a>\n				</li>\n				',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this;o=n["if"].call(t,t.isOptedOutOfMobile,{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(o||o===0)s+=o;s+='\n<footer class="foot">\n	<div class="foot-container">\n		<div class="foot-top-row">\n			<ul class="foot-nav-ul">\n\n				',o=n["if"].call(t,t.hasNoOptOut,{hash:{},inverse:c.noop,fn:c.program(3,p,i),data:i});if(o||o===0)s+=o;return s+='\n\n				<li class="foot-li"><a href="/about">',u={hash:{intlName:"common.ABOUT"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n				<li class="foot-li"><a href="/jobs">',u={hash:{intlName:"common.JOBS"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n				<li class="foot-li"><a href="//blog.flickr.net/en">',u={hash:{intlName:"common.BLOG"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n				<li class="foot-li"><a href="//mobile.yahoo.com/flickr">',u={hash:{intlName:"common.MOBILE"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n				<li class="foot-li"><a href="/services/developer">',u={hash:{intlName:"common.DEVELOPERS"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n				<li class="foot-li"><a href="/help/guidelines">',u={hash:{intlName:"common.GUIDELINES"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n				<li class="foot-li"><a href="//yahoo.uservoice.com/forums/211185-us-flickr">',u={hash:{intlName:"common.FEEDBACK"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n				<li class="foot-li"><a href="/abuse">',u={hash:{intlName:"common.REPORT_ABUSE"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n				<li class="foot-li"><a href="/help/forum">',u={hash:{intlName:"common.HELP_FORUM"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n\n				<li class="foot-li lang-switcher">\n					<a href="/change_language.gne?lang='+f((o=(o=t.selectedLang,o==null||o===!1?o:o.code),typeof o===a?o.apply(t):o))+"&csrf="+f((o=(o=t.selectedLang,o==null||o===!1?o:o.csrf),typeof o===a?o.apply(t):o))+'">'+f((o=(o=t.selectedLang,o==null||o===!1?o:o.name),typeof o===a?o.apply(t):o))+'</a>\n					<span class="arrow"></span>\n				</li>\n			</ul>\n		</div>\n		<div class="foot-bottom-row">\n			<div class="foot-yahoo">\n				<ul class="foot-nav-ul">\n					<li class="foot-li"><a href="//info.yahoo.com/privacy/us/yahoo/flickr/details.html">',u={hash:{intlName:"common.PRIVACY"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n					<li class="foot-li"><a href="/help/terms">',u={hash:{intlName:"common.TERMS"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n					<li class="foot-li"><a href="//safely.yahoo.com">',u={hash:{intlName:"common.YAHOO_SAFELY"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n					<li class="foot-li"><a href="//help.yahoo.com/kb/flickr">',u={hash:{intlName:"common.HELP"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):l.call(t,"intlMessage",u)))+'</a></li>\n				</ul>\n			</div>\n\n			<div class="foot-company">\n				',u={hash:{intlName:"common.A_YAHOO_COMPANY_WITH_LINK"},data:i},s+=f((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,u):l.call(t,"intlHTMLMessage",u)))+'\n			</div>\n\n			<div class="foot-social">\n				<ul class="foot-nav-ul">\n					<li><a target="_blank" href="http://flickr.tumblr.com/">\n						<svg class="ft-icon ft-tumblr"><use xlink:href="#icon-tumblr"></use></svg>\n					</a></li>\n					<li><a target="_blank" href="https://www.facebook.com/flickr">\n						<svg class="ft-icon ft-facebook"><use xlink:href="#icon-facebook"></use></svg>\n					</a></li>\n					<li><a target="_blank" href="https://twitter.com/flickr">\n						<svg class="ft-icon ft-twitter"><use xlink:href="#icon-twitter"></use></svg>\n					</a></li>\n					<li><a target="_blank" href="https://plus.google.com/+flickr">\n						<svg class="ft-icon ft-googleplus"><use xlink:href="#icon-google"></use></svg>\n					</a></li>\n				</ul>\n			</div>\n		</div>\n	</div>\n</div>\n',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/footer-full",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("dropdown",function(e){"use strict";var t,n;t={css:{closed:"ui-dropdown-closed",shim:"ui-dropdown-shim",label:'span[data-action="toggle"]',items:"[data-value]",itemSelected:"ui-dropdown-item-selected",hasDialogArrow:"ui-dropdown-has-dialog-arrow",dialogArrow:"ui-dialog-arrow",useCheckMarks:"ui-dropdown-use-checkboxes"},options:{hasDialogArrow:!1,useCheckMarks:!1}},e.namespace("Views").Dropdown=n=e.Base.create("Dropdown",e.FlickrView,[],{initializer:function(e){if(e.activate===!1)return;this.activate()},activate:function(){var n=this,r=this.get("container"),i;this.close(),this._items={},e.Lang.isArray(this.get("selected"))||this.set("selected",[this.get("selected")]),r.all(t.css.items).each(function(e){var t=e.getData();n._items[t.value]={text:t.text||'no data-text for "'+t.value+'"',sub:t.sub,node:e}}),this.labelEl=r.one(t.css.label),this.labelEl||(this.labelEl=e.Node.create('<span class="truncate" data-action="toggle" />'),r.insert(this.labelEl,0)),i=this.get("staticLabel")||this.get("defaultLabel"),i&&(i===!0?this.labelEl.set("text","set staticLabel/defaultLabel to a string, not `true`"):this.labelEl.set("text",i)),this.get("hasDialogArrow")&&!r.hasClass(t.css.hasDialogArrow)&&r.addClass(t.css.hasDialogArrow),r.hasClass(t.css.hasDialogArrow)&&(this.dialogArrowEl=r.one(t.css.dialogArrow),this.dialogArrowEl||(this.dialogArrowEl=e.Node.create('<span class="ui-dialog-arrow" />'),r.insert(this.dialogArrowEl,1))),this.get("useCheckMarks")&&!r.hasClass(t.css.useCheckMarks)&&r.addClass(t.css.useCheckMarks),this.select();if(this.get("disabled"))return this.disable();this.attachEvents({":toggle":this.toggle.bind(this),":set":function(t,r){t.halt();if(!n.get("multiSelect")&&!n.get("multiSelectSub")&&e.Array.indexOf(n.get("selected"),r.value)>=0)return n.close();n.select(r.value,r)}})},select:function(n,r,i){var s=this,o=n?this._items[n]:null,u=!0,a=[],f;o&&e.Array.indexOf(this.get("selected"),n)>=0&&(this.get("multiSelect")||this.get("multiSelectSub"))?(a=this.get("selected"),!o.sub&&this.get("multiSelect")&&a.length>this.get("minimumSelected")?(a.splice(e.Array.indexOf(this.get("selected"),n),1),u=!1):o.sub&&(a.splice(e.Array.indexOf(this.get("selected"),n),1),u=!1),this.set("selected",a)):o&&(o.sub?(a.push(n),this.get("selectParent")&&a.push(o.sub),e.Array.each(this.get("selected"),function(e){s._items[e].sub===o.sub?a.push(e):s.get("multiSelect")&&!s._items[e].sub&&a.push(e)})):this.get("multiSelect")?(a=this.get("selected"),a.push(n)):a.push(n),this.set("selected",a)),i||this.close(),f={clicked:o?{text:o.text,value:n,sub:o.sub,itemEl:o.node,isChecked:u}:null,data:r,selections:a},this.fire("selected",f),this.update(n,f,t)},update:function(t,n,r){var i=this,s=n.clicked,o=this.get("selected"),u=this.get("defaultLabel")||"[Unable to select a default item]";this.get("staticLabel")||(this.get("labelFunction")?u=this.get("labelFunction").apply(this,[t]):s?n.data&&n.data.text&&n.data.text!==s.text?u=n.data.text:u=s.text:o.length>0&&i._items[o[0]]&&(u=i._items[o[0]].text),this.labelEl.set("textContent",u||"[!empty data-text!]")),this.get("container").all(r.css.items).removeClass(r.css.itemSelected),e.Array.each(o,function(e){i._items[e]&&i._items[e].node.addClass(r.css.itemSelected)})},toggle:function(e){e&&e.halt(),this._open?this.close(e):this.open(e)},open:function(e){var n=this.get("container"),r=0,i=0,s=30;this._open=!0,this.get("shouldCreateShim")&&this._shimUp(),n.removeClass(t.css.closed),this.get("autoSizeMenu")&&(r=parseInt(this.labelEl.getComputedStyle("width"),10),i=parseInt(n.one("ul").getComputedStyle("width"),10),r+s>i&&n.one("ul").setStyles({width:r+s})),(!e||!e.silent)&&this.fire("open",e)},close:function(e){e&&e.halt(),this._open=!1,this._shimUp(!1),this.fire("close",e),this.get("container").addClass(t.css.closed)},_shimUp:function(n){if(n===!1){if(!this._shim)return;this._shim.detach("click").remove(),this._shim=null;return}this._shim=e.Node.create("<div />"),this._shim.addClass(t.css.shim),this._shim.on("click",this.close.bind(this)),this.get("container").appendChild(this._shim)},disable:function(){var e=this.get("container");this.set("disabled",!0),this.close(),e.addClass(t.css.disabled),e.detach()},destructor:function(){this._shimUp(!1),this._items=null,this.labelEl=null,this.set("selected",null),this.detachAll()}},{ATTRS:{selected:{value:[]},disabled:{value:!1},hasDialogArrow:{value:!1},useCheckMarks:{value:!1},multiSelect:{value:!1},multiSelectSub:{value:!1},selectParent:{value:!0},minimumSelected:{value:0},staticLabel:{value:!1},defaultLabel:{value:!1},labelFunction:function(){},shouldCreateShim:{value:!0},autoSizeMenu:{value:!0}}})},"@VERSION@",{requires:["flickr-view","flickrui-css"]});
YUI.add("footer-full-view",function(e){var t=["en-US","zh-HK","de-DE","es-US","fr-FR","ko-KR","it-IT","pt-BR","vn-VN","id-ID"],n={"en-US":"English","de-DE":"Deutsch","es-US":"Espa\u00f1ol","fr-FR":"Fran\u00e7ais","ko-KR":"\ud55c\uae00","it-IT":"Italiano","pt-BR":"Portugu\u00eas","vn-VN":"Ti\u1ebfng Vi\u1ec7t","id-ID":"Bahasa Indonesia","zh-HK":"\u7e41\u9ad4\u4e2d\u6587"};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML('<div class="footer-full-content"></div>'),this.appStateParams=e,this.set("hideOptOutBanner",e.hideOptOutBanner),this.set("showOptOutBanner",e.showOptOutBanner),this.set("hideMobileBanner",e.hideMobileBanner),this},subviewConfig:{},loadState:function(){var r,i,s;s=this.appContext.auth&&this.appContext.auth.csrf?this.appContext.auth.csrf:"",this.lang=this.appContext.lang,this.menuLangs=[],this.lang==="zh-Hant-HK"&&(this.lang="zh-HK"),this.lang.toLowerCase()==="vi-vn"&&(this.lang="vn-VN"),this.selectedLang={code:this.lang,name:n[this.lang],csrf:s};for(r=0,i=t.length;r<i;r++){if(t[r]===this.lang)continue;typeof t[r]=="string"&&this.menuLangs.push({code:t[r].toLowerCase(),name:n[t[r]],csrf:s})}return e.Promise.resolve()},buildContainer:function(){var t={},n={},r=this.appContext.flipper.toJSON();return this.get("viewer")&&(t=e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))})),n={flippers:r,displayLangs:this.displayLangs,selectedLang:this.selectedLang,menuLangs:this.menuLangs},YUI.Env.isServer?n.pageUrl=this.appContext.request.url:n.pageUrl=window.location.pathname,this.appContext.getCookie("mobile_allow_www")&&!this.appStateParams.hideMobileBanner?n.isOptedOutOfMobile=!this.get("hideMobileBanner"):!this.appContext.getCookie("mobile_allow_www")&&this.get("hideMobileBanner")&&(n.hasNoOptOut=!0),this.setContainerHTML(this.templates("footer-full")(n)),this},activate:function(){var t=this.get("container"),n=t.one(".lang-switcher"),r=n.one("a"),i=t.one(".foot-mobile-banner a"),s=t.one(".opt-out-www");return this.menuLangsFormatted=this.menuLangs.map(function(e){return{href:"/change_language.gne?lang="+e.code+"&csrf="+e.csrf,text:e.name}}),this.registerEventHandler(n.on("click",function(t){t.preventDefault(),r.addClass("dimmed");var i=new e.Views.FluidDroparound({anchorOffsetHorizontal:n.get("offsetWidth"),appContext:this.appContext,showDropArrow:!0,observePageResize:!0,dismissOnOverlayClick:!0,anchorElement:n.one(".arrow"),classList:["lang-droparound"],menuItems:this.menuLangsFormatted});i.show(),this.registerEventHandler(i.on("closeDroparound",function(e){r.removeClass("dimmed")}),this)},this)),i&&this.registerEventHandler(i.on("click",function(e){this.appContext.removeCookie({cookieName:"mobile_allow_www",path:"/"})},this)),s&&this.registerEventHandler(s.on("click",function(e){this.appContext.setCookie({cookieName:"mobile_allow_www",path:"/",cookieValue:1})},this)),this}})},"@VERSION@",{requires:["flickr-view","hermes-template-footer-full","footer-full-css","url-helper","flickrui-css","flickrui-dialogs-css","dropdown","fluid-droparound-view"],langBundles:["common"]});
YUI.add("sohp-view",function(e){var t,n,r;r=["4075193021","5375612810","4399421724","17091151376"],t=[{url:e.config.flickr.urls.assetRoot+"/images/sohp/hero/carlin-gill-valley3.jpg",userURL:"/photos/26107852@N07",id:"16917869541",title:"Carlin Gill Valley, The Howgill Fells (Explored).",userName:"Steve Thompson",profilePicURL:"https://c4.staticflickr.com/4/3070/buddyicons/26107852@N07.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/hero/lax-den3.jpg",userURL:"/photos/gilad_rom",id:"9513871628",title:"Lax-Den",userName:"Gilad Rom",profilePicURL:"https://c4.staticflickr.com/8/7761/buddyicons/9464116@N08_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/hero/persist3.jpg",userURL:"/photos/send_your_spam",id:"13818125963",title:"p e r s i s t | lofoten, norway",userName:"Lorenzo Montezemolo",profilePicURL:"https://c4.staticflickr.com/8/7325/buddyicons/22461382@N00_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/hero/havasu-falls-at-night3.jpg",userURL:"/photos/pinks2000",id:"14604733850",title:"Havasu Falls at night",userName:"Wayne Pinkston",profilePicURL:"https://c4.staticflickr.com/4/3735/buddyicons/70992083@N07_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/hero/wild-camp3.jpg",userURL:"/photos/thomasheaton",id:"16849991617",title:"Wild Camp | Place Fell",userName:"Thomas Heaton",profilePicURL:"https://c1.staticflickr.com/9/8835/buddyicons/45992839@N04.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/hero/wildsee-pizol3.jpg",userURL:"/photos/jn_insta",id:"15150890475",title:"Wildsee Pizol / Switzerland",userName:"jn.x a.k.a. jn",profilePicURL:"https://c1.staticflickr.com/9/8250/buddyicons/13562660@N07.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/hero/artic-sky3.jpg",userURL:"/photos/halkaphoto",id:"17143752776",title:"Arctic Sky",userName:"Waldemar Halka",profilePicURL:"https://c1.staticflickr.com/9/8126/buddyicons/39548242@N03_l.jpg"}],n=[{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/dave3.jpg",userURL:"/photos/davefearon",id:"15118079089",title:"263/365",userName:"Dave Fearon",profilePicURL:"https://c4.staticflickr.com/8/7687/buddyicons/24858431@N07_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/bliss3.jpg",userURL:"/photos/kaizhiwei",id:"16270241813",title:"bliss",userName:"Kaizhi Wei",profilePicURL:"https://c4.staticflickr.com/8/7637/buddyicons/109221824@N05_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/crs43.jpg",userURL:"/photos/spacexphotos",id:"16661753958",title:"CRS-4",userName:"SpaceX Photos",profilePicURL:"https://c4.staticflickr.com/8/7670/buddyicons/130608600@N05_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/love-rock3.jpg",userURL:"/photos/sarakbyrne",id:"14779165037",title:"Love Rock",userName:"Sara+Dylan www.dylandsara.com",profilePicURL:"https://c2.staticflickr.com/6/5478/buddyicons/25447600@N02_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/lucas-at-pipe3.jpg",userURL:"/photos/mcsnowhammer",id:"15544928843",title:"Lucas at Pipe",userName:"Mattias Hammar",profilePicURL:"https://c2.staticflickr.com/6/5537/buddyicons/51291947@N07_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/dave3.jpg",userURL:"/photos/davefearon",id:"15118079089",title:"263/365",userName:"Dave Fearon",profilePicURL:"https://c4.staticflickr.com/8/7687/buddyicons/24858431@N07_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/on-top-of-the-world3.jpg",userURL:"/photos/kossity",id:"16519756500",title:"On top of the World",userName:"Frederic Huber",profilePicURL:"https://c2.staticflickr.com/6/5512/buddyicons/67560866@N02_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/a-night-on-a-bridge3.jpg",userURL:"/photos/thomashawk",id:"16130515286",title:"A Night on a Bridge",userName:"Thomas Hawk",profilePicURL:"https://c4.staticflickr.com/8/7370/buddyicons/51035555243@N01_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/jumping-for-sand3.jpg",userURL:"/photos/heatherpeaches",id:"8113176547",title:"Jumping for Sand *Featured in Flickr Blog*",userName:"Heather West",profilePicURL:"https://c4.staticflickr.com/4/3796/buddyicons/75008327@N06_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/sage3.jpg",userURL:"/photos/kylesipple",id:"16904985338",title:"Sage",userName:"Kyle Sipple",profilePicURL:"https://c4.staticflickr.com/4/3935/buddyicons/76769389@N02_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/lake-tahoe3.jpg",userURL:"/photos/ryananthony87",id:"9721666988",title:"Lake Tahoe",userName:"Ryan Verissimo",profilePicURL:"https://c1.staticflickr.com/9/8801/buddyicons/45237696@N04_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/night-sky3.jpg",userURL:"/photos/buzz_rozwell",id:"15171603905",title:"Night Sky & Treeline",userName:"Atmospherics",profilePicURL:"https://c4.staticflickr.com/4/3876/buddyicons/82664172@N00_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/solar-storm3.jpg",userURL:"/photos/buzz_rozwell",id:"16930877875",title:"Solar Storm",userName:"Atmospherics",profilePicURL:"https://c4.staticflickr.com/4/3876/buddyicons/82664172@N00_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/untitled3.jpg",userURL:"/photos/designedwithsam",id:"15758965343",title:"Untitled",userName:"SamAlive",profilePicURL:"https://c4.staticflickr.com/4/3950/buddyicons/36537682@N06_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/sunrise-at-vermillion3.jpg",userURL:"/photos/todaymightbe",id:"16234113498",title:"sunrise at vermillion. mt rundle. banff, alberta.",userName:"Tanner Wendell Stewart",profilePicURL:"https://c2.staticflickr.com/6/5453/buddyicons/8247753@N07_l.jpg"},{url:e.config.flickr.urls.assetRoot+"/images/sohp/inspiration/getting-the-shot3.jpg",userURL:"/photos/kitkit201",id:"17343679451",title:"Getting The Shot",userName:"Wilson Lam",profilePicURL:"https://c4.staticflickr.com/8/7317/buddyicons/15721381@N00_l.jpg"
}],e.namespace("Views")[this.name]=e.Base.create("sohp-view",e.FlickrView,[],{langBundles:this.details.langBundles,additionalViewClasses:function(){var e=[],t=this.getOS();return(t==="ios"||t==="android")&&e.push(t),e},initializer:function(e){return this.heroImages=t.concat(),this.inspirationImages=n.concat(),this.usedHeroImages=[],this.usedInspirationImages=[],this.heroImage=this.pickHeroImage(),this.inspirationImage=this.pickInspirationImage(),this},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},loadState:function(){return e.Promise.resolve()},buildHeadContainer:function(){var e="",t;t="https://farm4.staticflickr.com/3914/15118079089_489aa62638_b.jpg",e+=this.templates("head-meta")({isName:!0,metaName:"viewport",metaValue:"width=device-width, initial-scale=1, maximum-scale=1"}),e+=this.templates("head-meta")({isName:!0,metaName:"apple-itunes-app",metaValue:"app-id=328407587"}),e+=this.templates("head-link")({rel:"canonical",href:"https://www.flickr.com"}),e+=this.templates("head-link")({rel:"alternative",media:"only screen and (max-width: 700px)",href:"https://m.flickr.com"}),e+='<meta property="title" content="'+this.intlMessage({intlName:"sohp.PAGE_TITLE"})+'"  data-dynamic="true"/>',e+='<meta property="description" content="'+this.intlMessage({intlName:"sohp.PAGE_DESCRIPTION"})+'"  data-dynamic="true"/>',e+='<meta property="og:title" content="'+this.intlMessage({intlName:"common.A_YAHOO_COMPANY"})+'"  data-dynamic="true"/>',e+='<meta property="og:type" content="website"  data-dynamic="true"/>',e+='<meta property="og:description" content="'+this.intlMessage({intlName:"common.FLICKR_IS_ALMOST_CERTAINLY"})+'"  data-dynamic="true"/>',e+='<meta property="og:image" content="'+t+'"  data-dynamic="true"/>',e+='<meta name="twitter:card" content="summary_large_image"  data-dynamic="true">',e+='<meta name="twitter:creator" content="@flickr"  data-dynamic="true">',e+='<meta name="twitter:title" content="'+this.intlMessage({intlName:"common.A_YAHOO_COMPANY"})+'"  data-dynamic="true">',e+='<meta name="twitter:description" content="'+this.intlMessage({intlName:"common.FLICKR_IS_ALMOST_CERTAINLY"})+'"  data-dynamic="true">',e+='<meta name="twitter:image:src" content="'+t+'"  data-dynamic="true">',this.set("headContainer",e),YUI.Env.isServer||this.updateHead()},getTrackingSegments:function(){return{photo:e.one(".main-bucket").getData().photourl}},buildContainer:function(){var t,n=50,r=600,i=this.appContext.viewportData.getHeight(),s=i===0;return s&&(r=960),this.isMobile()&&(r=600),t={"global-nav-view":this.subviews["global-nav-view"].get("container"),"footer-full-view":this.subviews["footer-full-view"].get("container"),hackTheHeight:s,screenHeight:Math.max(r,i-n),inspirationHeight:Math.min(960,i-n),"hero-image":this.heroImage,"inspiration-image":this.inspirationImage,assetRoot:e.config.flickr.urls.assetRoot},this.setContainerHTML(this.templates("sohp")(t)),this},isMobile:function(){var t=!1;return YUI.Env.isServer?t=e.BrowserSupport.isMobileBrowser(this.appContext.request.headers["user-agent"]):t=e.BrowserSupport.isMobileBrowser(e.UA.userAgent),t},getOS:function(){var t;return YUI.Env.isServer?t=e.BrowserSupport.getOSString(this.appContext.request.headers["user-agent"]):t=e.UA.os,String(t).toLowerCase()},activate:function(){var t=this,n=this.get("container");return this.addView(this.heroImage),this.registerEventHandler(e.globalEvents.subscribe("window:resize",t.handlePageResize.bind(t))),this.registerEventHandler(n.one(".inspiration-bucket .hollow").on("click",t.loadNewInspiration.bind(t))),this.registerEventHandler(n.one(".main-bucket .refresh").on("click",t.loadNewHero.bind(t))),this.loadRestOfPageImages(),this},loadRestOfPageImages:function(){var t=this,n=this.get("container"),i=n.one(".main-bucket"),s=n.one(".space-bucket"),o=n.one(".platforms-bucket"),u=n.one(".search-bucket"),a=n.one(".inspiration-bucket"),f=a.one(".attribution"),l=n.one(".bottom-bucket .background"),c=50;s.setStyles({backgroundImage:"url("+e.config.flickr.urls.assetRoot+"/images/sohp/backgrounds/space4.jpg)"}),s.one(".stack").setStyles({backgroundImage:"url("+e.config.flickr.urls.assetRoot+"/images/sohp/photo-stack2.png)"}),o.setStyles({backgroundImage:"url("+e.config.flickr.urls.assetRoot+"/images/sohp/backgrounds/platforms5.jpg)"}),u.setStyles({backgroundImage:"url("+e.config.flickr.urls.assetRoot+"/images/sohp/backgrounds/search3.jpg)"}),a.setStyles({backgroundImage:"url("+this.inspirationImage.url+")"}),f.one(".profile-pic").setStyles({backgroundImage:"url("+this.inspirationImage.profilePicURL+")"}).setAttribute("href",this.inspirationImage.userURL),f.one(".username a").set("text",this.inspirationImage.userName).setAttribute("href",this.inspirationImage.userURL),f.one(".photo-title a").set("text",this.inspirationImage.title).setAttribute("href",this.inspirationImage.userURL),l.setStyles({backgroundImage:"url("+e.config.flickr.urls.assetRoot+"/images/sohp/backgrounds/bottom5.jpg)"}),i.hasClass("hack-the-height")&&(n.addClass("hack-the-height"),i.setStyles({height:e.config.win.innerHeight-c})),n.addClass("peek-a-boo"),r.forEach(function(e){t.addView({id:e})}),this.addView(this.inspirationImage),setTimeout(function(){this.preloadImages()}.bind(this),500)},preloadImages:function(){var e=this;e.preloadImage(n[0],0)},preloadImage:function(e,t){function s(){var e=t+1;t<n.length-1&&n[e]&&i.preloadImage(n[e],e)}var r=new Image,i=this;r.onerror=function(){s()},r.onload=function(){s()},r.src=e.url},addView:function(e){if(this.appContext.flipper.isFlipped("enable-sohp-view-counting"))return this.appContext.getViewCounter().queue(e.id)},loadNewHero:function(e){e.halt(),this.heroImage=this.pickHeroImage();var t=this.get("container"),n=t.one(".main-bucket"),r=n.one(".attribution");n.setStyles({backgroundImage:"url("+this.heroImage.url+")"}),r.one(".profile-pic").setStyles({backgroundImage:"url("+this.heroImage.profilePicURL+")"
}).setAttribute("href",this.heroImage.userURL),r.one(".username a").set("text",this.heroImage.userName).setAttribute("href",this.heroImage.userURL),r.one(".photo-title a").set("text",this.heroImage.title).setAttribute("href",this.heroImage.userURL),this.addView(this.heroImage)},loadNewInspiration:function(t){t.halt(),this.inspirationImage=this.pickInspirationImage();var n=this.get("container"),r=n.one(".inspiration-bucket"),i=r.one(".attribution");r.setStyles({backgroundImage:"url("+this.inspirationImage.url+")"}),i.one(".profile-pic").setStyles({backgroundImage:"url("+this.inspirationImage.profilePicURL+")"}).setAttribute("href",this.inspirationImage.userURL),i.one(".username a").set("text",this.inspirationImage.userName).setAttribute("href",this.inspirationImage.userURL),i.one(".photo-title a").set("text",this.inspirationImage.title).setAttribute("href",this.inspirationImage.userURL),this.addView(this.inspirationImage),e.rapidTracker.beacon(this.name,"inspireme")},pickHeroImage:function(){var e=this.heroImages.length,n,r;return e===0&&(this.heroImages=t.concat(),this.usedHeroImages=[]),n=Math.floor(Math.random()*e),r=this.heroImages[n],this.heroImages.splice(n,1),this.usedHeroImages.push(r),r},pickInspirationImage:function(){var e=this.inspirationImages.length,t,r;return e===0&&(this.inspirationImages=n.concat(),this.usedInspirationImages=[]),t=Math.floor(Math.random()*e),r=this.inspirationImages[t],this.inspirationImages.splice(t,1),this.usedInspirationImages.push(r),r},handlePageResize:function(e){var t=this.get("container"),n=t.one(".main-bucket"),r=t.one(".inspiration-bucket"),i=this.appContext.viewportData.getHeight(),s=parseInt(t.one(".global-nav-view").getComputedStyle("height"),10),o=600,u=960;t.hasClass("hack-the-height")&&t.removeClass("hack-the-height"),t.replaceClass("peek-a-boo","peek-a-boo-perm"),n.setStyles({height:Math.max(o,i-s)+"px"}),r.setStyles({height:Math.min(u,i-s)+"px"})}},{ATTRS:{spaceid:{value:792600582,readOnly:!0}}})},"@VERSION@",{requires:["flickr-view","flog","flickr-promise","hermes-template-sohp","hermes-template-head-meta","hermes-template-head-link","sohp-css","global-nav-view","footer-full-view","url","browser-support"],langBundles:["common","sohp"]});
YUI.add("hermes-lang-client-app",function(e,t){e.Intl.add("hermes/client-app","en-US",{SAVING_LAST_ACTIONS:["Hey! We\u2019re still saving your last actions, you might lose them if you leave this page."],UPLOAD_IN_PROGRESS:["Wait! Your photos are still on the way to our servers. They might not get there if you leave this page before they arrive."]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-lang-sohp",function(e,t){e.Intl.add("hermes/sohp","en-US",{MAIN_BUCKET_HEADLINE:["Flickr. The home for all your photos."],MAIN_BUCKET_BODY:["Upload, access, organize, edit, and share your photos from any device, from anywhere in the world."],SIGN_UP_WITH_YAHOO:["Sign up with Yahoo"],SPACE_BUCKET_HEADLINE:["Never delete a photo again"],SPACE_BUCKET_BODY:["Get 1,000GB of free photo storage. We\u2019ll even help you automatically backup your entire collection."],PLATFORMS_BUCKET_HEADLINE:["Your photos from anywhere"],PLATFORMS_BUCKET_BODY:["Wherever you go your photos will follow you. See, edit, and share with our award-winning apps."],LEARN_MORE:["Learn more"],SEARCH_BUCKET_HEADLINE:["A quantum leap in search"],SEARCH_BUCKET_BODY:["We've made strides with photo search. It's now the fastest, easiest way to find the exact photo you want."],INSPIRATION_BUCKET_HEADLINE:["Breath-taking inspiration"],INSPIRATION_BUCKET_BODY:["Find beautiful photos shared by a community of amateur and professional photographers."],TAKE_MY_BREATH_AWAY:["Take my breath away"],GET_STARTED_WITH_STORAGE:["Get started with your free 1,000GB of photo storage"],INSPIRE_ME:["Inspire me"],PAGE_TITLE:["Flickr | The home for all your photos | Get 1,000GB free photo storage"],PAGE_DESCRIPTION:["The home for all your photos.  Upload, access, organize, edit, and share your photos from any device, from anywhere in the world.  Get 1,000GB of photo storage free."]})},"@VERSION@",{requires:["intl"]});
