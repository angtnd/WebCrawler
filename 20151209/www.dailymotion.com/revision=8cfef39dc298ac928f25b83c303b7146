!function(){"use strict";function t(e){t.timer?t.callbacks.push(e):(t.callbacks=[],t.timer=setTimeout(function(){t.timer=void 0;var e=t.callbacks;o.console.log("setImmediate(): #"+e.length);for(var i=0;i<e.length;i++)e[i]()},0))}function e(t,e){this.pmData=t,this.options=e||{};var a=t.saleMode,l=setInterval(function(){h=piximedia.pmData5418_1&&piximedia.pmData5418_1.adIdAlliance===parseFloat(t.adIdAlliance,10)?!0:!1,i=h?piximedia.pmData5418_1:{},n++,(h||100===n)&&clearInterval(l)},50),n=0;t.minEngagementTime=t.minEngagementTime?parseInt(t.minEngagementTime,10):0,t.minExposureTime=t.minExposureTime?parseInt(t.minExposureTime,10):0,"cpc"===a&&t.minEngagementTime>0?a="cpc":"cpm"===a&&t.minExposureTime>0&&(a="cpmview"),this.salemode=a,o.piximedia.PAM.EventEmitter.forObject(this)}var i,o=window,a=100,l=1500,n=100,r=1500,p=4e3,s=250,c=.5,d=100,m=250,u=250,h=!1;e.prototype.start=function(){var t=this.pmData,e=t.framedAd,l=e.pam;e&&e.args&&e.args.doNotScaleAllpapr&&(t.doNotScaleAllpapr=e.args.doNotScaleAllpapr);var n=this;if(this.framedPam=l,window.piximedia["pmData"+t.creativeIdAlliance+"_1"]=t,t.tracking&&t.tracking.clickUrl)for(var r=0;r<t.tracking.clickUrl.length;r++)t.clickUrl[r].url=t.tracking.clickUrl[r];if(t.tracking&&t.tracking.pixelUrl)for(var p=0;p<t.tracking.pixelUrl.length;p++)t.pixelUrl[p]=t.tracking.pixelUrl[p];"string"==typeof t.clickUrl[0].url&&t.clickUrl.unshift(""),n.pmData.allpapr_custom&&(n.pmData.allpapr_custom.clickindex=n.pmData.allpapr_custom.clickindex&&t.clickUrl[n.pmData.allpapr_custom.clickindex]&&t.clickUrl[n.pmData.allpapr_custom.clickindex].url?n.pmData.allpapr_custom.clickindex:1),l.loadLibrary("sweetlib.js",function(){var r,p,s=!1,c=!0,d=o.piximedia.SweetLib,m=d.log,u=t.openmode;e.inject(((e||{}).args||{}).primary_position||n.pmData.position||"wallpaper",{},function h(y,f,g,v){function b(){return t.pub_cc+t.clickUrl[n.pmData.allpapr_custom.clickindex].tracking+t.clickUrl[n.pmData.allpapr_custom.clickindex].url}function _(){var e=n.pmData.allpapr_custom?n.pmData.allpapr_custom.clickindex:1;t.clickUrl[e].custom&&d.track(t,"CLICK_OOB",n.pmData.allpapr_custom.position,t.clickUrl[e].custom);var i=g.clickUrl+(n.pmData&&n.pmData.clickUrl&&n.pmData.clickUrl[e]&&n.pmData.clickUrl[e].tracking?n.pmData.clickUrl[e].tracking:"")+(g.advertiserClickUrl||(n.pmData&&n.pmData.clickUrl&&n.pmData.clickUrl[e]&&n.pmData.clickUrl[e].url?n.pmData.clickUrl[e].url:""));return o.open(i,"_blank"),!0}function k(e,i,o,a){if(m("setStage call %s, %s %s",i,o,a),"tracking"===i)d.track(n.pmData,o,a&&"!!"!==a?a:"");else switch(i){case"show":k(!1,"tracking","AP_EXPAND",a),K&&(K.style.display="none"),l.createAnimation("#pmFiller",{duration:1e3,height:n.pmData.allpapr_custom.arch_height_expand*ot}).play(),X.style.display="block";var r=function(){if(W.play(),P&&P.play(),u&&t.openmode_timer){u=!1,it.style.display="block",it.style.marginLeft="-"+d.gbcr(it).width/2+"px";var e=n.pmData.openmode_timer.openmode_value;p=setInterval(function(){return e--,y.getElementById("auto_open_button_text").innerHTML=n.pmData.openmode_timer.openmode_timer_text+e,0>e?(p&&clearInterval(p),it.style.display="none",void k(!1,"hide")):void 0},1e3),d.addEvent(it,"click",function(){p&&clearInterval(p),it.style.display="none"})}};n.pmData.allpapr_video.no_display_animation?(Q.style.opacity=1,et.style.display="block",J.style.opacity=1,$.style.width=n.pmData.allpapr_video.video_front_width*ot+"px",r()):d.animate(Q,{duration:1e3,opacity:1,onplayed:function(){et.style.display="block",d.animate(J,{duration:1e3,opacity:1}).play(),d.animate($,{width:n.pmData.allpapr_video.video_front_width*ot,duration:1e3,onplayed:r}).play()}}).play();break;case"close":case"hide":"close"===i?k(!1,"tracking","AP_CLOSE",a):k(!1,"tracking","AP_COLLAPSE",a),W.pause(),K&&(K.style.display="block"),u=!1,p&&clearInterval(p),it.style.display="none",l.createAnimation("#pmFiller",{height:n.pmData.allpapr_custom.arch_height*ot}).play(),d.animate(X,{opacity:0,onplayed:function(){X.style.display="none",X.style.opacity="1",X.style.filter="alpha(opacity=100)",Q.style.opacity="0",Q.style.filter="alpha(opacity=0)",J.style.opacity="0",J.style.filter="alpha(opacity=0)",$.style.width="0px",W.play(0),W.pause(),P&&(P.play(0),P.pause()),it.style.display="none"}}).play()}}f.piximedia=o.piximedia,y.write("<script>function sendMessage(event) { return document.getElementsByTagName('iframe')[0].contentWindow.postMessage(event, '*'); }</script>");var x={};if(t.object=x,t.pub_cc=g.clickUrl&&g.clickUrl.match(/\/\/|http/)?g.clickUrl:"",o.pmGetUrl=b,o.click=_,o.setStage=k,c&&0===g.injectionIndex)for(var w=t.pixelUrl||[],D=0;D<w.length;D++)d.PixelPrinter(w[D]);t.css&&d.each(t.css,function(){""!==this.selector&&""!==this.rule&&d.createCSS(this.selector,this.rule,y)});var T=!1;v.emit("register-visibility-callback",{callback:"visibility-changed",threshold:70}),v.on("visibility-changed",function(t){T=t});var A={5:!0,10:!0,20:!0,30:!0,40:!0},I=0;if(setInterval(function(){T&&I++,A[I]&&(A[I]=!1,d.track(t,"AP_VIEWABLE_GLOBAL:"+I+"S"))},1e3),"cpmview"===n.salemode){e.on("ad-unit-visible",function(){T||C++});var S=setInterval(function(){T&&C++,C>=t.minExposureTime&&!E&&(E=!0,clearInterval(S),e.sendCpmviewClick())},1e3),C=0,E=!1}n.iframe=v,n.injectedDocument=y,n.injectedWindow=f;var L=l.globalOptions.location,N=n.options.wallpaper,B="video-dailymotion"===n.pmData.allpapr.type?N:n.options.video,U=n.options&&n.options.iframe?n.options.iframe.file:void 0;N||(N=L.match(/movetop4.html/)?{top:{asset:"http://resources.pm/sandbox/inline/frozentop.jpg",width:1795,height:195,mode:"stretch"},left:{asset:"http://resources.pm/sandbox/inline/any.jpg",width:170,height:679},right:{asset:"http://resources.pm/sandbox/inline/any.jpg",width:170,height:679}}:L.match(/movetop3.html/)?{top:{asset:"http://resources.pm/sandbox/inline/frozentop.jpg",width:1795,height:195,mode:"center"},left:{asset:"http://resources.pm/sandbox/inline/any.jpg",width:170,height:679},right:{asset:"http://resources.pm/sandbox/inline/any.jpg",width:170,height:679}}:L.match(/movetop2.html/)?{left:{asset:"http://resources.pm/sandbox/inline/left.jpg",width:500,height:1080},right:{asset:"http://resources.pm/sandbox/inline/right.jpg",width:500,height:1080}}:L.match(/movetop.html/)?{asset:"http://resources.pm/sandbox/inline/parkentrance.jpg",top:550,contentWidth:1300,width:2e3,height:1190}:{asset:"http://resources.pm/sandbox/inline/wallpaper_ysl.jpg",top:350,contentWidth:1050,width:1518,height:1500,room:{top:214,left:449.588,width:698.824,height:396,onactivated:function(t){l.loadLibrary("video.js",function(){var e=o.piximedia.Video;n.video=new e(t,{files:"http://piximedia.com/video/ALLIANCE_HD.mp4",width:t.style.width,height:t.style.height,options:{}}),n.video.play()})}}});var j=g.pageContainerWidth,z=d.getPageContainerHints()||{};y.write("<div id='background_container' style='cursor: pointer'><img style='-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;' src='data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=' id='background' ondragstart='return false' style='pointer-events: none; width: 0; height: 0'><div id='top'></div><div id='left'></div><div id='middle'></div><div id='right'></div></div><div id='background_mask'></div><div id='video_container'></div>"),y.write("<div id='replay_button'></div><div id='container_wallpaper_video'><div id='video_background'><div id='opacity_background'></div><div id='player_background'></div></div><div id='image_top'></div><div id='video_front'><div id='auto_open_button'></div><div id='player_front'></div></div><div id='close_button'></div></div>");var P,W,R=y.getElementById("background"),F=y.getElementById("background_container"),M=y.getElementById("background_mask"),O=y.getElementById("video_container"),H=y.getElementById("top"),V=y.getElementById("left"),Z=y.getElementById("middle"),G=y.getElementById("right"),K=y.getElementById("replay_button"),X=y.getElementById("container_wallpaper_video"),Q=y.getElementById("video_background"),Y=y.getElementById("opacity_background"),q=y.getElementById("player_background"),J=y.getElementById("image_top"),$=y.getElementById("video_front"),tt=y.getElementById("player_front"),et=y.getElementById("close_button"),it=y.getElementById("auto_open_button"),ot=n.pmData.doNotScaleAllpapr?1:j/(n.pmData.allpapr_custom||n.pmData.allpapr).pc_width;if(N.left&&N.right){var at=0,lt=0;if(V.style.display=Z.style.display=G.style.display="inline-block",V.style.width=N.left.width+"px",V.style.height=N.left.height+"px",G.style.width=N.right.width+"px",G.style.height=N.right.height+"px",Z.style.width=j+"px",Z.style.height="1px",V.style.backgroundImage="url("+N.left.asset+")",V.style.backgroundRepeat="no-repeat",G.style.backgroundImage="url("+N.right.asset+")",G.style.backgroundRepeat="no-repeat",N.top){var nt,rt=N.left.width+j+N.right.width;switch(N.top.mode){case"stretch":nt=rt/N.top.width;break;default:case"center":nt=rt<N.top.width?rt/N.top.width:1}at=nt*N.top.width,lt=nt*N.top.height,H.style.width=at+"px",H.style.height=lt+"px",H.style.margin="0 auto",H.style.backgroundImage="url("+N.top.asset+")",H.style.backgroundRepeat="no-repeat",H.style.backgroundPosition="0% 50%"}F.style.position="absolute",F.style.width=N.left.width+j+N.right.width+"px",F.style.height=lt+Math.max(N.left.height,N.right.height)+"px",v.emit("resize",{wallpaper:!0,moveTop:lt,width:N.left.width+j+N.right.width,height:Math.max(N.left.height,N.right.height),stickToTop:!!n.pmData.stickToTop,stickToTopOnPCTop:n.pmData.stickToTop?n.pmData.stickToTop.stickToTopOnPCTop:n.pmData.stickToTopOnPCTop,moveTopOptions:{duration:void 0!==n.pmData.fadeInDuration?n.pmData.fadeInDuration:a},bodyBackgroundColor:n.pmData.enableBodyBackgroundColor?n.pmData.enableBodyBackgroundColor.bodyBackgroundColor:void 0})}else if(N.asset||U){var pt=N.inset||z.inset||{},st=pt.thickness?parseFloat(pt.thickness,10):0,ct=pt.color||"#555",dt=j+2*st,mt=t.doNotScaleAllpapr?1:dt/N.contentWidth,ut=Math.round(mt*N.top)+st,ht=Math.round(mt*N.width),yt=Math.round(mt*N.height);c&&(F.style.opacity=0);var ft=void 0!==n.pmData.fadeInDuration?n.pmData.fadeInDuration:a;F.style.position="absolute",F.style.width="100%",F.style.height="100%",F.style.transition="opacity "+ft/1e3+"s ease-in",F.style.WebkitTransition="opacity "+ft/1e3+"s ease-in",U?N.asset=U:"swf"===d.getExtention(N.asset)&&!d.hasFlash()&&N.backup&&(N.asset=N.backup);var gt,vt;if(n.callbackLoad)gt=function(){var t={document:y,window:f,wallpaper:N,background:R,backgroundMask:M,ratio:mt,realWidth:ht,realHeight:yt,pcWidth:dt};n.callbackLoad(t,function(){mt=t.ratio,ht=t.realWidth,yt=t.realHeight,vt()})};else if("string"==typeof N.asset&&"image"===d.getExtention(N.asset))R.src=N.asset,gt=function(){var t=!1;R.onload=function(){t||(t=!0,vt())}};else{var bt=y.createElement("div");R.parentNode.insertBefore(bt,R),bt.style.width="100%",bt.style.height="100%",R.parentNode.removeChild(R),N.flashvars||(N.flashvars={}),N.attributes||(N.attributes={}),N.params||(N.params={}),N.attributes.scale=N.params.scale="exactfit",N.params.wmode=N.params.wmode="transparent",N.flashvars.clickTag||(N.flashvars.clickTag=g.clickUrl+(n.pmData&&n.pmData.clickUrl[1]?n.pmData.clickUrl[1].tracking+n.pmData.clickUrl[1].url:""));var _t=d.handleAsset({file:N.asset,width:"100%",height:"100%",flashvars:N.flashvars,params:N.params,attributes:N.attributes},bt,"allpapr");if("html"===d.getExtention(N.asset)){n.onclick=function(){};var kt=function(){d.track(t,"AP_CLICK"),_()},xt=_t.ownerDocument.createElement("div");xt.style.position="absolute",xt.style.left=0,xt.style.top=0,xt.style.width="100%",xt.style.height="100%",xt.style.cursor="pointer",xt.onclick=kt,_t.parentNode.insertBefore(xt,_t)}else n.onclick=function(){};gt=function(){vt()},f.setStage=function(e,i,o){"tracking"===e&&d.track(t,i,"1x1",o?o.replace(/^!!/,""):"")}}vt=function(){if(R.style.width=ht+"px",R.style.height=yt+"px",M.style.position="absolute",M.style.left="50%",M.style.marginLeft=-dt/2+"px",M.style.top=ut-st+"px",M.style.width=dt+"px",M.style.height=yt-ut+st+"px",M.style.background=n.pmData.backgroundMaskColor||"white",M.style.opacity=n.pmData.backgroundOpacity,M.style.filter="alpha(opacity="+100*n.pmData.backgroundOpacity+")",st&&(M.style.boxSizing="border-box",M.style.borderTop=st+"px solid "+ct,M.style.borderLeft=st+"px solid "+ct,M.style.borderRight=st+"px solid "+ct),O.style.position="absolute",B&&B.file&&B.file.length||"video-dailymotion"===t.allpapr.type){O.style.left=parseFloat(B.left,10)*mt+"px",O.style.width=parseFloat(B.width,10)*mt+"px",O.style.height=parseFloat(B.height,10)*mt+"px";var e=O.ownerDocument.createElement("div");O.appendChild(e),l.loadLibrary("video.js",function(){l.loadLibrary("sweetlib.js",function(){var e=o.piximedia.SweetLib,i={onclick:function(){F.onclick()},track:function(t,e){o.piximedia.SweetLib.track(n.pmData,t,e)},controls:!1,soundbutton:!1};e.extend(i,B),i.autoplay=!0,n.video=new o.piximedia.Video(O,{files:B.file||t.allpapr.file,width:O.style.width,height:O.style.height,options:i}),n.video.play(),l.on("play-allpapr-video",function(t){t.id_ad===n.pmData.adIdAlliance&&n.video.play(t.currentTime)}),l.on("pause-allpapr-video",function(t){t.id_ad===n.pmData.adIdAlliance&&n.video.pause()})})})}else O.style.left=0,O.style.top=0,O.style.width=0,O.style.height=0;if(n.pmData.allpapr_video){M.style.top=mt*(n.pmData.allpapr_custom.arch_height>n.pmData.allpapr_custom.arch_height_expand?n.pmData.allpapr_custom.arch_height:n.pmData.allpapr_custom.arch_height_expand)+"px";var i,a=n.pmData.allpapr_custom,p=n.pmData.allpapr_video;i=p.use_video_background&&p.use_video_background.video_background?{files:p.use_video_background.video_background.video_background_file,backup:p.use_video_background.video_background.video_background_backup,width:p.use_video_background.video_background.video_background_width,height:p.use_video_background.video_background.video_background_height}:{files:p.video_front_file,backup:p.video_front_backup,width:a.width,height:a.width*p.video_front_height/p.video_front_width},d.applyStyle(K,{position:"absolute",width:a.replay_button_width,height:a.replay_button_height,top:parseInt(a.replay_button_pos_y,10)*ot+"px",right:parseInt(a.replay_button_pos_x,10)*ot+"px",padding:"0px",zIndex:"1",cursor:"pointer"}),d.addEvent(K,"click",function(){k(!1,"show")});var m=y.createElement("div");m.id="replay_button_background",d.applyStyle(m,{background:a.replay_button_background,opacity:a.replay_button_opacity/100,filter:"alpha(opacity="+a.replay_button_opacity+")",position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px"}),K.appendChild(m);var u=y.createElement("div");if(u.id="replay_button_text",d.applyStyle(u,{position:"relative",textAlign:"center",color:a.replay_button_color,fontFamily:a.replay_button_font,fontSize:a.replay_button_fontsize,margin:"0px",padding:"0px"}),u.innerHTML=a.replay_button,K.appendChild(u),u.style.top=(a.replay_button_height-d.gbcr(u).height)/2+"px",d.applyStyle(X,{position:"absolute",width:parseInt(i.width,10)*ot+"px",height:parseInt(i.height,10)*ot+"px",top:"0px",left:"0px",zIndex:"2"}),d.applyStyle(Q,{position:"absolute",width:parseInt(i.width,10)*ot+"px",height:parseInt(i.height,10)*ot+"px",top:"0px",left:"0px",zIndex:"2",opacity:"0",filter:"alpha(opacity=0)",cursor:"pointer"}),d.applyStyle(Y,{position:"absolute",background:"black",display:"block",width:"100%",height:"100%",top:"0px",left:"0px",opacity:"0.5",filter:"alpha(opacity=50)",zIndex:1,cursor:"pointer"}),p.use_video_background&&p.use_video_background.video_background_opacity&&d.applyStyle(Y,{opacity:p.use_video_background.video_background_opacity/100,filter:"alpha(opacity="+p.use_video_background.video_background_opacity+")"}),p.use_video_background?d.addEvent(Y,"click",function(){d.track(t,"AP_CLICK",a.position),_(),k(!1,"hide")}):(Y.style.display="none",d.addEvent(Q,"click",function(){d.track(t,"AP_CLICK",a.position),_(),k(!1,"hide")})),d.applyStyle(q,{position:"relative",width:parseInt(i.width,10)*ot+"px",height:parseInt(i.height,10)*ot+"px",top:"0px",left:"0px"}),p.image_top){d.applyStyle(J,{position:"absolute",width:parseInt(p.image_top.image_top_width,10)*ot+"px",height:parseInt(p.image_top.image_top_height,10)*ot+"px",top:parseInt(p.image_top.image_top_position_from_top,10)*ot+"px",left:"50%",marginLeft:"-"+parseInt(p.image_top.image_top_width,10)*ot/2+"px",zIndex:"3",opacity:"0",filter:"alpha(opacity=0)"}),d.addEvent(J,"click",function(){d.track(t,"AP_CLICK",a.position),_(),k(!1,"hide")});var b=y.createElement("img");b.id="my_image_top",b.src=p.image_top.image_top_file,b.style.position="relative",b.style.width="100%",b.style.height="100%",b.style.cursor="pointer",J.appendChild(b)}d.applyStyle($,{position:"relative",width:"0px",height:parseInt(p.video_front_height,10)*ot+"px",top:parseInt(p.position_from_top,10)*ot+"px",zIndex:"3",overflow:"hidden",margin:"0 auto",mozBoxShadow:"0px 0px 30px #000000",webkitBoxShadow:"0px 0px 30px #000000",boxShadow:"0px 0px 30px #000000"}),d.applyStyle(tt,{position:"relative",width:parseInt(p.video_front_width,10)*ot+"px",height:parseInt(p.video_front_height,10)*ot+"px",top:"0px",left:"50%",marginLeft:"-"+parseInt(p.video_front_width,10)*ot/2+"px"}),d.applyStyle(it,{position:"absolute",top:"20px",left:"50%",padding:"3px 0px",zIndex:"5",cursor:"pointer",display:"none"});var x=y.createElement("div");x.id="auto_open_button_background",d.applyStyle(x,{background:n.pmData.openmode_timer.openmode_background,opacity:n.pmData.openmode_timer.openmode_opacity/100,filter:"alpha(opacity="+n.pmData.openmode_timer.openmode_opacity+")",position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px"}),it.appendChild(x);var w=y.createElement("div");w.id="auto_open_button_text",d.applyStyle(w,{position:"relative",textAlign:"center",color:n.pmData.openmode_timer.openmode_color,fontFamily:n.pmData.openmode_timer.openmode_font,fontSize:n.pmData.openmode_timer.openmode_fontsize,margin:"0px",padding:"0px 10px"}),w.innerHTML=n.pmData.openmode_timer.openmode_timer_text+n.pmData.openmode_timer.openmode_value,it.appendChild(w),l.loadLibrary("video.js",function(){p.use_video_background&&(P=new o.piximedia.Video(q,{files:i.files,poster:i.backup,id:p.video_background_id,baseUrl:"",width:100,height:100,unit:"%",options:{soundbutton:!1,threshold:0,nofullscreen:!0,controls:!1,hidecontrols:!0,rollover:!1,autoplay:!1,loop:!1,onclick:function(){d.track(t,"AP_CLICK",a.position),_(),k(!1,"hide")},track:function(e,i){d.track(t,e,i)}}})),W=new o.piximedia.Video(tt,{files:p.video_front_file,poster:p.video_front_backup,id:p.video_front_id,baseUrl:"",width:100,height:100,unit:"%",options:{threshold:0,nofullscreen:!0,controls:p.video_front_controls===!0||p.video_front_controls&&"full"===p.video_front_controls.type,soundbutton:p.video_front_controls&&p.video_front_controls.type&&"sound"===p.video_front_controls.type,hidecontrols:!0,rollover:p.video_front_sound_mode,autoplay:!1,loop:!1,onclick:function(){d.track(t,"AP_CLICK",a.position),_(),k(!1,"hide")},track:function(e,i){d.track(t,e,i)},onend:function(){k(!1,"hide")}}}),n.pmData.openmode&&setTimeout(function(){k(!1,"show")},50)}),d.applyStyle(et,{position:"absolute",width:p.close_button_width,height:p.close_button_height,top:parseInt(p.close_button_pos_y,10)*ot+"px",right:parseInt(p.close_button_pos_x,10)*ot+"px",padding:"0px",zIndex:"4",cursor:"pointer"}),d.addEvent(et,"click",function(){k(!1,"close")});var D=y.createElement("div");D.id="close_button_background",d.applyStyle(D,{background:p.close_button_background,opacity:p.close_button_opacity/100,filter:"alpha(opacity="+p.close_button_opacity+")",position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px"}),et.appendChild(D);var T=y.createElement("div");T.id="close_button_text",d.applyStyle(T,{position:"relative",textAlign:"center",color:p.close_button_color,fontFamily:p.close_button_font,fontSize:p.close_button_fontsize,margin:"0px",padding:"0px"}),T.innerHTML=p.close_button,et.appendChild(T),T.style.top=(p.close_button_height-d.gbcr(T).height)/2+"px",X.style.display="none"}v.emit("resize",{wallpaper:!0,moveTop:ut,width:ht,height:yt,stickToTop:!!n.pmData.stickToTop,stickToTopFromTop:n.pmData.stickToTop&&n.pmData.stickToTop.stickToTopFromTop?parseFloat(n.pmData.stickToTop.stickToTopFromTop,10)*mt:void 0,moveTopOptions:{duration:ft},bodyBackgroundColor:n.pmData.enableBodyBackgroundColor?n.pmData.enableBodyBackgroundColor.bodyBackgroundColor:void 0}),c&&(F.style.opacity=1),setTimeout(function(){s||(s=!0,v.registerResponsiveCallback(function(){return y.close(),y.open(),c=!1,h(y,f,g,v)})),r?r.update({iframe:v,wallpaper:N,realWidth:ht,realHeight:yt,realTop:ut,pcWidth:dt,position:g}):r=n.createRichMedia({iframe:v,wallpaper:N,realWidth:ht,realHeight:yt,realTop:ut,pcWidth:dt,position:g})},ft),n.emit("complete",{document:y,window:f,wallpaper:N,background:R,backgroundMask:M,ratio:mt,realWidth:ht,realHeight:yt,pcWidth:dt})},c?gt():vt()}F.onclick=function(){if(n.onclick)return n.onclick();if(i&&i.expand&&"click"!==i.openmode)l.emit("open-footer",{id_ad:t.adIdAlliance,index:1,newtab:!1});else{var e=n.pmData.allpapr?n.pmData.allpapr.clickAction:void 0;if(e)return n.framedPam.emit(e,{id_ad:n.pmData.adIdAlliance});var o=n.pmData.allpapr_custom?n.pmData.allpapr_custom.clickindex:1,a=g.clickUrl+(n.pmData&&n.pmData.clickUrl&&n.pmData.clickUrl[o]&&n.pmData.clickUrl[o].tracking?n.pmData.clickUrl[o].tracking:"")+(g.advertiserClickUrl||(n.pmData&&n.pmData.clickUrl&&n.pmData.clickUrl[o]&&n.pmData.clickUrl[o].url?n.pmData.clickUrl[o].url:""));d.track(t,"AP_VISIT_NEW_TAB"),f.open(a,"_blank")}}})})},e.prototype.animate=function(t){if(o.piximedia.PAM.isArray(t))for(var e=0;e<t.length;e++)this.animate(t[e]);else{var i=this,a=function(){i.framedPam.loadLibrary("sweetlib.js",function(){o.piximedia.SweetLib.coolDown(function(){return i[t].apply(i,arguments)})})};if(this[t]&&this.iframe&&this.iframe.iframe)return a();var l=setInterval(function(){return i[t]&&i.iframe&&i.iframe.iframe?(clearInterval(l),a()):void 0},50)}},e.prototype.flow=function(){this.animate("flow")},e.prototype.arch=function(){this.animate("arch")},e.prototype.glow=function(){this.animate("glow")},e.prototype.flip=function(){this.animate("flip")},e.prototype.zip=function(){this.animate("zip")},e.prototype.createRichMedia=function(e){var i=this,a=this.framedPam,h=e.iframe,y=e.wallpaper,f=e.realWidth,g=e.realHeight,v=e.realTop,b=e.pcWidth,_=e.position,k=new o.piximedia.PAM.EventEmitter;return a.loadLibrary("sweetlib.js",function(){a.waitDomMutable(function(){var e=o.piximedia.SweetLib;a.log("PC Width = "+b);var x=function(){if(i.onclick)return i.onclick();var t=_.clickUrl+(i.pmData&&i.pmData.clickUrl[1]?i.pmData.clickUrl[1].url:"");window.open(t,"_blank")},w=i.flow=function(l,n){var r=top.document;n=n||{};var p,s,c=n.transitionDuration||"0.2s",d=n.type||"rotateX",m=n.zIndex||e.LAYER_HIGHEST,u=n.position||"fixed",v=r.createElement("div"),b=r.createElement("div"),_=r.createElement("img");v.className="pmFlowContainer pmNozip",b.className="pmFlow",_.className="pmFlow",a.clearCSS(b),a.clearCSS(v),a.clearCSS(_),v.style.position=u,v.style.width=f+"px",v.style.cursor=n.cursor,v.style.height=g+"px",v.style.display="block",v.style.zIndex=m,v.onclick=x,b.style.cursor="pointer",b.style.width="100%",b.style.height="100%",b.style.position="relative",b.style.overflow="hidden",_.src=y.asset,_.style.position="relative",_.style.width=f+"px",_.style.height=g+"px",_.style.cursor=n.cursor;var k=function(){var t=e.gbcr(h.iframe);if(l){var i=e.gbcr(l);v.style.left=i.left+"px",v.style.top=i.top+"px",v.style.width=i.width+"px",v.style.height=i.height+"px",_.style.left=-(i.left-t.left)+"px",_.style.top=-(i.top-t.top)+"px"}else v.style.left=t.left+"px",v.style.top=t.top+"px"};k(),v.appendChild(b),b.appendChild(_),r.body.appendChild(v);var w;switch(d){case"rotateX":v.style.perspective=10*g+"px",b.style.transform="rotateZ(0) rotateX(270deg)",t(function(){o.console.log("Rotating",l),b.style.transition="transform "+c,b.style.transform="rotateZ(0) rotateX(360deg)"});break;case"opacity":b.style.opacity=0,w=e.animate(b,{opacity:1,duration:1e3*parseFloat(c,10)}),w.play();break;case"immediate":}n.absolute&&setTimeout(function(){p.absolute(n.absolute)},c);var D;return n.noReajustAfter||(D=setInterval(function(){k()},50)),p={container:v,interval:D,readjust:function(){D&&k()},remove:function T(t){t=t||{};var i=t.duration;void 0!==i&&w&&(w.duration=i),w?w.reverse(function(){w=void 0,T()}):void 0!==i?(v.style.opacity=1,v.style.transition="opacity "+i/1e3+"s",v.style.opacity=0,setTimeout(function(){T()},i)):(clearInterval(D),v.parentNode.removeChild(v)),s&&(s.style.opacity=1,e.animate(s,{opacity:0,duration:i}).play())},activateRoom:function(){if(y.room){s=r.createElement("div"),s.className="pmAllpaprRoom";var t=i.pmData.doNotScaleAllpapr?1:parseFloat(_.style.width,10)/y.width;s.style.position="absolute",s.style.left="50%",s.style.marginLeft=y.room.left*t-parseFloat(_.style.left,10)-parseFloat(_.style.width,10)/2+"px",s.style.top=y.room.top*t-parseFloat(_.style.top,10)+"px",s.style.width=y.room.width*t+"px",s.style.height=y.room.height*t+"px",b.appendChild(s),e.call(y.room.onactivated,[s])}},absolute:function(t){e.call(t.onready),clearInterval(D),t=t||{};var a=t.duration||250,l=e.gbcr(v),n=e.gbcr(b),r=e.getViewportSize();b.style.height="",b.style.width=n.width+"px",v.style.overflow="scroll","mobile"===e.device.name?(v.style.position="absolute",v.style.top=e.getPageScroll()[1]+"px"):(v.style.position="fixed",v.style.top=0),v.style.left="50%",v.style.width="16000px",v.style.marginLeft="-8000px",v.style.height=r[1]+"px",b.style.margin=l.top+"px auto";var s;s=t.scrollToTop?"0px":l.top+"px",b.style.backgroundSize="100% 100%",o.console.log(b),o.console.log(v);var c=i.pmData.doNotScaleAllpapr?1:Math.min(1,t.zoomToWidth/l.width);b.style.marginLeft="auto",b.style.marginRight="auto",_.style.marginLeft="auto",_.style.marginRight="auto",_.style.marginTop=b.style.marginTop,b.style.marginTop=0,e.animate(_,{duration:a,marginTop:s,width:c*f+"px",height:c*g+"px",onplayed:function(){t.activateRoom&&p.activateRoom()}}).play()}}},D=function(t){t=t||{};var i=top.document,o=t.duration||r,l=t.opacity||c,n=[],p=void 0===t.showAlpha?!0:t.showAlpha,s=i.createElement("div"),d=i.createElement("top"),m=i.createElement("div"),u=i.createElement("div"),y=h.iframe.parentNode;return a.clearCSS(s),a.clearCSS(d),a.clearCSS(m),a.clearCSS(u),s.className="pmLeft",d.className="pmTop",m.className="pmRight",u.className="pmAlpha",s.style.position="absolute",d.style.position="absolute",m.style.position="absolute",u.style.position="fixed",s.style.cursor="pointer",m.style.cursor="pointer",d.style.cursor="pointer",s.onclick=m.onclick=d.onclick=x,t.onclickAlpha&&(u.onclick=t.onclickAlpha),s.style.top=v+"px",s.style.left="0px",s.style.width=(f-b)/2+"px",s.style.height=g-v+"px",d.style.top="0px",d.style.left="0px",d.style.width=f+"px",d.style.height=v+"px",m.style.top=v+"px",m.style.right="0px",m.style.left="",m.style.width=(f-b)/2+"px",m.style.height=g-v+"px",u.style.top="0px",t.doubleWidthAlpha?(u.style.left="-50%",u.style.width="200%",u.style.height="200%"):(u.style.left="0px",u.style.width="100%",u.style.height="100%"),u.style.zIndex=e.LAYER_ALPHA,u.style.background="black",u.style.opacity="0.2",u.style.cursor="pointer",y.appendChild(s),y.appendChild(d),y.appendChild(m),n.push(w(s,{cursor:"pointer",type:"immediate",noReajustAfter:t.noReajustAfter})),n.push(w(d,{cursor:"pointer",type:"immediate",noReajustAfter:t.noReajustAfter})),n.push(w(m,{cursor:"pointer",type:"immediate",noReajustAfter:t.noReajustAfter})),p&&(top.document.body.appendChild(u),u.style.opacity=0,u.style.transition="opacity "+o/1e3+"s",setTimeout(function(){u.style.opacity=l},0)),{left:s,top:d,right:m,alpha:u,flowedElements:n,remove:function(t){t=t||{};var e=function(){s.parentNode.removeChild(s),d.parentNode.removeChild(d),m.parentNode.removeChild(m),p&&u.parentNode.removeChild(u)};if(void 0!==t.duration){var i=t.duration;p&&(u.style.opacity=l,u.style.transition="opacity "+i/1e3+"s",u.style.opacity=0);for(var o=0;o<n.length;o++)n[o].remove(t);setTimeout(e,i)}else{for(var a=0;a<n.length;a++)n[a].remove();e()}},readjust:function(){for(var t=0;t<n.length;t++)n[t].readjust()}}},T=function(t,a){t=t||{},a=a||function(){};var l=e.gbcr(h.iframe);i.loadAllVisnodes(top.document,{minimumTop:l.top,minimumSurface:8e3},function(t){t.push({bounds:l,node:h.iframe,surface:l.width*l.height}),t.sort(function(t,e){return t.surface<e.surface?-1:t.surface>e.surface?1:0});var e={flowedElements:[]},i=1,n=1,p=r/(i+n-1),s=Math.ceil(t.length/i),c=0,d=[],m=function(t){for(var e=0;e<d.length;e++){var i=d[e].bounds,o=t.bounds,a=!0;if(i.bottom<o.top&&(a=!1),i.right<o.left&&(a=!1),i.top>o.bottom&&(a=!1),i.left>o.right&&(a=!1),a)return!0}return!1},u=function(){o.console.log("** RUNNING ROUND ** "+new Date);for(var l=s*c;s*(c+1)>l&&l<t.length;l++){var r=t[l],h={transitionDuration:n*p/1e3+"s"};m(r)?h.type="opacity":(h.type="rotateX",d.push(r)),e.flowedElements.push(w(r.node,h))}++c===i?setTimeout(function(){a(e)},n*p):setTimeout(u,p)};setTimeout(u,0)})};i.maskOver=function(){var t,o,a,l,n,r,p,s,y,f=i.framedPam,g=top.document,v=!1,b=function(){};switch(y=function(){f.log("Enter"),t||(t=D({duration:d,opacity:c,onclick:s}),r=setTimeout(function(){r=void 0,t.remove({duration:u}),t=void 0},d))},p=function(){return v?f.log("Prevented leave"):(f.log("Leave"),t&&(t.remove({duration:u}),t=void 0),o&&(o.remove({duration:u}),o=void 0),a&&(a.remove({duration:u}),a=void 0),l&&(l.remove({duration:u}),l=void 0),n&&(n.remove({duration:u}),n=void 0),void setTimeout(function(){g.body.className=g.body.className.replace(/ pmMaskOver pmBodyAnimation/g,"")},u))},s=function(){f.log("Full"),v=!0,o&&(o.remove(),o=void 0),e.animate(g.body,{scrollTop:e.gbcrfp(i.iframe.iframe).top,duration:200,css:!1,forcejs:!0,onplayed:function(){l=e.makeClose("mobile"===e.device.name?{position:"absolute",top:e.getPageScroll()[1]+"px"}:{},function(t){e.preventDefault(t),v=!1,p()}),r?(t.readjust(),clearTimeout(r)):t=D({duration:d,opacity:c,onclick:s}),g.body.className+=" pmMaskOver pmBodyAnimation",n=e.makeUnderlay({},function(t){e.preventDefault(t),v=!1,p()});var i=e.getViewportSize()[0];a=w(h.iframe,{type:"opacity",absolute:{onready:function(){t&&(t.remove(),t=void 0)},zoomToWidth:i,scrollToTop:!0,duration:m,activateRoom:!0}}),e.mouseenter(a.container,b),e.mouseleave(a.container,p)}}).play()},i.onclick=s,e.device.name){case"tablet":case"mobile":e.addEvent(h.iframe,"click",s);break;default:e.mouseenter(h.iframe,y),k.on("mouseenter",y)}},i.arch=function(){var t=D();setTimeout(function(){t.alpha.parentNode.removeChild(t.alpha)},p)},i.glow=function(){var t=top.document,i=e.getViewportSize()[0],o=i+"px",a="50% 0",l=i-f+"px";e.createCSS("body.pmGlow","-webkit-perspective-origin: "+a+"; perspective-origin: "+a+"; perspective: "+o+"; -webkit-perspective: "+o),e.createCSS("body.pmGlow > *","-webkit-transition: -webkit-transform "+d/1e3+"s; transition: transform "+d/1e3+"s; transform: translateZ(0px); -webkit-transform: translateZ(0px)");var n=D({duration:d,opacity:c,noReajustAfter:!0,doubleWidthAlpha:!0});setTimeout(function(){return n.alpha.style.opacity=0,e.getPageScroll()[1]?(n.remove(),void setTimeout(function(){t.body.className=t.body.className.replace(/ pmGlow pmBodyAnimation/g,"")},1.5*d)):(t.body.className+=" pmGlow pmBodyAnimation",void setTimeout(function(){n.alpha.style.opacity=c,e.createCSS("body.pmGlow > *","transform: translateZ("+l+"); -webkit-transform: translateZ("+l+")"),setTimeout(function(){n.alpha.style.opacity=0,e.createCSS("body.pmGlow > *","transform: translateZ(0px); -webkit-transform: translateZ(0px)"),setTimeout(function(){n.remove(),setTimeout(function(){t.body.className=t.body.className.replace(/ pmGlow pmBodyAnimation/g,"")},1.5*d)},d)},3*d)},750))},2*d)},i.flip=function(){var t=top.document;e.animate(t.body,{scrollTop:e.gbcrfp(this.iframe.iframe).top,duration:200,css:!1,forcejs:!0,
onplayed:function(){var t,i,o,a,l,n=function(){if(a)for(var e=0;e<a.flowedElements.length;e++)a.flowedElements[e].remove({duration:0});o&&o.remove({duration:s}),i&&i.remove({duration:s}),l&&(l.remove({duration:s}),l=void 0),t&&t.remove({duration:s})};o=D({duration:r,opacity:c,onclickAlpha:n}),T({},function(o){a=o,t=e.makeUnderlay({},function(t){e.preventDefault(t),n()}),i=e.makeClose({},n);var r=e.getViewportSize()[0];l=w(h.iframe,{type:"opacity",absolute:{zoomToWidth:r,duration:m,activateRoom:!0}})})}}).play()},i.zip=function(){var t=300,i=250,o=t-20,l=i-20,r=top.document;e.animate(r.body,{scrollTop:0,duration:250,css:!1,forcejs:!0,onplayed:function(){var p,s,c,d=r.createElement("div"),m=r.createElement("div"),u=e.getViewportSize(),y=u[0],g=u[1],v=r.body.style.overflow;r.body.style.overflow="hidden",p=D({noReajustAfter:!0,showAlpha:!1}),p.remove({duration:1e3}),s=w(h.iframe,{type:"immediate",noReajustAfter:!0,zIndex:-1}),d.className="pmClosezip pmNozip",m.className="pmClosetag pmNozip",a.clearCSS(d),a.clearCSS(m),m.style.position=d.style.position="fixed",m.style.display=d.style.display="inline-block",m.style.top=d.style.top=g-i+"px",m.style.left=d.style.left="0px",d.style.background="url(//resources.pm/sandbox/inline/closezip.png)",m.style.width=d.style.width=t+"px",m.style.height=d.style.height="250px",m.style.zIndex=e.LAYER_HIGHEST,d.style.zIndex="",m.style.cursor="pointer",r.body.insertBefore(d,r.body.firstChild),r.body.insertBefore(m,r.body.firstChild);var b=setInterval(function(){var a=e.getPageScroll(),p=e.gbcr(r.body),s=a[1],u=e.getViewportSize()[1],h=o/f*p.height,g=s+u-l,v="perspective: "+n*(o/f)+"px; perspective-origin: "+t*t/y+"px "+g*p.height/(p.height-h)+"px";v!==c&&(c=v,e.createCSS("body.pmZip",c));var b=u-i+"px";m.style.top!==b&&(m.style.top=d.style.top=b)},50);e.createCSS("body.pmZip > *","transition: transform 1s; transform: translateZ(-"+n+"px)"),e.createCSS("body.pmZip > *.pmNozip","transform: translateZ(0)"),r.body.className+=" pmZip pmBodyAnimation","fixed"===h.iframe.style.position&&(h.iframe.style.position=""),m.onclick=function(){clearInterval(b),s.remove({duration:1e3}),e.createCSS("body.pmZip > *","transition: transform 1s; transform: translateZ(0px)"),setTimeout(function(){r.body.className=r.body.className.replace(/ pmZip pmBodyAnimation/g,""),r.body.removeChild(d),r.body.removeChild(m),r.body.style.overflow=v},1e3)},setTimeout(function(){var t=e.getViewportSize()[0];s.absolute({scrollToTop:!0,zoomToWidth:t})},1e3)}}).play()},i.options.animate&&setTimeout(function(){i.animate(i.options.animate)},l),i.options.maskOver&&i.animate("maskOver"),e.mouseenter(i.injectedDocument.body,function(){k.emit("mouseenter")}),e.addEvent(i.injectedDocument.body,"mousemove",function(){k.emit("mousemove")})})}),{update:function(t){t.iframe&&(h=t.iframe),t.wallpaper&&(y=t.wallpaper),t.realWidth&&(f=t.realWidth),t.realHeight&&(g=t.realHeight),t.realTop&&(v=t.realTop),t.pcWidth&&(b=t.pcWidth),t.position&&(_=t.position),a.loadLibrary("sweetlib.js",function(){var t=o.piximedia.SweetLib;t.mouseenter(i.injectedDocument.body,function(){k.emit("mouseenter")}),t.addEvent(i.injectedDocument.body,"mousemove",function(){k.emit("mousemove")})})}}},e.prototype.loadAllVisnodes=function(t,e,i){this.framedPam.loadLibrary("sweetlib.js",function(){var a=o.piximedia.SweetLib,l=[];e=e||{};var n,r=void 0===e.minimumTop?0:e.minimumTop,p=a.getViewportSize()[1],s=e.minimumSurface||0;if(t.createTreeWalker)for(var c,d=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);c=d.nextNode();)n={node:c,bounds:a.gbcr(c)},n.bounds&&n.bounds.width&&n.bounds.height&&(n.surface=n.bounds.width*n.bounds.height,n.surface>=s&&!(c.className||"").match(/^pm/)&&!(c.className||"").match(/ pm/)&&n.bounds.top+n.bounds.height>=r&&n.bounds.top<=p&&a.isVisible(n.node)&&l.push(n));else{var m;if(t.querySelectorAll)m=t.querySelectorAll("*");else{var u=["DIV","SPAN","P","TABLE"];m=[];for(var h=0;h<u.length;h++)m=m.concat(t.getElementsByTagName(u[h]))}for(var y=0;y<m.length;y++){var f=m[y];n={node:f,bounds:a.gbcr(f)},n.bounds&&n.bounds.width&&n.bounds.height&&(n.surface=n.bounds.width*n.bounds.height,n.surface>=s&&!(f.className||"").match(/^pm/)&&!(f.className||"").match(/ pm/)&&n.bounds.top+n.bounds.height>=0&&n.bounds.top<=p&&a.isVisible(n.node)&&l.push(n))}}return i(l)})},o.piximedia.Allpapr=e,o.piximedia.libraryLoader&&o.piximedia.libraryLoader["allpapr.js"]&&(o.piximedia.libraryLoader["allpapr.js"].complete=!0)}(),function(t,e){var i=t.framedPam;t.piximedia["pmData"+e.creativeIdAlliance+"_1"]=e,i.loadLibrary("sweetlib.js",function(){var i=t.piximedia.SweetLib,o={asset:e.allpapr.file,backup:e.allpapr.backup,top:parseFloat(e.allpapr.arch_height,10),contentWidth:parseFloat(e.allpapr.pc_width,10),width:parseFloat(e.allpapr.width,10),height:parseFloat(e.allpapr.height,10)};i.extend(e.allpapr,{wallpaper:o}),i.extend(e,{position:"1x1",fadeInDuration:0,backgroundMaskColor:"white"});var a=new t.piximedia.Allpapr(e,e.allpapr);a.start()})}(window,window.pmData267582_1);