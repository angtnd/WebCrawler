define("edc/globals",[],function(){"use strict";return{model:null,router:null,friendsView:null,postView:null,formView:null,homeView:null,offerView:null,postResultView:null}}),define("edc/edcRouter",["underscore","backbone","edc/globals","gAnalytics"],function(e,t,i){"use strict";return t.Router.extend({routes:{"":"home",offer:"offer",stepOne:"form",stepTwo:"post",postResult:"postResult",terms:"terms",about:"about"},initialize:function(){!e.isUndefined(ga)&&ga&&(ga("create","UA-53668149-1","auto",{allowLinker:!0}),ga("require","displayfeatures")),this.bind("route",function(){!e.isUndefined(ga)&&ga&&this.pageView()})},pageView:function(){var e=t.history.getFragment();ga("send","pageview",{page:window.location.pathname+"/#"+e})},post:function(){i.model.attributes.loggedIn?i.postView.render():this.navigate("",{trigger:!0})},form:function(){i.model.attributes.loggedIn?i.formView.render():this.navigate("",{trigger:!0})},home:function(){i.model.attributes.friendsTagged=i.model.getDefaultFriendsTagged(),i.model.attributes.statusPosted=!1,i.homeView.render(),window.showFBFailure&&window.onFBFailure()},offer:function(){this.navigate("",{trigger:!0})},postResult:function(){i.model.attributes.loggedIn?i.postResultView.render():this.navigate("",{trigger:!0})},terms:function(){$("#twitter-widget").hide(),$(".content").html($("#termsTmpl").html())},about:function(){$("#twitter-widget").hide(),$(".content").html($("#aboutTmpl").html())}})}),define("edc/models/userModel",["underscore","backbone"],function(e,t){"use strict";return t.Model.extend({initialize:function(){this.set(this.customDefaults)},customDefaults:{description:"",title:"ToDo",archived:!1,done:!1,picture:{me:"http://placehold.it/150x150"},statusPosted:!1,loggedIn:!1,formData:"",postSuccess:!1,userName:"",email:"",friendsTagged:[{picture:"http://placehold.it/150x150",name:"",id:""},{picture:"http://placehold.it/150x150",name:"",id:""},{picture:"http://placehold.it/150x150",name:"",id:""}]},validate:function(){},getDefaultFriendsTagged:function(){return e.clone(this.customDefaults.friendsTagged)}})}),define("edc/views/edcHomeView",["underscore","backbone","facebook","edc/models/userModel","edc/globals"],function(e,t,i,n,r){"use strict";return t.View.extend({el:".content",initialize:function(){$(".spinner").hide()},template:e.template($("#edcHome").html()),events:{"click .fb-login":"fbStart"},fbInit:function(){},render:function(){return this.$el.html(this.template(this.model.attributes)),$("#twitter-widget").show(),this},checkFBLogin:function(){var e=this;i.getLoginStatus(function(t){"connected"===t.status?i.logout(function(){e.fbLogin()}):e.fbLogin()})},fbLogin:function(){i.login(function(e){if(e.authResponse){var t=e.authResponse.userID;i.api("/me",function(e){e&&!e.error&&(r.model.attributes.userName=e.first_name+" "+e.last_name,r.model.attributes.email=e.email,$(".spinner").hide(),r.model.attributes.userID=t,r.model.attributes.loggedIn=!0,r.router.navigate("offer",{trigger:!0}))})}else $(".spinner").hide()},{scope:"email"})},fbStart:function(){r.model.attributes.loggedIn=!0,r.router.navigate("stepOne",{trigger:!0})}})}),define("edc/modules/doorbell",["jquery","underscore","backbone","facebook","edc/globals"],function(e,t,i,n,r){"use strict";return{post:function(t,i,n,s,a){var o=r.model.attributes.email;doorbell.setOption("name",n.fullName),doorbell.setOption("email",o),e.ajax({type:"POST",url:"//doorbell.io/api/applications/"+t+"/submit",data:{key:i,email:o,message:"EDC Message",properties:n,name:n.fullName},success:function(){s()},error:function(){a()}})}}}),define("edc/views/edcPostView",["underscore","backbone","edc/globals","facebook","edc/modules/doorbell"],function(e,t,i,n,r){"use strict";return t.View.extend({el:".content",initialize:function(){$(".spinner").hide(),$(".site-footer").show(),$(".rePost").hide(),$(".postFailure").hide()},template:e.template($("#edcPost").html()),events:{"click .postStatus":"postToFaceBook"},render:function(){return this.$el.html(this.template(this.model.attributes)),$("#twitter-widget").hide(),$(".urlCheckFailure").hide(),$(".postFailure").hide(),$(".rePost").hide(),this},postToWall:function(){var t=this;$(".postFailure").hide(),$(".rePost").hide(),n.ui({method:"share",href:"https://insider.in/breezersoundhike"},function(n){if(e.isUndefined(n)||!e.isUndefined(n.error_code))$(".postFailure").show();else{$(".spinner").show(),t.model.attributes.statusPosted=!0;var s=i.model.attributes.formData;r.post("1353","UMZaLK510uVCpDASBFWIm34p9LlMuh9ceksybpYowmufriACf3QJG4KvoROlHqJM",s,function(){$.ajax({type:"POST",url:"/edc-send-mail",data:{info:JSON.stringify({email:i.model.attributes.email})},success:function(){$(".spinner").hide(),i.model.attributes.postSuccess=!0,i.router.navigate("postResult",{trigger:!0})},error:function(){$(".spinner").hide(),i.model.attributes.postSuccess=!1,$(".postFailure").show()},dataType:"json"})},function(){$(".spinner").hide(),i.model.attributes.postSuccess=!1,$(".postFailure").show()})}})},postToDoorbell:function(){$(".postFailure").hide(),$(".rePost").hide(),i.model.attributes.statusPosted=!0;var e=i.model.attributes.formData;e.dubsmashURL=$("#inputURL").val(),""===e.dubsmashURL?$(".urlCheckFailure").show():($(".urlCheckFailure").hide(),$(".spinner").show(),r.post("1648","Y9E89vNRXR66vTH36FWQKsIazXdgzYoMJPIV2Rtp6imCznZyKHedZTc2umUyBEGO",e,function(){$.ajax({type:"POST",url:"/edc-send-mail",data:{info:JSON.stringify({email:i.model.attributes.email})},success:function(){$(".spinner").hide(),i.model.attributes.postSuccess=!0,i.router.navigate("postResult",{trigger:!0})},error:function(){$(".spinner").hide(),i.model.attributes.postSuccess=!1,$(".postFailure").show()},dataType:"json"})},function(){$(".spinner").hide(),i.model.attributes.postSuccess=!1,$(".postFailure").show()}))},postToFaceBook:function(e){e.preventDefault(),e.stopPropagation(),window.open("https://www.facebook.com/breezerindia","_blank")}})}),function(e){e.extend(e.fn,{validate:function(t){if(this.length){var i=e.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(t=this.find("input, button"),t.filter(".cancel").click(function(){i.cancelSubmit=!0}),i.settings.submitHandler&&t.filter(":submit").click(function(){i.submitButton=this}),this.submit(function(t){function n(){if(i.settings.submitHandler){if(i.submitButton)var t=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm);return i.settings.submitHandler.call(i,i.currentForm),i.submitButton&&t.remove(),!1}return!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,i=e(this[0].form).validate();return this.each(function(){t&=i.element(this)}),t},removeAttrs:function(t){var i={},n=this;return e.each(t.split(/\s/),function(e,t){i[t]=n.attr(t),n.removeAttr(t)}),i},rules:function(t,i){var n=this[0];if(t){var r=e.data(n.form,"validator").settings,s=r.rules,a=e.validator.staticRules(n);switch(t){case"add":e.extend(a,e.validator.normalizeRule(i)),s[n.name]=a,i.messages&&(r.messages[n.name]=e.extend(r.messages[n.name],i.messages));break;case"remove":if(!i)return delete s[n.name],a;var o={};return e.each(i.split(/\s/),function(e,t){o[t]=a[t],delete a[t]}),o}}return n=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(n),e.validator.classRules(n),e.validator.attributeRules(n),e.validator.staticRules(n)),n),n.required&&(r=n.required,delete n.required,n=e.extend({required:r},n)),n}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1==arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!=Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!=Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(RegExp("\\{"+e+"\\}","g"),i)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e){(e.name in this.submitted||e==this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),n="on"+t.type.replace(/^validate/,"");i.settings[n]&&i.settings[n].call(i,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};e.each(this.settings.groups,function(t,n){e.each(n.split(/\s/),function(e,n){i[n]=t})});var n=this.settings.rules;e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){this.lastElement=t=this.validationTargetFor(this.clean(t)),this.prepareElement(t),this.currentElements=e(t);var i=this.check(t);return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)i++;return i},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1==e.grep(this.errorList,function(e){return e.element.name==t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(e(this).rules())?!1:i[this.name]=!0})},clean:function(t){return e(t)[0]},errors:function(){return e(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},check:function(t){t=this.validationTargetFor(this.clean(t));var i,n=e(t).rules(),r=!1;for(i in n){var s={method:i,parameters:n[i]};try{var a=e.validator.methods[i].call(this,t.value.replace(/\r/g,""),t,s.parameters);if("dependency-mismatch"==a)r=!0;else{if(r=!1,"pending"==a)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!a)return this.formatAndAdd(t,s),!1}}catch(o){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+s.method+"' method",o),o}}return r?void 0:(this.objectLength(n)&&this.successList.push(t),!0)},customMetaMessage:function(t,i){if(e.metadata){var n=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return n&&n.messages&&n.messages[i]}},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor==String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customMetaMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t.method),n=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,t.parameters,e):n.test(i)&&(i=jQuery.format(i.replace(n,"{$1}"),t.parameters)),this.errorList.push({message:i,element:e}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var t=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var n=this.errorsFor(t);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.attr("generated")&&n.html(i)):(n=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")==i})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){var i=this.currentForm;return e(document.getElementsByName(t)).map(function(e,n){return n.form==i&&n.name==t&&n||null})},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,i){return!!e(t,i.form).length},"function":function(e,t){return e(t)}},optional:function(t){return!e.validator.methods.required.call(this,e.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0==this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor==String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={};return(t=e(t).attr("class"))&&e.each(t.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={};t=e(t);for(var n in e.validator.methods){var r;(r="required"===n&&"function"==typeof e.fn.prop?t.prop(n):t.attr(n))?i[n]=r:t[0].getAttribute("type")===n&&(i[n]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},metadataRules:function(t){if(!e.metadata)return{};var i=e.data(t.form,"validator").settings.meta;return i?e(t).metadata()[i]:e(t).metadata()},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(n,r){if(r===!1)delete t[n];else if(r.param||r.depends){var s=!0;switch(typeof r.depends){case"string":s=!!e(r.depends,i.form).length;break;case"function":s=r.depends.call(i,i)}s?t[n]=void 0!==r.param?r.param:!0:delete t[n]}}),e.each(t,function(n,r){t[n]=e.isFunction(r)?r(i):r}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!=n?n:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";switch(i.nodeName.toLowerCase()){case"select":return(t=e(i).val())&&t.length>0;case"input":if(this.checkable(i))return this.getLength(t,i)>0;default:return e.trim(t).length>0}},remote:function(t,i,n){if(this.optional(i))return"dependency-mismatch";var r=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),r.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=r.message,n="string"==typeof n&&{url:n}||n,this.pending[i.name])return"pending";if(r.old===t)return r.valid;r.old=t;var s=this;this.startRequest(i);var a={};return a[i.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,success:function(n){s.settings.messages[i.name].remote=r.originalMessage;var a=n===!0;if(a){var o=s.formSubmitted;s.prepareElement(i),s.formSubmitted=o,s.successList.push(i),s.showErrors()}else o={},n=n||s.defaultMessage(i,"remote"),o[i.name]=r.message=e.isFunction(n)?n(t):n,s.showErrors(o);r.valid=a,s.stopRequest(i,a)}},n)),"pending"},minlength:function(t,i,n){return this.optional(i)||this.getLength(e.trim(t),i)>=n},maxlength:function(t,i,n){return this.optional(i)||this.getLength(e.trim(t),i)<=n},rangelength:function(t,i,n){return t=this.getLength(e.trim(t),i),this.optional(i)||t>=n[0]&&t<=n[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 -]+/.test(e))return!1;var i=0,n=0,r=!1;e=e.replace(/\D/g,"");for(var s=e.length-1;s>=0;s--)n=e.charAt(s),n=parseInt(n,10),r&&(n*=2)>9&&(n-=9),i+=n,r=!r;return i%10==0},accept:function(e,t,i){return i="string"==typeof i?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(RegExp(".("+i+")$","i"))},equalTo:function(t,i,n){return n=e(n).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()}),t==n.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,i,n){i=e.port,"abort"==e.mode&&(t[i]&&t[i].abort(),t[i]=n)});else{var i=e.ajax;e.ajax=function(n){var r=("port"in n?n:e.ajaxSettings).port;return"abort"==("mode"in n?n:e.ajaxSettings).mode?(t[r]&&t[r].abort(),t[r]=i.apply(this,arguments)):i.apply(this,arguments)}}}(jQuery),function(e){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&e.each({focus:"focusin",blur:"focusout"},function(t,i){function n(t){return t=e.event.fix(t),t.type=i,e.event.handle.call(this,t)}e.event.special[i]={setup:function(){this.addEventListener(t,n,!0)},teardown:function(){this.removeEventListener(t,n,!0)},handler:function(t){return arguments[0]=e.event.fix(t),arguments[0].type=i,e.event.handle.apply(this,arguments)}}}),e.extend(e.fn,{validateDelegate:function(t,i,n){return this.bind(i,function(i){var r=e(i.target);return r.is(t)?n.apply(r,arguments):void 0})}})}(jQuery),define("jquery-validate",["jquery"],function(){}),function(e){{var t={"short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"long":["January","February","March","April","May","June","July","August","September","October","November","December"]},i=new Date,n=1994;i.getMonth()+1,i.getDate()}e.fn.birthdaypicker=function(i){var r={maxAge:40,minAge:0,futureDates:!1,maxYear:1994,dateFormat:"littleEndian",monthFormat:"long",placeholder:!0,legend:"",defaultDate:!1,fieldName:"birthdate",fieldId:"birthdate",hiddenDate:!0,onChange:null,tabindex:null};return this.each(function(){i&&e.extend(r,i);var s=e("<fieldset class='birthday-picker'></fieldset>"),a=e("<select class='birth-year' name='birth[year]' style='font-family: pragmatica-web; font-size: 16px;color: #aaa;'></select>"),o=e("<select class='birth-month' name='birth[month]' style='font-family: pragmatica-web; font-size: 16px;color: #aaa;'></select>"),u=e("<select class='birth-day' name='birth[day]' style='font-family: pragmatica-web; font-size: 16px;color: #aaa;'></select>");r.legend&&e("<legend>"+r.legend+"</legend>").appendTo(s);var l=r.tabindex;"bigEndian"==r.dateFormat?(s.append(a).append(o).append(u),null!=l&&(a.attr("tabindex",l),o.attr("tabindex",l++),u.attr("tabindex",l++))):"littleEndian"==r.dateFormat?(s.append(u).append(o).append(a),null!=l&&(u.attr("tabindex",l),o.attr("tabindex",l++),a.attr("tabindex",l++))):(s.append(o).append(u).append(a),null!=l&&(o.attr("tabindex",l),u.attr("tabindex",l++),a.attr("tabindex",l++))),r.placeholder&&(e("<option value='0' style='color: #aaa'>Year</option>").appendTo(a),e("<option value='0' style='color: #aaa'>Month</option>").appendTo(o),e("<option value='0' style='color: #aaa'>Day</option>").appendTo(u));var d;if(r.defaultDate){var h=new Date(r.defaultDate+"T00:00:00"),c=h.getFullYear(),m=h.getMonth()+1,f=h.getDate();10>m&&(m="0"+m),10>f&&(f="0"+f),d=c+"-"+m+"-"+f}r.hiddenDate&&e("<input type='hidden' name='"+r.fieldName+"'/>").attr("id",r.fieldId).val(d).appendTo(s);var g=n-r.minAge,p=n-r.maxAge;r.futureDates&&r.maxYear!=n&&(g=r.maxYear>1e3?r.maxYear:n+r.maxYear);for(var F=g;F>=p;F--)e("<option></option>").attr("value",F).text(F).appendTo(a);for(var v=0;12>v;v++)e("<option></option>").attr("value",v+1).text(t[r.monthFormat][v]).appendTo(o);for(var b=1;32>b;b++)e("<option></option>").attr("value",b).text(b).appendTo(u);if(e(this).append(s),r.defaultDate){var w=new Date(r.defaultDate+"T00:00:00");a.val(w.getFullYear()),o.val(w.getMonth()+1),u.val(w.getDate())}s.change(function(){var i=new Date,n=i.getMonth()+1,s=i.getDate(),l=parseInt(a.val(),10),h=parseInt(o.val(),10),c=parseInt(u.val(),10),m=new Date(l,h,0).getDate(),f=parseInt(o.children(":last").val()),p=parseInt(u.children(":last").val());if(p>m)for(;p>m;)u.children(":last").remove(),p--;else if(m>p)for(;m>p;)p++,u.append("<option value="+p+">"+p+"</option>");if(!r.futureDates&&l==g){if(f>n){for(;f>n;)o.children(":last").remove(),f--;u.children(":first").attr("selected","selected")}if(h===n)for(;p>s;)u.children(":last").remove(),p-=1}if(l!=g&&12!=f)for(;12>f;)o.append("<option value="+(f+1)+">"+t[r.monthFormat][f]+"</option>"),f++;l*h*c!=0&&(10>h&&(h="0"+h),10>c&&(c="0"+c),d=l+"-"+h+"-"+c,e(this).find("#"+r.fieldId).val(d),null!=r.onChange&&r.onChange(d))})})}}(jQuery),define("bday-picker",["jquery"],function(){}),define("edc/views/edcFormView",["underscore","backbone","edc/globals","facebook","edc/modules/doorbell","jquery-validate","bday-picker"],function(e,t,i,n,r){"use strict";return t.View.extend({el:".content",initialize:function(){$(".spinner").hide()},events:{submit:"postToDoorbell"},template:e.template($("#edcForm").html()),render:function(){return this.$el.html(this.template()),$("#twitter-widget").hide(),$(".checboxFailure").hide(),$(".dobCheckFailure").hide(),$(".afterSubmitSuccess").hide(),$(".afterSubmitFailure").hide(),$(".edcForm").validate({rules:{fullName:"required",email:"required",mobileNumber:{required:!0,minlength:10},age:"required",reason1:{required:!0,minlength:4,maxlength:140},reason2:{required:!0,minlength:4,maxlength:140},reason3:{required:!0,minlength:4,maxlength:140}},messages:{fullName:"Please fill in your full name",email:"Please fill in your email address",mobileNumber:"Please fill in your mobile number",age:"Please fill in your age",reason1:"Please fill in a reason in not more than 140 characters",reason2:"Please fill in a reason in not more than 140 characters",reason3:"Please fill in a reason in not more than 140 characters"},submitHandler:this.postToDoorbell}),this},postToDoorbell:function(e){e.preventDefault();$(".afterSubmitFailure").hide(),$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};var t=$(e.target).serializeObject();$(".spinner").show();for(var n in t)doorbell.setProperty(n,t[n]);i.model.attributes.formData=t,i.model.attributes.email=$("#inputEmailAddress").val(),r.post("1889","YbGNKGxLsxBwYzXWDJYoj8IZ4EMYHO4yRkCEMnjrFHaSiVyqObLvTRIeAt5c7Rgm",t,function(){$.ajax({type:"POST",url:"/edc-send-mail",data:{info:JSON.stringify({email:i.model.attributes.email})},success:function(){$(".spinner").hide(),i.router.navigate("stepTwo",{trigger:!0})
},error:function(){$(".spinner").hide(),$(".afterSubmitFailure").show()},dataType:"json"})},function(){$(".spinner").hide(),$(".afterSubmitFailure").show()})}})}),require(["jquery","backbone","edc/edcRouter","edc/globals","facebook","edc/models/userModel","edc/views/edcHomeView","edc/views/edcPostView","edc/views/edcFormView"],function(e,t,i,n,r,s,a,o,u){"use strict";e(document).ready(function(){t.View.prototype.render=function(){return this.$el.html(this.template(this.model.attributes)),this},n.model=new s,n.postView=new o({model:n.model}),n.formView=new u({model:n.model}),n.homeView=new a({model:n.model});n.router=new i,t.history.start()})},function(e){if(e&&e.requireModules&&"undefined"!=typeof e.requireModules&&"undefined"!=typeof e.requireModules[0]){var t=e.requireModules&&e.requireModules[0];"facebook"===t&&(window.showFBFailure=!0)}}),define("edc-main",function(){});
//# sourceMappingURL=edc-main.js
//# sourceMappingURL=edc-main.js.map