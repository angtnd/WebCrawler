__d("widget.newindex_movie.newindex_video_adjust",[],function(p,v,o){return o={adjust:function(){var a=$("#hao123-bodyct .js-adjust-l:eq(0)"),f=$("#hao123-bodyct .r-widget:eq(0)"),e=$("#video_ranking_list",f);a.css("height","auto");e.css("height","auto");setTimeout(function(){var j=a[0].offsetHeight-f[0].offsetHeight;0<j?e.css("height",e.height()+j+"px"):a.css("height",a.height()-j+"px")},0)}}});
__d("widget.site.config",[],function(p,v,o){return o={css:{siteNormal:"site-normal",siteEdit:"site-edit",hdNormal:"site-hd-normal",hdEdit:"site-hd-edit",itemNormal:"site-item-normal",itemMove:"site-item-move",itemEdit:"site-item-edit",itemCurrent:"site-item-current",itemDashed:"site-item-dashed",itemAdd:"site-item-add",itemAddUp:"site-item-add-up",itemAddDown:"site-item-add-down",item:"site-item",js_item:"js_site-item",bdNormal:"site-bd-normal",itemText:"site-text",itemTpl:"site-tpl",sugError:"error"},
sug:{requestQuery:"wd",url:"http://nssug.baidu.com/su",callbackFn:"baidu.sug",callbackDataKey:"s",requestParas:{prod:"superpage"},n:5,noSubmit:!0},error:{500:'\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u70b9 <a href="http://www.hao123.com" target="_self">\u8fd9\u91cc</a> \u5237\u65b0\u9875\u9762',501:"\u8be5\u7f51\u5740\u5df2\u5b58\u5728",510:'\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u70b9 <a href="http://www.hao123.com"  target="_self">\u8fd9\u91cc</a> \u5237\u65b0\u9875\u9762',503:'\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u70b9 <a href="http://www.hao123.com"  target="_self">\u8fd9\u91cc</a> \u5237\u65b0\u9875\u9762',
511:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\uff0c\u5982http://www.abc.com",512:"\u7f51\u7ad9\u540d\u79f0\u8fc7\u957f",513:"\u7f51\u5740\u8fc7\u957f",515:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u540d\u79f0",516:"\u8bf7\u8f93\u5165\u7f51\u5740",507:"\u8bf7\u60a8\u5148\u767b\u5f55",514:"\u7f51\u5740\u5df2\u6ee1\uff0c\u8bf7\u5220\u9664\u4e0d\u5e38\u7528\u7684\u7f51\u5740"},info:{loading:"\u6b63\u5728\u8bf7\u6c42\uff0c\u8bf7\u7a0d\u5019",ok:"\u64cd\u4f5c\u6210\u529f\uff01",refresh:"\u6b63\u5728\u5237\u65b0\uff0c\u8bf7\u7a0d\u5019"},
url:{init:"/url/init",add:"/url/add",modify:"/url/modify",doDelete:"/url/delete",recover:"/url/reset",needImport:"/url/isneedimport",doImport:"/url/import",sort:"/url/sort",cr:"/api/paneldata",delRecommend:"/api/delrecom",delRecombyid:"/api/delrecombyid",user:"/api/username",adds:"/url/recomadds"},retry:2,recommendN:3,recommendMaxWord:5,showSaveMax:5,nameMaxLength:40,urlMaxLength:200,siteMaxlength:48,guestMaxLength:10,guestStatus:2,dragHint:"\u62d6\u52a8\u6392\u5e8f",confirmTitle:"\u63d0\u793a",confirmText:"\u767b\u5f55\u540e\u53ef\u7f16\u8f91\u66f4\u591a\u7f51\u5740\uff0c\u968f\u65f6\u968f\u5730\u6536\u85cf\uff0c\u4e0d\u518d\u62c5\u5fc3\u7f51\u5740\u4e22\u5931\uff01",
alertTitle:"\u63d0\u793a",recoverTitle:"\u6062\u590d\u9ed8\u8ba4",recoverText:"\u662f\u5426\u8981\u6062\u590d\u4e3a\u9ed8\u8ba4\u7f51\u5740\uff1f",adddedText:"\u5df2\u6dfb\u52a0\uff0c\u70b9\u51fb\u53d6\u6d88",emptyText:"\u6e05\u7a7a\u5386\u53f2\u8bb0\u5f55\uff01",guestHint:"\u7f51\u5740\u8fc7\u591a\uff0c\u5efa\u8bae\u767b\u5f55\u540e\u6c38\u4e45\u4fdd\u5b58",baiduCookie:"BAIDUID",flashCookie:"FLASHID",dataIdAttr:"data-id",iconBaseUrl:"hao123.com/urlicon/",defaultIconUrl:"http://img1.hao123.com/urlicon/6000.png",
jsItem:".js_site-item",tpl:{sugMain:'<ol class="site-sugwrap">#{content}<ol>',sugItem:'<li site="#{site}" q="#{q}"><span class="name">#{title}</span><span class="url">#{text}</span></li>',sugSplitChar:"0{#S+_}",recommend:"<li><a class='item item-add js_recommend' data-id='#{id}' hidefocus='true'  data-type='recommend' href='#{url}'>#{name}</a></li>",cms:"<dl class='g_clr'><dt><span class='popup-site-cms-title'>#{name}</span></dt>#{content}</dl>",cmsContent:"<dd #{itemStyle}><a href='#{url}' data-id='#{id}' hidefocus='true' data-type='cms' class='#{className}'>#{name}</a></dd>",
itemTag:"<ul>",editItem:"<li title='\u62d6\u52a8\u6392\u5e8f' class='js_site-item' data-id='#{id}' data-status='#{status}' data-name='#{rawName}'  data-url='#{url}'><span class='js_text text' >#{name}</span><a  class='js_modify modify'  href='#' title='\u4fee\u6539' hidefocus='true'></a><a class='js_delete delete'  href='#'  title='\u5220\u9664' hidefocus='true'></a></li>",item:'<li class="js_site-item g-ib site-item site-item-normal #{style}" data-status="#{status}" title="#{title}" data-id="#{id}"><a class="js_text" href="#{url}" style="background-image:url(#{icon})" hidefocus="true">#{name}</a></li>',
recommendNone:'<div class="popup-site-recommend-sidenone"><h5>\u60a8\u5e38\u70b9\u7684\uff1a</h5><span>\u8fd8\u6ca1\u6709\u53d1\u73b0\u60a8\u5e38\u70b9\u7684\u7f51\u5740\uff0c\u5efa\u8bae\u60a8\u591a\u4f7f\u7528hao123</span></div>',noData:'<li class="js_no-data nodata">\u6ca1\u6709\u5e38\u7528\u7f51\u5740\uff0c\u8bf7\u60a8<a href="javascript:void(0)">\u6dfb\u52a0</a></li>',addNormalBtn:'<li class="js_item-add g-ib site-item site-item-add site-item-add-normal"><i></i><span class="site-item-add-text">\u6dfb\u52a0\u7f51\u5740</span>#{recommend}</li>',
addShortBtn:'<li title="\u6dfb\u52a0\u7f51\u5740" class="js_item-add g-ib site-item site-item-add site-item-add-short"><i></i>#{recommend}</li>',addRecommend:"",tipTpl:'<div class="popup-site-tip-add"><i class="popup-site-tip-close js_add-tip-close">\u5173\u95ed</i></div>'}}});
__d("widget.site.drag",["widget.site.config","common.js.jquery","common.js.browser","common.js.format","common.js.events"],function(p,v,o,a){function f(d,i){this.container=d;this.placeHolder=i;this._events={sorted:[]};this.activeIndex=-1}function e(d){if(d.pageX||d.pageY)return{x:d.pageX,y:d.pageY};if(document.documentElement&&document.documentElement.scrollTop)return{x:d.clientX+document.documentElement.scrollLeft-document.documentElement.clientLeft,y:d.clientY+document.documentElement.scrollTop-
document.documentElement.clientTop};if(document.body)return{x:d.clientX+document.body.scrollLeft-document.body.clientLeft,y:d.clientY+document.body.scrollTop-document.body.clientTop}}var j=a("widget.site.config"),h=a("common.js.jquery"),k=a("common.js.browser");a("common.js.format");var l=a("common.js.events"),d=null,u=j.jsItem;u.substring(1);var x="item-move";f.prototype={setIsCanDrag:function(d){this._isCanDrag=d},dragable:function(){var d=this;this.container.delegate(j.jsItem,"mousedown",function(i){function g(g){var w=
e(g),g=w.x,w=w.y,i=g-s+f,m=w-b+y;0<i&&i+c.offsetWidth<d.container.width()+10&&(f=i);0<m&&m<d.container.height()&&(y=m);c.style.left=f+"px";c.style.top=y+"px";s=g;b=w;d._dealMeet(c);return!1}function a(){h(document).off("mousemove",g);h(document).off("mouseup",a);k.ie?c.releaseCapture():c.style.opacity="";d._moveTo(c,function(){h(c).insertBefore(d.placeHolder).removeClass(x);d.placeHolder.hide();var b=h(u).index(c);d.activeIndex!=b&&(d.activeIndex=b,l.emit("sorted"))});return!1}function n(){return d._isCanDrag?
!1:!0}d.container.on("click",n);if(!(0<=i.target.className.indexOf("js_modify")||0<=i.target.className.indexOf("js_delete"))){d.activeIndex=h(u).index(this);k.ie?this.setCapture():this.style.opacity=0.8;this.style.left=this.offsetLeft+"px";this.style.top=this.offsetTop+"px";this.className=this.className+" "+x;d.placeHolder.insertBefore(this);d.placeHolder.show();var f=parseInt(this.style.left),y=parseInt(this.style.top),i=e(i),s=i.x,b=i.y;d._registePosition();var c=this;h(document).on("mousemove",
g);h(document).on("mouseup",a);h(document).off("mouseup",n);return!1}})},_registePosition:function(){d=[];h(u,this.container).each(function(a){d.push({left:this.offsetLeft,top:this.offsetTop,index:a,thisObj:this})});this.placeHolder.index=h("li,",this.container).index(this.placeHolder)},_dealMeet:function(a){for(var i=a.offsetLeft,g=a.offsetTop,f=0;f<d.length;f++)if(d[f].thisObj!==a&&Math.abs(d[f].left-i)<0.5*a.offsetWidth&&Math.abs(d[f].top-g)<0.3*a.offsetHeight){this.placeHolder.index>d[f].index?
this.placeHolder.insertBefore(d[f].thisObj):this.placeHolder.insertAfter(d[f].thisObj);this._registePosition();break}},_moveTo:function(d,i){function g(){s+=(u-a)/c;b+=(y-f)/c;d.style.left=s+"px";d.style.top=b+"px";w++<c?window.setTimeout(g,j):i()}var a=d.offsetLeft,f=d.offsetTop,u=this.placeHolder.get(0).offsetLeft,y=this.placeHolder.get(0).offsetTop,s=a,b=f,c=6,j=20,w=0;10>Math.abs(u-a)&&10>Math.abs(y-f)?i():window.setTimeout(g,j)}};return f});
__d("common.js.placeholder",["common.js.browser"],function(p,v,o,a){a("common.js.browser");return function(a,e,j){"length"in a||(a=Array(a));for(var h=0,k=a.length;h<k;h++){"id"in a[h]||(a[h].id="p"+(new Date).getTime());var l=document.createElement("label");l.setAttribute("for",a[h].id);l.innerHTML=e;l.style.cssText="position:absolute;color:#999;z-index:999; background-color: #FFFFFF; ";l.className=j;a[h].parentNode.appendChild(l);a[h].setAttribute("autoComplete","off");a[h].onkeydown=a[h].onmousedown=
function(){l.style.display="none"};l.onclick=function(d){return function(){this.style.display="none";d.focus()}}(a[h]);var d=function(d,a){return function(){""==a.value&&(d.style.display="")}}(l,a[h]);window.addEventListener?a[h].addEventListener("blur",d,!1):a[h].attachEvent("onblur",d)}}});
__d("common.js.timeHint",[],function(){function p(p,o){this.duration=o||3E3;this.timeHandler=null;this.elem=p}p.prototype={show:function(p,o){var a=this,o=o||{};a.timeHandler&&window.clearTimeout(a.timeHandler);o.text&&a.elem.html(o.text);a.elem.css(p);a.elem.show();a.timeHandler=window.setTimeout(function(){a.elem.hide()},a.duration)},hide:function(){this.timeHandler&&(window.clearTimeout(this.timeHandler),this.timeHandler=null);this.elem.hide()}};return p});
__d("widget.popup.confirm",["widget.popup.base"],function(p,v,o,a){a("widget.popup.base");$.widget("hao123.confirm",$.lottery.popup,{options:{className:"popup-confirm",isModel:!0,okText:"\u786e\u5b9a"},_create:function(){this._baseCreate();var a=this.element,e=this;$(".js_title",a).html(this.options.title);$(".js_text",a).html(this.options.text);$(".js_close",a).click(function(){e._baseHide();e._trigger("close");return!1});$(".js_ok",a).click(function(){e._baseHide();e._trigger("ok")}).text(e.options.okText);
$(".js_cancel",a).click(function(){e._baseHide();e._trigger("cancel")})},show:function(){this._baseShow()}});return o});
__d("common.js.login",["common.js.events","common.js.config"],function(p,v,o,a,f,e){function j(a){var f={apiOpt:{safeFlag:0,memberPass:!0,staticPage:window.location.protocol+"//"+window.location.host+"/jumpv3.htm",u:window.location.href,product:"hao123",subpro:"hao123-indexnu"},authsite:["qzone","tsina","renren"],tangram:!window.baidu||!window.baidu.version||0!==window.baidu.version.indexOf("2."),cache:!1,registerLink:"https://passport.baidu.com/v2/?reg&tpl=hao123&regType=1&subpro=hao123-indexnu&u="+
window.location.href,forgetLink:"https://passport.baidu.com/?getpass_index",onLoginSuccess:function(a){var i={rspData:a.rsp.data,origin:a};a.returnValue=!1;d=!0;k.hide();l&&l(i);h.emit("login.success",i)}};a&&$.extend(f,a);k=passport.pop.init(f)}var h=a("common.js.events"),k,l,d=a("common.js.config").get("userinfo").islanding;v.exports={init:function(a){k||e(["common.js.jquery"],function(d){d.ajax({url:"http://passport.bdimg.com/passApi/js/uni_login_wrapper.js?cdnversion="+(+new Date/6E5|0),dataType:"script",
cache:!0,success:function(){j(a)}})})},show:function(a,d){k.show();setTimeout(function(){d&&d()},1E3);l=a},hide:function(){k.hide()},isLogin:function(){return d}};return o});
__d("widget.popup.alert",["widget.popup.base"],function(p,v,o,a){a("widget.popup.base");$.widget("hao123.alert",$.lottery.popup,{options:{className:"popup-alert",isModel:!0,okText:"\u786e\u5b9a"},_create:function(){this._baseCreate();var a=this.element,e=this;$(".js_title",a).html(this.options.title);$(".js_text",a).html(this.options.text);$(".js_close",a).click(function(){e._baseHide();return!1});$(".js_ok",a).click(function(){e._baseHide();e._trigger("ok")}).text(e.options.okText)},show:function(){this._baseShow()}});
return o});
__d("widget.site.siteModel","widget.site.config,common.js.events,common.js.cookie,common.js.login,common.js.JSON,common.js.config,common.js.jquery".split(","),function(p,v,o,a){function f(){(new Date).getTime();return e()?{key:(new Date).getTime(),c:e()}:null}function e(){var a=u.getBaiduId();return(a=u.getFlashId()||a)?window.encodeURIComponent(a):null}function j(a){var d=window.location.search.match(/[?&]tn=([^&<>'"]+)/);1==i.get("tnuser")&&(a=a+"?tn="+d[1]);return a}function h(a){if(a)for(var d=0;d<
n.length;d++)n[d].id=a[n[d].id],n[d].style=""}function k(a){return a.replace(/(.*)\/$/,"$1").toLowerCase()}var l=a("widget.site.config"),d=a("common.js.events"),u=a("common.js.cookie"),x=a("common.js.login"),t=a("common.js.JSON"),i=a("common.js.config"),g=a("common.js.jquery"),q=l.url,n=[],r={setData:function(a){n=a},checkLimit:function(a){if(a&&this.getItemById(a).status==l.guestStatus)return 0;for(var d=a=0;d<n.length;d++)n[d].status==l.guestStatus&&a++;return a>=l.guestMaxLength?517:0},getUserDataCount:function(){for(var a=
0,d=0;d<n.length;d++)n[d].status==l.guestStatus&&a++;return a},getData:function(){return n},checkIsShowSave:function(){if(x.isLogin())return!1;var a=this.getUserDataCount();return a>=l.showSaveMax?a:!1},checkIsShowRecover:function(){return 0==n.length||500<n[0].id?!0:!1},checkFull:function(){return n.length>=l.siteMaxlength?514:0},checkAddDuplicate:function(a){for(var d=0;d<n.length;d++)if(n[d].url==a)return 501;return 0},checkModifyDuplicate:function(a){if(a.url==this.getItemById(a.id).url)return 0;
for(var d=0;d<n.length;d++)if(n[d].url==a.url)return 501;return 0},init:function(a){n=a},setRecommend:function(){},getModifyItem:function(a){return modifyItem=this.getItemById(a)},getItemById:function(a){for(var d=0;d<n.length;d++)if(n[d].id==a)return n[d]},deleteItemById:function(a){for(var d=0;d<n.length;d++)n[d].id==a&&n.splice(d,1)},getUser:function(){var a=f();g.ajax({url:q.user,success:function(a){switch(a.code){case 200:d.emit("getUser",{userName:a.name,code:200});break;default:d.emit("getUser",
{userName:"",code:a.code})}},error:function(){d.emit("getUser",{userName:"",code:"900"})},data:a,dataType:"json",type:"GET"})},sort:function(a){g.post(q.sort,g.extend({ids:a},f()),function(a){d.emit("operated");switch(a.code){case 200:break;case 201:h(a.data.map);d.emit("firsted",a.data.map);break;default:d.emit("error",{code:a.code,src:"sort"})}},"json")},recover:function(){g.getJSON(q.recover,f(),function(a){switch(a.code){case 200:n=a.data.sites;d.emit("recovered",a.data.sites);break;default:d.emit("error",
{code:a.code,src:"recover"})}})},addTwo:function(a){var i=r.checkAddDuplicate(a.url);0<i?d.emit("error",{code:i,src:"feadd"}):(a.key=(new Date).getTime(),g.post(q.add,g.extend(a,f(),{type:"recommend"}),function(b){d.emit("operated");var c=null;switch(b.code){case 200:c={icon:b.data.icon,name:a.name,url:a.url,id:b.data.id,status:b.data.status,obj:a.obj};n.push(c);d.emit("addtwoed",c);break;default:d.emit("error",{code:b.code,src:"addtwo"})}},"json"))},add:function(a){var i=r.checkAddDuplicate(a.url);
0<i?d.emit("error",{code:i,src:"feadd"}):(a.key=(new Date).getTime(),g.post(q.add,g.extend(a,f()),function(b){d.emit("operated");var c=null;switch(b.code){case 201:h(b.data.map),d.emit("firsted",b.data.map);case 200:c={isRecommend:a.isRecommend,icon:b.data.icon,name:a.name,url:a.url,id:b.data.id,status:b.data.status,type:a.type,obj:a.obj};n.push(c);d.emit("added",c);break;default:c="add",a.isSynadd&&(c="synadd"),d.emit("error",{code:b.code,src:c})}},"json"))},addBanner:function(a,i){g.post(q.add,
g.extend(a,f()),function(b){d.emit("operated");var c=null;switch(b.code){case 200:c={icon:b.data.icon,name:a.name,url:a.url,id:b.data.id,status:b.data.status};n.push(c);i(!0,c);break;default:i(!1,b.code)}},"json")},updateBanner:function(a,i){var b=this;g.post(q.modify,g.extend(a,f()),function(c){d.emit("operated");switch(c.code){case 201:h(c.data.map);var g=b.getItemById(c.data.id);g.name=a.name;g.url=a.url;g.oldId=g.id;g.id=c.data.id;g.status=c.data.status;g.icon=c.data.icon;i(!0,g);break;default:i(!1,
c.code)}},"json")},adds:function(a){var i=t.parse(a);g.post(q.adds,g.extend(f(),{urls:a}),function(a){d.emit("operated");switch(a.code){case 200:n=n.concat(i),h(a.data.map),d.emit("addsed",n)}},"json")},addClickSync:function(a){g.post(q.add,g.extend(a,f(),{type:"recommend"}),function(i){d.emit("operated");var b=null;switch(i.code){case 201:h(i.data.map),d.emit("firsted",i.data.map);case 200:b={icon:i.data.icon,name:a.name,url:a.url,id:i.data.id,status:i.data.status};n.push(b);d.emit("addClickSynced",
b);break;default:d.emit("error",{code:i.code,src:"addClickSync"})}},"json")},doDelete:function(a,i){g.getJSON(q.doDelete,g.extend({id:a},f()),function(b){d.emit("operated");switch(b.code){case 201:r.deleteItemById(a);h(b.data.map);i||d.emit("firsted",b.data.map);d.emit("delete");break;case 200:r.deleteItemById(a);d.emit("delete");break;default:d.emit("error",{code:b.code,src:"del"})}})},delRecommend:function(){g.getJSON(j(q.delRecommend),f(),function(a){500<=a.code&&d.emit("error",{code:a.code,src:"delRecommend"})})},
delRecombyid:function(a){g.getJSON(j(q.delRecombyid),g.extend({id:a},f()),function(a){500<=a.code&&d.emit("error",{code:a.code,src:"delRecombyid"})})},modify:function(a,i){var b=r.checkModifyDuplicate(a);if(0<b)d.emit("error",{code:b,src:"femodify"});else{var c=this;g.post(q.modify,g.extend(a,f()),function(b){d.emit("operated");switch(b.code){case 201:h(b.data.map),i||d.emit("firsted",b.data.map);case 200:var w=c.getItemById(201==b.code?b.data.map[b.data.oldid]:b.data.oldid);w.name=a.name;w.url=a.url;
w.id=b.data.id;w.status=b.data.status;w.icon=b.data.icon;i||d.emit("modified",w);break;default:d.emit("error",{code:b.code,src:"modify"})}},"json")}},refresh:function(){var a=f();if(!a)return!1;g.ajax({url:q.init,success:function(a){switch(a.code){case 200:a.data.isuser?(n=a.data.sites,d.emit("refreshed",!0)):d.emit("refreshed",!1);break;default:d.emit("error",{code:a.code,src:"refreshSuccess"})}},error:function(){g.ajax({url:q,data:f(),success:function(a){d.emit("error",{code:"588",src:"refresh"+
a.substring(0,500)})},dataType:"text",type:"GET"})},data:a,dataType:"json",type:"GET"})},sortData:function(a){var d={};g.each(n,function(){d[this.id]=this});n=[];g.each(a,function(){n.push(d[this])});return n},getCRdata:function(){var a=f();a.n=6;var i={};g.each(n,function(){i[k(this.url)]=this.id});0<document.URL.indexOf("sitepopuppreview")&&(a.preview=1);g.ajax({url:j(q.cr),success:function(a){g.each(a.data.cms,function(){this.isTitle||(this.isAdded=Boolean(i[k(this.url)]),this.id=i[k(this.url)])});
d.emit("cred",a)},error:function(a,c,i){d.emit("error",{code:599,src:"cr"+c+i})},data:a,dataType:"json",type:"GET"})}};return r});
__d("widget.site.log",["common.js.login","common.js.log","common.js.config"],function(p,v,o,a){function f(a,f){var a=a||{},d;for(d in f)a[d]=f[d];return a}var e=a("common.js.login"),j=a("common.js.log"),h=a("common.js.config");return function(a){function l(){return e.isLogin()}var d={level:1,page:h.get("pageId")};0<$('#site .js_site-item[data-status="0"]').length&&j(f({type:"rpuser2",ut:"haveadd"},d));!h.get("userinfo").iscuser&&h.get("userinfo").recommendData&&j(f({type:"rpuser2",ut:"defadd"},d));
a.bind("sitemanageclick",function(){var a=f({type:"manage",isLogin:l()},d);j(a)});a.bind("siteintoaddclick",function(){var a=f({type:"intoadd",isLogin:l()},d);j(a)});a.bind("sitenoneaddclick",function(){var a=f({type:"noneadd"},d);j(a)});a.bind("sitelogin",function(a,e){var l=f({type:e.login,twicetype:e.twicelogin},d);j(l)});a.bind("sitedefaultlogin",function(){var a=$.parseJSON(h.get("userinfo").cinfo),a=f({type:"defaultLogin",cinfo:a?a.loginFrom:""},d);j(a)});a.bind("siteadd",function(a,e){j(f({type:"add",
siteId:e.id,siteUrl:e.url,isLogin:l(),siteStatus:e.status||""},d))});a.bind("siteaddsync",function(a,e){j(f({type:"addsync",siteId:e.id,siteUrl:e.url,isLogin:l()},d))});a.bind("siterecommend",function(a,e){var h=f({type:"recommend",siteId:e.id,siteUrl:e.url,isLogin:l()},d);j(h)});a.bind("siteaddclicksync",function(a,e){var h=f({type:"addclicksync",siteId:e.id,siteUrl:e.url,isLogin:l()},d);j(h)});a.bind("sitecms",function(a,e){var h=f({type:"cms",siteId:e.id,siteUrl:e.url,isLogin:l(),siteStatus:e.status||
""},d);j(h)});a.bind("sitemodify",function(a,e){var h=f({type:"modify",siteId:e.id,siteUrl:e.url,isLogin:l(),siteStatus:e.status||""},d);j(h)});a.bind("sitedeletesync",function(){var a=f({type:"syncdelete"},d);j(a)});a.bind("sitedodelete",function(a,e){var h=f({type:"delete",siteId:e.id,siteUrl:e.url,isLogin:l(),siteStatus:e.status||""},d);j(h)});a.bind("siterecovered",function(){var a=f({type:"recover",isLogin:l()},d);j(a)});a.bind("sitetextclick",function(a,e){var h=f({type:"textclick",siteId:e.id,
siteUrl:e.url,status:e.status,isLogin:l()},d);j(h)});a.bind("siterefresh",function(){var a=f({type:"refresh"},d);j(a)});a.bind("siteerror",function(a,e){var l=f({type:"siteerror",code:e.code},d);e.info&&(l.info=e.info);j(l)});a.bind("siteerrorflash",function(){var a=f({type:"siteerrorflash"},d);j(a)});a.bind("sitemanagerecommend",function(){var a=f({type:"managerecommend"},d);j(a)});a.bind("sitedeleteallrecommend",function(){var a=f({type:"deleteallrecommend"},d);j(a)});a.bind("sitegetusererror",
function(a,e){var l=f({type:"getusererror",code:e},d);j(l)});a.bind("sitehintclose",function(){var a=f({type:"sitehintclose"},d);j(a)})}});
__d("widget.site.siteRecord",["common.js.JSON"],function(p,v,o,a){function f(){k=(k=window.localStorage.getItem(l))?h.parse(k):k}function e(a){null===k&&(k={});a in k||(k[a]=0);k[a]+=1;window.localStorage.setItem(l,h.stringify(k))}function j(){}var h=a("common.js.JSON"),k=null,l="index_sites",p=null,p={get:function(a){if(null===k)return a[0];var e=Number.MAX_VALUE,f;$.each(a,function(a,d){if(e>(k[d]?k[d]:0))e=k[d],f=d});return f}};window.localStorage?(p.add=e,p.init=f):(p.add=j,p.init=j);return p});
__d("widget.site.siteBanner","common.js.config,common.js.events,common.js.format,common.js.cookie,widget.site.siteModel,common.js.adjust,widget.site.siteRecord".split(","),function(p,v,o,a){var f;function e(a,d){var g;g=$(l(f,{title:a.title,url:a.url}));var e=i.find(".js_link").offset();g.css({top:e.top-20,left:e.left});e=$('#site li[data-id="'+a.id+'"]').offset();g.animate({top:e.top,left:e.left},1E3,function(){g.remove();d()});$("body").append(g)}function j(a){var d=/(https?|ftp):\/\/[^\/]+/,i=
a.match(d);if(!i)return!1;var i=i[0],g=!0;$("#site .js_text").each(function(a,c){if(0<=c.getAttribute("href",2).match(d).indexOf(i))return g=!1,!0});return g}var h=a("common.js.config"),k=a("common.js.events"),l=a("common.js.format"),d=a("common.js.cookie"),u=a("widget.site.siteModel"),x=a("common.js.adjust").adjust,t=a("widget.site.siteRecord"),i;f='<div class="site-move-item" style="background-image:url(http://img2.hao123.com/urlicon/#{icon})">#{title}</div>';var g,q=null;return o={excute:function(a){if(!h.get("userinfo").iscuser&&
!d.has("sitebanner")&&1===a.isShow){var f=h.get("userinfo").recommendData;if(!(f&&2<=f.length)){f&&1==f.length?q=f[0]:t.init();i=$("#site .site-hot-w");switch(a.type){case "replace":g=t.get(a.filterReplace);a.info2=u.getItemById(g).name;if(q&&(a.title=q.title,a.url=q.url,a.id=q.id,!j(a.url)))return;i.html(l('<div class="site-hot"><span>#{info}</span><span class="site-hot-relink">#{info2}</span><span class="site-hot-label">\u63a8\u8350\u66ff\u6362\u4e3a\uff1a</span><a class="site-hot-link site-hot-link-add js_link" href="#{url}"  hidefocu="true">#{title}</a><a class="site-hot-more js_more"  hidefocu="true">#{more}&nbsp;&gt;&gt;</a><a class="site-hot-close js_close" href="###"  hidefocu="true">\u5173\u95ed</a></div>',
a)).show();break;case "del":g=t.get(a.filterDelete),a.info2=u.getItemById(g).name,i.html(l('<div class="site-hot"><span>#{info}</span><span class="site-hot-relink">#{info2}</span><span class="site-hot-label">\u5efa\u8bae\u60a8\uff1a</span><a class="site-hot-link site-hot-link-del js_link" href="#" hidefocu="true">\u4e00\u952e\u5220\u9664</a><a class="site-hot-more js_more"  hidefocu="true">#{more}&nbsp;&gt;&gt;</a><a class="site-hot-close js_close" href="###"  hidefocu="true">\u5173\u95ed</a></div>',
a)).show()}i.find(".js_close").click(function(){d.set("sitebanner",1,{expires:30});i.slideUp();k.emit("banner.close",a.type);return!1});i.find(".js_more").click(function(){k.emit("banner.other",a.type);a.moreHandler()});i.find(".js_link").click(function(){var d={title:this.innerHTML,url:this.href,id:g,icon:a.icon};switch(a.type){case "replace":e(d,function(){a.replaceHandler(d);i.slideUp()});break;case "del":a.deleteHandler(d,i)}k.emit("banner.link",a.type);return!1});x();k.emit("banner.show",a.type)}}},
hide:function(){i&&i.hide(x)},slideUp:function(){i&&i.slideUp(x)},add:function(a){t.add(a)}}});
__d("widget.site.siteBannerLog",["common.js.events","common.js.log"],function(p,v,o,a){var f=a("common.js.events"),e=a("common.js.log");return function(){f.on("banner.show",function(a){e({type:"sitebannershow",sort:a})});f.on("banner.close",function(a){e({type:"sitebannerclose",sort:a})});f.on("banner.other",function(a){e({type:"sitebannerother",sort:a})});f.on("banner.link",function(a){e({type:"sitebannerlink",sort:a})})}});
__d("widget.site.site","common.js.format,common.js.events,common.js.cookie,common.js.config,common.js.profile,widget.popup.getTpl,common.js.adjust,common.js.timeHint,common.js.browser,widget.site.siteBanner,widget.site.siteBannerLog,common.js.login,widget.popup.mask,widget.append.append,widget.popup.confirm,widget.popup.alert,widget.site.siteModel,widget.site.config,widget.site.siteView,widget.site.log,common.js.log,common.js.localcookie,widget.site.drag,common.js.widget".split(","),function(p,v,
o,a){var f=a("common.js.format"),e=a("common.js.events"),j=a("common.js.cookie"),h=a("common.js.config"),k=a("common.js.profile"),l=a("widget.popup.getTpl"),d=a("common.js.adjust").adjust,u=a("common.js.timeHint"),x=a("common.js.browser"),t=a("widget.site.siteBanner"),i=a("widget.site.siteBannerLog"),g=a("common.js.login"),q=a("widget.popup.mask");a("widget.popup.confirm");a("widget.popup.alert");var n=a("widget.site.siteModel"),r=a("widget.site.config"),y=a("widget.site.siteView");a("widget.site.log");
a("common.js.log");var s=a("common.js.localcookie"),b=a("widget.site.drag"),c,z=!1;a("common.js.widget");$.widget("hao123.site",{options:{},_initTask:function(){function a(){j.set(b,1,{expires:0})}var b,m=window.location.search.match(/\?key=([^<>&]+)&taskid=5/);m&&m[1]&&(this.isTask=!0,b=m[1],this._onManageClick(),e.on("added",a),e.on("modified",a),e.on("delete",a))},_initBanner:function(){i();c.siteBannerConfig=$.extend(c.options.banner,{replaceHandler:function(a){c.bd.find('[data-id="'+a.id+'"]').find("a").text(a.title).attr("href",
a.url).get(0).style.background="url(http://img2.hao123.com/urlicon/"+a.icon+") no-repeat 0 0";c.model.modify({name:a.title,url:a.url,id:a.id},!0)},deleteHandler:function(a){c.bd.find('[data-id="'+a.id+'"]').slideUp(800,function(){c.model.doDelete(a.id,!0);t.slideUp()})},moreHandler:function(){c._onManageClick();t.hide()},filterReplace:c.options.banner.filterReplace.split(","),filterDelete:c.options.banner.filterDelete.split(",")});var a=$("#site");a.on("click",".js_item-add",function(){t.hide()});
$(".js_manage",a).click(function(){t.hide()});$(".js_text",a).click(function(){var a=this.parentNode.getAttribute("data-id");t.add(a)})},_init:function(){var a=this.element;c=this;c.config=r;c.iscuser=h.get("userinfo").iscuser;c.recommendData=h.get("userinfo").recommendData||[];for(var b=[];5<c.recommendData.length;)c.recommendData.pop();c.recommend2Text=b.title;c.recommend2Url=b.url;c.retried=0;c.isFromTopLogin=!1;c.view=y;c.model=n;c.confirmPopup=$(l("confirm")).confirm({title:c.config.confirmTitle,
text:c.config.confirmText});c.recoverPopup=$(l("confirm")).confirm({title:c.config.recoverTitle,text:c.config.recoverText});c.alertPopup=$(l("alert")).alert({title:c.config.alertTitle,text:c.config.alertText});c.recommends=$(".site-item-recommend",a);c.loading=$(".popup-site-loading",a);c.popContent=$(".popup-site-content",a);c.refresh=$(".js_refresh",a);c.refreshButton=$(".js_refresh-button",a);c.manage=$(".js_manage",a);c.add=$(".js_psite-add",a);c.modify=$(".js_psite-modify",a);c.psite=$(".js_psite",
a);c.sugName=$(".js_sug-name",a);c.sugUrl=$(".js_sug-url",a);c.save=$(".js_psite-save",a);c.saveForeverHint=$(".js_hint-saveForever",a);c.bd=$(".js_bd",a);c.dash=$("<li></li>");c.addCount=$(".js_add-count",a);c.topRecommend=$(".site-item-recommend",a);c.topRecommendLink=c.topRecommend.find(".js_text");c.topRecommendDelete=$(".js_recommend_delete",a);c.topRecommendHint=$(".site-item-recommend-hint",a);c.context=$("#popup-site-holder");c.psite.appendTo(c.context);c.recommend2Js=$(f("<div class='rpjs'><div class='rp'><em class='left'></em><span>\u63a8\u8350:</span><a data-max-width='90' href='#{url}'>#{text}</a><i></i></div>",
{text:c.recommend2Text,url:c.recommend2Url}));c.recommend2=c.recommend2Js.find(".rp");c.recommend2Em=c.recommend2Js.find("em");c.recommend2Link=c.recommend2.find("a");c.recommend2key="site_recommend2";c._bind();z||(c._eventBind(),z=!0);c.init();c.saveHintCookie="site_shave_hint";$(function(){window.setTimeout(c._hint,100);var a=h.get("userinfo").iscuser,b=0;$("li",c.bd).each(function(a,m){if(0==m.getAttribute("data-status"))return b=1,!1});c._trigger("rp",null,{iszdyuser:a,isrpuser:b})});a=$(".site-hd0",
c.element);c._initAlog(a);c._initTask()},_cal_alog_custom:function(a){var b="",a=a.split(",");1==a.length?b="ind:"+a[0]:2==a.length&&("y"==a[1]?a[1]=1:"n"==a[1]&&(a[1]=0),b="ind:"+a[0]+",sal:"+a[1]);return b},_initAlog:function(a){$("a",a).each(function(){var a=$(this).attr("cls");a&&$(this).attr("alog-custom",c._cal_alog_custom(a))})},_initRecommend:function(){c.recommends.click(function(){c.model.adds(c.view.getRecommends());c.recommends.removeClass("site-item-recommend")})},init:function(){var a=
this;a.isLanding=h.get("userinfo").islanding;a.userName=h.get("userinfo").username;a._initRecommend();a._initBanner();a.isLanding&&(a._trigger("defaultlogin",null),a.userName||a.model.getUser());var b;0<a.recommend2Link.length&&(b=a.recommend2Link.get(0).getAttribute("href",2));b=a.view.init(a,b);a.model.init(a.view.getSiteData());if(b){a.needRefresh=!0;var m=j.getBaiduId();s.wait(function(b,c){b&&c&&c!=m?a.model.refresh():(a.bd.find(".js_item-add").show(),a.manage.show(),t.excute(a.siteBannerConfig))},
2E3)}else t.excute(a.siteBannerConfig);this._ajust();this._delete1();this._delete2()},_initPopupVariable:function(){var a=this.context;this.close=$(".js_psite-close",a);this.sites=$(".js_psite-sites",a);this.recover=$(".js_psite-recover",a);this.recommendContent=$(".js_psite-recommend-content",a);this.recommendControl=$(".js_psite-recommend-control",a);this.recommendCount=$(".js_psite-recommend-count",a);this.cms=$(".js_psite-cms",a);this.recommend=$(".js_psite-recommend",a);this.recover=$(".js_psite-recover",
a);this.sug=$(".js_psite-sug",a);this.tipDel=$(".popup-site-tip-del",a);this.tipSave=$(".popup-site-tip-save",a);this.hintSug=new u($(".js_hint-sug",a));this.hintAdded=new u($(".js_hint-added",a));this.hintNoicon=new u($(".js_hint-noicon",a));this.hintSave=new u($(".js_hint-save",a),6E3);this.noDataHint=$(".js_nodata-hint",a);this.blink=$(".popup-site-blink",a)},_initPopupPopup:function(){var a=this;a.confirmPopup.bind("confirmok",function(){g.show(function(){$.getJSON("/api/getprof",{c:j.getCSRFId(),
key:+new Date},function(){window.location.href=window.location.href})});a._hidePsite()});a.confirmPopup.bind("confirmcancel",function(){a._showPopup()});a.confirmPopup.bind("confirmclose",function(){a._showPopup()});a.recoverPopup.bind("confirmok",function(){a.model.recover()});a.recoverPopup.bind("confirmcancel",function(){a._showPopup()});a.recoverPopup.bind("confirmclose",function(){a._showPopup()})},_initPopupEvent:function(){var a=this;a.save.click(function(){q.hide();a._hidePsite();g.show(function(){$.getJSON("/api/getprof",
{c:j.getCSRFId(),key:+new Date},function(){window.location.href=window.location.href})});a.saveForeverHint.hide();return!1});a.saveForeverHint.click(function(){j.set(a.saveHintCookie,1);a.saveForeverHint.hide();j.get("stip2")||a.tipSave.show()});a.psite.on("mouseover",".item-added",function(){a.view.onAddedItemOver(this)});a.psite.on("mouseout",".item-added",function(){a.view.onAddedItemOut(this)});a.psite.on("click",".js_recommend",function(){a._showTip();if(!a._checkAdd())return!1;var b=a.view.onItemClick(this);
b&&a.model.add(b);return!1});a.psite.on("click",".js_add-tip-close",function(){$(this).parent(".popup-site-tip-add").hide();j.set("stip0",1,{expires:30});j.get("stip1")||$(".popup-site-tip-del",a.context).show()});a.psite.on("click",".js_del-tip-close",function(){$(this).parent(".popup-site-tip-del").hide();j.set("stip1",1,{expires:30})});a.psite.on("click",".js_save-tip-close",function(){a.tipSave.hide();j.set("stip2",1,{expires:30})});a.psite.on("click",".item-added",function(){var b=a.view.onAddedClick(this);
a.model.doDelete(b);a._trigger("dodelete",null,{id:b,url:this.parentNode.getAttribute("data-url"),status:this.parentNode.getAttribute("data-status")});return!1});a.recover.click(function(){a._hidePsite();a.recoverPopup.confirm("show");return!1});a.close.click(function(){var b=a.view.onSorted();a.view.clearError();a.view.update(a.model.sortData(b));q.hide();a._hidePsite();a._trigger("backclick");a.tipSave.hide();j.set("stip2",1,{expires:30});d();return!1});a.add.click(function(){if(a._checkAdd()){var b=
a.view.onAddClick();b&&a.model.add(b)}return!1});a.modify.click(function(){var b=a.view.onModifyClick();if(!b)return!1;var m=0;if(!g.isLogin()&&(m=a.model.checkLimit(b.id),517==m))return a.confirmPopup.confirm("show"),a._hidePsite(),a.view.on517(),!1;if(0<m)return a.view.showError(m),!1;b&&a.model.modify(b);return!1});a.sites.on("click",".js_modify",function(){a.view.onItemModifyClick(this.parentNode);return!1});a.sites.on("click",".js_delete",function(){a._showTip(1);a.view.onItemDeleteClick(this.parentNode);
var b=this.parentNode.getAttribute("data-id");a.model.doDelete(b);a.model.checkIsShowSave()<a.config.showSaveMax&&a.saveForeverHint.hide();a._trigger("dodelete",null,{id:b,url:this.parentNode.getAttribute("data-url"),status:this.parentNode.getAttribute("data-status")});return!1})},_showTip:function(a){a?($(".popup-site-tip-del",c.context).hide(),j.set("stip1",1,{expires:30})):($(".popup-site-tip-add",c.context).hide(),j.set("stip0",1,{expires:30}),j.get("stip1")||$(".popup-site-tip-del",c.context).show())},
_initPopup:function(){this._initPopupVariable();this._initPopupPopup();this._initPopupEvent();this.siteDrag=new b(this.sites,this.dash);this.siteDrag.dragable();this.view.initSug();this.model.getCRdata()},_showPopup:function(){this.psite.show();q.show();this.recommend2Js.remove()},_checkAdd:function(){var a=0;g.isLogin()||(a=this.model.checkLimit());if(0<a)return this.confirmPopup.confirm("show"),this._hidePsite(),!1;a=this.model.checkFull();return 0<a?(this.view.showError(a),!1):!0},_hidePsite:function(){this.view.clearHint();
this.psite.hide()},_bind:function(){var a=this;$(document).bind("getprof",function(b,m){if(m&&m.urls)switch(result=m.urls,result.code){case 200:m=result.data.sites;a.view.onImported(m);a.model.init(m);break;default:a._trigger("error",null,{code:result.code+"getrof"})}});6==x.ie&&(this.bd.on("mouseover",".js_item-add",function(){$(this).addClass("site-item-add-hover")}),this.bd.on("mouseout",".js_item-add",function(){$(this).removeClass("site-item-add-hover")}));a.bd.on("click",".js_item-add",function(){a._trigger("intoaddclick");
a._onManageClick()});a.bd.on("click",".js_no-data",function(){a._onManageClick();a._trigger("noneaddclick");return!1});a.manage.click(function(){a._onManageClick();return!1});a.bd.delegate(".js_text","mousedown",function(){var b={};b.url=this.href;b.id=this.parentNode.getAttribute("data-id");b.status=this.parentNode.getAttribute("data-status");a._trigger("textclick",null,b)})},_eventBind:function(){var a=this;e.on("firsted",function(b){a.view.onFirsted(b);k.set("urls","true")});e.on("recovered",function(b){a.view.onRecovered(b);
a._showPopup();k.set("urls","false");a._trigger("recovered")});e.on("modified",function(b){a.view.onModified(b);a._trigger("modify",null,b)});e.on("cred",function(b){a.view.onCred(b)});e.on("sorted",function(){a.model.sort(a.view.onSorted().join(","))});e.on("site.update",function(b){a.model.setData(b.data.sites);a.view.update(b.data.sites)});e.on("site.updatePopup",function(b){a._showPopup();a.model.setData(b.data.sites);a.view.updatePopup(b.data.sites)});e.on("getUser",function(b){b.userName?e.emit("login.otherSignin",
b):a.retried<a.config.retry?(a.retried++,a._trigger("getusererror",null,a.retried+"_"+b.code),a.model.getUser()):(e.emit("login.otherSignin",{userName:""}),a.retried++,a._trigger("getusererror",null,a.retried+"_"+b.code))});e.on("operated",function(){k.set("urls","true")});e.on("addtwoed",function(b){a.view.onSecondAdd(b)});e.on("addsed",function(b){a.view.onManageClick(!0,!1);a.view.updatePopup(b);a.loading.hide();a.popContent.show()});e.on("addClickSynced",function(b){a.isAddingClickSync||(a._addSecondRecommend(),
a.isAddingClickSync=!1);a._trigger("addclicksync",null,b)});e.on("added",function(b){a.view.onAdded(b);a.model.checkIsShowSave()>=r.showSaveMax&&a.view.showSaveMessage();b.type?a._trigger(b.type,null,b):a._trigger("add",null,b)});e.on("refreshed",function(b){a.view.onRefreshed(b);b?a._trigger("showrefresh"):t.excute(a.siteBannerConfig)});e.on("imported",function(b){a.view.onImported(b)});e.on("error",function(b){a._trigger("error",null,{code:b.code+b.src,info:b.info});a.view.showError(b.code)});a.refreshButton.click(function(){a.view.onRefreshClick(a.model.getData());
a._trigger("refresh");return!1});e.on("login.signin",function(b){a.save.hide();a.saveForeverHint.hide();b.isInit||(a._trigger("login",null,{login:"login"}),a.recommend2Js.remove(),a.recommendData=[])})},_onManageClick:function(){this._hideHint();this.isManageClicked||(this.isManageClicked=!0,$("#popup-site").get(0).className="popup-site",this._initPopup());0<this.element.find(".site-item-recommend").length&&!this.isTask?(this.loading.show(),this.popContent.hide(),this._showPopup(),this.model.adds(this.view.getRecommends())):
(this.view.onManageClick(this.model.checkIsShowRecover(),this.model.checkIsShowSave()),this.view.updatePopup(this.model.getData()),this.loading.hide(),this.popContent.show(),this._showPopup(),this._trigger("manageclick"),0>=$("#popup-site-holder .popup-site-recommend-sidenone").length&&this._trigger("managerecommend"))},_ajust:function(){$("#site").bind("sitebackclick siterecovered siterefresh siteshowrefresh sitelogin",function(){d()})},_delete1:function(){$(function(){$("#site .js_text").each(function(a,
b){if(null!==window.location.search.match(/[?&]tn=([^&<>'"]+)/)&&"http://www.baidu.com/index.php?tn=10018801_hao"==b.getAttribute("href",2))return b.href="http://www.baidu.com/?tn=10018802_hao",!1})})},_hideHint:function(){c.hint&&(c.hint.hide(),j.set("sitehint",1,{expires:30}))},_hint:function(){},_delete2:function(){var a={g_green:function(a){if(a.hasClass("g_reen"))return!1;a.addClass("g_green");return!1},g_red:function(a){if(a.hasClass("g_red"))return!1;a.addClass("g_red");return!1},g_hot:function(a,
b){if(a.hasClass("g_hot")||a.hasClass("g_tips-r"))return!1;if(70<a.width()||5==b%6)return!0;a.addClass("g_hot");a.append('<i class="g_icon"></i>');return!1},"g_tips-r":function(a,m,c){if(c&&c.seed&&c.rand&&c.seed!==c.rand&&1!=c.ifshow)return!0;m=(new Date).getTime();if(c.stimer&&c.etimer){if(parseInt(c.stimer)<m&&parseInt(c.etimer)>m){if(a.hasClass("g_hot")||a.hasClass("g_tips-r"))return!1;c&&c.url2?(m=a.html(),c=c.cls?'<a monkey="tips"  style="width:0;" class="tips_link g_tips-r" cls="'+(c.cls||
"")+'" alog_custom="'+b._cal_alog_custom(c.cls)+'" href="'+(c.url2||"")+'">&nbsp;<i class="g_icon">'+c.tip+"</i></a>":'<a monkey="tips"  style="width:0;" class="tips_link g_tips-r" href="'+(c.url2||"")+'">&nbsp;<i class="g_icon">'+c.tip+"</i></a>",a.parent().append(c)):(a.addClass("g_tips-r"),m=a.html(),a.html("<b>"+m+"</b>"),a.after(a.clone().html('<b style="display:none;">'+m+"</b>").append('<i class="g_icon" style="top:-19px;left:-7px;">'+c.tip+"</i>").css("padding","1px 0").attr("monkey","qipao")));
return!1}}else{if(a.hasClass("g_hot")||a.hasClass("g_tips-r"))return!1;if(60<a.width())return!0;c&&c.url2?(a.html(),c='<a monkey="tips"  style="width:0;" class="tips_link g_tips-r" href="'+(c.url2||"")+'">&nbsp;<i class="g_icon">'+c.tip+"</i></a>",a.parent().append(c)):(a.addClass("g_tips-r"),m=a.html(),a.html("<b>"+m+"</b>"),a.append('<i class="g_icon">'+c.tip+"</i>"));return!1}},"g_tips-l":function(a,b,c){if(c&&c.seed&&c.rand&&c.seed!==c.rand&&1!=c.ifshow)return!0;b=(new Date).getTime();if(c.stimer&&
c.etimer){if(parseInt(c.stimer)<b&&parseInt(c.etimer)>b){if(a.hasClass("g_hot")||a.hasClass("g_tips-l"))return!1;c&&c.url2?(b=a.html(),c='<a monkey="tips"  style="width:0;" class="tips_link g_tips-l" href="'+(c.url2||"")+'">&nbsp;<i class="g_icon">'+c.tip+"</i></a>",a.parent().prepend(c)):(a.addClass("g_tips-l"),b=a.html(),a.html("<b>"+b+"</b>"),a.after(a.clone().html('<b style="display:none;">'+b+"</b>").append('<i class="g_icon" style="top:-19px;left:-7px;">'+c.tip+"</i>").css("padding","1px 0").attr("monkey",
"qipao")));return!1}}else{if(a.hasClass("g_hot")||a.hasClass("g_tips-l"))return!1;if(60<a.width())return!0;c&&c.url2?(a.html(),c='<a monkey="tips"  style="width:0;" class="tips_link g_tips-l" href="'+(c.url2||"")+'">&nbsp;<i class="g_icon">'+c.tip+"</i></a>",a.parent().append(c)):(a.addClass("g_tips-l"),b=a.html(),a.html("<b>"+b+"</b>"),a.append('<i class="g_icon">'+c.tip+"</i>"));return!1}}},b=this,m=h.get("sitestyle"),c={},d=m.length,i=0,g=0,g=(new Date).getTime(),e,f;for(e=0;e<d;e++)(f=m[e])&&
f.style&&-1<f.style.indexOf("g_tips-")&&!f.ifshow?f.stimer&&f.etimer&&parseInt(f.stimer)<g&&parseInt(f.etimer)>g?(i++,m[e].rand=i):m[e].rand=-1:m[e].rand=-1;(e=j.get("mtip"))?(e=parseInt(e),g=e+1,g>i&&(g=1)):g=Math.ceil(Math.random()*i);j.set("mtip",g,{expires:30});for(e=0;e<d;e++)i=m[e].url.replace(/(.*)\/$/,"$1"),m[e].seed=g,c[i]=m[e];b.iscuser||$("a.js_text",this.element).each(function(b){var m=this.href.replace(/(.*)\/$/,"$1");c[m]&&a[c[m].style]&&(a[c[m].style]($(this),b,c[m])||delete c[m])});
$("#box-famoussite span>a").each(function(){var b=this.href.replace(/(.*)\/$/,"$1");c[b]&&a[c[b].style]&&(a[c[b].style]($(this),void 0,c[b]),delete c[b])})}});return o});
__d("widget.starbar.starbar","common.js.widget,common.js.format,common.js.profile,common.js.cookie,common.js.events,common.js.adjust,common.js.log".split(","),function(p,v,o,a){a("common.js.widget");var f=a("common.js.format"),e=a("common.js.profile"),j=a("common.js.cookie");a("common.js.events");var h=a("common.js.adjust"),k=a("common.js.log"),f=a("common.js.format");$.widget("hao123.starbar",{options:{posMap:[-1,1,1,3,3,3,3,5,5,5,5,7,7,7,7,9,9,9,9,11,11,11,11],logtype:"starbar_tvtip",tpl:'<li class="tvtip"><div class="g_clr tipitem"><i class="pos#{pos}"></i><a data-pos="#{pos}" class="clz" hidefocus="true" title="\u4e0d\u518d\u63d0\u9192"></a><div id="tvtip_ph" class="tip"><span class="tipname">#{tipname}</span><span class="tipinfo">#{tipinfo}</span></div></div></li>',
timetpl:'<li class="tvtip timetip"><div class="g_clr tipitem"><div id="tvtip_ph" class="tip"><span class="tipname">#{tipname}</span></div></div></li>'},_create:function(){var a=this.element,d=this.options,f=j.get("tvtip_notshow");e.get("navigate");this.notvtip=f;0>f||1<f||(this.$lis=$("li",a),a=d.data,this._bindEvents(),this._makeTip(a,0,a.pos))},_bindEvents:function(){var a=this,d=a.element,e=a.options.logtype;d.bind("starbartipshow",function(f,t){var i=$(".tip-name",d),g=$(".tip-info",d),q=$(".clz",
d),n=$(".tvtip",d),r=t.t;k({type:e,v:0,f:r});i.live("click",function(){k({type:e,v:1,f:r})});g.live("click",function(){k({type:e,v:2,f:r})});q.live("click",function(d){d=$(d.target).data("pos");k({type:e,v:3,f:r});1==a.notvtip&&1<d||1<a.notvtip&&1==d?j.set("tvtip_notshow",-1,{expires:1}):j.set("tvtip_notshow",d,{expires:1});n.slideUp(function(){h.adjust()});return!1})})},_makeTip:function(a,d,e){var j=this.element,h=this.options,i,g,q,n,r,k,s,b;if(-1!=h.posMap[e]){if(0==d){i=g=a.title;q=a.url;n=r=
a.title2;k=a.url2;s=a.img||"";b=a.cls||"";var c=parseInt(+new Date/1E3),o=a.show?parseInt(a.show):0,a=a.hide?parseInt(a.hide):c+86400;if(c<o||c>a)return}0<$(".tvtip",j).length||(j=0==h.data.tiptype?g&&q?f('<a class="tip-name #{cls}" href="#{url}" title="#{title}">'+(s?'<img src="#{img}" width="68" height="16" />':"")+"#{text}</a>",{url:q,title:g,text:i,img:s,cls:b}):"":g&&q?f((s?'<img src="#{img}" width="16" height="18" />':"")+'<a class="tip-name #{cls}" href="#{url}" title="#{title}">#{text}</a>',
{url:q,title:g,text:i,img:s,cls:b}):"",n=r&&k?f('<a class="tip-info" href="#{url}" title="#{title}">#{text}</a>',{url:k,title:r,text:n}):"",n=0==h.data.tiptype?f(h.tpl,{pos:e,tipname:j,tipinfo:n}):f(h.timetpl,{pos:e,tipname:j}),$(n).insertAfter(this.$lis[h.posMap[e]]).hide(),this._showTip(d))}},_showTip:function(a){var d=this,e=$(".tvtip",d.element),a=a||0;e.attr("style","").slideDown(300,function(){h.adjust();d._trigger("tipshow",null,{t:a})})}});return o});
__d("widget.rptip.rptip","common.js.widget,common.js.adjust,widget.newindex_movie.newindex_video_adjust,common.js.browser,common.js.config,common.js.cookie,common.js.events,common.js.format,common.js.log,common.js.login,common.js.profile".split(","),function(p,v,o,a){a("common.js.widget");var f=a("common.js.adjust"),e=a("widget.newindex_movie.newindex_video_adjust"),j=f,v=a("common.js.browser"),p=a("common.js.config"),h=a("common.js.cookie"),k=a("common.js.events"),l=a("common.js.format"),d=a("common.js.log"),
u=a("common.js.login"),x=a("common.js.profile"),t=!!$("body").css("-webkit-transition")||"25"<v.chrome,a=+new Date/36E5|0;$.widget("hao123.rptip",{options:{gameApi:"http://s0.hao123img.com/res/js/xyx_api.js?_="+a,rpApi:"/api/getinterest?c="+h.getCSRFId()+"&_="+ +new Date,rpDelete:"/api/delinterestbyid?c="+h.getCSRFId()+"&id=",vApi:"http://v.hao123.com/",vRp:"http://v.hao123.com/recommend/",videoApi:"http://video.baidu.com/playrecord/?callback=?&id=",videoScript:"http://list.video.baidu.com/pc_static/open/record/bdv-record-api.js?_="+
a,itemTpl:"<li class='rptip-item g-br3 #{cls}' #{attr} style='_border:0px;'><a class='clz js_clz' title='\u4e0d\u518d\u63d0\u793a' monkey='#{monkeyclose}'></a><a class='g-ib g_clr item' href='#{url}' title='#{title}' monkey='#{monkeylink}'><i class='g-ib s-sicon item-icon'></i>#{text}</a></li>",welcomeTpl:'<li class="rptip-item g-br3 rpwelcome" monkey="login" style="_border:0px;"><a class="rptip-login item" href="http://www.hao123.com/login.htm?gotourl='+p.get("userinfo").gotourl+'">\u767b\u5f55\u540e\uff0c\u4e3a\u60a8\u63a8\u8350\u7684\u5185\u5bb9\u66f4\u7cbe\u51c6\uff01</a></li>',
interval:5E3,timeout:3500,videoTimeout:3E3,logType:"rptip",isDataOnly:!1},_create:function(){var a=h.get("tvtip_notshow"),d=x.get("navigate");$.cacheScript=function(a,d){return $.ajax({url:a,success:d,dataType:"script",cache:!0})};this._timeoutErr="";this.hasVideoData=!1;this._bindEvents();if(0==a||1==d||2==d)this.hasVideoData=!0,this._getVideoData();this._getGameData();this._getRpData()},_bindEvents:function(){var a=this,g=a.element,q=a.options,n,r,k;j="tv"===q.type||"movie"===q.type?e:f;a.$rptip=
g;a.$list=$(".rptip-list",g);a.$login=$(".rptip-login",g);g.bind("rptipgametimeout",function(){}).bind("rptipvideotimeout",function(){}).bind("rptiprptimeout",function(){}).bind("rptipvideoready",function(d,b){var c=b.data;c.length?h.set("tvtip_notshow",0,{expires:7}):"0"===h.get("tvtip_notshow")&&h.remove("tvtip_notshow");n&&r?a._cookData(r,n,c):k=c}).bind("rptipgameready",function(d,b){var c=b.data;a.hasVideoData?k&&r?a._cookData(r,c,k):n=c:r?a._cookData(r,c,[]):n=c}).bind("rptiprpready",function(d,
b){a.hasVideoData?k&&n?a._cookData(b,n,k):r=b:n?a._cookData(b,n,[]):r=b}).bind("rptiptipshow",function(e,b){function c(){clearInterval(n);a.$list.removeClass("running");var b=$(".rpwelcome",g);t&&!a.hoverfix&&a.$list.children("li").eq(0).appendTo(a.$list);b.length&&b.eq(0).prev("li").length&&b.eq(0).appendTo(a.$list);a.hoverfix=!0;a.$rptip.addClass("rptip_hover")}function f(){a.$rptip.removeClass("rptip_hover");t&&a.$list.children("li").last().prependTo(a.$list);a.hoverfix=!1;h()}function h(){clearInterval(n);
1>=$("li",g).length||(n=setInterval(function(){a.$rptip.removeClass("rptip_trans0");t||a.$list.hide();a.$list.children("li").eq(0).appendTo(a.$list);a.$list.addClass("running");t||a.$list.fadeIn()},q.interval))}var n;a.$item=$(".rptip-item",g);a.$clz=$(".js_clz",g);a.hoverfix=!1;h();d({type:q.logType,v:b.logStr,e:b.errStr});a.$login.live("click",function(){u.show(function(){window.location.href=window.location.href});return!1});a.$rptip.hover(c,f);t&&($(window).focus(function(){h()}),$(window).blur(function(){clearInterval(n)}));
a.$item.hover(function(){$(this).addClass("rptip-item_hover")},function(){$(this).removeClass("rptip-item_hover")});a.$clz.hover(function(){$(this).addClass("clz_hover")},function(){$(this).removeClass("clz_hover")});a.$clz.live("click",function(){var b=$(this).parent("li"),d=0===b.next("li").length,e=b.data("v"),h=b.data("o"),n=b.data("g")+"";e?bdvRecordAPI.remove(e,function(){}):h?$.getJSON(q.rpDelete+h,null,function(){}):xyxRecordAPI.remove(n,function(){});b.remove();d?f():c();b=$("a.js_clz",g).length;
2>b&&a.$rptip.removeClass("rptipdown");t&&(2===b?(d=a.$list.html(),a.$list.html(d+q.welcomeTpl)):1===b&&(a.$rptip.removeClass("rptip3d"),$(".rpwelcome",g).remove()));b||(""===q.welcomeTpl?(a.$rptip.remove(),j.adjust()):(a.$list.html(q.welcomeTpl),$(".rpwelcome",g).append('<a class="clz js_welcomeclz"></a>'),$(".js_welcomeclz",g).click(function(){a.$rptip.remove();j.adjust()})));return!1})})},_cookData:function(a,e,f){function h(a,b){var c={},b=b||"id",m=a||[{}];return m=$.grep(m,function(a){var a=
a[b],m=!c[a];c[a]=!0;return m})}var j=this.options,l=[],s=[],b=[],c=j.type||"";a.tvtip=f.concat(a.tvtip||[]);"tv"===c?s=s.concat(a.tvtip||[]):"movie"===c?b=b.concat(a.filmrp||[]):(s=s.concat(a.tvtip||[],a.comictip||[],a.zongyitip||[]),b=b.concat(a.filmrp||[],e,a.tvrp||[]));s=h(s,"id");b=h(b,"pid");5<s.length&&b.length?(l=s.slice(0,5),l.splice(2,0,b[1])):l=l.concat(s,b).slice(0,6);l.length?(this._showTip(l),this._trigger("dataready",null,l)):(this._timeoutErr&&d({type:j.logType,e:this._timeoutErr}),
k.done("norptip"))},_showTip:function(a){function d(a,b,c){if(b>=2*a.length)return a;var b=b+2,c=c||"\u2026",e=a.slice(0,b).replace(/([^x00-xff])/g,"$1a").slice(0,b).replace(/([^x00-xff])a/g,"$1");return e===a?e:e.substr(0,b/2-1)+c}var e=this,f=e.options,h=a.length,k,s=[],b="";for(k=0;k<h;k++){var c=a[k],o,p;switch(c.type){case "tvplay":o=c.title+" "+("1"==c.finish?"\u5168":"\u66f4\u65b0\u81f3")+c.update+"\u96c6 \u770b\u5230"+c.watched.pop()+"\u96c6";p=("1"==c.finish?d(c.title,16)+" \u5168":d(c.title,
12)+" \u66f4\u65b0\u81f3")+c.update+"\u96c6";c.cls="0";c.url=f.vApi+"dianshi/"+c.id.substr(2)+".htm";c.attr='data-v="'+c.id+'"';break;case "101":o=c.title+" "+("1"==c.finish?"\u5168":"\u66f4\u65b0\u81f3")+c.update+"\u96c6";p=("1"==c.finish?d(c.title,16)+" \u5168":d(c.title,12)+" \u66f4\u65b0\u81f3")+c.update+"\u96c6";c.cls="1";c.url=f.vApi+"dianshi/"+c.pid+".htm";break;case "103":o=c.title+" "+("1"==c.finish?"\u5168":"\u66f4\u65b0")+c.episode+"\u671f";p=d(c.title,10)+" "+("1"==c.finish?"\u5168":"\u66f4\u65b0")+
c.episode+"\u671f";c.cls="2";c.url=f.vApi+"zongyi/"+c.pid+".htm";break;case "102":o=c.title+" "+("1"==c.finish?"\u5168":"\u66f4\u65b0\u81f3")+c.update+"\u96c6";p=("1"==c.finish?d(c.title,16)+" \u5168":d(c.title,12)+" \u66f4\u65b0\u81f3")+c.update+"\u96c6";c.cls="3";c.url=f.vApi+"dongman/"+c.pid+".htm";break;case "4":o='\u7c7b\u4f3c"'+c.title+'"\u7684\u7535\u89c6\u5267';p='\u7c7b\u4f3c"'+d(c.title,10)+'"\u7684\u7535\u89c6\u5267';c.cls="4";break;case "1":o='\u7c7b\u4f3c"'+c.title+'"\u7684\u7535\u5f71';
p='\u7c7b\u4f3c"'+d(c.title,12)+'"\u7684\u7535\u5f71';"m"===c.pid.charAt(0)&&(c.url=f.vRp+"movie/?id="+c.pid.match(/\d+/)[0]+"&fr=video");c.cls="5";break;default:o='\u66f4\u591a"'+c.title+'"\u7c7b\u5c0f\u6e38\u620f',p='\u66f4\u591a"'+d(c.title,12)+'"\u7c7b\u5c0f\u6e38\u620f',c.type="6",c.cls="6",c.gid=c.pid}b+=c.cls;s.push(l(f.itemTpl,{cls:"item"+k+" rptype"+c.cls,attr:(c.attr||"")+(c.oid?' data-o="'+c.oid+'"':"")+(c.gid?' data-g="'+c.gid+'"':""),monkeyclose:"close-t"+c.cls,monkeylink:"link-t"+c.cls,
title:o,text:p,url:c.url}))}t&&(1<s.length&&(s.unshift(s.pop()),e.$rptip.addClass("rptip3d")),2===s.length&&s.push(f.welcomeTpl));e.$list.html(s.join(""));1<h&&e.$rptip.addClass("rptipdown");e.$rptip.show();e.$rptip.slideDown(400,function(){j.adjust();e._trigger("tipshow",null,{logStr:b,errStr:e._timeoutErr})})},_getVideoData:function(){var a=this,d=a.options,e,f;e=!1;$.cacheScript(d.videoScript,function(){bdvRecordAPI.init({proxy:"/proxy.htm"});bdvRecordAPI.getVideos(function(d){e||(clearTimeout(f),
d=d||[],d=$.grep(d,function(a){return"tvplay"===a.type}),d=d.reverse().slice(0,6),a._trigger("videoready",null,{data:d}))})});f=setTimeout(function(){e=!0;a._timeoutErr+="1";a._trigger("videoready",null,{data:[]})},d.videoTimeout)},_getGameData:function(){var a=this,d=a.options,e,f;e=!1;$.cacheScript(d.gameApi,function(){xyxRecordAPI.init({proxy:"xyx_proxy.htm"});xyxRecordAPI.get(function(d){if(!e){clearTimeout(f);var d=d||{},g,h=[];for(g in d)h.push({pid:g,title:d[g],url:"http://xyx.hao123.com/pic_0_0_1_"+
g+"_1.html"});h=h.slice(0,6);a._trigger("gameready",null,{data:h})}})});f=setTimeout(function(){e=!0;a._timeoutErr+="2";a._trigger("gameready",null,{data:[]})},d.timeout)},_getRpData:function(){var a=this,d=a.options,e=d.rpApi,f="3",h,j;h=!1;$.getJSON(e,void 0,function(e){if(!h)if(f="4",e&&200==e.code&&e.data&&e.data.n&&e.data.n.length){var e=e.data.n,b=e.length,c=[],k,l={},o={tvtip:[],zongyitip:[],comictip:[],tvrp:[],filmrp:[]};for(k=0;k<b;k++){var m=e[k];m.type=m.ptype;m.oid=m.id;m.url=m.purl;m.title=
m.ptitle;switch(m.type){case "101":c.push("TV"+m.pid);l[c[c.length-1]]=m;break;case "103":c.push("T"+m.pid);l[c[c.length-1]]=m;break;case "102":c.push("C"+m.pid);l[c[c.length-1]]=m;break;case "4":o.tvrp.push(m);break;case "1":o.filmrp.push(m)}}c=c.join(",");""===c?h||(clearTimeout(j),a._trigger("rpready",null,o)):$.getJSON(d.videoApi+c,void 0,function(b){if(!h){clearTimeout(j);var c=b.length,m;for(m=0;m<c;m++){var d=b[m],e=l[d.id];d.oid=e.oid;d.type=e.type;d.pid=e.pid;switch(d.type){case "101":o.tvtip.push(d);
break;case "103":o.zongyitip.push(d);break;case "102":o.comictip.push(d)}}a._trigger("rpready",null,o)}})}else clearTimeout(j),a._trigger("rpready",null,{})});j=setTimeout(function(){h=!0;a._timeoutErr+=f;a._trigger("rpready",null,{})},d.timeout)}});return o});
__d("common.js.auto_fixed",["common.js.adjust"],function(p,v,o,a){var f=a("common.js.adjust"),e={auto:function(a,h){var k=document,l=e,d=$("#layout-side"),o=$("#bottomtop"),p=$("#nlb"),t=$.browser.msie&&6==$.browser.version,i="BackCompat"==k.compatMode?k.body:k.documentElement;f.adjust();t||p.removeAttr("style");l.box_service_top=d.offset().top+d.height()-14;var g=function(){if($("#navigate .option-selected").index()!=a||h&&$("#navigate .option-selected .channel").attr("data-tab")!=h)return $(window).unbind("scroll",
g),d.removeAttr("style"),!1;if(Math.max(k.body.scrollTop,k.documentElement.scrollTop)+i.clientHeight>l.box_service_top){p.removeAttr("style");var e=Math.max(k.body.scrollTop,k.documentElement.scrollTop)+i.clientHeight-o.offset().top;0<e?d.css({bottom:parseInt(e)+"px",position:"fixed"}):d.css({bottom:0,position:"fixed"})}else d.removeAttr("style")};t||$(window).scroll(g);t||window.setTimeout(g,1E3)}};return e});
__d("widget.countdown.countdown",["common.js.widget","common.js.animation","widget.canlash.imageloader"],function(p,v,o,a){a("common.js.widget");var f=a("common.js.animation"),e=a("widget.canlash.imageloader");$.widget("hao123.countdown",{options:{},_create:function(){var a=this.element,f={yearsdoor:"http://s0.hao123img.com/res/images/15years-door.png"};e(f,function(e){e?($(".countdown-link",a).css({"background-image":"none"}),$(".ad",a).css({"background-image":"url("+f.yearsdoor.src+")"})):$(".countdown-link",
a).css({"background-image":"none"})});this._loop()},_init:function(){},_loop:function(){var a=$(".ad",".s15year-door")[0];f().changePosition(a,"0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 -58,0 -116,0 -174,0 -232,0 -290,0 -348,0 -406,0 -464,0 -522".split(",")).wait(3E3).changePosition(a,"0 -580,0 -638,0 -696,0 -754,0 -812,0 -870,0 -928,0 -986,0 -1044,0 -1102,0 -1160,0 -1218,0 -1276,0 -1334,0 -1392,0 -1450,0 -1508,0 -1566,0 -1624,0 -1682,0 -1740,0 -1798,0 -1856,0 -1914,0 -1972,0 -2030,0 -2088,0 -2146,0 -2204".split(",")).wait(2E3).changePosition(a,
["0 -522"]).then(function(){}).start(50)},destroy:function(){$.Widget.prototype.destroy.call(this)}});return o});
__d("widget.specialicon.showtejiaIcon",["common.js.jquery"],function(p,v,o,a){var f=a("common.js.jquery");v.exports=function(a){a=f(a);0<a.length&&(a=f('.js_text[data-title="\u4eca\u65e5\u7279\u4ef7"]',a),0<a.length&&(a.css("position","relative").prepend('<img  style="position: absolute;top: -8px;left: -8px;" src="http://s0.hao123img.com/res/img/tejia_icon1222.gif" >'),a.css("background-image","url('http://s0.hao123img.com/img/1L/Aw/2F/mk/ch/o/blank.gif')")))};return o});
__d("widget.specialicon.showatbIcon",["common.js.jquery"],function(p,v,o,a){var f=a("common.js.jquery");v.exports=function(a){a=f(a);0<a.length&&(a=f('.js_text[data-title="\u7231\u6dd8\u5b9d"]',a).parent(),0<a.length&&a.css("position","relative").prepend('<a target="_blank" hidefocus=true data-title="\u7231\u6dd8\u5b9d" href="http://temai.taobao.com/?pid=mm_43125636_4246598_29270732" style="position: absolute;display: inline-block;width: 30px;height: 22px;padding-left: 0px;top: -2px;left: -8px;"><img src="http://s0.hao123img.com/res/img/nianhuo_icon.png" ></a>'))};
return o});
__d("widget.site.siteView","widget.site.config,common.js.events,common.js.cookie,common.js.format,common.js.browser,common.js.JSON,common.js.config,common.js.widget,widget.suggest.suggest,widget.suggest.nssug".split(","),function(p,v,o,a){function f(){e("");j("")}function e(a){b.sugName.val(a);""==a?c.sugNamePlaceholder.show():c.sugNamePlaceholder.hide()}function j(a){b.sugUrl.val(a);""==a?c.sugUrlPlaceholder.show():c.sugUrlPlaceholder.hide()}function h(a){a=$.trim(a);/^.+:\/\/.*$/i.test(a)||(a="http://"+
a);a=a.replace(/^(.+:\/\/)([^\/?]+)(.*)$/,function(a,b,c,d){return/^(https?|ftp)/i.test(b)?b.toLowerCase()+c.toLowerCase()+d:"http://"+c.toLowerCase()+d});a=a.replace(/^(.+:\/\/[^\/?]+)[\/?]$/,"$1");return a=a.replace(/\x3c/g,"").replace(/\x3E/g,"").replace(/\x22/g,"").replace(/\x27/g,"")}function k(a){return a?"http://img"+(parseInt("0"+a.split(".")[0])%2+1)+"."+g.iconBaseUrl+a:g.defaultIconUrl}function l(a){a=$.trim(a);a=a.replace(/^(.+:\/\/[^\/?]+)[\/?]$/,"$1");return t(a)}function d(a){return 6>
a.length?"":u(a)}function u(a){for(var a=$.trim(a),b=0,c=0;c<a.length;c++)if(b=/\w/.test(a.charAt(c))?b+8:b+14,80<b){a=a.substring(0,c)+"...";break}2==a.length?a=a.charAt(0)+"&#12288;"+a.charAt(1):3==a.length&&(a=a.charAt(0)+" "+a.charAt(1)+" "+a.charAt(2));return t(a,!0)}function x(a){return a.replace("&#12288;","").replace(/ /g,"").replace("\u3000","")}function t(a){return a=a.replace(/\x3c/g,"&lt;").replace(/\x3E/g,"&gt;").replace(/\x22/g,"&quot;").replace(/\x27/g,"&#39;")}function i(a,b){return!a||
!b?!1:a.replace(/(.*)\/$/,"$1").toLowerCase()==b.replace(/(.*)\/$/,"$1").toLowerCase()}var g=a("widget.site.config"),q=a("common.js.events"),n=a("common.js.cookie"),r=a("common.js.format");a("common.js.browser");var y=a("common.js.JSON"),s=a("common.js.config");a("common.js.widget");a("widget.suggest.suggest");var p=a("widget.suggest.nssug"),b,c,z=g.jsItem,w=null,A=null;return o={onBannerAdd:function(a){a=$(r(g.tpl.item,{id:a.id,name:u(a.name),url:l(a.url),icon:k(a.icon),title:d(a.name),status:a.status}));
a.width(108);a.insertBefore(b.bd.find(".js_item-add"));b.bd.find(".js_item-add").remove();this._addAddBtn()},updateBanner:function(a,b,c){var d=$("#site .site-hot-w");$(".site-hot-relink",d);var e=$(".site-hot-link",d),f=$(".site-hot-link2",d),g=k(a.icon),h=e.offset().top-b.offset.top,i=e.offset().left-b.offset.left;(function(){f.show().animate({left:"-="+i,top:"-="+h,opacity:1},500,function(){f.hide();$(".js_text",b.link).html(u(a.name));$(".js_text",b.link).attr("style","background:url("+g+") no-repeat 0px 2px;");
$(".js_text",b.link).attr("href",e.attr("href"));c._hideBanner();c._trigger("bannerlink",null,{iu:0})})})()},onSecondAdd:function(a){$(r(g.tpl.item,{id:a.id,name:u(a.name),url:l(a.url),icon:k(a.icon),title:d(a.name),status:a.status})).insertBefore(b.bd.find(".js_item-add"));b.bd.find(".js_item-add").remove();this._addAddBtn()},doBlink:function(){var a=0,c=["#f3f3f3","#f7f7f7"];window.setTimeout(function(){b.blink.css("background-color",c[a%2]);a++;8>a&&window.setTimeout(arguments.callee,200)},200)},
_getPosition:function(a){for(var b={left:a.offsetLeft,top:a.offsetTop},a=a.offsetParent;a&&!$(a).hasClass("popup-site");)b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;b.top-=34;return b},on517:function(){f();b.modify.hide();b.add.show()},getRecommends:function(){var a=[];b.recommends.each(function(){var b=$(this).find("a");a.push({name:b.html(),url:b.get(0).getAttribute("href",2),id:$(this).attr("data-id"),icon:$(this).attr("data-icon"),status:1})});return y.stringify(a)},onAddClickSynced:function(a){$(r(g.tpl.item,
{id:this.id,name:u(a.name),url:l(a.url),icon:k(a.icon),title:d(a.name),status:a.status})).insertBefore(b.topRecommend);b.topRecommend.remove();b.topRecommendHint.remove()},clearHint:function(){b.hintSug.hide();b.hintSave.hide();b.hintNoicon.hide();b.hintAdded.hide()},onRcommendDeleteOver:function(a){a=c._getPosition(a);a.left-=45;a.top-=6;b.hintNoicon.show(a,{text:g.emptyText})},onRcommendDeleteOut:function(){b.hintNoicon.hide()},onImported:function(a){if("none"!=b.psite.get(0).style.display){c.updatePopup(a);
c.clearError();f();var d={};$.each(a,function(){d[this.url]=this.id});b.psite.find(".item").each(function(){var a=this.href.replace(/(.*)\/$/,"$1");d[a]&&(this.className="item item-added",this.setAttribute("data-id",d[a]))})}else this.update(a)},onRefreshed:function(a){a?(b.refresh.show(),b.manage.hide(),b.bd.find(".js_item-add").hide()):(b.refresh.hide(),b.manage.show(),b.bd.find(".js_item-add").show())},onRefreshClick:function(a){b.refresh.hide();b.manage.show();c.update(a)},onAddedClick:function(a){c._recoverAdded(a.href);
f();b.modify.hide();b.add.show();b.sites.find(z).each(function(){if(this.getAttribute("data-id")==a.getAttribute("data-id"))return $(this).remove(),!1});this.clearError();b.hintNoicon.hide();b.hintAdded.hide();b.hintSave.hide();b.hintSug.hide();b.recover.show();return a.getAttribute("data-id")},onAddedItemOut:function(){b.hintNoicon.hide()},onAddedItemOver:function(a){b.hintAdded.hide();b.hintNoicon.show(c._getPosition(a),{text:g.adddedText})},onItemClick:function(a){var b=a.innerHTML,c=a.getAttribute("href",
2);return""!=$.trim(b)&&""!=$.trim(c)?(A=a,{name:$.trim(b),url:h(c),type:a.getAttribute("data-type")}):!1},onFirsted:function(a){b.sites.find(z).each(function(){var b=this.getAttribute("data-id");this.setAttribute("data-id",a[b])})},onRecovered:function(a){b.noDataHint.hide();b.recover.hide();b.saveForeverHint.hide();c.updatePopup(a);b.cms.find(".item-added").each(function(){this.className="js_recommend item item-normal"});b.recommendContent.find(".item-added").each(function(){this.className="js_recommend item item-add"});
$.each(a,function(){});this.clearError();f();b.add.show();b.modify.hide();b.hintAdded.hide()},onRecommendControlClick:function(){b.recommend.html(g.tpl.recommendNone);b.options.recommendCount=0;b.hintNoicon.hide()},onSorted:function(){var a=[];b.recover.show();$(z,b.sites).each(function(){var b=this.getAttribute("data-id");""!=$.trim(b)&&a.push(b)});return a},onCred:function(a){b.recommendContent.html("");if(0<b.recommendData.length){b.recommendCount.html(b.recommendData.length);var c=g.tpl.recommend;
$.each(b.recommendData,function(){b.recommendContent.append(r(c,{name:t(this.title),url:l(this.url),id:this.id}))});b.recommend.show()}else b.recommend.hide();var d=[];b.cms.html("");n.get("stip0")?n.get("stip1")?b.tipDel.hide():b.tipDel.show():b.cms.html(g.tpl.tipTpl);!n.get("stip2")&&!b._tipsave?b.tipSave.show():b.tipSave.hide();b._tipsave2=!0;$.each(a.data.cms,function(){this.isTitle?(b.cms.append(r(g.tpl.cms,{name:this.name,content:d.join("")})),d=[]):d.push(r(g.tpl.cmsContent,{className:this.isAdded?
"item item-added":"js_recommend item item-normal",name:this.name,url:this.url,id:this.id,itemStyle:this.isImportant?"class='important'":""}))})},onItemModifyClick:function(a){b.modify.show();b.add.hide();w=a=$(a);b.sugName.get(0).focus();e(a.attr("data-name"));j(a.attr("data-url"));c.clearError()},_recoverAdded:function(a){b.psite.find(".item-added").each(function(){i(a,this.href)&&(this.className="cms"==this.getAttribute("data-type")?"js_recommend item item-normal":"js_recommend item item-add")})},
onItemDeleteClick:function(a){b.psite.find(".item-added").each(function(){var b=this.getAttribute("data-id");if(b&&b==a.getAttribute("data-id"))return c._recoverAdded(this.href),!1});$(a).remove();b.recover.show();f();b.add.show();b.hintAdded.hide();b.modify.hide();0==b.sites.find(".js_site-item").length&&(b.noDataHint.show(),b.sites.hide())},onAdded:function(a){b.noDataHint.hide();b.hintSave.hide();b.recover.show();b.sites.show();b.sites.append(r(g.tpl.editItem,{id:a.id,url:l(a.url),name:u(a.name),
rawName:a.name,status:a.status||""}));f();a.type&&(b.hintAdded.show(c._getPosition(A),{text:g.addedText}),A=null);$(".js_recommend",b.psite).each(function(){i(this.getAttribute("href",2),a.url)&&(this.className="item item-added",this.setAttribute("data-id",a.id))})},onModified:function(a){b.add.show();b.recover.show();b.modify.hide();$(r(g.tpl.editItem,{id:a.id,url:l(a.url),name:u(a.name),rawName:a.name,status:a.status||""})).insertBefore(w);w.remove();f();$(".item-added",b.psite).each(function(){i(this.href,
w.attr("data-url"))&&(this.className="cms"==this.getAttribute("data-type")?"js_recommend item item-normal":"js_recommend item item-add")});w=null},_refreshState:function(a){$(".js_recommend",b.psite).each(function(){i(this.href,a.url)&&(this.className="item item-added",this.setAttribute("data-id",a.id))})},onAddClick:function(){if(!this._check())return!1;this.clearError();return{name:$.trim(b.sugName.val()),url:h(b.sugUrl.val())}},onModifyClick:function(){if(!this._check())return!1;this.clearError();
return{name:$.trim(b.sugName.val()),url:h(b.sugUrl.val()),id:w.attr("data-id")}},init:function(a){b=a;1==s.get("isStatic")&&(b.manage.hide(),b.bd.find(".js_item-add").hide());a=!1;c=this;c.sugNamePlaceholder=$("#js_placeholder-name");c.sugUrlPlaceholder=$("#js_placeholder-url");b.sugName.bind("focus keydown",function(){c.sugNamePlaceholder.hide()});b.sugUrl.bind("focus keydown",function(){c.sugUrlPlaceholder.hide()});b.sugName.blur(function(){""==this.value&&c.sugNamePlaceholder.show()});b.sugUrl.blur(function(){""==
this.value&&c.sugUrlPlaceholder.show()});var d=n.getFlashId();!b.isLanding&&null==d&&(a=!0,b.bd.find(".js_item-add").hide(),b.manage.hide());b.isLanding&&b.save.hide();return a},showRefresh:function(){b.refresh.show()},onManageClick:function(a,d){a?b.recover&&b.recover.show():b.recover&&b.recover.hide();f();d?c.showSaveMessage():b.saveForeverHint.hide()},showSaveMessage:function(){n.get(b.saveHintCookie)||(b.saveForeverHint.show(),b._tipsave=!0,b._tipsave2&&b.tipSave.hide())},getSiteData:function(){var a=
[],c=this;$(z+':not(".site-item-recommend")',b.bd).each(function(){var b=this.children[0],d=$(this).children("a").eq(1);d.length?a.push({id:this.getAttribute("data-id"),name:x(b.getAttribute("data-title")),url:b.getAttribute("href",2),status:this.getAttribute("data-status"),icon:c._getIcon(b),style:this.getAttribute("data-style"),name2:d.text(),url2:d.attr("href")}):a.push({id:this.getAttribute("data-id"),name:x(b.getAttribute("data-title")),url:b.getAttribute("href",2),status:this.getAttribute("data-status"),
icon:c._getIcon(b),style:this.getAttribute("data-style")})});return a},_getIcon:function(a){var b=a.parentNode.getAttribute("data-icon");return b?b:""!=a.style.backgroundImage?a.style.backgroundImage.match(/^.*\/([^)]+)/)[1]:"6000.png"},update:function(a){if(0>=a.length)b.bd.html(g.tpl.noData);else{var c=[];$.each(a,function(){var a=r(g.tpl.item,{id:this.id,name:u(this.name),url:l(this.url),icon:k(this.icon),title:d(this.name),status:this.status,style:this.style});1==this.status&&this.name2&&""!=
this.name2&&(a=r('<li class="js_site-item g-ib site-item site-item-normal " data-id="#{id}" data-status="1"><a class="js_text " href="#{url}" style="background-image:url(#{icon})" data-title="#{name}" hidefocus="true">#{name}</a>&nbsp;\u2022&nbsp;<a href="#{subUrl}" style="background:none;padding-left:0;padding-right:5px;position:relative;z-index:999;display:inline-block;">#{subName}</a></li>',{id:this.id,url:l(this.url),icon:k(this.icon),name:this.name,subName:this.name2,subUrl:this.url2}));c.push(a)});
b.bd.html(c.join(""));this._addAddBtn();b.add.show();b.modify.hide();f()}},_addAddBtn:function(){var a=b.bd.find(".js_site-item").length;if(6!=a){var c="";0<b.recommendData.length&&(c=r(g.tpl.addRecommend,{count:b.recommendData.length}));if(0==a%6){var a=";max-width:60px;_width:60px;min-width:56px; overflow:hidden; text-overflow: ellipsis;white-space: nowrap;",d=b.bd.find("li:last a").get(0);if(1==b.bd.find("li:last").data("status")&&("\u5f69\u7968"==d.innerHTML||"\u4f18\u9177"==d.innerHTML||"\u641c\u72d0"==
d.innerHTML||"\u817e\u8baf"==d.innerHTML||"\u65b0\u534e"==d.innerHTML||"\u5f71\u89c6"==d.innerHTML))a="";d.style.cssText+=a;b.bd.append(r(g.tpl.addShortBtn,{recommend:c}))}else b.bd.append(r(g.tpl.addNormalBtn,{recommend:c}))}},updatePopup:function(a){var c=[];$.each(a,function(){c.push(r(g.tpl.editItem,{id:this.id,url:l(this.url),name:u(this.name),rawName:this.name,status:this.status||""}))});0==c.length?(b.noDataHint&&b.noDataHint.show(),b.sites&&b.sites.hide()):(b.noDataHint&&b.noDataHint.hide(),
b.sites&&b.sites.html(c.join("")).show())},initSug:function(){b.sugName.suggest({classes:"suggest-site",eventSpace:"sitesuggest"}).suggest("handler",this._nssug).on("suggestinput",function(){if(""!=$.trim(b.sugUrl.val()))return!1});b.sugUrl.suggest({classes:"suggest-site",eventSpace:"sitesuggest"}).suggest("handler",this._nssug).on("suggestinput",function(){if(""!=$.trim(b.sugName.val()))return!1});q.on("sitesuggest.change",function(a){if(0==a.index)return!0;e(a.data[0]);j(a.data[1]);return!1});q.on("sitesuggest.submit",
function(){"none"!=b.add.get(0).style.display?b.add.click():b.modify.click();return!1})},_nssug:p("superpage",{sc:"hao123"},function(a){var b=a.s,c={},a=a.q;if(0==b.length)this.hide();else{this.clear();for(var d=0,e=0;d<b.length&&5>e;d++){var f=$.parseJSON(b[d].split("0{#S+_}")[1]);f&&(f[1]=f[1]||"",f[4]&&(f[4]=f[4]||"",c[f[4]]||(e++,c[f[4]]=!0,this.add(f[4],r('<span class="name">#{title}</span><span class="url">#{text}</span>',{title:f[4].replace(a,"<strong>"+a+"</strong>"),text:f[1].replace(a,"<strong>"+
a+"</strong>")}),[f[4],f[1]]))))}this.show()}}),clearError:function(){b.sugName.removeClass(g.css.sugError);b.sugUrl.removeClass(g.css.sugError);b.hintSug.hide()},showError:function(a){switch(a){case 515:case 512:b.hintSug.show(c._getPosition(b.sugName.get(0)),{text:g.error[a]});b.sugName.addClass(g.css.sugError).get(0).focus();b.sugUrl.removeClass(g.css.sugError);break;case 516:case 513:case 501:b.hintSug&&(b.hintSug.show(c._getPosition(b.sugUrl.get(0)),{text:g.error[a]}),b.sugUrl.addClass(g.css.sugError).get(0).focus(),
b.sugName.removeClass(g.css.sugError));break;case 514:b.hintSave.show(c._getPosition(b.sugUrl.get(0)),{text:g.error[a]});break;case 507:break;case 599:break;case 588:break;case 600:case 601:case 602:case 603:b.hintSug.show(c._getPosition(b.sugUrl.get(0)),{text:"\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u7a0d\u4faf\u91cd\u8bd5\uff01"});break;case 900:break;case 500:break;default:b.hintSave&&b.hintSave.show(c._getPosition(b.sugUrl.get(0)),{text:g.error[a]})}},_check:function(){var a=$.trim(b.sugName.val()),
c=$.trim(b.sugUrl.val());if(""==a)return this.showError(515);if(0>=c.length||/^(https?:\/\/|ftp:\/\/)$/i.test(c))return this.showError(516);if(a.length>g.nameMaxLength)return this.showError(512);if(c.length>g.urlMaxLength)return this.showError(513);this.clearError();return!0}}});window.js_UMgMBXzOxI&&window.js_UMgMBXzOxI(!0);
