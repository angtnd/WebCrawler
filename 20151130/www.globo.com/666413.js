/*
 Admotion Copyright ÃÂ© 2001-2015 Banner v3.3
 DYD-1309
*/
(function(a){a.HTMLPiece=function(e,g){a.Piece.apply(this,arguments);var d=this,b=new a.Element(g,"iframe","htmlpiece"),k=new a.EventManager(this),p,t=g.ownerDocument.defaultView?g.ownerDocument.defaultView:g.ownerDocument.parentWindow,l,q={},r={},h={},u=a.Utility.map({},this),m=function(f){l.postMessage(a.Utility.toJSON(f),"*")},n=function(){m(new a.PostingData(a.PostingDataType.Event,"orientationchange",window.orientation))},v={load:!0,SDKReady:!0,orientationchange:!1};k.add("SDKReady",function(){m(new a.PostingData(a.PostingDataType.Command,
"setVars",d.adVars));n()});a.Event.add(window,"orientationchange",n);var w=function(f){var c=a.Utility.fromJSON(f.data);if(f.source==l)switch(c.type){case a.PostingDataType.Event:console.log("PostMessage received: type %s, message: %s",c.type,c.message);k.fire(c.message,!!v[c.message],c.args);break;case a.PostingDataType.Command:a.Piece.sendCommand(d,{name:c.message,arg:c.args,nodeId:b.getNodeID()});break;default:console.warn("Unknown data type: %s, message: %s",c.type,c.message)}};this.setOnLoad=
function(a){k.add("load",a)};this.setSize=function(a,c){h.width=a+"px";h.height=c+"px";d.adVars.width=a;d.adVars.height=c;b.setSize(a,c)};this.getSize=b.getSize;this.setPosition=function(a,c,d){b.setPosition(a,c,d)};this.getPosition=function(){return b.getPosition()};this.insertFirst=function(a){p=a};this.remove=function(){a.Event.remove(window,"orientationchange",n);b.remove()};this.getNode=b.getNode;this.getContainerNodeID=b.getNodeID;this.setClip=function(a){u.setClip(a);b.getNode().style.clip=
a};this.hide=function(){b.getNode()&&"0px"==b.getNode().style.width||(a.Utility.map(h,b.getNode().style),b.getNode().style.width="0px",b.getNode().style.height="0px")};this.show=function(){b.getNode()&&"0px"!=b.getNode().style.width||a.Utility.map(b.getNode().style,h)};this.setAttributes=function(b){a.Utility.map(r,b)};this.setRenderStyle=function(b){a.Utility.map(q,b)};this.postMessage=m;this.sendMessage=function(b,c){d.postMessage(new a.PostingData(a.PostingDataType.Command,b,c))};this.render=function(){a.Event.add(t,
"message",w);var f=b.getNode(),c=f.style;d.setAttributes({allowTransparency:"true",frameBorder:0,scrolling:"no",allowfullscreen:"true"});a.Utility.foreach(r,function(a,b){f.setAttribute(a,b)});c.borderStyle="none";a.Utility.map(c,q);b.insertFirst(p);l=b.getNode().contentWindow;window!=top.window&&a.WindowContext.getWindowAccess(window.parent)&&window.frameElement.setAttribute("allowfullscreen","true");d.adVars.instanceCount=d.getInstanceCount(e);-1==e.indexOf("?")&&(f.src=e+a.Utility.buildQueryString(d.adVars,
!0))};this.canSetTrackers=!0};a.Main=function(e,g){var d=new a.FormatManager(e,e.creativeFiles,g.polite);d.positionManager.setDefaultPosition("banner");d.mainHandler=function(b,d,e){return new (e.selfParams.floating||e.selfParams.fullscreen?a.FloatingBanner:a.Banner)(e)};d.start()};a.Start()})(AdmotionMod.getCore());
