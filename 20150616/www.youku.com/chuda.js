!function(){var e={Cookie:{set:function(e,t,a,s,i){var n="";if(a&&"number"==typeof a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3),n="; expires="+o.toGMTString()}var s=s||"/",i=i||".youku.com";document.cookie=[e,"=",t,n,";domain=",i,";path=",s].join("")},get:function(e){for(var t=e+"=",a=document.cookie?document.cookie.split("; "):[],s=0;s<a.length;s++){for(var i=a[s];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null},remove:function(e){this.set(e,"",-1)}},Common:{decodeBase64:function(e){if(!e)return"";var t,a,s,i,n,o,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",d=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=c.indexOf(e.charAt(d++)),n=c.indexOf(e.charAt(d++)),o=c.indexOf(e.charAt(d++)),l=c.indexOf(e.charAt(d++)),t=i<<2|n>>4,a=(15&n)<<4|o>>2,s=(3&o)<<6|l,r+=String.fromCharCode(t),64!=o&&(r+=String.fromCharCode(a)),64!=l&&(r+=String.fromCharCode(s));while(d<e.length);return this.utf8To16(r)},utf8To16:function(e){var t,a,s,i,n,o=[];for(a=e.length,t=0;a>t;)switch(s=e.charCodeAt(t++),s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o.push(e.charAt(t-1));break;case 12:case 13:i=e.charCodeAt(t++),o.push(String.fromCharCode((31&s)<<6|63&i));break;case 14:i=e.charCodeAt(t++),n=e.charCodeAt(t++),o.push(String.fromCharCode((15&s)<<12|(63&i)<<6|(63&n)<<0))}return o.join("")},cutStr:function(e,t,s){var e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),i=this._strLen(e);if(t>=i)return e;var n=0,o=0;str_cut=new String,o=e.length;for(var l=0;o>l;l++){if(n++,a=e.charAt(l),escape(a).length>4&&n++,n>t)return s&&(str_cut=str_cut.concat(s)),str_cut;str_cut=str_cut.concat(a)}},_strLen:function(e){if(!e)return 0;var t=0,s=0;s=e.length;for(var i=0;s>i;i++)t++,a=e.charAt(i),escape(a).length>4&&t++;return t},serialize:function(e){return JSON.stringify(e)},deserialize:function(e){if("string"!=typeof e)return void 0;try{return JSON.parse(e)}catch(t){return e||void 0}},getBrowser:function(){var e,t={},a=navigator.userAgent.toLowerCase();return(e=a.match(/rv:([\d.]+)\) like gecko/))?t.ie=e[1]:(e=a.match(/msie ([\d.]+)/))?t.ie=e[1]:(e=a.match(/firefox\/([\d.]+)/))?t.firefox=e[1]:(e=a.match(/chrome\/([\d.]+)/))?t.chrome=e[1]:(e=a.match(/opera.([\d.]+)/))?t.opera=e[1]:(e=a.match(/version\/([\d.]+).*safari/))?t.safari=e[1]:0,t},bind:function(e,t,a){e.attachEvent?e.attachEvent("on"+t,function(){return function(t){window.event.cancelBubble=!0,e.attachEvent=[a.apply(e)]}}(e),!1):e.addEventListener&&e.addEventListener(t,function(e){e.stopPropagation(),a.apply(this)},!1)}},User:{getYKToken:function(){return e.Cookie.get("yktk")},getUserName:function(){var t=this.getYKToken();if(t){var a=e.Common.decodeBase64(decodeURIComponent(t).split("|")[3]);if(a.indexOf(",")>-1&&a.indexOf("nn:")>-1&&a.indexOf("id:")>-1)return a.split(",")[1].split(":")[1]}return 0},getUID:function(){var t=this.getYKToken();if(t){var a=e.Common.decodeBase64(decodeURIComponent(t).split("|")[3]);if(a.indexOf(",")>-1&&a.indexOf("nn:")>-1&&a.indexOf("id:")>-1)return parseInt(a.split(",")[0].split(":")[1])}return 0},getLoginStatus:function(){return 0!==this.getUID()}},Ajax:{getScript:function(e,t,a){if("string"==typeof arguments[0]){var t="function"==typeof arguments[1]?t:function(){},a="boolean"==typeof arguments[2]?a:!1,s=document.getElementsByTagName("HEAD")[0],i=document.createElement("SCRIPT");i.type="text/javascript",i.src=e,i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(t(),i.onload=i.onreadystatechange=null,a&&this.parentNode.removeChild(this))},s.appendChild(i)}}}};window.CHUDA=e}(),function(){if(void 0==window.jQuery){var e=[location.protocol,"//","static.youku.com","/js/jquery.js"].join("");CHUDA.Ajax.getScript(e,function(){window.jQuery=jQuery.noConflict()},!0)}UC_DOMAIN=window.UC_DOMAIN||"i.youku.com",API_DOMAIN_DEF="www.youku.com",API_DOMAIN_NC="nc.youku.com",API_DOMAIN_Link="http://i.youku.com/u/home?type=user_task",LINK_GRAGE_ICON="http://cps.youku.com/redirect.html?id=000145df",ICON_VIP="http://static.youku.com/lvip/img/rank/icon-vip.png",ICON_LVIP="http://static.youku.com/lvip/img/rank/icon-lvip.png";var t=function(e){return document.getElementById(e)},a={targetURL:{vip:"http://cps.youku.com/redirect.html?id=000145de",lvip:"http://cps.youku.com/redirect.html?id=000145dd"},curpanel:"",issinitnotice:!0,freq:3e4,userDefauleIcon:"http://static.youku.com/v1.0.1040/user/img/head/64/999.jpg",panel:{user:"qheader_username_panel",noticelist:"qheader_notice_info"},noticetotal:0,subnoticetotal:0,noticeDetails:{task:{nid:"9",label:"task",count:0,time:0},reward:{nid:"8",label:"reward",count:0,time:0},sysmsg:{nid:"7",label:"sysmsg",count:0,url:"/u/home/type_sysmsg",time:0},dms:{nid:"3",label:"dms",count:0,url:"/u/home/type_privatemsg",time:0},video_reply:{nid:"4",label:"video_reply",count:0,url:"/u/comments/gt_reces_ct_2",time:0},statuses_comments:{nid:"",label:"statuses_comments",count:0,url:"/u/comments",time:0},followers:{nid:"6",label:"followers",count:0,url:"/u/profile/type_friends_s_fans",time:0},hudong:{nid:"",label:"hudong",count:0,time:0}},noticeDetailsOrder:null,subDetails:{star_statuses:{nid:"",label:"star_statuses",count:0,time:0},new_subscribe:{nid:"1",label:"new_subscribe",count:0,url:"/u/home?type=subscribe",time:0}},logoutnotice:'<div class="cd-hpanel-mod-bd"><div class="cd-hpanel-notice-nologin"><span>ç»å½åæå¯ä»¥æ¥çéç¥~</span><a class="cd-hpanel-link-block cd-hpanel-link-block-blue" href="javascript:;" onclick="login({type:\'toolbar\',callBack:\'QheaderModule.showNoticeList\'});return false;">ç«å³ç»å½</a></div></div>',noticefooter:'<div class="cd-hpanel-mod-ft"><div class="cd-hpanel-mod-links"><a href="http://'+UC_DOMAIN+'/u/comments" target="_blank">æ¥çå¨é¨</a></div></div></div>',nonoticefooter:'<div class="cd-hpanel-mod-ft"><div class="cd-hpanel-mod-links  cd-hpanel-mod-links-disabled ">æ¥çå¨é¨</div></div></div>',noticeheader:'<div class="cd-hpanel-mod"><div class="cd-hpanel-mod-hd"><div class="cd-hpanel-mod-title"><a class="mod-title-link" href="http://'+UC_DOMAIN+'/u/comments" target="_blank"><span class="cd-hpanel-icon icon-notice-hd"></span><span class="cd-hpanel-mod-title-txt">æçéç¥</span></a></div></div>',noticenull:'<div class="cd-hpanel-mod-bd"><div class="cd-hpanel-notice-null"><span>è¿æ²¡æä»»ä½éç¥ï¼</span></div></div>',loading:'<div class="cd-hpanel-loading" id="hpanelloading"><span class="ico-loading-64"></span></div>',initHeaderUser:function(){var e=CHUDA.User.getUID();if(e){var t="http://lv.youku.com/api/grade/get_user_info?uid="+e+"&callback=QheaderModule.upUserImg";CHUDA.Ajax.getScript(t,null,!0)}},upUserImg:function(e){if(t("qheader_username")){if(void 0===e.errno||0!=e.errno)return;var s=e.data;t("qheader_userlog").className+=" patch-user-info";var i=s.user_image?s.user_image:a.userDefauleIcon,n="";s.is_vip?n='<img src="'+ICON_VIP+'" class="patch-crown-icon" title="ä¼é·ä¼å" id="qheader_crown_icon" data-type="vip"/>':s.is_lvip&&(n='<img src="'+ICON_LVIP+'" class="patch-crown-icon" title="ä¼é·è½»ä¼å" id="qheader_crown_icon" data-type="lvip"/>');var o='<div class="yk-userlog-after-meta"><img class="yk-userlog-after-avatar" src="'+i+'"><span class="yk-userlog-after-name'+(s.is_vip||s.is_lvip?" patch-red-name":"")+'" title="'+s.user_name+'" id="qheaer_user_name">'+CHUDA.Common.cutStr(s.user_name,10,null)+"</span>"+n+'<span class="user-grade-icon user-grade-lv'+s.grade+'" title="ä¼é·ç­çº§ï¼'+s.grade+'" id="qheader_grade_icon"></span><b class="caret yk-userlog-after-caret"></b></div>';t("qheader_username_show").innerHTML=o,window.USERDATA=s,CHUDA.Common.bind(t("qheaer_user_name"),"click",function(){return window.location.href="http://"+UC_DOMAIN+"/u/home?type=watch_timeline",!1});var l=this,c=t("qheader_crown_icon");void 0!=c&&CHUDA.Common.bind(c,"click",function(){return window.location.href=l.targetURL[c.getAttribute("data-type")],!1}),CHUDA.Common.bind(t("qheader_grade_icon"),"click",function(){return window.location.href=LINK_GRAGE_ICON,!1})}},noticePoll:function(){if(!this.timer){var e=CHUDA.User.getUID();if(e||0==CHUDA.Cookie.get("__ysuid")||"www.youku.com"!=window.location.host||"/"!=window.location.pathname||(e=CHUDA.Cookie.get("__ysuid"),this.freq=6e4),!e)return!1;var t=this;t.updateNoticeNum(e),this.timer=setInterval(function(){t.issinitnotice&&t.updateNoticeNum(e)},this.freq)}},updateNoticeNum:function(e){var t="QheaderModule.updateNoticeNumCallback",a="http://notify.youku.com/notify/get.json?uid="+e+'&types=["umc_notice"]&callback='+t;CHUDA.Ajax.getScript(a,null,!0)},updateNoticeNumCallback:function(e){if(e&&e.notify&&e.notify.umc_notice){var s=e.notify.umc_notice[0],i=0,n=0,o=[],l=[];for(var c in a.noticeDetails){var r=a.noticeDetails[c].nid;s[r]?(a.noticeDetails[c].count=s[r],e.last_update_time&&e.last_update_time[c]&&(a.noticeDetails[c].time=e.last_update_time[c]),o.push(c),i+=s[r]):l.push(c)}i>0?(a.noticeDetailsOrder=o.concat(l),a.noticetotal=i,t("qheader_notice_num")&&(t("qheader_notice_num").innerHTML=i,t("qheader_notice_num").style.display="block")):a.noticeDetailsOrder=l}else{var l=[];for(var c in a.noticeDetails)l.push(c);a.noticeDetailsOrder=l}if(e&&e.notify&&e.notify.umc_notice){for(var c in a.subDetails){var d=a.subDetails[c].nid;s[d]&&(a.subDetails[c].count=s[d],e.last_update_time&&e.last_update_time[c]&&(a.subDetails[c].time=e.last_update_time[c]),n+=s[d])}n>0&&50>n&&"false"!=window.isshowtop?(a.subnoticetotal=n,t("subscribe_lsidetooln_flag")&&(t("subscribe_lsidetooln_flag").innerHTML=a.subnoticetotal,"sub-update-num sub-update-nonum"==t("subscribe_lsidetooln_flag").className&&(t("subscribe_lsidetooln_flag").className="sub-update-num"),t("subscribe_lsidetooln_flag").style.display="block"),t("subscribe_lsidetoolw_flag")&&(t("subscribe_lsidetoolw_flag").innerHTML=a.subnoticetotal,"sub-update-num sub-update-nonum"==t("subscribe_lsidetoolw_flag").className&&(t("subscribe_lsidetoolw_flag").className="sub-update-num"),t("subscribe_lsidetoolw_flag").style.display="block")):n>=50&&"false"!=window.isshowtop?(t("subscribe_lsidetooln_flag")&&(t("subscribe_lsidetooln_flag").innerHTML="...","sub-update-num"==t("subscribe_lsidetooln_flag").className&&(t("subscribe_lsidetooln_flag").className+=" sub-update-nonum"),t("subscribe_lsidetooln_flag").style.display="block"),t("subscribe_lsidetoolw_flag")&&(t("subscribe_lsidetoolw_flag").innerHTML="...","sub-update-num"==t("subscribe_lsidetoolw_flag").className&&(t("subscribe_lsidetoolw_flag").className+=" sub-update-nonum"),t("subscribe_lsidetoolw_flag").style.display="block")):(t("subscribe_lsidetooln_flag")&&(t("subscribe_lsidetooln_flag").style.display="none"),t("subscribe_lsidetoolw_flag")&&(t("subscribe_lsidetoolw_flag").style.display="none"))}},resetNoticeNum:function(e){var t=CHUDA.User.getUID()?CHUDA.User.getUID():CHUDA.Cookie.get("__ysuid");if(t&&e){var e=e,a="http://"+API_DOMAIN_DEF+"/index_QSideToolJSONP?function[]=resetNoticeNumUMC&type="+e,s=new Image;s.src=a}},showUserMsg:function(){a.curpanel="user";var e=t(a.panel.user);return e?(e.innerHTML='<div class="cd-hpanel-ico ico-arrow-top-grey"></div>'+a.loading,void CHUDA.Ajax.getScript("http://"+API_DOMAIN_DEF+"/index_QSideToolJSONP?function[]=getUserInfo&callback[]=QheaderModule.showUserMsgCallback",null,!0)):!1},showUserMsgCallback:function(e){if(e){t(a.panel.user).innerHTML='<div class="cd-hpanel-ico ico-arrow-top-grey"></div>';var s=window.USERDATA,i=document.createElement("div");if(i.className="cd-hpanel-user-info",CHUDA.User.getLoginStatus()){var n=e.icon?e.icon:a.userDefauleIcon,o='<div class="cd-hpanel-user-avatar"><a href="http://'+UC_DOMAIN+"/u/"+e.userIdEncode+'" target="_blank"><img src="'+n+'"></a></div>',l='<div class="cd-hpanel-user-profile"><div class="cd-hpanel-user-name"><a href="http://'+UC_DOMAIN+"/u/"+e.userIdEncode+'" target="_blank" title="'+e.userName+'"'+(s.is_vip||s.is_lvip?' class="patch-red-name"':"")+">"+CHUDA.Common.cutStr(e.userName,12,"...")+"</a></div>";l+='<div class="cd-hpanel-user-credit">',s.is_vip?l+='<a href="'+this.targetURL.vip+'" target="_blank"><img src="'+ICON_VIP+'" class="patch-crown-icon" alt="ä¼é·ä¼å" title="ä¼é·ä¼å" /></a>':s.is_lvip&&(l+='<a href="'+this.targetURL.lvip+'" target="_blank"><img src="'+ICON_LVIP+'" class="patch-crown-icon" alt="ä¼é·è½»ä¼å" title="ä¼é·è½»ä¼å" /></a>'),l+='<a href="'+LINK_GRAGE_ICON+'" target="_blank"><span class="user-grade-icon user-grade-lv'+s.grade+'" title="ä¼é·ç­çº§ï¼'+s.grade+'"></span></a>',e.isverified&&(l+='<a href="http://'+UC_DOMAIN+'/u/rz" target="_blank"><i class="ico-cert" title="è®¤è¯ç¨æ·"></i></a>'),l+=0!=e.is_verify_email?'<div class="cd-hpanel-user-valid cd-hpanel-user-valid-email"><a class="cd-hpanel-ico ico-valid-email"href="http://'+UC_DOMAIN+'/u/setting/sec_security/tab_mail.html" target="_blank"></a></div>':'<div class="cd-hpanel-user-valid cd-hpanel-user-valid-email"><a class="cd-hpanel-ico ico-valid-email-done" href="http://'+UC_DOMAIN+'/u/setting/sec_security.html" target="_blank"></a></div>',1!=e.is_verify_mobile?(l+='<div class="cd-hpanel-user-valid cd-hpanel-user-valid-phone"><a class="cd-hpanel-ico ico-valid-phone" href="http://'+UC_DOMAIN+'/u/setting/sec_security/tab_mobile.html" target="_blank"></a>',0==e.is_verify_email&&(l+='<div class="qtips qtips_valid qtips_valid_email"><div class="cd-hpanel-ico ico-arrow-left"></div><div class="content"><span class="cd-hpanel-ico ico-min-close" onclick="this.parentNode.parentNode.style.display=\'none\'"></span>ææºæªç»å®ï¼<a href="http://'+UC_DOMAIN+'/u/setting/sec_security/tab_mobile.html" target="_blank">å»ç»å®</a></div></div>'),0!=e.is_verify_email&&(l+='<div class="qtips qtips_valid qtips_valid_email"><div class="cd-hpanel-ico ico-arrow-left"></div><div class="content"><span class="cd-hpanel-ico ico-min-close" onclick="this.parentNode.parentNode.style.display=\'none\'"></span><a href="http://'+UC_DOMAIN+'/u/setting/sec_security/tab_mobile.html" target="_blank">å»ç»å®ææºãé®ç®±</a></div></div>'),l+="</div>"):l+='<div class="cd-hpanel-user-valid cd-hpanel-user-valid-phone-done"><a class="cd-hpanel-ico ico-valid-phone-done" href="http://'+UC_DOMAIN+'/u/setting/sec_security/tab_mobile.html" target="_blank"></a></div>',l+="</div>";var c="undefined"==typeof e.integral?0:e.integral;l+='<div class="cd-hpanel-user-finance"><div class="finance-item finance-item-currency">ä¼è±ï¼<span class="cd-currency">'+e.youdou+'</span></div><span class="cd-hpanel-split"> | </span><div class="finance-item finance-item-integral">ç§¯åï¼<span class="cd-integral">'+c+'</span></div><a class="finance-exchange" href="http://cps.youku.com/redirect.html?id=0001455e" target="_blank">å»åæ¢</a></div><div class="cd-hpanel-user-extend"><a href="http://'+UC_DOMAIN+'/u/setting/base_profile.html" target="_blank">è®¾ç½®</a><span class="cd-hpanel-split">|</span><a href="javascript:;" onclick="setTimeout(function(){logout();},200);return false;">ç»åº</a></div></div>';var r='<div class="cd-hpanel-code"><div class="ykcode-flag" id="sidetoolqrcodepanelshow"><span></span></div><div class="ykcode-cover"><img class="ykcode-cover-img" src="http://static.youku.com/index/img/toolbar/codecover.png"></div></div>';i.innerHTML=o+l+r}else{var d='<div class="cd-hpanel-user-avatar"><a><img src="http://static.youku.com/index/img/toolbar/toolbar_avatar.jpg" alt=""></a></div><div class="cd-hpanel-user-profile"><div class="cd-hpanel-user-name">Hi, æ¨å¥½ï½ï½</div><p>ç»å½å¯ä»¥ææ¶é¿ç©åçº§å¦~</p></div><div class="cd-hpanel-code"><div class="ykcode-flag" id="sidetoolqrcodepanelshow"><span></span></div><div class="ykcode-cover"><img class="ykcode-cover-img" src="http://static.youku.com/index/img/toolbar/codecover.png"></div></div>';i.innerHTML=d}if(t(a.panel.user).appendChild(i),CHUDA.User.getLoginStatus()){var u=document.createElement("div");u.className="panel-user-grade";var m=[],p=Math.round(s.score/6)/10,h=Math.round(s.upgrade_score/6)/10;m.push('<div class="panel-user-grade-title"><span>æçç­çº§</span></div>'),m.push('<p class="panel-user-grade-info" title="å½åæ¶é¿ï¼'+s.score+"åéï¼è·ç¦»åçº§æéæ¶é¿ï¼"+s.upgrade_score+'åé">'),m.push('<i class="panel-user-grade-icon panel-grade-icon-clock"></i><span>'+p+"</span><em>å°æ¶</em>"),m.push('<i class="panel-user-grade-icon panel-grade-icon-remain"></i><span>'+h+"</span><em>å°æ¶</em>"),m.push(s.is_vip||s.is_lvip?'<span class="patch-red-name" title="'+(s.is_vip?"å½å1.2åå éä¸­":"å½å1.1åå éä¸­")+'">ï¼ä¼åå éä¸­ï¼</span>':'<span title="å¼éä¼åäº«åæ´å¿«åçº§éåº¦">ï¼æªå¼å¯å éï¼</span>'),m.push("</p>"),m.push('<div class="panel-user-grade-line" title="ä»æ¥æé¿æ¶é¿ï¼'+s.today_score+'åé">'),m.push('<div class="panel-user-grade-left"></div><div class="panel-user-grade-center"></div><div class="panel-user-grade-right"></div>'),m.push('<div class="panel-user-grade-time">');var v=s.today_score>s.today_max_score?s.today_max_score:s.today_score,_=276,g=Math.ceil(v/s.today_max_score*_);g>0&&(m.push('<div class="panel-user-grade-left"></div>'),m.push('<div class="panel-user-grade-center" id="rank_todayDuraLine"></div>'),m.push('<div class="panel-user-grade-right"></div>')),m.push("</div>"),m.push("</div>"),u.innerHTML=m.join(""),t(a.panel.user).appendChild(u),g>0&&jQuery("#rank_todayDuraLine").animate({width:g+"px"},"slow","swing")}if(!CHUDA.User.getLoginStatus()){var f=document.createElement("div");f.className="cd-hpanel-oauth-login";var k='<button class="btn btn-large" href="jsvascript:;" onclick="login({type:\'toolbar\',callBack:\'QheaderModule.showUserMsg\'});return false;">ç«å³ç»å½</button><a onclick="login({type:\'toolbar\',callBack:\'QheaderModule.showUserMsg\'});return false;" class="cd-hpanel-ico ico-qq" title="QQ"><span>qq</span></a><a onclick="login({type:\'toolbar\',callBack:\'QheaderModule.showUserMsg\'});return false;" class="cd-hpanel-ico ico-weibo" title="å¾®å"><span>å¾®å</span></a><a onclick="login({type:\'toolbar\',callBack:\'QheaderModule.showUserMsg\'});return false;" class="cd-hpanel-ico ico-alipay" title="éè¿æ¯ä»å®æ«æå¯ç´æ¥æ³¨åãç»å½ä¼é·äº"><span>æ¯ä»å®</span></a><span class="extend">æ²¡æè´¦å·? <a href="http://www.youku.com/user/signup" target="_blank">åè´¹æ³¨å</a></span>';f.innerHTML=k,t(a.panel.user).appendChild(f)}if(CHUDA.User.getLoginStatus()){var b=document.createElement("div");b.className="cd-hpanel-u-task";var y='<div class="u-task-title"><span>æçä»»å¡</span><a class="u-task-t-link-all" target="_blank" href="http://'+UC_DOMAIN+'/u/home?type=user_task"><i class="cd-hpanel-ico hpanel-ico-viewall"></i>æ¥çå¨é¨</a></div>';b.innerHTML=y;var w=document.createElement("div");w.className="u-task-list",w.setAttribute("id","tasklistsidetool"),w.innerHTML=a.makeTasklistHtml(e),b.appendChild(w),t(a.panel.user).appendChild(b)}if(CHUDA.User.getLoginStatus()){var D=document.createElement("div");D.className="cd-hpanel-userservices",D.innerHTML='<ul class="cd-userservices-list cd-userservices-list-topborder"><li class="u-service-chanel"><a href="http://'+UC_DOMAIN+"/u/"+e.userIdEncode+'" target="_blank"><i class="cd-hpanel-ico ico-myspace"></i>æçé¢é</a></li><li class="u-service-manage"><a href="http://'+UC_DOMAIN+'/u/videos" target="_blank"><i class="cd-hpanel-ico ico-videomanage"></i>åä½ä¸­å¿</a></li><li class="u-service-favor"><a href="http://yikan.youku.com" target="_blank"><i class="cd-hpanel-ico ico-yourfavor"></i>çä½ åæ¬¢</a></li><li class="u-service-subscribe"><a href="http://'+UC_DOMAIN+'/u/home?type=favorite" target="_blank"><i class="cd-hpanel-ico ico-subscribe"></i>æçæ¶è</a></li></ul>',t(a.panel.user).appendChild(D)}setTimeout(function(){a.userMsgShowHover()},500)}},makeTasklistHtml:function(e){var t="";if(!e.tasklist||e.tasklist.length<=0)return t='<div class="u-task-meta u-task-meta-null"><p class="u-task-e-null-status">æ´å¤ç²¾å½© æ¬è¯·æå¾...</p></div>';for(var a=!1,s="",i=0;i<e.tasklist.length;i++){var n="u-task-meta";2==e.tasklist[i].status?n="u-task-meta u-task-meta-done":1==e.tasklist[i].status&&(n="u-task-meta"),t+='<div class="'+n+'" id="task_list_'+e.tasklist[i].tid+'" name="tasklistidetool" tid="'+e.tasklist[i].tid+'" ttype="'+e.tasklist[i].type+'"><a class="u-task-m-link"><img src="'+e.tasklist[i].icon+'"><span class="u-task-link-icon-done"></span></a><div class="u-task-m-entry"><a class="u-task-m-e-title" title="'+e.tasklist[i].name+'">'+e.tasklist[i].name+'</a><span title="'+e.tasklist[i].desc+'">'+e.tasklist[i].desc+'</span><div class="u-task-m-e-reward"><span>å¥å±ï¼</span>';for(var o=0;o<e.tasklist[i].awards.length;o++)1==e.tasklist[i].awards[o].type&&0==a&&(a=!0),e.tasklist[i].awards[o].detail&&(t+='<span class="reward-entry">'+e.tasklist[i].awards[o].detail+"</span>");if(t+="</div></div>",2==e.tasklist[i].status)t+='<span class="u-task-m-status u-task-m-status-done" id="task_receive_'+e.tasklist[i].tid+'">é¢å¥å±</span>';else if(1==e.tasklist[i].status)if(10!=e.tasklist[i].type)e.tasklist[i].progress&&e.tasklist[i].progress.length>0?t+="0/1"===e.tasklist[i].progress?'<span class="u-task-m-status u-task-m-status-ing">è¿è¡ä¸­â¦</span>':'<span class="u-task-m-status u-task-m-status-degree">'+e.tasklist[i].progress+"</span>":(s="","string"==typeof e.tasklist[i].toUrl&&e.tasklist[i].toUrl.length>0&&(s=' data-tourl="'+e.tasklist[i].toUrl+'"'),t+='<span class="u-task-m-status u-task-m-status-progress" id="toolbar_initiative_task_'+e.tasklist[i].tid+'"'+s+">é¢ä»»å¡</span>");else if(e.tasklist[i].special_task_type&&2==e.tasklist[i].special_task_type){var l=e.tasklist[i].special_task_source?e.tasklist[i].special_task_source:"http://www.youku.com";t+='<span class="u-task-m-status u-task-m-status-progress"><a href="'+l+'" target="_blank">åä»»å¡</a></span>'}else t+='<span class="u-task-m-status u-task-m-status-progress" id="do_task_'+e.tasklist[i].tid+'">åä»»å¡</span>';t+="</div>"}if(a){var c=window.USERDATA;t+=c.is_vip?'<div class="u-task-meta-hint"><i class="ico__vipsuper"></i><span>ä¼åååç§¯å</span></div>':'<div class="u-task-meta-hint u-task-meta-hint-no"><i class="cd-hpanel-ico ico__vipsuper_no"></i><span>ä¼åååç§¯å</span></div>'}return t},userMsgShowHover:function(){t("sidetoolqrcodepanelshow")&&(t("sidetoolqrcodepanelshow").onclick=function(){a.qrcodeShow()}),a.bindTastDivListEvent()},bindTastDivListEvent:function(){var e=a._getElementsByName("div","tasklistidetool");if(e)for(var s=e.length,i=0;s>i;i++){var n=e[i].getAttribute("tid");!function(e){t("task_receive_"+e)&&(t("task_receive_"+e).onclick=function(){var t="http://"+API_DOMAIN_DEF+"/index_QSideToolJSONP?function[]=userReceiveAward&callback[]=QheaderModule.userReceiveAwardCallback&tid="+e;CHUDA.Ajax.getScript(t,null,!0)}),t("do_task_"+e)&&(t("do_task_"+e).onclick=function(){taskUpdateUserInfo(e,0)}),t("toolbar_initiative_task_"+e)&&(t("toolbar_initiative_task_"+e).onclick=function(){doInitiativeTask(e,0)})}(n)}},qrcodeShow:function(){var e=t(a.panel.user).select(".cd-hpanel-code")[0];qrcodeLogin.getObj("toolbar")&&qrcodeLogin.getObj("toolbar").delInterval();var s={size:138,loginfrom:"toolbar",stfrom:"toolbar",hParentDom:e,isPageExist:function(){return"user"==a.curpanel?!0:!1},getQrcodeCallback:function(){a.qrcodeShowAnimation()},callback:function(){window.toolbarQrloginObj.isQrloginSucc=!0,window.login_callback(),a.showUserMsg()}};qrcodeLogin.init("toolbar",s),setTimeout(function(){window.toolbarQrloginObj=qrcodeLogin.getObj("toolbar")},500)},qrcodeShowAnimation:function(){setTimeout(function(){a.qrcodePanelShow.call(t("sidetoolqrcodepanelshow"),a),setTimeout(function(){t("sidetoolqrcodepanelclose")&&(t("sidetoolqrcodepanelclose").onclick=function(){a.qrcodePanelClose.call(t("sidetoolqrcodepanelclose"),a),setTimeout(function(){a.qrcodeHide()},600)})},100)},100)},qrcodeHide:function(){var e=t(a.panel.user).select(".cd-hpanel-code .ykcode-container")[0];e&&e.remove(),qrcodeLogin.getObj("toolbar")&&qrcodeLogin.getObj("toolbar").delInterval()},userReceiveAwardCallback:function(e){e&&e.ret&&"OK"==e.ret&&e.tid&&t("task_list_"+e.tid)&&a.userReceiveAward.call(t("task_list_"+e.tid),a)},getUserTaskList:function(){if(t("tasklistsidetool")){var e="http://"+API_DOMAIN_DEF+"/index_QSideToolJSONP?function[]=getUserTaskList&callback[]=QheaderModule.getUserTaskListCallback";CHUDA.Ajax.getScript(e,null,!0)}},getUserTaskListCallback:function(e){if(e.tasklist&&e.tasklist.length>0&&t("tasklistsidetool")){var s=a.makeTasklistHtml(e),i=jQuery("#tasklistsidetool");i.fadeOut(300).html(s),a.bindTastDivListEvent(),i.fadeIn(300)}else t("tasklistsidetool")&&0==t("tasklistsidetool").childNodes.length&&(t("tasklistsidetool").innerHTML='<div class="u-task-meta u-task-meta-null"><p class="u-task-e-null-status">æ´å¤ç²¾å½© æ¬è¯·æå¾...</p></div>')},showNoticeList:function(){a.curpanel="notice";var e=t(a.panel.noticelist);if(!e)return!1;if(e.innerHTML="",CHUDA.User.getLoginStatus()){t("hpanelloading")||(e.parentNode.innerHTML+=a.loading);var s="http://"+API_DOMAIN_DEF+"/index_QSideToolJSONP?function[]=getNoticeInfo&callback[]=QheaderModule.showNoticeListCallback";CHUDA.Ajax.getScript(s,null,!0)}else e.innerHTML=a.noticeheader+a.logoutnotice+a.nonoticefooter},showNoticeListCallback:function(e){var s=t(a.panel.noticelist),i=!1,n=0,o="";if(a.noticeDetailsOrder&&a.noticeDetailsOrder.length>0){o+='<div class="cd-hpanel-n-list">';for(var l=a.noticeDetailsOrder.length,c=0;l>c;c++){if("task"==a.noticeDetailsOrder[c]&&a.noticeDetails.task.count>0)o+='<div class="cd-hpanel-n-item cd-hpanel-n-item-letter" name="noticelist" data-stat-role="ck" id="toolbar_notice_task" noticetype="task"><div class="cd-hpanel-n-submark" data-stat-role="ck"><span class="cd-hpanel-submark" data-stat-role="ck"></span></div><ul class="n-item-ul n-item-ul-letter"><li class="n-item-logo n-item-logo-task" data-stat-role="ck"><span class="ico-notice ico-notice-task"></span>',a.noticeDetails.task.count>0&&(o+='<span class="cd-hpanel-notice-num" id="newnoticeicontask"></span>'),o+='</li><li class="n-item-meta" data-stat-role="ck"><span class="n-item-meta-title">æ°ä»»å¡æé</span><span class="n-item-meta-author">æ¨æ'+a.noticeDetails.task.count+"ä¸ªæ°ä»»å¡ï¼å¿«å»ççå§",o+="</li></ul></div>";else if("reward"==a.noticeDetailsOrder[c]&&a.noticeDetails.reward.count>0)o+='<div class="cd-hpanel-n-item cd-hpanel-n-item-letter" name="noticelist" data-stat-role="ck" id="toolbar_notice_reward" noticetype="reward"><div class="cd-hpanel-n-submark" data-stat-role="ck"><span class="cd-hpanel-submark" data-stat-role="ck"></span></div><ul class="n-item-ul n-item-ul-letter"><li class="n-item-logo n-item-logo-reward" data-stat-role="ck"><span class="ico-notice ico-notice-reward"></span>',a.noticeDetails.reward.count>0&&(o+='<span class="cd-hpanel-notice-num" id="newnoticeiconreward"></span>'),o+='</li><li class="n-item-meta" data-stat-role="ck"><span class="n-item-meta-title">é¢åä»»å¡å¥å±</span><span class="n-item-meta-author">æ¨æ'+a.noticeDetails.reward.count+"ä¸ªä»»å¡å·²å®æï¼å¯ä»¥é¢å¥å±å¦</span>",o+="</li></ul></div>";else if("sysmsg"==a.noticeDetailsOrder[c])o+='<div class="cd-hpanel-n-item cd-hpanel-n-item-sys" name="noticelist" data-stat-role="ck" id="toolbar_notice_sysmsg" noticetype="sysmsg"><div class="cd-hpanel-n-submark" data-stat-role="ck"><span class="cd-hpanel-submark" data-stat-role="ck"></span></div><ul class="n-item-ul n-item-ul-sys"><li class="n-item-logo n-item-logo-sys" data-stat-role="ck"><span class="ico-notice ico-notice-sys"></span>',a.noticeDetails.sysmsg.count>0&&(e.sysmsg?o+='<span class="cd-hpanel-notice-num" id="newnoticeiconsysmsg"></span>':(a.resetNoticeNum("[13,14,15,16,17,18,19,20]"),a.noticetotal-=a.noticeDetails.sysmsg.count,a.noticeDetails.sysmsg.count=0)),o+='</li><li class="n-item-meta" data-stat-role="ck"><span class="n-item-meta-title">ç³»ç»éç¥</span>',e.sysmsg?a.noticeDetails.sysmsg.count>0?(o+='<span class="n-item-meta-author">'+e.sysmsg.sender_name+' åæ¥ç³»ç»éç¥</span><span class="n-item-meta-content">'+CHUDA.Common.cutStr(e.sysmsg.content,60,"...")+"</span>",e.sysmsg.create_time&&(o+='<span class="n-item-meta-update-time">'+e.sysmsg.create_time+"</span>")):o+='<span class="n-item-meta-author">ææ æªè¯»æ¶æ¯</span>':o+='<span class="n-item-meta-author" id="notice_nodata_sysmsg">ææ æ­¤ç±»æ¶æ¯</span>',o+="</li></ul></div>";else if("dms"==a.noticeDetailsOrder[c])o+='<div class="cd-hpanel-n-item cd-hpanel-n-item-letter" name="noticelist" data-stat-role="ck" id="toolbar_notice_dms" noticetype="dms"><div class="cd-hpanel-n-submark" data-stat-role="ck"><span class="cd-hpanel-submark" data-stat-role="ck"></span></div><ul class="n-item-ul n-item-ul-letter"><li class="n-item-logo n-item-logo-letter" data-stat-role="ck"><span class="ico-notice ico-notice-letter"></span>',a.noticeDetails.dms.count>0&&(e.dms?o+='<span class="cd-hpanel-notice-num" id="newnoticeicondms"></span>':(a.resetNoticeNum("[6]"),a.noticetotal-=a.noticeDetails.dms.count,a.noticeDetails.dms.count=0)),o+='</li><li class="n-item-meta" data-stat-role="ck"><span class="n-item-meta-title">ç«åä¿¡</span>',e.dms?a.noticeDetails.dms.count>0?(o+='<span class="n-item-meta-author">'+e.dms.nick_name+' åæ¥ç«åä¿¡</span><span class="n-item-meta-content">'+CHUDA.Common.cutStr(e.dms.content,60,"...")+"</span>",e.dms.create_time&&(o+='<span class="n-item-meta-update-time">'+e.dms.create_time+"</span>")):o+='<span class="n-item-meta-author">ææ æªè¯»æ¶æ¯</span>':o+='<span class="n-item-meta-author"  id="notice_nodata_dms">ææ æ­¤ç±»æ¶æ¯</span>',o+="</li></ul></div>";else if("video_reply"==a.noticeDetailsOrder[c]||"statuses_comments"==a.noticeDetailsOrder[c]){if(!i){(a.noticeDetails.video_reply.count>0||a.noticeDetails.statuses_comments.count>0)&&(n+=a.noticeDetails.video_reply.count+a.noticeDetails.statuses_comments.count,o+='<div class="cd-hpanel-n-item cd-hpanel-n-item-comments" name="noticelist" data-stat-role="ck" id="toolbar_notice_comments" noticetype="comments"><div class="cd-hpanel-n-submark" data-stat-role="ck"><span class="cd-hpanel-submark" data-stat-role="ck"></span></div><ul class="n-item-ul n-item-ul-comments"><li class="n-item-logo n-item-logo-comments" data-stat-role="ck"><span class="ico-notice ico-notice-comments"></span><span class="cd-hpanel-notice-num" id="newnoticeiconcomments"></span></li><li class="n-item-meta" data-stat-role="ck"><span class="n-item-meta-title">è¯è®º</span>',e.video_reply&&a.noticeDetails.video_reply.count>0?(o+='<span class="n-item-meta-author">'+e.video_reply.nick_name+' è¯è®ºäºä½ çè§é¢</span><span class="n-item-meta-content">'+CHUDA.Common.cutStr(e.video_reply.content,60,"...")+"</span>",e.video_reply.create_time&&(o+='<span class="n-item-meta-update-time">'+e.video_reply.create_time+"</span>")):e.statuses_comments&&(o+='<span class="n-item-meta-author">'+e.statuses_comments.nick_name+' è¯è®ºäºä½ çç©ºé´</span><span class="n-item-meta-content">'+CHUDA.Common.cutStr(e.statuses_comments.content,60,"...")+"</span>",e.statuses_comments.create_time&&(o+='<span class="n-item-meta-update-time">'+e.statuses_comments.create_time+"</span>")),o+="</li></ul></div>"),i=!0;continue}0==n&&(o+='<div class="cd-hpanel-n-item cd-hpanel-n-item-comments" name="noticelist" data-stat-role="ck" id="toolbar_notice_comments" noticetype="comments"><div class="cd-hpanel-n-submark" data-stat-role="ck"><span class="cd-hpanel-submark" data-stat-role="ck"></span></div><ul class="n-item-ul n-item-ul-comments"><li class="n-item-logo n-item-logo-comments" data-stat-role="ck"><span class="ico-notice ico-notice-comments"></span>',o+='</li><li class="n-item-meta" data-stat-role="ck"><span class="n-item-meta-title">è¯è®º</span>',o+=e.video_reply||e.statuses_comments?'<span class="n-item-meta-author">ææ æªè¯»æ¶æ¯</span>':'<span class="n-item-meta-author"  id="notice_nodata_comments" nodata="true">ææ æ­¤ç±»æ¶æ¯</span>',o+="</li></ul></div>")}else"statuses_mentions"==a.noticeDetailsOrder[c]?(o+='<div class="cd-hpanel-n-item cd-hpanel-n-item-at" name="noticelist" data-stat-role="ck" id="toolbar_notice_mentions" noticetype="mentions"><div class="cd-hpanel-n-submark" data-stat-role="ck"><span class="cd-hpanel-submark" data-stat-role="ck"></span></div><ul class="n-item-ul n-item-ul-at"><li class="n-item-logo n-item-logo-at" data-stat-role="ck"><span class="ico-notice ico-notice-at"></span>',a.noticeDetails.statuses_mentions.count>0&&(o+='<span class="cd-hpanel-notice-num" id="newnoticeiconmentions"></span>'),o+='</li><li class="n-item-meta" data-stat-role="ck"><span class="n-item-meta-title">@æå°æç</span>',e.statuses_mentions?a.noticeDetails.statuses_mentions.count>0?(o+='<span class="n-item-meta-author">'+e.statuses_mentions.nick_name+' æå°äºä½ </span><span class="n-item-meta-content">'+CHUDA.Common.cutStr(e.statuses_mentions.content,60,"...")+"</span>",
e.statuses_mentions.create_time&&(o+='<span class="n-item-meta-update-time">'+e.statuses_mentions.create_time+"</span>")):o+='<span class="n-item-meta-author">ææ æªè¯»æ¶æ¯</span>':o+='<span class="n-item-meta-author" id="notice_nodata_mentions">ææ æ­¤ç±»æ¶æ¯</span>',o+="</li></ul></div>"):"followers"==a.noticeDetailsOrder[c]&&a.noticeDetails.followers.count>0?(o+='<div class="cd-hpanel-n-item cd-hpanel-n-item-fans" name="noticelist" data-stat-role="ck" id="toolbar_notice_followers" noticetype="followers"><div class="cd-hpanel-n-submark" data-stat-role="ck"><span class="cd-hpanel-submark" data-stat-role="ck"></span></div><ul class="n-item-ul n-item-ul-fans"><li class="n-item-logo n-item-logo-fans" data-stat-role="ck"><span class="ico-notice ico-notice-fans"></span>',a.noticeDetails.followers.count>0&&(o+='<span class="cd-hpanel-notice-num" id="newnoticeiconfollowers"></span>'),o+='</li><li class="n-item-meta" data-stat-role="ck"><span class="n-item-meta-title">æ°ç²ä¸</span><span class="n-item-meta-author">'+a.noticeDetails.followers.count+"äºº ååè®¢éäºä½ </span>",o+="</li></ul></div>"):"hudong"==a.noticeDetailsOrder[c]&&a.noticeDetails.hudong.count>0?(o+='<div class="cd-hpanel-n-item cd-hpanel-n-item-live" name="noticelist" data-stat-role="ck" id="toolbar_notice_hudong" noticetype="hudong"><div class="cd-hpanel-n-submark" data-stat-role="ck"><span class="cd-hpanel-submark" data-stat-role="ck"></span></div><ul class="n-item-ul n-item-ul-live"><li class="n-item-logo n-item-logo-live" data-stat-role="ck"><span class="ico-notice ico-notice-live"></span>',a.noticeDetails.hudong.count>0&&(o+='<span class="cd-hpanel-notice-num" id="newnoticeiconhudong"></span>'),o+='</li><li class="n-item-meta" data-stat-role="ck"><span class="n-item-meta-title">ç´æ­</span>',e.hudong&&(o+='<span class="n-item-meta-author" id="notice_nodata_hudong"><a href="'+e.hudong.url+'" target="_blank">'+CHUDA.Common.cutStr(e.hudong.nick_name,60,"...")+"</a></span>"),o+="</li></ul></div>"):"xingmeng_live"==a.noticeDetailsOrder[c]&&a.noticeDetails.xingmeng_live.count>0&&(o+='<div class="cd-hpanel-n-item cd-hpanel-n-item-star" name="noticelist" data-stat-role="ck" id="toolbar_notice_xingmeng_live" noticetype="xingmeng_live"><div class="cd-hpanel-n-submark" data-stat-role="ck"><span class="cd-hpanel-submark" data-stat-role="ck"></span></div><ul class="n-item-ul n-item-ul-star"><li class="n-item-logo n-item-logo-star" data-stat-role="ck"><span class="ico-notice ico-notice-star"></span>',a.noticeDetails.xingmeng_live.count>0&&(o+='<span class="cd-hpanel-notice-num" id="newnoticeiconxingmeng_live"></span>'),o+='</li><li class="n-item-meta" data-stat-role="ck"><span class="n-item-meta-title">ææ¢¦</span>',e.xingmeng_live&&(o+='<span class="n-item-meta-author">'+e.xingmeng_live.nick_name+" ç´æ­å³å°å¼å§</span>"),o+="</li></ul></div>")}o+="</div>"}if(a.noticetotal<=0&&(t("qheader_notice_num").style.display="none"),t("hpanelloading")&&t("hpanelloading").parentNode.removeChild(t("hpanelloading")),o){s.innerHTML='<div id="hideshownoticelist" style="position: absolute;width: 100%;height: 100%;top:0;left:0;">'+a.noticeheader+'<div class="cd-hpanel-mod-bd">'+o+"</div>"+a.noticefooter+"</div>";var r=function(e){t("notice_nodata_"+e)&&(t("notice_nodata_"+e).parentNode.parentNode.parentNode.className+=" cd-hpanel-n-item-disable",t("notice_nodata_"+e).parentNode.parentNode.parentNode.setAttribute("name",""))};r("sysmsg"),r("dms"),r("comments"),r("mentions"),r("hudong"),setTimeout(function(){a.noticeShowHover()},300)}else s.innerHTML='<div class="panel-ani">'+a.noticeheader+a.noticenull+a.nonoticefooter+"</div>"},noticeShowHover:function(){a.noticeDetails.hudong.count>0&&(a.noticetotal-=a.noticeDetails.hudong.count,a.noticeDetails.hudong.count=0,a.noticetotal<=0&&(t("qheader_notice_num").style.display="none"));var e=a._getElementsByName("div","noticelist");if(e)for(var s=e.length,i=0;s>i;i++)a._addEvent(e[i],"mouseenter",function(){a._addHover(this," cd-hpanel-subitem-hover")}),a._addEvent(e[i],"mouseleave",function(){a._removeHover(this," cd-hpanel-subitem-hover")}),e[i].onclick=function(){var e=this.getAttribute("noticetype");a.shownoticeinfo(e)}},shownoticeinfo:function(e){var s={};if(t("noticeinfo_"+e))a.slideToggleTwoPanels("hideshownoticelist","noticeinfo_"+e,"go"),a.gobacknoticelist(e);else if("task"==e)s.noticetype="task",a.noticeDetails.task.count>0&&(a.resetNoticeNum("[40]"),a.noticetotal-=a.noticeDetails.task.count,a.noticeDetails.task.count=0,t("newnoticeicontask").style.display="none",a.noticetotal<=0&&(t("qheader_notice_num").style.display="none"),window.open(API_DOMAIN_Link,"_blank"));else if("reward"==e)s.noticetype="reward",a.noticeDetails.reward.count>0&&(a.resetNoticeNum("[23]"),a.noticetotal-=a.noticeDetails.reward.count,a.noticeDetails.reward.count=0,t("newnoticeiconreward").style.display="none",a.noticetotal<=0&&(t("qheader_notice_num").style.display="none"),window.open(API_DOMAIN_Link,"_blank"));else{var i="http://"+API_DOMAIN_DEF+"/index_QSideToolJSONP?function[]=getNotice"+e+"&callback[]=QheaderModule.showNoticeInfoCallback";"followers"==e&&a.noticeDetails.followers.count>0&&(i+="&num="+a.noticeDetails.followers.count),CHUDA.Ajax.getScript(i,null,!0)}},showNoticeInfoCallback:function(e){var s=t(a.panel.noticelist);s.innerHTML+='<div id="noticeinfo_'+e.noticetype+'" style="height: 100%; position: absolute; width: 100%; right: -330px;top:0;"></div>';var i="";"sysmsg"==e.noticetype?(i=a.getNoticeInfoDetail("sysmsg",e),a.noticeDetails.sysmsg.count>0&&(a.resetNoticeNum("[13,14,15,16,17,18,19,20]"),a.noticetotal-=a.noticeDetails.sysmsg.count,a.noticeDetails.sysmsg.count=0,t("newnoticeiconsysmsg").style.display="none")):"dms"==e.noticetype?(i=a.getNoticeInfoDetail("dms",e),a.noticeDetails.dms.count>0&&(a.resetNoticeNum("[6]"),a.noticetotal-=a.noticeDetails.dms.count,a.noticeDetails.dms.count=0,t("newnoticeicondms").style.display="none")):"comments"==e.noticetype?(i=a.getNoticeInfoDetail("comments",e),(a.noticeDetails.video_reply.count>0||a.noticeDetails.statuses_comments.count>0)&&(a.resetNoticeNum("[7,8,9]"),a.noticetotal-=a.noticeDetails.video_reply.count,a.noticeDetails.video_reply.count=0,a.noticetotal-=a.noticeDetails.statuses_comments.count,a.noticeDetails.statuses_comments.count=0,t("newnoticeiconcomments").style.display="none")):"mentions"==e.noticetype?(i=a.getNoticeInfoDetail("mentions",e),a.noticeDetails.statuses_mentions.count>0&&(a.noticetotal-=a.noticeDetails.statuses_mentions.count,a.noticeDetails.statuses_mentions.count=0,t("newnoticeiconmentions").style.display="none")):"followers"==e.noticetype&&(i=a.getNoticeInfoDetail("followers",e),a.noticeDetails.followers.count&&(a.resetNoticeNum("[12]"),a.noticetotal-=a.noticeDetails.followers.count,a.noticeDetails.followers.count=0,t("newnoticeiconfollowers").style.display="none")),a.noticetotal<=0&&(t("qheader_notice_num").style.display="none");var n='<div class="cd-hpanel-mod"><div class="cd-hpanel-mod-hd"><div class="cd-hpanel-mod-title"><div class="cd-hpanel-btn-back" id="gobacknoticelist_'+e.noticetype+'" data-stat-role="ck"><span class="cd-hpanel-icon icon-subscription-back"></span><span class="mod-hd-action-back">è¿å</span></div><a class="mod-title-link" href="'+e.noticemoreurl+'" target="_blank"><span class="cd-hpanel-mod-title-txt">'+e.noticename+"</span></div></div>",o='<div class="cd-hpanel-mod-ft"><div class="cd-hpanel-mod-links  cd-hpanel-mod-links"><a href="'+e.noticemoreurl+'" target="_blank">æ¥çå¨é¨</a></div></div></div>';t("noticeinfo_"+e.noticetype).innerHTML=n+i+o,a.slideToggleTwoPanels("hideshownoticelist","noticeinfo_"+e.noticetype,"go"),setTimeout(function(){a.gobacknoticelist(e.noticetype)},100)},getNoticeInfoDetail:function(e,t){var a="";if("sysmsg"==e){if(t&&t.datas){a+='<div class="cd-hpanel-mod-bd"><div class="cd-hpanel-sublist">';for(var s=t.datas.length,i=0;s>i;i++){a+='<div class="cd-hpanel-subitem" id="toolbar_notice_sysmsg_two_'+i+'"><ul class="subitem-u subitem-u-h"><li class="subitem-u-thumb"><a><img src="'+t.datas[i].avatar+'" alt="'+t.datas[i].sender_name+'" replace="false"></a></li><li class="subitem-u-meta"><div class="subitem-u-meta-title subitem-u-meta-title-blue"><a class="u-link-none" target="_blank" title="'+t.datas[i].sender_name+'">'+CHUDA.Common.cutStr(t.datas[i].sender_name,16,"...")+'</a><span class="meta-update-time">'+t.datas[i].ctime_format+'</span></div><div class="subitem-u-meta-entry"><span>';var n=t.datas[i].content;t.datas[i].title&&(n="ã"+t.datas[i].title+"ã"+n),a+=CHUDA.Common.cutStr(n,60,"...")+'</span><a class="subitem-u-meta-sys-dlink" target="_blank" href="http://'+UC_DOMAIN+'/u/home/type_sysmsg">æ¥çè¯¦æ</a></div></li></ul><div class="v-segment" style=""></div></div>'}a+="</div></div>"}}else if("dms"==e){if(t&&t.data){a+='<div class="cd-hpanel-mod-bd"><div class="cd-hpanel-sublist">';for(var s=t.data.length,i=0;s>i;i++)1!=t.data[i].msg_state&&(a+='<div class="cd-hpanel-subitem" id="toolbar_notice_dms_two_'+i+'"><ul class="subitem-u subitem-u-m"><li class="subitem-u-link"><a href="http://'+UC_DOMAIN+"/u/"+t.data[i].encode_cuid+'" target="_blank" title="'+t.data[i].nick_name+'"></a></li><li class="subitem-u-thumb"><img src="'+t.data[i].avater+'" alt="'+t.data[i].nick_name+'"></li><li class="subitem-u-meta"><div class="subitem-u-meta-title subitem-u-meta-title-blue"><a href="http://'+UC_DOMAIN+"/u/"+t.data[i].encode_cuid+'" target="video" title="'+t.data[i].nick_name+'">'+CHUDA.Common.cutStr(t.data[i].nick_name,16,"...")+':</a><span class="meta-update-time">'+t.data[i].format_time+'</span></div><div class="subitem-u-meta-entry"><span class="meta-entry-ctx-2">'+t.data[i].content.replace(/</g,"&lt;").replace(/>/g,"&gt;")+'</span><div><a href="http://'+UC_DOMAIN+"/u/home/type_privatemsg/subType_one/cuid_"+t.data[i].encode_cuid+'" target="_blank" class="v-action-sub-link">å¨é¨'+t.data[i].msg_num+'æ¡å¯¹è¯</a></div></div></li></ul><div class="v-segment" style=""></div></div>');a+="</div></div>"}}else if("comments"==e){if(t&&t.data){a+='<div class="cd-hpanel-mod-bd"><div class="cd-hpanel-sublist">';for(var s=t.data.length,i=0;s>i;i++)a+='<div class="cd-hpanel-subitem  cd-hpanel-subitem-nolimit" id="toolbar_notice_comments_two_'+i+'"><ul class="subitem-u subitem-u-m"><li class="subitem-u-link"><a href="http://'+UC_DOMAIN+"/u/"+t.data[i].user.encodeuid+'" target="_blank" title="'+t.data[i].user.name+'"></a></li><li class="subitem-u-thumb"><img src="'+t.data[i].user.profile_image_url.middle+'" alt="'+t.data[i].user.name+'"></li><li class="subitem-u-meta"><div class="subitem-u-meta-title subitem-u-meta-title-blue"><a href="http://'+UC_DOMAIN+"/u/"+t.data[i].user.encodeuid+'" target="_blank" title="'+t.data[i].user.name+'">'+CHUDA.Common.cutStr(t.data[i].user.name,16,"...")+':</a><span class="meta-update-time">'+t.data[i].create_at_formate+'</span></div><div class="subitem-u-meta-entry"><span class="meta-entry-ctx">'+t.data[i].text_formate+"</span><div>",a+=t.data[i].videoinfo&&t.data[i].videoinfo.videoId?'<span class="u-meta-c">è¯è®ºäº<a class="u-meta-c-author" href="http://'+UC_DOMAIN+"/u/"+t.data[i].videoinfo.ownerEncode+'" target="_blank">@'+t.data[i].videoinfo.ownerUserName+'</a>çè§é¢<a class="u-meta-c-vt" target="_blank" href="http://v.youku.com/v_show/id_'+t.data[i].videoinfo.videoIdEncode+'">'+t.data[i].videoinfo.title+"</a></span>":'<span class="u-meta-c">è¯è®ºè§é¢å·²è¢«å±è½</span>',a+="</div></div></li></ul></div>";a+="</div></div>"}}else if("mentions"==e){if(t&&t.statuses){a+='<div class="cd-hpanel-mod-bd"><div class="cd-hpanel-sublist">';for(var s=t.statuses.length,i=0;s>i;i++)a+='<div class="cd-hpanel-subitem  cd-hpanel-subitem-nolimit" id="toolbar_notice_mentions_two_'+i+'"><ul class="subitem-u"><li class="subitem-u-link"><a href="http://'+UC_DOMAIN+"/u/"+t.statuses[i].user.encode_id+'" target="_blank" title="'+t.statuses[i].user.name+'"></a></li><li class="subitem-u-thumb"><img src="'+t.statuses[i].user.icon+'" alt="'+t.statuses[i].user.name+'"></li><li class="subitem-u-meta"><div class="subitem-u-meta-title subitem-u-meta-title-blue"><a href="http://'+UC_DOMAIN+"/u/"+t.statuses[i].user.encode_id+'" target="_blank" title="'+t.statuses[i].user.name+'">'+CHUDA.Common.cutStr(t.statuses[i].user.name,16,"...")+':</a><span class="meta-update-time">'+t.statuses[i].created_at_format+'</span></div><div class="subitem-u-meta-entry">',t.statuses[i].retweeted_status?(a+="<span>"+t.statuses[i].text+"</span>",0!=t.statuses[i].retweeted_status.stat?a+='<div class="u-meta-c-h-ctx">æ­¤æ¡å¨æå·²è¢«åä½èå é¤</div>':(a+='<div class="u-meta-c-h-ctx">è½¬åèª<a href="'+t.statuses[i].retweeted_status.user.link+'">@'+t.statuses[i].retweeted_status.user.name+"</a>",t.statuses[i].retweeted_status.user.ucicon&&(a+=t.statuses[i].retweeted_status.user.ucicon+"ï¼"),a+=t.statuses[i].retweeted_status.text+"</div>")):a+='<span class="meta-entry-ctx">'+t.statuses[i].text+"</span>",a+='</div></li></ul><div class="v-segment"></div></div>';a+="</div></div>"}}else if("followers"==e&&t&&t.list){a+='<div class="cd-hpanel-mod-bd"><div class="cd-hpanel-sublist">';for(var s=t.list.length,i=0;s>i;i++)a+='<div class="cd-hpanel-subitem" id="toolbar_notice_followers_two_'+i+'"><ul class="subitem-u"><li class="subitem-u-link"><a href="http://'+UC_DOMAIN+"/u/"+t.list[i].encodeuid+'" target="_blank" title="'+t.list[i].name+'"></a></li><li class="subitem-u-thumb"><img src="'+t.list[i].profile_image_url+'" alt="'+t.list[i].name+'"></li><li class="subitem-u-meta"><div class="subitem-u-meta-title subitem-u-meta-title-blue"><a href="http://'+UC_DOMAIN+"/u/"+t.list[i].encodeuid+'" target="video" title="'+t.list[i].name+'">'+CHUDA.Common.cutStr(t.list[i].name,16,"...")+'</a><span class="meta-update-time">'+t.list[i].relation_time_formate+'</span></div><div class="subitem-u-meta-entry"><span>è§é¢ï¼<em>'+t.list[i].statuses_count+'</em></span><span class="v-segment-mini">|</span><span>è®¢éï¼<em>'+t.list[i].friends_count+'</em></span><span class="v-segment-mini">|</span><span>ç²ä¸ï¼<em>'+t.list[i].followers_count+'</em></span><div></div></div></li></ul><div class="v-segment" style=""></div></div>';a+="</div></div>"}return a},gobacknoticelist:function(e){t("gobacknoticelist_"+e).onclick=function(){a.slideToggleTwoPanels("hideshownoticelist","noticeinfo_"+e,"goback"),a.noticeShowHover()}},slideToggleTwoPanels:function(e,t,a){jQuery("#qheader_notice_info").css("overflow","hidden"),"go"==a?(jQuery("#"+e)&&jQuery("#"+e).animate({left:-330},{duration:200,specialEasing:{top:"easeOutCubic",right:"linear"},done:function(){jQuery(this).css("display","none")}}),jQuery("#"+t)&&jQuery("#"+t).css({display:"block"}).animate({right:0},{duration:200,specialEasing:{top:"easeOutCubic",right:"linear"},done:function(){}})):"goback"==a&&(jQuery("#"+e)&&jQuery("#"+e).css({display:"block"}).animate({left:0},{duration:200,specialEasing:{top:"easeOutCubic",right:"linear"},done:function(){}}),jQuery("#"+t)&&jQuery("#"+t).animate({right:-330},{duration:200,specialEasing:{top:"easeOutCubic",right:"linear"},done:function(){jQuery(this).css("display","none")}}))},qrcodePanelShow:function(e){var t=jQuery,a=CHUDA.Common.getBrowser(),s=t(this).parent(),i=s.find(".ykcode-container"),n=s.find(".ykcode-cover"),o=n.find(".ykcode-cover-img"),l=300;return t(this).hide(),i.css("display","block"),a.ie&&parseInt(a.ie)<10?void s.css({height:"330px",width:"274px",zIndex:"100"}):(n.show(),void s.on("hover",function(){return!1}).css({width:"32px",height:"32px",zIndex:"100",overflow:"hidden"}).animate({width:"330px",height:"274px"},l,function(){o.css({transition:"transform 0.35s","-webkit-transition":"-webkit-transform 0.35s","-moz-transition":"-moz-transform 0.35s","-o-transition":"-o-transform 0.35s","-ms-transition":"-ms-transform 0.35s",transform:"rotate(-55deg)","-webkit-transform":"rotate(-55deg)","-moz-transform":"rotate(-55deg)","-o-transform":"rotate(-55deg)","-ms-transform":"rotate(-55deg)"}),n.delay(l+350).hide(1)}))},qrcodePanelClose:function(e){var t=jQuery,a=CHUDA.Common.getBrowser(),s=t(this).parent().parent(),i=t(this).parent(),n=s.find(".ykcode-flag"),o=s.find(".ykcode-cover"),l=o.find(".ykcode-cover-img"),c=300;return a.ie&&parseInt(a.ie)<10?(i.hide(),n.show(),void s.css({height:"auto",width:"auto",overflow:""})):(o.show(),l.css("display"),l.css({transition:"transform 0.25s","-webkit-transition":"-webkit-transform 0.25s","-moz-transition":"-moz-transform 0.25s","-o-transition":"-o-transform 0.25s","-ms-transition":"-ms-transform 0.25s",transform:"rotate(0deg)","-webkit-transform":"rotate(0deg)","-moz-transform":"rotate(0deg)","-o-transform":"rotate(0deg)","-ms-transform":"rotate(0deg)"}),void s.delay(230).animate({width:"32px",height:"32px"},c,function(){i.hide(),o.hide(),n.show()}))},userReceiveAward:function(e){var t=jQuery,a=e,s=t(this).find("span.reward-entry"),i=t(".cd-integral"),n=t('<div class="u-task-mask"><p>é¢åæå</p></div>');meta=t("<div class='task-reward-meta'></div>");var o=i.offset();t.each(s,function(e){t(s[e]).appendTo(meta)});var l=t(this).find("div.u-task-mask");l.length&&l.remove(),t(this).fadeOut("fast",function(){t(this).addClass("u-task-meta-reward"),n.append(meta),t(this).append(n),t(this).removeClass("u-task-meta-done"),t(this).fadeIn(function(){var e=t(this).find(".reward-entry-integral");if(0!==e.length){var s=e.clone().addClass("reward-integral-fake").appendTo(t("body")),n=e.offset(),l=parseInt(s.html()),c="";s.css({position:"absolute",top:n.top,left:n.left,display:"none"}).delay(1700).show(1).animate({top:o.top,left:o.left},800,function(){var e=t(".cd-hpanel-user-finance p"),n=t("<span class='integral-hint'>+"+l+"</span>");e.css("position","relative").append(n),n.animate({top:"-14px",opacity:1},300,function(){n.delay(1500).animate({top:"-21px",opacity:0},300,function(){n.remove()})}),c=parseInt(i.html().split(",").join(""))+l+"",i.html(a._formatCount(c,3,",")),s.remove()})}t(this).delay(1700).slideUp(300,function(){t(this).remove(),a.getUserTaskList()})})})},_addHover:function(e,t){return e.className?-1==e.className.indexOf(t)&&(e.className+=" "+t):e.className=t,this},_removeHover:function(e,t){return e.className&&-1!=e.className.indexOf(" "+t)?e.className=e.className.replace(" "+t,""):e.className&&-1!=e.className.indexOf(t)&&(e.className=e.className.replace(t,"")),this},_addEvent:function(e,t,a){function s(e){var t=e.currentTarget,s=e.relatedTarget;i(t,s)||t==s||a.call(e.currentTarget,e)}function i(e,t){try{return e.contains?e!=t&&e.contains(t):!!(16&e.compareDocumentPosition(t))}catch(a){}}window.addEventListener?"mouseenter"==t||"mouseleave"==t?"mouseenter"==t?e.addEventListener("mouseover",s,!1):e.addEventListener("mouseout",s,!1):e.addEventListener(t,a,!1):window.attachEvent&&e.attachEvent("on"+t,a)},_getElementsByName:function(e,t){for(var a=[],s=document.getElementById("qheader_box"),i=s.getElementsByTagName(e),n=0;n<i.length;n++)i[n].getAttribute("name")==t&&(a[a.length]=i[n]);return a},_formatCount:function(e,t,a){var s=e.length,i=parseInt(s/t),n=e.length%t,o=[],l="";0!=n&&o.push(e.substring(0,n));for(var c=0;i>c;c++)o.push(e.substr(n+t*c,t));return l=o.join(a)}},s="http://static.youku.com/lvip/css/chuda_qheader.css",i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",s),document.getElementsByTagName("head")[0].appendChild(i),window.QheaderModule=a}();