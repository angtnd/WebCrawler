KISSY.add("mui/app-guide/main",function(t,e,i,n,o,a,r,s){var c=function(t){this.container=i.get(t.container);this.containerWidth=t.width||i.width(this.container);this.type=t.type||"small-head";this.init()};c.type={BIG_HEAD:"big-head",BIG_BODY:"big-body",SMALL_HEAD:"small-head"};c.prototype.checkBrowser=function(){var e=navigator.userAgent;if(/windvane|T-UA/i.test(e)){return false}return!!t.UA.ipad};c.prototype.check=function(t){var e=this;if(!this.checkBrowser()){t(false);return}if(this.type===c.type.BIG_HEAD){r.isCanShowBigHead(function(i){if(!i){e.type=c.type.SMALL_HEAD;e.check(t)}else{t(true)}})}else if(this.type===c.type.SMALL_HEAD){r.isCanShowSmallHead(t)}else{t(true)}};c.prototype.request=function(t){var e=this;r.getListFromTFXT().then(function(i){if(i.length>=a.count){t(i.slice(0,a.count))}else{r.getListFromCLJ().then(function(n){n=e.transfromCLJData(n);n=n.slice(0,a.count-i.length);t(i.concat(n))},function(t){console.log(t.message)})}})};c.prototype.transfromCLJData=function(e){return t.map(e.topics,function(t){return{text:t.title,img:t.coverForPadUrl}})};c.prototype.build=function(e){e={type:this.type,channel:e};t.each(e.channel,function(t,e){t.colorType=a.colorTypeList[e]});return s.render(e)};c.prototype.show=function(){var t=this;t.check(function(e){if(!e){return}t.request(function(e){i.html(t.container,t.build(e));if(t.type===c.type.BIG_HEAD){r.setLastShowBigTime()}setTimeout(function(){t.anim()},500)})})};c.prototype.anim=function(){var t=this;var i=e.one(".j_AppGuider");if(!i)return;i.addClass("show");if(t.type===c.type.BIG_HEAD){setTimeout(function(){var t=i.all(".j_ChnShelter");if(!t.hasClass("move")){t.addClass("move")}var e=i.all(".j_ChnContext");if(!e.hasClass("down")){e.addClass("down")}},350)}};c.prototype.onclick=function(t){var e=t.target;if(i.hasClass(e,"close")){i.hide(i.get(".j_AppGuider",this.container));r.setLastCloseTime()}else{var n=o.startApp({type:"func"});n.install()}};c.prototype.init=function(){n.delegate(this.container,"click","[data-click=true]",this.onclick,this)};return c},{requires:["node","dom","event","mui/smartbanner/index","mui/app-guide/config","mui/app-guide/model","mui/app-guide/tpl","mui/app-guide/css/app-guide.css"]});KISSY.add("mui/smartbanner/index",function(e,t,a,i,r){var n=window;var l={};var o=n.document;var s=o.cookie.match(/(?:^|\s)cna=([^;]+)(?:;|$)/);if(s){s=s[1]}function m(){var e={};var t=location.search.slice(1).split("&");if(t.length){for(var a=0;a<t.length;a++){if(t[a]&&t[a].indexOf("=")!=-1){var i=t[a].split("=");e[i[0]]=i[1]}}}return e}function p(e){var t=o.createElement("img");t.style.cssText="display:none";t.src=e;o.body.appendChild(t)}function c(e){e=e||{};var t=e.apuri||e.ap_uri;var a=e.string||"tmwap.1.1";if(!t)return;var i={};i["logtype"]=2;i["apuri"]=t+(l.page?"_"+l.page:"");i["scene"]=l.scene?l.scene:"";i["cache"]=parseInt((Math.random()+1)*Date.now());var r=[];for(var n in i){r.push(n+"="+encodeURIComponent(i[n]))}p("//wgo.mmstat.com/"+a+"?"+r.join("&"))}function u(){var e=m();var t=e["ttid"];var a=/[^@]+\@taobao\_(iphone|android|apad|ipad)\_[\d.]+/i;t=t?decodeURIComponent(t):"";return a.test(t)}function d(){var e=m();var t=e["ttid"];var a=/.*@travel.*/i;t=t?decodeURIComponent(t):"";return a.test(t)}function f(){return!!n.navigator.userAgent.match(/WindVane/)}function h(){return!!n.navigator.userAgent.match(/T-UA=/)}function g(){return!!n.navigator.userAgent.match(/AlipayClient/i)}var v=o.createElement("frame");var b=function(e){var t=this,a=navigator.standalone,i=navigator.userAgent;if(i.match(/iPhone|iPod|iPad/i)!=null){this.platform="ios";this.isIpad=i.match(/iPad/i)!=null}else if(i.match(/Android/i)!=null){if(i.match(/Mobile/i)!=null){this.platform="android";this.isChrome=i.match(/Chrome/i)!=null&&i.match(/Version\/\d+\.\d+(\.\d+)?\sChrome\//i)==null}}else if(i.match(/Linux/i)!=null){this.platform="android"}if(!this.platform||a){this.invaliable=true;return null}if(this.init(e)){this.create();window.onblur=function(){clearTimeout(t.timeload);t.autoAplus&&clearTimeout(t.autoAplus);t.timeload=null};document.addEventListener("visibilitychange",function(){if(document.hidden){clearTimeout(t.timeload);t.autoAplus&&clearTimeout(t.autoAplus);t.timeload=null}})}return this};b.prototype={constructor:b,init:function(e){var t=this.options=e,a=t.isInstance||function(){return f()||u()};if(a()||h()||g()||d()){this.invaliable=true;return null}e.version||(e.version="v1");this.cover=t.cover||false;this.isDownload=t.download||false;this.timeout=t.timeout||1500;var i=t.from||"h5";var r=t.crossplat||false;if(this.platform=="ios"&&!r){this.bannerUrl=t.appstoreUrl||(this.isIpad?"https://itunes.apple.com/app/id593828513":"//itunes.apple.com/cn/app/id518966501?mt=8")}else{this.bannerUrl=t.url||"http://m.laiwang.com/market/laiwang/tmall/app-download.php?src=wapicon"}if(t.href){var n=t.href;var l=m();var s=o.getElementById("buried");var p=l["ttid"]||s&&s.value;var c=l["refid"];var v=l["ali_trackid"];var b={from:i};n=n.indexOf("://")!=-1?n:"tmall://tmallclient/?"+n;if(this.isChrome){var w=n.split("://"),A=w[0],U=n.replace(A+"://","");var _=t.bag||"com.tmall.wireless";n="intent://"+U+"#Intent;scheme="+A+";package="+_+";end"}this.paramUrl=n}else{this.paramUrl="tmall://tmallclient"}return true},reset:function(e){if(this.iClose)return;this.init(e);this.resetHtml&&this.resetHtml(e)},create:function(){if(this.iClose)return;if(!v.parentNode){v.setAttribute("id","J_smartFrame");v.style.cssText="display:none";o.body.appendChild(v)}this.frame=v},download:function(e,t){var a=Date.now();if(!e||a-e<this.timeout+50){if(this.platform=="ios"){c({string:"tmwap.1.2",apuri:"sb_ios_download"})}else{c({string:"tmwap.1.7",apuri:"sb_andriod_download"})}if(t.notGoDownload){!!t.fail&&t.fail()}else{!!t.fail&&t.fail();if(this.cover){n.location.replace(this.bannerUrl)}else{n.location.href=this.bannerUrl}}}else{!!t.success&&t.success()}},redirect:function(e){var t=this.options&&this.options.version,a=this.frame,i=e?"click_sb_"+t+"_manual":"click_sb_"+t+"_auto";if(!this.paramUrl)return;this.paramUrl=this.paramUrl.replace("%22ap_uri%22%3A%22%22",encodeURIComponent('"ap_uri":"'+i+'"'));if(this.isChrome){var r=window.open(this.paramUrl);r.location.href="http://m.laiwang.com/market/laiwang/tmall/app-download.php?src=wapicon"}else{a&&a.setAttribute("src",this.paramUrl)}},install:function(e){var t=this,e=e||{},a=Date.now();c({string:"tmwap.1.8"});if(this.platform=="ios"){c({string:"tmwap.1.5",apuri:"sb_ios_click"})}else{c({string:"tmwap.1.6",apuri:"sb_andriod_click"})}if(!t.isDownload){t.timeload=setTimeout(function(){t.download(a,e)},t.timeout)}t.redirect(true)},autoEnvoke:function(){var e=this,t=Date.now();c({string:"tmallacti.201503.1005.5",apuri:"sb_ios_auto_envoke"});if(e.platform=="ios"){c({string:"tmallacti.201503.1005.1",apuri:"sb_ios_auto_envoke"})}else{c({string:"tmallacti.201503.1005.3",apuri:"sb_andriod_auto_envoke"})}e.autoAplus=setTimeout(function(){var a=Date.now();if(a-t<e.timeout+50){if(e.platform=="ios"){c({string:"tmallacti.201503.1005.2",apuri:"sb_ios_auto_fail"})}else{c({string:"tmallacti.201503.1005.4",apuri:"sb_andriod_auto_fail"})}}},e.timeout);e.redirect(false)}};l.smartbanner=function(e){var t=e.type,a=l.smartbanner.BannerUI,i=l.smartbanner.PopUI;if(t==="banner"||!t){if(a){return new a(e)}}else if(t==="pop"){if(i){return new i(e)}}else if(t==="func"){return l.smartbanner.getInstance(e)}};l.smartbanner.getInstance=function(e,t){t||(t=Object.create({}));for(var a in b.prototype){t[a]=b.prototype[a]}return b.call(t,e)};l.smartbanner.aplus=c;l.smartbanner.getParam=m;l.smartbanner.ttidInTaobaoApp=u;l.smartbanner.uaInTaobaoApp=f;var w=function(e){var t=this;w.superclass.constructor.call(t,e);t.init(e)};w.startApp=l.smartbanner;e.extend(w,i,{init:function(a){var i=this;a=a||{};var r=a.url;i.sbUrl=a.url||"";i.config=a;i.opt=a;i._pageType(i.sbUrl);var n=window.g_config||{};if(n.removeSmartBanner){return}if(t.get("#J_BottomSmartBanner")){return}var o=navigator.userAgent.indexOf("AliApp")>=0;var s=navigator.userAgent.indexOf("UCBrowser")>=0;var m=document.referrer&&document.referrer.indexOf("taobao.com")>=0;var p=window.location.href.indexOf("ali_trackid=")>=0||e.Cookie.get("tkmb");var c=e.unparam(document.location.search.substring(1));var u=c.ttid&&c.ttid.indexOf("@juhuasuan");var d=(l.page=="detail"||l.page=="shop")&&window.location.href.indexOf("ali_trackid=2")>=0;if(s||o||p&&!d||u){e.Cookie.set("_isBottomSmartBannerShowed_",1,undefined,".tmall.com","/")}var f=t.get("#J_GlobalSmartBanner");if(f){t.hide(f)}var h=e.UA.ipad||"";var g=t.viewportWidth()>t.viewportHeight();if(!e.Cookie.get("_isBottomSmartBannerShowed_")&&!o&&!s&&(!m||d)&&(!p||d)&&!u&&!h&&!g){i.specialTaoke=d;i.renderSmartBanner(a)}},appJump:function(e){var t=this,a=t._isSpecialApp();var i=e.type?t._spliceUrl(e):'tmall://tmallclient/?{"action":"internal:url=tmall://mobile.tmall.com/page/home"}';if(!a||e.notNeedRule){var r=l.smartbanner({type:"func",href:i});r.install(e)}},renderSmartBanner:function(a){var i=this;window.__content_results=window.__content_results||[];e.IO({url:"//equity-vip.tmall.com/liuliangbao/track.do",type:"GET",dataType:"jsonp",scriptCharset:"utf-8",success:function(r){JSON.parse(r.delta);var n='<div id="J_BottomSmartBanner" class="mui-bottom-smart-banner">'+'<a id="J_BottomSmartBannerLink"><img src="{content}"></a>'+'<div class="mui-bottom-m-sb-btn-close" id="J_BottomSmartBannerClose" ></div>'+"</div>";if(!r.delta){return}var o=JSON.parse(r.delta);i.track=r.track;if(i.track){l.scene="liuliangbao"}if(o&&o.data&&o.data[0].content){var s=o.data[0];if(a.img){s.content=a.img}var m=e.substitute(n,s);i.autoLink=s.link||"";i.sbLink=s.click_url||"";var p=t.create(m);t.addStyleSheet('.mui-bottom-smart-banner{                        width: 100%;                        position: fixed;                        bottom:0;                        left:0;                        z-index: 9999;                        font-size:0;                    }                    .mui-bottom-smart-banner img{                        width:100%;                        opacity: 0.95;                    }                    .mui-bottom-smart-banner a{                        display:block                    }                    .mui-bottom-m-sb-btn-close{                        position: absolute;                        right:0;                        top:0;                        background: rgba(0,0,0,0.2) url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAWCAYAAADafVyIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3NzhFMkJFNTMwM0ExMUU0OERFOUVCNDEzMUJCNTQ1RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NzhFMkJFNjMwM0ExMUU0OERFOUVCNDEzMUJCNTQ1RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjc3OEUyQkUzMzAzQTExRTQ4REU5RUI0MTMxQkI1NDVEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjc3OEUyQkU0MzAzQTExRTQ4REU5RUI0MTMxQkI1NDVEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+NmtjogAAAJtJREFUeNqsk1sSABEMBOn7Oa0D2ldtldolEolvuomZ3Fqr6Vklxa6bSweu0fCLzef2NRL+viAFSn7j5rPBIxn+JYONO5JpUJgcsEjEFCIc1EiWEWdxO0mi6g+KEYwk6nLms8nWj0yW5mNISrHCrYIqvMYt6Gdu6gmbOVdLcJRIJcFTIo0EB1wlwQlfSgiAixKC4FMJgfCh5BBgAOelLtiutNSeAAAAAElFTkSuQmCC") 15px 5px no-repeat;                        width: 30px;                        height: 30px;                        background-size: 12px;                        cursor: pointer;                        border-radius: 0 0 0 30px;                    }');if(!t.get("#J_BottomSmartBanner")){if(!t.get("body")){setTimeout(function(){t.append(p,"body")},0)}else{t.append(p,"body")}}!!s.exposureParam&&((new Image).src=s.exposureParam+"&r"+ +new Date+"=1");c({string:"tmwap.1.3",apuri:"sb_show"});i.sbUrl=i._spliceUrl(a);i._initSBEvent();if(s.is_auto=="true"&&window.location.href.indexOf("ali_trackid=")<0){var u=i.autoLink||i.sbUrl||'tmall://tmallclient/?{"action":"internal:url=tmall://mobile.tmall.com/page/home"}';var d=l.smartbanner({type:"func",href:u});var f=navigator.userAgent.match(/Chrome/i)!=null&&navigator.userAgent.match(/Version\/\d+\.\d+(\.\d+)?\sChrome\//i)!=null;if(f){return}else{d.autoEnvoke()}}}},timeout:3})},_initSBEvent:function(){var i=this;var r=i.sbLink||i.sbUrl;var n=t.get("#J_BottomSmartBanner");r=r||'tmall://tmallclient/?{"action":"internal:url=tmall://mobile.tmall.com/page/home"}';if(r){var o=t.get("#J_BottomSmartBannerLink");a.delegate(document,"tap","#J_BottomSmartBannerLink",function(e){var t=l.smartbanner({type:"func",href:r});t.install();e.preventDefault()})}var s=t.get("#J_BottomSmartBannerClose");if(n&&s){a.delegate(document,"tap","#J_BottomSmartBannerClose",function(a){l.smartbanner.aplus({string:"tmwap.1.4",apuri:"sb_click_close"});n=t.get("#J_BottomSmartBanner");t.hide(n);e.Cookie.set("_isBottomSmartBannerShowed_",1,undefined,".tmall.com","/");a.preventDefault()})}},hide:function(){var e=t.get("#J_BottomSmartBanner");!!e&&t.hide(e)},show:function(){var e=t.get("#J_BottomSmartBanner");!!e&&t.show(e)},_urlAddTaoke:function(e){var t=this;var a="";var i="";if(e.indexOf("item:id=")>-1){l.page="detail";a="tmall://mobile.tmall.com/page/itemDetail?itemId=";i=e.replace(/[^0-9]/gi,"")}else if(e.indexOf("tmall://mobile.tmall.com/page/shopDetail")>-1){l.page="shop";a="tmall://mobile.tmall.com/page/shop?shopId=";i=e.replace(/[^0-9]/gi,"")}if(i){a=a+i+"&e="+t._getTkmd()+"&type=2";e="tmall://tmallclient/?"+encodeURIComponent('{"action":"internal:url='+a+'"}')}return e},_getTkmd:function(){return/(?:^|&)e=(.*?)(?:&|$)/.test(KISSY.Cookie.get("tkmb"))?encodeURIComponent(RegExp.$1):""},_pageType:function(e){if(e.indexOf("item:id=")>-1){l.page="detail"}else if(e.indexOf("tmall://mobile.tmall.com/page/shopDetail")>-1){l.page="shop"}else if(e.indexOf("searchItem")>-1){l.page="list"}},_spliceUrl:function(t){var a=this;type=t.type||"",params=t.params||"",spliceUrl="",oldUrl=t.url||"",href="";if(type){switch(type){case"detail":l.page="detail";spliceUrl="tmall://mobile.tmall.com/page/itemDetail?"+e.param(params);break;case"shop":l.page="shop";spliceUrl="tmall://mobile.tmall.com/page/shopDetail?"+e.param(params);break;case"list":l.page="list";spliceUrl="tmall://mobile.tmall.com/page/searchItem?"+e.param(params);break;case"internal":l.page=params.page;spliceUrl="tmall://mobile.tmall.com/page/"+params.page+"?"+e.param(params.params);break;case"link":l.page="h5";spliceUrl=params.url;if(spliceUrl.indexOf("#")>-1){spliceUrl=spliceUrl.replace(/#(.*?)$/,"")}break}}else if(t.url){var i=t.url;if(i.indexOf("item:id=")>-1){l.page="detail";spliceUrl="tmall://mobile.tmall.com/page/itemDetail?itemId="+i.replace(/[^0-9]/gi,"")}else if(i.indexOf("tmall://mobile.tmall.com/page/shopDetail")>-1){l.page="shop";spliceUrl="tmall://mobile.tmall.com/page/shop?shopId="+i.replace(/[^0-9]/gi,"")}else if(i.indexOf("searchItem")>-1){l.page="list";var r=decodeURIComponent(t.url);spliceUrl=/url=(.*?)"/.test(r)?RegExp.$1:""}else{return t.url}}else{spliceUrl="tmall://mobile.tmall.com/page/home"}if(a.specialTaoke){if(a._getTkmd()){spliceUrl+=(spliceUrl.indexOf("?")>-1?"&":"?")+"e="+a._getTkmd()+"&type=2"}}if(a.track){spliceUrl+=(spliceUrl.indexOf("?")>-1?"&":"?")+a.track}l.page=type;if(type=="link"){return"tmall://tmallclient/?"+encodeURIComponent('{"action":"link:url='+spliceUrl+'"}')}else{return"tmall://tmallclient/?"+encodeURIComponent('{"action":"internal:url='+spliceUrl+'"}')}},_isSpecialApp:function(){var e=navigator.userAgent.indexOf("AliApp")>=0;var t=navigator.userAgent.indexOf("UCBrowser")>=0;return e||t}});return w},{requires:["dom","event","base","cookie","io"]});/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:15
*/
KISSY.add("base",["attribute"],function(e,q){function h(b,a){return function(d){return function(){a?d.apply(this,arguments):this.callSuper.apply(this,arguments);var c=arguments.callee.__owner__.__extensions__||[];a&&c.reverse();var f=arguments,e;if(e=c&&c.length)for(var g=0;g<e;g++){var m=c[g]&&(!b?c[g]:c[g].prototype[b]);m&&m.apply(this,f||[])}a?this.callSuper.apply(this,arguments):d.apply(this,arguments)}}}function n(b){var a=this.__hooks__,d=this.prototype;if(this.__extensions__.length&&a)for(var c in a)if(!d.hasOwnProperty(c)||
b.hasOwnProperty(c))b[c]=b[c]||o;return r.call(this,b)}function s(b){var a;b.target===this&&(a=this[i+b.type.slice(5).slice(0,-6)],a.call(this,b.newVal,b))}function t(b){var a=b.get("plugins"),d;e.each(a,function(b,f){"function"===typeof b&&(d=b,a[f]=new d)})}function j(b){var a,d=this.get("plugins");if(a=d.length)for(var c=0;c<a;c++)if(d[c][b])d[c][b](this)}var p=q("attribute"),k=e.ucfirst,i="_onSet",o=e.noop,l=p.extend({constructor:function(){this.callSuper.apply(this,arguments);var b=this.get("listeners"),
a;for(a in b)this.on(a,b[a]);this.initializer();t(this);j.call(this,"pluginInitializer");this.bindInternal();this.syncInternal()},initializer:o,__getHook:h,__callPluginsMethod:j,bindInternal:function(){var b=this.getAttrs(),a,d;for(a in b)if(d=i+k(a),this[d])this.on("after"+k(a)+"Change",s)},syncInternal:function(){var b=[],a;a=this.constructor;for(var d=this.getAttrs();a;)b.push(a),a=a.superclass&&a.superclass.constructor;b.reverse();for(a=0;a<b.length;a++){var c=b[a].ATTRS||{},f;for(f in c)if(f in
d){var e,g;(g=this[i+k(f)])&&0!==d[f].sync&&void 0!==(e=this.get(f))&&g.call(this,e)}}},plug:function(b){"function"===typeof b&&(b=new b);b.pluginInitializer&&b.pluginInitializer(this);this.get("plugins").push(b);return this},unplug:function(b){var a=[],d=this,c="string"===typeof b;e.each(d.get("plugins"),function(f){var e=0,g;b&&(c?(g=f.get&&f.get("pluginId")||f.pluginId,g!==b&&(a.push(f),e=1)):f!==b&&(a.push(f),e=1));e||f.pluginDestructor(d)});d.setInternal("plugins",a);return d},getPlugin:function(b){var a=
null;e.each(this.get("plugins"),function(d){if((d.get&&d.get("pluginId")||d.pluginId)===b)return a=d,!1});return a},destructor:e.noop,destroy:function(){this.get("destroyed")||(j.call(this,"pluginDestructor"),this.destructor(),this.set("destroyed",!0),this.fire("destroy"),this.detach())}});e.mix(l,{__hooks__:{initializer:h(),destructor:h("__destructor",!0)},ATTRS:{plugins:{value:[]},destroyed:{value:!1},listeners:{value:[]}},extend:function a(d,c,f){e.isArray(d)||(f=c,c=d,d=[]);f=f||{};c=c||{};c=
p.extend.call(this,c,f);c.__extensions__=d;n.call(c,{});if(d.length){var h={},g={};e.each(d.concat(c),function(a){if(a){e.each(a.ATTRS,function(a,c){var d=h[c]=h[c]||{};e.mix(d,a)});var a=a.prototype,c;for(c in a)a.hasOwnProperty(c)&&(g[c]=a[c])}});c.ATTRS=h;g.constructor=c;e.augment(c,g)}c.extend=f.extend||a;c.addMembers=n;return c}});var r=l.addMembers;return e.Base=l});
/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:15
*/
KISSY.add("attribute",["event/custom"],function(g,p,F,C){function n(d,a){return"string"===typeof a?d[a]:a}function o(d){return d.__attrVals||(d.__attrVals={})}function q(d,a,c,b,e,f,h,i){h=h||c;return d.fire(a+g.ucfirst(c)+"Change",g.mix({attrName:h,subAttrName:f,prevVal:b,newVal:e},i))}function k(d,a,c){var b=d[a];!c&&!b&&(d[a]=b={});return b||{}}function t(d,a){for(var c=0,b=a.length;void 0!==d&&c<b;c++)d=d[a[c]];return d}function u(d){var a;-1!==d.indexOf(".")&&(a=d.split("."),d=a.shift());return{path:a,
name:d}}function v(d,a,c){var b=c;if(a){var d=b=void 0===d?{}:g.clone(d),e=a.length-1;if(0<=e){for(var f=0;f<e;f++)d=d[a[f]];void 0!==d&&(d[a[f]]=c)}}return b}function w(d,a,c,b,e){var f,h,i;f=u(a);var D=a,a=f.name;f=f.path;i=d.get(a);var l=a,m=k(d,"__defaultBeforeFns");m[l]||(m[l]=1,l="before"+g.ucfirst(l)+"Change",d.publish(l,{defaultFn:x}));f&&(h=t(i,f));if(b.force||!(!f&&i===c||f&&h===c)){c=v(i,f,c);c=g.mix({attrName:a,subAttrName:D,prevVal:i,newVal:c,_opts:b,_attrs:e,target:d},b.data);if(b.silent){if(j===
x.call(d,c))return j}else if(j===d.fire("before"+g.ucfirst(a)+"Change",c))return j;return d}}function x(d){if(d.target===this){var a=d.newVal,c=d.prevVal,b=d.attrName,e=d.subAttrName,f=d._attrs,d=d._opts,a=this.setInternal(b,a);if(a===j)return a;d.silent||(a=o(this)[b],q(this,"after",b,c,a,e,null,d.data),f?f.push({prevVal:c,newVal:a,attrName:b,subAttrName:e}):q(this,"","*",[c],[a],[e],[b],d.data))}}function r(d){var a=this.constructor;for(this.userConfig=d;a;){var c=a.ATTRS;if(c){var b=void 0;for(b in c)this.addAttr(b,
c[b],!1)}a=a.superclass?a.superclass.constructor:null}if(d)for(var e in d)this.setInternal(e,d[e])}function y(d,a){var c=a.__hooks__||{},b;for(b in c)b in d&&(d[b]=c[b](d[b]));g.each(d,function(b,c){if("function"===typeof b){var g=0;if(b.__owner__){var i=b.__owner__;delete b.__owner__;delete b.__name__;var g=b.__wrapped__=1,j=z(b);j.__owner__=i;j.__name__=c;i.prototype[c]=j}else b.__wrapped__&&(g=1);g&&(d[c]=b=z(b));b.__owner__=a;b.__name__=c}})}function E(d){y(d,this);g.mix(this.prototype,d)}function s(d,
a){var c=d.getAttrs(),b=k(c,a,1),e=b.valueFn;if(e&&(e=n(d,e)))e=e.call(d),void 0!==e&&(b.value=e),delete b.valueFn,c[a]=b;return b.value}function A(d,a,c,b){var e,f;e=u(a);a=e.name;if(e=e.path)f=d.get(a),c=v(f,e,c);if((e=k(d.getAttrs(),a).validator)&&(e=n(d,e)))if(d=e.call(d,c,a,b),void 0!==d&&!0!==d)return d}p=p("event/custom");C.exports=r;var z=g.bind,B={},j=!1;r.extend=function a(c,b){var e,b=b||{},c=c||{},f=b.__hooks__;if(e=this.__hooks__)f=b.__hooks__=b.__hooks__||{},g.mix(f,e,!1);e=c.hasOwnProperty("constructor")?
c.constructor:function(){this.callSuper.apply(this,arguments)};c.constructor=e;e.__hooks__=f;y(c,e);var h=b.inheritedStatics;if(f=this.inheritedStatics)h=b.inheritedStatics=b.inheritedStatics||{},g.mix(h,f,!1);g.extend(e,this,c,b);h&&g.mix(e,h);e.extend=b.extend||a;e.addMembers=E;return e};g.augment(r,p.Target,{INVALID:B,callSuper:function(){var a,c,b=arguments;"function"===typeof this&&this.__name__?(a=this,c=b[0],b=Array.prototype.slice.call(b,1)):(a=arguments.callee.caller,a.__wrapped__&&(a=a.caller),
c=this);var e=a.__name__;if(e)return a=a.__owner__.superclass[e],!a?void 0:a.apply(c,b||[])},getAttrs:function(){return this.__attrs||(this.__attrs={})},getAttrVals:function(){var a={},c,b=this.getAttrs();for(c in b)a[c]=this.get(c);return a},addAttr:function(a,c,b){var e=this.getAttrs(),f,c=g.clone(c);(f=e[a])?g.mix(f,c,b):e[a]=c;return this},addAttrs:function(a,c){var b=this;g.each(a,function(a,c){b.addAttr(c,a)});c&&b.set(c);return b},hasAttr:function(a){return this.getAttrs().hasOwnProperty(a)},
removeAttr:function(a){var c=o(this),b=this.getAttrs();this.hasAttr(a)&&(delete b[a],delete c[a]);return this},set:function(a,c,b){var e;if(g.isPlainObject(a)){var b=c||{},c=Object(a),f=[],h=[];for(a in c)void 0!==(e=A(this,a,c[a],c))&&h.push(e);if(h.length)return b.error&&b.error(h),j;for(a in c)w(this,a,c[a],b,f);var i=[],k=[],l=[],m=[];g.each(f,function(a){k.push(a.prevVal);l.push(a.newVal);i.push(a.attrName);m.push(a.subAttrName)});i.length&&q(this,"","*",k,l,m,i,b.data);return this}b=b||{};e=
A(this,a,c);return void 0!==e?(b.error&&b.error(e),j):w(this,a,c,b)},setInternal:function(a,c){var b,e=k(this.getAttrs(),a).setter;if(e&&(e=n(this,e)))b=e.call(this,c,a);if(b===B)return j;void 0!==b&&(c=b);o(this)[a]=c},get:function(a){var c,b=o(this),e,f;-1!==a.indexOf(".")&&(c=a.split("."),a=c.shift());e=k(this.getAttrs(),a,1).getter;f=a in b?b[a]:s(this,a);if(e&&(e=n(this,e)))f=e.call(this,f,a);!(a in b)&&void 0!==f&&(b[a]=f);c&&(f=t(f,c));return f},reset:function(a,c){if("string"===typeof a)return this.hasAttr(a)?
this.set(a,s(this,a),c):this;var c=a,b=this.getAttrs(),e={};for(a in b)e[a]=s(this,a);this.set(e,c);return this}})});
KISSY.add("mui/app-guide/config",function(a){var o=function(a){var o=a.length;var e=Math.ceil(o/2);for(var r=0;r<=e;r+=1){var t=Math.floor(Math.random()*o);if(t!==r){var i=a[t];a[t]=a[r];a[r]=i}}return a};var e={url:{clj:"//idc.admin.tmall.com/open.json?businessName=tmallchaoliujie&dataName=topics&pageSize=5",tfxt:"//delta.taobao.com/recommend.htm?appId=20140928777"},storageKey:{LAST_SHOW_BIG_TIME:"mui/app-guide/model/LastShowBigTime",LAST_CLOSE_TIME:"mui/app-guide/model/LastCloseTime"},count:5,showInterval:864e5,day1111Start:14156352e5,day1111End:14157216e5,colorTypeList:o(["color-1","color-2","color-3","color-4","color-5"])};return e});KISSY.add("mui/app-guide/model",function(e,t,n,i,o){var a=new i;var r={getLastShowBigTime:function(e){return a.get({k:o.storageKey.LAST_SHOW_BIG_TIME,success:e})},setLastShowBigTime:function(e,t){e=e||(new Date).getTime();a.set({k:o.storageKey.LAST_SHOW_BIG_TIME,v:e,success:t})},isCanShowBigHead:function(e){r.getLastShowBigTime(function(t){t=t||0;var n=(new Date).getTime();var i=n>=o.day1111Start&&n<o.day1111End;e(n-t>o.showInterval&&!i)})},isCanShowSmallHead:function(e){r.getLastCloseTime(function(t){t=new Date(+t);if(!t.getTime()){e(true);return}var n=(new Date).getTime();t.setHours(0);t.setMinutes(0);t.setSeconds(0);t.setMilliseconds(0);e(n-t>o.showInterval)})},getLastCloseTime:function(e){return a.get({k:o.storageKey.LAST_CLOSE_TIME,success:e})},setLastCloseTime:function(e,t){e=e||(new Date).getTime();a.set({k:o.storageKey.LAST_CLOSE_TIME,v:e,success:t})},getListFromCLJ:function(){return new t({type:"get",url:o.url.clj,dataType:"jsonp"}).then(function(e){e=e[0];if(typeof e==="string"){e=n.parse(e)}if(!e.success){throw new Error("request clj failed")}return e.data})},getListFromTFXT:function(){return new t({type:"get",url:o.url.tfxt,dataType:"jsonp"}).then(function(e){e=e[0];if(typeof e==="string"){e=n.parse(e)}if(!e||!e.data){throw new Error("request tfxt failed")}return e.data}).then(function(e){return e},function(){return[]})}};return r},{requires:["io","json","mui/storage","mui/app-guide/config"]});KISSY.add("mui/app-guide/tpl",function(e,t){var i=['<div class="j_AppGuider app-guider {{type}}">','<div class="channel-con">',"{{#each channel}}",'<a data-click="true" class="channel {{colorType}}" href="javascript:void(0);">','<img class="chn-pic" src="{{img}}"  />','<div class="chn-shelter j_ChnShelter"></div>','<div class="chn-context j_ChnContext">{{text}}</div>',"</a>","{{/each}}","</div>",'<div class="download-con">','<div class="context-hidden">\u8fd9\u4e9b\u7cbe\u5f69\u5185\u5bb9\uff0c\u5c31\u5728</div>','<div data-click="true" class="app-download"></div>',"</div>",'<div data-click="true" class="close"></div>',"</div>"].join("");return new t(i)},{requires:["xtemplate"]});