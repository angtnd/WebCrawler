/*! imslib.js 1.3.0+2b465c7 */

!function(a){a.adobeid=function(a){"use strict";var b;return"object"==typeof window.adobeid?b=window.adobeid:window.opener&&window.opener.adobeid?b=window.opener.adobeid:(b=window.adobeid={},a.logErrorToConsoleInDebugMode("Missing window.adobeid, falling back to an empty object")),b},a.alertMessages=function(){"use strict";return{dev:{adobeid:"Please declare the adobeid variable before loading the Javascript file for the IMS SDK",both_modal_and_redirect:"Error: you can't have both adobeid.uses_modal_mode and adobeid.uses_redirect_mode set to true.",client_id_missing:"Error: the ClientID is missing.",api_calls_only_https:"Error: the API calls must be made only through HTTPS.",mandatory_sign_in_only_in_redirect:"is_mandatory_sign_in only works in full web redirect mode.",scope_doesnt_ask_for_userId_from_profile:"The provided scopes don't ask for the userId from the user's profile",client_id_missing_from_query:'Please add the "#client_id#" to the comma separated list that is the client_id query parameter',load_the_sdk_only_once:"Please load the Javascript SDK only once."},user:{allow_pop_up_window:"The browser's pop-up blocker has stopped a window from opening. To be able to sign-in, please use the browser's UI (in the address bar) to allow the window to be opened. Thank you.",adobeid:"Please declare the adobeid variable before loading the Javascript file for the IMS SDK",api_calls_only_https:"Error: the API calls must be made only through HTTPS.",both_modal_and_redirect:"Error: you can't have both adobeid.uses_modal_mode and adobeid.uses_redirect_mode set to true.",client_id_missing:"Error: the ClientID is missing.",client_id_missing_from_query:'Please add the "#client_id#" to the comma separated list that is the client_id query parameter',load_the_sdk_only_once:"Please load the Javascript SDK only once.",mandatory_sign_in_only_in_redirect:"is_mandatory_sign_in only works in full web redirect mode.",scope_doesnt_ask_for_userId_from_profile:"The provided scopes don't ask for the userId from the user's profile",network_error:"A network error has occurred. Are you connected to the internet?"}}},a.config=function(b,c,d){"use strict";function e(){var a=d.getThisScriptSrc(),b=/\bclient_id=([^&]+)\b/.exec(a);return b?b[1].split(","):[]}function f(){var a=d.getThisScriptSrc(),b=/\blocale=([^&]+)\b/.exec(a);return b?b[1]:""}function g(){return c.client_id?c.client_id instanceof Array?c.client_id[0]:c.client_id:(d.logToConsoleInDebugMode("Missing window.adobeid.client_id. Falling back to client_id from url. Please add client_id to window.aodbeid"),e()[0])}function h(){return c.locale?c.locale:(d.logToConsoleInDebugMode("Missing window.adobeid.locale. Falling back to locale from url. Please add locale to window.aodbeid"),f())}var i=e();return i&&0!==i.length||(i=c.client_id),{sloEnabled:!0,refreshSsoCookiesEnabled:!1,sunbreakScope:"acct_mgmt_webui",sunbreakScopeExpanded:"acct_mgmt_api,gnav,update_profile.address.mail_to,update_profile.dob,update_profile.email,update_profile.first_name,update_profile.industry,update_profile.job_function,update_profile.job_title,update_profile.last_name,update_profile.mrktPerm,update_profile.password,update_profile.phoneNumber,update_profile.phonetic_name,update_profile.preferred_languages,update_profile.screen_name,update_profile.secondary_email",locale:h(),client_id:g(),api:a.config.$$api(b,i)}},a.config.$$api=function(a,b){"use strict";b instanceof Array||(b=[b]);var c={version:{v1:"v1"}};for(var d in a)if(a.hasOwnProperty(d)){var e=a[d],f={name:e.name,endpoint:{}};c[d]=f;for(var g=0,h=b.length;h>g;++g){var i=b[g];f.endpoint[i]=e.endpoint}}return c},a.events=function(a){"use strict";var b=function(){var b={};this.addEventListener=function(a,c){var d=b[a]||[];b[a]=d,d.push(c)},this.dispatchEvent=function(c,d){var e=b[c];if(e)for(var f={type:c,data:d},g=0,h=e.length;h>g;++g)a.callIfFunction(e[g],null,[f])}};return{EventTarget:b}},a.http=function(b,c){"use strict";function d(a,c,d,f){/^https:\/\//i.test(a)||/^http:\/\/[\w-]+.(corp|eur).adobe.com/i.test(a)?e?e.get(a,c).fail(d):"jsonp"===f?g.get(a,c,d):h.get(a,c,d):b.logErrorToConsoleInDebugMode("API calls outside the corp network must be made over https")}var e=null;c&&c.onLoad(function(a){e=a.jQuery});var f="_adobeIMSJSONPCallbacks",g=a.http.$$jsonp(b,f),h=a.http.$$xhr();return{get:d}},a.http.$$jsonp=function(a,b){"use strict";function c(){return window[b]||(window[b]={}),window[b]}function d(a){return"window."+b+"."+a}function e(b,e,f){var g=Math.random().toString();g="_"+g.substring(g.indexOf(".")+1);var h=c();h[g]=function(b){a.isDebugMode&&a.logToConsole("api call response: "+JSON.stringify(b)),e.call(null,b),a.removeKeyFromObject(h,g)},b+=(a.String_contains(b,"?")?"&":"?")+"callback="+d(g);var i=document.createElement("script");i.src=b,a.addEventListener(i,"load",function(){a.getDocumentHead().removeChild(i)}),a.addEventListener(i,"error",function(){a.getDocumentHead().removeChild(i),"function"==typeof f&&f(b)}),a.getDocumentHead().appendChild(i)}var f={get:e};return f},a.http.$$xhr=function(){"use strict";function a(a,b,c){var d=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");d.onreadystatechange=function(){4===d.readyState&&200===d.status&&b.call(null,d.responseText)},"function"==typeof c&&(d.onerror=function(){c(a)}),d.open("GET",a,!0),d.send()}return{get:a}},a.imsApis=function(a,b,c,d,e){"use strict";function f(a){u=a}function g(){"function"==typeof u&&u.apply(null,arguments)}function h(a){if(!(a&&a.name&&c.api_parameters))return{};for(var d in c.api_parameters)if(b.String_contains(a.name,d))return c.api_parameters[d];return{}}function i(a,b){if(b&&b.client_id)return b.client_id;var d=h(a);return d&&d.client_id?d.client_id:c.client_id?c.client_id instanceof Array?c.client_id[0]:c.client_id:e}function j(a,d){var e="AdobeID,openid";if(d&&d.scope)e=d.scope;else{var f=h(a);f&&f.scope?e=f.scope:c.scope&&(e=c.scope)}return b.String_withoutWhitespaces(e)}function k(a,c,d){var e=d.client_id||i(),f=a.endpoint[e];if("string"!=typeof f)return b.logErrorToConsoleInDebugMode("Missing URL for "+a.name+" for client_id"+e),"";c&&(f+="/"+c);var g=!0;for(var h in d){var j=d[h];void 0!==j&&(f+=(g?"?":"&")+h+"="+encodeURIComponent("object"==typeof j?JSON.stringify(j):j),g=!1)}return b.assert(f.length<2083,"this url is too long for visitors using IE<=8:\n"+f),f}function l(c,d,e,f,h){b.isDebugMode&&b.logToConsole("#api# api call with #params# parameters".replace("#api#",c.name).replace("#params#",JSON.stringify(e))),a.get(k(c,d,e),f,h||g,"jsonp")}function m(a,c,e){var f=b.applyExtraApiParameters(h(d.validate_token),{token:a.access_token,client_id:a.client_id,"typeof":"access_token"});l(d.validate_token,null,f,c,e)}function n(a,c,e){var f=b.applyExtraApiParameters(h(d.logout_token),{access_token:a});l(d.logout_token,null,f,c,e)}function o(a,c,e){var f=b.applyExtraApiParameters(h(d.profile),{bearer_token:a});l(d.profile,null,f,c,e)}function p(a,c){var e=b.applyExtraApiParameters({client_id:i()},h(d.check_status));l(d.check_status,null,e,a,c)}function q(a,c,e){a=b.applyExtraApiParameters({client_id:i(),scope:j()},h(d.check),a),l(d.check,null,a,c,e)}function r(a){return k(d.avatar,null,{})+"/"+a}function s(a){return a=b.applyExtraApiParameters({response_type:"token",client_id:i(),scope:j()},h(d.authorize),a),k(d.authorize,null,a)}function t(a){return a=b.applyExtraApiParameters(h(d.logout),a),k(d.logout,null,a)}var u,v={makeApiCall:l,getUrlForApiCall:k,validateToken:m,checkStatus:p,checkToken:q,getProfile:o,logoutToken:n,getAvatarUrl:r,getAuthorizeUrl:s,getLogoutUrl:t,apiEndpoints:d,getApiParameters:h,getClientId:i,getScope:j,setGlobalErrorHandler:f};return v},a.adobeIMS=function(a,b,c,d,e,f,g,h,i){"use strict";function j(){var d=this;this.adobeid=b,!c.isDebugMode&&this.adobeid.uses_debug_mode&&(c.isDebugMode=!0),this._accessTokensInfos={},this._profile=null,this._is_already_attached_to_ui=!1,this._last_ui_update={_any_update_so_far:!1,_accessTokensInfos:{},_profile:null,update:function(){this._any_update_so_far=!0,this._accessTokensInfos=c.cloneObject(d._accessTokensInfos),this._profile=c.cloneObject(d._profile)},areThereUIUpdatesToPerformForAccessTokens:function(){return this._any_update_so_far?!c.equals(this._accessTokensInfos,d._accessTokensInfos):!0},areThereUIUpdatesToPerformForProfile:function(){return this._any_update_so_far?!c.equals(this._profile,d._profile):!0},areThereUIUpdatesToPerform:function(){return this.areThereUIUpdatesToPerformForProfile()||this.areThereUIUpdatesToPerformForAccessTokens()}},a.setGlobalErrorHandler(function(){d._onApiError.apply(d,arguments)})}function k(a,d){try{c.callIfFunction(b[a],b,d)}catch(e){this._onError(this.errors.jsException.setException(e,"adobeid."+a))}}var l="adobeid_ims_access_token",m="/",n="adobeid_ims_profile",o="adobeid_cookie_expires_at",p="from_ims",q=p+"=true",r="rctx",s="redirectims.html",t="ims_modal_window",u={sign_in:{width:600,height:700},sign_up:{width:600,height:850},sign_out:{width:320,height:240},jump:{width:600,height:850},any:{width:800,height:600}},v=null;if(window.adobeIMS)return c.logErrorToConsoleInDebugMode("adobeIMS already exists. Have you loaded the file twice?"),null;var w={PROFILE:"profile",ACCESS_TOKEN:"accesstoken",ACCESS_TOKEN_EXPIRED:"accesstokenexpired",READY:"ready",ERROR:"error"},x=new g.EventTarget,y={Events:w,addEventListener:function(a,b){x.addEventListener(a,b)},IMSAPIs:{},errors:{network:{name:"networkError",userMessage:"Network error"},fromApiCallRedirect:{name:"fromApiCallRedirectError",userMessage:"",setMessage:function(a){return this.userMessage=a,this}},avatarPicture:{name:"avatarPictureError",userMessage:"current scopes won't retrieve the user_id"},jsException:{name:"jsExceptionError",message:"",exception:null,setException:function(a,b){return this.exception=a,this.message=b||"",this}}},getUrlForApiCall:function(b,c,d){return 2===arguments.length&&(d=arguments[1],c=null),a.getUrlForApiCall(b,c,d)},makeApiCall:function(b,c,d,e){return 3===arguments.length&&(e=arguments[2],d=arguments[1],c=null),a.makeApiCall(b,c,d,e)},_onApiError:function(a){var b=c.cloneObject(this.errors.network);b.debug={url:a,withJQuery:!!v},this._onError(b)},getUserProfile:function(){return this._profile},getUserPictureURL:function(){return this._profile?this._profile.userId?a.getAvatarUrl(this._profile.userId):(this._onError(this.errors.avatarPicture),""):""},getAccessTokenInfo:function(a,b,c){var d=this.getAccessTokenSessionStorageKey(a,b,c),e=this._accessTokensInfos[d];return e?f.getItem(d)?e:(this._clearCredentials({access_token:e.access_token}),null):null},getAccessToken:function(a,b,c){var d=this.getAccessTokenInfo(a,b,c);return d?d.access_token:null},getAccessTokenSessionStorageKey:function(a,b,c){return[l,b||this.getClientID(),Boolean(a),c||this.getScope()].join(m)},getKeyForAccessToken:function(a){for(var b in this._accessTokensInfos)if(a===this._accessTokensInfos[b].access_token)return b;return c.assert(!1,"unknown access_token for key: "+b),null},_isAccessTokenInfoUsable:function(a){return a&&"string"==typeof a.access_token&&"string"==typeof a.client_id&&this.isKnownClientID(a.client_id)&&"string"==typeof a.scope&&"boolean"==typeof a.isReAuthentication&&"number"==typeof a.expires_in&&"number"==typeof a.expiresAtMilliseconds&&c.Date_asMilliseconds()<a.expiresAtMilliseconds},loadFromStorage:function(){this._accessTokensInfos={};for(var a in f.keys?f.keys():f)if(c.String_startsWith(a,l))try{var b=c.parseJSON(f.getItem(a));if(!this.isKnownClientID(b.client_id))continue;this._isAccessTokenInfoUsable(b)?this._accessTokensInfos[a]=b:(c.logToConsoleInDebugMode("unusable access token info: "+f.getItem(a)),f.removeItem(a))}catch(d){f.removeItem(a)}this._profile=c.parseJSON(f.getItem(n))},hasTokenButItHasExpired:function(a,b,d){var e=this.getAccessTokenInfo(a,b,d);return e&&c.Date_asMilliseconds()>e.expiresAtMilliseconds?e:void 0},isSignedInUser:function(a,b,d){var e=this.getAccessTokenInfo(a,b,d);return e&&c.Date_asMilliseconds()<e.expiresAtMilliseconds?e:void 0},signIn:function(b,d){this.contextToBePassedOnRedirect=d;var e=c.applyExtraApiParameters({locale:this.getLocale()},b);e.redirect_uri=this._getRedirectUri(i.api.authorize,e);var f=a.getAuthorizeUrl(e);this.isModal()&&this._callCallbacksToUpdateUI(),this._openWindow(f,"create_account"===e.idp_flow?u.sign_up:u.sign_in)},reAuthenticate:function(a,b){var d=c.applyExtraApiParameters({reauth:"check",puser:this._profile&&this._profile.email?this._profile.email:void 0,eu:this._profile&&this._profile.email?"true":void 0},a);this.signIn(d,b)},isReAuthentication:function(a){return a&&a.reauth},updateRedirectUriForReAuthentication:function(a,b){return"string"==typeof a&&this.isReAuthentication(b)?(c.String_contains(a,"reauth=")||(a=a+"&reauth="+b.reauth),a):a},getContextFromRedirectForAccessToken:function(a){if(this.contextPassedFromRedirect&&this.contextPassedFromRedirect.access_token===a){var b=this.contextPassedFromRedirect.context;return this.contextPassedFromRedirect=null,b}return null},signUp:function(a,b){this.isModal()&&this._callCallbacksToUpdateUI(),this.signIn(c.applyExtraApiParameters({idp_flow:"create_account"},a),b)},_invalidateTokens:function(b,d){var e=this,f=b.length;f?c.each(b,function(b,g){a.logoutToken(e._accessTokensInfos[g].access_token,function(){--f,0===f&&c.callIfFunction(d)})}):c.callIfFunction(d)},signOut:function(b){function d(d){if(!d)return void e._clearCredentials({updateUI:!0});var f=c.applyExtraApiParameters(e.getAdobeIdApiParametersForApi(i.api.logout),b);e.isModal()&&f.redirect_uri&&e.switchToRedirectMode();var g=a.getLogoutUrl(c.applyExtraApiParameters({access_token:d.access_token,redirect_uri:e._getRedirectUri(e.config.api.logout,b)},f));e._clearCredentials({updateUI:!0}),e._openWindow(g,u.sign_out)}var e=this,f=c.Object_keys(this._accessTokensInfos);if(f.length){var g=this._accessTokensInfos[f.pop()];this._invalidateTokens(f,function(){d(g)})}else e._clearCredentials({updateUI:!0})},switchToRedirectMode:function(){this.adobeid.uses_modal_mode=!1,this.adobeid.uses_redirect_mode=!0},switchToModalMode:function(){this.adobeid.uses_modal_mode=!0,this.adobeid.uses_redirect_mode=!1},_clearCredentials:function(a){var b;if(a&&a.access_token)b=this.getKeyForAccessToken(a.access_token),f.removeItem(b),c.removeKeyFromObject(this._accessTokensInfos,b);else{for(b in this._accessTokensInfos)c.String_startsWith(b,l)&&f.removeItem(b);this._accessTokensInfos={},f.removeItem(n),this._profile=null,f.removeItem(o),this._clearTimerTestSSOCookieWillExpire()}a&&a.updateUI===!0&&this._callCallbacksToUpdateUI(a)},_callCallbacksToUpdateUI:function(a){if(this._last_ui_update.areThereUIUpdatesToPerform()){var b=c.cloneObject(this._last_ui_update);if(this._last_ui_update.update(),b.areThereUIUpdatesToPerformForProfile()&&x.dispatchEvent(w.PROFILE,{profile:this._profile}),b.areThereUIUpdatesToPerformForAccessTokens())if(a&&a.access_token){var d=this._accessTokensInfos[this.getKeyForAccessToken(a.access_token)];x.dispatchEvent(w.ACCESS_TOKEN,{accessTokenInfo:d})}else for(var e in this._accessTokensInfos)c.equals(this._accessTokensInfos[e],b._accessTokensInfos[e])||x.dispatchEvent(w.ACCESS_TOKEN,{accessTokenInfo:this._accessTokensInfos[e]})}},_onReady:function(){this.onReadyAlreadyCalled||(this.onReadyAlreadyCalled=!0,this._callCallbacksToUpdateUI(),x.dispatchEvent(w.READY))},isReady:function(){return!!this.onReadyAlreadyCalled},_onError:function(a){x.dispatchEvent(w.ERROR,{error:a}),"function"!=typeof this.adobeid.onError&&("string"==typeof a.userMessage?c.logToConsoleInDebugMode(a.userMessage):c.logErrorToConsoleInDebugMode("unhandled javascript error: "+JSON.stringify(a)),a.debug&&c.logToConsoleInDebugMode(JSON.stringify(a.debug)))},_update_url_ims_api:function(){if(this.adobeid.target_env){var a={replaceWhat:/https?:\/\/adobeid-na1-(dev|qa|stg)\d\.services\.adobe\.com/i,replaceWith:"https://adobeid-na1-"+this.adobeid.target_env+".services.adobe.com"},b={replaceWhat:/https?:\/\/ims-na1-(dev|qa|stg)\d\.adobelogin\.com/i,replaceWith:"https://ims-na1-"+this.adobeid.target_env+".adobelogin.com"},d=/https?:\/\/\S*\.corp\.adobe\.com(:\d*)?/i;for(var e in i.api){var f=i.api[e];if(!c.isEmptyObject(f.endpoint))for(var g in f.endpoint){var h=d.test(f.endpoint[g]);if(h){var j=c.String_contains(f.name,"check")||c.String_contains(f.name,"logout")?a:b;f.endpoint[g]=f.endpoint[g].replace(d,j.replaceWith)}else f.endpoint[g]=f.endpoint[g].replace(a.replaceWhat,a.replaceWith).replace(b.replaceWhat,b.replaceWith)}}c.isDebugMode&&(c.logToConsole("target_env = "+this.adobeid.target_env),c.logToConsole("authorize = "+i.api.authorize.endpoint[this.getClientID(i.api.authorize)]),c.logToConsole("check = "+i.api.check.endpoint[this.getClientID(i.api.check)]))}},_initialize:function(){var a=this;x.addEventListener(w.PROFILE,function(b){k.call(a,"onProfile",[b.data.profile])}),x.addEventListener(w.ACCESS_TOKEN,function(b){k.call(a,"onAccessToken",[b.data.accessTokenInfo.access_token,b.data.accessTokenInfo])}),x.addEventListener(w.READY,function(){k.call(a,"onReady")}),x.addEventListener(w.ERROR,function(a){c.callIfFunction(b.onError,b,[a.data.error])}),this._update_url_ims_api();var d=function(){a.isMandatorySignIn()&&!a.isSignedInUser()&&a.signIn()},e=function(){var b=function(){d(),a._callCallbacksToUpdateUI(),a._onReady()};a.isSingleLogOutEnabled()||!a.isSignedInUser()?a.signInBasedOnSingleSignOnSSO(b):b()};this._signInWhenRedirectedBackFromIMS(function(){a._isFinalRedirectPageInModalMode()?window.opener&&(window.opener.adobeIMS._importDataFromModalWindow(a),c.closeWindow()):(a.loadFromStorage(),a.hasJustReturnedFromAuthorize?this.isSignedInUser()?a._testAccessTokensAreStillValid():a.signInBasedOnSingleSignOnSSO(function(){a._testAccessTokensAreStillValid()}):a.isSignedInUser(!0)?a.testAccessTokenIsStillValid(a.getAccessToken(!0),e):e())})},_signInWhenRedirectedBackFromIMS:function(a){var b=this,e=c.getHashFromURL().substring(1);e=e.replace("%23expires_in","#expires_in").replace("%23error","#error").replace("?error","#error").replace("#","&");var f=c.getQueryParamsAsMap(e),g=f.access_token,h=f.api;h===i.api.authorize.name&&c.assert(g,"the authorize api must return an access_token");var j=Boolean(f.reauth),k=f.client_id||this.getClientID(),l=f.scope||this.getScope(),m=f.expires_in,n="true"===f[p],o=f.error,q=f[r];this.contextPassedFromRedirect=q?{context:c.parseJSON(q),access_token:g}:null;var s=g&&m||n&&h===i.api.logout.name||o&&n;return s?(d.setHash(f.old_hash||""),void(g?(this.hasJustReturnedFromAuthorize=!0,this._setAccessTokenAndGetProfile(g,j,k,l,m,null,function(){b.validateSSOCookieLifetime(g,a)})):(this._accessTokensInfos={},this._profile=null,o&&this._onError(this.errors.fromApiCallRedirect.setMessage(o)),a.call(this)))):void a.call(this)},_setAccessTokenAndGetProfile:function(b,d,e,g,h,i,j){var k=this;h=Number(h);var l=i&&i.userId;if(this._removeAccessTokensIfDifferentUserId(l),c.isEmptyObject(this._accessTokensInfos)&&this.loadFromStorage(),!this.shouldAcceptTheToken(b,e,g,l,!0,d))return void c.callIfFunction(j,k);var m=this.getAccessTokenSessionStorageKey(d,e,g),n=c.Date_asMilliseconds();this._accessTokensInfos[m]={access_token:b,client_id:e,user_id:l,scope:g,expires_in:h,createdAtMilliseconds:n,expiresAtMilliseconds:n+h,isReAuthentication:d},f.setItem(m,JSON.stringify(this._accessTokensInfos[m])),this.onReadyAlreadyCalled&&this._callCallbacksToUpdateUI(),i?c.callIfFunction(j,k):a.getProfile(b,function(a){k.setProfile(a),c.callIfFunction(j,k)})},setProfile:function(a){a&&!a.error_flag&&(this._profile=a,a?(f.setItem(n,JSON.stringify(this._profile)),this._removeAccessTokensIfDifferentUserId(a.userId)):f.removeItem(n),this.onReadyAlreadyCalled&&this._callCallbacksToUpdateUI())},_removeAccessTokensIfDifferentUserId:function(a){if(a)for(var b in this._accessTokensInfos){var d=this._accessTokensInfos[b];d.user_id&&d.user_id!==a&&(this._clearCredentials({access_token:d.access_token,updateUI:!1}),c.isDebugMode&&c.logToConsole("remove token because of different user_id (isReAuthentication="+d.isReAuthentication+")"))}},_signInBasedOnStoredCredentials:function(a){this.loadFromStorage(),c.isEmptyObject(this._accessTokensInfos)?(this._clearCredentials(),c.callIfFunction(a,this)):this.hasJustReturnedFromAuthorize?(this.hasJustReturnedFromAuthorize=!1,c.callIfFunction(a)):this.testSingleLogOutSLO(a)},signInBasedOnSingleSignOnSSO:function(a){var b=this;this.acquireAccessToken(a,function(d){d.jump?(c.logToConsoleInDebugMode("jumping to "+d.jump),b._openWindow(d.jump,u.jump)):"ride_AdobeID_acct_evs"===d.error?(b._clearCredentials(),b.signIn()):"ride_AdobeID_acct_disabled"===d.error?b._invalidateTokens(c.Object_keys(b._accessTokensInfos),function(){b._clearCredentials({updateUI:!0}),b.signIn()}):(b._clearCredentials({updateUI:!0}),b.hasJustSingleLoggedOutSLO=!0,c.callIfFunction(a,b))})},acquireAccessToken:function(b,d){var e=this,f={client_id:a.getClientId(a.apiEndpoints.check),scope:a.getScope(a.apiEndpoints),locale:this.getLocale(),redirect_uri:this._getRedirectUri(a.apiEndpoints.check)};a.checkToken(f,function(a){if(a.error_flag||a.error||a.jump)return void d.call(null,a);var g=c.cloneObject(a);c.removeKeyFromObject(g,"access_token"),c.removeKeyFromObject(g,"expires_in"),c.removeKeyFromObject(g,"token_type"),e.setProfile(g),e._setAccessTokenAndGetProfile(a.access_token,!1,f.client_id,f.scope,a.expires_in,g,b)})},testSingleLogOutSLO:function(b){if(!this.isSingleLogOutEnabled())return void c.callIfFunction(b,this);var d=this;a.checkStatus(function(a){a.sso===!1&&a.remember_me===!1?(d._clearCredentials({updateUI:!0}),d.hasJustSingleLoggedOutSLO=!0,c.callIfFunction(b,d)):d.signInBasedOnSingleSignOnSSO(b)})},validateSSOCookieLifetime:function(a,b){c.callIfFunction(b,this)},_clearTimerTestSSOCookieWillExpire:function(){this._timerTestSSOCookieWillExpire&&(clearInterval(this._timerTestSSOCookieWillExpire),this._timerTestSSOCookieWillExpire=null)},shouldAcceptTheToken:function(a,b,d,e,f,g){var h=!0,j=[{shouldReject:f===!1,shouldLogToErrorConsole:!1,message:"access_token is invalid."},{shouldReject:f===!0&&e&&this._profile&&e!==this._profile.userId,shouldLogToErrorConsole:!1,message:"access_token was from another userId (isReAuthentication=#0).".replace("#0",g)},{shouldReject:f===!0&&!this.isKnownClientID(b),shouldLogToErrorConsole:!0,message:"the #0 client_id associated with the access token is not for a known client_id (#1).".replace("#0",b).replace("#1",Object.keys?Object.keys(i.api.authorize.endpoint).join(","):this.getClientID())},{shouldReject:f===!0&&!this.matchesTheRequiredScope(d),shouldLogToErrorConsole:!0,message:"the (#0) scope associated with the access token doesn't match the required scope (#1).".replace("#0",d).replace("#1",this.getScope())},{shouldReject:!a,shouldLogToErrorConsole:!0,message:"no access token."}];return c.each(j,function(a,b){b.shouldReject&&(h=!1,(b.shouldLogToErrorConsole?c.logErrorToConsoleInDebugMode:c.logToConsoleInDebugMode)("shouldAcceptTheToken: "+b.message))}),h},testAccessTokenIsStillValid:function(b,d){var e=this,f=this._accessTokensInfos[this.getKeyForAccessToken(b)];c.assert(f,"we need token information to validate it");var g=function(a){if(a.token&&e.shouldAcceptTheToken(b,a.token.client_id,a.token.scope,a.token.user_id,a.valid,f.isReAuthentication))d();else{c.logToConsoleInDebugMode("validate/token: access_token is invalid. removing."),e._clearCredentials({updateUI:e.onReadyAlreadyCalled,access_token:b});try{a.token&&e.isKnownClientID(a.token.client_id)&&e.matchesTheRequiredScope(a.token.scope)&&c.callIfFunction(e.adobeid.onAccessTokenHasExpired,e.adobeid,[b,f])}catch(g){e._onError(e.errors.jsException.setException(g,"adobeid.onAccessTokenHasExpired"))}f.isReAuthentication?d():e.signInBasedOnSingleSignOnSSO(function(){e.isSignedInUser()||e.isMandatorySignIn()&&e.signIn(),d()})}};f&&this.isKnownClientID(f.client_id)?a.validateToken(f,g):g({valid:!1})},_testAccessTokensAreStillValid:function(){var a,b=0;for(a in this._accessTokensInfos)++b;var c=this,d=function(){--b,0===b&&c._onReady()};for(a in this._accessTokensInfos)c.testAccessTokenIsStillValid(this._accessTokensInfos[a].access_token,d)},_importDataFromModalWindow:function(a){if(c.isEmptyObject(a._accessTokensInfos))this._clearCredentials({updateUI:!0});else{this.contextPassedFromRedirect=c.cloneObject(a.contextPassedFromRedirect),c.equals(a._profile,this._profile)||c.isEmptyObject(a._profile)||this.setProfile(c.cloneObject(a._profile));for(var b in a._accessTokensInfos)c.equals(a._accessTokensInfos[b],this._accessTokensInfos[b])||(this._accessTokensInfos[b]=c.cloneObject(a._accessTokensInfos[b]),f.setItem(b,JSON.stringify(this._accessTokensInfos[b])),this.validateSSOCookieLifetime(this._accessTokensInfos[b].access_token));this._callCallbacksToUpdateUI(),a.isSignedInUser(!0)&&!this.isSignedInUser(!1)&&this.signInBasedOnSingleSignOnSSO()}},_attachHandlersToUI:function(){c.logToConsoleInDebugMode("No-op: use the susiButtons module to automatically attach listeners to buttons")},_openWindow:function(a,b){if(this.isModal()){var e=Math.min(b&&b.width||u.any.width,screen.availWidth),f=Math.min(b&&b.height||u.any.height,screen.availHeight),g=parseInt((screen.availLeft?screen.availLeft:0)+Math.max(0,screen.availWidth-e)/2),h=parseInt((screen.availTop?screen.availTop:0)+Math.max(0,screen.availHeight-f)/2),i=c.openPopup(a,t,"width="+e+",height="+f+",left="+g+",top="+h+",toolbar=no,menubar=no");if(!i)return;"function"==typeof i.focus&&i.focus()}else d.setHref(a,this.isMandatorySignIn());this.contextToBePassedOnRedirect=null},isModal:function(){return this._isFinalRedirectPageInModalMode()?!0:this.adobeid.uses_modal_mode===!0&&this.adobeid.uses_redirect_mode===!0?(c.logErrorToConsoleInDebugMode("redirect mode and modal mode both enabled"),!0):"boolean"==typeof this.adobeid.uses_modal_mode?this.adobeid.uses_modal_mode:this.adobeid.uses_redirect_mode===!1},_isFinalRedirectPageInModalMode:function(){return c.String_contains(d.getHref(),s)&&window.opener&&window.opener!==window},getAdobeIdApiParametersForApi:function(b){return a.getApiParameters(b)},getLocale:function(){return this.adobeid.locale||i.locale},sunbreakHack:function(a){return a.replace(i.sunbreakScope,i.sunbreakScopeExpanded)},matchesTheRequiredScope:function(a){if(c.assert(c.String_hasContent(a),"scopeToValidate must be a non empty string for matchesTheRequiredScope"))return!1;var b=this.sunbreakHack(c.String_withoutWhitespaces(a)).split(","),d=!0;return c.each(this.sunbreakHack(this.getScope()).split(","),function(a,e){return c.existsInArray(e,b)?void 0:(d=!1,!1)}),d},getScope:function(b,c){return a.getScope(b,c)},isKnownClientID:function(a){return a in i.api.authorize.endpoint},getClientID:function(b,c){return a.getClientId(b,c)},isMandatorySignIn:function(){return this.adobeid.is_mandatory_sign_in===!0&&this.isModal()?(c.logErrorToConsoleInDebugMode("is_mandatory_sign_in can be enabled only in redirect mode"),!1):"boolean"==typeof this.adobeid.is_mandatory_sign_in?this.adobeid.is_mandatory_sign_in:!1},isSingleLogOutEnabled:function(){return"boolean"==typeof this.adobeid.uses_single_log_out?this.adobeid.uses_single_log_out:i.sloEnabled},isRefreshSSOCookiesEnabled:function(){return"boolean"==typeof this.adobeid.uses_refresh_sso_cookies?this.adobeid.uses_refresh_sso_cookies:i.refreshSsoCookiesEnabled},_getRedirectUri:function(a,b){var e="",f=c.applyExtraApiParameters(this.getAdobeIdApiParametersForApi(a),b);if(this.isModal())e=c.getBasePath(d.getHref())+s+"#"+q;else{e=f.redirect_uri?f.redirect_uri:this.adobeid.redirect_uri?this.adobeid.redirect_uri:d.getHref(),c.assert(!c.String_contains(e,p),"the redirect_uri mustn't already contain #from_ims");var g=c.getHashFromURL(e),h=e;g&&(h=h.substring(0,h.length-g.length)),e=h+"#"+q+"&old_hash="+encodeURIComponent(g)}return f.client_id&&(e+="&client_id="+encodeURIComponent(f.client_id)),f.scope&&(e+="&scope="+encodeURIComponent(f.scope)),a&&a.name&&(e+="&api="+encodeURIComponent(a.name)),e=this.updateRedirectUriForReAuthentication(e,f),c.isEmptyObject(this.contextToBePassedOnRedirect)||(e+="&"+r+"="+encodeURIComponent(JSON.stringify(this.contextToBePassedOnRedirect))),e},_ajaxGet:function(a,b,d){var f=this,g=function(a){b.call(f,a)},h=function(){var b=c.cloneObject(f.errors.network);b.debug={url:a,withJQuery:!!v},f._onError(b)};e.get(a,g,h,d)},_handleTheJQueryDependency:function(){var a=this;h.onLoad(function(b){v=b.jQuery,a._initialize()})},_waitForDOMContentLoaded:function(){var a=this,b=!1,d=function(){b||(b=!0,a._handleTheJQueryDependency())};"complete"===document.readyState||"loaded"===document.readyState?d.call():(c.addEventListener(document,"DOMContentLoaded",d),c.addEventListener(window,"load",d))}};return j.call(y),y},a.location=function(){"use strict";function a(){return window.location.href}function b(a,b){b?window.location.replace(a):window.location.href=a}function c(){return window.location.hash}function d(a){window.location.hash=a}return{getHref:a,setHref:b,getHash:c,setHash:d}},a.optimizations=function(b,c){"use strict";if(b=b||{},b.enable!==!1)for(var d in a.optimizations)a.optimizations.hasOwnProperty(d)&&"function"==typeof a.optimizations[d]&&a.optimizations[d].call(null,b,c)},a.optimizations.$$prefetchSuSi=function(a,b){"use strict";if(a.prefetchSuSi!==!1){var c=function(){if(!b.isSignedInUser()){var a=b.getUrlForApiCall(b.config.api.authorize,{client_id:b.getClientID()}),c=/^(https?:\/\/.+?)\//.exec(a)[1],d=c+"/favicon.ico?cache_bust="+Math.random().toString(16).slice(2),e=document.createElement("link");e.setAttribute("rel","prefetch"),e.setAttribute("href",d),document.getElementsByTagName("head")[0].appendChild(e)}};b.isReady()?c():b.addEventListener(b.Events.READY,c)}},a.storage=function(b){"use strict";var c=null;try{c=window.sessionStorage}catch(d){b.isDebugMode&&b.logToConsole("sessionStorage disabled")}if(a.storage.$$isPolyfillNeeded(c)){b.isDebugMode&&b.logToConsole("isStoragePolyfillNeeded");var e=a.storage.$$polyfill(b);c=new e,b.assert(!a.storage.$$isPolyfillNeeded(c),"isLocalStoragePolyfillNeeded")}return c},a.storage.$$isPolyfillNeeded=function(a){"use strict";if(null===a||"undefined"==typeof a)return!0;try{return a.setItem("isStoragePolyfillNeeded",!0),"true"!==a.getItem("isStoragePolyfillNeeded")?!0:(a.removeItem("isStoragePolyfillNeeded"),!1)}catch(b){return!0}},a.storage.$$polyfill=function(a){"use strict";var b=function(){var b={};return{length:0,clear:function(){b={},this.length=0},getItem:function(a){var c=b[a];return"undefined"==typeof c?null:c},keys:function(){return b},removeItem:function(c){b.hasOwnProperty(c)&&(a.removeKeyFromObject(b,c),--this.length)},setItem:function(a,c){b.hasOwnProperty(a)||++this.length,b[a]=String(c)}}};return b},a.susiButtons=function(a,b,c){"use strict";function d(a){return document.querySelectorAll?document.querySelectorAll(a):g?g(a):[]}function e(a,c,e){var f=d(h.replace("%action%",a)),g=function(){c.call(e)};b.each(f,function(a,c){b.addEventListener(c,"click",g)})}function f(){var c=function(){i||(i=!0,e("signin",a.signIn,a),e("signup",a.signUp,a),e("signout",a.signOut,a),e("reauthenticate",a.reAuthenticate,a))};"complete"===window.document.readyState||"loaded"===window.document.readyState?c():(b.addEventListener(window.document,"DOMContentLoaded",c),b.addEventListener(window,"load",c))}var g;c&&c.onLoad(function(a){g=a.jQuery});var h='[data-adobeid-action="%action%"]',i=!1;return{attachListeners:f}},a.utils=function(a,b){"use strict";function c(a,b){if(H&&H.each)H.each.call(H,a,b);else for(var c=0;c<a.length&&b.call(a[c],c,a[c])!==!1;++c);}function d(a){return H?H(a)[0]:document.querySelector?document.querySelector(a):null}function e(){var a=d('script[src*="imslib.min.js"]');return a||(a=d('script[src*="imslib.js"]')),a?a.src:""}function f(a){window.console&&"function"==typeof window.console.log&&window.console.log("imslib.js: "+a)}function g(a){J&&f(a)}function h(a){J&&window.console&&"function"==typeof window.console.error&&window.console.error("imslib.js: "+a);

}function i(a,b,c){return b>0?a.substring(0,b)+c+a.substring(b,a.length):c+a}function j(a,b){var c,d=-1;do c=d,d=a.indexOf(b,d+1);while(-1!==d);return c}function k(a,b){return-1!==a.indexOf(b)}function l(a,b){return 0===a.indexOf(b)}function m(a){return"string"==typeof a&&a.length>0}function n(a){return a.replace(/\s/g,"")}function o(a,b){return a||h("assert: "+b),!a}function p(a){return a||(a=new Date),o(a instanceof Date,"Date_asMilliseconds: provided date is not a Date.")?0:Number(a)}function q(a){return a&&"function"==typeof a}function r(a,b,c){return q(a)?a.apply(b,c||[]):void 0}function s(a,b){try{delete a[b]}catch(c){a[b]=void 0}}function t(a,b){if(null===a)return null===b;if(null===b)return null===a;if(typeof a!=typeof b)return!1;if(a instanceof Array){if(!(b instanceof Array)||a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(!t(a[c],b[c]))return!1;return!0}if("object"==typeof a){var d;for(d in a)if(!(d in b&&t(a[d],b[d])))return!1;for(d in b)if(!(d in a))return!1;return!0}return a===b}function u(a){if(null===a)return null;if("object"!=typeof a)return a;var b;if(a instanceof Array)return b=[],c(a,function(a,c){b.push(u(c))}),o(t(a,b),"cloned object has failed for "+JSON.stringify(a)),b;b={};for(var d in a)b[d]=u(a[d]);return o(t(a,b),"cloned object has failed for "+JSON.stringify(a)),b}function v(a){return!a||t(a,{})}function w(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}function x(){if(document.head)return document.head;var a=document.getElementsByTagName("head");return a&&a.length?a[0]:null}function y(a){return a.substring(0,j(a,"/")+1)}function z(a){a||(a=b.getHref());var c=a.indexOf("#");return-1!==c?a.substring(c):""}function A(a){a=a.replace(/^(#|\?|&)/,"");var b={};return c(a.split("&"),function(a,c){var d=c.split("=");b[d[0]]=decodeURIComponent(d[1])}),b}function B(a,b){for(var c=0;c<b.length;++c)if(t(b[c],a))return!0;return!1}function C(a,b,c){H?H(a).on(b,c):a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function D(a){return H?H.parseJSON(a):JSON.parse(a)}function E(a){for(var b=u(a),c=1;c<arguments.length;++c){var d=arguments[c];if("object"==typeof d)for(var e in d){var f=d[e];"undefined"!=typeof f?b[e]="object"!=typeof f?f:E(b[e]||{},f):s(b,e)}}return b}function F(a,b,c){return window.open(a,b,c)}function G(){window.close()}var H=null;a&&a.onLoad(function(a){H=a.jQuery});var I=e(),J=I.match(/^http(s:\/\/ims-na1-(dev|qa)\d\.adobelogin\.com)|(s?:\/\/[\w-]+\.(corp|eur)\.adobe\.com)|(s:\/\/adobeid-na1-(dev|qa)\d\.services\.adobe\.com)/i);J&&(I&&f("loaded from "+I),f("isDebugMode"));var K={isDebugMode:J,logToConsole:f,logToConsoleInDebugMode:g,logErrorToConsoleInDebugMode:h,assert:o,String_insert:i,String_lastIndexOf:j,String_contains:k,String_startsWith:l,String_hasContent:m,String_withoutWhitespaces:n,Date_asMilliseconds:p,isFunction:q,callIfFunction:r,removeKeyFromObject:s,cloneObject:u,equals:t,isEmptyObject:v,Object_keys:w,getDocumentHead:x,getBasePath:y,getHashFromURL:z,getQueryParamsAsMap:A,addEventListener:C,each:c,existsInArray:B,parseJSON:D,applyExtraApiParameters:E,openPopup:F,closeWindow:G,getThisScriptSrc:e};return K},a.vendors=function(){"use strict";var b={},c={jQuery:"https://static.adobelogin.com/renga-idprovider/resources/js/jquery-1.11.1.min.js",json:"https://static.adobelogin.com/renga-idprovider/resources/js/json2-min.js"},d=a.vendors.$$neededVendors(),e=function(a,b){var c=document.createElement("script");c.type="text/javascript",c.src=a,"function"==typeof b&&(c.onload=function(){window.setTimeout(b,1)});var d=document.head||document.getElementsByTagName("head")[0];d.appendChild(c)},f=function(a){e(c.json,a)},g=function(a){window.jQuery?a.call(null,window.jQuery):e(c.jQuery,function(){a.call(null,window.jQuery)})},h=!1;b.jQuery=null;var i=[],j=function(){var a=(d.isJQueryNeeded?!!b.jQuery:!0)&&(d.isJSONNeeded?h:!0);if(a)for(var c=i.shift();c;)c.call(null,b),c=i.shift()};return b.onLoad=function(a){i.push(a),window.setTimeout(j,0)},d.isJQueryNeeded&&g(function(a){b.jQuery=a,j()}),d.isJSONNeeded&&f(function(){h=!0,j()}),b},a.vendors.$$neededVendors=function(){"use strict";var a=function(){return!(window.JSON&&"function"==typeof window.JSON.stringify)}(),b=function(){if(!window.JSON||"function"!=typeof window.JSON.parse)return!0;if("function"!=typeof document.querySelectorAll)return!0;if(document.body){var a=document.createElement("div");a.setAttribute("data-isJqueryNeeded","no"),document.body.appendChild(a);var b=document.querySelectorAll('[data-isJqueryNeeded="no"]');return document.body.removeChild(a),1!==b.length}return!1}();return{isJQueryNeeded:b,isJSONNeeded:a}},a.bootstrap=function(){"use strict";var b=a.alertMessages(),c=a.vendors(),d=a.location(),e=a.utils(c,d),f=a.adobeid(e),g=a.storage(e),h=a.http(e,c),i=a.events(e),j=a.config(JSON.parse('{"authorize":{"name":"authorize","endpoint":"https://ims-na1.adobelogin.com/ims/authorize/v1"},"avatar":{"name":"avatar/download","endpoint":"https://ims-na1.adobelogin.com/ims/avatar/download"},"check":{"name":"check/token","endpoint":"https://adobeid-na1.services.adobe.com/ims/check/v1/token"},"check_status":{"name":"check/status","endpoint":"https://adobeid-na1.services.adobe.com/ims/check/v1/status"},"logout":{"name":"logout","endpoint":"https://adobeid-na1.services.adobe.com/ims/logout/v1"},"logout_token":{"name":"logout_token","endpoint":"https://ims-na1.adobelogin.com/ims/logout/v1/token"},"profile":{"name":"profile","endpoint":"https://ims-na1.adobelogin.com/ims/profile/v1"},"validate_token":{"name":"validate_token","endpoint":"https://ims-na1.adobelogin.com/ims/validate_token/v1"}}'),f,e),k=a.imsApis(h,e,f,j.api,j.client_id);window.adobeIMS=a.adobeIMS(k,f,e,d,h,g,i,c,j);{var l=a.susiButtons(window.adobeIMS,e,c);a.optimizations(f.optimizations,window.adobeIMS)}window.adobeIMS.config=j,window.adobeIMS.IMSAPIs=j.api,window.AdobeIMSStrings=b,window.adobeIMS._handleTheJQueryDependency(),l.attachListeners()},a.bootstrap()}({});
//# sourceMappingURL=imslib.min.js.map