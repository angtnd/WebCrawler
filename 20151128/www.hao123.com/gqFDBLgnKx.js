__d("widget.ticketTip.ticketTip",["common.js.widget","common.js.events","common.js.format","common.js.config","widget.canlash.imageloader"],function(l,m,h,d){d("common.js.widget");var i=d("common.js.events");d("common.js.format");var j=d("common.js.config"),k=d("widget.canlash.imageloader"),e=HAO.httpsTrans("http://s0.hao123img.com/res/r/image/2015-11-25/ffdec405a02149623f5b70ec94fd987a.png"),f=HAO.httpsTrans("http://s0.hao123img.com/res/r/image/2015-11-25/f5352d26ddf46d491e54cbf6533a49e4.png"),g=
{"2016-2-7":"\u9664\u5915","2016-2-8":"\u521d\u4e00","2016-2-9":"\u521d\u4e8c","2016-2-10":"\u521d\u4e09","2016-2-11":"\u521d\u56db","2016-2-12":"\u521d\u4e94","2016-2-13":"\u521d\u516d","2016-2-14":"\u521d\u4e03","2016-2-15":"\u521d\u516b","2016-2-16":"\u521d\u4e5d","2016-2-17":"\u521d\u5341"};$.widget("hao123.ticketTip",{options:{date:[]},_create:function(){var a=this.element,b=this.options;this.wideornarrow=j.get("wideornarrow");this.advance_day=parseInt(b.data[0].date);this.text1=b.data[0].text1;
this.text2=b.data[0].text2;this.dateshow=b.data[0].dateshow;this.icon=HAO.httpsTrans(b.data[0].icon);this.url=b.data[0].url;this.moving=!0;this.imgs=[e,f,this.icon];this.$tpl=$('<a id="ticketTip" class="g-b ticketTip" title="\u62a2\u7968\u63d0\u9192" style="display:none;position: absolute; top:19px;*top:18px; left:5px;text-align:left;height:23px;z-index:500;white-space:nowrap;font-family:SimSun"><i class="g-ib ticket-icon" data-hook="ticket-icon" style="width:23px;height:23px;vertical-align:top"></i><span class="g-ib" data-hook="ticket-texts" style="color:#999;line-height:23px;padding-right:5px;"><span class="g-ib ticket-text" data-hook="ticket-text1" style="padding-left:5px"></span><span class="g-ib ticket-text" data-hook="ticket-date" style="color:#f50"></span><span class="g-ib ticket-text" data-hook="ticket-text2"></span></span></a>');
a.append(this.$tpl);this.$icon=$('[data-hook="ticket-icon"]',a);this.$date=$('[data-hook="ticket-date"]',a);this.$texts=$('[data-hook="ticket-texts"]',a);this.$text1=$('[data-hook="ticket-text1"]',a);this.$text2=$('[data-hook="ticket-text2"]',a)},_init:function(){var a=this;k(a.imgs,function(){a._render(function(){a._show();setTimeout(function(){a.width=a.$texts.width();a._animate()},1E3)})});a._bindEvents()},_show:function(){"wide"==this.wideornarrow?this.$tpl.show():this.$tpl.hide()},_animate:function(){var a=
this;setTimeout(function(){a.$texts.css({overflow:"hidden"}).animate({width:0,padding:0},500,function(){a.moving=!1;$(this).css("border","none")})},4E3)},_parseISO8601:function(a){var b=new Date(NaN),c=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/.exec(a);c&&(a=+c[2],b.setFullYear(c[1],a-1,c[3]),a!=b.getMonth()+1&&b.setTime(NaN));return b},_getDate:function(){var a=this.options,b=this._parseISO8601([a.date[0],a.date[1],a.date[2]].join("-")).getTime(),c;c=new Date(8>a.date[3]?b+864E5*(this.advance_day-2):b+864E5*
(this.advance_day-1));var a=c.getFullYear(),b=c.getMonth()+1,d=c.getDate();c=[b,"\u6708",d,"\u65e5"].join("");a=[a,b,d].join("-");g[a]&&(c=g[a]);return c},_render:function(a){this.$tpl.attr({href:this.url});this.$icon.css({"background-image":"url("+this.icon+")"});this.$texts.css({"background-image":"url("+f+")","background-position":"center right","background-repeat":"no-repeat"});this.$text1.text(this.text1).css({"background-image":"url("+e+")"});"1"==this.dateshow&&this.$date.text(this._getDate()).css({"background-image":"url("+
e+")"});this.$text2.text(this.text2).css({"background-image":"url("+e+")"});a&&a()},_bindEvents:function(){var a=this;i.on("wideversion.viewportchange",function(b){a.wideornarrow=b;a._show()});a.$tpl.hover(function(){$(this).css({"text-decoration":"none",cursor:"pointer"});a.$text1.css({color:"#999"});a.$text2.css({color:"#999"});a.moving||a.$texts.stop().css({"padding-right":"5px"}).animate({width:a.width+"px"},300)},function(){a.moving||a.$texts.stop().animate({width:0},300,function(){$(this).css({padding:"0"})})})}});
return h});window.js_gqFDBLgnKx&&window.js_gqFDBLgnKx(!0);
