(function(){if(OK.util.isIEMetro()){document.documentElement.classList.add("ie-metro");}})();OK.customJs=(function(){var j=function(v,r,u,q){var s=$("#"+q);var t=$("#"+u);var p=s.find(".rel").find(":checkbox");$("#"+v+"_"+r).change(function(){if(this.checked){s.addClass("scm_cnt__rel");t.click();}else{p.prop("checked",false).prop("disabled",false);}});$("#"+v+"_back").click(function(){s.removeClass("scm_cnt__rel");t.click();});s.delegate(":checkbox","change",function(x){var w=$(x.currentTarget).data("mutex").split(",");if(w.length){$("#"+w.join(",#")).prop("disabled",x.currentTarget.checked);}});t.on("close.sm",function(w){var z=$(w.target);var y=z.data("rels");var x=z.find(":checkbox:checked").map(function(){return this.value;}).get().sort().join(";");if(y!=x){$.post($(w.currentTarget).data("url"),{"gwt.requested":window.pageCtx.gwtHash,"st.rels":x,"st.orels":y});z.data("rels",x);}});};var d=function(w,q,r,t){var p=$("#"+w);var v=$("#"+t);var u=$("#"+w+"_counter");var s=function(z){var A=p.attr("contenteditable")==="true"?p.html():p.val();var x=q-A.length;var y=x>=0;v.toggleClass("__txt-counter-active",y);v.toggleClass("__txt-counter-err",!y);if(x<r){u.show();}else{u.hide();return;}u.html(x.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1&nbsp;"));};p.bind("input paste change keypress keydown keyup focus",s);s();};var n=function(v,t,w){var x=$("#"+v);if(!x){return;}var r=parseInt(x.attr("maxlength"));if(isNaN(r)){return;}var s=parseInt(x.attr("showremaining"));if(isNaN(s)){s=50;}var B=$("#"+t);var y=$("#"+v+"_text");var A=13;var p=46;var u="__txt-counter-err";var q="form_i__error";if(B&&y){var z=function(F){var E=x.val();var D=r-E.length;if(D<0){x.val(E.substring(0,r));D=0;}B.toggleClass(u,!D);if(D>s){y.html("&nbsp;");return true;}var C=OK.util.plurals(D);B.removeClass(q);y.html(w[C]+" "+D+" "+w[C+6]);if(D==0){if(F&&F.type!=undefined&&F.type=="keypress"&&(F.keyCode==A||F.keyCode>=33&&F.keyCode<=36||F.keyCode>=41&&F.keyCode!=p)){return false;}}return true;};x.keypress(z);x.keyup(z);x.change(z);x.bind("input paste",z);if(!B.hasClass(q)){y.html("&nbsp;");}z();}};var o=function(r,t){var p=document.getElementById(r);var s=document.getElementById(t);if(!p||!s){return;}var q=function(){if(!s.checked&&!p.disabled){if(p.className.indexOf("button-pro")!=-1){p.className=p.className+" __disabled";}p.disabled=true;}else{if(s.checked&&p.disabled){if(p.className.indexOf("button-pro")!=-1){p.className=p.className.replace(/__disabled/g,"");}p.disabled=false;}}};s.onchange=q;q();};var k=function(q,u){var p=document.getElementById(q);var t=document.getElementById(u);if(!p||!t){return;}var s=0;var r=function(){if(t.checked&&!p.disabled){s=p.selectedIndex;p.options[p.length]=new Option("","");p.selectedIndex=p.options.length-1;p.disabled=true;}else{if(!t.checked&&p.disabled){p.options[p.length-1]=null;p.selectedIndex=s;p.disabled=false;}}};t.onchange=r;r();};var c=(function(){var p=function(u,v,q){try{var t=$("#"+v);var r=$("#"+u);if(!t||!r){return;}r.hide();setTimeout(function(){t.hide();r.show();},q);}catch(s){}};return{showNotificationOnActionMenu:p};}());var e=function(s,p){try{var r=$("#"+s);if(!r){return;}setTimeout(function(){r.hide();},p);}catch(q){}};var l=function(y,w){var r=$("#"+y);var x=$(r).find("input:file");var v=x.length;if(w<=v){return;}for(var s=0;s<v;s++){var t=x[s].value;if(t!=null&&t===""){return;}}var z=$(x[v-1]);var q=(z.attr("id")||"").replace(/\d+$/,"");var p=(z.attr("name")||"").replace(/\d+$/,"");var u=z.attr("style");$('<input type="file" />').attr({id:q+v,name:p+v,style:u}).change(function(){l(y,w);}).appendTo(r);};function h(t,q){var s=document.getElementById("modal_box");i(s,t,q);var p=document.getElementById("paymentWizardInstant");i(p,t,q);var r=document.getElementById("pmntWzrdCtr").getElementsByTagName("iframe")[0];i(r,t,q);}function i(q,r,p){if(q){q.style.width=r+"px";q.style.height=p+"px";}}var f=(function(){var p=function(q){OK.loader.use("EasyXDMJs",function(){swfParam=q.substring(0,q.lastIndexOf("/"))+"/easyxdm.swf";window.remote=new easyXDM.Rpc({remote:q,swf:swfParam,container:"pmntWzrdCtr",props:{width:"100%",height:"100%",frameborder:"0",scrolling:"no"},onReady:function(){}},{local:{resizeWizard:function(s,r){var t=s.split(",");h(t[0],t[1]);},layerFeedback:function(r){window.__PMNT__ShowLayerFeedback(r);},showPromo:function(r){window.__PMNT__ShowPromoLayer(r);},goToUser:function(r){window.__PMNT__goToUser(r);},closePaymentCallback:function(r){window.__PMNT__CloseLayerCallback(r);},closePaymentLayer:function(r){window.__PMNT__CloseLayer(r);},showTrackSelection:function(t,r,s){var u=t.split(",");window.__PMNT__ShowTrackSelectionLayer(u[0],u[1],u[2]);},callSuccessSendPresentCallback:function(r){window.__PMNT__CallSuccessSendPresentCallback(r);},callSuccessSendPresentCallbackApp:function(r){window.__PMNT__CallSuccessSendPresentCallbackApp(r);}}});});};return{init:p};}());var a=function(q,p){var r=document.getElementById(q);if(r!=null){if(r.outerHTML){r.outerHTML=p;}else{r.innerHTML=p;}}};var b=function(q,r){if(typeof r=="undefined"){r=q;}var t=$("#"+r+"Prompt");var u=$("#"+r+"PromptDscr");if(t){var s=$("#"+q);var v="form_i__focused";s.focus(function(){if(!t.hasClass(v)&&u.html().length>0){t.addClass(v);}}).blur(function(){t.removeClass(v);});}};var m=function(p){if(p){window.setTimeout(function(){var r=document.activeElement;if(!r||(!r.type&&!r.href)){var q=document.getElementById(p);if(q){try{q.focus();}catch(r){}}}},100);}};var g=function(q,p){document.getElementById("appMain_DivObject")[q](p);};return{disableButtonOnCheckbox:o,disableSelectOnCheckbox:k,onTextAreaValueChange:n,onRelationshipMenuLoad:j,onCountdownTextareaValueChange:d,createMoreFileInputs:l,actionmenu:c,showNotification:e,xdm:f,streamFlash:a,addErrorClassOnFocus:b,setFocusOnReady:m,executePromoCallback:g};}());(function(a){var b=a.getElementById("topPanel");if(b){OK.addEvent(b,"click",function(f){var d=(f.target||f.srcElement),c=d.tagName.toLowerCase();if(OK.Layers.stack.length&&c!="input"&&c!="a"&&d.id!=="pointerOverlay"){OK.Layers.unregisterLast("topPanelClick");}});}})(document);OK.showOnlineUsers=function(g,e,a){var k=document.getElementById("online-fr"),j;if(!k){return;}if(typeof OK.getCurrentDesktopModelId!="undefined"&&a){var f=OK.getCurrentDesktopModelId(),c=a.split(",");if(f){var d=0;while(c[d]){if(c[d]==f){OK.css.display(k,false);break;}d++;}}}if(typeof OK.showOnlineUsers.doResize!="undefined"){OK.showOnlineUsers.doResize();}if(OK.css.hasClass(document.body,"fcofw")){var h=OK.showOnlineUsers.top,b=document.getElementById("online-fr_block");if(h&&b){b.style.top=h+"px";}}else{if(OK.showOnlineUsersTimer){clearInterval(OK.showOnlineUsersTimer);}OK.showOnlineUsersTimer=setInterval(function(){if(OK.Layers.isAnyLayerOpened()){return;}var i=55*g+5;var l=document.getElementsByClassName("online-fr_list");if(l){k.classList.add("__push");l[0].setAttribute("style","max-height:"+i+"px");setTimeout(function(){if(k&&l){l[0].removeAttribute("style");k.classList.remove("__push");}},e);}clearInterval(OK.showOnlineUsersTimer);},1000);}};OK.wb={hbc:function(){var a=$("#mwbCid");var b=function(c){a.empty();if("open"==c||"listen"==c||"play"==c){if("play"==c){odklMusic.openAndLaunchMusicPlaying();}else{odklMusic.openMusic();}}$.post("/dk?cmd=MWBAHBlock&st.action="+c);};a.click(function(d){var c=$(d.target);if(c.data("action")){b(c.data("action"));}return false;});}};OK.sm={bind:function(e,d,a,b,c){OK.loader.use(["jQuery"],function(){var f=$("#"+e).parent().attr("id"),k=null,i=null,g=false;function j(o){if(k){clearTimeout(k);}else{if(!i&&!$("#"+e).hasClass("sc-menu__hidden")){i=setTimeout(function(){i=null;var p=$("#"+e);var q=$("#"+f);if(q.length){p.css({top:"",left:""}).removeClass("sc-menu__top").addClass("sc-menu__hidden");q.append(p);q=null;p.trigger("close.sm");}else{p.remove();}},a);}}k=null;}function n(A){var t,w;if(k){clearTimeout(k);k=null;}$(document.body).one("touchstart",j);var C=$(A.currentTarget);if(!C.hasClass("shortcut-wrap")){var q=C.find(".card_wrp:first");if(q.length){C=q;}else{if((q=C.children("img:first")).length){C=q;}else{if((q=C.closest(".card_wrp")).length){C=q;}}}}var F=C.offset(),o=C.outerHeight(true),x=C.outerWidth(true);var E=$("#hook_Block_MainContainer"),u=E.offset();u.scrollTop=E.scrollTop();u.scrollLeft=E.scrollLeft();F.bottom=F.top+o;F.viewTop=F.top-u.top;var G=$("#"+e);G.trigger("show.sm");E.append(G);t=G.find(".__loading");w=t.attr("data-process-url");if(t.size()>0&&w&&w.length>0){function y(H){if(H&&H.length>0){t.removeClass("__loading");}OK.logging.logger.success("share.likes.async","ok");}function v(){OK.logging.logger.error("share.likes.async","fail");}var r=$.ajax({type:"POST",url:w,data:{"gwt.requested":window.pageCtx.gwtHash},headers:{TKN:OK.tkn.get()}});r.done(function(K,M,L){var H=K.split(OK.navigation.SPLITER),J=L.getResponseHeader(OK.navigation.HEADER).split(",");for(var I=0;I<H.length;I++){if(J[I]){OK.hookModel.setHookContent(J[I],H[I]);}}y(K);});r.fail(function(){v();});}var z=G.outerHeight(true),D=G.outerWidth(true);var B=F.viewTop,p=OK.util.getDocumentScrollYPos();if($(window).height()-(F.bottom-p)<G.outerHeight(true)){G.addClass("sc-menu__top");B+=u.scrollTop-G.outerHeight(true);}else{G.removeClass("sc-menu__top");B+=o+u.scrollTop;}G.css("top",Math.round(B)+"px");var s=F.left+((x-D)/2);if(s+D>=$(window).width()){s=$(window).width()-D-u.left+u.scrollLeft-1;}else{if(s<=0){s=u.scrollLeft+1;}else{s+=u.scrollLeft;}}G.css("left",Math.round(s)+"px");G.removeClass("sc-menu__hidden");$("#"+f).append("<div/>");}function h(o){if(i){clearTimeout(i);i=null;}else{if(!k&&$("#"+e).hasClass("sc-menu__hidden")){g=true;k=setTimeout(function(){k=null;n(o);},d);}else{o.stopPropagation();}}}$("#"+e).hover(function(o){if(i&&$("#"+f).closest("body").length){clearTimeout(i);i=null;}},j).find("a[data-volatile!='true']").click(function(o){if(true===i){i=null;}j(o);});$("#"+f).prev().hover(h,j);if(b){$("#"+f).prev().click(n);}if($(document.body).hasClass("touch")){var l=$("#"+e).bind("touchstart",function(o){if(!i){i=true;}});var m=$("#"+f).prev().bind("touchstart",h).find("a").first()[0];if(m){m.addEventListener("click",function(o){if(g){o.preventDefault();o.stopPropagation();}g=false;},true);}m=null;}$(document).bind("touchmove scroll",function(o){if(k){clearTimeout(k);k=null;}else{g=false;}i=null;});if(c){n({currentTarget:$("#"+f).prev()});}});}};OK.hideFeed=function(a){var b=document.getElementById(a);if(!b){return;}if(OK.css.hasClass(b,"feed-i__first")&&b.nextSibling){OK.css.addClass(b.nextSibling,"feed-i__first");}OK.css.display(b,0);};(function(){var o=".modal_overlay, .modal-new_close_ovr, .pl_shadow, .layer_ovr, .ic_close, #hook_Block_PromoMainLayer .layerPanelClose, .js-close-layer";var f=[],k;var l=[];var p=1;var n=function(){l=[];};var q=function(x){p=x;};var b=function(x){return x.replace(/st\.(fwd|layer\.direction)\=.*?(&|$)/g,"");};var i=function(y){if(p<=1){return;}y=b(y);l.push({link:y});var x=l.length-p;if(x>0){l.splice(0,x);}};var t=function(x){if(p<=1||l.length==0){return;}x=b(x);l[l.length-1]={link:x};};var s=function(x,z){if(l.length==0){return;}var y=l[l.length-1].link.indexOf("?")>=0?"&":"?";y+="st.fwd=";x=encodeURIComponent(x);if(z){y+="on&st.lastelem="+x;}else{y+="off&st.firstelem="+x;}l[l.length-1].attrs=y;};var j=function(){if(p<=1||l.length==0){return null;}l.splice(l.length-1,1);if(l.length==0){return null;}var y=l[l.length-1];var x=y.link;if(y.attrs){x+=y.attrs;}l.splice(l.length-1,1);if(typeof navigateOnUrlFromJS!=="undefined"){navigateOnUrlFromJS(x);}else{require(["OK/PopLayerPhoto"],function(z){z.handleOnNavigate(x);});}};var a=function(E,A,D,x,C,F){OK.loader.execRequire("OK/ToolbarGrowl",function(G){G.hideAll();});D=D||null;x=x||false;C=C||$.noop;F=F||null;var y={id:E,deactivateFn:A,hookInstance:D,preventCloseOnEsc:x,keyHandler:C,redirectAfterClose:F};var z=false;for(var B=0;B<f.length;B++){if(f[B].id==y.id){z=true;f.splice(B,1);OK.logging.logger.success("layerManager","reRegister",y.id);}}f.push(y);if(f.length==1&&!z){w();}m();OK.logging.logger.success("layerManager","register",y.id);};var g=function(x){if(f.length){if(!f[f.length-1].preventCloseOnEsc){var y=f.pop();if(y){c(y);if(!f.length){e();}m();if(y.redirectAfterClose!==null){OK.navigation.redirect(y.redirectAfterClose);}OK.logging.logger.success("layerManager","unregister",y.id);OK.logging.logger.success("layerManager",x,y.id);}else{OK.logging.logger.success("layerManager","popFailed");}}else{OK.logging.logger.success("layerManager","escDisabledForLayer",f[f.length-1].id);}}else{OK.logging.logger.success("layerManager","stackEmpty");}};var m=function(){var y=!f.length||(f.length==1&&(f[0].id=="posting_form"||f[0].id=="video_player"));var A=(f.length==1&&f[0].id=="modal_hook");if(A){var z=document.getElementById("hook_Modal_popLayerModal");if(z&&OK.css.hasClass(z,"layer__disabled")){y=true;}}var x=document.getElementsByTagName("html")[0];x.classList[y?"remove":"add"]("oh");};function d(){var x=OK.hookModel.getHookById("ForthColumnTopBannerInner");if(x){x.handle();}}var w=function(){OK.loader.use(["jQuery"],function(){var x=$("body");x.on("click.popLayers",o,function(y){g("shadowClick");y.stopImmediatePropagation();}).on("keydown.popLayers",function(y){var z=f[f.length-1];if(z){z.keyHandler.call(this,y);}if(y.keyCode===27&&!k){k=true;g("esc");y.preventDefault();y.stopPropagation();}}).on("keyup.popLayers",function(y){k=false;if(y.keyCode===27){y.preventDefault();}y.stopPropagation();});});d();};var e=function(){OK.loader.use(["jQuery"],function(){k=false;$("body").off(".popLayers");});require(["OK/ToolbarGrowl"],function(x){x.showAny();});d();if(require.defined("OK/GoRec")){require("OK/GoRec").notify();}};var c=function(x){x.deactivateFn.call(x.hookInstance);};var u=function(z){var y;for(var x=0;x<f.length;x++){if(f[x].id==z){y=f.splice(x,1);OK.logging.logger.success("layerManager","unregister",z);}}if(!y){OK.logging.logger.success("layerManager","unregisterLayerNotFound",z);}if(!f.length&&y){e();}m();};var r=function(){var y=f.length;for(var x=y;x>0;x--){g("unregisterAll");}};var h=function(){return f.length!=0;};var v=function(z){if(f){for(var y=0;y<f.length;y++){var x=f[y];if(x.id==z){return true;}}}return false;};OK.Layers={register:a,remove:u,isAnyLayerOpened:h,isLayerOpened:v,unregisterAll:r,unregisterLast:g,stack:f,push:i,pop:j,changeAttrs:s,clear:n,replace:t,setMaxSize:q};if(OK.historyManager.isHistorySupported()&&!window.onpopstate){window.onpopstate=function(x){if(x.state){OK.Layers.unregisterAll();}};}})();OK.resize=function(){OK.setContentWidth();};(function(){if(document.getElementById("sc")!=null){var d=OK.scrollBar.width;var b=document.createElement("style");var a=".fake-toolbar {width: "+d+"px}.scroll-right-indent { right: "+d+"px !important; }.scroll-right-margin { margin-right: "+d+"px !important; }";var c=document.getElementsByTagName("head")[0];if(!OK.util.isIEMetro()){a+="html.oh #hook_PopLayer_popLayer, html.oh .topPanel, html.oh .modal, html.oh .scroll-modal-indent {border-right:"+d+"px transparent solid}";}c.appendChild(b);if(b.styleSheet){b.styleSheet.cssText=a;}else{var e=document.createTextNode(a);b.appendChild(e);}}})();OK.passAdminRights=function(){function a(e){var d=document.getElementById("hook_FormButton_button_pass_admin_confirm");d.disabled=!e;if(e==true){d.className="button-pro";}else{d.className="button-pro __disabled";}}function c(e){var d=document.getElementById("hook_FormButton_button_pass_admin_confirm");if(e.value.length>0){d.className="button-pro";d.disabled=false;}else{d.className="button-pro __disabled";d.disabled=true;}}function b(){var d,l=this;var j;var e=document.getElementById("smsTimer");var h=document.getElementById("timerWrapper");var m=document.getElementById("resendLink");function f(n){return((10>n)?"0"+n:n);}var k=function(t){var p=t;var r=Math.floor(p/3600);p-=3600*r;var o=Math.floor(p/60);p-=60*o;var q=p;var n=(r>0?f(r)+":":"")+f(o)+":"+f(q);e.innerHTML=n;};var i=function(){document.getElementById("resendLink").style.display="";document.getElementById("timerWrapper").style.display="none";};function g(){k(j);if(j===0){i();clearInterval(d);}j--;}this.start=function(){h.style.display="";m.style.display="none";clearInterval(d);j=parseInt(e.innerHTML);if(j<=0){i();return;}g(j);d=setInterval(g,1000);};}return{Countdown:b,onAgreeClick:a,onSmsFieldChange:c};}();OK.apps={checkUnityInstalled:function(){if(navigator.mimeTypes["application/vnd.unity"]){return true;}else{if(window.ActiveXObject!==undefined){try{var b=new ActiveXObject("UnityWebPlayer.UnityWebPlayer.1");return true;}catch(a){}}}return false;},dup:function(){try{if(this.checkUnityInstalled()){OK.logging.logger.success("appsstats.unity.detected","footer");}OK.logging.logger.success("appsstats.check.unity","footer");}catch(a){OK.logging.logger.success("appsstats.check.unity","error");}}};(function(){var b=0,d=false,c=false,a=document.getElementById("pointerOverlay");function e(){clearTimeout(b);if(!d){OK.css.addClass(a,"__auto");d=true;}b=setTimeout(function(){OK.css.removeClass(a,"__auto");d=false;},200);c=false;}OK.blockHoverStart=function(){if(c){return;}c=true;if(requestAnimationFrame){requestAnimationFrame(e);}};}());var OKCustomJs=OK.customJs;