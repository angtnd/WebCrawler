			
// Copyright 2006-2015 ClickTale Ltd., US Patent Pending
// PID: 5
// Generated on: 8/18/2015 7:51:16 AM (UTC 8/18/2015 12:51:16 PM)

if (!navigator.userAgent.match(/msies(d+)/i) || (navigator.userAgent.match(/msies(d+)/i)[1] && parseInt(navigator.userAgent.match(/msies(d+)/i)[1], 10) > 8)) { (function(){var e=!0,g=null,i=!1,j=this;var l,m,n,o;function ca(){return j.navigator?j.navigator.userAgent:g}o=n=m=l=i;var r;if(r=ca()){var da=j.navigator;l=0==r.indexOf("Opera");m=!l&&-1!=r.indexOf("MSIE");n=!l&&-1!=r.indexOf("WebKit");o=!l&&!n&&"Gecko"==da.product}var ea=l,v=m,x=o,y=n,z;
a:{var A="",B;if(ea&&j.opera)var C=j.opera.version,A="function"==typeof C?C():C;else if(x?B=/rv\:([^\);]+)(\)|;)/:v?B=/MSIE\s+([^\);]+)(\)|;)/:y&&(B=/WebKit\/(\S+)/),B)var fa=B.exec(ca()),A=fa?fa[1]:"";if(v){var D,ga=j.document;D=ga?ga.documentMode:void 0;if(D>parseFloat(A)){z=""+D;break a}}z=A}var ha={};
function F(a){var d;if(!(d=ha[a])){d=0;for(var f=(""+z).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),h=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),k=Math.max(f.length,h.length),p=0;0==d&&p<k;p++){var w=f[p]||"",aa=h[p]||"",ba=RegExp("(\\d*)(\\D*)","g"),E=RegExp("(\\d*)(\\D*)","g");do{var u=ba.exec(w)||["","",""],t=E.exec(aa)||["","",""];if(0==u[0].length&&0==t[0].length)break;d=((0==u[1].length?0:parseInt(u[1],10))<(0==t[1].length?0:parseInt(t[1],10))?-1:(0==u[1].length?0:parseInt(u[1],
10))>(0==t[1].length?0:parseInt(t[1],10))?1:0)||((0==u[2].length)<(0==t[2].length)?-1:(0==u[2].length)>(0==t[2].length)?1:0)||(u[2]<t[2]?-1:u[2]>t[2]?1:0)}while(0==d)}d=ha[a]=0<=d}return d}var ia={};function ja(){ia[9]||(ia[9]=v&&!!document.documentMode&&9<=document.documentMode)};!v||ja();!v||ja();v&&F("8");!y||F("528");x&&F("1.9b")||v&&F("8")||ea&&F("9.5")||y&&F("528");!x||F("8");function G(a,d,f,h,k){a&&d&&("undefined"==typeof f&&(f=1E3),"undefined"==typeof h&&(h=20),0>--h?"function"===typeof k&&k():d()?a():setTimeout(function(){G(a,d,f,h,k)},f))};function ka(a){function d(){f||(f=e,a())}var f=i;if("complete"===document.readyState||"interactive"===document.readyState)d();else{if(document.addEventListener)document.addEventListener("DOMContentLoaded",d,i);else if(document.attachEvent){try{var h=window.frameElement!=g}catch(k){}if(document.documentElement.doScroll&&!h){var p=function(){if(!f)try{document.documentElement.doScroll("left"),d()}catch(a){setTimeout(p,10)}};p()}document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&
d()})}if(window.addEventListener)window.addEventListener("load",d,i);else if(window.attachEvent)window.attachEvent("onload",d);else{var w=window.onload;window.onload=function(){w&&w();d()}}}};function H(a){"function"===typeof ClickTaleExec&&ClickTaleExec(a)}function I(){"function"===typeof ClickTaleStop&&ClickTaleStop()}function J(a,d){"function"===typeof ClickTaleEvent&&(d?J.d[a]!==e&&(J.d[a]=e,ClickTaleEvent(a)):ClickTaleEvent(a))}J.d={};function K(a){"function"===typeof window.ClickTaleRegisterFormSubmit&&window.ClickTaleRegisterFormSubmit(a)}function L(a){"function"===typeof window.ClickTaleRegisterFormSubmitSent&&window.ClickTaleRegisterFormSubmitSent(a)}
function la(a){"function"===typeof window.ClickTaleRegisterFormSubmitSuccess&&(a?window.ClickTaleRegisterFormSubmitSuccess(a):window.ClickTaleRegisterFormSubmitSuccess())}function M(a){"function"===typeof window.ClickTaleRegisterFormSubmitFailure&&(a?window.ClickTaleRegisterFormSubmitFailure(a):window.ClickTaleRegisterFormSubmitFailure())}function N(){var a=document.location.href;"function"===typeof window.ClickTaleLogical&&(J.d={},window.ClickTaleLogical(a))}
function O(a,d){"function"===typeof window.ClickTaleRegisterElementAction&&ClickTaleRegisterElementAction(a,d)}function ma(a){"function"===typeof window.ClickTaleRegisterElementAction&&(ClickTaleRegisterElementAction("mouseover",a),ClickTaleRegisterElementAction("click",a))}function na(a,d){var f={},h;for(h in a)f[h]=a[h];f.target=d;f.srcElement=d;ma(f)}window.ClickTaleDetectAgent&&window.ClickTaleDetectAgent()&&window.ClickTaleDetectAgent();
function oa(a,d){"object"==typeof a&&"string"==typeof d&&(window.ClickTaleContext&&-1!=document.referrer.indexOf(location.hostname)&&window.parent.ct&&window.parent.ct.ElementAddressing&&"function"===typeof window.parent.ct.ElementAddressing.setCustomElementID?window.parent.ct.ElementAddressing.setCustomElementID(a,d):(window.ClickTaleSetCustomElementID=window.ClickTaleSetCustomElementID||function(a,d){a.ClickTale=a.ClickTale||{};a.ClickTale.CustomID=d},window.ClickTaleSetCustomElementID(a,d)))}
function P(){"function"===typeof ClickTaleRebindEvents&&ClickTaleRebindEvents()};var pa=H,Q=J;var R="",S=document.location.pathname.toLowerCase(),qa=document.location.search.toLowerCase(),ra={oo_store:"Store",oo_site:"Website",oo_both:"Both"},T="",U,V,W="";function X(a){return 0<a.length?e:i}function Y(a,d){jQuery(document).one("mouseup",function(f){a===f.target&&d()})}function sa(){var a=S.split("/");return 3==a.length?jQuery.isNumeric(a[2]):i}
function ta(){if("/"===S)R="Homepage: ",J("Homepage: HomePage");else if(/^\/cp\//.test(S)){R="Category Page: ";var a=jQuery(".breadcrumb-list a").map(function(a,f){return jQuery.trim(jQuery(f).text())}).toArray().join(" > ");a&&J("Category Page: "+a);-1<S.toLowerCase().indexOf("/gifts-registry")?Q("Category Page: Gifts & Registry"):-1<S.toLowerCase().indexOf("/wedding/")?Q("Category Page: Wedding Shop"):sa()&&Q("Category Page: Credit Card")}else/^\/ip\//.test(S)?(0<jQuery(".js-product-care-plans").length?
J("Item page: With Warranty"):J("Item page: No Warranty"),-1<S.toLowerCase().indexOf("-gift-card")&&Q("Category Page: Gift Cards"),jQuery("button:contains('Specifications')").length&&Q("item page with specifications"),jQuery("section .track-listing").length&&Q("item page with track listings"),jQuery("section .size-chart").length&&Q("item page with size chart"),jQuery("section .legal-headline:contains('Choking Hazard')").length&&Q("item page with choking hazard"),jQuery(".js-idml-marketing-content.product-specs").length&&
Q("item page with Extended Manufacturer Content"),jQuery(".product-controls.product-buying-table-row.module > .product-controls-row").length&&(a=jQuery(".product-controls.product-buying-table-row.module > .product-controls-row"),a.find(".js-variants-summary").length&&a.find(".js-variants-summary .js-product-variant-row.product-variant-row[data-id='actual_color']").length&&a.find(".js-variants-summary .js-product-variant-row.product-variant-row[data-id='size']").length?J("item page: with color and size"):
2==a.children().length&&a.find(".product-care-plans-container").length?J("item page: with care plan only"):1==a.children().length&&a.find(".grid")?J("item page: qty only"):3==a.children().length&&J("item page: with color and care plan")),"object"==typeof window.s_omni&&("string"==typeof window.s_omni.prop3&&window.s_omni.prop3.length&&J("Item page category  "+window.s_omni.prop3),"string"==typeof window.s_omni.prop8&&window.s_omni.prop8.length&&J("Item page department - "+window.s_omni.prop8),"string"==
typeof window.s_omni.prop4&&window.s_omni.prop4.length&&J("Item page subcategory - "+window.s_omni.prop4)),jQuery("#WMItemVideoLnk:contains('Rotation')").length&&J("item page with 360 view"),jQuery("#WMItemVideoLnk:contains('Video')").length&&J("item page with Videos"),jQuery(".tempo-module-heading:contains('Customers also considered')").length&&J("item page with Customers also considered module")):/^\/search\//.test(S)&&/^\??query=/.test(qa)&&(R="Search Page: ",J(R+"Search Results"),"Showing 0 of 0 results"===
jQuery(".result-summary-container").text().trim()&&J(R+"Search Results Empty"));-1<document.location.href.toLowerCase().indexOf("reviews/write-review")&&J("rate and review page");X(jQuery(".header-account-signin"))||J("Login: User is Logged In")}Function.prototype.b=function(a,d){var f=this,h;return function(){var k=this,p=arguments;h?clearTimeout(h):d&&f.apply(k,p);h=setTimeout(function(){d||f.apply(k,p);h=g},a||100)}};
function Z(a,d){var f={},h;for(h in d)f[h]=d[h];f.target=a;f.srcElement=a;O("mouseover",f);O("click",f)}Function.prototype.b=function(a,d){var f=this,h;return function(){var k=this,p=arguments;h?clearTimeout(h):d&&f.apply(k,p);h=setTimeout(function(){d||f.apply(k,p);h=g},a||100)}};function ua(){var a=jQuery(".slick-list:eq(0) .slick-track .selected img").attr("alt");return a?a:g}
function va(){if(!window.ClickTaleFirstPCCGo){window.ClickTaleFirstPCCGo=e;var a=document.location.href.toLowerCase();if(0<jQuery("#orderSummary").length&&0<jQuery(".CheckoutHeading.BodyLableBold").length&&"Choose Payment Method"==jQuery(".CheckoutHeading.BodyLableBold").text()&&0<jQuery(".osoPaymentType.clearfix>a:eq(0).active").length&&0==jQuery(".listedCCShow").length){Q("Checkout process: choose payment method");if(0<jQuery("#addCreditCardForm").length){var d=jQuery("#addCreditCardForm")[0];jQuery(document).on("mousedown",
'.btnwrapper.btnCCard.bottom  .mainSpriteSliderBTN[title="Continue"]',function(){K(d);L(d)})}0<jQuery(".errorFormLabel").length&&M()}wa();X(jQuery(".nutrition-section"))&&Q("item page with nutrition facts");X(jQuery(".supplement-section"))&&Q("item page with Supplemental facts");xa();-1<a.indexOf("cart2/cart")&&(jQuery(document).on("mousedown",".ProceedtoCo",function(){Q("Cart - Proceed to checkout",e)}),0<jQuery("#CartBtnCount").length&&("3"==jQuery("#CartBtnCount").html()||"2"==jQuery("#CartBtnCount").html()||
"1"==jQuery("#CartBtnCount").html())&&Q("Cart with 1-3 products",e));X(jQuery(".ErrorContainer:visible"))&&M();2<jQuery(".customer-review").length&&Q("item page with over three reviews (R&R)");2<jQuery("tr.question:visible").length&&Q("item page with over three Q&A");if(0<jQuery(".slick-list:eq(0) .slick-track").length&&window.MutationObserver){var f=document.querySelector(".slick-list .slick-track"),h=new window.MutationObserver(function(){var b=ua();b&&Q("home page carousel banner - "+b);if(jQuery(".slick-slide.slick-active.selected").length&&
(b=jQuery(".slick-slide").index(jQuery(".slick-slide.slick-active.selected")),-1<b)){var q=jQuery(".multistory-pov-pagination .slick-list .slick-track").attr("style"),c='jQuery(".multistory-pov-pagination ul.carousel-paginator-list li").removeClass("slick-active"); jQuery(".multistory-pov-pagination ul.carousel-paginator-list li").eq('+jQuery(".multistory-pov-pagination ul.carousel-paginator-list li").index(jQuery(".multistory-pov-pagination ul.carousel-paginator-list li.slick-active"))+').addClass("slick-active");';
H('jQuery(".multistory-pov-pagination .slick-list .slick-track").attr("style","'+q+'transition-duration:500ms;"); jQuery(".multistory-pov-pagination .slick-list .slick-slide").removeClass("slick-active selected");jQuery(".multistory-pov-pagination .slick-list .slick-slide").eq('+b+').addClass("slick-active selected");'+c)}}.b(250,i)),k=ua();k&&Q("home page carousel banner - "+k);h.observe(f,{attributes:e,f:e,e:e})}(-1<a.indexOf("/ip/")||-1<a.indexOf("/cp/")||"/"==document.location.pathname)&&-1<a.indexOf("/ip/")&&
0<jQuery("#recently-review .carousel-heading").length&&Q("Item page - You recently viewed carousel");-1<a.indexOf("/ip/")&&-1<a.indexOf("bundle")&&0<jQuery(".accordion-header-collapsed.accordion-container").length&&Q("bundle item page");jQuery(".nav-dropdown.js-nav-dropdown>li>button").on("mousedown",function(b){var q=jQuery(".nav-dropdown.js-nav-dropdown>li>button").index(this),c={},a;for(a in b)c[a]=b[a];c.target=jQuery(".nav-dropdown.js-nav-dropdown>li>button").eq(q)[0];c.srcElement=jQuery(".nav-dropdown.js-nav-dropdown>li>button").eq(q)[0];
O("mouseover",c);O("click",c)});jQuery(".spotlight-tiles.js-spotlight-tiles map>area").on("mousedown",function(b){var q=jQuery(".spotlight-tiles.js-spotlight-tiles map>area").index(this);if(0<jQuery(".spotlight-tiles.js-spotlight-tiles map>area:eq("+q+")").closest(".spotlight-tiles.js-spotlight-tiles").length&&0<jQuery(".spotlight-tiles.js-spotlight-tiles map>area:eq("+q+")").closest(".spotlight-tiles.js-spotlight-tiles").find("img").length){var c={},a;for(a in b)c[a]=b[a];c.target=jQuery(".spotlight-tiles.js-spotlight-tiles map>area:eq("+
q+")").closest(".spotlight-tiles.js-spotlight-tiles").find("img")[0];c.srcElement=jQuery(".spotlight-tiles.js-spotlight-tiles map>area:eq("+q+")").closest(".spotlight-tiles.js-spotlight-tiles").find("img")[0];O("mouseover",c);O("click",c)}});jQuery(".paginator-list.pull-left button").on("mousedown",function(b){var q=jQuery(".paginator-list.pull-left button").index(this),c={},a;for(a in b)c[a]=b[a];c.target=jQuery(".paginator-list.pull-left button:eq("+q+")")[0];c.srcElement=jQuery(".paginator-list.pull-left button:eq("+
q+")")[0];O("mouseover",c);O("click",c)});jQuery(".paginator-list.pull-left a").on("mousedown",function(b){var q=jQuery(".paginator-list.pull-left a").index(this),c={},a;for(a in b)c[a]=b[a];c.target=jQuery(".paginator-list.pull-left a:eq("+q+")")[0];c.srcElement=jQuery(".paginator-list.pull-left a:eq("+q+")")[0];O("mouseover",c);O("click",c)});jQuery(".nav-dropdown.js-nav-dropdown>li>button").on("mousedown",function(b){var q=jQuery(".nav-dropdown.js-nav-dropdown>li>button").index(this),c={},a;for(a in b)c[a]=
b[a];c.target=jQuery(".nav-dropdown.js-nav-dropdown>li>button").eq(q)[0];c.srcElement=jQuery(".nav-dropdown.js-nav-dropdown>li>button").eq(q)[0];O("mouseover",c);O("click",c)});ta();jQuery(".wmicon.wmicon-search").on("mousedown",function(b){if(0<jQuery(".wmicon.wmicon-search").parent("button").length){var a=jQuery(".wmicon.wmicon-search").parent("button")[0],c={},s;for(s in b)c[s]=b[s];c.target=a;c.srcElement=a;O("mouseover",c);O("click",c)}});jQuery(".wmicon.wmicon-remove").on("mousedown",function(b){if(0<
jQuery(".wmicon.wmicon-remove").parent("button").length){var a=jQuery(".wmicon.wmicon-remove").parent("button")[0],c={},s;for(s in b)c[s]=b[s];c.target=a;c.srcElement=a;O("mouseover",c);O("click",c)}});jQuery(".js-searchbar-clear.searchbar-clear.btn-link.absolute-center-v>span").on("mousedown",function(b){if(0<jQuery(".js-searchbar-clear.searchbar-clear.btn-link.absolute-center-v>span").parent("button").length){var a=jQuery(".js-searchbar-clear.searchbar-clear.btn-link.absolute-center-v>span").parent("button")[0],
c={},s;for(s in b)c[s]=b[s];c.target=a;c.srcElement=a;O("mouseover",c);O("click",c)}});jQuery(".js-searchbar-input.js-header-instant-placeholder.searchbar-input.tt-input").on("mousedown",function(b){var a=jQuery(".js-searchbar-input.js-header-instant-placeholder.searchbar-input.tt-input")[0],c={},s;for(s in b)c[s]=b[s];c.target=a;c.srcElement=a;O("mouseover",c);O("click",c)});jQuery(document).keyup(function(){if(jQuery(".js-searchbar-input.js-header-instant-placeholder.searchbar-input").length){var b=
jQuery(".js-searchbar-input.js-header-instant-placeholder.searchbar-input").val();pa('jQuery(".js-searchbar-input.js-header-instant-placeholder.searchbar-input").val("'+b+'");')}});if(window.ClickTaleSettings&&window.ClickTaleSettings.ChangeMonitor&&!window.ClickTaleSettings.ChangeMonitor.Enable==e)jQuery(document).on("shown hidden",".js-header-flyout, .js-flyout",function(b){var a=jQuery(".js-header-flyout, .js-flyout").index(this),c="shown"===b.type?"show":"hide";jQuery(".js-header-flyout, .js-flyout").eq(a).parent("SPAN").hasClass("js-refine-store-container")?
setTimeout(function(){var b=jQuery(".js-header-flyout, .js-flyout").eq(a).html(),b="jQuery('.js-header-flyout, .js-flyout').eq("+a+").html(unescape('"+escape(b)+"')).flyout('"+c+"');",b=b+("jQuery('.js-header-flyout, .js-flyout').eq("+a+").find('.spinner-backdrop').hide();");H(b)},500):H("jQuery('.js-header-flyout, .js-flyout').eq("+a+").flyout('"+c+"');")});jQuery(document).on("change",'[id*="product-care-plan"]',function(){J("Item page: Care plan",e)});jQuery(document).on("mouseenter","nav.nav-main > ul > li > a, nav.nav-main ul.nav-dropdown > li > a",
function(){var b=jQuery("nav.nav-main > ul > li > a, nav.nav-main ul.nav-dropdown > li > a").index(this);H("jQuery('nav.nav-main > ul > li > a, nav.nav-main ul.nav-dropdown > li > a').eq("+b+").mouseover();")});jQuery(document).on("mouseleave","nav.nav-main > ul > li > div.js-nav-dropdown-container, nav.nav-main > ul > li > a",function(){var b=jQuery("nav.nav-main > ul > li > div.js-nav-dropdown-container, nav.nav-main > ul > li > a").index(this);H("jQuery('nav.nav-main > ul > li > div.js-nav-dropdown-container, nav.nav-main > ul > li > a').eq("+
b+").mouseout();")});jQuery(document).on("mouseenter mouseleave","button.js-nav-dropdown-toggle, .carousel, .js-lhn-menu > li",function(b){var a=jQuery(this),b="mouseover"===b.type||"mouseenter"===b.type?["over","add"]:["out","remove"];a.is(".js-lhn-menu > li")?(a=jQuery(".js-lhn-menu > li").index(this),H("jQuery('.js-lhn-menu > li').eq("+a+").children('a').mouse"+b[0]+"();")):window.ClickTaleSettings&&window.ClickTaleSettings.ChangeMonitor&&!window.ClickTaleSettings.ChangeMonitor.Enable==e&&a.hasClass("carousel")?
(a=jQuery(".carousel").index(this),H("jQuery('.carousel').eq("+a+")."+b[1]+"Class('cthover');")):a.is("button.js-nav-dropdown-toggle")&&(a=jQuery("button.js-nav-dropdown-toggle").index(this),H("jQuery('button.js-nav-dropdown-toggle').eq("+a+").mouse"+b[0]+"();"))});jQuery(document).on("closeend.expander openend.expander",".expander",function(b){var a=jQuery(".expander").index(this),b="openend"===b.type?"open":"close",c=jQuery(this);H("ctHandleExpander("+a+", '"+b+"');");R&&!c.hasClass("see-more")&&
(a=jQuery.trim(c.children(".expander-toggle").text()))&&J(R+"open/close refiner: "+a,e)}.b(250,e));"Search Page: "===R&&(jQuery(document).on("click.expander",".expander",function(b){var a=jQuery(".expander").index(this),c=jQuery(this),b=jQuery(b.target);b.attr("class");(b.is("A.expander-toggle")||b.parent().is("A.expander-toggle"))&&H("jQuery('.expander').eq("+a+").children('.expander-toggle').click();");R&&(b.is("A.expander-toggle")||b.parent().is("A.expander-toggle")&&!b.hasClass("js-facet-see-more"))?
-1<c.children(".expander-toggle").children(".expander-text").text().indexOf("See all")?J(R+"See all",e):(a=c.children(".expander-toggle").text().trim())&&J(R+"open/close refiner: "+a,e):R&&b.hasClass("js-facet-see-more")&&H("jQuery('.expander').eq("+a+").find('.js-facet-see-more').click();")}.b(250,e)),jQuery(document).on("click","#tile-container .js-tile",function(){J(R+"click on result",e)}),jQuery(document).on("click","#related-search-container A",function(){J(R+"related searches",e)}),jQuery(document).on("click",
".paginator A",function(){J(R+"pager",e)}));-1<document.location.href.toLowerCase().indexOf("reviews/write-review")&&(jQuery("#review-title").on("keyup",function(){var b=jQuery(this).val();H("jQuery('input#review-title').val(unescape('"+escape(b)+"'));")}),jQuery("#review-body").on("keyup",function(){var b=jQuery(this).val();H("jQuery('textarea#review-body').val(unescape('"+escape(b)+"'));")}));jQuery(document).on("selected",".carousel",function(b,a){var c=b.target;if("function"===typeof a.index){var c=
jQuery(".carousel").index(c),d=a.index();H("ctHandleCarousel("+c+", "+d+");")}});var p=function(){setTimeout(function(){I();ClickTaleFetchFrom=ClickTaleFetchFromWithCookies.constructFetchFromUrl(document.location.href+"#"+encodeURIComponent("CTFetchUserAgent=VisitorUserAgent"));window.ClickTaleIncludedOnDomReady=e;window.ClickTaleIncludedOnWindowLoad=e;N();ta()},500)};if(-1<document.location.href.toLowerCase().indexOf("checkout")){document.location.href.toLowerCase().indexOf("#checkout/sign-in")&&
Q("Checkout: Sign in");jQuery(window).on("hashchange",function(){if("function"===typeof window.ClickTaleLogical&&"function"===typeof window.ClickTaleUploadPage)var b=setInterval(function(){jQuery(".js-checkout-load-spinner").is(":visible")||(w(),clearInterval(b),wa())},1500)});var w=function(){-1<document.location.href.toLowerCase().indexOf("/#checkout/payment")?setTimeout(function(){I();ClickTaleUploadPage();window.ClickTaleIncludedOnDomReady=e;N();E()},1E3):(I(),ClickTaleUploadPage(),window.ClickTaleIncludedOnDomReady=
e,N(),E())},aa=function(b){-1<document.location.href.toLowerCase().indexOf("/#checkout/payment")&&G(function(){return function(){window.ClickTaleIncludedOnDomReady=e;window.ClickTaleIncludedOnWindowLoad=e;ClickTaleUploadPage();N();E()}}(b),function(b){return function(){if(window.jQuery&&"function"===typeof jQuery.fn.on)return"COAC3PayCCBtn"==b&&!jQuery("section[data-view-name = 'creditcard']").hasClass("hide-content")||"COAC3PayGiftCardBtn"==b&&!jQuery("section[data-view-name = 'giftcard']").hasClass("hide-content")||
"COAC3PayPayPalBtn"==b&&!jQuery("section[data-view-name = 'paypal']").hasClass("hide-content")||"COAC3PayCashBtn"==b&&!jQuery("section[data-view-name = 'pip']").hasClass("hide-content")?e:i}}(b),250,40)},ba=function(){"function"===typeof window.ClickTaleFormDisableAll&&window.ClickTaleFormDisableAll();var b=jQuery(".col12.l-col6.accordion-col-alpha select:visible,.col12.l-col6.accordion-col-alpha input:visible, #COAC3PayBillAddrChkBox",".js-credit-card-identity.credit-card-identity.grid.accordion-form").toArray(),
a=jQuery("#COAC3PayReviewOrderBtn");X(b)&&X(a)&&(a=[a[0]],U="function"===typeof window.ClickTaleLogicalForm?window.ClickTaleLogicalForm("Payment Form",b,a):0)},E=function(){xa();if(jQuery("[data-view-name='shipping-address']").hasClass("expanded")&&!jQuery(".validation-wrap").is(":visible"))T=jQuery("form[data-view-name='global-ui-shipping-address-form']")[0],J("Checkout: shipping address");else if(jQuery("[data-view-name='pickup-person']").hasClass("expanded"))T=jQuery("form[name='pickupIdentity']")[0],
J("Checkout: pickup person");else if(jQuery("[data-view-name='payment']").hasClass("expanded")){jQuery("[data-view-name='payment'] section[data-view-name='giftcard']:not('.hide-content')").length&&J("Checkout: payment - Gift card");var b=jQuery("[data-view-name='payment'] section:not('.hide-content') > form");T=b[0];b.filter(".js-credit-info").length&&(J("Checkout: payment - credit card"),G(function(){return new function(){J("Checkout: payment - edit")}},function(){return jQuery(".credit-card-expanded").length?
e:i},200,15),G(ba,function(){return jQuery(".credit-card-identity").length?e:i},200,15));b.filter(".js-paypal-info").length&&J("Checkout: payment - PayPal");b.filter(".js-submit-cash-info").length&&J("Checkout: payment - Cash")}-1<document.location.href.indexOf("shipping-address")&&0<jQuery("#COAC2ShpAddrAddNewAddrLnk").length&&0==jQuery('.accordion-header-expanded.accordion-container:contains("Enter a pickup person"):visible').length&&0==jQuery('.accordion-header-expanded.accordion-container:contains("Select payment method"):visible').length&&
J("Add Address");-1<document.location.href.toLowerCase().indexOf("fulfillment")&&!jQuery(".js-fulfillment-groups-container").hasClass("expanded")?J("zip page"):-1<document.location.href.toLowerCase().indexOf("fulfillment")?J("Shipping and delivery: select shipping or delivery"):jQuery(".validation-wrap").is(":visible")&&J("Verify address");jQuery("#COPlaceOrderBtn:visible").length&&la()}}jQuery(document).on("ajaxComplete",function(b,a,c){"function"===typeof ClickTaleRebindEvents&&ClickTaleRebindEvents();
b="";-1<c.url.indexOf("adConfig=midas-v2&placementId=midas-v2&module=midas-v2&pageType=search")?(b=jQuery(".sponsored-container-middle").html(),0<b.length&&(H("jQuery('.sponsored-container-middle').html(unescape('"+escape(b)+"')).show();"),J(R+"sponsored products",e))):-1<c.url.indexOf("ajax=true")?p():(-1<c.url.indexOf("/product/shippingOptions/")||-1<c.url.indexOf("/product/api/"))&&setTimeout(function(){H("jQuery('#location-search-1').val('-----');");H("jQuery('.js-product-fulfillment-default-location.product-freight-default-location').text('Showing options for -----');")},
100)});jQuery(document).on("click keyup",function(b){b=jQuery(b.target);b.hasClass("js-sf-flyout-form")?J("All Pages: Store Locator",e):b.hasClass("js-searchbar")?J("All Pages: Search"):b.hasClass("js-footer-email-signup-form")&&J("All Pages: Sign Up")});jQuery(".js-sf-flyout-form").submit(function(){J("All Pages: Store Locator",e)});jQuery(document).mousedown(function(b){var a=b.target,c=jQuery(a),d=c.closest("a[href=#reviews]"),f=c.closest(".see-all-reviews");(X(d)||X(f))&&Q("item page clicked on reviews (R&R)");
c.is("span[itemprop='ratingCount']")&&d.length&&na(b,d[0]);d=c.closest("a.qa-question");(X(c.closest("a[href=#qa]"))||X(d))&&Q("item page clicked on Q&A");-1<S.indexOf("/ip/")&&(d=jQuery('.tempo-module-heading:contains("Customers also considered")').parents(".slick-module").find(".js-carousel-items"),X(c.closest(d))&&Q("item page clicked Customers also considered module",e));1===b.which&&(c.is(".nav-dropdown-container a")?Y(a,function(b){return function(){ma(b)}}(b)):(b=c.closest("button.js-nav-dropdown-toggle"),
X(b)?Y(a,function(b){return function(){var a=jQuery("button.js-nav-dropdown-toggle").index(b);H("jQuery('button.js-nav-dropdown-toggle').eq("+a+").click();")}}(b)):X(c.closest(".js-searchbar"))?(J("All Pages: Interacted with search box",e),a=jQuery(".js-searchbar-input").val(),H("jQuery('.js-searchbar-input').val('"+a+"').trigger('input');")):(b=c.closest(".nav-customer-list a.nav-customer-list-link"),X(b)?Y(a,function(b){return function(){var a=b.text(),a=jQuery.trim(a);J("All Pages: "+a)}}(b)):
X(c.closest(".header-cart a"))?Y(a,function(){J("All Pages: Shopping Cart")}):c.is("#oo_w_content > a[id]")?Y(a,function(b){return function(){var a=ra[b];a&&J("All Pages: "+a+" Feedback Clicked")}}(a.id)):(b=c.closest('[id^="nav-department-submenu-"] a'),X(b)?(a=b.closest("ul").find(".nav-flyout-heading").text(),(a=jQuery.trim(a))&&J("All Pages: Category Click: "+a)):X(c.closest(".carousel.js-carousel-one-up .items li"))?Y(a,function(){R&&J(R+"Click on carousel")}):(b=c.closest(".expander-content li"),
X(b)?(a=jQuery.trim(b.closest(".expander:not(.see-more)").children(".expander-toggle").text()))&&J(R+"interact with refiner: "+a,e):X(c.closest(".utility-bar-refiner .dropdown.js-flyout-toggle"))?(a=c.text().trim())&&J(R+"Refine "+a,e):(b=c.closest(".utility-bar-sorter .chooser-option-list>[class^=chooser-option]"),X(b)?Y(a,function(a){return function(){var b=jQuery(".utility-bar-sorter .chooser-option-list>[class^=chooser-option]").index(a);2>b&&H("jQuery('.utility-bar-sorter .chooser-option-list>[class^=chooser-option]').eq("+
b+").click();");R&&J(R+"Sort",e)}}(b)):X(c.closest(".product-media.js-product-media"))?J("Item page: Interact with product image",e):c.is(".variant-swatch")?J("Item page: Select color",e):(c.is(".submit-review-ratings-container .submit-review-ratings button[data-index = '0']")&&J("Review product - one star rating",e),c.is("label[for='recommend-friend-no']")&&J("would not recommend to a friend",e),c.closest("button").hasClass("js-tab-pickup-btn")&&setTimeout(function(){H("jQuery('#location-search-2').val('-----');");
H("jQuery('.js-product-fulfillment-default-location.product-freight-default-location').text('Showing options for -----');")},100))))))))});-1<S.indexOf("/ip/")&&(jQuery(".btn-link.js-tab-ship-btn.product-fulfillment-btn i, .btn-link.js-tab-ship-btn.product-fulfillment-btn b, .btn-link.js-tab-ship-btn.product-fulfillment-btn span").mouseup(function(b){Z(jQuery(".btn-link.js-tab-ship-btn.product-fulfillment-btn")[0],b)}),jQuery(".btn-link.js-tab-pickup-btn.product-fulfillment-btn a, .btn-link.js-tab-pickup-btn.product-fulfillment-btn b, .btn-link.js-tab-pickup-btn.product-fulfillment-btn span").mouseup(function(b){Z(jQuery(".btn-link.js-tab-pickup-btn.product-fulfillment-btn")[0],
b)}),jQuery(".product-media.js-product-media").mouseup(function(b){Z(jQuery(".product-image.js-product-image.js-product-primary-image")[0],b)}),jQuery(document).on("mouseup","#location-search-1, #location-search-2",function(b){"location-search-1"===jQuery(this).attr("id")?Z(jQuery("#location-search-1")[0],b):Z(jQuery("#location-search-2")[0],b)}),jQuery(".js-carousel-items.items.animate.slick-initialized .slick-slide").mouseup(function(b){var a=jQuery(".js-carousel-items.items.animate.slick-initialized .slick-slide").index(this);
Z(jQuery(".product-recommendations.top-product-recommendations .slick-list li img:eq("+a+")")[0],b)}),jQuery(".product-thumb.js-product-thumb.Selector").mouseup(function(a){var d=jQuery(".product-thumb.js-product-thumb.Selector").index(this);Z(jQuery(".product-thumb.js-product-thumb.Selector:eq("+d+")")[0],a)}),jQuery(".js-carousel-items.animate-vertical:eq(1) div").mouseup(function(a){jQuery(".js-carousel-items.animate-vertical:eq(1) div").index(this);Z(jQuery(".js-carousel-items.animate-vertical:eq(1) div a")[0],
a)}),jQuery.isFunction(jQuery.fn.on)&&(jQuery(".about-product-section .heading-a:contains('About this item')").on("mouseenter click",function(){J("about this item")}),jQuery(".btn-badge:contains('Specifications')").on("mouseenter click",function(){J("item page specifications")}),jQuery(".btn-badge:contains('Nutrition facts')").on("mousedown",function(){J("item page nutrition facts")}),jQuery(".btn-badge:contains('Supplement facts')").on("mousedown",function(){J("item page Supplemental facts")}),jQuery(".btn-badge:contains('Drug facts')").on("mouseenter click",
function(){J("item page Drug facts ")})));jQuery(".nav-dropdown.js-nav-dropdown.nav-dropdown-homepage button").mousedown(function(a){0<jQuery(this).length&&Z(jQuery(this)[0],a)});jQuery(document).click(function(a){var a=a.target,d=jQuery(a);d.hasClass("js-footer-feedback-opinion-lab")?(a=jQuery(".js-footer-feedback-opinion-lab").index(a),H("jQuery('.js-footer-feedback-opinion-lab').eq("+a+").click();"),J("All Pages: Feedback Clicked")):X(d.closest(".oo_w_close, .oo_cc_close, #oo_overlay, .oo_cc_wrapper > span"))||
"oo_w_container"===a.id?H("jQuery('.oo_w_close').click();"):d.is("button.js-expandcollapse-btn")?(a=jQuery("button.js-expandcollapse-btn").index(a),H("jQuery('button.js-expandcollapse-btn').eq("+a+").click();")):d.is(".js-facet-tab-btns button")?(a=jQuery(".js-facet-tab-btns button").index(a),H("jQuery('.js-facet-tab-btns button').eq("+a+").click();")):(d.is(".js-add-to-cart.js-btn-progress.add-to-cart")&&J("Item page: add to cart",e),d.is(".js-flyout-toggle.js-btn-add-to-list")&&J("Item page: add to list",
e),d.is(".js-flyout-toggle.js-btn-add-to-list")&&J("Item page: add to list",e),d.is(".js-btn-add-to-registry")&&J("Item page: add to registry",e))});if(-1<document.location.href.toLowerCase().indexOf("checkout")){jQuery(document).on("mousedown",function(a){var d=a.target,c=jQuery(d),f="",h=0;if(c.hasClass("js-form-save-button")){if(jQuery("#COAC1ShpOptChangeZipInp").hasClass("error"))return;var h=0,k=setInterval(function(){10>h?(h++,jQuery(".js-fulfillment-groups-container").hasClass("expanded")&&
!jQuery(".js-checkout-load-spinner").is(":visible")&&(clearInterval(k),setTimeout(function(){w()},1500))):clearInterval(k)},700)}f=c.closest("#COAC0WelAccntSignInBtn");X(f)&&(W="LogIn",J("Sign in: Sign in"),setTimeout(function(){t()},500));f=c.closest("#COAC0WelAccntSignUpBtn");X(f)&&(W="NewUser",J("Sign in: Create account"),setTimeout(function(){t()},500));f=c.closest(".js-shipping-opts.shipping-opts");X(f)&&J("Shipping and delivery: Interact with shipping",e);f=c.closest(".js-pickup-opts.pickup-opts");
X(f)&&J("Shipping and delivery: Interact with pickup",e);f=c.closest("#COAC1ShpOptPickUpAllLnk");X(f)&&Z(jQuery("#COAC1ShpOptPickUpAllLnk")[0],a);f=c.closest("#COAC3PayCCEditLnk0");X(f)&&Z(jQuery("#COAC3PayCCEditLnk0")[0],a);f=c.closest(".js-edit-credit-card");X(f)&&setTimeout(function(){P()},1E3);f=c.closest("#COAC1ShpOptSeeAllLnk");X(f)&&Z(jQuery("#COAC1ShpOptSeeAllLnk")[0],a);f=c.closest("#COAC3PayCCAddNewLnk");X(f)&&setTimeout(function(){P()},1500);f=c.closest("#COAC3PayAddaCardLnk");X(f)&&(H('window["giftCardButtons"]();'),
ya(),setTimeout(function(){P()},1500));f=c.closest("label[for = 'COAC3PayCashAddrChkBox']");X(f)&&setTimeout(function(){P()},100);c.is("#COAC3PayCardCancel")&&V!=g&&(H('jQuery(".js-gift-card-backdrop.gift-card-book-backdrop").addClass("hide-content");jQuery(".gift-card-form-flyout").removeClass("expanded")'),V.disconnect());c.is("#COAC1ShpCancelEditBtn")&&Z(jQuery("#COAC1ShpCancelEditBtn")[0],a);c.is("#global-email-signup-input")&&Z(jQuery("#global-email-signup-input")[0],a);c.is("#COAC1ShpOptContBtn")&&
(Z(d,a),J("Shipping and delivery: Continue",e));c.is("#COAC3PayReviewOrderBtn")&&J("Payment: Review your order",e);c.is("#COAC3ProceedPayPalBtn")&&(Z(jQuery("#COAC3ProceedPayPalBtn")[0],a),J("Payment: proceed to PayPal",e));c.hasClass("js-shipping-address-continue")&&(K(T),L(T),J("Shipping address: Continue",e),setTimeout(function(){0<jQuery(".required").length?(J("Shipping address: General error",e),M(T)):la(T)},700),setTimeout(function(){if(jQuery(".validation-wrap").is(":visible")){h=0;var a=setInterval(function(){10>
h?(h++,jQuery(".js-checkout-load-spinner").is(":visible")||(clearInterval(a),w())):clearInterval(a)},700)}},1200));c.is("[data-view-name='creditcard'] #COAC3PayReviewOrderBtn")&&(K(U),L(U),setTimeout(function(){0<jQuery(".js-server-alert-checkout:visible").length&&M(U)},400));c.hasClass("auto-submit-pickup-person")&&(K(T),L(T),J("Pickup person: continue",e),setTimeout(function(){0<jQuery(".required").length?(J("Pickup person: General error",e),M(T)):la(T)},700));if(c.hasClass("save-address-validation")){Z(jQuery(".save-address-validation")[0],
a);var h=0,p=setInterval(function(){10>h?(h++,jQuery(".accordion-module.checkout-payment-options.expanded").is(":visible")&&(clearInterval(p),setTimeout(function(){w()},600))):clearInterval(p)},500)}});var u=function(){var a=i;"NewUser"==W&&jQuery(".js-create-account.create-account .error-label.parsley-error-list").length&&(J("Sign in: General error"),a=e);"LogIn"==W&&jQuery(".signin-form .error-label.parsley-error-list").length&&(J("Sign in: General error"),a=e);!a&&jQuery(".alert-error.alert-block.active").length&&
J("Sign in: General error")},t=function(){G(u,function(){return!jQuery(".spinner:visible").length?e:i},600,50)};jQuery(document).on("click",function(a){a=a.target;jQuery(a).is("[data-view-name='payment'] input[name='radio-option-radio'][id]")&&"function"===typeof window.ClickTaleLogical&&"function"===typeof window.ClickTaleUploadPage&&(I(),aa(a.id))});jQuery(document).on("mousedown",function(a){jQuery(a.target).hasClass("edit-address-validation")&&(Z(jQuery(".edit-address-validation")[0],a),setTimeout(function(){w()},
700))});jQuery("#COAC1ShpOptPickUpAllLnk").mousedown(function(a){Z(jQuery("#COAC1ShpOptPickUpAllLnk")[0],a);setTimeout(function(){0<jQuery(".pickup-modal-content.scrollable.js-pickup-modal-content").length&&(jQuery(".pickup-modal-content.scrollable.js-pickup-modal-content")[0].onscroll=function(){var a=jQuery(".pickup-modal-content.scrollable.js-pickup-modal-content").scrollTop();H("jQuery('.pickup-modal-content.scrollable.js-pickup-modal-content').scrollTop(\""+a+"\", { duration: 'slow' });")})},
800)});E();var ya=function(){if(window.MutationObserver){var a=document.querySelector(".js-gift-card-form-flyout");V=new window.MutationObserver(function(a){a.forEach(function(){setTimeout(function(){var a="",b=jQuery(".js-gift-card-form-flyout #COAC3PayCardNbr").siblings().filter(".error-label.parsley-error-list"),d=jQuery(".js-gift-card-form-flyout #COAC3PayCardPin").siblings().filter(".error-label.parsley-error-list");if(jQuery(".js-gift-card-form .js-form-server-alert:visible").length){var f=
jQuery(".js-form-server-alert").html();jQuery(".js-gift-card-form .js-form-server-alert").hasClass("alert-warning")&&(a="jQuery('.js-gift-card-form').prepend(\"<span class='js-form-server-alert alert alert-warning alert-block active'></span>\"); jQuery('.js-gift-card-form .js-form-server-alert').html(unescape('"+escape(f)+"'))");jQuery(".js-gift-card-form .js-form-server-alert").hasClass("alert-error")&&(a="jQuery('.js-gift-card-form').prepend(\"<span class='js-form-server-alert alert alert-error alert-block active'></span>\"); jQuery('.js-gift-card-form .js-form-server-alert').html(unescape('"+
escape(f)+"'))");H("jQuery('.js-form-server-alert').remove();"+a)}(b.length||jQuery("#COAC3PayCardNbr").val().length&&!b.length)&&H('jQuery(".js-gift-card-form-flyout #COAC3PayCardNbr").siblings().filter(".error-label.parsley-error-list").remove();jQuery(".js-gift-card-form-flyout #COAC3PayCardNbr").siblings().filter(".validation-marker").remove(); jQuery("#COAC3PayCardNbr").css("border-color","#79b9e7");');(d.length||jQuery("#COAC3PayCardPin").val().length&&!d.length)&&H('jQuery(".js-gift-card-form-flyout #COAC3PayCardPin").siblings().filter(".error-label.parsley-error-list").remove();jQuery(".js-gift-card-form-flyout #COAC3PayCardPin").siblings().filter(".validation-marker").remove(); jQuery("#COAC3PayCardPin").css("border-color","#79b9e7");');
b.length&&(a=b.html(),H('jQuery(".js-gift-card-form-flyout .validation-group:eq(0)").append("<div class=\'error-label parsley-error-list\'></div>"); jQuery("#COAC3PayCardNbr").css("border-color","#f42121"); jQuery(".js-gift-card-form-flyout .validation-group:eq(0)").append("<i class=\'validation-marker validation-marker-error\'><span class=\'visuallyhidden\'></span></i>"); jQuery(".error-label.parsley-error-list:eq(0)").html(unescape("'+escape(a)+'"));'));d.length&&(a=d.html(),H('jQuery(".js-gift-card-form-flyout .validation-group:eq(1)").append("<div class=\'error-label parsley-error-list\'></div>"); jQuery("#COAC3PayCardPin").css("border-color","#f42121"); jQuery(".js-gift-card-form-flyout .validation-group:eq(1)").append("<i class=\'validation-marker validation-marker-error\'><span class=\'visuallyhidden\'></span></i>"); jQuery(".error-label.parsley-error-list:eq(1)").html(unescape("'+
escape(a)+'"));'))},500)}.b(500))});V.observe(a,{childList:e,characterData:e,subtree:e})}}}}}window.addEventListener("onbeforeunload",function(){var a=ClickTaleDetectAgent();a.t==a.IE&&9==a.v&&I()},i);
(function(a){function d(){2==++window.okToStartOn2&&a()}window.okToStartOn2=0;ka(function(){d()});if("undefined"!==typeof window.ClickTaleIsRecording&&window.ClickTaleIsRecording()===e)d();else{var f=window.ClickTaleOnRecording||function(){};window.ClickTaleOnRecording=function(){d();return f.apply(this,arguments)}}})(function(){G(va,function(){return window.jQuery&&"function"===typeof jQuery.fn.on?e:i},250,40)});
function xa(){if("object"==typeof window.s_omni&&"string"==typeof window.s_omni.prop20)for(var a=document.location.href.toLowerCase(),d="",f=i,h=window.s_omni.prop20.split(","),k=0;k<h.length;k++)"undefined"!=typeof h[k]&&h[k].length&&"0|0"!=h[k]&&(f=i,-1<a.indexOf("/ip/")?(f=e,d="A/B test - Item Page - "):-1<a.indexOf("/cp/")?(f=e,d="A/B test - Category Page - "):-1<a.indexOf("/checkout/#checkout")?(f=e,d="A/B test - Checkout Page "):"/"==document.location.pathname&&(f=e,d="A/B test - Home Page - "),
f&&Q(d+h[k]))}function wa(){jQuery(".btn-badge:contains('Supplement facts')").length&&oa(jQuery(".btn-badge:contains('Supplement facts')")[0],"CustomIDSupplementalFacts");jQuery(".btn-badge:contains('Nutrition facts')").length&&oa(jQuery(".btn-badge:contains('Nutrition facts')")[0],"CustomIDNutritionFacts");jQuery("#COAC1ShpOptContBtn").length&&oa(jQuery("#COAC1ShpOptContBtn")[0],"CustomIDCOAC1ShpOptContBtn")};})(); }


window.ClickTaleRulesMetaData = {"Data":[{"Rule":"{\"Action\":{\"actionType\":\"EventAction\",\"params\":{\"eventName\":\"test event for tips and ideas - visual editor\"}},\"Trigger\":{\"event\":\"click\",\"elements\":[[{\"tagCode\":2884,\"index\":0},{\"tagCode\":40,\"elementID\":\"top\",\"index\":0},{\"tagCode\":2884,\"index\":1},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2830,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":1},{\"tagCode\":117,\"index\":0},{\"tagCode\":76,\"index\":2},{\"tagCode\":1,\"index\":0}]]},\"Location\":{}}"},{"Rule":"{\"Action\":{\"actionType\":\"EventAction\",\"params\":{\"eventName\":\"Item page - clicked on Customers Also Considered\"}},\"Trigger\":{\"event\":\"click\",\"elements\":[[{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":307,\"index\":0},{\"tagCode\":307,\"index\":3},{\"tagCode\":2884,\"index\":1},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":1},{\"tagCode\":2884,\"index\":1}]]},\"Location\":{\"urlMode\":\"StartsWith\",\"url\":\"http://www.walmart.com/ip\"}}"},{"Rule":"{\"Action\":{\"actionType\":\"EventAction\",\"params\":{\"eventName\":\"Item page - Clicked on 360 rotation link\"}},\"Trigger\":{\"event\":\"click\",\"elements\":[[{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":307,\"index\":0},{\"tagCode\":307,\"index\":3},{\"tagCode\":2884,\"index\":1},{\"tagCode\":2884,\"index\":8},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":1},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":2},{\"tagCode\":307,\"index\":1},{\"tagCode\":307,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":1},{\"tagCode\":2884,\"index\":1},{\"tagCode\":117,\"index\":0},{\"tagCode\":76,\"index\":0},{\"tagCode\":1,\"elementID\":\"WMItemVideoLnk\",\"index\":0}]]},\"Location\":{\"urlMode\":\"StartsWith\",\"url\":\"http://www.walmart.com/ip\"}}"},{"Rule":"{\"Action\":{\"actionType\":\"EventAction\",\"params\":{\"eventName\":\"Item page - Clicked on write a review\"}},\"Trigger\":{\"event\":\"click\",\"elements\":[[{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":307,\"index\":0},{\"tagCode\":307,\"index\":3},{\"tagCode\":2884,\"index\":1},{\"tagCode\":2884,\"index\":10},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":1},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2406,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":1},{\"tagCode\":1,\"elementID\":\"WMItemWriteReviewLnk\",\"index\":0}]]},\"Location\":{\"urlMode\":\"StartsWith\",\"url\":\"http://www.walmart.com/ip\"}}"},{"Rule":"{\"Action\":{\"actionType\":\"EventAction\",\"params\":{\"eventName\":\"test-allpages-360\"}},\"Trigger\":{\"event\":\"click\",\"elements\":[[{\"tagCode\":2884,\"index\":0},{\"tagCode\":307,\"index\":0},{\"tagCode\":307,\"index\":3},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":1},{\"tagCode\":2884,\"index\":10},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":1},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":2},{\"tagCode\":307,\"index\":1},{\"tagCode\":307,\"index\":0},{\"tagCode\":307,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":0},{\"tagCode\":2884,\"index\":1},{\"tagCode\":2884,\"index\":1},{\"tagCode\":117,\"index\":0},{\"tagCode\":76,\"index\":0},{\"tagCode\":1,\"elementID\":\"WMItemVideoLnk\",\"index\":0}]]},\"Location\":{}}"}]};
!function(){var l=!0,m=null,n=!1,o=this;function q(a,d){var c=a.split("."),b=o;!(c[0]in b)&&b.execScript&&b.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&void 0!==d?b[f]=d:b=b[f]?b[f]:b[f]={}};var r;var s=n;function t(){return l}var u=n,v={},w={};function x(a){r.console&&r.console.log(a)}function y(a,d){var c=d.firstChild,b=d.ClickTale;b&&"CustomID"in b&&(b=b.CustomID,b||(b in a?(v[b]=l,x("duplicate registration of custom id "+b+"were found on multiple elements")):a[b]=d));for(;c;c=c.nextSibling)1===c.nodeType&&y(a,c)}function z(a){u||(a.c=A(a.c),u=l)}function B(a,d){D(a).CustomID=d}
function A(a){return function(d,c){c in w?(v[c]=l,x("duplicate registration of custom id "+c+" were found on multiple elements")):(a(d,c),s&&(w[c]=d))}}var E=A(B);function D(a){var d=a.ClickTale;d||(d={},a.ClickTale=d);return d}function F(a){return r.getComputedStyle?r.getComputedStyle(a,m):a.currentStyle}var G={};function H(a){G[a]||(G[a]=(a.charCodeAt(0)-64&31)+((a.charCodeAt(1)-64&28)<<3)+((a.charCodeAt(2)-64&30)<<7));return G[a]}
function I(a,d){for(var c=t,b=0,f=d.length,g=n,h=m,k=m,c=c||t,e=0;a&&e<f;e++){g=n;k=d[e];for(h=a.firstChild,b=0;!g&&h;h=h.nextSibling)1===h.nodeType&&H(h.tagName)===k.tagCode&&(b===k.index&&c(h)&&(g=l,a=h),b++)}return(g=g&&"none"!==F(a).display.toLowerCase())?a:m}function K(a,d){var c;if(a.map)c=a.map(d,void 0);else{c=[];for(var b=a.length,f=window,g=0;g<b;g++)c.push(d.call(f,a[g],g))}return c}
function L(a,d,c){for(var b=n,f=m,g=a.ownerDocument,h=d.length,k=h,e={},i,c=c||t;0<k;k--){var j=d[k-1];if(j.customID){if(j.customID in v&&v[j.customID])return x("duplicate custom id "+j.customID+" were found on multiple elements"),{};f=w[j.customID];b=!!f;if(!b)return{}}if(!b&&j.elementID){try{i=g.querySelectorAll("#"+j.elementID),i.length||(i=g.querySelectorAll("[id='"+j.elementID.replace(/'/g,"\\'")+"']"))}catch(O){i=g.querySelectorAll("[id='"+j.elementID.replace(/'/g,"\\'")+"']")}i&&(1===i.length?
(f=i[0],b=!!f):1<i.length&&x("duplicate id "+j.elementID+" were found on multiple elements"))}if(!b&&j.name&&(j.tagCode===H("input")||j.tagCode===H("select")||j.tagCode===H("textarea"))){i=d.slice(0,k-1);b=M(a,i);i=g.getElementsByName(j.name);if(b){var p=m;if(1<i.length){for(var J=l,C=0;C<i.length;C++)if(p=i[C],N(b,p)&&"radio"!==p.type.toLowerCase()){J=n;break}J?f=I(b,d):x("duplicate name "+j.name+" found on multiple non radio elements")}else 1===i.length&&(p=i[0],N(b,p)&&(f=p))}b=!!f}if(b&&c(f))return a=
d.slice(k,h),e.b=a,e.a=f,e;b=n}e.b=d;e.a=a;return e}function N(a,d){var c=d;do{if(a===c)return l;if("form"===c.tagName.toLowerCase())break}while((c=c.parentNode)&&1===c.nodeType);return n}function M(a,d){var c=L(a,d,function(a){return 1===a.nodeType&&"form"===a.tagName.toLowerCase()});return c?c.a:m};q("ct.ElementAddressing.bootstrap",function(a,d){d=!!d;r=a;a.c=B;a.document.addEventListener?a.document.addEventListener("DOMContentLoaded",function(){var c=d;z(a);c&&y(w,a.document.documentElement);s=l},n):document.attachEvent("onreadystatechange",function(){if("complete"===document.readyState){var c=d;z(a);c&&y(w,a.document.documentElement);s=l}})});
q("ct.ElementAddressing.elementFromPath",function(a,d,c){var b=!(a[0]instanceof Array);b&&(a=[a]);a=K(a,function(a){a=L(d,a,t);a.a&&0<a.b.length&&(a.a=I(a.a,a.b));return!c&&a.a&&"hidden"===F(a.a).visibility.toLowerCase()?m:a.a});return b?a[0]:a});
q("ct.ElementAddressing.pathFromElement",function(a,d){var c=0,b,f=0,g=m,h=[],k=m;b=m;var e=a;if(!d)return window.console&&window.console.log("Base element was not specified"),h;for(;e&&e!==d;)if(1!==e.nodeType)e=e.parentNode;else{f=0;g={};a=e;c=H(e.nodeName);g.tagCode=c;if(b=D(a).CustomID)g.customID=b;e.id&&(g.elementID=e.id);b=e.attributes;if((k=b.getNamedItem("name"))&&k.value)g.name=k.value;for(b=e;b=b.previousSibling;)H(b.nodeName)===c&&f++;g.index=f;e=e.parentNode;h.push(g)}h.reverse();return h});
q("ct.ElementAddressing.elementAndVisibilityFromPath",function(a,d){var c=!(a[0]instanceof Array);c&&(a=[a]);var b=K(a,function(a){a=L(d,a,t);a.a&&0<a.b.length&&(a.a=I(a.a,a.b));if(a.a){var b={};b.dom=a.a;b.isHidden="hidden"===F(a.a).visibility.toLowerCase();a=b}else a=m;return a});return c?b[0]:b});q("ct.ElementAddressing.setCustomElementID",E);}();
if (typeof ctlogger=== 'undefined') {

    var ctlogger= {
        levels: {"off":0, "on":1 },
    }
    
    ctlogger.level = ctlogger.levels.off,
    ctlogger.setLogLevel = function (levelSelected) { this.level = levelSelected; },
    ctlogger.enableDebug = function() {

        ctlogger.level = ctlogger.levels.on;

        if (typeof (Storage) !== "undefined") {
            sessionStorage.setItem("ctlogger.level.on", true);
        }


    },
    ctlogger.disableDebug = function () { ctlogger.level = ctlogger.levels.off; },
    ctlogger.isDebug = function () { return ctlogger.level == ctlogger.levels.on; },
    ctlogger.checkSiteForDebugMode = function() {

        var loc = window.location.href;
        var urlParts = loc.split('?');
        if (urlParts.length == 2) {

            var qs = urlParts[1];
            var qsParams = qs.split('&');
            for (var i = 0; i < qsParams.length; i++) {
                var pair = qsParams[i].split('=');
                var name = decodeURIComponent(pair[0]).toLowerCase();
                if (pair.length == 2 && (name == "ct" || name == "clicktale") && decodeURIComponent(pair[1]).toLowerCase().indexOf("debug")>-1) {
                    ctlogger.setLogLevel(ctlogger.levels.on);
                } 
            }
        }

    },
    ctlogger.log = function () {

        if (!ctlogger.isDebug()) {

            if (typeof (Storage) !== "undefined") {
                var enabledIsStorage = sessionStorage.getItem("ctlogger.level.on");
                if (enabledIsStorage == "true") {
                    ctlogger.level = ctlogger.levels.on;
                }
            }
        }

        if (window.console && (ctlogger.level != ctlogger.levels.off || ctlogger.checkSiteForDebugMode())) {
            console.log("clicktale.visualEditor.common.logger: ", arguments);
        }
    }
}
var CTrulesImplementationUtils = {

    create: function(o, properties) {
        if (Object.create) {
            return Object.create(o, properties);
        } else {//polyfill Object.create method if not supported by the browser 
            
            if (typeof o !== 'object' && typeof o !== 'function') throw new TypeError('Object prototype may only be an Object: ' + o);
            else if (o === null) throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");

            if (typeof properties != 'undefined') throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");

            function F() {}

            F.prototype = o;

            return new F();
        }
    },

    isEmptyObject: function (obj) {
        var name;
        for (name in obj) {
            return false;

        }
        return true;

    },
    validateRuleLocation: function (location, documentUrl) {

        var valid = false;
        if (CTrulesImplementationUtils.isEmptyObject(location)) //all pages
        {
            valid = true;
        }
        else
        {


            var url = documentUrl.toLowerCase().trim().replace(/\/$/, "");
            var currentRuleLocation = location.url.toLowerCase().trim().replace(/\/$/, "");
            

            switch (location.urlMode) {

                case "Equals":
                    if (url == currentRuleLocation) valid = true;
                    break;
                case "StartsWith":
                    if (url.indexOf(currentRuleLocation) == 0) valid = true;
                    break;
                case "Contains":
                    if (url.indexOf(currentRuleLocation) > -1) valid = true;
                    break;
                }
        }

        return valid;

    },
};

//for ie8
if (typeof String.prototype.trim !== 'function') {
    String.prototype.trim = function () {
        return this.replace(/^\s+|\s+$/g, '');
    }
}
var BaseAction = {

    execute: function () { throw ("execute is not implemented"); }
}

var EventAction = CTrulesImplementationUtils.create(BaseAction);

EventAction.execute = function (eventAction) {

    var params = eventAction.params || eventAction.parameters; //compatability
    var eventName = params.name || params.eventName; //compatability
    ctlogger.log("create event action: ", eventName);
    return ClickTaleEvent(eventName);

}
var ct_tag = EventAction; //compatability

var abstractListener = {
    constructor: function () {

        if (!this._registered) {
            RuleManager.registerListener(this);
            this._registered = true;
        }

    },
    startListen: function () { throw ("method not implemented"); },
    registerRule: function () { throw ("method not implemented"); },

}


var clickListener = CTrulesImplementationUtils.create(abstractListener);

clickListener.startListen = function () {

    if (!CTrulesImplementationUtils.isEmptyObject(clickListener._rulesList)) {
        if (window.addEventListener) {
            document.addEventListener("mousedown", function (e) { clickListener._onMouseDown(e); }, false);
            document.addEventListener("mouseup", function (e) { clickListener._onMouseUp(e); }, false);
        } else {
            document.attachEvent("onmousedown", function (e) { clickListener._onMouseDown(e); });
            document.attachEvent("onmouseup", function (e) { clickListener._onMouseUp(e); }, false);
        }

    }
};
clickListener.registerRule = function(rule) {

	abstractListener.constructor.call(this);


	if (!rule.Trigger.hasOwnProperty("elements")) {
		//compatability mode.
		clickListener.bindElementRule(rule, rule.Trigger.elementSelection);
	} else {
		for (var i = 0; i < rule.Trigger.elements.length; i++) {
			clickListener.bindElementRule(rule, rule.Trigger.elements[i]);
		}
	}
}

clickListener.bindElementRule = function (rule, elementAddressingPath) {

    var selectedElementStr = JSON.stringify(elementAddressingPath);

    ctlogger.log("EA path: " + selectedElementStr);

    var obj = ct.ElementAddressing.elementFromPath(elementAddressingPath, document.body, true);

    if (ctlogger.isDebug() && obj && obj.outerHTML) {
        ctlogger.log("Dom element is: ", obj.outerHTML);
    }
    if (clickListener._rulesList == null) {
        clickListener._rulesList = [];
    }

    if (typeof (clickListener._rulesList[selectedElementStr]) == "object") {

        clickListener._rulesList[selectedElementStr].rules.push(rule);
    } else {

        clickListener._rulesList[selectedElementStr] = { selectedElement: obj, rules: [rule] };
    }

    clickListener._attachRulesToElement(obj, rule);


};

clickListener._rulesList = null;
clickListener._currentMouseDownElement = null;

clickListener._onMouseDown = function (e) {

    clickListener._currentMouseDownElement = e.target || e.srcElement;

};
clickListener._onMouseUp = function (e) {

    var startTime = null;

    try {

        var domElement = e.target || e.srcElement;

        ctlogger.log("detected mouse up on: " + domElement.outerHTML);

        if (domElement == clickListener._currentMouseDownElement) {

            startTime = new Date();
            while (domElement != null) {

                clickListener._setElementRules(domElement);

                for (var i = 0; i < domElement.ClickTale.CTrules.length; i++) {

                    var rule = domElement.ClickTale.CTrules[i];
                    if (CTrulesImplementationUtils.validateRuleLocation(rule.Location, document.location.href)) {

                        window[rule.Action.actionType].execute(rule.Action);
                    }

                }

                domElement = domElement.parentElement;

            }
        } else {
            ctlogger.log("no mouse down found on: " + domElement);
        }
        
        if (startTime != null) {
            ctlogger.log("Event Processing Time: " + (new Date() - startTime) / 1000 + " sec");
        }


    } catch (e) {
        ctlogger.log("onmouse up " + e);
    }


};
clickListener._attachRulesToElement = function (domElement, ruleObj) {

    if (domElement) {
        if (typeof (domElement.ClickTale) == "undefined" || domElement.ClickTale == null) {
            domElement.ClickTale = {};
        }

        if (typeof (domElement.ClickTale.CTrules) == "undefined" || domElement.ClickTale.CTrules == null) {
            domElement.ClickTale.CTrules = [];
        }

        if (ruleObj != null) {
            domElement.ClickTale.CTrules = domElement.ClickTale.CTrules.concat(ruleObj);
        }

    }
};
clickListener._setElementRules = function (domElement) {

    if (!domElement.ClickTale || !domElement.ClickTale.CTrules) {

        var elementRules = [];
        for (var selectedElementStr in clickListener._rulesList) {
            var selectedDomElement = clickListener._rulesList[selectedElementStr].selectedElement;

            if (selectedDomElement == null) {
                try {
                    selectedDomElement = ct.ElementAddressing.elementFromPath(JSON.parse(selectedElementStr), document.body, true);
                } catch (e) {
                    ctlogger.log("error on finding element onMouseUp  " + e);
                }

            }

            if (selectedDomElement != null && selectedDomElement == domElement) {
                elementRules = elementRules.concat(clickListener._rulesList[selectedElementStr].rules);
            }
        }

        if (elementRules.length == 0) {
            elementRules = null;
        }
        clickListener._attachRulesToElement(domElement, elementRules);

    }

}
var RuleManager = {
    _listeners: [],
    registerListener: function (listener) { RuleManager._listeners.push(listener); },
    engageListeners: function() {

        for (i=0; i< RuleManager._listeners.length; i++) {
            RuleManager._listeners[i].startListen();
        }
        

    },
    dispatchRules: function(rules) {

        ctlogger.log("parsing rules ");


        for (var i = 0; rules.Data && i < rules.Data.length; i++) {
            try {

                if (rules.Data[i].Rule) {

                    ctlogger.log(i + ") parsing: ", rules.Data[i].Rule);
                    var rule = JSON.parse(rules.Data[i].Rule);
                    
                    window[rule.Trigger.event + "Listener"].registerRule(rule);

                }
            } catch (e) {

                ctlogger.log(i + ") rule: cannot be parsed ");

            }

        }


    }

};
/*window.ClickTaleRulesMetaData = [{"Trigger"sss:{"triggerTypes":"UserEvents","event":"click","elementSelection":[{"tagCode":2884,"elementID":"container","index":2},{"tagCode":2884,"elementID":"main","index":0},{"tagCode":2884,"elementID":"mainContent","index":0},{"tagCode":2884,"index":0},{"tagCode":2884,"index":0},{"tagCode":2884,"index":0},{"tagCode":2884,"index":0},{"tagCode":2884,"index":1},{"tagCode":2884,"elementID":"body_0_mcgContainer","index":0},{"tagCode":2884,"elementID":"body_0_rptMCG_sblMCContainer_3","name":"NOV-HP-LP-Alexa-Chung","index":3},{"tagCode":2884,"index":0},{"tagCode":2884,"elementID":"body_0_rptMCG_ctl00_3_rptMC_3_ctl00_0_rptMosaic_0_ctl00_0_imageElement_0","index":0},{"tagCode":873,"index":0}]},"Location":{4444"urlMode":"Equals","url":"http://de.tommy.com/___$ttty?"},"Action":{"actionType":"ct_tag","parameters":{"6666name":"img_w"}}}
];
*/

(function () {// CTrulesImplementation = {
    var ClickTaleRuleImplementationOkToStartOn2 = 0;

    function init () {


        //window['ClickTaleRuleImplementationOkToStartOn2'] = 0;

        function allReady() {
            if (2 == ++ClickTaleRuleImplementationOkToStartOn2) {
                
                interpreterRulesToCode();
            }
        }

        onDomReady(function () {
            allReady();
        });

        if (typeof window['ClickTaleIsRecording'] !== 'undefined' && window['ClickTaleIsRecording']() === true) {
            allReady();
        }
        else {
            var prevClickTaleOnRecording = window['ClickTaleOnRecording'];
            window['ClickTaleOnRecording'] = function () {

                allReady();
                if (typeof prevClickTaleOnRecording !== 'undefined' && typeof prevClickTaleOnRecording == "function") {
                     prevClickTaleOnRecording.apply(this, arguments);
                }
                

            }
        }



    }

    function onDomReady(handler) {

        var called = false;

        function ready() {
            if (called) { return; }

            called = true;
            handler();
        }

        if (document.readyState === "complete" || document.readyState === "interactive") {
            ready();
            return;
        }
        else if (document.addEventListener) { // native event
            document.addEventListener("DOMContentLoaded", ready, false);
        }
        else if (document.attachEvent) { // IE

            try {
                var isFrame = window.frameElement != null;
            } catch (e) { }

            // IE, the document is not inside a frame
            if (document.documentElement.doScroll && !isFrame) {
                function tryScroll() {
                    if (called)
                        return;
                    try {
                        document.documentElement.doScroll("left");
                        ready();
                    } catch (e) {
                        setTimeout(tryScroll, 10);
                    }
                }
                tryScroll();
            }

            // IE, the document is inside a frame
            document.attachEvent("onreadystatechange", function () {
                if (document.readyState === "complete") {
                    ready();
                }
            });
        }

        // Old browsers
        if (window.addEventListener) {
            window.addEventListener('load', ready, false);
        } else if (window.attachEvent) {
            window.attachEvent('onload', ready);
        } else {
            var fn = window.onload; // very old browser, copy old onload
            window.onload = function () { // replace by new onload and call the old one
                fn && fn();
                ready();
            }
        }
    }

    function interpreterRulesToCode() {
        //init - only on windowload
        //CT.DMZ.ElementAddressing.mapElementsOnDomReady(window);

      
        
        try {
            ct.ElementAddressing.bootstrap(window, true);
            if (window.ClickTaleRulesMetaData) {
                //CTrulesImplementationTrigger.init(window.ClickTaleRulesMetaData);
                RuleManager.dispatchRules(window.ClickTaleRulesMetaData);
                RuleManager.engageListeners();
            }
            
        } catch (e) {
            
            ctlogger.log("interpreterRulesToCode: " + e);
        }
    }

   window.CTrulesImplementation= init;

    init();
})();
