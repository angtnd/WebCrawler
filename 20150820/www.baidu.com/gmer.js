window.GMER=window.GMER||{},!function(t){function i(){this.items=[],this.lastFrame=(new Date).getTime(),this.xScroll=0,this.yScroll=0,this.canvas=null,this.width=500,this.height=350,i.instance=this}function e(t,i,e){window.attachEvent?(t.attachEvent("on"+i,e),window.event&&(window.event.cancelBubble=!0)):t.addEventListener(i,e,!1)}function s(t,i){function e(){o++,o>=t.length&&i(n)}function s(t){var i=new Image;return i.src=t,i.complete?(e(),void n.push(i)):(window.ActiveXObject?i.onreadystatechange=function(){("complete"==i.readyState||"loaded"==i.readyState)&&e()}:i.onload=function(){e()},i.onerror=function(){e()},void n.push(i))}var n=[],o=0;t="object"!=typeof t?[t]:t;for(var r=0;r<t.length;r++)s(t[r])}function n(t,i){var e=t.currentStyle?t.currentStyle:window.getComputedStyle(t,null);return e.getAttribute?(r&&(i=i.replace(/([A-Z])/g,"-$1").toLowerCase()),e.getAttribute(i)):e.getPropertyValue(i)}for(var o=function(t){return"[object Array]"===Object.prototype.toString.apply(t)},r=!window.XMLHttpRequest,a=navigator.userAgent.indexOf("MSIE 7.0")>0,h=0,l=0,c=null,d=null,u=["","ms","moz","webkit","o"],p=0;p<u.length&&!c;++p)c=window[u[p]+"RequestAnimationFrame"],d=window[u[p]+"CancelAnimationFrame"]||window[u[p]+"CancelRequestAnimationFrame"];c&&d||(c=function(t){return setTimeout(t,l)},d=clearTimeout(h)),i.prototype.init=function(t){return t?(this.canvas=t,this.width=parseInt(n(this.canvas,"width")),this.height=parseInt(n(this.canvas,"height")),this):void 0},i.prototype.pause=function(){d(h)},i.prototype.start=function(){var t=function(){i.instance.draw(),h=c(t)};h=c(t)},i.prototype.draw=function(){var t=(new Date).getTime(),i=t-this.lastFrame;if(this.lastFrame=t,this.canvas)for(var e=0,s=this.items.length;s>e;e++){var n=this.items[e];n&&(n.update&&n.update(i,this),n.draw&&n.draw(i,this))}},i.prototype.addEvent=function(t){for(var s=0;s<t.length;s++)e(document,t[s],function(t){if(h)for(var e=i.instance,s=t.type,n=0;n<e.items.length;n++){var o=e.items[n];s in o&&o[s].call(o,t)}})},i.prototype.add=function(t,i){var e=o(t)?t:[t];i=i||this.canvas;for(var s=0;s<e.length;s++){var n=e[s];n.dom&&i.appendChild(n.dom),this.items.push(n)}},i.prototype.remove=function(t,i){if(t)for(var e=0,s=this.items.length;s>e;e++)if(this.items[e]==t)return this.items.splice(e,1),void(t.dom&&!i&&t.dom.parentNode.removeChild(t.dom))},i.prototype.clear=function(){for(var t=0;t<this.items.length;t++)this.remove(this.items[t])},t.util={isArray:o,bind:e,preload:s,isIE6:r,isIE7:a,getCss:n},t.GManager=i}(GMER),!function(t){function i(t,i){var s=document.createElement("audio");e=!!s.canPlayType,e?(s.src=t,s.preload="auto",i&&(s.loop="loop")):(s=document.createElement("embed"),s.type="audio/mp3",s.src=t,s.autostart=!1,s.loop=i||!1,s.hidden=!0),this.audio=s,document.body.appendChild(s)}var e=!0;i.prototype.load=function(t){t&&(this.audio.src=t)},i.prototype.setLoop=function(t){return!t&&this.audio.loop?void this.audio.removeAttribute("loop"):void this.audio.setAttribute("loop","true")},i.prototype.play=function(){"play"in this.audio&&this.audio.play()},i.prototype.pause=function(){"pause"in this.audio&&this.audio.pause()},i.prototype.stop=function(){e?this.audio.load():this.audio.stop()},i.prototype.destory=function(){document.body.removeChild(this.audio)},t.Audio=i}(GMER.util),!function(t){function i(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.img=s||"",this.sx=0,this.sy=0,this.osx=0,this.osy=0,this.factor=0,this.fps=1,this.tfs=0,this.tlastf=0,this.running=!1,this.w=0,this.h=0,this.r=0;var n=document.createElement("div");n.style.cssText="position:absolute;z-index:"+this.z+";backgound-color:none;",s&&(n.style.cssText+='background-repeat:no-repeat;background-image:url("'+s+'");'),this.dom=n}i.prototype.init=function(t,i,e){this.sx=this.osx=t.x||0,this.sy=this.osy=t.y||0,this.w=t.w||0,this.h=t.h||0,this.r=t.r||0,this.fps=i||0,this.factor=e||0,this.tfs=this.tlastf=0==this.fps?0:1e3/this.fps,this.flush()},i.prototype.set=function(t,i){if(t)for(var e in t)this[e]=t[e];!1!==i&&this.flush()},i.prototype.draw=function(t,i){this.running&&(this.tlastf-=t,this.tlastf<0&&(this.tlastf=this.tfs,this.x+=i.xScroll*this.factor,this.y+=i.yScroll*this.factor,this.flush()))},i.prototype.flush=function(){var t=this.x-this.w/2,i=this.y-this.h/2,e=this.dom;e.style.backgroundPosition=-this.sx+"px "+-this.sy+"px",e.style.top=i+"px",e.style.left=t+"px",e.style.width=this.w+"px",e.style.height=this.h+"px"},i.prototype.run=function(){this.running=!0},i.prototype.stop=function(){this.running=!1},t.GObjectBody=i}(GMER),!function(t){function i(i,e,s,n){t.GObjectBody.call(this,i,e,s,n),this.dom.style.backgroundRepeat="repeat"}i.prototype=new t.GObjectBody,i.prototype.draw=function(t,i){this.running&&(this.tlastf-=t,this.tlastf<0&&(this.tlastf=this.tfs,this.sx-=i.xScroll*this.factor,this.sy-=i.yScroll*this.factor,this.flush()))},t.GObjectRepeat=i}(GMER),!function(t){function i(i,e,s,n){t.GObjectBody.call(this,i,e,s,n),this.frames=[],this.minFrame=0,this.repeat=!1,this.curFrame=0,this.fcnt=0,this.loopcnt=0,this.fn=null}i.prototype=new t.GObjectBody,i.prototype.init=function(i,e,s){if(this.fps=e||0,this.factor=s||0,this.tfs=this.tlastf=0==this.fps?0:1e3/this.fps,t.util.isArray(i)&&i.length>0){this.frames=i,this.fcnt=this.frames.length;var n=i[0];this.sx=this.osx=n.x||0,this.sy=this.osy=n.y||0,this.w=n.w||0,this.h=n.h||0,this.r=n.r||0,this.flush()}},i.prototype.addFrame=function(t){this.frames.push(t),this.fcnt=this.frames.length},i.prototype.clearFrames=function(){this.frames=[],this.fcnt=0},i.prototype.setRepeat=function(t){this.repeat=t},i.prototype.setCurFrame=function(t){t<this.frames.length&&(this.curFrame=t,this.flush())},i.prototype.setCallBack=function(t){this.fn=t},i.prototype.setMinFrame=function(t){this.minFrame=t},i.prototype.draw=function(t,i){this.running&&(this.tlastf-=t,this.tlastf<0&&(this.tlastf=this.tfs,this.x+=i.xScroll*this.factor,this.y+=i.yScroll*this.factor,this.flush(),++this.curFrame>=this.fcnt&&(this.repeat?this.curFrame=this.minFrame:(this.curFrame=this.fcnt-1,this.running=!1),this.fn&&this.fn.call(this,++this.loopcnt))))},i.prototype.flush=function(){var t=this.frames[this.curFrame];this.sx=t.x,this.sy=t.y,this.w=t.w,this.h=t.h,this.r=t.r;var i=this.x-this.w/2,e=this.y-this.h/2,s=this.dom;s.style.backgroundPosition=-this.sx+"px "+-this.sy+"px",s.style.top=e+"px",s.style.left=i+"px",s.style.width=this.w+"px",s.style.height=this.h+"px"},t.GObjectSprite=i}(GMER),function(t){function i(){var i=GMER.GManager.instance,e=0,s=this;i.add(s),i.xScroll=-2,this.init=function(){isbegin=!1,clearTimeout(e);for(var t=0;t<pbirds.length;)i.remove(pbirds.shift());for(t=0;t<flybirds.length;)i.remove(flybirds.shift());i.remove(process),i.remove(failtext),i.remove(successbtn),i.remove(replaybtn),i.remove(replaytext),i.remove(bgsuccess),i.remove(niulang),i.remove(zhinv),processts=[0,1e3,500,800,1e3,800,1500,1e3,500],pbtime=processts.shift(),bg_shan.set({sx:bg_shan.osx,sy:bg_shan.osy}),zhinv.setCurFrame(1),niulang.stop(),niulang.setCurFrame(3),niulang.set({x:a[0],y:a[1],factor:0})},this.fail=function(){isbegin=!1,processts=[];for(var t=0;t<pbirds.length;)i.remove(pbirds.shift());for(t=0;t<flybirds.length;)i.remove(flybirds.shift());G.stop(),bg_shan.stop(),niulang.stop(),niulang.set({x:gwidth/2,y:a[1]+60,curFrame:0,factor:0}),i.remove(zhinv),i.add(replaybtn),i.add(replaytext),i.add(failtext)},this.success=function(){isbegin=!1,processts=[];for(var t=0;t<pbirds.length;)i.remove(pbirds.shift());zhinv.setCurFrame(2),niulang.stop(),niulang.set({factor:0,curFrame:1}),bg_shan.stop(),e=setTimeout(function(){i.remove(zhinv),i.remove(niulang),i.remove(process);for(var t=0;t<flybirds.length;)i.remove(flybirds.shift());i.add([bgsuccess,successbtn]),e=setTimeout(function(){sendbi("auto"),location.href=game_surl},5e3)},1e3)},this.start=function(){G.play(),isbegin=!0,bg_shan.run();var s=new t.GObjectSprite(h[0],h[1],z_game,n);s.init(frames_bird,fps),s.setRepeat(!0),s.run(),flybirds[0]=s,i.add([niulang,zhinv,s,process]),process.setCurFrame(0),e=setTimeout(function(){niulang.set({factor:factor_niulang},!1),niulang.run()},5e3)},this.update=function(e){if(isbegin){if(pbtime-=e,flybirds.length<maxbirds&&pbtime<0){pbtime=processts.shift();var o=new t.GObjectBody(gwidth-100,75,z_game,n);o.init(x,30,factor_pbird),o.run(),pbirds.push(o),i.add(o)}if(niulang.x-flybirds[0].x>75&&s.fail(),pbirds.length>0){var o=pbirds[0];225-o.x>50&&(pbirds.shift(),i.remove(o))}var r=zhinv.x-niulang.x;60>=r?this.success():250>=r&&zhinv.setCurFrame(0)}},this.close=function(){"none"!=i.canvas.style.display&&(i.add(logobtn,logodom),bg_shan.stop(),G.stop(),z.stop(),i.canvas.style.display="none",isnewhome&&mainarea&&(mainarea.style.height="auto",mainarea.style.overflow="",mainarea.style.visibility="visible"),musicpanel&&(musicpanel.style.visibility="visible"),_.init())},this.keydown=function(e){if(isbegin&&32==e.keyCode&&flybirds.length<maxbirds&&pbirds.length>0){var s=pbirds[0],o=s.x-(process.x-process.w/2+50);if(30>=o&&o>=-30&&1!=process.curFrame){process.setCurFrame(1),i.remove(pbirds.shift());var r=new t.GObjectSprite(flybirds[0].x+flybirds[0].w-8,h[1],z_game,n);r.init(frames_bird,fps),r.setRepeat(!0),flybirds.unshift(r),r.run(),i.add(r)}}},this.keyup=function(t){isbegin&&32==t.keyCode&&process.setCurFrame(0)}}function e(){var i=null,e=null,s=0,o=!1;beginbtn=null,i=new t.GObjectBody(gwidth/2-10,gheight/2,z_game+2,n),i.init(g,fps),e=new t.GObjectBody(gwidth/2-10,gheight/2,z_game+2,n),e.init(b,fps),beginbtn=new t.GObjectBody(gwidth/2,gheight/2-20,z_game+4,n),beginbtn.init(w,fps),beginbtn.dom.style.cursor="pointer",t.util.bind(beginbtn.dom,"click",function(){z.stop(),_.start(),sendbi("run")}),this.start=function(){o=!1,s=(new Date).getTime(),v.add([this,i,beginbtn])},this.stop=function(){v.remove(this),v.remove(i),v.remove(e),v.remove(beginbtn)},this.update=function(){var t=(new Date).getTime();t-s>=900&&(s=t,o?(v.remove(e),o=!1):(v.add(e),o=!0))}}if(!t.util.isIE6){var s=bds.util.domain.get("http://s1.bdstatic.com/r/www/cache/qixi2015/"),n=s+"game7xi-tiny-1.0.png",o=s+"game7xi-logo-1.0.png",r=s+"Music.mp3";logowrap=document.getElementById("lg"),ologo=logowrap.getElementsByTagName("img")[0],logodom=null,gwidth=893,gheight=410,lwidth=270,lheight=129,z_bg=0,z_game=5,maxbirds=8,factor_niulang=-1.5,factor_pbird=3.5,factor_bgshan=2,fps=25,surl="//www.baidu.com/s?wd=%E4%B8%83%E5%A4%95&tn=",game_surl=surl+"SE_pshlcjsy_xef5bmh9",logo_surl=surl+"SE_pshlcjbk1_kw5tgtx0",islogin=!!window.s_session,isnewhome=bds&&bds.comm&&1==bds.comm.ishome&&window.s_domain&&"home"==window.s_domain.base,iscard=islogin&&"0"===s_session.isLiteVersion,ispubu=$("body").hasClass("s-manhattan-index"),mainarea=document.getElementById("s_main"),musicpanel=document.getElementById("s_mancard_newmusic"),rsv_platform=islogin?"newhome":"wwwhome",rsv_skin=islogin&&s_session.userSkinName?1:0,sendbi=function(t){window.ns_c&&t&&ns_c({pid:201,pj:"www",fm:"behs",tab:"qxhd",rsv_platform:rsv_platform,rsv_skin:rsv_skin,act:t})};var a=[170,250],h=[170,310],l=[690,270],c={x:854,y:1324,w:850,h:410},d={x:2,y:414,w:893,h:410},u={x:2,y:2,w:893,h:410},p={x:2,y:1238,w:850,h:410},m={x:1317,y:750,w:128,h:32},f={x:1713,y:2,w:20,h:20},y={x:1654,y:708,w:50,h:46},g={x:854,y:912,w:850,h:410},b={x:2,y:826,w:850,h:410},w={x:1317,y:854,w:108,h:29},x={x:1654,y:414,w:69,h:40};frames_niulang=[{x:1221,y:750,w:94,h:122},{x:1125,y:750,w:94,h:122},{x:897,y:788,w:94,h:122},{x:1029,y:750,w:94,h:122},{x:1605,y:756,w:94,h:122},{x:1509,y:738,w:94,h:122},{x:1413,y:626,w:94,h:122},{x:1317,y:626,w:94,h:122},{x:1221,y:626,w:94,h:122},{x:1125,y:626,w:94,h:122},{x:1029,y:626,w:94,h:122}],frames_logo=[{x:2,y:2,w:270,h:129},{x:274,y:2,w:270,h:129},{x:546,y:2,w:270,h:129},{x:2,y:133,w:270,h:129},{x:274,y:133,w:270,h:129},{x:546,y:133,w:270,h:129},{x:2,y:264,w:270,h:129},{x:274,y:264,w:270,h:129},{x:546,y:264,w:270,h:129},{x:2,y:395,w:270,h:129},{x:2,y:395,w:270,h:129},{x:274,y:395,w:270,h:129},{x:274,y:395,w:270,h:129},{x:546,y:395,w:270,h:129},{x:546,y:395,w:270,h:129},{x:2,y:526,w:270,h:129},{x:274,y:526,w:270,h:129},{x:546,y:526,w:270,h:129},{x:2,y:657,w:270,h:129},{x:274,y:657,w:270,h:129},{x:546,y:657,w:270,h:129},{x:2,y:788,w:270,h:129}],frames_process=[{x:897,y:520,w:623,h:104},{x:897,y:414,w:623,h:104}],frames_btn=[{x:376,y:788,w:100,h:33},{x:274,y:788,w:100,h:33}],frames_bird=[{x:1654,y:666,w:69,h:40},{x:1654,y:624,w:69,h:40},{x:1654,y:582,w:69,h:40},{x:1654,y:540,w:69,h:40},{x:1654,y:498,w:69,h:40},{x:1654,y:456,w:69,h:40},{x:1654,y:498,w:69,h:40},{x:1654,y:540,w:69,h:40},{x:1654,y:582,w:69,h:40},{x:1654,y:624,w:69,h:40}],frames_zhinv=[{x:897,y:626,w:130,h:160},{x:1522,y:576,w:130,h:160},{x:1522,y:414,w:130,h:160}],processts=[],pbirds=[],flybirds=[],pbtime=0,isbegin=!1,logobtn=null,logos=null,closbtn=null,bg_shan=null,niulang=null,zhinv=null,process=null,failtext=null,bgsuccess=null,successbtn=null,replaybtn=null,replaytext=null,music=null;{var v=new t.GManager,_=new i,z=new e,G=new t.util.Audio(r),k=document.createElement("div"),E=isnewhome?!iscard&&ispubu?$("#s_fm")[0]:$("#s_wrap")[0]:t.util.isIE7?$(".s_form_wrapper")[0]:$("#form")[0],j=E.getBoundingClientRect(),O=0,C=document.body.scrollTop||document.documentElement.scrollTop;document.body.scrollLeft||document.documentElement.scrollLeft}O=!isnewhome||ispubu&&!iscard?!isnewhome&&t.util.isIE7?j.bottom-j.top+C:j.bottom+20+C:j.top+C,k.style.cssText="display: none;position:absolute;z-index:0;left:50%;margin-left:-"+gwidth/2+"px;top: "+O+"px;width: "+gwidth+"px;height: "+gheight+"px;overflow: hidden;font-size:14px;line-height: 20px;color: #fff;text-align: center;",isnewhome||(k.style.zIndex=1),t.util.isIE7&&!isnewhome?$("#head .s_form_wrapper").append(k):ispubu&&!iscard?$("#head_wrapper").append(k):$("#head").append(k),v.init(k),v.addEvent(["keydown","keyup"]),t.util.preload([o],function(i){var e="";e=isnewhome?ispubu?iscard?"bottom:20px":"top:0px":iscard?"top:36px":"top:123px":"top:0px",logodom=document.createElement("div"),logodom.setAttribute("title","å©ç±ä¸å¤ é¹æ¡¥ç¸ä¼"),logodom.style.cssText="position: absolute;width:270px;height:129px;"+e+";left: 50%;margin-left: -135px;z-index:2;cursor:pointer;overflow:hidden;",t.util.bind(logodom,"click",function(){sendbi("edge"),location.href=logo_surl}),logowrap.appendChild(logodom),logos=new t.GObjectSprite(135,64.5,z_game,o),logos.init(frames_logo,10,0),logos.setCallBack(function(){v.remove(this,!0)}),logobtn=new t.GObjectSprite(135,101,z_game+1,o),logobtn.init(frames_btn,1,0),t.util.bind(logobtn.dom,"mousedown",function(){logobtn.setCurFrame(1)}),t.util.bind(logobtn.dom,"mouseup",function(){logobtn.setCurFrame(0),v.remove(logobtn),v.canvas.style.display="block",z.start(),isnewhome&&mainarea&&(mainarea.style.height=gheight+"px",mainarea.style.overflow="hidden",mainarea.style.visibility="hidden"),musicpanel&&(musicpanel.style.visibility="hidden"),sendbi("begin")}),bg=new t.GObjectBody(gwidth/2,gheight/2,z_game,n),bg.init(c,fps),bgmask=new t.GObjectBody(gwidth/2,gheight/2,z_game+3,n),bgmask.init(d,fps),bg_shan=new t.GObjectRepeat(gwidth/2,gheight/2-5,z_game,n),bg_shan.init(u,fps,factor_bgshan),bg_shan.stop(),closbtn=new t.GObjectBody(700,48,z_game+4,n),closbtn.init(f,fps),closbtn.dom.style.cursor="pointer",t.util.bind(closbtn.dom,"click",function(){_.close(),sendbi("close")}),niulang=new t.GObjectSprite(0,0,z_game,n),niulang.init(frames_niulang,fps,factor_niulang),niulang.setMinFrame(4),niulang.setRepeat(!0),zhinv=new t.GObjectSprite(l[0],l[1],z_game,n),zhinv.init(frames_zhinv,fps,0),process=new t.GObjectSprite(gwidth/2+60,80,z_game,n),process.init(frames_process,fps,0),replaybtn=new t.GObjectBody(gwidth/2,200,z_game+4,n),replaybtn.init(y,fps),replaybtn.dom.style.cursor="pointer",t.util.bind(replaybtn.dom,"click",function(){_.init(),_.start(),sendbi("replay")}),replaytext=new t.GObjectBody(gwidth/2,250,z_game+4),replaytext.init({w:70,h:46}),replaytext.dom.innerHTML="åç©ä¸é",replaytext.dom.style.cursor="pointer",t.util.bind(replaytext.dom,"click",function(){_.init(),_.start(),sendbi("replay")}),failtext=new t.GObjectBody(gwidth/2,replaybtn.y-60,z_game+4),failtext.init({w:200,h:60},fps),failtext.dom.innerHTML="ç»å¥³å·²ç»ç­äº16åå¹´<br>ä½ è¿è¦å¥¹ç­å¤ä¹?",bgsuccess=new t.GObjectBody(gwidth/2,gheight/2,z_game,n),bgsuccess.init(p,fps),successbtn=new t.GObjectBody(gwidth/2,gheight-70,z_game+4,n),successbtn.init(m,fps),successbtn.dom.style.cursor="pointer",t.util.bind(successbtn.dom,"click",function(){_.init(),_.start(),sendbi("replay")}),_.init(),v.add([logobtn],logodom),isnewhome&&rsv_skin||(v.add([logos],logodom),logos.run(),v.draw(),ologo.style.visibility="hidden"),v.add([bg,bg_shan,bgmask,closbtn]),v.start()}),t.bdkill=function(){isbegin=!1,v.pause(),v.clear(),_=null,z=null,G.destory(),v=null,k.parentNode.removeChild(k),logodom.parentNode.removeChild(logodom),ologo.style.visibility="visible",isnewhome&&mainarea&&(mainarea.style.height="auto",mainarea.style.overflow="",mainarea.style.visibility="visible"),musicpanel&&(musicpanel.style.visibility="visible")},$(window).on("index_off",function(){GMER.bdkill()}),$("#kw").on("keyup",function(){_.close()}),window.F&&(F.module("mancard:skeleton/qixi",function(t,i,e){function s(){e.listen("mancard:setting/card_setting","hideMain",function(t){if(ispubu&&(logodom.style.top="0px",logodom.style.bottom="auto"),ispubu){var i=$("#s_fm")[0].getBoundingClientRect(),e=document.body.scrollTop||document.documentElement.scrollTop;k.style.top=i.bottom+20+e+"px",$("#head_wrapper").append(k)}})}i.init=s}),F.call("mancard:skeleton/qixi","init"))}}(GMER);