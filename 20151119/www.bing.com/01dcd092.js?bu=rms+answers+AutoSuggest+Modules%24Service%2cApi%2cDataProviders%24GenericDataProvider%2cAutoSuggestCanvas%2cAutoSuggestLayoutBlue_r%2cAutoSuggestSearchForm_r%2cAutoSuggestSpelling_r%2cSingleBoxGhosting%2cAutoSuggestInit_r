var AutoSuggest,Canvas;(function(n){var t;(function(n){var f=function(){function n(){}return n.User="SRCHHPGUSR",n.History="_UR",n}(),t,i,r,u;n.CookieNames=f;t=function(){function n(){}return n.AutoSuggest="AS",n.History="OMW",n}();n.CrumbNames=t;i=function(){function n(){}return n.CursorPosition="cp",n.Options="o",n.ConversationId="cvid",n.SuggestionCount="sc",n.PartialQuery="pq",n.SuggestionPosition="sp",n.SuggestionType="qs",n.PreviewPaneSuggestionType="qsc",n.SkipValue="sk",n.PreviewPaneSkipValue="skc",n.Ghosting="ghc",n.Css="css",n.Count="count",n.DataSet="ds",n.SessionId="sid",n.TimeStamp="qt",n.Query="q",n.ImpressionGuid="ig",n.QFQuery="qry",n.FormCode="form",n.HashedMuid="nclid",n.RequestElToken="elvr",n.AppId="appid",n.History="history",n.ApiTextDecoration="textdecorations",n.ClientId="clientid",n.Market="mkt",n}();n.QueryParams=i;r=function(){function n(){}return n.HistoryEnabled="hs",n.HitHighlighting="h",n.PopularNow="p",n.Local="l",n.Answers="a",n}();n.Options=r;u=function(){function n(){}return n.Id="id",n.Query="query",n.Url="url",n.Navigation="nav",n.Type="stype",n.Autocomplete="hc",n}();n.SuggestionAttributes=u})(t=n.Service||(n.Service={}))})(AutoSuggest||(AutoSuggest={}));_w.Bing=_w.Bing||{};_w.Bing.AS=_w.Bing.AS||{},function(n){n.EventIds={SelectPrevItem:2,SelectNextItem:3,UpdateText:4,NavigateSerp:7,NavigateLink:11,MouseEnterSuggestion:16,MouseLeaveSuggestion:17,ConfigurationSet:100,Initialized:101,RequestSent:102,ResponseReceived:103,ApiServiceReceived:104,ValidResponseReceived:105,SuggestionsRendered:106,NoResults:107,UpdateTextAndRequery:110,GhostingSubmit:114,DropDownHidden:116,Disposed:117,UpdateGhostedText:120};n.Constants={KeyCodeBackspace:8,KeyCodeTab:9,KeyCodeEnter:13,KeyCodeEscape:27,KeyCodeSpace:32,KeyCodePageUp:33,KeyCodePageDown:34,KeyCodeEnd:35,KeyCodeArrowLeft:37,KeyCodeArrowUp:38,KeyCodeArrowRight:39,KeyCodeArrowDown:40,KeyCodeInsert:45,KeyCodeDelete:46,KeyCodeImeOpen:229,HitHighlightStartToken:"<strong>",HitHighlightEndToken:"<\/strong>",SuggestionsDataProvider:1};n.AutoSuggest=function(){function w(i,r,u,f){if(!y&&t.canvas.searchBoxHasFocus){if(t.config.latencyLag>0&&!f){setTimeout(sj_wf(w,i,r,u,!0),t.config.latencyLag);return}if(t.raiseEvent(n.EventIds.ResponseReceived),u==t.currentQuery)if(i!=null){if(i.indexOf("NoResults")==0){t.canvas.currentSuggestionList=[];t.raiseEvent(n.EventIds.NoResults);return}t.raiseEvent(n.EventIds.ValidResponseReceived,u,{},r);h=u;t.canvas.render(i,t.currentQuery,r);a=!0}else t.canvas.currentSuggestionList=[],t.raiseEvent(n.EventIds.NoResults)}}function b(n){return u.asf&&!n?nt:g}function k(n,r,f){f=f||t.canvas.selectedSuggestion;switch(n){case i.SuggestionCount:return t.canvas.currentSuggestionList.length+"-"+h.length;case i.PartialQuery:return r?encodeURIComponent(t.currentQuery):t.currentQuery;case i.SuggestionPosition:return f?f.ord+1:-1;case i.SuggestionType:return f?f.src:"n";case i.SkipValue:return f&&f.sk?f.sk:"";case i.PreviewPaneSkipValue:var e=null;return f&&f.qsc&&(e=f.skc?f.skc:""),e;case i.PreviewPaneSuggestionType:return f&&f.qsc?f.qsc:null;case i.Ghosting:return t.ghostInstValue>0?t.ghostInstValue:null;case i.ConversationId:return u.asf?_G.IG:null}}function it(i,r){var c=[],v=i["0"].Type.toString(),y=l[v],o,s,a,u,e;for(f.appendHistory(r,i,y),s=0;s<i.length;s++){if(o=i[s],a=o.Type,u=o.Suggests,!tt[a]){for(e=0;e<u.length;e++)u[e].ServiceType=a,t.lastSuggestionType=u[e].Type;c=c.concat(u)}t.raiseEvent(n.EventIds.ApiServiceReceived,o)}h=r;t.canvas.render(c,t.currentQuery)}function d(){y=!0;sj_evt.unbind(v,d);t.raiseEvent(n.EventIds.Disposed);n.AutoSuggest.prototype.EventRegistry=[]}var t=this,s;t.config=null;t.currentQuery="";t.apiOptions="";t.canvas=null;t.logMeta="";t.popularNowEnabled=!1;t.lastSuggestionType;t.data={};var i=AutoSuggest.Service.QueryParams,e=AutoSuggest.Service.Options,g=[i.PartialQuery,i.SuggestionCount,i.SuggestionPosition,i.SuggestionType,i.SkipValue,i.PreviewPaneSkipValue,i.PreviewPaneSuggestionType,i.Ghosting,i.ConversationId,],nt=[i.Ghosting],u,c=0,l={},tt={QR:1,NW:0},h="",f,o=n.EtwEventLogger,r,a=!1,v="ajax.unload",y=!1,p;for(sj_evt.bind(v,d,!1),t.init=function(i,o){var c,h,a,v,y,s;if(t.config=u=i,p=o,i.p0)for(c=i.p0.split(","),h=0;h<c.length;h++)a=h.toString(),v=c[a].toString(),l[v]=1;r=new n.DataProvider(i,n.Constants.SuggestionsDataProvider,w);t.popularNowEnabled=i.ePN;i.eLO&&t.addApiOption(e.Local);i.eAN&&(y=i.as||e.Answers,t.addApiOption(y));f=new n.History(i);f.init();t.canvas=new n.Canvas(t,i,o);s=new n.EventRegistration;s.add(n.EventIds.SuggestionsRendered,function(r,u,e,o,s){t.raiseEvent(n.EventIds.SuggestionsRendered,r,u,e,o,s);i.asf&&f.setQueryWithoutHistory(r,u)});s.add(n.EventIds.UpdateText,function(i,r){t.raiseEvent(n.EventIds.UpdateText,i,r)});s.add(n.EventIds.NavigateSerp,function(i,r){t.raiseEvent(n.EventIds.NavigateSerp,i,r)});s.add(n.EventIds.NavigateLink,function(i,r,u,f,e,o){t.raiseEvent(n.EventIds.NavigateLink,i,r,u,f,e,o)});s.add(n.EventIds.SelectPrevItem,function(i){t.raiseEvent(n.EventIds.SelectPrevItem,i)});s.add(n.EventIds.SelectNextItem,function(i){t.raiseEvent(n.EventIds.SelectNextItem,i)});s.add(n.EventIds.MouseEnterSuggestion,function(i){t.raiseEvent(n.EventIds.MouseEnterSuggestion,i)});s.add(n.EventIds.MouseLeaveSuggestion,function(i){t.raiseEvent(n.EventIds.MouseLeaveSuggestion,i)});s.add(n.EventIds.NoResults,function(){t.raiseEvent(n.EventIds.NoResults)});t.canvas.EventRegistry.push(s);t.raiseEvent(n.EventIds.Initialized,this)},t.addApiOption=function(n){r.addApiOption(n)},t.apiCB=function(i){t.raiseEvent(n.EventIds.ResponseReceived);var r="",u=[],e,f=i.AS;o&&o.log(t,"ApiResponseReceived");try{if(r=f.Query,e=f.FullResults==1,u=f.Results,t.logMeta=f.LogMeta,t.currentQuery!=""&&r!=t.currentQuery)return;if(!u){t.canvas.currentSuggestionList=[];t.raiseEvent(n.EventIds.NoResults);return}}catch(s){return}t.raiseEvent(n.EventIds.ValidResponseReceived,r,u);it(u,r)},t.setData=function(n){t.data=n},t.enabledPopularNow=function(n){t.popularNowEnabled=n},t.reset=function(){f.reset()},t.getAllSuggestionInstUrl=function(n,t){for(var f,r=b(t),u=[],i=0;i<r.length;i++)f=k(r[i],!0,n),f!==null&&(u=u.concat(["&",r[i],"=",f]));return u.join("")},t.getAllSuggestionInstObject=function(n,t){for(var u,r=b(t),f={},i=0;i<r.length;i++)u=k(r[i],!1,n),u!==null&&(f[r[i]]=u);return f},t.setCursorPosition=function(n){c=n},t.setDataSet=function(n){this.config.ds=n},t.fetch=function(s){var h,l;r.addParam(i.CursorPosition,c);h=p.parentNode.offsetWidth;u.cors?r.addParam("contentWidth",h):r.addHeader("X-Autosuggest-ContentWidth",h);u.h&&t.currentQuery!=""&&r.addApiOptionN(e.HitHighlighting);t.popularNowEnabled&&r.addApiOptionN(e.PopularNow);f.setDataProviderCallParams(t.currentQuery,r);u.ds&&r.addParam(i.DataSet,u.ds);u.cnt&&u.cnt>0&&r.addParam(i.Count,u.cnt);u.asf&&!a&&r.addParam(i.Css,1);l=r.fetch(s);o&&o.log(t,"ApiRequestSent");t.raiseEvent(n.EventIds.RequestSent,t.currentQuery,l)},s=0;s<n.AutoSuggest.ScopeExtensions.length;s++)n.AutoSuggest.ScopeExtensions[s].init.apply(this)};n.AutoSuggest.ScopeExtensions=[];n.AutoSuggest.prototype.EventRegistry=[];n.AutoSuggest.prototype.InstrumentationTypes=[];n.AutoSuggest.prototype.setQuery=function(n){var t=this.config.eHS||this.popularNowEnabled?0:1;n.length>=t&&(this.currentQuery=n,this.fetch(n))};n.EventRegistration=function(){this.events=[];this.add=function(n,t){this.events[n]=t}};n.AutoSuggest.prototype.raiseEvent=function(n){for(var r=arguments.length?[].slice.apply(arguments).slice(1):[],t=0,i;t<this.EventRegistry.length;t++)i=this.EventRegistry[t],i.events[n]&&i.events[n].apply(this,r)};n.History=function(n){function s(){return n.eHS&&sj_cook.get(h,c)!="0"}function v(n){var r=s();return(r!=o&&t.reset(),o=r,!r)?!1:i?n.indexOf(i)!=0:!0}var f=AutoSuggest.Service.QueryParams,e=AutoSuggest.Service.Options,t=this;t.config=n;var h="_UR",c="OMW",l="_SS",a="SID",o=s(),i=null,r,u={};n.vid&&(u["hs.ds"]=n.vid);t.setDataProviderCallParams=function(t,i){var o,s;if(r||(r=sj_cook.get(l,a)),v(t)&&r){n.asf?i.addParam(f.Options,e.HistoryEnabled):(o=t==""?n.maxHSEQ:n.maxHS,o&&(u["hs.count"]=o),i.addParam(f.SessionId,r),i.addParam(f.TimeStamp,sb_gt()),i.addApiOptionN(e.HistoryEnabled));for(s in u)i.addParam(s,u[s])}};t.appendHistory=function(n,r,u){var e=0,o=t.getHistory(n,r),s={Type:"HS",Suggests:o},f;if(e=o.length,e){for(f=0;f<e;f++)s.Suggests[f].isHist=!0;r.splice(u?1:0,1,s)}else i=n};t.setQueryWithoutHistory=function(n,t){for(var u=!1,r=0;r<t.length;r++)if(t[r].stype&&t[r].stype=="HS"){u=!0;break}u||(i=n)};t.reset=function(){i=null}};n.History.prototype.init=function(){};n.History.prototype.getHistory=function(n,t){for(var i=0;i<t.length;i++)if(t[i].Type=="HS")return t[i].Suggests;return[]};n.Utils=new function(){function e(n,t){if(n===t)return!1;while(t&&t!==n)t=t.parentNode;return t===n}var r=new RegExp(n.Constants.HitHighlightStartToken,"gi"),u=new RegExp(n.Constants.HitHighlightEndToken,"gi"),t,i=[],f=5;this.StripHighlighting=function(n){return n.replace(r,"").replace(u,"")};this.SetInnerText=function(n,t){if(n&&typeof t=="string"){var i="textContent";n[n[i]!==undefined?i:"innerText"]=t}};this.GetComputedStyle=function(n){return _w.getComputedStyle?_w.getComputedStyle(n,null):n.currentStyle};this.GetQueryStringParam=function(n,t){var r=new RegExp("[?&]{1}"+t+"=([^&]+)"),i=n.match(r);return i?i[1]:null};this.LoadScript=function(n){t=t||_d.getElementsByTagName("head")[0];var r=sj_ce("script");t.appendChild(r);r.src=n;i.push(r);i.length>=f&&t.removeChild(i.shift())};this.SetSelectionRange=function(n,t,i){if(n.setSelectionRange)n.setSelectionRange(t,i);else{var r=n.createTextRange();r.moveEnd("sentence",-1e5);r.moveStart("character",t);r.moveEnd("character",i-t);r.select()}};this.TruncateText=function(n,t){return n.length>t&&(n=n.substr(0,t-3),n=n.replace(/\s+$/g,"")+"..."),n};this.GetMouseCoords=function(n){return n=sj_ev(n),{x:n.clientX,y:n.clientY}};this.RewriteAttribsToProps=function(n,t){for(var i,r,u=0;i=t[u++];)r=n.getAttribute(i),r&&(n[i]=r)};this.MouseEnterLeave=function(n,t){return function(i){i=sj_ev(i);var r=i.relatedTarget||(i.type=="mouseout"?i.toElement:i.fromElement);t===r||e(t,r)||n.call(t,i)}};this.getCursorPosition=function(n,t){var i=0,e=_d.selection,o=n.selectionStart,r,u,f;return o!=null?i=o:e&&n.createTextRange&&(t&&n.focus(),r=n.createTextRange(),u=r.duplicate(),f=e.createRange(),t&&r.moveToBookmark(f.getBookmark()),u.setEndPoint("EndToStart",f),i=u.text.length),i};this.RemoveClassName=function(n,t){n&&(n.className=n.className.replace(t,""))};this.AddClassName=function(n,t){var r,i;if(n){for(r=n.className.split(" "),i=0;i<r.length;i++)if(r[i]===t)return;n.className.length>0&&(n.className+=" ");n.className+=t}}}}(_w.Bing.AS);_w.Bing=_w.Bing||{};_w.Bing.AS=Bing.AS||{},function(n){n.DataProvider=function(t,i,r){function l(n){var i=n,r,f;t.asf&&t.ds&&(r="/AS/Suggestions",i=i.replace(r,r+"/"+t.ds));for(f in u)i+="&"+f+"="+u[f];return u={},e=[],i}function y(n){c.push(n)}function p(n){e.push(n)}function o(n,t){u[n]=t}function w(n,i){if(t.cors)throw"Custom headers are not allowed for cross domain calls";f[n]=i}function b(t,i){var r=i?e:c.concat(e);o(s.Query,encodeURIComponent(t));o(s.Options,r.join("+"));n.Utils.LoadScript(l(v))}function k(n){var i=[].slice.call(arguments);return o(s.ConversationId,_G.IG),i.unshift(l(decodeURIComponent(t.u)+encodeURIComponent(n))),a.apply(_w,i)}function a(n){var t=sj_gx(),i,u;h++;i=[].slice.apply(arguments).slice(1);i.unshift(h);t.open("GET",n,!0);for(u in f)t.setRequestHeader(u,f[u]);return f={},t.onreadystatechange=function(){if(t.readyState==4){t.onreadystatechange=function(){};var n=null;t.status==200&&(n=t.responseText);i.unshift(n);r.apply(_w,i)}},t.withCredentials!==undefined&&(t.withCredentials=!0),t.send(),h}var d=this,s=AutoSuggest.Service.QueryParams,v=[decodeURIComponent(t.u),"&mkt=",t.mkt,"&type=cb&cb=",t.globalId,".apiCB"].join(""),c=[],u={},f={},e=[],h=0;return{addApiOption:y,addApiOptionN:p,addParam:o,fetch:t.asf?k:b,fetchUrl:a,addHeader:w}}}(_w.Bing.AS);Canvas=function(){function n(n,t,i){var u=this,f,r;for(this.currentRenderIndex=0,this.currentSuggestionList=[],this.searchBoxHasFocus=!0,this.SuggestionClassName="sa_sg",this.BingAS=_w.Bing.AS,this.HighlightedSuggestionClassName="sa_hv",this.RegHighlightClass=/(\s|^)sa_hv/g,this.SuggestionTermClassName="sa_tm",this.utils=this.BingAS.Utils,this.eventIds=this.BingAS.EventIds,this.directions={up:0,right:1,down:2,left:3},this._firstLastSuggestionId=[],this._suggestionAttributes=AutoSuggest.Service.SuggestionAttributes,this._ie9orLower=sb_ie&&!_w.atob,this.EventRegistry=[],this.HeadingBuilders={PN:function(){return u.config.ePN?sa_loc.H_PN:null},AS:function(){return u.config.eWH?sa_loc.H_AS:null}},this.SuggestionBuilders={},this.SuggestionGroupBuilders={},this.raiseEvent=this.BingAS.AutoSuggest.prototype.raiseEvent,this.autoSuggestInstance=n,this.config=t,this.container=i,this.suggestionsContainer=i,this._maxSuggestions=t.m||5,this._searchBox=_ge(t.i),this._asContainer=_ge(t.c||"sw_as"),f=new Bing.AS.EventRegistration,f.add(this.eventIds.Disposed,function(){return u.BingAS.Canvas.prototype.EventRegistry=[]}),n.EventRegistry.push(f),this.initTwoRowAnswerWithImage(),r=0;r<this.BingAS.Canvas.ScopeExtensions.length;++r)this.BingAS.Canvas.ScopeExtensions[r].init.apply(this);sj_be(this._searchBox,"focus",function(){this.searchBoxHasFocus=!0});sj_be(this._searchBox,"blur",function(){this.searchBoxHasFocus=!1})}return n.prototype.render=function(n,t,i){var y=this,f=0,o=[],c,s,r,l,e,u,a,v,h;if(this.container.innerHTML="",this._currentQuery=t,this.currentSuggestionList=[],this.currentSuggestion=null,this.selectedSuggestion=null,this._currentSelectedElement=null,this._previousMouseCoords=null,this.currentRenderIndex=0,this.suggestionTypesRendered={},typeof n=="string"){if(this.InsertAjaxResponseIntoDom(this.container,n),this.suggestionsContainer=_ge(this.config.slid),this.suggestionsContainer){for(c=this.suggestionsContainer.getElementsByTagName("li"),s=0;r=c[s];s++)if(r.parentNode.id==this.config.slid){if(this.utils.RewriteAttribsToProps(r,[this._suggestionAttributes.Url,this._suggestionAttributes.Query,this._suggestionAttributes.Type,this._suggestionAttributes.Autocomplete]),r.className.indexOf("pp_tile")!=-1&&(r.panel={ot:sb_gt()}),r.className.indexOf("sa_hd")!=-1){r.hd=!0;r=r.nextSibling;continue}this.currentSuggestionList.length==0&&(this._firstLastSuggestionId[this.directions.down]=r.id);typeof r.url=="string"&&(r.addInst=r.url.indexOf("/search")==0);this.currentSuggestionList.push(r.query);this.decorateSuggestion(r,{},++f);this._firstLastSuggestionId[this.directions.up]=r.id;o.push(r)}}else{this.raiseEvent(this.eventIds.NoResults);return}n={}}else for(v=Math.min(n.length,this._maxSuggestions);f<v;++f){if(u=n[f],!u)break;u.DisplayTxt=u.Txt;e=u.ServiceType;e!=a&&this.HeadingBuilders[e]&&(l=this.HeadingBuilders[e].call(this))&&this.addHeading(l,f==0);this.suggestionTypesRendered[u.Type]==null&&(this.suggestionTypesRendered[u.Type]=0);h=this.createSuggestion(u,this.currentRenderIndex);h&&(a=e,this.suggestionTypesRendered[u.Type]++,this.currentRenderIndex++,o.push(h))}this.raiseEvent(this.eventIds.SuggestionsRendered,t,o,n,i,this.container);sb_st(function(){return y.hideOverflowElements()},1)},n.prototype.appendSuggestion=function(n,t){var i=this.utils.StripHighlighting(t.SelectTxt);n.query=i;this.suggestionsContainer.appendChild(n);this.currentSuggestionList.push(i)},n.prototype.decorateSuggestion=function(n,t,i){n.src=n.stype||t.Type;n.ord=i;n.sk=t.Sk;this.attachSuggestionEvents(n)},n.prototype.attachSuggestionEvents=function(n){var t=this,r=this.utils.MouseEnterLeave,i;sj_be(n,"mousemove",function(i){t.saveMousePos(i);t.mouseOverSuggestionHandler(i,n)});sj_be(n,"mouseover",function(i){var u=r(function(i){t.saveMousePos(i);t.mouseOverSuggestionHandler(i,n)},n);u(i)});sj_be(n,"mouseout",function(i){var u=r(function(){t.raiseEvent(t.eventIds.MouseLeaveSuggestion,n)},n);u(i)});sj_be(n,"mousedown",function(i){return t.onMouseDownSuggestion(i,n)});sj_be(n,"mouseup",function(i){t.cancelEventBubbling(i);t.onMouseUpSuggestion(i,n)});this.config.asf&&(i=window.navigator.msPointerEnabled?"onMSPointerDown":"ontouchstart",i.toLowerCase()in _w&&sj_be(n,i.substr(2),function(i){if(t._previousMouseCoords={x:0,y:0},n.it="m",i.pointerType)switch(i.pointerType){case i.MSPOINTER_TYPE_TOUCH:n.it="t";break;case i.MSPOINTER_TYPE_PEN:n.it="p"}else n.it="t"}))},n.prototype.buildSuggestionTerm=function(n,t,i){var u,r;i===void 0&&(i="div");u=this.SuggestionTermClassName;n.isHist&&(u+=" "+this.SuggestionTermClassName+"HS");r=this.ce(i,"",u);n.Type=="ID"&&(r.lang="en");t.appendChild(r);this.hitHighlight(n.DisplayTxt,r)},n.prototype.buildSuggestionDescription=function(n,t,i){i===void 0&&(i="div");n.Meta1&&t.appendChild(this.buildSuggestionSegment(n.Meta1,i,"sa_ds"))},n.prototype.buildSuggestionImage=function(n,t,i){if(i===void 0&&(i="div"),n.Img){var u=this.ce(i,"","sa_img"),r=this.ce("img"),f=n.Img.alt;f&&(r.title=f);r.src=this.getBaseHref()+n.Img.src;r.width=n.Img.w;r.height=n.Img.h;u.appendChild(r);t.appendChild(u)}},n.prototype.addSuggestionUrl=function(n,t){n.Url&&(t.url=this.getBaseHref()+n.Url+(this.config.fc?"&FORM="+this.config.fc:""),t.addInst=!0)},n.prototype.buildSuggestionSegment=function(n,t,i){if(t){var r=this.ce(t,"",i);return this.utils.SetInnerText(r,n),r}return _d.createTextNode(n)},n.prototype.saveMousePos=function(n){this._previousMouseCoords=this._previousMouseCoords||this.utils.GetMouseCoords(n)},n.prototype.mouseOverSuggestionHandler=function(n,t){var i=this.utils.GetMouseCoords(n);this._previousMouseCoords&&(this._previousMouseCoords.x!=i.x||this._previousMouseCoords.y!=i.y)&&(this._previousMouseCoords=i,t.className.indexOf(this.HighlightedSuggestionClassName)==-1&&(this.highlightSuggestion(t),this.raiseEvent(this.eventIds.MouseEnterSuggestion,t)))},n.prototype.hitHighlight=function(n,t,i){var r,o;i===void 0&&(i=null);var f=this.BingAS.Constants,u=[],e=n.split(f.HitHighlightStartToken);for(r=0;r<e.length;++r)u=u.concat(e[r].split(f.HitHighlightEndToken));for(r=0;r<u.length;++r)u[r]&&(o=r%2==0?this.buildSuggestionSegment(u[r],i?"span":null,i):this.buildSuggestionSegment(u[r],"strong",i),t.appendChild(o))},n.prototype.createSuggestion=function(n,t){var f=n.Type,r=this.SuggestionGroupBuilders[f],u,i;return r?r.call(this,n,t):(u=this.SuggestionBuilders[n.Type]||this.buildSuggestion,i=this.ce("li"),this.decorateSuggestion(i,n,t),i=u.call(this,n,i),!i)?null:(n.SelectTxt||(n.SelectTxt=n.DisplayTxt),this.appendSuggestion(i,n),i)},n.prototype.hideOverflowElements=function(){for(var n,t,i,u=this.suggestionsContainer.childNodes,r=0;r<u.length;++r)if(n=u[r],n.overflowElems)for(t=0;t<n.overflowElems.length;t++)i=n.overflowElems[t],i.offsetLeft+i.offsetWidth>this.suggestionsContainer.offsetWidth&&(i.style.display="none")},n.prototype.handleArrowUpKey=function(n){if(this.config.asf)this.selectItem(this.directions.up,n),this.currentSuggestion&&this.raiseEvent(this.eventIds.SelectPrevItem,this.currentSuggestion);else{var t=this.suggestionsContainer.lastChild;if(this.currentSuggestion&&!(t=this.getSuggestionSibling("previousSibling"))){this.noItemSelected();return}this.setSearchValue(t);this.highlightSuggestion(t)}},n.prototype.handleArrowDownKey=function(n){var i="nextSibling",t;if(this.config.asf)this.selectItem(this.directions.down,n),this.currentSuggestion&&this.raiseEvent(this.eventIds.SelectNextItem,this.currentSuggestion);else{if(!(this.currentSuggestion&&(t=this.getSuggestionSibling(i)))){if(this.currentSuggestion){this.noItemSelected();return}t=this.currentSuggestion=this.suggestionsContainer.firstChild;t.hd&&(t=this.getSuggestionSibling(i))}this.setSearchValue(t);this.highlightSuggestion(t)}},n.prototype.handleArrowRightKey=function(n){this.config.asf&&this.isSelectionMoveAllowed()&&this.selectItem(this.directions.right,n)},n.prototype.handleArrowLeftKey=function(n){this.config.asf&&this.selectItem(this.directions.left,n)},n.prototype.getTargetElementId=function(n,t){if(!n)return this._firstLastSuggestionId[t];var i=n.getAttribute(this._suggestionAttributes.Navigation);return i?t==this.directions.right&&n.panel&&!n.panel.visible?null:i.split(";")[t]:null},n.prototype.selectItem=function(n){var i=this.getTargetElementId(this._currentSelectedElement,n),t;i&&(i==this.config.i?this.noItemSelected():(t=_ge(i),t&&(this.setSearchValue(t),this.highlightSuggestion(t))))},n.prototype.isSelectionMoveAllowed=function(){return this.utils.getCursorPosition(this._searchBox)==this._searchBox.value.length},n.prototype.getSuggestionSibling=function(n){for(var t=this.currentSuggestion;t=t[n];)if(!t.hd)return t;return null},n.prototype.cancelEventBubbling=function(n){sj_sp(sj_ev(n))},n.prototype.getBaseHref=function(){return this.config.hn?"http://"+this.config.hn:""},n.prototype.highlightSuggestion=function(n){this.unHighlightSuggestionHandler();this.currentSuggestion=n;this.addHighlightClassName(this.currentSuggestion);this.currentSuggestion!=n&&this.addHighlightClassName(n);this._searchBox.setAttribute("aria-activedescendant",n.id);n.setAttribute("aria-selected","true");this._currentSelectedElement=n},n.prototype.unHighlightSuggestionHandler=function(){this._currentSelectedElement&&(this.removeHighlightClassName(this.currentSuggestion),this.currentSuggestion=null,this._currentSelectedElement.removeAttribute("aria-selected"),this.removeHighlightClassName(this._currentSelectedElement),this._currentSelectedElement=null)},n.prototype.noItemSelected=function(){this.setSearchValue();this.unHighlightSuggestionHandler();this._searchBox.removeAttribute("aria-activedescendant")},n.prototype.addHighlightClassName=function(n){this.RegHighlightClass.test(n.className)||(n.className+=" "+this.HighlightedSuggestionClassName)},n.prototype.removeHighlightClassName=function(n){this.utils.RemoveClassName(n,this.RegHighlightClass)},n.prototype.onMouseDownSuggestion=function(n,t){n=sj_ev(n);var i=n.button;i==2?(this.cancelEventBubbling(n),sj_pd(n)):this.clickedSuggestion=t},n.prototype.onMouseUpSuggestion=function(n,t){n=sj_ev(n);t.isPPElem&&n.button!=2&&(this.clickedSuggestion=t);this.clickedSuggestion&&this.clickedSuggestion==t&&(this.setSearchValue(this.clickedSuggestion),t.url?this.raiseEvent(this.eventIds.NavigateLink,t.url,t.addInst,t.redir,t.query,!1,this.config.eNT):this.raiseEvent(this.eventIds.NavigateSerp,t.query),this.clickedSuggestion=null)},n.prototype.setSearchValue=function(n){if(n===void 0&&(n=null),this.selectedSuggestion=n,!n||n.supressTextOnSelect)this.raiseEvent(this.eventIds.UpdateText,this._currentQuery,!0);else{var t=n.query||this.currentSuggestionList[n.ord];!t&&n.panel&&(t=n.panel.suggestion.query);this.raiseEvent(this.eventIds.UpdateText,t,n.isPPElem)}},n.prototype.initTwoRowAnswerWithImage=function(){for(var t,i=["DT","IG","MV","SA","SI","SN","SP","SR","TC","TR","WE","WH","WM","WU","ID","NAV"],n=0;n<i.length;++n)t=i[n],this.SuggestionBuilders[t]=this.buildTwoRowAnswerWithImage,this.BingAS.AutoSuggest.prototype.InstrumentationTypes.push(t)},n.prototype.buildTwoRowAnswerWithImage=function(n,t){return this.config.anc?null:(t.className=this.SuggestionClassName+" sa_2RowImg "+this.SuggestionClassName+n.Type,this.buildSuggestionImage(n,t),this.buildSuggestionTerm(n,t),this.buildSuggestionDescription(n,t),this.addSuggestionUrl(n,t),t.supressTextOnSelect=!0,t)},n.prototype.getCssHolder=function(){var n=_ge("ajaxStyles");return n||(n=sj_ce("div"),n.id="ajaxStyles",sj_b.insertBefore(n,sj_b.firstChild)),n},n.prototype.insertScriptIntoDom=function(n){var r=this,t=sj_ce("script"),i;t.type=n.type;i=n.getAttribute("src");i?t.setAttribute("src",i):(t.setAttribute("data-bing-script","1"),t.text=n.innerHTML);n.parentNode.removeChild(n);this._asContainer.appendChild(t);sb_st(function(){return r._asContainer.removeChild(t)},1)},n.prototype.insertStyleIntoDom=function(n){this._ie9orLower?(sj_ic(n.innerHTML),n.parentNode.removeChild(n)):(n.setAttribute("data-rms","1"),this.getCssHolder().appendChild(n))},n.prototype.InsertAjaxResponseIntoDom=function(n,t){var u,f,i,r;if(t&&t.slice(0,9)!=="NoResults"){for(u=this.ce("div"),u.innerHTML=t,f=_d.createDocumentFragment(),i=u.childNodes;i.length;){r=i[0];switch(r.tagName){case"SCRIPT":this.insertScriptIntoDom(r);break;case"STYLE":this.insertStyleIntoDom(r);break;default:f.appendChild(i[0])}}n.appendChild(f)}},n.prototype.ce=function(n,t,i){t===void 0&&(t=null);i===void 0&&(i=null);var r=_d.createElement(n);return t&&(r.id=t),i&&(r.className=i),r},n.prototype.buildSuggestion=function(n,t){return t.className=this.SuggestionClassName+(this.suggestionsContainer.childNodes.length==0?" sa_sg_first ":" ")+this.SuggestionClassName+n.Type,this.buildSuggestionTerm(n,t),this.addSuggestionUrl(n,t),t.hc=n.HC,t.hcs=n.HCS,t},n.prototype.addHeading=function(n,t){var i=sj_ce("li","","sa_hd"+(t?"_first":""));i.hd=!0;i.innerHTML=n;this.suggestionsContainer.appendChild(i)},n.ScopeExtensions=[],n}();_w.Bing.AS.Canvas=Canvas;Bing.AS.Layout=function(n,t){function s(n,t){n.appendChild(t)}function i(n){var t=parseFloat(n);return isNaN(t)?0:t}var u=this,o=n.asf,h=Bing.AS.Utils.GetComputedStyle(sj_b).direction=="rtl",f=_ge(n.i),r=sj_ce("div","","sa_as"),e;s(t,r);o||(e=sj_ce("ul","sa_ul","sa_drw"),s(r,e));u.getSuggestionsContainer=function(){return o?_ge(n.slid):e};u.getSuggestionsDrawer=function(){return r};u.show=function(){r.style.display="block"};u.hide=function(){r.style.display="none"};u.update=function(){var u,e,n=Bing.AS.Utils.GetComputedStyle(t.parentNode);h?(e=(i(n.paddingRight)+i(n.borderRightWidth))*-1,u=i(n.borderLeftWidth)-i(n.paddingLeft)):(u=(i(n.paddingLeft)+i(n.borderLeftWidth))*-1,e=i(n.borderRightWidth)-i(n.paddingRight));t.style.marginLeft=u+"px";t.style.marginRight=e+"px";f!=null&&f.dir.length>0&&(r.dir=f.dir)}};Bing.AS.Layout.prototype.EventRegistry=[];Bing.AS.Layout.prototype.raiseEvent=Bing.AS.AutoSuggest.prototype.raiseEvent;Bing.AS.Layout.prototype.getLeft=function(){return 0};Bing.AS.Layout.prototype.getWidth=function(){return 0};Bing.AS.SearchForm=function(n){function st(n){return typeof n=="number"?n:'"'+n.replace(/"/g,'\\"')+'"'}function a(u,f,e){var o,l,y,p,w,a,d,s,v,h;if(n.sbt){for(;y=b.shift();)t.searchForm.removeChild(y);b=[]}for(f&&t.raiseEvent(Bing.AS.EventIds.GhostingSubmit),c=r.getAllSuggestionInstObject(null,f),p=ti(e),o=_ge("sa_ghc"),o&&o.parentNode.removeChild(o),w=0,d=[c,p];a=d[w++];)for(s in a)o=_ge("sa_"+s),l=a[s],o?o.value=l:t.addHiddenField(s,l);r.ghostInstValue=0;ot?ot(i,c):(f||sj_evt.fire("onSearch",t.searchForm),k(),t.fireEvt?(v=t.searchForm.getAttribute("action"),e&&t.searchForm.setAttribute("action",e),t.searchForm.submit(),ct(f),v&&t.searchForm.setAttribute("action",v)):_w._H&&_H.ajax&&_w.sj_isAjax&&f||t.searchForm.submit());t.fireEvt&&(t.autosuggest.canvas.selectedSuggestion=null,t.autosuggest.ghostInstValue=0,h=_ge("sa_ghc"),!c.ghc&&h&&h.parentNode.removeChild(h))}function k(){var r,i;ft&&n.eUG||(r=t.searchForm.getAttributeNode("onsubmit"),r&&_w.si_T&&(i=r.value.match(/si_T\('(.*)'\)/),i&&i[1]&&si_T(i[1])),ft=!0)}function ht(i,u,e,o,s,h){if(sb_st(f,5),o!=undefined&&y(o),e)sj_cook.set("SCRHDN","ASD","1"),sj_cook.set("SCRHDN","DURL",i),a(o,s);else{if(r.config.asf){if(n.sbt){a(o,s,i);return}n.eUG?k():(t.searchForm.onsubmit&&t.searchForm.onsubmit(),ct(s))}var c=i+(u?r.getAllSuggestionInstUrl():"");h?_w.open(c,"_blank"):typeof sj_lc!="undefined"?sj_lc(c):_w.location=c}}function ct(n){!n&&t.fireEvt&&t.fireEvt(t.searchForm,"ASSugClicked")}function ti(n){var r={},t;if(n)for(var i,f=/\+/g,e=/([^&=]+)=?([^&]*)/g,u=function(n){return decodeURIComponent(n.replace(f," "))},o=n.substring(n.indexOf("?")+1);i=e.exec(o);)t=u(i[1]).toLowerCase(),t!=="q"&&t!=="form"&&(r[t]=u(i[2]));return r}function lt(n,r){n(sj_b,"click",v);n(sj_b,"touchend",v);n(t.searchForm,"submit",ii);n(i,"keydown",ri);n(i,"keyup",ui);n(i,"click",vt);t.fireEvt&&n(_w,"blur",v);r("focusChange",ei);r("hideDrawer",f)}function ii(n){var i,u;sb_st(f,5);t.cdh(n);i=r.canvas.selectedSuggestion;i?(r.config.asf&&_w.sa_si_T(i.getAttribute("id")),u=i.query,i.url?ht(i.url,i.addInst,i.redir,u,!0,t.config.eNT):a(u,!0)):a(r.currentQuery,!0)}function ri(n){t.cancelKeyEvent(n)||at(n)}function at(n){var i=n.keyCode;switch(i){case e.KeyCodeEscape:t.config.eAI?(u&&(v(n),sj_sp(n)),sj_pd(n)):t.isQueryGhosted()||(f(),t.cdh(n));break;case e.KeyCodeArrowUp:u&&(r.canvas.handleArrowUpKey(n),t.cdh(n));break;case e.KeyCodeArrowDown:u?r.canvas.handleArrowDownKey(n):yt();break;case e.KeyCodeArrowRight:u&&r.canvas.handleArrowRightKey(n);break;case e.KeyCodeArrowLeft:u&&r.canvas.handleArrowLeftKey(n);break;case e.KeyCodeTab:t.config.asf&&t.config.closeDrawerOnTab&&!t.isQueryGhosted()&&v(n)}}function ui(n){var i=n.keyCode;l||t.cancelKeyEvent(n)||(i==e.KeyCodeArrowUp||i==e.KeyCodeArrowDown||i==e.KeyCodeEscape)&&t.handleUpDownEscOnKeyUp(n)&&at(n)}function vt(){u?t.shouldHidePanel()&&f():yt()}function yt(){(s&&sb_ct(s),l)||(t.lastQuery=null,pt(t.getCurrentQuery()))}function fi(){o.update();u||(sj_evt.fire("focusChange",i),t.searchBox.setAttribute("aria-expanded","true"),o.show(),u=!0,sb_i6&&sj_evt.fire("autosuggestShown",i),sj_evt.fire("onPopTR"))}function v(){f()}function f(){u&&(t.searchBox.removeAttribute("aria-activedescendant"),t.searchBox.setAttribute("aria-expanded","false"),o.hide(),kt=u=!1,t.lastQuery=t.getCurrentQuery(),t.raiseEvent(Bing.AS.EventIds.DropDownHidden),sb_i6&&sj_evt.fire("autosuggestHide",i),_w._H&&sj_evt.fire("ASHide"))}function ei(n){n[1]!==i&&f()}function oi(){s=sb_st(f,50)}function si(n){t.updateText(n)}function y(n,t){var r=t?n+t:n,u;i.prefixLength=t?n.length:null;r!==null&&(i.value=r,et||i.setAttribute("value",r),u=r.length,ut(i,u,u))}function hi(n,t){if(h=!0,y(n),!t){var r=n.length;i.focus();ut(i,r,r)}}function ci(n,t,i){h=i===undefined?!0:i;y(n,t)}function d(){var n,r;l||(n=t.getCurrentQuery(),t.lastQuery==n&&h||et||i.setAttribute("value",n),h?pt(n):(t.lastQuery=n,h=!0),r=it,rt&&(r*=1<<Math.max(0,w-wt+1)/2));dt=sb_st(d,r)}function pt(n){if(t.lastQuery!=n){if(n.length<bt){f();return}t.shouldHidePanel()?f():(s&&sb_ct(s),r.setCursorPosition(t.getCursorPosition()),r.setQuery(n),t.lastQuery=n,w++)}}function li(){w--}function ai(){Bing.AS.SearchForm.prototype.EventRegistry=[];lt(sj_ue,sj_evt.unbind);sb_ct(d);sb_ct(s)}var t=this,p;t.raiseEvent(Bing.AS.EventIds.ConfigurationSet,n);t.config=n;t.searchForm=null;t.searchBox=null;t.autosuggest=null;t.layout=null;t.lastQuery="";var g="SRCHHPGUSR",nt="AS",wt=4,tt,r,o,it=0,rt,w=0,bt=n.eHS||n.ePN?0:1,s,l,kt,u,i,h=!0,e=Bing.AS.Constants,c,b=[],dt,ut=Bing.AS.Utils.SetSelectionRange,ft,et=sb_ie&&sb_de.style.opacity===undefined,gt=new RegExp("^\\s*","g"),ni=new RegExp("\\s+","g"),ot=typeof n.cb=="function"?n.cb:null;for(t.init=function(u){var v,e,s,h,y,p,f,c;(t.config.globalId=u,t.config.slid="sa_ul",l=t.isDisabled())||(_w._H&&_H.ajax?(v=_ge("serpHeader"),v&&(e=v.getElementsByTagName("form"),e&&e.length>0&&(t.searchForm=e[0],s=t.searchForm.getElementsByClassName("b_searchbox"),s&&s.length>0&&(i=s[0])))):(tt=n.i,t.searchForm=_ge(n.f),i=_ge(tt)),t.searchBox=i,t.searchForm.form&&(n.fc=t.searchForm.form.value),sj_cook.set("SCRHDN","ASD","0"),sj_cook.set("SCRHDN","DURL","#"),h=_ge(n.c||"sw_as"),h.style.display="block",t.layout=o=new Bing.AS.Layout(n,h,i.parentNode),t.layout.update(),t.registerUIElement(h),t.registerUIElement(i),y=_ge("sb_form_go"),y&&t.registerUIElement(y),it=n.d,rt=n.t,n.ol||(t.lastQuery=t.getCurrentQuery()),p=n.asf?o.getSuggestionsDrawer():o.getSuggestionsContainer(),t.autosuggest=r=new Bing.AS.AutoSuggest,r.init(n,p),t.searchBox.setAttribute("role","combobox"),t.searchBox.setAttribute("aria-autocomplete","both"),t.searchBox.setAttribute("aria-expanded","false"),t.searchBox.setAttribute("aria-owns",t.config.slid),f=new Bing.AS.EventRegistration,f.add(Bing.AS.EventIds.ResponseReceived,li),f.add(Bing.AS.EventIds.NoResults,oi),f.add(Bing.AS.EventIds.SuggestionsRendered,fi),f.add(Bing.AS.EventIds.UpdateText,si),f.add(Bing.AS.EventIds.UpdateTextAndRequery,hi),f.add(Bing.AS.EventIds.UpdateGhostedText,ci),f.add(Bing.AS.EventIds.NavigateSerp,a),f.add(Bing.AS.EventIds.NavigateLink,ht),f.add(Bing.AS.EventIds.Disposed,ai),r.EventRegistry.push(f),c=new Bing.AS.EventRegistration,c.add(Bing.AS.EventIds.SelectPrevItem,function(n){t.raiseEvent(Bing.AS.EventIds.SelectPrevItem,n)}),c.add(Bing.AS.EventIds.SelectNextItem,function(n){t.raiseEvent(Bing.AS.EventIds.SelectNextItem,n)}),r.canvas.EventRegistry.push(c),lt(sj_be,sj_evt.bind),d(),t.raiseEvent(Bing.AS.EventIds.Initialized,t))},t.apiCB=function(n){t.autosuggest.apiCB(n)},t.setData=function(n){t.autosuggest.setData(n)},t.isDisabled=function(){return sj_cook.get(g,nt)==0},t.enable=function(n,i){n&&(t.lastQuery=t.getCurrentQuery());l=!n;i||sj_cook.set(g,nt,n?1:0,1,"/")},t.sid=function(t){r.config.sid=n.sid=t},t.registerUIElement=function(n){sj_be(n,"touchend",sj_sp);sj_be(n,"click",sj_sp)},t.addHiddenField=function(i,r){var u=sj_ce("input");return u.id="sa_"+i,u.name=i,u.value=r,u.type="hidden",t.searchForm.appendChild(u),n.sbt&&b.push(u),u},t.drawerIsOpen=function(){return u},t.cp=0,t.cdh=function(n){sj_sp(n);sj_pd(n)},t.setAllSuggestionInstObject=function(n){c=n},t.addToAllSuggestionInstObject=function(n,t){c[n]=t},t.show=vt,t.getCursorPosition=function(){return t.cp=Bing.AS.Utils.getCursorPosition(i,!0),t.cp},_w.sa_si_T=function(i){var u=_ge(i.replace("&","")),e,o,f,s;return u&&document.images&&(e=u.getAttribute("h"),f={a:[],add:function(n,t){this.a.push(st(n)+":"+st(t))},get:function(){return this.a.length?"&PR={"+this.a.join(",")+"}":""}},f.add("i",r.canvas.clickedSuggestion?u.it||"m":"k"),r.ghostInstValue&&f.add("ghc",r.ghostInstValue),u.panel&&f.add("et",sb_gt()-u.panel.ot),o=t.autosuggest.data&&t.autosuggest.data.Inst?t.autosuggest.data.Inst.IG:null,o&&e&&(s=new Image,s.src=_G.gpUrl+"IG="+o+"&"+e+f.get()),n.eUG&&k()),!0},t.updateText=function(n){h=!1;y(n)},t.isQueryGhosted=function(){return!!i.prefixLength},t.getCurrentQuery=function(n){var t=i.prefixLength?i.value.substr(0,i.prefixLength):i.value;return n?t:t.replace(gt,"").replace(ni," ").toLowerCase()},p=0;p<Bing.AS.SearchForm.ScopeExtensions.length;p++)Bing.AS.SearchForm.ScopeExtensions[p].init.apply(t)};Bing.AS.SearchForm.ScopeExtensions=[];Bing.AS.SearchForm.prototype.EventRegistry=[];Bing.AS.SearchForm.prototype.cancelKeyEvent=function(){return!1};Bing.AS.SearchForm.prototype.handleUpDownEscOnKeyUp=function(){return!1};Bing.AS.SearchForm.prototype.raiseEvent=Bing.AS.AutoSuggest.prototype.raiseEvent;Bing.AS.SearchForm.prototype.shouldHidePanel=function(){return!1};Bing.AS.SearchForm.ScopeExtensions.push(new function(){this.init=function(){function g(){var u,f;t=o.searchBox;i=Bing.AS.Utils.GetComputedStyle(t);n.style.fontSize=i.fontSize;n.style.fontFamily=i.fontFamily;n.style.position="absolute";t.parentNode.insertBefore(n,t.nextSibling);s=Bing.AS.Utils.GetComputedStyle(t.parentNode);u=new Bing.AS.EventRegistration;u.add(r.ApiServiceReceived,it);u.add(r.SuggestionsRendered,rt);u.add(r.NoResults,a);u.add(r.UpdateText,ft);u.add(r.Disposed,ot);f=o.autosuggest;f.EventRegistry.push(u);f.addApiOption(w)}function e(n){return n.indexOf("px")>0?parseFloat(n):n.indexOf("em")>0?parseFloat(n)*(i.fontSize.indexOf("px")>0?parseInt(i.fontSize):16):0}function nt(){return e(i.paddingLeft)+e(i.marginLeft)+e(s.paddingLeft)}function tt(n){return e(s.paddingTop)+e(i.marginTop)+n+(t.offsetHeight-n)/2-1}function it(n){u=n.Type==b?n.Suggests:null}function rt(n,t){var i=t.length>0&&t[0].hc,r=function(){ut(i)};h=sb_st(r,5)}function ut(n){var r,f,i,t,e;if(a(),!n){if(u)for(t=0;t<u.length;t++)r=parseInt(u[t].Meta1),f=parseInt(u[t].Meta2),r!=NaN&&f!=NaN&&v(r,f);if(i=o.autosuggest.data,i&&i.Speller&&i.Speller.Corrections)for(t=0;e=i.Speller.Corrections[t++];)v(e.From,e.To)}}function a(){for(var n=0;n<f.length;n++)t.parentNode.removeChild(f[n]);f=[]}function ft(){for(var i=o.autosuggest.currentQuery==t.value?"block":"none",n=0;n<f.length;n++)f[n].style.display=i}function v(i,r){var e,o,u;Bing.AS.Utils.SetInnerText(n,t.value.substring(i,r));y();e=n.offsetWidth;o=n.offsetHeight;l();u=sj_ce("div","","sa_spell");u.style.width=e+"px";u.style.height=p+"px";u.style.left=et(i)+"px";u.style.top=tt(o)+"px";u.style.position="absolute";u.style.background="url(/fd/s/as_spell_underline.png)";t.parentNode.appendChild(u);f.push(u)}function et(i){Bing.AS.Utils.SetInnerText(n,t.value.substring(0,i));n.innerHTML=n.innerHTML.replace(k,"&#160;").replace(d,"_");y();var r=n.offsetWidth;return l(),r+nt()}function y(){n.style.display="inline"}function l(){n.style.display="none"}function ot(){h&&sb_ct(h)}var c;if(this.config.spr){var r=Bing.AS.EventIds,p=3,w="qr",b="QR",k=new RegExp(" ","g"),d=new RegExp("-","g"),o=this,t,u,f=[],i,s,h,n=sj_ce("span");n.style.whiteSpace="nowrap";l();c=new Bing.AS.EventRegistration;c.add(r.Initialized,g);this.EventRegistry.push(c)}}}),function(n){n.SearchForm.ScopeExtensions.push(new function(){this.init=function(){function nt(t){var i=t.autosuggest,k,c,p;i.ghostInstValue=v;i.addApiOption("hc");var et=function(){return i.ghostInstValue=g},ot=function(){i.ghostInstValue==v&&(i.ghostInstValue=d)},f=t.searchBox,nt=function(t,i){return n.Utils.SetSelectionRange(f,t,i)};y=function(){return t.getCursorPosition()==s().length};h=function(){return f.value};s=function(){return t.getCurrentQuery(!0)};e=function(){return t.isQueryGhosted()?h():null};u=function(n,t,u){if(i.raiseEvent(r.UpdateGhostedText,null,null,n),t){var f=h().length;nt(f,f)}u&&et()};o=function(n){var t=n?r.UpdateTextAndRequery:r.UpdateText;i.raiseEvent(t,s())};l=function(n,t){t?(i.raiseEvent(r.UpdateGhostedText,n,t),nt(n.length,(n+t).length),ot()):i.raiseEvent(r.UpdateTextAndRequery,n)};k=function(n,t){n(f,"keypress",ut);n(f,"keydown",it);n(f,"mousedown",ft);t("onFeedbackStarting",function(){return o(!1)});a?(n(f,"compositionstart",w),n(f,"compositionend",b)):n(f,"keyup",rt)};c=new n.EventRegistration;c.add(r.SuggestionsRendered,tt);c.add(r.Disposed,function(){return k(sj_ue,sj_evt.unbind)});i.EventRegistry.push(c);p=new n.EventRegistration;p.add(r.GhostingSubmit,function(){e()&&u(!1,!0,!0)});p.add(r.DropDownHidden,function(){e()&&o(!1)});t.EventRegistry.push(p);k(sj_be,sj_evt.bind)}function w(){f=!0}function b(){f&&(f=!1,u(!0,!1,!1),c&&sb_st(c,0))}function k(n,r,u){var f,s,h;if((c=null,n&&r==n.toLowerCase())&&i!=t.KeyCodeDelete&&i!=t.KeyCodeBackspace&&y()){for(s=0;s<u.length;++s)if(u[s].hc){f=u[s].query;break}f&&f.indexOf(r)==0&&f.length>n.length?(h=f.slice(n.length),l(n,h)):e()&&o(!0)}}function tt(n,t){var i=s();f?c=function(){return k(i,n,t)}:k(i,n,t)}function it(n){if(i=n.keyCode,n.ctrlKey&&i==90){sj_pd(n);return}if(a||f||i!=t.KeyCodeImeOpen||w(),!f&&e()&&i!=t.KeyCodeArrowUp&&i!=t.KeyCodeArrowDown)if(i==t.KeyCodeEnter)u(!1,!0,!0);else if(i==t.KeyCodeArrowLeft||i==t.KeyCodePageUp||n.shiftKey&&i==t.KeyCodeArrowRight)u(!1,!1,!0);else if(i==t.KeyCodeEnd||i==t.KeyCodePageDown||i==t.KeyCodeArrowRight||n.ctrlKey&&i==65)u(!0,!1,!0);else if(i==t.KeyCodeTab)u(!0,!0,!0),sj_pd(n);else if(i==t.KeyCodeEscape||n.ctrlKey&&i==t.KeyCodeBackspace)o(!0),sj_pd(n);else if(i==t.KeyCodeDelete||i==t.KeyCodeBackspace||n.ctrlKey&&i==88)u(!1,!1,!1);else if(n.ctrlKey&&i==86||n.shiftKey&&i==t.KeyCodeInsert)o(!0);else{var r=h().toLowerCase();sb_st(function(){r!=h().toLowerCase()&&u(!0,!1,!1)},0)}}function rt(n){var i=n.keyCode;f&&(i==t.KeyCodeEnter||i==t.KeyCodeEscape||i==t.KeyCodeBackspace||i==t.KeyCodeArrowLeft||i==t.KeyCodeArrowRight)&&b()}function ut(n){var t=e();if(t){var i=n.char?n.char:String.fromCharCode(n.charCode?n.charCode:n.keyCode),r=s(),u=t.slice(r.length);u.charAt(0)==i.toLowerCase()&&(l(r+i,u.slice(1)),sj_pd(n))}}function ft(){e()&&u(!1,!1,!0)}if(this.config.eHC){var a=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,v=0,d=1,g=2,t=n.Constants,r=n.EventIds,i,f=!1,c,s,h,e,l,u,o,y,p=new n.EventRegistration;p.add(r.Initialized,nt);this.EventRegistry.push(p)}}})}(_w.Bing.AS);sa_inst=new Bing.AS.SearchForm(sa_config);sa_inst.init("sa_inst");sa_eL&&sa_inst.show();_w.sj_evt&&sj_evt.fire("autoSugLoaded")