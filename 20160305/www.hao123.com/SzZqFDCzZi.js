__d("widget.treasure.config",["common.js.jquery"],function(m,l,j,c){var f=c("common.js.jquery"),e={gameState:{unInit:0,init:1,start:2,end:3,dolottary:4},images:{duozai:"http://s0.hao123img.com/res/treasure/duozai-kp.png",imagebtn:"",animateimg:"",pop:"http://s0.hao123img.com/res/treasure/treasure-pop.png"},lottery:{pid:"116",token:"296cd89197bcc8373c2bc8f73a88ad85",lotteryUrl:"http://zhuanla.hao123.com/lucky/draw?callback=?",submitUrl:"http://zhuanla.hao123.com/lucky/update?callback=?",goldUrl:"http://zhuanla.hao123.com/task/addvipcoin?callback=?"},
duozai:{width:80,height:172,normal:{interval:100,frames:"-16 30,-16 -172,-16 -344,-16 -516,-16 -688,-16 -860,-96 0".split(",")},onceHover:{interval:200,frames:"-16 0,-16 -172,-16 -344,-16 -516,-16 -688,-16 -860,-96 0".split(",")},working:{interval:100,frames:"-96 0,-96 -172,-95 -344,-95 -516,-95 -687,-95 -859,-95 -1032".split(",")},jumping:{interval:200,frames:["-45 -5","-45 -139","-45 -273","-45 -407","-45 -5"]}},progressbar:{width:56,height:166,left:13,bottom:135,emptyposition:"0px 0px",fullposition:"0px 0px",
btnwidth:50,btnheight:60,btntop:0,btnleft:0,score:{zero:166,one:154,two:134,three:114,four:94,five:74,six:54,seven:0}}};l.exports={init:function(){this.data=e;return this},get:function(e,h){var b=this.data||{},g=(e||"").split(".");f.each(g,function(a,d){d&&"undefined"!==typeof b&&(b=b[d])});return"undefined"!==typeof b?b:h},set:function(e,h){var b,g,a;if("undefined"===typeof h)this.data=e;else if(e=f.trim(""+(e||"")))b=e.split("."),g=b.pop(),a=this.data||{},f.each(b,function(d,b){var g=a[b];if("object"===
typeof g)a=a[b];else if("undefiend"===typeof g)a=a[b]={};else throw Error("forbidden to set property["+b+"] of ["+g+"] data");}),a[g]=h;return this}}.init();return j});
__d("widget.treasure.diamondSprite",["common.js.jquery","common.js.format","widget.treasure.config"],function(m,l,j,c){function f(b,g,a,d){this.ctx=b;this.url=g;this.num=d;this.diamondStore=a||{};this.create()}var e=c("common.js.jquery"),k=c("common.js.format"),h=c("widget.treasure.config");h.get("diamond");h.get("images");f.prototype.create=function(){var b=this.diamondStore,g=this.url,a=this.ctx.text(),d=this.num,c=h.get("diamond"+d);this.state1pic=h.get("images.diamond"+d+"state1");this.state2pic=
h.get("images.diamond"+d+"state2");this.$tpl=e(k('<a class="g-ib treasure-item" target="_blank" alog-text="#{title}" href="#{url}" style="position:relative;padding: 0;">&nbsp<i data-hook="treasure-diamond" style="cursor:pointer;*margin-top:3px;position: absolute;top:#{top}px;left:#{left}px;display:block;width:#{width}px;height:#{height}px;background-repeat:no-repeat;"></i></a>',{width:c.width,height:c.height,top:c.top,left:c.left,url:g,title:a}));this.$diamond=e('[data-hook="treasure-diamond"]',this.$tpl);
b&&b[g]?this.render(b[g]):this.render(1);return this.$tpl};f.prototype.render=function(b){b||(b=1);var g=this.ctx.text(),g=g+"-diamond";switch(b){case 1:this.$tpl.attr({"data-state":1,"alog-text":g});this.$diamond.css({"background-image":"url("+this.state1pic.src+")"});break;default:this.$tpl.attr({"data-state":2,"alog-text":g}),this.$diamond.css({"background-image":"url("+this.state2pic.src+")"})}};l.exports=f;return j});
__d("widget.treasure.duozaiSprite",["common.js.jquery","common.js.format","common.js.animation","widget.treasure.config"],function(m,l,j,c){function f(a){this.game=a;this.normalAnimationDone=!1;this.normalFrames=b.normal.frames;this.hoverDonePosition=a.convertPX(this.normalFrames[this.normalFrames.length-1]);this.create()}var e=c("common.js.jquery"),k=c("common.js.format"),h=c("common.js.animation"),m=c("widget.treasure.config"),b=m.get("duozai"),g=m.get("images");f.prototype.create=function(){this.$tpl=
e(k('<div class="duozai" style="width:#{width}px;height:#{height}px;background-image:url(#{bgurl});background-position:#{backgroundPos};bottom:#{bottom}px"></div>',{width:b.width,height:b.height,bgurl:g.duozai.src,backgroundPos:this.game.convertPX(this.game.duozaiinitposition),bottom:this.game.startbtnheight}))};f.prototype.show=function(a){this.$tpl.css({"background-position":this.game.initAnimationPosition}).animate({bottom:this.game.startbtnheight},100,function(){a&&a()})};f.prototype.playNormalAnimation=
function(a){var d=this,g=this.$tpl[0],e=b.normal;this.normalAnimation=h().changePosition(g,e.frames).then(function(){d.normalAnimationDone=!0;a&&a()});this.normalAnimation.start(e.interval)};f.prototype.stopNormalAnimation=function(){this.normalAnimation&&this.normalAnimation.dispose();this.normalAnimationDone=!0;this.$tpl.css("background-position","-16px 0")};f.prototype.playWorkingAnimation=function(){var a=this.$tpl[0],d=b.working;this.normalAnimationDone||this.stopNormalAnimation();this.workingAnimation=
h().changePosition(a,d.frames).repeatForever();this.workingAnimation.start(d.interval)};f.prototype.stopWorkingAnimation=function(){this.workingAnimation&&this.workingAnimation.dispose();this.$tpl.css("background-position",this.hoverDonePosition)};l.exports=f;return j});
__d("widget.treasure.progressbarSprite","common.js.jquery,common.js.format,common.js.animation,common.js.pageEvents,widget.treasure.config,common.js.events".split(","),function(m,l,j,c){function f(a){this.game=a;this.score=a.score||0;this.create()}var e=c("common.js.jquery"),k=c("common.js.format");c("common.js.animation");c("common.js.pageEvents");var m=c("widget.treasure.config"),h=c("common.js.events"),b=m.get("progressbar"),g=m.get("images");f.prototype.create=function(){var a=this.renderScore(this.score);
this.$tpl=e(k('<div class="progressbar-box" style="position:absolute;width:#{width}px;height:#{height}px;left:#{left}px;bottom:#{bottom}px;cursor:pointer"><div class="pointer js-pointer" style="position: absolute;width:#{width}px;height:#{height}px;background: url(#{bgurl})  #{fullposition}  no-repeat;"></div><div class="progressbar js-progressbar" style="position: absolute;width:#{width}px;height:#{emptybarheight}px;background: url(#{bgurl}) #{emptyposition} no-repeat"></div></div>',{width:b.width,
height:b.height,left:b.left,bottom:b.bottom,fullposition:b.fullposition,emptyposition:b.emptyposition,bgurl:g.imagebtn.src,btnwidth:b.btnwidth,btnheight:b.btnheight,btntop:b.btntop,btnleft:b.btnleft,emptybarheight:a}));"1"==this.game.logicdata.isloginfirst&&"1"!=this.game.login&&(this.$btnTpl=e(k('<a href="#" alog-text="\u9886\u53d6\u5956\u52b1" class="prize-btn js-prize" style="width: #{btnwidth}px;height: #{btnheight}px;display:block;position: absolute;top: #{btntop}px;left: #{btnleft}px;cursor:pointer"></a>',
{btnwidth:b.btnwidth,btnheight:b.btnheight,btntop:b.btntop,btnleft:b.btnleft})));this.$progressbar=e(".js-progressbar",this.$tpl);this.$pointer=e(".js-pointer",this.$tpl);7==this.score&&this.$btnTpl&&(this.$tpl.append(this.$btnTpl),this.$prizeBtn=e(".js-prize",this.$tpl),h.done("weekend.progressbar-bindbtnclick"))};f.prototype.playflyanimation=function(){this.$tpl.fadeIn(1E3)};f.prototype.renderScore=function(a){var d;switch(a){case 0:d=b.score.zero;break;case 1:d=b.score.one;break;case 2:d=b.score.two;
break;case 3:d=b.score.three;break;case 4:d=b.score.four;break;case 5:d=b.score.five;break;case 6:d=b.score.six;break;case 7:d=b.score.seven;break;default:d=b.score.seven}this.$progressbar&&this.$progressbar.animate({height:d},1E3);7==a&&this.$btnTpl&&!this.$prizeBtn&&(this.$tpl.append(this.$btnTpl),this.$prizeBtn=e(".js-prize",this.$tpl),h.done("weekend.progressbar-bindbtnclick"));return d};f.prototype.forward=function(a){this.renderScore(a)};f.prototype.back=function(){var a=this.forwardTime;this.$pointer.stop().animate({left:pointerConf.minLeft},
a,"linear")};f.prototype.reset=function(){this.renderScore(0)};l.exports=f;return j});
__d("widget.treasure.treasure_ajax",["common.js.jquery"],function(m,l,j,c){function f(e){e=document.cookie.match("(?:^|; )"+window.encodeURIComponent(e)+"=([^;]+)");return null===e?void 0:window.decodeURIComponent(e[1])}function e(){var e=f("FLASHID")||f("BAIDUID");if(e)return e.split(":")[0]}var k=c("common.js.jquery");return j={doPost:function(c,b,g){b=b||{};b.c=e();k.getJSON(HAO.httpsTrans(c),b,function(a){g&&g(a)})}}});
__d("widget.treasure.treasure_goodSubmit",["common.js.widget","widget.popup.base","widget.treasure.config"],function(m,l,j,c){c("common.js.widget");c("widget.popup.base");var f=c("widget.treasure.config");$.widget("hao123.treasure_goodSubmit",$.lottery.popup,{options:{className:"good-confirm-box",isModel:!0},_create:function(){var e=this.element;this._baseCreate();this.element.appendTo($("body"));this.$close=$('[data-hook="good-confirm-close"]',e);this._bindEvent();this._render();this._baseShow()},
_init:function(){},_render:function(){var e=this.options,c=e.game.popdata[4],h=c.boxlayout.split(" "),b=c.closebtnlayout.split(" "),g=f.get("images");this.element.css({position:"fixed",width:h[0]+"px",height:h[1]+"px","z-index":9999,"background-image":"url("+HAO.httpsTrans(g.pop.src)+")","background-repeat":"no-repeat","background-position":e.game.convertPX(c.boxbgposition)});this.$close.css({position:"absolute",display:"block",width:b[0]+"px",height:b[1]+"px",top:b[2]+"px",left:b[3]+"px"})},_bindEvent:function(){var e=
this;e.$close.click(function(){e._baseHide();e.remove();return!1})}});l.exports={pop:function(e){$('<div id="treasure-good-confirm" class="treasure-good-confirm" monkey="treasure_good_confirm"><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="good-confirm-close" data-hook="good-confirm-close"></a></div>').treasure_goodSubmit({game:e})}};return j});
__d("widget.treasure.treasure_good",["common.js.widget","widget.treasure.treasure_ajax","widget.treasure.config","widget.treasure.treasure_goodSubmit"],function(m,l,j,c){c("common.js.widget");var f=c("widget.treasure.treasure_ajax"),e=c("widget.treasure.config"),k=c("widget.treasure.treasure_goodSubmit"),h=e.get("lottery").submitUrl;$.widget("hao123.treasure_good",$.lottery.popup,{options:{className:"pop-treasure-good",isModel:!0},_create:function(){var b=this.element;e.get("images");this._baseCreate();
this.element.appendTo($("body"));this.valid=!1;this.$close=$('[data-hook="treasure-good-close"]',b);this.$submit=$('[data-hook="treasure-good-submit"]',b);this.$prize=$('[data-hook="treasure-good-prize"]',b);this.$name=$('[data-hook="prizer-name"]',b);this.$phone=$('[data-hook="prizer-phone"]',b);this.$address=$('[data-hook="prizer-address"]',b);this._bindEvent();this._baseShow()},_init:function(){this._render()},_render:function(){var b=this.options,g=e.get("images"),a=b.game.popdata[3],d=a.boxlayout.split(" "),
c=a.closebtnlayout.split(" "),i=a.btn1layout.split(" "),h=a.btn2layout.split(" "),f=a.input1layout.split(" "),k=a.input2layout.split(" "),j=a.input3layout.split(" ");this.element.css({position:"fixed",width:d[0],height:d[1],"z-index":9999,"background-image":"url("+HAO.httpsTrans(g.pop.src)+")","background-repeat":"no-repeat","background-position":b.game.convertPX(a.boxbgposition)});this.$close.css({position:"absolute",display:"block",width:c[0]+"px",height:c[1]+"px",top:c[2]+"px",left:c[3]+"px"});
this.$submit.css({position:"absolute",display:"block",width:i[0]+"px",height:i[1]+"px",top:i[2]+"px",left:i[3]+"px"}).attr("href",b.url);this.$prize.css({position:"absolute",width:h[0]+"px",height:h[1]+"px",top:h[2]+"px",left:h[3]+"px"}).text(b.prize);this.$name.css({position:"absolute",display:"block",width:f[0]+"px",height:f[1]+"px",top:f[2]+"px",left:f[3]+"px"});this.$phone.css({position:"absolute",display:"block",width:k[0]+"px",height:k[1]+"px",top:k[2]+"px",left:k[3]+"px"});this.$address.css({position:"absolute",
display:"block",width:j[0]+"px",height:j[1]+"px",top:j[2]+"px",left:j[3]+"px"})},show:function(){this._baseShow()},_commit:function(){function b(){g._baseHide();k.pop(a.game)}var g=this,a=g.options;g._valid();g.valid&&f.doPost(h,a.args,b)},_valid:function(){function b(a,d){a=$.trim(a);switch(d){case "phone":return/^0?1[3|4|5|8][0-9]\d{8}$/.test(a);default:return!!a}}var g=this.$name.val(),a=this.$phone.val(),d=this.$address.val();b(g,"notnull")?b(a,"notnull")?b(a,"phone")?b(d,"notnull")?(this.valid=
!0,this.options.args.winfo.address=d,this.options.args.winfo.phone=a,this.options.args.winfo.uname=g):(this.valid=!1,this.$address.focus()):(this.valid=!1,this.$phone.val("").focus()):(this.valid=!1,this.$phone.focus()):(this.valid=!1,this.$name.focus())},_bindEvent:function(){var b=this;this.$close.click(function(){b._baseHide();b.remove();return!1});this.$submit.click(function(){b._commit();return!1})}});l.exports={pop:function(b,g,a){var d={};d.prize=b;d.args=g;d.game=a;$('<div id="pop-treasure-good" class="pop-treasure-good" monkey="pop_treasure_good"><div class="treasure-good-prize" data-hook="treasure-good-prize"></div><input class="prizer-name" data-hook="prizer-name"><input class="prizer-phone" data-hook="prizer-phone"><textarea rows="2" cols="20" class="prizer-address" data-hook="prizer-address"></textarea><a href="#" class="treasure-good-submit" data-hook="treasure-good-submit" title="\u63d0\u4ea4"></a><a href="#" title="\u5173\u95ed\u4e2d\u5956\u5f39\u5c42" class="treasure-good-close" data-hook="treasure-good-close"></a></div>').treasure_good(d)}};
return j});
__d("widget.treasure.treasure_virtual",["common.js.widget","widget.popup.base","widget.treasure.config","widget.treasure.treasure_good"],function(m,l,j,c){c("common.js.widget");c("widget.popup.base");var f=c("widget.treasure.config"),e=c("widget.treasure.treasure_good");$.widget("hao123.treasure_virtual",$.lottery.popup,{options:{className:"pop-treasure-virtual",isModel:!0},_create:function(){var e=this.element;f.get("images");this._baseCreate();this.element.appendTo($("body"));this.$close=$('[data-hook="treasure-virtual-close"]',
e);this.$submit=$('[data-hook="treasure-virtual-submit"]',e);this.$img=$('[data-hook="treasure-virtual-img"]',e);this.$prize=$('[data-hook="treasure-virtual-prize"]',e);this._bindEvent();this._baseShow()},_init:function(){this._render()},_render:function(){var e=this.options,c=f.get("images"),b=e.game.popdata[2],g=b.boxlayout.split(" "),a=b.boxbgposition,d=b.closebtnlayout.split(" "),n=b.btn1layout.split(" "),i=b.input1layout.split(" "),r=b.input2layout.split(" ");"0"==b.isprizeshow&&"0"==e.real&&
(g=b.boxlayout2.split(" "),d=b.closebtnlayout2.split(" "),n=b.btn1layout2.split(" "),i[0]=0,i[1]=0,r[0]=0,r[1]=0,a=b.boxbgposition2);this.element.css({position:"fixed",width:g[0],height:g[1],"z-index":9999,"background-image":"url("+HAO.httpsTrans(c.pop.src)+")","background-repeat":"no-repeat","background-position":e.game.convertPX(a)});this.$close.css({position:"absolute",display:"block",width:d[0]+"px",height:d[1]+"px",top:d[2]+"px",left:d[3]+"px"});this.$submit.css({position:"absolute",display:"block",
width:n[0]+"px",height:n[1]+"px",top:n[2]+"px",left:n[3]+"px"}).attr("href",e.url);this.$img.css({position:"absolute",width:r[0]+"px",height:r[1]+"px",top:r[2]+"px",left:r[3]+"px","background-image":"url("+HAO.httpsTrans(e.img)+")","background-repeat":"no-repeat","background-position":"center center"});this.$prize.css({position:"absolute",width:i[0]+"px",height:i[1]+"px",top:i[2]+"px",left:i[3]+"px"}).text(e.name)},_bindEvent:function(){var c=this,h=this.options;this.$close.click(function(){c._baseHide();
c.remove();return!1});this.$submit.click(function(){c._baseHide();c.remove();if(0!=h.real)return e.pop(h.name,h.params,h.game),!1})}});l.exports={pop:function(e,c,b){var g={};g.img=c.img_url;g.url=c.url;g.game=e;g.name=c.prize_name;g.prize_id=c.prize_id;g.real=c.real;g.params=b;$('<div id="pop-treasure-virtual" class="pop-treasure-virtual" monkey="pop_treasure_virtual"><div class="treasure-virtual-prize" data-hook="treasure-virtual-prize"></div><div class="treasure-virtual-img" data-hook="treasure-virtual-img"></div><a href="#" target="_blank" class="treasure-virtual-submit" data-hook="treasure-virtual-submit" title="go"></a><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="treasure-virtual-close" data-hook="treasure-virtual-close"></a></div>').treasure_virtual(g)}};
return j});
__d("widget.treasure.treasure_getGold",["common.js.widget","widget.treasure.config"],function(m,l,j,c){c("common.js.widget");var f=c("widget.treasure.config");$.widget("hao123.treasure_getGold",$.lottery.popup,{options:{className:"gold-confirm-box",isModel:!0},_create:function(){var e=this.element;f.get("images");this._baseCreate();this.element.appendTo($("body"));this.$close=$('[data-hook="gold-confirm-close"]',e);this.$goVip=$('[data-hook="gold-confirm-vip"]',e);this._render();this._bindEvent();this._baseShow()},
_init:function(){},_render:function(){var e=this.options,c=e.game.popdata[5],h=c.boxlayout.split(" "),b=c.closebtnlayout.split(" "),g=c.btn1layout.split(" "),a=f.get("images");this.element.css({position:"fixed",width:h[0]+"px",height:h[1]+"px","z-index":9999,"background-image":"url("+HAO.httpsTrans(a.pop.src)+")","background-repeat":"no-repeat","background-position":e.game.convertPX(c.boxbgposition)});this.$close.css({position:"absolute",display:"block",width:b[0]+"px",height:b[1]+"px",top:b[2]+"px",
left:b[3]+"px"});this.$goVip.css({position:"absolute",display:"block",width:g[0]+"px",height:g[1]+"px",top:g[2]+"px",left:g[3]+"px"}).attr("href",e.game.logicdata.nodrwaurl)},_bindEvent:function(){var e=this;e.$close.click(function(){e._baseHide();e.remove();return!1});e.$goVip.click(function(){e._baseHide();e.remove()})}});l.exports={pop:function(e){$('<div id="treasure-gold-confirm" class="treasure-gold-confirm" monkey="treasure_gold_confirm"><a target="_blank" href="http://vip.hao123.com//?from=weekend" alog-text="goVip" class="gold-confirm-vip" data-hook="gold-confirm-vip"></a><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="gold-confirm-close" data-hook="gold-confirm-close"></a></div>').treasure_getGold({game:e})}};
return j});
__d("widget.treasure.game","common.js.jquery,common.js.format,common.js.events,common.js.log,common.js.JSON,widget.canlash.imageloader,widget.treasure.config,common.js.config,common.js.store,widget.treasure.duozaiSprite,widget.treasure.progressbarSprite,widget.treasure.diamondSprite,widget.treasure.treasure_virtual,widget.treasure.treasure_ajax,widget.treasure.treasure_getGold,common.js.profile,common.js.pageEvents,widget.treasure.dolotteryTip,common.js.login,common.js.cookie".split(","),function(m,
l,j,c){function f(){window.gameinstance=this;this.state=o.unInit;this.resourceLoaded=!1;this.login=n.get("userinfo").islanding}var e=c("common.js.jquery"),k=c("common.js.format"),h=c("common.js.events"),b=c("common.js.log"),g=c("common.js.JSON"),a=c("widget.canlash.imageloader"),d=c("widget.treasure.config"),n=c("common.js.config"),i=c("common.js.store"),r=c("widget.treasure.duozaiSprite"),p=c("widget.treasure.progressbarSprite"),w=c("widget.treasure.diamondSprite"),A=c("widget.treasure.treasure_virtual"),
t=c("widget.treasure.treasure_ajax"),z=c("widget.treasure.treasure_getGold"),x=c("common.js.profile"),s=c("common.js.pageEvents"),b=c("common.js.log"),v=c("widget.treasure.dolotteryTip"),y=c("common.js.login"),q=c("common.js.cookie"),o=d.get("gameState"),u=d.get("images");f.prototype.init=function(a,d,b,g,c,i){this.diamondData="hao123-index-tnwbdz"==c?a[1].data:a[2].data;this.initdata=a[0];this.logicdata=d[0];this.popdata=b;this.goodtotal=g;this.initDiamondConf();this.pageid=c;this.type=a[2].type||
"0";this.updateStore();this.$parent=i||e("body");this.initConfig(a);this.slideState=x.get("slide");this.diamonds=[];this.show=!0;var h=this;this.loadResource(function(a){a&&h.initGameScene()});return!0};f.prototype.convertPX=function(a){return a.replace(/(\S+)\s+(\S+)/,"$1px $2px")};f.prototype.initDiamondConf=function(){for(var a=this.diamondData.length,b,g=this.diamondData,e,c,i,h,f,n=0;n<a;n++)b=g[n].diamondconf.split(" "),e=g[n].state1,c=g[n].state2,i="diamond"+b[0],h="images."+i+"state1",f="images."+
i+"state2",b={width:b[1],height:b[2],top:b[3],left:b[4],index:b[0]},d.set(i,b),d.set(h,HAO.httpsTrans(e)),d.set(f,HAO.httpsTrans(c))};f.prototype.renderResult=function(){var a=this.initdata.resultbox.split(" "),b=this.initdata.resultinput.split(" ");this.$container.append(e('<div data-hook="result-box"><span data-hook="result-info"></span></div>'));this.resultBox=e('[data-hook="result-box"]',this.element);this.resultInfo=e('[data-hook="result-info"]',this.element);this.resultBox.css({position:"absolute",
width:a[0]+"px",height:a[1]+"px",top:a[2]+"px",left:a[3]+"px","background-position":this.convertPX(""+a[4]+" "+a[5]),"background-image":"url("+HAO.httpsTrans(u.duozai.src)+")","background-repeat":"no-repeat"});this.resultInfo.css({position:"absolute",width:b[0]+"px",height:b[1]+"px",top:b[2]+"px",left:b[3]+"px","font-size":b[4]+"px","line-height":b[4]+"px",color:b[5],"text-align":"center"}).text(this.goodtotal)};f.prototype.initConfig=function(a){var b=d.get("lottery.lotteryUrl"),g=d.get("lottery.submitUrl"),
e=d.get("lottery.goldUrl"),c=a[0].initanimationmap.split(","),i=a[0].hoveranimationmap.split(",");this.duozaiwidth=a[0].duozaiwidth;this.duozaiheight=a[0].duozaiheight;this.duozaiinitposition=this.convertPX(a[0].duozaiinitposition);this.containerbottomgame=parseInt(a[0].containerbottomgame,10);this.startbtnheight=parseInt(a[0].startbtnheight,10);this.startBtnPosition=this.convertPX(a[0].startbtnposition);this.closeBtnConf=a[0].closebtnconf.split(" ");this.closeBtnPosition=this.convertPX(this.closeBtnConf[2]+
" "+this.closeBtnConf[3]);this.containerHeightGameing=a[0].containerheightgameing;this.containerBottomGameing=this.containerbottomgame+this.startbtnheight;this.initAnimationPosition=this.convertPX(c[0]);this.initanimationinterval=parseInt(a[0].initanimationinterval,10);this.hoveranimationinterval=parseInt(a[0].hoveranimationinterval,10);this.gameTipConf=a[0].gameruleconf.split(" ");this.gameTipPosition=this.convertPX(this.gameTipConf.slice(4).join(" "));this.progressBarConf=a[0].progressbarconf.split(" ");
this.progressBarStep=a[0].progressbarstep.split(" ");this.progressBarWidth=this.progressBarConf[0];this.progressBarHeight=this.progressBarConf[1];this.progressBarLeft=this.progressBarConf[2];this.progressBarBottom=this.progressBarConf[3];this.progressScoreMap={zero:this.progressBarStep[0],one:this.progressBarStep[1],two:this.progressBarStep[2],three:this.progressBarStep[3],four:this.progressBarStep[4],five:this.progressBarStep[5],six:this.progressBarStep[6],seven:this.progressBarStep[7]};this.progressBarEmptyPosition=
this.convertPX(a[0].progressbaremptyposition);this.progressBarFullPosition=this.convertPX(a[0].progressbarfullposition);this.progressBarStep=a[0].progressbarstep.split(" ");this.getPrizeBtnConf=a[0].getprizebtnconf.split(" ");d.set("duozai.width",a[0].duozaiwidth);d.set("duozai.height",a[0].duozaiheight);d.set("duozai.normal.frames",c);d.set("duozai.normal.interval",this.initanimationinterval);d.set("duozai.working.frames",i);d.set("duozai.working.interval",this.hoveranimationinterval);d.set("progressbar.width",
this.progressBarWidth);d.set("progressbar.height",this.progressBarHeight);d.set("progressbar.left",this.progressBarLeft);d.set("progressbar.bottom",this.progressBarBottom);d.set("progressbar.btnwidth",this.getPrizeBtnConf[0]);d.set("progressbar.btnheight",this.getPrizeBtnConf[1]);d.set("progressbar.btnleft",this.getPrizeBtnConf[2]);d.set("progressbar.btnbottom",this.getPrizeBtnConf[3]);d.set("progressbar.score",this.progressScoreMap);d.set("progressbar.emptyposition",this.progressBarEmptyPosition);
d.set("progressbar.fullposition",this.progressBarFullPosition);d.set("images.duozai",HAO.httpsTrans(a[0].duozai));d.set("images.imagebtn",HAO.httpsTrans(a[0].imagebtn));d.set("images.rule",HAO.httpsTrans(a[0].rule));d.set("images.animateimg",HAO.httpsTrans(this.popdata[1].animateimgurl));d.set("images.pop",HAO.httpsTrans(a[0].pop));d.set("lottery.pid",a[0].pid);d.set("lottery.token",a[0].token);d.set("lottery.lotteryUrl",HAO.httpsTrans(b));d.set("lottery.submitUrl",HAO.httpsTrans(g));d.set("lottery.goldUrl",
HAO.httpsTrans(e))};f.prototype.updateStore=function(){var a=i.get("treasure-state"),b=i.get("treasure-score"),d=i.get("treasure-createtime"),c=i.get("treasure-diamonds");this.state=a?a:o.init;this.score=b?b:0;this.diamondStore=c?c:"{}";this.diamondStore=g.parse(this.diamondStore);a=Date.parse(new Date)/1E3;!d||172800<=a-d?this.resetStore():this.createtime=d};f.prototype.resetStore=function(){var a=i.get("treasure-state"),b=i.get("treasure-score"),d=i.get("treasure-createtime"),c=i.get("treasure-diamonds");
a&&i.remove("treasure-state");b&&i.remove("treasure-score");d&&i.remove("treasure-createtime");c&&i.remove("treasure-diamonds")};f.prototype.resetData=function(){this.score=0;this.state=o.unInit;this.createtime=0;this.diamondStore="{}";this.diamondStore=g.parse(this.diamondStore);this.diamonds=[];this.index=!0};f.prototype.loadResource=function(b){if(this.resourceLoaded)b(!0);else{var d=this;a(u,function(a){d.resouceLoaded=a;b(a)})}};f.prototype.initGameScene=function(){var a=this;a.createStage();
a.createDuozai(function(){a.$container.css("overflow","visible");0==a.score&&a.state!=o.start&&a.state!=o.end?a.duozai.playNormalAnimation(function(){a.createStartBtn();a.createCloseBtn();"1"==a.initdata.resultshow&&a.renderResult()}):("1"==a.slideState&&1450>parseInt(s.getViewport().width,10)&&h.done("slidetoolbar.fold"),a.duozai.playNormalAnimation(function(){a.createCloseBtn();"1"==a.initdata.resultshow&&a.renderResult()}));a.createProgressBar();a.createTip();a.state!=o.start&&a.state!=o.end||
(a.$container.addClass("treasure-gameing").css({bottom:a.containerBottomGameing,height:a.containerHeightGameing}),a.duozai.$tpl.css("bottom",0),a.progressbar.playflyanimation(),a.createDiamonds());a.bindEvent()})};f.prototype.createStage=function(){this.$container=e('<div class="treasure-game" monkey="treasure-game"></div>').appendTo(this.$parent);this.$container.css({width:this.duozaiwidth,height:this.duozaiheight,bottom:this.containerbottomgame})};f.prototype.createDuozai=function(a){var b=this;
this.duozai=new r(b);this.$container.append(this.duozai.$tpl);b.sendCurrent=function(a){"index"!=a?(b.index=!1,b.$container.hide()):(b.index=!0,b.$container.show())};h.on("goTop.sendCurrent",b.sendCurrent);this.duozai.show(a)};f.prototype.createStartBtn=function(){function a(b){var d=e("#hao123-bodyct").offset().top,c=e(".hao123-search .fixed-bg").height()||60;e("body").scrollTop(d-c);b&&b()}var b=this,d=e(k('<div></div><a id="treasure-start" class="treasure-start" href="#" title="\u5f00\u59cb\u6e38\u620f" style="background-image:url(#{bgurl})"></a>',
{bgurl:u.duozai.src}));this.$container.append(d);d=e("#treasure-start");d.css({display:"block",width:b.duozaiwidth,height:b.startbtnheight,"background-image":"url("+u.imagebtn.src+")","background-position":b.startBtnPosition,"background-repeat":"no-repeat","margin-top":b.duozaiheight-b.startbtnheight});d.bind("mousedown",function(){d.addClass("clicked")}).bind("click",function(){d.remove();"1"==b.slideState&&1450>parseInt(s.getViewport().width,10)&&h.done("slidetoolbar.fold");a(function(){b.duozai.stopWorkingAnimation();
b.start()});return!1}).hover(function(){b.$tip.show()},function(){b.$tip.hide()});b.duozai.$tpl.one("click",function(){d.click()})};f.prototype.createCloseBtn=function(){var a=this,b=e('<a href="#" alog-text="\u5173\u95ed\u6e38\u620f" class="treasure-close js-close"></a>');a.$container.append(b);a.$closeBtn=b;b.css({top:a.closeBtnConf[0]+"px",left:a.closeBtnConf[1]+"px","background-image":"url("+u.imagebtn.src+")","background-position":a.closeBtnPosition});a.$closeBtn.click(function(){a.destroy();
return!1})};f.prototype.createDiamonds=function(){function a(b,d){var c=b.attr("cls"),g=b.attr("alog-custom");d.attr({cls:c,"alog-custom":g})}var b=this,d={},c=this.diamondData,f=c.length;b.diamonds=[];if(b.state==o.start){for(var n=0;n<f;n++){var r=c[n].url.replace(/(.*)\/$/,"$1");d[r]=c[n]}"1"!=b.type||"hao123-index-tnwbdz"==b.pageid?(e("#box-famoussite .famoussite-mainlink").each(function(){var c=this.href.replace(/(.*)\/$/,"$1");if(d[c]){var f=d[c].diamondconf.split(" ")[0],n=new w(e(this),c,
b.diamondStore,f);e(this).parent().append(n.$tpl);a(n.$tpl.prev(".famoussite-mainlink"),n.$tpl);b.diamonds.push(n.$tpl);n.$tpl.click(function(){var a=parseInt(e(this).attr("data-state"),10),d=i.get("treasure-score")||0,a=a+1;b.diamondStore[c]=a;i.set("treasure-diamonds",g.stringify(b.diamondStore));n.render(a);2==a&&(6<++d&&(d=7,h.emit("weekend.diamond-clear"),b.state=o.end,i.set("treasure-state",b.state)),b.score=d,i.set("treasure-score",d),b.progressbar.forward(d),6<d&&!("1"!=b.login&&"1"==b.logicdata.isloginfirst)&&
("1"==b.login&&!q.get("treasure_logintip")&&q.set("treasure_logintip",3,{expires:1}),h.emit("weekend.progressbar-full")))})}}),e("#box-starbar .baritem-link").each(function(){var a=this.href.replace(/(.*)\/$/,"$1");if(d[a]){var c=d[a].diamondconf.split(" ")[0],f=new w(e(this),a,b.diamondStore,c);e(this).parent().append(f.$tpl);b.diamonds.push(f.$tpl);f.$tpl.click(function(){var d=parseInt(e(this).attr("data-state"),10),c=i.get("treasure-score")||0,d=d+1;b.diamondStore[a]=d;i.set("treasure-diamonds",
g.stringify(b.diamondStore));f.render(d);2==d&&(6<++c&&(c=7,h.emit("weekend.diamond-clear"),b.state=o.end,i.set("treasure-state",b.state)),b.score=c,i.set("treasure-score",c),b.progressbar.forward(c),6<c&&!("1"!=b.login&&"1"==b.logicdata.isloginfirst)&&("1"==b.login&&!q.get("treasure_logintip")&&q.set("treasure_logintip",3,{expires:1}),h.emit("weekend.progressbar-full")))})}})):e("#box-coolsite .famoussite-mainlink").each(function(){var c=this.href.replace(/(.*)\/$/,"$1");if(d[c]){var f=new w(e(this),
c,b.diamondStore);e(this).parent().append(f.$tpl);a(f.$tpl.prev(".famoussite-mainlink"),f.$tpl);b.diamonds.push(f.$tpl);f.$tpl.click(function(){var a=parseInt(e(this).attr("data-state"),10),d=i.get("treasure-score")||0,a=a+1;b.diamondStore[c]=a;i.set("treasure-diamonds",g.stringify(b.diamondStore));f.render(a);2==a&&(6<++d&&(d=7,h.emit("weekend.diamond-clear"),b.state=o.end,i.set("treasure-state",b.state)),b.score=d,i.set("treasure-score",d),b.progressbar.forward(d),6<d&&h.emit("weekend.progressbar-full"))})}})}};
f.prototype.start=function(){this.resetStore();this.createtime||i.set("treasure-createtime",Date.parse(new Date)/1E3);i.set("treasure-state",o.start);i.set("treasure-score",0);this.score=0;this.state=o.start;this.duozai.stopWorkingAnimation();this.$tip.hide();this.$container.addClass("treasure-gameing").css({bottom:this.containerBottomGameing,height:this.containerHeightGameing});this.duozai.$tpl.css("bottom",0);this.progressbar.playflyanimation();this.createDiamonds()};f.prototype.createProgressBar=
function(){var a=this;this.progressbar=new p(a);this.$container.append(this.progressbar.$tpl);q.get("treasure_logintip");h.on("weekend.progressbar-full",function(){a.goNext()});q.get("treasure_logintip")&&h.emit("weekend.progressbar-full");h.on("weekend.progressbar-bindbtnclick",function(){a.progressbar.$prizeBtn.click(function(){y.show(function(){!q.get("treasure_logintip")&&q.set("treasure_logintip",1,{expires:1});window.location.reload()});return!1})})};f.prototype.doLottery=function(){var a=this,
b={},c=d.get("lottery"),g=b.pid=c.pid,e=b.token=c.token;t.doPost(c.lotteryUrl,b,function(b){var d=b.errno,b=b.data,c={};c.pid=g;c.token=e;c.winfo={};0===d?0!=parseInt(b.prize_id)?(c.oid=b.oid,A.pop(a,b,c)):z.pop(a):z.pop(a)})};f.prototype.goNext=function(){e("body").scrollTop(0);var a=q.get("treasure_logintip");if("0"==this.login)v.pop(this,this.popdata[1]),this.restart();else if("1"==this.login){if(3==a||1==a)q.remove("treasure_logintip"),v.pop(this,this.popdata[1]),this.restart();2==a&&(q.remove("treasure_logintip"),
this.doLottery())}};f.prototype.bindEvent=function(){var a=this;a.duozai.$tpl.hover(function(){a.$tip.show()},function(){a.$tip.hide()});a.$container.hover(function(){7!=a.score&&(a.duozai.normalAnimationDone&&a.duozai.playWorkingAnimation(),a.state==o.init&&b({page:"index",level:1,type:"auto",k:"weekend-hover"}))},function(){7!=a.score&&a.duozai.normalAnimationDone&&a.duozai.stopWorkingAnimation()});h.on("weekend.progressbar-forward",function(){a.progressbar.forward()});h.on("weekend.progressbar-reset",
function(){a.progressbar.reset()});h.on("weekend.diamond-clear",function(){for(var b=a.diamonds.length,d=0;d<b;d++)a.diamonds[d].remove()});h.on("weekend.diamond-hide",function(){for(var b=a.diamonds.length,d=0;d<b;d++)a.diamonds[d].hide()});h.on("weekend.diamond-show",function(){for(var b=a.diamonds.length,d=0;d<b;d++)a.diamonds[d].show()});h.on("treasure.createDiamonds",function(){a.createDiamonds()});a.menuChange=function(b){0==b?(a.index=!0,a.$container&&a.$container.show()):(a.index=!1,window.menuChange=
!0,a.$container&&a.$container.hide())};a.viewChange=function(b){b=b||s.getViewport();a.index&&(1339>b.width?(a.$container&&a.$container.hide(),h.emit("weekend.diamond-hide")):(a.$container&&a.$container.show(),h.emit("weekend.diamond-show")))};h.on("menus.changed",a.menuChange);s.on("viewport.deferchange",a.viewChange)};f.prototype.unEvents=function(){h.un("weekend.progressbar-forward");h.un("weekend.progressbar-reset");h.un("weekend.diamond-clear");h.un("weekend.progressbar-hide");h.un("weekend.progressbar-show");
h.un("treasure.createDiamonds");h.un("weekend.progressbar-full");h.un("weekend.progressbar-bindbtnclick");this.menuChange&&h.un("menus.changed",this.menuChange);this.viewChange&&s.un("viewport.deferchange",this.viewChange);this.sendCurrent&&h.un("goTop.sendCurrent",this.sendCurrent)};f.prototype.createTip=function(){this.$tip=e(k('<div class="treasure-tip" style="display:none;position:absolute;background:url(#{bgurl}) #{bgposition} no-repeat;width:#{width}px;height:#{height}px;top:#{top}px;left:#{left}px;"></div>',
{bgurl:u.imagebtn.src,bgposition:this.gameTipPosition,width:this.gameTipConf[0],height:this.gameTipConf[1],top:this.gameTipConf[2],left:this.gameTipConf[3]}));this.$container.append(this.$tip)};f.prototype.restart=function(){this.destroy();this.initGameScene()};f.prototype.destroy=function(){this.$container.remove();h.emit("weekend.diamond-clear");this.resetStore();this.resetData();this.unEvents()};l.exports=new f;return j});
__d("widget.treasure.dolotteryTip","common.js.widget,widget.treasure.config,common.js.cookie,common.js.login,common.js.animation,widget.treasure.treasure_ajax,common.js.share".split(","),function(m,l,j,c){c("common.js.widget");var f=c("widget.treasure.config"),e=c("common.js.cookie"),k=c("common.js.login"),h=c("common.js.animation"),b=c("widget.treasure.treasure_ajax"),g=c("common.js.share");$.widget("hao123.dolotteryTip",$.lottery.popup,{options:{className:"dolotteryTip-box",isModel:!0},_create:function(){var a=
this.element;this._baseCreate();this.element.appendTo($("body"));this.$close=$('[data-hook="dolotteryTip-close"]',a);this.$dolottery=$('[data-hook="dolotteryTip"]',a);this._render();this._play();this._bindEvent();this._baseShow()},_init:function(){},_render:function(){var a=this.options,b=this.element,c=f.get("images"),g=a.popconf.boxlayout.split(" "),e=a.popconf.closebtnlayout.split(" "),p=a.popconf.btn1layout.split(" "),j=a.popconf.isanimate1,l=a.popconf.isanimate2,k=a.popconf.animatediv1.split(" "),
m=a.popconf.animatediv2.split(" "),x=a.popconf.animatemap1.split(","),s=a.popconf.animatemap2.split(","),v=parseInt(a.popconf.animaterepeat),y=a.game.logicdata.isshare;this.element.css({position:"fixed",width:g[0],height:g[1],"z-index":9999,"background-image":"url("+HAO.httpsTrans(c.pop.src)+")","background-repeat":"no-repeat","background-position":a.game.convertPX(a.popconf.boxbgposition)});this.$close.css({position:"absolute",display:"block",width:e[0]+"px",height:e[1]+"px",top:e[2]+"px",left:e[3]+
"px","z-index":998});this.$dolottery.css({position:"absolute",display:"block",width:p[0]+"px",height:p[1]+"px",top:p[2]+"px",left:p[3]+"px","z-index":998,"background-position":a.game.convertPX(""+p[4]+" "+p[5]),"background-image":"url("+HAO.httpsTrans(c.pop.src)+")","background-repeat":"no-repeat"});"1"==j&&(this.$animatediv1=$('<div class="animateDiv1"></div>'),this.element.append(this.$animatediv1),this.$animatediv1.css({position:"absolute",display:"block",width:k[0]+"px",height:k[1]+"px",top:k[2]+
"px",left:k[3]+"px","background-image":"url("+HAO.httpsTrans(c.animateimg.src)+")","background-repeat":"no-repeat","background-position":"1000px 1000px"}),this.animation1=h().changePosition(this.$animatediv1[0],x).repeat(v));"1"==l&&(this.$animatediv2=$('<div class="animateDiv2"></div>'),this.element.append(this.$animatediv2),this.$animatediv2.css({position:"absolute",display:"block",width:m[0]+"px",height:m[1]+"px",top:m[2]+"px",left:m[3]+"px","background-image":"url("+HAO.httpsTrans(c.animateimg.src)+
")","background-repeat":"no-repeat","background-position":"1000px 1000px"}),this.animation2=h().changePosition(this.$animatediv2[0],s).repeat(v));"1"==y&&(this.element.append($('<a href="#" data-hook="share-box" alog-text="\u5206\u4eab"></a><div data-hook="share-container"><a href="#" data-hook="share-qqzone" title="\u5206\u4eab\u5230qq\u7a7a\u95f4" data-type="qzone"></a><a href="#" data-hook="share-weibo" title="\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a" data-type="sina"></a><a href="#" data-hook="share-qq" title="\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a" data-type="qq"></a></div>')),
this.$share=$('[data-hook="share-box"]',b),this.$shareContainer=$('[data-hook="share-container"]',b),this.$qzone=$('[data-hook="share-qqzone"]',b),this.$weibo=$('[data-hook="share-weibo"]',b),this.$qq=$('[data-hook="share-qq"]',b),b=a.popconf.btn2layout.split(" "),g=a.popconf.sharecontainer.split(" "),e=a.popconf.shareqqzone.split(" "),p=a.popconf.shareqq.split(" "),j=a.popconf.shareweibo.split(" "),this.$share.css({position:"absolute",display:"block",width:b[0]+"px",height:b[1]+"px",top:b[2]+"px",
left:b[3]+"px","background-position":a.game.convertPX(""+b[4]+" "+b[5]),"background-image":"url("+HAO.httpsTrans(c.pop.src)+")","background-repeat":"no-repeat"}),this.$qzone.css({position:"absolute",display:"block",width:e[0]+"px",height:e[1]+"px",top:e[2]+"px",left:e[3]+"px"}),this.$qq.css({position:"absolute",display:"block",width:p[0]+"px",height:p[1]+"px",top:p[2]+"px",left:p[3]+"px"}),this.$weibo.css({position:"absolute",display:"block",width:j[0]+"px",height:j[1]+"px",top:j[2]+"px",left:j[3]+
"px"}),this.$shareContainer.css({position:"absolute",display:"none",width:g[0]+"px",height:g[1]+"px",top:g[2]+"px",left:g[3]+"px","background-position":a.game.convertPX(""+g[4]+" "+g[5]),"background-image":"url("+HAO.httpsTrans(c.pop.src)+")","background-repeat":"no-repeat"}));""!=a.game.logicdata.interfacefirst&&this._renderInterface()},_renderInterface:function(){var a=this.element,d=this.options,c=d.game.logicdata,g=d.popconf.input1layout.split(" "),e=HAO.httpsTrans(c.interfacefirst),f=c.interfacedata,
h=parseFloat(d.game.goodtotal)+0.7,h=h.toFixed(1);b.doPost(e,{},function(b){var d=b.err_code,b=b.data||b.data[f],d=200==d||201==d?0!=b?b:h:h;a.append($('<div data-hook="interface-info"></div>'));$('[data-hook="interface-info"]',a).css({position:"absolute",width:g[0]+"px",height:g[1]+"px",top:g[2]+"px",left:g[3]+"px","font-size":g[4]+"px","line-height":g[4]+"px",color:g[5],"text-align":"center"}).text(d)})},_share:function(a){var b=this.options.popconf,c=b.shareurl.split(","),e=b.sharetitle,f,h=HAO.httpsTrans(b.sharepic),
b=b.sharetext;switch(a){case "qzone":f=c[0];break;case "sina":f=c[1];break;case "qq":f=c[2]}g(a,b+" "+f,h,e,f)},_play:function(){var a=this.options.popconf;this.animation1&&this.animation1.start(a.animateintervel1);this.animation2&&this.animation2.start(a.animateintervel2)},_stop:function(){this.animation1&&this.animation1.dispose();this.animation2&&this.animation2.dispose()},_bindEvent:function(){var a=this,b=a.options;a.$close.click(function(){a._stop();a._baseHide();a.remove();return!1});a.$dolottery.click(function(){if("1"==
b.game.logicdata.isloginseconde&&"1"!=b.game.login)return a._baseHide(),a.remove(),k.show(function(){!e.get("treasure_logintip")&&e.set("treasure_logintip",2,{expires:1});window.location.reload()}),!1;a._stop();a._baseHide();a.remove();a.options.game.doLottery();return!1});a.$share&&a.$share.click(function(){return!1}).mouseover(function(){a.$dolottery.hide();a.$share.hide();a.$shareContainer.show()});a.$shareContainer&&a.$shareContainer.mouseleave(function(){a.$dolottery.show();a.$share.show();a.$shareContainer.hide()});
a.$shareContainer&&a.$shareContainer.children("a").click(function(){var b=$(this).data("type");a._share(b);a.$dolottery.show();a.$share.show();a.$shareContainer.hide();return!1})}});l.exports={pop:function(a,b){$('<div id="treasure-dolotteryTip" class="treasure-dolotteryTip" monkey="treasure-dolotteryTip"><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="dolotteryTip-close" data-hook="dolotteryTip-close"></a><a href="#" data-hook="dolotteryTip" alog-text="\u70b9\u51fb\u62bd\u5956"></a></div>').dolotteryTip({popconf:b,
game:a})}};return j});
__d("widget.treasure.sharePop","common.js.widget,widget.treasure.config,common.js.cookie,widget.treasure.dolotteryTip,widget.treasure.treasure_ajax,common.js.share".split(","),function(m,l,j,c){c("common.js.widget");var f=c("widget.treasure.config"),e=c("common.js.cookie"),k=c("widget.treasure.dolotteryTip"),h=c("widget.treasure.treasure_ajax"),b=c("common.js.share");$.widget("hao123.sharePop",$.lottery.popup,{options:{className:"sharePop-box",isModel:!0},_create:function(){var b=this.element;this._baseCreate();
this.element.appendTo($("body"));this.$close=$('[data-hook="sharePop-close"]',b);this.$share=$('[data-hook="share-box"]',b);this.$shareContainer=$('[data-hook="share-container"]',b);this.$qzone=$('[data-hook="share-qqzone"]',b);this.$weibo=$('[data-hook="share-weibo"]',b);this.$qq=$('[data-hook="share-qq"]',b);this._render();this._bindEvent();this._baseShow()},_init:function(){},_render:function(){var b=this.options,a=f.get("images"),c=b.popconf.boxlayout.split(" "),h=b.popconf.closebtnlayout.split(" "),
i=b.popconf.btn1layout.split(" "),j=parseInt(b.popconf.treasure_poptip),k=b.popconf.sharecontainer.split(" "),l=b.popconf.shareqqzone.split(" "),m=b.popconf.shareqq.split(" "),t=b.popconf.shareweibo.split(" ");this.element.css({position:"fixed",width:c[0],height:c[1],"z-index":9999,"background-image":"url("+HAO.httpsTrans(a.pop.src)+")","background-repeat":"no-repeat","background-position":b.game.convertPX(b.popconf.boxbgposition)});this.$close.css({position:"absolute",display:"block",width:h[0]+
"px",height:h[1]+"px",top:h[2]+"px",left:h[3]+"px"});this.$share.css({position:"absolute",display:"block",width:i[0]+"px",height:i[1]+"px",top:i[2]+"px",left:i[3]+"px","background-position":b.game.convertPX(""+i[4]+" "+i[5]),"background-image":"url("+HAO.httpsTrans(a.pop.src)+")","background-repeat":"no-repeat"});e.setMidnight("treasure_poptip",1,{expires:j});this.$qzone.css({position:"absolute",display:"block",width:l[0]+"px",height:l[1]+"px",top:l[2]+"px",left:l[3]+"px"});this.$qq.css({position:"absolute",
display:"block",width:m[0]+"px",height:m[1]+"px",top:m[2]+"px",left:m[3]+"px"});this.$weibo.css({position:"absolute",display:"block",width:t[0]+"px",height:t[1]+"px",top:t[2]+"px",left:t[3]+"px"});this.$shareContainer.css({position:"absolute",display:"none",width:k[0]+"px",height:k[1]+"px",top:k[2]+"px",left:k[3]+"px","background-position":b.game.convertPX(""+k[4]+" "+k[5]),"background-image":"url("+HAO.httpsTrans(a.pop.src)+")","background-repeat":"no-repeat"});this._renderInterface()},_renderInterface:function(){var b=
this.element,a=this.options,c=a.game.logicdata,e=a.popconf.input1layout.split(" "),c=HAO.httpsTrans(c.interfacefirst),f=parseFloat(a.game.goodtotal)+0.7,f=f.toFixed(1);h.doPost(c,{},function(a){var c=a.err_code,a=a.data,c=200==c||201==c?0!=a?a:f:f;b.append($('<div data-hook="interface-info"></div>'));$('[data-hook="interface-info"]',b).css({position:"absolute",width:e[0]+"px",height:e[1]+"px",top:e[2]+"px",left:e[3]+"px","font-size":e[4]+"px","line-height":e[4]+"px",color:e[5],"text-align":"center"}).text(c)})},
_share:function(c){var a=this.options.popconf,d=a.shareurl.split(","),e=a.sharetitle,f,h=HAO.httpsTrans(a.sharepic),a=a.sharetext;switch(c){case "qzone":f=d[0];break;case "sina":f=d[1];break;case "qq":f=d[2]}b(c,a+" "+f,h,e,f)},_bindEvent:function(){var b=this,a=b.options;b.$close.click(function(){b._baseHide();b.remove();return!1});b.$share.click(function(){return!1}).mouseover(function(){b.$share.hide();b.$shareContainer.show()});b.$shareContainer.mouseleave(function(){b.$share.show();b.$shareContainer.hide()});
b.$shareContainer.children("a").click(function(){var c=$(this).data("type");b._share(c);b._baseHide();b.remove();k.pop(a.game,a.game.popdata[1]);return!1})}});l.exports={pop:function(b,a){$('<div id="treasure-sharePop" class="treasure-sharePop" monkey="treasure-sharePop"><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="sharePop-close" data-hook="sharePop-close"></a><a href="#" data-hook="share-box" alog-text="\u5206\u4eab\u62bd\u5956"></a><div data-hook="share-container"><a href="#" data-hook="share-qqzone" title="\u5206\u4eab\u5230qq\u7a7a\u95f4" data-type="qzone"></a><a href="#" data-hook="share-weibo" title="\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a" data-type="sina"></a><a href="#" data-hook="share-qq" title="\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a" data-type="qq"></a></div><a href="#" data-hook="dolotteryTip" alog-text="\u70b9\u51fb\u62bd\u5956"></a></div>').sharePop({popconf:a,
game:b})}};return j});window.js_SzZqFDCzZi&&window.js_SzZqFDCzZi(!0);
