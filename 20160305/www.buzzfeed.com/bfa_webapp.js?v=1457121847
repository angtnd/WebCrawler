!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){!function(){"use strict";function t(){var t=null,e=window.BF_User;if(e&&e instanceof Function){t={};var n=new e;if(t.isLoggedIn=n.isLoggedIn(),t.referrer=document.referrer,t.userAgent=navigator.userAgent,t.isLoggedIn){var i=n.getUserInfo();t.email=i.email,t.id=i.userid,t.name=i.username,t.isEditor="true"===i.p_editor_admin,t.isAdmin="true"===i.p_admin,t.isAdvertiser="true"===i.f_ad}M.log.info("User info aggregated")}return null}var e=n(2),i=n(3),r=n(4),o=n(5),a=n(158),s=n(161),u=n(162),c=n(163),d=n(164),l=n(166),p=n(167),f=n(180),h=n(181),g=n(182),v=n(183),m=n(184),b=n(185),y=n(186),_=n(187),w=n(188),k=n(189),x=n(190),T=n(191),S=n(192),M=new S.Core,F=M.utils.get(window,"BF_STATIC",null);if(M.utils.isObject(F)){var I={mode:"dev"===F.bf_env?M.defs.bfaMode.develop:M.defs.bfaMode.prod,webRoot:F.web_root,staticRoot:F.static_root,env:F.bf_env,platform:M.utils.startsWith(F.tt_page,"Mobile")?M.defs.platform.mobileweb:M.defs.platform.desktop,debug:document.location.search.indexOf("bfadebug=true")>-1,pixiedust:{samplingRate:F.pixiedust_sampling_rate,poundSamplingRate:F.pixiedust_pound_sampling_rate}},C=t(),P={uri:{cleanedPath:document.location.pathname}};document.location.pathname&&F.web_root&&M.utils.startsWith(document.location.pathname,F.web_root)&&(P.uri.cleanedPath=document.location.pathname.substr(F.web_root.length)),P.country=F.country,P.metavertical="",P.language=F.language,P.type=F.page_type,P.templateType=F.tt_page,P.platform=I.platform,P.version=F.version;var E=M.utils.get(window,"buzzDetails",null);M.utils.isObject(E)&&(P.post={},P.post.form=E.form,P.post.id=F.campaignid,P.post.name=F.buzz_name,P.post.published=E.published,P.post.publishedAgo=E.published_ago,P.post.postFormat=E.postFormat,P.post.listFormat=E.listFormat,P.post.author=F.username,P.post.badges=E.postBadges,P.post.tags=E.postTags,P.post.metavertical="tbd",P.post.category=E.category_name,P.post.ad=0!==E.ad,P.post.user=0!==E.user,P.post.editor=0!==E.editor,P.post.trigger=0!==E.trigger,P.post.partner=0!==E.f_partner,P.post.raw=0!==E.raw,P.post.isPromoted=1===parseInt(F.f_ad),P.post.nsfw=0!==E.nsfw,P.post.subBuzzAmount=""!==E.subBuzzCount?parseInt(E.subBuzzCount):0,P.post.mainSubBuzzAmount=E.mainSubBuzzCount?parseInt(E.mainSubBuzzCount):0,P.post.wordsCount=E.wordsCount?parseInt(E.wordsCount):null),M.log.info("Page info aggregated");var O=I.platform===M.defs.platform.desktop?"mousedown":"click",R={bfaFunctionName:"bfa",domBinder:{delegatedMapping:{click:[{event:O,selector:".page-nav__action--fb-share",options:{}},{event:O,selector:"div.reactions-carousel__arrows",options:{}},{event:O,selector:"i.gif-nav",options:{}},{event:O,selector:".page-search__search-button",options:{}},{event:O,selector:"a",options:{handlers:["ATagWithExternalLinkHandler","ATagWithInternalLinkHandler","ATagDefaultHandler"]}},{event:O,selector:"button",options:{}},{event:O,selector:"input[type='submit']",options:{}},{event:O,selector:"select",options:{}},{event:O,selector:".country-toggle",options:{}},{event:"change",selector:"select",options:{handlers:["SelectTagChangedClickHandler"]}}]},directMapping:{click:[{event:O,selector:"#contribute-post",options:{}},{event:O,selector:".commentbox.contribution-form .submit",options:{}},{event:O,selector:"button.js-submit-signup-form",options:{}}]}},inViewImpressionBinder:{enabled:!0,locator:".col1 .lede__title .lede__link"},socialBinder:{facebookMapping:["like","unlike","comment"]}};P.post&&(R.scrollBinder={elementMode:{enabled:P.post.mainSubBuzzAmount>0&&"long"!==P.post.listFormat&&"no_list"!==P.post.listFormat,element:".buzz_superlist_item",expected:P.post.mainSubBuzzAmount},pixelMode:{enabled:!0},checkpoints:[25,50,75,100],bottomBounds:['[data-bfa="@l:Bottom-Share;"]',"#related_feed"]}),M.plugin(i,I).plugin(l).plugin(o).plugin(d).plugin(e).plugin(r).plugin(a).plugin(s).plugin(u).plugin(h).plugin(c).plugin(f).plugin(p,R).plugin(g,{enabled:F.pound_enabled}).plugin(v,{extFilePath:F.static_root+"/js/public/pixiedust-build.js"}),M.registerModule(m,{extFilesPaths:[F.static_root+"/compiled/scode_webapp.js"],configMapsDelegate:_}).registerModule(b,{configMapsDelegate:k}).registerModule(x,{extFilesPaths:[F.static_root+"/compiled/custom_audience_pixel.js"],configMapsDelegate:T,facebookId:"260954170738952"}).registerModule(y,{configMapsDelegate:w}),M.activatePlugins(),C?M.push("general/user/update",{}):M.domi.onDomReady(function(){C=t(),M.push("general/user/update",{})}),M.domi.onDomReady(function(){M.push("plugin/binder/activate",{})},this),M.push("general/page/update",P),M.activate()}}()},function(t,e){!function(){"use strict";function e(t){this._core=t,this._isDomReady=!1,this._domReady=new t.utils.Signal,this._domReady.addOnce(function(){this._isDomReady=!0},this,Number.MAX_VALUE);var e=this;return this._installDomi=function(n){n.domi={onDomReady:function(t,n){e._isDomReady?t.call(n):e._domReady.addOnce(t,n)},loadScript:function(e,n,i,r){function o(){this.onerror=null,this.onload=null,n.apply(r)}function a(){this.onerror=null,this.onload=null,i.apply(r)}var s=document.createElement("script");s.type=e.type||"text/javascript",s.charset=e.charset||"utf8",s.src=e.src,e.async!==!1&&(s.async=!0),t.utils.isUndefined(e.attrs)||t.utils.forOwn(e.attrs,function(t,e){s.setAttribute(e,t)}),t.utils.isFunction(n)&&(s.onload=o),t.utils.isFunction(i)&&(s.onerror=a);var u=document.body||document.getElementsByTagName("body")[0];u&&u.appendChild(s)}}},this._installDomi(t),function(){if("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState)return t.log.info("onReady method: document.readyState is '"+document.readyState+"' and callback will be fired immediately"),void e._domReady.dispatch();if(document.addEventListener)t.log.info("onReady method: callback will be added to EventListener"),document.addEventListener("DOMContentLoaded",e._domReady.dispatch,!1);else if(document.attachEvent)document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e._domReady.dispatch()});else{t.log.info("onReady method: callback will be added to window onload");var n=window.onload;window.onload=function(){n&&n(),e._domReady.dispatch()}}}(),{modifySBInstance:function(t){e._installDomi(t)}}}e.defaultId="domi",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){var n={mode:t.defs.bfaMode.prod,debug:!1};this._core=t;var i=this._core.utils.defaultsDeep(e||{},n),r=new t.utils.Signal;return this.setSettings=function(e){t._generalSettings=t.utils.cloneDeep(e||{}),t._onGeneralSettingsChange.dispatch(t.utils.cloneDeep(t._generalSettings))},this.updateSettings=function(e){t._generalSettings=t.utils.merge(t._generalSettings||{},e||{}),t._onGeneralSettingsChange.dispatch(t.utils.cloneDeep(t._generalSettings))},t._onGeneralSettingsChange=r,this.setSettings(i),this._core._router.sub("general/settings/set",this.setSettings,this),this._core._router.sub("general/settings/update",this.updateSettings,this),{modifySBInstance:function(e){e.getGeneralSettings=function(){return t.utils.cloneDeep(t._generalSettings)},e.onGeneralSettingsChange=function(e,n){t._onGeneralSettingsChange.add(e,n)}}}}e.defaultId="generalSettings",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){var n={varName:"bfa",eventsArrayName:"c"};if(this.settings=t.utils.defaultsDeep(e||{},n),this.unhandledEventsArray=null,t.utils.has(window,this.settings.varName)){var i=t.utils.get(window,this.settings.varName);if(t.utils.has(i,this.settings.eventsArrayName)&&t.utils.isArray(i[this.settings.eventsArrayName])&&(this.unhandledEventsArray=i[this.settings.eventsArrayName],this.unhandledEventsArray.length>0)){var r=t.utils.remove(this.unhandledEventsArray,function(e){return e[0]&&!t.utils.startsWith(e[0],"track")&&!t.utils.startsWith(e[0],"module")});t.utils.forEach(r,function(e){t.push.apply(t,e)},this)}}return t.inited.addOnce(function(){window[this.settings.varName]=function(){t.push.apply(t,arguments)},this.unhandledEventsArray&&this.unhandledEventsArray.length>0&&t.utils.forEach(this.unhandledEventsArray,function(e){t.push.apply(t,e)},this)},this),{}}e.defaultId="globalBfaEndpoint",t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t){function e(e){e.mode===t.defs.bfaMode.develop||e.debug===!0?t.log.enabled()!==!0&&t.log.enabled(!0):t.log.enabled()===!0&&t.log.enabled(!1)}return t.log=i("BFACore"),t._router.log=t.log,t.createLogger=function(e){return t.utils.isString(e)&&""!==e||t.log.error("core.createLogger: `loggerName` argument must be a not empty string"),i(e)},t.log.enabled=function(t){return i.enabled(t)},e(t._generalSettings),t._onGeneralSettingsChange.add(e,this),{modifySBInstance:function(t){t.log=i(t.instanceId)}}}var i=n(6);e.defaultId="logger",e.require=["generalSettings"],t.exports=e}()},function(t,e,n){!function(){"use strict";function e(){var t=new Date,e=t.getMinutes(),n=t.getSeconds(),i=t.getMilliseconds();return 10>e&&(e="0"+e),10>n&&(n="0"+n),e+":"+n+"."+i}function i(t){return t instanceof Error?t.stack||t.message:t.toString()}function r(t){return{log:function(n,o){if("undefined"!=typeof o&&r._enabled===!0){o=i(o);var a="BF_Analytics: [ "+t+", "+n+", Time: "+e()+", '"+o+"' ]";window&&window.console&&console.log&&Function.prototype.apply.call(console.log,console,[a])}},info:function(t){this.log("INFO",t)},error:function(t){this.log("ERROR",t)},warn:function(t){this.log("WARN",t)}}}var o=n(7);r._enabled=!1,r.enabled=function(t){return o.isBoolean(t)&&(r._enabled=t),r._enabled},t.exports=r}()},function(t,e,n){!function(){"use strict";t.exports.isEmpty=n(8),t.exports.isString=n(15),t.exports.isArray=n(19),t.exports.isBoolean=n(29),t.exports.isObject=n(14),t.exports.isPlainObject=n(30),t.exports.isUndefined=n(34),t.exports.isFunction=n(22),t.exports.cloneDeep=n(35),t.exports.clone=n(47),t.exports.has=n(49),t.exports.get=n(56),t.exports.set=n(57),t.exports.forOwn=n(58),t.exports.keys=n(24),t.exports.defaults=n(60),t.exports.defaultsDeep=n(67),t.exports.merge=n(68),t.exports.values=n(74),t.exports.after=n(76),t.exports.defer=n(77),t.exports.bind=n(79),t.exports.delay=n(105),t.exports.every=n(106),t.exports.forEach=n(126),t.exports.map=n(128),t.exports.pluck=n(131),t.exports.slice=n(132),t.exports.indexOf=n(133),t.exports.remove=n(138),t.exports.flatten=n(140),t.exports.uniq=n(143),t.exports.startsWith=n(150),t.exports.trim=n(151),t.exports.readCookie=function(t){var e=[],n=document.cookie.split(";");t=RegExp("^\\s*"+t+"=\\s*(.*?)\\s*$");for(var i=0;i<n.length;i++){var r=n[i].match(t);r&&e.push(r[1])}return e[0]},t.exports.checkType=function(e,n,i,r){return typeof n!==e?""+i+" has to be a "+e:r===!0&&t.exports.isEmpty(n)?""+i+" has to be not empty":void 0},t.exports.Signal=n(157)}()},function(t,e,n){function i(t){return null==t?!0:a(t)&&(o(t)||c(t)||r(t)||u(t)&&s(t.splice))?!t.length:!d(t).length}var r=n(9),o=n(19),a=n(10),s=n(22),u=n(16),c=n(15),d=n(24);t.exports=i},function(t,e,n){function i(t){return o(t)&&r(t)&&s.call(t,"callee")&&!u.call(t,"callee")}var r=n(10),o=n(16),a=Object.prototype,s=a.hasOwnProperty,u=a.propertyIsEnumerable;t.exports=i},function(t,e,n){function i(t){return null!=t&&o(r(t))}var r=n(11),o=n(18);t.exports=i},function(t,e,n){var i=n(12),r=i("length");t.exports=r},function(t,e,n){function i(t){return function(e){return null==e?void 0:r(e)[t]}}var r=n(13);t.exports=i},function(t,e,n){function i(t){if(a.unindexedChars&&o(t)){for(var e=-1,n=t.length,i=Object(t);++e<n;)i[e]=t.charAt(e);return i}return r(t)?t:Object(t)}var r=n(14),o=n(15),a=n(17);t.exports=i},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){function i(t){return"string"==typeof t||r(t)&&s.call(t)==o}var r=n(16),o="[object String]",a=Object.prototype,s=a.toString;t.exports=i},function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e){var n=Array.prototype,i=Error.prototype,r=Object.prototype,o=r.propertyIsEnumerable,a=n.splice,s={};!function(t){var e=function(){this.x=t},n={0:t,length:t},r=[];e.prototype={valueOf:t,y:t};for(var u in new e)r.push(u);s.enumErrorProps=o.call(i,"message")||o.call(i,"name"),s.enumPrototypes=o.call(e,"prototype"),s.nonEnumShadows=!/valueOf/.test(r),s.ownLast="x"!=r[0],s.spliceObjects=(a.call(n,0,1),!n[0]),s.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),t.exports=s},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&i>=t}var i=9007199254740991;t.exports=n},function(t,e,n){var i=n(20),r=n(18),o=n(16),a="[object Array]",s=Object.prototype,u=s.toString,c=i(Array,"isArray"),d=c||function(t){return o(t)&&r(t.length)&&u.call(t)==a};t.exports=d},function(t,e,n){function i(t,e){var n=null==t?void 0:t[e];return r(n)?n:void 0}var r=n(21);t.exports=i},function(t,e,n){function i(t){return null==t?!1:r(t)?l.test(c.call(t)):a(t)&&(o(t)?l:s).test(t)}var r=n(22),o=n(23),a=n(16),s=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,l=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},function(t,e,n){function i(t){return r(t)&&s.call(t)==o}var r=n(14),o="[object Function]",a=Object.prototype,s=a.toString;t.exports=i},function(t,e){var n=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}();t.exports=n},function(t,e,n){var i=n(20),r=n(10),o=n(14),a=n(25),s=n(17),u=i(Object,"keys"),c=u?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||("function"==typeof t?s.enumPrototypes:r(t))?a(t):o(t)?u(t):[]}:a;t.exports=c},function(t,e,n){function i(t){for(var e=c(t),n=e.length,i=n&&t.length,d=!!i&&s(i)&&(o(t)||r(t)||u(t)),p=-1,f=[];++p<n;){var h=e[p];(d&&a(h,i)||l.call(t,h))&&f.push(h)}return f}var r=n(9),o=n(19),a=n(26),s=n(18),u=n(15),c=n(27),d=Object.prototype,l=d.hasOwnProperty;t.exports=i},function(t,e){function n(t,e){return t="number"==typeof t||i.test(t)?+t:-1,e=null==e?r:e,t>-1&&t%1==0&&e>t}var i=/^\d+$/,r=9007199254740991;t.exports=n},function(t,e,n){function i(t){if(null==t)return[];d(t)||(t=Object(t));var e=t.length;e=e&&c(e)&&(a(t)||o(t)||l(t))&&e||0;for(var n=t.constructor,i=-1,r=s(n)&&n.prototype||T,f=r===t,h=Array(e),g=e>0,m=p.enumErrorProps&&(t===x||t instanceof Error),b=p.enumPrototypes&&s(t);++i<e;)h[i]=i+"";for(var _ in t)b&&"prototype"==_||m&&("message"==_||"name"==_)||g&&u(_,e)||"constructor"==_&&(f||!M.call(t,_))||h.push(_);if(p.nonEnumShadows&&t!==T){var C=t===S?w:t===x?v:F.call(t),P=I[C]||I[y];for(C==y&&(r=T),e=k.length;e--;){_=k[e];var E=P[_];f&&E||(E?!M.call(t,_):t[_]===r[_])||h.push(_)}}return h}var r=n(28),o=n(9),a=n(19),s=n(22),u=n(26),c=n(18),d=n(14),l=n(15),p=n(17),f="[object Array]",h="[object Boolean]",g="[object Date]",v="[object Error]",m="[object Function]",b="[object Number]",y="[object Object]",_="[object RegExp]",w="[object String]",k=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],x=Error.prototype,T=Object.prototype,S=String.prototype,M=T.hasOwnProperty,F=T.toString,I={};I[f]=I[g]=I[b]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},I[h]=I[w]={constructor:!0,toString:!0,valueOf:!0},I[v]=I[m]=I[_]={constructor:!0,toString:!0},I[y]={constructor:!0},r(k,function(t){for(var e in I)if(M.call(I,e)){var n=I[e];n[t]=M.call(n,t)}}),t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}t.exports=n},function(t,e,n){function i(t){return t===!0||t===!1||r(t)&&s.call(t)==o}var r=n(16),o="[object Boolean]",a=Object.prototype,s=a.toString;t.exports=i},function(t,e,n){function i(t){var e;if(!s(t)||p.call(t)!=c||a(t)||o(t)||!l.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return u.ownLast?(r(t,function(t,e,i){return n=l.call(i,e),!1}),n!==!1):(r(t,function(t,e){n=e}),void 0===n||l.call(t,n))}var r=n(31),o=n(9),a=n(23),s=n(16),u=n(17),c="[object Object]",d=Object.prototype,l=d.hasOwnProperty,p=d.toString;t.exports=i},function(t,e,n){function i(t,e){return r(t,e,o)}var r=n(32),o=n(27);t.exports=i},function(t,e,n){var i=n(33),r=i();t.exports=r},function(t,e,n){function i(t){return function(e,n,i){for(var o=r(e),a=i(e),s=a.length,u=t?s:-1;t?u--:++u<s;){var c=a[u];if(n(o[c],c,o)===!1)break}return e}}var r=n(13);t.exports=i},function(t,e){function n(t){return void 0===t}t.exports=n},function(t,e,n){function i(t,e,n){return"function"==typeof e?r(t,!0,o(e,n,3)):r(t,!0)}var r=n(36),o=n(45);t.exports=i},function(t,e,n){function i(t,e,n,g,v,m,b){var _;if(n&&(_=v?n(t,g,v):n(t)),void 0!==_)return _;if(!f(t))return t;var w=l(t);if(w){if(_=u(t),!e)return r(t,_)}else{var x=V.call(t),T=x==y;if(x!=k&&x!=h&&(!T||v))return N[x]?c(t,x,e):v?t:{};if(p(t))return v?t:{};if(_=d(T?{}:t),!e)return a(_,t)}m||(m=[]),b||(b=[]);for(var S=m.length;S--;)if(m[S]==t)return b[S];return m.push(t),b.push(_),(w?o:s)(t,function(r,o){_[o]=i(r,e,n,o,t,m,b)}),_}var r=n(37),o=n(28),a=n(38),s=n(40),u=n(41),c=n(42),d=n(44),l=n(19),p=n(23),f=n(14),h="[object Arguments]",g="[object Array]",v="[object Boolean]",m="[object Date]",b="[object Error]",y="[object Function]",_="[object Map]",w="[object Number]",k="[object Object]",x="[object RegExp]",T="[object Set]",S="[object String]",M="[object WeakMap]",F="[object ArrayBuffer]",I="[object Float32Array]",C="[object Float64Array]",P="[object Int8Array]",E="[object Int16Array]",O="[object Int32Array]",R="[object Uint8Array]",A="[object Uint8ClampedArray]",j="[object Uint16Array]",B="[object Uint32Array]",N={};N[h]=N[g]=N[F]=N[v]=N[m]=N[I]=N[C]=N[P]=N[E]=N[O]=N[w]=N[k]=N[x]=N[S]=N[R]=N[A]=N[j]=N[B]=!0,N[b]=N[y]=N[_]=N[T]=N[M]=!1;var D=Object.prototype,V=D.toString;t.exports=i},function(t,e){function n(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}t.exports=n},function(t,e,n){function i(t,e){return null==e?t:r(e,o(e),t)}var r=n(39),o=n(24);t.exports=i},function(t,e){function n(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var o=e[i];n[o]=t[o]}return n}t.exports=n},function(t,e,n){function i(t,e){return r(t,e,o)}var r=n(32),o=n(24);t.exports=i},function(t,e){function n(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&r.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var i=Object.prototype,r=i.hasOwnProperty;t.exports=n},function(t,e,n){(function(e){function i(t,e,n){var i=t.constructor;switch(e){case d:return r(t);case o:case a:return new i(+t);case l:case p:case f:case h:case g:case v:case m:case b:case y:i instanceof i&&(i=k[e]);var w=t.buffer;return new i(n?r(w):w,t.byteOffset,t.length);case s:case c:return new i(t);case u:var x=new i(t.source,_.exec(t));x.lastIndex=t.lastIndex}return x}var r=n(43),o="[object Boolean]",a="[object Date]",s="[object Number]",u="[object RegExp]",c="[object String]",d="[object ArrayBuffer]",l="[object Float32Array]",p="[object Float64Array]",f="[object Int8Array]",h="[object Int16Array]",g="[object Int32Array]",v="[object Uint8Array]",m="[object Uint8ClampedArray]",b="[object Uint16Array]",y="[object Uint32Array]",_=/\w*$/,w=e.Uint8Array,k={};k[l]=e.Float32Array,k[p]=e.Float64Array,k[f]=e.Int8Array,k[h]=e.Int16Array,k[g]=e.Int32Array,k[v]=w,k[m]=e.Uint8ClampedArray,k[b]=e.Uint16Array,k[y]=e.Uint32Array,t.exports=i}).call(e,function(){return this}())},function(t,e){(function(e){function n(t){var e=new i(t.byteLength),n=new r(e);return n.set(new r(t)),e}var i=e.ArrayBuffer,r=e.Uint8Array;t.exports=n}).call(e,function(){return this}())},function(t,e){function n(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}t.exports=n},function(t,e,n){function i(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)};case 5:return function(n,i,r,o,a){return t.call(e,n,i,r,o,a)}}return function(){return t.apply(e,arguments)}}var r=n(46);t.exports=i},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){function i(t,e,n,i){return e&&"boolean"!=typeof e&&a(t,e,n)?e=!1:"function"==typeof e&&(i=n,n=e,e=!1),"function"==typeof n?r(t,e,o(n,i,3)):r(t,e)}var r=n(36),o=n(45),a=n(48);t.exports=i},function(t,e,n){function i(t,e,n){if(!a(n))return!1;var i=typeof e;if("number"==i?r(n)&&o(e,n.length):"string"==i&&e in n){var s=n[e];return t===t?t===s:s!==s}return!1}var r=n(10),o=n(26),a=n(14);t.exports=i},function(t,e,n){function i(t,e){if(null==t)return!1;var n=g.call(t,e);if(!n&&!c(e)){if(e=f(e),t=1==e.length?t:r(t,o(e,0,-1)),null==t)return!1;e=p(e),n=g.call(t,e)}return n||d(t.length)&&u(e,t.length)&&(s(t)||a(t)||l(t))}var r=n(50),o=n(51),a=n(9),s=n(19),u=n(26),c=n(52),d=n(18),l=n(15),p=n(53),f=n(54),h=Object.prototype,g=h.hasOwnProperty;t.exports=i},function(t,e,n){function i(t,e,n){if(null!=t){t=r(t),void 0!==n&&n in t&&(e=[n]);for(var i=0,o=e.length;null!=t&&o>i;)t=r(t)[e[i++]];return i&&i==o?t:void 0}}var r=n(13);t.exports=i},function(t,e){function n(t,e,n){var i=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o}t.exports=n},function(t,e,n){function i(t,e){var n=typeof t;if("string"==n&&s.test(t)||"number"==n)return!0;if(r(t))return!1;var i=!a.test(t);return i||null!=e&&t in o(e)}var r=n(19),o=n(13),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=i},function(t,e){function n(t){var e=t?t.length:0;return e?t[e-1]:void 0}t.exports=n},function(t,e,n){function i(t){if(o(t))return t;var e=[];return r(t).replace(a,function(t,n,i,r){e.push(i?r.replace(s,"$1"):n||t)}),e}var r=n(55),o=n(19),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;t.exports=i},function(t,e){function n(t){return null==t?"":t+""}t.exports=n},function(t,e,n){function i(t,e,n){var i=null==t?void 0:r(t,o(e),e+"");return void 0===i?n:i}var r=n(50),o=n(54);t.exports=i},function(t,e,n){function i(t,e,n){if(null==t)return t;var i=e+"";e=null!=t[i]||o(e,t)?[i]:s(e);for(var u=-1,c=e.length,d=c-1,l=t;null!=l&&++u<c;){var p=e[u];a(l)&&(u==d?l[p]=n:null==l[p]&&(l[p]=r(e[u+1])?[]:{})),l=l[p]}return t}var r=n(26),o=n(52),a=n(14),s=n(54);t.exports=i},function(t,e,n){var i=n(40),r=n(59),o=r(i);t.exports=o},function(t,e,n){function i(t){return function(e,n,i){return("function"!=typeof n||void 0!==i)&&(n=r(n,i,3)),t(e,n)}}var r=n(45);t.exports=i},function(t,e,n){var i=n(61),r=n(65),o=n(66),a=o(i,r);t.exports=a},function(t,e,n){var i=n(62),r=n(38),o=n(63),a=o(function(t,e,n){return n?i(t,e,n):r(t,e)});t.exports=a},function(t,e,n){function i(t,e,n){for(var i=-1,o=r(e),a=o.length;++i<a;){var s=o[i],u=t[s],c=n(u,e[s],s,t,e);(c===c?c===u:u!==u)&&(void 0!==u||s in t)||(t[s]=c)}return t}var r=n(24);t.exports=i},function(t,e,n){function i(t){return a(function(e,n){var i=-1,a=null==e?0:n.length,s=a>2?n[a-2]:void 0,u=a>2?n[2]:void 0,c=a>1?n[a-1]:void 0;for("function"==typeof s?(s=r(s,c,5),a-=2):(s="function"==typeof c?c:void 0,a-=s?1:0),u&&o(n[0],n[1],u)&&(s=3>a?void 0:s,a=1);++i<a;){var d=n[i];d&&t(e,d,s)}return e})}var r=n(45),o=n(48),a=n(64);t.exports=i},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(i);return e=r(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var s=Array(e+1);for(i=-1;++i<e;)s[i]=n[i];return s[e]=a,t.apply(this,s)}}var i="Expected a function",r=Math.max;t.exports=n},function(t,e){function n(t,e){return void 0===t?e:t}t.exports=n},function(t,e,n){function i(t,e){return r(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(void 0,n))})}var r=n(64);t.exports=i},function(t,e,n){var i=n(66),r=n(68),o=n(73),a=i(r,o);t.exports=a},function(t,e,n){var i=n(69),r=n(63),o=r(i);t.exports=o},function(t,e,n){function i(t,e,n,p,f){if(!u(t))return t;var h=s(e)&&(a(e)||d(e)),g=h?void 0:l(e);return r(g||e,function(r,a){if(g&&(a=r,r=e[a]),c(r))p||(p=[]),f||(f=[]),o(t,e,a,i,n,p,f);else{var s=t[a],u=n?n(s,r,a,t,e):void 0,d=void 0===u;d&&(u=r),void 0===u&&(!h||a in t)||!d&&(u===u?u===s:s!==s)||(t[a]=u)}}),t}var r=n(28),o=n(70),a=n(19),s=n(10),u=n(14),c=n(16),d=n(71),l=n(24);t.exports=i},function(t,e,n){function i(t,e,n,i,l,p,f){for(var h=p.length,g=e[n];h--;)if(p[h]==g)return void(t[n]=f[h]);var v=t[n],m=l?l(v,g,n,t,e):void 0,b=void 0===m;b&&(m=g,s(g)&&(a(g)||c(g))?m=a(v)?v:s(v)?r(v):[]:u(g)||o(g)?m=o(v)?d(v):u(v)?v:{}:b=!1),p.push(g),f.push(m),b?t[n]=i(m,g,l,p,f):(m===m?m!==v:v===v)&&(t[n]=m)}var r=n(37),o=n(9),a=n(19),s=n(10),u=n(30),c=n(71),d=n(72);t.exports=i},function(t,e,n){function i(t){return o(t)&&r(t.length)&&!!C[E.call(t)]}var r=n(18),o=n(16),a="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",d="[object Error]",l="[object Function]",p="[object Map]",f="[object Number]",h="[object Object]",g="[object RegExp]",v="[object Set]",m="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",_="[object Float32Array]",w="[object Float64Array]",k="[object Int8Array]",x="[object Int16Array]",T="[object Int32Array]",S="[object Uint8Array]",M="[object Uint8ClampedArray]",F="[object Uint16Array]",I="[object Uint32Array]",C={};C[_]=C[w]=C[k]=C[x]=C[T]=C[S]=C[M]=C[F]=C[I]=!0,C[a]=C[s]=C[y]=C[u]=C[c]=C[d]=C[l]=C[p]=C[f]=C[h]=C[g]=C[v]=C[m]=C[b]=!1;var P=Object.prototype,E=P.toString;t.exports=i},function(t,e,n){function i(t){return r(t,o(t))}var r=n(39),o=n(27);t.exports=i},function(t,e,n){function i(t,e){return void 0===t?e:r(t,e,i)}var r=n(68);t.exports=i},function(t,e,n){function i(t){return r(t,o(t))}var r=n(75),o=n(24);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t[e[n]];return r}t.exports=n},function(t,e){(function(e){function n(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new TypeError(i);var n=t;t=e,e=n}return t=r(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}var i="Expected a function",r=e.isFinite;t.exports=n}).call(e,function(){return this}())},function(t,e,n){var i=n(78),r=n(64),o=r(function(t,e){return i(t,1,e)});t.exports=o},function(t,e){function n(t,e,n){if("function"!=typeof t)throw new TypeError(i);return setTimeout(function(){t.apply(void 0,n)},e)}var i="Expected a function";t.exports=n},function(t,e,n){var i=n(80),r=n(100),o=n(64),a=1,s=32,u=o(function(t,e,n){var o=a;if(n.length){var c=r(n,u.placeholder);o|=s}return i(t,o,e,n,c)});u.placeholder={},t.exports=u},function(t,e,n){function i(t,e,n,i,m,b,y,_){var w=e&p;if(!w&&"function"!=typeof t)throw new TypeError(g);var k=i?i.length:0;if(k||(e&=~(f|h),i=m=void 0),k-=m?m.length:0,e&h){var x=i,T=m;i=m=void 0}var S=w?void 0:u(t),M=[t,e,n,i,m,x,T,b,y,_];if(S&&(c(M,S),e=M[1],_=M[9]),M[9]=null==_?w?0:t.length:v(_-k,0)||0,e==l)var F=o(M[0],M[2]);else F=e!=f&&e!=(l|f)||M[4].length?a.apply(void 0,M):s.apply(void 0,M);var I=S?r:d;return I(F,M)}var r=n(81),o=n(83),a=n(86),s=n(103),u=n(92),c=n(104),d=n(101),l=1,p=2,f=32,h=64,g="Expected a function",v=Math.max;t.exports=i},function(t,e,n){var i=n(46),r=n(82),o=r?function(t,e){return r.set(t,e),t}:i;t.exports=o},function(t,e,n){(function(e){var i=n(20),r=i(e,"WeakMap"),o=r&&new r;t.exports=o}).call(e,function(){return this}())},function(t,e,n){(function(e){function i(t,n){function i(){var r=this&&this!==e&&this instanceof i?o:t;return r.apply(n,arguments)}var o=r(t);return i}var r=n(84);t.exports=i}).call(e,function(){return this}())},function(t,e,n){function i(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=r(t.prototype),i=t.apply(n,e);return o(i)?i:n}}var r=n(85),o=n(14);t.exports=i},function(t,e,n){var i=n(14),r=function(){function t(){}return function(e){if(i(e)){t.prototype=e;var n=new t;t.prototype=void 0}return n||{}}}();t.exports=r},function(t,e,n){(function(e){function i(t,n,w,k,x,T,S,M,F,I){function C(){for(var h=arguments.length,g=h,v=Array(h);g--;)v[g]=arguments[g];if(k&&(v=o(v,k,x)),T&&(v=a(v,T,S)),R||j){var y=C.placeholder,N=d(v,y);if(h-=N.length,I>h){var D=M?r(M):void 0,V=_(I-h,0),L=R?N:void 0,z=R?void 0:N,U=R?v:void 0,H=R?void 0:v;n|=R?m:b,n&=~(R?b:m),A||(n&=~(p|f));var q=[t,n,w,U,L,H,z,D,F,V],G=i.apply(void 0,q);return u(t)&&l(G,q),G.placeholder=y,G}}var W=E?w:this,$=O?W[t]:t;return M&&(v=c(v,M)),P&&F<v.length&&(v.length=F),this&&this!==e&&this instanceof C&&($=B||s(t)),$.apply(W,v)}var P=n&y,E=n&p,O=n&f,R=n&g,A=n&h,j=n&v,B=O?void 0:s(t);return C}var r=n(37),o=n(87),a=n(88),s=n(84),u=n(89),c=n(99),d=n(100),l=n(101),p=1,f=2,h=4,g=8,v=16,m=32,b=64,y=128,_=Math.max;t.exports=i}).call(e,function(){return this}())},function(t,e){function n(t,e,n){for(var r=n.length,o=-1,a=i(t.length-r,0),s=-1,u=e.length,c=Array(u+a);++s<u;)c[s]=e[s];for(;++o<r;)c[n[o]]=t[o];for(;a--;)c[s++]=t[o++];return c}var i=Math.max;t.exports=n},function(t,e){function n(t,e,n){for(var r=-1,o=n.length,a=-1,s=i(t.length-o,0),u=-1,c=e.length,d=Array(s+c);++a<s;)d[a]=t[a];for(var l=a;++u<c;)d[l+u]=e[u];for(;++r<o;)d[l+n[r]]=t[a++];return d}var i=Math.max;t.exports=n},function(t,e,n){function i(t){var e=a(t),n=s[e];if("function"!=typeof n||!(e in r.prototype))return!1;if(t===n)return!0;var i=o(n);return!!i&&t===i[0]}var r=n(90),o=n(92),a=n(94),s=n(96);t.exports=i},function(t,e,n){function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}var r=n(85),o=n(91),a=Number.POSITIVE_INFINITY;i.prototype=r(o.prototype),i.prototype.constructor=i,t.exports=i},function(t,e){function n(){}t.exports=n},function(t,e,n){var i=n(82),r=n(93),o=i?function(t){return i.get(t)}:r;t.exports=o},function(t,e){function n(){}t.exports=n},function(t,e,n){function i(t){for(var e=t.name+"",n=r[e],i=n?n.length:0;i--;){var o=n[i],a=o.func;if(null==a||a==t)return o.name}return e}var r=n(95);t.exports=i},function(t,e){var n={};t.exports=n},function(t,e,n){function i(t){if(u(t)&&!s(t)&&!(t instanceof r)){if(t instanceof o)return t;if(l.call(t,"__chain__")&&l.call(t,"__wrapped__"))return c(t)}return new o(t)}var r=n(90),o=n(97),a=n(91),s=n(19),u=n(16),c=n(98),d=Object.prototype,l=d.hasOwnProperty;i.prototype=a.prototype,t.exports=i},function(t,e,n){function i(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}var r=n(85),o=n(91);i.prototype=r(o.prototype),i.prototype.constructor=i,t.exports=i},function(t,e,n){function i(t){return t instanceof r?t.clone():new o(t.__wrapped__,t.__chain__,a(t.__actions__))}var r=n(90),o=n(97),a=n(37);t.exports=i},function(t,e,n){function i(t,e){for(var n=t.length,i=a(e.length,n),s=r(t);i--;){var u=e[i];t[i]=o(u,n)?s[u]:void 0}return t}var r=n(37),o=n(26),a=Math.min;t.exports=i},function(t,e){function n(t,e){for(var n=-1,r=t.length,o=-1,a=[];++n<r;)t[n]===e&&(t[n]=i,a[++o]=n);return a}var i="__lodash_placeholder__";t.exports=n},function(t,e,n){var i=n(81),r=n(102),o=150,a=16,s=function(){var t=0,e=0;return function(n,s){var u=r(),c=a-(u-e);if(e=u,c>0){if(++t>=o)return n}else t=0;return i(n,s)}}();t.exports=s},function(t,e,n){var i=n(20),r=i(Date,"now"),o=r||function(){return(new Date).getTime()};t.exports=o},function(t,e,n){(function(e){function i(t,n,i,a){function s(){for(var n=-1,r=arguments.length,o=-1,d=a.length,l=Array(d+r);++o<d;)l[o]=a[o];for(;r--;)l[o++]=arguments[++n];
var p=this&&this!==e&&this instanceof s?c:t;return p.apply(u?i:this,l)}var u=n&o,c=r(t);return s}var r=n(84),o=1;t.exports=i}).call(e,function(){return this}())},function(t,e,n){function i(t,e){var n=t[1],i=e[1],g=n|i,v=l>g,m=i==l&&n==d||i==l&&n==p&&t[7].length<=e[8]||i==(l|p)&&n==d;if(!v&&!m)return t;i&u&&(t[2]=e[2],g|=n&u?0:c);var b=e[3];if(b){var y=t[3];t[3]=y?o(y,b,e[4]):r(b),t[4]=y?s(t[3],f):r(e[4])}return b=e[5],b&&(y=t[5],t[5]=y?a(y,b,e[6]):r(b),t[6]=y?s(t[5],f):r(e[6])),b=e[7],b&&(t[7]=r(b)),i&l&&(t[8]=null==t[8]?e[8]:h(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=g,t}var r=n(37),o=n(87),a=n(88),s=n(100),u=1,c=4,d=8,l=128,p=256,f="__lodash_placeholder__",h=Math.min;t.exports=i},function(t,e,n){var i=n(78),r=n(64),o=r(function(t,e,n){return i(t,e,n)});t.exports=o},function(t,e,n){function i(t,e,n){var i=s(t)?r:a;return n&&u(t,e,n)&&(e=void 0),("function"!=typeof e||void 0!==n)&&(e=o(e,n,3)),i(t,e)}var r=n(107),o=n(108),a=n(123),s=n(19),u=n(48);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}t.exports=n},function(t,e,n){function i(t,e,n){var i=typeof t;return"function"==i?void 0===e?t:a(t,e,n):null==t?s:"object"==i?r(t):void 0===e?u(t):o(t,e)}var r=n(109),o=n(120),a=n(45),s=n(46),u=n(121);t.exports=i},function(t,e,n){function i(t){var e=o(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null==t?!1:(t=a(t),t[n]===i&&(void 0!==i||n in t))}}return function(t){return r(t,e)}}var r=n(110),o=n(117),a=n(13);t.exports=i},function(t,e,n){function i(t,e,n){var i=e.length,a=i,s=!n;if(null==t)return!a;for(t=o(t);i--;){var u=e[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){u=e[i];var c=u[0],d=t[c],l=u[1];if(s&&u[2]){if(void 0===d&&!(c in t))return!1}else{var p=n?n(d,l,c):void 0;if(!(void 0===p?r(l,d,n,!0):p))return!1}}return!0}var r=n(111),o=n(13);t.exports=i},function(t,e,n){function i(t,e,n,s,u,c){return t===e?!0:null==t||null==e||!o(t)&&!a(e)?t!==t&&e!==e:r(t,e,i,n,s,u,c)}var r=n(112),o=n(14),a=n(16);t.exports=i},function(t,e,n){function i(t,e,n,i,f,v,m){var b=s(t),y=s(e),_=l,w=l;b||(_=g.call(t),_==d?_=p:_!=p&&(b=c(t))),y||(w=g.call(e),w==d?w=p:w!=p&&(y=c(e)));var k=_==p&&!u(t),x=w==p&&!u(e),T=_==w;if(T&&!b&&!k)return o(t,e,_);if(!f){var S=k&&h.call(t,"__wrapped__"),M=x&&h.call(e,"__wrapped__");if(S||M)return n(S?t.value():t,M?e.value():e,i,f,v,m)}if(!T)return!1;v||(v=[]),m||(m=[]);for(var F=v.length;F--;)if(v[F]==t)return m[F]==e;v.push(t),m.push(e);var I=(b?r:a)(t,e,n,i,f,v,m);return v.pop(),m.pop(),I}var r=n(113),o=n(115),a=n(116),s=n(19),u=n(23),c=n(71),d="[object Arguments]",l="[object Array]",p="[object Object]",f=Object.prototype,h=f.hasOwnProperty,g=f.toString;t.exports=i},function(t,e,n){function i(t,e,n,i,o,a,s){var u=-1,c=t.length,d=e.length;if(c!=d&&!(o&&d>c))return!1;for(;++u<c;){var l=t[u],p=e[u],f=i?i(o?p:l,o?l:p,u):void 0;if(void 0!==f){if(f)continue;return!1}if(o){if(!r(e,function(t){return l===t||n(l,t,i,o,a,s)}))return!1}else if(l!==p&&!n(l,p,i,o,a,s))return!1}return!0}var r=n(114);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}t.exports=n},function(t,e){function n(t,e,n){switch(n){case i:case r:return+t==+e;case o:return t.name==e.name&&t.message==e.message;case a:return t!=+t?e!=+e:t==+e;case s:case u:return t==e+""}return!1}var i="[object Boolean]",r="[object Date]",o="[object Error]",a="[object Number]",s="[object RegExp]",u="[object String]";t.exports=n},function(t,e,n){function i(t,e,n,i,o,s,u){var c=r(t),d=c.length,l=r(e),p=l.length;if(d!=p&&!o)return!1;for(var f=d;f--;){var h=c[f];if(!(o?h in e:a.call(e,h)))return!1}for(var g=o;++f<d;){h=c[f];var v=t[h],m=e[h],b=i?i(o?m:v,o?v:m,h):void 0;if(!(void 0===b?n(v,m,i,o,s,u):b))return!1;g||(g="constructor"==h)}if(!g){var y=t.constructor,_=e.constructor;if(y!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _))return!1}return!0}var r=n(24),o=Object.prototype,a=o.hasOwnProperty;t.exports=i},function(t,e,n){function i(t){for(var e=o(t),n=e.length;n--;)e[n][2]=r(e[n][1]);return e}var r=n(118),o=n(119);t.exports=i},function(t,e,n){function i(t){return t===t&&!r(t)}var r=n(14);t.exports=i},function(t,e,n){function i(t){t=o(t);for(var e=-1,n=r(t),i=n.length,a=Array(i);++e<i;){var s=n[e];a[e]=[s,t[s]]}return a}var r=n(24),o=n(13);t.exports=i},function(t,e,n){function i(t,e){var n=s(t),i=u(t)&&c(e),f=t+"";return t=p(t),function(s){if(null==s)return!1;var u=f;if(s=l(s),(n||!i)&&!(u in s)){if(s=1==t.length?s:r(s,a(t,0,-1)),null==s)return!1;u=d(t),s=l(s)}return s[u]===e?void 0!==e||u in s:o(e,s[u],void 0,!0)}}var r=n(50),o=n(111),a=n(51),s=n(19),u=n(52),c=n(118),d=n(53),l=n(13),p=n(54);t.exports=i},function(t,e,n){function i(t){return a(t)?r(t):o(t)}var r=n(12),o=n(122),a=n(52);t.exports=i},function(t,e,n){function i(t){var e=t+"";return t=o(t),function(n){return r(n,t,e)}}var r=n(50),o=n(54);t.exports=i},function(t,e,n){function i(t,e){var n=!0;return r(t,function(t,i,r){return n=!!e(t,i,r)}),n}var r=n(124);t.exports=i},function(t,e,n){var i=n(40),r=n(125),o=r(i);t.exports=o},function(t,e,n){function i(t,e){return function(n,i){var s=n?r(n):0;if(!o(s))return t(n,i);for(var u=e?s:-1,c=a(n);(e?u--:++u<s)&&i(c[u],u,c)!==!1;);return n}}var r=n(11),o=n(18),a=n(13);t.exports=i},function(t,e,n){var i=n(28),r=n(124),o=n(127),a=o(i,r);t.exports=a},function(t,e,n){function i(t,e){return function(n,i,a){return"function"==typeof i&&void 0===a&&o(n)?t(n,i):e(n,r(i,a,3))}}var r=n(45),o=n(19);t.exports=i},function(t,e,n){function i(t,e,n){var i=s(t)?r:a;return e=o(e,n,3),i(t,e)}var r=n(129),o=n(108),a=n(130),s=n(19);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}t.exports=n},function(t,e,n){function i(t,e){var n=-1,i=o(t)?Array(t.length):[];return r(t,function(t,r,o){i[++n]=e(t,r,o)}),i}var r=n(124),o=n(10);t.exports=i},function(t,e,n){function i(t,e){return r(t,o(e))}var r=n(128),o=n(121);t.exports=i},function(t,e,n){function i(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&o(t,e,n)&&(e=0,n=i),r(t,e,n)):[]}var r=n(51),o=n(48);t.exports=i},function(t,e,n){function i(t,e,n){var i=t?t.length:0;if(!i)return-1;if("number"==typeof n)n=0>n?a(i+n,0):n;else if(n){var s=o(t,e);return i>s&&(e===e?e===t[s]:t[s]!==t[s])?s:-1}return r(t,e,n||0)}var r=n(134),o=n(136),a=Math.max;t.exports=i},function(t,e,n){function i(t,e,n){if(e!==e)return r(t,n);for(var i=n-1,o=t.length;++i<o;)if(t[i]===e)return i;return-1}var r=n(135);t.exports=i},function(t,e){function n(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var o=t[r];if(o!==o)return r}return-1}t.exports=n},function(t,e,n){function i(t,e,n){var i=0,a=t?t.length:i;if("number"==typeof e&&e===e&&s>=a){for(;a>i;){var u=i+a>>>1,c=t[u];(n?e>=c:e>c)&&null!==c?i=u+1:a=u}return a}return r(t,e,o,n)}var r=n(137),o=n(46),a=4294967295,s=a>>>1;t.exports=i},function(t,e){function n(t,e,n,o){e=n(e);for(var s=0,u=t?t.length:0,c=e!==e,d=null===e,l=void 0===e;u>s;){var p=i((s+u)/2),f=n(t[p]),h=void 0!==f,g=f===f;if(c)var v=g||o;else v=d?g&&h&&(o||null!=f):l?g&&(o||h):null==f?!1:o?e>=f:e>f;v?s=p+1:u=p}return r(u,a)}var i=Math.floor,r=Math.min,o=4294967295,a=o-1;t.exports=n},function(t,e,n){function i(t,e,n){var i=[];if(!t||!t.length)return i;var a=-1,s=[],u=t.length;for(e=r(e,n,3);++a<u;){var c=t[a];e(c,a,t)&&(i.push(c),s.push(a))}return o(t,s),i}var r=n(108),o=n(139);t.exports=i},function(t,e,n){function i(t,e){for(var n=t?e.length:0;n--;){var i=e[n];if(i!=o&&r(i)){var o=i;a.call(t,i,1)}}return t}var r=n(26),o=Array.prototype,a=o.splice;t.exports=i},function(t,e,n){function i(t,e,n){var i=t?t.length:0;return n&&o(t,e,n)&&(e=!1),i?r(t,e):[]}var r=n(141),o=n(48);t.exports=i},function(t,e,n){function i(t,e,n,c){c||(c=[]);for(var d=-1,l=t.length;++d<l;){var p=t[d];u(p)&&s(p)&&(n||a(p)||o(p))?e?i(p,e,n,c):r(c,p):n||(c[c.length]=p)}return c}var r=n(142),o=n(9),a=n(19),s=n(10),u=n(16);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}t.exports=n},function(t,e,n){function i(t,e,n,i){var u=t?t.length:0;return u?(null!=e&&"boolean"!=typeof e&&(i=n,n=a(t,e,i)?void 0:e,e=!1),n=null==n?n:r(n,i,3),e?s(t,n):o(t,n)):[]}var r=n(108),o=n(144),a=n(48),s=n(149);t.exports=i},function(t,e,n){function i(t,e){var n=-1,i=r,u=t.length,c=!0,d=c&&u>=s,l=d?a():null,p=[];l?(i=o,c=!1):(d=!1,l=e?[]:p);t:for(;++n<u;){var f=t[n],h=e?e(f,n,t):f;if(c&&f===f){for(var g=l.length;g--;)if(l[g]===h)continue t;e&&l.push(h),p.push(f)}else i(l,h,0)<0&&((e||d)&&l.push(h),p.push(f))}return p}var r=n(134),o=n(145),a=n(146),s=200;t.exports=i},function(t,e,n){function i(t,e){var n=t.data,i="string"==typeof e||r(e)?n.set.has(e):n.hash[e];return i?0:-1}var r=n(14);t.exports=i},function(t,e,n){(function(e){function i(t){return s&&a?new r(t):null}var r=n(147),o=n(20),a=o(e,"Set"),s=o(Object,"create");t.exports=i}).call(e,function(){return this}())},function(t,e,n){(function(e){function i(t){var e=t?t.length:0;for(this.data={hash:s(null),set:new a};e--;)this.push(t[e])}var r=n(148),o=n(20),a=o(e,"Set"),s=o(Object,"create");i.prototype.push=r,t.exports=i}).call(e,function(){return this}())},function(t,e,n){function i(t){var e=this.data;"string"==typeof t||r(t)?e.set.add(t):e.hash[t]=!0}var r=n(14);t.exports=i},function(t,e){function n(t,e){for(var n,i=-1,r=t.length,o=-1,a=[];++i<r;){var s=t[i],u=e?e(s,i,t):s;i&&n===u||(n=u,a[++o]=s)}return a}t.exports=n},function(t,e,n){function i(t,e,n){return t=r(t),n=null==n?0:o(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}var r=n(55),o=Math.min;t.exports=i},function(t,e,n){function i(t,e,n){var i=t;return(t=r(t))?(n?s(i,e,n):null==e)?t.slice(u(t),c(t)+1):(e+="",t.slice(o(t,e),a(t,e)+1)):t}var r=n(55),o=n(152),a=n(153),s=n(48),u=n(154),c=n(156);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i&&e.indexOf(t.charAt(n))>-1;);return n}t.exports=n},function(t,e){function n(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}t.exports=n},function(t,e,n){function i(t){for(var e=-1,n=t.length;++e<n&&r(t.charCodeAt(e)););return e}var r=n(155);t.exports=i},function(t,e){function n(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}t.exports=n},function(t,e,n){function i(t){for(var e=t.length;e--&&r(t.charCodeAt(e)););return e}var r=n(155);t.exports=i},function(t,e,n){var i;/** @license
	 * JS Signals <http://millermedeiros.github.com/js-signals/>
	 * Released under the MIT license
	 * Author: Miller Medeiros
	 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
	 */
!function(r){function o(t,e,n,i,r){this._listener=e,this._isOnce=n,this.context=i,this._signal=t,this._priority=r||0}function a(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function s(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){s.prototype.dispatch.apply(t,arguments)}}o.prototype={active:!0,params:null,execute:function(t){var e,n;return this.active&&this._listener&&(n=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,n),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},s.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,e,n,i){var r,a=this._indexOfListener(t,n);if(-1!==a){if(r=this._bindings[a],r.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else r=new o(this,t,e,n,i),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===t&&n.context===e)return i;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,n){return a(t,"add"),this._registerListener(t,!1,e,n)},addOnce:function(t,e,n){return a(t,"addOnce"),this._registerListener(t,!0,e,n)},remove:function(t,e){a(t,"remove");var n=this._indexOfListener(t,e);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,n=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=n),i){e=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(e[i]&&this._shouldPropagate&&e[i].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var u=s;u.Signal=s,i=function(){return u}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(this)},function(t,e,n){!function(){"use strict";function e(t){this._core=t;var e=this;return this._installMapper=function(t){t.mapper=new i},{modifySBInstance:function(t){e._installMapper(t)}}}var i=n(159);e.defaultId="mapper",t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){if(c.isString(t)===!1||t.length<=0)throw new TypeError('"mapTo" should be a non empty string');c.isUndefined(e)&&(e=null),this.destinationVarPath=t,this.mappingType=this.mappingTypes.sourcePath,this.mappingFrom=void 0,this.preFormatters=[],this.defaultValue=e}function i(t){this.options=t,this.mapToCollection=[]}function r(t){i.call(this,t),this.templatesToApply=[]}function o(t,e){if(!t||!c.isFunction(t))throw new Error("routeFunc should be a function that receives src object as parameter and returns bool");if(!(e&&e instanceof i))throw new Error("mapConfig should be an instance of BfaMapperMapConfig");this.routeFunc=t,this.mapConfig=e}function a(t,e){this.mapName=t,this.options=e,this.routers=[],this.defaultMapConfig=null}function s(){this.mapRouters={},this.mapTemplates={},this._utils={utils:c,defs:d}}function u(t,e){if(c.isString(t)===!1||t.length<=0)throw new TypeError('"mapTo" should be a non empty string');c.isUndefined(e)&&(e=null),this.destinationVarPath=t,this.mappings=[],this.defaultValue=e}var c=n(7),d=n(160);e.prototype.mappingTypes={sourcePath:1,"function":2},e.prototype.mapFrom=function(t,e){if(c.isFunction(t))this.mappingType=this.mappingTypes["function"],this.mappingFrom=t;else{if(!(c.isString(t)&&t.length>0))throw new TypeError('"mapFrom" is object of wrong type: '+(typeof t).toString());this.mappingType=this.mappingTypes.sourcePath,this.mappingFrom=t}return c.isArray(e)&&c.every(e,function(t){return t instanceof Function})&&this.preFormatters.push.apply(this.preFormatters,e),this},e.prototype.map=function(t,e,n){var i=this.defaultValue;if(!c.isUndefined(this.mappingFrom))switch(this.mappingType){case this.mappingTypes["function"]:i=this.mappingFrom.call(n,t,e);break;case this.mappingTypes.sourcePath:i=c.get(t,this.mappingFrom,this.defaultValue)}return c.isUndefined(i)&&(i=this.defaultValue),this.preFormatters.length>0&&c.forEach(this.preFormatters,function(t){i=t.call(n,i)}),c.set(e,this.destinationVarPath,i),i},i.prototype.addMapTo=function(t,n){var i=new e(t,n);return this.mapToCollection.push(i),i},r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.applyTemplateByName=function(t){-1===this.templatesToApply.indexOf(t)&&this.templatesToApply.push(t)},a.prototype.getMapConfig=function(t,e){for(var n=null,i=0;i<this.routers.length;i++){var r=this.routers[i];if(r.routeFunc.call(e,t)===!0){n=r.mapConfig;break}}return null===n&&(n=this.defaultMapConfig),n},a.prototype.createConfigForRoute=function(t){var e=new o(t,new r(this.options));return this.routers.push(e),e.mapConfig},a.prototype.createDefaultConfig=function(){return this.defaultMapConfig=new r(this.options),this.defaultMapConfig},s.prototype.addUtility=function(t,e){if(!this.validateName(t))throw new TypeError("`utilityName` have to be not empty string");if(c.has(this._utils,t))throw new Error("utility with "+t+" already exists");return this._utils[t]=e,this},s.prototype.getOrCreateMap=function(t,e){if(!this.validateName(t))throw new TypeError("mapName must be a not empty string");if(this.mapRouters[t])return this.mapRouters[t].defaultMapConfig;var n=new a(t,e);return this.mapRouters[t]=n,n.createDefaultConfig()},s.prototype.isExists=function(t){return c.has(this.mapRouters,t)},s.prototype.getOrCreateRouter=function(t,e){if(!this.validateName(t))throw new TypeError("`routeName` should be not empty string");if(c.has(this.mapRouters,t))return this.mapRouters[t];var n=new a(t,e);return this.mapRouters[t]=n,n},s.prototype.createMapTemplate=function(t,e){if(!this.validateName(t))throw new TypeError("`templateName` should be not empty string");if(c.has(this.mapTemplates[t]))return this.mapTemplates[t];var n=new i(e);return this.mapTemplates[t]=n,n},s.prototype.validateName=function(t){return c.isString(t)===!1||t.length<=0?!1:!0},s.prototype.map=function(t,e,n){var i=this;if((c.isUndefined(n)||null===n)&&(n={}),c.isUndefined(e)||null===e)return n;if(!c.has(this.mapRouters,t))return n;var r=this.mapRouters[t].getMapConfig(e,i._utils);if(null===r)return n;var o=r.mapToCollection;o.length>0&&c.forEach(o,function(t){t.map(e,n,i._utils)});var a=r.templatesToApply;return a.length>0&&c.forEach(a,function(t){if(c.has(i.mapTemplates,t)){var r=i.mapTemplates[t].mapToCollection;c.forEach(r,function(t){t.map(e,n,i._utils)})}}),n},s.prototype.formatters={strToLowerCase:function(t){return c.isString(t)?t.toLowerCase():t},strCutTo255Characters:function(t){return c.isString(t)&&t.length>255?t.substr(0,255):t},strToInt:function(t){try{return parseInt(t)}catch(e){return t}}},u.prototype.mappingTypes={sourcePath:1,"function":2},u.prototype.mapFrom=function(t,e){var n={mappingFrom:t,preFormatters:[]};if(c.isFunction(t))n.mappingType=this.mappingTypes["function"];else{if(!(c.isString(t)&&t.length>0))throw new TypeError('"mapFrom" is object of wrong type: '+(typeof t).toString());n.mappingType=this.mappingTypes.sourcePath}return c.isArray(e)&&c.every(e,function(t){return t instanceof Function})&&n.preFormatters.push.apply(this.preFormatters,e),this.mappings.push(n),this},u.prototype.map=function(t,e,n){var i=this,r=c.get(e,this.destinationVarPath);if(r||(r=[]),!c.isArray(r))throw new TypeError('"Destination" is an object of wrong type: '+(typeof r).toString()+". Array is expected");c.forEach(this.mappings,function(o){var a=i.defaultValue;if(!c.isUndefined(o.mappingFrom))switch(o.mappingType){case i.mappingTypes["function"]:a=o.mappingFrom.call(n,t,e);break;case i.mappingTypes.sourcePath:a=c.get(t,o.mappingFrom,i.defaultValue)}c.isUndefined(a)&&(a=i.defaultValue),o.preFormatters.length>0&&c.forEach(o.preFormatters,function(t){a=t.call(n,a)}),r.push(a)}),c.set(e,this.destinationVarPath,r)},i.prototype.addMapToArray=function(t,e){var n=new u(t,e);return this.mapToCollection.push(n),n},t.exports=s}()},function(t,e){!function(){"use strict";var e={platform:{desktop:1,mobileweb:2,bflite:3},bfaMode:{develop:1,prod:2,test:3},trackingBehavior:{byDefault:1,ifSpecified:2}};Object.freeze(e),t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){function n(t,e){r.settings.isReady===!0&&t.call(e),r.pageReady.add(t,e)}function i(){return t.utils.cloneDeep(r.settings.pageInfo)}e=e||{},this.defaultSettings={readyOnFirstUpdate:!0,isReady:!1,pageInfo:{uri:{href:document.location.href,host:document.location.host,path:document.location.pathname,search:document.location.search,hash:document.location.hash,protocol:document.location.protocol}}},this.pageReady=new t.utils.Signal,this.pageChanged=new t.utils.Signal,this.settings=t.utils.defaultsDeep(e,this.defaultSettings);var r=this;return t._router.sub("general/page/{action}",function(e,n){if("ready"===n.action)return void(this.isReady||(this.isReady=!0,this.pageReady.dispatch()));if(!t.utils.isPlainObject(e))return void t.log.warn("page info must be a plain object");switch(n.action){case"set":this.settings.pageInfo=e;break;case"update":default:this.settings.pageInfo=t.utils.merge(this.settings.pageInfo,e)}this.pageChanged.dispatch(),!this.settings.isReady&&this.settings.readyOnFirstUpdate&&(this.settings.isReady=!0,this.pageReady.dispatch())},this,{action:["ready","update","set"]}),t._onPageReady=function(t,e){n(t,e)},t._getPageInfo=function(){return i()},{modifySBInstance:function(t){t.getPageInfo=function(){return i()},t.onPageReady=function(t,e){n(t,e)},t.onPageChanged=function(t,e,n){r.pageChanged[n?"addOnce":"add"](t,e)}}}}e.defaultId="pageInfo",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){function n(t,e){r.settings.isReady===!0&&t.call(e),r.userReady.add(t,e)}function i(){return t.utils.cloneDeep(r.settings.userInfo)}e=e||{},this.defaultSettings={readyOnFirstUpdate:!0,isReady:!1,userInfo:{isLoggedIn:!1,referrer:document.referrer,userAgent:navigator.userAgent}};var r=this;return this.userReady=new t.utils.Signal,this.userChanged=new t.utils.Signal,this.settings=t.utils.defaultsDeep(e,this.defaultSettings),t._router.sub("general/user/{action}",function(e,n){if("ready"===n.action)return void(this.isReady||(this.isReady=!0,this.userReady.dispatch()));if(!t.utils.isPlainObject(e))return void t.log.warn("user info must be a plain object");switch(n.action){case"set":this.settings.userInfo=e;break;case"update":default:this.settings.userInfo=t.utils.merge(this.settings.userInfo,e)}this.userChanged.dispatch(),!this.settings.isReady&&this.settings.readyOnFirstUpdate&&(this.settings.isReady=!0,this.userReady.dispatch())},this,{action:["ready","update","set"]}),t._onUserReady=function(t,e){n(t,e)},t._getUserInfo=function(){return i()},{modifySBInstance:function(t){t.getUserInfo=function(){return i()},t.onUserReady=function(t,e){n(t,e)},t.onUserChanged=function(t,e,n){r.userChanged[n?"addOnce":"add"](t,e)}}}}e.defaultId="userInfo",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){return e=e||{},this.defaultSettings={cookieName:"bfa_test"},this.settings=t.utils.defaultsDeep(e,this.defaultSettings),this._isTestMode="true"===t.utils.readCookie(this.settings.cookieName),this.updateGeneralSettings=function(e){e.mode!==t.defs.bfaMode.test&&t.push("general/settings/update",{mode:t.defs.bfaMode.test})},this._isTestMode&&(this.updateGeneralSettings(t._generalSettings),t._onGeneralSettingsChange.add(this.updateGeneralSettings,this)),{}}e.defaultId="testMode",e.require=["generalSettings"],t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){function n(){this._bfaMode=t._generalSettings.mode}function o(e,n){if(e instanceof i&&n){if(!t.utils.has(s.settings.appendersConfig,s._bfaMode))return;for(var r=s.settings.appendersConfig[s._bfaMode],o=0;o<r.length;o++)t.utils.has(s,r[o])&&s[r[o]].trackEvent(this.instanceId,e,n)}else t.log.warn("DebugTracker: can't store event data for "+this.instanceId+": not valid arguments")}function a(e){if(!t.utils.isString(e)||""===e)throw new Error("Error occurred on _createDebugTracker call: instanceId arg has to be not empty string");return{instanceId:e,trackEvent:o}}e=e||{},this.defaultSettings={storageKeyName:"bfa_debugStore",appendersConfig:{}},this.defaultSettings.appendersConfig[t.defs.bfaMode.develop]=[r.logger],this.defaultSettings.appendersConfig[t.defs.bfaMode.test]=[r.sessionStorage,r.logger],this.settings=t.utils.defaults(e,this.defaultSettings),this._bfaMode=t._generalSettings.mode,t._onGeneralSettingsChange.add(n,this);var s=this;return this[r.sessionStorage]={trackEvent:function(e,n,i){var r,o=window.sessionStorage.getItem(s.settings.storageKeyName);r=null===o?{pageHref:document.location.href}:JSON.parse(o),t.utils.isUndefined(r[e])&&(r[e]=[]),r[e].push({eventType:n.t,eventName:n.n,eventLocation:n.l,eventDescription:n.d,dataObject:i}),window.sessionStorage.setItem(s.settings.storageKeyName,JSON.stringify(r))}},this[r.logger]={trackEvent:function(t,e,n){var i={eventType:e.t,eventName:e.n,eventLocation:e.l,eventDescription:e.d,dataObject:n};this.logger.info(t+" tracked event: "+JSON.stringify(i))}},this[r.logger].logger=t.createLogger("DebugTracker_"+r.logger),t.createDebugTracker=a,{modifySBInstance:function(t){t.debugTracker=a(t.instanceId)}}}var i=n(165),r={logger:"loggerAppender",sessionStorage:"sessionStorageAppender"};e.defaultId="debugTracker",e.require=["generalSettings","logger"],t.exports=e,t.exports.debugTrackerAppenderTypes=r}()},function(t,e,n){!function(){"use strict";function e(t,e,n,r,o,a){this.t=t||"",this.n=e||"",this.l=n||"",this.d=r||"",this.data=i.isObject(o)?o:{},this.opt=i.isObject(a)?a:{}}var i=n(7);e.tryParse=function(t){var n=i.get(t,"t",""),r=i.get(t,"n","");return i.isString(n)&&0!==n.length&&i.isString(r)&&0!==r.length?new e(n,r,i.get(t,"l",""),i.get(t,"d",""),i.get(t,"data",{}),i.get(t,"opt",{})):null},t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){function n(t,e){r.settings.isReady===!0&&t.call(e),r.seedSocialFlagsReady.add(t,e)}function i(){return t.utils.cloneDeep(r.settings.seedSocialFlags)}e=e||{},this.defaultSettings={isReady:!1,seedSocialFlags:void 0},this.utils=t.utils,this.settings=t.utils.defaultsDeep(e,this.defaultSettings),this.seedSocialFlagsReady=new t.utils.Signal;var r=this;return this._tryCalculate=function(){this.settings.isReady||this.settings.pageInfo&&this.settings.userInfo&&(this.settings.pageInfo.post?this.isPromotedPost(this.settings.pageInfo,this.settings.userInfo)?this.settings.seedSocialFlags=this.calculatePromotedFlags(this.settings.pageInfo,this.settings.userInfo):this.settings.seedSocialFlags=this.calculateNotPromotedFlags(this.settings.pageInfo,this.settings.userInfo):this.settings.seedSocialFlags=null,this.settings.isReady=!0,this.seedSocialFlagsReady.dispatch())},r.settings.isReady||(t._onPageReady(function(){this.settings.pageInfo=t._getPageInfo(),this._tryCalculate()},this),t._onUserReady(function(){this.settings.userInfo=t._getUserInfo(),this._tryCalculate()},this)),t._onPostSeedSocialFlagsReady=function(t,e){n(t,e)},t._getPostSeedSocialFlags=function(){i()},{modifySBInstance:function(t){t.getPostSeedSocialFlags=function(){return i()},t.onPostSeedSocialFlagsReady=function(t,e){n(t,e)}}}}e.prototype.isPromotedPost=function(t){return this.utils.get(t,"post.isPromoted",!1)===!0},e.prototype.isBuzzFeedRegex=/^https?:\/\/([^\/]+\.)?buzzfeed\.com(\/|$)/i,e.prototype.isBuzzFeedReferrer=function(t,e){if(!e.referrer.match(this.isBuzzFeedRegex))return!1;if(0===t.uri.path.indexOf("h2/")&&e.referrer.indexOf("buzzfeed.com/h1/")>-1){var n=null,i=this.utils.readCookie("HT_PRIMARY");if(void 0!==i){var r=decodeURIComponent(i).split(",");r.length>4&&"not_available"!==r[4]&&(n=r[4])}if(null===n||!n.match(this.isBuzzFeedRegex))return!1}return!0},e.prototype.calculateNotPromotedFlags=function(t,e){if(!t||!e.referrer)return null;var n={seed:!1,social:!1};return this.isBuzzFeedReferrer(t,e)?n.seed=!0:n.social=!0,n},e.prototype.calculatePromotedFlags=function(t,e){if(!t||!e.referrer)return null;var n={seed:!1,social:!1,sodisco:!1},i=this.utils.readCookie("BUZZ_WIDGET");return i&&t.uri.href.match(i)||window.IS_HASH_WIDGET_CLICK?(n.seed=!0,n.sodisco=!0):this.isBuzzFeedReferrer(t,e)===!0?t.uri.search.match(/([&\?]+b=1)/)?n.social=!0:n.seed=!0:(n.social=0===t.uri.path.indexOf("/h2/"),n.sodisco=n.social),n},e.require=["pageInfo","userInfo"],e.defaultId="postSeedSocialFlags",t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){this.settings=e||{},this._binderBuilder=new i;var n=this;return t._router.sub("plugin/binder/activate",function(e){r.merge(n.settings,e||{}),r.merge(n._binderBuilder.buildConfig,n.settings),t.domi.onDomReady(function(){window.bfaBinder=n._binderBuilder.build()})},this,null,!0),{}}var i=n(168),r=n(7),o=n(171);window.bfaBinder={parser:new o},e.defaultId="binder",e.require=["domi"],t.exports=e}()},function(t,e,n){!function(){"use strict";function e(){}var i=n(169),r=n(172),o=n(173),a=n(174),s=n(175),u=n(178),c=n(179);e.prototype.buildConfig={bfaFunctionName:null,domBinder:{delegatedMapping:null,directMapping:null},generalBinder:{pageExitBinder:!1},inViewImpressionBinder:{enabled:!1,locator:""},scrollBinder:{pixelMode:{enabled:!1},elementMode:{enabled:!1,element:"",expected:0},checkpoints:[],bottomBounds:[]},socialBinder:{facebookMapping:null}},e.prototype.useDomDelegatedBinder=function(t){return this.buildConfig.domBinder.delegatedMapping=t,this},e.prototype.useDomDirectBinder=function(t){return this.buildConfig.domBinder.directMapping=t,this},e.prototype.usePageExitBinder=function(){return this.buildConfig.generalBinder.pageExitBinder=!0,this},e.prototype.useInViewImpressionBinder=function(t){return this.buildConfig.inViewImpressionBinder.enabled=!0,this.buildConfig.inViewImpressionBinder.locator=t,this},e.prototype.useScrollPixelModeBinder=function(){return this.buildConfig.scrollBinder.pixelMode.enabled=!0,this},e.prototype.useScrollElementsModeBinder=function(t,e){return this.buildConfig.scrollBinder.elementMode.enabled=!0,this.buildConfig.scrollBinder.elementMode.element=t,this.buildConfig.scrollBinder.elementMode.expected=e,this},e.prototype.useSocialBinder=function(t){return this.buildConfig.socialBinder.mapping=t,this},e.prototype.setBottomBoundElements=function(t){return this.buildConfig.bottomBounds=t,this},e.prototype.setPercentageCheckpoints=function(t){this.scrollBinder.checkpoints=t},e.prototype.useBfaFunction=function(t){this.bfaFunctionName=t},e.prototype.build=function(){if(!this.buildConfig.bfaFunctionName)return null;var t=new c;if(this.buildConfig.domBinder.delegatedMapping){var e=new i(this.buildConfig.domBinder.delegatedMapping,this.buildConfig.bfaFunctionName);t.domBinders.push(e)}if(this.buildConfig.domBinder.directMapping){var n=new r(this.buildConfig.domBinder.directMapping,this.buildConfig.bfaFunctionName);t.domBinders.push(n)}if(this.buildConfig.generalBinder.pageExitBinder){var d=new o(this.buildConfig.bfaFunctionName);t.generalBinders.push(d)}if(this.buildConfig.socialBinder.facebookMapping){var l=new a(this.buildConfig.socialBinder.facebookMapping,this.buildConfig.bfaFunctionName);t.socialBinders.push(l)}if(this.buildConfig.scrollBinder.elementMode.enabled||this.buildConfig.scrollBinder.pixelMode.enabled){var p=new s(this.buildConfig.scrollBinder,this.buildConfig.bfaFunctionName);t.scrollBinders.push(p)}if(this.buildConfig.inViewImpressionBinder.enabled){var f=new u({locator:this.buildConfig.inViewImpressionBinder.locator},this.buildConfig.bfaFunctionName);t.scrollBinders.push(f)}return t.init(),t},t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){this.events=[],this.matches=document.documentElement.matches||document.documentElement.webkitMatchesSelector||document.documentElement.mozMatchesSelector||document.documentElement.oMatchesSelector||document.documentElement.msMatchesSelector,this.init=function(){this.processMapping(),this.subscribeForEvents()},this.processMapping=function(){for(var e in t)if(t.hasOwnProperty(e))for(var n=t[e],i=0;i<n.length;i++)n[i].trackMethod=e,this.events.push(n[i])},this.subscribeForEvents=function(){var t=document.body||document.documentElement,e=this;this.events=this.events.map(function(n){return n.handler=e.getHandler(),t.addEventListener(n.event,n.handler),n})},this.getHandler=function(){var t=this;return function(e){if(!e.bfaHandled&&e.target)for(var n=e.target;n;){for(var i=0;i<t.events.length;i++){var r=t.events[i];if(n.nodeType&&9!==n.nodeType&&r.event===e.type&&t.matches.call(n,r.selector)){var o=r.options?r.options.handlers:null;t.trackElement(n,r.trackMethod,o),e.bfaHandled=!0;break}}if(e.bfaHandled)break;n=n.parentNode}}},this.trackElement=function(t,n,r){if(r)for(var o=0;o<r.length&&!i[r[o]](t,e,n);o++);else{var a=i.DefaultHandler;a(t,e,n)}},this.disable=function(){for(var t=document.body||document.documentElement,e=0;e<this.events.length;e++)t.removeEventListener(this.events[e].event,this.events[e].handler)}}var i=n(170);t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t){if(null===t||void 0===t||!("string"==typeof t||t instanceof String))return null;var e=t.match(g);return{url:e[0]?e[0]:"",scheme:e[2]?e[2]:"",host:e[4]?e[4]:"",path:e[5]?e[5]:"",cleanedPath:e[5]?e[5]:"",query:e[7]?e[7]:"",fragment:e[9]?e[9]:""}}function i(t){return t.scheme.length>0&&t.host.length>0&&-1===t.host.indexOf("buzzfeed.com")||0===t.url.indexOf("javascript:;")?!1:!0}function r(t){return!t.host||!t.scheme||t.host.indexOf("buzzfeed.com")>-1||-1===t.scheme.indexOf("http")?!1:!0}function o(t){return t.path+(t.query?"?"+t.query:"")}function a(t){return t.url}function s(t){var n=e(t);return null===n?"":r(n)?a(n):i(n)?o(n):""}function u(t){return!(t&&t.ignore instanceof Array)||-1===t.ignore.indexOf("bfaBinder")&&-1===t.ignore.indexOf("all")||t.force instanceof Array&&-1!==t.force.indexOf("bfaBinder")?!0:!1}function c(t,n){if(null===t||"A"!==t.nodeName||t.hasAttribute("data-bfa"))return!1;var r=t.getAttribute("href"),a=e(r);if(null===a||!i(a))return!1;var s=new h,u=["track/click/Nav-Link",{t:"click",n:"Nav-Link",l:s.findLocation(t),data:{url:o(a)}}];return n&&window[n]instanceof Function&&window[n].apply(this,u),!0}function d(t,n){if(null===t||"A"!==t.nodeName||t.hasAttribute("data-bfa"))return!1;var i=t.getAttribute("href"),o=e(i);if(!o||!r(o))return!1;var s=new h,u=["track/click/Exit-Link",{t:"click",n:"Nav-Link",l:s.findLocation(t),data:{url:a(o),anchorDesc:t.innerHTML}}];return n&&window[n]instanceof Function&&window[n].apply(this,u),!0}function l(t,e){if(null===t||"SELECT"!==t.nodeName)return!1;var n=t.options[t.selectedIndex];if(!n)return!1;if(!n.hasAttribute("data-bfa"))return!1;var i=new h,r=i.parse(n);if(!u(r.options))return!1;n.hasAttribute("data-href")&&(r.data.url=s(n.getAttribute("data-href")));var o=["track/click/"+r.action,{t:"click",n:r.action,l:r.location,d:r.description,data:r.data,opt:r.options}];return e&&window[e]instanceof Function&&window[e].apply(this,o),!0}function p(t,e,n){if(null===t||"A"!==t.nodeName||!t.hasAttribute("data-bfa"))return!1;var i=new h,r=i.parse(t);if(!u(r.options))return!1;r.data.url=s(t.getAttribute("href"));var o=["track/"+n+"/"+r.action,{t:n,n:r.action,l:r.location,d:r.description,data:r.data,opt:r.options}];return e&&window[e]instanceof Function&&window[e].apply(this,o),!0}function f(t,e,n){if(null===t||!t.hasAttribute("data-bfa"))return!1;var i=new h,r=i.parse(t);if(!u(r.options))return!1;var o=["track/"+n+"/"+r.action,{t:n,n:r.action,l:r.location,d:r.description,data:r.data,opt:r.options}];return e&&window[e]instanceof Function&&window[e].apply(this,o),!0}var h=n(171),g=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");t.exports={ATagWithInternalLinkHandler:c,ATagWithExternalLinkHandler:d,ATagDefaultHandler:p,SelectTagChangedClickHandler:l,DefaultHandler:f}}()},function(t,e){!function(){"use strict";function e(t){this.defaultConfig={start:"@",end:";",separator:":",objectPropertySeparator:",",objectStart:"{",objectEnd:"}",arrayStart:"[",arrayEnd:"]",parts:{action:"a",description:"d",location:"l",data:"e",options:"o"}},this.config=t||this.defaultConfig,this.parse=function(t){var e={},n=t.getAttribute("data-bfa");return e=null===n||""===n?{action:"",location:"",description:"",data:{},options:{}}:this.processAttribute(n),""===e.location&&(e.location=this.findLocation(t.parentElement)),e.action=this.grabDataSource(e.action),e.location=this.grabDataSource(e.location),e.description=this.grabDataSource(e.description),e},this.processAttribute=function(t){var e=[];for(var n in this.config.parts)if(this.config.parts.hasOwnProperty(n)){var i=t.indexOf(this.config.start+this.config.parts[n]+this.config.separator);i>-1&&e.push({part:n,idx:i})}e=e.sort(function(t,e){return t.idx<e.idx?-1:t.idx===e.idx?0:1});for(var r={action:"",location:"",description:"",data:"",options:""},o=0;o<e.length;o++)o<e.length-1?r[e[o].part]=t.substring(e[o].idx,e[o+1].idx):r[e[o].part]=t.substring(e[o].idx);for(var a in r)r.hasOwnProperty(a)&&(r[a]=r[a].replace(this.config.start+this.config.parts[a]+this.config.separator,"").trim(),r[a][r[a].length-1]===this.config.end&&(r[a]=r[a].substring(0,r[a].length-1)));return r.data=this.convertToObject(r.data),r.options=this.convertToObject(r.options),r},this.findLocation=function(t){for(;null!==t;){var e=t.getAttribute("data-bfa");if(null!==e&&""!==e){var n=this.processAttribute(e);if(""===n.location){t=t.parentElement;continue}return n.location}t=t.parentElement}return""},this.objectParseMode={propertyName:1,propertyValue:2,propertyArray:4},this.convertToObject=function(t){var e={};if(t=t.trim().replace('"',"").replace("'",""),"string"!=typeof t||0!==t.indexOf(this.defaultConfig.objectStart)||t.indexOf(this.defaultConfig.objectEnd)!==t.length-1)return e;for(var n="",i="",r="",o=this.objectParseMode.propertyName,a=1;a<t.length-1;a++)if(t[a]!==this.defaultConfig.separator||o!==this.objectParseMode.propertyName)switch(o){case this.objectParseMode.propertyArray:if(i||(i=[]),t[a]===this.defaultConfig.arrayEnd){i.push(r.trim()),e[n.trim()]=i,n="",r="",i="",o=this.objectParseMode.propertyName;break}if(t[a]===this.defaultConfig.objectPropertySeparator){i.push(r),r="";break}r+=t[a];break;case this.objectParseMode.propertyValue:t[a]===this.defaultConfig.objectPropertySeparator||a===t.length-2?(e[n.trim()]=(i+(t[a]!==this.defaultConfig.objectPropertySeparator?t[a]:"")).trim(),n="",i="",o=this.objectParseMode.propertyName):i+=t[a];break;case this.objectParseMode.propertyName:t[a]!==this.defaultConfig.objectPropertySeparator&&(n+=t[a])}else t[a+1]&&t[a+1]===this.defaultConfig.arrayStart?(o=this.objectParseMode.propertyArray,a++):o=this.objectParseMode.propertyValue;return e},this.grabDataSource=function(t){if(t.indexOf("source:")>-1){var e=t.replace("source:","").trim();if(e&&window){for(var n=window,i=e.split("."),r=i.pop(),o=0;o<i.length;o++)n=n[i[o]];var a=n[r];if(a)return a()}}return t}}t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){this.events=[],this.init=function(){this.processMapping(),this.subscribeForEvents()},this.processMapping=function(){for(var e in t)if(t.hasOwnProperty(e))for(var n=t[e],i=0;i<n.length;i++)n[i].trackMethod=e,this.events.push(n[i])},this.subscribeForEvents=function(){var t=this;this.events=this.events.map(function(e){var n=document.querySelector(e.selector);if(n){var i=e.options?e.options.handlers:null;e.handler=t.getHandler(e.trackMethod,i),n.addEventListener(e.event,e.handler)}return e})},this.getHandler=function(t,e){var n=this;return function(i){n.trackElement(this,t,e),i.bfaHandled=!0}},this.trackElement=function(t,n,r){if(r)for(var o=0;o<r.length&&!i[r[o]](t,e,n);o++);else{var a=i.DefaultHandler;a(t,e,n)}},this.disable=function(){for(var t=0;t<this.events.length;t++){var e=document.querySelector(this.events[t].selector);e&&e.removeEventListener(this.events[t].event,this.events[t].handler)}}}var i=n(170);t.exports=e}()},function(t,e){!function(){"use strict";function e(t){this.visibilityProps={hidden:null,visibilityChange:null},this.trackedByVisibility=!1,this.trackedByUnload=!1;var e=this;this.init=function(){this.visibilityProps=this.getVisibilityProps(),this.visibilityProps.hidden&&this.visibilityProps.visibilityChange&&document.addEventListener(this.visibilityProps.visibilityChange,this.visibilityHandler,!1),window.addEventListener("beforeunload",this.unloadHandler,!1),window.addEventListener("unload",this.unloadHandler,!1)},this.visibilityHandler=function(){document[e.visibilityProps.hidden]||e.trackedByVisibility||(e.trackedByVisibility=!0,window[t].apply(this,["track/page/exit"]))},this.unloadHandler=function(){e.trackedByUnload||(e.trackedByUnload=!0,window[t].apply(this,["track/page/exit"]))},this.getVisibilityProps=function(){var t=null,e=null;return"undefined"!=typeof document.hidden?(t="hidden",e="visibilitychange"):"undefined"!=typeof document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(t="msHidden",e="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),{hidden:t,visibilityChange:e}}}t.exports=e}()},function(t,e,n){function i(t,e){"use strict";this.mapping=t,this.executable=e,this.parser=new r,this.init=function(){var t=this,e=0,n=setInterval(function(){e>=10&&clearInterval(n),window.FB&&(clearInterval(n),t.processMappings()),e++},1e3)},this.processMappings=function(){if(void 0!==t)for(var e=0;e<t.length;e++)"like"===t[e]&&this.bindLikes(),"unlike"===t[e]&&this.bindDislikes(),"comment"===t[e]&&this.bindComments()},this.bindLikes=function(){var t=this;window.FB.Event.subscribe("edge.create",function(e,n){if(null!==n&&n.getAttribute){var i=t.parser.parse(n),r=["track/click/"+i.action,{t:"click",n:i.action,d:i.description,l:i.location,data:i.data,opt:i.options}];t.executable&&window[t.executable]instanceof Function&&window[t.executable].apply(this,r)}})},this.bindDislikes=function(){var t=this;window.FB.Event.subscribe("edge.remove",function(e,n){var i=t.parser.parse(n),r=["track/click/"+i.action,{t:"click",n:i.action,d:i.description,l:i.location,data:i.data,opt:i.options}];t.executable&&window[t.executable]instanceof Function&&window[t.executable].apply(this,r)})},this.bindComments=function(){var t=this;window.FB.Event.subscribe("comment.create",function(){var e=["track/click/Submit",{t:"click",n:"Submit",d:"Facebook",l:"Contributions"}];t.executable&&window[t.executable]instanceof Function&&window[t.executable].apply(this,e)})}}var r=n(171);t.exports=i},function(t,e,n){!function(){"use strict";function e(t,e){this.options=t||{},this.executable=e,this.scrollHandler=null,this.keyPressHandler=null,this.init=function(){window&&t&&e&&(this.scrollHandler=this.getScrollHandler(),this.keyPressHandler=this.getKeyPressScrollHandler(),this.scrollHandler&&window.addEventListener("scroll",this.debounce(this.scrollHandler,200)),this.keyPressHandler&&document.addEventListener("keydown",this.debounce(this.keyPressHandler,200)));
},this.getScrollHandler=function(){var e=null,n=null;return this.options.pixelMode.enabled&&(e=new i(this.options,this.executable),e.init()),this.options.elementMode.enabled&&(n=new r(this.options,this.executable),n.init()),function(){if(t.elementMode.enabled){var i=document.querySelectorAll(t.elementMode.element);i.length!==t.elementMode.expected?n.track():t.pixelMode.enabled&&e.track()}else t.pixelMode.enabled&&e.track()}},this.getKeyPressScrollHandler=function(){var t=this;return function(e){return 32===e.which||33===e.which||34===e.which||38===e.which||40===e.which||e.ctrlKey&&35===e.which||e.ctrlKey&&36===e.which&&t.scrollHandler?void t.scrollHandler():null}},this.debounce=function(t,e,n){var i;return function(){function r(){i=null,n||t.apply(o,a)}var o=this,a=arguments,s=n&&!i;clearTimeout(i),i=setTimeout(r,e),s&&t.apply(o,a)}}}var i=n(176),r=n(177);t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){this.options=t||{},this.executable=e,this.points=[],this.init=function(){this.fillCheckPoints()},this.track=function(){var t,e,n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,i=document.documentElement.clientHeight+1,r=document.documentElement.clientTop||document.body.clientTop||0,o=n+i,a=0;for(t=0;t<this.options.bottomBounds.length&&!(e=document.querySelector(this.options.bottomBounds[t]));t++);if(e){var s=e.getBoundingClientRect().top+n-r;o>=s&&100>a&&(a=100),s>=o&&(a=o/s*100)}for(t=0;t<this.options.checkpoints.length;t++)if(this.points[t].percentage<=a&&!this.points[t].passed){this.points[t].passed=!0;var u=["track/scroll/post",{t:"scroll",n:"post",d:this.points[t].percentage.toString()}];this.executable&&window[this.executable]instanceof Function&&window[this.executable].apply(this,u)}},this.fillCheckPoints=function(){for(var t=0;t<this.options.checkpoints.length;t++)this.points.push({percentage:this.options.checkpoints[t],passed:!1})}}t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){this.options=t||{},this.executable=e,this.points=[],this.init=function(){this.fillCheckPoints()},this.track=function(){if(this.options.elementMode.element&&this.options.elementMode.expected){var t,e=window.pageYOffset+document.documentElement.clientHeight+1,n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,i=document.documentElement.clientTop||document.body.clientTop||0,r=document.querySelectorAll(this.options.elementMode.element),o=0;for(t=0;t<r.length;t++){var a=r[t].getBoundingClientRect().top+n-i;e>=a&&o++}var s=o/this.options.elementMode.expected*100,u=null;for(t=0;t<this.options.bottomBounds.length&&!(u=document.querySelector(this.options.bottomBounds[t]));t++);if(u){var c=u.getBoundingClientRect().top+n-i;e>=c&&100>s&&(s=100)}for(t=0;t<this.options.checkpoints.length;t++)if(this.points[t].percentage<=s&&!this.points[t].passed){this.points[t].passed=!0;var d=["track/scroll/post",{t:"scroll",n:"post",d:this.points[t].percentage.toString()}];this.executable&&window[this.executable]instanceof Function&&window[this.executable].apply(this,d)}}},this.fillCheckPoints=function(){for(var t=0;t<this.options.checkpoints.length;t++)this.points.push({percentage:this.options.checkpoints[t],passed:!1})}}t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t,e){this.options=t||{},this.executable=e,this.parser=new i,this.init=function(){window&&t&&e&&(window.addEventListener("scroll",this.debounce(this.getHandler(),200)),document.addEventListener("keydown",this.debounce(this.getKeyPressHandler(),200)))},this.getKeyPressHandler=function(){var t=this;return function(e){return 32===e.which||33===e.which||34===e.which||38===e.which||40===e.which||e.ctrlKey&&35===e.which||e.ctrlKey&&36===e.which&&t.scrollHandler?void t.getHandler():null}},this.getHandler=function(){function e(t){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.clientHeight+1,i=e+n,r=t.getBoundingClientRect().top+e,o=r+t.getBoundingClientRect().height;return i>=o&&r>=e}var n=this;return function(){if(n.options.locator){var i,r=document.querySelectorAll(t.locator),o=[];for(i=0;i<r.length;i++)if(e(r[i])&&!r[i].hasAttribute("bfa-inview-tracked")){var a=n.parser.parse(r[i]),s={t:"scroll",n:"impression",l:a.location,d:a.description,data:a.data,opt:a.options};o.push(s),r[i].setAttribute("bfa-inview-tracked","true")}if(n.executable&&window[n.executable]instanceof Function)for(i=0;i<o.length;i++){var u=["track/scroll/impression",o[i]];window[n.executable].apply(this,u)}}}},this.debounce=function(t,e,n){var i;return function(){function r(){i=null,n||t.apply(o,a)}var o=this,a=arguments,s=n&&!i;clearTimeout(i),i=setTimeout(r,e),s&&t.apply(o,a)}}}var i=n(171);t.exports=e}()},function(t,e,n){!function(){"use strict";function e(){this.domBinders=[],this.socialBinders=[],this.scrollBinders=[],this.generalBinders=[],this.parser=new i;var t;this.init=function(){for(t=0;t<this.domBinders.length;t++)this.domBinders[t].init();for(t=0;t<this.socialBinders.length;t++)this.socialBinders[t].init();for(t=0;t<this.scrollBinders.length;t++)this.scrollBinders[t].init();for(t=0;t<this.generalBinders.length;t++)this.generalBinders[t].init()}}var i=n(171);t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t){return t._router.sub("track",function(e){if(t.utils.isArray(e)){var n=new i(e[0],e[1],e[2],e[3],e[4],e[5]);""!==n.t&&t.push("track/"+n.t+"/"+n.n,n)}},this),{}}var i=n(165);e.defaultId="legacyTrackSupport",t.exports=e}()},function(t,e,n){!function(){"use strict";function e(t){function e(e,n,r){if(!t.utils.isString(e)||0===e.length)return!1;if(!(r instanceof i))return!1;var o=-1!==t.utils.indexOf(t.utils.values(t.defs.trackingBehavior),n)?n:t.defs.trackingBehavior.byDefault,a=r.opt,s=!1;switch(o){case t.defs.trackingBehavior.ifSpecified:t.utils.isPlainObject(a)&&t.utils.isArray(a.force)&&(-1!==a.force.indexOf("all")||-1!==a.force.indexOf(e))&&(s=!0);break;case t.defs.trackingBehavior.byDefault:default:(!t.utils.isPlainObject(a)||!t.utils.isArray(a.ignore)||-1===a.ignore.indexOf("all")&&-1===a.ignore.indexOf(e)||t.utils.isArray(a.force)&&-1!==a.force.indexOf(e))&&(s=!0)}return s}function n(e,n,r){return e=e||{},e instanceof i?e:(t.utils.isString(e.t)&&0!==e.t.length||(e.t=n),t.utils.isString(e.n)&&0!==e.n.length||(e.n=r),i.tryParse(e))}return{modifySBInstance:function(t){t.canTrackEvent=e,t.tryConvertToEventInfo=n}}}var i=n(165);e.defaultId="trackingUtils",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){e=e||{},this.defaultSettings={isReady:!1,enabled:!1,maxAttempts:20,attemptDelay:100},this.poundIdResult=void 0,this.settings=t.utils.defaultsDeep(e,this.defaultSettings),this.poundIdReadySignal=new t.utils.Signal;var n=this;return this._onPoundIdReady=function(t,e){n.settings.isReady===!0&&t.call(e),n.poundIdReadySignal.add(t,e)},this._activate=function(){n.settings.isReady=!0,n.poundIdReadySignal.dispatch()},this._getPoundIdFromUrlHash=function(t){var e="";if(window.pound&&window.pound.identity){var n=new window.pound.identity.Unique;e=n.unhashed(t.slice(1)).toString()}return{poundId:e,isFromUrl:!0}},this._getPoundIdNative=function(){var t="";return window.bf_visit&&window.bf_visit.unique&&(t=window.bf_visit.unique.unhashed(window.bf_visit.unique.hashed())),{poundId:t,isFromUrl:!1}},t.domi.onDomReady(function(){if(n.settings.enabled)var t=0,e=setInterval(function(){return""!==window.location.hash?(n.poundIdResult=n._getPoundIdFromUrlHash(window.location.hash),n._activate(),void clearInterval(e)):(t===n.settings.maxAttempts&&(n.poundIdResult=n._getPoundIdNative(),n._activate(),clearInterval(e)),void t++)},n.settings.attemptDelay);else n.poundIdResult=n._getPoundIdNative(),n._activate()},this),{modifySBInstance:function(t){t.getPoundId=function(){return n.poundIdResult},t.onPoundIdReady=function(t,e){n._onPoundIdReady(t,e)}}}}e.require=["domi"],e.defaultId="poundId",t.exports=e}()},function(t,e){!function(){"use strict";function e(t,e){e=e||{},this._defaultSettings={extFilePath:"static/js/public/pixiedust-build.js",sessionId:Date.now().toString(32)+(1e8*Math.random()|0).toString(32)},this.settings=t.utils.defaultsDeep(e,this._defaultSettings),this.pixiedustReady=new t.utils.Signal,this.active=!1;var n=this;return this._onPixiedustReady=function(t,e){n.active===!0&&t.call(e),n.pixiedustReady.add(t,e)},this.activate=function(){if(!this.active&&window.Pixiedust){this.pixiedust=new window.Pixiedust,this.pixiedust.setSessionVars({session_id:n.settings.sessionId});var e={env:t._generalSettings.env};t._generalSettings.pixiedust?(e.sampling_rate=t._generalSettings.pixiedust.samplingRate||1,e.sampling_rate_options={buzz_recommendation_impression:t._generalSettings.pixiedust.poundSamplingRate||0,buzz_recommendation_click:t._generalSettings.pixiedust.poundSamplingRate||0}):(e.sampling_rate=0,e.sampling_rate_options={buzz_recommendation_impression:0,buzz_recommendation_click:0}),this.pixiedust.start(e),this.active=!0,this.pixiedustReady.dispatch()}},t.domi.onDomReady(function(){t.domi.loadScript({src:n.settings.extFilePath},n.activate,null,n)},this),{modifySBInstance:function(t){t.sendToPixiedust=function(t){n.active?n.pixiedust.push(t):n.pixiedustReady.add(function(){n.pixiedust.push(t)},this)},t.onPixiedustReady=function(t,e){n._onPixiedustReady(t,e)}}}}e.defaultId="pixiedust",e.require=["domi"],t.exports=e}()},function(t,e){!function(){"use strict";function e(t){var e={trackingBehavior:t.defs.trackingBehavior.byDefault,extTrackerGlobalName:"bf_s",tracker:null,configMapsDelegate:null,extFilesPaths:[]};this._inited=!1,this._active=!1,this.settings=t.utils.defaultsDeep(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var n=this;return this.activate=function(){if(!n._active&&n._inited){if(n.generalSettings.mode!==t.defs.bfaMode.prod)return void(n.page&&n.user&&!t.utils.isUndefined(n.postSeedSocialFlags)&&(t.log.info("Active"),n._active=!0,t.moduleActive.dispatch()));if(!n.tracker){if(!window[n.settings.extTrackerGlobalName])return void t.log.warn("External adobe lib is still not loaded");n.tracker=window[n.settings.extTrackerGlobalName],t.log.info("External adobe lib is loaded")}n.tracker.isReadyToTrack()?n.page&&n.user&&!t.utils.isUndefined(n.postSeedSocialFlags)&&(t.log.info("active"),n._active=!0,t.moduleActive.dispatch()):(t.log.warn("External adobe lib is still not ready to track. Subscribed on `callbackWhenReadyToTrack`"),n.tracker.callbackWhenReadyToTrack(n,n.activate))}},t.onGeneralSettingsChange(function(){this.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){this.page=t.getPageInfo(),this.activate()},this),t.onUserReady(function(){this.user=t.getUserInfo(),this.activate()},this),t.onPostSeedSocialFlagsReady(function(){this.postSeedSocialFlags=t.getPostSeedSocialFlags(),this.activate()},this),this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackPage,this,e),this);var n=t.tryConvertToEventInfo(e,"page","view");if(t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,n)){if(n.data.page=this.page,n.data.user=this.user,n.data.seedSocialFlags=this.postSeedSocialFlags,!t.mapper.isExists("track/page/view"))return void t.log.warn("Mapping for `track/page/view` doesn't exist");switch(this.generalSettings.mode){case t.defs.bfaMode.prod:t.mapper.map("track/page/view",n,this.tracker),this.tracker.t();break;default:t.mapper.map("track/page/view",n,this.tracker),t.debugTracker.trackEvent(n,this.tracker)}t.log.info("`page view` event successfully tracked")}},t.subOn("track/page/view",this._trackPage,this),this._trackScroll=function(e,n){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackScroll,this,e,n),this);var i=t.tryConvertToEventInfo(e,"scroll",n.eventName);if(t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,i)&&this.page.post){if(i.data.page=this.page,i.data.user=this.user,!t.mapper.isExists("track/scroll"))return void t.log.error("Mapping for `track/scroll` doesn't exist");if(this.page.post.isPromoted===!0||"100"===i.d){switch(this.generalSettings.mode){case t.defs.bfaMode.prod:t.mapper.map("track/scroll",i,this.tracker),this.tracker.tl(!0,"o",i.d+"%");break;default:t.mapper.map("track/scroll",i,this.tracker),t.debugTracker.trackEvent(i,this.tracker)}t.log.info("`scroll tracking` "+i.d+"% event successfully tracked")}}},t.subOn("track/scroll/{eventName}",this._trackScroll,this),this._trackDefault=function(e,n,i){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackDefault,this,e,n,i),this);var r=t.tryConvertToEventInfo(e,n,i);if(t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,r)){if(r.data.page=this.page,r.data.user=this.user,r.data.seedSocialFlags=this.postSeedSocialFlags,!t.mapper.isExists("track/"+n))return void t.log.error("Mapping for `track/"+n+"` doesn't exist");switch(this.generalSettings.mode){case t.defs.bfaMode.prod:t.mapper.map("track/"+n,r,this.tracker),this.tracker.tl(!0,"o","search"===n?"searchResult":n);break;default:t.mapper.map("track/"+n,r,this.tracker),t.debugTracker.trackEvent(r,this.tracker)}t.log.info("Event successfully tracked. Type: "+r.t+"; Name: "+r.n+"; Location: "+r.l+"; Desc: "+r.d+";")}},this._trackClick=function(t,e){this._trackDefault(t,"click",e.eventName)},t.subOn("track/click/{eventName}",this._trackClick,this),this._trackSearch=function(t,e){this._trackDefault(t,"search",e.eventName)},t.subOn("track/search/{eventName}",this._trackSearch,this),this._trackQuiz=function(t,e){this._trackDefault(t,"quiz",e.eventName)},t.subOn("track/quiz/{eventName}",this._trackQuiz,this),{init:function(){return t.utils.isFunction(n.settings.configMapsDelegate)?(n.settings.configMapsDelegate(t.mapper),n.generalSettings.mode===t.defs.bfaMode.prod?(n.tracker=n.settings.tracker,!n.tracker&&!window[n.extTrackerGlobalName]&&n.settings.extFilesPaths&&n.settings.extFilesPaths.length>0&&(t.log.info("loading scripts"),t.domi.onDomReady(function(){t.utils.forEach(n.settings.extFilesPaths,function(e){t.domi.loadScript({src:e},n.activate,null,n)})},n))):n.tracker={},n._inited=!0,t.log.info("inited"),t.moduleInited.dispatch(),void n.activate()):void t.log.error("Value of configMapsDelegate (in settings) property must be a `function` that have to set up mapping")}}}e.defaultId="adobeIntegration",e.require=["logger","domi","pageInfo","userInfo","mapper","trackingUtils","generalSettings","debugTracker","postSeedSocialFlags"],t.exports=e}()},function(t,e){!function(){"use strict";function e(t){var e={trackingBehavior:t.defs.trackingBehavior.byDefault,extTrackerGlobalName:"LOTCC",tracker:null,configMapsDelegate:null,extFilesPaths:["https://tags.crwdcntrl.net/c/6942/cc.js?ns=_cc6942"]};this._inited=!1,this._active=!1,this.settings=t.utils.defaultsDeep(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var n=this;return this.activate=function(){if(!n._active&&n._inited){if(!n.tracker&&n.generalSettings.mode===t.defs.bfaMode.prod){if(!window[n.settings.extTrackerGlobalName])return void t.log.warn("External Lotame lib is still not loaded");n.tracker=window[n.settings.extTrackerGlobalName],t.log.info("External Lotame lib is loaded")}n.page&&n.user&&!t.utils.isUndefined(n.postSeedSocialFlags)&&!t.utils.isUndefined(n.poundId)?(t.log.info("Active"),n._active=!0,t.moduleActive.dispatch()):t.log.warn("External Lotame lib is still not ready to track.")}},t.onGeneralSettingsChange(function(){n.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){n.page=t.getPageInfo(),n.activate()},this),t.onUserReady(function(){n.user=t.getUserInfo(),n.activate()},this),t.onPostSeedSocialFlagsReady(function(){n.postSeedSocialFlags=t.getPostSeedSocialFlags(),n.activate()},this),t.onPoundIdReady(function(){n.poundId=t.getPoundId(),n.activate()},this),this._addToTrackerFromDto=function(e,n){for(var i in n)if(n.hasOwnProperty(i))if(t.utils.isArray(n[i]))for(var r=0;r<n[i].length;r++)e.add(i.toString(),n[i][r]);else e.add(i.toString(),n[i])},this._trackDefault=function(e,n,i,r){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackDefault,this,e,n,i,r),this);var o=t.tryConvertToEventInfo(e,n,i);if(t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,o)){o.data.page=this.page,o.data.user=this.user,o.data.seedSocialFlags=this.postSeedSocialFlags,r&&(o.data.poundId=this.poundId);var a=r?"track/page/view":"track/"+n;if(!t.mapper.isExists(a))return void t.log.error("Mapping for `"+a+"` doesn't exist");var s=t.mapper.map(a,o,{});if(t.utils.keys(s).length>0){switch(this.generalSettings.mode){case t.defs.bfaMode.prod:this._addToTrackerFromDto(this.tracker,s),this.tracker.bcp();break;default:t.debugTracker.trackEvent(o,s)}t.log.info("Event successfully tracked. Type: "+o.t+"; Name: "+o.n+"; Location: "+o.l+"; Desc: "+o.d+";")}else t.log.info("Event won't be tracked to Lotame, because object is empty after mapping. Type: "+o.t+"; Name: "+o.n+"; Location: "+o.l+"; Desc: "+o.d+";")}},this._trackPage=function(t){this._trackDefault(t,"page","view",!0)},t.subOn("track/page/view",this._trackPage,this),this._trackClick=function(t,e){this._trackDefault(t,"click",e.eventName,!1)},t.subOn("track/click/{eventName}",this._trackClick,this),this._trackQuiz=function(t,e){this._trackDefault(t,"quiz",e.eventName,!1)},t.subOn("track/quiz/{eventName}",this._trackQuiz,this),{init:function(){return t.utils.isFunction(n.settings.configMapsDelegate)?(n.settings.configMapsDelegate(t.mapper),n.generalSettings.mode===t.defs.bfaMode.prod?(n.tracker=n.settings.tracker,!n.tracker&&!window[n.extTrackerGlobalName]&&n.settings.extFilesPaths&&n.settings.extFilesPaths.length>0&&(t.log.info("loading scripts"),t.domi.onDomReady(function(){t.utils.forEach(n.settings.extFilesPaths,function(e){t.domi.loadScript({src:e,id:"LOTCC_6942"},n.activate,null,n)})},n))):n.tracker={},n._inited=!0,t.log.info("inited"),t.moduleInited.dispatch(),void n.activate()):void t.log.error("Value of configMapsDelegate (in settings) property must be a `function` that have to set up mapping")},isInited:function(){return n._inited},isActive:function(){return n._active}}}e.defaultId="LotameIntegration",e.require=["logger","domi","pageInfo","userInfo","mapper","trackingUtils","generalSettings","debugTracker","postSeedSocialFlags","poundId"],t.exports=e}()},function(t,e){!function(){"use strict";function e(t){this._inited=!1,this._active=!1,this.pixiedustPluginReady=!1,this.generalSettings=t.getGeneralSettings(),this.settings=t.settings||{};var e=this;return this.activate=function(){!e._active&&e._inited&&(this.pixiedustPluginReady&&this.page&&this.user&&!t.utils.isUndefined(this.postSeedSocialFlags)&&!t.utils.isUndefined(this.poundId)?(t.log.info("Active"),e._active=!0,t.moduleActive.dispatch()):t.log.warn("External pixiedust lib is still not ready to track."))},t.onGeneralSettingsChange(function(){e.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){e.page=t.getPageInfo(),e.activate()},this),t.onUserReady(function(){e.user=t.getUserInfo(),e.activate()},this),t.onPixiedustReady(function(){e.pixiedustPluginReady=!0,e.activate()},this),t.onPostSeedSocialFlagsReady(function(){e.postSeedSocialFlags=t.getPostSeedSocialFlags(),e.activate()},this),t.onPoundIdReady(function(){e.poundId=t.getPoundId(),e.activate()},this),this.getEventInfo=function(e,n,i){var r=t.tryConvertToEventInfo(e,n,i);return t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,r)?(r.data.page=this.page,r.data.user=this.user,r.data.seedSocialFlags=this.postSeedSocialFlags,r.data.poundId=this.poundId,r):(t.log.info(t.moduleId+" cannot track current event. Type: "+n+"; Name: "+i+";"),null)},this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackPage,this,e),this);if(!t.mapper.isExists("track/page/view"))return void t.log.warn("Mapping for `track/page/view` doesn't exist");var n=this.getEventInfo(e,"page","view");this._trackDefault(n,"track/page/view")},t.subOn("track/page/view",this._trackPage,this),this._trackClick=function(e,n){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackClick,this,e,n),this);if(!t.mapper.isExists("track/click"))return void t.log.error("Mapping for `track/click` doesn't exist");var i=this.getEventInfo(e,"click",n.eventName);this._trackDefault(i,"track/click")},t.subOn("track/click/{eventName}",this._trackClick,this),this._trackImpression=function(e,n){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackImpression,this,e,n),this);if(!t.mapper.isExists("track/scroll"))return void t.log.error("Mapping for `track/scroll` doesn't exist");var i=this.getEventInfo(e,"scroll",n.eventName);this._trackDefault(i,"track/scroll")},t.subOn("track/scroll/{eventName}",this._trackImpression,this),this._trackDefault=function(e,n){e.data.env=this.generalSettings.mode===t.defs.bfaMode.prod?"prod":"dev";var i=t.mapper.map(n,e,{});if(t.utils.keys(i).length>0){switch(this.generalSettings.mode){case t.defs.bfaMode.prod:t.sendToPixiedust(i);break;default:t.debugTracker.trackEvent(e,i),t.sendToPixiedust(i)}t.log.info("Event successfully tracked. Type: "+e.t+"; Name: "+e.n+"; Location: "+e.l+"; Desc: "+e.d+";")}else t.log.info("Event won't be tracked to Pixiedust, because object is empty after mapping. Type: "+e.t+"; Name: "+e.n+"; Location: "+e.l+"; Desc: "+e.d+";")},{init:function(){return t.utils.isFunction(e.settings.configMapsDelegate)?(e.settings.configMapsDelegate(t.mapper),e._inited=!0,t.moduleInited.dispatch(),t.log.info("inited"),void e.activate()):void t.log.error("Value of configMapsDelegate (in settings) property must be a `function` that have to set up mapping")}}}e.defaultId="PixiedustIntegration",e.require=["logger","pixiedust","pageInfo","userInfo","debugTracker","mapper","trackingUtils","generalSettings","postSeedSocialFlags","poundId"],t.exports=e}()},function(t,e){!function(){"use strict";t.exports=function(t){var e=t.createMapTemplate("dfpAdobeDefault");e.addMapTo("eVar50","").mapFrom(function(t){return this.utils.get(t,"data.adpartner","")}),e.addMapTo("eVar51","").mapFrom(function(t){return t.l+"|"+t.n+"|"+(t.d?t.d:"Big-Story"!==t.l&&"Bottom-Promo"!==t.l||!t.data.adbuzzid?"(no description)":t.data.adbuzzid)}),e.addMapTo("eVar52","").mapFrom(function(t){return this.utils.get(t,"data.adbuzzurl","").replace(/^(https?|ftp):\/\//,"").replace(/^[^\/]*?buzzfeed.com\//,"").replace(/#(.*)/,"")},[t.formatters.strToLowerCase]);var n=t.getOrCreateMap("track/page/view");n.addMapTo("pageName").mapFrom(function(t){if(this.utils.has(t.data.page.post))return t.data.page.post.name.toLowerCase();var e=this.utils.trim(t.data.page.uri.cleanedPath,"/");return""===e||"index"===e.toLowerCase()?"{{home}}":e}),n.addMapTo("channel").mapFrom("data.page.metavertical"),n.addMapTo("eVar25").mapFrom(function(t){return"index"===t.data.page.type?"home":"Error"===t.data.page.templateType?"Error":t.data.page.type}),n.addMapTo("eVar26").mapFrom(function(t){return(t.data.page.platform===this.defs.platform.desktop?"desktop":"mobile web")+"|"+t.data.page.country+"|"+t.data.page.language},[t.formatters.strToLowerCase]),n.addMapTo("eVar1","").mapFrom("data.user.id"),n.addMapTo("eVar2","visitor").mapFrom(function(t){return t.data.user.isLoggedIn?t.data.user.isAdmin?"administrator":t.data.user.isEditor?"editor":t.data.user.isAdvertiser?"advertiser":"user":"visitor"}),n.addMapTo("referrer","").mapFrom(function(t){var e=t.data.user.referrer;if(t.data.user.userAgent){var n=t.data.user.userAgent.toString().toLowerCase();n.match(/fban\/messenger/)?e="http://msgr.facebook.com":n.match(/fban/)&&!e.match(/m\.facebook/)?e="http://app.facebook.com":n.match(/twitter/i)?e="http://app.twitter.com":n.match(/pinterest/i)&&(e="http://app.pinterest.com")}return e}),n.addMapTo("eVar31","none").mapFrom("data.page.post.id"),n.addMapTo("prop32","").mapFrom(function(t){var e=this.utils.get(t,"data.page.post.published");return e?e.substr(0,10):""}),n.addMapTo("eVar34","").mapFrom("data.page.post.author"),n.addMapTo("eVar61","").mapFrom(function(t){return null!==this.utils.get(t,"data.seedSocialFlags",null)&&this.utils.get(t,"data.page.post.isPromoted",!1)===!0?t.data.seedSocialFlags.social&&!t.data.seedSocialFlags.sodisco?"BuzzFeed organic":"Not organic":""}),n.addMapTo("eVar49","").mapFrom(function(t){if(null!==this.utils.get(t,"data.seedSocialFlags",null)&&this.utils.get(t,"data.page.post.isPromoted",!1)===!0){if(t.data.seedSocialFlags.seed)return"Seed";if(t.data.seedSocialFlags.social)return"Social"}return""}),n.addMapTo("eVar35","").mapFrom(function(t){var e="";if(!t.data.page.post)return e;switch(t.data.page.post.listFormat){case"long":e="Longform";break;case"breaking":e="Breaking";break;case"dec_up":e="Numbered List";break;case"dec_down":e="Countdown List";break;case"none":case"disc":e="Plain List";break;default:e="Article"}switch(t.data.page.post.postFormat){case"wide":e+=",Wide";break;default:e+=",Standard"}return e}),n.addMapTo("eVar39","").mapFrom(function(t){return this.utils.get(t,"data.page.post.isPromoted",!1)!==!0?"":"long"===t.data.page.post.listFormat?this.utils.get(t,"data.page.post.wordsCount",0):t.data.page.post.mainSubBuzzAmount}),n.addMapTo("eVar36","").mapFrom(function(t){return this.utils.get(t,"data.page.post.category","none")},[t.formatters.strToLowerCase]),n.addMapTo("eVar37","").mapFrom(function(t){return t.data.page.post?"raw:"+t.data.page.post.raw.toString()+",editor:"+t.data.page.post.editor.toString()+",ad:"+t.data.page.post.ad.toString()+",nsfw:"+t.data.page.post.nsfw.toString()+",partner:"+t.data.page.post.partner.toString()+",user:"+t.data.page.post.user.toString()+",trigger:"+t.data.page.post.trigger.toString():""}),n.addMapTo("eVar38","").mapFrom("data.page.post.badges",[t.formatters.strToLowerCase]),n.addMapTo("list1","").mapFrom(function(t){var e=this.utils.get(t,"data.page.post.tags",null);if(!e)return"";var n=e.indexOf("--primarykeyword-");return n>-1&&(e=e.substring(n+"--primarykeyword-".length)),e.replace(/(--([^,]*),)/g,"")},[t.formatters.strToLowerCase]),n.addMapTo("events","").mapFrom(function(t){return t.data.page.post?"event31":""}),n.addMapTo("eVar40","").mapFrom(function(t){return this.utils.get(t,"data.page.post.isPromoted",!1)===!0?t.data.page.post.id:""}),n.addMapTo("eVar45","").mapFrom(function(t){return this.utils.get(t,"data.page.post.isPromoted",!1)===!0?t.data.page.post.author:""}),n.addMapTo("list2","").mapFrom(function(t){var e="none";if(this.utils.get(t,"data.page.post.isPromoted",!1)===!0&&t.data.page.post.tags&&t.data.page.post.tags.indexOf("--content-theme")>-1)for(var n,i=/--content-theme-([^,]*),/g;null!==(n=i.exec(t.data.page.post.tags));)e+=n[1]+",";return e}),n.addMapTo("pageType","").mapFrom(function(t){return"Error"===t.data.page.templateType?"errorPage":""}),n.addMapTo("events","").mapFrom(function(t,e){return"/post"===this.utils.get(t,"data.page.uri.cleanedPath","")?e.events?e.events+",event44":"event44":e.events}),n.addMapTo("events","").mapFrom(function(t,e){return this.utils.get(t,"data.page.post.isPromoted",!1)===!0?e.events?e.events+",event33":"event33":e.events}),n.addMapTo("eVar33","").mapFrom(function(t){return this.utils.get(t,"data.page.post.publishedAgo","").toString()});var i=t.getOrCreateRouter("track/click"),r=i.createConfigForRoute(function(t){return"Share"===t.n});r.addMapTo("eVar8","+1"),r.addMapTo("eVar41","").mapFrom(function(t){return t.data.idx?t.d+":"+t.n+":"+t.l+":"+t.data.idx:t.d+":"+t.n+":"+t.l},[t.formatters.strToLowerCase]),r.addMapTo("events","event41"),r.addMapTo("linkTrackVars","eVar8,eVar41,events"),r.addMapTo("linkTrackEvents","event41");var o=i.createConfigForRoute(function(t){return"Standard-Reaction"===t.n||"Gif-Reaction"===t.n||"Standard"===t.n&&"Reactions"===t.l});o.addMapTo("eVar7","+1"),o.addMapTo("eVar42","").mapFrom("d",[t.formatters.strToLowerCase]),o.addMapTo("events","event42"),o.addMapTo("linkTrackVars","eVar7,eVar42,events"),o.addMapTo("linkTrackEvents","event42");var a=i.createConfigForRoute(function(t){return"Submit"===t.n&&"Contributions"===t.l});a.addMapTo("eVar9","+1"),a.addMapTo("eVar43","").mapFrom("d",[t.formatters.strToLowerCase]),a.addMapTo("events","event43"),a.addMapTo("linkTrackVars","eVar9,eVar43,events"),a.addMapTo("linkTrackEvents","event43");var s=i.createConfigForRoute(function(t){return"Thumbstrip"===t.l&&"Thumb-dfp"===t.n});s.applyTemplateByName("dfpAdobeDefault"),s.addMapTo("eVar40","").mapFrom("data.adbuzzid"),s.addMapTo("eVar56","").mapFrom(function(t){return this.utils.get(t,"data.adtitle","")+"|"+this.utils.get(t,"data.adimageurl","").replace(/^(https?|ftp):\/\/[^\/]*?buzzfee?d.com\/static\//,"")},[t.formatters.strToLowerCase]),s.addMapTo("linkTrackVars","eVar52,eVar51,eVar56,eVar40,eVar50,events"),s.addMapTo("linkTrackEvents","event50,event56,event51"),s.addMapTo("events","event50,event56,event51");var u=i.createConfigForRoute(function(t){return-1!==t.n.indexOf("-dfp")&&"Username-dfp"!==t.n});u.applyTemplateByName("dfpAdobeDefault"),u.addMapTo("linkTrackVars","eVar52,eVar51,eVar50,events"),u.addMapTo("linkTrackEvents","event50,event51"),u.addMapTo("events","event50,event51");var c=i.createConfigForRoute(function(t){return"Exit-Link"===t.n});c.addMapTo("eVar54","").mapFrom(function(t){return this.utils.get(t,"data.url","").replace(/^(https?|ftp):\/\//,"").replace(/#(.*)/,"")},[t.formatters.strToLowerCase]),c.addMapTo("eVar53","").mapFrom("data.anchorDesc",[t.formatters.strToLowerCase]),c.addMapTo("linkTrackVars","eVar54,eVar53,events"),c.addMapTo("linkTrackEvents","event53"),c.addMapTo("events","event53");var d=i.createConfigForRoute(function(t){return"CMS"===t.l&&"Publish-Now"===t.d});d.addMapTo("eVar10","+1"),d.addMapTo("events","event45"),d.addMapTo("linkTrackVars","eVar10,events"),d.addMapTo("linkTrackEvents","event45");var l=i.createConfigForRoute(function(t){return"Login"===t.n&&"Account-Set-Up"===t.d});l.addMapTo("events","event5"),l.addMapTo("linkTrackVars","events"),l.addMapTo("linkTrackEvents","event5");var p=i.createConfigForRoute(function(t){return"Login"===t.n&&"Sign-Up"===t.d});p.addMapTo("events","event1"),p.addMapTo("linkTrackVars","events"),p.addMapTo("linkTrackEvents","event1");var f=i.createConfigForRoute(function(t){return"Login"===t.n&&"Sign-Up-FB"===t.d});f.addMapTo("events","event2"),f.addMapTo("linkTrackVars","events"),f.addMapTo("linkTrackEvents","event2");var h=i.createConfigForRoute(function(t){return"Login"===t.n&&("Sign-In-FB"===t.d||"Sign-In-Google"===t.d||"Sign-In"===t.d)});h.addMapTo("eVar3","").mapFrom("data.platform"),h.addMapTo("events","event3"),h.addMapTo("linkTrackVars","eVar3,events"),h.addMapTo("linkTrackEvents","event3");var g=i.createConfigForRoute(function(t){return"Login"===t.n&&"Newsletter"===t.d});g.addMapTo("events","event4"),g.addMapTo("linkTrackVars","events"),g.addMapTo("linkTrackEvents","event4");var v=i.createDefaultConfig();v.addMapTo("eVar52","").mapFrom("data.url",[t.formatters.strToLowerCase]),v.addMapTo("eVar51","").mapFrom(function(t){var e=""!==t.d?t.d:"(no description)";return-1!==t.n.indexOf("Video-")&&t.data.videoUrl&&(e=t.data.videoUrl.replace(/^(https?|ftp):\/\/(www\.)?/,"").replace(/\?.*/,"")),t.l+"|"+t.n+"|"+e}),v.addMapTo("linkTrackVars","eVar52,eVar51,events"),v.addMapTo("linkTrackEvents","event51"),v.addMapTo("events","event51");var m=t.getOrCreateMap("track/search",{});m.addMapTo("linkTrackVars","eVar58,prop59,events"),m.addMapTo("linkTrackEvents","event58"),m.addMapTo("eVar58","").mapFrom("data.keywords",[t.formatters.strToLowerCase,t.formatters.strCutTo255Characters]),m.addMapTo("prop59","").mapFrom("data.resultsCount"),m.addMapTo("events","event58");var b=t.getOrCreateRouter("track/quiz",{});t.addUtility("getAnswerStr",function(t){return t.data?t.data.quizId+"|"+t.data.questionId+"|"+t.data.answerId:""});var y=b.createConfigForRoute(function(t){return"Answer"===t.n&&"poll"!==t.data.quizType});y.addMapTo("eVar46","").mapFrom(function(t){return this.getAnswerStr(t)},[t.formatters.strToLowerCase]),y.addMapTo("eVar51","").mapFrom(function(t){
return t.l+"|Quiz-Answer|(no description)"}),y.addMapTo("linkTrackVars","eVar46,eVar51,events"),y.addMapTo("linkTrackEvents","event46"),y.addMapTo("events","event46");var _=b.createConfigForRoute(function(t){return"Answer"===t.n&&"poll"===t.data.quizType});_.addMapTo("eVar46","").mapFrom(function(t){return this.getAnswerStr(t)},[t.formatters.strToLowerCase]),_.addMapTo("eVar47","").mapFrom(function(t){return this.getAnswerStr(t)},[t.formatters.strToLowerCase]),_.addMapTo("eVar51","").mapFrom(function(t){return t.l+"|Poll-Answer|(no description)"}),_.addMapTo("linkTrackVars","eVar46,eVar47,eVar51,events"),_.addMapTo("linkTrackEvents","event46,event47"),_.addMapTo("events","event46,event47");var w=b.createConfigForRoute(function(t){return"Complete"===t.n});w.addMapTo("eVar47","").mapFrom(function(t){return t.data?t.data.quizId+"|"+t.data.result:""},[t.formatters.strToLowerCase]),w.addMapTo("eVar51","").mapFrom(function(t){return t.l+"|Quiz-Complete|(no description)"}),w.addMapTo("linkTrackVars","eVar47,eVar51,events"),w.addMapTo("linkTrackEvents","event47"),w.addMapTo("events","event47");var k=t.getOrCreateMap("track/scroll",{});t.addUtility("getEvent",function(t){var e="";switch(t.d){case"25":e="event37";break;case"50":e="event38";break;case"75":e="event39";break;case"100":e="event32"}return e}),k.addMapTo("linkTrackVars","events"),k.addMapTo("linkTrackEvents","").mapFrom(function(t){return this.getEvent(t)}),k.addMapTo("events","").mapFrom(function(t){return this.getEvent(t)})}}()},function(t,e){!function(){"use strict";function e(){var t={LINUX:"Linux",MAC_OS:"MacOs",UNIX:"Unix",UNKNOWN:"Unknown",WINDOWS:"Windows"},e="";return e=-1!==navigator.appVersion.indexOf("Win")?t.WINDOWS:-1!==navigator.appVersion.indexOf("Mac")?t.MAC_OS:-1!==navigator.appVersion.indexOf("X11")?t.UNIX:-1!==navigator.appVersion.indexOf("Linux")?t.LINUX:t.UNKNOWN}t.exports=function(t){var n=t.getOrCreateRouter("track/click"),i=n.createConfigForRoute(function(t){return"Feed"===t.l});i.addMapTo("page_url","").mapFrom("data.page.uri.path",[t.formatters.strToLowerCase]),i.addMapTo("page_type","").mapFrom("data.page.templateType",[t.formatters.strToLowerCase]),i.addMapTo("type","unit_click"),i.addMapTo("source","buzz_web"),i.addMapTo("artifact_location_uid","").mapFrom("data.obj_id",[t.formatters.strToInt]),i.addMapTo("artifact_type","").mapFrom("data.obj_type"),i.addMapTo("artifact_id",null),i.addMapTo("artifact_location_id",null),i.addMapTo("post_category","").mapFrom("data.post_category",[t.formatters.strToLowerCase]),i.addMapTo("variation_id",null),i.addMapTo("client_id","").mapFrom("data.poundId.poundId",[t.formatters.strToInt]),i.addMapTo("os",e()),i.addMapTo("mode").mapFrom(function(t){return t.data.page.platform===this.defs.platform.desktop?"desktop":"mobile"}),i.addMapTo("unit").mapFrom(function(t){return""!==t.l?t.l:""},[t.formatters.strToLowerCase]),i.addMapTo("position").mapFrom(function(t){return""!==t.d?t.d:""},[t.formatters.strToInt]);var r=t.getOrCreateRouter("track/scroll"),o=r.createConfigForRoute(function(t){var e=5,n="dev"===t.data.env||document.location.search.indexOf("bfadebug=true")>-1;return"impression"===t.n&&!this.utils.isUndefined(t.data)&&!this.utils.isUndefined(t.data.obj_id)&&(!this.utils.isUndefined(t.data.poundId)&&!this.utils.isUndefined(t.data.poundId.poundId)&&t.data.poundId.poundId%(1/(e/100))===e||n)});o.addMapTo("page_url","").mapFrom("data.page.uri.path",[t.formatters.strToLowerCase]),o.addMapTo("page_type","").mapFrom("data.page.templateType",[t.formatters.strToLowerCase]),o.addMapTo("type","unit_impression"),o.addMapTo("source","buzz_web"),o.addMapTo("artifact_location_uid","").mapFrom("data.obj_id",[t.formatters.strToInt]),o.addMapTo("artifact_type","").mapFrom("data.obj_type"),o.addMapTo("artifact_id",null),o.addMapTo("artifact_location_id",null),o.addMapTo("post_category","").mapFrom("data.post_category",[t.formatters.strToLowerCase]),o.addMapTo("variation_id",null),o.addMapTo("client_id","").mapFrom("data.poundId.poundId",[t.formatters.strToInt]),o.addMapTo("os",e()),o.addMapTo("mode").mapFrom(function(t){return t.data.page.platform===this.defs.platform.desktop?"desktop":"mobile"}),o.addMapTo("unit").mapFrom(function(t){return""!==t.l?t.l:""},[t.formatters.strToLowerCase]),o.addMapTo("position").mapFrom(function(t){return""!==t.d?t.d:""},[t.formatters.strToInt])}}()},function(t,e){!function(){"use strict";function e(t,e){var n=e.get(t,"data.seedSocialFlags",null);return n?n.seed?"Seed":n.social?"Social":"Unknown":""}function n(t,n){var i=n.get(t,"data.seedSocialFlags",null),r="";i&&(r=i.sodisco?"SoDisco":"NonSoDisco");var o=e(t,n);return r+o}t.exports=function(t){var i=t.getOrCreateRouter("track/page/view"),r=i.createConfigForRoute(function(t){return"buzz"===this.utils.get(t,"data.page.type")});r.addMapTo("seg","").mapFrom(function(t){if(this.utils.has(t,"data.page.post.tags")){var e=this.utils.get(t,"data.page.post.tags").split(",").filter(function(t){return null!==t&&void 0!==t&&""!==t});return e.map(function(t){return"tag:"+t})}}),r.addMapToArray("med","").mapFrom(function(t){return"section:"+this.utils.get(t,"data.page.post.category")}).mapFrom(function(t){return"type:"+(this.utils.get(t,"data.page.post.isPromoted")?"sponsored":"editorial")}).mapFrom(function(t){var e="none";if(this.utils.get(t,"data.page.post.isPromoted")===!0&&this.utils.has(t,"data.page.post.tags")&&t.data.page.post.tags.indexOf("--content-theme")>-1)for(var n,i=/--content-theme-([^,]*),/g;null!==(n=i.exec(t.data.page.post.tags));)e+=n[1]+",";return"theme: "+e}),r.addMapToArray("comp","").mapFrom(function(t){return"username:"+this.utils.get(t,"data.page.post.author")}),r.addMapToArray("adv","").mapFrom(function(t){var e=t.data.user.referrer;if(t.data.user.userAgent){var n=t.data.user.userAgent.toString().toLowerCase();n.match(/fban\/messenger/)||n.match(/fban/)&&!e.match(/m\.facebook/)?e="Facebook":n.match(/twitter/i)?e="Twitter":n.match(/pinterest/i)?e="Pinterest":(e=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],e=e.split(":")[0])}return"socialreferral: "+e}).mapFrom(function(t){var e="mobileapp";switch(t.data.page.platform){case 1:e="desktop";break;case 2:e="mobileweb"}return"platform: "+e}).mapFrom(function(t){return"edition: "+t.data.page.country}),r.addMapToArray("geo","").mapFrom(function(t){if(this.utils.get(t,"data.page.post.isPromoted")){var e=n(t,this.utils);return"sponsored: "+e}}).mapFrom(function(t){if(this.utils.get(t,"data.page.post.isPromoted")){var e=n(t,this.utils);return"sponsored - "+e+": buzzID-"+this.utils.get(t,"data.page.post.id")}}).mapFrom(function(t){return this.utils.get(t,"data.page.post.isPromoted")?"sponsored: buzzID-"+this.utils.get(t,"data.page.post.id"):void 0}),r.addMapToArray("int","").mapFrom(function(t){if(!this.utils.get(t,"data.page.post.isPromoted")){var n=e(t,this.utils);return"editorial - "+n}}).mapFrom(function(t){if(!this.utils.get(t,"data.page.post.isPromoted")){var n=e(t,this.utils);return"editorial - "+n+": buzzID-"+this.utils.get(t,"data.page.post.id")}}).mapFrom(function(t){return this.utils.get(t,"data.page.post.isPromoted")?void 0:"editorial: buzzID-"+this.utils.get(t,"data.page.post.id")}).mapFrom(function(t){if(!this.utils.get(t,"data.page.post.isPromoted")){var n=e(t,this.utils);return"editorial - "+n+": section-"+this.utils.get(t,"data.page.post.category")}}),r.addMapToArray("tpid","").mapFrom("data.poundId.poundId"),r.addMapTo("tp","BUZZ");var o=t.getOrCreateRouter("track/click"),a=o.createConfigForRoute(function(t){return"Share"===t.n});a.addMapToArray("act","").mapFrom(function(t){return"share: "+t.d}).mapFrom(function(t){return"share: "+t.d+" : section-"+this.utils.get(t,"data.page.post.category")}).mapFrom(function(t){var n=this.utils.get(t,"data.page.post.isPromoted")?"sponsored":"editorial",i=e(t,this.utils);return"share: "+t.d+" : "+n+"-"+i});var s=o.createConfigForRoute(function(t){return"Bookmark"===t.n});s.addMapTo("act","bookmark");var u=t.getOrCreateRouter("track/quiz"),c=u.createConfigForRoute(function(t){return"Answer"===t.n});c.addMapTo("act","AnsweredQuiz");var d=u.createConfigForRoute(function(t){return"Complete"===t.n});d.addMapTo("act","CompletedQuiz")}}()},function(t,e){!function(){"use strict";function e(t){var e={trackingBehavior:t.defs.trackingBehavior.byDefault,extTrackerGlobalName:"fbq",tracker:null,configMapsDelegate:null,extFilesPaths:[],facebookId:"224284281076687",trackingUrl:"https://www.facebook.com/tr"};this._inited=!1,this._active=!1,this.settings=t.utils.defaultsDeep(t.settings||{},e),this.generalSettings=t.getGeneralSettings();var n=this;return this.activate=function(){if(!n._active&&n._inited){if(!this.tracker&&this.generalSettings.mode===t.defs.bfaMode.prod){if(!window[this.settings.extTrackerGlobalName])return void t.log.warn("External Facebook lib is still not loaded");this.tracker=window[this.settings.extTrackerGlobalName],this.tracker("init",this.settings.facebookId),t.log.info("External Facebook lib is loaded")}this.page&&n.user?(t.log.info("Active"),this._active=!0,t.moduleActive.dispatch()):t.log.warn("External Lotame lib is still not ready to track.")}},t.onGeneralSettingsChange(function(){n.generalSettings=t.getGeneralSettings()},this),t.onPageReady(function(){n.page=t.getPageInfo(),n.activate()},this),t.onUserReady(function(){n.user=t.getUserInfo(),n.activate()},this),this.getEventInfo=function(e,n,i){var r=t.tryConvertToEventInfo(e,n,i);return t.canTrackEvent(t.moduleId,this.settings.trackingBehavior,r)?(r.data.page=this.page,r.data.user=this.user,r):(t.log.info(t.moduleId+" cannot track current event. Type: "+n+"; Name: "+i+";"),null)},this._trackDefault=function(e,n){var i="";if("fbEventName"in n&&(i=n.fbEventName,delete n.fbEventName),null!==n&&t.utils.keys(n).length>0){switch(this.generalSettings.mode){case t.defs.bfaMode.prod:this.tracker("trackCustom",i,n);break;default:t.debugTracker.trackEvent(e,n)}t.log.info("Event successfully tracked. Type: "+e.t+"; Name: "+e.n+"; Location: "+e.l+"; Desc: "+e.d+";")}else t.log.info("Event won't be tracked to Lotame, because object is empty after mapping. Type: "+e.t+"; Name: "+e.n+"; Location: "+e.l+"; Desc: "+e.d+";")},this._trackPage=function(e){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackPage,this,e),this);var n=this.getEventInfo(e,"page","view");if(!t.mapper.isExists("track/page/view"))return void t.log.error("Mapping for `track/page/view` doesn't exist");var i=t.mapper.map("track/page/view",n,{});this._trackDefault(n,i)},t.subOn("track/page/view",this._trackPage,this),this._trackClick=function(e,n){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackClick,this,e,n),this);var i=this.getEventInfo(e,"click",n.eventName);if(!t.mapper.isExists("track/click"))return void t.log.error("Mapping for `track/click` doesn't exist");var r=t.mapper.map("track/click",i,{});this._trackDefault(i,r)},t.subOn("track/click/{eventName}",this._trackClick,this),this._trackQuiz=function(e,n){if(!this._active)return void t.moduleActive.addOnce(t.utils.bind(this._trackQuiz,this,e,n),this);var i=this.getEventInfo(e,"quiz",n.eventName);if(!t.mapper.isExists("track/quiz"))return void t.log.error("Mapping for `track/quiz` doesn't exist");var r=t.mapper.map("track/quiz",i,{});this._trackDefault(i,r)},t.subOn("track/quiz/{eventName}",this._trackQuiz,this),{init:function(){return t.utils.isFunction(n.settings.configMapsDelegate)?(n.settings.configMapsDelegate(t.mapper),n.generalSettings.mode===t.defs.bfaMode.prod?(n.tracker=n.settings.tracker,!n.tracker&&!window[n.extTrackerGlobalName]&&n.settings.extFilesPaths&&n.settings.extFilesPaths.length>0&&(t.log.info("loading scripts"),t.domi.onDomReady(function(){t.utils.forEach(n.settings.extFilesPaths,function(e){t.domi.loadScript({src:e},n.activate,null,n)})},n))):n.tracker={},n._inited=!0,t.log.info("inited"),t.moduleInited.dispatch(),void n.activate()):void t.log.error("Value of configMapsDelegate (in settings) property must be a `function` that have to set up mapping")},isInited:function(){return n._inited},isActive:function(){return n._active}}}e.defaultId="FacebookAudienceIntegration",e.require=["logger","domi","pageInfo","userInfo","mapper","trackingUtils","generalSettings","debugTracker"],t.exports=e}()},function(t,e){!function(){"use strict";t.exports=function(t){var e=t.getOrCreateRouter("track/page/view"),n=e.createConfigForRoute(function(t){return"buzz"===this.utils.get(t,"data.page.type")});n.addMapTo("fbEventName","PageView"),n.addMapTo("tag","").mapFrom(function(t){if(this.utils.has(t,"data.page.post.tags")){var e=this.utils.get(t,"data.page.post.tags").split(",").filter(function(t){return!!t});return e.join(",")}}),n.addMapTo("section","").mapFrom(function(t){return this.utils.get(t,"data.page.post.category")}),n.addMapTo("theme","").mapFrom(function(t){var e="none";if(this.utils.get(t,"data.page.post.isPromoted")===!0&&this.utils.has(t,"data.page.post.tags")&&t.data.page.post.tags.indexOf("--content-theme")>-1)for(var n,i=/--content-theme-([^,]*),/g;null!==(n=i.exec(t.data.page.post.tags));)e+=n[1]+",";return e}),n.addMapTo("username","").mapFrom(function(t){return this.utils.get(t,"data.page.post.author")}),n.addMapTo("socialreferral","").mapFrom(function(t){var e=t.data.user.referrer;if(t.data.user.userAgent){var n=t.data.user.userAgent.toString().toLowerCase();n.match(/fban\/messenger/)||n.match(/fban/)&&!e.match(/m\.facebook/)?e="Facebook":n.match(/twitter/i)?e="Twitter":n.match(/pinterest/i)?e="Pinterest":(e=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],e=e.split(":")[0])}return e});var i=t.getOrCreateRouter("track/click"),r=i.createConfigForRoute(function(t){return"Share"===t.n});r.addMapTo("fbEventName","Share"),r.addMapTo("share","").mapFrom(function(t){return t.d});var o=t.getOrCreateRouter("track/quiz"),a=o.createConfigForRoute(function(t){return"Complete"===t.n});a.addMapTo("fbEventName","CompletedQuiz"),a.addMapTo("CompletedQuiz","true")}}()},function(t,e,n){!function(){"use strict";t.exports.Core=n(193)}()},function(t,e,n){(function(t){!function(){"use strict";function e(){this._modules={},this._plugins={},this._instances={},this._router=new o,this.inited=new r,this.active=new r,this.crashed=new r,this._inited=!1,this._active=!1,this._crashed=!1,this.crashed.add(function(){this._crashed=!0,this.log.info("CRASHED")},this,Number.MAX_VALUE);var t=this;this._router.sub("bfa/subscribe/{action}/{eventName}",this._subscribe,this,{action:["add","addOnce","remove"],eventName:function(e){return t.utils.isString(e)&&e.length>0}}),this.inited.add(function(){this._inited=!0,this.log.info("inited")},this,Number.MAX_VALUE),this.active.add(function(){this._active=!0,this.log.info("active")},this,Number.MAX_VALUE),this.Sandbox=function(t,e,n,i){return this.instanceId=e,this.moduleInited=new r,this.moduleActive=new r,this.fillModuleRoute=function(t){return"module/"+e+"/"+t},this.subOn=function(e,n,i){t._router.sub(e,n,i)},this.settings=n||{},this.moduleId=i,this.utils=t.utils,this.defs=t.defs,this},this.construct.dispatch(this)}var i=n(7),r=i.Signal,o=n(195),a=n(160);e.prototype.log={error:function(){},log:function(){},info:function(){},warn:function(){},enabled:function(){}},e.prototype.construct=new r,e.prototype.utils=i,e.prototype.defs=a,e.prototype._subscribe=function(t,e){return this.utils.isPlainObject(t)&&this.utils.isPlainObject(e)&&this[e.eventName]instanceof r&&this.utils.isFunction(t.fn)&&t.context&&this[e.eventName][e.action](t.fn,t.context),this},e.prototype.registerModule=function(t,e,n){if(this._inited===!0)return this.log.warn("You can't register module after activation"),this;e=e||{};var i=this.utils.checkType("function",t,"module")||this.utils.checkType("object",e,"settings");if(i)throw new TypeError(i);if(!this.utils.isString(n)&&this.utils.isString(t.defaultId)&&(n=t.defaultId),!this.utils.isString(n)||0===n.length)throw new TypeError("moduleId has to be specified (as third argument or as `id` property of module) and must be not empty string");return this.utils.has(this._modules,n)?(this.log.warn("module "+n+" was already registered"),this):(this.push("module/"+n+"/added"),this._modules[n]={Creator:t,settings:e,id:n},this)},e.prototype.plugin=function(t,e,n){if(this._inited===!0)return this.log.warn("You can't add plugins after activation"),this;e=e||{};var i=this.utils.checkType("function",t,"plugin")||this.utils.checkType("object",e,"settings");if(i)throw new TypeError(i);if(!this.utils.isString(n)&&this.utils.isString(t.defaultId)&&(n=t.defaultId),!this.utils.isString(n)||0===n.length)throw new TypeError("pluginId has to be specified (as third argument or as `id` property of plugin) and must be not empty string");return this.utils.has(this._plugins,n)?(this.log.warn("plugin "+n+" was already registered"),this):(this._plugins[n]={Creator:t,instance:null,settings:e,id:n},this.log.warn("plugin "+n+" registered"),this)},e.prototype.activatePlugins=function(){function t(r,o){i.utils.isArray(o)||(o=[]),o.push(r),n[r]=!0,i.utils.forEach(i.utils.get(i._plugins[r],"Creator.require",[]),function(e){if(i.utils.isUndefined(i._plugins[e]))throw new Error("Can't resolve \""+e+'" for "'+r+'" plugin');if(o.indexOf(e)>=0)throw new Error('Circular dependency "'+e+'" is required by "'+r+'" plugin: '+o.join(" -> "));n[e]||t(e,o.slice(0))},i),e.indexOf(r)<0&&e.push(r)}if(this._crashed===!0)return void this.log.warn("Plugins activation interrupted");var e=[],n={},i=this;try{this.utils.forOwn(this._plugins,function(e){t(e.id)},this);for(var r=0;r<e.length;r++){var o=e[r];null===this._plugins[o].instance?(this._plugins[o].instance=new this._plugins[o].Creator(this,this._plugins[o].settings),this.push("plugin/"+o+"/added"),this.log.info("Plugin "+o+" added successfully")):this.log.info("Plugin "+o+" already added and activated")}}catch(a){return this.log.error(a),this.log.warn("Plugins activation interrupted"),void this.crashed.dispatch()}},e.prototype.activate=function(){if(this._inited===!0)return void this.log.warn("Already initialized");if(this.activatePlugins(),this._crashed===!0)return void this.log.warn("Activation interrupted");this.log.info("Modules activation started");var e=this;this.utils.forOwn(this._modules,function(e){var n=e.Creator.defaultId,i=!1;this.utils.isString(e.settings.instanceId)&&(n=e.settings.instanceId);var r=new this.Sandbox(this,n,e.settings,e.Creator.defaultId);if(this.utils.isArray(e.Creator.require)&&e.Creator.require.length>0)for(var o=0;o<e.Creator.require.length;o++){var a=e.Creator.require[o];if(!this.utils.has(this._plugins,a)||!this.utils.has(this._plugins[a].instance,"modifySBInstance")){i="Module "+e.Creator.defaultId+" require plugin "+a;break}this._plugins[a].instance.modifySBInstance(r)}if(!i){var s=new e.Creator(r);this.utils.has(s,"init")?(this._instances[n]={module:s,sandbox:r},this.push("module/"+n+"/added"),this.log.info("Module "+n+" added successfully")):i="Constructor of module "+t.defaultId+" returned not valid object"}i&&(this.log.error(i),this.log.warn("Instance "+n+" of module "+t.defaultId+" is not added properly"))},this);var n=this.utils.keys(this._instances).length,i=this.utils.after(n,function(){e.inited.dispatch(e)}),r=this.utils.after(n,function(){e.active.dispatch(e)});this.utils.forOwn(this._instances,function(t){t.sandbox.moduleInited.addOnce(i),t.sandbox.moduleActive.addOnce(r),this.utils.defer(t.module.init)},this)},e.prototype.push=function(){this._router.pub.apply(this._router,arguments)},t.exports=e}()}).call(e,n(194)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){!function(){"use strict";function e(){this._router=i.create(),this._routes={},this._router.normalizeFn=i.NORM_AS_OBJECT,this._router.ignoreState=!0,this._router.greedy=!0,this._routes=[]}var i=n(196),r=n(7);e.prototype.pub=function(t){if(r.isString(t)){var e,n=r.slice(arguments,1);1===n.length?e=n[0]:n.length>1&&(e=n),this._router.parse(t,[e])}return this},e.prototype.modifySubCB=function(t,e,n){return r.startsWith(t,"track/")?function(){e.apply(n,r.cloneDeep(Array.prototype.slice.call(arguments)))}:e},e.prototype.sub=function(t,e,n,i,o){if(!r.isString(t)||r.isEmpty(t))return this.log.error("`route` must be not empty string"),this;if(!r.isFunction(e))return this.log.error("`cb` must be a function"),this;if(i&&!r.isObject(i))return this.log.error("`rules` must be an object or not specified"),this;var a=this.modifySubCB(t,e,n),s=o?"addOnce":"add";if(r.has(this._routes,t)||i)if(i){var u=this._router.addRoute(t);u.rules=i,u.matched[s](a,n)}else this._routes[t].matched[s](a,n);else this._routes[t]=this._router.addRoute(t),this._routes[t].matched[s](a,n);return this},e.prototype.log={error:function(){},log:function(){},info:function(){},warn:function(){},enabled:function(){}},t.exports=e}()},function(t,e,n){var i,r,o;/** @license
	 * crossroads <http://millermedeiros.github.com/crossroads.js/>
	 * Author: Miller Medeiros | MIT License
	 * v0.12.2 (2015/07/31 18:37)
	 */
!function(){var a=function(t){function e(t,e){if(t.indexOf)return t.indexOf(e);for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function n(t,n){var i=e(t,n);-1!==i&&t.splice(i,1)}function i(t,e){return"[object "+e+"]"===Object.prototype.toString.call(t)}function r(t){return i(t,"RegExp")}function o(t){return i(t,"Array")}function a(t){return"function"==typeof t}function s(t){var e;return e=null===t||"null"===t?null:"true"===t?!0:"false"===t?!1:t===h||"undefined"===t?h:""===t||isNaN(t)?t:parseFloat(t)}function u(t){for(var e=t.length,n=[];e--;)n[e]=s(t[e]);return n}function c(t,e){for(var n,i,r,a,u=(t||"").replace("?","").split("&"),c=-1,d={};i=u[++c];)n=i.indexOf("="),a=i.substring(0,n),r=decodeURIComponent(i.substring(n+1)),e!==!1&&(r=s(r)),a in d?o(d[a])?d[a].push(r):d[a]=[d[a],r]:d[a]=r;return d}function d(){this.bypassed=new t.Signal,this.routed=new t.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function l(e,n,i,o){var a=r(e),s=o.patternLexer;this._router=o,this._pattern=e,this._paramsIds=a?null:s.getParamIds(e),this._optionalParamsIds=a?null:s.getOptionalParamsIds(e),this._matchRegexp=a?e:s.compilePattern(e,o.ignoreCase),this.matched=new t.Signal,this.switched=new t.Signal,n&&this.matched.add(n),this._priority=i||0}var p,f,h;return f=""===/t(.+)?/.exec("t")[1],d.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new d},addRoute:function(t,e,n){var i=new l(t,e,n,this);return this._sortedInsert(i),i},removeRoute:function(t){n(this._routes,t),t._destroy()},removeAllRoutes:function(){for(var t=this.getNumRoutes();t--;)this._routes[t]._destroy();this._routes.length=0},parse:function(t,e){if(t=t||"",e=e||[],this.ignoreState||t!==this._prevMatchedRequest&&t!==this._prevBypassedRequest){var n,i=this._getMatchedRoutes(t),r=0,o=i.length;if(o)for(this._prevMatchedRequest=t,this._notifyPrevRoutes(i,t),this._prevRoutes=i;o>r;)n=i[r],n.route.matched.dispatch.apply(n.route.matched,e.concat(n.params)),n.isFirst=!r,this.routed.dispatch.apply(this.routed,e.concat([t,n])),r+=1;else this._prevBypassedRequest=t,this.bypassed.dispatch.apply(this.bypassed,e.concat([t]));this._pipeParse(t,e)}},_notifyPrevRoutes:function(t,e){for(var n,i=0;n=this._prevRoutes[i++];)n.route.switched&&this._didSwitch(n.route,t)&&n.route.switched.dispatch(e)},_didSwitch:function(t,e){for(var n,i=0;n=e[i++];)if(n.route===t)return!1;return!0},_pipeParse:function(t,e){for(var n,i=0;n=this._piped[i++];)n.parse(t,e)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(t){var e=this._routes,n=e.length;do--n;while(e[n]&&t._priority<=e[n]._priority);e.splice(n+1,0,t)},_getMatchedRoutes:function(t){for(var e,n=[],i=this._routes,r=i.length;(e=i[--r])&&((!n.length||this.greedy||e.greedy)&&e.match(t)&&n.push({route:e,params:e._getParamsArray(t)}),this.greedyEnabled||!n.length););return n},pipe:function(t){this._piped.push(t)},unpipe:function(t){n(this._piped,t)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},p=new d,p.VERSION="0.12.2",p.NORM_AS_ARRAY=function(t,e){return[e.vals_]},p.NORM_AS_OBJECT=function(t,e){return[e]},l.prototype={greedy:!1,rules:void 0,match:function(t){return t=t||"",this._matchRegexp.test(t)&&this._validateParams(t)},_validateParams:function(t){var e,n=this.rules,i=this._getParamsObject(t);for(e in n)if("normalize_"!==e&&n.hasOwnProperty(e)&&!this._isValidParam(t,e,i))return!1;return!0},_isValidParam:function(t,n,i){var s=this.rules[n],u=i[n],c=!1,d=0===n.indexOf("?");return null==u&&this._optionalParamsIds&&-1!==e(this._optionalParamsIds,n)?c=!0:r(s)?(d&&(u=i[n+"_"]),c=s.test(u)):o(s)?(d&&(u=i[n+"_"]),c=this._isValidArrayRule(s,u)):a(s)&&(c=s(u,t,i)),c},_isValidArrayRule:function(t,n){if(!this._router.ignoreCase)return-1!==e(t,n);"string"==typeof n&&(n=n.toLowerCase());for(var i,r,o=t.length;o--;)if(i=t[o],r="string"==typeof i?i.toLowerCase():i,r===n)return!0;return!1},_getParamsObject:function(t){for(var n,i,r=this._router.shouldTypecast,o=this._router.patternLexer.getParamValues(t,this._matchRegexp,r),a={},u=o.length;u--;)i=o[u],this._paramsIds&&(n=this._paramsIds[u],0===n.indexOf("?")&&i&&(a[n+"_"]=i,i=c(i,r),o[u]=i),f&&""===i&&-1!==e(this._optionalParamsIds,n)&&(i=void 0,o[u]=i),a[n]=i),a[u]=i;return a.request_=r?s(t):t,a.vals_=o,a},_getParamsArray:function(t){var e,n=this.rules?this.rules.normalize_:null;return n=n||this._router.normalizeFn,e=n&&a(n)?n(t,this._getParamsObject(t)):this._getParamsObject(t).vals_},interpolate:function(t){var e=this._router.patternLexer.interpolate(this._pattern,t);if(!this._validateParams(e))throw new Error("Generated string doesn't validate against `Route.rules`.");return e},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},d.prototype.patternLexer=function(){function t(){var t,e;for(t in h)h.hasOwnProperty(t)&&(e=h[t],e.id="__CR_"+t+"__",e.save="save"in e?e.save.replace("{{id}}",e.id):e.id,e.rRestore=new RegExp(e.id,"g"))}function e(t,e){var n,i=[];for(t.lastIndex=0;n=t.exec(e);)i.push(n[1]);return i}function n(t){return e(f,t)}function i(t){return e(h.OP.rgx,t)}function r(t,e){return t=t||"",t&&(b===g?t=t.replace(l,""):b===m&&(t=t.replace(p,"")),t=a(t,"rgx","save"),t=t.replace(d,"\\$&"),t=a(t,"rRestore","res"),b===g&&(t="\\/?"+t)),b!==v&&(t+="\\/?"),new RegExp("^"+t+"$",e?"i":"")}function a(t,e,n){var i,r;for(r in h)h.hasOwnProperty(r)&&(i=h[r],t=t.replace(i[e],i[n]));return t}function s(t,e,n){var i=e.exec(t);return i&&(i.shift(),n&&(i=u(i))),i}function c(t,e){if(e=e||{},"string"!=typeof t)throw new Error("Route pattern should be a string.");var n=function(t,n){var i;if(n="?"===n.substr(0,1)?n.substr(1):n,null!=e[n]){if("object"==typeof e[n]){var r,a=[];for(var s in e[n])if(r=e[n][s],o(r))for(var u in r)"[]"==s.slice(-2)?a.push(encodeURI(s.slice(0,-2))+"[]="+encodeURI(r[u])):a.push(encodeURI(s+"="+r[u]));else a.push(encodeURI(s+"="+r));i="?"+a.join("&")}else i=String(e[n]);if(-1===t.indexOf("*")&&-1!==i.indexOf("/"))throw new Error('Invalid value "'+i+'" for segment "'+t+'".')}else{if(-1!==t.indexOf("{"))throw new Error("The segment "+t+" is required.");i=""}return i};return h.OS.trail||(h.OS.trail=new RegExp("(?:"+h.OS.id+")+$")),t.replace(h.OS.rgx,h.OS.save).replace(f,n).replace(h.OS.trail,"").replace(h.OS.rRestore,"/")}var d=/[\\.+*?\^$\[\](){}\/'#]/g,l=/^\/|\/$/g,p=/\/$/g,f=/(?:\{|:)([^}:]+)(?:\}|:)/g,h={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},g=1,v=2,m=3,b=g;return t(),{strict:function(){b=v},loose:function(){b=g},legacy:function(){b=m},getParamIds:n,getOptionalParamsIds:i,getParamValues:s,compilePattern:r,interpolate:c}}(),p};r=[n(157)],i=a,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o))}()}]);