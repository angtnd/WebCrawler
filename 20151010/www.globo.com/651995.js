/*
 Admotion Copyright ÃÂ© 2001-2015 Banner v3.3
 <dyd-1237>
*/
(function(a){a.Debug.polite=-1!=document.cookie.indexOf("debugPolite=true");a.Debug.backup=-1!=document.cookie.indexOf("debugBackup=true");a.Debug.polite&&(a.Event.isPageLoaded=function(){return!1});a.HTMLPiece=function(f,g){a.Piece.apply(this,arguments);var c=this,b=new a.Element(g,"iframe","htmlpiece"),l=new a.EventManager(this),e=b.getNode(),q,u=g.ownerDocument.defaultView?g.ownerDocument.defaultView:g.ownerDocument.parentWindow,m,r={},t={},k={},v=a.Utility.map({},this),n=function(h){m.postMessage(a.Utility.toJSON(h),
"*")},p=function(){n(new a.PostingData(a.PostingDataType.Event,"orientationchange",window.orientation))},w={load:!0,SDKReady:!0,orientationchange:!1};l.add("SDKReady",function(){n(new a.PostingData(a.PostingDataType.Command,"setVars",c.adVars));p()});a.Event.add(window,"orientationchange",p);var x=function(h){var d=a.Utility.fromJSON(h.data);if(h.source==m)switch(d.type){case a.PostingDataType.Event:console.log("PostMessage received: type %s, message: %s",d.type,d.message);l.fire(d.message,!!w[d.message],
d.args);break;case a.PostingDataType.Command:a.Piece.sendCommand(c,{name:d.message,arg:d.args,nodeId:b.getNodeID()});break;default:console.warn("Unknown data type: %s, message: %s",d.type,d.message)}};this.setOnLoad=function(a){l.add("load",a)};this.setSize=function(a,d){k.width=a+"px";k.height=d+"px";c.adVars.width=a;c.adVars.height=d;b.setSize(a,d)};this.getSize=b.getSize;this.setPosition=function(a,d,c){b.setPosition(a,d,c)};this.getPosition=function(){return b.getPosition()};this.insertFirst=
function(h){q=h;a.Event.add(u,"message",x);c.setAttributes({allowTransparency:"true",frameBorder:0,scrolling:"no"});e.style.borderStyle="none";b.insertFirst(q);c.hide();m=e.contentWindow;-1==f.indexOf("?")&&(e.src=f+a.Utility.buildQueryString(c.adVars,!0))};this.remove=function(){a.Event.remove(window,"orientationchange",p);b.remove()};this.getNode=b.getNode;this.getContainerNodeID=b.getNodeID;this.setClip=function(a){v.setClip(a);b.getNode().style.clip=a};this.hide=function(){b.getNode()&&"0px"==
b.getNode().style.width||(a.Utility.map(k,b.getNode().style),b.getNode().style.width="0px",b.getNode().style.height="0px")};this.show=function(){b.getNode()&&"0px"!=b.getNode().style.width||a.Utility.map(b.getNode().style,k)};this.setAttributes=function(b){a.Utility.map(t,b)};this.setRenderStyle=function(b){a.Utility.map(r,b)};this.postMessage=n;this.sendMessage=function(b,d){c.postMessage(new a.PostingData(a.PostingDataType.Command,b,d))};this.render=function(){a.Utility.foreach(t,function(a,b){e.setAttribute(a,
b)});a.Utility.map(e.style,r);c.show();c.adVars.instanceCount=c.getInstanceCount(f)};this.canSetTrackers=!0};a.Main=function(f,g){var c=new a.FormatManager(f,f.creativeFiles,g.polite);c.positionManager.setDefaultPosition("banner");c.mainHandler=function(b,c,e){return new (e.selfParams.floating||e.selfParams.fullscreen?a.FloatingBanner:a.Banner)(e)};c.start()};a.Start()})(AdmotionMod.getCore());
