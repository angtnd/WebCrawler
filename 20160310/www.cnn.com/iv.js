var rubiconproject=rubiconproject||{};rubiconproject.ads=rubiconproject.ads||{},rubiconproject.ads.sizes={1:"468x60",2:"728x90",3:"234x60",4:"88x31",5:"120x90",6:"120x60",7:"125x125",8:"120x600",9:"160x600",10:"300x600",11:"180x150",12:"120x240",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",18:"180x150",19:"300x100",21:"468x728",22:"120x160",23:"120x90",24:"160x90",25:"180x90",26:"200x90",27:"468x15",28:"728x15",29:"300x850",31:"980x120",32:"250x360",33:"180x500",34:"580x400",35:"980x150",36:"140x350",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",45:"480x75",46:"480x60",47:"240x37",48:"300x300",49:"336x280",50:"1024x90",51:"768x90",52:"1004x768",53:"1024x768",54:"300x1050",55:"970x90",56:"900x250",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",62:"980x50",63:"1000x40",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",69:"480x400",70:"1100x210",71:"1100x210",72:"320x320",73:"320x160",74:"1250x240",75:"1250x250",76:"265x720",77:"265x600",78:"980x240",79:"980x300",80:"980x400",81:"450x150",82:"300x75",83:"480x300",84:"320x480",85:"300x120",86:"300x250",87:"950x90",88:"300x600",89:"300x1200",90:"548x150",91:"300x250",92:"728x90",93:"160x600",94:"970x310",95:"970x100",96:"970x210",97:"467x120",98:"1000x120"},rubiconproject.ads.ivErrors={NONE:0,IFRAME:1,AD_NOT_FOUND:2,JS_ERROR:3,REGISTERED_ALREADY:4},rubiconproject.ads.ivLogTypes={PIXEL:"pxl",AJAX:"ajax"},rubiconproject.ads.lookupStrategy={ID_LOOKUP:"idl",DOM_SEARCH:"dsr"},rubiconproject.ads.iframeTypes={NONE:0,SINGLE:1,MULTIPLE:2,FRIENDLY:3},rubiconproject.ads.slots=rubiconproject.ads.slots||[],rubiconproject.ads.iv=function(t,e){this.log=t.log,this.size=this.parseSize(t.context.sizeId,t.context.width,t.context.height),this.sampleTm=t.sampleTm?t.sampleTm:50,this.segmentSize=t.segmentSize?t.segmentSize:25,this.segments=100/this.segmentSize,this.context=t.context,this.logType=t.logType?t.logType:rubiconproject.ads.ivLogTypes.PIXEL,this.ifrMatchDomain=t.ifrMatchDomain?t.ifrMatchDomain:!1,this.pageFocus=!0,this.resultLogger=t.resultLogger,this.context.version=this.parseVersion("0.42"),this.bcb_ctx=e,this.shouldLog=!0,this.adId=t.context.adId,this.lookupStrategy=rubiconproject.ads.lookupStrategy.DOM_SEARCH,this.iframeType=rubiconproject.ads.iframeTypes.NONE,this.result={sessionTm:0,pageIv:0,adPartialIv:0,adHover:0,cumIv:[],conIv:[]},this.conIv={segment:0,tm:0},this.error=rubiconproject.ads.ivErrors.NONE,this.errorDesc=""},rubiconproject.ads.iv.prototype={initialize:function(){try{this.attachLoadEvent();var t=document.getElementsByTagName("script");t.length>0&&(this.script=t[t.length-1])}catch(e){this.setError(rubiconproject.ads.ivErrors.JS_ERROR,e)}return this},start:function(){try{var t=this;if(this.attachUnloadEvent(),this.createPartialIvSegments(this.segmentSize),this.iframeType=this.ifrType(),window!=top&&this.iframeType!=rubiconproject.ads.iframeTypes.FRIENDLY)return rubiconproject.ads.ivErrors.IFRAME;var e=t.locateAd();if(e!=null&&(t.ad=e.ad,t.lookupStrategy=e.strategy),t.ad==null)return rubiconproject.ads.ivErrors.AD_NOT_FOUND;for(var i in rubiconproject.ads.slots)if(rubiconproject.ads.slots[i].getAd()===t.ad)return rubiconproject.ads.ivErrors.REGISTERED_ALREADY;return this.adPosition=this.getAdPosition(this.ad),this.adSize=this.getAdSize(this.ad),this.attachMouseHover(this.ad),this.attachMouseClick(this.ad),this.attachPageBlur(top),t.tmr=setInterval(function(){t.evaluate()},this.sampleTm),rubiconproject.ads.ivErrors.NONE}catch(s){return this.reset(this.tmr),rubiconproject.ads.ivErrors.JS_ERROR}},locateAd:function(){var t=this.locateAdById();return t!=null?{ad:t,strategy:rubiconproject.ads.lookupStrategy.ID_LOOKUP}:(t=this.locateAdByDomSearch(),t!=null?{ad:t,strategy:rubiconproject.ads.lookupStrategy.DOM_SEARCH}:void 0)},locateAdById:function(){return this.adId?document.getElementById(this.adId):null},locateAdByDomSearch:function(){var t,e=this.script;if(this.script!==null&&e.parentNode!=null){if(this.isFullMatch(this.getAdSize(e.parentNode)))return e.parentNode;t=this.locateAdRelative(e,function(t){return t.previousSibling}),t==null&&(t=this.locateAdRelative(e,function(t){return t.nextSibling}))}return t},locateAdRelative:function(t,e){var i,s,r,o=t;while((o=e(o))!=null){if(i=this.getAdSize(o),this.isFullMatch(i))return o;if(this.isPartialMatch(i)&&o.children!==null){for(s=0;o.children.length>s;s++)if(r=o.children[s],this.isFullMatch(this.getAdSize(r)))return r;return o}}},isFullMatch:function(t){return this.size&&t!=null&&t.x==this.size.x&&t.y==this.size.y},isPartialMatch:function(t){return this.size&&t!=null&&t.x>=this.size.x},evaluate:function(){try{if(this.result.sessionTm+=this.sampleTm,this.pageFocus){this.result.pageIv+=this.sampleTm;var t,e=this.getAdIVData();t=this.findPartialSegment(e.areaIV,this.segmentSize),0>t||(this.result.cumIv[t]+=this.sampleTm),this.conIv.segment>=0&&this.conIv.tm>this.result.conIv[this.conIv.segment]&&(this.result.conIv[this.conIv.segment]=this.conIv.tm),this.conIv.segment!=t?(this.conIv.segment=t,this.conIv.tm=0):this.conIv.tm+=this.sampleTm,this.mouseOver&&(this.result.adHover+=this.sampleTm)}this.printResults()}catch(i){this.setError(rubiconproject.ads.ivErrors.JS_ERROR,i)}},getAdIVData:function(){if(!this.adPosition||!this.adSize)return{areaIV:0};var t,e=this.adPosition,i=this.adSize,s=this.getPagePosition(),r=this.getPageSize(),o={left:e.x,right:e.x+i.x},n={left:s.x,right:s.x+r.x},a={top:e.y,bottom:e.y+i.y},c={top:s.y,bottom:s.y+r.y},h=this.visibleSize(o,n,"left","right",i.x),u=this.visibleSize(a,c,"top","bottom",i.y);return t=Math.floor(h*u/(i.x*i.y)*100),{areaIV:t}},visibleSize:function(t,e,i,s,r){return e[i]>t[i]||t[s]>e[s]?e[i]>t[i]||t[i]>e[s]?e[i]>t[s]||t[s]>e[s]?0:t[s]-e[i]:e[s]-t[i]:r},attachUnloadEvent:function(){var t=this,e="onpagehide"in window?"pagehide":"beforeunload";this.attachEvent(window,e,function(){t.logData()})},attachLoadEvent:function(){var t=this;this.attachEvent(window,"load",function(){var e=t.start();t.setError(e),e!=rubiconproject.ads.ivErrors.REGISTERED_ALREADY?rubiconproject.ads.slots.push(t):t.shouldLog=!1})},logData:function(){if(this.shouldLog){var t,e,i=this.getAdIVData().areaIV;i=isNaN(i)?0:i,this.result.areaIVOnUnload=i,this.logType==rubiconproject.ads.ivLogTypes.PIXEL?(e=new Image,e.width=0,e.height=0,e.style.display="none",this.script.parentNode.insertBefore(e,this.script.nextSibling),e.src=this.log+this.generateQueryString()):this.logType==rubiconproject.ads.ivLogTypes.AJAX&&(window.XDomainRequest?t=new XDomainRequest:window.XMLHttpRequest&&(t=new XMLHttpRequest),t&&(t.open("GET",this.log+this.generateQueryString(),!1),t.send()))}},generateQueryString:function(){var t,e,i,s,r="?",o=this.segments;if(this.context)for(t in this.context)r+=this.qs(t,this.context[t]);for(r+=this.qs("hv",this.result.adHover),r+=this.qs("piv",this.result.pageIv),this.adSize&&(r+=this.qs("w",this.adSize.x),r+=this.qs("h",this.adSize.y)),this.ad&&(r+=this.qs("v",!this.isHidden(this.ad))),this.result.interaction&&(r+=this.qs("ilx",this.result.interaction.x),r+=this.qs("ily",this.result.interaction.y)),e=0;o>e;e++)r+=this.qs("cums",this.result.cumIv[e]),r+=this.qs("mcts",this.result.conIv[e]);if(r+=this.qs("ivUnl",this.result.areaIVOnUnload),this.bcb_ctx)for(t in this.bcb_ctx)r+=this.qs(t,this.bcb_ctx[t]);return r+=this.qs("stm",this.result.sessionTm),r+=this.qs("lks",this.lookupStrategy),r+=this.qs("ifr",this.iframeType),i=this.pageContext(),r+=this.qs("pg",i.pageUrl),r+=this.qs("rf",i.referrer),s=this.fold(),s&&(r+=this.qs("tfld",s.tfld),r+=this.qs("fld",s.fld)),this.adPosition&&(r+=this.qs("adx",this.adPosition.x),r+=this.qs("ady",this.adPosition.y)),r+=this.qs("errDesc",this.errorDesc),r+=this.qs("err",this.error)},qs:function(t,e){return t+"="+encodeURIComponent(e)+"&"},attachMouseHover:function(t){var e=this;this.attachEvent(t,"mouseover",function(){e.mouseOver=!0}),this.attachEvent(t,"mouseout",function(){e.mouseOver=!1})},attachMouseClick:function(t){var e=this;this.attachEvent(t,"click",function(t){e.result.interaction={x:t.pageX-e.adPosition.x,y:t.pageY-e.adPosition.y}})},attachPageBlur:function(t){var e=this;this.attachEvent(t,"focus",function(){e.pageFocus=!0}),this.attachEvent(t,"blur",function(){e.pageFocus=!1})},getOffsetParent:function(t){return t.el.offsetParent?{el:t.el.offsetParent,window:t.window}:t.window.frameElement&&t.window.parent?{window:t.window.parent,el:t.window.frameElement}:null},getAdPosition:function(t){var e={window:window,el:t},i=0,s=0;do i+=e.el.offsetLeft,s+=e.el.offsetTop,e=this.getOffsetParent(e);while(e!=null);return{x:i,y:s}},getPagePosition:function(){var t=0,e=0,i=window,s=this.getScrollOffsets(i),t=s.x,e=s.y;while(i!=top)i=i.parent,s=this.getScrollOffsets(i),t+=s.x,e+=s.y;return{x:t,y:e}},getScrollOffsets:function(t){var e=t.document.documentElement,i=t.document.body;return{x:e&&e.scrollLeft||i&&i.scrollLeft||0,y:e&&e.scrollTop||i&&i.scrollTop||0}},getPageSize:function(){return top.innerWidth?{x:top.innerWidth,y:top.innerHeight}:document.all?{x:top.document.body.clientWidth,y:top.document.body.clientHeight}:{x:0,y:0}},getTotalPageSize:function(){return{x:top.document.width!==void 0?top.document.width:top.document.body.offsetWidth,y:top.document.height!==void 0?top.document.height:top.document.body.offsetHeight}},getAdSize:function(t){var e;if(t.getBoundingClientRect){var i=t.getBoundingClientRect();i.width?e={x:i.width,y:i.height}:i.bottom&&i.right&&(e={x:i.right-i.left,y:i.bottom-i.top})}return e&&(e={x:Math.round(e.x),y:Math.round(e.y)}),e},attachEvent:function(t,e,i){this.isDefined(t.addEventListener)?t.addEventListener(e,i,!1):this.isDefined(t.attachEvent)&&t.attachEvent("on"+e,i)},createPartialIvSegments:function(){for(var t=this.segments,e=0;t>e;e++)this.result.cumIv.push(0),this.result.conIv.push(0)},findPartialSegment:function(t){var e,i=this.segments;if(t==0)return-1;for(e=i;e>=1;e--)if(t>=e*this.segmentSize)return e-1;return-1},isDefined:function(t){return t!==void 0},printResults:function(){typeof this.resultLogger=="function"&&this.resultLogger({size:this.size,result:this.result,conIv:this.conIv})},parseVersion:function(t){return isNaN(t)?0:Number(t)},isHidden:function(t){if(t.offsetParent===null)return!0;if(window.getComputedStyle){var e=window.getComputedStyle(t);if(e.display==="none")return!0}return!1},parseSize:function(t,e,i){var s,r;return t&&(s=rubiconproject.ads.sizes[t])?(r=s.split("x"),{x:Number(r[0]),y:Number(r[1])}):e&&i?{x:Number(e),y:Number(i)}:null},setError:function(t){this.error=t},reset:function(t){clearInterval(t)},getAd:function(){return this.ad},pageContext:function(){var t=window,e=t.location.href,i=t.document.referrer;while(t.parent&&t!=top)try{t=t.parent,e=t.location.href,i=t.document.referrer}catch(s){break}return{pageUrl:e,referrer:i}},ifrType:function(){var t=rubiconproject.ads.iframeTypes.NONE;if(window!=top){t=rubiconproject.ads.iframeTypes.MULTIPLE,window.parent==top&&(t=rubiconproject.ads.iframeTypes.SINGLE);try{!top.document.location.href||this.ifrMatchDomain&&top.document.location.hostname!=document.location.hostname||(t=rubiconproject.ads.iframeTypes.FRIENDLY)}catch(e){}}return t},fold:function(){try{if((this.iframeType==rubiconproject.ads.iframeTypes.FRIENDLY||this.iframeType==rubiconproject.ads.iframeTypes.NONE)&&this.adPosition){var t=this.getPageSize(),e=this.getTotalPageSize();if(t.y>0&&e.y>0){var i=Math.max(Math.ceil(e.y/t.y),1),s=Math.floor(this.adPosition.y/t.y);return{tfld:i,fld:s}}}}catch(r){}return null}};var rp_bcb_ctx=rp_bcb_ctx?rp_bcb_ctx:{};new rubiconproject.ads.iv(rp_iv,rp_bcb_ctx).initialize()