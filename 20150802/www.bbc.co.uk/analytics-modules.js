bbcdotcom.objects=function(e){var d,a,c=arguments,b=e.split("."),f=(c[1]!==null&&typeof c[1]==="object")?c[1]:window;for(d=0,a=b.length;d<a;d++){if(f[b[d]]===undefined){if(typeof c[1]==="string"&&c[1]==="create"){f[b[d]]={}}else{return false}}else{if(typeof f[b[d]]==="function"){if(typeof c[1]!=="undefined"&&c[1]!==null&&f[b[d]](c[1])!==undefined){return f[b[d]](c[1])}else{if(f[b[d]]()!==undefined){return f[b[d]]()}}}}f=f[b[d]]}return f};bbcdotcom.objects("bbcdotcom","create");bbcdotcom.config=(function(){var w={ads:true,analytics:true,siteCatalyst:true,comScore:true,continuousPlay:true},n=[],q,v,d="",f=false,e=false,o=false,m=false,l=true,k=false,g=false,s="",r="",t="",u="",p=[],b="ads-enabled",j="",h="",c={SITECATALYST:{HTTP:"http://sa.bbc.com",HTTPS:"https://ssa.bbc.com",WEBSITE_SUITE_LIVE:"bbcwglobalprod",WEBSITE_SUITE_TEST:"bbcwglobaldev",APP_SUITE_LIVE:"bbcwappsprod",APP_SUITE_TEST:"bbcwappsdev"},COMSCORE:{HTTP:"http://b.scorecardresearch.com",HTTPS:"https://sb.scorecardresearch.com",WEBSITE_SUITE_LIVE:"bbc-global-test",WEBSITE_SUITE_TEST:"bbc-global-test",APP_SUITE_LIVE:"bbc-global-test",APP_SUITE_TEST:"bbc-global-test",CUSTOMER_ID_LIVE:18897612,CUSTOMER_ID_TEST:18897612}};var i=function(){return window.location};q=i();var a=function(){return window.document};v=a();var x=function(){var z=q.pathname,y=q.href;return(typeof z!=="undefined"&&(z.indexOf(".app")!==-1||(typeof y!=="undefined"&&y.indexOf(".app")!==-1))&&(z.indexOf("/sport")===0||(typeof y!=="undefined"&&y.indexOf("analytics-debug"))!==-1))};return{init:function(B,A,z,y){if(typeof B!=="undefined"){bbcdotcom.setConfig(B)}this.setData(A);if(typeof z!=="undefined"){q=z}if(typeof y!=="undefined"){v=y}if(this.isAdsEnabled()){bbcdotcom.utils.addHtmlTagClass(b)}d=(typeof window.orb!=="undefined"&&typeof window.orb.referrer!=="undefined"?window.orb.referrer:v.referrer)},setData:function(A){if(typeof A!=="undefined"&&typeof A.ads!=="undefined"&&typeof A.stats!=="undefined"&&typeof A.statsProvider!=="undefined"){var y=5,z=parseInt(A.statsProvider,10).toString(2);if(z.length!==y){while(z.length<y){z="0"+z}}w={ads:((A.ads===1&&w.ads!==false)?true:false),analytics:(A.stats===1&&w.analytics!==false?true:false),"nielsen-au":(A.stats===1&&parseInt(z.substr(0,1),10)===1?true:false),"nielsen-nz":(A.stats===1&&parseInt(z.substr(1,1),10)===1?true:false),"nielsen-us":(A.stats===1&&parseInt(z.substr(2,1),10)===1?true:false),sitestat:0,agof:(A.stats===1&&parseInt(z.substr(4,1),10)===1?true:false),siteCatalyst:w.siteCatalyst,comScore:w.comScore,continuousPlay:w.continuousPlay}}},setSections:function(y){if(typeof y!=="undefined"){if(y instanceof Array){n=y}else{n=y.split("/")}}else{n=[]}},getSections:function(){return n},setType:function(y){j=y.toUpperCase()},getType:function(){return j},setHeadline:function(y){h=y},getHeadline:function(){return h},setAsync:function(y){f=y},isAsync:function(){return f},setDisableInitialLoad:function(y){e=y},isDisableInitialLoad:function(){return e},isSportApp:x,isActive:function(y){return(typeof w[y]!=="undefined"?w[y]:false)},isAdsEnabled:function(){return w.ads},setAdsEnabled:function(y){w.ads=y},setAnalyticsEnabled:function(y){w.analytics=(w.analytics!==0&&w.analytics!==false?y:0)},isAnalyticsEnabled:function(){return w.analytics},setSiteCatalystEnabled:function(y){w.siteCatalyst=(w.siteCatalyst!==0&&w.siteCatalyst!==false?y:0)},isSiteCatalystEnabled:function(){return w.siteCatalyst},setComScoreEnabled:function(y){w.comScore=(w.comScore!==0&&w.comScore!==false?y:0)},isComScoreEnabled:function(){return w.comScore},setOutbrainEnabled:function(y){l=y},isOutbrainEnabled:function(){return l},setContinuousPlayEnabled:function(y){w.continuousPlay=(y===true?true:false)},isContinuousPlayEnabled:function(){return w.continuousPlay},setContinuousPlayPage:function(y){g=(y===true?true:false)},isContinuousPlayPage:function(){return g},setStickyPlayerPage:function(y){k=(y===true?true:false)},isStickyPlayerPage:function(){return k},setIE7:function(y){o=y},isIE7:function(){return o},setIE8:function(y){m=y},isIE8:function(){return m},setAssetPrefix:function(y){s=y},getAssetPrefix:function(){return s},setJsPrefix:function(y){r=y},getJsPrefix:function(){return(r!==""?r:s+"script")},setSwfPrefix:function(y){t=y},getSwfPrefix:function(){return(t!==""?t:s+"swf")},setCssPrefix:function(y){u=y},getCssPrefix:function(){return(u!==""?u:s+"style")},setWindowLocation:function(y){q=y;return this},getWindowLocation:function(){return q},setWindowDocument:function(y){v=y;return this},getWindowDocument:function(){return v},setReferrer:function(y){d=y;return this},getReferrer:function(){return d},getAnalyticsUri:function(z){var y=(typeof z==="undefined"?c.SITECATALYST:c[z.toUpperCase()]);return(q.protocol==="http:"?y.HTTP:y.HTTPS)},getAnalyticsSuite:function(A){var z=/(sandbox|int|test|stage)(.dev)*.bbc.co*/.test(q.href),y=(typeof A==="undefined"?c.SITECATALYST:c[A.toUpperCase()]);if(x()){return(z?y.APP_SUITE_TEST:y.APP_SUITE_LIVE)}return(z?y.WEBSITE_SUITE_TEST:y.WEBSITE_SUITE_LIVE)},getAnalyticsAcctId:function(z){var y=/(sandbox|int|test|stage)(.dev)*.bbc.co*/.test(q.href);return(y?c.COMSCORE.CUSTOMER_ID_TEST:c.COMSCORE.CUSTOMER_ID_LIVE)},r:function(){q=i();v=a();d="";n=[];w={ads:true,analytics:true,siteCatalyst:true,comScore:true,continuousPlay:true};o=false;m=false;s="";l=true;g=false;k=false;h="";j=""}}}());bbcdotcom.objects("bbcdotcom","create");bbcdotcom.utils=(function(){var e=[];var c=function(f,i,g){if(typeof f!=="undefined"&&f!==""&&f!==null){var h=new RegExp("(\\s|^)"+g+"(\\s|$)");return f[i].match(h)}};var b=function(i,h){var g,f=document.getElementsByTagName(i)[0];if(typeof f!=="undefined"&&f!==""&&f!==null&&typeof h==="string"){g=c(f,"id",h);return(g!==null)}return false};var d=function(j,m,h,g){var l,f=false,i=0;if(!j){return false}g=typeof g==="number"?g:10;h=h===true?true:false;l=h?j:j.parentNode;while(l&&i<g){var k=m(l);if(k>0){f=l;break}else{if(k<0){break}}l=l.parentNode;i++}return f};var a=function(){return(window.location.hostname.indexOf(".bbc.com")!==-1?"bbc.com":(window.location.hostname.indexOf(".bbc.co.uk")!==-1?"bbc.co.uk":window.location.hostname))};return{debounce:function(g,i,f){var h;return function(){var m=this,l=arguments;var k=function(){h=null;if(!f){g.apply(m,l)}};var j=f&&!h;clearTimeout(h);h=setTimeout(k,i);if(j){g.apply(m,l)}}},capitalize:function(f){if(typeof f!=="undefined"){var g,j,h=f.split(" ");for(g=0;g<h.length;g++){if(h[g].length>2){j=h[g].charAt(0).toUpperCase();h[g]=j+h[g].substr(1)}}return h.join(" ")}},log:function(){var h=new Error();var f=Array.prototype.slice.call(arguments),g;if(this.isDebug()===false||typeof f==="undefined"||f.length===0||typeof window.console==="undefined"||typeof window.console.debug==="undefined"){return}try{for(g=0;g<f.length;g++){if(typeof f[g]==="undefined"||f[g]===null){window.console.debug("BBCDOTCOM (undefined or null): "+f[g])}else{if(typeof f[g]==="object"||typeof f[g]==="function"){window.console.debug("BBCDOTCOM: ",f[g])}else{window.console.debug("BBCDOTCOM: "+f[g])}}if(this.isDebugTrace()&&typeof window.console.trace!=="undefined"){window.console.trace()}}}catch(j){window.console.log("BBCDOTCOM (log try/catch): ",j);window.console.log("BBCDOTCOM (log try/catch): ",f)}},addTagClass:function(f,g){if(typeof f!=="undefined"&&f!==""&&f!==null&&typeof g==="string"&&g!==""){if(!c(f,"className",g)){f.className=f.className+" "+g}return f.className}},removeTagClass:function(f,g){if(typeof f!=="undefined"&&f!==""&&f!==null&&typeof g==="string"&&g!==""){if(c(f,"className",g)){f.className=f.className.replace(" "+g,"");f.className=f.className.replace(g,"")}return f.className}},addBodyTagClass:function(g){var f=document.getElementsByTagName("body")[0];return this.addTagClass(f,g)},removeBodyTagClass:function(g){var f=document.getElementsByTagName("body")[0];return this.removeTagClass(f,g)},addHtmlTagClass:function(g){var f=document.getElementsByTagName("html")[0];return this.addTagClass(f,g)},removeHtmlTagClass:function(g){var f=document.getElementsByTagName("html")[0];return this.removeTagClass(f,g)},hasBodyTagId:function(f){return b("body",f)},getUriParamByName:function(f){if(typeof f==="undefined"){return""}f=f.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var h=new RegExp("[\\?&]"+f+"=([^&#]*)"),g=h.exec(bbcdotcom.config.getWindowLocation().search);return(g===null?"":decodeURIComponent(g[1].replace(/[^a-zA-Z0-9\-_]/g,"")))},isDebug:function(){return(/[?|&]ads-debug/.test(window.location.href)||document.cookie.indexOf("ads-debug=")!==-1)},isDebugTrace:function(){return(/[?|&]ads-debug-trace/.test(window.location.href)||document.cookie.indexOf("ads-debug-trace=")!==-1)},stackTrace:function(){var f=new Error();window.console.log(f.stack)},getParentElementByClass:function(h,g,k,j){j=typeof j!=="undefined"&&j===true?true:false;var f=(typeof k==="undefined"||k===0?5:k),i=function(l){if(!l||typeof l.className==="undefined"||typeof l.tagName==="undefined"||(j&&l.tagName.toLowerCase()==="body")){return -1}else{if(l.className.indexOf(g)!==-1){return 1}}};return d(h,i,false,f)},getClosestElementByTagName:function(i,h,g,f){return d(i,function(j){return j&&j.tagName&&j.tagName.toLowerCase()===h?1:0},g,f)},parentHasClass:function(g,f,i,h){return(this.getParentElementByClass(g,f,i,h)===false?false:true)},getAnchorPositionWithinElement:function(j,f){var h,g,k;if(j&&f){g=j.getElementsByTagName("a");k=new RegExp(f+"$");for(h=0;h<g.length;h++){if(typeof g[h].href!=="undefined"&&f!==""&&g[h].href.match(k)!==null){return(h+1)}}}return 0},addEvent:function(h,g,f){if(h.attachEvent){h["e"+g+f]=f;h[g+f]=function(){h["e"+g+f](window.event)};h.attachEvent("on"+g,h[g+f])}else{h.addEventListener(g,f,false)}},removeEvent:function(h,g,f){if(typeof h==="undefined"||h===null){return}if(h.detachEvent){h.detachEvent("on"+g,h[g+f]);h[g+f]=null}else{h.removeEventListener(g,f,false)}},triggerEvent:function(i,g,f){f=f===undefined?true:f;var h=document.createEvent("MouseEvents");h.initMouseEvent(g,true,true,window,0,0,0,0,0,false,false,false,false,0,null);if(f){h.preventDefault()}i.dispatchEvent(h);return h},cancelEvent:function(f){if(!f){return false}if(typeof f.preventDefault==="function"){f.preventDefault()}else{f.returnValue=false}},isEventDefaultPrevented:function(f){if(!f){return false}return f.defaultPrevented||f.returnValue===false},trim:function(f){if(typeof f==="string"){return f.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}return f},navigateTo:function(f){window.location.href=f},arrayIndexOf:function(m,h,i){var g;if(m===null){throw new TypeError('"array" is null or not defined')}var j=m;var f=isNaN(parseInt(j.length,10))?0:parseInt(j.length,10);if(f===0){return -1}var l=+i||0;if(Math.abs(l)===Infinity){l=0}if(l>=f){return -1}g=Math.max(l>=0?l:f-Math.abs(l),0);while(g<f){if(j[g]===h){return g}g++}return -1},getMetaNameContent:function(f){var h=document.getElementsByTagName("meta"),g;for(g=0;g<h.length;g++){if(h[g].getAttribute("name")===f){return h[g].getAttribute("content")}}return""},getMetaPropertyContent:function(g){var h=document.getElementsByTagName("meta"),f;for(f=0;f<h.length;f++){if(h[f].getAttribute("property")===g){return h[f].getAttribute("content")}}return""},setCookie:function(g,h,i){var f;if(typeof g!=="undefined"&&g!==""&&typeof h!=="undefined"&&h!==""){if(typeof i==="undefined"||i===null||i===0){i=60*60*24*365}f=new Date();f.setTime(f.getTime()+(i*1000));document.cookie=encodeURIComponent(g)+"="+encodeURIComponent(h)+"; expires="+f.toGMTString()+"; domain=."+a()+"; path=/";e.push(["set",g,h,i])}},getCookie:function(f){var g="; "+document.cookie,i=g.split("; "+encodeURIComponent(f)+"="),h;if(i.length===2){h=decodeURIComponent(i.pop().split(";").shift())}e.push(["get",f,h]);return h},deleteCookie:function(f){document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=."+a()+"; path=/";e.push(["delete",f])},generateUuidV4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var g=Math.floor(Math.random()*16),f=h==="x"?g:(g&3|8);return f.toString(16)})},createWindowLocation:function(g){var i,f,h=g;if(typeof g==="undefined"||g===null||g===""){i={href:"",protocol:"",host:"",hostname:"",port:"",pathname:"",search:"",hash:""}}else{if(g.indexOf("?")!==-1){h=g.substr(0,g.indexOf("?"))}f=h.substr(h.indexOf(":")+3);i={href:g,protocol:g.substr(0,g.indexOf(":")+1),host:f.substr(0,f.indexOf("/")),hostname:f.substr(0,f.indexOf("/")),port:"",pathname:f.substr(f.indexOf("/")),search:g.substr(g.indexOf("?")),hash:""}}return i},secondsToMilliSeconds:function(f){return Math.floor(parseFloat(f,10)*1000)},r:function(){e=[]},getTrackCookieValues:function(f){if(typeof f==="undefined"){return e}var g=[],h;for(h=0;h<e.length;h++){if(this.arrayIndexOf(f,e[h][1])!==-1){g.push(e[h])}}return g}}}());bbcdotcom.utils.addHtmlTagClass("bbcdotcom");bbcdotcom.objects("bbcdotcom","create");bbcdotcom.sections=(function(){var e=bbcdotcom.config;var i=[];var j=[];var d=[];var a=function(l){var k=new RegExp("^(afrique|arabic|azeri|bengali|burmese|gahuza|hausa|hindi|indonesia|kyrgyz|mundo|naidheachdan|nepali|newyddion|pashto|persian|portuguese|russian|sinhala|somali|swahili|tajik|tamil|turkce|ukchina|ukrainian|urdu|uzbek)");return l.replace(/\?.*$/,"").replace(/\#.*$/,"").replace(/(_|\-|\/)?[A-Z0-9]{7,8}$/,"").replace(/\/[a-z0-9]+\.stm/,"").replace(/_and_/,"-").replace(/_/g,"-").replace(/^news\/(england|northern-ireland|scotland|wales)($|-|\/)/,"news/uk/$1$2").replace(/^news\/uk-([a-z]+)(-([a-z]+))?/,"news/uk/$1/$3").replace(/^news\/(world)-(africa|asia|europe)(-([a-z]+))?/,"news/$1/$2/$4").replace(/^news\/(world)-([a-z\-]+)/,"news/$1/$2/").replace(/^(newsbeat)($|-|\/)/,"news/$1$2").replace(/^sport\/0/,"sport").replace(/^sport\/(.*)\/sports($|\/)/,"sport/$1$2").replace(/market-data\/overview/,"market-data").replace(/^(programmes)/,"news/$1").replace(k,"worldservice/$1").replace(/^wwhp/,"").replace(/\.app$/,"").replace(/\/+$/,"")};var h=function(k){k=k.replace(/^news\/world\/([a-z]+)(-([a-z]+))?/,"news/world$1$3").replace(/programmes\/asiabusinessreport/,"asiabusiness").replace(/programmes\/click$/,"clickonline").replace(/worldservice\//,"");return k.split("/")};var f=function(k){k=k.replace(/^specialfeatures/,"news/specialfeatures").replace(/^sport\/(.*)\/(20[0-9]{2})($|\/)/,"sport/$1-$2$3");return k.split("/")};var c=function(k){/http(|s):\/\/[a-z0-9\-.]+(.com|.co.uk|.net)(\/)?(.*)?/.test(k);return RegExp.$4};var g=function(r,n){var q="",l=[],k=[],m=[],o="unknown";if(typeof n!=="undefined"){if(/http(|s):\/\/[a-z0-9\-.]+(.com|.co.uk|.net)(\/)?(.*)?/.test(n)){q=RegExp.$4}else{if(/^\/(.*)?/.test(n)){q=RegExp.$1}else{q=o}}}else{if(e.getSections().length===0){var p=e.getWindowLocation().href;if(typeof p==="undefined"||p===""||p===null||p.indexOf("http")!==0){q=o}else{if(/http(|s):\/\/[a-z0-9\-.]+(.com|.co.uk|.net)(\/)?(.*)?/.test(p)){q=RegExp.$4}else{q=o}}}else{q=e.getSections().join("/")}}q=a(q);if(q===""){l=k=m=["homepage"]}else{l=q.split("/");k=h(q);m=f(q)}if(r){i=l;j=k;d=m}return[l,k,m]};var b=function(k){k=(typeof k==="undefined"?"":k);return(k==="advert"?j:(k==="analytics"?d:i))};return{build:g,getSection:function(m,l,k){if(typeof m!=="undefined"){if((typeof k!=="undefined"&&k===true)){g(true)}m=parseInt(m,10);if(typeof b(l)!=="undefined"&&typeof b(l)[m]!=="undefined"&&b(l)[m]!==""){return b(l)[m]}}return false},getSections:function(l,k){if((typeof k!=="undefined"&&k===true)){g(true)}return b(l)},getSectionsForUri:function(l,k){l=(typeof l==="undefined"||l===null?"":l);k=(typeof k==="undefined"?"":k);var m=g(false,l);return(k==="advert"?m[1]:(k==="analytics"?m[2]:m[0]))},r:function(){i=[];j=[];d=[]}}}());bbcdotcom.objects("bbcdotcom.adverts","create");bbcdotcom.adverts.keyValues=(function(){var k={},b=false,f={AV:"media_asset",INDEX:"index"};var i=function(l){if(/([0-9]{7,8})$/.test(l.split("?")[0].split("#")[0])){k.story_id=RegExp.$1}};var j=function(l){l=l.split("?")[0].split("#")[0];k.ctype=(/[0-9]{7,8}$/.test(l))?"content":"index"};var h=function(m,l){if(typeof k.asset_type==="undefined"){if(l&&typeof l==="string"&&f[l]){k.asset_type=f[l]}else{m=m.split("?")[0].split("#")[0];k.asset_type=(/[0-9]{7,8}$/.test(m))?"story":"index"}if(/\/(sport|news)\/live\//.test(m)){k.asset_type="live_event"}}};var a=function(m){var l=m.match(/^(http[s]?:\/\/[a-z0-9\.]*bbc\.(co\.uk|com))(.*)$/);if(l){var n;n=l[3].replace(/default.stm$|\-|\/|_/g,"");if(n.length>0&&n.length<=64){k.referrer=escape(n)}else{k.referrer=""}}else{k.referrer="nonbbc"}};var d=function(m){var l=m.match(/^(http[s]?:\/\/)([a-z0-9\.]*)((?:\/(?:\w|-|\+|\.)+)*)(\/.*)$/);if(l){k.referrer_domain=l[2]}else{k.referrer_domain=""}};var e=function(n){var m,l=[],o,p;if(typeof n.cookie!=="undefined"){p=n.cookie.indexOf("rsi_segs=");k.rsi=[];if(p>=0){p=n.cookie.indexOf("=",p)+1;if(p>0){o=n.cookie.indexOf(";",p);if(o===-1){o=n.cookie.length}l=n.cookie.substring(p,o).split("|")}}for(m=0;m<l.length&&m<20;m++){k.rsi.push(l[m])}}};var g=function(l){var m;if(bbcdotcom.sections.getSection(0)==="worldservice"){m=l.href.split("/").pop().split("_");if(typeof m[1]!=="undefined"){k.keyword=m[1]+(typeof m[2]!=="undefined"?"_"+m[2]:"")}m.shift();k.title=m.join("_")}};var c=function(m){var l=m.match(/(((?!(sponsor:)).)*)(sponsor:([^,]+),?(.*))?/);if(l!==null&&typeof l[5]!=="undefined"&&l[5]!==""&&typeof l[6]!=="undefined"&&l[6]!==""){b={href:l[6],title:bbcdotcom.utils.capitalize(l[5])};k.keyword=l[5].replace(/ /g,"")}else{k.keyword=m}};return{init:function(n,m,l){k.domain=n.hostname;i(n.href);j(n.href);h(n.href,l);a(m.referrer);d(m.referrer);e(m);g(n)},getAll:function(){return k},get:function(l){return(typeof k[l]!=="undefined")?k[l]:false},set:function(l,m){if(typeof l==="string"){if(typeof l!=="undefined"&&typeof m!=="undefined"&&m!==""){if(l==="keyword"){c(m)}else{k[l]=m}}}},setArray:function(l,m){if(typeof l==="string"){if(typeof k[l]==="undefined"){k[l]=[]}if(typeof l!=="undefined"&&typeof m!=="undefined"&&m!==""){k[l].push(m)}}},getKeywordParts:function(){return b},r:function(){k={};b=false}}}());bbcdotcom.analytics=(function(){var b={};var a=function(e,d,f){if(navigator&&navigator.loadPurpose&&navigator.loadPurpose==="preview"){return}var i=Array.prototype.slice.call(d),h,c,g=(typeof f!=="undefined"?f:false);for(h in b){if(typeof b[h][e]!=="undefined"){bbcdotcom.utils.log('analytics gateway: vendor "'+h+"."+e+'()" executed');c=b[h][e].apply(this,i);if(g){return c}}else{bbcdotcom.utils.log('analytics gateway: vendor "'+h+'" is missing method "'+e+'"')}}};return{registerVendor:function(d,c){b[d]=c},init:function(){a("init",arguments);return this},setSuite:function(){a("setSuite",arguments);return this},setTrackingValues:function(){a("setTrackingValues",arguments);return this},track:function(){a("track",arguments);return this},trackEvent:function(){a("trackEvent",arguments);return this},diagnostics:function(){a("diagnostics",arguments);return this},page:function(){a("page",arguments);return this},startPlaylist:function(){a("startPlaylist",arguments);return this},adRequest:function(){a("adRequest",arguments);return this},adManagerLoaded:function(){a("adManagerLoaded",arguments);return this},startAdvert:function(){a("startAdvert",arguments);return this},endAdvert:function(){a("endAdvert",arguments);return this},startProgramme:function(){a("startProgramme",arguments);return this},endProgramme:function(){a("endProgramme",arguments);return this},endPlaylist:function(){a("endPlaylist",arguments);return this},startPause:function(){a("startPause",arguments);return this},endPause:function(){a("endPause",arguments);return this},startSeek:function(){a("startSeek",arguments);return this},endSeek:function(){a("endSeek",arguments);return this},isPlaylistStarted:function(){return a("isPlaylistStarted",arguments,true)},getScwForApp:function(){bbcdotcom.utils.log('analytics gateway getScwForApp() called to get "scw"');return{initAppPageTracking:function(c,e,d){a("setApp",[{pageName:c}])},setAppName:function(c){a("setApp",[{appName:c}])},setAppVersionNumber:function(c){a("setApp",[{appVersion:c}])},setAppOs:function(c){a("setApp",[{appOs:c}])},appTrackPage:function(){a("appPage",arguments)}}},setApp:function(){a("setApp",arguments);return this},appPage:function(){a("appPage",arguments);return this},r:function(){a("r",arguments);return this},setRandom:function(){a("setRandom",arguments);return this},setTimestamp:function(){a("setTimestamp",arguments);return this},setAllowDiagnostics:function(){a("setAllowDiagnostics",arguments);return this},setAllowLinkTracking:function(){a("setAllowLinkTracking",arguments);return this},link:function(){a("link",arguments);return this}}}());bbcdotcom.objects("bbcdotcom.analyticsHelper","create");bbcdotcom.analyticsHelper=(function(){var q=window,A=document,h=bbcdotcom.config,z=bbcdotcom.utils,D=bbcdotcom.sections,c=bbcdotcom.adverts.keyValues,H=["","","",""],B={},I,r=/^(autos|capital|culture|earth|future|travel)$/,a=["homepage","news","sport","wwscripts"],x=500,s="na";var v=function(d){return(/^http(|s):\/\/[a-z0-9\-.]+.bbc.co(m|.uk)(\/)?(.*)?/).test(d)};var t=function(d){return(/^http(|s):\/\/traffic\.outbrain\.com/).test(d)};var y=function(w){if(typeof w==="undefined"){w=">"}var d=D.getSections("analytics",true);H=["","","",""];H[0]=d[0];if(typeof d[1]!=="undefined"&&d[1]){if(d[0]==="news"&&(d[1].indexOf("world")===0||d[1]==="specialfeatures")){if(typeof d[3]!=="undefined"&&d[3]&&d[2]){H[1]=d[0]+w+d[1]+w+d[2];H[2]=H[1]+w+d[3]}else{if(typeof d[2]!=="undefined"&&d[2]){H[1]=d[0]+w+d[1]+w+d[2]}else{H[1]=d[0]+w+d[1]}}}else{if(d[0]==="sport"){H[1]=d[0]+w+d[1];if(typeof d[2]!=="undefined"&&d[2]){H[2]=H[1]+w+d[2];if(typeof d[4]!=="undefined"&&d[4]&&d[3]&&d[2]){H[3]=H[2]+w+d[3]+w+d[4]}else{if(typeof d[3]!=="undefined"&&d[3]&&d[2]){H[3]=H[2]+w+d[3]}}}}else{if(typeof d[2]!=="undefined"&&d[2]){H[1]=d[0]+w+d[1];H[2]=H[1]+w+d[2]}else{H[1]=d[0]+w+d[1]}}}}if(H[1]===""){H[1]=H[0]}if(H[2]===""){H[2]=H[1]}return H};var i=function(){var w,d=h.getHeadline();if(d!==""){return d}if(typeof q.config!=="undefined"&&typeof q.config.asset!=="undefined"&&typeof q.config.asset.headline!=="undefined"&&q.config.asset.headline!==""){return q.config.asset.headline}w=z.getMetaNameContent("Headline");if(w!==""){return w}return"na"};var o=function(w){var d="",J=z.getMetaNameContent("DCTERMS.created"),K=z.getMetaNameContent("OriginalPublicationDate");if(typeof q.config!=="undefined"&&typeof q.config.asset!=="undefined"&&typeof q.config.asset.first_created!==null&&typeof q.config.asset.first_created!=="undefined"&&typeof q.config.asset.first_created.date!=="undefined"){d=q.config.asset.first_created.date}else{if(J!==""){d=J.replace("T"," ").replace("+00:00","")}else{if(K!==""){d=K}}}if(d===""){return"na"}else{if(typeof w!=="undefined"&&w===true){return new Date(d.replace(/\//g,"-").replace(" ","T")).getTime()}}return d.replace(/-/g,"/")};var b=function(){var d;if(typeof q.config!=="undefined"&&typeof q.config.asset!=="undefined"&&typeof q.config.asset.edition!=="undefined"&&q.config.asset.edition!==""){return q.config.asset.edition}d=z.getMetaNameContent("CPS_AUDIENCE");if(d!==""){return d}d=z.getMetaPropertyContent("wwhp-edition");if(d!==""){return d}return s};var E=function(d){if(typeof d==="undefined"||d===""){d=h.getWindowLocation().href}if(/.*[\-\/](\d{7,9})$/.test(d)){return RegExp.$1}return s};var p=function(d){d=d||h.getWindowLocation().href;var J=D.getSectionsForUri(d,"analytics");var w=h.getType();if(J[0]==="homepage"){w="INDEX"}else{if(h.isStickyPlayerPage()){w="VIDEO-STICKY"}else{if(w===""){if(typeof q.config!=="undefined"&&typeof q.config.asset!=="undefined"&&typeof q.config.asset.type!=="undefined"&&q.config.asset.type!==""){w=q.config.asset.type}else{if(typeof q.onesport!=="undefined"&&typeof q.onesport.config!=="undefined"&&typeof q.onesport.config.omnitureAssetType!=="undefined"&&q.onesport.config.omnitureAssetType!==""){w=q.onesport.config.omnitureAssetType}else{if(typeof q.bbc!=="undefined"&&typeof bbc.fmtj!=="undefined"&&typeof bbc.fmtj.page!=="undefined"&&typeof bbc.fmtj.page.assetType!=="undefined"&&bbc.fmtj.page.assetType!==""){w=bbc.fmtj.page.assetType}}}}}}w=w.toUpperCase();switch(w){case"AV":case"MAP":case"MEDIA_ASSET":w="VIDEO";break;case"STY":w="STORY";break;case"IDX":w="INDEX";break;case"LEP":w="LIVE-EVENT";break;default:break}if(w==="STORY"&&h.isContinuousPlayPage()){w="STORY-VIDEO"}return w||(/.*-(\d{7,9})$/.test(d)?"STORY":"INDEX")};var g=function(d){return d.replace(/"/g,"'").replace(/(^bbc (news|sport) \- | \- bbc (news|sport)$)/i,"").toLowerCase()};var j=function(){if(typeof A.title==="undefined"){return""}else{return g(A.title)}};var f=function(){var K=h.getWindowLocation().pathname,J=K.toLowerCase().slice(1);if(J.slice(-1)==="/"){J=J.slice(0,-1)}var L=J.split("/"),w=L.length>0?L[0]:"",d;if(L.length===1){if(w===""||w==="wwhp"){d="home"}else{if(w==="news"||w==="weather"||w==="sport"){d=w}else{d=j()}}}else{if(w==="sport"&&L.length>1&&L[1]==="0"){d=L[0]+"."+L.slice(2).join(".")}else{if(w==="news"||w==="weather"||w==="sport"){d=L.join(".")}else{d=j()}}}return d};var l=function(d){if(/^\{[a-zA-Z0-9\-_]+\}$/.test(d)){return d}return encodeURIComponent(d)};var G=function(d){if(d.indexOf("file:///")===0){d=d.substr(7)}else{return d}};var m=function(V){var U="",L=D.getSectionsForUri(V.href,"analytics");if(typeof V.text!=="undefined"){U=V.text}else{if(typeof V.innerText!=="undefined"){U=V.innerText}}var J=L[0];J=(J==="unknown"?"external":J);var R=function(W){W=z.trim(W).toLowerCase().replace(/[^a-zA-Z0-9]/g,"-");return(W.indexOf("----")===-1?W:W.substr(0,W.indexOf("----")))};var N=function(X){var W=X.match(/.*\/[0-9]+\-([^\/]+)/);return(W!==null?W[1]:L.join(">"))};var w="";if(typeof V.dataset!=="undefined"&&typeof V.dataset.track!=="undefined"&&V.dataset.track!==""){w=V.dataset.track}else{if(V.getAttribute("data-track")){w=V.getAttribute("data-track")}else{if(typeof V.rev!=="undefined"&&V.rev!==""){w=V.rev}}}if(V.className.indexOf("external-link")!==-1){return{events:false,promoted:"external",linkName:R(U),moduleName:false}}else{if((H[0]==="homepage"||H[0]==="wwscripts")&&w.indexOf("|")!==-1){var K=w.split("|");var O=(L[0].match(r)?N(V.href):R(U));var T=z.getParentElementByClass(V,"module2");if(T===false){T=z.getClosestElementByTagName(V,"section")}var S=z.getAnchorPositionWithinElement(T,V.href);if(K.length>0){return{events:false,promoted:J.toLowerCase(),linkName:O,moduleName:K[0].toLowerCase(),linkType:(typeof K[1]==="string"?K[1].toLowerCase():s),linkPosition:(S!==false&&S!==0?S:s)}}}else{if(z.parentHasClass(V,"bbccom_adsense",undefined,true)){return{events:false,promoted:"ads",linkName:"adsense",moduleName:"google-adsense"}}else{if(z.parentHasClass(V,"bbccom_advert",undefined,true)){return false}else{if(z.parentHasClass(V,"bbc-st-buttons")||z.parentHasClass(V,"share__tool")){return{events:"event23",promoted:"share-tools",linkName:R(U),moduleName:"share-tools",v:{"35":R(U)+"-share","39":H[1]+"-"+j()}}}else{if((H[0]==="news"||H[0]==="wwscripts")&&z.parentHasClass(V,"hyper-promotional-content",5)){return{events:false,promoted:"elsewhere",linkName:R(U),moduleName:"elsewhere"}}else{if(V.href.indexOf("outbrain.com")!==-1){J="outbrain-module";var Q=z.getParentElementByClass(V,"OUTBRAIN",5);if(typeof Q.dataset.widgetId!=="undefined"){var P=parseInt(Q.dataset.widgetId.substr(3,1),10);var d={"videos-on-news":[1,5,6],"elsewhere-on-news":[2,3,7],"others-sites":[4,9],"elsewhere-on-features":[8]};var M;for(M in d){if(z.arrayIndexOf(d[M],P)!==-1){J=M;break}}}return{events:false,promoted:J,linkName:R(U),moduleName:"outbrain-recommends"}}}}}}}}return false};var k=function(K,w,J){w=h.getAnalyticsUri(K)+w;z.log("loadTrackingImage:"+w);var d=A.createElement("img");if(typeof J==="function"){d.onload=J}if(typeof q.IS_GNL_JS_UNIT_TEST==="undefined"){d.src=w}};var n=function(K,w,d){var J=z.getCookie(w);z.log("link tracking get "+w+" cookie:"+J);if(typeof J!=="undefined"&&J.length>0&&J.indexOf("/")===0){k(K,J);d.http.push(J);z.deleteCookie(w)}};var e=function(M,w,L,J,K){var d=M(L,J,K,"link",undefined,false);z.setCookie(w,d,60);z.log("link tracking set "+w+" cookie:"+d)};var F=function(K,w,d,L,M,P){var Q=false,O=null,J=!z.isEventDefaultPrevented(d),N=function(T,S,U,R){clearTimeout(U);if(S&&!Q&&R&&T){z.navigateTo(T)}Q=true};z.cancelEvent(d);K(L,M,P,"link",function(R){N(w,d,O,J)});O=setTimeout(function(){N(w,d,O,J)},x)};var u=function(N,w,K,J,M,d,L){if(v(K)||t(K)){e(N,w,M,d,L)}else{F(N,K,J,M,d,L)}};var C=function(w,J){var d=D.getSection(0,"analytics",true);if(d&&z.arrayIndexOf(a,d)===-1){return}if(typeof B[J]!=="undefined"&&B[J]===true){return}I=function(K){var L=z.getClosestElementByTagName(K.target||K.srcElement,"a",true);if(L!==false){w(L,K)}};z.addEvent(A.getElementsByTagName("body")[0],"click",I);B[B]=true};return{isBBCUri:v,determineSections:y,getStoryHeadline:i,getStoryPublishDate:o,getPageEdition:b,getArticleId:E,getPageType:p,sanitisePageName:g,getPageName:j,getPageNameComScore:f,encodeValue:l,normalizeUri:G,getLinkTrackingProperties:m,loadTrackingImage:k,processDelayTrackingCookie:n,trackLink:u,applyLinkTrackingToPageElements:C,r:function(){z.removeEvent(A.getElementsByTagName("body")[0],"click",I)}}}());bbcdotcom.analytics.siteCatalyst=(function(){var c,H=window,V=document,P=bbcdotcom.objects,W=bbcdotcom.config,K=bbcdotcom.utils,M=bbcdotcom.sections,y=bbcdotcom.adverts.keyValues,p=bbcdotcom.analyticsHelper,z=false,A=true,S=true,x,L=["","","",""],B={http:[],cookie:[]},k={},U={pageName:"",appName:"",appVersion:"",appOs:""},D=["v21","v22","v23","v24"],j=0,h=false,T=false,G=false,g=screen.pixelDepth||screen.colorDepth,a=H.innerWidth||V.documentElement.offsetWidth,e=H.innerHeight||V.documentElement.offsetHeight,I=(V.cookie.indexOf("s_cc=true;")!==-1?"Y":"N"),m=false,t="na",v="ckpf_gnlsc",b="siteCatalyst",N="bbcdotcom.analytics did not do tracking because isSiteCatalystEnabled=false";var i="/b/ss/{analytics_suite}/1/H.22.1/s{random}?AQB=1&bw="+a+"&bh="+e+"&c="+g+"&cc=USD&cdp=2&ce=UTF-8&ndh=1&s="+a+"x"+e+"{trackVars}&AQE=1";var q=function(){if(m!==false){return m}else{var d=new Date();var o=d.getYear();return d.getDate()+"/"+(d.getMonth()+1)+"/"+(o<1900?o+1900:o)+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+" "+d.getDay()+" "+d.getTimezoneOffset()}};var f=function(){return(z!==false?z:Math.floor(Math.random()*10000000000000))};var u=function(){var o=(P("bbcdotcom.config.isAdsEnabled")?"&amp;v57=yes":"&amp;v57=no")+"&amp;ch="+encodeURIComponent("m::"+L[0])+"&amp;v7="+encodeURIComponent("m::"+L[1])+"&amp;v8="+encodeURIComponent("m::"+L[2]);var d=P("bbcdotcom.utils.getUriParamByName","ocid");if(d){o+="&amp;v0="+encodeURIComponent(d)}return o};var R=function(d){L=p.determineSections();return W.getAnalyticsUri()+"/b/ss/"+W.getAnalyticsSuite()+"/5/"+f()+"?gn="+encodeURIComponent("m::"+W.getWindowLocation().href.substr(W.getWindowLocation().href.indexOf("//")+2))+"&amp;ev=event11&amp;c31=mobile"+(typeof d!=="undefined"&&d!==""?"&amp;v5="+encodeURIComponent("m::"+d.toUpperCase()):"")+u()};var n=function(d){return'<img src="'+d+'" height="1" width="1" alt="" />'};var C=function(d){var o;for(o in d){if(d.hasOwnProperty(o)&&typeof d[o]!=="undefined"){k[o]=d[o]}}};var s=function(X,aa,ae,Y){ae=(typeof ae!=="undefined"?ae:"all");var af,ab,w="",Z,ad=M.getSections("analytics",true),ac=ae.split(","),o={v21:"{mediaName}",v22:"{mediaType}",v23:"{mediaPlayerName}",v24:"{adId}"},d=encodeURIComponent(W.getWindowLocation().href);if(typeof aa!=="undefined"){for(af in aa){o[af]=aa[af]}}if(typeof k!=="undefined"){for(af in k){o[af]=k[af]}}w+=(X.hasOwnProperty("events")?"&events="+X.events:"");w+="&t="+encodeURIComponent(q());w+="&g="+d.substr(0,255)+(d.length>255?"&-g="+d.substr(255):"");o.v31=((typeof orb!=="undefined"&&typeof orb.fig==="function"&&orb.fig("mb")===1)||W.getWindowLocation().hostname.search(/m.*.bbc.co/)===0||W.isSportApp()?"mobile":"desktop");o.v55=(typeof ad[0]!=="undefined"&&ad[0]==="worldservice"?"worldservice":"bbc.com");o.v57=(P("bbcdotcom.config.isAdsEnabled")?"yes":"no");if(typeof Y!=="undefined"){if(Y==="video"){if(W.isContinuousPlayPage()){Z=(j>1?"CP":"CPF")}else{Z="AP"}o.v26=L[2];o.v36=Z}else{if(Y==="page"){o.v5=p.getPageType();o.v6=L[0];o.v7=L[1];o.v8=L[2];if(L[3]!==""){o.v9=L[3]}ab=P("bbcdotcom.utils.getUriParamByName","ocid");if(ab){o.v0=ab}o.v3=p.getStoryHeadline();o.v10=p.getStoryPublishDate();o.v32=(y.get("keyword")!==false?y.get("keyword"):"not available");w+="&r="+W.getReferrer().substr(0,255)}}}if(typeof ac[0]!=="undefined"&&ac[0]==="all"){for(af in o){if(o.hasOwnProperty(af)&&K.arrayIndexOf(D,af)===-1){w+="&"+af+"="+p.encodeValue(o[af])}}}else{for(af in ac){if(o.hasOwnProperty(ac[af])){w+="&"+ac[af]+"="+p.encodeValue(o[ac[af]])}}}if(typeof X!=="undefined"){for(af in X){if(X.hasOwnProperty(af)){w=w.replace("{"+af+"}",p.encodeValue(X[af]))}}}return w};var F=function(Y,o,X,w,aa,Z){if(!W.isAnalyticsEnabled()){K.log("did not do tracking because isAnalyticsEnabled=false");if(typeof aa==="function"){aa(false)}return false}if(w!=="link"){L=p.determineSections()}var d=i.replace("{trackVars}",s(Y,o,X,w));x=(typeof x!=="undefined"&&x.length>0?x:W.getAnalyticsSuite());d=d.replace("{analytics_suite}",x).replace("{random}",f());if(typeof Z==="undefined"||Z===true){B.http.push(d);p.loadTrackingImage(b,d,aa)}else{B.cookie.push(d);if(typeof aa==="function"){aa()}}K.log("siteCatalyst doTrack url:"+d);return d};var O=function(w,X){if(S===false){return}var o=encodeURIComponent(W.getWindowLocation().href);var d="/b/ss/bbcbbcglobaldiagnosis/1/H.22.1/s"+f()+"?AQB=1&bw="+a+"&bh="+e+"&cc=USD&cdp=2&ce=UTF-8&ndh=1&s="+a+"x"+e+"&v75="+p.encodeValue(w)+"&t="+encodeURIComponent(q())+"&g="+o.substr(0,255)+(o.length>255?"&-g="+o.substr(255):"")+"&AQE=1";document.write(n(W.getAnalyticsUri()+d));B.http.push(d)};var r=function(X){if(typeof X==="undefined"){return false}var w={promoted:t,channel:L[0],section:L[1],pageType:t,placement:t,moduleName:t,linkType:"text",linkPosition:t,versionType:t,versionName:t,linkName:t,extraLinkInfo:t,trackingMethod:"cl",trackingInterval:t};var Z,o,Y=[];for(Z in X){if(typeof w[Z]!=="undefined"){w[Z]=(typeof X[Z]==="undefined"||X[Z]===""||X[Z]===false?t:K.trim(X[Z]))}}for(o in w){Y.push(w[o])}return Y.join("|")};var J=function(aa,X){if(!W.isSiteCatalystEnabled()){return false}if(typeof aa==="undefined"||typeof aa.href==="undefined"){return false}L=p.determineSections();var o={pe:"lnk_o"},Z="pe,events,pev1,pev2,v35,v39,v52",ab=p.getLinkTrackingProperties(aa),Y={},w=p.normalizeUri(aa.href);if(ab){Y.events="event22,event35"+(ab.events===false?"":","+ab.events);if(p.isBBCUri(w)){o.pev1=w.substr(0,255)}else{/http(|s):\/\/([^\/]+)(.*)?/.test(w);o.pev1="http"+RegExp.$1+"://"+RegExp.$2}o.pev2=ab.promoted.replace(/_/g,"-")+"_"+L[0]+"_"+(ab.moduleName!==false?ab.moduleName.replace(/_/g,"-"):"na")+"_"+ab.linkName.replace(/_/g,"-");ab.pageType=p.getPageType(aa.href);if(typeof ab.v!=="undefined"){var d;for(d in ab.v){o["v"+d]=ab.v[d]}}o.v52=r(ab);p.trackLink(F,v,w,X,Y,o,Z)}else{return""}};var Q=function(){if(!W.isSiteCatalystEnabled()){K.log(N);return false}var o={pageName:p.getPageName(),k:I,v:"Y"};try{F({events:"event2"},o,"all","page");if(A){p.applyLinkTrackingToPageElements(J,b)}}catch(d){O('analytics track page failed "'+d.message+'"');K.log('bbcdotcom.analytics.page() exception "'+d.message+'"')}};var E=function(){if(!W.isSportApp()){return false}if(!W.isSiteCatalystEnabled()){K.log(N);return false}var o={pageName:(typeof U.pageName==="string"&&U.pageName!==""?p.sanitisePageName(U.pageName):p.getPageName()),v67:U.appVersion,v68:U.appOs,v69:U.appName,k:I,v:"Y"};try{F({events:"event9,event17"},o,"all","page")}catch(d){O('analytics track app page failed "'+d.message+'"');K.log('bbcdotcom.analytics.appPage() exception "'+d.message+'"')}};var l=function(d,X){if(!W.isSiteCatalystEnabled()){K.log(N);return false}var Y={events:"event57"},o={},Z="events,pe,v5,v26,v31,v34,v35,v36,v38,v39,v52,v55,v57",w="page";L=p.determineSections();switch(d){case"continuousPlay.mediaStarted":case"continuousPlay:mediaStarted":G=["video","demand","stream",(typeof X.origin!=="undefined"&&X.origin!==null?X.origin:"na"),(typeof X.index!=="undefined"&&X.index!==null?X.index:"na"),(typeof X.fullscreen!=="undefined"&&X.fullscreen!==null?(X.fullscreen?"fs":"ms"):"na"),(typeof X.cpTimeout!=="undefined"&&X.cpTimeout!==null?X.cpTimeout:"na")].join("|");return;case"videoExperience:shareTools:clicked":var aa=(typeof X.platform!=="undefined"?X.platform:"na").toLowerCase();Y.events="event22";o={v35:aa+"-share",v39:L[1]+"-"+p.getPageName(),v52:r({promoted:"video-experience",linkName:aa,pageType:p.getPageType(),moduleName:"share-tools"})};break;case"videoExperience:showMore:clicked":Y.events="event22";o={v52:r({promoted:"video-experience",linkName:"more-videos",pageType:p.getPageType(),moduleName:"video-tools"})};break;case"videoExperience:stickyPlayer:entered":o={v38:"enter-sticky"};break;case"videoExperience:stickyPlayer:exited":o={v38:"exit-sticky"};break;case"videoExperience:stickyPlayer:expanded":o={v38:"expand-sticky"};break;case"videoExperience:stickyPlayer:collapsed":o={v38:"collapse-sticky"};break;case"videoExperience:player:enteredFullScreen":o={v38:"enter-fullscreen"};break;case"continuousPlay.dismissed":case"continuousPlay:dismissed":Y.events=p.encodeValue("event57,event58="+(typeof X.cpTimeout!=="undefined"?X.cpTimeout:"na"));o={v38:"exit-cp"};break;case"continuousPlay.openedMoreVideos":case"continuousPlay:openedMoreVideos":Y.events="event22";o={v52:r({promoted:"continuous-play-player",linkName:"select-more-videos",pageType:p.getPageType(),moduleName:"continuous-play"})};break;default:K.log('trackEvent - unknown event "'+d+'"');return}o.pe="lnk_o";o.v34=W.getWindowLocation().href;K.log("trackEvent: "+d,X,Y,o,Z);F(Y,o,Z,w)};return{init:function(){if(typeof bbcdotcom.utils!=="undefined"){bbcdotcom.utils.addHtmlTagClass("bbcdotcom-analytics-init")}p.processDelayTrackingCookie(b,v,B);return this},setSuite:function(d){x=d;return this},setTrackingValues:function(d){C(d)},track:F,trackEvent:l,diagnostics:O,page:Q,startPlaylist:function(o){if(!W.isSiteCatalystEnabled()){K.log(N);return false}j++;h=true;var w="events,pe,v21,v22,v23,v24,v26,v36",d={pe:"lnk_o"};o.events="event3";if(G){d.v22=G;G=false}F(o,d,w,"video")},adRequest:function(d){if(!W.isSiteCatalystEnabled()){K.log(N);return false}var o="events,pe,v21,v22,v23,v24,v26,v36";d.events="event29";F(d,{pe:"lnk_o"},o,"video")},adManagerLoaded:function(d){if(!W.isSiteCatalystEnabled()){K.log(N);return false}var o="events,pe,v21,v22,v23,v24,v26,v36";d.events="event31";F(d,{pe:"lnk_o"},o,"video")},startAdvert:function(d){if(!W.isSiteCatalystEnabled()){K.log(N);return false}T=true;d.mediaLength=undefined;var o="events,pe,v21,v22,v23,v24,v26,v36";d.events="event4";F(d,{pe:"lnk_o"},o,"video")},endAdvert:function(d){if(!W.isSiteCatalystEnabled()){K.log(N);return false}},startProgramme:function(d){if(!W.isSiteCatalystEnabled()){K.log(N);return false}var o="pe,v21,v22,v23,v24,v36";if(T){T=false;d.events="event5,event6"}else{d.events="event6"}F(d,{pe:"lnk_o"},o,"video")},endProgramme:function(d){if(!W.isSiteCatalystEnabled()){K.log(N);return false}var o="pe,v21,v22,v23,v24,v36";d.events="event7,event8";F(d,{pe:"lnk_o"},o,"video")},endPlaylist:function(d){if(!W.isSiteCatalystEnabled()){K.log(N);return false}T=false},isPlaylistStarted:function(){return h},getScwForApp:function(){return{initAppPageTracking:function(d,w,o){U.pageName=d},setAppName:function(d){U.appName=d},setAppVersionNumber:function(d){U.appVersion=d},setAppOs:function(d){U.appOs=d},appTrackPage:E}},setApp:function(d){var o;for(o in d){U[o]=d[o]}},appPage:E,getImageSrc:function(d){return R(d)},renderImageTag:function(d){if(!W.isSiteCatalystEnabled()||!W.isAnalyticsEnabled()){return false}document.write(n(R(d)));return true},r:function(){m=false;x=undefined;L=["","","",""];k={};B={http:[],cookie:[]};S=true;A=true;j=0;h=false;T=false;G=false;U={pageName:"",appName:"",appVersion:"",appOs:""};K.deleteCookie(v)},setRandom:function(d){z=d},setTimestamp:function(d){m=d},setAllowDiagnostics:function(d){S=(d?true:false)},setAllowLinkTracking:function(d){A=(d?true:false)},getTrackingRequests:function(d){if(typeof d==="undefined"||(d!=="http"&&d!=="cookie")){throw new Error('Invalid type provided to getTrackingRequests() "'+d+'"')}return B[d]},getTrackingValue:function(o){var w=k;var d;for(d in k){w[d]=k[d]}return(w.hasOwnProperty(o)?w[o]:"")},getSectionStrings:function(){return L},link:J}}());bbcdotcom.analytics.registerVendor("bbcdotcom.analytics.siteCatalyst",bbcdotcom.analytics.siteCatalyst);var ns_=ns_||{};ns_.StreamSense=ns_.StreamSense||function(){function I(d,m){var g=d||"",c="undefined",e=G.comScore||G.sitestat||function(ab){var R="comScore=",i=N.cookie,ad="",Q="indexOf",Y="substring",U="length",T=L.browserAcceptsLargeURLs()?J.URL_LENGTH_LIMIT:J.RESTRICTED_URL_LENGTH_LIMIT,u,V="&ns_",aa="&",S,X,W,Z,ac=G.encodeURIComponent||escape;if(i[Q](R)+1){for(W=0,X=i.split(";"),Z=X[U];W<Z;W++){S=X[W][Q](R),S+1&&(ad=aa+unescape(X[W][Y](S+R[U])))}}ab+=V+"_t="+ +(new Date)+V+"c="+(N.characterSet||N.defaultCharset||"")+ad,ab.length>T&&ab.indexOf(aa)>0&&(u=ab.substr(0,T-8).lastIndexOf(aa),ab=(ab.substring(0,u)+V+"cut="+ac(ab.substring(u+1))).substr(0,T)),x.httpGet(ab),typeof ns_p===c&&(ns_p={src:ab}),ns_p.lastMeasurement=ab};if(typeof m!==c){var l=[],b=G.encodeURIComponent||escape;for(var h in m){m.hasOwnProperty(h)&&l.push(b(h)+"="+b(m[h]))}/[\?\&]$/.test(g)||(g+="&"),g+=l.join("&")}return e(g)}function C(U,Z){var W,ab=G.encodeURIComponent||escape,V=[],Y=J.LABELS_ORDER,R=U.split("?"),ag=R[0],ad=R[1],ac=ad.split("&");for(var X=0,ae=ac.length;X<ae;X++){var Q=ac[X].split("="),aa=unescape(Q[0]),e=unescape(Q[1]);aa&&(Z[aa]=e)}var af={};for(var X=0,ae=Y.length;X<ae;X++){var l=Y[X];if(Z.hasOwnProperty(l)){var T=Z[l];typeof T!="undefined"&&T!=null&&(af[l]=!0,V.push(ab(l)+"="+ab(Z[l])))}}for(var l in Z){if(af[l]){continue}if(Z.hasOwnProperty(l)){var T=Z[l];typeof T!="undefined"&&T!=null&&V.push(ab(l)+"="+ab(Z[l]))}}W=ag+"?"+V.join("&"),W=W+(W.indexOf("&c8=")<0?"&c8="+ab(N.title):"")+(W.indexOf("&c7=")<0?"&c7="+ab(N.URL):"")+(W.indexOf("&c9=")<0?"&c9="+ab(N.referrer):"");var c=L.browserAcceptsLargeURLs()?J.URL_LENGTH_LIMIT:J.RESTRICTED_URL_LENGTH_LIMIT;if(W.length>c&&W.indexOf("&")>0){var g=W.substr(0,c-8).lastIndexOf("&");W=(W.substring(0,g)+"&ns_cut="+ab(W.substring(g+1))).substr(0,c)}return W}var L=function(){var a={uid:function(){var b=1;return function(){return +(new Date)+"_"+b++}}(),filter:function(d,b){var f={};for(var c in b){b.hasOwnProperty(c)&&d(b[c])&&(f[c]=b[c])}return f},extend:function(f){var c=arguments.length,g;f=f||{};for(var d=1;d<c;d++){g=arguments[d];if(!g){continue}for(var b in g){g.hasOwnProperty(b)&&(f[b]=g[b])}}return f},getString:function(c,b){var d=String(c);return c==null?b||"na":d},getLong:function(c,b){var d=Number(c);return c==null||isNaN(d)?b||0:d},getInteger:function(c,b){var d=Number(c);return c==null||isNaN(d)?b||0:d},getBoolean:function(c,b){var d=String(c).toLowerCase()=="true";return c==null?b||!1:d},isNotEmpty:function(b){return typeof b!="undefined"&&b!=null&&typeof b.length!="undefined"&&b.length>0},indexOf:function(b,d){var c=-1;return a.forEach(d,function(f,g){f==b&&(c=g)}),c},forEach:function(g,c,l){try{if(typeof c=="function"){l=typeof l!="undefined"?l:null;if(typeof g.length!="number"||typeof g[0]=="undefined"){var f=typeof g.__proto__!="undefined";for(var b in g){(!f||f&&typeof g.__proto__[b]=="undefined")&&typeof g[b]!="function"&&c.call(l,g[b],b)}}else{for(var b=0,d=g.length;b<d;b++){c.call(l,g[b],b)}}}}catch(h){}},regionMatches:function(g,c,l,f,b){if(c<0||f<0||c+b>g.length||f+b>l.length){return !1}while(--b>=0){var d=g.charAt(c++),h=l.charAt(f++);if(d!=h){return !1}}return !0},size:function(c){var b=0,d;for(var d in c){c.hasOwnProperty(d)&&b++}return b},log:function(d,b){if(typeof b!="undefined"&&b){var f=new Date,c=f.getHours()+":"+f.getMinutes()+":"+f.getSeconds();console.log(c,d)}},isTrue:function(b){return typeof b=="undefined"?!1:typeof b=="string"?(b=b.toLowerCase(),b==="true"||b==="1"||b==="on"):b?!0:!1},toString:function(b){if(typeof b=="undefined"){return"undefined"}if(typeof b=="string"){return b}if(Object.prototype.toString.call(b)==="[object Array]"){return b.join(",")}if(a.size(b)>0){var d="";for(var c in b){b.hasOwnProperty(c)&&(d+=c+":"+b[c]+";")}return d}return b.toString()},exists:function(b){return typeof b!="undefined"&&b!=null},firstGreaterThan0:function(){for(var c=0,b=arguments.length;c<b;c++){var d=arguments[c];if(d>0){return d}}return 0},cloneObject:function(c){if(null==c||"object"!=typeof c){return c}var b=c.constructor();for(var d in c){c.hasOwnProperty(d)&&(b[d]=c[d])}return b},safeGet:function(b,c){return c=a.exists(c)?c:"",a.exists(b)?b:c},getBrowserName:function(){var d=navigator.userAgent,b=navigator.appName,f,c;return(c=d.indexOf("Opera"))!=-1||(c=d.indexOf("OPR/"))!=-1?b="Opera":(c=d.indexOf("Android"))!=-1?b="Android":(c=d.indexOf("Chrome"))!=-1?b="Chrome":(c=d.indexOf("Safari"))!=-1?b="Safari":(c=d.indexOf("Firefox"))!=-1?b="Firefox":(c=d.indexOf("IEMobile"))!=-1?b="Internet Explorer Mobile":b=="Microsoft Internet Explorer"||b=="Netscape"?b="Internet Explorer":(f=d.lastIndexOf(" ")+1)<(c=d.lastIndexOf("/"))&&(b=d.substring(f,c),b.toLowerCase()==b.toUpperCase()&&(b=navigator.appName)),b},getBrowserFullVersion:function(){var h=navigator.userAgent,d=navigator.appName,m=""+parseFloat(navigator.appVersion),g,c,f,l,b;return(f=h.indexOf("Opera"))!=-1?(m=h.substring(f+6),(f=h.indexOf("Version"))!=-1&&(m=h.substring(f+8))):(f=h.indexOf("OPR/"))!=-1?m=h.substring(f+4):(f=h.indexOf("Android"))!=-1?m=h.substring(f+11):(f=h.indexOf("Chrome"))!=-1?m=h.substring(f+7):(f=h.indexOf("Safari"))!=-1?(m=h.substring(f+7),(f=h.indexOf("Version"))!=-1&&(m=h.substring(f+8))):(f=h.indexOf("Firefox"))!=-1?m=h.substring(f+8):d=="Microsoft Internet Explorer"?(b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),b.exec(h)!=null&&(m=parseFloat(RegExp.$1))):d=="Netscape"?(b=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),b.exec(h)!=null&&(m=parseFloat(RegExp.$1))):(c=h.lastIndexOf(" ")+1)<(f=h.lastIndexOf("/"))&&(m=h.substring(f+1)),m=m.toString(),(l=m.indexOf(";"))!=-1&&(m=m.substring(0,l)),(l=m.indexOf(" "))!=-1&&(m=m.substring(0,l)),(l=m.indexOf(")"))!=-1&&(m=m.substring(0,l)),g=parseInt(""+m,10),isNaN(g)&&(m=""+parseFloat(navigator.appVersion)),m},browserAcceptsLargeURLs:function(){return window.ActiveXObject===null||!0}};return a}(),z=function(){var a="cs_",b=function(){var d=this,c=typeof localStorage!="undefined"?localStorage:{};L.extend(this,{get:function(f){return c[a+f]},set:function(f,g){c[a+f]=g},has:function(f){return a+f in c},remove:function(f){delete c[a+f]},clear:function(){for(var f in c){c.hasOwnProperty(f)&&delete c[f]}}})};return b}(),E=function(b,a){var c=new Image;c.onload=function(){a&&a(200)},c.onerror=function(){a&&a()},c.src=b},B=function(b,a){a&&setTimeout(a,0)},H=function(b,a,c){c&&setTimeout(c,0)},A=function(){return{dir:function(a){return null},append:function(b,a,c){},write:function(b,a,c){},deleteFile:function(b,a){return !1},read:function(b,a){return null}}}(),D=function(c,a){typeof engine!="undefined"&&a&&setTimeout(a,0);var d=engine.createHttpClient(),b=d.createRequest("GET",c,null);b.start(),a&&setTimeout(a,0)},x=function(){var a={PLATFORM:"generic",httpGet:E,httpPost:H,Storage:z,IO:A,getCrossPublisherId:function(){return null},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(b){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +(new Date)+~~(Math.random()*1000)},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return""},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return""},getRuntimeVersion:function(){return""},getResolution:function(){return""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return !0},isCompatible:function(){return !0},autoSelect:function(){},isCrossPublisherIdChanged:function(){return !1}};return a}(),P=function(){function h(){return typeof engine!="undefined"&&typeof engine.stats!="undefined"}function d(){return L.isNotEmpty(engine.stats.device.id)?engine.stats.device.id:L.isNotEmpty(engine.stats.network.mac)?engine.stats.network.mac:null}function m(){if(g==null){var a=d();a!=null?(g=a,e="31",b=a):(g=+(new Date)+~~(Math.random()*1000),e="72",b=null)}}var i=this,g=null,e=null,b=null;return{PLATFORM:"trilithium",httpGet:D,httpPost:H,Storage:z,IO:A,getCrossPublisherId:function(){return m(),b},getAppName:function(){return L.isNotEmpty(engine.stats.application.name)?engine.stats.application.name:Constants.UNKNOWN_VALUE},getAppVersion:function(a){return L.isNotEmpty(engine.stats.application.version)?engine.stats.application.version:Constants.UNKNOWN_VALUE},getVisitorId:function(){return m(),g},getVisitorIdSuffix:function(){return e},getDeviceName:function(){return L.safeGet(engine.stats.device.platform,"")},getPlatformVersion:function(){return L.safeGet(engine.stats.device.version,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return""},getResolution:function(){return typeof screen!="undefined"&&typeof screen.height!="undefined"&&typeof screen.width!="undefined"?screen.height+"x"+screen.width:""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return !0},isCompatible:h}}();x.autoSelect=function(){P.isCompatible()&&L.extend(x,P)};var K=typeof window!="undefined"&&typeof document!="undefined",G,N;K?(G=window,N=document):(G={},N={location:{href:""},title:"",URL:"",referrer:"",cookie:""});var L=L||{};L.filterMap=function(a,c){for(var b in a){L.indexOf(b,c)==-1&&delete a[b]}},L.getKeys=function(c,a){var d,b=[];for(d in c){(!a||a.test(d))&&c.hasOwnProperty(d)&&(b[b.length]=d)}return b};var M=function(){var a=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"];return{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(b){return a[b]}}}(),q=function(){var a=[M.END,M.PLAY,M.PAUSE,M.BUFFER];return{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(b){return a[b]}}}(),F={ADPLAY:M.AD_PLAY,ADPAUSE:M.AD_PAUSE,ADEND:M.AD_END,ADCLICK:M.AD_CLICK},J={STREAMSENSE_VERSION:"4.1412.05",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:60000,interval:10000},{playingtime:null,interval:60000}],DEFAULT_KEEP_ALIVE_INTERVAL:1200000,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_c12m","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9"]},j=function(){var a=function(){function e(i,f){var l=f[i];l!=null&&(h[i]=l)}var v=this,d=0,b=0,g=0,w=0,c=0,p=0,m,h;L.extend(this,{reset:function(f){f!=null&&f.length>0?L.filterMap(h,f):h={},h.hasOwnProperty("ns_st_cl")||(h.ns_st_cl="0"),h.hasOwnProperty("ns_st_pn")||(h.ns_st_pn="1"),h.hasOwnProperty("ns_st_tp")||(h.ns_st_tp="1"),v.setPauses(0),v.setStarts(0),v.setBufferingTime(0),v.setBufferingTimestamp(-1),v.setPlaybackTime(0),v.setPlaybackTimestamp(-1)},setLabels:function(i,f){i!=null&&L.extend(h,i),v.setRegisters(h,f)},getLabels:function(){return h},setLabel:function(i,l){var f={};f[i]=l,v.setLabels(f,null)},getLabel:function(f){return h[f]},getClipId:function(){return(typeof m=="undefined"||m==null)&&v.setClipId("1"),m},setClipId:function(f){m=f},setRegisters:function(l,i){var f=l.ns_st_cn;f!=null&&(v.setClipId(f),delete l.ns_st_cn),f=l.ns_st_bt,f!=null&&(g=Number(f),delete l.ns_st_bt),e("ns_st_cl",l),e("ns_st_pn",l),e("ns_st_tp",l),e("ns_st_ub",l),e("ns_st_br",l);if(i==q.PLAYING||i==null){f=l.ns_st_sq,f!=null&&(b=Number(f),delete l.ns_st_sq)}i!=q.BUFFERING&&(f=l.ns_st_pt,f!=null&&(c=Number(f),delete l.ns_st_pt));if(i==q.PAUSED||i==q.IDLE||i==null){f=l.ns_st_pc,f!=null&&(d=Number(f),delete l.ns_st_pc)}},createLabels:function(f,l){var n=l||{};n.ns_st_cn=v.getClipId(),n.ns_st_bt=String(v.getBufferingTime());if(f==M.PLAY||f==null){n.ns_st_sq=String(b)}if(f==M.PAUSE||f==M.END||f==M.KEEP_ALIVE||f==M.HEART_BEAT||f==null){n.ns_st_pt=String(v.getPlaybackTime()),n.ns_st_pc=String(d)}return L.extend(n,v.getLabels()),n},incrementPauses:function(){d++},incrementStarts:function(){b++},getBufferingTime:function(){var f=g;return w>=0&&(f+=+(new Date)-w),f},setBufferingTime:function(f){g=f},getPlaybackTime:function(){var f=c;return p>=0&&(f+=+(new Date)-p),f},setPlaybackTime:function(f){c=f},getPlaybackTimestamp:function(){return p},setPlaybackTimestamp:function(f){p=f},getBufferingTimestamp:function(){return w},setBufferingTimestamp:function(f){w=f},getPauses:function(){return d},setPauses:function(f){d=f},getStarts:function(){return b},setStarts:function(f){b=f}}),h={},v.reset()};return a}(),O=function(){var a=function(){var y=this,e=null,b,h=0,Q=0,d=0,w=0,v=0,m,g=0,p=!1;L.extend(this,{reset:function(c){c!=null&&c.length>0?L.filterMap(m,c):m={},y.setPlaylistId(+(new Date)+"_"+g),y.setBufferingTime(0),y.setPlaybackTime(0),y.setPauses(0),y.setStarts(0),y.setRebufferCount(0),p=!1},setLabels:function(f,c){f!=null&&L.extend(m,f),y.setRegisters(m,c)},getLabels:function(){return m},setLabel:function(f,i){var c={};c[f]=i,y.setLabels(c,null)},getLabel:function(c){return m[c]},getClip:function(){return e},getPlaylistId:function(){return b},setPlaylistId:function(c){b=c},setRegisters:function(f,c){var i=f.ns_st_sp;i!=null&&(h=Number(i),delete f.ns_st_sp),i=f.ns_st_bc,i!=null&&(d=Number(i),delete f.ns_st_bc),i=f.ns_st_bp,i!=null&&(w=Number(i),delete f.ns_st_bp),i=f.ns_st_id,i!=null&&(b=i,delete f.ns_st_id),c!=q.BUFFERING&&(i=f.ns_st_pa,i!=null&&(v=Number(i),delete f.ns_st_pa));if(c==q.PAUSED||c==q.IDLE||c==null){i=f.ns_st_pp,i!=null&&(Q=Number(i),delete f.ns_st_pp)}},createLabels:function(i,f){var c=f||{};c.ns_st_bp=String(y.getBufferingTime()),c.ns_st_sp=String(h),c.ns_st_id=String(b),d>0&&(c.ns_st_bc=String(d));if(i==M.PAUSE||i==M.END||i==M.KEEP_ALIVE||i==M.HEART_BEAT||i==null){c.ns_st_pa=String(y.getPlaybackTime()),c.ns_st_pp=String(Q)}if(i==M.PLAY||i==null){y.didFirstPlayOccurred()||(c.ns_st_pb="1",y.setFirstPlayOccurred(!0))}return L.extend(c,y.getLabels()),c},incrementStarts:function(){h++},incrementPauses:function(){Q++,e.incrementPauses()},setPlaylistCounter:function(c){g=c},incrementPlaylistCounter:function(){g++},addPlaybackTime:function(f){if(e.getPlaybackTimestamp()>=0){var c=f-e.getPlaybackTimestamp();e.setPlaybackTimestamp(-1),e.setPlaybackTime(e.getPlaybackTime()+c),y.setPlaybackTime(y.getPlaybackTime()+c)}},addBufferingTime:function(f){if(e.getBufferingTimestamp()>=0){var c=f-e.getBufferingTimestamp();e.setBufferingTimestamp(-1),e.setBufferingTime(e.getBufferingTime()+c),y.setBufferingTime(y.getBufferingTime()+c)}},getBufferingTime:function(){var c=w;return e.getBufferingTimestamp()>=0&&(c+=+(new Date)-e.getBufferingTimestamp()),c},setBufferingTime:function(c){w=c},getPlaybackTime:function(){var c=v;return e.getPlaybackTimestamp()>=0&&(c+=+(new Date)-e.getPlaybackTimestamp()),c},setPlaybackTime:function(c){v=c},getStarts:function(){return h},setStarts:function(c){h=c},getPauses:function(){return Q},setPauses:function(c){Q=c},getRebufferCount:function(){return d},incrementRebufferCount:function(){d++},setRebufferCount:function(c){d=c},didFirstPlayOccurred:function(){return p},setFirstPlayOccurred:function(c){p=c}}),e=new j,m={},y.reset()};return a}(),k=function(){var a=function(aO,aW){function aS(m){var f=0;if(aZ!=null){for(var o=0;o<aZ.length;o++){var l=aZ[o],c=l.playingtime;if(!c||m<c){f=l.interval;break}}}return f}function ab(){e();var f=aS(aN.getClip().getPlaybackTime());if(f>0){var c=af>0?af:f;ay=setTimeout(g,c)}af=0}function p(){e();var c=aS(aN.getClip().getPlaybackTime());af=c-aN.getClip().getPlaybackTime()%c,ay!=null&&e()}function aK(){af=0,a8=0,ai=0}function g(){ai++;var c=ak(M.HEART_BEAT,null);aH(c),af=0,ab()}function e(){ay!=null&&(clearTimeout(ay),ay=null)}function h(){am(),ah=setTimeout(aJ,aj)}function aJ(){var c=ak(M.KEEP_ALIVE,null);aH(c),aL++,h()}function am(){ah!=null&&(clearTimeout(ah),ah=null)}function al(){ar(),aQ.isPauseOnBufferingEnabled()&&aa(q.PAUSED)&&(aM=setTimeout(ad,aB))}function ad(){if(ae==q.PLAYING){aN.incrementRebufferCount(),aN.incrementPauses();var c=ak(M.PAUSE,null);aH(c),aL++,ae=q.PAUSED}}function ar(){aM!=null&&(clearTimeout(aM),aM=null)}function d(c){return c==q.PLAYING||c==q.PAUSED}function b(){aY&&(clearTimeout(aY),aY=null)}function aT(c){return c==M.PLAY?q.PLAYING:c==M.PAUSE?q.PAUSED:c==M.BUFFER?q.BUFFERING:c==M.END?q.IDLE:null}function a4(U,w,l){b();if(l){aY=setTimeout(function(f,c){return function(){a4(f,c)}}(U,w),l)}else{if(aC(U)){var y=ao(),V=a7,m=aF(w),T=V>=0?m-V:0;aG(ao(),w),aI(U,w),ac(ao()),aV(U);for(var R=0,S=au.length;R<S;R++){au[R](y,U,w,T)}a1(w),aN.setRegisters(w,U),aN.getClip().setRegisters(w,U);var Q=ak(q.toEventType(U),w);L.extend(Q,w),aa(aX)&&(aH(Q),ae=aX,aL++)}}}function a1(f){var c=f.ns_st_mp;c!=null&&(ap=c,delete f.ns_st_mp),c=f.ns_st_mv,c!=null&&(aA=c,delete f.ns_st_mv),c=f.ns_st_ec,c!=null&&(aL=Number(c),delete f.ns_st_ec)}function aH(m,f){f===undefined&&(f=!0),f&&aq(m);var w=aQ.getPixelURL();if(av){if(!aE()){var c=an.am,l=an.et,r=c.newApplicationMeasurement(av,l.HIDDEN,m,w);av.getQueue().offer(r)}}else{w&&x.httpGet(C(w,m))}}function aE(){var f=av.getAppContext(),c=av.getSalt(),i=av.getPixelURL();return f==null||c==null||c.length==0||i==null||i.length==0}function aq(c){a0=ak(null),L.extend(a0,c)}function aG(f,m){var l=aF(m);if(f==q.PLAYING){aN.addPlaybackTime(l),p(),am()}else{if(f==q.BUFFERING){aN.addBufferingTime(l),ar()}else{if(f==q.IDLE){var c=L.getKeys(aN.getClip().getLabels());aN.getClip().reset(c)}}}}function aI(i,c){var l=aF(c),f=aD(c);a3=f,i==q.PLAYING?(ab(),h(),aN.getClip().setPlaybackTimestamp(l),aa(i)&&(aN.getClip().incrementStarts(),aN.getStarts()<1&&aN.setStarts(1))):i==q.PAUSED?aa(i)&&aN.incrementPauses():i==q.BUFFERING?(aN.getClip().setBufferingTimestamp(l),u&&al()):i==q.IDLE&&aK()}function aa(c){return c!=q.PAUSED&&c!=q.IDLE||ae!=q.IDLE&&ae!=null?c!=q.BUFFERING&&ae!=c:!1}function aD(c){var f=-1;return c.hasOwnProperty("ns_st_po")&&(f=L.getInteger(c.ns_st_po)),f}function aF(f){var c=-1;return f.hasOwnProperty("ns_ts")&&(c=Number(f.ns_ts)),c}function aC(c){return c!=null&&ao()!=c}function aV(c){aX=c,a7=+(new Date)}function ao(){return aX}function ac(c){a6=c}function aw(){return a6}function ak(){var f,m;arguments.length==1?(f=q.toEventType(aX),m=arguments[0]):(f=arguments[0],m=arguments[1]);var c={};if(typeof document!="undefined"){var l=document;c.c7=l.URL,c.c8=l.title,c.c9=l.referrer}return m!=null&&L.extend(c,m),c.hasOwnProperty("ns_ts")||(c.ns_ts=String(+(new Date))),f!=null&&!c.hasOwnProperty("ns_st_ev")&&(c.ns_st_ev=M.toString(f)),aQ.isPersistentLabelsShared()&&av&&L.extend(c,av.getLabels()),L.extend(c,aQ.getLabels()),ag(f,c),aN.createLabels(f,c),aN.getClip().createLabels(f,c),c.hasOwnProperty("ns_st_mp")||(c.ns_st_mp=ap),c.hasOwnProperty("ns_st_mv")||(c.ns_st_mv=aA),c.hasOwnProperty("ns_st_ub")||(c.ns_st_ub="0"),c.hasOwnProperty("ns_st_br")||(c.ns_st_br="0"),c.hasOwnProperty("ns_st_pn")||(c.ns_st_pn="1"),c.hasOwnProperty("ns_st_tp")||(c.ns_st_tp="1"),c.hasOwnProperty("ns_st_it")||(c.ns_st_it="c"),c.ns_st_sv=J.STREAMSENSE_VERSION,c.ns_type="hidden",c}function ag(f,o){var m=o||{};m.ns_st_ec=String(aL);if(!m.hasOwnProperty("ns_st_po")){var c=a3,l=aF(m);if(f==M.PLAY||f==M.KEEP_ALIVE||f==M.HEART_BEAT||f==null&&aX==q.PLAYING){c+=l-aN.getClip().getPlaybackTimestamp()}m.ns_st_po=L.getInteger(c)}return f==M.HEART_BEAT&&(m.ns_st_hc=String(ai)),m}function az(f){var c=aF(f);c<0&&(f.ns_ts=String(+(new Date)))}function aR(f,c,i){c=c||{},c.ns_st_ad=1,f>=M.AD_PLAY&&f<=M.AD_CLICK&&aQ.notify(f,c,i)}function a5(f,c){aQ.notify(M.CUSTOM,f,c)}var aQ=this,a2=500,aP,aU=null,a7=0,a3=0,aY,a6,aX,aL=0,aN=null,av,v=!0,aM,u=!0,ah,ay,aZ=J.DEFAULT_HEARTBEAT_INTERVAL,aj=J.DEFAULT_KEEP_ALIVE_INTERVAL,aB=J.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,af=0,ai=0,a8=0,ax=!1,ae,ap,aA,a0,au,an={};x.autoSelect(),L.extend(this,{reset:function(c){aN.reset(c),aN.setPlaylistCounter(0),aN.setPlaylistId(+(new Date)+"_1"),aN.getClip().reset(c),c!=null&&!c.isEmpty()?L.filterMap(aP,c):aP={},aL=1,ai=0,p(),aK(),am(),ar(),b(),aX=q.IDLE,a6=null,a7=-1,ae=null,ap=J.DEFAULT_PLAYERNAME,aA=J.STREAMSENSE_VERSION,a0=null},setPauseOnBufferingInterval:function(c){aB=c},getPauseOnBufferingInterval:function(){return aB},setKeepAliveInterval:function(c){aj=c},getKeepAliveInterval:function(){return aj},setHeartbeatIntervals:function(c){aZ=c},notify:function(){var i,r,l,m;r=arguments[0],arguments.length==3?(l=arguments[1],m=arguments[2]):(l={},m=arguments[1]),i=aT(r);var f=L.extend({},l);az(f),f.hasOwnProperty("ns_st_po")||(f.ns_st_po=L.getInteger(m).toString());if(r==M.PLAY||r==M.PAUSE||r==M.BUFFER||r==M.END){aQ.isPausePlaySwitchDelayEnabled()&&d(aX)&&d(i)&&(aX!=q.PLAYING||i!=q.PAUSED||!!aY)?a4(i,f,a2):a4(i,f)}else{var c=ak(r,f);L.extend(c,f),aH(c,!1),aL++}},getLabels:function(){return aP},getState:function(){return aX},setLabels:function(c){c!=null&&(aP==null?aP=c:L.extend(aP,c))},getLabel:function(c){return aP[c]},setLabel:function(f,c){c==null?delete aP[f]:aP[f]=c},setPixelURL:function(y){if(y==null||y.length==0){return null}var o=decodeURIComponent||unescape,Q=y.indexOf("?");if(Q>=0){if(Q<y.length-1){var m=y.substring(Q+1).split("&");for(var r=0,l=m.length;r<l;r++){var c=m[r],w=c.split("=");w.length==2?aQ.setLabel(w[0],o(w[1])):w.length==1&&aQ.setLabel(J.PAGE_NAME_LABEL,o(w[0]))}y=y.substring(0,Q+1)}}else{y+="?"}return aU=y,aU},getPixelURL:function(){return aU?aU:typeof ns_p!="undefined"&&typeof ns_p.src=="string"?aU=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):typeof ns_pixelUrl=="string"?aU=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},isPersistentLabelsShared:function(){return v},setPersistentLabelsShared:function(c){v=c},isPauseOnBufferingEnabled:function(){return u},setPauseOnBufferingEnabled:function(c){u=c},isPausePlaySwitchDelayEnabled:function(){return ax},setPausePlaySwitchDelayEnabled:function(c){ax=c},setPausePlaySwitchDelay:function(c){c&&c>0&&(a2=c)},getPausePlaySwitchDelay:function(){return a2},setClip:function(f,c){var i=!1;return aX==q.IDLE&&(aN.getClip().reset(),aN.getClip().setLabels(f,null),c&&aN.incrementStarts(),i=!0),i},setPlaylist:function(f){var c=!1;return aX==q.IDLE&&(aN.incrementPlaylistCounter(),aN.reset(),aN.getClip().reset(),aN.setLabels(f,null),c=!0),c},importState:function(c){reset();var f=L.extend({},c);aN.setRegisters(f,null),aN.getClip().setRegisters(f,null),a1(f),aL++},exportState:function(){return a0},getVersion:function(){return J.STREAMSENSE_VERSION},addListener:function(c){au.push(c)},removeListener:function(c){au.splice(L.indexOf(c,au),1)},getClip:function(){return aN.getClip()},getPlaylist:function(){return aN}}),L.extend(this,{adNotify:aR,customNotify:a5,viewNotify:function(f,c){f=f||aQ.getPixelURL(),f&&I(f,c)}}),ns_.comScore&&(an=ns_.comScore.exports,av=an.c()),aP={},aL=1,aX=q.IDLE,aN=new O,aM=null,u=!0,ay=null,ai=0,aK(),ah=null,aY=null,ax=!1,ae=null,a3=0,au=[],aQ.reset(),aO&&aQ.setLabels(aO),aW&&aQ.setPixelURL(aW)};return function(Z){function aa(c,b){return ae[ah]||X(c,b)}function ad(){ah=-1;for(var b=0;b<=ab;b++){if(ae.hasOwnProperty(b)){ah=b;break}}return ns_.StreamSense.activeIndex=ah,ah}function X(c,b){return c=c||null,b=b||null,c&&typeof c=="object"&&(b=c,c=null),ae[++ab]=new ns_.StreamSense(b,c),ad(),ae[ab]}function ao(){var d=!1,b=ah;if(typeof arguments[0]=="number"&&isFinite(arguments[0])){b=arguments[0]}else{if(arguments[0] instanceof ns_.StreamSense){for(var c in ae){if(ae[c]===arguments[0]){b=c;break}}}}return ae.hasOwnProperty(b)&&(d=ae[b],delete ae[b],d.reset(),ad()),d}function ak(b){return b=b||{},aa().setPlaylist(b),aa().getPlaylist()}function ag(c,b,d){return c=c||{},typeof b=="number"&&(c.ns_st_cn=b),aa().setClip(c,d),aa().getClip()}function am(c,b,d){return typeof c=="undefined"?!1:(d=d||null,b=b||{},aa().notify(c,b,d))}function ai(b){typeof b!="undefined"&&aa().setLabels(b)}function ac(){return aa().getLabels()}function al(b){typeof b!="undefined"&&aa().getPlaylist().setLabels(b)}function W(){return aa().getPlaylist().getLabels()}function af(b){typeof b!="undefined"&&aa().getClip().setLabels(b)}function aj(){return aa().getClip().getLabels()}function R(b){return aa().reset(b||{})}function an(b){return aa().getPlaylist().reset(b||{})}function V(b){return aa().getClip().reset(b||{})}function Y(b){return b=b||{},aa().viewNotify(null,b)}function Q(c,b){return arguments.length>2&&(c=arguments[1],b=arguments[2]),c=c||{},typeof b=="number"&&(c.ns_st_po=b),aa().customNotify(c,b)}function U(){return aa().exportState()}function e(b){aa().importState(b)}var ae={},ab=-1,ah=-1;L.extend(Z,{activeIndex:ah,newInstance:X,"new":X,destroyInstance:ao,destroy:ao,newPlaylist:ak,newClip:ag,notify:am,setLabels:ai,getLabels:ac,setPlaylistLabels:al,getPlaylistLabels:W,setClipLabels:af,getClipLabels:aj,resetInstance:R,resetPlaylist:an,resetClip:V,viewEvent:Y,customEvent:Q,exportState:U,importState:e})}(a),a}();return k.AdEvents=F,k.PlayerEvents=M,ns_.StreamingTag=ns_.StreamingTag||function(){var a=function(){var b=function(R){function ab(){if(!ns_.comScore&&L.exists(R)){ad=L.isTrue(R.debug);if(L.exists(R.customerC2)){var c=R.secure?"https://sb":"http"+(document.location.href.charAt(4)=="s"?"s://sb":"://b");ag.setPixelURL(c+".scorecardresearch.com/p?c1=2"),ag.setLabel("c2",R.customerC2)}else{ag.setPixelURL(""),ad&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}}ag.setLabel("ns_st_it","r")}function V(c){return L.exists(c)||(c={}),L.exists(c.ns_st_ci)||(c.ns_st_ci="0"),L.exists(c.c3)||(c.c3="*null"),L.exists(c.c4)||(c.c4="*null"),L.exists(c.c6)||(c.c6="*null"),c}function Y(c){return aa>0&&c>=aa?T+=c-aa:T=0,T}function ac(c){ag.getState()!=q.IDLE&&ag.getState()!=q.PAUSED?ag.notify(M.END,Y(c)):ag.getState()==q.PAUSED&&ag.notify(M.END,T)}function e(c){return af("ns_st_ci",W,c)&&af("c3",W,c)&&af("c4",W,c)&&af("c6",W,c)}function af(f,l,h){if(L.exists(f)&&L.exists(l)&&L.exists(h)){var c=l[f],g=h[f];return L.exists(c)&&L.exists(g)&&c===g}return !1}function Q(f,g){ac(f),U++;var c={ns_st_cn:U,ns_st_pn:"1",ns_st_tp:"0"};L.extend(c,g),ag.setClip(c),W=g,aa=f,T=0,ag.notify(M.PLAY,T)}function d(c){var g=+(new Date);ac(g),U++,c=V(c);var f={ns_st_cn:U,ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};L.extend(f,c),ag.setClip(f),T=0,ag.notify(M.PLAY,T),aa=g,w=!1}function v(f,c){var g=+(new Date);f=V(f),ae==Z.None&&(ae=c),w&&ae==c?e(f)?(ag.getClip().setLabels(f),ag.getState()!=q.PLAYING&&(aa=g,ag.notify(M.PLAY,T))):Q(g,f):Q(g,f),w=!0,ae=c}var X=this,U=0,aa=0,T=0,W=null,w=!1,ag=new k,ad=!1,Z={None:0,AudioContent:1,VideoContent:2},ae=Z.None;L.extend(this,{playAdvertisement:function(){ad&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var c={ns_st_ct:"va"};d(c)},playVideoAdvertisement:function(c){var f={ns_st_ct:"va"};c&&L.extend(f,c),d(f)},playAudioAdvertisement:function(c){var f={ns_st_ct:"aa"};c&&L.extend(f,c),d(f)},playContentPart:function(c){ad&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var f={ns_st_ct:"vc"};c&&L.extend(f,c),v(f,Z.VideoContent)},playVideoContentPart:function(c){var f={ns_st_ct:"vc"};c&&L.extend(f,c),v(f,Z.VideoContent)},playAudioContentPart:function(c){var f={ns_st_ct:"ac"};c&&L.extend(f,c),v(f,Z.AudioContent)},stop:function(){var c=+(new Date);ag.notify(M.PAUSE,Y(c))}}),ab()};return function(c){}(b),b}();return a}(),k}();bbcdotcom.objects("bbcdotcom.analytics","create");bbcdotcom.analytics.comScore=(function(){var C="ckpf_uid",ad=bbcdotcom.config,y=bbcdotcom.adverts.keyValues,V=bbcdotcom.sections,S=bbcdotcom.utils,X=bbcdotcom.objects,l=bbcdotcom.analyticsHelper,aa=false,D=true,i=false,I=false,z,W=false,g={},U=["","","",""],H={http:[],cookie:[]},d=[],h=0,c=false,P=false,M,w="ckpf_gnlcs",a="comScore",G="";var n=function(){if(!Date.now){Date.now=function(){return new Date().getTime()}}if(i!==false){return i}else{return Date.now()}};var L=function(){if(I!==false){return I}else{if(typeof navigator!=="undefined"&&typeof navigator.userAgent!=="undefined"){return navigator.userAgent}else{return"na"}}};var B=function(){if(W===false){W=S.getCookie(C);if(typeof W==="undefined"||W.length===0){W=S.generateUuidV4().replace(/-/g,"")+n();S.setCookie(C,W)}}};var t=function(o){var af={},ae;for(ae in o){if(o[ae]!==""&&o[ae]!==null&&o[ae]!=="na"){af[ae]=(isNaN(o[ae])?o[ae]:String(o[ae]))}}return af};var J=function(ai,o,ah,ag,ak,aj){var af;if(!ad.isAnalyticsEnabled()){S.log("did not do tracking because isAnalyticsEnabled=false");if(typeof ak==="function"){ak(false)}return false}B();var ae="/b?c1="+(ag==="page"?2:22)+"&c2="+(typeof o.c2!=="undefined"?o.c2:"");if(ag==="video"){h++;o.ns_st_ec=h}o.c7=ad.getWindowLocation().href;o.c8=document.title;o.c9=document.referrer;o=t(o);for(af in o){if(af!=="c2"){ae+="&"+af+"="+l.encodeValue(o[af])}}if(typeof aj==="undefined"||aj===true){H.http.push(ae);l.loadTrackingImage(a,ae,ak)}else{H.cookie.push(ae);if(typeof ak==="function"){ak()}}S.log("comScore doTrack url:"+ae);return ae};var e=function(o){if(typeof o!=="string"){return o}return o.toLowerCase().replace(/[\s]/g,"_").replace(/[^a-zA-Z0-9\-\._]/g,"").replace(/_{2,}/g,"_")};var E=function(o){return e(l.getPageName())};var ab=function(){return l.getPageNameComScore()};var m=function(ae){var af=l.getPageType(ae).toLowerCase();var o={index:"idx|na",story:"sty|na","story-video":"sty|vid","live-event":"liv|na",video:"map|mps","video-sticky":"vid|sti"};return(typeof o[af]!=="undefined"?o[af]:"na|na")};var K=function(){if((typeof orb!=="undefined"&&typeof orb.fig==="function"&&orb.fig("mb")===1)||ad.getWindowLocation().hostname.search(/m.*.bbc.co/)===0){return"mobile-web"}else{if(ad.isSportApp()){return"mobile-app"}else{return"web"}}};var N=function(){var ae=navigator.cookieEnabled,o;if(ae===false){return ae}document.cookie="cookietest=1";o=document.cookie.indexOf("cookietest=")!==-1;document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT";return o};var A=function(o){if(typeof o!=="object"){o={}}U=l.determineSections(".");var ae=S.getCookie("s_vi");o.b_ad_enabled=(bbcdotcom.config.isAdsEnabled()?1:0);o.b_app_name=U[0]+"|web";o.b_app_type=K();o.b_c9=(document.referrer!==ad.getReferrer()?ad.getReferrer().substr(0,255):"");o.b_collection=(y.get("keyword")!==false?y.get("keyword").toLowerCase():"");o.b_edition=l.getPageEdition().toLowerCase();o.b_s_vi=(typeof ae!=="undefined"?ae:"");o.b_site_channel=U[0];o.b_site_section=(U[1]===U[0]?"":U[1]);o.b_site_subsec1=(U[2]===U[1]?"":U[2]);o.b_site_subsec2=(U[3]===U[2]?"":U[3]);o.b_vs_un="bc";o.c2=ad.getAnalyticsAcctId(a);o.name=ab();o.ns_c="UTF-8";if(W&&N()){o.ns_alias=W}o.ns_site=ad.getAnalyticsSuite(a);return o};var j=function(o){if(typeof o!=="object"){o={}}o.ns__t=n();o.ns_type="hidden";return o};var Q=function(o){if(typeof o!=="object"){o={}}var ae=m();o.b_article_title="";o.b_article_update="";o.b_page_type=ae;if(ae.indexOf("idx")!==0){o.b_article_title=E();o.b_article_update=l.getStoryPublishDate(true)}o.b_article_id=l.getArticleId();return o};var p=function(af){if(typeof af==="undefined"){return false}var ae={promoted:"",channel:U[0],moduleName:"",linkType:"text",linkName:"",linkPosition:"",totalLinks:"",extraLinkInfo:"",section:U[1],pageType:"",placement:""};var ah,o,ag=[];for(ah in af){if(typeof ae[ah]!=="undefined"){ae[ah]=(typeof af[ah]==="undefined"||af[ah]===""||af[ah]===false?"":S.trim(af[ah]))}}for(o in ae){ag.push(ae[o])}return ag.join("|")};var R=function(ah,af){if(!ad.isComScoreEnabled()){return false}if(typeof ah==="undefined"||typeof ah.href==="undefined"){return false}var o=A(),ai=l.getLinkTrackingProperties(ah),ag={},ae=l.normalizeUri(ah.href);if(ai){if(l.isBBCUri(ae)){o.pev1=ae.substr(0,255)}else{/http(|s):\/\/([^\/]+)(.*)?/.test(ae);o.pev1="http"+RegExp.$1+"://"+RegExp.$2}ai.pageType=m(ah.href).substring(0,3).replace("|","");o=j(o);o.b_link=p(ai);l.trackLink(J,w,ae,af,ag,o,undefined)}else{return""}};var Z=function(){if(!ad.isComScoreEnabled()){S.log("did not do tracking because isComScoreEnabled=false");return false}try{var o=A();o=Q(o);J(undefined,o,undefined,"page");if(D){l.applyLinkTrackingToPageElements(R,a)}}catch(ae){S.log('bbcdotcom.analytics.page() exception "'+ae.message+'"')}};var T=function(ae,o){if(!ad.isComScoreEnabled()){S.log("bbcdotcom.analytics did not do tracking because isComScoreEnabled=false");return false}else{if(!M){return false}}o=t(o);S.log('comScore streamSenseSetter method "'+ae+'" keyValues: ',o);if(typeof M==="undefined"){S.log("comScore streamSense not defined");return}switch(ae){case"labels":M.setLabels(o);break;case"playlist":M.setPlaylist(o);break;case"clip":M.setClip(o);break;default:S.log('Unknown method "'+ae+'" for streamSenseSetter()');break}d.push({type:"set",method:ae,keyValues:o})};var r=function(ae,ag){if(!ad.isComScoreEnabled()){S.log("bbcdotcom.analytics did not do tracking because isComScoreEnabled=false");return false}else{if(!M){return false}}var af={};if(ae==="seek"){ae="pause";af.ns_st_ui="seek";S.log('comScore streamSenseNotify "seek"')}if(typeof ns_.StreamSense.PlayerEvents[ae.toUpperCase()]==="undefined"){S.log('Invalid streamSense.notify() event "'+ae+'"')}if(typeof M==="undefined"){S.log("comScore streamSense not defined");return}var o=ns_.StreamSense.PlayerEvents[ae.toUpperCase()];M.notify(o,af,S.secondsToMilliSeconds(ag));d.push({type:"notify",event:ae,props:af,nsEvent:o,headPositionSeconds:ag})};var k=function(ag,ah){if(!ad.isComScoreEnabled()){S.log("bbcdotcom.analytics did not do tracking because isComScoreEnabled=false");return false}else{if(!M){return false}}var ak=(typeof ag.mediaLength!=="undefined"?S.secondsToMilliSeconds(ag.mediaLength):0),aj="",ai=(ak===0?true:false),ae=(typeof ag.adId!=="undefined"?ag.adId:""),af,o;if(ak===0||isNaN(ak)){ak=""}if(ah==="advert"){aj="pre-roll|"+ae}else{if(typeof ag.mediaName!=="undefined"){aj=e(ag.mediaName)}}o={b_av_adid:ae,b_av_date:G,ns_st_ad:(ah==="advert"?"pre-roll":""),ns_st_adid:ae,ns_st_ci:aj,ns_st_cl:ak,ns_st_cn:(P?2:1),ns_st_ct:(ah==="advert"?"va11":(ai?"vc13":"vc11")),ns_st_el:ak,ns_st_li:(ah!=="advert"&&ai?1:""),ns_st_pn:1,ns_st_pr:aj,ns_st_pu:"bbc",ns_st_tp:1,ns_st_ty:(ah==="advert"?"ad":(ai?"live":"vod"))};return o};var u=function(ae){S.log("comscore startPlaylist");c=true;B();P=false;var o=A({b_av_action:(ae.videoPlaysAutomatically===true?"auto":"manual"),ns_st_br:G,ns_st_cs:G,ns_st_it:"c",ns_st_mp:(typeof ae.mediaPlayerName!=="undefined"?ae.mediaPlayerName:G),ns_st_mv:G,ns_st_vo:G,ns_st_ws:"norm"});o=Q(o);T("labels",o);var af={b_av_ad:(bbcdotcom.config.isAdsEnabled()?1:0),b_av_format:"video",b_av_plist:"multi",b_av_method:"stream",b_av_source:"bbc",c2:ad.getAnalyticsAcctId(a),ns_st_pl:(typeof ae.mediaName!=="undefined"?e(ae.mediaName):G)};T("playlist",af)};var q=function(ae){ae.mediaLength=undefined;var o=k(ae,"advert"),af=0;T("clip",o);r("play",af);P=true};var s=function(ae){var o=M.getClip(),af=(typeof o!=="undefined"&&typeof o.getPlaybackTime==="function"?o.getPlaybackTime():0);o.setLabel("ns_st_cl",String(af));o.setLabel("ns_st_el",String(af));r("end",(af/1000))};var f=function(ae){var o=k(ae,"play");T("clip",o);r("play",ae.mediaOffset)};var Y=function(o){r("pause",o.mediaOffset)};var F=function(o){r("play",o.mediaOffset)};var O=function(o){r("seek",o.mediaOffset)};var ac=function(o){r("play",o.mediaOffset)};var b=function(o){r("end",(parseInt(o.mediaOffset,10)===0?o.mediaLength:o.mediaOffset))};var x=function(o){};var v=function(ae,ag){if(!ad.isComScoreEnabled()){S.log("bbcdotcom.analytics did not do tracking because isComScoreEnabled=false");return false}var o={},af="page";U=l.determineSections();ae=ae.replace(/\./g,":");if(ae==="continuousPlay:mediaStarted"){S.log("comScore trackEvent - continuousPlay:mediaStarted with:",ag);u(ag);return}switch(ae){case"videoExperience:shareTools:clicked":break;case"videoExperience:showMore:clicked":break;case"videoExperience:stickyPlayer:entered":break;case"videoExperience:stickyPlayer:exited":break;case"videoExperience:stickyPlayer:expanded":break;case"videoExperience:stickyPlayer:collapsed":break;case"videoExperience:player:enteredFullScreen":break;case"continuousPlay:dismissed":break;case"continuousPlay:openedMoreVideos":break;default:S.log('trackEvent - unknown event "'+ae+'"');return}S.log("trackEvent: "+ae,ag,o)};return{init:function(){B();l.processDelayTrackingCookie(a,w,H);M=new ns_.StreamSense({},ad.getAnalyticsUri(a)+"/p?c1=22&c2="+ad.getAnalyticsAcctId(a));return this},setSuite:function(){return this},setTrackingValues:function(){return this},track:function(){return this},trackEvent:v,diagnostics:function(){return this},page:Z,startPlaylist:u,startAdvert:q,endAdvert:s,startProgramme:f,startPause:Y,endPause:F,startSeek:O,endSeek:ac,endProgramme:b,endPlaylist:x,isPlaylistStarted:function(){return c},getScwForApp:function(){return this},setApp:function(){return this},appPage:function(){return this},r:function(){i=false;I=false;W=false;aa=false;D=true;z=undefined;g={};H={http:[],cookie:[]};d=[];c=false;S.deleteCookie(w);h=0},setRandom:function(o){z=o},setTimestamp:function(o){i=o},setUserAgent:function(o){I=o},setStreamSense:function(o){M=o},setAllowDiagnostics:function(o){aa=(o?true:false)},setAllowLinkTracking:function(o){D=(o?true:false)},getTrackingRequests:function(o){if(typeof o==="undefined"||(o!=="http"&&o!=="cookie")){throw new Error('Invalid type provided to getTrackingRequests() "'+o+'"')}return H[o]},getVideoEvents:function(){return d},getTrackingValue:function(ae){var af=g;var o;for(o in g){af[o]=g[o]}return(af.hasOwnProperty(ae)?af[ae]:"")},getSectionStrings:function(){return U},link:R,setUserTrackingCookie:function(o){W=o},getUserTrackingCookie:function(){return W}}}());bbcdotcom.analytics.registerVendor("bbcdotcom.analytics.comScore",bbcdotcom.analytics.comScore);