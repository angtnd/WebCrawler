/*
 * Copyright 2015 Disney
 * All Rights Reserved
 *
 * Underscore.js 1.3.3
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * MIT License
 *
 * Backbone.js 1.0.0
 * Copyright 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * MIT License
 *
 * Hogan.js 2.0.0
 * Copyright 2012 Twitter Inc.
 * Apache License, Version 2.0
 */
if(function(){function e(t,i,a){if(t===i)return 0!==t||1/t==1/i;if(null==t||null==i)return t===i;if(t._chain&&(t=t._wrapped),i._chain&&(i=i._wrapped),t.isEqual&&x.isFunction(t.isEqual))return t.isEqual(i);if(i.isEqual&&x.isFunction(i.isEqual))return i.isEqual(t);var n=c.call(t);if(n!=c.call(i))return!1;switch(n){case"[object String]":return t==String(i);case"[object Number]":return t!=+t?i!=+i:0==t?1/t==1/i:t==+i;case"[object Date]":case"[object Boolean]":return+t==+i;case"[object RegExp]":return t.source==i.source&&t.global==i.global&&t.multiline==i.multiline&&t.ignoreCase==i.ignoreCase}if("object"!=typeof t||"object"!=typeof i)return!1;for(var r=a.length;r--;)if(a[r]==t)return!0;a.push(t);var s=0,o=!0;if("[object Array]"==n){if(s=t.length,o=s==i.length)for(;s--&&(o=s in t==s in i&&e(t[s],i[s],a)););}else{if("constructor"in t!="constructor"in i||t.constructor!=i.constructor)return!1;for(var l in t)if(x.has(t,l)&&(s++,!(o=x.has(i,l)&&e(t[l],i[l],a))))break;if(o){for(l in i)if(x.has(i,l)&&!s--)break;o=!s}}return a.pop(),o}var t=this,i=t._,a={},n=Array.prototype,r=Object.prototype,s=Function.prototype,o=n.slice,l=n.unshift,c=r.toString,d=r.hasOwnProperty,u=n.forEach,h=n.map,f=n.reduce,p=n.reduceRight,m=n.filter,g=n.every,v=n.some,b=n.indexOf,y=n.lastIndexOf,k=Array.isArray,w=Object.keys,_=s.bind,x=function(e){return new R(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):t._=x,x.VERSION="1.3.3";var A=x.each=x.forEach=function(e,t,i){if(null!=e)if(u&&e.forEach===u)e.forEach(t,i);else if(e.length===+e.length){for(var n=0,r=e.length;r>n;n++)if(n in e&&t.call(i,e[n],n,e)===a)return}else for(var s in e)if(x.has(e,s)&&t.call(i,e[s],s,e)===a)return};x.map=x.collect=function(e,t,i){var a=[];return null==e?a:h&&e.map===h?e.map(t,i):(A(e,function(e,n,r){a[a.length]=t.call(i,e,n,r)}),e.length===+e.length&&(a.length=e.length),a)},x.reduce=x.foldl=x.inject=function(e,t,i,a){var n=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return a&&(t=x.bind(t,a)),n?e.reduce(t,i):e.reduce(t);if(A(e,function(e,r,s){n?i=t.call(a,i,e,r,s):(i=e,n=!0)}),!n)throw new TypeError("Reduce of empty array with no initial value");return i},x.reduceRight=x.foldr=function(e,t,i,a){var n=arguments.length>2;if(null==e&&(e=[]),p&&e.reduceRight===p)return a&&(t=x.bind(t,a)),n?e.reduceRight(t,i):e.reduceRight(t);var r=x.toArray(e).reverse();return a&&!n&&(t=x.bind(t,a)),n?x.reduce(r,t,i,a):x.reduce(r,t)},x.find=x.detect=function(e,t,i){var a;return C(e,function(e,n,r){return t.call(i,e,n,r)?(a=e,!0):void 0}),a},x.filter=x.select=function(e,t,i){var a=[];return null==e?a:m&&e.filter===m?e.filter(t,i):(A(e,function(e,n,r){t.call(i,e,n,r)&&(a[a.length]=e)}),a)},x.reject=function(e,t,i){var a=[];return null==e?a:(A(e,function(e,n,r){t.call(i,e,n,r)||(a[a.length]=e)}),a)},x.every=x.all=function(e,t,i){var n=!0;return null==e?n:g&&e.every===g?e.every(t,i):(A(e,function(e,r,s){return(n=n&&t.call(i,e,r,s))?void 0:a}),!!n)};var C=x.some=x.any=function(e,t,i){t||(t=x.identity);var n=!1;return null==e?n:v&&e.some===v?e.some(t,i):(A(e,function(e,r,s){return n||(n=t.call(i,e,r,s))?a:void 0}),!!n)};x.include=x.contains=function(e,t){var i=!1;return null==e?i:b&&e.indexOf===b?-1!=e.indexOf(t):i=C(e,function(e){return e===t})},x.invoke=function(e,t){var i=o.call(arguments,2);return x.map(e,function(e){return(x.isFunction(t)?t||e:e[t]).apply(e,i)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.max=function(e,t,i){if(!t&&x.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var a={computed:-1/0};return A(e,function(e,n,r){var s=t?t.call(i,e,n,r):e;s>=a.computed&&(a={value:e,computed:s})}),a.value},x.min=function(e,t,i){if(!t&&x.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var a={computed:1/0};return A(e,function(e,n,r){var s=t?t.call(i,e,n,r):e;s<a.computed&&(a={value:e,computed:s})}),a.value},x.shuffle=function(e){var t,i=[];return A(e,function(e,a){t=Math.floor(Math.random()*(a+1)),i[a]=i[t],i[t]=e}),i},x.sortBy=function(e,t,i){var a=x.isFunction(t)?t:function(e){return e[t]};return x.pluck(x.map(e,function(e,t,n){return{value:e,criteria:a.call(i,e,t,n)}}).sort(function(e,t){var i=e.criteria,a=t.criteria;return void 0===i?1:void 0===a?-1:a>i?-1:i>a?1:0}),"value")},x.groupBy=function(e,t){var i={},a=x.isFunction(t)?t:function(e){return e[t]};return A(e,function(e,t){var n=a(e,t);(i[n]||(i[n]=[])).push(e)}),i},x.sortedIndex=function(e,t,i){i||(i=x.identity);for(var a=0,n=e.length;n>a;){var r=a+n>>1;i(e[r])<i(t)?a=r+1:n=r}return a},x.toArray=function(e){return e?x.isArray(e)?o.call(e):x.isArguments(e)?o.call(e):e.toArray&&x.isFunction(e.toArray)?e.toArray():x.values(e):[]},x.size=function(e){return x.isArray(e)?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,i){return null==t||i?e[0]:o.call(e,0,t)},x.initial=function(e,t,i){return o.call(e,0,e.length-(null==t||i?1:t))},x.last=function(e,t,i){return null==t||i?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},x.rest=x.tail=function(e,t,i){return o.call(e,null==t||i?1:t)},x.compact=function(e){return x.filter(e,function(e){return!!e})},x.flatten=function(e,t){return x.reduce(e,function(e,i){return x.isArray(i)?e.concat(t?i:x.flatten(i)):(e[e.length]=i,e)},[])},x.without=function(e){return x.difference(e,o.call(arguments,1))},x.uniq=x.unique=function(e,t,i){var a=i?x.map(e,i):e,n=[];return e.length<3&&(t=!0),x.reduce(a,function(i,a,r){return(t?x.last(i)===a&&i.length:x.include(i,a))||(i.push(a),n.push(e[r])),i},[]),n},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=x.intersect=function(e){var t=o.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=x.flatten(o.call(arguments,1),!0);return x.filter(e,function(e){return!x.include(t,e)})},x.zip=function(){for(var e=o.call(arguments),t=x.max(x.pluck(e,"length")),i=new Array(t),a=0;t>a;a++)i[a]=x.pluck(e,""+a);return i},x.indexOf=function(e,t,i){if(null==e)return-1;var a,n;if(i)return a=x.sortedIndex(e,t),e[a]===t?a:-1;if(b&&e.indexOf===b)return e.indexOf(t);for(a=0,n=e.length;n>a;a++)if(a in e&&e[a]===t)return a;return-1},x.lastIndexOf=function(e,t){if(null==e)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);for(var i=e.length;i--;)if(i in e&&e[i]===t)return i;return-1},x.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var a=Math.max(Math.ceil((t-e)/i),0),n=0,r=new Array(a);a>n;)r[n++]=e,e+=i;return r};var S=function(){};x.bind=function(e,t){var i,a;if(e.bind===_&&_)return _.apply(e,o.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return a=o.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,a.concat(o.call(arguments)));S.prototype=e.prototype;var n=new S,r=e.apply(n,a.concat(o.call(arguments)));return Object(r)===r?r:n}},x.bindAll=function(e){var t=o.call(arguments,1);return 0==t.length&&(t=x.functions(e)),A(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var i={};return t||(t=x.identity),function(){var a=t.apply(this,arguments);return x.has(i,a)?i[a]:i[a]=e.apply(this,arguments)}},x.delay=function(e,t){var i=o.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(o.call(arguments,1)))},x.throttle=function(e,t){var i,a,n,r,s,o,l=x.debounce(function(){s=r=!1},t);return function(){i=this,a=arguments;var c=function(){n=null,s&&e.apply(i,a),l()};return n||(n=setTimeout(c,t)),r?s=!0:o=e.apply(i,a),l(),r=!0,o}},x.debounce=function(e,t,i){var a;return function(){var n=this,r=arguments,s=function(){a=null,i||e.apply(n,r)};i&&!a&&e.apply(n,r),clearTimeout(a),a=setTimeout(s,t)}},x.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments))}},x.wrap=function(e,t){return function(){var i=[e].concat(o.call(arguments,0));return t.apply(this,i)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)x.has(e,i)&&(t[t.length]=i);return t},x.values=function(e){return x.map(e,x.identity)},x.functions=x.methods=function(e){var t=[];for(var i in e)x.isFunction(e[i])&&t.push(i);return t.sort()},x.extend=function(e){return A(o.call(arguments,1),function(t){for(var i in t)e[i]=t[i]}),e},x.pick=function(e){var t={};return A(x.flatten(o.call(arguments,1)),function(i){i in e&&(t[i]=e[i])}),t},x.defaults=function(e){return A(o.call(arguments,1),function(t){for(var i in t)null==e[i]&&(e[i]=t[i])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e},x.isEqual=function(t,i){return e(t,i,[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!(!e||1!=e.nodeType)},x.isArray=k||function(e){return"[object Array]"==c.call(e)},x.isObject=function(e){return e===Object(e)},x.isArguments=function(e){return"[object Arguments]"==c.call(e)},x.isArguments(arguments)||(x.isArguments=function(e){return!(!e||!x.has(e,"callee"))}),x.isFunction=function(e){return"[object Function]"==c.call(e)},x.isString=function(e){return"[object String]"==c.call(e)},x.isNumber=function(e){return"[object Number]"==c.call(e)},x.isFinite=function(e){return x.isNumber(e)&&isFinite(e)},x.isNaN=function(e){return e!==e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},x.isDate=function(e){return"[object Date]"==c.call(e)},x.isRegExp=function(e){return"[object RegExp]"==c.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return d.call(e,t)},x.noConflict=function(){return t._=i,this},x.identity=function(e){return e},x.times=function(e,t,i){for(var a=0;e>a;a++)t.call(i,a)},x.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},x.result=function(e,t){if(null==e)return null;var i=e[t];return x.isFunction(i)?i.call(e):i},x.mixin=function(e){A(x.functions(e),function(t){B(t,x[t]=e[t])})};var T=0;x.uniqueId=function(e){var t=T++;return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/.^/,E={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var I in E)E[E[I]]=I;var L=/\\|'|\r|\n|\t|\u2028|\u2029/g,M=/\\(\\|'|r|n|t|u2028|u2029)/g,D=function(e){return e.replace(M,function(e,t){return E[t]})};x.template=function(e,t,i){i=x.defaults(i||{},x.templateSettings);var a="__p+='"+e.replace(L,function(e){return"\\"+E[e]}).replace(i.escape||P,function(e,t){return"'+\n_.escape("+D(t)+")+\n'"}).replace(i.interpolate||P,function(e,t){return"'+\n("+D(t)+")+\n'"}).replace(i.evaluate||P,function(e,t){return"';\n"+D(t)+"\n;__p+='"})+"';\n";i.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var n=new Function(i.variable||"obj","_",a);if(t)return n(t,x);var r=function(e){return n.call(this,e,x)};return r.source="function("+(i.variable||"obj")+"){\n"+a+"}",r},x.chain=function(e){return x(e).chain()};var R=function(e){this._wrapped=e};x.prototype=R.prototype;var O=function(e,t){return t?x(e).chain():e},B=function(e,t){R.prototype[e]=function(){var e=o.call(arguments);return l.call(e,this._wrapped),O(t.apply(x,e),this._chain)}};x.mixin(x),A(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];R.prototype[e]=function(){var i=this._wrapped;t.apply(i,arguments);var a=i.length;return"shift"!=e&&"splice"!=e||0!==a||delete i[0],O(i,this._chain)}}),A(["concat","join","slice"],function(e){var t=n[e];R.prototype[e]=function(){return O(t.apply(this._wrapped,arguments),this._chain)}}),R.prototype.chain=function(){return this._chain=!0,this},R.prototype.value=function(){return this._wrapped}}.call(this),function(){var e,t=this,i=t.Backbone,a=[],n=a.push,r=a.slice,s=a.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.0.0";var o=t._;o||"undefined"==typeof require||(o=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=e.Events={on:function(e,t,i){if(!d(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var a=this._events[e]||(this._events[e]=[]);return a.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,i){if(!d(this,"once",e,[t,i])||!t)return this;var a=this,n=o.once(function(){a.off(e,n),t.apply(this,arguments)});return n._callback=t,this.on(e,n,i)},off:function(e,t,i){var a,n,r,s,l,c,u,h;if(!this._events||!d(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(s=e?[e]:o.keys(this._events),l=0,c=s.length;c>l;l++)if(e=s[l],r=this._events[e]){if(this._events[e]=a=[],t||i)for(u=0,h=r.length;h>u;u++)n=r[u],(t&&t!==n.callback&&t!==n.callback._callback||i&&i!==n.context)&&a.push(n);a.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!d(this,"trigger",e,t))return this;var i=this._events[e],a=this._events.all;return i&&u(i,t),a&&u(a,arguments),this},stopListening:function(e,t,i){var a=this._listeners;if(!a)return this;var n=!t&&!i;"object"==typeof t&&(i=this),e&&((a={})[e._listenerId]=e);for(var r in a)a[r].off(t,i,this),n&&delete this._listeners[r];return this}},c=/\s+/,d=function(e,t,i,a){if(!i)return!0;if("object"==typeof i){for(var n in i)e[t].apply(e,[n,i[n]].concat(a));return!1}if(c.test(i)){for(var r=i.split(c),s=0,o=r.length;o>s;s++)e[t].apply(e,[r[s]].concat(a));return!1}return!0},u=function(e,t){var i,a=-1,n=e.length,r=t[0],s=t[1],o=t[2];switch(t.length){case 0:for(;++a<n;)(i=e[a]).callback.call(i.ctx);return;case 1:for(;++a<n;)(i=e[a]).callback.call(i.ctx,r);return;case 2:for(;++a<n;)(i=e[a]).callback.call(i.ctx,r,s);return;case 3:for(;++a<n;)(i=e[a]).callback.call(i.ctx,r,s,o);return;default:for(;++a<n;)(i=e[a]).callback.apply(i.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};o.each(h,function(e,t){l[t]=function(t,i,a){var n=this._listeners||(this._listeners={}),r=t._listenerId||(t._listenerId=o.uniqueId("l"));return n[r]=t,"object"==typeof i&&(a=this),t[e](i,a,this),this}}),l.bind=l.on,l.unbind=l.off,o.extend(e,l);var f=e.Model=function(e,t){var i,a=e||{};t||(t={}),this.cid=o.uniqueId("c"),this.attributes={},o.extend(this,o.pick(t,p)),t.parse&&(a=this.parse(a,t)||{}),(i=o.result(this,"defaults"))&&(a=o.defaults({},a,i)),this.set(a,t),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];o.extend(f.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return o.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return o.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var a,n,r,s,l,c,d,u;if(null==e)return this;if("object"==typeof e?(n=e,i=t):(n={})[e]=t,i||(i={}),!this._validate(n,i))return!1;r=i.unset,l=i.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=o.clone(this.attributes),this.changed={}),u=this.attributes,d=this._previousAttributes,this.idAttribute in n&&(this.id=n[this.idAttribute]);for(a in n)t=n[a],o.isEqual(u[a],t)||s.push(a),o.isEqual(d[a],t)?delete this.changed[a]:this.changed[a]=t,r?delete u[a]:u[a]=t;if(!l){s.length&&(this._pending=!0);for(var h=0,f=s.length;f>h;h++)this.trigger("change:"+s[h],this,u[s[h]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,o.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,o.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!o.isEmpty(this.changed):o.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?o.clone(this.changed):!1;var t,i=!1,a=this._changing?this._previousAttributes:this.attributes;for(var n in e)o.isEqual(a[n],t=e[n])||((i||(i={}))[n]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:function(e){e=e?o.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(a){return t.set(t.parse(a,e),e)?(i&&i(t,a,e),void t.trigger("sync",t,a,e)):!1},F(this,e),this.sync("read",this,e)},save:function(e,t,i){var a,n,r,s=this.attributes;if(null==e||"object"==typeof e?(a=e,i=t):(a={})[e]=t,!(!a||i&&i.wait||this.set(a,i)))return!1;if(i=o.extend({validate:!0},i),!this._validate(a,i))return!1;a&&i.wait&&(this.attributes=o.extend({},s,a)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(e){l.attributes=s;var t=l.parse(e,i);return i.wait&&(t=o.extend(a||{},t)),o.isObject(t)&&!l.set(t,i)?!1:(c&&c(l,e,i),void l.trigger("sync",l,e,i))},F(this,i),n=this.isNew()?"create":i.patch?"patch":"update","patch"===n&&(i.attrs=a),r=this.sync(n,this,i),a&&i.wait&&(this.attributes=s),r},destroy:function(e){e=e?o.clone(e):{};var t=this,i=e.success,a=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&a(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;F(this,e);var n=this.sync("delete",this,e);return e.wait||a(),n},url:function(){var e=o.result(this,"urlRoot")||o.result(this.collection,"url")||B();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},o.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=o.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,o.extend(t||{},{validationError:i})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];o.each(m,function(e){f.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),o[e].apply(o,t)}});var g=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,o.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},b={add:!0,merge:!1,remove:!1};o.extend(g.prototype,l,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,o.defaults(t||{},b))},remove:function(e,t){e=o.isArray(e)?e.slice():[e],t||(t={});var i,a,n,r;for(i=0,a=e.length;a>i;i++)r=this.get(e[i]),r&&(delete this._byId[r.id],delete this._byId[r.cid],n=this.indexOf(r),this.models.splice(n,1),this.length--,t.silent||(t.index=n,r.trigger("remove",r,this,t)),this._removeReference(r));return this},set:function(e,t){t=o.defaults(t||{},v),t.parse&&(e=this.parse(e,t)),o.isArray(e)||(e=e?[e]:[]);var i,a,r,l,c,d=t.at,u=this.comparator&&null==d&&t.sort!==!1,h=o.isString(this.comparator)?this.comparator:null,f=[],p=[],m={};for(i=0,a=e.length;a>i;i++)(r=this._prepareModel(e[i],t))&&((l=this.get(r))?(t.remove&&(m[l.cid]=!0),t.merge&&(l.set(r.attributes,t),u&&!c&&l.hasChanged(h)&&(c=!0))):t.add&&(f.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(t.remove){for(i=0,a=this.length;a>i;++i)m[(r=this.models[i]).cid]||p.push(r);p.length&&this.remove(p,t)}if(f.length&&(u&&(c=!0),this.length+=f.length,null!=d?s.apply(this.models,[d,0].concat(f)):n.apply(this.models,f)),c&&this.sort({silent:!0}),t.silent)return this;for(i=0,a=f.length;a>i;i++)(r=f[i]).trigger("add",r,this,t);return c&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var i=0,a=this.models.length;a>i;i++)this._removeReference(this.models[i]);return t.previousModels=this.models,this._reset(),this.add(e,o.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,o.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,o.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return o.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,i){t||(t=this.comparator);var a=o.isFunction(t)?t:function(e){return e.get(t)};return o.sortedIndex(this.models,e,a,i)},pluck:function(e){return o.invoke(this.models,"get",e)},fetch:function(e){e=e?o.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(a){var n=e.reset?"reset":"set";i[n](a,e),t&&t(i,a,e),i.trigger("sync",i,a,e)},F(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?o.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,a=t.success;return t.success=function(n){t.wait&&i.add(e,t),a&&a(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var i=new this.model(e,t);return i._validate(e,t)?i:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,a){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,a),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];o.each(y,function(e){g.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),o[e].apply(o,t)}});var k=["groupBy","countBy","sortBy"];o.each(k,function(e){g.prototype[e]=function(t,i){var a=o.isFunction(t)?t:function(e){return e.get(t)};return o[e](this.models,a,i)}});var w=e.View=function(e){this.cid=o.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];o.extend(w.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=o.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(o.isFunction(i)||(i=this[e[t]]),i){var a=t.match(_),n=a[1],r=a[2];i=o.bind(i,this),n+=".delegateEvents"+this.cid,""===r?this.$el.on(n,i):this.$el.on(n,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=o.extend({},o.result(this,"options"),e)),o.extend(this,o.pick(e,x)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(o.result(this,"el"),!1);else{var t=o.extend({},o.result(this,"attributes"));this.id&&(t.id=o.result(this,"id")),this.className&&(t["class"]=o.result(this,"className"));var i=e.$("<"+o.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,a){var n=A[t];o.defaults(a||(a={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:n,dataType:"json"};if(a.url||(r.url=o.result(i,"url")||B()),null!=a.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(a.attrs||i.toJSON(a))),a.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),a.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){r.type="POST",a.emulateJSON&&(r.data._method=n);var s=a.beforeSend;a.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",n),s?s.apply(this,arguments):void 0}}"GET"===r.type||a.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=a.xhr=e.ajax(o.extend(r,a));return i.trigger("request",i,l,a),l};var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var C=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,P=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(C.prototype,l,{initialize:function(){},route:function(t,i,a){o.isRegExp(t)||(t=this._routeToRegExp(t)),o.isFunction(i)&&(a=i,i=""),a||(a=this[i]);var n=this;return e.history.route(t,function(r){var s=n._extractParameters(t,r);a&&a.apply(n,s),n.trigger.apply(n,["route:"+i].concat(s)),n.trigger("route",i,s),e.history.trigger("route",n,i,s)}),this},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=o.result(this,"routes");for(var e,t=o.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(E,"\\$&").replace(S,"(?:$1)?").replace(T,function(e,t){return t?e:"([^/]+)"}).replace(P,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return o.map(i,function(e){return e?decodeURIComponent(e):null})}});var I=e.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},L=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,D=/msie [\w.]+/,R=/\/$/;I.started=!1,o.extend(I.prototype,l,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var i=this.root.replace(R,"");e.indexOf(i)||(e=e.substr(i.length))}else e=this.getHash();return e.replace(L,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=o.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),a=document.documentMode,n=D.exec(navigator.userAgent.toLowerCase())&&(!a||7>=a);this.root=("/"+this.root+"/").replace(M,"/"),n&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location,s=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&r.hash&&(this.fragment=this.getHash().replace(L,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),i=o.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return i},navigate:function(e,t){if(!I.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var i=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,i){if(i){var a=e.href.replace(/(javascript:|#).*$/,"");e.replace(a+"#"+t)}else e.hash="#"+t}}),e.history=new I;var O=function(e,t){var i,a=this;i=e&&o.has(e,"constructor")?e.constructor:function(){return a.apply(this,arguments)},o.extend(i,a,t);var n=function(){this.constructor=i};return n.prototype=a.prototype,i.prototype=new n,e&&o.extend(i.prototype,e),i.__super__=a.prototype,i};f.extend=g.extend=C.extend=w.extend=I.extend=O;var B=function(){throw new Error('A "url" property or function must be specified')},F=function(e,t){var i=t.error;t.error=function(a){i&&i(e,a,t),e.trigger("error",e,a,t)}}}.call(this),function(e){"use strict";var t=e.jQuery,i=e._,a=e.Backbone,n=i.sortedIndex,r=a.Events,s=a.View,o=s.prototype.remove,l="breakpoints",c=function(e,t,i){var a=n(i,e+1),r=n(i,t+1);return a!==r?i.slice(Math.min(a,r),Math.max(a,r)):[]},d=a.Resize={trigger:r.trigger,width:function(){return e.Math.max(t(e).width(),e.innerWidth||0)}};d[l]=[],i.each(["on","off","bind","unbind"],function(t){d[t]=function(a,n,s){r[t].call(this,a,n,s),this[l]=i.compact(i.map(i.keys(this._events||{}),function(t){return e.parseInt(t)})).sort(function(e,t){return e-t})}}),a.View=s.extend({constructor:function(e){s.call(this,e),this[l]&&d.on(this[l],this.resize,this)},resize:function(){this.render()},remove:function(){return this[l]&&d.off(this[l],this.resize,this),o.call(this)}}),t(function(){var i=d.width();t(e).resize(function(){var e,t=d.width();t!==i&&(e=c(i,t,d[l]),e.length&&d.trigger(e.join(" "),t,t>i?"up":"down"),i=t)})})}(this),function(e){"use strict";var t=e.Spatula={},i=e.jQuery,a=e._,n=e.Backbone,r=a.isFunction,s=a.map,o=t.whenAll=function(e){return i.when.apply(i,e||[])},l=t.tryCall=function(e,t){var i=e&&e[t];return r(i)?i.apply(e,a.rest(arguments,2)):void 0},c={},d={},u={model:!0,collection:!0},h=[],f=function(e,t,i){c[e]=t,d[e]=i};t.ContainerView=n.View.extend({mod:0,transition:function(e){if(e===this.current)return e.render();var t=this,a=++t.mod,n=t.current,r=e.el.parentNode===t.el,c=o();return t.current=e,t.$el.css("minHeight",t.$el.height()),n||r||t.$el.empty(),t.trigger("begin",e),n&&(n.hide&&(c=i.when(n.hide(),c)),c.done(function(){n.remove()})),c=o(s(this._cb,function(t){return t.call(this,e)}).concat([l(e,"load"),c])),c.fail(function(){var i=Array.prototype.slice.call(arguments);t.mod===a&&(t.current=null,t.$el.empty(),t.trigger.apply(t,["error",e].concat(i)))
}),c=c.pipe(function(){return t.mod===a?(e.render(),(n||!r)&&t.$el.empty().prepend(e.el),l(e,"ready"),t.trigger("ready",e),l(e,"show")):void 0}),c.pipe(function(){return t.mod!==a?i.Deferred().reject():(t.$el.css("minHeight",""),void t.trigger("end",e))})},loader:function(e){(this._cb||(this._cb=[])).push(e)},render:function(){return l(this.current,"render"),this},ready:function(){return l(this.current,"ready"),this}}),t.RichView=n.View.extend({assets:u,load:function(e,t){var i=this;return i._load||(i._load=o(s(i.assets,function(e,t){return c[t].call(i,e).done(function(){i.trigger("load:"+t)})})).done(function(){i.trigger("load")})),i._load.then(e,t)},render:function(){var e=this,t=e.load();return"resolved"===t.state()?e.safeRender():e._render||(e._render=!0,t.then(function(){e.safeRender()})),e},safeRender:function(){},remove:function(){var e=this;return e.destroy(),e.trigger("destroy"),e.off(),a.each(e.assets,function(e,t){l(d,t,e)}),n.View.prototype.remove.apply(e,arguments),e},destroy:function(){}},{assetLoader:f}),f("scripts",function(e){return e=a.difference(e,h),o(s(e,function(e){return h.push(e),i.ajax(e,{dataType:"script",cache:!0,error:function(){h=a.without(h,e)}})}))}),i(function(){h=a.union(h,i("script[src]").not("[async]").map(function(){return i(this).attr("src")}).get())}),f("styles",function(e){return o(s(e,function(e){i("<link/>",{"class":"css-"+this.cid,rel:"stylesheet",type:"text/css",href:e}).appendTo("head")}))},function(){i("link.css-"+this.cid).remove()}),f("templates",function(e,t){return t||(t=this.templates={}),o(s(e,function(e,a){return i.ajax(e,{cache:!0,success:function(e){t[a]=e}})}))}),f("data",function(e){var t=this;return i.ajax(e,{dataType:"json",success:function(e){t.data=e}})}),a.each(u,function(e,t){f(t,function(e){return e=r(e.fetch)?e:this[t],l(e,"fetch")||o()})})}(this),!jQuery.support.cors&&window.XDomainRequest){var httpRegEx=/^https?:\/\//i,getOrPostRegEx=/^get|post$/i,sameSchemeRegEx=new RegExp("^"+location.protocol,"i"),xmlRegEx=/\/xml/i;jQuery.ajaxTransport("text html xml json",function(e,t){if(e.crossDomain&&e.async&&getOrPostRegEx.test(e.type)&&httpRegEx.test(t.url)&&sameSchemeRegEx.test(t.url)){var i=null,a=(t.dataType||"").toLowerCase();return{send:function(n,r){i=new XDomainRequest,/^\d+$/.test(t.timeout)&&(i.timeout=t.timeout),i.ontimeout=function(){r(500,"timeout")},i.onload=function(){var e="Content-Length: "+i.responseText.length+"\r\nContent-Type: "+i.contentType,t={code:200,message:"success"},n={text:i.responseText};try{if("json"===a)try{n.json=JSON.parse(i.responseText)}catch(s){t.code=500,t.message="parseerror"}else if("xml"===a||"text"!==a&&xmlRegEx.test(i.contentType)){var o=new ActiveXObject("Microsoft.XMLDOM");o.async=!1;try{o.loadXML(i.responseText)}catch(s){o=void 0}if(!o||!o.documentElement||o.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+i.responseText;n.xml=o}}catch(l){throw l}finally{r(t.code,t.message,n,e)}},i.onerror=function(){r(500,"error",{text:i.responseText})},i.open(e.type,e.url),i.send()},abort:function(){i&&i.abort()}}}})}!function(e){"use strict";var t=e.Disney,i=e.Spatula,a=e.GOC,n=e.jQuery,r=e._,s=e.Backbone,o=s.sync,l=/^\/(?:[^\/]|$)/,c=t.ajaxBase;n(function(){var e=t.redirect,a=t.top=new i.ContainerView({el:"#main"});e&&a.loader(e.loader)}),a&&a.queue.push(["go",e.document.body]),n.ajaxSetup({timeout:2e4}),c&&(s.sync=function(e,t,i){var a=i.url||t&&t.url;return l.exec(a)&&(i=r.extend({url:c+a.substr(1)},i)),o(e,t,i)})}(this),function(e,t){"use strict";t.support.css3=function(){function t(t,i){var a=e.document.body||e.document.documentElement,n=a.style,r=["Webkit","Moz","ms","O"];if(void 0!==n[t])return i?t:!0;t=t.charAt(0).toUpperCase()+t.substr(1);for(var s=0;s<r.length;s++)if(void 0!==n[r[s]+t])return i?r[s]+t:!0}return t}(),t.fn.selectTransitionEnd=function(){var t,i=e.document.createElement("fakeelement"),a={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"};for(t in a)if(void 0!==i.style[t])return a[t]}}(this,jQuery);/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
var Hogan={};!function(e){"use strict";function t(e,t,i){var a;return t&&"object"==typeof t&&(void 0!==t[e]?a=t[e]:i&&t.get&&"function"==typeof t.get&&(a=t.get(e))),a}function i(e,t,i,a,n,r){function s(){}function o(){}s.prototype=e,o.prototype=e.subs;var l,c=new s;c.subs=new o,c.subsText={},c.buf="",a=a||{},c.stackSubs=a,c.subsText=r;for(l in t)a[l]||(a[l]=t[l]);for(l in a)a.hasOwnProperty(l)&&(c.subs[l]=a[l]);n=n||{},c.stackPartials=n;for(l in i)i.hasOwnProperty(l)&&!n[l]&&(n[l]=i[l]);for(l in n)n.hasOwnProperty(l)&&(c.partials[l]=n[l]);return c}function a(e){return String(null===e||void 0===e?"":e)}function n(e){return e=a(e),d.test(e)?e.replace(r,"&amp;").replace(s,"&lt;").replace(o,"&gt;").replace(l,"&#39;").replace(c,"&quot;"):e}e.Template=function(e,t,i,a){e=e||{},this.r=e.code||this.r,this.c=i,this.options=a||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},e.Template.prototype={r:function(){return""},v:n,t:a,render:function(e,t,i){return this.ri([e],t||{},i)},ri:function(e,t,i){return this.r(e,t,i)},ep:function(e,t){var a=this.partials[e],n=t[a.name];if(a.instance&&a.base===n)return a.instance;if("string"==typeof n){if(!this.c)throw new Error("No compiler available.");n=this.c.compile(n,this.options)}if(!n)return null;if(this.partials[e].base=n,a.subs){t.stackText||(t.stackText={});for(var r in a.subs)a.subs.hasOwnProperty(r)&&!t.stackText[r]&&(t.stackText[r]=void 0!==this.activeSub&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);n=i(n,a.subs,a.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=n,n},rp:function(e,t,i,a){var n=this.ep(e,i);return n?n.ri(t,i,a):""},rs:function(e,t,i){var a=e[e.length-1];if(!u(a)){if(!this.options.modelGet||"object"!=typeof a||"number"!=typeof a.length||"function"!=typeof a.slice)return void i(e,t,this);a=a.slice(0,a.length)}for(var n=0;n<a.length;n++)e.push(a[n]),i(e,t,this),e.pop()},s:function(e,t,i,a,n,r,s){var o;return u(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ms(e,t,i,a,n,r,s)),o=!!e,!a&&o&&t&&t.push("object"==typeof e?e:t[t.length-1]),o)},d:function(e,i,a,n){var r,s=e.split("."),o=this.f(s[0],i,a,n),l=this.options.modelGet,c=null;if("."===e&&u(i[i.length-2]))o=i[i.length-1];else for(var d=1;d<s.length;d++)r=t(s[d],o,l),void 0!==r?(c=o,o=r):o="";return n&&!o?!1:(n||"function"!=typeof o||(i.push(c),o=this.mv(o,i,a),i.pop()),o)},f:function(e,i,a,n){for(var r=!1,s=null,o=!1,l=this.options.modelGet,c=i.length-1;c>=0;c--)if(s=i[c],r=t(e,s,l),void 0!==r){o=!0;break}return o?(n||"function"!=typeof r||(r=this.mv(r,i,a)),r):n?!1:""},ls:function(e,t,i,n,r){var s=this.options.delimiters;return this.options.delimiters=r,this.b(this.ct(a(e.call(t,n)),t,i)),this.options.delimiters=s,!1},ct:function(e,t,i){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,i)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,i,a,n,r,s){var o,l=t[t.length-1],c=e.call(l);return"function"==typeof c?a?!0:(o=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(c,l,i,o.substring(n,r),s)):c},mv:function(e,t,i){var n=t[t.length-1],r=e.call(n);return"function"==typeof r?this.ct(a(r.call(n)),n,i):r},sub:function(e,t,i,a){var n=this.subs[e];n&&(this.activeSub=e,n(t,i,this,a),this.activeSub=!1)}};var r=/&/g,s=/</g,o=/>/g,l=/\'/g,c=/\"/g,d=/[&<>\"\']/,u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof exports?exports:Hogan),this.Whiskers||!function(e){"use strict";var t=e.Hogan,i=function(e,t){var i,a=this;for(e=e.split(".");e.length>1;)i=e.shift(),a=a.hasOwnProperty(i)?a[i]:a[i]={};a[e[0]]=t},a=e.Whiskers=function(e,n){var r="function"==typeof t.compile?t:null;i.call(a,e,new t.Template(n,"",r,{modelGet:!0}))}}(this),Whiskers("partials.style_elements.module_styles",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("style_options",e,t,1),e,t,0,18,1527,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" <!-- /* "),i.b(i.v(i.f("view",e,t,0))),i.b(" module "),i.b(i.v(i.f("ref",e,t,0))),i.b(" */ --> "),i.s(i.f("bg_color",e,t,1),e,t,0,71,167,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" /* background color */ #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b("{ background-color: "),i.b(i.v(i.f("bg_color",e,t,0))),i.b("; background-image: none; } ")}),e.pop()),i.b(" "),i.s(i.f("images",e,t,1),e,t,0,192,742,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("background_image",e,t,1),e,t,0,214,720,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" /* background images */ @media screen and (min-width: 680px){ #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b("{ background-size: 100% auto; "),i.s(i.d("background_image.url",e,t,1),e,t,0,344,392,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("background-image: url("),i.b(i.v(i.d("background_image.url",e,t,0))),i.b(");")}),e.pop()),i.b(" "),i.s(i.f("alignment",e,t,1),e,t,0,432,472,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("background-position: "),i.b(i.v(i.f("alignment",e,t,0))),i.b(" left;")}),e.pop()),i.b(" } } "),i.s(i.f("retina_url",e,t,1),e,t,0,506,704,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" @media screen and (-webkit-min-device-pixel-ratio: 1.5) and (min-width: 680px), screen and (min-resolution: 144dpi) and (min-width: 680px){ #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b("{ background-image: url("),i.b(i.v(i.f("retina_url",e,t,0))),i.b("); } } ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("bg_image_styles",e,t,1),e,t,0,774,1027,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" /* special config settings for certain background images */ @media screen and (min-width: 680px){ "),i.s(i.f("image_repeat",e,t,1),e,t,0,890,944,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b("{ background-repeat: "),i.b(i.v(i.f("image_repeat",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("size",e,t,1),e,t,0,971,1015,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b("{ background-size: "),i.b(i.v(i.f("size",e,t,0))),i.b("; } ")}),e.pop()),i.b(" } ")}),e.pop()),i.b(" "),i.s(i.f("overlay_styles",e,t,1),e,t,0,1067,1507,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" /* overlay styles */ @media screen and (min-width: 680px){ "),i.s(i.f("opacity",e,t,1),e,t,0,1139,1192,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("#ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .module_overlay{ opacity: "),i.b(i.v(i.f("opacity",e,t,0))),i.b("; }")}),e.pop()),i.b(" "),i.s(i.f("color",e,t,1),e,t,0,1215,1275,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("#ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .module_overlay{ background-color: "),i.b(i.v(i.f("color",e,t,0))),i.b("; }")}),e.pop()),i.b(" "),i.s(i.f("overlay_image",e,t,1),e,t,0,1304,1486,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(' .module_overlay{ background-image: url("'),i.b(i.v(i.f("image",e,t,0))),i.b('"); background-position: '),i.b(i.v(i.f("vertical_position",e,t,0))),i.b(" left; background-repeat: "),i.b(i.v(i.f("image_repeat",e,t,0))),i.b("; background-size: "),i.b(i.v(i.f("size",e,t,0))),i.b("; } ")}),e.pop()),i.b(" } ")}),e.pop()),i.b(" ")}),e.pop()),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Disney,i=e.Whiskers,a=e._;a.extend(t.Style,{applyStyleClasses:function(e){var t=e.$el,i=e.model,a=i.get("style_options")||{};a.geo_hidden&&!t.hasClass("geo-accepted")&&t.addClass("geo-hidden")},getModuleStyles:function(e){var t=e.model,a=i.partials.style_elements.module_styles,n=a.render(t);return n}})}(this),function(e){"use strict";var t=e.Disney,i=t.Style.breakpoints,a=e.Backbone,n=e.jQuery,r=e.Math,s=r.min(e.devicePixelRatio,2);t.LumiereHelpers={sizes:[160,320,480,600,768,960,1200,1536,1920],imgSrc:function(e,t){var i,a,n;if(e instanceof Object)i=e.src,a=e.width;else{i=e;var r=this.nativeSizeFromSrc(i);a=r&&r.width}if(t.exact_size){var o=e.half_width||a&&parseInt(a/2,10);n=s>1.5?!1:o}else n=this.optimizedWidth(a,t);var l=n?i+="&width="+n:i;return l},optimizedWidth:function(e,t){var n,s=t.rel_width||1,o=t.target_width;if(!o){var l=i.contentMax?r.min(a.Resize.width(),i.contentMax):a.Resize.width();o=s*l*.94}return n=this.getClosestSize(o),e>n?n:!1},getClosestSize:function(e){var t,i=e*s;return n(this.sizes).each(function(e,a){return t=a,a>i?!1:void 0}),t},nativeSizeFromSrc:function(e){var t=e&&e.split("?")[1],i=t&&decodeURIComponent(t).split("region=")[1];if(i){var a=i.split("&")[0].split(","),n=a[2],r=a[3];return{width:n,height:r,ratio:r/n}}}}}(this),function(e){"use strict";var t=e.jQuery,i=e.Disney;t(function(){t.fn.extend({loadLazyImages:function(){t("img[data-src]",this).each(function(){var e=t(this);e.closest(".module").hasClass("geo-hidden")||e.parentsUntil(".module",".lazy-deferred").length<1&&e.swapSrc()})},enableLazyLoad:function(){return this.removeClass("lazy-deferred"),this},swapSrc:function(){var e=this[0],a=this.attr("data-src"),n=this.attr("data-width"),r=this.parent(".aspect");if(r.length>0&&n){var s=r.width(),o={src:a,width:n},l={target_width:s};a=i.LumiereHelpers.imgSrc(o,l)}e.src!==a?(this.on("load",function(){t(this).removeClass("no-src").removeAttr("data-src"),t(this).closest(".aspect").removeClass("placeholder")}),this.on("error",function(){t(this).hideBrokenImage()}),e.src=a):(this.removeAttr("data-src"),e.complete&&0===e.naturalWidth&&this.hideBrokenImage())},hideBrokenImage:function(){this.addClass("no-src").closest(".aspect").removeClass("placeholder").addClass("load-failed")}})})}(this),Whiskers("entities.item",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<span class="col item '),a.s(a.f("lastRow",e,t,1),e,t,0,34,42,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("last-row")}),e.pop()),a.s(a.f("hidden",e,t,1),e,t,0,65,79,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" lazy-deferred")}),e.pop()),a.s(a.f("widthClass",e,t,1),e,t,0,105,120,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("widthClass",e,t,0)))}),e.pop()),a.b('"> '),a.b(" "),a.s(a.f("href",e,t,1),e,t,0,197,422,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" '),i.s(i.f("target",e,t,1),e,t,0,228,247,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('target="'),i.b(i.v(i.f("target",e,t,0))),i.b('"')}),e.pop()),i.b(' class="arrow entity-link'),i.s(i.f("age_gate",e,t,1),e,t,0,296,306,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" age-gated")}),e.pop()),i.b('" '),i.s(i.f("age_gate",e,t,1),e,t,0,334,357,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('data-age="'),i.b(i.v(i.f("age_gate",e,t,0))),i.b('"')}),e.pop()),i.s(i.f("ping",e,t,1),e,t,0,379,407,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-ping="'),i.b(i.v(i.d("ping.static",e,t,0))),i.b('"')}),e.pop()),i.b("></a> ")}),e.pop()),a.b(" "),a.b(a.rp("<entity_container0",e,t,"")),a.b(" </span>"),a.fl()},partials:{"<entity_container0":{name:"entity_container",partials:{},subs:{}}},subs:{}}),Whiskers("entities.entity_container",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="entity-container entity-type-'),a.b(a.v(a.f("entity_type",e,t,0))),a.b(" "),a.s(a.f("entity_config",e,t,1),e,t,0,75,515,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" ratio-"),i.b(i.v(i.f("aspect_ratio",e,t,0))),i.b(" "),i.s(i.f("href",e,t,1),e,t,0,108,117,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("links-out")}),e.pop()),i.b(" "),i.s(i.f("event_value",e,t,1),e,t,0,143,152,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("links-out")}),e.pop()),i.b(" "),i.s(i.f("rounded_corners",e,t,1),e,t,0,189,216,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("corners-"),i.b(i.v(i.f("rounded_corners",e,t,0)))}),e.pop()),i.b(" "),i.s(i.f("title_overlay",e,t,1),e,t,0,255,268,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("title-overlay")}),e.pop()),i.b(" "),i.s(i.f("stack_box",e,t,1),e,t,0,301,317,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("stack-box-entity")}),e.pop()),i.b(" "),i.s(i.f("details_visibility",e,t,1),e,t,0,355,385,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("details_visibility",e,t,0))),i.b("-details")}),e.pop()),i.b(" "),i.s(i.f("skip_hover",e,t,1),e,t,0,424,434,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("skip-hover")}),e.pop()),i.b(" "),i.s(i.f("show_ptitle",e,t,1),e,t,0,466,498,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.s(i.f("ptitle",e,t,1),e,t,0,477,487,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("has-ptitle")}),e.pop())}),e.pop()),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("item_aspect_ratio_override",e,t,1),e,t,0,565,586,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("aspect-ratio-override")}),e.pop()),a.b('"> <div class="entity-mask"> '),a.b(" "),a.s(a.f("href",e,t,1),e,t,0,688,748,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" class="entity-link" '),i.b(i.rp("<href_attributes0",e,t,"")),i.b(">")}),e.pop()),a.b(" "),a.b(' <div class="'),a.b(a.v(a.f("entity_type",e,t,0))),a.b("-box entity-box "),a.s(a.f("entity_config",e,t,1),e,t,0,845,942,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("thumb_outline",e,t,1),e,t,0,864,876,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("thumb-border")}),e.pop()),i.b(" "),i.s(i.f("subtle_hover",e,t,1),e,t,0,912,924,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("subtle-hover")}),e.pop()),i.b(" ")}),e.pop()),a.b('"> '),a.s(a.d("entity_config.stack_box",e,t,1),e,t,0,991,1044,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="stack-box"><div class="top-photo-border">')}),e.pop()),a.b(' <div class="aspect '),a.s(a.f("noscript",e,t,1),e,t,1,0,0,"")||a.s(a.d("thumb_data.src",e,t,1),e,t,0,1124,1164,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("preloaded",e,t,1),e,t,1,0,0,"")||i.b(" placeholder")}),e.pop()),a.b('" '),a.s(a.f("event_value",e,t,1),e,t,0,1214,1249,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' data-event-link="'),i.b(i.v(i.f("event_value",e,t,0))),i.b('" ')}),e.pop()),a.b("> "),a.b(" "),a.s(a.f("video_thumbnail_badge",e,t,1),e,t,0,1341,1413,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <span class="video_thumbnail_badge badge_'),i.b(i.v(i.f("type",e,t,0))),i.b('">'),i.b(i.v(i.f("text",e,t,0))),i.b("</span> ")}),e.pop()),a.b(" "),a.s(a.f("thumb_data",e,t,1),e,t,0,1455,1895,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.d("thumb_data.src",e,t,1),e,t,0,1474,1876,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,1556,1659,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.d("thumb_data.src",e,t,0))),i.b('" class="thumb" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" '),i.b(i.rp("<image_attributes1",e,t,"")),i.b("></noscript>")}),e.pop()),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b(' <img class="thumb '),i.s(i.f("preloaded",e,t,1),e,t,1,0,0,"")||i.b("no-src"),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" data-src="'),i.b(i.v(i.d("thumb_data.src",e,t,0))),i.b('"'),i.s(i.f("preloaded",e,t,1),e,t,0,1800,1824,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' src="'),i.b(i.v(i.f("preloaded_src",e,t,0))),i.b('"')}),e.pop()),i.b(" "),i.b(i.rp("<image_attributes2",e,t,"")),i.b("> ")),i.b(" ")}),e.pop())}),e.pop()),a.b(" "),a.s(a.f("badge",e,t,1),e,t,0,1921,2149,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,1935,1998,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("badge",e,t,0))),i.b('" class="badge" alt=""></noscript>')}),e.pop()),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="badge '),i.s(i.f("preloaded",e,t,1),e,t,1,0,0,"")||i.b("no-src"),i.b('" alt="" '),i.s(i.f("preloaded",e,t,1),e,t,1,0,0,"")||i.b("data-"),i.b('src="'),i.b(i.v(i.f("badge",e,t,0))),i.b('">')),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("duration",e,t,1),e,t,0,2173,2217,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<time aria-hidden="true">'),i.b(i.v(i.f("duration",e,t,0))),i.b("</time>")}),e.pop()),a.b(" </div> "),a.s(a.d("entity_config.stack_box",e,t,1),e,t,0,2266,2280,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" </div></div> ")}),e.pop()),a.b(" </div> "),a.b(" "),a.s(a.f("href",e,t,1),e,t,0,2362,2366,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("</a>")}),e.pop()),a.b(" "),a.b(' <div class="entity-details '),a.s(a.f("price",e,t,1),e,t,0,2478,2487,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("has-price")}),e.pop()),a.b(" "),a.s(a.f("duration",e,t,1),e,t,0,2511,2524,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("has-timestamp")}),e.pop()),a.b(" "),a.s(a.f("entity_config",e,t,1),e,t,0,2556,2672,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("text_alignment",e,t,1),e,t,0,2576,2599,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("text-"),i.b(i.v(i.f("text_alignment",e,t,0)))}),e.pop()),i.b(" "),i.s(i.f("truncate_title",e,t,1),e,t,0,2638,2652,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("truncate-title")}),e.pop()),i.b(" ")}),e.pop()),a.b('"> '),a.b(" "),a.s(a.f("href",e,t,1),e,t,0,2735,2795,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" class="entity-link" '),i.b(i.rp("<href_attributes3",e,t,"")),i.b(">")}),e.pop()),a.b(' <h3 class="title">'),a.b(a.v(a.f("title",e,t,0))),a.b("</h3> "),a.b(" "),a.s(a.f("href",e,t,1),e,t,0,2884,2888,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("</a>")}),e.pop()),a.b(" "),a.s(a.d("entity_config.show_ptitle",e,t,1),e,t,0,2928,2984,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("ptitle",e,t,1),e,t,0,2939,2973,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<h4 class="ptitle">'),i.b(i.v(i.f("ptitle",e,t,0))),i.b("</h4>")}),e.pop())}),e.pop()),a.b(" "),a.s(a.f("short_desc",e,t,1),e,t,0,3030,3064,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<p class="desc">'),i.b(i.v(i.f("short_desc",e,t,0))),i.b("</p>")}),e.pop()),a.b(" "),a.s(a.f("price",e,t,1),e,t,0,3090,3137,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<p class="price skip-text-styles">'),i.b(i.v(i.f("price",e,t,0))),i.b("</p>")}),e.pop()),a.b(" "),a.s(a.d("translations.images",e,t,1),e,t,0,3172,3264,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("numImages",e,t,1),e,t,0,3186,3250,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<p class="image-count">'),i.b(i.v(i.f("numImages",e,t,0))),i.b(" "),i.b(i.v(i.d("translations.images",e,t,0))),i.b("</p>")}),e.pop())}),e.pop()),a.b(" "),a.b(" "),a.s(a.f("href",e,t,1),e,t,0,3331,3552,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" class="entity-link cta-link'),i.s(i.f("cta_button_title",e,t,1),e,t,0,3399,3428,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" cta-button blue button large")}),e.pop()),i.b('" '),i.b(i.rp("<href_attributes4",e,t,"")),i.b("> "),i.s(i.f("cta_button_title",e,t,1),e,t,0,3494,3525,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <h4>"),i.b(i.v(i.f("cta_button_title",e,t,0))),i.b("</h4> ")}),e.pop()),i.b(" </a> ")}),e.pop()),a.b(" </div>"),a.b(" </div>"),a.b(" "),a.s(a.f("content_flag",e,t,1),e,t,0,3634,3695,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<p class="content-flag skip-text-styles">'),i.b(i.v(i.f("content_flag",e,t,0))),i.b("</p>")}),e.pop()),a.b(" </div>"),a.fl()},partials:{"<href_attributes0":{name:"href_attributes",partials:{},subs:{}},"<image_attributes1":{name:"image_attributes",partials:{},subs:{}},"<image_attributes2":{name:"image_attributes",partials:{},subs:{}},"<href_attributes3":{name:"href_attributes",partials:{},subs:{}},"<href_attributes4":{name:"href_attributes",partials:{},subs:{}}},subs:{}}),Whiskers("partials.image_attributes",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("width",e,t,1),e,t,0,10,34,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' data-width="'),i.b(i.v(i.f("width",e,t,0))),i.b('" ')}),e.pop()),a.b(" "),a.s(a.f("height",e,t,1),e,t,0,56,81,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('data-height="'),i.b(i.v(i.f("height",e,t,0))),i.b('" ')}),e.pop()),a.b(" "),a.s(a.f("aspect_ratio",e,t,1),e,t,0,110,147,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('data-aspect_ratio="'),i.b(i.v(i.f("aspect_ratio",e,t,0))),i.b('" ')}),e.pop()),a.b(" "),a.s(a.f("orientation",e,t,1),e,t,0,181,216,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('data-orientation="'),i.b(i.v(i.f("orientation",e,t,0))),i.b('" ')}),e.pop()),a.b(" "),a.s(a.f("optimal_w",e,t,1),e,t,0,247,278,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('data-optimal_w="'),i.b(i.v(i.f("optimal_w",e,t,0))),i.b('" ')}),e.pop()),a.b(" "),a.s(a.f("lumiere_enabled",e,t,1),e,t,1,0,0,"")||a.b('data-legacy="true"'),a.fl()},partials:{},subs:{}}),Whiskers("partials.href_attributes",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('data-title="'),a.b(a.v(a.f("title",e,t,0))),a.b('"'),a.s(a.f("target",e,t,1),e,t,0,33,53,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' target="'),i.b(i.v(i.f("target",e,t,0))),i.b('"')}),e.pop()),a.s(a.f("age_gate",e,t,1),e,t,0,77,101,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' data-age="'),i.b(i.v(i.f("age_gate",e,t,0))),i.b('"')}),e.pop()),a.s(a.f("ping",e,t,1),e,t,0,123,151,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' data-ping="'),i.b(i.v(i.d("ping.static",e,t,0))),i.b('"')}),e.pop()),a.fl()},partials:{},subs:{}}),Whiskers("partials.icon_header",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("icon_type",e,t,1),e,t,0,14,96,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="header_icon"> <div class="icon_'),i.b(i.v(i.f("icon_type",e,t,0))),i.b(' icon_img"></div> </div> ')}),e.pop()),a.fl()},partials:{},subs:{}}),Whiskers("partials.module_elements.module_header",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("is_ad",e,t,1),e,t,0,10,65,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="ad-module-notice">'),i.b(i.v(i.d("translations.ad",e,t,0))),i.b("</div>")}),e.pop()),a.b(' <div class="module_header_container'),a.s(a.f("has_filters",e,t,1),e,t,0,127,139,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" has-filters")}),e.pop()),a.b('"> '),a.s(a.f("title",e,t,1),e,t,0,168,473,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="module_header'),i.s(i.f("icon_type",e,t,1),e,t,0,208,213,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" icon")}),e.pop()),i.s(i.f("desc",e,t,1),e,t,1,0,0,"")||i.b(" no-desc"),i.s(i.f("is_ad",e,t,1),e,t,0,263,273,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" ad-module")}),e.pop()),i.b('"> '),i.b(i.rp("<iconHeader0",e,t,"")),i.b(' <div class="title"> <h2>'),i.b(i.v(i.f("title",e,t,0))),i.b("</h2> "),i.s(i.f("seeAll",e,t,1),e,t,0,352,413,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a class="all" href="'),i.b(i.v(i.f("seeAll",e,t,0))),i.b('">'),i.b(i.v(i.d("translations.see_all",e,t,0))),i.b("</a>")}),e.pop()),i.b(" </div> "),i.s(i.f("desc",e,t,1),e,t,0,441,456,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("<p>"),i.b(i.v(i.f("desc",e,t,0))),i.b("</p>")}),e.pop()),i.b(" </div> ")}),e.pop()),a.b(" "),a.s(a.f("has_filters",e,t,1),e,t,0,500,797,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="filters"> <a href="" class="filter"> <span>'),i.b(i.v(i.d("translations.all",e,t,0))),i.b('</span> </a> <div class="filter_mobile"> <span>'),i.b(i.v(i.d("translations.all",e,t,0))),i.b('</span> <select class="mobile_filter_list"> <option value="0" data-filter="All" selected="selected">'),i.b(i.v(i.d("translations.all",e,t,0))),i.b("</option> </select> </div> </div> ")}),e.pop()),a.b(" </div> "),a.s(a.f("has_filters",e,t,1),e,t,0,837,905,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="filter_drawer"> <div class="filter_list"></div> </div> ')}),e.pop()),a.fl()},partials:{"<iconHeader0":{name:"iconHeader",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.console,i=e.Grill={},a=e.Spatula,n=e.jQuery,r=e._,s=e.Backbone,o=e.Whiskers,l=e.Disney,c=a.whenAll,d=s.Model,u=s.Collection,h=s.View,f=a.tryCall,p=function(i){var a=e.onerror;t&&t.error&&t.error(i.stack||i.toString()),a&&a(i.toString())},m=function(e,t){try{return f(e,t)}catch(i){p(i)}},g=function(e){return r.map(this.views,function(t){return m(t,e)})},v=n.support.css3("transition")?function(t){var i=n.Deferred(),a=n(e).selectTransitionEnd()+".grill";return n(".overlay",t).on(a,function(e){this===e.target&&(i.resolve(),t.off(a))}),i}:function(){return!0},b=i.Module=d.extend({initialize:function(){this.data=this.data(this.get("data")),this.on("change:data",function(e,t){e.data.reset(t)})},data:function(e){return new u(e)}}),y=i.Burger=u.extend({model:b,reset:function(e,t){if(e.stack){for(var i in e)i in y.prototype||(this[i]=e[i]);e=e.stack}return u.prototype.reset.call(this,e,t)}}),k=h.extend({initialize:function(e){this.template=e.template,this.render(),this.model.on("change",this.render,this)},render:function(){var e=this.$el;this.setElement(n(this.template.render(this.model))),e.replaceWith(this.$el)}}),w=i.ListView=h.extend({tagName:"ul",initialize:function(e){var t=this,i=t.collection;t.template=e.template,t.reset(),i.on("add",function(e,i){var a=i.indexOf(e),n=t.spawn(e);t.views.splice(a,0,n),0===a?t.$el.prepend(n.el):t.views[a-1].$el.after(n.el)}),i.on("remove",function(e,i,a){t.views.splice(a.index,1)[0].remove()}),i.on("reset",t.reset,t)},reset:function(){var e=this;return e.views&&r.invoke(e.views,"remove"),e.views=e.collection.map(function(t){var i=e.spawn(t);return e.$el.append(i.el),i}),e},spawn:function(e){return new k({model:e,template:this.template})}}),_={},x=i.ModuleView=a.RichView.extend({assets:{},tagName:"section",className:"module",global_components:{images:{image_attributes:o.partials.image_attributes},links:{href_attributes:o.partials.href_attributes},entities:{item:o.entities.item,entity_container:o.entities.entity_container,image_attributes:o.partials.image_attributes,href_attributes:o.partials.href_attributes},module_header:{module_header:o.partials.module_elements.module_header,iconHeader:o.partials.icon_header}},needsGuestContext:function(){var e=["profile","interests"];return r.any(this.model.data.models,function(t){return r.contains(e,t.get("event_value"))})},ctx_additions:function(){var e={};if(this.required_template_sets){var t=r.pick(this.global_components,this.required_template_sets);r.each(t,function(t){r.extend(e,t)})}return r.extend(e,this.included_components,this.additional_components)},safeRender:function(){var e=this.template;e&&e.render&&this.$el.html(e.render(this.model.toJSON()))},applyStyleClasses:function(){l.Style.applyStyleClasses(this)},renderStyles:function(){return l.Style.getModuleStyles(this)},revealModuleImages:function(){this.$el.loadLazyImages(),this.model.get("styles_rendered")||(this.$el.siblings(".module_styles").append(this.renderStyles()),this.model.set("styles_rendered",!0))},storeModelThumb:function(e,t){t&&!e.get("hidden")&&e.set({preloaded:!0,preloaded_src:t})}},{register:function(e,t,i){return _[e]=this.extend(t,i)},create:function(e,t){var i=_[e]||this,a=new i(t),n=a.model&&a.model.get("ref"),r=a.style_classes||[],s=a.model&&a.model.get("style_options"),o=s&&s.additional_style_classes||[],l={"data-module":e},c=[e].concat(r,o);return n&&(l.id="ref-"+n),a.$el.attr(l).addClass(c.join(" ")),a}}),A=w.prototype;i.BurgerView=w.extend({id:"burger",tagName:"article",className:"hidden",subview:x,throttleDelay:1e3,visibilityThreshold:200,initialize:function(e){A.initialize.call(this,e),n("<div/>",{"class":"overlay"}).appendTo(this.el),n("<style/>",{"class":"module_styles",type:"text/css"}).appendTo(this.el)},load:function(){function e(){return c(g.call(t,"load"))}var t=this;return this.collection.url?this.collection.fetch().pipe(e):e()},spawn:function(e){return x.create(e.get("view"),{model:e})},itemOptions:function(){return{}},title:function(){return this.collection.title},url:function(){return this.collection.url},render:function(){g.call(this,"render"),g.call(this,"applyStyleClasses")},ready:function(){c(g.call(this,"ready")),this.views.length&&this.initLazyLoading()},show:function(){return this.$el.hasClass("hidden")?(this.$el.removeClass("hidden"),c([v(this.$el)].concat(g.call(this,"show")))):!0},hide:function(){return this.$el.hasClass("hidden")?!0:(this.$el.addClass("hidden"),c([v(this.$el)].concat(g.call(this,"hide"))))},initLazyLoading:function(){this.catalogModulePositions(),this.checkModuleVisibility(),this.bindToScroll(),this.bindToResize()},catalogModulePositions:function(){var e=[];r.each(this.views,function(t){t.pos=parseInt(t.$el.offset().top,10),e.push(t)}),this.unloaded_modules=e},checkModuleVisibility:function(){var t=n(e).height(),i=n(e).scrollTop(),a=i+t+this.visibilityThreshold,s=[];r.each(this.unloaded_modules,function(e){e.pos<a&&e.revealModuleImages?e.revealModuleImages():s.push(e)}),this.unloaded_modules=s,s.length<1&&this.unbindScroll()},onScroll:function(){this.catalogModulePositions(),this.checkModuleVisibility()},onResize:function(){var e=s.Resize.width();e!==this.currentWidth&&(this.boundToScroll||this.bindToScroll()),this.catalogModulePositions(),this.checkModuleVisibility()},bindToScroll:function(){n(e).on("scroll."+this.cid,r.throttle(r.bind(this.onScroll,this),this.throttleDelay)),this.boundToScroll=!0},unbindScroll:function(){n(e).off("scroll."+this.cid),this.boundToScroll=!1},bindToResize:function(){this.currentWidth=s.Resize.width(),n(e).on("resize."+this.cid,r.throttle(r.bind(this.onResize,this),this.throttleDelay))},remove:function(){g.call(this,"remove"),n(e).off("scroll."+this.cid),n(e).off("resize."+this.cid),A.remove.call(this)}}),i.BunView=x.extend({className:"module bun skip-bottom-border skip-top-border",tagName:"div"})}(this),function(e){"use strict";var t,i=[],a="unknown",n=e.Disney.age=function(e){i?i.push(e):e(a)},r=function(){if(i){for(var n=0;n<i.length;++n)i[n](a);e.clearTimeout(t),i=t=null}};n.known=function(e){a="string"==typeof e&&e||"unknown",r()},t=e.setTimeout(r,5e3)}(this),function(e){"use strict";var t=e.console,i=e.Disney,a=i.Ads=i.Ads||{},n=e._;a.MessageBus=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];if(a)try{a.callback(e)}catch(n){d(n)}}}function r(e,t){var i={name:e,body:t},n=(o[e]||[]).slice(0);a(i,n),n=(o["*"]||[]).slice(0),a(i,n)}function s(e,t,i){n.each(c,function(a){if(a!==i)try{a.bus[a.functionName](e,t)}catch(n){}})}var o={},l=this,c={},d=function(i){var a=e.onerror;t&&t.error&&t.error("MessageBus:: "+i.stack||"MessageBus:: "+i.toString()),a&&a("MessageBus:: "+i.toString())};"undefined"==typeof i.Ads.MessageBus.Connections&&(i.Ads.MessageBus.Connections={}),this.addConnection=function(e,t,a){if(!a){var n=e+"_"+Math.round(1e6*Math.random()),o="Disney.Ads.MessageBus.Connections."+n,d=n+"_primarySendMessage",u=n+"_secondarySendMessage",h=function(e,t){r(e,t),s(e,t,p)},f={id:e,bus:l,"function":h,functionName:d,uniqueId:n,globalId:o};i.Ads.MessageBus.Connections[n]={},i.Ads.MessageBus.Connections[n][d]=h,l[d]=h;var p={id:e,bus:{sendMessage:t.sendMessage,addMessageListener:t.addMessageListener,removeMessageListener:t.removeMessageListener,addConnection:t.addConnection,removeConnection:t.removeConnection},functionName:u,uniqueId:n,globalId:o};a={primary:f,secondary:p},i.Ads.MessageBus.Connections[n].connection=a,c[e]=p;try{t.addConnection(e,l,a)}catch(m){}p.bus=t}},this.removeConnection=function(e){var t=c[e];if(t){var a=i.Ads.MessageBus.Connections[t.uniqueId].connection;l[a.primary.functionName]=null,i.Ads.MessageBus.Connections[t.uniqueId]=null,c[e]=null,t&&t.bus&&t.bus.removeConnection&&t.bus.removeConnection(e)}},this.sendMessage=function(e,t){r(e,t),s(e,t)},this.addMessageListener=function(e,t){var i={name:e,callback:t};o[e]||(o[e]=[]),o[e].push(i)},this.removeMessageListener=function(e,t){for(var i=o[e]||[],a=0;a<i.length;a++){var n=i[a];n&&n.name===e&&n.callback===t&&(i[a]=null)}},this.destroy=function(){n.each(c,function(e){l.removeConnection(e)}),c=null,n.each(o,function(e){l.removeMessageListener(e.name,e.callback)}),o=null,l=null}}}(this),function(e){"use strict";var t="http://pubads.g.doubleclick.net/gampad/ads?sz=768x432&iu=/7046/video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&correlator=[timestamp]&cmsid=604",i=e.Disney,a=i.Ads=i.Ads||{},n=e.jQuery,r=e._,s=r.extend,o=function(){},l=function(e){var t=this,i=function(){t.apply(this,arguments)};return o.prototype=this.prototype,i.prototype=new o,s(i.prototype,e),i.sub=this.sub,i},c=a.AbstractAdPlayer=function(e,i){this.config={adTagUrl:t+a.isMobile?"&m_ast=vast":""},e||this.init(e,i)};c.sub=l,c.prototype={id:null,config:null,messageBus:null,init:function(e,t){this.id=e,n.extend(this.config,t)},destroy:function(){this.messageBus&&(this.messageBus.destroy(),this.messageBus=null)}}}(this),function(e){"use strict";function t(){at.ajax(Q,{dataType:"script",cache:!0,success:i,error:a})}function i(){z=e.google.ima,n()}function a(){Y.messageBus.sendMessage("adOpportunityEnd")}function n(){r(),s(),$.initialize(),G.requestAds(j())}function r(){var e=at("#"+Y.id);e.html('<div class="adPlayer"><div class="overlay adControls" style="z-index:3"><div class="adCountdown"><h3>'+Y.config.translations.advertisement+'</h3></div></div><div class="overlay playControls" style="z-index:4;"><div class="playButton"></div></div><div class="overlay adClickTarget" style="z-index:6;"/><div class="adsContainer"></div></div>')}function s(){o(),c(),u(),m(),f()
}function o(){H=at("#"+Y.id+" .adControls")[0]}function l(){H=null}function c(){X=at("#"+Y.id+" .playControls"),X.bind("click",v)}function d(){X&&(X.unbind("click",v),X=null)}function u(){q=at("#"+Y.id+" .adClickTarget")[0]}function h(){q&&(q=null)}function f(){G=new z.AdsLoader($),G.addEventListener(z.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,F,!1),G.addEventListener(z.AdErrorEvent.Type.AD_ERROR,N,!1)}function p(){G&&(G.removeEventListener(z.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,F,!1),G.removeEventListener(z.AdErrorEvent.Type.AD_ERROR,N,!1),G=null)}function m(){var e=at("#"+Y.id+" .adsContainer")[0];$=new z.AdDisplayContainer(e,q)}function g(){$=null}function v(){return V?void(V=!1):(y(),_(),void W.resume())}function b(){p(),B(),l(),d(),h(),g()}function y(){W.isCustomClickTrackingUsed()&&at(q).addClass("fulloverlay")}function k(){at(q).removeClass("fulloverlay")}function w(){at(X[0]).addClass("fulloverlay")}function _(){at(X[0]).removeClass("fulloverlay")}function x(){H.style.display="inline"}function A(){H.style.display="none"}function C(){y()}function S(){J&&Y.messageBus.sendMessage("adEnd"),Y.messageBus.sendMessage("adOpportunityEnd"),k(),_(),A()}function T(){V=!0,U=!0,k(),W.pause(),w(),nt(L,0)}function P(){Y.messageBus.sendMessage("paused")}function E(t){var i=t.getAd().getAdPodInfo().getIsBumper(),a=Math.round(t.getAd().getDuration());!i&&a>Z&&(x(),I(),J=!0,Y.messageBus.sendMessage("adStart"),K=e.setInterval(I,1e3),Y.messageBus.sendMessage("played"))}function I(){var e=Math.round(W.getRemainingTime());at("#"+Y.id+" .adCountdown h3").html(Y.config.translations.advertisement+": "+e)}function L(){V=!1}function M(){C()}function D(){K&&e.clearInterval(K),nt(S,0)}function R(){}function O(e){var t={currentTime:0};try{W=e.getAdsManager(t)}catch(i){}W&&(W.addEventListener(z.AdEvent.Type.CLICK,R),W.addEventListener(z.AdEvent.Type.LOADED,R),W.addEventListener(z.AdEvent.Type.CONTENT_PAUSE_REQUESTED,R),W.addEventListener(z.AdEvent.Type.CONTENT_RESUME_REQUESTED,R),W.addEventListener(z.AdErrorEvent.Type.AD_ERROR,R),W.addEventListener(z.AdEvent.Type.FIRST_QUARTILE,R),W.addEventListener(z.AdEvent.Type.MIDPOINT,R),W.addEventListener(z.AdEvent.Type.THIRD_QUARTILE,R),W.addEventListener(z.AdEvent.Type.COMPLETE,R),W.addEventListener(z.AdEvent.Type.ALL_ADS_COMPLETED,R),W.addEventListener(z.AdErrorEvent.Type.AD_ERROR,R),W.addEventListener(z.AdEvent.Type.STARTED,E),W.addEventListener(z.AdEvent.Type.PAUSED,P),W.addEventListener(z.AdEvent.Type.CLICK,T),W.addEventListener(z.AdEvent.Type.CONTENT_PAUSE_REQUESTED,M),W.addEventListener(z.AdEvent.Type.CONTENT_RESUME_REQUESTED,D))}function B(){if(W){W.removeEventListener(z.AdEvent.Type.CLICK,R),W.removeEventListener(z.AdEvent.Type.LOADED,R),W.removeEventListener(z.AdEvent.Type.CONTENT_PAUSE_REQUESTED,R),W.removeEventListener(z.AdEvent.Type.CONTENT_RESUME_REQUESTED,R),W.removeEventListener(z.AdErrorEvent.Type.AD_ERROR,R),W.removeEventListener(z.AdEvent.Type.FIRST_QUARTILE,R),W.removeEventListener(z.AdEvent.Type.MIDPOINT,R),W.removeEventListener(z.AdEvent.Type.THIRD_QUARTILE,R),W.removeEventListener(z.AdEvent.Type.COMPLETE,R),W.removeEventListener(z.AdEvent.Type.ALL_ADS_COMPLETED,R),W.removeEventListener(z.AdErrorEvent.Type.AD_ERROR,R),W.removeEventListener(z.AdEvent.Type.STARTED,E),W.removeEventListener(z.AdEvent.Type.PAUSED,P),W.removeEventListener(z.AdEvent.Type.CLICK,T),W.removeEventListener(z.AdEvent.Type.CONTENT_PAUSE_REQUESTED,M),W.removeEventListener(z.AdEvent.Type.CONTENT_RESUME_REQUESTED,D);try{W.destroy()}catch(e){}W=null}}function F(e){if(O(e),W)try{W.init(et,tt,z.ViewMode.NORMAL),W.start()}catch(t){}}function N(){S()}function j(){var e=new z.AdsRequest;return e.adTagUrl=Y.config.adTagUrl,e.adType="video",e.linearAdSlotWidth=et,e.linearAdSlotHeight=tt,e.nonLinearAdSlotWidth=et,e.nonLinearAdSlotHeight=tt,e}var z,U,q,V,H,$,G,W,J,X,Y,K,Q="http://imasdk.googleapis.com/js/sdkloader/ima3.js",Z=6,et=750,tt=500,it=e.Disney,at=e.jQuery,nt=e.setTimeout,rt=it.Ads=it.Ads||{},st=rt.AbstractAdPlayer;rt.HTMLAdPlayer=st.sub({init:function(e,i){e&&(Y=this,st.prototype.init.call(this,e,i),Y.messageBus.sendMessage("adOpportunityStart"),t())},destroy:function(){b(),B(),p();var e=at("#"+Y.id);e.empty(),Y=null,st.prototype.destroy.call(this)}})}(this),function(e){"use strict";function t(){var e="#"+r.id;p[s].ready=a,u(e,{src:"//a.dilcdn.com/a/adplayer-982ad562bb53.swf",version:o,onFail:n,bgcolor:"#000000",width:"100%",height:"100%",wmode:"opaque",menu:"false",id:r.id+"_playerElement"},{adTagUrl:i(r.config.adTagUrl),advertisement:r.config.translations.advertisement,skipAds:r.config.translations.skipAds,messageBusReady:"Disney.Ads.Players."+s+".ready"})}function i(e){return e=e.replace(/'/g,"%27")}function a(){r.messageBus.addConnection(s,d.getElementById(r.id+"_playerElement"))}function n(){r.messageBus.sendMessage("adOpportunityEnd")}var r,s,o=[10,3],l=e.Disney,c=e.jQuery,d=e.document,u=e.flashembed,h=l.Ads=l.Ads||{},f=h.AbstractAdPlayer,p=h.Players=h.Players||{};h.FlashAdPlayer=f.sub({init:function(e,i){e&&(r=this,f.prototype.init.call(this,e,i),s="axxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"===e?t:3&t|8;return i.toString(16)}),p[s]={},r.messageBus.sendMessage("adOpportunityStart"),t())},destroy:function(){p[s]=null;var e=c("#"+r.id);e.empty(),r=null,f.prototype.destroy.call(this)}})}(this),function(e){"use strict";var t=e.Disney,i=e.Modernizr,a=t.Ads=t.Ads||{},n=a.FlashAdPlayer,r=a.HTMLAdPlayer,s=e.location.href.indexOf("html5=true")>-1;t.Ads.AdPlayer=function(e,a){var o;return o=!i.flash||s?new r:new n,o.messageBus=new t.Ads.MessageBus,o.init(e,a),o}}(this),function(e){"use strict";function t(e){return l.Deferred(function(t){n.age(function(i){"unknown"!==i&&e.setTargeting("age",i),t.resolve()})}).promise()}function i(){return e.ActiveXObject&&"undefined"!=typeof u.documentElement.style.opacity}var a,n=e.Disney,r=n.Ads=n.Ads||{},s=e.Modernizr,o=e.Backbone,l=e.jQuery,c=e._,d=e.location.host,u=e.document,h=c.each,f=c.extend,p=e.location.href.indexOf("gameVideoAd=true")>-1,m=function(t){e.googletag.cmd.push(function(){t(e.googletag)})},g=function(){return d.match(/\.diznee.net/)&&(d=d.split(".").slice(0,-3).join(".")),d.replace("www.","")},v=function(){var e=/^(?:[a-z0-9-]+\.)*?([a-z0-9-]+(?:\.com?)?(?:\.[a-z]{2})?)$/;return g().match(e)[1]},b=function(){},y=function(e){var t=this,i=function(){t.apply(this,arguments)};return b.prototype=this.prototype,i.prototype=new b,f(i.prototype,e),i.sub=this.sub,i},k=function(e,t,i,a){var n=this;this.id||(this.id=c.uniqueId("gpt-")),c.isArray(i[0])||(i=[i]),n._w=i[0][0],n._h=i[0][1],n.name||(n.name=e),n._d=i,m(function(e){n.define(e,t,a)})};k.sub=y,k.prototype={define:function(e,t,i){var a=this._s=e.defineSlot(t,this._d,this.id);h(i,function(e,t){a.setTargeting(t,e)}),a.addService(e.pubads())},tag:function(){return'<aside class="gpt '+this.name+'" id="'+this.id+'" style="'+this.style()+'"></aside>'},style:function(){return"width:"+this._w+"px;height:"+this._h+"px"},ready:function(){var e=this;e._$=l("#"+this.id),m(function(i){a(),t(e._s).then(function(){i.display(e.id)})})},restore:function(){this._$&&!this._$.closest("html").length&&l("#"+this.id).remove()},remove:function(){this._$.remove()},refresh:function(){var e=this._s;e&&m(function(t){t.pubads().refresh([e])})},sizes:function(){return c.map(this._d,function(e){return e[0]+"x"+e[1]})}};var w,_,x,A=k.sub({ready:function(){k.prototype.ready.call(this);var t=this._$,i=function(){l.contains(u.body,t[0])?t.children().length?("inline-block"===t.css("display")&&t.css("width",""),t.css("height","")):e.setTimeout(i,100):t=null};i()}}),C="gpt-companion",S="companion",T=k.sub({id:C,name:S,define:function(){},ready:function(){var e=this;m(function(){a(),e._s=w}),k.prototype.ready.call(this)}}),P=k.sub({name:S}),E=T.sub({ready:function(){var e=this;m(function(){a(),e._s=w}),this._$=l("#"+this.id)},refresh:function(){}}),I=k.sub({name:S,refresh:function(){},showVideoCompanion:function(){this._$.addClass("hide"),this._$.after(this.context.tag("gameVideoCompanion")),O.gameVideoCompanion.ready()},hideVideoCompanion:function(){this._$.removeClass("hide"),O.gameVideoCompanion&&O.gameVideoCompanion.remove()}}),L=k.sub({adPlayed:!1,tag:function(){return'<aside class="gpt" id="'+this.id+'-container" style="margin:0px auto;'+this.style()+'"><div class="'+this.name+'" id="'+this.id+'" style="'+this.style()+'"></div><div class="'+this.name+'" id="'+this.id+'-video" style="'+this.style()+';display:none"></div></aside>'},ready:function(){var i=this;i._$=l("#"+this.id+"-container"),m(function(n){a(),t(i._s).then(function(){n.display(i.id),p&&e.setTimeout(function(){e.disableAutoUnload(),i.videoMode()},0)})})},remove:function(){!this.adPlayed&&O&&O.gameCompanion&&O.gameCompanion.hideVideoCompanion(),n.Ads.setPlayer(null),this.adPlayer&&(this.adPlayer.messageBus&&this.adPlayer.messageBus.removeMessageListener("adStart",this.onAdStart),this.adPlayer.destroy(),this.adPlayer=null),k.prototype.remove.call(this)},getId:function(){return this.id},videoMode:function(){l("#"+this.id).hide(),l("#"+this.id+"-video").show(),O&&O.gameCompanion&&O.gameCompanion.showVideoCompanion();var e={adTagUrl:this.context.getVideoAdTagUrl(),translations:this.context.translations};this.onAdStart=c.bind(function(){this.adPlayed=!0},this),this.adPlayer=new n.Ads.AdPlayer(this.id+"-video",e),this.adPlayer.messageBus.addMessageListener("adStart",this.onAdStart),n.Ads.setPlayer(this.adPlayer)}}),M=[300,60];s.mobile?(x="gpt_mobile.js",_={sponsor:[k,[270,80]],banner:[k,[320,50]],rectAll:[k,[320,50]],modalInterstitial:[k,[300,254]]},o.Resize.width()>=728?(l("html").addClass("tablet-ads"),_.videoCompanion=[T,M],_.pushdown=[k,[728,90]],_.rectAll=[k,[300,250]]):_.mobile=[k,[320,50]]):(x="gpt.js",_={videoCompanion:[T,M],gameCompanion:[I,M],gameVideoCompanion:[E,M],activitykitCompanion:[P,M],gameLoader:[L,[750,500]],sponsor:[k,[270,80]],pushdown:[A,[[970,90],[970,66],[728,90],[970,250]]],rectangle:[k,[300,250]],rectAll:[k,[300,250]],banner:[k,[320,50]],modalInterstitial:[k,[300,254]]});var D,R,O,B=r.DoubleClickAdContext=function(e){var t=this;t.adData=e,t.slots=O={},t.adCounts={},t.translations={advertisement:"Advertisement",skip_ad:"Skip Ad"},t.unit=D=s.mobile&&t.adData.config.mobile||t.adData.config.web,t._t=R=t.adData.config.targeting,t.adSystem="dfp",t.companion="gpt-companion:300:60",t.ageReady=l.Deferred(function(e){n.age(e.resolve)}).promise(),t.status=function(){return t.ageReady},t.useAdPattern=function(){return!0},t.iterateRegistryName=function(e){var i=t.adCounts[e]||0,a=e;return i>0&&(a=e+"-"+i),t.adCounts[e]=i+1,a}};B.prototype={noAds:function(){return!this.unit},tag:function(e,t,i){var a,n=_[e];return n?(a=n[0],n=new a(e,i||this.unit,n[1],f({},this._t,t)),n.context=this,this.slots[this.iterateRegistryName(e)]=n,n.tag()):""},showCDSAds:function(){return!1},cds:function(){return!!this.adData.cds},refresh:function(){var t=this;m(function(i){n.age(function(){e.setTimeout(function(){i.pubads().refresh(c.pluck(t.slots,"_s"))},0)})})},ready:function(){h(this.slots,function(e){e.ready()}),this.refresh()},helpers:function(e,t,i){var a=this,n={};return h(_,function(e,r){n[r+"Ad"]=function(){return a.tag(r,f({},t,this.adTargeting),i)}}),n},setTranslation:function(e,t){this.translations[e]=t},setTargeting:function(e,t){this._t[e]=t},sizes:function(){return c.union.apply(c,c.invoke(this.slots,"sizes"))},getVideoAdTagUrl:function(e){var t=encodeURIComponent(n.Ads.getAdUnit()),i=encodeURIComponent(n.Ads.getCompanionSizesString()),a=encodeURIComponent(n.Ads.getTargetingString()),r=encodeURIComponent(n.Ads.getAdRule()),o=encodeURIComponent(n.Ads.getDescriptionUrl()),l="http://pubads.g.doubleclick.net/gampad/ads?sz=768x432&adRule="+r+"&iu="+t+"&ciu_szs="+i+"&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&correlator=[timestamp]&cmsid=604&cust_params="+a+"&description_url="+o;return e&&e.length>0&&(l+="&vid="+e),s.mobile&&(l+="&m_ast=vast"),l}},h(["restore","remove"],function(e){B.prototype[e]=function(){h(this.slots,function(t){t[e]()})}});var F=function(){return e.location.hostname};e.googletag={cmd:[]},a=c.once(function(){var t=e.googletag,i=t.pubads();i.setTargeting("hostname",F()),w=t.defineSlot(D,M,C),w.addService(t.companionAds()).addService(i),t.companionAds().setRefreshUnfilledSlots(!0),i.enableAsyncRendering(),i.collapseEmptyDivs(),i.disableInitialLoad(),t.enableServices()}),l(function(){var e={dataType:"script",cache:!0};l.ajax("//www.googletagservices.com/tag/js/"+x,e)}),e.sendJSEvent=function(e){try{"pauseVideo"===e?n.Ads.getPlayer().messageBus.sendMessage("pause"):"playVideo"===e&&n.Ads.getPlayer().messageBus.sendMessage("resume")}catch(t){}};var N,j=function(e){if(u.createEvent){var t=u.createEvent("Event");t.initEvent(e,!0,!0),u.dispatchEvent(t)}},z=function(){u.attachEvent&&!i()?u.documentElement.fakePlayEvent++:j("DisneyMediaPlayerPlay")},U=function(){u.attachEvent&&!i()?u.documentElement.fakePauseEvent++:j("DisneyMediaPlayerStop")};l("document").ready(function(){u.attachEvent&&!i()&&(u.documentElement.fakePlayEvent=0,u.documentElement.fakePauseEvent=0)}),c.extend(r,{isMobile:s.mobile,setPlayer:function(e){N&&N.messageBus&&(N.messageBus.removeMessageListener("played",z),N.messageBus.removeMessageListener("paused",U)),N=e,N&&N.messageBus&&(N.messageBus.addMessageListener("played",z),N.messageBus.addMessageListener("paused",U))},getPlayer:function(){return N},getAdUnit:function(){return D},getTargeting:function(){return R},getTargetingString:function(){var e="";return R&&!R.hostname&&(R.hostname=F()),c.each(R,function(t,i){i&&t&&(e+=i+"="+t+"&")}),e.slice(0,e.length-1)},getCompanionSizes:function(){return[M]},getCompanionSizesString:function(){var e=n.Ads.getCompanionSizes(),t="";return c.each(e,function(e){e&&(t+=e[0]+"x"+e[1]+",")}),t.slice(0,t.length-1)},getAdRule:function(){var e=n.Ads.getAdContext(),t=e.adData||{},i=0===t.dfpAdRule?0:1;return i},getDescriptionUrl:function(){return"http://"+v()}})}(this),function(e){"use strict";function t(e,t,i){var a=e.sizes(),n='<aside class="gpt '+e.name+'" id="'+e.id+'" style="'+e.style()+'"><span id="comp_'+a+'" class="_fwph">';return n+='<form id="_fw_form_comp_'+a+'" style="display:none" >',n+='<input type="hidden" name="_fw_input_comp_'+a+'" id="_fw_input_comp_'+a+'" value="'+t+'" /></form>',n+='<span id="_fw_container_comp_'+a+i+"></span></span></aside>"}var i=e.Disney,a=i.Ads=i.Ads||{},n=e.Modernizr,r=e.jQuery,s=e._,o=function(){return{}},l=s.each,c=s.pluck,d=s.extend,u=function(){},h=function(e){var t=this,i=function(){t.apply(this,arguments)};return u.prototype=this.prototype,i.prototype=new u,d(i.prototype,e),i.sub=this.sub,i},f=function(e,t,i){var a=this;this.id||(this.id=s.uniqueId("vevo-")),s.isArray(i[0])||(i=[i]),a._w=s.max(c(i,0)),a._h=s.max(c(i,1)),a.name||(a.name=e),a._d=i};f.sub=h,f.prototype={define:function(){},tag:function(){return t(this,"ptgt=p&envp=g_iframe_js&slau="+this.sizes()+"_Companion1&slid=comp_"+this.sizes()+"&cd="+this._w+","+this._h+"&flag=+fcai+niic",'"')},style:function(){return"width:"+this._w+"px;height:"+this._h+"px"},ready:function(){var e=this;e._$=r("#"+this.id)},restore:function(){this._$&&!this._$.closest("html").length&&r("#"+this.id).remove()},remove:function(){this._$&&this._$.appendTo("body").empty().remove()},refresh:function(){var e=this._s},sizes:function(){return s.map(this._d,function(e){return e[0]+"x"+e[1]})}};var p,m=f.sub({ready:function(){f.prototype.ready.call(this)},tag:function(){return t(this,"ptgt=p&envp=g_iframe_js&slid=comp_"+this.sizes()+"&w="+this._w+"&h="+this._h+"&flag=-cmpn",'" class="_fwac"')}}),g="vevo-companion",v="companion",b=f.sub({id:g,name:v,define:function(){},ready:function(){f.prototype.ready.call(this)},tag:function(){return t(this,"ptgt=p&envp=g_iframe_js&slau="+this.sizes()+"_Companion1&slid=comp_"+this.sizes()+"&cd="+this._w+","+this._h+"&flag=+fcai+niic",'"')}}),y=[300,60];p=n.mobile||!n.flash||e.location.href.indexOf("html5=true")>-1?{}:{videoCompanion:[b,y],pushdown:[m,[[728,90]]],rectangle:[f,[300,250]]};var k,w,_=a.VevoAdContext=function(e,t){function a(){return r.Deferred(function(e){i.age(function(t){n.siteSection="adult"===t||"teen"===t||"unknown"===t?w.config.ads:w.config.coppa,e.resolve()})}).promise()}var n=this;n.slots=k={},w=e,n.adSystem="vevo",n.siteSection=w.config.coppa,n.ageReady=r.Deferred(function(e){i.age(e.resolve)}).promise(),n.status=function(){return n.ageReady},n.cds()===!0||w.disableAds===!0?n.siteSection=w.config.noads:a(),t.on("login",a),t.on("logout",a)};_.prototype={tag:function(e){if(this.cds())return"";var t,i=this.slots[e],a=p[e];return i?i.tag():a?(t=a[0],a=new t(e,"",a[1],d({},this._t,"")),a.context=this,this.slots[e]=a,a.tag()):""},cds:function(){return!!w.cds},noAds:function(){return!1},showCDSAds:function(){return!0},useAdPattern:function(){return!0},removeSlot:function(e){k[e].remove()},helpers:function(e,t,i){var a=this,n={};return l(p,function(e,r){n[r+"Ad"]=function(){return a.tag(r,d({},t,this.adTargeting),i)}}),n},sizes:function(){return s.union.apply(s,s.invoke(this.slots,"sizes"))},setTargeting:o,setTranslation:o},l(["ready","restore","remove","refresh"],function(e){_.prototype[e]=function(){l(this.slots,function(t){t[e]()})}})}(this),function(e){"use strict";var t=e.Disney,i=t.Ads=t.Ads||{},a=e.XDomainRequest,n=e.jQuery,r=e._,s=r.extend,o=e.location.href.indexOf("gameVideoAd=true")>-1,l=!0,c=function(e,t){if(a){var i=new a;i&&(i.onload=function(){t(i.responseText)},i.open("get",e),i.send())}else n.get(e,t)},d=function(t){e.googletag.cmd.push(function(){t(e.googletag)})},u=function(){var t=e.location.hostname;return t.match(/\.diznee.net/)&&(t=t.split(".").slice(0,-3).join(".")),t.replace("www.","")},h=function(){var e=r.map(t.locales,function(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}).join("|"),i=new RegExp("^(?:[a-z0-9-]+.)*?((?:(?:"+e+").)?[a-z0-9-]+(?:.com?)?(?:.[a-z]{2})?)$","i");return u().match(i)[1]},f=function(){return u()===h()},p=function(){return u().replace("."+h(),"")},m=function(){return e.location.pathname.split("/")},g=function(){var e=m();return f()?""===e[1]?"homepage":e[1]:p()},v=function(e){return r.find(e,function(e){return["watch","watch_2","sidekick_video","trailer"].indexOf(e.get("view"))>-1})},b=function(e){var t=v(e),i=t?t.get("data"):[],a=i.length>0?i[0]:{},n=a.externals||[],r=n.length>0?n[0]:{};return"kaltura"===r.source?r.data&&"IBMS"===r.data.Origin?"26725361":"27176231":"matterhorn-player"},y=function(e,t){return(r.find(t,function(t){return t.kaltura_act_id===e})||{cms_id:604}).cms_id},k=function(e){var t=v(e),i=t?t.get("data"):null;return i&&i[0]?i[0].adId:"unknown"},w=function(e){var t=v(e),i=t?t.get("data"):[],a=i.length>0?i[0]:{},n=a.externals||[],r=n.length>0?n[0]:{};return r.account?r.account:null},_=function(e){var t=m();return t[f()?e:e+1]},x=function(){return _(0)},A=function(){return _(1)},C=function(){return _(2)},S={cmsid:604,disneycms:"MH"},T={manual:!0,position:["oop","overlay","top-mpu","top-head","inline-head","lower-head","rich-head","logo","video-mpu","lower-head","lower-mpu","games-video"].join(",")},P={sdk:1,vid:"vid",output:"vast"},E="http://analytics.disneyinternational.com/ads/tagsv2/",I=function(e){var t=E+"video/";return[t,n.param(r.defaults(e||{},S,P))].join("?")},L=function(e){var t=E+"json/";return[t,n.param(r.defaults(e||{},S,T))].join("?")},M=function(e,t){var i=e.advertisement_placement_id;if(t=t||e.advertisement_type,"leaderboard"===t)switch(i){case"top":return"top-head";case"mid1":return"inline-head";case"rich":return"rich-head";default:return"lower-head"}else{if("mpu"!==t)return"inline-head";switch(i){case"top":return"top-mpu";case"lower":return"lower-mpu";case"video":return"video-mpu";default:return"top-mpu"}}},D=function(){},R=function(e){var t=this,i=function(){t.apply(this,arguments)};return D.prototype=this.prototype,i.prototype=new D,s(i.prototype,e),i.sub=this.sub,i},O=function(e,t){this.id=e,this.element_id=r.uniqueId("am-"),this.type=t};O.sub=R,O.prototype={tag:function(){return'<div class="admaster '+this.id+'-container"><div class="'+this.id+' aside" id="'+this.element_id+'"></div></div>'},ready:function(){this._$=n("#"+this.element_id)},define:function(e){var t=this;d(function(i){var a,r=e.mappingSizes[t.id]||{},s=r.slotSizes||null,o=r.defaults||[],l=r.targeting||{},c=e.viewports||{},d=e.adUnitPath||"",u=["pubads"];if(r.service&&u.push(r.service),a="oop"===t.id?i.defineOutOfPageSlot(d,t.element_id):i.defineSlot(d,o,t.element_id)){var h,f,p,m,g=i.sizeMapping();if(s){for(m in c)null!==(h=c[m])&&(g=g.addSize(h,s[m]));a.defineSizeMapping(g.build())}for(m in l)null!==(f=l[m])&&a.setTargeting(m,[f]);for(m in u)null!==(p=u[m])&&n.isFunction(i[p])&&a.addService(i[p]());t.gptslot=a}})},display:function(){var e=this;d(function(t){t.display(e.element_id)})},restore:function(){this._$.length&&!this._$.closest("html").length&&this._$.remove()},remove:function(){this._$.appendTo("body").empty().remove()},refresh:function(){var e=this;d(function(t){t.pubads().refresh([e.gptslot])})}};var B,F=O.sub({ready:function(){var e=this;e._$=n("#"+e.element_id),d(function(t){n.getJSON(L(r.extend({},e.context.baseParams,{position:e.id}))+"&callback=?",function(i){var a,n,r=i.targetings||{},s=t.pubads();e.define(i);for(a in r)null!==(n=r[a])&&s.setTargeting(a,n);e.display(),t.pubads().refresh([e.gptslot])})})}}),N=O.sub({adPlayed:!1,tag:function(){return'<aside class="admaster" id="'+this.element_id+'-container" style="margin:0px auto;'+this.style()+'"><div class="'+this.id+'" id="'+this.element_id+'" style="'+this.style()+'"></div><div class="'+this.id+'" id="'+this.element_id+'-video" style="'+this.style()+';display:none"></div></aside>'},style:function(){return"width:750px;height:500px"},ready:function(){var t=this;t._$=n("#"+this.element_id+"-container"),d(function(){o&&e.setTimeout(function(){e.disableAutoUnload(),t.videoMode()},0)})},remove:function(){t.Ads.setPlayer(null),this.adPlayer&&(this.adPlayer.messageBus&&this.adPlayer.messageBus.removeMessageListener("adStart",this.onAdStart),this.adPlayer.destroy(),this.adPlayer=null),O.prototype.remove.call(this)},getId:function(){return this.element_id},videoMode:function(){var e=this.context||{},i=e.adTagPreUrl||"",a=r.isEmpty(i)?e.adTagUrl:i,s={adTagUrl:a,translations:e.translations},o=this.element_id,l=o+"-video";n("#"+o).hide(),n("#"+l).show(),this.onAdStart=r.bind(function(){this.adPlayed=!0},this),this.adPlayer=new t.Ads.AdPlayer(l,s),this.adPlayer.messageBus.addMessageListener("adStart",this.onAdStart),t.Ads.setPlayer(this.adPlayer)}}),j=n("body"),z=i.AdMasterAdContext=function(){var e=this;e.slots=B||{},e.translations={advertisement:"Advertisement",skip_ad:"Skip Ad"},e.adCounts={},e.adSystem="admaster",e.companion="div-video-mpu:300:250",e.adTagUrl="",e.adTagPreUrl="",e.adTagPostUrl="",e.adTagReady=n.Deferred(),e.status=function(){return e.adTagReady},e.iterateRegistryName=function(e){var t=this.adCounts[e]||0,i=e;return t>0&&(i=e+"-"+t),this.adCounts[e]=t+1,i},d(function(e){var t=e.pubads(),i=e.companionAds();t.collapseEmptyDivs(!0),t.enableVideoAds(!0),t.enableSingleRequest(),i.setRefreshUnfilledSlots(!0),t.disableInitialLoad(),t.enableAsyncRendering(),e.enableServices()})};z.prototype={tag:function(e,t){var i;return"games-video"===e?(e="games-video",t="gameLoader",i=new N(e,t)):"modalInterstitial"===e?(e="top-mpu",t="modalInterstitial",i=new F(e,t)):(t=t||e,i=new O(e,t)),i.context=this,this.slots[this.iterateRegistryName(t)]=i,i.tag()},ready:function(t,i){var a=t?t.collection:{},s=i?i.collection:{},o=s.cto||a.cto||{},u=s.adData||a.adData||{},f=u.adTargeting||{},p=u.cmsIdKalturaMap||[{}],m=0===u.dfpAdRule?0:1,v=this,_={actor:f.actor,bucode:o.buCode,buid:o.buId,character:f.character,characterId:f.characterId,country:o.country,disneycms:o.cmsId,pagename:f.pageName,property:o.property,propertyId:o.propertyId,product:f.product,contenttype:o.contentType,contentid:f.contentId,hub:h(),gamegenre:f.gameGenre,gamename:f.gameTitle,gametype:f.gameType,keywords:f.keywords,moviegenre:f.movieGenre,movierating:f.movieRating,movietitle:f.movieTitle,site:g(),section:x(),slug1:A(),slug2:C(),sitesection:g()},S=r.extend({},_,{vid:k(a.models),sdk:m,cmsid:y(w(a.models),p),player:b(a.models),url:e.location.href,description_url:"http://"+h()});if(v.view=t,v.dfpAdRule=m,v.baseParams=_,"burger"===n(v.view.el).attr("id")&&(j.append(v.tag("oop")),j.append(v.tag("overlay"))),0===m){var T=[];T.push(c(I(r.extend({},S,{vpos:"preroll"})),function(e){v.adTagPreUrl=e})),T.push(c(I(r.extend({},S,{vpos:"postroll"})),function(e){v.adTagPostUrl=e}));var P=n.when(T);P.done(function(){v.adTagReady.resolve()})}else c(I(r.extend({},S)),function(e){v.adTagUrl=e,v.adTagReady.resolve()});d(function(t){n.getJSON(L(r.extend({},_,{position:r.map(v.slots,function(e){return e.id}).join(",")}))+"&callback=?",function(i){var a,s,o=i.targetings||{},c=t.pubads();r.each(v.slots,function(e){e.ready(),e.define(i)});for(a in o)null!==(s=o[a])&&c.setTargeting(a,s);r.each(v.slots,function(e){e.display()});var d=r.map(v.slots,function(e){return e.gptslot});l?n(e.window).load(function(){l=!1,t.pubads().refresh(d)}):t.pubads().refresh(d)})})},cds:function(){return!1},noAds:function(){return!1},useAdPattern:function(){return!1},setTranslation:function(e,t){this.translations[e]=t},helpers:function(e){var t=this,i=e,a=i?M(i,"mpu"):"top-mpu";return{pushdownAd:function(){return t.tag("top-head","pushdown")},rectangleAd:function(){return t.tag(a,"rectangle")},rectAllAd:function(){return t.tag(a,"rectAll")},companionAd:function(){var e=i&&i.view;return"watch"===e||"play"===e?t.tag("video-mpu","companionAd"):"watch_2"===e?t.tag("video-comp-2","companionAd"):t.tag(a,"companionAd")},gameLoaderAd:function(){return t.tag("games-video","gameLoader")},bannerAd:function(){return i&&"ad_banner"===i.view?t.tag(M(i),"bannerAd-"+M(i)):t.tag("inline-head","bannerAd")}}},remove:function(){r.each(this.slots,function(e){e.remove()})}},r.each(["restore"],function(e){z.prototype[e]=function(){r.each(this.slots,function(t){t[e]()})}})}(this),function(e){"use strict";var t=e.Disney,i=t.Ads=t.Ads||{},a=function(){return{}},n=e.jQuery,r=i.NoAdContext=function(e){var t=n.Deferred().resolve().promise();this.cds=function(){return e.cds},this.noAds=function(){return e.disableAds},this.status=function(){return t}};r.prototype={adSystem:"noads",showCDSAds:function(){return!1},helpers:a,ready:a,refresh:a,restore:a,remove:a,setTargeting:a,setTranslation:a,tag:function(){return""},sizes:function(){return[]}}}(this),function(e){"use strict";var t,i=e.Disney,a=i.Ads,n=e._;i.Ads.AdContext=function(e){var i=e.adData;switch(i.adSystem){case"dfp":t=new a.DoubleClickAdContext(i);break;case"vevo":t=new a.VevoAdContext(i,e.guestContext);break;case"admaster":t=new a.AdMasterAdContext(i);break;default:t=new a.NoAdContext(i)}return t},n.extend(a,{getAdSlots:function(){return i.top?i.top.current.ads.slots:t},getAdContext:function(){return i.top?i.top.current.ads:t}})}(this),function(e){"use strict";var t=e.Disney,i=t.Cookie,a=e.Backbone,n=e._,r=/^([0-9a-f]+):([^:]+)/,s="dolMttAbn",o=7,l=function(){var e=r.exec(i.get(s)||"");return e&&{id:e[1],group:e[2]}},c=function(e){i.set(s,e.id+":"+e.group,{domain:i.domain(),path:"/",expires:o})},d=t.abn=n.extend({testcase:function(){return l()},parse:function(e){var a,r,s=e.abn,o=s&&s.cases,c=l(),d=-1;return o&&(r=n.pluck(o,"weight"),a=n.keys(o),!i.enabled()||c&&c.id!==s.id||(c?d=n.indexOf(a,c.group):(d=t.randi(r),d>=0&&(c={id:s.id,group:a[d]}))),e=o[a[0>d?0:d]].data,d>=0&&this.trigger("view",c,e)),e}},a.Events);d.on("view",c),t.randi=function(t){var i,a,n=0,r=t.length;for(i=r-1;i>-1;--i)n+=+t[i]||0;for(a=e.Math.random()*n,i=r-1;a>=0&&i>-2;--i)a-=+t[i]||0;return i+1}}(this),function(e){"use strict";var t=e.jQuery,i=e._,a=e.Backbone,n=e.Math,r=a.Collection,s=function(e,t){var i,a=new Array(e);if(t!==a[0])for(i=0;e>i;++i)a[i]=t;return a},o=function(e){return{models:e}};a.LazyCollection=r.extend({params:{limit:"limit",offset:"offset"},constructor:function(e,t){t||(t={}),this.count=t.count,this.min=t.min||e&&e.length||1,t.params&&(this.params=i.defaults(t.params,this.params)),r.call(this,e,t)},ensure:function(e){var i,a,r=this,s=r.count,o=r.length,l=r._ensure,c=r.params,d=n.min(e-o,r.min);return s&&(e=n.min(e,s)),o>=e?a=t.when():l?(a=t.Deferred(),l.always(function(){r.ensure(e).then(function(){a.resolveWith(arguments)},function(){a.rejectWith(arguments)})})):(i={},i[c.limit]=d,i[c.offset]=o,r.trigger("loading",r,!0),a=r._ensure=r.fetch({add:!0,remove:!1,data:i}).then(function(){r.length<o+d&&(r.count=r.length)}).always(function(){r._ensure=null,r.trigger("loading",r,!1)})),a},remaining:function(){var e=this.count;return e?e-this.length:null},loading:function(){return!!this._ensure},pages:function(e,t){var a,r,l=[],c=t&&t.whole,d=t&&t.pad,u=t&&t.nest,h=t&&t.fill;for(e=+e||1,r=0;r<this.length;r+=e)l.push(this.models.slice(r,r+e));if(r=l.length-1,c&&r>0&&l[r].length<e&&(--r,l.pop()),d&&(r>=0&&(l[r]=l[r].concat(s(e-l[r].length,h))),a=s(e,h)),u&&(l=i.map(l,o),a=o(a)),d){for(r=n.floor(this.count/e);l.length<r;)l.push(a);r=this.count-r*e,r>0&&!c&&(a=s(r,h),l.push(u?o(a):a))}return l},peeking:function(){return!0},page:function(e,t){return this.pages(t,{nest:!0})},lastIndex:function(e){return this.pages(e,{nest:!0}).length-1}}),a.LazySliderCollection=a.LazyCollection.extend({constructor:function(e,t){this.loadedPageCounter=[],this.pageOptions={nest:!0},i.each(e,function(e){e.set("hidden",!0)}),a.LazyCollection.call(this,e,t)},startingIndex:0,lastIndex:function(e){return this.pages(e,this.pageOptions).length-1},page:function(e,t,a,n){var r=this.pages(t,this.pageOptions);if(i.each(r[e].models,function(e){e&&e.set("hidden",!1)}),this.nextPeek(e,r)){var s=r[e+1];i(a).times(function(e){var t=s.models[e*n];t&&t.set("hidden",!1)})}return i.contains(this.loadedPageCounter,e)||this.loadedPageCounter.push(e),r},loadedPages:function(){return this.loadedPageCounter.length},peeking:function(e){return this.length>e},nextPeek:function(e,t){return e<t.length-1}}),a.LazyFilterCollection=a.LazyCollection.extend({parse:function(e){return this.count=e.count,this.nextFilter=e.next?e.next:null,e.data},next:function(){this.nextFilter&&(this.url=this.baseUrl+this.nextFilter)}})}(this),function(e){"use strict";function t(e,t){var i=n.top.current,a=i.guest;a.current?"CHILD"!==a.current.profile.ageBand&&e(t):e(t)}function i(t){var i=new e.Image;i.src=t}function a(t){var i=e.document.createElement("iframe");i.src=t,i.frameborder="0",i.height="1",i.width="1",i.style.display="none",r(e.document.body).prepend(i)}var n=e.Disney,r=e.jQuery,s=e.Math,o=/%%([a-z0-9]+)%%/g,l=function(e,t){return"rng"===t?""+s.floor(1e18*s.random()):""},c=n.ping=function(e){var n=e.toString().replace(o,l);n.match(/\/activityi;/)?t(a,n):t(i,n)};r("body").on("click","a[data-ping]",function(){c(this.getAttribute("data-ping"))})}(this);var CryptoJS=CryptoJS||function(e,t){var i={},a=i.lib={},n=function(){},r=a.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=a.WordArray=r.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,a=this.sigBytes;if(e=e.sigBytes,this.clamp(),a%4)for(var n=0;e>n;n++)t[a+n>>>2]|=(i[n>>>2]>>>24-8*(n%4)&255)<<24-8*((a+n)%4);else if(65535<i.length)for(n=0;e>n;n+=4)t[a+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],a=0;t>a;a+=4)i.push(4294967296*e.random()|0);return new s.init(i,t)}}),o=i.enc={},l=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],a=0;e>a;a++){var n=t[a>>>2]>>>24-8*(a%4)&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;t>a;a+=2)i[a>>>3]|=parseInt(e.substr(a,2),16)<<24-4*(a%8);return new s.init(i,t/2)}},c=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],a=0;e>a;a++)i.push(String.fromCharCode(t[a>>>2]>>>24-8*(a%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;t>a;a++)i[a>>>2]|=(255&e.charCodeAt(a))<<24-8*(a%4);
return new s.init(i,t)}},d=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=a.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,a=i.words,n=i.sigBytes,r=this.blockSize,o=n/(4*r),o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0);if(t=o*r,n=e.min(4*t,n),t){for(var l=0;t>l;l+=r)this._doProcessBlock(a,l);l=a.splice(0,t),i.sigBytes-=n}return new s.init(l,n)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=u.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new h.HMAC.init(e,i).finalize(t)}}});var h=i.algo={};return i}(Math);!function(){var e=CryptoJS,t=e.lib,i=t.WordArray,a=t.Hasher,n=[],t=e.algo.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,a=i[0],r=i[1],s=i[2],o=i[3],l=i[4],c=0;80>c;c++){if(16>c)n[c]=0|e[t+c];else{var d=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=d<<1|d>>>31}d=(a<<5|a>>>27)+l+n[c],d=20>c?d+((r&s|~r&o)+1518500249):40>c?d+((r^s^o)+1859775393):60>c?d+((r&s|r&o|s&o)-1894007588):d+((r^s^o)-899497514),l=o,o=s,s=r<<30|r>>>2,r=a,a=d}i[0]=i[0]+a|0,i[1]=i[1]+r|0,i[2]=i[2]+s|0,i[3]=i[3]+o|0,i[4]=i[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,a=8*e.sigBytes;return t[a>>>5]|=128<<24-a%32,t[(a+64>>>9<<4)+14]=Math.floor(i/4294967296),t[(a+64>>>9<<4)+15]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=a._createHelper(t),e.HmacSHA1=a._createHmacHelper(t)}(),function(e){"use strict";var t=e.Disney,i=e.Backbone,a=e._,n=e.CryptoJS,r="change:watched",s=function(e){var t=e&&e.profile?e.profile.swid:void 0;this.current=e||{},this.current.userId=t?n.SHA1(t).toString().substr(0,12):""},o=function(){this.current=void 0},l=["login","logout","refresh","updateProfile"],c=t.GuestContext=function(e){this._h=e||{},this.on("login",s),this.on("update",s),this.on("logout",o)};c.actions=l,a.extend(c.prototype,i.Events,{_r:0,retain:function(){0===this._r++&&this.trigger(r,this,!0)},release:function(){this._r>0&&0===--this._r&&this.trigger(r,this,!1)},watched:function(){return this._r>0}});var d=function(){throw"Not implemented"};a.each(l,function(e){c.prototype[e]=function(){return(this._h[e]||d).apply(this,arguments)}})}(this),function(e,t){"use strict";function i(){}var a,n,r=e.Disney,s=e._,o=e.JSON,l=s.rest,c={query:i,provide:i,pub:i,sub:i};o&&e.postMessage&&(e.addEventListener?(a=function(t){e.addEventListener("message",t,!1)},n=function(t){e.removeEventListener("message",t,!1)}):e.attachEvent&&(a=function(t){e.attachEvent("onmessage",t)},n=function(t){e.detachEvent("onmessage",t)})),r.xdc=function(e,i,r,d){function u(t){var a=m+o.stringify([t].concat(l(arguments)));e.postMessage(a,i)}function h(e){var a,n,r=p.length;e.origin===i&&"string"==typeof e.data&&e.data.substr(0,r)===p&&(a=o.parse(e.data.substr(r)),"string"==typeof a[0]&&(n=s.has(f,a[0])&&f[a[0]])&&n.apply(t,l(a)))}var f,p="xdc "+r+" ",m="xdc "+(d||r)+" ",g={},v={},b={};return a?(a(h),f={call:function(e,i,a){function n(){if(o++)throw"reply already sent";u("reply",i,s.toArray(arguments))}var r=s.has(v,e)&&v[e],o=0,l=!1;if(r)try{r.apply(t,a.concat([n])),l=!0}finally{l||u("error",i,"unexpected remote exception")}else u("error",i,"undefined remote procedure: "+e)},reply:function(e,i){var a=s.has(g,e)&&g[e];a&&(delete g[e],a.apply(t,i))},notify:function(e,i){var a,n,r=s.has(b,e)&&b[e];if("number"==typeof i.length){if(r)for(a=0,n=r.length;n>a;++a)r[a].apply(t,i);"all"!==e&&f.notify("all",[e].concat(i))}},error:function(e,t){var i=s.has(g,e)&&g[e];if(i)throw delete g[e],""+t}},{query:function(e){var t=l(arguments),i=t[t.length-1],a=s.uniqueId();i&&(g[a]=i,u("call",e,a,s.initial(t)))},provide:function(e,t){v[e]=t},pub:function(e){u("notify",e,l(arguments))},sub:function(e,t){var i=b[e];i||(i=b[e]=[]),i.push(t)},close:function(){n(h)}}):c}}(this),function(e){"use strict";var t=e.Disney,i=e.jQuery,a=e._,n=e.document,r=/^([^\/:]+:\/\/[^\/]+)\//,s="#auth-system-wrapper{ position: absolute; top: 0; bottom: 0; left: 0; right: 0; width: 100%; overflow: hidden; z-index: 10000; }#auth-system-wrapper.open{ visibility: visible; min-height: 2000px; }#auth-system-wrapper.closed{ visibility: hidden; min-height: 0; height: 0; }#auth-system-iframe{ width: 100%; height: 100%; overflow: hidden; display: block; border: none; }";t.initGuestConsumer=function(o,l){var c=r.exec(o)||r.exec(e.location.href),d=i.Deferred(),u={};return a.each(t.GuestContext.actions,function(e){u[e]=function(){return d.then(function(t){return i.Deferred(function(i){t.query(e,function(e,t){t?i.reject(t):i.resolve(e)})})})}}),u=new t.GuestContext(u),d.then(function(e){e.sub("all",function(){u.trigger.apply(u,a.toArray(arguments))})}),c?!function(){function e(){r.setAttribute("class","closed")}var a,r=n.createElement("div"),h=n.createElement("iframe"),f=n.createElement("style");h.setAttribute("allowtransparency","true"),h.setAttribute("id","auth-system-iframe"),h.setAttribute("scrolling","no"),h.src=o,f.setAttribute("type","text/css"),f.innerHTML=s,r.setAttribute("id","auth-system-wrapper"),r.appendChild(f),r.appendChild(h),e(),l=l||n.body,l.appendChild(r),l.style.position="relative",a=t.xdc(h.contentWindow,c[1],"guest"),a.provide("ready",function(e){e(),d.resolve(a)}),u.on("open",function(){r.setAttribute("class","open"),h.focus&&h.focus(),i("html,body").scrollTop(0)}),u.on("close",e)}():d.reject(),u}}(this),function(e){"use strict";var t=e.Disney,i=e._,a=e.jQuery;t.initEmptyGuestConsumer=function(){var e={};return i.each(t.GuestContext.actions,function(t){e[t]=function(){return a.Deferred()}}),new t.GuestContext(e)}}(this),function(e){"use strict";var t=e.Disney;t.gocGuest=function(t,i){function a(e){t.queue.push(e)}function n(){a(i.watched()||i.current?["user",!!i.current]:["user",void 0])}n(),i.on("change:watched",n),i.on("login",n),i.on("logout",n),a(["on","click:login",function(){i.login()}]),a(["on","click:logout",function(){i.logout()}]),a(["on","click:profile",function(){i.updateProfile()}]),a(["on","click:create",function(t){var a=t.target.parentNode.href,n=i.current.userId;e.location=a+"/"+n}])}}(this),function(e){"use strict";function t(e){a.age.known((e.profile.ageBand||"unknown").toLowerCase())}function i(){a.age.known(null)}var a=e.Disney;a.ageGuest=function(e){e.refresh().fail(i),e.on("login",t),e.on("update",t),e.on("logout",i)}}(this),function(e){"use strict";var t=e.Disney,i=e.$;i(function(){t.top.on("ready",function(){t.disid.enable&&this.current.guest&&this.current.guest.retain()}),t.top.on("destroy",function(){t.disid.enable&&this.current.guest&&this.current.guest.release()})})}(this),function(e){"use strict";function t(){return n.mobile?"mobile":"desktop"}function i(e,t,i){return t&&!r.include(e.disallowed_regions,t)&&!r.include(e.disallowed_regions,i)&&(r.isEmpty(e.allowed_regions)||r.include(e.allowed_regions,t)||r.include(e.allowed_regions,i))}var a=e.Disney,n=e.Modernizr,r=e._,s=e.$;a.vis=function(e){return r.reduce(e,function(e,i){var a=i.visibility||{};return r.contains(a.invisible_device_types,t())||(r.isEmpty(a.allowed_regions)&&r.isEmpty(a.disallowed_regions)||(i.style_options.geo_hidden=!0),e.push(i)),e},[])},s(function(){a.top.on("ready",function(e){r.each(e.views,function(e){var t=e.model.get("visibility");t&&e.$el.hasClass("geo-hidden")?a.geo(function(a,n,r){i(t,a,a+"-"+r)&&(e.$el.removeClass("geo-hidden").addClass("geo-accepted"),e.geoReady&&e.geoReady())}):e.$el.hasClass("geo-hidden")||e.geoReady&&e.geoReady()})})})}(this),function(e){"use strict";function t(){var e=s.disid.opts||{},t=c.href.match(/draft_id=([a-z,0-9]*)/),i=0,a="?";t&&t[1]&&(e.draft_id=t[1]);var r=n.size(e);for(var o in e)e.hasOwnProperty(o)&&(a+=o+"="+e[o],r!==i+1&&(a+="&"),i++);return s.disid.base?s.initGuestConsumer(s.disid.base+c.host+c.pathname+encodeURI(a)):s.initEmptyGuestConsumer()}var i=e.Grill,a=e.jQuery,n=e._,r=e.Backbone,s=e.Disney,o=i.BurgerView,l=i.Burger,c=e.location,d=/[&?]draft_id=([^&]+)/.exec(c.search),u=e.Disney.rootGuestContext=t(),h=i.ValueAdedBurgerView=o.extend({initialize:function(){this.guest=u,o.prototype.initialize.apply(this,arguments)},spawn:function(e){var t=this.collection,a=this.ads;a||(this.ads=a=new s.Ads.AdContext({adData:t.adData,guestContext:u}));var n={model:e,ads:a,guest:this.guest,cds:a.cds(),noAds:a.noAds()};return i.ModuleView.create(e.get("view"),n)},optimizely:function(){var e=this.collection.optimizely;return e},cto:function(){var e=this.collection.cto,t=this.ads;t&&t.unit&&(e=a.extend({adPageName:t.unit,adSizeList:t.sizes().join(",")},e));var i=s.abn.testcase();return i&&(e=a.extend({abTest:i.id+"|"+i.group},e)),e},url:function(){return this.collection.href},branding:function(){return this.collection.branding}}),f=i.Module.extend({data:function(e){var t=new r.LazyCollection(e,{model:s.Entity,params:{offset:"o",limit:"l"},count:this.get("count")}),i=this.collection.url||c.pathname+c.search,n=i.indexOf("?")>=0?"&":"?";return i="/_grill/more"+i+n+a.param({r:this.get("ref")}),d&&(i+="&draft_id="+d[1]),t.url=i,t},subject:function(){return this.data.first()}}),p=i.MysteryMeat=l.extend({model:f,reset:function(e,t){return e=s.abn.parse(e),e.stack?e.stack=s.vis(e.stack):e=s.vis(e),l.prototype.reset.call(this,e,t)}});e.GOC&&s.gocGuest(e.GOC,u),s.ageGuest(u),a(function(){var e=s.top;e.on("ready",function(e){var t,i=e.ads,r=e.collection,o=a(".nav-local #nav-pushdown").css("min-height","");i&&i.helpers&&(t=i.helpers(),t.pushdownAd&&r&&r.adData.pda&&o.is(":visible")&&(o.html(t.pushdownAd()),e.catalogModulePositions&&(e.catalogModulePositions(),e.checkModuleVisibility())),e.guest&&r&&r.ping&&e.guest.refresh().always(function(){n.defer(s.ping,r.ping.dynamic)}),i.ready(e))}),i.burger&&n.defer(function(){e.transition(new h({el:a("#burger").empty().removeClass("frozen"),collection:new p(i.burger)}))})})}(this),function(e){"use strict";var t=e.Disney,i=e.Grill,a=e.Spatula,n=e._,r=e.$,s=i.TopperView=i.ValueAdedBurgerView.extend({className:"topper",id:"topper"});r(function(){var e=t.topper_nav=new a.ContainerView({el:"#topper-nav"});e.on("ready",function(e){var i=e.ads,a=e.collection,n=a&&a.adData,s=r("#topper-nav #nav-pushdown").css("min-height","");if(i&&i.helpers){var o=function(e,r){var o=r.ads||{},l=i.helpers(null,o.adData,o.unit);l.pushdownAd&&n&&s.is(":visible")&&s.html(l.pushdownAd()),a&&a.ping&&t.ping(a.ping),i.ready(e,r)};t.top.current&&o(e,t.top.current),t.top.on("ready",function(t){o(e,t)})}}),i.topper&&n.defer(function(){e.transition(new s({collection:new i.MysteryMeat(i.topper)}))})})}(this),function(e){"use strict";var t=e.Disney;t.Style.AssetPaths={theme_stylesheets:{junior:"//a.dilcdn.com/a/themes/junior/application-0dae3a207e3f.css",junior_emea:"//a.dilcdn.com/a/themes/junior/emea/application-93f95a794791.css",marvelkids:"//a.dilcdn.com/a/themes/marvelkids/application-d4331f47c2f2.css",marvelkids_home:"//a.dilcdn.com/a/themes/marvelkids/home/application-0d369474cc92.css",marvelkids_avengers:"//a.dilcdn.com/a/themes/marvelkids/avengers/application-468cef03c267.css","marvelkids_spider-man":"//a.dilcdn.com/a/themes/marvelkids/spider-man/application-8f0e81d73b52.css"},supported_videoplayer_skins:{junior:"//a.dilcdn.com/a/videoplayer_assets_junior-1b4f14d040c9.swf"},nav_logos:{light:{non_retina:"//a.dilcdn.com/a/logos/nav_logo-89193ebe6563.png",retina:"//a.dilcdn.com/a/logos/nav_logo@2x-25d10ad375dd.png"},dark:{non_retina:"//a.dilcdn.com/a/logos/nav_logo_dark-fa26a1e2ea84.png",retina:"//a.dilcdn.com/a/logos/nav_logo_dark@2x-8096506f0cde.png"}}}}(this),Whiskers("partials.style_elements.takeover_styles",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<style type="text/css"> /* style-pack-configured takeover styles */ '),a.s(a.f("module_override",e,t,1),e,t,0,88,191,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" #takeover-area .overlay.default{ opacity: 0; } #takeover-area .overlay.module-override{ opacity: 1; } ")}),e.pop()),a.b(" "),a.b(" "),a.s(a.f("topper_takeovers",e,t,1),e,t,0,336,703,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" @media screen and (max-width: "),i.b(i.v(i.f("max_bp",e,t,0))),i.b("px){ #topper{ background-image: url("),i.b(i.v(i.d("src.non_retina",e,t,0))),i.b("); background-size: "),i.b(i.v(i.f("display_width",e,t,0))),i.b("px "),i.b(i.v(i.f("display_height",e,t,0))),i.b("px; } } @media screen and (-webkit-min-device-pixel-ratio: 1.5) and (max-width: "),i.b(i.v(i.f("max_bp",e,t,0))),i.b("px), screen and (min-resolution: 144dpi) and (max-width: "),i.b(i.v(i.f("max_bp",e,t,0))),i.b("px){ #topper{ background-image: url("),i.b(i.v(i.d("src.retina",e,t,0))),i.b("); } } ")}),e.pop()),a.b(" @media screen and (min-width: 1025px){ "),a.s(a.f("fullscreen_module",e,t,1),e,t,1,0,0,"")||(a.b(" "),a.s(a.f("main_background_color",e,t,1),e,t,0,813,915,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" #takeover-area .overlay."),i.b(i.v(i.f("overlay_type",e,t,0))),i.b(" .main-color{ background-color: "),i.b(i.v(i.f("main_background_color",e,t,0))),i.b("; } ")}),e.pop()),a.b(" "),a.s(a.f("pushdown_safety_color",e,t,1),e,t,0,968,1084,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" #takeover-area .overlay."),i.b(i.v(i.f("overlay_type",e,t,0))),i.b(" .safety-color .color-block{ background-color: "),i.b(i.v(i.f("pushdown_safety_color",e,t,0))),i.b(";} ")}),e.pop()),a.b(" "),a.s(a.f("main_image",e,t,1),e,t,0,1126,1467,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" .site-default-gradient{ display: none; } #takeover-area .overlay."),i.b(i.v(i.f("overlay_type",e,t,0))),i.b(" .main-image{ background-image: url("),i.b(i.v(i.d("main_image.src",e,t,0))),i.b("); } "),i.s(i.f("main_background_color",e,t,1),e,t,0,1293,1440,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.s(i.f("repeating_image",e,t,1),e,t,1,0,0,"")||(i.b(" #takeover-area .overlay."),i.b(i.v(i.f("overlay_type",e,t,0))),i.b(" .repeating-image{ background-color: "),i.b(i.v(i.f("main_background_color",e,t,0))),i.b("; } "))}),e.pop()),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("top_gradient",e,t,1),e,t,0,1500,2239,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" #takeover-area .overlay."),i.b(i.v(i.f("overlay_type",e,t,0))),i.b(" .repeating-color "),i.s(i.f("main_image",e,t,1),e,t,0,1574,1633,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(", #takeover-area .overlay."),i.b(i.v(i.f("overlay_type",e,t,0))),i.b(" .repeating-image")}),e.pop()),i.b("{ background-image: -webkit-gradient(linear, left top, left bottom, from("),i.b(i.v(i.f("color",e,t,0))),i.b(" "),i.b(i.v(i.f("color_stop",e,t,0))),i.b("), to("),i.b(i.v(i.f("main_background_color",e,t,0))),i.b(")); background-image: -webkit-linear-gradient(top, "),i.b(i.v(i.f("color",e,t,0))),i.b(" "),i.b(i.v(i.f("color_stop",e,t,0))),i.b(", "),i.b(i.v(i.f("main_background_color",e,t,0))),i.b("); background-image: linear-gradient(to bottom, "),i.b(i.v(i.f("color",e,t,0))),i.b(" "),i.b(i.v(i.f("color_stop",e,t,0))),i.b(", "),i.b(i.v(i.f("main_background_color",e,t,0))),i.b("); "),i.b("-ms-filter: \"progid:DXImageTransform.Microsoft.gradient(startColorstr='"),i.b(i.v(i.f("color",e,t,0))),i.b("', endColorstr='"),i.b(i.v(i.f("main_background_color",e,t,0))),i.b("', GradientType=0)\"; } #takeover-area .overlay."),i.b(i.v(i.f("overlay_type",e,t,0))),i.b(" .safety-color .color-block{ background-color: "),i.b(i.v(i.f("color",e,t,0))),i.b(";} ")}),e.pop()),a.b(" "),a.s(a.f("repeating_image",e,t,1),e,t,0,2277,2387,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" #takeover-area .overlay."),i.b(i.v(i.f("overlay_type",e,t,0))),i.b(" .repeating-image{ background-image: url("),i.b(i.v(i.d("repeating_image.src",e,t,0))),i.b("); } ")}),e.pop()),a.b(" ")),a.b(" "),a.s(a.f("fullscreen_module",e,t,1),e,t,0,2453,2553,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" #nav-local{ height: 0; overflow: visible; } #nav-pushdown{ max-height: 126px; overflow: visible; } ")}),e.pop()),a.b(" "),a.s(a.f("local_chrome_dark",e,t,1),e,t,1,0,0,"")||a.b(" #nav-logo, #nav-local li a, aside.gpt.pushdown, #chrome-controls{ color: #fff; } #chrome-controls .chrome-controls-icon{ border-color: transparent #fff #fff transparent; } #nav-local li a.active{ color: #b2dfff; } "),a.b(" "),a.s(a.f("local_chrome_dark",e,t,1),e,t,0,2858,3144,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" #nav-logo, #nav-local li a, aside.gpt.pushdown, #chrome-controls{ color: #000; } #chrome-controls .chrome-controls-icon{ border-color: transparent #000 #000 transparent; } #nav-local li a.active{ color: #1786eb; } "),i.b(" ")}),e.pop()),a.b(" } "),a.s(a.f("nav_logos",e,t,1),e,t,0,3183,3522,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(" @media screen and (min-width: 1025px){ #nav-logo{ background-image: url("),i.b(i.v(i.f("non_retina",e,t,0))),i.b(");} } @media screen and (-webkit-min-device-pixel-ratio: 1.5) and (min-width: 1025px), screen and (min-resolution: 144dpi) and (min-width: 1025px){ #nav-logo{ background-image: url("),i.b(i.v(i.f("retina",e,t,0))),i.b(");} } ")}),e.pop()),a.b(" </style>"),a.fl()},partials:{},subs:{}}),Whiskers("partials.style_elements.page_styles",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<style type="text/css"> '),a.s(a.f("page_background_styles",e,t,1),e,t,0,51,1552,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" /* base-level page background styles */ #body-bg{ opacity: 1; } "),i.s(i.f("bg_color",e,t,1),e,t,0,129,204,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #body-bg .main, #body-bg .safety-color{ background-color: "),i.b(i.v(i.f("bg_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("gradient",e,t,1),e,t,0,231,878,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #body-bg .color-fade{ background-image: -webkit-gradient(linear, left top, left bottom, color-stop("),i.b(i.v(i.f("stop1",e,t,0))),i.b(", "),i.b(i.v(i.f("bg_color",e,t,0))),i.b("), color-stop("),i.b(i.v(i.f("stop2",e,t,0))),i.b(", "),i.b(i.v(i.f("bg_color",e,t,0))),i.b("), color-stop("),i.b(i.v(i.f("stop3",e,t,0))),i.b(", "),i.b(i.v(i.f("color",e,t,0))),i.b("), color-stop(92%, "),i.b(i.v(i.f("color",e,t,0))),i.b(")); background-image: -webkit-linear-gradient(top, "),i.b(i.v(i.f("bg_color",e,t,0))),i.b(" "),i.b(i.v(i.f("stop1",e,t,0))),i.b(", "),i.b(i.v(i.f("bg_color",e,t,0))),i.b(" "),i.b(i.v(i.f("stop2",e,t,0))),i.b(", "),i.b(i.v(i.f("color",e,t,0))),i.b(" "),i.b(i.v(i.f("stop3",e,t,0))),i.b(", "),i.b(i.v(i.f("color",e,t,0))),i.b(" "),i.b(i.v(i.f("stop4",e,t,0))),i.b("); background-image: linear-gradient(to bottom, "),i.b(i.v(i.f("bg_color",e,t,0))),i.b(" "),i.b(i.v(i.f("stop1",e,t,0))),i.b(", "),i.b(i.v(i.f("bg_color",e,t,0))),i.b(" "),i.b(i.v(i.f("stop2",e,t,0))),i.b(", "),i.b(i.v(i.f("color",e,t,0))),i.b(" "),i.b(i.v(i.f("stop3",e,t,0))),i.b(", "),i.b(i.v(i.f("color",e,t,0))),i.b(" "),i.b(i.v(i.f("stop4",e,t,0))),i.b("); "),i.b("-ms-filter: \"progid:DXImageTransform.Microsoft.gradient(startColorstr='"),i.b(i.v(i.f("bg_color",e,t,0))),i.b("', endColorstr='"),i.b(i.v(i.f("color",e,t,0))),i.b("', GradientType=0)\"; } ")}),e.pop()),i.b(" "),i.s(i.f("background_image",e,t,1),e,t,0,913,1027,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #base-bg{ background-image: url("),i.b(i.v(i.f("image",e,t,0))),i.b("); background-position: "),i.b(i.v(i.f("position",e,t,0))),i.b("; background-repeat: "),i.b(i.v(i.f("repeat",e,t,0))),i.b("; }) ")}),e.pop()),i.b(" "),i.s(i.f("footer_inverted",e,t,1),e,t,0,1069,1531,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(" @media screen and (min-width: 1025px){ "),i.b(" footer #bottomnav a, footer #bottomnav p, footer #help p, footer #utility p{ color: #fff; } footer #bottomnav .col, footer #utility .divider { border-color: rgba(255, 255, 255, 0.07); } } ")}),e.pop()),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("primary_theme",e,t,1),e,t,0,1598,2698,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" /* primary module-level color theme */ "),i.s(i.f("header_color",e,t,1),e,t,0,1655,1960,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.primary-theme:not(.skip-styles) h1:not(.skip-text-styles), .module.primary-theme:not(.skip-styles) h2:not(.skip-text-styles), .module.primary-theme.list_module_featured:not(.skip-styles) h3:not(.skip-text-styles), .module.primary-theme:not(.skip-styles) .accent-color{ color: "),i.b(i.v(i.f("header_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("text_color",e,t,1),e,t,0,1993,2321,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.primary-theme:not(.skip-styles) p:not(.skip-text-styles), .module:not(.skip-text-styles) ul:not(.skip-text-styles), .module.primary-theme:not(.skip-styles) li:not(.skip-text-styles), .module:not(.skip-text-styles) ol:not(.skip-text-styles), .module.primary-theme:not(.skip-styles) .base-color{ color: "),i.b(i.v(i.f("text_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("link_color",e,t,1),e,t,0,2352,2531,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.primary-theme:not(.skip-styles) a:not(.skip-text-styles), .module.primary-theme:not(.skip-styles) a.entity-link:hover h3:not(.skip-text-styles){ color: "),i.b(i.v(i.f("link_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("background_color",e,t,1),e,t,0,2568,2676,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.primary-theme:not(.skip-styles){ background-color: "),i.b(i.v(i.f("background_color",e,t,0))),i.b("; background-image: none; } ")}),e.pop()),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("secondary_theme",e,t,1),e,t,0,2737,3881,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" /* secondary module-level color theme */ "),i.s(i.f("header_color",e,t,1),e,t,0,2796,3109,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.secondary-theme:not(.skip-styles) h1:not(.skip-text-styles), .module.secondary-theme:not(.skip-styles) h2:not(.skip-text-styles), .module.secondary-theme.list_module_featured:not(.skip-styles) h3:not(.skip-text-styles), .module.secondary-theme:not(.skip-styles) .accent-color{ color: "),i.b(i.v(i.f("header_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("text_color",e,t,1),e,t,0,3142,3498,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.secondary-theme:not(.skip-styles) p:not(.skip-text-styles), .module.secondary-theme:not(.skip-styles) ul:not(.skip-text-styles), .module.secondary-theme:not(.skip-styles) li:not(.skip-text-styles), .module.secondary-theme:not(.skip-styles) ol:not(.skip-text-styles), .module.secondary-theme:not(.skip-styles) .base-color{ color: "),i.b(i.v(i.f("text_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("link_color",e,t,1),e,t,0,3529,3712,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.secondary-theme:not(.skip-styles) a:not(.skip-text-styles), .module.secondary-theme:not(.skip-styles) a.entity-link:hover h3:not(.skip-text-styles){ color: "),i.b(i.v(i.f("link_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("background_color",e,t,1),e,t,0,3749,3859,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.secondary-theme:not(.skip-styles){ background-color: "),i.b(i.v(i.f("background_color",e,t,0))),i.b("; background-image: none; } ")}),e.pop()),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("icon_styles",e,t,1),e,t,0,3918,4258,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" /* module-level icon colors */ .module .module_header.icon .header_icon{ background-color: "),i.b(i.v(i.f("bottom",e,t,0))),i.b("; background-image: -webkit-gradient(linear, left top, left bottom, from("),i.b(i.v(i.f("top",e,t,0))),i.b("), to("),i.b(i.v(i.f("bottom",e,t,0))),i.b(")); background-image: -webkit-linear-gradient(top, "),i.b(i.v(i.f("top",e,t,0))),i.b(", "),i.b(i.v(i.f("bottom",e,t,0))),i.b("); background-image: linear-gradient(to bottom, "),i.b(i.v(i.f("top",e,t,0))),i.b(", "),i.b(i.v(i.f("bottom",e,t,0))),i.b("); } ")}),e.pop()),a.b(" </style>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Disney,i=e.Whiskers,a=e._,n=e.jQuery;a.extend(t.Style,{verifyModuleTakeoverStyles:function(){var e=n("#takeover-styles-module-override");e.hasClass("transitioning")&&e.html("").removeClass("transitioning")},transitionModuleTakeoverStyles:function(){n("#takeover-styles-module-override").addClass("transitioning")},applyTakeoverStyles:function(e,r,s){var o=r?"module-override":"default",l=n("#takeover-styles-"+o),c=e&&e.local_chrome_color||"light",d=t.Style.AssetPaths.nav_logos[c],u=e&&a.extend(e,{overlay_type:o,module_override:r,nav_logos:d}),h=u&&i.partials.style_elements.takeover_styles.render(u)||"";l.hasClass("persistent")||l.html(h),s&&l.addClass("persistent"),r&&l.removeClass("transitioning")},applyPageStyles:function(e){var t=!!(e&&e.page_background_styles&&e.page_background_styles.footer_inverted),a=e&&i.partials.style_elements.page_styles.render(e)||"";n("#style-pack-theming").html(a),n("footer, #goc-ft").toggleClass("inverted",t)},applyStylePackStyles:function(e){e=e||{},this.applyPageStyles(e),this.applyTakeoverStyles(e.takeover_styles),this.verifyModuleTakeoverStyles()},attachCustomThemeStyles:function(e){var i=e&&e.custom_theme_components||{},r={name:i.base,$target:n("#base-theme-styles")},s={name:i.child&&i.name,$target:n("#child-theme-styles")};a.each([r,s],function(e){if(!e.$target.hasClass(e.name)){var i=e.name&&t.Style.AssetPaths.theme_stylesheets[e.name]||"";e.$target.attr("href",i).attr("class",e.name)}})}})}(this),function(e){"use strict";var t=e.Disney,i=e.jQuery;i(function(){var e=t.top;e.on("begin",function(){t.Style.transitionModuleTakeoverStyles()}),e.on("ready",function(e){if(e.options.collection){var i=e.options.collection.style;t.Style.attachCustomThemeStyles(i),t.Style.applyStylePackStyles(i)}else t.Style.applyStylePackStyles(null)})})}(this),function(e){"use strict";var t=e.jQuery,i=e.GOC||{queue:[]},a=e.Disney;t("#nav-e").click(function(e){e.preventDefault(),i.queue.push(["openMenu"])}),t(function(){t("#nav-local li a[href]").each(function(){t(this).toggleClass("active",this.href===e.location.href)}),a.top.on("ready",function(){var e=a.top.current.collection||{},i=e.local_chrome_and_footer||{},n=i.exclude_local_chrome===!0;t("#nav-local").toggleClass("exclude-local-chrome",n)})})}(this),function(e){"use strict";var t=e.jQuery,i=e.GOC||{queue:[]};t("#nav-e").click(function(e){e.preventDefault(),i.queue.push(["openMenu"])}),t(function(){if(t("#nav-local-channels a[href]").each(function(){t(this).toggleClass("active",this.href===e.location.href)}),t(e).width()>=1024){var i=t("#nav-local-channels .channel-slider"),a=i.hasClass("channel")?.09:.045;i.swipeasaurus({arrows:!0,loop:!0,right:a})}t(".channel-bg > .pages > li > a").each(function(){var e=t(this),i=e.html(),a=i.split(" "),n='<span class="firstWord">'+a[0]+"</span><br />";a.shift(),t.each(a,function(e,t){n+=" "+t}),e.html(n)}),t(".xd-bg > .pages > li > a").each(function(){var e=t(this),i=e.html(),a=i.split(" "),n='<span class="firstWord">'+a[0]+"</span><br />";a.shift(),t.each(a,function(e,t){n+=" "+t}),e.html(n)})})}(this),function(e){"use strict";var t,i=e.jQuery,a=e.navigator,n="https:"===e.location.protocol,r=Array.prototype.slice,s=[],o=function(e){null===s?e(t):s.push(e)},l=e.cto={trackPagination:function(e){for(e+="";e.length<2;)e="0"+e;o(function(t){var i=t.pageName;i&&(t.pageName=i.replace(/\|page_\d+$/,"")+"|page_"+e,t.track())})}};i.each(["resetObj","track","trackApp","trackEvent","trackLink","trackVideo","trackGame"],function(e,t){l[t]=function(){var e=r.call(arguments),i=e[0];i&&i.ctoSrcPath&&c(i.ctoSrcPath),o(function(i){i[t].apply(i,e)})}});var c=function(r){function o(){t=new e.CTO;var i=0,a=function(){i<s.length?(s[i](t),++i,e.setTimeout(a,200)):s=null};a()}a&&"preview"===a.loadPurpose||e.cto.account||(i(e).one("CTOReady",o),i.ajax((n?"https://global":"http://aglobal")+".go.com"+r,{dataType:"script",cache:!0}))}}(this),function(e){"use strict";var t=e.jQuery,i=e.cto,a=e.Tracker={safe_cto:function(t,a){i&&i[t]?i[t].apply(this,a):e.console.log("Undefined method: "+t+" on cto")},page:function(e){var i={pageName:""};t.extend(i,e),a.track({pageName:i.pageName})},event:function(e){var i=e.eventCategory+":"+e.action,n={eventCategory:null,action:null,label:null,value:null,engagementMeta:null,engagementType:i};t.extend(n,e),a.trackEvent(n)},link:function(e){var i={linkName:null,linkPosition:null,isChrome:!1,href:null};t.extend(i,e),i.isChrome&&(i.linkPosition="Chrome: "+i.linkPosition),a.trackLink(i.linkName,i.linkPosition,void 0,i.href)},video:function(e){var i={analyticsData:null};t.extend(i,e),a.trackVideo(i.analyticsData)},setCto:function(e){i=e}},n=["resetObj","track","trackPagination","trackApp","trackLink","trackEvent","trackVideo"];t.map(n,function(e){a[e]=function(){a.safe_cto(e,arguments)}}),t(function(){t("#topper-nav").on("click",".module a",function(i){var a=t(i.currentTarget),n=t.trim(a.attr("data-title")||a.attr("title")||a.text()),r=a.attr("href"),s=a.closest(".module"),o=s.attr("data-module"),l=s.find("a").index(a),c=t("#topper section").index(s),d="nav",u=["nav",o,"mod"+c,"link"+l,n].join("/");e.Tracker.link({linkName:u,linkPosition:d,href:r})}),t("#nav-local ul").on("click","a",null,function(i){var a=t(i.currentTarget),n=t.trim(a.find("img").attr("alt")||a.text()),r=a.attr("href"),s=t("#nav-local a").index(a),o=["sitenav",s,"none","link"].join("/"),l=[o,n].join("/");e.Tracker.link({linkName:l,linkPosition:o,href:r})}),t("#nav-local-channels .pages").on("click","a",null,function(i){var a=t(i.currentTarget),n=t.trim(a.find("a").attr("alt")||a.text()),r=n.replace(/[^a-z0-9 ]/gi,"").replace(/\s+/g,"-"),s=a.attr("href"),o=["Topnav","mainlinks"].join("/"),l=[o,"image",r].join("/");e.Tracker.link({linkName:l,linkPosition:o,href:s})}),t("#nav-local-channels .channel-slider-container").on("click","a",null,function(i){var a=t(i.currentTarget),n=t.trim(a.find("img").attr("alt")||a.text()),r=n.replace(/[^a-z0-9 ]/gi,"").replace(/\s+/g,"-"),s=a.attr("href"),o=["CharacterNav","char"].join("/"),l=[o,"image",r].join("/");e.Tracker.link({linkName:l,linkPosition:o,href:s})}),t("footer a, #goc-ft a").on("click",null,null,function(i){var a=t.trim(t(i.currentTarget).text()),n=t(i.currentTarget).attr("href"),r=t(i.currentTarget).data("module-title");r&&(a=r+"/"+a),e.Tracker.link({linkName:"globalfooter/link/"+a,linkPosition:"globalfooter",href:n})}),t.each(["#searchField_SRP","#searchField_BlogChrome"],function(i,a){t(a).one("input",function(){e.cto.trackEvent({searchFlow:a.replace("#",""),searchEvent:"attempt"})})})})}(this),function(e){"use strict";var t=e.jQuery,i=e.Tracker,a=t("#goc-bar"),n=t("#chrome-controls");t(function(){n.click(function(){var t=n.hasClass("open");a.toggleClass("open"),n.toggleClass("open"),i&&i.event({eventCategory:"navigation",action:"disney-chrome-"+(t?"hide":"show"),label:e.location.href})})})}(this),Whiskers("errors.e404",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<article id="error_page" class="e404 module"> <div class="bound"> <div class="inner"> <img src="'),a.b(a.v(a.f("image",e,t,0))),a.b('"> <div class="message"> <h1>Uh Oh!</h1> <h2>Couldn&rsquo;t find that. <br> Try something else?</h2> <form id="search_404" action="'),a.b(a.v(a.f("search_error",e,t,0))),a.b('" method="GET"> <div class="search-field"> <input id="search_404_input" name="q" type="text" placeholder="Search..."> <input type="submit" class="search-icon" value=""> </div> </form> </div> </div> </div> </article>'),a.fl()},partials:{},subs:{}}),Whiskers("errors.e500",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<article id="error_page" class="e500 module"> <div class="bound"> <div class="inner"> <img src="'),a.b(a.v(a.f("image",e,t,0))),a.b('"> <div class="message"> <h1>Gawrsh!</h1> <h2>Something is not working right.<br> Please try again soon.</h2> </div> </div> </div> </article>'),a.fl()},partials:{},subs:{}}),Whiskers("errors.enet",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<article id="error_page" class="enet module"> <div class="bound"> <div class="inner"> <img src="'),a.b(a.v(a.f("image",e,t,0))),a.b('"> <div class="message"> <h1>Aw Phooey!</h1> <h2>The connection was lost. Please try again.</h2> </div> </div> </div> </article>'),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Disney,i=e.Backbone,a=e.jQuery,n=e.Whiskers,r=["//a.dilcdn.com/a/errors/e404_matte-3539f646e0d3.png","//a.dilcdn.com/a/errors/e500_matte-5f40aef5fa77.png","//a.dilcdn.com/a/errors/enet_matte-c4264c3a6186.png"],s=a("#goc-bar .goc-search").attr("action"),o=i.View.extend({initialize:function(){this.guest=e.Disney.rootGuestContext
},render:function(){this.el.innerHTML=this.template.render({image:this.image,search_error:s})},cto:function(){return{cmsId:"MH",account:"wdgdsec",categoryCode:"dcom",pageName:this.error,breadcrumbs:"error",pageType:"errorpage",ctoSrcPath:"/stat/dolWebAnalytics_DEV.js"}}}),l=o.extend({image:r[0],search_error:s,template:n.errors.e404,error:"404"}),c=o.extend({image:r[1],template:n.errors.e500,error:"500"}),d=o.extend({image:r[2],template:n.errors.enet,error:"network"});a(function(){t.top.on("error",function(e,i,a,n){"timeout"===a?t.top.transition(new d):"Not Found"===n?t.top.transition(new l):"abort"!==a&&t.top.transition(new c)}),"/"===t.ajaxBase&&e.setTimeout(function(){for(var t=0;t<r.length;++t)(new e.Image).src=r[t];r=null},4e3)})}(this),function(e){"use strict";e.jQuery(function(t){var i="title",a=t("body");e.Modernizr.touch||a.on("mouseenter","[title]",function(){var e=t(this),a=e.data(i)||e.attr(i);e.data(i,a).attr(i,"")}).on("mouseleave","[title]",function(){var e=t(this),a=e.data(i);a&&e.attr(i,a)})})}(this),function(e){var t=e.document,i=e.jQuery,a=[84,69,65,77,32,77,65,84,84,69,82,72,79,82,78],n=0,r=function(s){s.keyCode===a[n++]?n===a.length&&(i(t).off("keydown",r),i("body").fadeOut(function(){e.location.href="/its/a/secret/to/everybody/index.html"})):n=0};i(t).on("keydown",r)}(this),function(e){"use strict";var t=e.Disney,i=e.jQuery,a=e.window,n=e.Tracker;i(function(){var e=i("footer"),r=e.find(".language-picker");t.top.on("ready",function(t){r.length&&(r.find("option").each(function(){i(this).data("url")===a.location.origin&&r.val(this.value)}),r.change(function(){var e=r.find("option:selected"),t=e.data("url");n.link({linkPosition:"globalfooter/lanuage-picker",linkName:"globalfooter/lanuage-picker/"+e.text(),href:t}),t&&(a.location=t)}));var s=t.branding;i.isFunction(s)&&(s=s.call(t)),e.find(".branding").first().text(s)}),e.find("form.search").on("submit",function(){n.link({linkName:"globalfooter/searchbox/search_enter",linkPosition:"globalfooter/searchbox"})}),e.find("form.search input").one("input",function(){n.event({searchAttempt:"y",engagementType:"globalfooter",searchFlow:"searchField_Footer"})})})}(this),function(e){"use strict";function t(e,t){return t=s.inject(t,function(e,t,i){return e[i]=d(t)?t.join():t,e},{}),"/_recommendations/"+e+"?"+r.param(t)}function i(t,i,a){var n=e.location.search,r=new RegExp(i+"=([^&]*)"),s=r.exec(n),o=(s||[])[1],l=u.get(t),d=JSON.parse(c(l||"{}"));return o||d[a]}function a(){return i("ctoVisitor","visitor_id","visitorId")}function n(){var t=e.document.referrer,a=i("ctoSession","first_ref_url","sessionFirstRefUrl");return a||t}var r=e.jQuery,s=e._,o=e.Disney,l=e.Tracker,c=e.decodeURIComponent,d=e.Array.isArray,u=o.Cookie,h=o.Recommender=o.Recommender||{};h.getRecommendations=function(e){if(e&&e.type&&"recommendation"===e.type.toLowerCase()){var i=e.parameters,l=e.recommendation_type,c=["name","title","type","primary_image_url","url","duration","id","parent_title","parent_objects"];return i.swid=a(),i.id=e.core_id||"",i.fields=s.union(i.fields||[],c),o.recommender_model&&(i.model=o.recommender_model),i.refUrl=n(),r.ajax({url:t(l,i),type:"GET",dataType:"json"}).then(function(e){return s.isArray(e)&&!s.isEmpty(e)?(e.forEach(function(e){e.entity_config.title_overlay=!1}),l="COLDSTART"===e[0].recommendation_type?"coldstart":l,h.track([{recommendation_type:l}]),e):r.Deferred().reject()})}return r.Deferred().reject()},h.track=function(e){for(var t={metadata_match:"metamatch",recommend:"recommended_for_you"},i=s.unique(s.compact(s.map(e,function(e){return t[e.recommendation_type]||e.recommendation_type}))),a=0;a<i.length;a++)i[a]&&l.event({engagementType:"impression-"+i[a]})}}(this),function(e){"use strict";var t=e.Disney,i=e.jQuery,a=t.Cookie;i(function(){t.top.on("ready",function(){"true"!==a.get("cookies-accepted")&&(i(".regional-cookie-warning").show(),i("#regional-cookie-accept").click(function(){a.set("cookies-accepted","true",{domain:a.domain(),expires:365}),i(".regional-cookie-warning").hide()}))})})}(this),function(e){"use strict";var t=e.Backbone,i=e.Grill,a=e._,n=t.View.extend({},{getInstance:function(){if(void 0===this._instance){var e=this;this._instance=new e}return this._instance}}),r=n.extend({el:"#modal-window",views:[],add:function(e){this.el.appendChild(e.el),this.views.push(e)},contains:function(e){return this.views.indexOf(e)>=0},scrollStart:function(){e.document.documentElement.className=this._htmlClass},scrollStop:function(){this._htmlClass=e.document.documentElement.className,e.document.documentElement.className+=" modal-no-scroll"},show:function(e,t){var i=t&&t.render,a=e.options&&e.options.name;(i||!this.contains(e))&&(e.el.innerHTML=e.render(),e.close=new s({closeElement:e.el.querySelector(e.options.closeElement)}),this.add(e)),e.close.show(),e.el.className+=" show",e.el.scrollTop=0,e.ready(),this.scrollStop(),a&&(this.el.className=this.el.className+" "+a),this.el.className+=" show",this._bindEvents()},hide:function(){var e=this;this.el.className=this.el.className.replace(" show",""),this.scrollStart(),a.each(e.views,function(t){var i=t.options&&t.options.name;i&&(e.el.className=e.el.className.replace(" "+i,"")),t.el.className=t.el.className.replace(" show",""),t.close.hide()})},_bindEvents:function(){var e=this;a.each(this.views,function(t){t.close.el.addEventListener("click",function(){e.hide()})}),this.el.addEventListener("click",function(t){this===t.target&&e.hide()})}}),s=n.extend({el:"#modal-close",initialize:function(e){var t=e&&e.closeElement;a.extend(e,{windowView:r.getInstance()}),this.options=e,t&&(this.el=t)},show:function(){this.el.className=this.el.className.replace(" hidden","")},hide:function(){this.el.className+=" hidden"}});i.ModalView=t.View.extend({className:"modal",constructor:function(e){t.View.apply(this,arguments);var i=this,n=e&&e.name;a.extend(e,{windowView:r.getInstance(),keyEvents:[{name:"keyup",keyCode:27,callback:function(){i.hide()}}]}),i.options=e,i.el.id=a.uniqueId(n),i.el.className+=" "+n,i._bindEvents()},ready:function(){},show:function(e){this.options.windowView.show(this,e)},hide:function(e){this.options.windowView.hide(e)},_bindEvents:function(){var t=this;t.el.addEventListener("click",function(e){this===e.target&&t.hide()}),a.each(t.options.keyEvents,function(i){var a=t._handleKeyEvent.bind(i);e.document.addEventListener(i.name,a)})},_handleKeyEvent:function(e){var t=this;t.keyCode===e.keyCode&&t.callback()}})}(this),function(e){"use strict";var t=e.Disney,i=e._;t.Browser={showWarning:function(){return this.matchList(t.browser_warning_versions)},matchList:function(e,t){if(!e)return!1;var a=this;return i.any(e,function(e){return a.matches(e.name,e.version,t)})},matches:function(e,t,i){var a=this.getVersion(i);return a.name===e&&a.version===t},getVersion:function(t){var i,a=t||e.navigator.userAgent;if(/Trident.*rv:(\d+\.\d+)/i.test(a))i="i";else if(/Trident.(\d+\.\d+)/i.test(a))i="io";else{if(!/MSIE.(\d+\.\d+)/i.test(a))return{name:"Unknown",version:0};i="i"}var n=parseFloat(RegExp.$1);return"i"===i&&7===n&&e.XDomainRequest&&(n=8),"io"===i&&(n=n>6?11:n>5?10:n>4?9:n>3.1?8:n>3?7:9),{name:"Internet Explorer",version:n}}}}(this),Whiskers("modals.browser_warning",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="modal-info"> <ul id="modal_message"> <h3 class="modal-title" style="text-align:left">'),a.b(a.v(a.f("header",e,t,0))),a.b('</h3> <p class="modal-content">'),a.b(a.v(a.f("body",e,t,0))),a.b('</p> <div class="modal-accept"> <a id="modal_accept" class="button large blue">'),a.b(a.v(a.f("continue_button",e,t,0))),a.b("</a> </div> </ul> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Disney,i=t.Cookie,a=e.Grill,n=e.Whiskers,r=e.jQuery;a.BrowserWarningModalView=a.ModalView.extend({events:{"click #modal_accept":function(){this.accept(),this.hide()}},render:function(){return this.options.template.render(this.options.browser_warning)},hasAccepted:function(){return"true"===i.get("accept-browser-warning")},accept:function(){i.set("accept-browser-warning","true",{domain:i.domain(),expires:1})}}),r(function(){t.top.on("ready",function(){if(t.top.current&&t.top.current.collection&&t.Browser.showWarning()){var e=t.top.current.collection.browser_warning||{},i=new a.BrowserWarningModalView({name:"browser-warning",template:n.modals.browser_warning,closeElement:".modal-close",browser_warning:e});i.hasAccepted()||i.show()}})})}(this),function(e){"use strict";e.Disney.FormElements=e.Disney.FormElements||{};var t=e.Disney.FormElements,i=e.Whiskers,a=e._,n=e.jQuery;n(function(){t.dateDropdown={renderTemplate:function(t){for(var r=t||{},s=a.extend({month:"Month",day:"Day",year:"Year",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},r.translations),o=[],l=[],c=[],d=new e.Date,u=d.getFullYear(),h=1;31>=h;h++)o.push(h);for(var f=u;f>=u-100;f--)c.push(f);var p=["january","february","march","april","may","june","july","august","september","october","november","december"];n.each(p,function(e,t){l.push({value:e,month:s[t]})});var m={days:o,months:l,years:c,translations:s};return i.partials.date_dropdown.render(m)}},t.characterCountdown={renderTemplate:function(e){var t={rows:e.rows,maxLength:e.maxLength||140,tag:e.tag,label:e.label,required:e.required};return i.partials.character_countdown.render(t)},onReady:function(e,t,i){e.on("keyup",function(){var e=n(this).val(),a=t-e.length;i.html(a)})}}})}(this),Whiskers("shared.search_navigation",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<span id="search-e" role="button" title="Search"></span> <div id="nav-search" class="goc-nav-search"> <div class="overlay"></div> <div class="search-form"> <form class="goc-search" method="GET" action="'),a.b(a.v(a.f("search_action",e,t,0))),a.b('"> <span id="search-clear" role="button" title="Clear"></span> <span class="search-icon"></span> <input type="text" name="q" class="instant-search-input" placeholder="'),a.b(a.v(a.f("search",e,t,0))),a.b('" autocomplete="off"/> </form> <span id="search-close" role="button" title="Cancel"></span> </div> </div>'),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e.jQuery,n=e.GOC,r=e.Tracker;t.ModuleView.register("search_navigation",{template:i.shared.search_navigation,$navSearch:null,$searchClear:null,$searchInput:null,$searchClose:null,$navLocal:null,open:function(){var e=["sitenav",a("#nav-local a").length,"none","link"].join("/");r.link({linkName:"searchOpen",linkPosition:e}),this.$navLocal.addClass("search-open")},close:function(){return this.$navLocal.removeClass("search-open"),this.clearForm(!0),!0},clearForm:function(e){this.$searchClear.removeClass("show"),a("#search-is").remove();var t=this.$searchInput.val("").focus();e&&t.blur()},initialize:function(){var t=this,i=a("#goc-bar .goc-search"),s=i.attr("action"),o=i.find("input[type=text]").attr("placeholder"),l=this.template.render({search_action:s,search:o});a("#nav-e + ul").after(l),a("form.goc-search input[type='text']").keyup(function(e){""===a(e.target).val()&&t.clearForm(!1)}),t.$navSearch=a("#nav-search"),t.$navLocal=a(".nav-local"),t.$searchClose=a("#search-close"),t.$searchClose.html(a("#search_cancel_text").html()),t.$navSearch.on("click","a[href]",function(){t.close()});var c=e.setInterval(function(){"function"==typeof n.ac&&(n.ac(t.$navSearch,"mtt_chrome"),e.clearInterval(c))},1500);a("#search-e").bind("click touchstart",function(){return t.open(),!1}),t.$searchClear=a("#search-clear"),t.$searchInput=a("#nav-search .search-form form input[type=text]"),t.$searchClose.bind("click touchstart",function(){r.link({linkName:"searchClose",searchPhraseInput:t.$searchInput.val()})}),t.$searchClear.bind("click touchstart",function(){r.link({linkName:"searchClear",searchPhraseInput:t.$searchInput.val()})}),t.$navSearch.find(".overlay, #search-close").bind("click touchstart",function(){return t.close(),!1}),t.$searchInput.attr("autocomplete","off").attr("autocorrect","off"),t.$navSearch.find(".search-form").on(a.fn.selectTransitionEnd(),function(){return t.$searchInput.focus(),!1}),t.$searchClear.bind("click touchstart",function(){t.clearForm(!1)}),t.$searchInput.keyup(function(){t.$searchClear.addClass("show")})}}),a(function(){t.ModuleView.create("search_navigation")})}(this),Whiskers("partials.age_gate_modal",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="age-gate-modal" class="modal-prompt-window"> <div class="loading-status"><span>'),a.b(a.v(a.d("translations.loading",e,t,0))),a.b('</span></div> <div class="modal-close top-right"></div> <div class="modal-info"> <div class="enter-birthday"> <p class="modal-title">'),a.b(a.v(a.d("translations.enter",e,t,0))),a.b("</p> <form>"),a.b(a.t(a.f("date_dropdown",e,t,0))),a.b('</form> <p class="error alert">'),a.b(a.v(a.d("translations.error",e,t,0))),a.b('</p> <a class="submit-button button blue large">'),a.b(a.v(a.d("translations.submit",e,t,0))),a.b('</a> <a class="modal-close button" data-title="close">'),a.b(a.v(a.d("translations.nevermind",e,t,0))),a.b('</a> </div> <div class="too-young"> <p class="modal-title">'),a.b(a.v(a.d("translations.sorry",e,t,0))),a.b("</p> <p>"),a.b(a.v(a.d("translations.too_young",e,t,0))),a.b('</p> <a class="button-close button blue small">'),a.b(a.v(a.d("translations.close",e,t,0))),a.b("</a> </div> </div> "),a.s(a.f("isSocial",e,t,1),e,t,0,717,1619,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div id="social-buttons"> <p>'),i.b(i.v(i.d("translations.share_this_with_your_friends",e,t,0))),i.b('</p> <div id="social-logos"> '),i.s(i.f("socialSharing",e,t,1),e,t,0,839,1380,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("facebook",e,t,1),e,t,0,853,942,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="fb-logo" title="Facebook" data-share-url="'),i.b(i.v(i.f("fbsource",e,t,0))),i.b('" href="#">Facebook</a> ')}),e.pop()),i.b(" "),i.s(i.f("twitter",e,t,1),e,t,0,968,1112,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="tw-logo" title="Twitter" target="_blank" href="https://twitter.com/intent/tweet?url='),i.b(i.v(i.f("twtsource",e,t,0))),i.b("&text="),i.b(i.v(i.f("titleEncoded",e,t,0))),i.b('">Twitter</a> ')}),e.pop()),i.b(" "),i.s(i.f("pinterest",e,t,1),e,t,0,1139,1365,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("thumbEncoded",e,t,1),e,t,0,1157,1347,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class="pin-logo" title="Pinterest" target="_blank" href="http://www.pinterest.com/pin/create/button/?url='),i.b(i.v(i.f("pinsource",e,t,0))),i.b("&media="),i.b(i.v(i.f("thumbEncoded",e,t,0))),i.b("&description="),i.b(i.v(i.f("titleEncoded",e,t,0))),i.b('">Pinterest</a> ')}),e.pop()),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),i.b(' </div> </div> <div id="share-links"> <p>'),i.b(i.v(i.d("translations.link",e,t,0))),i.b('</p> <input type="text" value="'),i.b(i.v(i.f("source",e,t,0))),i.b('"> '),i.s(i.f("embedCode",e,t,1),e,t,0,1518,1597,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <p>"),i.b(i.v(i.d("translations.embed",e,t,0))),i.b('</p> <textarea rows="2"> '),i.b(i.t(i.f("embedCode",e,t,0))),i.b(" </textarea> ")}),e.pop()),i.b(" </div> ")}),e.pop()),a.b(' </div> <div class="modal-overlay"></div>'),a.fl()},partials:{},subs:{}}),Whiskers("partials.date_dropdown",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="date_dropdown"> <div class="input-group month"> <select name="month" required> <option value="" selected disabled>'),a.b(a.v(a.d("translations.month",e,t,0))),a.b("</option> "),a.s(a.f("months",e,t,1),e,t,0,169,215,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.f("value",e,t,0))),i.b('">'),i.b(i.v(i.f("month",e,t,0))),i.b("</option> ")}),e.pop()),a.b(' </select> </div> <div class="input-group day"> <select name="day" required> <option value="" selected disabled>'),a.b(a.v(a.d("translations.day",e,t,0))),a.b("</option> "),a.s(a.f("days",e,t,1),e,t,0,377,415,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.d(".",e,t,0))),i.b('">'),i.b(i.v(i.d(".",e,t,0))),i.b("</option> ")}),e.pop()),a.b(' </select> </div> <div class="input-group year"> <select name="year" required> <option value="" selected disabled>'),a.b(a.v(a.d("translations.year",e,t,0))),a.b("</option> "),a.s(a.f("years",e,t,1),e,t,0,579,617,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.d(".",e,t,0))),i.b('">'),i.b(i.v(i.d(".",e,t,0))),i.b("</option> ")}),e.pop()),a.b(" </select> </div> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";e.Disney.AgeGate=e.Disney.AgeGate||{};var t=e.Disney,i=t.AgeGate,a=e.Whiskers,n=t.Cookie,r=e.Tracker,s=e._,o=e.jQuery;i={createAgeGate:function(){return null},getAge:function(e){var t=e.guest.current;return new Date(t?t.profile.dateOfBirth:decodeURI(n.get("age-gate-user")))},renderModal:function(e,i){var n=i.collection.age_gate_text||{},r={loading:"Loading",enter:"Enter your birthday to continue:",submit:"Submit",close:"Close",error:"Please fill out all fields",sorry:"Sorry",too_young:"You are not eligible.",link:"Link",embed:"Embed",share_this_with_your_friends:"Share this with your friends",month:"Month",day:"Day",year:"Year"};s.defaults(n,r);var o=s.extend({date_dropdown:t.FormElements.dateDropdown.renderTemplate({translations:n}),translations:n},e);return a.partials.age_gate_modal.render(o)},checkAge:function(){var t=o("#age-gate-modal .date_dropdown"),i=t.find(".month option:selected").val(),a=t.find(".day option:selected").val(),n=t.find(".year option:selected").val(),r=new e.Date(n,i,a);""===i||""===a||""===n?this.errorText():r<this.minBday()?(this.setCookie(r),this.oldEnough()):(this.setCookie(r),this.tooYoungText())},minBday:function(){var t=new e.Date;return t.setFullYear(t.getFullYear()-this.gatedAge)},bindModalEvents:function(e){var t=this;o("#age-gate-modal .modal-close, #age-gate-modal .button-close, .modal-overlay").on("click",function(){t.closeModal()}),o("#age-gate-modal .submit-button").on("click",function(){t.checkAge()}),"function"==typeof e&&e()},closeModal:function(){o("#age-gate-modal, #age-gate-modal + .modal-overlay").delay(100).remove(),o("html").removeClass("modal-no-scroll")},openModal:function(){var e=this.renderModal();o("#burger-container").append(e),o("#age-gate-modal").addClass("modal-show"),this.bindModalEvents()},errorText:function(){o(".error").delay(400).fadeIn()},tooYoungText:function(){o(".enter-birthday").hide(),o(".too-young").delay(100).fadeIn()},oldEnough:function(){return null},setCookie:function(e){n.set("age-gate-user",encodeURI(e),{domain:n.domain(),expires:1})}};var l=s.defaults({createAgeGate:function(){var i=this;o("#burger-container").on("click",".social-link-btn",function(){var a=o(this);i.view=t.top.current,i.bday=i.getAge(i.view),i.isSocial=a.hasClass("social-link-btn"),i.gatedLink=a.data("url"),i.source=a.data("source")||e.location.href,i.thumb=a.data("thumb"),i.title=a.data("title"),i.gatedAge=i.isSocial?13:parseInt(a.attr("data-age"),10),i.openModal(),i.bday&&i.bday>=i.minBday()?(i.showDropDown(),i.tooYoungText()):t.FB&&t.FB.load()})},checkSuccess:function(){var e=this.bday<this.minBday();e?this.oldEnough():this.gatedAge&&this.showDropDown()},showDropDown:function(){o("#social-buttons").hide(0,function(){o("#age-gate-modal .modal-info").fadeIn()})},openModal:function(){var t=this,i=e.location.href.match(/\?.+/)?"&":"?",a=this.view.collection.social_share_networks,n=s.filter(s.keys(a),function(e){return a[e]===!0}),l={isSocial:this.isSocial,source:this.source,fbsource:this.source+i+"cmp="+encodeURIComponent("GSL|none|natural|fb||social-share-buttons"),twtsource:encodeURIComponent(this.source+i+"cmp="+encodeURIComponent("GSL|none|natural|twt||social-share-buttons")),pinsource:encodeURIComponent(this.source+i+"cmp="+encodeURIComponent("GSL|none|natural|pin||social-share-buttons")),thumbEncoded:encodeURIComponent(this.thumb),titleEncoded:encodeURIComponent(this.title),embedCode:this.buildEmbedCode,socialSharing:s.pick(a,n)};0===s.size(l.socialSharing)&&(l.socialSharing={facebook:!0,twitter:!0,pinterest:!0}),o("#burger-container").append(this.renderModal(l,this.view)),o("html").addClass("modal-no-scroll");var c=o("#age-gate-modal");c.addClass("modal-show"),c.find(".modal-info").hide(),this.bindModalEvents(function(){c.find("#social-logos > a").on("click",function(e){e.preventDefault(),t.$el=o(this),t.checkSuccess()}),c.find("input[type=text], textarea").on("click",function(){this.select()})}),r&&r.event({eventCategory:"socialelement",action:"share",label:e.location.href})},oldEnough:function(){var e=this.$el;e.hasClass("fb-logo")?this.shareFacebook(e.data("share-url")):e.hasClass("pin-logo")?this.sharePinterest(e.attr("href")):e.hasClass("tw-logo")&&this.shareTwitter(e.attr("href")),this.closeModal()},shareFacebook:function(e){t.FB.load(function(t){t.ui({method:"share",href:e})})},sharePinterest:function(t){e.open(t,"pinterest","height=440,width=550,resizable=1")},shareTwitter:function(t){e.open(t,"twitter","height=440,width=550,resizable=1")},buildEmbedCode:function(){var t=o(".bun.watch").find('meta[itemprop="name"]').attr("content"),i=o('div[itemprop="video"]').find('meta[itemprop="embedURL"]').attr("content"),a=i?'<iframe width="560" height="315" src="'+i+'" frameborder="0" allowfullscreen scrolling="no"></iframe><br/><a href="'+e.location.href+'">'+t+" on Disney Video</a>":null;return a}},i),c=s.defaults({createAgeGate:function(){var e=this;o("#burger-container").on("click","a[data-age]",function(i){i.preventDefault();var a=o(this),n=t.top.current;e.bday=e.getAge(n),e.view=n,e.gatedLink=a,e.gatedAge=parseInt(a.attr("data-age"),10),e.agePass=e.bday<e.minBday(),e.checkSuccess()})},checkSuccess:function(){this.agePass?this.oldEnough():this.gatedAge&&(this.openModal(),this.bday.getTime()&&this.tooYoungText())},openModal:function(){var e=this.renderModal({},this.view);o("#burger-container").append(e),o("#age-gate-modal").addClass("modal-show"),this.bindModalEvents(),o("html").addClass("modal-no-scroll")},oldEnough:function(){this.gatedLink.context.target?(e.open(this.gatedLink.context.href),this.closeModal()):e.location=this.gatedLink.context.href}},i);o(function(){c.createAgeGate(),l.createAgeGate()})}(this),function(e){"use strict";var t,i=e.Disney,a=e.window,n=e.GOC,r=e.$,s=e.DossierProxy={start:function(){r("html").addClass("wait-cursor");var e=i.top.current.guest;r.when(e.refresh()).then(function(e){e&&e.tokens&&e.tokens.access&&(t=e.tokens.access,a.addEventListener("message",s.messageReceived,!1),s.loadDossier())},function(){r("html").removeClass("wait-cursor"),e.login()})},loadDossier:function(){r.getScript(i.dossierBase+"/js/dossier.js")},messageReceived:function(e){r("html").removeClass("wait-cursor"),"dossier-ready"===e.data&&(s.launchDossier(),this.removeEventListener("message",s.messageReceived,!1))},launchDossier:function(){Dossier.open(t,"",i.dossierBase)}};n.queue.push(["on","click:my_interests",function(){e.DossierProxy.start()}])}(this),function(e){"use strict";var t=e.Disney,i=e.jQuery,a=e.DossierProxy;e.EventLinkHandler={launchDossier:function(){a&&a.start()},launchDisid:function(){t.top&&(t.top.current.guest.current?t.top.current.guest.updateProfile():t.top.current.guest.login())},handle:function(e){var t=i(e.currentTarget).data("event-link");switch(t){case"profile":this.launchDisid();break;case"interests":this.launchDossier()}}}}(this),function(e){"use strict";var t=e.Disney,i=e.jQuery,a=i.isFunction,n=function(t){var i=e.onerror,a=e.console;a&&a.error&&a.error(t.stack||t.toString()),i&&i(t.toString())};i(function(){t.top.on("ready",function(t){var i=e.Tracker,r={};if(a(t.cto)&&(r=t.cto()),r&&r.account)try{i.resetObj(),i.track(r)}catch(s){n(s)}})})}(this),function(e){"use strict";var t=e.Tracker,i=e.jQuery,a="#burger > [data-module]",n=".slides li",r=function(e){return null!=e&&(e=i.trim(e).replace(/[^a-z0-9_:, \-]/gi,"").replace(/\s+/g," ")),e},s=function(e,t,a){var n=e.closest(t);return n.length?i(t,a).index(n):-1},o=function(e,t,o,l){var c=[],d=i(a).index(t),u=s(e,".entity,.item,.item,.product",t),h=s(e,n,t),f=s(e,".button",e.closest(n+","+a)),p=s(e,".all",t),m=r(i.trim(t.find("h1,h2,h3,h4,h5,h6").eq(0).text()));return 0===d&&m.indexOf("hero")>-1&&(m=e.closest(n).find(".background img[alt]").attr("alt")||m),c.push(m,"mod"+(d+1)),u>=0?c.push("item"+(u+1)):h>=0&&(c.push("slide"+(h+1)),o="full"),l&&c.push(l),f>=0?o="button"+(f+1):s(e,".poster",t)>=0?o="poster":s(e,".trailer-thumb",t)>=0?o="trailer-thumb":s(e,".gallery-item",t)>=0&&(o=null),o&&c.push(o),p>=0&&c.push("viewall"),c.join("/")},l=function(e,t,i){var a=s(e,".suggested",t),n=s(e,".card .next",t);return a>=0?"card/suggested/p"+a+"/"+i:n>=0?"card/next/p"+n+"/"+i:s(e,"#next_container",t)>=0?("link"===i&&(i="details"),"upnext/"+i):o(e,t,i)},c=function(e,t,n){var l=r(i.trim(t.find("h1,h2,h3,h4,h5,h6").eq(0).text())),c=i(a).index(t),d=s(e,".modal-window .arrow-next",t),u=s(e,".modal-window .arrow-prev",t),h=s(e,".modal-window .modal-close",t);if(d>=0||u>=0||h>=0){var f=e.data("viewtype"),p=parseInt(e.data("currentitem"),10)+1,m="ad"===f?"ad":"item"+p,g=l+"/mod"+(c+1)+"/"+m+"/modal";return g}return o(e,t,n)};i("body").on("click","#burger a[href], #burger .button, #burger .clicon, #burger .launches-modal",function(e){var n,s,d=i(this),u=i(e.target),h=u.is("img"),f=d.closest(a),p=r(f.data("module")),m=r(d.closest("[data-title]").data("title")||h&&u.attr("alt")||d.text()),g=h?"thumb":"link",v=r(d.closest("[data-convert]").data("convert"));if("buy"===v&&(m=v+"_"+m,s=r(d.closest("[data-retailer]").data("retailer")),s&&(m=s+"/"+m)),"search"!==p&&"voting_multi"!==p&&f.length){var b="";if(n=("watch"===p?l:"image_gallery"===p?c:o)(d,f,g,v),"songs"===p){if("like-icon clicon clicked"===d.context.className)b="/like-song",m="like-song/"+d.data("likeinfo").replace(/\s+/g,"_");else if("like-icon clicon"===d.context.className)return;if("buy_song"===v){var y=i(e.currentTarget),k=y.closest(".icon-container").data("buyaylitics").replace(/\s+/g,"_");n=n.replace(/buy_song/,"cart"),m=k,y.data("purchase")&&(m=y.data("retailer")+"/"+k)}}t.link({linkName:p+"/"+n+"/"+m,linkPosition:p+"/"+n+b,href:d.attr("href")})}})}(this),function(e){"use strict";var t=e.Disney,i=e.jQuery,a=e._,n=function(e,t,i){var n=this;a.each(i,function(e,t){n[t]=function(){var t=this,i=arguments;t.load(function(a){e.apply(t,[a].concat(i))})}}),n._u=e,n._c=[],n._i=t};n.prototype={load:function(e){var t=this;return t._p||(t._p=i.ajax(t._u,{dataType:"script",cache:!0}).pipe(function(){var e=t._i();return a.invoke(t._c,"call",t,e),t._c=null,e})),this._p.then(e)},ready:function(e){this._p?this._p.then(e):this._c.push(e)}},t.FB=new n("https://connect.facebook.net/en_US/all.js",function(){var t=e.FB;return t.init({appId:i("meta[property='fb:app_id']").attr("content"),status:!1}),t},{go:function(e){e.XFBML.parse()}}),i(function(){i("<div/>",{id:"fb-root"}).appendTo("body")}),e.___gcfg={parsetags:"explicit"},t.P1=new n("https://apis.google.com/js/plusone.js",function(){return e.gapi.plusone},{go:function(e){e.go()}})}(this),function(e){"use strict";var t=function(t){t="socialelement/"+t,e.Tracker.event({eventCategory:t,action:"like"})};e.Disney.FB.ready(function(e){e.Event.subscribe("edge.create",function(){t("facebook")})}),e.renderPlusone=function(){t("google")}}(this),function(e){"use strict";var t=e.Disney,i=e.jQuery;i(function(){t.top.on("ready",function(t){if(t&&t.collection){var a=t.collection.optimizely;if(a&&!i.isEmptyObject(a))if(e.optimizely)e.optimizely.push(["activate"]);else{var n="http://cdn.optimizely.com/js/"+a.project_id+".js";i.getScript([n],function(){e.optimizely&&e.optimizely.push(["activate"])})}}})})}(this),Whiskers("modules.activity_kit_shared",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("kitData",e,t,1),e,t,0,12,28,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("<kitStyles0",e,t,"")),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("data",e,t,1),e,t,0,50,283,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="content-container '),i.b(i.v(i.f("type",e,t,0))),i.b("-container "),i.b(i.v(i.f("theme",e,t,0))),i.b('"> <div class="content-wrapper"> '),i.b(i.rp("<container1",e,t,"")),i.b(' </div> </div> <div class="content-toolbar-container"> <div id="toolbar" class="inverted"> <div id="meta"></div> </div> </div> ')}),e.pop()),a.fl()},partials:{"<kitStyles0":{name:"kitStyles",partials:{},subs:{}},"<container1":{name:"container",partials:{},subs:{}}},subs:{}}),Whiskers("partials.activity_kit_content",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="stage"> <div id="activity-kit" class="'),a.b(a.v(a.f("view",e,t,0))),a.b('"></div> <div class="print-footer"> <h2 class="print-title" '),a.s(a.f("kitData",e,t,1),e,t,0,130,192,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("theme_color",e,t,1),e,t,0,146,176,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('style="color: '),i.b(i.v(i.f("theme_color",e,t,0))),i.b('"')}),e.pop())}),e.pop()),a.b(">"),a.b(a.v(a.f("title",e,t,0))),a.b('</h1> <div class="print-notice"> &copy; 2015 Disney </div> </div> </div>'),a.fl()},partials:{},subs:{}}),Whiskers("partials.activity_kit_theming",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<style type="text/css"> '),a.s(a.f("theme_color",e,t,1),e,t,0,40,725,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" #activity-kit.avatar .finish .back { color: "),i.b(i.v(i.f("theme_color",e,t,0))),i.b(";} #activity-kit.avatar .finish .back .icon { background-color: "),i.b(i.v(i.f("theme_color",e,t,0))),i.b("; } #activity-kit.avatar .finish .print { background-color: "),i.b(i.v(i.f("theme_color",e,t,0))),i.b("; } #activity-kit.avatar .toolbar .tab.done.active { background-color: "),i.b(i.v(i.f("theme_color",e,t,0))),i.b("; } #activity-kit.stickerbook .choices, #activity-kit.stickerbook .choices > .progress, #activity-kit.stickerbook .finish, .landscape #activity-kit.stickerbook .toolbar .tabs .tab.active .tab-content, .portrait #activity-kit.stickerbook .toolbar .tabs .tab.active .tab-content { background-color: "),i.b(i.v(i.f("theme_color",e,t,0))),i.b("; } #activity-kit .print-footer .print-title { color: "),i.b(i.v(i.f("theme_color",e,t,0))),i.b("; } ")}),e.pop()),a.b(" "),a.s(a.f("theme_arrows",e,t,1),e,t,0,759,1368,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" #activity-kit.avatar .toolbar .eye .next{ background-image: url("),i.b(i.v(i.f("next",e,t,0))),i.b("); background-size: 96% auto; } #activity-kit.avatar .toolbar .eye .prev{ background-image: url("),i.b(i.v(i.f("prev",e,t,0))),i.b("); background-size: 96% auto; } #activity-kit.stickerbook .omnislide .next{ background-image: url("),i.b(i.v(i.f("next",e,t,0))),i.b("); background-size: 50px; } #activity-kit.stickerbook .omnislide .prev{ background-image: url("),i.b(i.v(i.f("prev",e,t,0))),i.b("); background-size: 50px; } #activity-kit.dressup .omnislide .next{ background-image: url("),i.b(i.v(i.f("next",e,t,0))),i.b("); background-size: 50px; } #activity-kit.dressup .omnislide .prev{ background-image: url("),i.b(i.v(i.f("prev",e,t,0))),i.b("); background-size: 50px; } ")}),e.pop()),a.b(" </style>"),a.fl()},partials:{},subs:{}}),function(e){e.ActivityKit=e.ActivityKit||{},e.ActivityKit.rule_templates={Background:{zIndex:1,required:!0,min:1,max:1,selfReplace:!0,width:1,height:1},CharacterSticker:{movable:!0,zIndex:2,max:100},PropSticker:{movable:!0,zIndex:4,max:100},DressupCharacter:{zIndex:2,max:1,movable:!0,selfReplace:!0}}}(this),function(e){"use strict";var t=e.ActivityKit,i=e.Disney,a=e._,n=[],r=e.devicePixelRatio||1,s=e.document.documentElement.clientWidth,o=function(){for(var e=0;e<n.length;++e)n[e](s);o=n=null};t.hiRes=function(e){n?n.push(e):e(s)},r>1?i.geo(function(e){a.contains(["dialup","mobile","satellite","wireless"],e)||(s=r*s),o()}):o()}(this),function(e){"use strict";var t,i=e.ActivityKit,a=e.jQuery,n=e.Backbone,r=e._,s=n.Model,o=n.Collection,l=function(){},c=1024,d=function(){t=null},u=i.unload=function(){t||(t=[],r.defer(d,1e3)),t.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAIAOw=="},h=function(t,n){var s=t.prototype;r.each(n,function(e){s[e]=function(){var t=this.get(e),i=r.keys(t||{});return 0===i.length?void 0:t[r.min(i,function(e){var t=e-c;return 0>t?t*t:t})]}}),s.prefetch=r.memoize(function(){var t,s,o,c,d=this,h=a.Deferred(),f=0,p=n.length;return p>0?(o=function(){this.onload=this.onabort=this.onerror=l,u.call(this),h.notify(e.Math.min(++f,p)/p),f>=p&&(t=null,e.clearInterval(s),h.resolve())},c=function(e){e&&e.onload===o&&e.complete&&e.onload()},s=e.setInterval(function(){r.each(t,c)},500),i.hiRes(function(){t=r.map(n,function(t){var i,a=d[t]();return i=new e.Image,i.src=a,i.complete?o.call(i):i.onload=i.onabort=i.onerror=o,i
})})):h.resolve(),h.promise()},function(){return this.cid})},f=function(){return a.when.apply(a,this.map(function(e){return e.prefetch()})).pipe(null,null,function(){return r.reduce(arguments,function(e,t){return e+(t||0)},0)/arguments.length})},p=s.extend({});i.GroupList=o.extend({model:p,prefetch:f});var m=s.extend({defaults:{zIndex:0,movable:!1,min:0},applyTo:function(e,t,i){var n,s,o,l,c,d=e.ofRule(this),u=d.length,h=this.get("required"),f=this.get("min"),p=this.get("max");if(u>p){var m=r.first(d.slice(0,u-p));n=m.get("x"),s=m.get("y"),o=m.get("width"),l=m.get("height"),c=m.get("rotation"),i&&(i.set("x",n),i.set("y",s),i.set("width",o),i.set("height",l),i.set("rotation",c)),e.remove(m)}else if(h&&f>u)e.add(r.map(t.ofRule(this).slice(0,f),function(e){return e.clone()}));else if(i&&i.creationEvent){var g;g=i.creationEvent.originalEvent?i.creationEvent.originalEvent:i.creationEvent;var v={x:(g.x-a(g.target).first("img").offset().left)/a(g.target).first("img").width(),y:(g.y-a(g.target).first("img").offset().top)/a(g.target).first("img").height()};i.set("x",(a(g.target).offset().left-a(".scene").offset().left)/a(".scene")[0].offsetWidth-.03),i.set("y",(a(g.target).offset().top-a(".scene").offset().top)/a(".scene")[0].offsetHeight-.5),i.set("relLoc",v)}return e}});i.RuleList=o.extend({model:m,applyTo:function(e,t,i){return this.each(function(a){a.applyTo(e,t,i)}),e},forLayer:function(e){return this.get(e.get("rule"))}});var g=s.extend({defaults:{rotation:0},initialize:function(){var t=this;(null==this.get("x")||null==this.get("y"))&&this.positionAt(.4,.5),"Background"===this.get("modifier_rule")&&this.positionAt(0,0);var n=new e.Image;n.src=t.src(),a(n).on("load",function(){if(t.set("natural",{width:n.naturalWidth,height:n.naturalHeight}),i.bgSize||"Background"!==t.get("modifier_rule")){if(i.bgSize&&"Background"!==t.get("modifier_rule")){var e={width:n.naturalWidth/i.bgSize.width,height:n.naturalHeight/i.bgSize.height};if(!t.get("width")){var a=1;"PropSticker"===t.get("modifier_rule")?a=.3:"CharacterSticker"===t.get("modifier_rule")?a=.6:"DressupCharacter"===t.get("modifier_rule")&&(a=.8),t.set("width",e.width*a),t.set("height",e.height*a)}}}else i.bgSize=t.get("natural")})},positionAt:function(e,t){this.set("x",e),this.set("y",t)},groups:function(){var e=this.get("group");return this.get("groups")||(e?[e]:[])},isRule:function(e){return this.get("rule")===e},inGroup:function(e){return e.id&&(e=e.id),r.contains(this.groups(),e)}}),v=i.LayerList=o.extend({model:g,prefetch:f,ofRule:function(){var e=r.map(arguments,function(e){return e.id&&(e=e.id),e});return this.select(function(t){return r.include(e,t.get("rule"))})},ofGroup:function(e){return this.filter(function(t){return t.inGroup(e)})}}),b=s.extend({rules:function(){var e=this.get("rule");return this.get("rules")||(e?[e]:[])},findChoices:function(e,t,i){if(this.get("group"))return t.toArray();var a=new v(i.ofGroup(e));return a.ofRule.apply(a,this.rules())}});i.TabList=o.extend({model:b,prefetch:f}),h(p,["icon"]),h(g,["src"]),i.hiRes(function(e){c=e})}(this),function(e,t,i){"use strict";var a="swipeasaurus",n="."+a,r={effect:"slide",loop:!0,index:0,speed:300,delay:0,rtl:!1},s=Math.abs,o=Math.min,l=e.setTimeout,c=e.clearTimeout,d=["Webkit","Moz","ms","O"],u=e.document.documentElement,h=function(e){var t,a=0;if(u.style[e]!==i)return e;for(t=e.charAt(0).toUpperCase()+e.substr(1);a<d.length;a++)if(u.style[d[a]+t]!==i)return d[a]+t},f=!!h("perspective"),p=!!h("transition"),m=!!h("transform"),g=(h("transform")||"transform").replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-"),v=function(){return(new Date).getTime()},b=function(e,i){return t("<span/>",{"class":e,title:i,role:"button",onclick:""})},y={slide:{c:{overflow:"hidden"},s:{opacity:1,transitionProperty:g+", visibility"},a:p&&m?function(e,t,i){i=i?i+"ms":"0ms";var a=s(t)<(this.visibility_offset||2),n=this.rtl?-100:100;e.css({transitionDuration:i+", 0ms",transitionDelay:"0ms, "+(a?"0ms":i),visibility:a?"visible":"hidden",transform:f?"translate3d("+t*n+"%,0,0)":"translateX("+t*n+"%)"})}:function(e,t,i){var a=this,n=a.rtl?"right":"left",r=function(){e.css(n,100*(t*(1-a._r-a._l)+a._l)+"%")},s=e.width();if(i&&s){var o={};o[n]=t*s+"px",e.stop().css(n,e.position()[n]).animate(o,i,r)}else r()}},fade:{c:{overflow:""},s:{transform:"translate3d(0,0,0)",transitionProperty:"opacity, visibility"},a:p?function(e,t,i){i=i?i+"ms":"0";var a=s(t),n=1>a,r=.5>a;e.css({transitionDuration:i+", 0ms",transitionDelay:"0ms, "+(n?"0ms":i),visibility:n?"visible":"hidden",opacity:1-o(1,a),zIndex:r?1:0})}:function(e,t,i){var a=s(t),n=1>a;n&&e.css({visibility:"visible"}),e.stop().animate({opacity:1-o(1,a)},i,function(){n||e.css({visibility:"hidden"})})}}},k={scroll:function(){t(this.$el).scrollLeft(this.rtl?this.length*this.$el.width():0)}},w=function(e,t){var i=e[t]||e.peek;return i>0&&.5>i?i:0},_=function(e,i){var a,r=this,s=r.rtl=!!i.rtl||"rtl"===e.css("direction"),o=r.$slides=e.children(),l=r.length=o.length,c=r._w=!!i.loop,d=r._l=w(i,"left"),u=r._r=w(i,"right"),h=1-d-u;r.visibility_offset=i.visibility_offset,r._s=+i.speed,r.index=i.index,r.$el=e,t.each(k,function(t,a){var s=e;"mouse"===t.substr(0,5)&&i.arrows&&(s=e.parent()),s.on(t+n,function(e){a.call(r,e)})}),o.on("focusin",function(){r.slide(t(this).index())}),i.dots&&l>1&&(a=o.map(function(e){return b("dot",e)[0]}),a.on("click",function(e){var i=t(e.currentTarget).index();r.slide(i)}),e.on("slide",function(e,t){a.removeClass("active").eq(t).addClass("active")}),e.after(t("<div/>",{"class":"dots","aria-hidden":"true"}).append(a))),t.each({prev:["Previous",0],next:["Next",l-1]},function(a,n){var s;i[a]?s=t(i[a]):i.arrows&&(s=e.siblings("."+a),!s.length&&l>1&&e.after(s=b(a,n[0]))),s&&(s.on("click",t.proxy(r[a],r)),c||e.on("slide",function(e,t){s.toggleClass("disabled",t===n[1])}))}),e.css({zIndex:1,position:"relative"}),o.each(function(e){var i=r.index;t(this).css({display:"block",position:e===i?"relative":"absolute",width:100*h+"%",left:s?"auto":100*d+"%",right:s?100*d+"%":"auto",top:0})}),r.effect(i.effect),r.start(i.delay)};_.prototype={_c:0,effect:function(e){var i=y[e]||r.effect;this._a=function(e,a){for(var n=0,r=this.length,s=this.$slides;r>n;++n)i.a.call(this,t(s[n]),n-e,a)},this.$el.css(i.c),this.$slides.css(i.s),this.slide(this.index,!0)},slide:function(e,t){var i=this,a=t?0:i._s;0>e&&(e=0),e>=i.length&&(e=i.length-1),i._c++&&i.index===e||(i.$el.trigger("slide",i.index=e),c(i._t),i._t=l(function(){i.$el.trigger("slideEnd",e)},a)),i._a(i.index,a),i.resume()},prev:function(){var e=this.index;0===e?this._w&&this.slide(this.length-1):this.slide(e-1)},next:function(){var e=this.index;e===this.length-1?this._w&&this.slide(0):this.slide(e+1)},resume:function(){var e=this;e.pause(),e._d>0&&(e._i=l(function(){t(e.$el).data(a)===e&&e.next()},e._d+e._s))},pause:function(){c(this._i)},start:function(e){this._d=e||this._d,this.resume()},stop:function(){this._d=0,this.pause()}},t.extend(k,e.Modernizr.touch?{touchstart:function(e){var t=e.originalEvent.touches;return t.length>1?k.touchcancel.call(this,e):void(this.touch={x:t[0].pageX,y:t[0].pageY,delta:0,dist:0,test:!0,time:v(),width:this.$el.width()})},touchmove:function(e){var t,i,a=this.touch,n=e.originalEvent.touches,r=this.index,o=this.length;if(a){if(t=n[0].pageX-a.x,a.dist+=s(t-a.delta),a.delta=t,a.test&&(i=n[0].pageY-a.y,a.test=!1,s(t)<s(i)))return k.touchcancel.call(this,e);e.preventDefault(),this.pause();var l=this.rtl?0>t:t>0,c=this.rtl?0>t:t>0;(0===r&&l||r===o-1&&c)&&(t/=s(t)/a.width+1),this._a(r+(this.rtl?t:-t)/a.width)}},touchcancel:function(){this.touch=null,this.slide(this.index)},touchend:function(e){var t=this.touch,i=0;t&&((2*s(t.delta)>t.width||v()-t.time<250&&t.dist>20)&&(i=(this.rtl?-1:1)*(t.delta<0?1:-1)),t.dist>20&&(e.preventDefault(),this.bust=v()),this.touch=null,this.slide(this.index+i))},click:function(e){this.bust&&v()-this.bust<250&&e.preventDefault()}}:{mouseenter:function(){this.pause()},mouseleave:function(){this.resume()}}),t.fn[a]=function(e){var i=arguments;return this.each(function(){var n,s=t(this);"string"==typeof e?(n=s.data(a),n[e].apply(n,Array.prototype.slice.call(i,1))):(e=t.extend({},r,e),s.data(a,new _(s,e)))})}}(this,jQuery),function(e){"use strict";var t=e.ActivityKit,i=e.jQuery,a=e.Backbone,n=e.Math,r=e.Disney,s=e.Tracker,o=e._,l=a.View,c=function(e){s.link({linkName:"activity_kit",linkPosition:"activity_kit/"+e})},d=function(){this.removeAttribute("width"),this.removeAttribute("height")},u=t.ProgressView=l.extend({className:"progress",percent:0,initialize:function(e){var t=this,a=o.bind(t.remove,t);t.promise=i.when(e.promise).then(function(){a()},a,o.bind(t.progress,t)),t.render()},progress:function(e){this.percent=e,this.$(".bar").css("width",100*e+"%")},render:function(){var e=i("<div/>",{"class":"track"});e.append(i("<div/>",{"class":"bar"})),this.$el.empty().append(e),this.progress(this.percent)}},{forPromise:function(e,t){e=i.when(e),"pending"===e.state()&&i(t).prepend(new u({promise:e}).el)}}),h=l.extend({tagName:"div",className:"layer",transformControl:'<div class="transformers-container"><div class="transformers"><div class="rotate handle"><div class="handle-aspect"></div></div><div class="resize handle"><div class="handle-aspect"></div></div></div></div>',endPos:{},events:{mousedown:"mousedown",touchstart:"touchstart",dragstart:function(e){e.preventDefault()}},initialize:function(){var t=new e.Image,a=this.$el,n=this;t.src=this.model.src(),this.render(),a.append(t),this.options.rule.get("selfReplace")?a.css("z-index",this.options.rule.get("zIndex")):(this.options.old=!1,a.css("z-index",999)),t.loaded?n.assignOrientation(t,a):i(t).on("load",function(){n.assignOrientation(t,a)}),this.options.rule.get("movable")&&a.append(this.transformControl),this.$el.append('<div class="glow" />'),this.model.on("change",this.render,this)},assignOrientation:function(e,t){var i=e.naturalHeight/e.naturalWidth,a=i>2.25?"ultra-portrait":i>1?"portrait":i>.75?"square":"landscape";t.addClass(a+"-image")},startgesture:function(e,t,a){var n=this;if(this.movable()){var r=this.model,s=this.$el.closest(".scene"),l=s.offset();l.width=s.outerWidth(),l.height=s.outerHeight(),this.gesture={offset:o.extend({},l),initial:{x:r.get("x"),y:r.get("y"),width:r.get("width"),rotation:r.get("rotation")},start:{x:e-l.left,y:t-l.top,target:a,direction:0}}}this.options.rule.get("min")>0&&this.options.trash.toggleVisible(!1);var c=[];i.each(this.$el.siblings(),function(e,t){c.push({el:t,index:parseInt(i(t).css("z-index"),10)})}),c=c.sort(function(e,t){return e.index-t.index}),i.each(c,function(e,t){t.index=e+1,e>0&&i(t.el).css("z-index",t.index)}),!this.options.rule.get("selfReplace")&&this.options.old&&this.$el.css("z-index",o.last(c).index+1),i.each(this.model.collection.models,function(e,t){t===n.model?n.model.inFocus=!n.model.inFocus:t.inFocus=!1}),i(a).hasClass("handle-aspect")||(i(".layer.focus").removeClass("focus"),i(a).closest(".layer").hasClass("background-rule-type")||this.$el.closest(".scene").removeClass("focus-on-layer"))},movegesture:function(e,t){var a=this.model,r=this.gesture,s=this.options.trash;if(r){var o={x:e-r.offset.left,y:t-r.offset.top},l=o.x-r.start.x,c=o.y-r.start.y,d=i(r.start.target).closest(".layer"),u={top:d.position().top+d.height()/2,left:d.position().left+d.width()/2},h=n.atan2(o.y-u.top,o.x-u.left)-n.atan2(r.start.y-u.top,r.start.x-u.left),f=r.start.x-u.left,p=o.x-u.left,m=n.abs(p)-n.abs(f);i(r.start.target).parent().hasClass("rotate")?this.$el.hasClass("rotating")||this.$el.addClass("rotating"):this.$el.addClass(i(r.start.target).parent().hasClass("resize")?"resizing":"dragging"),i(r.start.target).parent().hasClass("rotate")?(a.set("rotation",r.initial.rotation+h),this.$el.find(".transformers").css({transform:"rotate("+h+"rad)"})):i(r.start.target).parent().hasClass("resize")?a.set("width",r.initial.width+m/r.offset.width):(a.set("x",r.initial.x+l/r.offset.width),a.set("y",r.initial.y+c/r.offset.height)),0!==l&&0!==c&&(this.model.inFocus=!0)}this.options.rule.get("required")||s.toggleVisible(!0),s.toggleHover(s.inHitZone(e,t)&&!this.options.rule.get("required")),this.endPos={left:e,top:t}},cancelgesture:function(){var e=this.gesture;e&&this.endgesture(e.start.x,e.start.y)},endgesture:function(e,t){var a=this.options.trash,n=this.$el;null!=e&&null!=t&&(t>i(".choices").offset().top&&(t=i("#activity-kit").height()/3*2),this.movegesture(e,t)),this.options.old||(n.css("z-index",997),this.options.old=!0),this.gesture=null,n.closest("#activity-kit").off("."+this.cid),n.removeClass("dragging rotating resizing"),this.toggleFocus(this.model.inFocus),this.$el.find(".transformers").css({transform:"rotate(0rad)"}),a.inHitZone(e,t)&&!this.options.rule.get("required")&&this.throwOut()},mousedown:function(e){var t=this.cid;this.startgesture(e.pageX,e.pageY,e.target),this.$el.closest("#activity-kit").on("mousemove."+t,o.bind(this.mousemove,this)).on("mouseup."+t+" mouseleave."+t,o.bind(this.mouseup,this))},mousemove:function(e){e.preventDefault(),this.movegesture(e.pageX,e.pageY)},mouseup:function(e){this.endgesture(e.pageX,e.pageY)},touchstart:function(e){var t,a,n=this.cid;if(a=e.originalEvent?e:i.Event(e,{target:this.el}),t=a.originalEvent.touches,t.length>1)this.cancelgesture();else if(this.movable()){this.startgesture(t[0].pageX,t[0].pageY,t[0].target);var r=this.$el.closest(".scene");r.on("touchmove."+n,o.bind(this.touchmove,this)).on("touchend."+n,o.bind(this.touchend,this)).on("touchcancel."+n,o.bind(this.cancelgesture,this))}},touchmove:function(e){var t;t=e.originalEvent?e.originalEvent.touches:e.touches,this.gesture&&(e.preventDefault(),this.movegesture(t[0].pageX,t[0].pageY))},touchend:function(){this.endgesture(this.endPos.left,this.endPos.top),this.endPos={}},render:function(){var e=this.model,t=this.$el;t.addClass(e.attributes.rule+" "+e.attributes.modifier_rule.toLowerCase()+"-rule-type"),t.attr("data-linkedTo",this.options.rule.get("linkedTo")),this.$el.css({width:100*e.get("width")+"%",top:100*e.get("y")+"%",left:100*e.get("x")+"%",position:"absolute"}).each(d),this.$el.find("img").css({transform:"rotate("+e.get("rotation")+"rad)"})},movable:function(){return this.options.editable&&this.options.rule.get("movable")},toggleFocus:function(t){var i=this,a=this.options.trash,n=!this.options.rule.get("required");e.clearInterval(a.focusInterval),t?(i.$el.addClass("focus"),a.toggleVisible(n),a.targetLayer=n?this:null,a.focusInterval=e.setTimeout(function(){i.$el.removeClass("focus"),a.toggleVisible(!1)},5e3)):(i.$el.removeClass("focus"),a.toggleVisible(!1),a.targetLayer=null)},throwOut:function(){this.options.model.collection.remove(this.model),e.clearInterval(this.options.trash.focusInterval),this.options.trash.toggleHover(!1),this.options.trash.toggleVisible(!1)},remove:function(){l.prototype.remove.call(this),t.unload.call(this.el)}});t.SceneView=l.extend({className:"scene",events:{save:function(){this.save()}},initialize:function(){var e=this,t=e.collection;e.render(),i("#activity-kit").addClass(this.options.activityType),t.on("add",function(t,a){var n=a.indexOf(t),r=e.layer(t),s=r.el;if(0===n?e.$el.prepend(s):e.items().eq(n-1).after(s),t.creationEvent){var o;o=t.creationEvent.originalEvent?t.creationEvent.originalEvent:t.creationEvent,e.options.rules.forLayer(t).get("selfReplace")||(t.set("x",(i(o.target).offset().left-i(".scene").offset().left)/i(".scene")[0].offsetWidth-.03),t.set("y",(i(o.target).offset().top-i(".scene").offset().top)/i(".scene")[0].offsetHeight-.5))}}),t.on("remove",function(t,i,a){e.items().eq(a.index).remove()}),t.on("reset",e.render,e),i("#activity-kit").on("touchmove",function(e){e.preventDefault()})},render:function(){var e=this;return e.items().remove(),e.collection.each(function(t){var a=e.layer(t).el;e.options.rules.forLayer(t).get("movable")&&i(a).append(e.transformControl),e.$el.append(a),i(a).css("z-index",e.options.rules.forLayer(t).get("zIndex"))}),e},layer:function(e){var t=e;t.inFocus=!1;var i=new h({model:t,old:!0,rule:this.options.rules.forLayer(e),editable:this.options.editable,trash:this.options.trash});return i.render(),{el:i.el,layer:i}},items:function(){return this.$el.children()},save:function(){var e=r.top.current,t=e.guest;t.login().then(function(){return null})}}),t.ChoicesView=l.extend({className:"choices",choicesPerRow:function(){return 5},transitionEffect:function(){return"slide"},events:{"mousedown .layer":function(e){e.preventDefault();var t=e.currentTarget;this.applyChoice(this.$(".layer").index(t),e)},"touchstart .layer":function(e){e.preventDefault();var t=e.currentTarget;this.applyChoice(this.$(".layer").index(t),e)},"touchmove .layer":function(e){e.preventDefault()},"mousemove .layer":function(e){e.preventDefault()}},initialize:function(e){var t=this.scene=e.scene,i=this.collection;i.on("reset",this.render,this),this.render(),t.on("add",this.selection,this),t.on("remove",this.selection,this),t.on("reset",this.selection,this)},selection:function(){var e=this.scene;this.$(".layer").each(function(){var t=i(this),a=t.data("id");t.toggleClass("selected",!!e.get(a))})},render:function(){var e,a=this,n=i("<div/>"),r=this.collection;n.css("display","none"),r.each(function(t,r){r%a.choicesPerRow()===0&&(e=i("<ul/>",{"class":t.get("rule")+" "+t.get("modifier_rule").toLowerCase()+"-rule-type"}).appendTo(n));var s=i("<img/>",{"class":"icon",src:t.get("src")[768]}),o=i("<div/>",{"class":"layer "+t.get("rule")+" "+t.get("modifier_rule").toLowerCase()+"-rule-type",data:{id:t.id}}).append(s);e.append(i("<li/>").append(o))}),this.$("img").each(t.unload),this.$el.empty().append(n),this.$("img").each(d),n.swipeasaurus({arrows:!0,right:0,loop:!1,effect:this.transitionEffect()}),this.selection(),n.fadeIn(),u.forPromise(r.prefetch(),this.$el)},applyChoice:function(e,t){var i,a,n=this.options,r=this.collection,s=r.at(e),o=this.options.rules,l=this.scene;if(n.groups.include(s)){var d=n.toolbar.options;n.scenes[d.active.id].reset(l.toArray()),l.reset(n.scenes[s.id].toArray()),n.active=d.active=s}else i=o.forLayer(s),l.get(s.id)?i.get("min")<l.ofRule(i).length&&l.remove(s):(a=s.clone(),i.get("selfReplace")||(a.creationEvent=t),l.add(a)),o.applyTo(l,s,a);c("img/"+r.title+(e+1))}}),t.ToolbarView=l.extend({index:0,className:"toolbar",events:{"click .tabs li":function(e){var t=e.currentTarget;this.switchToTab(i(t).prevAll().length,!0)},"click .next":function(){this.activeTab?i(this.activeTab).find(".next").trigger("click"):i(".omnislide .choices.selected").find(".next").trigger("click")},"click .prev":function(){this.activeTab?i(this.activeTab).find(".prev").trigger("click"):i(".omnislide .choices.selected").find(".prev").trigger("click")}},initialize:function(e){this.index=e.index||this.index,this.render()},render:function(){var e=i("<ul/>",{"class":"tabs tabs-"+this.options.tabs.length}),t=i("<div/>",{"class":"eye"}).append(i("<div/>",{"class":"next",role:"button",title:"Next"})).append(i("<div/>",{"class":"prev",role:"button",title:"Prev"}));this.options.tabs.each(function(t){e.append(i("<li/>",{"class":"tab "+t.get("rule")}).append(i("<div/>",{"class":"tab-content"}).append(i("<img/>",{"class":"lit",src:t.get(t.get("icon_active")?"icon_active":t.get("active_icon_image_fog")?"active_icon_image_fog":"icon_image_fog")})).append(i("<img/>",{"class":"dim",src:t.get(t.get("icon_default")?"icon_default":"icon_image_fog")})).append(i("<span/>",{text:t.get("title"),"class":"title"}))))}),e.find("li").first().addClass("active"),this.$el.empty().append(t).append(e),this.$("img").each(d),this.switchToTab(this.index)},switchToTab:function(i,a){var r=this.options,s=this.index=+i,o=r.tabs.at(s),l=o.get("title").toLowerCase(),d=100,u=1.5,h=96,f=n.max(this.options.tabs.length,5);o.get("finish")?(r.omnislide&&r.omnislide.children(".choices").removeClass("selected"),this.options.finish.$el.delay(d).fadeIn(),this.$(".eye").css("top",80+u+"%")):(this.options.finish.$el.fadeOut(150),"stickerbook"===t.data.activityType&&this.collection.reset(o.findChoices(r.active,r.groups,r.choices)),this.$(".eye").css("top",s*h/f+u+"%")),this.$(".eye").attr("class","eye "+o.get("rule")),this.$el.attr("class","toolbar "+o.get("rule")+" tab-"+s),e.setTimeout(function(){this.$(".tabs li").removeClass("active").eq(s).addClass("active")},100),a&&c("button/"+l),this.collection.title=l}}),t.TrashView=l.extend({className:"trash",tagName:"div",focusInterval:null,targetLayer:null,events:{click:function(){var e=this.targetLayer;e&&(e.throwOut(),this.toggleVisible(!1))}},inHitZone:function(e,t){var i={};return i.left=this.$el.offset().left,i.right=i.left+this.$el.width(),i.top=this.$el.offset().top,i.bottom=i.top+this.$el.height(),e>i.left&&t>i.top&&e<i.right&&t<i.bottom},toggleVisible:function(e){this.$el.toggleClass("active",e)},toggleHover:function(e){e?(this.$el.addClass("hovering"),i(".dragging").css("opacity","0.15")):(this.$el.removeClass("hovering"),i(".dragging").css("opacity","1"))}}),t.FinishView=l.extend({className:"finish-container",events:{"click .print":function(){c("button/print"),e.print()},"click .save":function(){this.options.canvas&&this.options.canvas.$el.trigger("save")},"click .back":function(){c("button/back");var e=this.options.toolbar.$el.find("ul li").get(0);i(e).trigger("click")}},initialize:function(){var a=this.$el.empty(),n=this.options.show_save,r=i("<div/>",{"class":n?"finish saving":"finish"}),s=i("<div/>",{"class":"print",role:"button",title:t.translations.print,text:t.translations.print}),o=i("<div/>",{"class":"reload back",role:"button",title:t.translations.back,text:t.translations.back}),l=i("<div/>",{"class":"save",role:"button",title:t.translations.save,text:t.translations.save});r.append(o),e.print&&r.append(s),n&&r.append(l),a.append(r)}}),i(e).on("touchstart",function(){})}(this),function(e){"use strict";var t=e.ActivityKit,i=e.jQuery,a=e._,n=e.Backbone;t.data={};var r=function(e){var t=0,i=function(){t<e.length&&e[t++].prefetch().then(i)};e=e.slice(),i(),i()};t.init=function(s,o,l,c){a.extend(t.data,{activityType:l,hasPrimary:!1,orientation:"landscape"}),t.translations={print:"Print",done:"Done",back:"Back",save:"Add to Gallery"},a.extend(t.translations,c);var d,u=o,h=[],f=[];s.rules=[],i.each(s.categories,function(e,a){a.rule=a.title.replace(/ /g,"-").replace(/'/g,"").toLowerCase(),s.rules.push({id:a.rule,template:a.modifier_rule}),a.primary&&(t.data.hasPrimary=!0,i.each(a.assets,function(e,t){f.push(t.id)}))}),t.data.hasPrimary||(d=new t.GroupList({id:"emptyPrimary"}),f.push("emptyPrimary")),i.each(s.rules,function(e,t){a.extend(t,u[t.template])}),i.each(s.categories,function(e,a){i.each(a.assets,function(e,t){t.groups=a.primary?[t.id]:f,t.id=t.id.toString(),t.src={320:t.iphone_image_fog,640:t.iphone_retina_image_fog,768:t.ipad_image_fog,1024:t.desktop_image_fog,1536:t.ipad_retina_image_fog,2048:t.desktop_retina_image_fog},t.rule=a.title.replace(/ /g,"-").replace(/'/g,"").toLowerCase(),t.modifier_rule=a.modifier_rule,h.push(t)}),a.primary&&(a.group=!0,d=new t.GroupList(a.assets))}),s.categories.push({title:t.translations.done,rule:"done",finish:!0,icon_default:"//a.dilcdn.com/a/modules/activity_kit_app/icon-done-864a26cc55a8.png",icon_active:"//a.dilcdn.com/a/modules/activity_kit_app/icon-done_active-ed56d02b0135.png"});var p=/(?:\?|&)group=([^&]*)/.exec(e.location.search),m=new t.RuleList(s.rules),g=new t.TabList(s.categories),v=new t.LayerList(h,{comparator:function(e){return e.groups().length}}),b=new t.LayerList,y=d.reduce(function(e,i){var a=e[i.id]=new t.LayerList;return m.applyTo(a,new t.LayerList(v.ofGroup(i))),b.add(a.models),e},{}),k=p&&d.get(p[1])||(p=null)||d.first(),w=y[k.id].clone(),_=new t.LayerList,x=new t.TrashView({scene:w}),A=new t.SceneView({activityType:t.data.activityType,collection:w,rules:m,editable:!0,trash:x}),C=new t.FinishView({canvas:A,choices:v,tabs:g,show_save:s.show_save}),S=new t.ToolbarView({activityType:t.data.activityType,collection:_,active:k,scene:w,tabs:g,index:p?1:0,choices:v,groups:d,finish:C}),T=[];"stickerbook"===t.data.activityType&&(T[0]=new t.ChoicesView({activityType:t.data.activityType,collection:_,active:k,scene:w,scenes:y,rules:m,groups:d,toolbar:S,trash:x}));var P=[];i.each(T,function(e,t){P.push(t.el)});var E=i("<div/>",{"class":"omnislide"}).append(C.el);i.each(P,function(e,t){E.append(t)}),a.extend(C.options,{toolbar:S}),a.extend(S.options,{omnislide:E});var I=i("<div/>",{"class":"scaler"}).append(A.el),L=i("<div/>",{"class":"controls"}).prepend(x.el).prepend(S.el).prepend(E),M=function(){var a=i(".stage"),r=i(e).height()-a.offset().top,s=n.Resize.width(),o=r/s,l=o>1?"portrait":"landscape";s>1024&&(l="landscape"),l!==t.data.orientatation&&(a.removeClass(t.data.orientation).addClass(l),t.data.orientation=l),i(".loading-spacer").addClass("complete")},D=b.add(g).prefetch().then(function(){i("#activity-kit").prepend(L).prepend(I),M(),i(e).on("resize",a.throttle(M,100)),r(v)});C.$el.hide(),t.ProgressView.forPromise(D,I),i(e.document).on("keydown",function(e){var t=x.targetLayer;if(8===e.keyCode&&e.preventDefault(),t){var i=t.model.get("rotation"),a=t.model.get("width");8===e.keyCode?(e.preventDefault(),t.throwOut()):27===e.keyCode?(t.model.inFocus=!1,t.toggleFocus(!1)):38===e.keyCode?(a+=.03,t.model.set("width",a)):40===e.keyCode?a>.1&&(a-=.03,t.model.set("width",a)):37===e.keyCode?(i=void 0===i?0:i-.04,t.model.set("rotation",i)):39===e.keyCode&&(i=void 0===i?0:i+.04,t.model.set("rotation",i))}})}}(this),Whiskers("shared.contenttoolbar",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="toolbar"> <div id="metadata" class="bound '),a.b(a.v(a.f("adSystem",e,t,0))),a.b('"> <div class="module_body"> <div class="contentarea col-container"> <div class="content"> <div class="item"> '),a.s(a.f("contentToolbarTitleLink",e,t,1),e,t,0,201,341,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("asset_desktop_image",e,t,1),e,t,0,226,316,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="icon"> <img src="'),i.b(i.v(i.f("asset_desktop_image",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> </a> ')}),e.pop()),i.b(" ")}),e.pop()),a.b(' <div class="productlink"> <h1>'),a.b(a.v(a.f("title",e,t,0))),a.b("</h1> "),a.s(a.f("badge",e,t,1),e,t,0,425,504,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <span class="watch_icon"> <img src="'),i.b(i.v(i.f("badge",e,t,0))),i.b('" class="watchpageicon"> </span> ')}),e.pop()),a.b(" "),a.s(a.f("contentToolbarTitleLink",e,t,1),e,t,0,543,574,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a>")}),e.pop()),a.b(' </div> </div> <p itemprop="description">'),a.b(a.v(a.f("description",e,t,0))),a.b(a.v(a.f("rating",e,t,0))),a.b("</p> "),a.s(a.f("cds",e,t,1),e,t,1,0,0,"")||(a.b(" "),a.s(a.f("use_deprecated_social",e,t,1),e,t,0,708,846,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <ul id="social-links"'),i.s(i.f("linksInverted",e,t,1),e,t,0,748,765,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' class="inverted"')}),e.pop()),i.b("> "),i.s(i.f("socialLinks",e,t,1),e,t,0,801,823,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.rp("<socialLinkPartial0",e,t,""))}),e.pop()),i.b(" </ul> ")}),e.pop()),a.b(" "),a.s(a.f("use_deprecated_social",e,t,1),e,t,1,0,0,"")||(a.b(" "),a.s(a.f("suppress_social",e,t,1),e,t,1,0,0,"")||(a.b(" "),a.b(a.rp("<socialLinkPartial1",e,t,"")),a.b(" ")),a.b(" ")),a.b(" ")),a.b(" "),a.s(a.f("contentToolbarPromoLink",e,t,1),e,t,0,1029,1386,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="watch_icon item" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> <div class="messageLink"> '),i.s(i.f("asset_desktop_image",e,t,1),e,t,0,1139,1224,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="watch-icon"> <img src="'),i.b(i.v(i.f("asset_desktop_image",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> </div> ')}),e.pop()),i.b(' <div class="copy'),i.s(i.f("asset_desktop_image",e,t,1),e,t,1,0,0,"")||i.b(" noImage "),i.b('"> <p aria-hidden="true">'),i.b(i.v(i.f("description",e,t,0))),i.b("</p> </div> </div> </a> ")}),e.pop()),a.b(" "),a.s(a.f("purchase",e,t,1),e,t,0,1428,1526,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div id="purchase" class="bound"> <p> <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" target="_blank">'),i.b(i.v(i.f("text",e,t,0))),i.b("</a> </p> </div> ")}),e.pop()),a.b(" </div> </div> "),a.s(a.f("cds",e,t,1),e,t,1,0,0,"")||(a.b(' <div class="ad-container"> <div class="companionad">'),a.b(a.t(a.f("companionAd",e,t,0))),a.b("</div> "),a.b(a.t(a.f("mobileAd",e,t,0))),a.b(" </div> ")),a.b(" </div> </div> </div>"),a.fl()},partials:{"<socialLinkPartial0":{name:"socialLinkPartial",partials:{},subs:{}},"<socialLinkPartial1":{name:"socialLinkPartial",partials:{},subs:{}}},subs:{}}),Whiskers("shared.contenttoolbar2",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b(' <div id="toolbar"> <div id="metadata" class="bound"> <div class="module_body '),a.s(a.f("contentToolbarTitleLink",e,t,1),e,t,0,150,162,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("has-prodlink")}),e.pop()),a.b(" "),a.s(a.f("cds",e,t,1),e,t,1,0,0,"")||a.s(a.f("suppress_social",e,t,1),e,t,1,0,0,"")||a.b("has-social"),a.b(" "),a.s(a.f("purchase",e,t,1),e,t,0,271,283,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("has-purchase")}),e.pop()),a.b(' "> <div class="contentarea col-container"> <div class="content"> <h1>'),a.b(a.v(a.f("title",e,t,0))),a.b('</h1> <p itemprop="description">'),a.b(a.v(a.f("description",e,t,0))),a.b(a.v(a.f("rating",e,t,0))),a.b('</p> </div> </div> <div class="secondary-content"> <div class="promo-social-wrapper"> <div class="meta-content"> <div class="productlink"> '),a.s(a.f("contentToolbarTitleLink",e,t,1),e,t,0,599,739,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("asset_desktop_image",e,t,1),e,t,0,624,714,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="icon"> <img src="'),i.b(i.v(i.f("asset_desktop_image",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> </a> ')}),e.pop()),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("badge",e,t,1),e,t,0,778,857,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <span class="watch_icon"> <img src="'),i.b(i.v(i.f("badge",e,t,0))),i.b('" class="watchpageicon"> </span> ')}),e.pop()),a.b(" "),a.s(a.f("contentToolbarTitleLink",e,t,1),e,t,0,896,948,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a class="icon_title" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a> ")}),e.pop()),a.b(" </div> "),a.s(a.f("cds",e,t,1),e,t,1,0,0,"")||a.s(a.f("suppress_social",e,t,1),e,t,1,0,0,"")||(a.b(" "),a.b(a.rp("<socialLinkPartial0",e,t,"")),a.b(" ")),a.b(" "),a.s(a.f("purchase",e,t,1),e,t,0,1078,1160,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div id="purchase"> <p><a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" target="_blank">'),i.b(i.v(i.f("text",e,t,0))),i.b("</a></p> </div> ")}),e.pop()),a.b(" </div> </div> </div> </div> "),a.s(a.f("cds",e,t,1),e,t,1,0,0,"")||(a.b(' <div class="ad-container"> <div class="companionad">'),a.b(a.t(a.f("companionAd",e,t,0))),a.b("</div> "),a.b(a.t(a.f("mobileAd",e,t,0))),a.b(" </div> ")),a.b(" </div> </div>"),a.fl()},partials:{"<socialLinkPartial0":{name:"socialLinkPartial",partials:{},subs:{}}},subs:{}}),Whiskers("partials.social_link",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<li class="social-dropdown-btn '),a.b(a.v(a.f("share_type",e,t,0))),a.b('"> <div class="label" role="button">'),a.b(a.v(a.f("share_text",e,t,0))),a.b('</div> <!-- dropdown area --> <div class="dropdown-panel"> <span class="dropdown-label">'),a.b(a.v(a.f("output_label",e,t,0))),a.b(':</span> <textarea rows="1" class="text-output"></textarea> </div> </li>'),a.fl()},partials:{},subs:{}}),Whiskers("partials.social_btn",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<button type="button" class="social-link-btn'),a.s(a.f("social_btn_text_lightness",e,t,1),e,t,0,74,109,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" text-"),i.b(i.v(i.f("social_btn_text_lightness",e,t,0)))}),e.pop()),a.b('" data-source="'),a.s(a.f("shareOverrides",e,t,1),e,t,0,173,196,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.v(i.d("shareOverrides.href",e,t,0)))}),e.pop()),a.s(a.f("shareOverrides",e,t,1),e,t,1,0,0,"")||a.b(a.v(a.f("href",e,t,0))),a.b('" data-thumb="'),a.b(a.v(a.f("thumb",e,t,0))),a.b('" data-title="'),a.s(a.f("shareOverrides",e,t,1),e,t,0,317,341,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.v(i.d("shareOverrides.title",e,t,0)))}),e.pop()),a.s(a.f("shareOverrides",e,t,1),e,t,1,0,0,"")||a.b(a.v(a.f("title",e,t,0))),a.b('"> <span class="icon-social"></span> <span class="social-share-title">'),a.b(a.v(a.d("translations.share",e,t,0))),a.b("</span> </button>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";
var t=e.jQuery,i=e.document,a=e.Tracker;t(function(){var n=e.location;t(i).on("click",".social-dropdown-btn .label",function(){var i=t(this).closest(".social-dropdown-btn"),r=function(e){var i=t(e).closest(".bun.watch").find('meta[itemprop="name"]').attr("content"),a=t(e).closest('div[itemprop="video"]').find('meta[itemprop="embedURL"]').attr("content");t(e).find(".text-output").text('<iframe width="560" height="315" src="'+a+'" frameborder="0" allowfullscreen scrolling="no"></iframe><br/><a href="'+n.href+'">'+i+" on Disney Video</a>")},s=function(e){t(e).removeClass("active"),t("body").off("click.watch"),t(e).hasClass("active")&&(t(e).removeClass("active"),o(e))},o=function(i){a&&a.event({eventCategory:"socialelement",action:"embed",label:e.location.href}),t(i).hasClass("share")?t(i).find(".text-output").text(n.href):t(i).hasClass("embed")&&r(i),t(i).addClass("active"),t("body").on("click.watch",function(e){var a=t(e.target);0===a.closest(".dropdown-panel").length&&0===a.closest(".social-dropdown-btn").length&&s(i)})};i.hasClass("active")?s(i):(t.each(t(".social-dropdown-btn.active"),function(e,t){s(t)}),n=e.location,o(i))});var r=t(".dropdown-panel");t(i).on("click",r,function(){t(this).find(".text-output").select()})})}(this),function(e){"use strict";var t=e.Disney,i=e.Backbone,a=e.jQuery,n=e._,r=e.Whiskers,s=e.Tracker;t.ContentToolbarView=i.View.extend({initialize:function(){this.render(),this.init()},render:function(){var e=this.options.ads,t=this.options.use_deprecated_social,i=t?r.partials.social_link:r.partials.social_btn,a=this.model.get("translations")||{},s=this.options.template||r.shared.contenttoolbar,o=this.model.get("data"),l=n.extend({use_deprecated_social:t,translations:a,disclaimer_copy:this.options.disclaimer_copy,cds:this.options.cdsMode&&!e.showCDSAds(),socialLinks:this.options.socialLinks,adSystem:e.adSystem,companionAd:function(){return e.tag(this.type.toLowerCase()+"Companion")}},"activitykit"===this.model.get("type")&&o[1]?o[1]:o[0],e?e.helpers(this.model.toJSON()):{});this.$el.html(s.render(l,{socialLinkPartial:i}))},init:function(){var t=this;t.$(".share-embed-btn").on("click",function(){var i=function(){t.$("#share_embed").removeClass("active"),a("body").off("click.watch"),t.$("#share_link").hasClass("active")&&(t.$("#share_link").removeClass("active"),n())},n=function(){s&&s.event({eventCategory:"socialelement",action:"embed",label:e.location.href}),t.$("#share_embed").addClass("active"),a("body").on("click.watch",function(e){var t=a(e.target);0===t.closest("#share_embed").length&&0===t.closest(".share-embed-btn").length&&i()})};t.$("#sharing .active").length?i():n()}),t.$(".share-link-btn").on("click",function(){var i=function(){t.$("#share_link").removeClass("active"),a("body").off("click.watch"),t.$("#share_embed").hasClass("active")&&(t.$("#share_embed").removeClass("active"),n())},n=function(){s&&s.event({eventCategory:"socialelement",action:"share",label:e.location.href}),t.$("#share_link").addClass("active"),a("body").on("click.watch",function(e){var t=a(e.target);0===t.closest("#share_link").length&&0===t.closest(".share-link-btn").length&&i()})};t.$("#sharing .active").length?i():n()});var i=a("#share_embed");a(".code",i).on("click",function(){a(this).select()});var r=a("#share_link");a(".link",r).on("click",function(){a(this).select()});var o=n.first(this.model.get("data")),l=e.location,c="http://"+l.host+"/embed/"+o.id;t.$("#share_embed .code").text('<iframe width="560" height="315" src="'+c+'" frameborder="0" allowfullscreen scrolling="no"></iframe><br/><a href="'+l.href+'">'+o.title+" on Disney Video</a>"),t.$(".quick_link input[type=text]").val(l.href)},remove:function(){a("body").off("click.watch");var e=a("#share_embed"),t=a("#share_link");a(".code",e).off("click"),a(".link",t).off("click"),a("#sharing").appendTo("body").remove()}})}(this),function(e){"use strict";var t=e.ActivityKit,i=e.Disney,a=e.Grill,n=e._,r=e.jQuery,s=e.Math,o=e.Whiskers,l=a.ModuleView.extend({bodyClassName:"content-page",style_classes:["skip-top-border"],template:o.modules.activity_kit_shared,initialize:function(){var e=this,i=n.first(e.model.get("data")),a=e.model.get("view"),r=t.rule_templates,s=e.model.get("config_options");e.translations=e.model.get("translations"),n.defaults(e.translations,{print:"Print",done:"Done",back:"Back"}),i.show_save=s&&s.show_save;var o=n.last(this.model.get("data")).pslug,l=n.last(this.model.get("data")).ptitle;!o&&l&&(o=l.replace(/ /g,"-").replace(/'/g,"").toLowerCase()),o&&(this.bodyClassName+=" "+o),t.init(i,r,a,e.translations)},render:function(){var e=this,t=n.last(e.model.get("data")),i=e.model.get("data").length>1&&n.first(e.model.get("data")),a=n.extend({data:t,kitData:i,cds:e.options.cds,theme:e.model.get("style_options").default_color_theme,view:e.model.get("view"),upNext:this.upNext&&this.upNext(),translations:e.translations},this.options.ads.helpers());e.options.cds&&(a.allurl+="?cds"),e.$el.html(e.template.render(a,{kitStyles:o.partials.activity_kit_theming,container:o.partials.activity_kit_content})),r("#body-wrapper").attr("class",e.bodyClassName)},ready:function(){var t=this,a=t.options,s=n.last(t.model.get("data")),o=t.translations,l=e.Tracker;r("html").addClass("single-page-print"),this.tb=new i.ContentToolbarView({el:this.$("#meta"),model:this.model,socialLinks:[{share_type:"embed",share_text:o.embed,output_label:o.embed},{share_type:"share",share_text:o.share,output_label:o.quick_link}],cdsMode:a.cds,ads:a.ads}),e.setTimeout(function(){var e=s.ptitle||"",i=s.slug.replace(/-/g,"")||"",a=s.id||"",n=t.generateUUID()||"",r=(new Date).getTime()||"";l.trackApp({assetTypeCode:"app",appEvent:"load",appBuCode:"dcom",appPropertyCode:e,appOwnerName:"dcom",appTypeCode:"misc",appGenreCode:"",appName:i,assetId:a,assetName:"app|dcom|"+e+"|dcom|misc||"+a+"|"+i||"",appTime:r,appSessionId:n})},1e3)},containerType:function(){return n.contains(["stickerbook","avatar"],this.model.get("view"))?"activity_kit":n.last(this.model.get("data")).type.toLowerCase()},generateUUID:function(){var e=function(){return(65536*(1+s.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},remove:function(){a.ModuleView.prototype.remove.call(this),r("#body-wrapper").removeClass(this.bodyClassName),r("html").removeClass("single-page-print"),this.tb.remove()}});l.register("stickerbook",{})}(this),Whiskers("modules.add_to_home_screen",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="popup-bookmark"> <div class="popup-bookmark-contain"> <p class="title">'),a.b(a.v(a.f("title",e,t,0))),a.b('</p> <p class="description">'),a.b(a.v(a.f("desc",e,t,0))),a.b("</p> </div> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.jQuery,i=e.Disney,a=i.Cookie,n=e.Grill,r=e.Whiskers;n.ModuleView.register("add_to_home_screen",{template:r.modules.add_to_home_screen,cookie_name:"popup-bookmark-tip",cookie_duration:30,display_time:6e3,render:function(){var i=this;if(this.canShowTip()){var a=this.model.get("header_data"),n={title:a.title,desc:a.desc};this.$el.html(this.template.render(n)),this.setCookie(),e.setTimeout(function(){t("#popup-bookmark").hide()},i.display_time)}},setCookie:function(){a.set(this.cookie_name,"true",{domain:a.domain(),expires:this.cookie_duration})},canShowTip:function(){var t=a.get(this.cookie_name),i=e.navigator.userAgent;return-1!==i.indexOf("iPhone")&&!!i.match(/Safari/i)&&!i.match(/ChriOS/i)&&"true"!==t}})}(this),Whiskers("modules.banner",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> '),a.b(a.t(a.f("bannerAd",e,t,0))),a.b(" </div>"),a.fl()},partials:{},subs:{}}),Whiskers("modules.sponsor",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> '),a.b(a.t(a.f("sponsorAd",e,t,0))),a.b(" </div>"),a.fl()},partials:{},subs:{}}),Whiskers("modules.pushdown",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="nav-pushdown"> '),a.b(a.t(a.f("pushdownAd",e,t,0))),a.b(" </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e._,n=t.ModuleView.extend({render:function(){var e=this.model.toJSON(),t=a.extend(this.options.ads.helpers(e),this.model);this.$el.html(this.template.render(t))}});n.register("ad_banner",{style_classes:["full-width","full-height"],template:i.modules.banner}),n.register("sponsor",{style_classes:["full-width","full-height"],template:i.modules.sponsor});var r=t.ModuleView.extend({render:function(){var e=a.extend({},this.options.ads.helpers(),this.model);this.$el.html(this.template.render(e))}});r.register("pushdown",{template:i.modules.pushdown})}(this),Whiskers("modules.all",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.s(a.f("singleRow",e,t,1),e,t,0,56,67,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" single-row")}),e.pop()),a.b('"> '),a.s(a.f("header_data",e,t,1),e,t,0,100,118,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div id="stream_items"> '),a.b(a.t(a.f("list",e,t,0))),a.b(" </div> "),a.s(a.f("hasMore",e,t,1),e,t,0,189,389,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="show_more_container"> <div class="show_more blue button large" role="button" onclick=""> <span class="label">'),i.b(i.v(i.d("translations.show_more",e,t,0))),i.b('</span> <span class="spinner"></span> </div> </div> ')}),e.pop()),a.b(" </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Disney,i=t.placeSwap=function(e,t){return t?(t.render(),void e.$("#"+t.cid).replaceWith(t.el)):function(t){t&&i(e,t)}};t.placeHtml=function(e){return e?'<div id="'+e.cid+'"></div>':null}}(this),function(e){"use strict";var t=e.Disney,i=e.Grill,a=t.Style.breakpoints,n=e._,r=e.Backbone;t.GridModuleDimensions={cols:function(e,t){switch(e){case"poster":case"dvd_case":case"letter":case"baseball_card":return t>=a.max?5:t>=a.midHigh?4:t>=a.midLow?3:2;case"square":return t>=a.max?4:t>=a.midHigh?3:2;case"16x9":return t>=a.midHigh?3:t>=a.midLow?2:1;case"widescreen":return t>=a.midHigh?2:1;case"4x3":return t>=a.max?4:t>=a.midHigh?3:t>=a.midLow?2:1;default:return t>=a.max?4:t>=a.midHigh?3:1}},rows:function(e){return e>=a.max?4:e>=a.midHigh?4:5}},i.GridModuleBaseView=i.ModuleView.extend({cols:function(){var e=r.Resize.width(),i=n.first(this.model.get("data")),s=i&&i.entity_config&&i.entity_config.aspect_ratio,o=this.model.get("style_options");return o.items_per_row_override&&e>=a.midHigh?o.items_per_row_override:t.GridModuleDimensions.cols(s,e)},rows:function(){var e=r.Resize.width();return t.GridModuleDimensions.rows(e)}})}(this),function(e){"use strict";var t=e.Disney,i=e.Grill,a=e.Backbone,n=e.Whiskers,r=e.Math,s=e.encodeURIComponent,o=e._,l=e.jQuery,c=t.Style.breakpoints,d=e.Tracker,u=o.values(c);i.GridModuleBaseView.register("all",{style_classes:["stream-view","grid-view","filters-view"],required_template_sets:["module_header","entities"],template:n.modules.all,breakpoints:u.join(" "),page:1,events:{"click .show_more":function(e){var t=this,i=++t.page*t.cols()*this.rows();e.preventDefault(),t.model.data.ensure(i).then(function(){t.fit(),d.trackPagination(t.page)})},"click .filters a.filter":function(e){var t=this;e.preventDefault(),t.$(".filters a.filter").toggleClass("active");var i=l(".filter_list").height()+44;t.$(".filter_drawer").hasClass("active")?t.$(".filter_drawer").css("height","0").removeClass("active"):t.$(".filter_drawer").css("height",i).addClass("active")}},initialize:function(){var e=this,t=e.model,a=t.data,r=o.first(a.models),s=r.get("entity_config");e.entity_type=r.get("entity_type")||t.get("type"),this.list=new i.ListView({collection:a,template:{render:function(t){return o.extend(t,{translations:e.model.get("translations"),entity_config:s}),n.entities.item.render(t,e.global_components.entities)}}}),a.on("loading",function(t,i){e.updateButton(i)})},render:function(){var e=this.list,i=this.model.data,a=o.extend({entity_type:this.entity_type,list:t.placeHtml(e),hasMore:i.remaining()>0,singleRow:i.count<=this.cols()},this.model);this.$el.html(this.template.render(a,this.ctx_additions())),t.placeSwap(this,e),this.updateButton(!1)},getPlatforms:function(){var e=this,t=e.model,i=t.data,a=[];return o.each(i.models,function(e){l.merge(a,e.attributes.platforms||[])},this),o.uniq(a).sort()},getGameTypes:function(){var e=this,i=e.model,a=i.data,n=[];return o.each(a.models,function(e){n.push(e.attributes.game_type)},this),1===o.uniq(n).length&&"games.disney.com"===t.portal?n[0]:"All"},ready:function(){this.gameFilterType=this.getGameTypes(),this.createUI(),this.$el.loadLazyImages()},createUI:function(){var e=this,i=e.model.get("filters"),a=this.model.get("all_button_text"),n=e.getPlatforms();if(i="games.disney.com"===t.portal?n:i,i&&i.length){var r=this.$(".filter_list"),s=this.$(".mobile_filter_list");r.append('<a class="active" href="" data-filter="All"><span>All '+a+"</span></a>"),this.$(".filters a.filter span").replaceWith("<span>All "+a+"</span>"),this.$(".filter_mobile span").replaceWith("<span>All "+a+"</span>"),l.each(i,function(e){var t=i[e];r.append('<a href="" data-filter="'+t+'"><span>'+t+"</span></a>"),s.append('<option value="'+(e+1)+'" data-filter="'+t+'">'+t+"</option>")}),this.$(".filter_drawer a").click(function(t){t.preventDefault(),e.$(".filter_drawer a").removeClass("active"),l(this).addClass("active"),e.$(".filter_drawer").css("height","0").removeClass("active"),e.$(".filters a.filter").removeClass("active"),"All"===l(this).data("filter")?(e.$(".filters a.filter span").replaceWith("<span>"+l(this).data("filter")+" "+a+"</span>"),e.$(".filter_mobile span").replaceWith("<span>"+l(this).data("filter")+" "+a+"</span>")):(e.$(".filters a.filter span").replaceWith("<span>"+l(this).data("filter")+"</span>"),e.$(".filter_mobile span").replaceWith("<span>"+l(this).data("filter")+"</span>")),e.hideStreamItems()}),this.$(".mobile_filter_list").change(function(){e.$(".mobile_filter_list option:selected").each(function(){"All"===l(this).data("filter")?(e.$(".filters a.filter span").replaceWith("<span>"+l(this).data("filter")+" "+a+"</span>"),e.$(".filter_mobile span").replaceWith("<span>"+l(this).data("filter")+" "+a+"</span>")):(e.$(".filters a.filter span").replaceWith("<span>"+l(this).data("filter")+"</span>"),e.$(".filter_mobile span").replaceWith("<span>"+l(this).data("filter")+"</span>")),e.$(".mobile_filter_list").blur(),e.hideStreamItems()})}),r.css("display","")}this.resize()},hideStreamItems:function(){var t=this,i=this.$("#stream_items ul"),a=this.$("#stream_items"),n=i.outerHeight(),r=l(e).selectTransitionEnd()+".stream_items";i.css("height",n).addClass("hide"),a.addClass("load"),l.support.css3("transition")?i.on(r,function(e){this===e.target&&(t.fetch(),i.off(r))}):t.fetch()},fetch:function(){var e,i=this,n=a.Resize.width(),r=i.list.collection,o=this.$(".filter_drawer a.active").data("filter")||"All",l=this.$("select.mobile_filter_list option:selected").data("filter")||"All";n<c.midHigh?e="/all-filter.json?f="+s(l):(o.replace(/'?'/g,""),e="/all-filter.json?f="+s(o)),"games.disney.com"===t.portal&&(e=e+"&g="+i.gameFilterType),i.page=1,r.reset(),r.url=e;var d=i.page*i.cols()*this.rows();r.ensure(d).then(function(){i.$("#stream_items").removeClass("load"),i.$("#stream_items ul").css("height","auto").removeClass("hide"),i.$el.loadLazyImages()})},updateButton:function(e){var t=this.$el,i=this.model.data;t.toggleClass("loading",e),t.toggleClass("has-more",i.remaining()>0)},resize:function(){var e=this.cols(),t=e>1?"grid-layout":"list-layout";this.page=r.floor(this.model.data.length/this.rows()/e)||1,this.list.$el.attr("class","col-container cols-"+e+" "+t),this.fit()},fit:function(){var e=this.list.collection.count,t=this.page*this.cols()*this.rows();this.model.data.remaining()>0?e>t?(this.list.$el.children().show().slice(t).hide(),this.$(".col").removeClass("last-row"),this.list.$el.children().slice(t-this.cols()).addClass("last-row")):this.list.$el.children().show():(this.list.$el.children().show(),this.$(".col").removeClass("last-row")),this.$el.loadLazyImages()}})}(this),function(e){"use strict";var t=e.Disney,i=e.document,a=e.jQuery,n=e._;t.Utilities=t.Utilities||{},n.extend(t.Utilities,{toggleFullScreen:function(e,t){var a=this.isFullScreen();e&&t&&!a?e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen():!t&&a&&(i.exitFullscreen?i.exitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitCancelFullScreen?i.webkitCancelFullScreen():i.msExitFullscreen&&i.msExitFullscreen())},onFullScreenChange:function(e){a(i).on("fullscreenchange",function(){e()}),a(i).on("webkitfullscreenchange",function(){e()}),a(i).on("mozfullscreenchange",function(){e()}),a(i).on("msfullscreenchange",function(){e()})},offFullScreenChange:function(){a(i).off("fullscreenchange"),a(i).off("webkitfullscreenchange"),a(i).off("mozfullscreenchange"),a(i).off("msfullscreenchange")},isFullScreen:function(){return!!(i.fullScreen||i.webkitIsFullScreen||i.mozFullScreen||i.msFullscreenElement||i.fullscreenElement)},selectAnimationEnd:function(){var e,t=i.createElement("fakeelement"),a={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in a)if(void 0!==t.style[e])return a[e]}})}(this),Whiskers("partials.ant_man",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="ant-man-assets"> <div class="ants"></div> <div class="legal"></div> <div class="ant-man"></div> </div>'),a.fl()},partials:{},subs:{}}),function(e){"use strict";function t(){c.addClass("small"),d.on(o+l,function(t){2===t.eventPhase&&(t.stopPropagation(),d.off(o+l),c.removeClass("small"),e.setTimeout(function(){c.removeClass("ant_man")},600))})}function i(e){c.removeClass("ant_man"),s(e).off("load"+l),s(e).off("error"+l)}var a=e.Disney,n=e.Grill,r=e.Whiskers,s=e.jQuery,o=a.Utilities.selectAnimationEnd(),l=".antman",c=s("html"),d=s("body");n.ModuleView.register("ant_man",{startDelay:2e3,initialize:function(){var t=r.partials.ant_man.render();c.addClass("ant_man").append(t),this.sprite_asset=new e.Image,this.sprite_asset.src=["//a.dilcdn.com/a/antman/animation-sprite-02788e25d87e.png"]},render:function(){var n=this;a.top.on("ready",function(){e.setTimeout(function(){n.sprite_asset.complete?t():(s(n.sprite_asset).on("load"+l,t),s(n.sprite_asset).on("error"+l,i))},n.startDelay)})},remove:function(){i(this.sprite_asset),d.off(o+l),s(".ant-man-assets").remove()}})}(this),Whiskers("modules.article",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,1863,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="bound"> <div class="article_container" itemscope="" itemtype="http://schema.org/BlogPosting"> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img data-src="'),i.b(i.v(i.f("asset_image",e,t,0))),i.b('" class="no-src article_mobile_image" />')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,226,305,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("asset_image",e,t,0))),i.b('" class="article_mobile_image" /></noscript>')}),e.pop()),i.b(" "),i.s(i.f("author_name",e,t,1),e,t,0,335,788,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="author_info"> <span class="author_img"> <div class="scaler"></div> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img data-src="'),i.b(i.v(i.f("author_image",e,t,0))),i.b('" class="no-src" />')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,505,556,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("author_image",e,t,0))),i.b('" /></noscript>')}),e.pop()),i.b(' </span> <div class="author"> <p class="posted_by">Posted By</p> <p class="author_name">'),i.b(i.v(i.f("author_name",e,t,0))),i.b('</p> </div> <time class="post_date" datetime="'),i.b(i.v(i.f("schema_date",e,t,0))),i.b('" itemprop="datePublished">'),i.b(i.v(i.f("post_date",e,t,0))),i.b("</time> </div> ")}),e.pop()),i.b(' <div class="article_text"> <div class="header module_header"><h2 class="blog_title title" itemprop="name headline">'),i.b(i.v(i.f("title",e,t,0))),i.b('</h2></div> <div class="article_body rich-text-enabled" itemprop="articleBody"> '),i.b(i.t(i.f("article_text",e,t,0))),i.b(' </div> </div> <div class="author_info_mobile"> <span class="author_img"> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img data-src="'),i.b(i.v(i.f("author_image",e,t,0))),i.b('" class="no-src" />')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,1191,1241,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("author_image",e,t,0))),i.b('"/></noscript>')}),e.pop()),i.b(' </span> <div class="author"> <p class="posted_by">Posted By</p> <p class="author_name">'),i.b(i.v(i.f("author_name",e,t,0))),i.b('</p> </div> <div class="post_date">'),i.b(i.v(i.f("post_date",e,t,0))),i.b('</div> </div> <div class="article_image_container"> <div class="caption_img"> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img data-src="'),i.b(i.v(i.f("asset_image",e,t,0))),i.b('" class="no-src" />')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,1572,1622,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("asset_image",e,t,0))),i.b('" /></noscript>')}),e.pop()),i.b(" "),i.s(i.f("image_caption",e,t,1),e,t,0,1654,1704,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<div class="image_caption">'),i.b(i.v(i.f("image_caption",e,t,0))),i.b("</div>")}),e.pop()),i.b(' </div> <div class="artAd_medRect ad-container"> '),i.b(i.t(i.f("rectangleAd",e,t,0))),i.b(" </div> </div> </div> "),i.b(" "),i.b(i.t(i.f("mobileAd",e,t,0))),i.b(" </div> ")}),e.pop()),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e._,a=t.ModuleView.extend({render:function(){var e=i.extend({},this.options.ads.helpers(this.model.toJSON()),this.model);this.$el.html(this.template.render(e))}});a.register("article",{template:e.Whiskers.modules.article})}(this),Whiskers("modules.article_stream",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class ="bound"> '),a.s(a.f("header_data",e,t,1),e,t,0,37,55,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(" <ul>"),a.s(a.f("data",e,t,1),e,t,0,85,94,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<list1",e,t,""))}),e.pop()),a.b("</ul> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<list1":{name:"list",partials:{},subs:{}}},subs:{}}),Whiskers("partials.article_stream_list",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<li class="article_container"> <div class="image_container"> <a href="'),a.b(a.v(a.f("href",e,t,0))),a.b('"> <div class="aspect placeholder ratio-16x9"> '),a.s(a.f("noscript",e,t,1),e,t,1,0,0,"")||(a.b('<img class="no-src" data-src="'),a.b(a.v(a.f("asset_image",e,t,0))),a.b('"></img>')),a.b(" "),a.s(a.f("noscript",e,t,1),e,t,0,218,272,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("asset_image",e,t,0))),i.b('"></img></noscript>')}),e.pop()),a.b(' </div> </a> </div> <div class="article_text_container"> <div class="header_article"> <a href = "'),a.b(a.v(a.f("href",e,t,0))),a.b('"> <h2>'),a.b(a.v(a.f("title",e,t,0))),a.b('</h2> </a> </div> <p class="articletext">'),a.b(a.v(a.f("article_excerpt",e,t,0))),a.b(' <a href = "'),a.b(a.v(a.f("href",e,t,0))),a.b('">'),a.b(a.v(a.d("translations.continue_reading",e,t,0))),a.b('</a> </p> <div class ="articlefooter"> <div class="author_info"> '),a.s(a.f("noscript",e,t,1),e,t,1,0,0,"")||(a.b('<img class="no-src circle" data-src="'),a.b(a.v(a.f("author_image",e,t,0))),a.b('">')),a.b(" "),a.s(a.f("noscript",e,t,1),e,t,0,681,745,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("author_image",e,t,0))),i.b('" class="circle"></noscript>')}),e.pop()),a.b(' </div> <p class ="postdate">'),a.b(a.v(a.d("translations.posted",e,t,0))),a.b(" "),a.b(a.v(a.f("post_date_diff",e,t,0))),a.b("</p> "),a.b(" </div> </div> </li>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e._,a=e.Whiskers,n=t.ModuleView.extend({required_template_sets:["module_header"],included_components:{list:a.partials.article_stream_list},initialize:function(){var e=this.model.get("translations"),t={continue_reading:"Continue Reading",posted:"Posted"};i.defaults(e,t),i.extend(this,{translations:e})},render:function(){var e=i.extend(this.model,{translations:this.translations});this.$el.html(this.template.render(e,this.ctx_additions()))}});n.register("article_stream",{style_classes:["full-height"],template:a.modules.article_stream})}(this),Whiskers("modules.artist",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,475,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="bound skip-styles"> <div class="container"> <div class="branding"> <img src="'),i.b(i.v(i.f("hero",e,t,0))),i.b('"> </div> <div class="details right'),i.s(i.f("style_options",e,t,1),e,t,0,160,182,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("module_font_color",e,t,0)))}),e.pop()),i.b('" style="background-color: '),i.b(i.v(i.f("bgColor",e,t,0))),i.b(';"> <h1>'),i.b(i.v(i.f("title",e,t,0))),i.b('</h1> <div class="headshot"> <div class="personality-box entity-box"> <div class="aspect ratio-square"> <img src="'),i.b(i.v(i.f("thumb",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> </div> </div> </div> <p class="desc">'),i.b(i.v(i.f("description",e,t,0))),i.b("</p> </div> </div> </div> ")}),e.pop()),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e.Backbone,o=e._,l=t.ModuleView.extend({style_classes:["personality_hero","skip-bottom-border","skip-top-border","skip-styles","full-height","full-width"],render:function(){var e=o.first(this.model.get("data")),t=s.Resize.width()>=a.midHigh,i=o.extend({posterClass:t&&"wide",posterImg:t?e.poster:e.poster_mobile},this.options.ads.helpers(),this.model);this.$el.html(this.template.render(i))},resize:function(){this.render(),this.options.ads.restore()}});l.register("artist",{breakpoints:n,template:r.modules.artist})}(this),Whiskers("modules.catalog",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,3656,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="bound '),i.b(i.v(i.f("type",e,t,0))),i.b('"> '),i.s(i.d("header_data.is_ad",e,t,1),e,t,0,61,116,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<div class="ad-module-notice">'),i.b(i.v(i.d("translations.ad",e,t,0))),i.b("</div>")}),e.pop()),i.b(' <div class="container" data-title="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> <div class="title"> <h1>'),i.b(i.v(i.f("title",e,t,0))),i.b('</h1> <p class="desc"> '),i.b(i.v(i.f("desc",e,t,0))),i.b(" "),i.s(i.f("price",e,t,1),e,t,0,261,297,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<span class="price">'),i.b(i.v(i.f("price",e,t,0))),i.b("</span>")}),e.pop()),i.b(" </p> "),i.s(i.f("watch_message",e,t,1),e,t,0,331,423,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="watch_message"> <div class="watch_message_text">'),i.b(i.v(i.f("watch_message",e,t,0))),i.b("</div> </div> ")}),e.pop()),i.b(" "),i.s(i.f("meta",e,t,1),e,t,0,451,934,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<p class="meta"> '),i.s(i.f("rating",e,t,1),e,t,0,479,551,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="meta-title">'),i.b(i.v(i.d("translations.rated",e,t,0))),i.b(":</span> "),i.b(i.v(i.f("rating",e,t,0))),i.b("<br> ")}),e.pop()),i.b(" "),i.s(i.f("release",e,t,1),e,t,0,575,794,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="meta-title">'),i.s(i.f("reRelease",e,t,1),e,t,0,615,633,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("reReleasedText",e,t,0)))}),e.pop()),i.s(i.f("reRelease",e,t,1),e,t,1,0,0,"")||(i.b(i.v(i.d("translations.released",e,t,0))),i.b(":")),i.b("</span> "),i.s(i.f("reRelease",e,t,1),e,t,1,0,0,"")||i.b(i.v(i.f("release",e,t,0))),i.s(i.f("reRelease",e,t,1),e,t,0,762,775,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("reRelease",e,t,0)))}),e.pop()),i.b("<br> ")}),e.pop()),i.b(" "),i.s(i.f("platform_data",e,t,1),e,t,0,825,911,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="meta-title">'),i.b(i.v(i.d("translations.available_on",e,t,0))),i.b(":</span> "),i.b(i.v(i.f("platform_data",e,t,0))),i.b("<br> ")}),e.pop()),i.b(" </p>")}),e.pop()),i.b(" "),i.b(' <div class="movie-actions-alt"> '),i.s(i.f("is_printable",e,t,1),e,t,0,1040,1144,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a href="'),i.b(i.v(i.f("printable_asset",e,t,0))),i.b('" target="_blank" class="button blue large print">'),i.b(i.v(i.d("translations.print",e,t,0))),i.b("</a>")}),e.pop()),i.b(" "),i.s(i.f("retailerData",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("buttons",e,t,1),e,t,0,1192,1324,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" class="button large '),i.b(i.v(i.f("type",e,t,0))),i.b(" "),i.b(i.v(i.f("button_color",e,t,0))),i.b('"'),i.s(i.f("convert",e,t,1),e,t,0,1270,1297,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-convert="'),i.b(i.v(i.f("convert",e,t,0))),i.b('"')}),e.pop()),i.b(">"),i.b(i.v(i.f("title",e,t,0))),i.b("</a> ")}),e.pop()),i.b(" ")),i.b(" "),i.s(i.f("retailerData",e,t,1),e,t,0,1372,1405,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="retail-link"></div> ')}),e.pop()),i.b(' </div> </div> <div class="poster-container'),i.s(i.f("watch_message",e,t,1),e,t,0,1483,1497,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" watch-padding")}),e.pop()),i.b('"> <div class="poster-inner poster-box"> <div class="poster '),i.s(i.f("isMobile",e,t,1),e,t,0,1588,1596,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("isMobile")}),e.pop()),i.b('"> '),i.s(i.f("is_printable",e,t,1),e,t,0,1629,1675,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a href="'),i.b(i.v(i.f("printable_asset",e,t,0))),i.b('" target="_blank">')}),e.pop()),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img data-src="'),i.b(i.v(i.f("catalogImage",e,t,0))),i.b('" class="no-src" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" width="100%">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,1810,1888,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("catalogImage",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" width="100%"></noscript>')}),e.pop()),i.b(" "),i.s(i.f("is_printable",e,t,1),e,t,0,1919,1923,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("</a>")}),e.pop()),i.b(" "),i.s(i.f("sponsor_banner",e,t,1),e,t,0,1960,2216,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="sponsor-banner no-src" data-src="'),i.b(i.v(i.f("sponsor_banner",e,t,0))),i.b('" title="'),i.b(i.v(i.f("title",e,t,0))),i.b('" width="100%">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,2097,2202,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img class="sponsor-banner" src="'),i.b(i.v(i.f("sponsor_banner",e,t,0))),i.b('" title="'),i.b(i.v(i.f("title",e,t,0))),i.b('" width="100%"></noscript>')}),e.pop()),i.b(" ")}),e.pop()),i.b(" </div> </div> "),i.s(i.f("cds",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("suppress_social",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.b(i.rp("<socialLinkPartial0",e,t,"")),i.b(" ")),i.b(" ")),i.b(" </div> "),i.s(i.f("wide",e,t,1),e,t,1,0,0,"")||(i.b(' <div class="desc-alt"> <p class="desc'),i.s(i.f("watch_message",e,t,1),e,t,0,2405,2419,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" watch-padding")}),e.pop()),i.b('"> '),i.b(i.v(i.f("desc",e,t,0))),i.b(" "),i.s(i.f("price",e,t,1),e,t,0,2459,2496,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<span class="price">$'),i.b(i.v(i.f("price",e,t,0))),i.b("</span>")}),e.pop()),i.b(" </p> "),i.s(i.f("watch_message",e,t,1),e,t,0,2530,2622,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="watch_message"> <div class="watch_message_text">'),i.b(i.v(i.f("watch_message",e,t,0))),i.b("</div> </div> ")}),e.pop()),i.b(" "),i.s(i.f("meta",e,t,1),e,t,0,2650,3133,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<p class="meta"> '),i.s(i.f("rating",e,t,1),e,t,0,2678,2750,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="meta-title">'),i.b(i.v(i.d("translations.rated",e,t,0))),i.b(":</span> "),i.b(i.v(i.f("rating",e,t,0))),i.b("<br> ")}),e.pop()),i.b(" "),i.s(i.f("release",e,t,1),e,t,0,2774,2993,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="meta-title">'),i.s(i.f("reRelease",e,t,1),e,t,0,2814,2832,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("reReleasedText",e,t,0)))}),e.pop()),i.s(i.f("reRelease",e,t,1),e,t,1,0,0,"")||(i.b(i.v(i.d("translations.released",e,t,0))),i.b(":")),i.b("</span> "),i.s(i.f("reRelease",e,t,1),e,t,1,0,0,"")||i.b(i.v(i.f("release",e,t,0))),i.s(i.f("reRelease",e,t,1),e,t,0,2961,2974,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("reRelease",e,t,0)))
}),e.pop()),i.b("<br> ")}),e.pop()),i.b(" "),i.s(i.f("platform_data",e,t,1),e,t,0,3024,3110,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="meta-title">'),i.b(i.v(i.d("translations.available_on",e,t,0))),i.b(":</span> "),i.b(i.v(i.f("platform_data",e,t,0))),i.b("<br> ")}),e.pop()),i.b(" </p>")}),e.pop()),i.b(" </div> ")),i.b(" "),i.b(' <div class="movie-actions"> '),i.s(i.f("is_printable",e,t,1),e,t,0,3252,3356,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a href="'),i.b(i.v(i.f("printable_asset",e,t,0))),i.b('" target="_blank" class="button blue large print">'),i.b(i.v(i.d("translations.print",e,t,0))),i.b("</a>")}),e.pop()),i.b(" "),i.s(i.f("retailerData",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("buttons",e,t,1),e,t,0,3404,3536,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" class="button large '),i.b(i.v(i.f("type",e,t,0))),i.b(" "),i.b(i.v(i.f("button_color",e,t,0))),i.b('"'),i.s(i.f("convert",e,t,1),e,t,0,3482,3509,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-convert="'),i.b(i.v(i.f("convert",e,t,0))),i.b('"')}),e.pop()),i.b(">"),i.b(i.v(i.f("title",e,t,0))),i.b("</a> ")}),e.pop()),i.b(" ")),i.b(" "),i.s(i.f("retailerData",e,t,1),e,t,0,3584,3617,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="retail-link"></div> ')}),e.pop()),i.b(" </div> </div> </div> ")}),e.pop()),a.fl()},partials:{"<socialLinkPartial0":{name:"socialLinkPartial",partials:{},subs:{}}},subs:{}}),Whiskers("shared.productbutton",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="purchase_product"> <a class="button large green '),a.s(a.f("retail_links",e,t,1),e,t,1,0,0,"")||a.b("clear"),a.b('"> '),a.s(a.f("retail_links",e,t,1),e,t,1,0,0,"")||a.b('<div class="arrow-left"></div>'),a.b(" "),a.s(a.f("purchase_cta",e,t,1),e,t,0,184,200,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.v(i.f("purchase_cta",e,t,0)))}),e.pop()),a.b(" "),a.s(a.f("purchase_cta",e,t,1),e,t,1,0,0,"")||(a.b(" "),a.s(a.f("retail_links",e,t,1),e,t,0,253,270,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.v(i.f("pre_order_now",e,t,0)))}),e.pop()),a.b(" "),a.s(a.f("retail_links",e,t,1),e,t,1,0,0,"")||a.b(a.v(a.f("coming_soon",e,t,0))),a.b(" ")),a.b(" "),a.s(a.f("retail_links",e,t,1),e,t,1,0,0,"")||a.b('<div class="arrow-right"></div>'),a.b(' </a> <div class="buy '),a.s(a.f("retail_links",e,t,1),e,t,1,0,0,"")||a.b("no_flyout"),a.b('" data-convert="buy"> <ul> '),a.s(a.f("retail_links",e,t,1),e,t,0,530,737,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li><a href="'),i.b(i.v(i.f("content_url",e,t,0))),i.b('" target="_blank" '),i.s(i.f("age_gate",e,t,1),e,t,0,590,632,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' class="age-gated" data-age="'),i.b(i.v(i.f("age_gate",e,t,0))),i.b('"')}),e.pop()),i.b(' data-retailer="'),i.b(i.v(i.f("title",e,t,0))),i.b('"'),i.s(i.f("ping",e,t,1),e,t,0,680,708,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-ping="'),i.b(i.v(i.d("ping.static",e,t,0))),i.b('"')}),e.pop()),i.b(">"),i.b(i.v(i.f("title",e,t,0))),i.b("</a></li> ")}),e.pop()),a.b(" </ul> </div> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Disney,i=e.Backbone,a=e._,n=e.Whiskers;t.ProductButtonView=i.View.extend({_flyoutVisible:!1,flyoutVisible:function(e){return"undefined"==typeof e?this._flyoutVisible:(this._flyoutVisible=e,void this.renderFlyout())},initialize:function(e){this.translations=e.translations,this.age_gate=e.age_gate,this.render()},render:function(){var e=this,t=a.extend(e.model,e.translations);t.age_gate=this.age_gate,this.$el.html(n.shared.productbutton.render(t)),this.$el.click(function(){e.flyoutVisible(!e.flyoutVisible()),e.trigger("change",e)})},renderFlyout:function(){var e=this.$(".buy");this.flyoutVisible()?e.addClass("active"):e.removeClass("active")}})}(this),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e._,o=t.BunView.extend({style_classes:["catalog"],breakpoints:n,template:r.modules.catalog,render:function(){var t,a=this,n=a.model.data.first(),o=a.model.get("data")[0],l=a.model.get("translations"),c=new Date,d=c.getUTCDate(),u=c.getUTCMonth()+1,h=c.getUTCFullYear(),f=!1;10>d&&(d="0"+d),10>u&&(u="0"+u),c=h+"-"+u+"-"+d;var p=(o.re_release_date<=c?l.re_released:l.re_releasing)+":";if("Game"===o.type&&(t=o.platforms,t&&t.length>0&&(t=t.join(", "))),(t||o.rating||o.release)&&(f=!0),o.href&&-1===o.href.indexOf(e.location.hostname)){var m=/[^\/]+?:\/\/[^/]+/.exec(e.location.href)+o.href;n.set("href",m)}var g=s.extend({platform_data:t,meta:f,reReleasedText:p,linksInverted:!0,cds:!!this.options.cds},a.options.ads.helpers(),a.model);a.$el.html(a.template.render(g,{socialLinkPartial:r.partials.social_btn}));var v=n.get("retailerData");v&&v.retail_links.length&&new i.ProductButtonView({el:a.$(".retail-link"),model:v,translations:l})},resize:function(){this.options.ads.restore()}});o.register("catalog"),i.CatalogFloatView=o.register("catalog_float",{initialize:function(){var e=this.options.el;this.render(),e&&(e.addClass(this.className),e.find(".bound").addClass("noAd"))}})}(this),Whiskers("modules.character_bio",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("entity_type",e,t,0))),a.b('"> '),a.s(a.f("header_data",e,t,1),e,t,0,52,70,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="character-bio-list"> <ul> '),a.s(a.f("data",e,t,1),e,t,0,134,181,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li class="item"> '),i.b(i.rp("<entity_container1",e,t,"")),i.b(" </li> ")}),e.pop()),a.b(" </ul> </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<entity_container1":{name:"entity_container",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e._,n=t.ModuleView.extend({style_classes:["list_module_featured"],required_template_sets:["module_header","entities"],template:i.modules.character_bio,initialize:function(){var t=this.model.data.models,i=e.location,n=i.protocol+"//"+i.hostname+i.pathname;a.each(t,function(e){e.set("skip_hover",!0);var t=e.get("href");(t===n||"#"===t)&&e.set("href",null)})},render:function(){var e=a.extend({},this.model);this.$el.html(this.template.render(e,this.ctx_additions()))}});n.register("character_bio",{}),n.register("character_bio_left_align",{})}(this),Whiskers("modules.contest",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,197,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="bound'),i.s(i.f("noAd",e,t,1),e,t,0,36,41,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" noAd")}),e.pop()),i.b('"> <div class="container"></div> '),i.s(i.f("data",e,t,1),e,t,0,92,180,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noAd",e,t,1),e,t,1,0,0,"")||(i.b(' <div class="ad-container"> '),i.b(i.t(i.f("rectangleAd",e,t,0))),i.b(" "),i.b(i.t(i.f("mobileAd",e,t,0))),i.b(" </div> ")),i.b(" ")}),e.pop()),i.b(" </div> ")}),e.pop()),a.fl()},partials:{},subs:{}}),Whiskers("entities.contest",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="contest_heading'),a.s(a.f("logo",e,t,1),e,t,0,36,40,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" img")}),e.pop()),a.b('"> <div class="module_header"> <h2 class="'),a.s(a.f("logo",e,t,1),e,t,0,100,128,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("hide_ad",e,t,1),e,t,1,0,0,"")||i.b("noAd")}),e.pop()),a.b('">'),a.b(a.v(a.f("title",e,t,0))),a.b("</h2> </div> "),a.s(a.f("logo",e,t,1),e,t,0,170,240,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <img class="'),i.s(i.f("logo",e,t,1),e,t,0,192,214,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.s(i.f("noAd",e,t,1),e,t,0,201,205,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("noAd")}),e.pop())}),e.pop()),i.b('"src="'),i.b(i.v(i.f("logo",e,t,0))),i.b('"> ')}),e.pop()),a.b(' <div class="contestant_container'),a.s(a.f("logo",e,t,1),e,t,1,0,0,"")||a.s(a.f("noAd",e,t,1),e,t,0,300,305,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" noAd")}),e.pop()),a.b(" "),a.s(a.f("logo",e,t,1),e,t,0,333,366,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("noAd",e,t,1),e,t,0,342,357,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" noAd hasHeader")}),e.pop())}),e.pop()),a.b('"> <ul class="contestants'),a.s(a.f("single_option",e,t,1),e,t,0,418,425,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" single")}),e.pop()),a.b(" "),a.s(a.f("logo",e,t,1),e,t,1,0,0,"")||a.s(a.f("noAd",e,t,1),e,t,0,462,502,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" noAd"),i.s(i.f("showFour",e,t,1),e,t,0,480,489,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" showFour")}),e.pop())}),e.pop()),a.b(" "),a.s(a.f("logo",e,t,1),e,t,0,530,563,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("noAd",e,t,1),e,t,0,539,554,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" noAd hasHeader")}),e.pop())}),e.pop()),a.b('"> '),a.s(a.f("contestants",e,t,1),e,t,0,591,1804,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li class="option '),i.b(i.v(i.f("type",e,t,0))),i.s(i.f("clickable",e,t,1),e,t,0,632,642,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" clickable")}),e.pop()),i.s(i.f("results",e,t,1),e,t,1,0,0,"")||i.s(i.f("disabled",e,t,1),e,t,0,681,690,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" disabled")}),e.pop()),i.s(i.f("results",e,t,1),e,t,0,727,734,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" active")}),e.pop()),i.b('" data-id="'),i.b(i.v(i.f("id",e,t,0))),i.b('"> '),i.s(i.f("results",e,t,1),e,t,1,0,0,"")||(i.b(' <div class="actions checkboxes"> '),i.s(i.f("vote_button",e,t,1),e,t,0,828,1006,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="vote checkbox'),i.s(i.f("votes",e,t,1),e,t,0,865,873,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" checked")}),e.pop()),i.s(i.f("disabled",e,t,1),e,t,0,896,905,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" disabled")}),e.pop()),i.s(i.f("loading",e,t,1),e,t,0,930,938,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" loading")}),e.pop()),i.b('" title="'),i.b(i.v(i.f("text",e,t,0))),i.b('"> <span class="check"></span> </span> ')}),e.pop()),i.b(" "),i.s(i.f("checkboxes",e,t,1),e,t,0,1038,1204,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="checkbox'),i.s(i.f("checked",e,t,1),e,t,0,1072,1080,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" checked")}),e.pop()),i.s(i.f("disabled",e,t,1),e,t,0,1105,1114,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" disabled")}),e.pop()),i.b('" data-index="'),i.b(i.v(i.f("index",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("text",e,t,0))),i.b('"> <span class="check"></span> </span> ')}),e.pop()),i.b(" </div> ")),i.b(" "),i.s(i.f("results",e,t,1),e,t,0,1252,1549,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="actions results"> '),i.s(i.f("image_poll",e,t,1),e,t,0,1298,1386,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("results",e,t,1),e,t,0,1311,1373,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="bar" style="height:'),i.b(i.v(i.f("percent_formatted",e,t,0))),i.b('"></div> ')}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("show_percentage",e,t,1),e,t,0,1422,1452,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <p>"),i.b(i.v(i.f("percent_formatted",e,t,0))),i.b("</p> ")}),e.pop()),i.b(" "),i.s(i.f("show_percentage",e,t,1),e,t,1,0,0,"")||(i.b(" <p>"),i.b(i.v(i.f("total_formatted",e,t,0))),i.b("</p> ")),i.b(" </div> ")}),e.pop()),i.b(' <div class="contest-item"> '),i.s(i.f("image_poll",e,t,1),e,t,0,1604,1641,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <img src="'),i.b(i.v(i.f("logo",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("text",e,t,0))),i.b('"> ')}),e.pop()),i.b(" "),i.s(i.f("image_poll",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("results",e,t,1),e,t,0,1685,1746,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="bar" style="width:'),i.b(i.v(i.f("percent_formatted",e,t,0))),i.b('"></div> ')}),e.pop()),i.b(" ")),i.b(" <p>"),i.b(i.v(i.f("text",e,t,0))),i.b("</p> </div> </li> ")}),e.pop()),a.b(" </ul> "),a.s(a.f("message",e,t,1),e,t,0,1839,1993,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="message '),i.b(i.v(i.f("type",e,t,0))),i.s(i.f("single_option",e,t,1),e,t,0,1886,1893,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" single")}),e.pop()),i.b('"> <p>'),i.b(i.v(i.f("text",e,t,0))),i.b('<span class="again"> '),i.b(i.v(i.d("translations.vote_again",e,t,0))),i.b("?</span></p> </div> ")}),e.pop()),a.b(" "),a.s(a.f("master_button",e,t,1),e,t,0,2024,2254,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("complete",e,t,1),e,t,1,0,0,"")||(i.b(' <div class="master_button '),i.s(i.f("logo",e,t,1),e,t,0,2074,2107,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.s(i.f("noAd",e,t,1),e,t,0,2083,2098,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" noAd hasHeader")}),e.pop())}),e.pop()),i.b('"> <div class="button large blue'),i.s(i.f("disabled",e,t,1),e,t,0,2161,2170,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" disabled")}),e.pop()),i.s(i.f("loading",e,t,1),e,t,0,2195,2203,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" loading")}),e.pop()),i.b('">'),i.b(i.v(i.f("text",e,t,0))),i.b(" </div> </div> ")),i.b(" ")}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";function t(e,t){arguments.length<2&&(t=e>>>0,e=a);var i=l.Deferred();return d(function(){i.resolve(e)},t),i.promise()}function i(e){return String(e).replace(/\b(\d+)((\.\d+)*)\b/g,function(e,t,i){return(t.charAt(0)>0&&!(i||".").lastIndexOf(".")?t.replace(/(\d)(?=(\d{3})+$)/g,"$1,"):t)+i})}var a,n=e.Grill,r=e.Whiskers,s=e.Backbone,o=e.Tracker,l=e.jQuery,c=e._,d=e.setTimeout,u=function(e,t){if(!e)throw new Error(t)},h=s.View.extend({className:"",template:r.entities.contest,events:{"click .master_button .button":"_handleMasterClick","click span.checkbox":"_handleCheckboxClick","click div.contest-item":"_handleTextOrImageClick","click span.vote":"_handleSingleVoteClick","click .again":"_handleVoteAgainClick"},initialize:function(){c.bindAll(this),this._initializeContest()},render:function(){var e=this._generateRenderContext();this.$el.html(this.template.render(e))},_displayAlert:function(){},_showVoteConfirmation:function(){},_generateRenderContext:function(){var e={},t=this.model.get("translations"),a=this._contest?this._contest.state:"pre",n=1;if(e.title=this.model.get("title"),e.logo=this.model.get("logo"),e.image_poll=this.model.get("image_poll"),e.noAd=this.model.get("noAd"),e.showFour=this.model.get("showFour"),e.one_click=this.model.get("one_click"),e.show_percentage=this.model.get("show_percentage"),e.translations=t,e.contestants=[],c.each(this.model.get("contestants"),function(r){var s={};s.id=r.id,s.title=r.title,s.description=r.description,s.text=r.text,s.logo=r.logo,s.type=e.image_poll?"img":"text",s.checkboxes=[],s.vote_button=null;var o=this._userVotes?this._userVotes.votes[s.id]:null;if(e.one_click){var l="voting"!==a||!o||o.pending||o.available_votes<1,d=o&&o.total_period_votes?o.total_period_votes:0,u=o&&o.pending?t.saving:this.model.get("vote_button_text");s.vote_button={disabled:l,text:u,votes:d,loading:o&&o.pending}}else for(var h=0;n>h;++h)if(o){var f=o.total_period_votes,p=o.available_votes,m=o.pending_votes,g=o.pending?!0:!1,v=f+m>h,b=!g&&h>=f&&f+m+p>h;s.checkboxes.push({index:h+1,checked:v,disabled:!b})}else s.checkboxes.push({index:h+1,checked:!1,disabled:!0});"voting"!==a&&"closed"!==a&&"finished"!==a||!this._userVotes||0!==this._userVotes.max_available_votes||this._results&&(s.results=this._results[s.id],s.results&&(s.results.percent_formatted=void 0!==s.results.percent?String(Math.round(100*s.results.percent))+"%":"0%",s.results.total_formatted=void 0!==s.results.total?i(s.results.total):"0")),s.checkboxes&&s.checkboxes.length>0&&(s.disabled=c.every(s.checkboxes,function(e){return e.disabled===!0}),s.clickable=!s.disabled),s.vote_button&&(s.clickable=!s.vote_button.disabled),e.contestants.push(s)},this),e.single_option=1===e.contestants.length,"pre"===a?e.message={type:"pre",text:this.model.get("pre_open_text")}:"voting"===a?(e.message={type:"voting",text:null},this._userVotes&&(this._userVotes.max_available_votes>0||this._userVotes.total_period_votes>0&&(e.message.type="voted",e.message.text=this.model.get("voted_text")))):"closed"===a?e.message={type:"closed",text:this.model.get("closed_text")}:"finished"===a&&(e.message={type:"finished",text:this.model.get("finished_text")}),e.message&&!e.message.text&&(e.message=null),!e.one_click&&"voting"===a){var r=e.master_button={disabled:!0,loading:!1,text:this.model.get("vote_button_text"),complete:!1};this._userVotes&&(this._userVotes.pending?(r.loading=!0,r.text=t.saving):this._userVotes.max_available_votes>0?r.disabled=!1:this._userVotes.total_period_votes>0&&(r.complete=!0))}return e},_handleMasterClick:function(e){var t=l(e.currentTarget);return t.hasClass("disabled")?void(this.model.get("requires_registration")&&!this._currentUid):(this._registerVotes(),this._trackLink(null,t.text()),void e.preventDefault())},_handleTextOrImageClick:function(e){var t=l(e.currentTarget);if(this.model.get("one_click"))this._handleSingleVoteClick(e);else{var i=t.closest(".option");if(i.length){if(i.hasClass("disabled"))return void e.preventDefault();var a=i.data("id");if(this._userVotes&&this._userVotes.votes[a]){var n=this._userVotes.votes[a];0===n.pending_votes?this._setCandidatePendingVotes(a,n.available_votes):this._setCandidatePendingVotes(a,0),this.render()}this._trackLink(a)}e.preventDefault()}},_handleCheckboxClick:function(e){if(!this.model.get("one_click")){var t=l(e.currentTarget),i=t.closest(".option"),a=i.find(".checkbox"),n=a.not(".disabled"),r=a.filter(".disabled.checked"),s=0;if(t.hasClass("checkbox")){if(t.hasClass("disabled"))return;s=t.data("index"),t.hasClass("checked")&&!t.next().hasClass("checked")&&--s,s-=r.length}else s=n.last().hasClass("checked")?0:r.length-n.length;var o=i.data("id");this._setCandidatePendingVotes(o,s),this.render(),this._trackLink(o),e.preventDefault()}},_handleSingleVoteClick:function(e){var t=l(e.currentTarget),i=t.closest(".option");if(t.hasClass("disabled"))return this.model.get("requires_registration")&&null===this._currentUid,void e.preventDefault();var a=i.data("id");this._registerVote(a),e.preventDefault()},_handleVoteAgainClick:function(){this.render()},_trackLink:function(e,t){if(e||t){var i=this.options,a=["contest","mod"+i.moduleView.index,"item"+i.index];if(e){var n=this.model.get("contestants"),r=c.find(n,function(t){return t.id===e}),s=c.indexOf(n,r);t=t||r.text||r.title,a.push("poll"+s)}else a.push("button");var l=a.join("/"),d=l+"/"+t.replace(/[^a-z0-9 ]/gi,"").replace(/\s+/g,"-");o.link({linkName:d,linkPosition:l})}},_initializeContest:function(){return this._userVotes=null,this.model.get("requires_registration")&&null===this._currentUid?void this.render():void this._loadContestInfo().then(this._handleLoadContestInfoSuccess,this._handleLoadContestInfoFailed).then(this.render)},_handleLoadContestInfoSuccess:function(e){var t=e.results,i=e.user,a=e.contest;if(!i)throw new Error("Contest Info is missing user field");this._storageSaveContestInfo({results:t,user:i}),this._userVotes=this._inflateUserVotes(i),this._results=this._inflateResults(t),this._contest=a},_handleLoadContestInfoFailed:function(){},_handleSubmitVotesSuccess:function(e){var t=this._storageGetContestInfo();for(var i in this._userVotes.votes)this._userVotes.votes.hasOwnProperty(i)&&(this._setCandidatePending(i,!1),this._commitCandidatePendingVotes(i,t?t.user:null));this._storageSaveContestInfo(t),this._results=this._inflateResults(e.results,this._userVotes),this.render(),this._showVoteConfirmation(),this._beginVoteAgainCountdown()},_handleSubmitVotesError:function(){for(var e in this._userVotes.votes)this._userVotes.votes.hasOwnProperty(e)&&this._setCandidatePending(e,!1);this.render(),this._displayAlert("Error submitting votes...")},_handleSubmitVoteSuccess:function(e){var t=e.candidate_id,i=this._storageGetContestInfo();this._setCandidatePending(t,!1),this._commitCandidatePendingVotes(t,i?i.user:null),this._storageSaveContestInfo(i),this._results=this._inflateResults(e.results,this._userVotes),this.render(),this._showVoteConfirmation(t),this._beginVoteAgainCountdown()},_handleSubmitVoteError:function(e){var t=e.candidate_id;this._setCandidatePendingVotes(t,0),this._setCandidatePending(t,!1),this.render(),this._displayAlert("Error submitting vote, please try again.")},_loadContestInfo:function(){var e;return e=this._storageGetContestInfo(),e?l.when(e):this._fetchContestInfo()},_fetchContestInfo:function(){var e=this.model.get("cws_url")+"/voting/tenants/"+encodeURIComponent(this.model.get("cws_tenant"))+"/contests/"+encodeURIComponent(this.model.get("contest_id"));return l.ajax({type:"get",context:this,dataType:"json",cache:!1,url:e,xhrFields:{withCredentials:!0}})},_submitVotes:function(e){var i=this.model.get("cws_url")+"/voting/tenants/"+encodeURIComponent(this.model.get("cws_tenant"))+"/contests/"+encodeURIComponent(this.model.get("contest_id"))+"/vote",a=(new Date).valueOf(),n=function(e){var i=(new Date).valueOf(),n=i-a-0;return 0>n?t(e,-1*n):e};return l.ajax({type:"post",context:this,dataType:"json",url:i,data:{votes:e},xhrFields:{withCredentials:!0}}).then(n)},_beginVoteAgainCountdown:function(){"voting"===this._contest.state&&this._userVotes.max_available_votes<=0&&this._contest.time_rules&&this._contest.time_rules.period>=0&&(this._activeVoteAgainTimer=d(this._handleVoteAgainTimeout,1e3*this._contest.time_rules.period))},_handleVoteAgainTimeout:function(){var e=this;this._loadContestInfo().then(this._handleLoadContestInfoSuccess,this._handleLoadContestInfoFailed).then(function(){this._userVotes.max_available_votes>0&&e.$(".again").fadeIn(500)})},_registerVote:function(e){var t=this._userVotes;if(!t)return!1;var i=t.votes[e];if(!i)return!1;if(i.pending_votes)return!1;var a=this._setCandidatePendingVotes(e,1);if(a===!1)return!1;this._setCandidatePending(e,!0);var n=[String(e)];return this.render(),this._submitVotes(n).then(function(t){return t.candidate_id=e,t},function(t){return{candidate_id:e,xhr:t}}).then(this._handleSubmitVoteSuccess,this._handleSubmitVoteError)},_registerVotes:function(){if(!this._userVotes)return!1;if(!this._userVotes.pending_votes)return this._displayAlert(),!1;this._displayAlert("");var e=[];for(var t in this._userVotes.votes)if(this._userVotes.votes.hasOwnProperty(t)){var i=this._userVotes.votes[t];this._setCandidatePending(t,!0);for(var a=0;a<i.pending_votes;++a)e.push(String(t))}return this.render(),this._submitVotes(e).then(this._handleSubmitVotesSuccess,this._handleSubmitVotesError)},_inflateUserVotes:function(e){e.pending_votes=0,e.max_available_votes=e.available_votes,e.pending=!1;for(var t in e.votes)if(e.votes.hasOwnProperty(t)){var i=e.votes[t];i.max_available_votes=i.available_votes,i.pending_votes=0,i.pending=!1}return e},_inflateResults:function(e,t){if(!e)return null;var i=0,a=0,n={};for(var r in this._userVotes.votes)if(this._userVotes.votes.hasOwnProperty(r)){var s=e[r]||0;if(t&&t.votes){var o=t.votes[r]||0;o&&(s+=o.total_period_votes)}i+=s,n[r]={total:s},s>a&&(a=s)}if(i>0)for(var l in n)if(n.hasOwnProperty(l)){var c=n[l];c.winner=a===c.total,c.percent=c.total/i}return n},_setCandidatePendingVotes:function(e,t){var i=this._userVotes;if(!i)return!1;var a=i.votes[e];if(!a)return!1;var n=t-a.pending_votes;if(n>a.available_votes)return!1;a.pending_votes=t,i.pending_votes+=n,i.available_votes-=n;for(var r in i.votes)i.votes.hasOwnProperty(r)&&(a=i.votes[r],a.available_votes=Math.min(i.available_votes,a.max_available_votes-a.pending_votes));return!0},_commitCandidatePendingVotes:function(e,t){var i,a=this._userVotes,n=a.votes[e];a.total_votes+=n.pending_votes,a.total_period_votes+=n.pending_votes,a.max_available_votes-=n.pending_votes,a.pending_votes-=n.pending_votes,t&&(t.total_votes=a.total_votes,t.total_period_votes=a.total_period_votes,t.available_votes=a.max_available_votes),n.total_votes+=n.pending_votes,n.total_period_votes+=n.pending_votes,n.max_available_votes-=n.pending_votes,n.pending_votes=0,t&&(i=t.votes[e],i.total_votes=n.total_votes,i.total_period_votes=n.total_period_votes);for(e in a.votes)a.votes.hasOwnProperty(e)&&(n=a.votes[e],n.max_available_votes=Math.min(a.max_available_votes,n.max_available_votes),u(n.max_available_votes>=n.available_votes,"available_votes is out of sync"),t&&(i=t.votes[e],i.available_votes=n.max_available_votes))},_setCandidatePending:function(e,t){var i=this._userVotes,a=i.votes[e];i.pending=!1,a.pending=t;for(e in i.votes)if(i.votes.hasOwnProperty(e)&&(a=i.votes[e],a.pending)){i.pending=!0;break}return i.pending},_storageGetContestInfo:function(){return null},_storageSaveContestInfo:function(){return null}}),f=n.ModuleView.extend({className:"module contest",template:r.modules.contest,initialize:function(){this.cds=!!this.options.cds,this.contest_views=[],this.index=this.model.collection.indexOf(this.model),this.model.data.each(function(e,t){this.contest_views.push(new h({model:e,index:t,moduleView:this}))},this)},render:function(){var e=c.extend({noAd:!!this.options.cds},this.options.ads.helpers(this.model.toJSON()),this.model);this.$el.html(this.template.render(e,{}));var t=this.$el.find(".container");c.each(this.contest_views,function(e){e.render(),t.append(e.$el)},this)},resize:function(){this.cds||this.options.ads.restore(),this.render(),this.ready()}});f.register("contest")}(this),Whiskers("modules.credits",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> '),a.s(a.f("noAd",e,t,1),e,t,1,0,0,"")||(a.b(" "),a.b(a.t(a.f("rectangleAd",e,t,0))),a.b(" "),a.b(a.t(a.f("mobileAd",e,t,0))),a.b(" ")),a.b(' <div class="content container"> '),a.s(a.f("header_data",e,t,1),e,t,0,121,139,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="credits-list"> <div class="role_contain"> <div class="credit_contain"> '),a.s(a.f("roles",e,t,1),e,t,0,249,534,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="role_group"> <h3 class="accent-color">'),i.b(i.v(i.f("role",e,t,0))),i.b('</h3> <div class="cast_list"> '),i.s(i.f("cast",e,t,1),e,t,0,347,510,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="cast"> <span class="talent">'),i.b(i.v(i.f("person",e,t,0))),i.b('</span> <span class="character '),i.b(i.v(i.f("role",e,t,0))),i.b('"> '),i.s(i.f("title",e,t,1),e,t,0,448,457,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("title",e,t,0)))}),e.pop()),i.b(" "),i.s(i.f("title",e,t,1),e,t,1,0,0,"")||i.b(i.v(i.f("role",e,t,0))),i.b(" </span> </p> ")}),e.pop()),i.b(" </div> </div> ")}),e.pop()),a.b(" </div> </div> </div> </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e.Backbone,o=e._,l=t.ModuleView.extend({breakpoints:n,template:r.modules.credits,required_template_sets:["module_header"],getRoles:function(){var e={};return o.each(this.model.get("data"),function(t){var i=t.role;i&&(e[i]||(e[i]={role:i,cast:[]}),e[i].cast.push({person:t.person,title:t.title||i}))}),o.values(e)},render:function(){var e=s.Resize.width()>=a.midHigh,t=this.getRoles(),i=o.extend({roles:t,creditsClass:e&&"wide",noAd:"credits_no_ad"===this.model.get("view")},this.options.ads.helpers(this.model.toJSON()),this.model);this.$el.html(this.template.render(i,this.ctx_additions()))},resize:function(){this.render(),this.options.ads.restore()}});l.register("credits",{}),l.register("credits_no_ad",{})}(this),Whiskers("modules.dcom_filters",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.s(a.f("singleRow",e,t,1),e,t,0,56,67,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" single-row")}),e.pop()),a.b('"> '),a.s(a.f("header_data",e,t,1),e,t,0,100,118,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div id="stream_items"> '),a.b(a.t(a.f("list",e,t,0))),a.b(' </div> <div class="show_more_container"> <div class="show_more blue button large" role="button" onclick=""> <span class="label">'),a.b(a.v(a.d("translations.show_more",e,t,0))),a.b('</span> <span class="spinner"></span> </div> </div> </div>'),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),Whiskers("modules.col",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<span class="col item '),a.s(a.f("lastRow",e,t,1),e,t,0,34,42,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("last-row")}),e.pop()),a.b('">'),a.b(a.rp("<entity_container0",e,t,"")),a.b('<span class="arrow"></span></span>'),a.fl()},partials:{"<entity_container0":{name:"entity_container",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Disney,i=e.Grill,a=e.Backbone,n=e.Whiskers,r=e.Math,s=e._,o=e.jQuery,l=t.Style.breakpoints,c=s.values(l);i.GridModuleBaseView.register("dcom_filters",{style_classes:["stream-view","filters-view"],required_template_sets:["module_header"],template:n.modules.dcom_filters,breakpoints:c.join(" "),page:1,events:{"click .show_more":function(e){var t=this,i=t.list.collection,a=++t.page*t.rpp;e.preventDefault(),i.next(),i.ensure(a).then(function(){t.filterCache[t.activeFilter]={models:i.models,count:i.count},t.fit(),t.updateUI()})},"click .filters a.filter":function(e){var t=this;e.preventDefault(),t.$(".filters a.filter").toggleClass("active");var i=t.$(".filter_list").height()+44;t.$(".filter_drawer").hasClass("active")?t.$(".filter_drawer").css("height","0").removeClass("active"):t.$(".filter_drawer").css("height",i).addClass("active")}},initialize:function(){var t,r=this,o=r.model,l=o.get("filters");if(l&&l.length>0){var c=l[0];if(s.extend(r,{filters:l,filterRoot:"/_grill/filter"+e.location.pathname,activeFilter:c.title,filterCache:{}}),r.entity_type=c.items.data[0].type.toLowerCase(),t=new a.LazyFilterCollection(o.data.models,{min:40}),t.baseUrl=r.filterRoot,t.nextFilter=c.items.next,t.count=c.items.count_estimate,r.filterCache[c.title]={models:o.data.models,count:t.count},t.remaining()>0&&t.nextFilter){var d=t.nextFilter.split("offset=")[1];r.rpp=Number(d)}else r.rpp=t.count}this.list=new i.ListView({collection:t,template:{render:function(e){return n.entities.item.render(e,r.global_components.entities)}}}),this.list.collection.on("loading",function(e,t){r.updateButton(t)})},render:function(){var e=this,i=e.list,a=i.collection.remaining()>0,n=e.model.data,r=s.extend({entity_type:this.entity_type,list:t.placeHtml(i),hasMore:a,singleRow:n.count<=this.cols()},this.model);this.$el.html(e.template.render(r,this.ctx_additions())),a?this.$(".show_more_container").show():this.$(".show_more_container").hide(),t.placeSwap(this,i),this.updateButton(!1)},ready:function(){this.createUI(),this.$el.loadLazyImages()},createUI:function(){var e=this,t=e.model.get("filters");if(t&&t.length){var i=this.$(".filter_list"),a=this.$(".mobile_filter_list"),n=this.$(".filter-label");n.text(t[0].title),o.each(t,function(e,t){var n=t.items.next?t.items.next:"?filter="+encodeURIComponent(t.title);i.append('<a href="" data-filter-next="'+n+'" data-filter="'+t.title+'"><span>'+t.title+"</span></a>"),a.append('<option value="'+n+'" data-filter="'+t.title+'">'+t.title+"</option>")}),this.$(".filter_drawer a").click(function(t){t.preventDefault(),e.$(".filter_drawer a").removeClass("active"),o(this).addClass("active"),e.$(".filter_drawer").css("height","0").removeClass("active"),e.$(".filters a.filter").removeClass("active"),e.$(".filters a.filter span").replaceWith("<span>"+o(this).data("filter")+"</span>"),e.$(".filter_mobile span").replaceWith("<span>"+o(this).data("filter")+"</span>"),e.hideStreamItems()}),this.$(".mobile_filter_list").change(function(){e.$(".mobile_filter_list option:selected").each(function(){e.$(".filters a.filter span").replaceWith("<span>"+o(this).data("filter")+"</span>"),e.$(".filter_mobile span").replaceWith("<span>"+o(this).data("filter")+"</span>"),e.$(".mobile_filter_list").blur(),e.hideStreamItems()})}),i.css("display","")}this.resize()},hideStreamItems:function(){var t=this,i=this.$("#stream_items ul"),a=this.$("#stream_items"),n=i.outerHeight(),r=o(e).selectTransitionEnd()+".stream_items";i.css("height",n).addClass("hide"),a.addClass("load"),o.support.css3("transition")?i.on(r,function(e){this===e.target&&(t.fetch(),i.off(r))}):t.fetch()},fetch:function(){var e=this,t=e.list.collection,i=this.$(".filter_drawer a.active").data("filter"),a=this.$(".filter_drawer a.active").data("filter-next");if(e.activeFilter=i,e.page=1,e.rpp=40,t.count=e.rpp,t.reset(),t.nextFilter=a,t.next(),e.filterCache[i]){var n=e.filterCache[i];return o.when().then(function(){t.reset(n.models),t.count=n.count,e.updateUI()})}var r=e.page*e.rpp;t.ensure(r).then(function(){e.filterCache[e.activeFilter]={models:t.models,count:t.count},e.updateUI()})},updateButton:function(e){var t=this.$el,i=this.model.data;t.toggleClass("loading",e),t.toggleClass("has-more",i.remaining()>0)},resize:function(){var e=this.cols(),t=e>1?"grid-layout":"list-layout";
this.page=r.floor(this.model.data.length/this.rows()/e)||1,this.list.$el.attr("class","col-container cols-"+e+" "+t),this.fit()},fit:function(){var e=this.list.collection.count,t=this.page*this.cols()*this.rows();this.list.collection.remaining()>0?e>t?(this.list.$el.children().show().slice(t).hide(),this.$(".col").removeClass("last-row"),this.list.$el.children().slice(t-this.cols()).addClass("last-row")):this.list.$el.children().show():(this.list.$el.children().show(),this.$(".col").removeClass("last-row"))},updateUI:function(){var e=this,t=e.list.collection;e.$("#stream_items").removeClass("load"),e.$("#stream_items ul").css("height","auto").removeClass("hide"),e.$el.loadLazyImages(),t.remaining()<=0?e.$(".show_more_container").hide():e.$(".show_more_container").show()}})}(this),Whiskers("modules.disclaimer",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <div class="links"> '),a.s(a.f("data",e,t,1),e,t,0,49,125,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" class="button blue small" target="_blank">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a> ")}),e.pop()),a.b(" </div> "),a.s(a.f("desc",e,t,1),e,t,0,151,186,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<p class="description">'),i.b(i.v(i.f("desc",e,t,0))),i.b("</p>")}),e.pop()),a.b(" </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e._,a=e.Whiskers;t.ModuleView.register("disclaimer",{template:a.modules.disclaimer,render:function(){var e=i.extend({},this.model);this.$el.html(this.template.render(e))}})}(this),function(e){"use strict";var t=e.Grill.BunView,i=e.jQuery,a=e._,n=e.Math,r=function(){var t=i(e),a=t.height(),r=t.width(),s=n.min(1.3333,n.max(a/r,.5625));a=n.round(r*s),a!==this.h&&(this.h=a,this.$("iframe.stage").height(a))};t.register("dressup",{initialize:function(){i(e).on("resize."+this.cid,a.throttle(a.bind(r,this),100))},render:function(){var t=i("<iframe/>",{"class":"stage",src:"/apps/dressup/princess"+e.location.search,frameborder:0,scrolling:"no"});this.$el.empty().append(t)},ready:r,remove:function(){t.prototype.remove.call(this),i(e).off("resize."+this.cid)}}),i(e).on("touchstart",function(){})}(this),Whiskers("modules.empty_example",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b(' <div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.b('"> '),a.b(" "),a.b(" "),a.s(a.f("header_data",e,t,1),e,t,0,381,399,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(" "),a.b(" "),a.s(a.f("displayImages",e,t,1),e,t,0,631,880,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="entity-box"><div class="aspect"><img src="'),i.b(i.v(i.f("starterKitteh",e,t,0))),i.b('"></div></div> '),i.b(" ")}),e.pop()),a.b(" "),a.b(' <div class="text-container"> <h2 class="hello_world skip-text-styles">'),a.b(a.v(a.d("translations.hello_world",e,t,0))),a.b("</h2> "),a.b(" "),a.b(" "),a.s(a.f("displayImages",e,t,1),e,t,0,1515,1899,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(' <div class="surprise large button '),i.b(i.v(i.f("buttonColor",e,t,0))),i.b('">'),i.b(i.v(i.d("translations.surprise_me",e,t,0))),i.b("</div> "),i.b(" ")}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),function(e){"use strict";function t(e,t){return l.floor(l.random()*(t-e)+e)}function i(e,i){var a=e,n=e>=u.max?.32*e:e>=u.midHigh?.36*e:e>=u.midLow?.44*e:.5*e,r=t(a,a+20),s=t(n,n+20),o=i+r+"/"+s;return o}function a(e,t){t.find(".aspect").html(e),t.removeClass("loading")}var n=e.Grill,r=e.Disney,s=e.Whiskers,o=e.Backbone,l=e.Math,c=e._,d=e.jQuery,u=r.Style.breakpoints,h=c.values(u),f=n.ModuleView.extend({style_classes:["empty-view"],required_template_sets:["module_header"],template:s.modules.empty_example,breakpoints:h.join(" "),initialize:function(){var e=this.model.get("translations"),t={hello_world:"Oh haiiiiii world!",surprise_me:"Surprise Me!"};c.defaults(e,t),c.extend(this,{translations:e})},render:function(){var e=c.extend(this.model,{translations:this.translations});this.extendContext&&c.extend(e,this.extendContext()),this.$el.html(this.template.render(e,this.ctx_additions()))}}),p=f.extend({style_classes:["empty-view","empty-image-view"],rootUrl:"http://placekitten.com/",buttonColor:"blue",displayImages:!0,extendContext:function(){var e=this,t={starterKitteh:function(){var t=l.min(o.Resize.width(),920);return i(t,e.rootUrl)},buttonColor:e.buttonColor,displayImages:e.displayImages};return t},events:{"click .surprise":function(){var t=this.$(".entity-box"),n=new e.Image;t.addClass("loading"),n.src=i(t.width(),this.rootUrl),n.complete?a(n,t):d(n).on("load",function(){a(n,t)})}}});f.register("empty_example",{}),p.register("empty_example_image",{}),p.register("empty_example_image_extension",{rootUrl:"http://placepuppy.it/",buttonColor:"green"})}(this),Whiskers("modules.error",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="error_page" class="e'),a.b(a.v(a.f("error_code",e,t,0))),a.b(' module"> <div class="bound"> <div class="inner"> '),a.b(" "),a.s(a.f("style_options",e,t,1),e,t,0,207,368,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("images",e,t,1),e,t,0,219,356,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("foreground_image",e,t,1),e,t,0,241,334,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="rich_text_image '),i.b(i.v(i.f("alignment",e,t,0))),i.b('_align"><img src="'),i.b(i.v(i.d("foreground_image.url",e,t,0))),i.b('"></div> ')}),e.pop()),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),a.b(' <div class="message"> <h1>'),a.b(a.v(a.f("title",e,t,0))),a.b("</h1> <h2>"),a.b(a.v(a.f("desc",e,t,0))),a.b('</h2> <form id="error_search" action="'),a.b(a.v(a.f("search_error",e,t,0))),a.b('" method="GET"> <div class="search-field"> <input id="search_404_input" name="q" type="text" placeholder="'),a.b(a.v(a.f("search_placeholder",e,t,0))),a.b('"> <input type="submit" class="search-icon" value=""> </div> </form> </div> </div> </div> </div>'),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.jQuery,a=e.Whiskers,n=e._;t.ModuleView.register("error",{template:a.modules.error,initialize:function(){var e=i("#goc-bar .goc-search"),t=this.model.get("config_options"),a=t&&t.suppress_search,n=404===this.model.get("error_code");this.search_error=e.attr("action"),this.search_placeholder=e.find("input[type=text]").attr("placeholder"),this.search_form=n&&!a},render:function(){var e=n.extend({search_error:this.search_error,search_placeholder:this.search_placeholder},this.model);this.$el.html(this.template.render(e))},ready:function(){this.search_form&&this.$("#error_search").show()}})}(this),Whiskers("modules.featured_media",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("layout",e,t,0))),a.b('"> '),a.s(a.f("data",e,t,1),e,t,0,40,63,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("<entity_container0",e,t,"")),i.b(" ")}),e.pop()),a.b(" </div>"),a.fl()},partials:{"<entity_container0":{name:"entity_container",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e._,o=t.ModuleView.extend({breakpoints:n,template:r.modules.featured_media,style_classes:["featured_media","list_module_featured"],required_template_sets:["entities"],render:function(){var e=this,t=e.model,a=s.first(e.model.get("data")),n=this.$el,r=t.get("type"),o=i.rtl?"right":"left",l=t.get("style_options"),c=l&&l.layout||o;"game"===r&&a.isConsole&&(r="movie");var d=s.extend({layout:c,seeAll:t.get("seeAll")},this.options.ads.helpers(),e.model);n.html(e.template.render(d,this.ctx_additions()))},resize:function(){this.render(),this.options.ads.restore()}});o.register("featured_media",{style_classes:["featured_media","list_module_featured","parent_featured"]}),o.register("featured_game",{}),o.register("featured_movie",{}),o.register("featured_gallery",{})}(this),Whiskers("modules.flex_hero",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("style_options",e,t,1),e,t,0,18,526,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("fullscreen",e,t,1),e,t,0,34,510,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <style type="text/css"> #ref-'),i.b(i.v(i.f("ref",e,t,0))),i.b("{ z-index: 0; } #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(", #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .bound{ overflow: visible; } "),i.s(i.f("content_overlap",e,t,1),e,t,0,163,376,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" @media screen and (min-width: 1025px){ #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .hero-content-wrapper{ margin-bottom: -"),i.b(i.v(i.f("content_overlap",e,t,0))),i.b(";} #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .bound{ padding-bottom: "),i.b(i.v(i.f("content_overlap",e,t,0))),i.b("; margin-bottom: -"),i.b(i.v(i.f("content_overlap",e,t,0))),i.b("; } } ")}),e.pop()),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,410,487,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.s(i.f("first_module",e,t,1),e,t,0,427,470,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("#nav-local{ height: 0; overflow: visible; }")}),e.pop())}),e.pop()),i.b(" </style> ")}),e.pop()),i.b(" ")}),e.pop()),a.b(' <div class="bound"> <div class="carousel"> '),a.s(a.d("data.length",e,t,1),e,t,0,604,2686,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <ul class="slides"> '),i.s(i.f("data",e,t,1),e,t,0,634,2670,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <li> "),i.s(i.f("hero_content",e,t,1),e,t,0,657,2646,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="hero-content-wrapper" '),i.s(i.d("background_options.background_color",e,t,1),e,t,0,732,800,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' style="background-color: '),i.b(i.v(i.d("background_options.background_color",e,t,0))),i.b(';" ')}),e.pop()),i.b("> "),i.s(i.f("background_options",e,t,1),e,t,0,865,1544,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("video_options",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.b(" "),i.s(i.f("image",e,t,1),e,t,0,952,1419,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(" "),i.s(i.f("aspect_ratio_pct",e,t,1),e,t,0,1084,1150,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<div class="aspect" style="padding-bottom: '),i.b(i.v(i.f("aspect_ratio_pct",e,t,0))),i.b(';">')}),e.pop()),i.b(' <img class="background-image '),i.s(i.f("aspect_ratio_pct",e,t,1),e,t,1,0,0,"")||i.b("relative"),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||i.b(" no-src"),i.b('" '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||i.b("data-"),i.b('src="'),i.b(i.v(i.f("src",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" '),i.b(i.rp("<image_attributes0",e,t,"")),i.b("> "),i.s(i.f("aspect_ratio_pct",e,t,1),e,t,0,1391,1397,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("</div>")}),e.pop()),i.b(" ")}),e.pop()),i.b(" ")),i.b(" "),i.b(" "),i.s(i.f("video_options",e,t,1),e,t,0,1508,1525,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.rp("<inline_video1",e,t,""))}),e.pop()),i.b(" ")}),e.pop()),i.b(' <div class="foreground-content-wrapper'),i.s(i.d("foreground_options.full_width_content",e,t,1),e,t,0,1648,1659,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" full-width")}),e.pop()),i.b('"> '),i.s(i.f("foreground_options",e,t,1),e,t,0,1727,2608,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("main_image",e,t,1),e,t,0,1743,2592,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("list_object",e,t,1),e,t,0,1760,1792,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a class="open-flex-hero-modal">')}),e.pop()),i.b(" "),i.s(i.f("list_object",e,t,1),e,t,1,0,0,"")||i.s(i.f("href",e,t,1),e,t,0,1834,1853,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('">')}),e.pop()),i.b(' <div class="image-wrapper foreground-image bound-padding '),i.b(i.v(i.f("horizontal_alignment",e,t,0))),i.b(" "),i.b(i.v(i.f("vertical_alignment",e,t,0))),i.b('" style="width: '),i.b(i.v(i.f("half_width",e,t,0))),i.b('px;"> '),i.b(" "),i.s(i.f("aspect_ratio_pct",e,t,1),e,t,0,2150,2249,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<div class="aspect'),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||i.b(" no-src"),i.b('" style="padding-bottom: '),i.b(i.v(i.f("aspect_ratio_pct",e,t,0))),i.b(';">')}),e.pop()),i.b(" <img "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('data-src="'),i.b(i.v(i.f("flex_src",e,t,0))),i.b('"')),i.s(i.f("noscript",e,t,1),e,t,0,2338,2351,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('src="'),i.b(i.v(i.f("src",e,t,0))),i.b('"')}),e.pop()),i.b(' alt="'),i.b(i.v(i.f("alt_text",e,t,0))),i.b('" '),i.s(i.f("aspect_ratio_pct",e,t,1),e,t,1,0,0,"")||i.b('class="relative"'),i.b("> "),i.s(i.f("aspect_ratio_pct",e,t,1),e,t,0,2465,2471,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("</div>")}),e.pop()),i.b(" </div> "),i.s(i.f("list_object",e,t,1),e,t,0,2516,2520,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("</a>")}),e.pop()),i.b(" "),i.s(i.f("list_object",e,t,1),e,t,1,0,0,"")||i.s(i.f("href",e,t,1),e,t,0,2562,2566,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("</a>")}),e.pop()),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" </div> </div> ")}),e.pop()),i.b(" </li> ")}),e.pop()),i.b(" </ul> ")}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{"<image_attributes0":{name:"image_attributes",partials:{},subs:{}},"<inline_video1":{name:"inline_video",partials:{},subs:{}}},subs:{}}),Whiskers("partials.inline_video",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="video-wrapper"> <video '),a.s(a.d("mute_button_options.start_muted",e,t,1),e,t,0,71,76,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("muted")}),e.pop()),a.b(" "),a.s(a.f("loop_video",e,t,1),e,t,0,128,132,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("loop")}),e.pop()),a.b(" "),a.s(a.f("fallback_image",e,t,1),e,t,0,167,198,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('poster="'),i.b(i.v(i.d("fallback_image.src",e,t,0))),i.b('"')}),e.pop()),a.b('> <source src="'),a.b(a.v(a.f("mp4_url",e,t,0))),a.b('" type="video/mp4"> <source src="'),a.b(a.v(a.f("webm_url",e,t,0))),a.b('" type="video/webm"> </video> '),a.s(a.f("mute_button_options",e,t,1),e,t,0,342,598,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("show_mute_button",e,t,1),e,t,0,364,576,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="mute-button '),i.s(i.f("start_muted",e,t,1),e,t,0,405,413,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("mute-on ")}),e.pop()),i.b(" "),i.s(i.f("start_muted",e,t,1),e,t,1,0,0,"")||i.b("mute-off "),i.b(" "),i.b(i.v(i.f("horizontal_alignment",e,t,0))),i.b(" "),i.b(i.v(i.f("vertical_alignment",e,t,0))),i.b('" '),i.s(i.f("alt_text",e,t,1),e,t,0,534,554,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('title="'),i.b(i.v(i.f("alt_text",e,t,0))),i.b('"')}),e.pop()),i.b("> </div> ")}),e.pop()),i.b(" ")}),e.pop()),a.b(" </div>"),a.fl()},partials:{},subs:{}}),Whiskers("modals.flex_hero",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="modal-info"> '),a.s(a.f("list",e,t,1),e,t,0,34,562,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <h3 class="modal-title">'),i.b(i.v(i.f("title",e,t,0))),i.b('</h3> <div class="modal-content"> <div class="content-container"> <ul class="row-'),i.b(i.v(i.f("items_per_row",e,t,0))),i.b('"> '),i.s(i.f("list_items",e,t,1),e,t,0,184,526,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li> <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" '),i.b(i.rp("<href_attributes0",e,t,"")),i.b("> "),i.s(i.f("thumb_data",e,t,1),e,t,0,246,499,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,260,295,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<img src="'),i.b(i.v(i.f("src",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('">')}),e.pop()),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b(' <img alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" src="'),i.b(i.v(i.f("src",e,t,0))),i.s(i.f("retina",e,t,1),e,t,1,0,0,"")||i.s(i.f("half_width",e,t,1),e,t,0,382,403,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("&width="),i.b(i.v(i.f("half_width",e,t,0)))}),e.pop()),i.b('" '),i.s(i.f("half_width",e,t,1),e,t,0,446,468,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('width="'),i.b(i.v(i.f("half_width",e,t,0))),i.b('"')}),e.pop()),i.b("> ")),i.b(" ")}),e.pop()),i.b(" </a> </li> ")}),e.pop()),i.b(" </ul> </div> </div> ")}),e.pop()),a.b(" </div>"),a.fl()},partials:{"<href_attributes0":{name:"href_attributes",partials:{},subs:{}}},subs:{}}),function(e){"use strict";function t(e,t){var a=e.model.get("data")[t],n=a.hero_content_config&&a.hero_content_config.desktop,r=n&&n.background_options,s={fullscreen_module:!0,local_chrome_dark:"light"!==r.local_chrome_color};i.Style.applyTakeoverStyles(s,!0)}var i=e.Disney,a=e.Grill,n=e.Whiskers,r=e.Modernizr,s=e._,o=e.$,l=e.window,c=e.Backbone,d=e.devicePixelRatio>1.5,u=i.Style.breakpoints,h=u.midHigh.toString()+" "+u.chromeMax.toString(),f=a.ModuleView.extend({style_classes:["skip-styles","skip-top-border","full-height","full-width","flex_hero"],template:n.modules.flex_hero,breakpoints:h,required_template_sets:["images","links"],included_components:{inline_video:n.partials.inline_video},events:{"click .open-flex-hero-modal":function(){void 0===this.modal&&(this.modal=new a.FlexHeroModalView({template:n.modals.flex_hero,name:"flex-hero",list:this.model.get("list_object"),ctx_additions:this.ctx_additions()})),this.modal.show()},"click .mute-button":function(e){var t=this.el.querySelector("video"),i=o(e.currentTarget);t&&(t.muted=!t.muted,i.toggleClass("mute-on",t.muted),i.toggleClass("mute-off",!t.muted))}},initialize:function(){var e=this.model,t=e.data.models,i=e.get("style_options"),a=e.get("ref"),n=this;this.first_in_stack="1-0"===a,s.each(t,function(e){if("FlexHero"===e.get("type")){var t=e.get("hero_content_config"),i=["mobile","desktop"];s.each(i,function(e){if(t&&t[e]){var i=t[e].foreground_options&&t[e].foreground_options.main_image;if(i){var a=i.half_width&&!d?i.src+"&width="+i.half_width:i.src;t[e].foreground_options.main_image.flex_src=a}}})}else"List"!==e.get("type")||n.model.get("list_object")||n.model.set("list_object",e)}),i&&i.fullscreen&&this.style_classes.push("transparent")},render:function(){var e=c.Resize.width(),t=c.Resize.width()>=u.midHigh,i=e>=u.chromeMax,a=t&&!i,n=r.video&&!r.mobile,o=s.extend({hero_content:function(){if("FlexHero"!==this.get("type"))return null;var e=this.get("hero_content_config"),i=t?e.desktop:e.mobile,r=a&&i.background_options&&i.background_options.tablet_override_image?i.background_options.tablet_override_image:i.background_options.main_image,s=n&&t&&e.video_options;if(s)i.background_options.video_options=s;else{if(!r)return!1;i.background_options.image=r}return i}},this.model);this.$el.html(this.template.render(o,this.ctx_additions())),this.first_in_stack&&this.$el.loadLazyImages()},ready:function(){this.first_in_stack&&t(this,0);var e=this.el.querySelector("video");e&&e.play()},resize:function(){this.render(),this.ready()}});f.register("fullscreen_hero",{}),f.register("flex_hero",{}),a.FlexHeroModalView=a.ModalView.extend({events:{"click .modal-info":function(e){var t=o(e.target),i=t.hasClass("modal-title"),a=t.is("a")||t.parent().is("a");i||a||this.hide()},scroll:s.debounce(function(e){var t=e.target,i=t.scrollTop,a=t.scrollHeight,n=i+t.offsetHeight;0===i?t.scrollTop=1:n===a&&(t.scrollTop=i-1)},100)},initialize:function(){var e=this;o(l).on("orientationchange",function(){if(e.$el.hasClass("show")){var t=o("#modal-window,#modal-overlay");t.width(l.innerWidth),t.height(l.innerHeight),t.offset({top:0,left:0}),t.offset({top:0,left:0})}})},render:function(){var e,t=this.options.list,i=t.get("list_items"),a=i.length;return e=a%4===0?4:a%3===0?3:a%3>a%4?3:4,t.set("items_per_row",e),this.options.template.render({list:t},this.options.ctx_additions)},show:function(e){a.ModalView.prototype.show.apply(this,e),this.el.scrollTop=0,this.el.querySelectorAll(".modal-info")[0].scrollTop=0}})}(this),Whiskers("modules.flex_image_modules",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.s(a.f("style_config",e,t,1),e,t,0,35,194,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("image_alignment",e,t,1),e,t,0,56,82,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" image-"),i.b(i.v(i.f("image_alignment",e,t,0)))}),e.pop()),i.b(" "),i.s(i.f("background_color",e,t,1),e,t,0,124,172,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('" style="background-color: '),i.b(i.v(i.f("background_color",e,t,0))),i.b(";")}),e.pop()),i.b(" ")}),e.pop()),a.b('"> '),a.s(a.f("sized_image",e,t,1),e,t,0,230,258,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("<preserved_ratio_image0",e,t,"")),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("data",e,t,1),e,t,0,284,302,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("<bio_overlay1",e,t,"")),i.b(" ")}),e.pop()),a.b(" </div>"),a.fl()},partials:{"<preserved_ratio_image0":{name:"preserved_ratio_image",partials:{},subs:{}},"<bio_overlay1":{name:"bio_overlay",partials:{},subs:{}}},subs:{}}),Whiskers("partials.preserved_ratio_image",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="image-wrapper '),a.s(a.f("image_type",e,t,1),e,t,0,41,66,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("image-type-"),i.b(i.v(i.f("image_type",e,t,0)))}),e.pop()),a.b(" "),a.s(a.f("image_full_width",e,t,1),e,t,0,103,113,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("image-full")}),e.pop()),a.b('" '),a.s(a.f("image_full_width",e,t,1),e,t,1,0,0,"")||(a.b('style="width: '),a.b(a.v(a.f("half_width",e,t,0))),a.b('px;"')),a.b('> <div class="aspect" style="padding-bottom: '),a.b(a.v(a.f("aspect_ratio_pct",e,t,0))),a.b(';"> '),a.s(a.f("noscript",e,t,1),e,t,1,0,0,"")||(a.b('<img data-src="'),a.b(a.v(a.f("src",e,t,0))),a.b('" alt="'),a.b(a.v(a.f("title",e,t,0))),a.b('">')),a.b(" "),a.s(a.f("noscript",e,t,1),e,t,0,359,415,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("src",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"></noscript>')}),e.pop()),a.b(" </div> </div> "),a.s(a.f("allow_foreground_content",e,t,1),e,t,0,472,557,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="min-height-spacer" style="padding-bottom: '),i.b(i.v(i.f("aspect_ratio_pct",e,t,0))),i.b(';"></div> ')}),e.pop()),a.fl()},partials:{},subs:{}}),Whiskers("partials.bio_overlay",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound bio-overlay '),a.s(a.f("style_options",e,t,1),e,t,0,48,311,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("wide",e,t,1),e,t,0,58,223,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.s(i.f("desktop_config",e,t,1),e,t,0,77,204,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" content-"),i.b(i.v(i.f("horizontal_content_position",e,t,0))),i.b(" content-"),i.b(i.v(i.f("vertical_content_position",e,t,0))),i.b(" text-"),i.b(i.v(i.f("text_alignment",e,t,0))),i.b(" text-"),i.b(i.v(i.f("text_lightness",e,t,0))),i.b(" ")}),e.pop())}),e.pop()),i.b(" "),i.s(i.f("wide",e,t,1),e,t,1,0,0,"")||i.s(i.f("mobile_config",e,t,1),e,t,0,260,283,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("text-"),i.b(i.v(i.f("text_lightness",e,t,0)))}),e.pop()),i.b(" ")}),e.pop()),a.b('"> <div class="bio-content details"> <h1 class="title" '),a.s(a.f("wide",e,t,1),e,t,0,393,570,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.d("style_options.desktop_config.title_color_override",e,t,1),e,t,0,447,516,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('style="color: '),i.b(i.v(i.d("style_options.desktop_config.title_color_override",e,t,0))),i.b(';"')}),e.pop())}),e.pop()),a.b('> <span class="name">'),a.b(a.v(a.f("title",e,t,0))),a.b('</span> </h1> <p class="desc '),a.b(a.v(a.f("contentPosition",e,t,0))),a.b('">'),a.b(a.v(a.f("description",e,t,0))),a.b('</p> <p class="short-desc '),a.b(a.v(a.f("contentPosition",e,t,0))),a.b('">'),a.b(a.v(a.f("short_desc",e,t,0))),a.b("</p> "),a.s(a.f("include_social",e,t,1),e,t,0,759,774,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<social_btn0",e,t,""))}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{"<social_btn0":{name:"social_btn",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Disney,i=t.Style.breakpoints,a=i.midHigh.toString(),n=e.Grill,r=e.Whiskers,s=e.Backbone,o=e._,l=n.ModuleView.extend({breakpoints:a,style_classes:["image_module","full-height","full-width","skip-styles"],template:r.modules.flex_image_modules,included_components:{bio_overlay:r.partials.bio_overlay,preserved_ratio_image:r.partials.preserved_ratio_image,social_btn:r.partials.social_btn},initialize:function(){var e=this.model.get("style_options"),t=e&&e.image_assets||{},i=this.model.get("style_options"),a=i&&i.include_social,n=a&&!this.options.cds;this.model.set({image_data:t,include_social:n})},render:function(){var e=s.Resize.width()>=i.midHigh,a=e?"desktop":"mobile",n=this.model.get("style_options"),r=n&&n[a+"_config"],l=this.model.get("image_data"),c=l[a],d=this.imageFullSize?{rel_width:1}:{exact_size:!0},u=this.imageTypeBackground&&this.imageFullSize;o.extend(c,{src:t.LumiereHelpers.imgSrc(c.src,d),image_full_width:this.imageFullSize,image_type:u?"background":"foreground",allow_foreground_content:u}),this.model.set("sized_image",c);var h=o.extend({wide:e,style_config:r},this.model);this.$el.html(this.template.render(h,this.included_components))}});l.register("flex_image",{imageTypeBackground:!1,imageFullSize:!1}),l.register("rich_bio",{imageTypeBackground:!0,imageFullSize:!0})}(this),Whiskers("modules.fta_catchup",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound video"> <div class="header"> '),a.s(a.f("title",e,t,1),e,t,0,57,75,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("<h2>"),i.b(i.v(i.f("title",e,t,0))),i.b("</h2>")}),e.pop()),a.b(" "),a.s(a.f("desc",e,t,1),e,t,0,95,123,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<p class="desc">'),i.b(i.v(i.f("desc",e,t,0))),i.b("</p>")}),e.pop()),a.b(' <div class="filters"> <div class="filter"> '),a.s(a.f("days",e,t,1),e,t,0,185,290,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a class="day-toggle '),i.s(i.f("selected",e,t,1),e,t,0,220,228,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("selected")}),e.pop()),i.b('" href="#" data-filter="'),i.b(i.v(i.f("date",e,t,0))),i.b('"> '),i.b(i.v(i.f("name",e,t,0))),i.b(" </a> ")}),e.pop()),a.b(' </div> <div class="filter_mobile"> <span>'),a.b(a.v(a.d("translations.Today",e,t,0))),a.b('</span> <select class="mobile_filter_list"> '),a.s(a.f("days",e,t,1),e,t,0,416,503,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" <option "),i.s(i.f("selected",e,t,1),e,t,0,438,446,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("selected")}),e.pop()),i.b(' data-filter="'),i.b(i.v(i.f("date",e,t,0))),i.b('"> '),i.b(i.v(i.f("name",e,t,0))),i.b(" </option> ")}),e.pop()),a.b(' </select> </div> </div> </div> <br/> <div id="stream_items"> '),a.b(a.t(a.f("list",e,t,0))),a.b(' <div class="zero_case"> <h3>'),a.b(a.v(a.d("translations.no_videos",e,t,0))),a.b('</h3> </div> <div class="show_more_container"> <div class="show_more blue button large" role="button"> <span class="label">'),a.b(a.v(a.d("translations.show_more",e,t,0))),a.b('</span> <span class="spinner"></span> </div> </div> </div> </div>'),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.jQuery,i=e._,a=e.Disney,n=e.Grill,r=e.Backbone,s=e.Modernizr,o=e.Whiskers,l=a.Style.breakpoints,c=i.values(l),d=r.LazyCollection.extend({parse:function(e){return this.count=e.data.total_found,(e.data||{}).results}}),u=n.ModuleView.extend({compatibility:s.canvas&&s.flash?"html5,flash":s.canvas&&!s.flash?"html5":"flash",style_classes:["stream-view","grid-view"],page:1,events:{"click .show_more":function(t){t.preventDefault();var i=this;this.$el.addClass("loading"),this.getMoreItems().then(function(){i.$el.removeClass("loading"),e.Tracker.trackPagination(++i.page),i.$el.loadLazyImages()})},"click a.day-toggle":function(e){this.selectDay(e,t(e.target).html())},"change select.mobile_filter_list":function(e){this.selectDay(e,t(e.target).find(":selected").html())}},selectDay:function(e,t){e.preventDefault();var i=this.$el,a=i.find(".zero_case"),n=i.find("a.day-toggle"),r=i.find(".filter_mobile span"),s=i.find(".mobile_filter_list"),o=i.find('a.day-toggle:contains("'+t+'")'),l=s.find('.option[value="'+t+'"]');a.hide(),n.removeClass("selected"),o.addClass("selected"),r.html(t),l.prop("selected",!0),s.blur(),this.resetAndGetMoreItems()},initialize:function(){var e=this,t=this.model,i=t.data=new d(null,{min:6}),a=this.translations=this.model.get("translations");this.videoThumbnailBadge=t&&t.get("video_thumbnail_badge"),this.list=new n.ListView({collection:i,template:{render:function(t){return o.entities.item.render(t,e.global_components.entities)}}}),this.dayMap=[a.sunday||"Sunday",a.monday||"Monday",a.tuesday||"Tuesday",a.wednesday||"Wednesday",a.thursday||"Thursday",a.friday||"Friday",a.saturday||"Saturday"]},getMoreItems:function(){var e,i,a=this,n=this.list.collection,s=r.Resize.width(),o=this.$("a.day-toggle.selected"),c=this.$(".mobile_filter_list");e=s<l.midHigh?c.find(":selected").data("filter"):o.attr("data-filter");var d={q:"video",filter:{type:"Video",start_date_s:e},video_thumbnail_badge:this.videoThumbnailBadge};return n.url="/_fta_stream/search.json?"+t.param(d),this.itemCount+=this.cols()*this.rows(),i=this.model.data.ensure(this.itemCount),i.then(function(){a.hideLoader(),a.$el.loadLazyImages(),a.updateButton()}),i},showLoader:function(){var e=this.$el,t=this.$("#stream_items"),i=t.find("ul"),a=i.outerHeight()||100;i.css("height",a).addClass("hide"),t.addClass("load"),e.addClass("loading")},hideLoader:function(){var e=this.$el,i=t("#stream_items"),a=i.find("ul");i.removeClass("load"),a.css("height","auto").removeClass("hide"),e.removeClass("loading")},render:function(){var e=i.extend({days:this.dates(),list:a.placeHtml(this.list),sortOptions:!0},this.model.toJSON());this.$el.html(this.template.render(e)),a.placeSwap(this,this.list)},ready:function(){this.resize(),this.resetAndGetMoreItems()},updateButton:function(){var e=this.$el,t=this.model.data.count,i=e.find("#stream_items .item").length;e.toggleClass("has-more",t>i)},resize:function(){var e=this.cols();this.list.$el.removeClass().addClass("cols-"+e),this.fit()},fit:function(){var e=this.list,t=e.$el,i=e.collection.count,a=e.collection.length,n=this.page*this.cols()*this.rows();i>n&&i>a?t.children().show().slice(n).hide():t.children().show()},formatDate:function(e){var t=String(e.getMonth()+1),i=String(e.getDate()),a=String(e.getFullYear());return 1===t.length&&(t="0"+t),1===i.length&&(i="0"+i),[a,t,i].join("-")},dates:function(){for(var e,t,i,a=new Date,n=[],r=0;8>r;r++)i=!1,a.setDate(a.getDate()-(0===r?0:1)),e=this.formatDate(a),0===r?(t=this.translations.today||"Today",i=!0):t=1===r?this.translations.yesterday||"Yesterday":this.dayMap[a.getDay()],n.push({name:t,date:e,selected:i});return n.reverse()},resetAndGetMoreItems:function(){return this.list.collection.reset(),this.showLoader(),this.page=1,this.itemCount=0,this.getMoreItems()}});u.register("fta_catchup",{breakpoints:c.join(" "),template:o.modules.fta_catchup,rows:function(){var e=r.Resize.width();return e<l.midHigh?4:e<l.max?3:2},cols:function(){var e=r.Resize.width(),t=parseInt(this.model.get("style_options").items_per_row_override,10);return e<l.midHigh?1:t||3}})}(this),Whiskers("modules.full_schedule",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.b('"> <div class="whats-on"> <a href="'),a.b(a.v(a.f("href",e,t,0))),a.b('" class="button large blue">'),a.b(a.v(a.d("translations.watch_live",e,t,0))),a.b("</a> <h2>"),a.b(a.v(a.d("translations.whats_on",e,t,0))),a.b('</h2> </div> <div id="fixed-container"> <div id="fixed"> <div class="header"> <div class="filters '),a.s(a.f("suppress_catch_up",e,t,1),e,t,0,294,311,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("suppress-catch-up")}),e.pop()),a.b('" data-title="filters"> <div class="sort-label"> '),a.s(a.f("suppress_catch_up",e,t,1),e,t,1,0,0,"")||(a.b("<span>"),a.b(a.v(a.d("translations.catch_up",e,t,0))),a.b("</span>")),a.b(" <span>"),a.b(a.v(a.d("translations.today",e,t,0))),a.b("</span> <span>"),a.b(a.v(a.d("translations.coming_up",e,t,0))),a.b('</span> </div> <div class="sort"> '),a.s(a.f("localized_dates",e,t,1),e,t,0,587,720,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a class="'),i.b(i.v(i.f("day",e,t,0))),i.b(" "),i.b(i.v(i.f("class",e,t,0))),i.b(' belt" data-date="'),i.b(i.v(i.f("data_date",e,t,0))),i.b('" href="javascript:void(0)"><span>'),i.b(i.v(i.f("day",e,t,0))),i.b("</span><span>"),i.b(i.v(i.f("date",e,t,0))),i.b("</span></a> ")}),e.pop()),a.b(' </div> <div class="filter_mobile"> <div id="anchor-links" class="sort"> <a class="morning" href="#morning">'),a.b(a.v(a.d("translations.morning_button",e,t,0))),a.b('</a> <a class="afternoon" href="#afternoon">'),a.b(a.v(a.d("translations.afternoon_button",e,t,0))),a.b('</a> </div> <div class="filter_mobile_list"> <span>'),a.b(a.v(a.f("localized_date",e,t,0))),a.b('</span> <select class="filter_mobile_select"> '),a.s(a.f("localized_dates",e,t,1),e,t,0,1091,1154,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.f("data_date",e,t,0))),i.b('" '),i.b(i.v(i.f("selected",e,t,0))),i.b(">"),i.b(i.v(i.f("label",e,t,0))),i.b("</option> ")
}),e.pop()),a.b(' </select> </div> </div> </div> </div><!-- div.fixed --> </div> </div> <div id="schedule" class="container clear"> '),a.s(a.f("schedule",e,t,1),e,t,0,1302,1533,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.d("schedule_items.length",e,t,1),e,t,0,1329,1506,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="header"> <div class="title"> <h2>'),i.b(i.v(i.f("time_period_label",e,t,0))),i.b('</h2> </div> </div> <div class="schedule-time-group" id="'),i.b(i.v(i.f("time_period",e,t,0))),i.b('"> '),i.b(i.rp("<scheduleTimeGroupItems0",e,t,"")),i.b(" </div> ")}),e.pop()),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("schedule",e,t,1),e,t,1,0,0,"")||(a.b(' <div class="title"> <h2 class="no-data">'),a.b(a.v(a.f("no_epg_data",e,t,0))),a.b("</h2> </div> ")),a.b(" </div><!-- div#schedule --> </div>"),a.fl()},partials:{"<scheduleTimeGroupItems0":{name:"scheduleTimeGroupItems",partials:{},subs:{}}},subs:{}}),Whiskers("partials.schedule_time_group_items",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b(' <ul class="schedule-items"> '),a.s(a.f("schedule_items",e,t,1),e,t,0,92,1420,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li class="schedule-entry entry container indent closed '),i.s(i.f("show_buttons",e,t,1),e,t,0,166,179,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("buttons-shown")}),e.pop()),i.b(" "),i.s(i.f("primary_image_url",e,t,1),e,t,0,219,230,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("thumb-shown")}),e.pop()),i.b('"> <div class="inner-entry"> <div class="meta"> <p class="gamma time">'),i.b(i.v(i.f("time",e,t,0))),i.b('</p> </div> <div class="entry-details"> '),i.s(i.f("primary_image_url",e,t,1),e,t,0,392,511,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="show-thumb"> <img class="show-thumb thumb" alt="'),i.b(i.v(i.f("show_title",e,t,0))),i.b('" src="'),i.b(i.v(i.f("primary_image_url",e,t,0))),i.b('"></img> </div> ')}),e.pop()),i.b(' <div class="entry-buttons"> '),i.s(i.f("url",e,t,1),e,t,0,570,663,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="button small blue more-info-button">'),i.b(i.v(i.d("translations.more_info",e,t,0))),i.b("</a> ")}),e.pop()),i.b(" "),i.s(i.f("full_episode_url",e,t,1),e,t,0,693,805,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("full_episode_url",e,t,0))),i.b('" class="button small blue full-episode-button">'),i.b(i.v(i.d("translations.full_episode",e,t,0))),i.b("</a> ")}),e.pop()),i.b(' </div> <div class="show-text"> '),i.s(i.f("url",e,t,1),e,t,0,866,975,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <h2 class="show-title title regular light beta"><a class="show-link" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("show_title",e,t,0))),i.b("</a></h2> ")}),e.pop()),i.b(" "),i.s(i.f("url",e,t,1),e,t,1,0,0,"")||(i.b(' <h2 class="show-title title regular light beta"><a class="inactive" href="#">'),i.b(i.v(i.f("show_title",e,t,0))),i.b("</a></h2> ")),i.b(" "),i.s(i.f("classification",e,t,1),e,t,0,1122,1215,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="classification-'),i.b(i.v(i.f("classification_class",e,t,0))),i.b('">&nbsp;'),i.b(i.v(i.f("classification",e,t,0))),i.b("&nbsp;</span> ")}),e.pop()),i.b(' </div> <div class="extra"> <h2 class="gamma regular book episode-title title">'),i.b(i.v(i.f("episode_title",e,t,0))),i.b('</h2> <p class="delta episode-description">'),i.b(i.v(i.f("description",e,t,0))),i.b("</p> </div> </div> </div> </li> ")}),e.pop()),a.b(" </ul> "),a.fl()},partials:{},subs:{}}),function(e){"use strict";function t(){var e=new Date,t=-(e.getTimezoneOffset()/60);return t}var i=e.Grill,a=e.jQuery,n=e._,r=e.Whiskers,s="/_schedule/full/",o=i.ModuleView.extend({template:r.modules.full_schedule,schedule:null,events:{"click .sort .belt":function(e){var t=a(e.currentTarget);return this.fetchData(t.data("date")),this.$(".sort .belt.active").removeClass("active"),t.addClass("active"),e.preventDefault(),e.stopPropagation(),!1},"change .filter_mobile_select":function(e){var t=a(e.currentTarget);this.fetchData(t.val())},"click .sort a.morning":function(e){return this.$(".morning").addClass("active"),this.$(".afternoon").removeClass("active"),e.preventDefault(),!1},"click .sort a.afternoon":function(e){return e.preventDefault(),this.$(".afternoon").addClass("active"),this.$(".morning").removeClass("active"),!1},"click .entry-buttons .button":function(e){e.stopPropagation()},"click div#schedule .schedule-entry":function(e){var t=a(e.currentTarget);return t.hasClass("closed")?t.find("div.entry-details").find(".episode-description").toggleClass("opened").slideDown():t.hasClass("open")&&t.find("div.entry-details").find(".opened").toggleClass("opened").slideUp(),t.toggleClass("open closed"),e.preventDefault(),!1},"click a.show-link":function(e){e.stopPropagation()},"click div#anchor-links a":function(t){var i=a(t.currentTarget),n=i.prop("hash"),r=this.$(n);a("html, body").stop().animate({scrollTop:r.offset().top-275},800,"swing",function(){e.location.hash=i.prop("hash")})}},render:function(){var t=new Date,i=t.getFullYear()+("0"+(t.getMonth()+1)).slice(-2)+("0"+t.getDate()).slice(-2);this.fetchData(i),a(e).on("scroll."+this.cid,n.throttle(n.bind(this.toggleFixedControls,this),300))},toggleFixedControls:function(){var t=this.$("#fixed-container");if(t.length>0){var i=t.offset().top;a(e).scrollTop()<i?t.find("#fixed").removeClass("fixed-controls"):t.find("#fixed").addClass("fixed-controls")}},remove:function(){i.ModuleView.prototype.remove.call(this),a(e).off("scroll."+this.cid)},fetchData:function(e){var t=this;this.$("#schedule").empty(),a.getJSON(t.buildUrl(e),function(e){var i=t.model.get("translations"),a=t.model.get("page_level_options"),s=a.watch_live_link||"",o=a.suppress_catch_up,l=[i.morning,i.afternoon,i.evening,i.night];n.each(e.schedule,function(e,t){e.time_period_label=l[t],n.each(e.schedule_items,function(e){e.show_buttons=e.url||e.full_episode_url})});var c=n.extend({suppress_catch_up:o,translations:i,href:s},e);t.$el.html(t.template.render(c,{scheduleTimeGroupItems:r.partials.schedule_time_group_items})),t.toggleFixedControls()})},buildUrl:function(i){var a=encodeURIComponent(e.location.pathname);return s+i+"/"+t()+"/"+a}});o.register("full_schedule");var l=o.extend({className:"module full_schedule",buildUrl:function(e){return s+e}});l.register("emea_full_schedule")}(this),Whiskers("modules.game_logos",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <div class="container"> <div class="logo-container"> <span class="esrb"> '),a.s(a.f("game_rating",e,t,1),e,t,0,109,184,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="no-src" data-src="'),i.b(i.v(i.f("game_rating",e,t,0))),i.b('">')),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("noscript",e,t,1),e,t,0,214,282,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<noscript><img class="no-src" data-src="'),i.b(i.v(i.f("game_rating",e,t,0))),i.b('"></noscript>')}),e.pop()),a.b(" </span> "),a.s(a.f("data",e,t,1),e,t,0,313,587,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" target="_blank"> <span class="game-logo-box"> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img data-src="'),i.b(i.v(i.f("icon",e,t,0))),i.b('" class="no-src game-logo" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,485,560,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("icon",e,t,0))),i.b('" class="game-logo" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(" </span> </a> ")}),e.pop()),a.b(' </div> <div class="game_legal"> '),a.b(a.v(a.f("legal_text",e,t,0))),a.b(" </div> </div> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e._;t.ModuleView.register("game_logos",{template:i.modules.game_logos,render:function(){var e=a.extend({},this.model);this.$el.html(this.template.render(e))},resize:function(){this.render()}})}(this),Whiskers("modules.glance",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> '),a.s(a.f("header_data",e,t,1),e,t,0,36,54,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(" "),a.s(a.f("data",e,t,1),e,t,0,80,1195,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="item" data-title="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> <div class="poster"> <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('"><span class="poster-box"><img src="'),i.b(i.v(i.f("poster",e,t,0))),i.b('" width="100%"></span></a> </div><div class="details"> <h3><a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b('</a></h3> <p class="desc">'),i.b(i.v(i.f("short_desc",e,t,0))),i.b('</p> <div class="meta"> '),i.s(i.f("reRelease",e,t,1),e,t,0,373,459,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="rerelease"><strong>'),i.b(i.v(i.d("translations.re_release",e,t,0))),i.b(":</strong> "),i.b(i.v(i.f("reRelease",e,t,0))),i.b("</p> ")}),e.pop()),i.b(" "),i.s(i.f("release",e,t,1),e,t,0,486,557,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="release"><strong>'),i.b(i.v(i.f("release_text",e,t,0))),i.b(":</strong> "),i.b(i.v(i.f("release",e,t,0))),i.b("</p> ")}),e.pop()),i.b(" "),i.s(i.f("rating",e,t,1),e,t,0,581,656,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="rating"><strong>'),i.b(i.v(i.d("translations.rated",e,t,0))),i.b(":</strong> "),i.b(i.v(i.f("rating",e,t,0))),i.b("</p> ")}),e.pop()),i.b(' </div> <div class="actions"> '),i.s(i.f("buttons",e,t,1),e,t,0,709,852,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div><a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" class="button small '),i.b(i.v(i.f("type",e,t,0))),i.b(" "),i.b(i.v(i.f("button_color",e,t,0))),i.b('"'),i.s(i.f("convert",e,t,1),e,t,0,792,819,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-convert="'),i.b(i.v(i.f("convert",e,t,0))),i.b('"')}),e.pop()),i.b(">"),i.b(i.v(i.f("title",e,t,0))),i.b("</a></div> ")}),e.pop()),i.b(' </div> </div><div class="trailer-thumb"> <a href="'),i.b(i.v(i.f("thref",e,t,0))),i.b('"> <span class="thumb-box"><span class="aspect"> <img src="'),i.b(i.v(i.f("tthumb",e,t,0))),i.b('" class="thumb" alt="'),i.b(i.v(i.f("ttitle",e,t,0))),i.b('"> <span class="thumb-title"> <h3 class="title" aria-hidden="true">'),i.b(i.v(i.f("ttitle",e,t,0))),i.b('</h3> <time aria-hidden="true">'),i.b(i.v(i.f("tduration",e,t,0))),i.b("</time> </span> </span></span> </a> </div> </div> ")}),e.pop()),a.b(" </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e._;t.ModuleView.register("glance",{breakpoints:n,template:r.modules.glance,render:function(){var e=this.model.get("translations"),t=s.extend({release_text:e.release},this.options.ads.helpers(),this.model);this.$el.html(this.template.render(t));var i=this.$el;i.find(".divide:last").css("display","none")},resize:function(){this.render(),this.options.ads.restore()}})}(this),Whiskers("modules.glimpse",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> '),a.s(a.f("header_data",e,t,1),e,t,0,36,54,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="col-container container cols-2">'),a.s(a.f("data",e,t,1),e,t,0,124,852,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="col item" data-title="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> '),i.b(i.rp("<entity_container1",e,t,"")),i.b(' <div class="details"> <div class="meta"> '),i.s(i.f("reRelease",e,t,1),e,t,0,247,333,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="rerelease"><strong>'),i.b(i.v(i.d("translations.re_release",e,t,0))),i.b(":</strong> "),i.b(i.v(i.f("reRelease",e,t,0))),i.b("</p> ")}),e.pop()),i.b(" "),i.s(i.f("release",e,t,1),e,t,0,360,439,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="release"><strong>'),i.b(i.v(i.d("translations.release",e,t,0))),i.b(":</strong> "),i.b(i.v(i.f("release",e,t,0))),i.b("</p> ")}),e.pop()),i.b(" "),i.s(i.f("rating",e,t,1),e,t,0,463,538,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="rating"><strong>'),i.b(i.v(i.d("translations.rated",e,t,0))),i.b(":</strong> "),i.b(i.v(i.f("rating",e,t,0))),i.b("</p> ")}),e.pop()),i.b(" "),i.s(i.f("albumShortDesc",e,t,1),e,t,0,569,614,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p class="shortdesc">'),i.b(i.v(i.f("albumShortDesc",e,t,0))),i.b("</p> ")}),e.pop()),i.b(' </div> <div class="actions"> '),i.s(i.f("buttons",e,t,1),e,t,0,675,818,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div><a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" class="button small '),i.b(i.v(i.f("type",e,t,0))),i.b(" "),i.b(i.v(i.f("button_color",e,t,0))),i.b('"'),i.s(i.f("convert",e,t,1),e,t,0,758,785,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-convert="'),i.b(i.v(i.f("convert",e,t,0))),i.b('"')}),e.pop()),i.b(">"),i.b(i.v(i.f("title",e,t,0))),i.b("</a></div> ")}),e.pop()),i.b(" </div> </div> </div> ")}),e.pop()),a.b("</div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<entity_container1":{name:"entity_container",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e._;t.ModuleView.register("glimpse",{template:i.modules.glimpse,required_template_sets:["module_header","entities"],render:function(){var e=this.model,t=a.extend({albumShortDesc:function(){return"album"===e.get("type")&&this.get("short_desc")}},this.options.ads.helpers(),this.model);this.$el.html(this.template.render(t,this.ctx_additions()))},resize:function(){this.render(),this.options.ads.restore()}})}(this),Whiskers("modules.grid",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.s(a.f("singleRow",e,t,1),e,t,0,56,67,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" single-row")}),e.pop()),a.b('"> '),a.s(a.f("header_data",e,t,1),e,t,0,100,118,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="cols-'),a.b(a.v(a.f("rpp",e,t,0))),a.b(" "),a.b(a.v(a.f("layoutType",e,t,0))),a.b(' col-container"> '),a.s(a.f("visible_data",e,t,1),e,t,0,208,217,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<item1",e,t,""))}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<item1":{name:"item",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=e.Whiskers,n=e._,r=i.Style.breakpoints,s=n.values(r),o=n.contains(["disneychannel.disney.com","disneyxd.disney.com"],i.portal),l=t.GridModuleBaseView.extend({breakpoints:s.join(" "),style_classes:["grid-view"],required_template_sets:["module_header","entities"],template:a.modules.grid,initialize:function(){var e=this.model,t=e.data;this.entity_type=n.first(t.models).get("entity_type")||e.get("type")},render:function(){var e=this.cols(),t=this.model,i=t.data.models.slice(0,this.limit(e));this.model.set("visible_data",i);var a=n.extend({rpp:e,layoutType:e>1?"grid-layout":"list-layout",channelSite:o,entity_type:this.entity_type,singleRow:i.length<=e},this.model);this.$el.html(this.template.render(a,this.ctx_additions()))},limit:function(e){var t=this.model.get("type"),i=this.model.data.length;return"character"===t?i:i>e?i-i%e:i}});l.register("browse",{}),l.register("recommended",{limit:function(e){return o?this.model.data.length:e}}),l.register("enchilada",{style_classes:["browse"],limit:function(){return this.model.data.length}})}(this),Whiskers("modules.guide",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <div class="container"> '),a.s(a.f("header_data",e,t,1),e,t,0,60,78,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="schedule"> '),a.s(a.f("data",e,t,1),e,t,0,127,345,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="row"> <span class="cell time">'),i.b(i.v(i.f("time",e,t,0))),i.b('</span> <span class="cell info"> <div class="title">'),i.b(i.v(i.f("title",e,t,0))),i.b('</div> <div class="series">'),i.b(i.v(i.f("series",e,t,0))),i.b('</div> </span> <span class="cell desc">'),i.b(i.v(i.f("description",e,t,0))),i.b("</span> </div> ")}),e.pop()),a.b(" </div> </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),Whiskers("modules.schedule",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="shows_schedule"> <div class="container"> <div class="header">'),a.b(a.v(a.f("title",e,t,0))),a.b('</div> <ul class="three_up"> '),a.s(a.f("data",e,t,1),e,t,0,120,340,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li> <span class="time">'),i.b(i.v(i.f("time",e,t,0))),i.b('</span> <span class="show_title">'),i.b(i.v(i.f("series",e,t,0))),i.b("</span> "),i.s(i.f("classification",e,t,1),e,t,0,223,314,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<span class="classification-'),i.b(i.v(i.f("classification_class",e,t,0))),i.b('">&nbsp;'),i.b(i.v(i.f("classification",e,t,0))),i.b("&nbsp;</span>")}),e.pop()),i.b(" </li> ")}),e.pop()),a.b(' </ul> <div class="full_schedule"> <a href="'),a.b(a.v(a.f("href",e,t,0))),a.b('"><span class="see_mobile">'),a.b(a.v(a.f("see",e,t,0))),a.b(" &nbsp;</span>"),a.b(a.v(a.f("linkTitle",e,t,0))),a.b("</a> </div> </div> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Modernizr,a=e.Whiskers,n=e.jQuery,r=e._,s={title:"Today's Schedule",schedule_title:"What's On:"},o=t.ModuleView.extend({initialize:function(){this.$el.hide()},render:r.noop,ready:function(){var e=this.buildUrl();this.fetchData(e)},zeroPad:function(e,t){for(var i=e.toString();i.length<t;)i="0"+i;return i},toParseableDate:function(e){var t={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},i=e.split(" ");return e=i[3]+"/"+parseInt(t[i[2]],10)+"/"+parseInt(i[1],10)+" "+i[4],new Date(e)},buildUrl:function(){var e=this,t=new Date,i=new Date,a="";i.setDate(i.getDate()+1);var n=t.getFullYear()+e.zeroPad(t.getMonth()+1,2)+e.zeroPad(t.getDate(),2),r=i.getFullYear()+e.zeroPad(i.getMonth()+1,2)+e.zeroPad(i.getDate(),2),s=-(t.getTimezoneOffset()/60),o="001",l=this.model.get("data")[0].title.toLowerCase(),c=null;c=this.model.get("channel_schedule")?this.model.get("channel_schedule").toLowerCase():"false";var d="";return a=-1!==l.indexOf("junior")||-1!==c.indexOf("junior")?"008":-1!==l.indexOf("xd")||-1!==c.indexOf("xd")?"009":"004",d="/watch/livetvguide/"+a+"/"+o+"/"+n+"/"+r+"/"+s},fetchData:function(e){var t=this;n.getJSON(e,function(e){var a=[],o=e.schedule.video,l=0,c=new Date;n.each(o,function(e,i){var n=i.airdates.airdate,r=t.toParseableDate(n),s=r.getTime()+parseInt(i.duration,10)>=c.getTime();if(s&&10>l){var o=r.getHours(),d=r.getMinutes(),u=o>=12?"pm":"am";o=0===o?12:o>12?o-12:o;var h=o+":"+t.zeroPad(d,2)+u;l++,a.push({time:h,title:i.title,series:i.show.title,description:i.description})}}),s=r.extend(s,{data:a}),i.flash&&!i.mobile&&t.$el.hide().html(t.template.render(s)).fadeIn()})}});o.register("live_tv_guide",{template:a.modules.guide}),o.register("schedule",{template:a.modules.schedule,fetchData:function(e){var t=this,i=this.model.get("data")[0].href,a=this.model.get("data")[0].title,o=this.model.get("title"),l=this.model.get("translations");n.getJSON(e,function(e){var c=[],d=e.schedule.video,u=0,h=new Date;n.each(d,function(e,i){var a=i.airdates.airdate,n=t.toParseableDate(a),r=n.getTime()+parseInt(i.duration,10)>=h.getTime();if(r&&3>u){var s=n.getHours(),o=n.getMinutes(),l=s>=12?"p":"a";s=0===s?12:s>12?s-12:s;var d=s+":"+t.zeroPad(o,2)+l;u++,c.push({time:d,series:i.show.title})}}),s=r.extend(s,{data:c,href:i,title:o,linkTitle:a,translations:l}),t.$el.hide().html(t.template.render(s)).fadeIn()})}})}(this),Whiskers("modules.hero_universal",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <div class="carousel'),a.s(a.f("identity",e,t,1),e,t,0,53,100,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" identity"),i.s(i.f("hasThumbs",e,t,1),e,t,1,0,0,"")||i.b(" no-thumbs")}),e.pop()),a.b(" "),a.b(a.v(a.f("heroSize",e,t,0))),a.b(' universal"> <ul class="slides"> '),a.s(a.f("slides",e,t,1),e,t,0,170,195,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" <li>"),i.b(i.rp("<heroSlide0",e,t,"")),i.b("</li> ")}),e.pop()),a.b(" </ul> </div> "),a.s(a.f("identity",e,t,1),e,t,0,233,260,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<identityOverlayPartial1",e,t,""))}),e.pop()),a.b(" </div>"),a.fl()},partials:{"<heroSlide0":{name:"heroSlide",partials:{},subs:{}},"<identityOverlayPartial1":{name:"identityOverlayPartial",partials:{},subs:{}}},subs:{}}),Whiskers("modules.rich_image",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("image",e,t,1),e,t,0,10,403,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="bound"> '),i.s(i.f("data",e,t,1),e,t,0,39,245,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" '),i.s(i.f("age_gate",e,t,1),e,t,0,71,114,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' class="age-gated" data-age="'),i.b(i.v(i.f("age_gate",e,t,0))),i.b('" ')}),e.pop()),i.b(" "),i.s(i.f("event_value",e,t,1),e,t,0,144,177,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('data-event-link="'),i.b(i.v(i.f("event_value",e,t,0))),i.b('"')}),e.pop()),i.b(' title="'),i.b(i.v(i.f("title",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" target="_blank"> ')}),e.pop()),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="no-src" data-src="'),i.b(i.v(i.f("image",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,336,378,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("image",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(" </a> </div>")}),e.pop()),a.fl()},partials:{},subs:{}}),Whiskers("partials.hero_slide",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="branding"> <div class="scaler"></div> '),a.s(a.f("overlayLeft",e,t,1),e,t,0,66,137,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="left-overlay overlay"> <img src="'),i.b(i.v(i.f("overlayLeft",e,t,0))),i.b('"> </div> ')}),e.pop()),a.b(" "),a.s(a.f("overlayRight",e,t,1),e,t,0,171,244,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="right-overlay overlay"> <img src="'),i.b(i.v(i.f("overlayRight",e,t,0))),i.b('"> </div> ')}),e.pop()),a.b(" "),a.s(a.f("href",e,t,1),e,t,0,271,290,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('">')}),e.pop()),a.b(' <div class="background"> '),a.s(a.f("slide_image",e,t,1),e,t,0,341,452,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <img src="'),i.b(i.v(i.f("slide_image",e,t,0))),i.b('" '),i.s(i.f("event_value",e,t,1),e,t,0,385,418,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('data-event-link="'),i.b(i.v(i.f("event_value",e,t,0))),i.b('"')}),e.pop()),i.b(' alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> ')}),e.pop()),a.b(" "),a.s(a.f("noscript",e,t,1),e,t,0,482,539,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("hero",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"></noscript>')}),e.pop()),a.b(" </div> "),a.s(a.f("show_data",e,t,1),e,t,0,574,1268,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("section",e,t,1),e,t,0,587,631,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<h2 class="channel_section">'),i.b(i.v(i.f("section",e,t,0))),i.b("</h2>")}),e.pop()),i.b(' <div class="channel_mini_hero"> <div class="featured_channel_img"> <img src="'),i.b(i.v(i.f("asset_logo_image",e,t,0))),i.b('"> <p>'),i.b(i.v(i.f("watch_message",e,t,0))),i.b("</p> </div> "),i.s(i.f("featured_channel_shortDesc",e,t,1),e,t,0,807,970,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" class="featured_link"> <div class="featured_channel"> <img src="'),i.b(i.v(i.f("featured_content_image",e,t,0))),i.b('"> <p>'),i.b(i.v(i.f("featured_channel_shortDesc",e,t,0))),i.b("</p> </div> </a> ")}),e.pop()),i.b(" "),i.s(i.f("featured_channel_shortDesc",e,t,1),e,t,1,0,0,"")||i.b('<div class="no_desc_box"></div>'),i.b(' <div class="cds_box '),i.s(i.f("featured_channel_shortDesc",e,t,1),e,t,1,0,0,"")||i.b("notxt"),i.s(i.f("featured_channel_shortDesc",e,t,1),e,t,0,1214,1221,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" hastxt")}),e.pop()),i.b('"></div> </div> ')}),e.pop()),a.b(" "),a.s(a.f("animated",e,t,1),e,t,0,1296,1351,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("noVideoSupport",e,t,1),e,t,1,0,0,"")||i.b(i.rp("<videoPartial0",e,t,""))}),e.pop()),a.b(" "),a.s(a.f("href",e,t,1),e,t,0,1374,1378,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("</a>")}),e.pop()),a.b(" </div> "),a.s(a.f("show_data",e,t,1),e,t,1,0,0,"")||(a.b(' <div class="content '),a.b(a.v(a.f("contentPosition",e,t,0))),a.b('"> <div class="logo"> '),a.s(a.f("featured_content_image",e,t,1),e,t,0,1498,1563,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('"> <img src="'),i.b(i.v(i.f("featured_content_image",e,t,0))),i.b('"> </a> ')}),e.pop()),a.b(' <a href="'),a.b(a.v(a.f("href",e,t,0))),a.b('" class="heading"> <h2 class="'),a.b(a.v(a.f("editorialColor",e,t,0))),a.b('" '),a.s(a.f("headerColor",e,t,1),e,t,0,1674,1705,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('style="color: '),i.b(i.v(i.f("headerColor",e,t,0))),i.b(';"')}),e.pop()),a.b(">"),a.b(a.v(a.f("section",e,t,0))),a.b('</h2> <h3 class="'),a.b(a.v(a.f("editorialColor",e,t,0))),a.b('">'),a.b(a.v(a.f("featured_channel_shortDesc",e,t,0))),a.b("</h3> </a> "),a.s(a.f("buttons",e,t,1),e,t,0,1823,2474,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" class="button large blue" style="background-color: '),i.b(i.v(i.f("bg_top_color",e,t,0))),i.b("; background-image: -webkit-gradient(linear, left top, left bottom, from("),i.b(i.v(i.f("bg_bottom_color",e,t,0))),i.b("), to("),i.b(i.v(i.f("bg_top_color",e,t,0))),i.b(")); background-image: -webkit-linear-gradient(top, "),i.b(i.v(i.f("bg_bottom_color",e,t,0))),i.b(", "),i.b(i.v(i.f("bg_top_color",e,t,0))),i.b("); background-image: -moz-linear-gradient(top, "),i.b(i.v(i.f("bg_bottom_color",e,t,0))),i.b(", "),i.b(i.v(i.f("bg_top_color",e,t,0))),i.b("); background-image: -o-linear-gradient(top, "),i.b(i.v(i.f("bg_bottom_color",e,t,0))),i.b(", "),i.b(i.v(i.f("bg_top_color",e,t,0))),i.b("); background-image: linear-gradient(to bottom, "),i.b(i.v(i.f("bg_bottom_color",e,t,0))),i.b(", "),i.b(i.v(i.f("bg_top_color",e,t,0))),i.b("); "),i.s(i.f("border_color",e,t,1),e,t,0,2383,2418,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("border: 1px solid "),i.b(i.v(i.f("border_color",e,t,0))),i.b(";")}),e.pop()),i.b(" color: "),i.b(i.v(i.f("text_color",e,t,0))),i.b(';">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a> ")}),e.pop()),a.b(" </div> </div> ")),a.fl()},partials:{"<videoPartial0":{name:"videoPartial",partials:{},subs:{}}},subs:{}}),Whiskers("partials.hero_video",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<!-- begin video partial--> <div class="video-wrapper '),a.s(a.f("loopOption",e,t,1),e,t,0,69,76,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("looping")}),e.pop()),a.b(" "),a.s(a.f("loopOption",e,t,1),e,t,1,0,0,"")||a.b("single-play"),a.b('" '),a.s(a.f("event_value",e,t,1),e,t,0,151,184,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('data-event-link="'),i.b(i.v(i.f("event_value",e,t,0))),i.b('"')}),e.pop()),a.b("> <video "),a.s(a.f("loopOption",e,t,1),e,t,0,224,228,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("loop")}),e.pop()),a.b('> <source src="'),a.b(a.v(a.f("mp4",e,t,0))),a.b('" type="video/mp4"> <source src="'),a.b(a.v(a.f("webm",e,t,0))),a.b('" type="video/webm"> <img src="'),a.b(a.v(a.f("fallback",e,t,0))),a.b('"> </video> <!--<a class="sound-toggle on"></a>--> '),a.s(a.f("loopOption",e,t,1),e,t,1,0,0,"")||(a.b('<div class="replay-button-box '),a.b(a.v(a.f("contentPosition",e,t,0))),a.b(" "),a.b(a.v(a.f("editorialColor",e,t,0))),a.b('-theme"><a class="button transparent large replay" style="">Replay</a></div>')),a.b(" </div><!-- end video partial -->"),a.fl()},partials:{},subs:{}}),Whiskers("partials.hero_identity_overlay",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="personality-details '),a.b(a.v(a.f("contentPosition",e,t,0))),a.b(" "),a.b(a.v(a.f("portal",e,t,0))),a.b(" "),a.b(a.v(a.f("editorialColor",e,t,0))),a.s(a.f("style_options",e,t,1),e,t,0,99,128,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.d("style_options.text_style",e,t,0)))}),e.pop()),a.b('" style="background-color: '),a.b(a.v(a.f("darkColor",e,t,0))),a.b(';"> <h1 class="skip-text-styles" '),a.s(a.f("headerColor",e,t,1),e,t,0,235,266,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('style="color: '),i.b(i.v(i.f("headerColor",e,t,0))),i.b(';"')}),e.pop()),a.b(">"),a.b(a.v(a.f("title",e,t,0))),a.b("</h1> "),a.s(a.f("hasThumbs",e,t,1),e,t,0,312,618,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="headshot entity-container ratio-square"> <div class="personality-box entity-box"> <div class="aspect"> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="no-src" data-src="'),i.b(i.v(i.f("thumb",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,525,583,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("thumb",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(" </div> </div> </div> ")}),e.pop()),a.b(' <p class="desc '),a.b(a.v(a.f("contentPosition",e,t,0))),a.b(' skip-text-styles">'),a.b(a.v(a.f("description",e,t,0))),a.b("</p> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill.ModuleView,i=e.Disney,a=e.Grill,n=e.Whiskers,r=e.Modernizr,s=e.jQuery,o=e._,l=e.Backbone,c=e.EventLinkHandler,d=e.devicePixelRatio>1.5,u=i.Style.breakpoints,h=u.midHigh.toString(),f=a.ModuleView.extend({style_classes:["skip-styles","skip-bottom-border","skip-top-border","full-height","full-width"],template:n.modules.hero_universal,breakpoints:h,heroImg:"hero",wideImage:null,mobileImage:null,currentPlayer:void 0,current:void 0,oldPlayer:void 0,mergedObj:null,darkColor:null,identityThumbs:null,slideDelay:3e3,delayAfterVideo:4e3,showArrows:!0,showDots:!0,hidden:!1,topBorder:!1,initialize:function(){this.model.get("slide_timer")&&(this.slideDelay=1e3*this.model.get("slide_timer"));var e=this.model.get("data"),t=this.model.get("style_options"),i=this.model.collection.style,a=this,r=null;if(e.length>0&&"Hero"===e[0].type)this.darkColor=i&&i.secondary_theme&&i.secondary_theme.background_color,this.mergedObj={heroes:e},"Hero"!==s(e).slice(-1)[0].type&&(r=s(e).slice(-1)[0],this.mergedObj.heroes.pop(),this.identityThumbs="Character"===r.type||"Artist"===r.type),this.mergedObj.identity=r;else if(a.template=n.modules.rich_image,t&&t.images&&t.images.foreground_image){var o=t.images.foreground_image;a.wideImage=d&&o.retina_url?o.retina_url:o.url,a.mobileImage=d&&o.mobile_retina_url?o.mobile_retina_url:o.mobile_url?o.mobile_url:null}this.needsGuestContext()&&this.options.guest.retain()},destroy:function(){this.needsGuestContext()&&this.options.guest&&this.options.guest.release()},events:{"click [data-event-link]":function(e){e.preventDefault(),c.handle(e)}},render:function(){var t=this,i=this.model,a=i.get("data"),c=o.first(i.get("data")),h=i.get("style_options"),f=l.Resize.width(),p=f>=u.midHigh,m=f>=u.max,g=!!this.options.cds,v=o.extend({data:a,desktop:m,image:p?t.wideImage:t.mobileImage,cds:g,noVideoSupport:!r.video||r.mobile,darkColor:t.darkColor,heroSize:c?c.heroSize:null,layout:h.layout,contentPosition:c?c.contentPosition:null,slides:a,identity:function(){return t.mergedObj.identity?(o.extend(t.mergedObj.identity,{darkColor:t.darkColor,hasThumbs:t.identityThumbs,editorialColor:o.first(t.mergedObj.heroes).editorialColor,headerColor:o.first(t.mergedObj.heroes).titleColor||o.first(t.mergedObj.heroes).editorialColor}),t.mergedObj.identity):void 0},slide_image:function(){var e=this.image_assets;if(e){var t=d?e.retina:e.non_retina;return p?t.wide_src:t.mobile_src}},headerColor:function(){return this.titleColor}},this.options.ads.helpers(),i);this.$el.html(t.template.render(v,{heroSlide:n.partials.hero_slide,videoPartial:n.partials.hero_video,identityOverlayPartial:n.partials.hero_identity_overlay})),this.$(".slides").swipeasaurus({effect:f>=u.max?"fade":t.mergedObj&&t.mergedObj.heroes&&t.mergedObj.heroes.length>1?"slide":"fade",dots:this.showDots,arrows:this.showArrows}),s(e).on("scroll."+this.cid,o.throttle(o.bind(this.scrollCheck,this),300))},resize:function(){var t=this.$(".slides"),i=this,a=(t.data("swipeasaurus")||{}).index/s("li",t).length,n=[];this.$(".slides li.finished").each(function(e,t){n.push(s(t).index())}),t=i.$(".slides"),t.swipeasaurus("slide",e.Math.floor(a*s("li",t).length),!0),this.options.ads.restore(),t.swipeasaurus("stop"),this.render(),s(n).each(function(e){s(i.$(".slides li")[e]).addClass("finished")
}),this.geoReady()},geoReady:function(){this.takeover(0);var e=l.Resize.width();if(this.mergedObj&&this.mergedObj.identity&&this.mergedObj.identity.headerColor&&(e<u.midHigh?this.$(".details h1").css("color","#fff"):this.$(".details h1").css("color",this.mergedObj.identity.headerColor)),!(e<u.midHigh)){var t=this.$(".slides"),i=this.$(".button.replay"),a=this;a.current=s(".dot.active")[0]?s(".dot.active").index():0,i.on("click",function(e){e.preventDefault();var i=s(e.target).parent(".content").siblings(".branding").find("video")[0];s(i).closest("li").removeClass("finished"),t.swipeasaurus("stop"),a.resetSlide(s(e.target).closest(".slides li").index(),!0)}),t.on("slide",function(e,t){l.Resize.width()>=u.max&&a.takeover(t)}).swipeasaurus("start",a.slideDelay),a.onNewSlide(a.current);var n=function(e,t){t===a.current};t.on("slideEnd",n),a.scrollCheck()}},scrollCheck:function(){var t=this,i=this.$(".slides"),a=s(e).height(),n=t.$el.height(),r=t.$el.offset().top,o=s(e).scrollTop();t.hidden?("below"===t.hidden&&a+o>r+n/5||"above"===t.hidden&&r+n>o)&&(t.hidden=!1,t.currentPlayer&&("loop"===s(t.currentPlayer).attr("loop")?t.currentPlayer.play():t.onNewSlide(t.current)),i.swipeasaurus("resume")):o>r+n?(t.hidden="above",t.currentPlayer&&"loop"===s(t.currentPlayer).attr("loop")&&t.currentPlayer.pause(),i.swipeasaurus("pause")):r>a+o&&(t.hidden="below",t.currentPlayer&&"loop"===s(t.currentPlayer).attr("loop")&&t.currentPlayer.pause(),i.swipeasaurus("pause"))},pauseAndRewind:function(e){e.pause(),e.currentTime=0},startVideo:function(e){var t=this;e&&(e.play(),s(e).on("ended",function(){s(e).closest("li").addClass("finished"),t.showEndcard(e)}))},showEndcard:function(e){var t=this;s(e).closest("li").hasClass("finished")?l.Resize.width()>u.midHigh&&t.$(".slides").swipeasaurus("start",t.delayAfterVideo):(e.currentTime=e.duration,s(e).closest("li").addClass("finished"))},resetSlide:function(e,t){var i=this;s(i.$(".slides li")[e]).removeClass("finished");var a=s(i.$(".slides li")[e]).find("video")[0];a&&(i.pauseAndRewind(a),t&&i.startVideo(a))},onNewSlide:function(e){var t=this,i=t.$(".slides");t.current=e,l.Resize.width()>u.midHigh&&(t.oldPlayer&&t.oldPlayer!==t.currentPlayer&&(s(t.oldPlayer).closest("li").hasClass("finished")||(t.pauseAndRewind(t.oldPlayer),s(t.oldPlayer).closest(".video-wrapper").hasClass("single-play")&&t.showEndcard(t.oldPlayer))),s(t.$(".slides > li")[e]).find("video")&&(t.currentPlayer=s(t.$(".slides > li")[e]).find("video")[0]),t.oldPlayer=t.currentPlayer,t.hidden===!1&&(t.currentPlayer?s(t.currentPlayer).closest("li").hasClass("finished")||"loop"===s(t.currentPlayer).attr("loop")?("loop"===s(t.currentPlayer).attr("loop")&&t.startVideo(t.currentPlayer),i.swipeasaurus("start",t.slideDelay)):(i.swipeasaurus("stop"),t.startVideo(t.currentPlayer)):i.swipeasaurus("start",t.slideDelay)),l.Resize.width()>=u.max&&t.takeover(e))},takeover:function(e){var t=this.model.get("data"),a=t[e].takeover_styles;i.Style.applyTakeoverStyles(a,!0)},remove:function(){t.prototype.remove.call(this),s(e).off("scroll."+this.cid)}});f.register("hero_universal",{}),f.register("minihero",{heroImg:"minihero"}),f.register("channel_hero",{}),f.register("hero_slider",{}),f.register("empty_takeover",{}),f.register("rich_media",{className:"module bun full-height full-width",takeover:function(){},showArrows:!1,showDots:!1,hidden:"below",topBorder:!0})}(this),Whiskers("modules.image_gallery",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,3124,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div id="print-image"> <div class="print-frame"> <div class="img-wrapper"> <img> <div class="info"> <p class="caption skip-text-styles"></p> <p class="print-notice skip-text-styles"> &copy; 2015 Disney </p> </div> </div> </div> </div> <div class="gallery_header"> <div class="gallery_banner_container"> <div class="banner_img"> <div class="scaler"></div> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img data-src="'),i.b(i.v(i.f("banner",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,432,475,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("banner",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(' <h2 class="'),i.s(i.f("cds",e,t,1),e,t,0,508,521,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" gallery-noad")}),e.pop()),i.b('">'),i.b(i.v(i.f("gallery_title",e,t,0))),i.b('</h2> <span class="gallery_shade"></span> </div> </div> <div class="gallery_link_container'),i.s(i.f("cds",e,t,1),e,t,0,646,659,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" gallery-noad")}),e.pop()),i.b('"> <p class="description">'),i.b(i.v(i.f("description",e,t,0))),i.b('</p> <ul class="gallery_external_links"> '),i.s(i.f("parent_page",e,t,1),e,t,0,765,852,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li class="parent_page_link"><a href="'),i.b(i.v(i.f("parent_page",e,t,0))),i.b('">'),i.b(i.v(i.f("parent_page_title",e,t,0))),i.b("</a></li> ")}),e.pop()),i.b(' <li class="image-total">'),i.b(i.v(i.f("numImages",e,t,0))),i.b(" "),i.b(i.v(i.d("translations.images",e,t,0))),i.b("</li> "),i.b(" "),i.s(i.f("cds",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("suppress_social",e,t,1),e,t,1,0,0,"")||(i.b(' <li class="social"> '),i.s(i.f("cds",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.b(i.rp("<socialLinkPartial0",e,t,"")),i.b(" ")),i.b(" </li> ")),i.b(" ")),i.b(' </ul> </div> </div> <div class="gallery_ad">'),i.b(i.t(i.f("rectAllAd",e,t,0))),i.b('</div> <div id="gallery_thumb_grid"> <ul class ="img-cols"> '),i.s(i.f("thumbViewList",e,t,1),e,t,0,1250,1269,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.t(i.f("thumbViewList",e,t,0)))}),e.pop()),i.b(" "),i.s(i.f("thumbViewList",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.b(" "),i.s(i.f("noscript_images",e,t,1),e,t,0,1389,1416,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.rp("<partials/gallery_thumb1",e,t,""))}),e.pop()),i.b(" ")),i.b(" </ul> </div> "),i.s(i.f("show_pagination",e,t,1),e,t,0,1489,1729,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="static_pagination"> '),i.s(i.f("prev_page",e,t,1),e,t,0,1536,1610,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a href="?page='),i.b(i.v(i.f("prev_page",e,t,0))),i.b('" class="prev_page"> &laquo; Previous Page</a>')}),e.pop()),i.b(" "),i.s(i.f("next_page",e,t,1),e,t,0,1639,1707,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a href="?page='),i.b(i.v(i.f("next_page",e,t,0))),i.b('" class="next_page">Next Page&raquo;</a>')}),e.pop()),i.b(" </div> ")}),e.pop()),i.b(" "),i.s(i.f("hasMore",e,t,1),e,t,0,1762,1951,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="show_more_container"> <div class="show_more blue button large" role="button"> <span class="label">'),i.b(i.v(i.d("translations.show_more",e,t,0))),i.b('</span> <span class="spinner"></span> </div> </div> ')}),e.pop()),i.b(" "),i.b(' <div class="modal-window"> <div class="modal-header"></div> <div class="modal-content"> '),i.b(i.t(i.f("imageViewList",e,t,0))),i.b(' <div class="arrows"> <div class="arrow-sizer prev"><span class="arrow-prev clicon" data-title="prev"></span></div> <div class="arrow-sizer next"><span class="arrow-next clicon" data-title="next"></span></div> </div> </div> <div class="modal-footer"> '),i.s(i.f("cds",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("suppress_social",e,t,1),e,t,1,0,0,"")||(i.b(' <span class="social"> '),i.b(i.rp("<socialLinkPartial2",e,t,"")),i.b(" </span> ")),i.b(" ")),i.b(' <span class="print"></span> <span class="image-count"><span class="current-count">1</span> <span>'),i.b(i.v(i.d("translations.of",e,t,0))),i.b("</span> <span>"),i.b(i.v(i.f("numImages",e,t,0))),i.b('</span></span> </div> <div class="loading-status"><span>'),i.b(i.v(i.d("translations.loading",e,t,0))),i.b('...</span></div> <div class="modal-info"> <h2 class="modal-title skip-text-styles">'),i.b(i.v(i.f("gallery_title",e,t,0))),i.b('</h2> </div> <div class="modal-close clicon" data-title="close"></div> </div> <div class="modal-overlay"></div> ')}),e.pop()),a.fl()},partials:{"<socialLinkPartial0":{name:"socialLinkPartial",partials:{},subs:{}},"<partials/gallery_thumb1":{name:"partials/gallery_thumb",partials:{},subs:{}},"<socialLinkPartial2":{name:"socialLinkPartial",partials:{},subs:{}}},subs:{}}),Whiskers("partials.gallery_thumb",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<li class="gallery-item item thumb launches-modal '),a.s(a.f("active",e,t,1),e,t,0,61,67,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("active")}),e.pop()),a.b('" data-title="thumb" itemscope itemtype="http://schema.org/ImageObject"> <div class="center-crop"> <div class="img-aspect aspect'),a.s(a.f("preloaded",e,t,1),e,t,1,0,0,"")||a.b(" placeholder"),a.b('"> <a itemprop="contentURL" href="'),a.b(a.v(a.f("image_fog",e,t,0))),a.b('"> '),a.s(a.f("noscript",e,t,1),e,t,1,0,0,"")||(a.b('<img class="thumbnail-image '),a.s(a.f("preloaded",e,t,1),e,t,1,0,0,"")||a.b("no-src"),a.b('" title="'),a.b(a.v(a.f("seo_title",e,t,0))),a.b('" alt="'),a.b(a.v(a.f("seoCaption",e,t,0))),a.b('" data-src="'),a.b(a.v(a.f("thumbnail_image_fog",e,t,0))),a.b('" '),a.s(a.f("preloaded",e,t,1),e,t,0,465,489,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' src="'),i.b(i.v(i.f("preloaded_src",e,t,0))),i.b('"')}),e.pop()),a.b(' itemprop="thumbnailUrl">')),a.b(" "),a.s(a.f("noscript",e,t,1),e,t,0,555,702,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<noscript><img class="thumbnail-image" title="'),i.b(i.v(i.f("seo_title",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("seoCaption",e,t,0))),i.b('" src="'),i.b(i.v(i.f("thumbnail_image_fog",e,t,0))),i.b('" itemprop="thumbnailUrl"></noscript>')}),e.pop()),a.b(' <div class="active-indicator"></div> </a> </div> <div class="zoom-overlay" '),a.s(a.f("touchDevice",e,t,1),e,t,0,807,824,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' ontouchstart=" "')}),e.pop()),a.b('></div> </div> <meta itemprop="caption" content="'),a.b(a.v(a.f("caption",e,t,0))),a.b('"> <meta itemprop="name" content="'),a.b(a.v(a.f("seoTitle",e,t,0))),a.b('"> </li>'),a.fl()},partials:{},subs:{}}),Whiskers("partials.image_gallery_slide",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<li class="content-container item-'),a.b(a.v(a.f("slide",e,t,0))),a.b(" "),a.b(a.v(a.f("type",e,t,0))),a.b("-"),a.b(a.v(a.f("index",e,t,0))),a.b(" "),a.b(a.v(a.f("type",e,t,0))),a.b('" data-id="'),a.b(a.v(a.f("id",e,t,0))),a.b('"> <div class="image-info"> '),a.s(a.f("caption",e,t,1),e,t,0,128,166,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<p class="description">'),i.b(i.v(i.f("caption",e,t,0))),i.b("</p>")}),e.pop()),a.b(' </div> <div class="gallery-image-sizer"> '),a.s(a.f("ad",e,t,1),e,t,0,227,458,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="interstitial-container"> <div class="gallery_ad"><div class="ad-sizer"></div></div> </div> <p class="skip-ad"><span class="skip-prev"></span><span class="skip-text">'),i.b(i.v(i.f("skipText",e,t,0))),i.b('</span><span class="skip-next"></span></p>')}),e.pop()),a.b(" "),a.s(a.f("ad",e,t,1),e,t,1,0,0,"")||a.b(' <img class="gallery-image"> '),a.b(" </div> </li>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Disney,i=e.Math,a=e.jQuery;t.Style.fitToScreen=function(e){if(e){var t=e[0],n=t&&t.item,r=t.height/t.width||0,s=t.limitMax,o=e[1],l=e[2]&&e[2].height()||0,c=e[3],d=c&&c.height()||0,u=e[4]||.5,h=o.height(),f=h-l-d,p=o.width(),m=s?t.width:i.min(f/r,p),g=s?t.height:m*r,v=i.max(i.abs(f-g)*u,0),b=v+g;c.css({top:b}),n&&a(n).css({height:g,width:m,top:v})}}}(this),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=e.Modernizr,r=e.Whiskers,s=e.Backbone,o=e.Tracker,l=e._,c=e.jQuery,d=e.history;t.ModuleView.register("image_gallery",{style_classes:["skip-top-border"],page:1,currentImage:0,currentSlide:0,autoPaginate:!0,imageIds:[],resizeParams:{},adjacents:[],template:r.modules.image_gallery,social_link:r.partials.social_link,events:{"click .modal-close":function(){this.closeModal()},"click .skip-ad":function(e){var t=this.$(".modal-slides");t.swipeasaurus(c(e.target).hasClass("skip-prev")?"prev":"next")},"click .gallery-item":function(e){e.preventDefault();var t=c(e.target).closest(".gallery-item").index();this.openModal(t)},"click .show_more_container":function(){this.loadMoreThumbs(),o&&this.cleanPageName&&o.page({pageName:this.cleanPageName+"_"+this.page})},"click .print":function(){this.printExclusive()},"touchstart .print":function(){this.printExclusive()}},printExclusive:function(){c("body").addClass("exclusive-print"),e.print()},initializeModalAd:function(e){var t=this.options.ads.tag("modalInterstitial"),i=e.$el.find(".interstitial-container .gallery_ad");i.html(t),this.options.ads.slots.modalInterstitial.ready(),this.modalAd=i},initialize:function(){var e=this,i=!!this.options.cds,a=l.first(this.model.get("data")),o=a.gallery_images;l.extend(this,{touchDevice:n.touch,cds:i,allThumbs:o,numImages:o.length,modalImages:[],visibleThumbs:o&&o.slice(0,this.page*this.numPerBatch()),adInterval:i?null:a.adInterval});var d=this.adInterval;this.adDivisor=d?d:1e3,c.each(this.allThumbs,function(t,i){e.imageIds.push(i.id),i.index=t,i.slide=e.modalImages.length,i.type="image",e.modalImages.push(i),d&&(t+1)%e.adDivisor===0&&e.modalImages.push({type:"ad",index:Math.floor(t/e.adDivisor),ad:!0,slide:e.modalImages.length,skipText:"Skip ad"})}),this.numSlides=e.modalImages.length,this.thumbCollection=new s.LazyCollection(this.visibleThumbs),this.modalCollection=new s.LazyCollection(this.modalImages),this.thumbViewList=new t.ListView({collection:this.thumbCollection,template:{render:function(e){return r.partials.gallery_thumb.render(e,{})}}}),this.imageViewList=new t.ListView({className:"modal-slides",collection:this.modalCollection,template:{render:function(e){return l.extend(e,{imgSrc:function(){return this.get(s.Resize.width()<=568?"mobile_image":"image")}}),r.partials.image_gallery_slide.render(e,{})}}}),c.each(this.imageViewList.views,function(e,t){t.printSrc=t.model.get("image")||null});var u=this.model.collection;u&&u.cto&&(this.cleanPageName=u.cto.pageName,u.cto.pageName+="_1",u.cto.breadcrumbs="image-gallery")},render:function(){var e=this.thumbViewList,t=this.imageViewList,a=this.model.get("translations"),n={images:"Images"};l.defaults(a,n);var s=l.extend(this.options.ads.helpers(this.model.toJSON()),this.model,{numImages:this.numImages,hasMore:this.hasMore(),cds:this.cds,thumbViewList:i.placeHtml(e),imageViewList:i.placeHtml(t),translations:a});this.$el.html(this.template.render(s,{socialLinkPartial:r.partials.social_btn})),i.placeSwap(this,e),i.placeSwap(this,t)},ready:function(){var t=this,i=this.slides=this.$(".modal-slides");i.swipeasaurus({arrows:!0,next:".arrow-next",prev:".arrow-prev",loop:!1,speed:500}),this.$(".content-container").css("visibility","hidden"),i.on("slide",function(e,i){t.onSlide(i)}),this.updateButton(!1),c("body").addClass(this.hoverClass),c("html").addClass("single-page-print");var a=27,n=37,r=39;c(e.document).keyup(function(e){switch(e.keyCode){case a:c(".modal-window .modal-close").trigger("click");break;case n:i.swipeasaurus("prev");break;case r:i.swipeasaurus("next")}}),this.modalAd=c(".interstitial-container .gallery_ad").first(),this.deepLink()},deepLink:function(){var t=e.location.href.match(/[?&]image_id=([^&]+)#?/)||[],i=e.location.hash.match(/image\/([a-z0-9]*)/)||[],a=t[1]||i[1],n=a&&a.length?this.imageIds.indexOf(a):-1;n>=0&&(this.autoPaginate=!1,this.openModal(n))},dimensions:function(){var e=s.Resize.width(),t=e>=a.max?"desktop":e>=a.midHigh?"tablet":"mobile",i={desktop:4,tablet:3,mobile:2},n={desktop:3,tablet:3,mobile:3},r={cols:i[t],rows:n[t]};return r},numPerBatch:function(){return this.dimensions().rows*this.dimensions().cols},bindResize:function(t){var a=this,n=a.fetchAdjacents(),r=function(){i.Style.fitToScreen(a.fetchResizeParams(t)),n.length>0&&c(n).each(function(e,t){i.Style.fitToScreen(a.fetchResizeParams(t))})};c(e).on("resize."+this.cid+"slide"+t,l.debounce(r,100))},unbindResize:function(t){c(e).off("resize."+this.cid+"slide"+t)},setResizeParams:function(e,t){var i=t.$el,a=this.$(".modal-window"),n=this.$(".modal-header"),r=i.find(".image-info"),s=.46,o="item"+t.model.get("slide");return this.resizeParams[o]=[e,a,n,r,s],this.resizeParams[o]},fetchResizeParams:function(e){return this.resizeParams["item"+e]},fetchAdjacents:function(){return this.adjacents},itemLoaded:function(e){var t=!1;if(!e.model.get("ad")){var i=e.$el.find("img")[0];t=i&&!!i.src}return t},preloadItem:function(t){var i=this,a=t.model,n=!!a.get("ad");if(n)i.insertNewItem(t);else{var r=a.get(s.Resize.width()<=568?"mobile_image":"image"),o=new e.Image;o.className="gallery-image",o.src=r,o.complete?i.insertNewItem(t,o):c(o).on("load",function(){i.insertNewItem(t,o)})}},insertNewItem:function(e,t){var i;if(e.model.get("ad"))i=this.modalAd;else{var a=e.$el.find("img")[0]||null;a&&t&&c(a).replaceWith(t),i=t}this.sizeItem(i,e),this.$(".modal-window").removeClass("loading")},onSlide:function(t){var a=this,n=this.$(".modal-window"),r=this.$(".modal-footer .social-link-btn"),s=this.viewForIndex(t),u=s.$el.data("id"),h=s.model,f=h.get("ad"),p=t<this.numSlides-1?t+1:null,m=t>0?t-1:null,g={next:p,prev:m},v=e.document.title;a.itemLoaded(s)||(this.preloadItem(s),f||n.addClass("loading")),this.unbindResize(this.currentSlide),this.bindResize(t),this.adjacents=g,l.extend(this,{currentImage:h.get("index"),currentSlide:t,currentView:s}),this.$(".current").removeClass("current"),s.$el.addClass("current"),f?(this.modalAd.find(".ad-sizer").length>0&&this.initializeModalAd(s),this.insertAd(s)):a.autoPaginate&&this.currentImage>=this.visibleThumbs.length&&this.loadMoreThumbs(),c.each(g,function(e,t){if(t){var n=a.viewForIndex(t);a.itemLoaded(n)?i.Style.fitToScreen(a.fetchResizeParams(t)):a.preloadItem(n)}}),this.setNewText(s),this.insertPrintData(s),s.$el.css("visibility","visible"),s.$el.css("opacity",1),n.hasClass("first-shown")&&e.setTimeout(function(){a.$(".modal-window").removeClass("first-shown")},800),i.Style.fitToScreen(a.fetchResizeParams(t)),o&&this.cleanPageName&&o.page({pageName:this.cleanPageName}),d&&d.replaceState&&d.replaceState({},v,u?"?image_id="+s.$el.data("id"):"?"),r.data("source",e.location.href),r.data("thumb",s.printSrc)},centerThumb:function(e){var t=e.outerHeight(),i=e.offset().top,a=t/2,n=Math.max(i-a,0);c("body").stop(!0).animate({scrollTop:n},1e3)},setNewText:function(e){var t=parseInt(e.model.get("index"),10),i=this.fetchAdjacents().next,a=this.fetchAdjacents().prev,n=i?this.viewForIndex(i).model:e.model,r=a?this.viewForIndex(a).model:e.model,s=e.model.get("ad"),o=this.$(".modal-window");s?o.addClass("ad-view"):(this.$(".modal-window .current-count").html(t+1),o.removeClass("ad-view")),this.$(".modal-window .arrow-prev").data({currentitem:i?n.get("index"):this.numSlides,viewtype:n.get("type")}),this.$(".modal-window .arrow-next").data({currentitem:a?r.get("index"):0,viewtype:r.get("type")})},sizeItem:function(t,i){var a,n,r,s=this;if(t===this.modalAd){var o=t.find(".ad-sizer, .gpt, .admaster");a=o.height(),n=o.width(),r=!0,this.fitToScreen(n,a,r,t,i)}else{var l=new e.Image;l.addEventListener("load",function(){a=l.height,n=l.width,r=!1,s.fitToScreen(n,a,r,t,i)},!1),l.src=t.src}},fitToScreen:function(e,t,a,n,r){var s={height:t,width:e,limitMax:a,item:n};r.aspectRatio=t/e,i.Style.fitToScreen(this.setResizeParams(s,r)),this.$(".modal-window").removeClass("loading")},openModal:function(e){var t=e+Math.floor(e/this.adDivisor),i=this.viewForIndex(t),a=this.$(".modal-slides"),n=this.$(".modal-window");n.addClass("first-shown"),a.swipeasaurus("effect","fade"),this.onSlide(t),a.swipeasaurus("slide",t),a.swipeasaurus("effect","slide"),n.addClass("modal-show"),i.$el.css("visibility","visible"),c("html").addClass("modal-no-scroll")},closeModal:function(){var t=this;if(this.$(".modal-window .modal-close").data("currentitem",this.currentImage),this.$(".modal-window").removeClass("modal-show loading"),this.$(".gallery-item.active").removeClass("active"),this.$(".content-container").css("visibility","hidden"),c("html").removeClass("modal-no-scroll"),d&&d.replaceState&&d.replaceState({},e.document.title,"?"),t.autoPaginate){var i=this.thumbViewList.collection.at(t.currentImage);i.set({active:!0}),t.storeModelThumb(i,i.get("thumb")),e.setTimeout(function(){t.thumbViewList.collection.at(t.currentImage).set("active",!1)},1200),this.centerThumb(this.thumbViewList.views[this.currentImage].$el)}else t.autoPaginate=!0;this.unbindResize(this.currentSlide),this.cds||this.refreshAd("rectAll")},updateButton:function(e){this.$el.toggleClass("loading",e).toggleClass("has-more",this.hasMore())},hasMore:function(){return this.page*this.numPerBatch()<this.numImages},loadMoreThumbs:function(){this.page++,this.updateButton(!0),this.visibleThumbs=this.allThumbs.slice(0,this.page*this.numPerBatch()),this.thumbViewList.collection.add(this.visibleThumbs),this.updateButton(!1),this.$el.loadLazyImages()},insertAd:function(e){var t=this.modalAd.detach();e.$el.find(".interstitial-container").html(t),this.refreshAd("modalInterstitial")},refreshAd:function(e){this.options.ads.slots[e].refresh()},viewForIndex:function(e){return this.imageViewList.views[e]},remove:function(){this.unbindResize(this.currentSlide),c("body").removeClass(this.hoverClass),c("html").removeClass("single-page-print"),t.ModuleView.prototype.remove.call(this)},insertPrintData:function(e){var t=c("#print-image img")[0],i=e.printSrc,a=e.model.get("caption");t&&(t.src=i),c("#print-image .caption").html(a)}})}(this),Whiskers("modules.image_gallery_inline",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,517,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="bound '),i.b(i.v(i.f("entity_type",e,t,0))),i.b('"> <div class="inline-gallery"> <div class="gallery-content"> '),i.b(i.t(i.f("imageViewList",e,t,0))),i.b(' <div class="arrows"> <div class="arrow-sizer prev"><span class="arrow-prev clicon" data-title="prev"></span></div> <div class="arrow-sizer next"><span class="arrow-next clicon" data-title="next"></span></div> </div> </div> <div class="image-info"> <p class="description"></p> <span class="image-count base-color"><span class="current-count">1</span>/'),i.b(i.v(i.f("numImages",e,t,0))),i.b("</span> </div> </div> </div> ")}),e.pop()),a.fl()},partials:{},subs:{}}),Whiskers("partials.image_gallery_inline_slide",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<li class="content-container item-'),a.b(a.v(a.f("slide",e,t,0))),a.b(" "),a.b(a.v(a.f("type",e,t,0))),a.b("-"),a.b(a.v(a.f("index",e,t,0))),a.b(" "),a.b(a.v(a.f("type",e,t,0))),a.b('" data-id="'),a.b(a.v(a.f("id",e,t,0))),a.b('"> <img class="gallery-image"> </li>'),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=e.Whiskers,n=e.Backbone,r=e.Tracker,s=e._,o=e.jQuery,l=i.Style.breakpoints,c=s.values(l);t.ModuleView.register("image_gallery_inline",{style_classes:["skip-top-border"],template:a.modules.image_gallery_inline,breakpoints:c.join(" "),initialize:function(){var e=this,i=s.first(this.model.get("data")),r=i.gallery_images;s.extend(this,{allImages:r,numImages:r.length,galleryImages:[],cmsID:i.id}),o.each(this.allImages,function(t,i){i.index=t,i.type="image",e.galleryImages.push(i)}),this.galleryCollection=new n.LazyCollection(this.galleryImages),this.imageViewList=new t.ListView({className:"inline-gallery-slides",collection:this.galleryCollection,template:{render:function(e){return s.extend(e,{imgSrc:function(){return this.get(n.Resize.width()<=568?"mobile_image":"image")}}),a.partials.image_gallery_inline_slide.render(e,{})}}})},render:function(){var e,t=this.imageViewList;e=s.extend(this.model,{numImages:this.numImages,cds:this.cds,imageViewList:i.placeHtml(t)}),this.$el.html(this.template.render(e)),i.placeSwap(this,t)},ready:function(){var t=this,a=this.$(".inline-gallery-slides"),n=this.model.get("style_options"),r=e.devicePixelRatio>1.5,s=this.viewForIndex(0);if(a.swipeasaurus({arrows:!0,next:".arrow-next",prev:".arrow-prev",loop:!1,speed:500,rtl:i.rtl}),a.on("slide",function(e,i){t.onSlide(i)}),n&&n.custom_arrow_icon){var o=n&&n.custom_arrow_icon,l=r&&o.retina?o.retina:o.normal||o.retina;this.$(".arrow-sizer > span").css("background-image","url('"+l+"')")}this.preloadItem(s),this.trackImage(s),this.setNewText(s)},resize:function(){var e=this.$(".content-container"),t=this.$(".gallery-image")[0].clientHeight,i=this.$(".description").text();e.css("line-height",t+"px"),n.Resize.width()<=l.midHigh&&this.$(".image-count").toggleClass("no-caption",!i.length)},itemLoaded:function(e){return!!e.$el.find("img").attr("src")},preloadItem:function(t){var i,a,r,s=this,l=t.model;i=l.get(n.Resize.width()<=568?"mobile_image":"image"),a=new e.Image,0!==t.model.get("index")&&a.addEventListener("load",function(){r=Math.floor(t.$el[0].clientWidth*a.height/a.width),r>t.$el[0].clientHeight&&t.$el.addClass("tall-image")},!1),a.className="gallery-image",a.src=i,a.complete?s.insertNewItem(t,a):o(a).on("load",function(){s.insertNewItem(t,a)})},insertNewItem:function(e,t){var i;i=e.$el.find("img")[0],i&&t&&o(i).replaceWith(t),0===e.model.get("index")&&this.$(".content-container").css("line-height",e.$el[0].clientHeight+"px"),this.$(".inline-gallery").removeClass("loading")},onSlide:function(e){var t=this,i=this.$(".inline-gallery"),a=this.viewForIndex(e),n=e<this.numImages-1?e+1:null,r=e>0?e-1:null,s={next:n,prev:r};t.itemLoaded(a)||(this.preloadItem(a),i.addClass("loading")),this.$(".current").removeClass("current"),a.$el.addClass("current"),o.each(s,function(e,i){if(i){var a=t.viewForIndex(i);t.itemLoaded(a)||t.preloadItem(a)}}),this.setNewText(a),this.trackImage(a)},setNewText:function(e){var t=e.model.get("index"),i=e.model.get("caption");this.$(".image-info").css("display","none"),n.Resize.width()<=l.midHigh&&this.$(".image-count").toggleClass("no-caption",!i.length),this.$(".description").html(i),this.$(".current-count").html(t+1),this.$(".image-info").fadeIn("slow")},viewForIndex:function(e){return this.imageViewList.views[e]},trackImage:function(e){var t=e.model,i=t.get("title"),a=i.toLowerCase().replace(/\s+/g,"");r.trackEvent({engagementType:"inlinegallery_"+this.cmsID+"_"+a})}})}(this),Whiskers("modules.junior_nav",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b("<ul> "),a.s(a.f("data",e,t,1),e,t,0,14,213,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li class="'),i.b(i.v(i.f("ref_title_slug",e,t,0))),i.b('"> <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" title="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> <span class="nav-icon '),i.b(i.v(i.f("ref_title_slug",e,t,0))),i.b('-icon"></span> <span class="title '),i.b(i.v(i.f("ref_title_slug",e,t,0))),i.b('-title">'),i.b(i.v(i.f("title",e,t,0))),i.b("</span> </a> </li> ")}),e.pop()),a.b(" </ul>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e._,n=["nav-link-games","nav-link-video","nav-link-create","nav-link-activities","nav-link-watch-live","nav-link-junior-logo","nav-link-home","nav-link-grown-ups","nav-link-parents","nav-link-stories"];t.ModuleView.register("junior_nav",{template:i.modules.junior_nav,navLinks:[],initialize:function(){this.setNavLinks()},setNavLinks:function(){var e=this;a.each(this.model.get("data"),function(t){t.ref_title_slug&&a.contains(n,t.ref_title_slug)&&e.navLinks.push(t)})},render:function(){var e={data:this.navLinks};this.$el.html(this.template.render(e,{}))}})}(this),Whiskers("modules.landing",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,290,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="bound"> <div class="landing-box '),i.b(i.v(i.f("landingClass",e,t,0))),i.b('"> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="no-src landing" data-src="'),i.b(i.v(i.f("landingImg",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,183,262,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("landingImg",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" class="landing"></noscript>')}),e.pop()),i.b(" </div> </div> ")}),e.pop()),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e.Backbone,o=e._,l=t.BunView.extend({style_classes:["full-width","full-height"],template:r.modules.landing,breakpoints:n,takeover:function(){var e=this.model.get("data"),t=o.first(e).takeover_styles;i.Style.applyTakeoverStyles(t,!0)},render:function(){var t=this.model.data.first(),i=s.Resize.width()>=a.midHigh,n=e.devicePixelRatio>1.5,r=t.get("image_assets")||{},l=n?r.retina:r.non_retina,c=o.extend({landingClass:i&&"wide",landingImg:i?l.wide_src:l.mobile_src},this.options.ads.helpers(),this.model);this.$el.html(this.template.render(c)),this.takeover()},resize:function(){this.render(),this.options.ads.restore()},geoReady:function(){this.takeover()}});l.register("landing",{}),l.register("youtube",{})}(this),Whiskers("modules.live",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="video_wrapper" class="inverted"> <div class="bound"> <div class="scaler"></div> <div class="live player" id="live_watch_player" width="100%" height="100%" vp:wmode="direct" vp:pfallback="flash" vp:autoplay="true" vp:preloader="http://cdn.edgedatg.com/vp2/m/vp2k/1.0.0/prod/preloader.swf"> </div> </div>'),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Disney,i=e.flashembed,a=t.Capabilities={MIN_FP_VERSION:[9,0],isHTML5Capable:function(){return e.Modernizr.canvas},isFlashCapable:function(e){var t=e||a.MIN_FP_VERSION;return i.isSupported(t)},isMobileBrowser:function(){return e.navigator.userAgent.match(/(ipod|iphone|ipad|android|silk|iemobile)/i)},isiOSBrowser:function(){return e.navigator.userAgent.match(/(ipod|iphone|ipad)/i)},isAndroidBrowser:function(){return e.navigator.userAgent.match(/(android)/i)},isKindleBrowser:function(){return e.navigator.userAgent.match(/(kindle|silk)/i)}}}(this),function(e){"use strict";function t(){e.flashembed=d}function i(t){t.providerId||(e.location.href=p[n].url)}function a(){}var n,r=e.Grill,s=e._,o=e.jQuery,l=e.Whiskers,c=e.Modernizr,d=e.flashembed,u=e.Math,h=!1,f=!1,p={dch:{url:"/collections/disney-channel-4befcbb33c18eb29118e2222",id:"9723272"},xd:{url:"/collections/disney-xd-4befcbb5e4276b29118e2222",id:"9723252"},djr:{url:"/collections/disney-junior-4befcbb481d3cb29118e2222",id:"9723262"}},m=function(){if(f&&h)if(c.flash&&!c.mobile){o("#live_watch_player").attr("vp:config",p[n].id);var r=e.com.disney.datg.videoplatforms.vp2k.PlayerManager.create("live_watch_player");r.on(r.PROVIDERSELECT,i),r.on(r.PROVIDERDIALOG,a),r.on(r.LOADSTART,t)}else o("#live_watch_player").html('<div class="player_error">Sorry, but your device does not support watching live TV.</div>')};r.BunView.register("live_watch",{initialize:function(){var t=this;t.h=o(e).on("resize.live_watch",s.throttle(function(){var i=o(e).height();i!==t.h&&(t.h=i,t.layout())},100)).height();var i=this.model.get("data")[0].title.toLowerCase();n=-1!==i.indexOf("junior")?"djr":-1!==i.indexOf("xd")?"xd":"dch",o("document").ready(function(){o.ajax("http://cdn.edgedatg.com/vp2/m/vp2k/1.0.0/prod/embed.js?prod=true",{dataType:"script",cache:!0,success:function(){f=!0,e.setTimeout(m,0)}})})},render:function(){this.$el.html(l.modules.live.render())},ready:function(){h=!0,e.setTimeout(m,0)},layout:function(){var e=this.$("#video_wrapper .bound");e.css("maxWidth",u.min(1280,u.max(320,u.ceil((this.h-120)/.5625))))},remove:function(){}})}(this),Whiskers("partials.logo",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<a href="'),a.b(a.v(a.f("href",e,t,0))),a.b('" title="Disney '),a.b(a.v(a.f("title",e,t,0))),a.b('" class="nav-logo'),a.s(a.f("hide_logo",e,t,1),e,t,0,73,87,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" disable_image")}),e.pop()),a.b('"'),a.s(a.f("logo_override",e,t,1),e,t,0,120,197,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' id="nav-logo-override"> <img src="'),i.b(i.v(i.f("logo_override",e,t,0))),i.b('" alt="Disney '),i.b(i.v(i.f("title",e,t,0))),i.b('">')}),e.pop()),a.s(a.f("logo_override",e,t,1),e,t,1,0,0,"")||(a.b('id="nav-logo"><span>'),a.b(a.v(a.f("title",e,t,0))),a.b("</span> ")),a.b("</a>"),a.fl()},partials:{},subs:{}}),Whiskers("modules.navigation.channels",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="nav-local-channels" class="nav-local '),a.b(a.v(a.f("style",e,t,0))),a.b('"> <div class="'),a.b(a.v(a.f("style",e,t,0))),a.b('-bound"> <div class="'),a.b(a.v(a.f("style",e,t,0))),a.b('-bg"> '),a.b(a.rp("<logo0",e,t,"")),a.b(' <span id="nav-e" role="button" title="Navigate"></span> <ul class="pages"> '),a.s(a.f("links",e,t,1),e,t,0,210,269,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li><a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a></li> ")
}),e.pop()),a.b(' </ul> <div class="channel-slider-container '),a.b(a.v(a.f("style",e,t,0))),a.b('"> <div class="peek"></div> <div class="channel-slider '),a.b(a.v(a.f("style",e,t,0))),a.b('"> '),a.s(a.f("slider",e,t,1),e,t,0,410,705,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="images"> '),i.s(i.f("page",e,t,1),e,t,0,441,688,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" title="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> <div class="image-box-nav"> <img src="'),i.b(i.v(i.f("asset_thumbnail_image",e,t,0))),i.b('" class="image-nav" id="'),i.b(i.v(i.f("id",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" /> <img src="'),i.b(i.v(i.f("asset_thumbnail_hover_image",e,t,0))),i.b('" class="image-over" id="'),i.b(i.v(i.f("id",e,t,0))),i.b('-over" /> </div> </a> ')}),e.pop()),i.b(" </div> ")}),e.pop()),a.b(' </div> </div> </div> </div> <span id="search_cancel_text">'),a.b(a.v(a.f("search_cancel_text",e,t,0))),a.b("</span> </div>"),a.fl()},partials:{"<logo0":{name:"logo",partials:{},subs:{}}},subs:{}}),Whiskers("modules.navigation.disneychannelde",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="nav-local-channels" class="nav-local '),a.b(a.v(a.f("style",e,t,0))),a.b('"> <div class="'),a.b(a.v(a.f("style",e,t,0))),a.b('-bound"> <div class="'),a.b(a.v(a.f("style",e,t,0))),a.b('-bg"> '),a.b(a.rp("<logo0",e,t,"")),a.b(' <span id="nav-e" role="button" title="Navigate"></span> <ul class="pages"> '),a.s(a.f("links",e,t,1),e,t,0,210,269,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li><a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a></li> ")}),e.pop()),a.b(' </ul> </div> </div> <span id="search_cancel_text">'),a.b(a.v(a.f("search_cancel_text",e,t,0))),a.b("</span> </div>"),a.fl()},partials:{"<logo0":{name:"logo",partials:{},subs:{}}},subs:{}}),Whiskers("modules.navigation.matterhorn",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="nav-local" class="nav-local '),a.s(a.f("exclude_from_desktop",e,t,1),e,t,0,62,83,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("excluded_from_desktop")}),e.pop()),a.b(" "),a.s(a.f("exclude_local_chrome",e,t,1),e,t,0,134,155,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" exclude-local-chrome")}),e.pop()),a.b('"> <div class="bound"> '),a.b(a.rp("<logo0",e,t,"")),a.b(' <span id="nav-e" role="button" title="Navigate"></span> <ul> '),a.s(a.f("links",e,t,1),e,t,0,284,327,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li><a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a></li> ")}),e.pop()),a.b(' </ul> <span id="search_cancel_text">'),a.b(a.v(a.f("search_cancel_text",e,t,0))),a.b("</span> </div> </div>"),a.fl()},partials:{"<logo0":{name:"logo",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.$,i=e.Backbone,a=e.GOC||{queue:[]},n=e.Grill,r=e.Disney.Style.breakpoints,s=e.Whiskers;n.ModuleView.register("local_chrome",{breakpoints:r.chromeMax,index:0,ready:function(){this.index=this.$el.index(),this.$el.find("#nav-e").click(function(e){e.preventDefault(),a.queue.push(["openMenu"])});var i=this.model.get("navigation");if("channels"===i.template){if(t("#nav-local-channels a[href]").each(function(){t(this).toggleClass("active",this.href===e.location.href)}),t(e).width()>=1024){var r=t("#nav-local-channels .channel-slider"),s=r.hasClass("channel")?.09:.045;r.swipeasaurus({arrows:!0,loop:!0,right:s})}this.$el.find(".channel-bg > .pages > li > a, .xd-bg > .pages > li > a").each(function(){var e=t(this),i=e.html(),a=i.split(" "),n='<span class="firstWord">'+a[0]+"</span><br />";a.shift(),t.each(a,function(e,t){n+=" "+t}),e.html(n)})}else t("#nav-local li a[href]").each(function(){t(this).toggleClass("active",this.href===e.location.href)});n.ModuleView.create("search_navigation"),this.resize()},render:function(){var e=this.model.get("navigation"),t=s.modules.navigation[e.template];this.$el.html(t.render(e,{logo:s.partials.logo}))},resize:function(){var e=i.Resize.width();if(e<r.chromeMax)this.$el.parent().prepend(this.$el);else if(this.index!==this.$el.index()){var t=this.$el.parent().children();this.index>=t.size()-1?this.$el.parent().append(this.$el):this.$el.insertBefore(t.eq(this.index+1))}}})}(this),function(e){"use strict";var t=e.Disney,i=t.Style.breakpoints,a=e.Backbone,n=t.ForegroundHelper=t.ForegroundHelper||{};n.image=function(t){var n=a.Resize.width()>=i.midHigh,r=e.devicePixelRatio>1.5,s=(t||{}).foreground_image||{},o=s.retina_url||s.url,l=r?o:s.url,c=s.mobile_retina_url||s.mobile_url,d=r?c:s.mobile_url;return n?l:d}}(this),Whiskers("modules.login_gated",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("image",e,t,1),e,t,0,10,347,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="bound"> '),i.s(i.f("data",e,t,1),e,t,0,39,331,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="phase-1"> <a href="" title="'),i.b(i.v(i.f("title",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" target="_blank"> <img class="no-src" data-src="'),i.b(i.v(i.f("image",e,t,0))),i.b('"> </a> </div> <div class="phase-2"> <a href="'),i.b(i.v(i.f("printable_asset",e,t,0))),i.b('" target="_blank"> <img data-src="'),i.b(i.v(i.f("poster",e,t,0))),i.b('" class="no-src" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" width="100%"> </a> </div> ')}),e.pop()),i.b(" </div>")}),e.pop()),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Disney,i=t.Style.breakpoints,a=i.midHigh.toString(),n=e.Grill,r=e.Whiskers,s=e._;n.ModuleView.register("login_gated",{breakpoints:a,style_classes:["full-width","full-height","skip-bottom-border","skip-top-border"],template:r.modules.login_gated,render:function(){var e=this,i=s.first(e.model.get("data")),a=(e.model.get("style_options")||{}).images,n=t.ForegroundHelper.image(a),r=s.extend({image:n,data:i},e.model);e.$el.html(e.template.render(r))},initialize:function(){this.options.guest.retain()},destroy:function(){this.options.guest&&this.options.guest.release()},events:{"click .phase-1":function(e){e.preventDefault();var t=this,i=t.options.guest.login();i.then(function(){t.$(".phase-1").fadeOut(300,function(){t.$(".phase-2").fadeIn(300)})})}},resize:function(){this.render()}})}(this),Whiskers("modules.menu_links",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="nav-pushdown"></div> <div class="menu-wrap hidden"> <div class="bound"> <span id="nav-e" role="button" title="Navigate"></span> <ul class="menu"> '),a.s(a.f("links",e,t,1),e,t,0,165,474,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li class="'),i.b(i.v(i.f("slug",e,t,0))),i.b('" data-path="'),i.b(i.v(i.f("path",e,t,0))),i.b('"> <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" title="'),i.b(i.v(i.f("title",e,t,0))),i.b('" class="logo_'),i.b(i.v(i.f("slug",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b('</a> <ul class="submenu"> '),i.s(i.f("children",e,t,1),e,t,0,316,448,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li data-path="'),i.b(i.v(i.f("path",e,t,0))),i.b('"> <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" title="'),i.b(i.v(i.f("title",e,t,0))),i.b('"><span class="submenu-icon icon_'),i.b(i.v(i.f("slug",e,t,0))),i.b('"></span>'),i.b(i.v(i.f("title",e,t,0))),i.b("</a> </li> ")}),e.pop()),i.b(" </ul> </li> ")}),e.pop()),a.b(" </ul> </div> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.$,i=e.Grill,a=e.GOC||{queue:[]},n=e.Backbone,r=e.Disney,s=r.Style.breakpoints;i.ModuleView.register("menu_links",{breakpoints:s.chromeMax,style_classes:["span-full-screen"],markup:t(".module.menu_links").html(),events:{"click #nav-e":function(){a.queue.push(["openMenu"])}},render:function(){this.$el.html(this.markup),this.toggleID(),this.$(".menu-wrap").removeClass("hidden")},ready:function(){var e=this;this.toggleActiveStates(),r.top.on("begin",function(){e.toggleActiveStates()})},resize:function(e){this.toggleID(e)},toggleActiveStates:function(){var t=/^(\/[^\/]*){1,2}/,i=e.location.pathname.match(t),a=i?i[0]:"/",n=this.$('[data-path="'+a+'"]');this.$(".active").removeClass("active"),n.length?n.addClass("active").parents(".menu li").addClass("active"):this.$(".menu > li:first-child").addClass("active")},toggleID:function(e){var t=this.$(".menu-wrap");e||(e=n.Resize.width()),e<s.chromeMax?t.attr("id","nav-local"):t.attr("id","")}})}(this),function(e){"use strict";function t(){var e=new Date,t=-(e.getTimezoneOffset()/60);return t}function i(e){return o+t()+e}var a=e.Grill,n=e.Whiskers,r=e.window,s=e.jQuery,o="/_schedule/mini/",l=a.ModuleView.extend({className:"module mini_schedule",initialize:function(){var e=this,t=encodeURIComponent(r.location.pathname),a=i("/"+t);e.fetchData(a),e.$el.hide()},render:function(){},fetchData:function(e){var t=this;s.getJSON(e,function(e){var i=t.model.get("translations"),a=t.model.get("data"),n={data:e,title:i.whats_on,see:i.see};if(a.length>0){var r=a[0];n.linkTitle=r.title,n.href=r.href}n.data.length>0&&t.$el.hide().html(t.template.render(n)).fadeIn()})}});l.register("mini_schedule",{template:n.modules.schedule});var c=l.extend({className:"module mini_schedule",initialize:function(){var e=this,t=i("");e.fetchData(t),e.$el.hide()}});c.register("emea_mini_schedule",{template:n.modules.schedule})}(this),Whiskers("modules.personality_hero",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,549,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="bound"> <div class="container"> <div class="branding"> <img src="'),i.b(i.v(i.f("imageUrl",e,t,0))),i.b('"> </div> <div class="details '),i.b(i.v(i.f("layout",e,t,0))),i.b(" "),i.s(i.f("style_options",e,t,1),e,t,0,158,187,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.d("style_options.text_style",e,t,0)))}),e.pop()),i.b('" '),i.s(i.f("bgColor",e,t,1),e,t,0,219,257,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('style="background-color: '),i.b(i.v(i.f("bgColor",e,t,0))),i.b(';"')}),e.pop()),i.b('> <h1 class="skip-text-styles">'),i.b(i.v(i.f("title",e,t,0))),i.b('</h1> <div class="headshot"> <div class="personality-box entity-box"> <div class="aspect ratio-square"> <img src="'),i.b(i.v(i.f("imageUrl",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> </div> </div> </div> <p class="desc skip-text-styles">'),i.b(i.v(i.f("description",e,t,0))),i.b("</p> </div> </div> </div> ")}),e.pop()),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=e.Whiskers,n=e.Backbone,r=i.Style.breakpoints,s=r.midHigh.toString(),o=e._,l=e.devicePixelRatio>1.5,c=t.ModuleView.extend({style_classes:["full-width","full-height","skip-styles","skip-bottom-border","skip-top-border"],breakpoints:s,template:a.modules.personality_hero,render:function(){var e=o.first(this.model.get("data")),t=n.Resize.width()>=r.midHigh,i=!!this.options.cds,a=this.$el,s=this.model.collection.style,c=t?"none":s&&s.secondary_theme&&s.secondary_theme.background_color,d=this.model.get("style_options"),u=d&&d.layout||"left",h=d&&d.images,f=h&&h.foreground_image,p=null,m=null,g=null;p=f?l&&f.retina_url?f.retina_url:f.url:e.hero,m=l?e.thumb2x?e.thumb2x:e.thumb:e.thumb?e.thumb:e.photo?e.photo:p,g=t?p:m;var v=o.extend({imageUrl:g,cds:i,bgColor:c,layout:u},this.model);a.html(this.template.render(v))}});c.register("personality_hero",{breakpoints:s,template:a.modules.personality_hero})}(this),Whiskers("modules.play",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,1004,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <!-- MUSTACHE TEMPLATE - GAME CONTAINER MODULE--> <div class="bound"> <div class="game_wrapper"> <div class="bun_game '),i.b(i.v(i.f("createClass",e,t,0))),i.b('"> <div id="game_container_outer" class="inverted"> <noscript> <div class="player_error">'),i.b(i.v(i.d("translations.no_javascript",e,t,0))),i.b("</div> </noscript> "),i.s(i.f("showGameLoader",e,t,1),e,t,0,300,318,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.t(i.f("gameLoaderAd",e,t,0)))}),e.pop()),i.b(' <div itemscope itemtype="http://schema.org/WebApplication"> <meta itemprop="name" content="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> <meta itemprop="description" content="'),i.b(i.v(i.f("desc",e,t,0))),i.b('"> <meta itemprop="url" content="'),i.b(i.v(i.f("href",e,t,0))),i.b('"> <meta itemprop="image" content="'),i.b(i.v(i.f("square",e,t,0))),i.b('"> <meta itemprop="applicationCategory" content="'),i.b(i.v(i.f("type",e,t,0))),i.b('"> <meta itemprop="applicationSubCategory" content="'),i.b(i.v(i.f("genres",e,t,0))),i.b(" "),i.b(i.v(i.f("type",e,t,0))),i.b('"> <div id="game_container" class="inverted"> <div id=\'DisneyGame-'),i.b(i.v(i.f("id",e,t,0))),i.b("' contentid='"),i.b(i.v(i.f("id",e,t,0))),i.b('\'></div> </div> <div class="game_container_error"> <div class="orphan"><p class="message"></p></div> </div> </div> </div> </div> </div> </div> <div class="content-toolbar-container"> <div id="meta"></div> </div> ')}),e.pop()),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Disney,i=t.Style.breakpoints,a=[i.midHigh,i.max],n=e.Grill,r=e.Backbone,s=e.Modernizr,o=e._,l=e.jQuery,c=e.Whiskers,d=!1,u=!1,h=null,f=null,p=!1,m=function(t){var i=e.onerror,a=e.console;a&&a.error&&a.error(t.stack||t.toString()),i&&i(t.toString())};n.ModuleView.register("play",{style_classes:["full-width","full-height","skip-top-border"],breakpoints:a.join(" "),template:c.modules.play,tabletSize:768,isMobile:s.mobile,assets:{scripts:["http://img.lum.dolimg.com/v1/game_container/js/disneygames.js"]},render:function(){var t=r.Resize.width()>=this.tabletSize;this.gameType=this.model.get("data")[0].game_type,this.isCreateApp()||(this.gameData={wmode:"transparent"},e.disneyGames.processConfig(this.model.get("data")[0].game_data,this.gameData),this.setAdTargeting(this.gameData),this.setAdTranslations(this.model.get("translations")));var i=o.extend({cds:this.options.cds,createClass:this.isCreateApp()?"create_module":"game_module",showGameLoader:t},this.options.ads.helpers(),this.model);this.$el.html(this.template.render(i))},isCreateApp:function(){return"Create App"===this.gameType},hideAllMessages:function(){this.$(".game_container_error").hide()},resize:function(){u?(this.$(".game_container_error").show(),this.$(".bun_game").addClass("error_holder"),this.$(".game_container_error p.message").html(h)):this.isMobile||(this.$(".game_container_error").hide(),this.handleGameContainerShowHide(this.isCreateApp()?r.Resize.width()>=i.max:r.Resize.width()>=this.tabletSize))},handleGameContainerShowHide:function(t){var i=e.disneyGames;t?(d===!1?this.loadGameContainer():i.showGame(),this.$("#game_container").show(),this.$(".bun_game").removeClass("error_holder"),this.$(".game_container_error").hide()):(this.$(".bun_game").addClass("error_holder"),this.$(".game_container_error p.message").html(this.model.get("translations").too_small),this.$(".game_container_error").show(),d===!0&&(i.hideGame(),e.setTimeout(o.bind(this.removeAd,this),0)),this.$("#game_container").hide())},setAdTranslations:function(e){var t=this.options.ads;t.setTranslation("advertisement",e.advertisement),t.setTranslation("skip_ad",e.skip_ad)},setAdTargeting:function(e){var t=this.options.ads;t.setTargeting&&(t.setTargeting("assetId",e.assetId),t.setTargeting("assetName",e.assetName),t.setTargeting("assetType",e.assetType),t.setTargeting("bu",e.bu),t.setTargeting("gameName",e.gameName),t.setTargeting("gameType",e.gameType),t.setTargeting("genre",e.genre),t.setTargeting("owner",e.owner),t.setTargeting("property",e.property))},loadGameContainer:function(){var t=e.disneyGames,i=this.model.get("data")[0].id;if(d=!0,e.disneyGamesCommunication.addMessageListener(o.bind(this.handleMessage,this)),this.isCreateApp())t.addGame({elementId:"DisneyGame-"+i,contentId:this.model.get("data")[0].create_id,provider:"create"});else{var a={elementId:"DisneyGame-"+i,contentId:this.getContentId(),gameData:this.gameData,iframePath:"/games/syndication/iframeGame.html"};if(this.options&&this.options.ads&&this.options.ads.slots){var n=this.options.ads.slots.gameLoader;n&&(a.adDivId=n.getId(),a.externalAdControl=!0)}t.addGame(a)}},getContentId:function(){var e;return e=this.model.get("data")[0].go_pub_id?this.model.get("data")[0].go_pub_id:this.model.get("data")[0].id},removeAd:function(){if(this.options&&this.options.ads&&this.options.ads.slots){var e=this.options.ads.slots.gameLoader;e&&e.remove()}},handleMessage:function(t){var i=e.disneyGames,a=this.model.get("translations"),n={unsupportedDevice:"ios",flashFailed:"no_flash",gameNotFound:"game_not_found",installUnity:"install_unity",notAuthorizedToHostGame:"not_authorized_to_host_game",unsupportedBrowser:"unsupported_browser"};switch(t){case"adStarted":f.hideAllMessages();break;case"startGame":r.Resize.width()<=this.tabletSize&&!this.isMobile&&f.resize();break;case"removeAd":e.setTimeout(o.bind(this.removeAd,this),0),f.resize();break;case"unsupportedDevice":case"flashFailed":case"gameNotFound":case"installUnity":case"notAuthorizedToHostGame":case"unsupportedBrowser":h=a[n[t]],u=!0,f.resize(),this.$("#game_container").hide(),d===!0&&i.hideGame();break;case"HTML5Works":this.$(".bun_game").css("padding","0")}},refreshAds:function(){l("#nav-pushdown").is(":visible")&&this.options.ads.refresh()},ready:function(){var i=this,a=i.model.get("translations");f=i,u=!1,h=null,new t.ContentToolbarView({el:this.$("#meta"),model:this.model,socialLinks:[{share_type:"share",share_text:a.share,output_label:a.quick_link}],cdsMode:this.options.cds,ads:this.options.ads}),d===!1&&this.loadGameContainer(),this.hideAllMessages(),this.resize(),p||this.options.cds||(p=e.setInterval(function(){i.refreshAds()},18e4))},remove:function(){try{e.disneyGamesCommunication.clearMessageListeners()}catch(t){m(t)}try{e.disneyGames.removeGame()}catch(t){m(t)}n.BunView.prototype.remove.call(this),d=!1}})}(this),Whiskers("modules.playlist",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <ul class="list"> '),a.s(a.f("data",e,t,1),e,t,0,47,147,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("list_items",e,t,1),e,t,0,62,132,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li> <div class="order"><span>'),i.b(i.v(i.f("order",e,t,0))),i.b("</span></div> "),i.b(i.rp("<item0",e,t,"")),i.b(" </li> ")}),e.pop())}),e.pop()),a.b(" </ul> </div>"),a.fl()},partials:{"<item0":{name:"item",partials:{},subs:{}}},subs:{}}),Whiskers("modules.playlist_header_image",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <div class="container"> '),a.s(a.f("data",e,t,1),e,t,0,53,514,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="playlist_item"> <a href="'),i.b(i.v(i.f("playlistLink",e,t,0))),i.b('" title="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> <span class="playlist_play_btn"></span> '),i.s(i.f("thumbnails",e,t,1),e,t,0,183,220,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<img src="'),i.b(i.v(i.f("image",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('">')}),e.pop()),i.b(' </a> </div> <div class="details"> <h2>'),i.b(i.v(i.f("title",e,t,0))),i.b('</h2> <div class="meta"> <span class="total">'),i.b(i.v(i.f("totalVideos",e,t,0))),i.b(" "),i.b(i.v(i.d("translations.videos",e,t,0))),i.b('</span> </div> <p class="desc">'),i.b(i.v(i.f("description",e,t,0))),i.b('</p> <a class="button large blue" href="'),i.b(i.v(i.f("playlistLink",e,t,0))),i.b('">'),i.b(i.v(i.d("translations.watch_playlist",e,t,0))),i.b("</a> </div> ")}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{},subs:{}}),Whiskers("modules.featured_playlist",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <div class="container"> '),a.s(a.f("data",e,t,1),e,t,0,53,520,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="playlist_item"> <a href="'),i.b(i.v(i.f("playlistLink",e,t,0))),i.b('" title="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> <span class="playlist_play_btn" ></span> '),i.s(i.f("thumbnails",e,t,1),e,t,0,184,221,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<img src="'),i.b(i.v(i.f("image",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('">')}),e.pop()),i.b(' </a> </div> <div class="details"> <h3><a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b('</a></h3> <div class="meta"> <span class="total"><strong>'),i.b(i.v(i.f("totalVideos",e,t,0))),i.b(' Videos</strong><span class="pipeColor"> | </span><a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('">'),i.b(i.v(i.d("translation.see_playlist",e,t,0))),i.b("</a></span> </div> <p>"),i.b(i.v(i.f("short_desc",e,t,0))),i.b("</p> </div> ")}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e.jQuery,n=e._,r=t.ModuleView.register("playlist",{template:i.modules.playlist,style_classes:["list_module_featured"],required_template_sets:["entities"],render:function(){var e=this.model.get("data")[0].id,t=this,i=n.extend({},t.model);t.$el.html(t.template.render(i,this.ctx_additions())),t.$("a").each(function(t,i){a(i).attr("href",a(i).attr("href")+"?playlist="+e)})}});r.register("playlist_header_image",{template:i.modules.playlist_header_image}),r.register("featured_playlist",{template:i.modules.featured_playlist})}(this),Whiskers("modules.popup_language_selector",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="language-top-container"> <div id="language-top"> <span class="icon globe"></span> '),a.s(a.f("site_links",e,t,1),e,t,0,106,163,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="language-option">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a> ")}),e.pop()),a.b(' <a href="#" class="dismiss"></a> </div> </div>'),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Cookie,n=e.Whiskers,r=e.Tracker,s=e.$,o=e.location.hostname,l=function(){var e=o;return e.match(/\.diznee.net/)&&(e=e.split(".").slice(0,-3).join(".")),e.replace("www.","")},c=function(){var e=/^(?:[a-z0-9-]+\.)*?([a-z0-9-]+(?:\.com?)?(?:\.[a-z]{2})?)$/;return l().match(e)[1]},d=function(){return o.replace(l(),"")},u=function(){return c()+d()},h=function(e,t){e.preventDefault(),a.set("language-preference","dismissed",{domain:u()}),t.fadeOut(),r.link({linkUrl:"#",linkName:"popup_language_selector/dismiss"})};t.ModuleView.register("popup_language_selector",{template:n.modules.popup_language_selector,render:function(){this.$el.html(this.template.render(this.model))},ready:function(){this.$(".language-option").each(function(){this.host===o&&s(this).css("color","white")}),a.get("language-preference")||this.$el.show()},events:{"click #language-top a.dismiss":function(e){h(e,this.$el)},"click #language-top a.language-option":function(e){var t=s(e.currentTarget);t[0].host===o?e.preventDefault():r.link({linkUrl:t.attr("href"),linkName:"popup_language_selector/"+t.text()})}}})}(this),Whiskers("modules.print",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,715,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="bound '),i.b(i.v(i.f("type",e,t,0))),i.b('"> '),i.s(i.d("header_data.is_ad",e,t,1),e,t,0,61,116,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<div class="ad-module-notice">'),i.b(i.v(i.d("translations.ad",e,t,0))),i.b("</div>")}),e.pop()),i.b(' <div class="poster-container'),i.s(i.f("watch_message",e,t,1),e,t,0,185,199,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" watch-padding")}),e.pop()),i.b('"> <div class="poster-inner poster-box"> <div class="poster '),i.s(i.f("isMobile",e,t,1),e,t,0,290,298,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("isMobile")}),e.pop()),i.b('"> <a href="'),i.b(i.v(i.f("printable_asset",e,t,0))),i.b('" target="_blank"> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img data-src="'),i.b(i.v(i.f("catalogImage",e,t,0))),i.b('" class="no-src" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" width="100%">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,478,556,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("catalogImage",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" width="100%"></noscript>')}),e.pop()),i.b(' </a> </div> </div> </div> <div class="content-toolbar-container"> <div id="toolbar" class="inverted"> <div id="meta"></div> </div> </div> </div> ')}),e.pop()),a.fl()},partials:{},subs:{}}),Whiskers("shared.contenttoolbar_print",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b(' <div id="toolbar"> <div id="metadata" class="bound"> <div class="module_body '),a.s(a.f("contentToolbarTitleLink",e,t,1),e,t,0,297,309,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("has-prodlink")}),e.pop()),a.b(" "),a.s(a.f("cds",e,t,1),e,t,1,0,0,"")||a.s(a.f("suppress_social",e,t,1),e,t,1,0,0,"")||a.b("has-social"),a.b(' "> <div class="contentarea col-container"> <div class="content"> <h1>'),a.b(a.v(a.f("title",e,t,0))),a.b('</h1> <p itemprop="description">'),a.b(a.v(a.f("description",e,t,0))),a.b(a.v(a.f("rating",e,t,0))),a.b('</p> </div> </div> <div class="secondary-content"> <div class="promo-social-wrapper"> <div class="meta-content"> <div class="button-container"> <a href="'),a.b(a.v(a.f("printable_asset",e,t,0))),a.b('" target="_blank" class="button blue large print">'),a.b(a.v(a.d("translations.print",e,t,0))),a.b("</a> "),a.s(a.f("cds",e,t,1),e,t,1,0,0,"")||a.s(a.f("suppress_social",e,t,1),e,t,1,0,0,"")||(a.b(" "),a.b(a.rp("<socialLinkPartial0",e,t,"")),a.b(" ")),a.b(" </div> "),a.s(a.f("disclaimer_copy",e,t,1),e,t,0,897,960,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="disclaimer-copy"><p>'),i.b(i.v(i.f("disclaimer_copy",e,t,0))),i.b("</p></div> ")}),e.pop()),a.b(' <div class="productlink"> '),a.s(a.f("contentToolbarTitleLink",e,t,1),e,t,0,1035,1175,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("asset_desktop_image",e,t,1),e,t,0,1060,1150,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="icon"> <img src="'),i.b(i.v(i.f("asset_desktop_image",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> </a> ')}),e.pop()),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("contentToolbarTitleLink",e,t,1),e,t,0,1232,1284,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <a class="icon_title" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a> ")}),e.pop()),a.b(" </div> </div> </div> </div> </div> "),a.s(a.f("cds",e,t,1),e,t,1,0,0,"")||(a.b(' <div class="ad-container"> <div class="companionad">'),a.b(a.t(a.f("companionAd",e,t,0))),a.b("</div> "),a.b(a.t(a.f("mobileAd",e,t,0))),a.b(" </div> ")),a.b(" </div> </div>"),a.fl()},partials:{"<socialLinkPartial0":{name:"socialLinkPartial",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e._,o=t.ModuleView.extend({breakpoints:n,template:r.modules.print,render:function(){var t=this,i=s.first(t.model.get("data"));if(i.href&&-1===i.href.indexOf(e.location.hostname)){var a=/[^\/]+?:\/\/[^/]+/.exec(e.location.href)+i.href;i.set("href",a)}var n=s.extend({linksInverted:!0,cds:!!this.options.cds},t.options.ads.helpers(),t.model);t.$el.html(t.template.render(n,{}))},ready:function(){this.loadContentToolBarView()},loadContentToolBarView:function(){var e=this,t=e.options,a=e.$("#meta"),n=e.model.get("data")[0].not_embeddable,r=e.model.get("translations"),s=e.model.get("schema_json")||{},o=[{share_type:"share",share_text:r.share,output_label:r.quick_link}];n!==!0&&o.unshift({share_type:"embed",share_text:r.embed,output_label:r.embed}),e.$(".module_header").addClass("hide"),e.tb=new i.ContentToolbarView({el:a,template:e.toolbar_template,use_deprecated_social:e.use_deprecated_social,model:e.model,socialLinks:o,disclaimer_copy:s.disclaimer_copy,cdsMode:t.cds,ads:t.ads})},resize:function(){this.options.ads.restore()}});o.register("print",{toolbar_template:r.shared.contenttoolbar_print})}(this),Whiskers("modules.print_embedded",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.s(a.f("showAllPages",e,t,1),e,t,0,35,43,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("show-all")}),e.pop()),a.b('"> <div class="toolbar-container"> </div> <div class="viewer"> </div> <div class="mozPrintCallback-shim hidden"> <div class="mozPrintCallback-dialog-box"> <!-- TODO: Localise the following strings --> Preparing document for printing... <div class="progress-row"> <progress value="0" max="100"></progress> <span class="relative-progress">0%</span> </div> <div class="progress-actions"> <input type="button" value="Cancel" class="mozPrintCallback-cancel"> </div> </div> </div> </div>'),a.fl()},partials:{},subs:{}}),Whiskers("modules.print_embedded.toolbar",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="toolbar '),a.s(a.f("loaded",e,t,1),e,t,1,0,0,"")||a.b("hidden"),a.b('"> <div class="toolbar-section left"> <a class="zoom zoomOut toolbarControl '),a.s(a.f("atMinZoom",e,t,1),e,t,0,138,146,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("disabled")}),e.pop()),a.b('" data-action="zoomOut"></a> <a class="zoom zoomIn toolbarControl '),a.s(a.f("atMaxZoom",e,t,1),e,t,0,240,248,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("disabled")}),e.pop()),a.b('" data-action="zoomIn"></a> <div class="zoomLevel">'),a.b(a.v(a.f("zoomLevel",e,t,0))),a.b('</div> </div> <div class="toolbar-section center"> <a class="pagination pageUp toolbarControl '),a.s(a.f("isFirstPage",e,t,1),e,t,0,436,444,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("disabled")}),e.pop()),a.b('" data-action="previousPage"></a> <div class="pageNumber">'),a.b(a.v(a.d("translations.page",e,t,0))),a.b(' <div class="currentPage">'),a.b(a.v(a.f("currentPage",e,t,0))),a.b("</div> "),a.b(a.v(a.d("translations.of",e,t,0))),a.b(" "),a.b(a.v(a.f("totalPages",e,t,0))),a.b('</div> <a class="pagination pageDown toolbarControl '),a.s(a.f("isLastPage",e,t,1),e,t,0,688,696,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("disabled")}),e.pop()),a.b('" data-action="nextPage"></a> </div> <div class="toolbar-section right"> <a class="print"> <div class="print-icon"></div> Print </a> </div> </div>'),a.fl()},partials:{},subs:{}}),Whiskers("modules.print_embedded.viewer",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="viewer-wrapper"> '),a.s(a.f("pageCollection",e,t,1),e,t,0,48,95,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <canvas class="page-'),i.b(i.v(i.f("pageNumber",e,t,0))),i.b('"></canvas> ')}),e.pop()),a.b(' </div> <div class="print-container"></div>'),a.fl()},partials:{},subs:{}}),Whiskers("modules.print_embedded.slider_styles",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<style type="text/css"> .module.print_embedded ~ .module.slider.dock-top-state{ position: absolute !important; top: 450px; } .module.print_embedded ~ .module.slider.dock-bottom-state{ position: fixed !important; bottom: '),a.b(a.v(a.f("sliderBottom",e,t,0))),a.b("px !important; } </style>"),a.fl()},partials:{},subs:{}}),/* Copyright 2012 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"undefined"==typeof PDFJS&&(("undefined"!=typeof window?window:this).PDFJS={}),PDFJS.version="1.1.114",PDFJS.build="3fd44fd",function(){"use strict";function e(e){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.infos&&console.log("Info: "+e)}function t(e){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.warnings&&console.log("Warning: "+e)}function i(e){throw PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.errors&&(console.log("Error: "+e),console.log(a())),L.notify(I.unknown),new Error(e)}function a(){try{throw new Error}catch(e){return e.stack?e.stack.split("\n").slice(2).join("\n"):""}}function n(e,t){e||i(t)}function r(e,t){if(!t)return e;if(/^[a-z][a-z0-9+\-.]*:/i.test(t))return t;var i;if("/"===t.charAt(0))return i=e.indexOf("://"),"/"===t.charAt(1)?++i:i=e.indexOf("/",i+3),e.substring(0,i)+t;var a=e.length;i=e.lastIndexOf("#"),a=i>=0?i:a,i=e.lastIndexOf("?",a),a=i>=0?i:a;var n=e.lastIndexOf("/",a);return e.substring(0,n+1)+t}function s(e,t){if(!e)return!1;var i=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(e);if(!i)return t;switch(i=i[0].toLowerCase()){case"http":case"https":case"ftp":case"mailto":case"tel":return!0;default:return!1}}function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!1}),i}function l(e){n(null!==e&&"object"==typeof e&&void 0!==e.length,"Invalid argument for bytesToString");var t=e.length,i=8192;if(i>t)return String.fromCharCode.apply(null,e);for(var a=[],r=0;t>r;r+=i){var s=Math.min(r+i,t),o=e.subarray(r,s);a.push(String.fromCharCode.apply(null,o))}return a.join("")}function c(e){n("string"==typeof e,"Invalid argument for stringToBytes");for(var t=e.length,i=new Uint8Array(t),a=0;t>a;++a)i[a]=255&e.charCodeAt(a);return i}function d(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function u(){var e=new Uint8Array(2);e[0]=1;var t=new Uint16Array(e.buffer);return 1===t[0]}function h(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d"),i=t.createImageData(1,1);return"undefined"!=typeof i.data.buffer}function f(e){return"number"==typeof e}function p(e){return e instanceof Array}function m(e){return"object"==typeof e&&null!==e&&void 0!==e.byteLength}function g(){var e={};return e.promise=new Promise(function(t,i){e.resolve=t,e.reject=i}),e}function v(e,t){this.name=e,this.comObj=t,this.callbackIndex=1,this.postMessageTransfers=!0;var a=this.callbacksCapabilities={},n=this.actionHandler={};n.console_log=[function(e){console.log.apply(console,e)}],n.console_error=[function(e){console.error.apply(console,e)}],n._unsupported_feature=[function(e){L.notify(e)}],t.onmessage=function(e){var r=e.data;if(r.isReply){var s=r.callbackId;if(r.callbackId in a){var o=a[s];delete a[s],"error"in r?o.reject(r.error):o.resolve(r.data)}else i("Cannot resolve callback "+s)}else if(r.action in n){var l=n[r.action];r.callbackId?Promise.resolve().then(function(){return l[0].call(l[1],r.data)}).then(function(e){t.postMessage({isReply:!0,callbackId:r.callbackId,data:e})},function(e){t.postMessage({isReply:!0,callbackId:r.callbackId,error:e})}):l[0].call(l[1],r.data)}else i("Unknown action from worker: "+r.action)}}function b(e,i,a){var n=new Image;n.onload=function(){a.resolve(e,n)},n.onerror=function(){a.resolve(e,null),t("Error during JPEG image loading")},n.src=i}function y(e,t){var i=document.createElement("canvas");return i.width=e,i.height=t,i}function k(e){e.mozCurrentTransform||(e._originalSave=e.save,e._originalRestore=e.restore,e._originalRotate=e.rotate,e._originalScale=e.scale,e._originalTranslate=e.translate,e._originalTransform=e.transform,e._originalSetTransform=e.setTransform,e._transformMatrix=e._transformMatrix||[1,0,0,1,0,0],e._transformStack=[],Object.defineProperty(e,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(e,"mozCurrentTransformInverse",{get:function(){var e=this._transformMatrix,t=e[0],i=e[1],a=e[2],n=e[3],r=e[4],s=e[5],o=t*n-i*a,l=i*a-t*n;return[n/o,i/l,a/l,t/o,(n*r-a*s)/l,(i*r-t*s)/o]}}),e.save=function(){var e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},e.restore=function(){var e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},e.translate=function(e,t){var i=this._transformMatrix;i[4]=i[0]*e+i[2]*t+i[4],i[5]=i[1]*e+i[3]*t+i[5],this._originalTranslate(e,t)},e.scale=function(e,t){var i=this._transformMatrix;i[0]=i[0]*e,i[1]=i[1]*e,i[2]=i[2]*t,i[3]=i[3]*t,this._originalScale(e,t)},e.transform=function(t,i,a,n,r,s){var o=this._transformMatrix;this._transformMatrix=[o[0]*t+o[2]*i,o[1]*t+o[3]*i,o[0]*a+o[2]*n,o[1]*a+o[3]*n,o[0]*r+o[2]*s+o[4],o[1]*r+o[3]*s+o[5]],e._originalTransform(t,i,a,n,r,s)},e.setTransform=function(t,i,a,n,r,s){this._transformMatrix=[t,i,a,n,r,s],e._originalSetTransform(t,i,a,n,r,s)},e.rotate=function(e){var t=Math.cos(e),i=Math.sin(e),a=this._transformMatrix;this._transformMatrix=[a[0]*t+a[2]*i,a[1]*t+a[3]*i,a[0]*-i+a[2]*t,a[1]*-i+a[3]*t,a[4],a[5]],this._originalRotate(e)})}function w(e){var t,i,a,n,r=1e3,s=e.width,o=e.height,l=s+1,c=new Uint8Array(l*(o+1)),d=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=s+7&-8,h=e.data,f=new Uint8Array(u*o),p=0;for(t=0,n=h.length;n>t;t++)for(var m=128,g=h[t];m>0;)f[p++]=g&m?0:255,m>>=1;var v=0;for(p=0,0!==f[p]&&(c[0]=1,++v),i=1;s>i;i++)f[p]!==f[p+1]&&(c[i]=f[p]?2:1,++v),p++;for(0!==f[p]&&(c[i]=2,++v),t=1;o>t;t++){p=t*u,a=t*l,f[p-u]!==f[p]&&(c[a]=f[p]?1:8,++v);var b=(f[p]?4:0)+(f[p-u]?8:0);for(i=1;s>i;i++)b=(b>>2)+(f[p+1]?4:0)+(f[p-u+1]?8:0),d[b]&&(c[a+i]=d[b],++v),p++;if(f[p-u]!==f[p]&&(c[a+i]=f[p]?2:4,++v),v>r)return null}for(p=u*(o-1),a=t*l,0!==f[p]&&(c[a]=8,++v),i=1;s>i;i++)f[p]!==f[p+1]&&(c[a+i]=f[p]?4:8,++v),p++;if(0!==f[p]&&(c[a+i]=4,++v),v>r)return null;var y=new Int32Array([0,l,-1,0,-l,0,0,0,1]),k=[];for(t=0;v&&o>=t;t++){for(var w=t*l,_=w+s;_>w&&!c[w];)w++;if(w!==_){var x,A=[w%l,t],C=c[w],S=w;do{var T=y[C];do w+=T;while(!c[w]);x=c[w],5!==x&&10!==x?(C=x,c[w]=0):(C=x&51*C>>4,c[w]&=C>>2|C<<2),A.push(w%l),A.push(w/l|0),--v}while(S!==w);k.push(A),--t}}var P=function(e){e.save(),e.scale(1/s,-1/o),e.translate(0,-o),e.beginPath();for(var t=0,i=k.length;i>t;t++){var a=k[t];e.moveTo(a[0],a[1]);for(var n=2,r=a.length;r>n;n+=2)e.lineTo(a[n],a[n+1])}e.fill(),e.beginPath(),e.restore()};return P}function _(e){var t=ot[e[0]];return t||i("Unknown IR type: "+e[0]),t.fromIR(e)}var x="undefined"==typeof window?this:window,A="undefined"==typeof window,C=[.001,0,0,.001,0,0],S={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},T={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},P={WIDGET:1,TEXT:2,LINK:3};x.PDFJS||(x.PDFJS={}),x.PDFJS.pdfBug=!1,PDFJS.VERBOSITY_LEVELS={errors:0,warnings:1,infos:5};var E=PDFJS.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},I=PDFJS.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},L=PDFJS.UnsupportedManager=function(){var e=[];return{listen:function(t){e.push(t)},notify:function(i){t('Unsupported feature "'+i+'"');for(var a=0,n=e.length;n>a;a++)e[a](i)}}}();PDFJS.isValidUrl=s,PDFJS.shadow=o;var M=PDFJS.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},D=function(){function e(e,t){this.name="PasswordException",this.message=e,this.code=t}return e.prototype=new Error,e.constructor=e,e}();PDFJS.PasswordException=D;var R=function(){function e(e,t){this.name="UnknownErrorException",this.message=e,this.details=t}return e.prototype=new Error,e.constructor=e,e}();PDFJS.UnknownErrorException=R;var O=function(){function e(e){this.name="InvalidPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();PDFJS.InvalidPDFException=O;var B=function(){function e(e){this.name="MissingPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();PDFJS.MissingPDFException=B;var F=function(){function e(e,t){this.name="UnexpectedResponseException",this.message=e,this.status=t}return e.prototype=new Error,e.constructor=e,e}();PDFJS.UnexpectedResponseException=F;!function(){function e(e){this.message=e}return e.prototype=new Error,e.prototype.name="NotImplementedException",e.constructor=e,e}(),function(){function e(e,t){this.begin=e,this.end=t,this.message="Missing data ["+e+", "+t+")"}return e.prototype=new Error,e.prototype.name="MissingDataException",e.constructor=e,e}(),function(){function e(e){this.message=e}return e.prototype=new Error,e.prototype.name="XRefParseException",e.constructor=e,e}();Object.defineProperty(PDFJS,"isLittleEndian",{configurable:!0,get:function(){return o(PDFJS,"isLittleEndian",u())}}),Object.defineProperty(PDFJS,"hasCanvasTypedArrays",{configurable:!0,get:function(){return o(PDFJS,"hasCanvasTypedArrays",h())}});{var N=function(){function e(e,t){this.buffer=e,this.byteLength=e.length,this.length=void 0===t?this.byteLength>>2:t,i(this.length)}function t(e){return{get:function(){var t=this.buffer,i=e<<2;return(t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24)>>>0},set:function(t){var i=this.buffer,a=e<<2;i[a]=255&t,i[a+1]=t>>8&255,i[a+2]=t>>16&255,i[a+3]=t>>>24&255}}}function i(i){for(;i>a;)Object.defineProperty(e.prototype,a,t(a)),a++}e.prototype=Object.create(null);var a=0;return e}(),j=[1,0,0,1,0,0],z=PDFJS.Util=function(){function e(){}var t=["rgb(",0,",",0,",",0,")"];return e.makeCssRgb=function(e,i,a){return t[1]=e,t[3]=i,t[5]=a,t.join("")},e.transform=function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]},e.applyTransform=function(e,t){var i=e[0]*t[0]+e[1]*t[2]+t[4],a=e[0]*t[1]+e[1]*t[3]+t[5];return[i,a]},e.applyInverseTransform=function(e,t){var i=t[0]*t[3]-t[1]*t[2],a=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,n=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[a,n]},e.getAxialAlignedBoundingBox=function(t,i){var a=e.applyTransform(t,i),n=e.applyTransform(t.slice(2,4),i),r=e.applyTransform([t[0],t[3]],i),s=e.applyTransform([t[2],t[1]],i);return[Math.min(a[0],n[0],r[0],s[0]),Math.min(a[1],n[1],r[1],s[1]),Math.max(a[0],n[0],r[0],s[0]),Math.max(a[1],n[1],r[1],s[1])]},e.inverseTransform=function(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]},e.apply3dTransform=function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]},e.singularValueDecompose2dScale=function(e){var t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],a=e[0]*t[1]+e[1]*t[3],n=e[2]*t[0]+e[3]*t[2],r=e[2]*t[1]+e[3]*t[3],s=(i+r)/2,o=Math.sqrt((i+r)*(i+r)-4*(i*r-n*a))/2,l=s+o||1,c=s-o||1;return[Math.sqrt(l),Math.sqrt(c)]},e.normalizeRect=function(e){var t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t},e.intersect=function(t,i){function a(e,t){return e-t}var n=[t[0],t[2],i[0],i[2]].sort(a),r=[t[1],t[3],i[1],i[3]].sort(a),s=[];return t=e.normalizeRect(t),i=e.normalizeRect(i),n[0]===t[0]&&n[1]===i[0]||n[0]===i[0]&&n[1]===t[0]?(s[0]=n[1],s[2]=n[2],r[0]===t[1]&&r[1]===i[1]||r[0]===i[1]&&r[1]===t[1]?(s[1]=r[1],s[3]=r[2],s):!1):!1},e.sign=function(e){return 0>e?-1:1},e.appendToArray=function(e,t){Array.prototype.push.apply(e,t)},e.prependToArray=function(e,t){Array.prototype.unshift.apply(e,t)},e.extendObj=function(e,t){for(var i in t)e[i]=t[i]},e.getInheritableProperty=function(e,t){for(;e&&!e.has(t);)e=e.get("Parent");return e?e.get(t):null},e.inherit=function(e,t,i){e.prototype=Object.create(t.prototype),e.prototype.constructor=e;for(var a in i)e.prototype[a]=i[a]},e.loadScript=function(e,t){var i=document.createElement("script"),a=!1;i.setAttribute("src",e),t&&(i.onload=function(){a||t(),a=!0}),document.getElementsByTagName("head")[0].appendChild(i)},e}();PDFJS.PageViewport=function(){function e(e,t,i,a,n,r){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=a,this.offsetY=n;var s,o,l,c,d=(e[2]+e[0])/2,u=(e[3]+e[1])/2;switch(i%=360,i=0>i?i+360:i){case 180:s=-1,o=0,l=0,c=1;break;case 90:s=0,o=1,l=1,c=0;break;case 270:s=0,o=-1,l=-1,c=0;break;default:s=1,o=0,l=0,c=-1}r&&(l=-l,c=-c);var h,f,p,m;0===s?(h=Math.abs(u-e[1])*t+a,f=Math.abs(d-e[0])*t+n,p=Math.abs(e[3]-e[1])*t,m=Math.abs(e[2]-e[0])*t):(h=Math.abs(d-e[0])*t+a,f=Math.abs(u-e[1])*t+n,p=Math.abs(e[2]-e[0])*t,m=Math.abs(e[3]-e[1])*t),this.transform=[s*t,o*t,l*t,c*t,h-s*t*d-l*t*u,f-o*t*d-c*t*u],this.width=p,this.height=m,this.fontScale=t}return e.prototype={clone:function(t){t=t||{};var i="scale"in t?t.scale:this.scale,a="rotation"in t?t.rotation:this.rotation;return new e(this.viewBox.slice(),i,a,this.offsetX,this.offsetY,t.dontFlip)},convertToViewportPoint:function(e,t){return z.applyTransform([e,t],this.transform)},convertToViewportRectangle:function(e){var t=z.applyTransform([e[0],e[1]],this.transform),i=z.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]},convertToPdfPoint:function(e,t){return z.applyInverseTransform([e,t],this.transform)}},e}()}PDFJS.createPromiseCapability=g,function(){function e(e){this._status=i,this._handlers=[];try{e.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(t){this._reject(t)}}if(x.Promise)return"function"!=typeof x.Promise.all&&(x.Promise.all=function(e){var t,i,a=0,n=[],r=new x.Promise(function(e,a){t=e,i=a});return e.forEach(function(e,r){a++,e.then(function(e){n[r]=e,a--,0===a&&t(n)},i)}),0===a&&t(n),r}),"function"!=typeof x.Promise.resolve&&(x.Promise.resolve=function(e){return new x.Promise(function(t){t(e)})}),"function"!=typeof x.Promise.reject&&(x.Promise.reject=function(e){return new x.Promise(function(t,i){i(e)})}),void("function"!=typeof x.Promise.prototype["catch"]&&(x.Promise.prototype["catch"]=function(e){return x.Promise.prototype.then(void 0,e)}));var i=0,a=1,n=2,r=500,s={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(e){e._status!==i&&(this.handlers=this.handlers.concat(e._handlers),e._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var e=1,t=Date.now()+e;this.handlers.length>0;){var i=this.handlers.shift(),r=i.thisPromise._status,s=i.thisPromise._value;try{r===a?"function"==typeof i.onResolve&&(s=i.onResolve(s)):"function"==typeof i.onReject&&(s=i.onReject(s),r=a,i.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(i.thisPromise))}catch(o){r=n,s=o}if(i.nextPromise._updateStatus(r,s),Date.now()>=t)break}return this.handlers.length>0?void setTimeout(this.runHandlers.bind(this),0):void(this.running=!1)},addUnhandledRejection:function(e){this.unhandledRejections.push({promise:e,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function(e){e._unhandledRejection=!1;for(var t=0;t<this.unhandledRejections.length;t++)this.unhandledRejections[t].promise===e&&(this.unhandledRejections.splice(t),t--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var e=Date.now(),i=0;i<this.unhandledRejections.length;i++)if(e-this.unhandledRejections[i].time>r){var a=this.unhandledRejections[i].promise._value,n="Unhandled rejection: "+a;a.stack&&(n+="\n"+a.stack),t(n),this.unhandledRejections.splice(i),i--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),r))}};e.all=function(t){function i(e){s._status!==n&&(l=[],r(e))}var a,r,s=new e(function(e,t){a=e,r=t}),o=t.length,l=[];if(0===o)return a(l),s;for(var c=0,d=t.length;d>c;++c){var u=t[c],h=function(e){return function(t){s._status!==n&&(l[e]=t,o--,0===o&&a(l))}}(c);e.isPromise(u)?u.then(h,i):h(u)}return s},e.isPromise=function(e){return e&&"function"==typeof e.then},e.resolve=function(t){return new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,i){i(t)})},e.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(t,i){if(this._status!==a&&this._status!==n){if(t===a&&e.isPromise(i))return void i.then(this._updateStatus.bind(this,a),this._updateStatus.bind(this,n));this._status=t,this._value=i,t===n&&0===this._handlers.length&&(this._unhandledRejection=!0,s.addUnhandledRejection(this)),s.scheduleHandlers(this)}},_resolve:function(e){this._updateStatus(a,e)},_reject:function(e){this._updateStatus(n,e)},then:function(t,i){var a=new e(function(e,t){this.resolve=e,this.reject=t});return this._handlers.push({thisPromise:this,onResolve:t,onReject:i,nextPromise:a}),s.scheduleHandlers(this),a},"catch":function(e){return this.then(void 0,e)}},x.Promise=e}();var U=function(){function e(e,t,i){for(;e.length<i;)e+=t;return e}function i(){this.started={},this.times=[],this.enabled=!0}return i.prototype={time:function(e){this.enabled&&(e in this.started&&t("Timer is already running for "+e),this.started[e]=Date.now())},timeEnd:function(e){this.enabled&&(e in this.started||t("Timer has not been started for "+e),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e])},toString:function(){var t,i,a=this.times,n="",r=0;for(t=0,i=a.length;i>t;++t){var s=a[t].name;s.length>r&&(r=s.length)}for(t=0,i=a.length;i>t;++t){var o=a[t],l=o.end-o.start;n+=e(o.name," ",r)+" "+l+"ms\n"}return n}},i}();PDFJS.createBlob=function(e,t){if("undefined"!=typeof Blob)return new Blob([e],{type:t});var i=new MozBlobBuilder;return i.append(e),i.getBlob(t)},PDFJS.createObjectURL=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(t,i){if(!PDFJS.disableCreateObjectURL&&"undefined"!=typeof URL&&URL.createObjectURL){var a=PDFJS.createBlob(t,i);return URL.createObjectURL(a)}for(var n="data:"+i+";base64,",r=0,s=t.length;s>r;r+=3){var o=255&t[r],l=255&t[r+1],c=255&t[r+2],d=o>>2,u=(3&o)<<4|l>>4,h=s>r+1?(15&l)<<2|c>>6:64,f=s>r+2?63&c:64;n+=e[d]+e[u]+e[h]+e[f]}return n}}(),v.prototype={on:function(e,t,a){var n=this.actionHandler;n[e]&&i('There is already an actionName called "'+e+'"'),n[e]=[t,a]},send:function(e,t,i){var a={action:e,data:t};this.postMessage(a,i)},sendWithPromise:function(e,t,i){var a=this.callbackIndex++,n={action:e,data:t,callbackId:a},r=g();this.callbacksCapabilities[a]=r;try{this.postMessage(n,i)}catch(s){r.reject(s)}return r.promise},postMessage:function(e,t){t&&this.postMessageTransfers?this.comObj.postMessage(e,t):this.comObj.postMessage(e)}},PDFJS.maxImageSize=void 0===PDFJS.maxImageSize?-1:PDFJS.maxImageSize,PDFJS.cMapUrl=void 0===PDFJS.cMapUrl?null:PDFJS.cMapUrl,PDFJS.cMapPacked=void 0===PDFJS.cMapPacked?!1:PDFJS.cMapPacked,PDFJS.disableFontFace=void 0===PDFJS.disableFontFace?!1:PDFJS.disableFontFace,PDFJS.imageResourcesPath=void 0===PDFJS.imageResourcesPath?"":PDFJS.imageResourcesPath,PDFJS.disableWorker=void 0===PDFJS.disableWorker?!1:PDFJS.disableWorker,PDFJS.workerSrc=void 0===PDFJS.workerSrc?null:PDFJS.workerSrc,PDFJS.disableRange=void 0===PDFJS.disableRange?!1:PDFJS.disableRange,PDFJS.disableStream=void 0===PDFJS.disableStream?!1:PDFJS.disableStream,PDFJS.disableAutoFetch=void 0===PDFJS.disableAutoFetch?!1:PDFJS.disableAutoFetch,PDFJS.pdfBug=void 0===PDFJS.pdfBug?!1:PDFJS.pdfBug,PDFJS.postMessageTransfers=void 0===PDFJS.postMessageTransfers?!0:PDFJS.postMessageTransfers,PDFJS.disableCreateObjectURL=void 0===PDFJS.disableCreateObjectURL?!1:PDFJS.disableCreateObjectURL,PDFJS.disableWebGL=void 0===PDFJS.disableWebGL?!0:PDFJS.disableWebGL,PDFJS.disableFullscreen=void 0===PDFJS.disableFullscreen?!1:PDFJS.disableFullscreen,PDFJS.useOnlyCssZoom=void 0===PDFJS.useOnlyCssZoom?!1:PDFJS.useOnlyCssZoom,PDFJS.verbosity=void 0===PDFJS.verbosity?PDFJS.VERBOSITY_LEVELS.warnings:PDFJS.verbosity,PDFJS.maxCanvasPixels=void 0===PDFJS.maxCanvasPixels?16777216:PDFJS.maxCanvasPixels,PDFJS.openExternalLinksInNewWindow=void 0===PDFJS.openExternalLinksInNewWindow?!1:PDFJS.openExternalLinksInNewWindow,PDFJS.getDocument=function(e,t,a,n){var s=new q;t&&(t instanceof V||(t=Object.create(t),t.length=e.length,t.initialData=e.initialData),e=Object.create(e),e.range=t),s.onPassword=a||null,s.onProgress=n||null;var o,l,d;"string"==typeof e?d={url:e}:m(e)?d={data:e}:e instanceof V?d={range:e}:("object"!=typeof e&&i("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object"),e.url||e.data||e.range||i("Invalid parameter object: need either .data, .range or .url"),d=e);var u={};for(var h in d)if("url"!==h||"undefined"==typeof window){if("range"!==h)if("data"!==h||d[h]instanceof Uint8Array)u[h]=d[h];else{var f=d[h];"string"==typeof f?u[h]=c(f):"object"!=typeof f||null===f||isNaN(f.length)?i("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property."):u[h]=new Uint8Array(f)}}else u[h]=r(window.location.href,d[h]);return o=g(),l=new G(o,d.range),o.promise.then(function(){l.fetchDocument(s,u)}),s};var q=function(){function e(){this._capability=g(),this.onPassword=null,this.onProgress=null}return e.prototype={get promise(){return this._capability.promise},then:function(){return this.promise.then.apply(this.promise,arguments)}},e}(),V=function(){function e(e,t){this.length=e,this.initialData=t,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._readyCapability=g()}return e.prototype={addRangeListener:function(e){this._rangeListeners.push(e)},addProgressListener:function(e){this._progressListeners.push(e)},addProgressiveReadListener:function(e){this._progressiveReadListeners.push(e)},onDataRange:function(e,t){for(var i=this._rangeListeners,a=0,n=i.length;n>a;++a)i[a](e,t)},onDataProgress:function(e){this._readyCapability.promise.then(function(){for(var t=this._progressListeners,i=0,a=t.length;a>i;++i)t[i](e)}.bind(this))},onDataProgressiveRead:function(e){this._readyCapability.promise.then(function(){for(var t=this._progressiveReadListeners,i=0,a=t.length;a>i;++i)t[i](e)}.bind(this))},transportReady:function(){this._readyCapability.resolve()},requestDataRange:function(){throw new Error("Abstract method PDFDataRangeTransport.requestDataRange")}},e}();PDFJS.PDFDataRangeTransport=V;var H=function(){function e(e,t){this.pdfInfo=e,this.transport=t}return e.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function(e){return this.transport.getPage(e)},getPageIndex:function(e){return this.transport.getPageIndex(e)},getDestinations:function(){return this.transport.getDestinations()},getDestination:function(e){return this.transport.getDestination(e)},getAttachments:function(){return this.transport.getAttachments()},getJavaScript:function(){return this.transport.getJavaScript()},getOutline:function(){return this.transport.getOutline()},getMetadata:function(){return this.transport.getMetadata()},getData:function(){return this.transport.getData()},getDownloadInfo:function(){return this.transport.downloadInfoCapability.promise},getStats:function(){return this.transport.getStats()},cleanup:function(){this.transport.startCleanup()},destroy:function(){this.transport.destroy()}},e}(),$=function(){function e(e,t,i){this.pageIndex=e,this.pageInfo=t,this.transport=i,this.stats=new U,this.stats.enabled=!!x.PDFJS.enableStats,this.commonObjs=i.commonObjs,this.objs=new W,this.cleanupAfterRender=!1,this.pendingDestroy=!1,this.intentStates={}}return e.prototype={get pageNumber(){return this.pageIndex+1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get view(){return this.pageInfo.view},getViewport:function(e,t){return arguments.length<2&&(t=this.rotate),new PDFJS.PageViewport(this.view,e,t,0,0)},getAnnotations:function(){if(this.annotationsPromise)return this.annotationsPromise;var e=this.transport.getAnnotations(this.pageIndex);return this.annotationsPromise=e,e},render:function(e){function t(e){var t=n.renderTasks.indexOf(r);t>=0&&n.renderTasks.splice(t,1),o.cleanupAfterRender&&(o.pendingDestroy=!0),o._tryDestroy(),e?r.capability.reject(e):r.capability.resolve(),i.timeEnd("Rendering"),i.timeEnd("Overall")}var i=this.stats;i.time("Overall"),this.pendingDestroy=!1;var a="print"===e.intent?"print":"display";this.intentStates[a]||(this.intentStates[a]={});var n=this.intentStates[a];n.displayReadyCapability||(n.receivingOperatorList=!0,n.displayReadyCapability=g(),n.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.stats.time("Page Request"),this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:a}));var r=new X(t,e,this.objs,this.commonObjs,n.operatorList,this.pageNumber);n.renderTasks||(n.renderTasks=[]),n.renderTasks.push(r);var s=r.task;e.continueCallback&&(s.onContinue=e.continueCallback);var o=this;return n.displayReadyCapability.promise.then(function(e){return o.pendingDestroy?void t():(i.time("Rendering"),r.initalizeGraphics(e),void r.operatorListChanged())},function(e){t(e)}),s},getOperatorList:function(){function e(){i.operatorList.lastChunk&&i.opListReadCapability.resolve(i.operatorList)}var t="oplist";this.intentStates[t]||(this.intentStates[t]={});var i=this.intentStates[t];if(!i.opListReadCapability){var a={};a.operatorListChanged=e,i.receivingOperatorList=!0,i.opListReadCapability=g(),i.renderTasks=[],i.renderTasks.push(a),i.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:t})}return i.opListReadCapability.promise},getTextContent:function(){return this.transport.messageHandler.sendWithPromise("GetTextContent",{pageIndex:this.pageNumber-1})},destroy:function(){this.pendingDestroy=!0,this._tryDestroy()},_tryDestroy:function(){this.pendingDestroy&&!Object.keys(this.intentStates).some(function(e){var t=this.intentStates[e];return 0!==t.renderTasks.length||t.receivingOperatorList},this)&&(Object.keys(this.intentStates).forEach(function(e){delete this.intentStates[e]},this),this.objs.clear(),this.annotationsPromise=null,this.pendingDestroy=!1)},_startRenderPage:function(e,t){var i=this.intentStates[t];i.displayReadyCapability&&i.displayReadyCapability.resolve(e)},_renderPageChunk:function(e,t){var i,a,n=this.intentStates[t];for(i=0,a=e.length;a>i;i++)n.operatorList.fnArray.push(e.fnArray[i]),n.operatorList.argsArray.push(e.argsArray[i]);for(n.operatorList.lastChunk=e.lastChunk,i=0;i<n.renderTasks.length;i++)n.renderTasks[i].operatorListChanged();e.lastChunk&&(n.receivingOperatorList=!1,this._tryDestroy())}},e}(),G=function(){function a(t,a){if(this.pdfDataRangeTransport=a,this.workerInitializedCapability=t,this.commonObjs=new W,this.loadingTask=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=g(),!x.PDFJS.disableWorker&&"undefined"!=typeof Worker){var n=PDFJS.workerSrc;n||i("No PDFJS.workerSrc specified");try{var r=new Worker(n),s=new v("main",r);this.messageHandler=s,s.on("test",function(e){var i=e&&e.supportTypedArray;i?(this.worker=r,e.supportTransfers||(PDFJS.postMessageTransfers=!1),this.setupMessageHandler(s),t.resolve()):this.setupFakeWorker()}.bind(this));var o=new Uint8Array([PDFJS.postMessageTransfers?255:0]);try{s.send("test",o,[o.buffer])}catch(l){e("Cannot use postMessage transfers"),o[0]=0,s.send("test",o)}return}catch(c){e("The worker has been disabled.")}}this.setupFakeWorker()}return a.prototype={destroy:function(){this.pageCache=[],this.pagePromises=[];var e=this;this.messageHandler.sendWithPromise("Terminate",null).then(function(){dt.clear(),e.worker&&e.worker.terminate()})},setupFakeWorker:function(){x.PDFJS.disableWorker=!0,PDFJS.fakeWorkerFilesLoadedCapability||(PDFJS.fakeWorkerFilesLoadedCapability=g(),z.loadScript(PDFJS.workerSrc,function(){PDFJS.fakeWorkerFilesLoadedCapability.resolve()})),PDFJS.fakeWorkerFilesLoadedCapability.promise.then(function(){t("Setting up fake worker.");var e={postMessage:function(t){e.onmessage({data:t})},terminate:function(){}},i=new v("main",e);this.setupMessageHandler(i),PDFJS.WorkerMessageHandler.setup(i),this.workerInitializedCapability.resolve()}.bind(this))},setupMessageHandler:function(e){function a(t){e.send("UpdatePassword",t)}this.messageHandler=e;var n=this.pdfDataRangeTransport;n&&(n.addRangeListener(function(t,i){e.send("OnDataRange",{begin:t,chunk:i})}),n.addProgressListener(function(t){e.send("OnDataProgress",{loaded:t})}),n.addProgressiveReadListener(function(t){e.send("OnDataRange",{chunk:t})}),e.on("RequestDataRange",function(e){n.requestDataRange(e.begin,e.end)},this)),e.on("GetDoc",function(e){var t=e.pdfInfo;this.numPages=e.pdfInfo.numPages;var i=new H(t,this);this.pdfDocument=i,this.loadingTask._capability.resolve(i)},this),e.on("NeedPassword",function(e){var t=this.loadingTask;return t.onPassword?t.onPassword(a,M.NEED_PASSWORD):void t._capability.reject(new D(e.message,e.code))},this),e.on("IncorrectPassword",function(e){var t=this.loadingTask;return t.onPassword?t.onPassword(a,M.INCORRECT_PASSWORD):void t._capability.reject(new D(e.message,e.code))},this),e.on("InvalidPDF",function(e){this.loadingTask._capability.reject(new O(e.message))},this),e.on("MissingPDF",function(e){this.loadingTask._capability.reject(new B(e.message))},this),e.on("UnexpectedResponse",function(e){this.loadingTask._capability.reject(new F(e.message,e.status))},this),e.on("UnknownError",function(e){this.loadingTask._capability.reject(new R(e.message,e.details))},this),e.on("DataLoaded",function(e){this.downloadInfoCapability.resolve(e)},this),e.on("PDFManagerReady",function(){this.pdfDataRangeTransport&&this.pdfDataRangeTransport.transportReady()},this),e.on("StartRenderPage",function(e){var t=this.pageCache[e.pageIndex];t.stats.timeEnd("Page Request"),t._startRenderPage(e.transparency,e.intent)},this),e.on("RenderPageChunk",function(e){var t=this.pageCache[e.pageIndex];t._renderPageChunk(e.operatorList,e.intent)},this),e.on("commonobj",function(e){var i=e[0],a=e[1];if(!this.commonObjs.hasData(i))switch(a){case"Font":var n,r=e[2];if("error"in r){var s=r.error;t("Error during font loading: "+s),this.commonObjs.resolve(i,s);break}n=new ut(r),dt.bind([n],function(){this.commonObjs.resolve(i,n)}.bind(this));break;case"FontPath":this.commonObjs.resolve(i,e[2]);break;default:s("Got unknown common object type "+a)}},this),e.on("obj",function(e){var t,a=e[0],n=e[1],r=e[2],s=this.pageCache[n];if(!s.objs.hasData(a))switch(r){case"JpegStream":t=e[3],b(a,t,s.objs);break;case"Image":t=e[3],s.objs.resolve(a,t);var o=8e6;t&&"data"in t&&t.data.length>o&&(s.cleanupAfterRender=!0);break;default:i("Got unknown object type "+r)}},this),e.on("DocProgress",function(e){var t=this.loadingTask;t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})},this),e.on("PageError",function(e){var t=this.pageCache[e.pageNum-1],a=t.intentStates[e.intent];a.displayReadyCapability?a.displayReadyCapability.reject(e.error):i(e.error)},this),e.on("JpegDecode",function(e){var t=e[0],i=e[1];return 3!==i&&1!==i?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise(function(e,a){var n=new Image;n.onload=function(){var t=n.width,a=n.height,r=t*a,s=4*r,o=new Uint8Array(r*i),l=y(t,a),c=l.getContext("2d");c.drawImage(n,0,0);var d,u,h=c.getImageData(0,0,t,a).data;if(3===i)for(d=0,u=0;s>d;d+=4,u+=3)o[u]=h[d],o[u+1]=h[d+1],o[u+2]=h[d+2];else if(1===i)for(d=0,u=0;s>d;d+=4,u++)o[u]=h[d];e({data:o,width:t,height:a})},n.onerror=function(){a(new Error("JpegDecode failed to load image"))
},n.src=t})})},fetchDocument:function(e,t){this.loadingTask=e,t.disableAutoFetch=PDFJS.disableAutoFetch,t.disableStream=PDFJS.disableStream,t.chunkedViewerLoading=!!this.pdfDataRangeTransport,this.pdfDataRangeTransport&&(t.length=this.pdfDataRangeTransport.length,t.initialData=this.pdfDataRangeTransport.initialData),this.messageHandler.send("GetDocRequest",{source:t,disableRange:PDFJS.disableRange,maxImageSize:PDFJS.maxImageSize,cMapUrl:PDFJS.cMapUrl,cMapPacked:PDFJS.cMapPacked,disableFontFace:PDFJS.disableFontFace,disableCreateObjectURL:PDFJS.disableCreateObjectURL,verbosity:PDFJS.verbosity})},getData:function(){return this.messageHandler.sendWithPromise("GetData",null)},getPage:function(e){if(0>=e||e>this.numPages||(0|e)!==e)return Promise.reject(new Error("Invalid page request"));var t=e-1;if(t in this.pagePromises)return this.pagePromises[t];var i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(function(e){var i=new $(t,e,this);return this.pageCache[t]=i,i}.bind(this));return this.pagePromises[t]=i,i},getPageIndex:function(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e})},getAnnotations:function(e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e})},getDestinations:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)},getDestination:function(e){return this.messageHandler.sendWithPromise("GetDestination",{id:e})},getAttachments:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function(){return this.messageHandler.sendWithPromise("GetOutline",null)},getMetadata:function(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(function(e){return{info:e[0],metadata:e[1]?new PDFJS.Metadata(e[1]):null}})},getStats:function(){return this.messageHandler.sendWithPromise("GetStats",null)},startCleanup:function(){this.messageHandler.sendWithPromise("Cleanup",null).then(function(){for(var e=0,t=this.pageCache.length;t>e;e++){var i=this.pageCache[e];i&&i.destroy()}this.commonObjs.clear(),dt.clear()}.bind(this))}},a}(),W=function(){function e(){this.objs={}}return e.prototype={ensureObj:function(e){if(this.objs[e])return this.objs[e];var t={capability:g(),data:null,resolved:!1};return this.objs[e]=t,t},get:function(e,t){if(t)return this.ensureObj(e).capability.promise.then(t),null;var a=this.objs[e];return a&&a.resolved||i("Requesting object that isn't resolved yet "+e),a.data},resolve:function(e,t){var i=this.ensureObj(e);i.resolved=!0,i.data=t,i.capability.resolve(t)},isResolved:function(e){var t=this.objs;return t[e]?t[e].resolved:!1},hasData:function(e){return this.isResolved(e)},getData:function(e){var t=this.objs;return t[e]&&t[e].resolved?t[e].data:null},clear:function(){this.objs={}}},e}(),J=function(){function e(e){this._internalRenderTask=e,this.onContinue=null}return e.prototype={get promise(){return this._internalRenderTask.capability.promise},cancel:function(){this._internalRenderTask.cancel()},then:function(){return this.promise.then.apply(this.promise,arguments)}},e}(),X=function(){function e(e,t,i,a,n,r){this.callback=e,this.params=t,this.objs=i,this.commonObjs=a,this.operatorListIdx=null,this.operatorList=n,this.pageNumber=r,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this.cancelled=!1,this.capability=g(),this.task=new J(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this)}return e.prototype={initalizeGraphics:function(e){if(!this.cancelled){PDFJS.pdfBug&&"StepperManager"in x&&x.StepperManager.enabled&&(this.stepper=x.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var t=this.params;this.gfx=new rt(t.canvasContext,this.commonObjs,this.objs,t.imageLayer),this.gfx.beginDrawing(t.viewport,e),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}},cancel:function(){this.running=!1,this.cancelled=!0,this.callback("cancelled")},operatorListChanged:function(){return this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),void(this.running||this._continue())):void(this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound))},_continue:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue.call(this.task,this._scheduleNextBound):this._scheduleNext())},_scheduleNext:function(){window.requestAnimationFrame(this._nextBound)},_next:function(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this.callback())))}},e}(),Y=(PDFJS.Metadata=function(){function e(e){return e.replace(/>\\376\\377([^<]+)/g,function(e,t){for(var i=t.replace(/\\([0-3])([0-7])([0-7])/g,function(e,t,i,a){return String.fromCharCode(64*t+8*i+1*a)}),a="",n=0;n<i.length;n+=2){var r=256*i.charCodeAt(n)+i.charCodeAt(n+1);a+="&#x"+(65536+r).toString(16).substring(1)+";"}return">"+a})}function t(t){if("string"==typeof t){t=e(t);var a=new DOMParser;t=a.parseFromString(t,"application/xml")}else t instanceof Document||i("Metadata: Invalid metadata object");this.metaDocument=t,this.metadata={},this.parse()}return t.prototype={parse:function(){var e=this.metaDocument,t=e.documentElement;if("rdf:rdf"!==t.nodeName.toLowerCase())for(t=t.firstChild;t&&"rdf:rdf"!==t.nodeName.toLowerCase();)t=t.nextSibling;var i=t?t.nodeName.toLowerCase():null;if(t&&"rdf:rdf"===i&&t.hasChildNodes()){var a,n,r,s,o,l,c,d=t.childNodes;for(s=0,l=d.length;l>s;s++)if(a=d[s],"rdf:description"===a.nodeName.toLowerCase())for(o=0,c=a.childNodes.length;c>o;o++)"#text"!==a.childNodes[o].nodeName.toLowerCase()&&(n=a.childNodes[o],r=n.nodeName.toLowerCase(),this.metadata[r]=n.textContent.trim())}},get:function(e){return this.metadata[e]||null},has:function(e){return"undefined"!=typeof this.metadata[e]}},t}(),16),K=100,Q=4096,Z=.65,et=!0,tt=1e3,it=16,at=function(){var e={};return{getCanvas:function(t,i,a,n){var r;if(void 0!==e[t])r=e[t],r.canvas.width=i,r.canvas.height=a,r.context.setTransform(1,0,0,1,0,0);else{var s=y(i,a),o=s.getContext("2d");n&&k(o),e[t]=r={canvas:s,context:o}}return r},clear:function(){for(var t in e){var i=e[t];i.canvas.width=0,i.canvas.height=0,delete e[t]}}}}(),nt=function(){function e(e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=j,this.textMatrixScale=1,this.fontMatrix=C,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=S.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.old=e}return e.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(e,t){this.x=e,this.y=t}},e}(),rt=function(){function a(e,t,i,a){this.ctx=e,this.current=new nt,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.imageLayer=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,e&&k(e),this.cachedGetSinglePixelWidth=null}function r(e,t){if("undefined"!=typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);var a,n,r,s,o,l=t.height,c=t.width,d=l%it,u=(l-d)/it,h=0===d?u:u+1,f=e.createImageData(c,it),p=0,m=t.data,g=f.data;if(t.kind===T.GRAYSCALE_1BPP){var v=m.byteLength,b=PDFJS.hasCanvasTypedArrays?new Uint32Array(g.buffer):new N(g),y=b.length,k=c+7>>3,w=4294967295,_=PDFJS.isLittleEndian||!PDFJS.hasCanvasTypedArrays?4278190080:255;for(n=0;h>n;n++){for(s=u>n?it:d,a=0,r=0;s>r;r++){for(var x=v-p,A=0,C=x>k?c:8*x-7,S=-8&C,P=0,E=0;S>A;A+=8)E=m[p++],b[a++]=128&E?w:_,b[a++]=64&E?w:_,b[a++]=32&E?w:_,b[a++]=16&E?w:_,b[a++]=8&E?w:_,b[a++]=4&E?w:_,b[a++]=2&E?w:_,b[a++]=1&E?w:_;for(;C>A;A++)0===P&&(E=m[p++],P=128),b[a++]=E&P?w:_,P>>=1}for(;y>a;)b[a++]=0;e.putImageData(f,0,n*it)}}else if(t.kind===T.RGBA_32BPP){for(r=0,o=c*it*4,n=0;u>n;n++)g.set(m.subarray(p,p+o)),p+=o,e.putImageData(f,0,r),r+=it;h>n&&(o=c*d*4,g.set(m.subarray(p,p+o)),e.putImageData(f,0,r))}else if(t.kind===T.RGB_24BPP)for(s=it,o=c*s,n=0;h>n;n++){for(n>=u&&(s=d,o=c*s),a=0,r=o;r--;)g[a++]=m[p++],g[a++]=m[p++],g[a++]=m[p++],g[a++]=255;e.putImageData(f,0,n*it)}else i("bad image kind: "+t.kind)}function s(e,t){for(var i=t.height,a=t.width,n=i%it,r=(i-n)/it,s=0===n?r:r+1,o=e.createImageData(a,it),l=0,c=t.data,d=o.data,u=0;s>u;u++){for(var h=r>u?it:n,f=3,p=0;h>p;p++)for(var m=0,g=0;a>g;g++){if(!m){var v=c[l++];m=128}d[f]=v&m?0:255,f+=4,m>>=1}e.putImageData(o,0,u*it)}}function l(e,t){for(var i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],a=0,n=i.length;n>a;a++){var r=i[a];void 0!==e[r]&&(t[r]=e[r])}void 0!==e.setLineDash?(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset):void 0!==e.mozDashOffset&&(t.mozDash=e.mozDash,t.mozDashOffset=e.mozDashOffset)}function c(e,t,i,a){for(var n=e.length,r=3;n>r;r+=4){var s=e[r];if(0===s)e[r-3]=t,e[r-2]=i,e[r-1]=a;else if(255>s){var o=255-s;e[r-3]=e[r-3]*s+t*o>>8,e[r-2]=e[r-2]*s+i*o>>8,e[r-1]=e[r-1]*s+a*o>>8}}}function d(e,t){for(var i=e.length,a=1/255,n=3;i>n;n+=4){var r=e[n];t[n]=t[n]*r*a|0}}function u(e,t){for(var i=e.length,a=3;i>a;a+=4){var n=77*e[a-3]+152*e[a-2]+28*e[a-1];t[a]=t[a]*n>>16}}function h(e,t,i,a,n,r){var s,o=!!r,l=o?r[0]:0,h=o?r[1]:0,f=o?r[2]:0;s="Luminosity"===n?u:d;for(var p=1048576,m=Math.min(a,Math.ceil(p/i)),g=0;a>g;g+=m){var v=Math.min(m,a-g),b=e.getImageData(0,g,i,v),y=t.getImageData(0,g,i,v);o&&c(b.data,l,h,f),s(b.data,y.data),e.putImageData(y,0,g)}}function m(e,t,i){var a=t.canvas,n=t.context;e.setTransform(t.scaleX,0,0,t.scaleY,t.offsetX,t.offsetY);var r=t.backdrop||null;if(st.isEnabled){var s=st.composeSMask(i.canvas,a,{subtype:t.subtype,backdrop:r});return e.setTransform(1,0,0,1,0,0),void e.drawImage(s,t.offsetX,t.offsetY)}h(n,i,a.width,a.height,t.subtype,r),e.drawImage(a,0,0)}var g=15,v=10,b=["butt","round","square"],y=["miter","round","bevel"],x={},A={};a.prototype={beginDrawing:function(e,t){var i=this.ctx.canvas.width,a=this.ctx.canvas.height;t?this.ctx.clearRect(0,0,i,a):(this.ctx.mozOpaque=!0,this.ctx.save(),this.ctx.fillStyle="rgb(255, 255, 255)",this.ctx.fillRect(0,0,i,a),this.ctx.restore());var n=e.transform;this.ctx.save(),this.ctx.transform.apply(this.ctx,n),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(e,t,i,a){var n=e.argsArray,r=e.fnArray,s=t||0,o=n.length;if(o===s)return s;for(var l,c=o-s>v&&"function"==typeof i,d=c?Date.now()+g:0,u=0,h=this.commonObjs,f=this.objs;;){if(void 0!==a&&s===a.nextBreakPoint)return a.breakIt(s,i),s;if(l=r[s],l!==E.dependency)this[l].apply(this,n[s]);else for(var p=n[s],m=0,b=p.length;b>m;m++){var y=p[m],k="g"===y[0]&&"_"===y[1],w=k?h:f;if(!w.isResolved(y))return w.get(y,i),s}if(s++,s===o)return s;if(c&&++u>v){if(Date.now()>d)return i(),s;u=0}}},endDrawing:function(){this.ctx.restore(),at.clear(),st.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(e){this.current.lineWidth=e,this.ctx.lineWidth=e},setLineCap:function(e){this.ctx.lineCap=b[e]},setLineJoin:function(e){this.ctx.lineJoin=y[e]},setMiterLimit:function(e){this.ctx.miterLimit=e},setDash:function(e,t){var i=this.ctx;void 0!==i.setLineDash?(i.setLineDash(e),i.lineDashOffset=t):(i.mozDash=e,i.mozDashOffset=t)},setRenderingIntent:function(){},setFlatness:function(){},setGState:function(e){for(var i=0,a=e.length;a>i;i++){var n=e[i],r=n[0],s=n[1];switch(r){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":if(s&&s.name&&"Normal"!==s.name){var o=s.name.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}).substring(1);this.ctx.globalCompositeOperation=o,this.ctx.globalCompositeOperation!==o&&t('globalCompositeOperation "'+o+'" is not supported')}else this.ctx.globalCompositeOperation="source-over";break;case"SMask":this.current.activeSMask&&this.endSMaskGroup(),this.current.activeSMask=s?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var e=this.current.activeSMask,t=e.canvas.width,i=e.canvas.height,a="smaskGroupAt"+this.groupLevel,n=at.getCanvas(a,t,i,!0),r=this.ctx,s=r.mozCurrentTransform;this.ctx.save();var o=n.context;o.scale(1/e.scaleX,1/e.scaleY),o.translate(-e.offsetX,-e.offsetY),o.transform.apply(o,s),l(r,o),this.ctx=o,this.setGState([["BM","Normal"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++},endSMaskGroup:function(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),m(this.ctx,this.current.activeSMask,e),this.ctx.restore()},save:function(){this.ctx.save();var e=this.current;this.stateStack.push(e),this.current=e.clone(),this.current.activeSMask=null},restore:function(){0!==this.stateStack.length&&(null!==this.current.activeSMask&&this.endSMaskGroup(),this.current=this.stateStack.pop(),this.ctx.restore(),this.cachedGetSinglePixelWidth=null)},transform:function(e,t,i,a,n,r){this.ctx.transform(e,t,i,a,n,r),this.cachedGetSinglePixelWidth=null},constructPath:function(e,t){for(var i=this.ctx,a=this.current,n=a.x,r=a.y,s=0,o=0,l=e.length;l>s;s++)switch(0|e[s]){case E.rectangle:n=t[o++],r=t[o++];var c=t[o++],d=t[o++];0===c&&(c=this.getSinglePixelWidth()),0===d&&(d=this.getSinglePixelWidth());var u=n+c,h=r+d;this.ctx.moveTo(n,r),this.ctx.lineTo(u,r),this.ctx.lineTo(u,h),this.ctx.lineTo(n,h),this.ctx.lineTo(n,r),this.ctx.closePath();break;case E.moveTo:n=t[o++],r=t[o++],i.moveTo(n,r);break;case E.lineTo:n=t[o++],r=t[o++],i.lineTo(n,r);break;case E.curveTo:n=t[o+4],r=t[o+5],i.bezierCurveTo(t[o],t[o+1],t[o+2],t[o+3],n,r),o+=6;break;case E.curveTo2:i.bezierCurveTo(n,r,t[o],t[o+1],t[o+2],t[o+3]),n=t[o+2],r=t[o+3],o+=4;break;case E.curveTo3:n=t[o+2],r=t[o+3],i.bezierCurveTo(t[o],t[o+1],n,r,n,r),o+=4;break;case E.closePath:i.closePath()}a.setCurrentPoint(n,r)},closePath:function(){this.ctx.closePath()},stroke:function(e){e="undefined"!=typeof e?e:!0;var t=this.ctx,i=this.current.strokeColor;t.lineWidth=Math.max(this.getSinglePixelWidth()*Z,this.current.lineWidth),t.globalAlpha=this.current.strokeAlpha,i&&i.hasOwnProperty("type")&&"Pattern"===i.type?(t.save(),t.strokeStyle=i.getPattern(t,this),t.stroke(),t.restore()):t.stroke(),e&&this.consumePath(),t.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(e){e="undefined"!=typeof e?e:!0;var t=this.ctx,i=this.current.fillColor,a=this.current.patternFill,n=!1;if(a&&(t.save(),t.fillStyle=i.getPattern(t,this),n=!0),this.pendingEOFill){if(void 0!==t.mozFillRule)t.mozFillRule="evenodd",t.fill(),t.mozFillRule="nonzero";else try{t.fill("evenodd")}catch(r){t.fill()}this.pendingEOFill=!1}else t.fill();n&&t.restore(),e&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=x},eoClip:function(){this.pendingClip=A},beginText:function(){this.current.textMatrix=j,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var e=this.pendingTextPaths,t=this.ctx;if(void 0===e)return void t.beginPath();t.save(),t.beginPath();for(var i=0;i<e.length;i++){var a=e[i];t.setTransform.apply(t,a.transform),t.translate(a.x,a.y),a.addToPath(t,a.fontSize)}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths},setCharSpacing:function(e){this.current.charSpacing=e},setWordSpacing:function(e){this.current.wordSpacing=e},setHScale:function(e){this.current.textHScale=e/100},setLeading:function(e){this.current.leading=-e},setFont:function(e,a){var n=this.commonObjs.get(e),r=this.current;if(n||i("Can't find font for "+e),r.fontMatrix=n.fontMatrix?n.fontMatrix:C,(0===r.fontMatrix[0]||0===r.fontMatrix[3])&&t("Invalid font matrix for font "+e),0>a?(a=-a,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=a,!n.isType3Font){var s=n.loadedName||"sans-serif",o=n.black?n.bold?"bolder":"bold":n.bold?"bold":"normal",l=n.italic?"italic":"normal",c='"'+s+'", '+n.fallbackName,d=Y>a?Y:a>K?K:a;this.current.fontSizeScale=a/d;var u=l+" "+o+" "+d+"px "+c;this.ctx.font=u}},setTextRenderingMode:function(e){this.current.textRenderingMode=e},setTextRise:function(e){this.current.textRise=e},moveText:function(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t},setLeadingMoveText:function(e,t){this.setLeading(-t),this.moveText(e,t)},setTextMatrix:function(e,t,i,a,n,r){this.current.textMatrix=[e,t,i,a,n,r],this.current.textMatrixScale=Math.sqrt(e*e+t*t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(e,t,i){var a,n=this.ctx,r=this.current,s=r.font,o=r.textRenderingMode,l=r.fontSize/r.fontSizeScale,c=o&S.FILL_STROKE_MASK,d=!!(o&S.ADD_TO_PATH_FLAG);if((s.disableFontFace||d)&&(a=s.getPathGenerator(this.commonObjs,e)),s.disableFontFace?(n.save(),n.translate(t,i),n.beginPath(),a(n,l),(c===S.FILL||c===S.FILL_STROKE)&&n.fill(),(c===S.STROKE||c===S.FILL_STROKE)&&n.stroke(),n.restore()):((c===S.FILL||c===S.FILL_STROKE)&&n.fillText(e,t,i),(c===S.STROKE||c===S.FILL_STROKE)&&n.strokeText(e,t,i)),d){var u=this.pendingTextPaths||(this.pendingTextPaths=[]);u.push({transform:n.mozCurrentTransform,x:t,y:i,fontSize:l,addToPath:a})}},get isFontSubpixelAAEnabled(){var e=document.createElement("canvas").getContext("2d");e.scale(1.5,1),e.fillText("I",0,10);for(var t=e.getImageData(0,0,10,10).data,i=!1,a=3;a<t.length;a+=4)if(t[a]>0&&t[a]<255){i=!0;break}return o(this,"isFontSubpixelAAEnabled",i)},showText:function(e){var t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);var a=t.fontSize;if(0!==a){var n=this.ctx,r=t.fontSizeScale,s=t.charSpacing,o=t.wordSpacing,l=t.fontDirection,c=t.textHScale*l,d=e.length,u=i.vertical,h=i.defaultVMetrics,p=a*t.fontMatrix[0],m=t.textRenderingMode===S.FILL&&!i.disableFontFace;n.save(),n.transform.apply(n,t.textMatrix),n.translate(t.x,t.y+t.textRise),l>0?n.scale(c,-1):n.scale(c,1);var g=t.lineWidth,v=t.textMatrixScale;if(0===v||0===g){var b=t.textRenderingMode&S.FILL_STROKE_MASK;(b===S.STROKE||b===S.FILL_STROKE)&&(this.cachedGetSinglePixelWidth=null,g=this.getSinglePixelWidth()*Z)}else g/=v;1!==r&&(n.scale(r,r),g/=r),n.lineWidth=g;var y,k=0;for(y=0;d>y;++y){var w=e[y];if(null!==w)if(f(w))k+=-w*a*.001;else{var _,x,A,C,T=!1,P=w.fontChar,E=w.accent,I=w.width;if(u){var L,M,D;L=w.vmetric||h,M=w.vmetric?L[1]:.5*I,M=-M*p,D=L[2]*p,I=L?-L[0]:I,_=M/r,x=(k+D)/r}else _=k/r,x=0;if(i.remeasure&&I>0&&this.isFontSubpixelAAEnabled){var R=1e3*n.measureText(P).width/a*r,O=I/R;T=!0,n.save(),n.scale(O,1),_/=O}m&&!E?n.fillText(P,_,x):(this.paintChar(P,_,x),E&&(A=_+E.offset.x/r,C=x-E.offset.y/r,this.paintChar(E.fontChar,A,C)));var B=I*p+s*l;k+=B,T&&n.restore()}else k+=l*o}u?t.y-=k*c:t.x+=k*c,n.restore()}},showType3Text:function(e){var i,a,n,r=this.ctx,s=this.current,o=s.font,l=s.fontSize,c=s.fontDirection,d=s.charSpacing,u=s.wordSpacing,h=s.textHScale*c,p=s.fontMatrix||C,m=e.length,g=s.textRenderingMode===S.INVISIBLE;if(!g&&0!==l){for(r.save(),r.transform.apply(r,s.textMatrix),r.translate(s.x,s.y),r.scale(h,c),i=0;m>i;++i)if(a=e[i],null!==a)if(f(a)){var v=.001*-a*l;this.ctx.translate(v,0),s.x+=v*h}else{var b=o.charProcOperatorList[a.operatorListId];if(b){this.processingType3=a,this.save(),r.scale(l,l),r.transform.apply(r,p),this.executeOperatorList(b),this.restore();var y=z.applyTransform([a.width,0],p);n=y[0]*l+d,r.translate(n,0),s.x+=n*h}else t('Type3 character "'+a.operatorListId+'" is not available')}else this.ctx.translate(u,0),s.x+=u*h;r.restore(),this.processingType3=null}},setCharWidth:function(){},setCharWidthAndBounds:function(e,t,i,a,n,r){this.ctx.rect(i,a,n-i,r-a),this.clip(),this.endPath()},getColorN_Pattern:function(e){var t;if("TilingPattern"===e[0]){var i=e[1];t=new ct(e,i,this.ctx,this.objs,this.commonObjs,this.baseTransform)}else t=_(e);return t},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(e,t,i){var a=z.makeCssRgb(e,t,i);this.ctx.strokeStyle=a,this.current.strokeColor=a},setFillRGBColor:function(e,t,i){var a=z.makeCssRgb(e,t,i);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1},shadingFill:function(e){var t=this.ctx;this.save();var i=_(e);t.fillStyle=i.getPattern(t,this,!0);var a=t.mozCurrentTransformInverse;if(a){var n=t.canvas,r=n.width,s=n.height,o=z.applyTransform([0,0],a),l=z.applyTransform([0,s],a),c=z.applyTransform([r,0],a),d=z.applyTransform([r,s],a),u=Math.min(o[0],l[0],c[0],d[0]),h=Math.min(o[1],l[1],c[1],d[1]),f=Math.max(o[0],l[0],c[0],d[0]),p=Math.max(o[1],l[1],c[1],d[1]);this.ctx.fillRect(u,h,f-u,p-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){i("Should not call beginInlineImage")},beginImageData:function(){i("Should not call beginImageData")},paintFormXObjectBegin:function(e,t){if(this.save(),this.baseTransformStack.push(this.baseTransform),p(e)&&6===e.length&&this.transform.apply(this,e),this.baseTransform=this.ctx.mozCurrentTransform,p(t)&&4===t.length){var i=t[2]-t[0],a=t[3]-t[1];this.ctx.rect(t[0],t[1],i,a),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(i){this.save();var a=this.ctx;i.isolated||e("TODO: Support non-isolated groups."),i.knockout&&t("Knockout groups not supported.");var r=a.mozCurrentTransform;i.matrix&&a.transform.apply(a,i.matrix),n(i.bbox,"Bounding box is required.");var s=z.getAxialAlignedBoundingBox(i.bbox,a.mozCurrentTransform),o=[0,0,a.canvas.width,a.canvas.height];s=z.intersect(s,o)||[0,0,0,0];var c=Math.floor(s[0]),d=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-c,1),h=Math.max(Math.ceil(s[3])-d,1),f=1,p=1;u>Q&&(f=u/Q,u=Q),h>Q&&(p=h/Q,h=Q);var m="groupAt"+this.groupLevel;i.smask&&(m+="_smask_"+this.smaskCounter++%2);var g=at.getCanvas(m,u,h,!0),v=g.context;v.scale(1/f,1/p),v.translate(-c,-d),v.transform.apply(v,r),i.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:c,offsetY:d,scaleX:f,scaleY:p,subtype:i.smask.subtype,backdrop:i.smask.backdrop}):(a.setTransform(1,0,0,1,0,0),a.translate(c,d),a.scale(f,p)),l(a,v),this.ctx=v,this.setGState([["BM","Normal"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++},endGroup:function(e){this.groupLevel--;var t=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,e.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(t.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.current=new nt},endAnnotations:function(){this.restore()},beginAnnotation:function(e,t,i){if(this.save(),p(e)&&4===e.length){var a=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],a,n),this.clip(),this.endPath()}this.transform.apply(this,t),this.transform.apply(this,i)},endAnnotation:function(){this.restore()},paintJpegXObject:function(e,i,a){var n=this.objs.get(e);if(!n)return void t("Dependent image isn't ready yet");this.save();var r=this.ctx;if(r.scale(1/i,-1/a),r.drawImage(n,0,0,n.width,n.height,0,-a,i,a),this.imageLayer){var s=r.mozCurrentTransformInverse,o=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:e,left:o[0],top:o[1],width:i/s[0],height:a/s[3]})}this.restore()},paintImageMaskXObject:function(e){var t=this.ctx,i=e.width,a=e.height,n=this.current.fillColor,r=this.current.patternFill,o=this.processingType3;if(et&&o&&void 0===o.compiled&&(o.compiled=tt>=i&&tt>=a?w({data:e.data,width:i,height:a}):null),o&&o.compiled)return void o.compiled(t);var l=at.getCanvas("maskCanvas",i,a),c=l.context;c.save(),s(c,e),c.globalCompositeOperation="source-in",c.fillStyle=r?n.getPattern(c,this):n,c.fillRect(0,0,i,a),c.restore(),this.paintInlineImageXObject(l.canvas)},paintImageMaskXObjectRepeat:function(e,t,i,a){var n=e.width,r=e.height,o=this.current.fillColor,l=this.current.patternFill,c=at.getCanvas("maskCanvas",n,r),d=c.context;d.save(),s(d,e),d.globalCompositeOperation="source-in",d.fillStyle=l?o.getPattern(d,this):o,d.fillRect(0,0,n,r),d.restore();for(var u=this.ctx,h=0,f=a.length;f>h;h+=2)u.save(),u.transform(t,0,0,i,a[h],a[h+1]),u.scale(1,-1),u.drawImage(c.canvas,0,0,n,r,0,-1,1,1),u.restore()},paintImageMaskXObjectGroup:function(e){for(var t=this.ctx,i=this.current.fillColor,a=this.current.patternFill,n=0,r=e.length;r>n;n++){var o=e[n],l=o.width,c=o.height,d=at.getCanvas("maskCanvas",l,c),u=d.context;u.save(),s(u,o),u.globalCompositeOperation="source-in",u.fillStyle=a?i.getPattern(u,this):i,u.fillRect(0,0,l,c),u.restore(),t.save(),t.transform.apply(t,o.transform),t.scale(1,-1),t.drawImage(d.canvas,0,0,l,c,0,-1,1,1),t.restore()}},paintImageXObject:function(e){var i=this.objs.get(e);return i?void this.paintInlineImageXObject(i):void t("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(e,i,a,n){var r=this.objs.get(e);if(!r)return void t("Dependent image isn't ready yet");for(var s=r.width,o=r.height,l=[],c=0,d=n.length;d>c;c+=2)l.push({transform:[i,0,0,a,n[c],n[c+1]],x:0,y:0,w:s,h:o});this.paintInlineImageXObjectGroup(r,l)},paintInlineImageXObject:function(e){var t=e.width,i=e.height,a=this.ctx;this.save(),a.scale(1/t,-1/i);var n,s,o=a.mozCurrentTransformInverse,l=o[0],c=o[1],d=Math.max(Math.sqrt(l*l+c*c),1),u=o[2],h=o[3],f=Math.max(Math.sqrt(u*u+h*h),1);if(e instanceof HTMLElement||!e.data)n=e;else{s=at.getCanvas("inlineImage",t,i);var p=s.context;r(p,e),n=s.canvas}for(var m=t,g=i,v="prescale1";d>2&&m>1||f>2&&g>1;){var b=m,y=g;d>2&&m>1&&(b=Math.ceil(m/2),d/=m/b),f>2&&g>1&&(y=Math.ceil(g/2),f/=g/y),s=at.getCanvas(v,b,y),p=s.context,p.clearRect(0,0,b,y),p.drawImage(n,0,0,m,g,0,0,b,y),n=s.canvas,m=b,g=y,v="prescale1"===v?"prescale2":"prescale1"}if(a.drawImage(n,0,0,m,g,0,-i,t,i),this.imageLayer){var k=this.getCanvasPosition(0,-i);this.imageLayer.appendImage({imgData:e,left:k[0],top:k[1],width:t/o[0],height:i/o[3]})}this.restore()},paintInlineImageXObjectGroup:function(e,t){var i=this.ctx,a=e.width,n=e.height,s=at.getCanvas("inlineImage",a,n),o=s.context;r(o,e);for(var l=0,c=t.length;c>l;l++){var d=t[l];if(i.save(),i.transform.apply(i,d.transform),i.scale(1,-1),i.drawImage(s.canvas,d.x,d.y,d.w,d.h,0,-1,1,1),this.imageLayer){var u=this.getCanvasPosition(d.x,d.y);this.imageLayer.appendImage({imgData:e,left:u[0],top:u[1],width:a,height:n})}i.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},markPoint:function(){},markPointProps:function(){},beginMarkedContent:function(){},beginMarkedContentProps:function(){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var e=this.ctx;if(this.pendingClip){if(this.pendingClip===A)if(void 0!==e.mozFillRule)e.mozFillRule="evenodd",e.clip(),e.mozFillRule="nonzero";else try{e.clip("evenodd")}catch(t){e.clip()}else e.clip();this.pendingClip=null}e.beginPath()},getSinglePixelWidth:function(){if(null===this.cachedGetSinglePixelWidth){var e=this.ctx.mozCurrentTransformInverse;this.cachedGetSinglePixelWidth=Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1],e[2]*e[2]+e[3]*e[3]))}return this.cachedGetSinglePixelWidth},getCanvasPosition:function(e,t){var i=this.ctx.mozCurrentTransform;return[i[0]*e+i[2]*t+i[4],i[1]*e+i[3]*t+i[5]]}};for(var P in E)a.prototype[E[P]]=a.prototype[P];return a}(),st=function(){function e(e,t,i){var a=e.createShader(i);e.shaderSource(a,t),e.compileShader(a);var n=e.getShaderParameter(a,e.COMPILE_STATUS);if(!n){var r=e.getShaderInfoLog(a);throw new Error("Error during shader compilation: "+r)}return a}function t(t,i){return e(t,i,t.VERTEX_SHADER)}function i(t,i){return e(t,i,t.FRAGMENT_SHADER)}function a(e,t){for(var i=e.createProgram(),a=0,n=t.length;n>a;++a)e.attachShader(i,t[a]);e.linkProgram(i);var r=e.getProgramParameter(i,e.LINK_STATUS);if(!r){var s=e.getProgramInfoLog(i);throw new Error("Error during program linking: "+s)}return i}function n(e,t,i){e.activeTexture(i);var a=e.createTexture();return e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),a}function r(){h||(f=document.createElement("canvas"),h=f.getContext("webgl",{premultipliedalpha:!1}))}function s(){var e,n;r(),e=f,f=null,n=h,h=null;var s=t(n,p),o=i(n,m),l=a(n,[s,o]);n.useProgram(l);var c={};c.gl=n,c.canvas=e,c.resolutionLocation=n.getUniformLocation(l,"u_resolution"),c.positionLocation=n.getAttribLocation(l,"a_position"),c.backdropLocation=n.getUniformLocation(l,"u_backdrop"),c.subtypeLocation=n.getUniformLocation(l,"u_subtype");var d=n.getAttribLocation(l,"a_texCoord"),u=n.getUniformLocation(l,"u_image"),v=n.getUniformLocation(l,"u_mask"),b=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,b),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),n.STATIC_DRAW),n.enableVertexAttribArray(d),n.vertexAttribPointer(d,2,n.FLOAT,!1,0,0),n.uniform1i(u,0),n.uniform1i(v,1),g=c}function l(e,t,i){var a=e.width,r=e.height;g||s();var o=g,l=o.canvas,c=o.gl;l.width=a,l.height=r,c.viewport(0,0,c.drawingBufferWidth,c.drawingBufferHeight),c.uniform2f(o.resolutionLocation,a,r),i.backdrop?c.uniform4f(o.resolutionLocation,i.backdrop[0],i.backdrop[1],i.backdrop[2],1):c.uniform4f(o.resolutionLocation,0,0,0,0),c.uniform1i(o.subtypeLocation,"Luminosity"===i.subtype?1:0);var d=n(c,e,c.TEXTURE0),u=n(c,t,c.TEXTURE1),h=c.createBuffer();return c.bindBuffer(c.ARRAY_BUFFER,h),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,a,0,0,r,0,r,a,0,a,r]),c.STATIC_DRAW),c.enableVertexAttribArray(o.positionLocation),c.vertexAttribPointer(o.positionLocation,2,c.FLOAT,!1,0,0),c.clearColor(0,0,0,0),c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),c.clear(c.COLOR_BUFFER_BIT),c.drawArrays(c.TRIANGLES,0,6),c.flush(),c.deleteTexture(d),c.deleteTexture(u),c.deleteBuffer(h),l}function c(){var e,n;r(),e=f,f=null,n=h,h=null;var s=t(n,v),o=i(n,b),l=a(n,[s,o]);n.useProgram(l);var c={};c.gl=n,c.canvas=e,c.resolutionLocation=n.getUniformLocation(l,"u_resolution"),c.scaleLocation=n.getUniformLocation(l,"u_scale"),c.offsetLocation=n.getUniformLocation(l,"u_offset"),c.positionLocation=n.getAttribLocation(l,"a_position"),c.colorLocation=n.getAttribLocation(l,"a_color"),y=c}function d(e,t,i,a,n){y||c();var r=y,s=r.canvas,o=r.gl;s.width=e,s.height=t,o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.uniform2f(r.resolutionLocation,e,t);var l,d,u,h=0;for(l=0,d=a.length;d>l;l++)switch(a[l].type){case"lattice":u=a[l].coords.length/a[l].verticesPerRow|0,h+=(u-1)*(a[l].verticesPerRow-1)*6;break;case"triangles":h+=a[l].coords.length}var f=new Float32Array(2*h),p=new Uint8Array(3*h),m=n.coords,g=n.colors,v=0,b=0;for(l=0,d=a.length;d>l;l++){var k=a[l],w=k.coords,_=k.colors;switch(k.type){case"lattice":var x=k.verticesPerRow;u=w.length/x|0;for(var A=1;u>A;A++)for(var C=A*x+1,S=1;x>S;S++,C++)f[v]=m[w[C-x-1]],f[v+1]=m[w[C-x-1]+1],f[v+2]=m[w[C-x]],f[v+3]=m[w[C-x]+1],f[v+4]=m[w[C-1]],f[v+5]=m[w[C-1]+1],p[b]=g[_[C-x-1]],p[b+1]=g[_[C-x-1]+1],p[b+2]=g[_[C-x-1]+2],p[b+3]=g[_[C-x]],p[b+4]=g[_[C-x]+1],p[b+5]=g[_[C-x]+2],p[b+6]=g[_[C-1]],p[b+7]=g[_[C-1]+1],p[b+8]=g[_[C-1]+2],f[v+6]=f[v+2],f[v+7]=f[v+3],f[v+8]=f[v+4],f[v+9]=f[v+5],f[v+10]=m[w[C]],f[v+11]=m[w[C]+1],p[b+9]=p[b+3],p[b+10]=p[b+4],p[b+11]=p[b+5],p[b+12]=p[b+6],p[b+13]=p[b+7],p[b+14]=p[b+8],p[b+15]=g[_[C]],p[b+16]=g[_[C]+1],p[b+17]=g[_[C]+2],v+=12,b+=18;
break;case"triangles":for(var T=0,P=w.length;P>T;T++)f[v]=m[w[T]],f[v+1]=m[w[T]+1],p[b]=g[_[l]],p[b+1]=g[_[T]+1],p[b+2]=g[_[T]+2],v+=2,b+=3}}i?o.clearColor(i[0]/255,i[1]/255,i[2]/255,1):o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT);var E=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,E),o.bufferData(o.ARRAY_BUFFER,f,o.STATIC_DRAW),o.enableVertexAttribArray(r.positionLocation),o.vertexAttribPointer(r.positionLocation,2,o.FLOAT,!1,0,0);var I=o.createBuffer();return o.bindBuffer(o.ARRAY_BUFFER,I),o.bufferData(o.ARRAY_BUFFER,p,o.STATIC_DRAW),o.enableVertexAttribArray(r.colorLocation),o.vertexAttribPointer(r.colorLocation,3,o.UNSIGNED_BYTE,!1,0,0),o.uniform2f(r.scaleLocation,n.scaleX,n.scaleY),o.uniform2f(r.offsetLocation,n.offsetX,n.offsetY),o.drawArrays(o.TRIANGLES,0,h),o.flush(),o.deleteBuffer(E),o.deleteBuffer(I),s}function u(){g&&g.canvas&&(g.canvas.width=0,g.canvas.height=0),y&&y.canvas&&(y.canvas.width=0,y.canvas.height=0),g=null,y=null}var h,f,p="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",m="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",g=null,v="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",b="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",y=null;return{get isEnabled(){if(PDFJS.disableWebGL)return!1;var e=!1;try{r(),e=!!h}catch(t){}return o(this,"isEnabled",e)},composeSMask:l,drawFigures:d,clear:u}}(),ot={};ot.RadialAxial={fromIR:function(e){var t=e[1],i=e[2],a=e[3],n=e[4],r=e[5],s=e[6];return{type:"Pattern",getPattern:function(e){var o;"axial"===t?o=e.createLinearGradient(a[0],a[1],n[0],n[1]):"radial"===t&&(o=e.createRadialGradient(a[0],a[1],r,n[0],n[1],s));for(var l=0,c=i.length;c>l;++l){var d=i[l];o.addColorStop(d[0],d[1])}return o}}}};var lt=function(){function e(e,t,i,a,n,r,s,o){var l,c=t.coords,d=t.colors,u=e.data,h=4*e.width;c[i+1]>c[a+1]&&(l=i,i=a,a=l,l=r,r=s,s=l),c[a+1]>c[n+1]&&(l=a,a=n,n=l,l=s,s=o,o=l),c[i+1]>c[a+1]&&(l=i,i=a,a=l,l=r,r=s,s=l);var f=(c[i]+t.offsetX)*t.scaleX,p=(c[i+1]+t.offsetY)*t.scaleY,m=(c[a]+t.offsetX)*t.scaleX,g=(c[a+1]+t.offsetY)*t.scaleY,v=(c[n]+t.offsetX)*t.scaleX,b=(c[n+1]+t.offsetY)*t.scaleY;if(!(p>=b))for(var y,k,w,_,x,A,C,S,T,P=d[r],E=d[r+1],I=d[r+2],L=d[s],M=d[s+1],D=d[s+2],R=d[o],O=d[o+1],B=d[o+2],F=Math.round(p),N=Math.round(b),j=F;N>=j;j++){g>j?(T=p>j?0:p===g?1:(p-j)/(p-g),y=f-(f-m)*T,k=P-(P-L)*T,w=E-(E-M)*T,_=I-(I-D)*T):(T=j>b?1:g===b?0:(g-j)/(g-b),y=m-(m-v)*T,k=L-(L-R)*T,w=M-(M-O)*T,_=D-(D-B)*T),T=p>j?0:j>b?1:(p-j)/(p-b),x=f-(f-v)*T,A=P-(P-R)*T,C=E-(E-O)*T,S=I-(I-B)*T;for(var z=Math.round(Math.min(y,x)),U=Math.round(Math.max(y,x)),q=h*j+4*z,V=z;U>=V;V++)T=(y-V)/(y-x),T=0>T?0:T>1?1:T,u[q++]=k-(k-A)*T|0,u[q++]=w-(w-C)*T|0,u[q++]=_-(_-S)*T|0,u[q++]=255}}function t(t,a,n){var r,s,o=a.coords,l=a.colors;switch(a.type){case"lattice":var c=a.verticesPerRow,d=Math.floor(o.length/c)-1,u=c-1;for(r=0;d>r;r++)for(var h=r*c,f=0;u>f;f++,h++)e(t,n,o[h],o[h+1],o[h+c],l[h],l[h+1],l[h+c]),e(t,n,o[h+c+1],o[h+1],o[h+c],l[h+c+1],l[h+1],l[h+c]);break;case"triangles":for(r=0,s=o.length;s>r;r+=3)e(t,n,o[r],o[r+1],o[r+2],l[r],l[r+1],l[r+2]);break;default:i("illigal figure")}}function a(e,i,a,n,r,s){var o,l,c,d,u=1.1,h=3e3,f=Math.floor(e[0]),p=Math.floor(e[1]),m=Math.ceil(e[2])-f,g=Math.ceil(e[3])-p,v=Math.min(Math.ceil(Math.abs(m*i[0]*u)),h),b=Math.min(Math.ceil(Math.abs(g*i[1]*u)),h),y=m/v,k=g/b,w={coords:a,colors:n,offsetX:-f,offsetY:-p,scaleX:1/y,scaleY:1/k};if(st.isEnabled)o=st.drawFigures(v,b,s,r,w),l=at.getCanvas("mesh",v,b,!1),l.context.drawImage(o,0,0),o=l.canvas;else{l=at.getCanvas("mesh",v,b,!1);var _=l.context,x=_.createImageData(v,b);if(s){var A=x.data;for(c=0,d=A.length;d>c;c+=4)A[c]=s[0],A[c+1]=s[1],A[c+2]=s[2],A[c+3]=255}for(c=0;c<r.length;c++)t(x,r[c],w);_.putImageData(x,0,0),o=l.canvas}return{canvas:o,offsetX:f,offsetY:p,scaleX:y,scaleY:k}}return a}();ot.Mesh={fromIR:function(e){var t=e[2],i=e[3],a=e[4],n=e[5],r=e[6],s=e[8];return{type:"Pattern",getPattern:function(e,o,l){var c;if(l)c=z.singularValueDecompose2dScale(e.mozCurrentTransform);else if(c=z.singularValueDecompose2dScale(o.baseTransform),r){var d=z.singularValueDecompose2dScale(r);c=[c[0]*d[0],c[1]*d[1]]}var u=lt(n,c,t,i,a,l?null:s);return l||(e.setTransform.apply(e,o.baseTransform),r&&e.transform.apply(e,r)),e.translate(u.offsetX,u.offsetY),e.scale(u.scaleX,u.scaleY),e.createPattern(u.canvas,"no-repeat")}}}},ot.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var ct=function(){function t(e,t,i,a,n,r){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.objs=a,this.commonObjs=n,this.baseTransform=r,this.type="Pattern",this.ctx=i}var a={COLORED:1,UNCOLORED:2},n=3e3;return t.prototype={createPatternCanvas:function(t){var i=this.operatorList,a=this.bbox,r=this.xstep,s=this.ystep,o=this.paintType,l=this.tilingType,c=this.color,d=this.objs,u=this.commonObjs;e("TilingType: "+l);var h=a[0],f=a[1],p=a[2],m=a[3],g=[h,f],v=[h+r,f+s],b=v[0]-g[0],y=v[1]-g[1],k=z.singularValueDecompose2dScale(this.matrix),w=z.singularValueDecompose2dScale(this.baseTransform),_=[k[0]*w[0],k[1]*w[1]];b=Math.min(Math.ceil(Math.abs(b*_[0])),n),y=Math.min(Math.ceil(Math.abs(y*_[1])),n);var x=at.getCanvas("pattern",b,y,!0),A=x.context,C=new rt(A,u,d);C.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(A,o,c),this.setScale(b,y,r,s),this.transformToScale(C);var S=[1,0,0,1,-g[0],-g[1]];return C.transform.apply(C,S),this.clipBbox(C,a,h,f,p,m),C.executeOperatorList(i),x.canvas},setScale:function(e,t,i,a){this.scale=[e/i,t/a]},transformToScale:function(e){var t=this.scale,i=[t[0],0,0,t[1],0,0];e.transform.apply(e,i)},scaleToContext:function(){var e=this.scale;this.ctx.scale(1/e[0],1/e[1])},clipBbox:function(e,t,i,a,n,r){if(t&&p(t)&&4===t.length){var s=n-i,o=r-a;e.ctx.rect(i,a,s,o),e.clip(),e.endPath()}},setFillAndStrokeStyleToContext:function(e,t,n){switch(t){case a.COLORED:var r=this.ctx;e.fillStyle=r.fillStyle,e.strokeStyle=r.strokeStyle;break;case a.UNCOLORED:var s=z.makeCssRgb(n[0],n[1],n[2]);e.fillStyle=s,e.strokeStyle=s;break;default:i("Unsupported paint type: "+t)}},getPattern:function(e,t){var i=this.createPatternCanvas(t);return e=this.ctx,e.setTransform.apply(e,this.baseTransform),e.transform.apply(e,this.matrix),this.scaleToContext(),e.createPattern(i,"repeat")}},t}();PDFJS.disableFontFace=!1;var dt={insertRule:function(e){var t=document.getElementById("PDFJS_FONT_STYLE_TAG");t||(t=document.createElement("style"),t.id="PDFJS_FONT_STYLE_TAG",document.documentElement.getElementsByTagName("head")[0].appendChild(t));var i=t.sheet;i.insertRule(e,i.cssRules.length)},clear:function(){var e=document.getElementById("PDFJS_FONT_STYLE_TAG");e&&e.parentNode.removeChild(e),this.nativeFontFaces.forEach(function(e){document.fonts["delete"](e)}),this.nativeFontFaces.length=0},get loadTestFont(){return o(this,"loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))},loadTestFontId:0,loadingContext:{requests:[],nextRequestId:0},isSyncFontLoadingSupported:function(){if(A)return!1;var e=window.navigator.userAgent,t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(e);return t&&t[1]>=14?!0:"node"===e?!0:!1}(),nativeFontFaces:[],isFontLoadingAPISupported:!A&&"undefined"!=typeof document&&!!document.fonts,addNativeFontFace:function(e){this.nativeFontFaces.push(e),document.fonts.add(e)},bind:function(e,t){n(!A,"bind() shall be called from main thread");for(var i=[],a=[],r=[],s=0,o=e.length;o>s;s++){var l=e[s];if(!l.attached&&l.loading!==!1)if(l.attached=!0,this.isFontLoadingAPISupported){var c=l.createNativeFontFace();c&&r.push(c.loaded)}else{var d=l.bindDOM();d&&(i.push(d),a.push(l))}}var u=dt.queueLoadingCallback(t);this.isFontLoadingAPISupported?Promise.all(a).then(function(){u.complete()}):i.length>0&&!this.isSyncFontLoadingSupported?dt.prepareFontLoadEvent(i,a,u):u.complete()},queueLoadingCallback:function(e){function t(){for(n(!r.end,"completeRequest() cannot be called twice"),r.end=Date.now();i.requests.length>0&&i.requests[0].end;){var e=i.requests.shift();setTimeout(e.callback,0)}}var i=dt.loadingContext,a="pdfjs-font-loading-"+i.nextRequestId++,r={id:a,complete:t,callback:e,started:Date.now()};return i.requests.push(r),r},prepareFontLoadEvent:function(e,i,a){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function r(e,t,i,a){var n=e.substr(0,t),r=e.substr(t+i);return n+a+r}function s(e,i){if(h++,h>30)return t("Load test font never loaded."),void i();u.font="30px "+e,u.fillText(".",0,20);var a=u.getImageData(0,0,1,1);return a.data[3]>0?void i():void setTimeout(s.bind(null,e,i))}var o,l,c=document.createElement("canvas");c.width=1,c.height=1;var u=c.getContext("2d"),h=0,f="lt"+Date.now()+this.loadTestFontId++,p=this.loadTestFont,m=976;p=r(p,m,f.length,f);var g=16,v=1482184792,b=n(p,g);for(o=0,l=f.length-3;l>o;o+=4)b=b-v+n(f,o)|0;o<f.length&&(b=b-v+n(f+"XXX",o)|0),p=r(p,g,4,d(b));var y="url(data:font/opentype;base64,"+btoa(p)+");",k='@font-face { font-family:"'+f+'";src:'+y+"}";dt.insertRule(k);var w=[];for(o=0,l=i.length;l>o;o++)w.push(i[o].loadedName);w.push(f);var _=document.createElement("div");for(_.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;"),o=0,l=w.length;l>o;++o){var x=document.createElement("span");x.textContent="Hi",x.style.fontFamily=w[o],_.appendChild(x)}document.body.appendChild(_),s(f,function(){document.body.removeChild(_),a.complete()})}},ut=function(){function e(){if(this.compiledGlyphs={},1!==arguments.length);else{var e=arguments[0];for(var t in e)this[t]=e[t]}}return e.prototype={createNativeFontFace:function(){if(!this.data)return null;if(PDFJS.disableFontFace)return this.disableFontFace=!0,null;var e=new FontFace(this.loadedName,this.data,{});return dt.addNativeFontFace(e),PDFJS.pdfBug&&"FontInspector"in x&&x.FontInspector.enabled&&x.FontInspector.fontAdded(this),e},bindDOM:function(){if(!this.data)return null;if(PDFJS.disableFontFace)return this.disableFontFace=!0,null;var e=l(new Uint8Array(this.data)),t=this.loadedName,i="url(data:"+this.mimetype+";base64,"+window.btoa(e)+");",a='@font-face { font-family:"'+t+'";src:'+i+"}";return dt.insertRule(a),PDFJS.pdfBug&&"FontInspector"in x&&x.FontInspector.enabled&&x.FontInspector.fontAdded(this,i),a},getPathGenerator:function(e,t){if(!(t in this.compiledGlyphs)){var i=e.get(this.loadedName+"_path_"+t);this.compiledGlyphs[t]=new Function("c","size",i)}return this.compiledGlyphs[t]}},e}(),ht=10,ft=function(){function e(e,t,i){var a=e.style;if(a.fontSize=t.fontSize+"px",a.direction=t.fontDirection<0?"rtl":"ltr",i){a.fontWeight=i.black?i.bold?"bolder":"bold":i.bold?"bold":"normal",a.fontStyle=i.italic?"italic":"normal";var n=i.loadedName,r=n?'"'+n+'", ':"",s=i.fallbackName||"Helvetica, sans-serif";a.fontFamily=r+s}}function t(e,t){var i=document.createElement("section"),a=i.style,n=e.rect[2]-e.rect[0],r=e.rect[3]-e.rect[1],s=e.borderWidth||0;if(s){n-=2*s,r-=2*s,a.borderWidth=s+"px";var o=e.color;t&&o&&(a.borderStyle="solid",a.borderColor=z.makeCssRgb(Math.round(255*o[0]),Math.round(255*o[1]),Math.round(255*o[2])))}return a.width=n+"px",a.height=r+"px",i}function i(t,i){var a=document.createElement("div"),n=t.rect[2]-t.rect[0],r=t.rect[3]-t.rect[1];a.style.width=n+"px",a.style.height=r+"px",a.style.display="table";var s=document.createElement("div");s.textContent=t.fieldValue;var o=t.textAlignment;s.style.textAlign=["left","center","right"][o],s.style.verticalAlign="middle",s.style.display="table-cell";var l=t.fontRefName?i.getData(t.fontRefName):null;return e(s,t,l),a.appendChild(s),a}function a(e){var i=e.rect;i[3]-i[1]<ht&&(i[3]=i[1]+ht),i[2]-i[0]<ht&&(i[2]=i[0]+(i[3]-i[1]));var a=t(e,!1);a.className="annotText";var n=document.createElement("img");n.style.height=a.style.height,n.style.width=a.style.width;var r=e.name;n.src=PDFJS.imageResourcesPath+"annotation-"+r.toLowerCase()+".svg",n.alt="[{{type}} Annotation]",n.dataset.l10nId="text_annotation_type",n.dataset.l10nArgs=JSON.stringify({type:r});var s=document.createElement("div");s.className="annotTextContentWrapper",s.style.left=Math.floor(i[2]-i[0]+5)+"px",s.style.top="-10px";var o=document.createElement("div");o.className="annotTextContent",o.setAttribute("hidden",!0);var l,c;if(e.hasBgColor){var d=e.color,u=.7,h=u*(1-d[0])+d[0],f=u*(1-d[1])+d[1],p=u*(1-d[2])+d[2];o.style.backgroundColor=z.makeCssRgb(255*h|0,255*f|0,255*p|0)}var m=document.createElement("h1"),g=document.createElement("p");if(m.textContent=e.title,e.content||e.title){var v=document.createElement("span"),b=e.content.split(/(?:\r\n?|\n)/);for(l=0,c=b.length;c>l;++l){var y=b[l];v.appendChild(document.createTextNode(y)),c-1>l&&v.appendChild(document.createElement("br"))}g.appendChild(v);var k=!1,w=function(e){e&&(k=!0),o.hasAttribute("hidden")&&(a.style.zIndex+=1,o.removeAttribute("hidden"))},_=function(e){e&&(k=!1),o.hasAttribute("hidden")||k||(a.style.zIndex-=1,o.setAttribute("hidden",!0))},x=function(){k?_(!0):w(!0)};n.addEventListener("click",function(){x()},!1),n.addEventListener("mouseover",function(){w()},!1),n.addEventListener("mouseout",function(){_()},!1),o.addEventListener("click",function(){_(!0)},!1)}else o.setAttribute("hidden",!0);return o.appendChild(m),o.appendChild(g),s.appendChild(o),a.appendChild(n),a.appendChild(s),a}function n(e){var i=t(e,!0);i.className="annotLink";var a=document.createElement("a");return a.href=a.title=e.url||"",e.url&&PDFJS.openExternalLinksInNewWindow&&(a.target="_blank"),i.appendChild(a),i}function r(e,t){switch(e.annotationType){case P.WIDGET:return i(e,t);case P.TEXT:return a(e);case P.LINK:return n(e);default:throw new Error("Unsupported annotationType: "+e.annotationType)}}return{getHtmlElement:r}}();PDFJS.AnnotationUtils=ft;var pt={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},mt=function(){function e(e,t,i){for(var a=-1,n=t;i>n;n++){var r=255&(a^e[n]),o=s[r];a=a>>>8^o}return-1^a}function t(t,i,a,n){var r=n,s=i.length;a[r]=s>>24&255,a[r+1]=s>>16&255,a[r+2]=s>>8&255,a[r+3]=255&s,r+=4,a[r]=255&t.charCodeAt(0),a[r+1]=255&t.charCodeAt(1),a[r+2]=255&t.charCodeAt(2),a[r+3]=255&t.charCodeAt(3),r+=4,a.set(i,r),r+=i.length;var o=e(a,n+4,r);a[r]=o>>24&255,a[r+1]=o>>16&255,a[r+2]=o>>8&255,a[r+3]=255&o}function i(e,t,i){for(var a=1,n=0,r=t;i>r;++r)a=(a+(255&e[r]))%65521,n=(n+a)%65521;return n<<16|a}function a(e,a){var s,o,l,c=e.width,d=e.height,u=e.data;switch(a){case T.GRAYSCALE_1BPP:o=0,s=1,l=c+7>>3;break;case T.RGB_24BPP:o=2,s=8,l=3*c;break;case T.RGBA_32BPP:o=6,s=8,l=4*c;break;default:throw new Error("invalid format")}var h,f,p=new Uint8Array((1+l)*d),m=0,g=0;for(h=0;d>h;++h)p[m++]=0,p.set(u.subarray(g,g+l),m),g+=l,m+=l;if(a===T.GRAYSCALE_1BPP)for(m=0,h=0;d>h;h++)for(m++,f=0;l>f;f++)p[m++]^=255;var v=new Uint8Array([c>>24&255,c>>16&255,c>>8&255,255&c,d>>24&255,d>>16&255,d>>8&255,255&d,s,o,0,0,0]),b=p.length,y=65535,k=Math.ceil(b/y),w=new Uint8Array(2+b+5*k+4),_=0;w[_++]=120,w[_++]=156;for(var x=0;b>y;)w[_++]=0,w[_++]=255,w[_++]=255,w[_++]=0,w[_++]=0,w.set(p.subarray(x,x+y),_),_+=y,x+=y,b-=y;w[_++]=1,w[_++]=255&b,w[_++]=b>>8&255,w[_++]=65535&~b&255,w[_++]=(65535&~b)>>8&255,w.set(p.subarray(x),_),_+=p.length-x;var A=i(p,0,p.length);w[_++]=A>>24&255,w[_++]=A>>16&255,w[_++]=A>>8&255,w[_++]=255&A;var C=n.length+3*r+v.length+w.length,S=new Uint8Array(C),P=0;return S.set(n,P),P+=n.length,t("IHDR",v,S,P),P+=r+v.length,t("IDATA",w,S,P),P+=r+w.length,t("IEND",new Uint8Array(0),S,P),PDFJS.createObjectURL(S,"image/png")}for(var n=new Uint8Array([137,80,78,71,13,10,26,10]),r=12,s=new Int32Array(256),o=0;256>o;o++){for(var l=o,c=0;8>c;c++)l=1&l?3988292384^l>>1&2147483647:l>>1&2147483647;s[o]=l}return function(e){var t=void 0===e.kind?T.GRAYSCALE_1BPP:e.kind;return a(e,t)}}(),gt=function(){function e(){this.fontSizeScale=1,this.fontWeight=pt.fontWeight,this.fontSize=0,this.textMatrix=j,this.fontMatrix=C,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=pt.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.clipId="",this.pendingClip=!1,this.maskId=""}return e.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(e,t){this.x=e,this.y=t}},e}(),vt=function(){function e(e,t){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg:svg");return a.setAttributeNS(null,"version","1.1"),a.setAttributeNS(null,"width",e+"px"),a.setAttributeNS(null,"height",t+"px"),a.setAttributeNS(null,"viewBox","0 0 "+e+" "+t),a}function i(e){for(var t=[],i=[],a=e.length,n=0;a>n;n++)"save"!==e[n].fn?"restore"===e[n].fn?t=i.pop():t.push(e[n]):(t.push({fnId:92,fn:"group",items:[]}),i.push(t),t=t[t.length-1].items);return t}function a(e){if(e===(0|e))return e.toString();var t=e.toFixed(10),i=t.length-1;if("0"!==t[i])return t;do i--;while("0"===t[i]);return t.substr(0,"."===t[i]?i:i+1)}function n(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":"scale("+a(e[0])+" "+a(e[3])+")";if(e[0]===e[3]&&e[1]===-e[2]){var t=180*Math.acos(e[0])/Math.PI;return"rotate("+a(t)+")"}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return"translate("+a(e[4])+" "+a(e[5])+")";return"matrix("+a(e[0])+" "+a(e[1])+" "+a(e[2])+" "+a(e[3])+" "+a(e[4])+" "+a(e[5])+")"}function r(e,t){this.current=new gt,this.transformMatrix=j,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts={},this.cssStyle=null}var s="http://www.w3.org/2000/svg",o="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/1999/xlink",c=["butt","round","square"],d=["miter","round","bevel"],u=0,h=0;return r.prototype={save:function(){this.transformStack.push(this.transformMatrix);var e=this.current;this.extraStack.push(e),this.current=e.clone()},restore:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.tgrp=document.createElementNS(s,"svg:g"),this.tgrp.setAttributeNS(null,"transform",n(this.transformMatrix)),this.pgrp.appendChild(this.tgrp)},group:function(e){this.save(),this.executeOpTree(e),this.restore()},loadDependencies:function(e){for(var t=e.fnArray,i=t.length,a=e.argsArray,n=this,r=0;i>r;r++)if(E.dependency===t[r])for(var s=a[r],o=0,l=s.length;l>o;o++){var c,d=s[o],u="g_"===d.substring(0,2);c=new Promise(u?function(e){n.commonObjs.get(d,e)}:function(e){n.objs.get(d,e)}),this.current.dependencies.push(c)}return Promise.all(this.current.dependencies)},transform:function(e,t,i,a,r,o){var l=[e,t,i,a,r,o];this.transformMatrix=PDFJS.Util.transform(this.transformMatrix,l),this.tgrp=document.createElementNS(s,"svg:g"),this.tgrp.setAttributeNS(null,"transform",n(this.transformMatrix))},getSVG:function(t,i){return this.svg=e(i.width,i.height),this.viewport=i,this.loadDependencies(t).then(function(){this.transformMatrix=j,this.pgrp=document.createElementNS(s,"svg:g"),this.pgrp.setAttributeNS(null,"transform",n(i.transform)),this.tgrp=document.createElementNS(s,"svg:g"),this.tgrp.setAttributeNS(null,"transform",n(this.transformMatrix)),this.defs=document.createElementNS(s,"svg:defs"),this.pgrp.appendChild(this.defs),this.pgrp.appendChild(this.tgrp),this.svg.appendChild(this.pgrp);var e=this.convertOpList(t);return this.executeOpTree(e),this.svg}.bind(this))},convertOpList:function(e){var t=e.argsArray,a=e.fnArray,n=a.length,r=[],s=[];for(var o in E)r[E[o]]=o;for(var l=0;n>l;l++){var c=a[l];s.push({fnId:c,fn:r[c],args:t[l]})}return i(s)},executeOpTree:function(e){for(var i=e.length,a=0;i>a;a++){var n=e[a].fn,r=e[a].fnId,s=e[a].args;switch(0|r){case E.beginText:this.beginText();break;case E.setLeading:this.setLeading(s);break;case E.setLeadingMoveText:this.setLeadingMoveText(s[0],s[1]);break;case E.setFont:this.setFont(s);break;case E.showText:this.showText(s[0]);break;case E.showSpacedText:this.showText(s[0]);break;case E.endText:this.endText();break;case E.moveText:this.moveText(s[0],s[1]);break;case E.setCharSpacing:this.setCharSpacing(s[0]);break;case E.setWordSpacing:this.setWordSpacing(s[0]);break;case E.setHScale:this.setHScale(s[0]);break;case E.setTextMatrix:this.setTextMatrix(s[0],s[1],s[2],s[3],s[4],s[5]);break;case E.setLineWidth:this.setLineWidth(s[0]);break;case E.setLineJoin:this.setLineJoin(s[0]);break;case E.setLineCap:this.setLineCap(s[0]);break;case E.setMiterLimit:this.setMiterLimit(s[0]);break;case E.setFillRGBColor:this.setFillRGBColor(s[0],s[1],s[2]);break;case E.setStrokeRGBColor:this.setStrokeRGBColor(s[0],s[1],s[2]);break;case E.setDash:this.setDash(s[0],s[1]);break;case E.setGState:this.setGState(s[0]);break;case E.fill:this.fill();break;case E.eoFill:this.eoFill();break;case E.stroke:this.stroke();break;case E.fillStroke:this.fillStroke();break;case E.eoFillStroke:this.eoFillStroke();break;case E.clip:this.clip("nonzero");break;case E.eoClip:this.clip("evenodd");break;case E.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case E.paintJpegXObject:this.paintJpegXObject(s[0],s[1],s[2]);break;case E.paintImageXObject:this.paintImageXObject(s[0]);break;case E.paintInlineImageXObject:this.paintInlineImageXObject(s[0]);break;case E.paintImageMaskXObject:this.paintImageMaskXObject(s[0]);break;case E.paintFormXObjectBegin:this.paintFormXObjectBegin(s[0],s[1]);break;case E.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case E.closePath:this.closePath();break;case E.closeStroke:this.closeStroke();break;case E.closeFillStroke:this.closeFillStroke();break;case E.nextLine:this.nextLine();break;case E.transform:this.transform(s[0],s[1],s[2],s[3],s[4],s[5]);break;case E.constructPath:this.constructPath(s[0],s[1]);break;case E.endPath:this.endPath();break;case 92:this.group(e[a].items);break;default:t("Unimplemented method "+n)}}},setWordSpacing:function(e){this.current.wordSpacing=e},setCharSpacing:function(e){this.current.charSpacing=e},nextLine:function(){this.moveText(0,this.current.leading)},setTextMatrix:function(e,t,i,n,r,o){var l=this.current;this.current.textMatrix=this.current.lineMatrix=[e,t,i,n,r,o],this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,l.xcoords=[],l.tspan=document.createElementNS(s,"svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",a(l.fontSize)+"px"),l.tspan.setAttributeNS(null,"y",a(-l.y)),l.txtElement=document.createElementNS(s,"svg:text"),l.txtElement.appendChild(l.tspan)},beginText:function(){this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.current.textMatrix=j,this.current.lineMatrix=j,this.current.tspan=document.createElementNS(s,"svg:tspan"),this.current.txtElement=document.createElementNS(s,"svg:text"),this.current.txtgrp=document.createElementNS(s,"svg:g"),this.current.xcoords=[]},moveText:function(e,t){var i=this.current;this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t,i.xcoords=[],i.tspan=document.createElementNS(s,"svg:tspan"),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",a(i.fontSize)+"px"),i.tspan.setAttributeNS(null,"y",a(-i.y))},showText:function(e){var t=this.current,i=t.font,r=t.fontSize;if(0!==r){var s,l=t.charSpacing,c=t.wordSpacing,d=t.fontDirection,u=t.textHScale*d,h=e.length,p=i.vertical,m=r*t.fontMatrix[0],g=0;for(s=0;h>s;++s){var v=e[s];if(null!==v)if(f(v))g+=-v*r*.001;else{t.xcoords.push(t.x+g*u);var b=v.width,y=v.fontChar,k=b*m+l*d;g+=k,t.tspan.textContent+=y}else g+=d*c}p?t.y-=g*u:t.x+=g*u,t.tspan.setAttributeNS(null,"x",t.xcoords.map(a).join(" ")),t.tspan.setAttributeNS(null,"y",a(-t.y)),t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size",a(t.fontSize)+"px"),t.fontStyle!==pt.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==pt.fontWeight&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight),t.fillColor!==pt.fillColor&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.txtElement.setAttributeNS(null,"transform",n(t.textMatrix)+" scale(1, -1)"),t.txtElement.setAttributeNS(o,"xml:space","preserve"),t.txtElement.appendChild(t.tspan),t.txtgrp.appendChild(t.txtElement),this.tgrp.appendChild(t.txtElement)}},setLeadingMoveText:function(e,t){this.setLeading(-t),this.moveText(e,t)},addFontStyle:function(e){this.cssStyle||(this.cssStyle=document.createElementNS(s,"svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var t=PDFJS.createObjectURL(e.data,e.mimetype);this.cssStyle.textContent+='@font-face { font-family: "'+e.loadedName+'"; src: url('+t+"); }\n"},setFont:function(e){var t=this.current,i=this.commonObjs.get(e[0]),n=e[1];this.current.font=i,this.embedFonts&&i.data&&!this.embeddedFonts[i.loadedName]&&(this.addFontStyle(i),this.embeddedFonts[i.loadedName]=i),t.fontMatrix=i.fontMatrix?i.fontMatrix:C;var r=i.black?i.bold?"bolder":"bold":i.bold?"bold":"normal",o=i.italic?"italic":"normal";0>n?(n=-n,t.fontDirection=-1):t.fontDirection=1,t.fontSize=n,t.fontFamily=i.loadedName,t.fontWeight=r,t.fontStyle=o,t.tspan=document.createElementNS(s,"svg:tspan"),t.tspan.setAttributeNS(null,"y",a(-t.y)),t.xcoords=[]},endText:function(){this.current.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp),this.tgrp=document.createElementNS(s,"svg:g"),this.tgrp.setAttributeNS(null,"transform",n(this.transformMatrix))},setLineWidth:function(e){this.current.lineWidth=e},setLineCap:function(e){this.current.lineCap=c[e]},setLineJoin:function(e){this.current.lineJoin=d[e]},setMiterLimit:function(e){this.current.miterLimit=e},setStrokeRGBColor:function(e,t,i){var a=z.makeCssRgb(e,t,i);this.current.strokeColor=a},setFillRGBColor:function(e,t,i){var a=z.makeCssRgb(e,t,i);this.current.fillColor=a,this.current.tspan=document.createElementNS(s,"svg:tspan"),this.current.xcoords=[]},setDash:function(e,t){this.current.dashArray=e,this.current.dashPhase=t},constructPath:function(e,t){var i=this.current,n=i.x,r=i.y;i.path=document.createElementNS(s,"svg:path");for(var o=[],l=e.length,c=0,d=0;l>c;c++)switch(0|e[c]){case E.rectangle:n=t[d++],r=t[d++];var u=t[d++],h=t[d++],f=n+u,p=r+h;o.push("M",a(n),a(r),"L",a(f),a(r),"L",a(f),a(p),"L",a(n),a(p),"Z");break;case E.moveTo:n=t[d++],r=t[d++],o.push("M",a(n),a(r));break;case E.lineTo:n=t[d++],r=t[d++],o.push("L",a(n),a(r));break;case E.curveTo:n=t[d+4],r=t[d+5],o.push("C",a(t[d]),a(t[d+1]),a(t[d+2]),a(t[d+3]),a(n),a(r)),d+=6;break;case E.curveTo2:n=t[d+2],r=t[d+3],o.push("C",a(n),a(r),a(t[d]),a(t[d+1]),a(t[d+2]),a(t[d+3])),d+=4;break;case E.curveTo3:n=t[d+2],r=t[d+3],o.push("C",a(t[d]),a(t[d+1]),a(n),a(r),a(n),a(r)),d+=4;break;case E.closePath:o.push("Z")}i.path.setAttributeNS(null,"d",o.join(" ")),i.path.setAttributeNS(null,"stroke-miterlimit",a(i.miterLimit)),i.path.setAttributeNS(null,"stroke-linecap",i.lineCap),i.path.setAttributeNS(null,"stroke-linejoin",i.lineJoin),i.path.setAttributeNS(null,"stroke-width",a(i.lineWidth)+"px"),i.path.setAttributeNS(null,"stroke-dasharray",i.dashArray.map(a).join(" ")),i.path.setAttributeNS(null,"stroke-dashoffset",a(i.dashPhase)+"px"),i.path.setAttributeNS(null,"fill","none"),this.tgrp.appendChild(i.path),i.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp),i.element=i.path,i.setCurrentPoint(n,r)
},endPath:function(){var e=this.current;e.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp),this.tgrp=document.createElementNS(s,"svg:g"),this.tgrp.setAttributeNS(null,"transform",n(this.transformMatrix))},clip:function(e){var t=this.current;t.clipId="clippath"+u,u++,this.clippath=document.createElementNS(s,"svg:clipPath"),this.clippath.setAttributeNS(null,"id",t.clipId);var i=t.element.cloneNode();"evenodd"===e?i.setAttributeNS(null,"clip-rule","evenodd"):i.setAttributeNS(null,"clip-rule","nonzero"),this.clippath.setAttributeNS(null,"transform",n(this.transformMatrix)),this.clippath.appendChild(i),this.defs.appendChild(this.clippath),t.pendingClip=!0,this.cgrp=document.createElementNS(s,"svg:g"),this.cgrp.setAttributeNS(null,"clip-path","url(#"+t.clipId+")"),this.pgrp.appendChild(this.cgrp)},closePath:function(){var e=this.current,t=e.path.getAttributeNS(null,"d");t+="Z",e.path.setAttributeNS(null,"d",t)},setLeading:function(e){this.current.leading=-e},setTextRise:function(e){this.current.textRise=e},setHScale:function(e){this.current.textHScale=e/100},setGState:function(e){for(var t=0,i=e.length;i>t;t++){var a=e[t],n=a[0],r=a[1];switch(n){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":break;case"FL":break;case"Font":this.setFont(r);break;case"CA":break;case"ca":break;case"BM":break;case"SMask":}}},fill:function(){var e=this.current;e.element.setAttributeNS(null,"fill",e.fillColor)},stroke:function(){var e=this.current;e.element.setAttributeNS(null,"stroke",e.strokeColor),e.element.setAttributeNS(null,"fill","none")},eoFill:function(){var e=this.current;e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-rule","evenodd")},fillStroke:function(){this.stroke(),this.fill()},eoFillStroke:function(){this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()},closeStroke:function(){this.closePath(),this.stroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},paintSolidColorImageMask:function(){var e=this.current,t=document.createElementNS(s,"svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",e.fillColor),this.tgrp.appendChild(t)},paintJpegXObject:function(e,t,i){var n=this.current,r=this.objs.get(e),o=document.createElementNS(s,"svg:image");o.setAttributeNS(l,"xlink:href",r.src),o.setAttributeNS(null,"width",r.width+"px"),o.setAttributeNS(null,"height",r.height+"px"),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",a(-i)),o.setAttributeNS(null,"transform","scale("+a(1/t)+" "+a(-1/i)+")"),this.tgrp.appendChild(o),n.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp)},paintImageXObject:function(e){var i=this.objs.get(e);return i?void this.paintInlineImageXObject(i):void t("Dependent image isn't ready yet")},paintInlineImageXObject:function(e,t){var i=this.current,n=e.width,r=e.height,o=mt(e),c=document.createElementNS(s,"svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width",a(n)),c.setAttributeNS(null,"height",a(r)),i.element=c,this.clip("nonzero");var d=document.createElementNS(s,"svg:image");d.setAttributeNS(l,"xlink:href",o),d.setAttributeNS(null,"x","0"),d.setAttributeNS(null,"y",a(-r)),d.setAttributeNS(null,"width",a(n)+"px"),d.setAttributeNS(null,"height",a(r)+"px"),d.setAttributeNS(null,"transform","scale("+a(1/n)+" "+a(-1/r)+")"),t?t.appendChild(d):this.tgrp.appendChild(d),i.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp)},paintImageMaskXObject:function(e){var t=this.current,i=e.width,n=e.height,r=t.fillColor;t.maskId="mask"+h++;var o=document.createElementNS(s,"svg:mask");o.setAttributeNS(null,"id",t.maskId);var l=document.createElementNS(s,"svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",a(i)),l.setAttributeNS(null,"height",a(n)),l.setAttributeNS(null,"fill",r),l.setAttributeNS(null,"mask","url(#"+t.maskId+")"),this.defs.appendChild(o),this.tgrp.appendChild(l),this.paintInlineImageXObject(e,o)},paintFormXObjectBegin:function(e,t){if(this.save(),p(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),p(t)&&4===t.length){var i=t[2]-t[0],n=t[3]-t[1],r=document.createElementNS(s,"svg:rect");r.setAttributeNS(null,"x",t[0]),r.setAttributeNS(null,"y",t[1]),r.setAttributeNS(null,"width",a(i)),r.setAttributeNS(null,"height",a(n)),this.current.element=r,this.clip("nonzero"),this.endPath()}},paintFormXObjectEnd:function(){this.restore()}},r}();PDFJS.SVGGraphics=vt}.call("undefined"==typeof window?this:window),PDFJS.workerSrc||"undefined"==typeof document||(PDFJS.workerSrc=function(){"use strict";var e=document.body||document.getElementsByTagName("head")[0],t=e.lastChild.src;return t&&t.replace(/\.js$/i,".worker.js")}()),"undefined"==typeof PDFJS&&(("undefined"!=typeof window?window:this).PDFJS={}),function(){function e(e,t){return new i(this.slice(e,t))}function t(e,t){arguments.length<2&&(t=0);for(var i=0,a=e.length;a>i;++i,++t)this[t]=255&e[i]}function i(i){var a,n,r;if("number"==typeof i)for(a=[],n=0;i>n;++n)a[n]=0;else if("slice"in i)a=i.slice(0);else for(a=[],n=0,r=i.length;r>n;++n)a[n]=i[n];return a.subarray=e,a.buffer=a,a.byteLength=a.length,a.set=t,"object"==typeof i&&i.buffer&&(a.buffer=i.buffer),a}return"undefined"!=typeof Uint8Array?("undefined"==typeof Uint8Array.prototype.subarray&&(Uint8Array.prototype.subarray=function(e,t){return new Uint8Array(this.slice(e,t))},Float32Array.prototype.subarray=function(e,t){return new Float32Array(this.slice(e,t))}),void("undefined"==typeof Float64Array&&(window.Float64Array=Float32Array))):(window.Uint8Array=i,window.Int8Array=i,window.Uint32Array=i,window.Int32Array=i,window.Uint16Array=i,window.Float32Array=i,void(window.Float64Array=i))}(),function(){window.URL||(window.URL=window.webkitURL)}(),function(){if("undefined"!=typeof Object.defineProperty){var e=!0;try{Object.defineProperty(new Image,"id",{value:"test"});var t=function(){};t.prototype={get id(){}},Object.defineProperty(new t,"id",{value:"",configurable:!0,enumerable:!0,writable:!1})}catch(i){e=!1}if(e)return}Object.defineProperty=function(e,t,i){delete e[t],"get"in i&&e.__defineGetter__(t,i.get),"set"in i&&e.__defineSetter__(t,i.set),"value"in i&&(e.__defineSetter__(t,function(e){return this.__defineGetter__(t,function(){return e}),e}),e[t]=i.value)}}(),function(){var e=XMLHttpRequest.prototype,t=new XMLHttpRequest;return"overrideMimeType"in t||Object.defineProperty(e,"overrideMimeType",{value:function(){}}),"responseType"in t?void 0:(PDFJS.disableWorker=!0,Object.defineProperty(e,"responseType",{get:function(){return this._responseType||"text"},set:function(e){("text"===e||"arraybuffer"===e)&&(this._responseType=e,"arraybuffer"===e&&"function"==typeof this.overrideMimeType&&this.overrideMimeType("text/plain; charset=x-user-defined"))}}),"undefined"!=typeof VBArray?void Object.defineProperty(e,"response",{get:function(){return"arraybuffer"===this.responseType?new Uint8Array(new VBArray(this.responseBody).toArray()):this.responseText}}):void Object.defineProperty(e,"response",{get:function(){if("arraybuffer"!==this.responseType)return this.responseText;var e,t=this.responseText,i=t.length,a=new Uint8Array(i);for(e=0;i>e;++e)a[e]=255&t.charCodeAt(e);return a.buffer}}))}(),function(){if(!("btoa"in window)){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";window.btoa=function(t){var i,a,n="";for(i=0,a=t.length;a>i;i+=3){var r=255&t.charCodeAt(i),s=255&t.charCodeAt(i+1),o=255&t.charCodeAt(i+2),l=r>>2,c=(3&r)<<4|s>>4,d=a>i+1?(15&s)<<2|o>>6:64,u=a>i+2?63&o:64;n+=e.charAt(l)+e.charAt(c)+e.charAt(d)+e.charAt(u)}return n}}}(),function(){if(!("atob"in window)){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";window.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4===1)throw new Error("bad atob input");for(var i,a,n=0,r=0,s="";a=t.charAt(r++);~a&&(i=n%4?64*i+a:a,n++%4)?s+=String.fromCharCode(255&i>>(-2*n&6)):0)a=e.indexOf(a);return s}}}(),function(){"undefined"==typeof Function.prototype.bind&&(Function.prototype.bind=function(e){var t=this,i=Array.prototype.slice.call(arguments,1),a=function(){var a=i.concat(Array.prototype.slice.call(arguments));return t.apply(e,a)};return a})}(),function(){var e=document.createElement("div");"dataset"in e||Object.defineProperty(HTMLElement.prototype,"dataset",{get:function(){if(this._dataset)return this._dataset;for(var e={},t=0,i=this.attributes.length;i>t;t++){var a=this.attributes[t];if("data-"===a.name.substring(0,5)){var n=a.name.substring(5).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()});e[n]=a.value}}return Object.defineProperty(this,"_dataset",{value:e,writable:!1,enumerable:!1}),e},enumerable:!0})}(),function(){function e(e,t,i,a){var n=e.className||"",r=n.split(/\s+/g);""===r[0]&&r.shift();var s=r.indexOf(t);return 0>s&&i&&r.push(t),s>=0&&a&&r.splice(s,1),e.className=r.join(" "),s>=0}var t=document.createElement("div");if(!("classList"in t)){var i={add:function(t){e(this.element,t,!0,!1)},contains:function(t){return e(this.element,t,!1,!1)},remove:function(t){e(this.element,t,!1,!0)},toggle:function(t){e(this.element,t,!0,!0)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){if(this._classList)return this._classList;var e=Object.create(i,{element:{value:this,writable:!1,enumerable:!0}});return Object.defineProperty(this,"_classList",{value:e,writable:!1,enumerable:!1}),e},enumerable:!0})}}(),function(){"console"in window?"bind"in console.log||(console.log=function(e){return function(t){return e(t)}}(console.log),console.error=function(e){return function(t){return e(t)}}(console.error),console.warn=function(e){return function(t){return e(t)}}(console.warn)):window.console={log:function(){},error:function(){},warn:function(){}}}(),function(){function e(e){t(e.target)&&e.stopPropagation()}function t(e){return e.disabled||e.parentNode&&t(e.parentNode)}-1!==navigator.userAgent.indexOf("Opera")&&document.addEventListener("click",e,!0)}(),function(){navigator.userAgent.indexOf("Trident")>=0&&(PDFJS.disableCreateObjectURL=!0)}(),function(){"language"in navigator||(PDFJS.locale=navigator.userLanguage||"en-US")}(),function(){var e=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,t=/Android\s[0-2][^\d]/,i=t.test(navigator.userAgent),a=/Chrome\/(39|40)\./.test(navigator.userAgent);(e||i||a)&&(PDFJS.disableRange=!0,PDFJS.disableStream=!0)}(),function(){(!history.pushState||navigator.userAgent.indexOf("Android 2.")>=0)&&(PDFJS.disableHistory=!0)}(),function(){if(window.CanvasPixelArray)"function"!=typeof window.CanvasPixelArray.prototype.set&&(window.CanvasPixelArray.prototype.set=function(e){for(var t=0,i=this.length;i>t;t++)this[t]=e[t]});else{var e,t=!1;if(navigator.userAgent.indexOf("Chrom")>=0?(e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),t=e&&parseInt(e[2])<21):navigator.userAgent.indexOf("Android")>=0?t=/Android\s[0-4][^\d]/g.test(navigator.userAgent):navigator.userAgent.indexOf("Safari")>=0&&(e=navigator.userAgent.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//),t=e&&parseInt(e[1])<6),t){var i=window.CanvasRenderingContext2D.prototype;i._createImageData=i.createImageData,i.createImageData=function(e,t){var i=this._createImageData(e,t);return i.data.set=function(e){for(var t=0,i=this.length;i>t;t++)this[t]=e[t]},i}}}}(),function(){function e(e){window.setTimeout(e,20)}var t=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);return t?void(window.requestAnimationFrame=e):void("requestAnimationFrame"in window||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e))}(),function(){var e=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),t=/Android/g.test(navigator.userAgent);(e||t)&&(PDFJS.maxCanvasPixels=5242880)}(),function(){var e=navigator.userAgent.indexOf("Trident")>=0&&window.parent!==window;e&&(PDFJS.disableFullscreen=!0)}(),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e.cto,n=e.Disney.Style.breakpoints,r=e.Math,s=e.PDFJS,o=e.Backbone,l=e._,c=e.$,d=e.Promise,u=[.5,.75,1,1.25,1.5,1.75],h=o.View.extend({template:i.modules.print_embedded.toolbar,render:function(){this.$el.html(this.template.render(this.model))},initialize:function(){this.model=new f,this.listenTo(this.model,"change",this.render)},events:{"click .zoomIn:not(.disabled)":"zoomIn","click .zoomOut:not(.disabled)":"zoomOut","click .pageUp:not(.disabled)":"pageUp","click .pageDown:not(.disabled)":"pageDown","click .toolbarControl:not(.disabled)":"trackClick","click .print":"print"},trackClick:function(e){this.trigger("toolbarClick",c(e.currentTarget).data("action"))},zoomIn:function(){var e=this.model.get("scale"),t=l.indexOf(u,e),i=l.min([t+1,u.length-1]),a=u[i];this.model.set("scale",a),this.trigger("zoom",a)},zoomOut:function(){var e=this.model.get("scale"),t=l.indexOf(u,e),i=l.max([t-1,0]),a=u[i];this.model.set("scale",a),this.trigger("zoom",a)},pageUp:function(){var e=this.model.get("currentPage")-1,t=this.model.get("scale");this.trigger("goToPage",e,t),this.model.set("currentPage",e)},pageDown:function(){var e=this.model.get("currentPage")+1,t=this.model.get("scale");this.trigger("goToPage",e,t),this.model.set("currentPage",e)},print:function(){e.print()}}),f=o.Model.extend({defaults:{loaded:!1,currentPage:1,totalPages:1,scale:1},loadDocument:function(e){this.set("totalPages",e.numPages),this.set("loaded",!0)},isFirstPage:function(){return 1===this.get("currentPage")},isLastPage:function(){return this.get("currentPage")===this.get("totalPages")},zoomLevel:function(){return r.floor(100*this.get("scale")).toString()+"%"},atMinZoom:function(){return this.get("scale")===l.first(u)},atMaxZoom:function(){return this.get("scale")===l.last(u)}});t.ModuleView.register("print_embedded",{template:i.modules.print_embedded,partials:{sliderStyle:i.modules.print_embedded.slider_styles},style_classes:["skip-top-border"],initialize:function(){s.workerSrc="//a.dilcdn.com/a/pdf.worker-5f84cc5b5ab5.js";var t=this,i=t.model.get("data")||[],a=i[0],n=a.href.replace(/^http:\/\//,"/_pdf/");t.printable=a,t.pdfUrl="http://"+e.location.host+n},render:function(){var e=l.extend({showAllPages:this.showAllPages()},this.model);this.$el.html(this.template.render(e))},ready:function(){var t=this;s.getDocument(t.pdfUrl).then(function(e){t.createToolbar(e),t.createViewer(e),t.mozPrintCallbackPolyfill(),t.showAllPages()&&t.dockToolbarAndSlider()},function(t){e.console.log(t)})},createToolbar:function(e){var t=this;t.toolbarView=new h({el:t.el.querySelector(".toolbar-container")}),t.toolbarView.model.loadDocument(e),t.toolbarView.model.set("translations",t.model.get("translations")),t.listenTo(t.toolbarView,"zoom",t.zoom),t.listenTo(t.toolbarView,"goToPage",t.goToPage),t.listenTo(t.toolbarView,"toolbarClick",t.trackToolbarClick),t.toolbarView.render()},createViewer:function(e){for(var t=[],i=new o.Collection,a=this,n=1;n<=e.numPages;n++)t.push(e.getPage(n));d.all(t).then(function(e){l.each(e,function(e,t){var a=new m({_page:e,pageNumber:t+1});i.add(a)}),a.viewer=new p({el:a.el.querySelector(".viewer"),collection:i}),a.viewer.render(),a.trigger("viewer_ready")})},zoom:function(e){this.viewer.zoom(e,this.showAllPages())},goToPage:function(e){this.viewer.displayPage(e)},trackToolbarClick:function(e){a.trackEvent({engagementType:"print_embedded_"+this.printable.id+"_"+e})},destroy:function(){this.undelegateEvents(),this.toolbarView.remove(),this.viewer.remove(),l.each(this.eventHandlerCleanup,function(e){e()})},showAllPages:function(){return"show_all_pages"===(this.model.get("style_options")||{}).page_style},dockToolbarAndSlider:function(){var t,i,a=this,r=a.el,s=a.toolbarView.$el,o=s.find(".toolbar").get(0).getBoundingClientRect().height,d=a.$el.next(".module.slider");d.length>0&&(t=d.get(0).getBoundingClientRect(),i=t.height/2+48,a.$el.append(c(a.partials.sliderStyle.render({sliderBottom:i-t.height}))));var u=l.debounce(function(){var t=e.pageYOffset,i=e.document.documentElement.getBoundingClientRect(),a=e.innerHeight,l=r.getBoundingClientRect(),c=t+l.top;if(i.width<n.midHigh)return d.removeClass("dock-top-state").removeClass("dock-bottom-state").removeClass("dock-off-state"),void s.removeClass("docked");if(s.toggleClass("docked",t>c),s.toggleClass("toolbar-off",l.bottom<o),d.length){var u;u=l.top+400>a?"top":l.bottom<a?"off":"bottom",d.removeClass("dock-top-state").removeClass("dock-bottom-state").removeClass("dock-off-state"),d.addClass("dock-"+u+"-state")}},15);u(),a.listenToOnce(a,"viewer_ready",function(){a.listenTo(a.viewer,"pageRendered",u)}),c(e).on("resize orientationchange",u);var h=e.pageYOffset,f=function(){var t=e.pageYOffset;h===t&&u()},p=function(){var t=e.pageYOffset,i=t-h,a=r.getBoundingClientRect(),n=t+a.top;-20>i&&h>n&&s.addClass("toolbar-off"),h=t,e.setTimeout(f,100)};c(e).on("scroll",p),this.eventHandlerCleanup.push(function(){c(e).off("scroll",p)})},mozPrintCallbackPolyfill:function(){function t(e){var t=d.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,"custom"),u.dispatchEvent(t)}function i(e){if(e!==!0&&(e=!1),m)if(e||n(),++g<m.length){var t=m[g];"function"==typeof t.mozPrintCallback?t.mozPrintCallback({context:t.getContext("2d"),abort:a,done:function(){i(e)}}):i(e)}else e||(n(),v.call(u)),f(a,20)}function a(){m&&(m=null,n(),t("afterprint"))}function n(){var e=l.el.querySelector(".mozPrintCallback-shim"),t=c(e);if(m){var i=m.length||1,n=g>=0?g:0,s=r.round(100*n/i),o=e.querySelector("progress"),d=e.querySelector(".relative-progress");o.value=s,d.textContent=s+"%",t.removeClass("hidden"),e.onclick=a}else t.addClass("hidden")}function s(e){if(80===e.keyCode&&(e.ctrlKey||e.metaKey)&&!e.altKey&&(!e.shiftKey||u.chrome||u.opera)){if(u.print(),b)return;return e.preventDefault(),void(e.stopImmediatePropagation?e.stopImmediatePropagation():e.stopPropagation())}27===e.keyCode&&m&&a()}function o(e){return e=e||u.event,80===e.keyCode&&e.ctrlKey?(e.keyCode=0,!1):void 0}var l=this,d=e.document,u=e,h=e.console,f=e.setTimeout,p=e.HTMLCanvasElement;if(l.eventHandlerCleanup=[],!("mozPrintCallback"in d.createElement("canvas"))){l.eventHandlerCleanup.push(function(){delete p.prototype.mozPrintCallback}),p.prototype.mozPrintCallback=void 0;var m,g,v=u.print;u.print=function(){if(m)return void h.warn("Ignored window.print() because of a pending print job.");try{t("beforeprint")}finally{m=l.el.querySelectorAll(".print-container canvas"),g=-1,i()}},u.renderForPreview=function(){if(m)return void h.warn("Ignored window.renderForPreview() because of a pending print job.");try{t("beforeprint")}finally{m=l.el.querySelectorAll(".print-container canvas"),g=-1,i(!0)}},l.eventHandlerCleanup.push(function(){u.print=v});var b=!!d.attachEvent;if(u.addEventListener("keydown",s,!0),l.eventHandlerCleanup.push(function(){u.removeEventListener("keydown",s,!0)}),b&&(d.attachEvent("onkeydown",o),l.eventHandlerCleanup.push(function(){d.detachEvent("onkeydown",o)})),"onbeforeprint"in u){var y=function(e){"custom"!==e.detail&&e.stopImmediatePropagation&&e.stopImmediatePropagation()};u.addEventListener("beforeprint",y,!1),u.addEventListener("afterprint",y,!1),l.eventHandlerCleanup.push(function(){u.removeEventListener("beforeprint",y,!1),u.removeEventListener("afterprint",y,!1)})}}}});var p=o.View.extend({template:i.modules.print_embedded.viewer,initialize:function(){this.scale=1,this.currentPage=1,this.renderQueue=[],this.listenTo(this,"pageQueued pageRendered",function(){this.renderNextQueuedPage()})},render:function(){var t=this;t.$el.html(t.template.render({pageCollection:t.collection})),t.displayPage(1);for(var i=2;i<=t.totalPages();i++)t.queuePageForRender(i,t.scale);c(function(){e.addEventListener("beforeprint",function(){t.beforePrint()}),e.renderForPreview()})},totalPages:function(){return this.collection.length},renderPage:function(e,t){var i=e-1,a=this.collection.at(i),n=this.el.querySelector("canvas.page-"+e);return a.get("rendered")&&a.get("scale")===t?d.resolve(!0):a.render(n,t)},queuePageForRender:function(e,t){this.renderQueue.push({page:e,scale:t}),this.trigger("pageQueued")},renderNextQueuedPage:function(){var e=this;if(!e.rendering&&e.renderQueue.length>0){var t=e.renderQueue.shift();e.rendering=!0,e.renderPage(t.page,t.scale).then(function(){e.rendering=!1,e.trigger("pageRendered")})}},displayPage:function(e){this.queuePageForRender(e,this.scale),this.$el.find("canvas").removeClass("current-page"),this.$el.find("canvas.page-"+e).addClass("current-page"),this.currentPage=e},zoom:function(e,t){if(this.scale=e,t===!0)for(var i=1;i<=this.collection.length;i++)this.queuePageForRender(i,e);else this.displayPage(this.currentPage)},beforePrint:function(){c("body").addClass("print_embedded_printing"),this.emptyPrintContainer();var e=this.el.querySelector(".print-container");this.collection.each(function(t){t.beforePrint(e)})},emptyPrintContainer:function(){for(var e=this.el.querySelector(".print-container");e.hasChildNodes();)e.removeChild(e.lastChild)}}),m=o.Model.extend({defaults:{scale:1},beforePrint:function(t){var i=this.get("_page"),a=i.getViewport(1),n=e.document.createElement("canvas"),r=e.document.createElement("div");n.width=a.width,n.height=a.height,r.appendChild(n),t.appendChild(r),n.mozPrintCallback=function(e){var t=e.context;t.save(),t.fillStyle="rgb(255, 255, 255)",t.fillRect(0,0,n.width,n.height),t.restore();var r={canvasContext:t,viewport:a,intent:"print"};i.render(r).promise.then(function(){e.done()},function(){"abort"in e?e.abort():e.done()})}},render:function(e,t){var i=this,a=i.get("_page"),n=a.getViewport(t),r=e.getContext("2d");return e.height=n.height,e.width=n.width,a.render({canvasContext:r,viewport:n}).promise.then(function(){i.set("scale",t),i.set("rendered",!0)})}})}(this),Whiskers("modules.product",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("layout",e,t,0))),a.b('"> '),a.s(a.f("header_data",e,t,1),e,t,0,47,65,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="product_list"> '),a.b(a.rp("<products1",e,t,"")),a.b(" "),a.s(a.f("data",e,t,1),e,t,0,132,144,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("<modal2",e,t,"")),i.b(" ")}),e.pop()),a.b(" </div> "),a.s(a.f("hasMore",e,t,1),e,t,0,173,373,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="show_more_container"> <div class="show_more blue button large" role="button" onclick=""> <span class="label">'),i.b(i.v(i.d("translations.show_more",e,t,0))),i.b('</span> <span class="spinner"></span> </div> </div> ')}),e.pop()),a.b(" </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<products1":{name:"products",partials:{},subs:{}},"<modal2":{name:"modal",partials:{},subs:{}}},subs:{}}),Whiskers("modules.sidekick_product",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.b(" "),a.b(a.v(a.f("layout",e,t,0))),a.b('"> '),a.s(a.f("header_data",e,t,1),e,t,0,72,90,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="module_body"> <div class="product_list one ad"> '),a.s(a.f("data",e,t,1),e,t,0,176,992,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="product"> <div class="product-thumb"> <div class="boundingBox"> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="logo no-src" data-src="'),i.b(i.v(i.f("thumb",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,339,394,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img class="logo" src="'),i.b(i.v(i.f("thumb",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(' </div> <div class="product-button"></div> </div> <div class="details"> <h2 class="title">'),i.b(i.v(i.f("title",e,t,0))),i.b('</h2> <div class="product-button"></div> <ul class="desc"> '),i.s(i.f("product_lines",e,t,1),e,t,0,583,597,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("<li>"),i.b(i.v(i.d(".",e,t,0))),i.b("</li>")}),e.pop()),i.b(" </ul> "),i.s(i.f("more_lines",e,t,1),e,t,0,637,708,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a class="modal_info button transparent">'),i.b(i.v(i.d("translations.more_info",e,t,0))),i.b("</a>")}),e.pop()),i.b(' </div> <ul class="desc_mobile '),i.s(i.f("more_lines",e,t,1),e,t,0,769,777,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("hasModal")}),e.pop()),i.b('"> '),i.s(i.f("product_lines",e,t,1),e,t,0,813,827,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("<li>"),i.b(i.v(i.d(".",e,t,0))),i.b("</li>")}),e.pop()),i.b(" "),i.s(i.f("specs",e,t,1),e,t,0,856,957,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.s(i.f("specifications",e,t,1),e,t,0,875,938,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li><span class="tech_title">'),i.b(i.v(i.f("title",e,t,0))),i.b(":</span> "),i.b(i.v(i.f("value",e,t,0))),i.b("</li> ")}),e.pop())}),e.pop()),i.b(" </ul> </div> "),i.b(i.rp("<modal1",e,t,"")),i.b(" ")}),e.pop()),a.b(' </div> <div class="ad-container"> '),a.b(a.t(a.f("rectangleAd",e,t,0))),a.b(" "),a.b(a.t(a.f("mobileAd",e,t,0))),a.b(" </div> </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<modal1":{name:"modal",partials:{},subs:{}}},subs:{}}),Whiskers("entities.products",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("product_data",e,t,1),e,t,0,17,876,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="product"> <div class="product-thumb"> <div class="boundingBox"> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="logo no-src" data-src="'),i.b(i.v(i.f("thumb",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,180,235,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img class="logo" src="'),i.b(i.v(i.f("thumb",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(' </div> <div class="product-button '),i.s(i.f("more_lines",e,t,1),e,t,0,298,306,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("hasModal")}),e.pop()),i.b('"></div> </div> <div class="details"> <h2 class="title">'),i.b(i.v(i.f("title",e,t,0))),i.b('</h2> <div class="product-button"></div> <ul class="desc"> '),i.s(i.f("product_lines",e,t,1),e,t,0,463,479,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <li>"),i.b(i.v(i.d(".",e,t,0))),i.b("</li> ")}),e.pop()),i.b(' </ul> <a class="modal_info button transparent'),i.s(i.f("more_lines",e,t,1),e,t,1,0,0,"")||i.b(" no_modal"),i.b('">'),i.b(i.v(i.d("translations.show_more",e,t,0))),i.b('</a> </div> <ul class="desc_mobile '),i.s(i.f("more_lines",e,t,1),e,t,0,660,668,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("hasModal")}),e.pop()),i.b('"> '),i.s(i.f("product_lines",e,t,1),e,t,0,704,720,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <li>"),i.b(i.v(i.d(".",e,t,0))),i.b("</li> ")}),e.pop()),i.b(" "),i.s(i.f("specs",e,t,1),e,t,0,749,852,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("specifications",e,t,1),e,t,0,769,832,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li><span class="tech_title">'),i.b(i.v(i.f("title",e,t,0))),i.b(":</span> "),i.b(i.v(i.f("value",e,t,0))),i.b("</li> ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" </ul> </div> ")}),e.pop()),a.fl()},partials:{},subs:{}}),Whiskers("entities.product_modal",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="product-tech"> <div class="close_modal"></div> <div class="product-modal"> <p class="title tablet">'),a.b(a.v(a.f("title",e,t,0))),a.b('</p> <div class="product-thumb"> <div class="boundingBox"> '),a.s(a.f("noscript",e,t,1),e,t,1,0,0,"")||(a.b('<img class="logo no-src" data-src="'),a.b(a.v(a.f("thumb",e,t,0))),a.b('">')),a.b(" "),a.s(a.f("noscript",e,t,1),e,t,0,265,320,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<noscript><img class="logo" src="'),i.b(i.v(i.f("thumb",e,t,0))),i.b('"></noscript>')}),e.pop()),a.b(' </div> <div class="product-button"></div> </div> <div class="details"> <h2 class="title desktop">'),a.b(a.v(a.f("title",e,t,0))),a.b('</h2> <div class="desc_modal"> <h3 class="special">Special Features</h3> <ul class="desc"> '),a.s(a.f("tech_lines",e,t,1),e,t,0,546,562,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" <li>"),i.b(i.v(i.d(".",e,t,0))),i.b("</li> ")}),e.pop()),a.b(" </ul> "),a.s(a.f("spec_truth",e,t,1),e,t,0,599,641,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<h3 class="tech_spec">Technical Specs</h3>')}),e.pop()),a.b(" "),a.s(a.f("specs",e,t,1),e,t,0,667,866,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="spec_col"> <h2 class="spec_type">'),i.b(i.v(i.f("title",e,t,0))),i.b("</h2> "),i.s(i.f("specifications",e,t,1),e,t,0,747,839,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <ul class="tech_list"> <li><span class="tech_title">'),i.b(i.v(i.f("title",e,t,0))),i.b(":</span> "),i.b(i.v(i.f("value",e,t,0))),i.b("</li> </ul> ")}),e.pop()),i.b(" </div> ")}),e.pop()),a.b(" </div> </div> </div> </div>"),a.fl()},partials:{},subs:{}}),function(e,t){"use strict";var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(a){function n(){var t=e(h),i=e(f);l&&(f.length?l.reject(d,t,i):l.resolve(d)),e.isFunction(a)&&a.call(o,d,t,i)}function r(e){s(e.target,"error"===e.type)}function s(t,a){t.src!==i&&-1===e.inArray(t,u)&&(u.push(t),a?f.push(t):h.push(t),e.data(t,"imagesLoaded",{isBroken:a,src:t.src}),c&&l.notifyWith(e(t),[a,d,e(h),e(f)]),d.length===u.length&&(setTimeout(n),d.unbind(".imagesLoaded",r)))}var o=this,l=e.isFunction(e.Deferred)?e.Deferred():0,c=e.isFunction(l.notify),d=o.find("img").add(o.filter("img")),u=[],h=[],f=[];return e.isPlainObject(a)&&e.each(a,function(e,t){"callback"===e?a=t:l&&l[e](t)}),d.length?d.bind("load.imagesLoaded error.imagesLoaded",r).each(function(a,n){var r=n.src,o=e.data(n,"imagesLoaded");return o&&o.src===r?void s(n,o.isBroken):n.complete&&n.naturalWidth!==t?void s(n,0===n.naturalWidth||0===n.naturalHeight):void((n.readyState||n.complete)&&(n.src=i,n.src=r))}):n(),l?l.promise(o):o}}(jQuery),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e.Backbone,o=e.jQuery,l=e._,c=t.ModuleView.extend({breakpoints:n,required_template_sets:["module_header"],template:r.modules.product,included_components:{products:r.entities.products,modal:r.entities.product_modal},initialize:function(){this.itemCount=0,this.two_button_margin=10,this.translations=this.model.get("translations")},render:function(){l.extend(this,{itemCount:this.model.get("data").length,allProducts:this.model.get("data")}),this.allProducts.length>4?(this.productData=this.allProducts.slice(0,4),this.stashedData=this.allProducts.slice(4)):this.productData=this.allProducts,this.defaultLayout=2===this.itemCount||this.itemCount>3||this.sidekick?"left":"right",i.rtl&&(this.defaultLayout="left"===this.defaultLayout?"right":"left"),this.layout=this.model.get("style_options").layout?this.model.get("style_options").layout:this.defaultLayout;var e=l.extend({hasMore:this.itemCount>4,title:this.model.get("title"),desc:this.model.get("desc"),layout:this.layout,product_data:this.productData},this.options.ads.helpers(),this.model);this.$el.html(this.template.render(e,this.ctx_additions())),this.updateButton(this.itemCount>4)},resize:function(){var e=s.Resize.width()>=a.midHigh;this.options.ads.restore(),e?this.$(".desc_mobile, .modal_info").removeClass("fade"):this.$(".product-tech, .product").removeClass("fade")},ready:function(){this.buttonViews=[];var e=this,t=this.$(".product_list .product"),a=this.$(".product_list"),n=this.$(".product-tech").length;switch(t.length){case 1:a.addClass("one");break;case 3:a.addClass("three");break;default:a.addClass("two")}this.$(".product_list .product").each(function(t,a){e.$(a).find(".product-button").each(function(a,n){var r=new i.ProductButtonView({el:n,model:e.model.get("data")[t],translations:e.model.get("translations"),age_gate:e.model.get("age_gate")});r.on("change",e.buttonChanged,e),e.buttonViews.push(r)})}),this.$(".product-tech").each(function(t,a){e.$(a).find(".product-button").each(function(a,n){var r=new i.ProductButtonView({el:n,model:e.model.get("data")[t],age_gate:e.model.get("age_gate")});r.on("change",e.buttonChanged,e),e.buttonViews.push(r)})});for(var r=0;n>r;r++)this.$(".modal_info").eq(r).addClass(""+r)},updateButton:function(e){var t=this.$el;t.toggleClass("has-more",e)},modalDisplay:function(e){var t=s.Resize.width()>=a.midHigh,i=this.$(".product-tech").length,n=null;if(t)for(this.$(".product_list .product").addClass("fade"),n=0;i>n;n++)o(e.currentTarget).hasClass(n)&&this.$(".product-tech").eq(n).addClass("fade");
else for(n=0;i>n;n++)o(e.currentTarget).hasClass(n)&&this.$(".desc_mobile").eq(n).addClass("fade")},modalRemove:function(){this.$(".product-tech, .product, .desc_mobile").removeClass("fade"),this.$(".buy").removeClass("active")},events:{"click .modal_info":"modalDisplay","click .close_modal":"modalRemove","click .product.fade":"modalRemove","click .show_more_container":function(e){e.preventDefault(),this.buttonViews=[];var t=this,a=this.productData,n=this.stashedData,s=this.$(".product_list");n.length>4?(a=n.slice(0,4),n=n.slice(4)):(a=n,n=[]);var c=l.extend({hasMore:n.length>0,product_data:a}),d=r.entities.products.render(c);o(d).insertAfter(s.find(".product").last()),this.$(".product_list .product").slice(1).each(function(e,a){t.$(a).find(".product-button").slice(0).each(function(a,n){var r=new i.ProductButtonView({el:n,model:t.model.get("data")[e],age_gate:t.model.get("age_gate")});r.on("change",t.buttonChanged,t),t.buttonViews.push(r)})});for(var u=4;u<a.length+4;u++)this.$(".modal_info").eq(u).addClass(""+u);this.$el.loadLazyImages(),this.updateButton(!1)}}});c.register("product",{}),c.register("sidekick_product",{sidekick:!0,style_classes:["sidekick"],template:r.modules.sidekick_product})}(this),Whiskers("modules.property_hero",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,723,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="branding"> <div class="scaler"></div> '),i.s(i.f("wide",e,t,1),e,t,0,69,286,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("overlayLeft",e,t,1),e,t,0,86,159,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="left-overlay overlay"> <img src="'),i.b(i.v(i.f("overlayLeft",e,t,0))),i.b('"> </span> ')}),e.pop()),i.b(" "),i.s(i.f("overlayRight",e,t,1),e,t,0,193,268,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="right-overlay overlay"> <img src="'),i.b(i.v(i.f("overlayRight",e,t,0))),i.b('"> </span> ')}),e.pop()),i.b(" ")}),e.pop()),i.b(' <span class="background"> <img src="'),i.b(i.v(i.f("propertyHeader",e,t,0))),i.b('"> </span> </div> '),i.s(i.f("wide",e,t,1),e,t,0,377,713,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="content '),i.b(i.v(i.f("contentPosition",e,t,0))),i.b('"> '),i.s(i.f("video",e,t,1),e,t,0,430,695,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("id",e,t,1),e,t,0,438,687,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="video-container"> <div class="scaler"></div> '),i.s(i.f("expired",e,t,1),e,t,1,0,0,"")||(i.b(' <div id="player_property_hero" class="player video trailer-box"> <noscript> <div class="player_error">'),i.b(i.v(i.d("translations.no_javascript",e,t,0))),i.b("</div> </noscript> </div> ")),i.b(" </div> ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" </div> ")}),e.pop()),i.b(" ")}),e.pop()),a.fl()},partials:{},subs:{}}),Whiskers("modules.property_nav",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<style type="text/css"> '),a.s(a.f("data",e,t,1),e,t,0,33,1763,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("pn_style",e,t,1),e,t,0,46,1750,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .property_nav_wrap{ background-color: "),i.b(i.v(i.f("background_color",e,t,0))),i.b("; background-image: -webkit-gradient(linear, left top, left bottom, from("),i.b(i.v(i.f("gradient_color",e,t,0))),i.b("), to("),i.b(i.v(i.f("background_color",e,t,0))),i.b(")); background-image: -webkit-linear-gradient(top, "),i.b(i.v(i.f("gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("background_color",e,t,0))),i.b("); background-image: -moz-linear-gradient(top, "),i.b(i.v(i.f("gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("background_color",e,t,0))),i.b("); background-image: -o-linear-gradient(top, "),i.b(i.v(i.f("gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("background_color",e,t,0))),i.b("); background-image: linear-gradient(to bottom, "),i.b(i.v(i.f("gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("background_color",e,t,0))),i.b("); } .property_nav_wrap ul li:hover{ background-color: "),i.b(i.v(i.f("hover_color",e,t,0))),i.b("; background-image: -webkit-gradient(linear, left top, left bottom, from("),i.b(i.v(i.f("hover_gradient_color",e,t,0))),i.b("), to("),i.b(i.v(i.f("hover_color",e,t,0))),i.b(")); background-image: -webkit-linear-gradient(top, "),i.b(i.v(i.f("hover_gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("hover_color",e,t,0))),i.b("); background-image: -moz-linear-gradient(top, "),i.b(i.v(i.f("hover_gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("hover_color",e,t,0))),i.b("); background-image: -o-linear-gradient(top, "),i.b(i.v(i.f("hover_gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("hover_color",e,t,0))),i.b("); background-image: linear-gradient(to bottom, "),i.b(i.v(i.f("hover_gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("hover_color",e,t,0))),i.b("); } .property_nav_wrap ul li.active{ background-color: "),i.b(i.v(i.f("active_color",e,t,0))),i.b("; background-image: -webkit-gradient(linear, left top, left bottom, from("),i.b(i.v(i.f("active_gradient_color",e,t,0))),i.b("), to("),i.b(i.v(i.f("active_color",e,t,0))),i.b(")); background-image: -webkit-linear-gradient(top, "),i.b(i.v(i.f("active_gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("active_color",e,t,0))),i.b("); background-image: -moz-linear-gradient(top, "),i.b(i.v(i.f("active_gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("active_color",e,t,0))),i.b("); background-image: -o-linear-gradient(top, "),i.b(i.v(i.f("active_gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("active_color",e,t,0))),i.b("); background-image: linear-gradient(to bottom, "),i.b(i.v(i.f("active_gradient_color",e,t,0))),i.b(", "),i.b(i.v(i.f("active_color",e,t,0))),i.b("); } .module.property_nav .property_nav_wrap ul li a{ color: "),i.b(i.v(i.f("font_color",e,t,0))),i.b("; } ")}),e.pop())}),e.pop()),a.b(" </style> "),a.s(a.f("data",e,t,1),e,t,0,1791,2312,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="property_nav_wrap"> <div class="property_nav_scroller"> <ul class="links-'),i.b(i.v(i.f("numLinks",e,t,0))),i.s(i.f("config_options",e,t,1),e,t,0,1908,1953,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.s(i.f("has_divider",e,t,1),e,t,0,1924,1937,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" has-dividers")}),e.pop())}),e.pop()),i.b('"> '),i.s(i.f("pn_links",e,t,1),e,t,0,1988,2278,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<li class="'),i.s(i.f("icon",e,t,1),e,t,0,2008,2012,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("icon")}),e.pop()),i.b('"><a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" title="'),i.b(i.v(i.f("title",e,t,0))),i.b('"'),i.s(i.f("ping",e,t,1),e,t,0,2068,2096,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-ping="'),i.b(i.v(i.d("ping.static",e,t,0))),i.b('"')}),e.pop()),i.b(">"),i.s(i.f("icon",e,t,1),e,t,0,2115,2251,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="no-src" data-src="'),i.b(i.v(i.f("icon",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,2196,2237,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("icon",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(" ")}),e.pop()),i.b(i.v(i.f("title",e,t,0))),i.b("</a></li>")}),e.pop()),i.b(" </ul> </div> </div> ")}),e.pop()),a.fl()},partials:{},subs:{}}),Whiskers("modules.property_description",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <div class="module_body"> '),a.s(a.f("data",e,t,1),e,t,0,55,738,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="content" data-title="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> <div class="header"> <h1 style="color:'),i.s(i.f("style_options",e,t,1),e,t,0,157,174,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("heading_color",e,t,0)))}),e.pop()),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b('</h1> <div class="meta"> '),i.s(i.f("rating",e,t,1),e,t,0,239,329,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p><span class="meta-heading accent-color">'),i.b(i.v(i.d("translations.rated",e,t,0))),i.b(":</span> "),i.b(i.v(i.f("rating",e,t,0))),i.b("</p> ")}),e.pop()),i.b(" "),i.s(i.f("release",e,t,1),e,t,0,353,451,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <p><span class="meta-heading accent-color">'),i.b(i.v(i.d("translations.release_date",e,t,0))),i.b(":</span> "),i.b(i.v(i.f("release",e,t,0))),i.b("</p> ")}),e.pop()),i.b(' </div> </div> <p class="desc">'),i.b(i.v(i.f("desc",e,t,0))),i.b("</p> "),i.s(i.f("cds",e,t,1),e,t,1,0,0,"")||(i.b('<div class="movie-actions"> '),i.s(i.f("buttons",e,t,1),e,t,0,555,703,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" target="_blank" class="button small '),i.b(i.v(i.f("type",e,t,0))),i.b(" "),i.b(i.v(i.f("button_color",e,t,0))),i.b('"'),i.s(i.f("convert",e,t,1),e,t,0,649,676,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-convert="'),i.b(i.v(i.f("convert",e,t,0))),i.b('"')}),e.pop()),i.b(">"),i.b(i.v(i.f("title",e,t,0))),i.b("</a> ")}),e.pop()),i.b(" </div>")),i.b(" </div> ")}),e.pop()),a.b(' <div class="ad-container"> '),a.b(a.t(a.f("rectangleAd",e,t,0))),a.b(" "),a.b(a.t(a.f("mobileAd",e,t,0))),a.b(" </div> </div> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";function t(e){return e.split("?")[0]}var i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Grill,s=e.Whiskers,o=e.Backbone,l=e.jQuery,c=e._,d=r.ModuleView.extend({breakpoints:n,render:function(){var e=c.first(this.model.get("data")),t=e.takeover_styles,n=!!this.options.cds,r=o.Resize.width()>=a.midHigh,s=c.extend({cds:n,wide:r,propertyHeader:r?e.hero:e.hero_mobile,numLinks:e.pn_links?e.pn_links.length:0},this.options.ads.helpers(this.model.toJSON()),this.model);this.$el.html(this.template.render(s)).toggleClass("cds",n),this.$el.addClass(this.model.cid),i.Style.applyTakeoverStyles(t,!0)},resize:function(){this.render(),this.options.ads.restore()}});d.register("property_hero",{template:s.modules.property_hero,initialize:function(){this.property().get("video")&&(this.assets={scripts:["//a.dilcdn.com/a/videoplayer-cd2ca21be539.js"]})},property:function(){return this.model.data.first()},resize:function(){this.render(),this.options.ads.restore(),this.ready()},ready:function(){var e=o.Resize.width();if(!(e<a.midHigh)){var t=this.property(),n=t.get("video"),r=t.get("image");n&&(this.player=new i.MatterhornVideoPlayer("player_property_hero",{video:n,clickToPlay:!0,poster:r,ads:{enabled:!1}}))}},remove:function(){this.player&&(this.player.destroy(),this.player=null),r.ModuleView.prototype.remove.call(this)}}),d.register("property_description",{template:s.modules.property_description,breakpoints:null});var u=d.extend({style_classes:["property_nav","skip-styles","skip-bottom-border","skip-top-border"],template:s.modules.property_nav,ready:function(){this.$("a").each(function(){l(this).parent("li").toggleClass("active",t(this.href)===t(e.location.href))})}});u.register("property_nav"),u.register("property_nav_mobile")}(this),function(e){"use strict";var t=e.Disney,i=t.Style.breakpoints,a=i.midHigh.toString(),n=e.Grill,r=e.Whiskers,s=e.Backbone,o=e.EventLinkHandler,l=e._,c=e.devicePixelRatio>1.5;n.ModuleView.register("rich_image",{breakpoints:a,style_classes:["full-width","full-height","skip-bottom-border","skip-top-border"],template:r.modules.rich_image,render:function(){var e=s.Resize.width()>=i.midHigh,t=this,a=l.first(this.model.get("data")),n=t.model.get("style_options").images,r=n&&n.foreground_image,o=null;if(r){var d=c&&r.retina_url?r.retina_url:r.url,u=c&&r.mobile_retina_url?r.mobile_retina_url:r.mobile_url?r.mobile_url:null;o=e?d:u}var h=l.extend({image:o?o:null,data:a?a:null},this.model);this.$el.html(this.template.render(h))},events:{"click [data-event-link]":function(e){e.preventDefault(),o.handle(e)}},initialize:function(){this.needsGuestContext()&&this.options.guest.retain()},destroy:function(){this.needsGuestContext()&&this.options.guest&&this.options.guest.release()},resize:function(){this.render()}})}(this),Whiskers("modules.rich_text",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> '),a.s(a.f("header_data",e,t,1),e,t,0,36,54,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="rich_text_container"> '),a.s(a.f("image",e,t,1),e,t,0,115,307,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="rich_text_image '),i.b(i.v(i.f("position",e,t,0))),i.b('_align"> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="no-src" data-src="'),i.b(i.v(i.f("image",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,245,287,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("image",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(" </div>")}),e.pop()),a.b(" "),a.b(" "),a.s(a.f("image",e,t,1),e,t,1,0,0,"")||(a.b(" "),a.s(a.f("style_options",e,t,1),e,t,0,371,642,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("images",e,t,1),e,t,0,382,631,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.s(i.f("foreground_image",e,t,1),e,t,0,403,610,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.s(i.f("url",e,t,1),e,t,0,411,602,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="rich_text_image '),i.b(i.v(i.f("alignment",e,t,0))),i.b('_align"> '),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="no-src" data-src="'),i.b(i.v(i.f("url",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,541,581,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("url",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(" </div> ")}),e.pop())}),e.pop())}),e.pop())}),e.pop()),a.b(" ")),a.b(" "),a.s(a.f("rich_text",e,t,1),e,t,0,686,804,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="rich_text_body rich-text-enabled'),i.s(i.f("image",e,t,1),e,t,0,741,770,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" has-image "),i.b(i.v(i.f("position",e,t,0))),i.b("_align")}),e.pop()),i.b('">'),i.b(i.t(i.f("rich_text",e,t,0))),i.b("</div> ")}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e.Backbone,n=e.Disney,r=n.Style.breakpoints,s=r.midHigh.toString(),o=e.devicePixelRatio>1.5,l=e._;t.ModuleView.register("rich_text",{breakpoints:s,template:i.modules.rich_text,required_template_sets:["module_header"],initialize:function(){var e=this.model.get("style_options"),t=e&&e.columns?"cols-"+e.columns:"cols-1";this.style_classes=[t]},render:function(){var e,t=l.first(this.model.get("data")),i=this.model.get("style_options"),n=i&&i.images&&i.images.foreground_image,s=!(!n||!n.url&&!n.mobile_url),c=a.Resize.width()>=r.midHigh;if(s){var d=o&&n.retina_url?n.retina_url:n.url,u=o&&n.mobile_retina_url?n.mobile_retina_url:n.mobile_url;e=c?d:u}var h=l.extend({data:t,image:e,position:s&&n.alignment},this.model);this.$el.html(this.template.render(h,this.ctx_additions()))}})}(this),Whiskers("modules.search",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<form class="search-form goc-search" action="'),a.b(a.v(a.f("search_action",e,t,0))),a.b('" method="GET"> <a class="search-nav-logo" href="'),a.b(a.v(a.f("href",e,t,0))),a.b('"> </a> '),a.b(' <a class="textSearchHeading" href="'),a.b(a.v(a.f("href",e,t,0))),a.b('">'),a.b(a.v(a.d("translations.search",e,t,0))),a.b('</a> <div class="query-field"> '),a.b(' <input name="q" type="text" placeholder="" id="searchField_SRP"> </div> <input class="large button blue" type="submit" value="'),a.b(a.v(a.d("translations.search",e,t,0))),a.b('"> </form>'),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.GOC,a=e.jQuery,n=e.Whiskers,r=e.Tracker,s=e._;t.BunView.register("search",{template:n.modules.search,ready:function(){i&&i.queue.push(["ac",this.el,"srp/searchbox"]),a('input[name="q"]').focus()},events:{"click a":function(e){var t=a(e.currentTarget),i=t.attr("href");"img"===e.target.nodeName.toLowerCase()&&(t=a(e.target)),r.link({linkName:t.data("linkname"),linkPosition:t.data("linkposition"),href:i})},"submit form.goc-search":function(){r.link({linkName:"srp/searchbox/search_enter",linkPosition:"srp/searchbox"})}},render:function(){var e=this,t=a(".goc-bound .goc-search").attr("action")||"/search",i=s.extend({search_action:t},e.model);e.$el.html(e.template.render(i))}})}(this),Whiskers("modules.search_stream",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.b('"> <div class="module_header_container"> <div class="module_header"> '),a.s(a.f("title",e,t,1),e,t,0,121,139,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("<h2>"),i.b(i.v(i.f("title",e,t,0))),i.b("</h2>")}),e.pop()),a.b(' </div> <div class="filters" data-title="filters"> '),a.s(a.f("sortOptions",e,t,1),e,t,0,216,319,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="sort"> <a href="" class="popular active">Popular</a><a href="" class="new">New</a> </div> ')}),e.pop()),a.b(' <a href="" class="filter"> <span>All Games</span> </a> <div class="filter_mobile"> <span>All Games</span> <select class="mobile_filter_list"> <option value="0" data-filter="All" selected="selected">All Games</option> </select> </div> </div> </div> <div class="filter_drawer"> <div class="filter_list"> </div> </div> <div id="stream_items"> '),a.b(a.t(a.f("list",e,t,0))),a.b(' </div> <div class="show_more_container"> <div class="show_more blue button large" role="button" onclick=""> <span class="label">Show More</span> <span class="spinner"></span> </div> </div> </div>'),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Disney,i=e.Grill,a=e.Backbone,n=e.Modernizr,r=e.Whiskers,s=e.Tracker,o=e.jQuery,l=e._,c=t.Style.breakpoints,d=l.values(c),u=a.LazyCollection.extend({filters:[],parse:function(e){return this.setFilters(e.filters),this.setCount(e.total_found),e.data},setFilters:function(e){this.filters=e},setCount:function(e){this.count=e}}),h=i.GridModuleBaseView.extend({sortTypes:["created_at","popularity"],style_classes:["stream-view","grid-view","filters-view"],compatibility:n.canvas&&n.flash?"html5,flash":n.canvas&&!n.flash?"html5":"flash",page:1,events:{"click .show_more":function(e){var t=this;e.preventDefault(),this.getMoreItems().then(function(){t.showHideButton(),s.trackPagination(++t.page),t.$el.loadLazyImages()})},"click .sort a.popular":function(e){var t=this;e.preventDefault(),t.$(".popular").addClass("active"),t.$(".new").removeClass("active"),this.hideStreamItems()},"click .sort a.new":function(e){var t=this;e.preventDefault(),t.$(".new").addClass("active"),t.$(".popular").removeClass("active"),this.hideStreamItems()},"click .filters a.filter":function(e){var t=this;e.preventDefault(),t.$(".filters a.filter").toggleClass("active");var i=o(".filter_list").height()+44;t.$(".filter_drawer").hasClass("active")?t.$(".filter_drawer").css("height","0").removeClass("active"):t.$(".filter_drawer").css("height",i).addClass("active")}},initialize:function(){var e=this,t=e.model,a=t.data=new u(null,{min:t.data.min,params:{limit:"l",offset:"o"}});this.itemsRetrieved=!1,this.readyCalled=!1,this.list=new i.ListView({collection:a,template:{render:function(t){return r.entities.item.render(t,e.global_components.entities)}}}),a.on("loading",function(t,i){e.updateButton(i)}),this.resetAndGetMoreItems().then(function(){e.itemsRetrieved=!0,e.createUI(e.model.data.filters),e.showHideButton()})},getMoreItems:function(){var e=this,t=a.Resize.width(),i=e.list.collection,n=this.$(".filter_drawer a.active").data("filter")||"All",r=this.$("select.mobile_filter_list option:selected").data("filter")||"All",s=this.$(".sort > .active").text().toLowerCase(),o="new"!==s?e.sortTypes[1]:e.sortTypes[0];768>t&&(n=r);var l="/search-filter.json?f="+n+"&s="+o+"&c="+e.compatibility;return i.url=l,this.itemCount+=this.cols()*this.rows(),this.model.data.ensure(this.itemCount)},showHideButton:function(){this.model.data.length>=this.model.data.count?this.$(".show_more_container").hide():this.$(".show_more_container").show()},hideStreamItems:function(){var t=this,i=this.$("#stream_items ul"),a=this.$("#stream_items"),n=i.outerHeight(),r=o(e).selectTransitionEnd()+".stream_items";i.css("height",n).addClass("hide"),a.addClass("load"),o.support.css3("transition")?i.on(r,function(e){this===e.target&&(t.resetAndGetMoreItems(),i.off(r))}):t.resetAndGetMoreItems()},render:function(){var e=this.list,i={title:this.model.get("title"),type:this.model.get("type"),item_titles_below:this.model.get("item_titles_below"),list:t.placeHtml(e),sortOptions:!0};this.$el.html(this.template.render(i)),t.placeSwap(this,e),this.updateButton(!1)},ready:function(){this.readyCalled=!0,this.resize(),this.createUI(this.model.data.filters),this.$el.loadLazyImages()},updateButton:function(e){var t=this.$el,i=this.model.data;t.toggleClass("loading",e),t.toggleClass("has-more",i.count>0)},resize:function(){var e=this.cols();this.list.$el.removeClass().addClass("cols-"+e),this.fit()},fit:function(){var e=this.list.collection.count,t=this.list.collection.length,i=this.page*this.cols()*this.rows();e>i&&e>t?this.list.$el.children().show().slice(this.page*this.cols()*this.rows()).hide():this.list.$el.children().show(),this.$el.loadLazyImages()},createUI:function(e){if(this.itemsRetrieved&&this.readyCalled){var t=this,i=e,a=this.$(".filter_list"),n=this.$(".mobile_filter_list"),r=this.model.get("all_button_text");i?(a.append('<a class="active" href="" data-filter="All"><span>All '+r+"</span></a>"),this.$(".filters a.filter span").replaceWith("<span>All "+r+"</span>"),this.$(".filter_mobile span").replaceWith("<span>All "+r+"</span>"),o.each(i,function(e){var t=i[e];a.append('<a href="" data-filter="'+t+'"><span>'+t+"</span></a>"),n.append('<option value="'+(e+1)+'" data-filter="'+t+'">'+t+"</option>")}),this.$(".filter_drawer a").click(function(e){e.preventDefault(),t.$(".filter_drawer a").removeClass("active"),o(this).addClass("active"),t.$(".filter_drawer").css("height","0").removeClass("active"),t.$(".filters a.filter").removeClass("active"),"All"===o(this).data("filter")?(t.$(".filters a.filter span").replaceWith("<span>All "+r+"</span>"),t.$(".filter_mobile span").replaceWith("<span>All "+r+"</span>")):(t.$(".filters a.filter span").replaceWith("<span>"+o(this).data("filter")+"</span>"),t.$(".filter_mobile span").replaceWith("<span>"+o(this).data("filter")+"</span>")),t.hideStreamItems()}),this.$(".mobile_filter_list").change(function(){t.$(".mobile_filter_list option:selected").each(function(){"All"===o(this).data("filter")?(t.$(".filters a.filter span").replaceWith("<span>All "+r+"</span>"),t.$(".filter_mobile span").replaceWith("<span>All "+r+"</span>")):(t.$(".filters a.filter span").replaceWith("<span>"+o(this).data("filter")+"</span>"),t.$(".filter_mobile span").replaceWith("<span>"+o(this).data("filter")+"</span>")),t.$(".mobile_filter_list").blur(),t.hideStreamItems()})}),a.css("display","")):(a.hide(),this.$(".filters a.filter").hide(),this.$(".filter_mobile").hide()),this.$(".selectBox").append('<div class="arrow_down"></div>')}},resetAndGetMoreItems:function(){var e=this,t=e.list.collection;this.page=1,this.itemCount=0,t.reset();var i=this.getMoreItems();return i.then(function(){e.itemsRetrieved=!0,e.showHideButton(),e.$("#stream_items").removeClass("load"),e.$("#stream_items ul").css("height","auto").removeClass("hide"),e.$el.loadLazyImages()}),this.$(".arrow_down").length||this.$(".selectBox").append('<div class="arrow_down"></div>'),i}});h.register("search_stream",{breakpoints:d.join(" "),template:r.modules.search_stream,rows:function(){var e=a.Resize.width();return e<c.midHigh?4:e<c.max?4:3}})}(this),Whiskers("modules.shoutout",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,53,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="container"> '),i.b(i.rp("<entity0",e,t,"")),i.b(" </div> ")}),e.pop()),a.fl()},partials:{"<entity0":{name:"entity",partials:{},subs:{}}},subs:{}}),Whiskers("entities.shoutout",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <div class="header module_header"> '),a.s(a.f("logo",e,t,1),e,t,0,64,200,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="no-src" data-src="'),i.b(i.v(i.f("logo",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,145,186,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("logo",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(" ")}),e.pop()),a.b(" <h2>"),a.b(a.v(a.f("question",e,t,0))),a.b('</h2> </div> <div class="left"> '),a.s(a.f("logo",e,t,1),e,t,0,267,403,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="no-src" data-src="'),i.b(i.v(i.f("logo",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,348,389,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("logo",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(" ")}),e.pop()),a.b(' </div> <div class="right"> <form> <div class="fields"> <div class="words"> <textarea name="shoutout" maxlength="70" placeholder="What do you have to say?" required></textarea> <span class="remaining">50</span> </div> <div class="nas"> <div class="input-group name"> <input type="text" name="name" maxlength="20" required placeholder="First name"></input> </div> <div class="input-group age"> <input type="text" name="age" maxlength="3" required placeholder="Age"></input> </div> '),a.s(a.f("show_states",e,t,1),e,t,0,908,2662,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="input-group state"> <select name="state" class="empty" required> <option value="" selected>State</option> <option value="AL">AL</option> <option value="AK">AK</option> <option value="AZ">AZ</option> <option value="AR">AR</option> <option value="CA">CA</option> <option value="CO">CO</option> <option value="CT">CT</option> <option value="DE">DE</option> <option value="DC">DC</option> <option value="FL">FL</option> <option value="GA">GA</option> <option value="HI">HI</option> <option value="ID">ID</option> <option value="IL">IL</option> <option value="IN">IN</option> <option value="IA">IA</option> <option value="KS">KS</option> <option value="KY">KY</option> <option value="LA">LA</option> <option value="ME">ME</option> <option value="MD">MD</option> <option value="MA">MA</option> <option value="MI">MI</option> <option value="MN">MN</option> <option value="MS">MS</option> <option value="MO">MO</option> <option value="MT">MT</option> <option value="NE">NE</option> <option value="NV">NV</option> <option value="NH">NH</option> <option value="NJ">NJ</option> <option value="NM">NM</option> <option value="NY">NY</option> <option value="NC">NC</option> <option value="ND">ND</option> <option value="OH">OH</option> <option value="OK">OK</option> <option value="OR">OR</option> <option value="PA">PA</option> <option value="RI">RI</option> <option value="SC">SC</option> <option value="SD">SD</option> <option value="TN">TN</option> <option value="TX">TX</option> <option value="UT">UT</option> <option value="VT">VT</option> <option value="VA">VA</option> <option value="WA">WA</option> <option value="WV">WV</option> <option value="WI">WI</option> <option value="WY">WY</option> <option value="Other">Other</option> </select> </div> ')}),e.pop()),a.b(" "),a.s(a.f("show_states",e,t,1),e,t,1,0,0,"")||a.b(' <input type="hidden" name="state" value="Other"> '),a.b(' </div> <button type="submit" class="button blue small">Submit</button> <p class="notification"></p> </div> </form> <div class="list"></div> <div class="show_more_container"> <div class="show_more blue button large" role="button" onclick=""> <span class="label">Show More</span> <span class="spinner"></span> </div> </div> </div> </div>'),a.fl()},partials:{},subs:{}}),Whiskers("entities.shoutout.message",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<li class="message'),a.s(a.f("pending",e,t,1),e,t,0,30,38,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" pending")}),e.pop()),a.b('"> <q>'),a.b(a.v(a.f("text",e,t,0))),a.b("</q> <span> "),a.s(a.f("dname",e,t,1),e,t,0,86,107,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("dname",e,t,0))),i.b("</address> ")}),e.pop()),a.b(" "),a.s(a.f("name",e,t,1),e,t,0,127,288,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("show_states",e,t,1),e,t,0,144,199,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <strong>"),i.b(i.v(i.f("name",e,t,0))),i.b("</strong> Age "),i.b(i.v(i.f("age",e,t,0))),i.b(", from "),i.b(i.v(i.f("state",e,t,0))),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("show_states",e,t,1),e,t,1,0,0,"")||(i.b(" <strong>"),i.b(i.v(i.f("name",e,t,0))),i.b("</strong> Age "),i.b(i.v(i.f("age",e,t,0))),i.b(" ")),i.b(" ")}),e.pop()),a.b(" </span> </li>"),a.fl()},partials:{},subs:{}}),Whiskers("modules.comments",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,53,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="container"> '),i.b(i.rp("<entity0",e,t,"")),i.b(" </div> ")}),e.pop()),a.fl()},partials:{"<entity0":{name:"entity",partials:{},subs:{}}},subs:{}}),Whiskers("entities.comments",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <div class="header module_header"> <h2>Comments <span class="comment_count">(<span class="count">0</span>)</span></h2> </div> <div class="gutter"> <form> <div class="emblem"> <span class="avatar"></span> <span class="change">Change</span> </div> <div class="emblems"> <ul> '),a.s(a.f("emblems",e,t,1),e,t,0,305,376,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li data-id="'),i.b(i.v(i.f("id",e,t,0))),i.b('"><img src="'),i.b(i.v(i.f("large_image",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"></li> ')}),e.pop()),a.b(' </ul> </div> <div class="fields"> <div class="words"> <textarea name="shoutout" maxlength="150" placeholder="What do you have to say?" required></textarea> <span class="remaining"></span> </div> <div class="nas"> <div class="input-group name"> <input type="text" name="name" maxlength="20" required placeholder="Your name"></input> </div> <div class="input-group age"> <input type="text" name="age" maxlength="3" required placeholder="Age"></input> </div> '),a.s(a.f("show_states",e,t,1),e,t,0,861,2615,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="input-group state"> <select name="state" class="empty" required> <option value="" selected>State</option> <option value="AL">AL</option> <option value="AK">AK</option> <option value="AZ">AZ</option> <option value="AR">AR</option> <option value="CA">CA</option> <option value="CO">CO</option> <option value="CT">CT</option> <option value="DE">DE</option> <option value="DC">DC</option> <option value="FL">FL</option> <option value="GA">GA</option> <option value="HI">HI</option> <option value="ID">ID</option> <option value="IL">IL</option> <option value="IN">IN</option> <option value="IA">IA</option> <option value="KS">KS</option> <option value="KY">KY</option> <option value="LA">LA</option> <option value="ME">ME</option> <option value="MD">MD</option> <option value="MA">MA</option> <option value="MI">MI</option> <option value="MN">MN</option> <option value="MS">MS</option> <option value="MO">MO</option> <option value="MT">MT</option> <option value="NE">NE</option> <option value="NV">NV</option> <option value="NH">NH</option> <option value="NJ">NJ</option> <option value="NM">NM</option> <option value="NY">NY</option> <option value="NC">NC</option> <option value="ND">ND</option> <option value="OH">OH</option> <option value="OK">OK</option> <option value="OR">OR</option> <option value="PA">PA</option> <option value="RI">RI</option> <option value="SC">SC</option> <option value="SD">SD</option> <option value="TN">TN</option> <option value="TX">TX</option> <option value="UT">UT</option> <option value="VT">VT</option> <option value="VA">VA</option> <option value="WA">WA</option> <option value="WV">WV</option> <option value="WI">WI</option> <option value="WY">WY</option> <option value="Other">Other</option> </select> </div> ')}),e.pop()),a.b(" "),a.s(a.f("show_states",e,t,1),e,t,1,0,0,"")||a.b(' <input type="hidden" name="state" value="Other"> '),a.b(' </div> <button type="submit" class="button blue small">Submit</button> <p class="notification"></p> </div> </form> <div class="list"></div> <div class="show_more_container"> <div class="show_more blue button large" role="button" onclick=""> <span class="label">Show More</span> <span class="spinner"></span> </div> </div> </div> </div>'),a.fl()},partials:{},subs:{}}),Whiskers("entities.comments.message",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<li class="message'),a.s(a.f("pending",e,t,1),e,t,0,30,38,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" pending")}),e.pop()),a.b('"> <div class="arrow"></div> <div class="inner"> <q>'),a.b(a.v(a.f("text",e,t,0))),a.b("</q> "),a.s(a.f("emblem",e,t,1),e,t,0,126,197,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="avatar"><img src="'),i.b(i.v(i.f("large_image",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"></div> ')
}),e.pop()),a.b(" "),a.s(a.f("emblem",e,t,1),e,t,1,0,0,"")||a.b(' <div class="avatar"></div> '),a.b(" <span> "),a.s(a.f("dname",e,t,1),e,t,0,277,298,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("dname",e,t,0))),i.b("</address> ")}),e.pop()),a.b(" "),a.s(a.f("name",e,t,1),e,t,0,318,479,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("show_states",e,t,1),e,t,0,335,390,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <strong>"),i.b(i.v(i.f("name",e,t,0))),i.b("</strong> Age "),i.b(i.v(i.f("age",e,t,0))),i.b(", from "),i.b(i.v(i.f("state",e,t,0))),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("show_states",e,t,1),e,t,1,0,0,"")||(i.b(" <strong>"),i.b(i.v(i.f("name",e,t,0))),i.b("</strong> Age "),i.b(i.v(i.f("age",e,t,0))),i.b(" ")),i.b(" ")}),e.pop()),a.b(" </span> </div> </li>"),a.fl()},partials:{},subs:{}}),function(e,t){"use strict";function i(e){var i=t(e.currentTarget),a=i.val(),n=i.attr(s);n&&a===n&&(i.val(""),i.removeClass("empty"))}function a(e){var i=t(e.currentTarget),a=i.val(),n=i.attr(s);n&&!a&&(i.val(n),i.addClass("empty"))}var n,r="input,textarea",s="placeholder";n=s in e.document.createElement("input")?function(){return this}:function(){return this.on("focusin",r,i),this.on("focusout",r,a),this.find(r).each(function(){a({currentTarget:this})}),this},t.fn.polyfillPlaceholder=n}(this,jQuery),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e.Backbone,o=e.jQuery,l=e._,c=e.Tracker,d=t.ListView.extend({}),u=s.LazyCollection.extend({initialize:function(e,t){this.options=t||{}},setItemEmblem:function(e){var t=this.options.emblems;if(e.emblem&&t){var i=t.get(e.emblem);e.emblem=i?i.toJSON():null}return e},parse:function(e){this.count=e.number_of_messages_stored;var t=this;return l.each(e.msgs,function(e){e.id=e._id,delete e._id,t.setItemEmblem(e)}),e.msgs},remaining:function(){return this.count||0===this.count?this.count-this.length:null}}),h=s.LazyCollection.extend({pages:s.LazyCollection.prototype.pages}),f=s.View.extend({className:"container",breakpoints:n,page:1,posts:0,events:{"click .show_more_container":function(e){e.preventDefault(),this.getNextPage()},"change select":function(){this.updateSelect()},'keyup [name="shoutout"]':function(){this.updateRemaining()},'keypress [name="shoutout"]':function(e){if(0!==e.which&&8!==e.which){var t=o(e.currentTarget),i=t.val()||"",a=t.attr("maxlength");a&&i.length>=a&&e.preventDefault()}},'change [name="shoutout"]':function(){this.updateRemaining()},'keypress input[name="name"]':function(e){if(0!==e.which&&8!==e.which){var t=String.fromCharCode(e.which);/[a-z0-9]/i.test(t)||e.preventDefault()}},'change input[name="name"]':function(e){var t=o(e.currentTarget),i=t.val()||"";t.val(i.replace(/[^a-z0-9]/gi,""))},"click div.emblem":function(){this.toggleEmblemPicker()},"click div.emblems ul li":function(e){var t=o(e.currentTarget),i=t.data("id");if(i){var a=this.model.emblems.get(i);this.setEmblem(a),this.hideEmblemPicker()}},"submit form":function(e){var t=o(e.currentTarget);this.processForm(t),e.preventDefault()}},initialize:function(){l.bindAll(this),this.template=this.options.template||this.template,this.message_template=this.options.message_template||this.message_template,this.animateMessageIntoView=this.options.animateMessageIntoView||this.animateMessageIntoView;var e=this,t=this.model.get("shoutout_id"),i=this.model.get("cws_url"),a=this.model.get("cws_tenant");this.filter_url=i+"/language_filter";var n=this.model.emblems=new h(this.model.get("emblems")),r=this.model.data=new u(null,{min:this.rows(),params:{limit:"length"},emblems:n});r.url=i+"/shoutouts/tenants/"+encodeURIComponent(a)+"/questions/"+encodeURIComponent(t)+"/messages",r.on("loading",this.onDataLoading),this.messages_view=new d({collection:r,template:this.message_template}),this.emblemPickerOpen=!1,this.currentEmblem=n.at(0),r.ensure(this.rows()).then(function(){e.$el.loadLazyImages()})},resize:function(e){if(e<a.midHigh){var t=this,i=this.model.data,n=i.models.slice(0,this.rows());i.reset(n),i.ensure(this.rows()).then(function(){t.$el.loadLazyImages()})}},trackLink:function(e){var t=this.options,i=["shoutout","mod"+t.moduleView.index,"item"+t.index,"button"],a=i.join("/"),n=a+"/"+e.replace(/[^a-z0-9 ]/gi,"").replace(/\s+/g,"-");c.link({linkName:n,linkPosition:a})},getNextPage:function(){var e=this,t=this.model.data;if(t.loading()||0===t.remaining())return!1;var i=++this.page*this.rows();this.trackLink("get more"),this.model.data.ensure(i).then(function(){e.$el.loadLazyImages()})},onScroll:function(e){var t=o(e.currentTarget),i=t.children(),a=t.height(),n=i.height(),r=t.scrollTop(),s=n-a-r;.5*a>s&&this.getNextPage()},onDataLoading:function(e,t){this.loading=t,this.updateShowMore()},onMessageSaveSuccess:function(){this.posts+=1,this.trackLink("submit"),this.posts>=3?this.updateSubmitButton({disabled:!0}):this.updateSubmitButton();var e=this._pendingMessage;this._pendingMessage=void 0,e.set("pending",!0),e.set("show_states",this.model.get("show_states")),this.model.data.unshift(this.model.data.setItemEmblem(e.toJSON())),this.animateMessageIntoView(this.messages_view.$("li:first-child")),this.$el.loadLazyImages(),this.clearForm(),this.model.data.count+=1,this.updateCount()},onMessageSaveError:function(e){"string"!=typeof e&&(e="Saving has failed, sorry!"),this.trackLink("submit-error"),this.showAlert(e),this.updateSubmitButton()},animateMessageIntoView:function(e){e.addClass("show")},toggleEmblemPicker:function(){this.emblemPickerOpen?this.hideEmblemPicker():this.showEmblemPicker()},updateRemaining:function(){var e=this.$(".remaining"),t=this.$('[name="shoutout"]'),i=t.attr("maxlength"),a=t.hasClass("empty")?0:(t.val()||"").length,n=i-a;e.text(n)},setEmblem:function(e){var t=e?e.attributes:{},i=o("<img/>").attr({"data-src":t.large_image}),a=this.$("div.emblem .avatar");a.empty(),t.large_image&&a.append(i),this.currentEmblem=e},updateCount:function(){var e=this.$(".count");e.text(this.model.data.count?this.model.data.count:0)},updateShowMore:function(){var e=this.$(".show_more_container .show_more"),t=this.$(".show_more_container .loading");if(this.loading)e.hide(),t.show();else{var i=this.model.data.remaining();null===i||i>0?e.show():e.hide(),t.hide(),this.updateCount()}},showEmblemPicker:function(){this.emblemPickerOpen||(this.$(".emblems").addClass("active"),this.emblemPickerOpen=!0)},hideEmblemPicker:function(){this.emblemPickerOpen&&(this.$(".emblems").removeClass("active"),this.emblemPickerOpen=!1)},render:function(){this.$el.html(this.template.render(this.model)),this.$el.find(".list").append(this.messages_view.$el),this.updateSelect(),this.setEmblem(this.currentEmblem),this.updateRemaining(),this.bindScroll(),this.updateCount(),this.updateShowMore(),this.$el.polyfillPlaceholder()},bindScroll:function(){this.$(".list").scroll(this.onScroll)},updateSelect:function(){var e=this.$("select");e.val()?e.removeClass("empty"):e.addClass("empty")},rows:function(){return 6},clearForm:function(){var e=this.$("form");e.find('[name="shoutout"]').val(""),e.find('[name="name"]').val(""),e.find('[name="age"]').val(""),e.find('select[name="state"]').val(""),this.updateSelect(),this.addPlaceholders&&this.addPlaceholders(),this.updateRemaining()},processForm:function(e){var t=this,i=e.find('[name="shoutout"]'),a=e.find('[name="name"]'),n=e.find('[name="age"]'),r=e.find('[name="state"]');this.clearPlaceholders&&this.clearPlaceholders();var o=i.val(),l=a.val(),c=n.val(),d=r.val();if(this.addPlaceholders&&this.addPlaceholders(),0===o.length)return this.showAlert("Type your shoutout in the box above"),!1;var u=i.attr("maxlength");if(o.length>u)return this.showAlert("Your message may be no more than "+u+" characters"),!1;if(0===l.length||-1!==l.indexOf(" "))return this.showAlert("Enter your first name (no spaces)"),!1;if(0===c.length||!c.match(/^\d+$/))return this.showAlert("Enter your age (numbers only)"),!1;if(c=parseInt(c,10),1>c||c>123)return this.showAlert("Enter a valid age"),!1;if(!d&&"hidden"!==r.attr("type"))return this.showAlert("Select the state you live in"),!1;var h=new s.Model({text:o,name:l,age:c,state:d,emblem:this.currentEmblem?this.currentEmblem.get("id"):null},{collection:this.model.data});this.updateSubmitButton({saving:!0}),this._pendingMessage=h;var f=o+"|"+l,p=s.sync("read",t.model,{url:this.filter_url+"/validate",data:{message:f}});return p.then(function(e){return e&&e.reject===!1?h.save().then(t.onMessageSaveSuccess,t.onMessageSaveError):t.onMessageSaveError("Thanks!  Select comments may be posted!")},this.onMessageSaveError)},showAlert:function(e){this.$(".notification").removeClass("notice").addClass("alert").stop(!0).hide().text(e).slideDown(500).delay(2500).slideUp(300)},showNotice:function(e){this.$(".notification").removeClass("alert").addClass("notice").stop(!0).hide().text(e).slideDown(500).delay(2500).slideUp(300)},updateSubmitButton:function(e){e=e||{};var t=this.$("button[type=submit]");e.saving?t.attr("disabled",!0).addClass("disabled").text("Saving..."):e.disabled?t.hide():t.attr("disabled",!1).removeClass("disabled").text("Submit")}}),p=t.ModuleView.extend({initialize:function(){this.shoutout_views=[],this.index=this.model.collection.indexOf(this.model),this.model.data.each(function(e,t){this.shoutout_views.push(new f({model:e,index:t,moduleView:this,template:this.entity,message_template:this.message,animateMessageIntoView:this.animateMessageIntoView}))},this)},render:function(){var e={};this.$el.html(this.template.render(e)),l.each(this.shoutout_views,function(e){e.render(),this.$el.append(e.$el)},this)}});p.register("shoutout",{template:r.modules.shoutout,entity:r.entities.shoutout,message:r.entities.shoutout.message,animateMessageIntoView:function(e){e.addClass("show")}}),p.register("comments",{template:r.modules.comments,entity:r.entities.comments,message:r.entities.comments.message,animateMessageIntoView:function(e){e.addClass("show")}})}(this),Whiskers("modules.side_by_side",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("foregroundImage",e,t,1),e,t,0,20,106,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <img class="item fg'),i.s(i.f("fgPos",e,t,1),e,t,0,50,67,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("fgPos",e,t,0))),i.b(" jsWide")}),e.pop()),i.b('" src="'),i.b(i.v(i.f("foregroundImage",e,t,0))),i.b('"> ')}),e.pop()),a.b(' <div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.b('"> '),a.s(a.f("data",e,t,1),e,t,0,181,309,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="item"> '),i.s(i.d("config_options.hide_title",e,t,1),e,t,1,0,0,"")||i.b(i.rp("<module_header0",e,t,"")),i.b(" "),i.b(i.rp("<entity_container1",e,t,"")),i.b(" </div> ")}),e.pop()),a.b(" </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<entity_container1":{name:"entity_container",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e.Backbone,o=e._,l=e.devicePixelRatio>1.5,c=t.ModuleView.extend({breakpoints:n,style_classes:["half-view"],required_template_sets:["module_header","entities"],template:r.modules.side_by_side,render:function(){var e=s.Resize.width()>=a.midHigh,t=this.model,i=this.$el,n=t.get("style_options"),r=n&&n.layout||"left",c=n&&n.images&&n.images.foreground_image,d=null;if(c){var u=l&&c.retina_url?c.retina_url:c.url,h=l&&c.mobile_retina_url?c.mobile_retina_url:c.mobile_url?c.mobile_url:null;d=e?u:h}var f=o.extend({layout:r,foregroundImage:d?d:null,fgPos:e&&c&&c.alignment?c.alignment:null,contentType:function(){return this.get("type").toLowerCase()}},this.model);i.html(this.template.render(f,this.ctx_additions()))}});c.register("side_by_side",{}),c.register("halfling",{}),c.register("age_gate",{})}(this),Whiskers("modules.sidekick_shared",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.b('"> '),a.s(a.f("header_data",e,t,1),e,t,0,61,79,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="module_body"> <div class="col-container'),a.s(a.f("one_up",e,t,1),e,t,0,158,165,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" cols-1")}),e.pop()),a.s(a.f("two_up",e,t,1),e,t,0,187,194,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" cols-2")}),e.pop()),a.b('"> '),a.s(a.f("data",e,t,1),e,t,0,217,228,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.b(i.rp("<item1",e,t,"")),i.b(" ")}),e.pop()),a.b(' </div> <div class="ad-container"> '),a.b(a.t(a.f("rectangleAd",e,t,0))),a.b(" "),a.b(a.t(a.f("mobileAd",e,t,0))),a.b(" </div> </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<item1":{name:"item",partials:{},subs:{}}},subs:{}}),Whiskers("modules.sidekick_video",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.b('"> '),a.s(a.f("header_data",e,t,1),e,t,0,61,79,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="module_body"> <div class="col-container"> '),a.s(a.f("data",e,t,1),e,t,0,159,952,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="col item"> <div class="entity-container ratio-16x9"> <div class="video-container trailer-box entity-box"> <div class="aspect"> '),i.s(i.f("expired",e,t,1),e,t,1,0,0,"")||(i.b(' <div id="'),i.b(i.v(i.f("player_id",e,t,0))),i.b('" class="player video trailer-box"> <noscript> <div class="player_error">'),i.b(i.v(i.d("translations.no_javascript",e,t,0))),i.b("</div> </noscript> </div> ")),i.b(" "),i.s(i.f("expired",e,t,1),e,t,0,488,551,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<div class="orphan"><p>'),i.b(i.v(i.d("translations.video_expired",e,t,0))),i.b("</p></div>")}),e.pop()),i.b(' <div class="card embed"> <div class="card_header"> <p class="btn_replay">'),i.b(i.v(i.d("translations.replay",e,t,0))),i.b('</p> <p class="btn_watch">'),i.b(i.v(i.d("translations.watch_on",e,t,0))),i.b('</p> </div> <div class="suggested"> <ul> '),i.s(i.f("suggested",e,t,1),e,t,0,766,889,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(" <li>"),i.b(i.rp("<entity_container1",e,t,"")),i.b("</li> ")}),e.pop()),i.b(" </ul> </div> </div> </div> </div> </div> </div> ")}),e.pop()),a.b(' </div> <div class="ad-container"> '),a.b(a.t(a.f("rectangleAd",e,t,0))),a.b(" "),a.b(a.t(a.f("mobileAd",e,t,0))),a.b(" </div> </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<entity_container1":{name:"entity_container",partials:{},subs:{}}},subs:{}}),Whiskers("modules.watch",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="video_watch_container" itemprop="video" itemscope itemtype="http://schema.org/VideoObject" '),a.s(a.f("skinClass",e,t,1),e,t,0,114,149,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('class="skin-override-'),i.b(i.v(i.f("skinClass",e,t,0))),i.b('"')}),e.pop()),a.b('> <div id="video_wrapper" class="inverted"> '),a.s(a.f("header_data",e,t,1),e,t,0,223,241,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="bound"> <div class="scaler"></div> <div id="frame"> '),a.s(a.f("data",e,t,1),e,t,0,331,1750,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <!-- Orphan video markup --> <meta itemprop="duration" content="'),i.b(i.v(i.f("duration_iso",e,t,0))),i.b('"> <meta itemprop="thumbnail" content="'),i.b(i.v(i.f("thumb",e,t,0))),i.b('"> <meta itemprop="name" content="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> <meta itemprop="description" content="'),i.b(i.v(i.f("description",e,t,0))),i.b('"> <meta itemprop="URL" content="'),i.b(i.v(i.f("href",e,t,0))),i.b('"> '),i.s(i.f("embedURL",e,t,1),e,t,0,616,667,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <meta itemprop="embedURL" content="'),i.b(i.v(i.f("embedURL",e,t,0))),i.b('"> ')}),e.pop()),i.b(' <div id="player" class="player"> '),i.s(i.f("expired",e,t,1),e,t,1,0,0,"")||(i.b(' <noscript> <div class="player_error">'),i.b(i.v(i.d("translations.no_javascript",e,t,0))),i.b("</div> </noscript> ")),i.b(" "),i.s(i.f("expired",e,t,1),e,t,0,838,903,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="orphan"><p>'),i.b(i.v(i.d("translations.video_expired",e,t,0))),i.b("</p></div> ")}),e.pop()),i.b(" </div> "),i.s(i.f("hasPlaylist",e,t,1),e,t,0,939,1109,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="image-controls-wrap play hide"> <div class="image-controls-bg"> </div> <div class="image-play-control"></div> <div class="image-pause-control"></div> </div> ')}),e.pop()),i.b(' <!-- /Orphan video markup --> <div id="card" class="card watch"> <div class="card_header"> <p class="btn_replay skip-text-styles">'),i.b(i.v(i.d("translations.replay_video",e,t,0))),i.b('</p> <p class="countdown_intro skip-text-styles">'),i.b(i.v(i.d("translations.next_video_start",e,t,0))),i.b(' <span class="countdown">10</span><span class="autoplay">'),i.b(i.v(i.d("translations.autoplay_off",e,t,0))),i.b("</span></p> "),i.s(i.f("upNext",e,t,1),e,t,0,1476,1573,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('"><p class="btn_next skip-text-styles">'),i.b(i.v(i.d("translations.watch_next_video",e,t,0))),i.b("</p></a>")}),e.pop()),i.b(' </div> <div class="suggested"> <ul> '),i.s(i.f("upNext",e,t,1),e,t,0,1632,1669,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<li class="priority"> '),i.b(i.rp("<item1",e,t,"")),i.b(" </li>")}),e.pop()),i.b(" "),i.s(i.f("suggested",e,t,1),e,t,0,1695,1715,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("<li> "),i.b(i.rp("<item2",e,t,"")),i.b(" </li>")}),e.pop()),i.b(" </ul> </div> </div> ")}),e.pop()),a.b(" </div> </div> </div> <!-- End of video_wrapper --> "),a.s(a.f("hasPlaylist",e,t,1),e,t,0,1827,1934,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("playlist_below",e,t,1),e,t,1,0,0,"")||i.b(' <div id="playlist-holder" class="open"></div> <!-- end playlist --> ')}),e.pop()),a.b(' <div class="content-toolbar-container"> <div id="toolbar" class="inverted"> <div id="meta"></div> </div> <!-- End of toolbar --> </div> <!-- End of bound --> '),a.s(a.f("contentToolbarPromoLink",e,t,1),e,t,0,2137,2530,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("message_below",e,t,1),e,t,0,2155,2512,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="watch_icon item" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> <div class="messageLink"> '),i.s(i.f("asset_desktop_image",e,t,1),e,t,0,2265,2350,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="watch-icon"> <img src="'),i.b(i.v(i.f("asset_desktop_image",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> </div> ')}),e.pop()),i.b(' <div class="copy'),i.s(i.f("asset_desktop_image",e,t,1),e,t,1,0,0,"")||i.b(" noImage "),i.b('"> <p aria-hidden="true">'),i.b(i.v(i.f("description",e,t,0))),i.b("</p> </div> </div> </a> ")}),e.pop())}),e.pop()),a.b(" "),a.s(a.f("hasPlaylist",e,t,1),e,t,0,2575,2682,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.s(i.f("playlist_below",e,t,1),e,t,0,2594,2663,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div id="playlist-holder" class="open"></div> <!-- end playlist --> ')}),e.pop())}),e.pop()),a.b(" </div> <!-- End -->"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<item1":{name:"item",partials:{},subs:{}},"<item2":{name:"item",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Modernizr,s=e.Whiskers,o=e._,l=t.ModuleView.extend({style_classes:["sidekick"],required_template_sets:["module_header","entities"],template:s.modules.sidekick_shared,numObjects:1,render:function(){var e,t=this.model.get("type"),i=this.model.get("data");"game"===t&&(i=this.getGameData(this.model)),i[0].game_type&&(e=i[0].game_type.split(" ").join("_").toLowerCase()),this.sidekick_asset_override&&o.each(i,function(e){e.sidekick_desktop&&(e.thumb_data={src:e.sidekick_desktop},e.entity_config.aspect_ratio="16x9")}),this.model.data.models=o.first(i,this.numObjects);var a=o.extend({isPromo:"promo"===this.model.get("type"),gameType:e,one_up:1===this.numObjects,two_up:2===this.numObjects,suggested:this.model.get("suggested"),player_id:this.player_id},this.options.ads.helpers(this.model.toJSON()),this.model);this.$el.html(this.template.render(a,this.ctx_additions())).toggleClass("cds",!!this.options.cds&&!this.options.ads.showCDSAds())},resize:function(){this.options.ads.restore()},getGameData:function(e){var t=e.get("data");if(o.each(t,function(e){e.isConsole&&e.thumb_4x3&&(e.thumb_data={src:e.thumb_4x3},e.entity_config.aspect_ratio="4x3")}),!r.flash&&r.canvas){var i=[],a=[];o.each(t,function(e){e.compatibility_flags&&(o.contains(e.compatibility_flags,"html5")||o.contains(e.compatibility_flags,"mobile"))?i.push(e):a.push(e)}),t=i.concat(a)}return t}});l.register("sidekick_one_up",{style_classes:["sidekick","list_module_featured"]}),l.register("sidekick_two_up",{numObjects:2}),l.register("sidekick_featured",{sidekick_asset_override:!0}),l.register("sidekick_video",{assets:{scripts:["//a.dilcdn.com/a/videoplayer-cd2ca21be539.js"]},template:s.modules.sidekick_video,breakpoints:n,initialize:function(){this.player_id="player_sidekick"+this.model.get("ref").replace("-","")},ready:function(){var e=o.first(this.model.get("data")),t=this.model.get("autoplay")?!0:!1;this.player=new i.MatterhornVideoPlayer(this.player_id,{video:e,autoPlay:t,clickToPlay:!0,showTitle:!0,ads:{enabled:!this.options.cds&&!this.options.noAds,context:this.options.ads},translations:this.model.get("translations")})},remove:function(){this.player&&(this.player.destroy(),this.player=null),t.BunView.prototype.remove.call(this)}})}(this),Whiskers("modules.slider",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b(' <div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.s(a.f("peeking",e,t,1),e,t,1,0,0,"")||a.b(" no-peek"),a.b('"> '),a.s(a.d("style_options.overlay_styles",e,t,1),e,t,0,188,222,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="module_overlay"></div>')}),e.pop()),a.b(" "),a.s(a.f("header_data",e,t,1),e,t,0,272,290,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(" "),a.b(' <div class="slides peek-'),a.b(a.v(a.f("rpp",e,t,0))),a.b(" "),a.s(a.d("header_data.icon_type",e,t,1),e,t,0,384,414,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("icon-"),i.b(i.v(i.d("header_data.icon_type",e,t,0)))}),e.pop()),a.b('"> <ol class="slider-list peek-'),a.b(a.v(a.f("rpp",e,t,0))),a.b('"> '),a.s(a.f("pages",e,t,1),e,t,0,491,739,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li class="slider-page"> <ul class="col-container cols-'),i.b(i.v(i.f("cols",e,t,0))),i.b(" rows-"),i.b(i.v(i.f("rows",e,t,0))),i.b('"> '),i.s(i.f("models",e,t,1),e,t,0,583,715,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li class="col item'),i.s(i.f("widthClass",e,t,1),e,t,0,618,633,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(i.v(i.f("widthClass",e,t,0)))}),e.pop()),i.s(i.f("hidden",e,t,1),e,t,0,659,673,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" lazy-deferred")}),e.pop()),i.b('"> '),i.b(i.rp("<entity_container1",e,t,"")),i.b(" </li> ")}),e.pop()),i.b(" </ul> </li> ")}),e.pop()),a.b(' </ol> <div class="peek"></div> '),a.b(" </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<entity_container1":{name:"entity_container",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=e.Backbone,n=e.Whiskers,r=e.jQuery,s=e._,o=e.EventLinkHandler,l=i.Style.breakpoints,c=i.Style.custom_breakpoints,d=s.values(l),u=a.Resize.width,h=e.SwipeView=t.ModuleView.extend({style_classes:["slider-view","pagination-styles"],required_template_sets:["module_header","entities"],breakpoints:d.join(" "),template:n.modules.slider,events:{slide:function(e,t){e.preventDefault();var i=this;this.$(".slides").toggleClass("peeking",t!==i.model.data.lastIndex(this.rpp()));var a=this.rpp()*(t+1),n=this.cols(),o=a+n,l=s.first(this.model.data.models,o);if(this.$pages&&t>0){var c=r(this.$pages[t]).find(".item"),d=r(this.$pages[t+1]).find(".item").slice(0,this.rows()),u=c.add(d);u.enableLazyLoad().loadLazyImages()}s.each(l,function(e){var t=e.get("thumb_data");e.set({hidden:!1,preloaded:!0,preloaded_src:t&&t.src})})},"click [data-event-link]":function(e){e.preventDefault(),o.handle(e)}},initialize:function(){var e=this.model,t=new a.LazySliderCollection(e.data.models);this.model.data=t,s.extend(this,{entity_type:s.first(t.models).get("entity_type")||e.get("type"),lastPage:0,startingCount:this.index=t.startingIndex,slideTime:500,init:!1}),this.needsGuestContext()&&this.options.guest.retain(),this.configureData&&this.configureData()},destroy:function(){this.needsGuestContext()&&this.options.guest&&this.options.guest.release()},rightPeek:function(){return.25/Math.sqrt(this.rpp()/.3)},wide:function(){return u()>=l.midHigh},render:function(){var e=this,t=e.model,i=e.cols(),a=e.rows(),n=t.data,r=e.rpp(),o=n.peeking?n.peeking(r):!1;if(this.formatFeatured&&this.formatFeatured(),n){var l=s.extend({rpp:r,cols:i,rows:a,peeking:o,entity_type:e.entity_type,seeAll:t.get("seeAll"),pages:n.page(this.index,r,a,i)},e.options.ads.helpers(),this.model);e.length=l.pages.length,e.$el.html(e.template.render(l,this.ctx_additions()))}},ready:function(){this.init=!0,this.$(".slides ol").swipeasaurus({arrows:!0,loop:!1,right:this.rightPeek(),index:this.index,speed:this.slideTime,rtl:i.rtl}),this.init=!1,this.$pages=this.$(".slides ol > li")},resize:function(){this.render(),this.ready()},rows:function(){var e=this.model.get("config_options")||{};return e.num_rows||1},rpp:function(){return this.cols()*this.rows()},cols:function(){var e=u(),t=this.wide(),i=s.first(this.model.get("data")),a=i.entity_config&&i.entity_config.aspect_ratio;if(this.model.get("style_options").items_per_row_override&&t)return this.model.get("style_options").items_per_row_override;switch(a){case"poster":case"dvd_case":case"letter":return t?4:e>=l.midLow?3:2;case"baseball_card":return e>=l.max?5:t?4:e>=l.midLow?3:2;case"square":return e>=l.max?4:t?3:2;case"16x9":case"4x3":return t?3:e>=l.midLow?2:1;case"widescreen":return e>=l.midHigh?2:1;default:return t?3:2}}});h.register("slider",{additional_components:{module_bg_style:n.partials.module_background_styles}}),h.register("grid",{peeking:function(){return!1},rows:function(){return 2}}),h.register("characters",{cols:function(){var e=u(),t=this.wide();return e>=l.max?5:t?4:e>=l.midLow?3:2}}),h.register("slider_rfy",{cols:function(){var e=this.wide();return this.model.get("style_options").items_per_row_override&&e?this.model.get("style_options").items_per_row_override:e?3:2},initialize:function(){s.extend(this,{entityType:"video",index:0,lastPage:0,startingCount:this.loadedPages=1,slideTime:500,init:!1}),this.$el.addClass("temp-hidden"),this.fetchData()},fetchData:function(){var e=this,t=i.Recommender,n=this.model,r=n.get("data")[0];t.getRecommendations(r).done(function(t){var i=new a.Collection(t);n.data=new a.LazySliderCollection(i.models),e.render(),e.ready(),e.$el.removeClass("temp-hidden").loadLazyImages()})}}),h.register("featured_promo_slider",{numFeatured:1,configureData:function(){var t=this.model,i=t.data,n=this.numFeatured,r=this.placeholders=[],o=e.state;if(e.state){s.each(i.models,function(e){var t=e.get("location"),i=t&&t.toLowerCase();e.set("inState",i===o)});var l=i.where({inState:!0});i.remove(l),i.add(l,{at:0})}s.each(i.models,function(e,t){if(n>t){var i=new a.Model;i.set("widthClass","empty_placeholder"),r.push(i),e.set("widthClass","featured"),e.set("featured",!0)}})},formatFeatured:function(){var e=this.model,t=e.data,i=this.placeholders,a=this.wide();s.each(t.models,function(e){e.get("featured")&&a?e.set("thumb_data",{src:e.get("promo_featured")}):e.set("thumb_data",{src:e.get("promo")})}),a?t.add(i,{at:1}):t.remove(i)},cols:function(){return this.wide()?4:2}}),h.register("junior_nav_slider",{breakpoints:[l.max,l.midHigh,c.juniorNavMin].join(" "),cols:function(){var e=u();return e>=l.max?6:e>=l.midHigh?5:e>=c.juniorNavMin?4:3},rightPeek:function(){return.25/Math.sqrt(this.rpp()/.2)}})}(this),Whiskers("modules.slider_masonry",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b(' <div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.b('"> '),a.s(a.d("style.overlay_styles",e,t,1),e,t,0,140,174,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="module_overlay"></div>')}),e.pop()),a.b(" "),a.s(a.f("header_data",e,t,1),e,t,0,216,234,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(" "),a.b(' <div class="slides '),a.s(a.d("header_data.icon_type",e,t,1),e,t,0,315,346,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("icon-"),i.b(i.v(i.d("header_data.icon_type",e,t,0))),i.b(" ")}),e.pop()),a.b(" "),a.s(a.d("header_data.button_icon_type",e,t,1),e,t,0,406,451,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("button-icon-"),i.b(i.v(i.d("header_data.button_icon_type",e,t,0))),i.b(" ")}),e.pop()),a.b('"> <ol class="slider-list rows-'),a.b(a.v(a.f("numRows",e,t,0))),a.b('"> '),a.s(a.f("pages",e,t,1),e,t,0,539,1273,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li class="slider-page"> '),i.s(i.f("prop_video",e,t,1),e,t,0,580,820,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <video class="prop-image transparent" src="'),i.b(i.v(i.f("prop_video",e,t,0))),i.b('" '),i.s(i.f("mobile",e,t,1),e,t,0,651,666,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('controls="true"')}),e.pop()),i.b(" "),i.s(i.f("mobile",e,t,1),e,t,1,0,0,"")||i.b('autoplay="true"'),i.b(' poster="'),i.b(i.v(i.d("prop_image.desktop",e,t,0))),i.b('" type="video/mp4" '),i.s(i.f("prop_video_loop",e,t,1),e,t,0,785,796,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('loop="true"')}),e.pop()),i.b(" /> ")}),e.pop()),i.b(" "),i.s(i.f("prop_video",e,t,1),e,t,1,0,0,"")||i.s(i.f("prop_image",e,t,1),e,t,0,866,922,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <img class="prop-image transparent" src="'),i.b(i.v(i.f("desktop",e,t,0))),i.b('"> ')}),e.pop()),i.b(' <ul class="slider-rows rows-'),i.b(i.v(i.f("numRows",e,t,0))),i.b(" "),i.s(i.f("prop_image",e,t,1),e,t,0,1008,1022,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("has-prop-image")}),e.pop()),i.b('"> '),i.s(i.f("rows",e,t,1),e,t,0,1049,1251,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li class="row"> <ul class="col-container"> '),i.s(i.f("items",e,t,1),e,t,0,1104,1228,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li class="col item '),i.s(i.f("hidden",e,t,1),e,t,0,1136,1149,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("lazy-deferred")}),e.pop()),i.b(" ratio-"),i.b(i.v(i.d("entity_config.aspect_ratio",e,t,0))),i.b('"> '),i.b(i.rp("<entity_container1",e,t,"")),i.b(" </li> ")}),e.pop()),i.b(" </ul> </li> ")}),e.pop()),i.b(" </ul> </li> ")}),e.pop()),a.b(' </ol> <div class="peek"></div> '),a.b(" </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<entity_container1":{name:"entity_container",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Backbone,i=e.Disney,a=e._,n=i.Style.ratios;t.LazyMasonryCollection=t.LazySliderCollection.extend({constructor:function(e,i){this.entityHeight=i.entityHeight,this.entityMargin=i.entityMargin,this.containerWidth=i.containerWidth,this.firstPageWidth=i.firstPageWidth||this.containerWidth,t.LazySliderCollection.call(this,e,i)},size:function(e){var t=e.get("entity_config")||{},i=t.aspect_ratio;return this.entityHeight/(n[i]||1)},rowIsFull:function(e,t){for(var i=0,a=0;a<e.length;a++)i+=this.size(e[a])+this.entityMargin;i+=this.size(t);var n=this.firstPage?this.firstPageWidth:this.containerWidth;return i>n&&e.length>0?!0:!1},pageIsFull:function(e,t){return e.length===+t?!0:!1},revealPage:function(e){a.each(e.rows,function(e){a.each(e.items,function(e){e&&e.set("hidden",!1)})})},pages:function(e){var t=[],i=[],a=[];this.firstPage=!0;for(var n=0;n<this.length;n++){var r=this.models[n];this.rowIsFull(a,r)&&(i.push({items:a}),a=[],this.pageIsFull(i,e)&&(t.push({rows:i}),i=[],this.firstPage=!1)),a.push(this.models[n])}return a.length>0&&(i.push({items:a}),t.push({rows:i})),t},page:function(e,t){var i=this.pages(t),a=i[e]||{},n=i[e+1]||{};return this.revealPage(a),this.revealPage(n),i}})}(this),function(e){"use strict";function t(e,t,i){var a=r.rtl?"marginLeft":"marginRight",n=e.parent(),s=n.parent(),o=s.find(".prop-image"),c=l(e.children()[0]),d=n.width(),u=+c.css(a).slice(0,-2)||t,h=o.width()>0&&2>i?o.width()+u:0,f=+s.css("paddingLeft").slice(0,-2)+ +s.css("paddingRight").slice(0,-2),p=l.map(e.find(".item"),function(e){return l(e).width()+ +l(e).css(a).slice(0,-2)}).reduce(function(e,t){return e+t},0);return d-p-h-u+f}function i(e,i,a,n){var s=r.rtl?1:-1,o=d.Resize.width()>h.midLow?m:g,l=t(e,o,n)+a;
return i.css("transform","translate3d("+s*l+"px, 0, 0)"),i.css("webkitTransform","translate3d("+s*l+"px, 0, 0)"),l}function a(e,i,a,n){var s=r.rtl?-1:1,o=d.Resize.width()>h.midLow?m:g,l=a;l+=t(i,o,n),i.css("transform","translate3d("+s*l+"px, 0, 0)"),i.css("webkitTransform","translate3d("+s*l+"px, 0, 0)"),l+=t(e,o,n),e.css("transform","translate3d("+s*l+"px, 0, 0)"),e.css("webkitTransform","translate3d("+s*l+"px, 0, 0)")}function n(e,t,a,r){var s=l(e[t]).find(".row"),o=l(e[t+1]).find(".row");r=r||0,a=a||[],l.each(s,function(e,t){var n=a[e]||0;o[e]&&(a[e]=i(l(t),l(o[e]),n,e))}),e[t+1]&&3>r&&n(e,t+1,a,r+1)}var r=e.Disney,s=e.Whiskers,o=e.Grill,l=e.jQuery,c=e._,d=e.Backbone,u=e.Modernizr,h=r.Style.breakpoints,f=e.setTimeout,p=e.clearTimeout,m=20,g=15,v=r.Style.ratios,b=e.SwipeView.extend({style_classes:["slider","slider-view","pagination-styles"],template:s.modules.slider_masonry,additional_components:{module_bg_style:s.partials.module_background_styles},events:{slide:function(e,t){var i=this.$pages,r=l(i[t]),s=r.find(".row"),o=i.find(".prop-image"),c=l(i[t+1]),d=c.find(".row"),u=l(i[t-1]),h=u.find(".row"),f=this.$slider,p=r.find(".prop-image").length>0,m=this.rightPeek();f.addClass("animating"),p?o.removeClass("transparent"):o.addClass("transparent"),l.each(s,function(e,t){l(t).removeClass("transparent"),l(t).css("transform","translate3d(0, 0, 0)"),l(t).css("webkitTransform","translate3d(0, 0, 0)")}),n(i,t),l.each(h,function(e,t){l(t).addClass("transparent")}),d.length!==s.length&&l.each(s,function(e,t){if(!d[e]&&h[e]){var i=f.width()*m;a(l(h[e]),l(t),i,e),l(h[e]).removeClass("transparent")}}),this.$(".slides").toggleClass("peeking",t!==this.$pages.length-1)},slideEnd:function(e,t){for(var i=function(e){l(e).enableLazyLoad().loadLazyImages()},a=0;3>a;a++){var n=l(this.$pages[t+a]).find(".item");c.each(n,i)}this.$slider.removeClass("animating")}},initialize:function(){var t=this,i=0;t.lastWidth=d.Resize.width(),l(e).on("resize."+this.cid,function(){p(i),i=f(function(){var e=d.Resize.width();e!==t.lastWidth&&(t.lastWidth=e,t.ready())},250)})},ready:function(){var e=this.$slider=this.$(".slides ol"),t=d.Resize.width(),i=t>h.midLow,a=200,n=165,r=484,s=r/v.dvd_case,o=i?a:n,l=i?m:g,c=e.width()*(1-this.rightPeek()),u=i?c-s-l:c,f=new d.LazyMasonryCollection(this.model.data.models,{containerWidth:c,entityMargin:l,entityHeight:o,firstPageWidth:u});return this.$pages=e.find(".slider-page"),this.firstPageWidth=u,this.model.data=f,this.renderMasonry(),!0},render:function(){var e=this,t=e.model,i=e.rows();e.ctx=c.extend({numRows:i,peeking:!0,seeAll:t.get("seeAll"),pages:[]},e.options.ads.helpers(),t),e.length=e.ctx.pages.length,e.$el.html(e.template.render(e.ctx,e.ctx_additions()))},renderMasonry:function(){var e=this,t=e.model.data,i=d.Resize.width(),a=e.model.get("style_options")||{},s=a.prop_image||{},o=a.prop_video||null,f=s.desktop&&i>h.midLow,p=o&&i>h.midLow,m=!!a.prop_video_loop;e.ctx.pages=t.page(0,e.ctx.numRows),f&&c.extend(e.ctx.pages[0],{prop_image:s}),p&&c.extend(e.ctx.pages[0],{prop_video:o,prop_video_loop:m,mobile:u.mobile}),e.length=e.ctx.pages.length,e.$el.html(e.template.render(e.ctx,e.ctx_additions())),e.$slider=e.$(".slides ol"),e.$pages=e.$slider.find(".slider-page"),e.$(".slides ol").swipeasaurus({arrows:!0,loop:!1,right:this.rightPeek(),index:0,speed:300,rtl:r.rtl}),f&&l(this.$pages[0]).find(".row").css("width",e.firstPageWidth),n(e.$pages,0)},remove:function(){o.ModuleView.prototype.remove.call(this),l(e).off("resize."+this.cid)}});b.register("slider_masonry")}(this),function(e){"use strict";var t,i,a,n,r,s,o,l,c=e.document,d=e.Grill,u=300,h=!1,f=[];d.ModuleView.register("snow",{ready:function(){if(e.requestAnimationFrame&&!(c.documentElement.clientWidth<1025)){for(t=this,a=c.querySelector("#takeover-area"),n=c.createElement("canvas"),n.id="snow",r=n.getContext("2d"),s=a.clientWidth,o=a.clientHeight,n.style.position="absolute",n.style.left=n.style.top="0",a.appendChild(n),i=0;u>i;i++)l=new p,l.reset(),f.push(l);e.addEventListener("resize",t.resize),t.resize()}},resize:function(){s=a.clientWidth,o=a.clientHeight,n.width=s,n.height=o,r.fillStyle="#fff";var i=h;h=s>1024,!i&&h&&e.requestAnimationFrame(t.update)},update:function(){if(r.clearRect(0,0,s,o),h){for(i=0;u>i;i++)l=f[i],l.y+=l.vy,l.x+=l.vx,r.globalAlpha=l.o,r.beginPath(),r.arc(l.x,l.y,l.r,0,2*Math.PI,!1),r.closePath(),r.fill(),l.y>o&&l.reset();e.requestAnimationFrame(t.update)}}});var p=function(){this.x=0,this.y=0,this.vy=0,this.vx=0,this.r=0,this.reset()};p.prototype.reset=function(){this.x=Math.random()*s,this.y=Math.random()*-o,this.vy=1+3*Math.random(),this.vx=.5-Math.random(),this.r=1+2*Math.random(),this.o=.5+.5*Math.random()},c.addEventListener("DOMContentLoaded",function(){e.Disney.top.on("begin",function(){c.querySelector("#snow")&&a.removeChild(n)})})}(this),Whiskers("modules.social_links",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("style_options",e,t,1),e,t,0,18,157,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <style type="text/css"> '),i.s(i.f("text_color",e,t,1),e,t,0,58,132,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .social-links-container .visit_us{ color: "),i.b(i.v(i.f("text_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" </style> ")}),e.pop()),a.b(' <div class="bound"> <div class="social-links-container"> <p class="visit_us">'),a.b(a.v(a.f("title",e,t,0))),a.b("</p> <ul> "),a.s(a.f("data",e,t,1),e,t,0,281,643,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li> <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" '),i.b(i.rp("<href_attributes0",e,t,"")),i.b("> "),i.s(i.f("thumb_data",e,t,1),e,t,0,343,616,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,357,392,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<img src="'),i.b(i.v(i.f("src",e,t,0))),i.b('" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('">')}),e.pop()),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b(' <img class="no-src" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('" data-src="'),i.b(i.v(i.f("src",e,t,0))),i.s(i.f("retina",e,t,1),e,t,1,0,0,"")||i.s(i.f("half_width",e,t,1),e,t,0,499,520,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("&width="),i.b(i.v(i.f("half_width",e,t,0)))}),e.pop()),i.b('" '),i.s(i.f("half_width",e,t,1),e,t,0,563,585,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('width="'),i.b(i.v(i.f("half_width",e,t,0))),i.b('"')}),e.pop()),i.b("> ")),i.b(" ")}),e.pop()),i.b(" </a> </li> ")}),e.pop()),a.b(" </ul> </div> </div>"),a.fl()},partials:{"<href_attributes0":{name:"href_attributes",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e._,n=e.devicePixelRatio>1.5;t.ModuleView.register("social_links",{template:i.modules.social_links,required_template_sets:["links"],render:function(){var e=a.extend({retina:n},this.model);this.$el.html(this.template.render(e,this.ctx_additions()))}})}(this),Whiskers("modules.songs.songs_desktop",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> '),a.s(a.f("header_data",e,t,1),e,t,0,36,54,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class = "container"> <div class = "label-container"> <p>Request</p> <div class="right"> '),a.s(a.d("config_options.hide_video_column",e,t,1),e,t,1,0,0,"")||a.b(" <p>Video</p> "),a.b(" "),a.s(a.d("config_options.hide_purchase_column",e,t,1),e,t,1,0,0,"")||a.b(" <p>Purchase</p> "),a.b(' </div> </div> <div class = "track-container"> <ul> '),a.s(a.f("data",e,t,1),e,t,0,411,1409,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li class="song"> <a class = "like-icon clicon" data-likeinfo="request-'),i.b(i.v(i.f("title",e,t,0))),i.b("-"),i.b(i.v(i.f("artist",e,t,0))),i.b('"></a> <span class = "number"></span> <div class = "track-title"> <div class="song-title">'),i.b(i.v(i.f("title",e,t,0))),i.b('</div> <div class = "artist">'),i.b(i.v(i.f("artist",e,t,0))),i.b('</div> </div> <div class ="icon-container" data-buyaylitics = "'),i.b(i.v(i.f("title",e,t,0))),i.b("-"),i.b(i.v(i.f("artist",e,t,0))),i.b('"> '),i.s(i.d("config_options.hide_video_column",e,t,1),e,t,1,0,0,"")||(i.b(' <a class = "music-video '),i.s(i.f("watch_link",e,t,1),e,t,0,804,823,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("active hover clicon")}),e.pop()),i.b('" '),i.s(i.f("watch_link",e,t,1),e,t,0,855,878,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' href="'),i.b(i.v(i.f("watch_link",e,t,0))),i.b('" ')}),e.pop()),i.b("></a> ")),i.b(" "),i.s(i.d("config_options.hide_purchase_column",e,t,1),e,t,1,0,0,"")||(i.b(' <div class = "cart '),i.s(i.f("retail",e,t,1),e,t,0,1008,1027,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("active hover clicon")}),e.pop()),i.b('" '),i.s(i.f("retail",e,t,1),e,t,0,1051,1074,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('data-convert="buy_song"')}),e.pop()),i.b('> <div class="buy '),i.s(i.f("retail",e,t,1),e,t,1,0,0,"")||i.b("no_flyout"),i.b('"> <ul> '),i.s(i.f("retail",e,t,1),e,t,0,1153,1323,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("retail_links",e,t,1),e,t,0,1171,1305,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li class = "fly-li"><a href="'),i.b(i.v(i.f("content_url",e,t,0))),i.b('" target="_blank" data-purchase="external" data-retailer="'),i.b(i.v(i.f("title",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a></li> ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" </ul> </div> </div> ")),i.b(" </div> </li> ")}),e.pop()),a.b(" </ul> </div> </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),Whiskers("modules.songs.songs_mobile",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> '),a.s(a.f("header_data",e,t,1),e,t,0,36,54,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="container"> <div class="track-container"> <ul> '),a.s(a.f("data",e,t,1),e,t,0,139,1065,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li class="song"> <span class = "number"></span> <div class = "track-title"> <div class="song-title">'),i.b(i.v(i.f("title",e,t,0))),i.b('</div> <div class = "artist">'),i.b(i.v(i.f("artist",e,t,0))),i.b('</div> </div> <div class = "expand-icon clicon" data-expand="'),i.b(i.v(i.f("song",e,t,0))),i.b('"></div> <div class = "icon-container" data-buyaylitics = "'),i.b(i.v(i.f("title",e,t,0))),i.b("-"),i.b(i.v(i.f("artist",e,t,0))),i.b('"> <div class="inner"> <a class = "like-icon clicon" data-like="'),i.b(i.v(i.f("song",e,t,0))),i.b('" data-likeinfo="request-'),i.b(i.v(i.f("title",e,t,0))),i.b("-"),i.b(i.v(i.f("artist",e,t,0))),i.b('"></a> '),i.s(i.f("watch_link",e,t,1),e,t,0,576,679,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a class = "music-video active hover clicon" href = "'),i.b(i.v(i.f("watch_link",e,t,0))),i.b('" data-linkname="music-video"></a> ')}),e.pop()),i.b(" "),i.s(i.f("retail",e,t,1),e,t,0,706,984,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class = "cart active hover clicon" data-convert="buy_song"> <div class="buy"> <ul> '),i.s(i.f("retail_links",e,t,1),e,t,0,812,946,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li class = "fly-li"><a href="'),i.b(i.v(i.f("content_url",e,t,0))),i.b('" target="_blank" data-purchase="external" data-retailer="'),i.b(i.v(i.f("title",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a></li> ")}),e.pop()),i.b(" </ul> </div> </div> ")}),e.pop()),i.b(' <div class="close" data-close ="'),i.b(i.v(i.f("song",e,t,0))),i.b('"></div> </div> </div> </li> ')}),e.pop()),a.b(" </ul> </div> </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),function(e){"use strict";function t(t){s.mq("only all")&&(t.template=o(e.window).width()>=n.midHigh?c.songs_desktop:c.songs_mobile)}var i=e.Grill,a=e.Disney,n=a.Style.breakpoints,r=n.midHigh.toString(),s=e.Modernizr,o=e.jQuery,l=e._,c=e.Whiskers.modules.songs,d=0,u=i.ModuleView.extend({breakpoints:r,template:c.songs_desktop,required_template_sets:["module_header"],initialize:function(){d=o(e.window).width(),t(this)},render:function(){var e=0,t=l.extend({},this.model);this.$el.html(this.template.render(t,this.ctx_additions()));var i=this.$("span.number"),a=this.$("li.song");i.each(function(t,i){e++;var a=o(i);a.append(e)}),a.each(function(t,i){e++;var a=e%2,n=o(i);n.addClass(1===a?"odd":"even")})},events:{"click .like-icon":function(e){o(e.currentTarget).addClass("clicked")},"click .clicked":function(e){o(e.currentTarget).removeClass("clicked")},"click .cart":function(e){var t=o(e.target),i=t.children(".buy");t.context.className.match(/cart active hover/)&&t.addClass("clicon"),i.hasClass("active")?i.removeClass("active"):(this.$(".buy").removeClass("active"),i.addClass("active"))},"click .fly-li":function(e){o(e.currentTarget).closest("div.cart").removeClass("clicon")},"click .expand-icon":function(e){var t=o(e.currentTarget.nextElementSibling);this.$(".buy").removeClass("active"),this.$(".icon-container.open").removeClass("open"),t.toggleClass("open")},"click .close":function(){this.$(".buy").removeClass("active"),this.$(".icon-container.open").removeClass("open")}},resize:function(){t(this),this.render()}});u.register("songs",{})}(this),Whiskers("modules.storybook",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("story",e,t,1),e,t,0,10,2707,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div id="story-container" class="reading '),i.s(i.f("noCover",e,t,1),e,t,1,0,0,"")||i.b(" start-page"),i.s(i.f("noAudio",e,t,1),e,t,0,99,108,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" no-audio")}),e.pop()),i.b('"> <div class="artwork carousel"> <ul id="storybook-artwork"> '),i.s(i.f("panels",e,t,1),e,t,0,193,912,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("image",e,t,1),e,t,0,204,901,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <li> "),i.s(i.f("bg",e,t,1),e,t,0,217,363,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img data-src="'),i.b(i.v(i.f("bg",e,t,0))),i.b('" class="bg no-src">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,299,349,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("bg",e,t,0))),i.b('" class="bg"></noscript>')}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("mid",e,t,1),e,t,0,379,527,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img data-src="'),i.b(i.v(i.f("mid",e,t,0))),i.b('" class="bg no-src">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,462,513,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("mid",e,t,0))),i.b('" class="bg"></noscript>')}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("fg",e,t,1),e,t,0,543,689,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img data-src="'),i.b(i.v(i.f("fg",e,t,0))),i.b('" class="bg no-src">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,625,675,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img src="'),i.b(i.v(i.f("fg",e,t,0))),i.b('" class="bg"></noscript>')}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("ambient_sound",e,t,1),e,t,0,715,876,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <audio id="ambient-loop" preload loop> '),i.s(i.f("mp3",e,t,1),e,t,0,763,802,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<source src="'),i.b(i.v(i.f("mp3",e,t,0))),i.b('" type="audio/mp3">')}),e.pop()),i.b(" "),i.s(i.f("ogg",e,t,1),e,t,0,819,858,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<source src="'),i.b(i.v(i.f("ogg",e,t,0))),i.b('" type="audio/ogg">')}),e.pop()),i.b(" </audio> ")}),e.pop()),i.b(" </li> ")}),e.pop()),i.b(" ")}),e.pop()),i.b(' </ul> <div class="fade"></div> </div> <div class="narrative carousel"> <ul id="storybook-narrative"> '),i.s(i.f("text",e,t,1),e,t,0,1034,2089,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <li> "),i.s(i.f("startPage",e,t,1),e,t,1,0,0,"")||i.s(i.f("buyButton",e,t,1),e,t,1,0,0,"")||(i.b("<p>"),i.b(i.v(i.f("text",e,t,0))),i.b("</p>")),i.b(" "),i.s(i.f("startPage",e,t,1),e,t,0,1126,1429,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="start-buttons"> <div id="read" class="large blue button start-button">'),i.b(i.v(i.d("translations.read",e,t,0))),i.b('</div> <div id="listen" class="large green button start-button">'),i.b(i.v(i.d("translations.listen",e,t,0))),i.b('</div> <div id="read-without-audio" class="large green button start-button">'),i.b(i.v(i.d("translations.begin",e,t,0))),i.b("</div> </div> ")}),e.pop()),i.b(" "),i.s(i.f("buyButton",e,t,1),e,t,0,1458,2068,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="end '),i.s(i.f("identity",e,t,1),e,t,1,0,0,"")||i.b("no-association"),i.b('"> <div class="end-block left"> <span class="replay small silver button">'),i.b(i.v(i.d("translations.read_again",e,t,0))),i.b('</span> <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('"><span class="purchase small green button">'),i.b(i.v(i.f("text",e,t,0))),i.b("</span></a> </div> "),i.s(i.f("identity",e,t,1),e,t,0,1723,2047,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="end-block right"> <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('"> <span class="visit"> '),i.s(i.f("image",e,t,1),e,t,0,1804,1970,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="portrait no-src" data-src="'),i.b(i.v(i.f("retina",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,1896,1956,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img class="portrait" src="'),i.b(i.v(i.f("retina",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(" ")}),e.pop()),i.b(" <span>"),i.b(i.v(i.d("translations.visit",e,t,0))),i.b(" "),i.b(i.v(i.f("title",e,t,0))),i.b("</span> </span> </a> </div> ")}),e.pop()),i.b(" </div> ")}),e.pop()),i.b(" </li> ")}),e.pop()),i.b(" </ul> </div> "),i.s(i.f("audio",e,t,1),e,t,0,2122,2480,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("narration",e,t,1),e,t,0,2137,2287,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<audio id="narrative-sprite"> '),i.s(i.f("mp3",e,t,1),e,t,0,2175,2214,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<source src="'),i.b(i.v(i.f("mp3",e,t,0))),i.b('" type="audio/mp3">')}),e.pop()),i.b(" "),i.s(i.f("ogg",e,t,1),e,t,0,2231,2270,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<source src="'),i.b(i.v(i.f("ogg",e,t,0))),i.b('" type="audio/ogg">')}),e.pop()),i.b(" </audio>")}),e.pop()),i.b(" "),i.s(i.f("music",e,t,1),e,t,0,2312,2469,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<audio id="music-loop" preload loop> '),i.s(i.f("mp3",e,t,1),e,t,0,2357,2396,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<source src="'),i.b(i.v(i.f("mp3",e,t,0))),i.b('" type="audio/mp3">')}),e.pop()),i.b(" "),i.s(i.f("ogg",e,t,1),e,t,0,2413,2452,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<source src="'),i.b(i.v(i.f("ogg",e,t,0))),i.b('" type="audio/ogg">')}),e.pop()),i.b(" </audio>")}),e.pop()),i.b(" ")}),e.pop()),i.b(' <div id="storybook-counter"> <div class="page-count"><span class="current-count"></span> '),i.b(i.v(i.d("translations.of",e,t,0))),i.b(' <span class="total-count"></span></div> </div> '),i.s(i.f("noAudio",e,t,1),e,t,1,0,0,"")||i.b('<div id="mute-button"></div>'),i.b(" </div> ")}),e.pop()),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e.Disney,n=e.Modernizr,r=e.Tracker,s=e.jQuery,o=e._,l=a.Style.breakpoints,c=o.values(l);t.ModuleView.register("storybook",{breakpoints:c.join(" "),style_classes:["skip-top-border"],template:i.modules.storybook,story:{},textData:[],book:void 0,audInProgress:!1,narrationAudio:void 0,musicAudio:void 0,ambientAudio:void 0,currTextIndex:0,end:0,muted:!0,keyEvents:!1,fadeInIntervals:{ambient:[],music:[],narration:[]},fadeOutIntervals:{ambient:[],music:[],narration:[]},narrativeTimeouts:[],pulseInterval:void 0,timeCheckInterval:void 0,startTimeout:void 0,replayTimeout:void 0,touchDevice:n.touch,blinkArrow:function(t){var i=this;t?(s(".next").addClass("turn-page"),i.pulseInterval=e.setInterval(function(){s(".next").toggleClass("pulse")},1e3)):(e.clearInterval(i.pulseInterval),i.pulseInterval=null,s(".next").removeClass("turn-page pulse"))},stopAndReset:function(e,t){var i=this;e&&(t&&!i.touchDevice?i.fadeOut(["narration"],200):(e.pause(),i.audInProgress=!1)),s(".next, .prev").removeClass("playing")},fadeIn:function(t,i){var a=this;s.each(t,function(t,n){var r=a[n+"Audio"];if(r){r.volume=0,r.play();var s=a.currTextIndex;a.fadeInIntervals[n][s]=e.setInterval(function(){r&&r.volume<1-20/i?r.volume+=20/i:(r&&(r.volume=1),e.clearInterval(a.fadeInIntervals[n][s]),a.fadeInIntervals[n][s]=null)},20)}})},fadeOut:function(t,i){var a=this;s.each(t,function(t,n){var r=a[n+"Audio"];if(r){var s=a.currTextIndex;a.fadeOutIntervals[n][s]=e.setInterval(function(){r&&r.volume>20/i?r.volume-=20/i:(r&&(r.volume=0,r.pause(),a.audInProgress=!1),e.clearInterval(a.fadeOutIntervals[n][s]),a.fadeOutIntervals[n][s]=null)},20)}})},playNarrative:function(t){var i=this,a=i.$("#storybook-narrative");i.textData[t].audio&&(i.narrationAudio.currentTime=i.textData[t].audio.startTime,i.end=i.textData[t].audio.endTime,i.narrationAudio.volume=1,i.narrationAudio.play(),s(".next, .prev").addClass("playing"),i.audInProgress=!0,i.timeCheckInterval=e.setInterval(function(){i.audInProgress&&i.narrationAudio.currentTime>i.end&&t+1<i.textData.length&&(i.stopAndReset(i.narrationAudio,!0),e.clearInterval(i.timeCheckInterval),i.timeCheckInterval=null,0===i.currTextIndex?(e.setTimeout(function(){a.swipeasaurus("next")},1500),i.blinkArrow(!1)):i.blinkArrow(!0))},10))},setBlankPage:function(e,t){var i=this;e?(s("#story-container").addClass("start-page reading"),s(".start-buttons").fadeIn("fast"),i.keyEvents=!1,s("#storybook-counter",i.$el).css("opacity","0"),t||(s("#story-container").removeClass("started listening"),s("#mute-button").removeClass("muted").attr("style",""),i.musicAudio&&1===i.currTextIndex&&i.fadeOut(["music"],1e3),i.narrationAudio&&1===i.currTextIndex&&i.fadeOut(["narration"],500))):(s("#story-container").removeClass("start-page").addClass("started"),i.keyEvents=!0,s("#storybook-counter",i.$el).css("opacity","1"))},muteButtonPress:function(t){var i=this;t?(i.audInProgress=!1,i.stopAndReset(i.narrationAudio,!0),i.musicAudio&&i.fadeOut(["music","ambient"],800),s("#mute-button").addClass("muted"),i.timeCheckInterval&&e.clearInterval(i.timeCheckInterval),i.muted=!0):(i.playNarrative(i.currTextIndex),i.musicAudio&&i.fadeIn(["music","ambient"],400),s("#mute-button").removeClass("muted"),i.muted=!1)},render:function(){var e=this,t=e.model,i=o.first(t.get("data")),a=e.story,n=e.textData,r=this.model.get("translations"),l={read:"Read",listen:"Listen",begin:"Let's Begin!",visit:"Visit",read_again:"Read Again"};o.defaults(r,l),a=i,e.book=a.title,n.length=0,a.location=a.endcard.image.bg.split("/")[2]||"http://cdnvideo.dolimg.com",s.each(a.panels,function(t,i){i.text_blocks&&s.each(i.text_blocks,function(e,i){n.push({page:t+1,text:i.text,audio:i.audio})}),i.image&&(s.each(["bg","mid","fg"],function(e,t){i.image[t]&&(i.image[t]="http://"+a.location+i.image[t])}),s.each(["mp3","ogg"],function(e,t){i.image.ambient_sound&&i.image.ambient_sound[t]&&(i.image.ambient_sound[t]="http://"+a.location+i.image.ambient_sound[t])}),e.touchDevice&&(i.image.ambient_sound=null))}),a.cover&&(a.panels.splice(0,0,a.cover),n.splice(0,0,{text:" ",page:0,audio:a.cover.text_blocks[0].audio,startPage:!0})),a.endcard&&(a.panels.push(a.endcard),n.push({text:null,page:a.panels.length,audio:a.endcard.text_blocks[0].audio,buyButton:a.endcard.buyButton})),s.each(n,function(e,t){t.audio&&s.each(["startTime","endTime"],function(e,i){t.audio[i]&&t.audio[i].split(":").length>1?t.audio[i]=(60*parseFloat(t.audio[i].split(":")[0],10)+parseFloat(t.audio[i].split(":")[1],10)).toFixed(1):t.audio[i]&&(t.audio[i]=parseFloat(t.audio[i]))})}),a.text=n,e.touchDevice&&a.audio&&(a.audio.music=null),e.story=a;var c=o.extend(e.options.ads.helpers(),e.model,{story:a,noCover:a.cover?!1:!0,noAudio:null===a.audio,translations:r});e.$el.html(this.template.render(c),{}),e.$("#storybook-artwork").swipeasaurus(),e.$("#storybook-narrative").swipeasaurus({arrows:!0,loop:!1})},ready:function(){var t=this;t.narrationAudio=s("#narrative-sprite")[0],t.musicAudio=s("#music-loop")[0];var i=t.story,n=t.$("#storybook-artwork"),o=t.$("#storybook-narrative"),l=t.$("#story-container"),c=t.$("#storybook-counter .current-count"),d=t.$("#storybook-counter .total-count"),u=i.cover?n.children("li").length-1:n.children("li").length,h=t.textData;s("html").hasClass("no-media-query")&&l.addClass("no-audio"),i.cover?s("#storybook-counter").css("opacity",0):t.keyEvents=!0,c.text("1"),d.text(u),s(t.narrationAudio).on("ended",function(){s(".end").css("opacity",1),s("#mute-button").css("opacity",0),t.replayTimeout=e.setTimeout(function(){t.musicAudio&&t.fadeOut(["music"],2e3),t.ambientAudio&&t.fadeIn(["ambient"],2e3)},5e3),t.blinkArrow(!1),t.keyEvents=!1,t.stopAndReset(t.narrationAudio),t.audInProgress=!1}),n.on("slide",function(e,a){i.cover?0===a&&1===t.currTextIndex||a===u?t.setBlankPage(!0,a===u):1===a&&0===t.currTextIndex?(t.setBlankPage(!1,!1),c.text(a)):c.text(a):a===u-1?t.setBlankPage(!0,!0):c.text(a);var o=s(n.find("li")[a]).find("audio");o.length>0?(t.ambientAudio=o[0],t.muted||(t.ambientAudio.load(),s(t.ambientAudio).on("canplay",function(){t.fadeIn(["ambient"],2e3),s(t.ambientAudio).off("canplay")}))):t.ambientAudio=null,r.track({breadcrumbs:t.book,pageName:"dcom|pri|"+t.book+"|"+(a+1)})}),o.on("slide",function(a,r){var s;0!==r&&(e.clearTimeout(t.startTimeout),t.stopAndReset(t.narrationAudio,!0)),e.clearTimeout(t.narrativeTimeouts[t.currTextIndex]),t.narrativeTimeouts[t.currTextIndex]=null,t.timeCheckInterval&&e.clearInterval(t.timeCheckInterval),t.blinkArrow(!1),h[t.currTextIndex].page!==h[r].page?(t.ambientAudio&&t.fadeOut(["ambient"],500),n.swipeasaurus("slide",i.cover?h[r].page:h[r].page-1),s=t.ambientAudio?3e3:900):s=400,!t.muted&&h[r].audio&&l.hasClass("started")&&!l.hasClass("replay")&&(t.narrativeTimeouts[r]=e.setTimeout(function(){t.playNarrative(r)},s)),t.currTextIndex=r}),s("#mute-button").on("click",function(){t.muteButtonPress(s(this).hasClass("muted")?!1:!0)});var f=i.identity,p=t.model.collection.style,m=p&&p.takeover&&p.takeover.image||f&&f.takeover;a.Style.applyTakeoverStyles(m),s("#storybook-narrative .replay").click(function(){s(".end").attr("style",""),t.musicAudio&&t.fadeOut(["music"],2e3),t.ambientAudio&&t.fadeOut(["ambient"],2e3),i.cover?t.setBlankPage(!0,!1):t.setBlankPage(!1,!1),l.addClass("replay"),o.swipeasaurus("slide",0),r.link({linkName:"storybook",linkPosition:"storybook/button/replay"}),s("#mute-button").removeClass("muted")}),s(e.document).keydown(function(e){if(t.keyEvents){if(37===e.keyCode)return o.swipeasaurus("prev",0),!1;if(39===e.keyCode)return o.swipeasaurus("next",0),!1}}),t.resize(),s(".start-button").on("click",function(){t.currTextIndex=0,t.startTimeout=e.setTimeout(function(){s(".start-buttons").hide()},1500),e.clearInterval(t.fadeOutIntervals.music[h.length-1]),e.clearTimeout(t.replayTimeout),"listen"===s(this).attr("id")?(t.muted=!1,t.audInProgress=!1,l.removeClass("reading replay").addClass("listening started"),t.narrationAudio.readyState<3&&t.narrationAudio.load(),t.musicAudio?t.musicAudio.readyState>=3?(t.musicAudio.currentTime=0,t.fadeIn(["music"],300),e.setTimeout(function(){o.trigger("slide",0)},1500)):(t.musicAudio.load(),s(t.musicAudio).on("canplay",function(){t.fadeIn(["music"],300),s(t.musicAudio).off("canplay"),t.narrationAudio.readyState>=3?e.setTimeout(function(){o.trigger("slide",0)},1500):s(t.narrationAudio).on("canplay",function(){t.narrationAudio.volume=1,o.trigger("slide",0)})})):t.narrationAudio.readyState>2?o.trigger("slide",0):s(t.narrationAudio).on("canplay",function(){o.trigger("slide",0)}),r.link({linkName:"storybook",linkPosition:"storybook/button/listen"})):(t.muted=!0,t.musicAudio&&t.fadeOut(["music","ambient"],400),l.addClass("reading started").removeClass("start-page replay listening"),o.swipeasaurus("slide",1),t.keyEvents=!0,r.link({linkName:"storybook",linkPosition:"storybook/button/read"}))})},resize:function(){s("#storybook-narrative li p").css("top",function(){return(parseInt(s(this).parent().height(),10)-parseInt(s(this).outerHeight(),10))/2})}})}(this),Whiskers("modules.stream",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound '),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.s(a.f("singleRow",e,t,1),e,t,0,56,67,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" single-row")}),e.pop()),a.s(a.f("enablePeek",e,t,1),e,t,0,96,104,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" peeking")}),e.pop()),a.b('"> '),a.s(a.f("header_data",e,t,1),e,t,0,138,156,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(" "),a.b(a.t(a.f("list",e,t,0))),a.b(' <div class="show_more_container"> <div class="bottom-peek"></div> <div class="show_more blue button large" role="button" onclick=""> <span class="label">'),a.b(a.v(a.d("translations.show_more",e,t,0))),a.b('</span> <span class="spinner"></span> </div> </div> </div>'),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Disney,i=e.Grill,a=e.Backbone,n=e.Whiskers,r=e.Math,s=e._,o=e.EventLinkHandler,l=t.Style.breakpoints,c=s.values(l);i.GridModuleBaseView.register("stream",{style_classes:["stream-view","grid-view"],required_template_sets:["module_header"],breakpoints:c.join(" "),page:1,template:n.modules.stream,events:{"click .show_more":function(t){this.loadMoreThumbs(),this.has_revealed=!0,t.preventDefault(),this.fit(),e.Tracker&&e.Tracker.trackPagination(this.page)},"click [data-event-link]":function(e){e.preventDefault(),o.handle(e)}},initialize:function(){var e=this,i=this.model;if(this.initCollection(this.model.get("data")),this.entity_type=s.first(this.model.data.models).get("entity_type")||this.model.get("type"),this.has_revealed=!1,"recommendation"===this.entity_type){var a=s.first(i.get("data"));e.$el.hide(),t.Recommender.getRecommendations(a).done(function(t){e.initCollection(t),e.entity_type=s.first(t).entity_type,e.makeList(),e.render(),e.ready(),e.$el.show(),e.$el.loadLazyImages()})}else t.Recommender.track(this.model.toJSON().data),this.makeList();this.needsGuestContext()&&this.options.guest.retain()},destroy:function(){this.needsGuestContext()&&this.options.guest&&this.options.guest.release()},initCollection:function(e){this.allThumbs=e,this.visibleThumbs=this.allThumbs.slice(0,this.desired()),this.thumbCollection=new a.Collection(this.visibleThumbs),this.count=this.allThumbs.length},makeList:function(){var e=this;this.list=new i.ListView({collection:this.thumbCollection,template:{render:function(t){return s.extend(t,{translations:e.model.get("translations")}),n.entities.item.render(t,e.global_components.entities)}}})},updateView:function(){this.visibleThumbs=this.allThumbs.slice(0,this.desired()),this.list.collection.add(this.visibleThumbs)},loadMoreThumbs:function(){this.page++,this.updateView(),this.$el.loadLazyImages()},updateButton:function(){var e=this.model.get("enable_peek"),t=this.visibleThumbs.length<this.count;this.$(".col").hasClass("last-row")&&e||!e&&t?this.$el.addClass("has-more"):this.$el.removeClass("has-more")},desired:function(){return this.page*this.rows()*this.cols()},render:function(){var e=this.list,i=s.extend({entity_type:this.entity_type,list:t.placeHtml(e),enablePeek:this.model.get("enable_peek"),singleRow:this.count<=this.cols()},this.model);this.$el.html(this.template.render(i,this.ctx_additions())),t.placeSwap(this,e)},resize:function(){var e=this.cols(),t=e>1?"grid-layout":"list-layout";this.page=r.floor(this.visibleThumbs.length/this.rows()/e)||1,this.list&&this.list.$el.attr("class","col-container cols-"+e+" "+t),this.fit()},fit:function(){var e=this.desired();this.$(".col").removeClass("last-row"),e<this.count||!this.has_revealed?(this.updateView(),this.list.$el.children().removeClass("hidden").slice(e).addClass("hidden"),this.list.$el.children().slice(e-this.cols()).addClass("last-row")):this.list.$el.children().removeClass("hidden"),this.updateButton()},rows:function(){var e=a.Resize.width();switch(this.entity_type){case"game":return e<l.midHigh,4;case"personality":return e<l.midLow?3:2;default:return e<l.midLow?4:2}},ready:function(){this.list&&this.resize()}})}(this),/** @license MIT License (c) copyright 2011-2013 original author or authors */
function(e,t){"use strict";e(function(){function e(e,t,i,n){return a(e).then(t,i,n)}function i(e,t){this.then=e,this.inspect=t}function a(e){return s(function(t){t(e)})}function n(t){return e(t,c)}function r(){function e(e,r,s){t.resolve=t.resolver.resolve=function(t){return n?a(t):(n=!0,e(t),i)},t.reject=t.resolver.reject=function(e){return n?a(c(e)):(n=!0,r(e),i)},t.notify=t.resolver.notify=function(e){return s(e),e}}var t,i,n;return t={promise:F,resolve:F,reject:F,notify:F,resolver:{resolve:F,reject:F,notify:F}},t.promise=i=s(e),t}function s(e){function t(e,t,i){return s(function(a,n,r){f?f.push(function(s){s.then(e,t,i).then(a,n,r)}):A(function(){h.then(e,t,i).then(a,n,r)})})}function a(){return h?h.inspect():x()}function n(e){f&&(h=o(e),u(f,h),f=F)}function r(e){n(c(e))}function l(e){f&&u(f,d(e))}var h,f=[];try{e(n,r,l)}catch(p){r(p)}return new i(t,a)}function o(e){return e instanceof i?e:e===Object(e)&&"then"in e?s(function(t,i,a){A(function(){try{var n=e.then;"function"==typeof n?I(n,e,t,i,a):t(l(e))}catch(r){i(r)}})}):l(e)}function l(e){var t=new i(function(i){try{return"function"==typeof i?o(i(e)):t}catch(a){return c(a)}},function(){return w(e)});return t}function c(e){var t=new i(function(i,a){try{return"function"==typeof a?o(a(e)):t}catch(n){return c(n)}},function(){return _(e)});return t}function d(e){var t=new i(function(i,a,n){try{return"function"==typeof n?d(n(e)):t}catch(r){return d(r)}});return t}function u(e,t){A(function(){for(var i,a=0;i=e[a++];)i(t)})}function h(e){return e&&"function"==typeof e.then}function f(t,i,a,n,r){return e(t,function(t){function o(a,n,r){function s(e){f(e)}function o(e){h(e)}var l,c,d,u,h,f,p,m;if(p=t.length>>>0,l=Math.max(0,Math.min(i,p)),d=[],c=p-l+1,u=[],l)for(f=function(e){u.push(e),--c||(h=f=T,n(u))},h=function(e){d.push(e),--l||(h=f=T,a(d))},m=0;p>m;++m)m in t&&e(t[m],o,s,r);else a(d)}return s(o).then(a,n,r)})}function p(e,t,i,a){function n(e){return t?t(e[0]):e[0]}return f(e,1,n,i,a)}function m(e,t,i,a){return y(e,T).then(t,i,a)}function g(){return y(arguments,T)}function v(e){return y(e,w,_)}function b(e,t){return y(e,t)}function y(t,i,a){return e(t,function(t){function n(n,r,s){var o,l,c,d,u;if(c=l=t.length>>>0,o=[],!c)return void n(o);for(d=function(t,l){e(t,i,a).then(function(e){o[l]=e,--c||n(o)},r,s)},u=0;l>u;u++)u in t?d(t[u],u):--c}return s(n)})}function k(t,i){var a=I(E,arguments,1);return e(t,function(t){var n;return n=t.length,a[0]=function(t,a,r){return e(t,function(t){return e(a,function(e){return i(t,e,r,n)})})},P.apply(t,a)})}function w(e){return{state:"fulfilled",value:e}}function _(e){return{state:"rejected",reason:e}}function x(){return{state:"pending"}}function A(e){1===M.push(e)&&C()}function C(){L(S)}function S(){for(var e,t=0;e=M[t++];)e();M=[]}function T(e){return e}e.defer=r,e.resolve=a,e.reject=n,e.join=g,e.all=m,e.map=b,e.reduce=k,e.settle=v,e.any=p,e.some=f,e.isPromise=h,e.promise=s,i.prototype={otherwise:function(e){return this.then(F,e)},ensure:function(e){function t(){return a(e())}return this.then(t,t)["yield"](this)},"yield":function(e){return this.then(function(){return e})},spread:function(e){return this.then(function(t){return m(t,function(t){return e.apply(F,t)})})},always:function(e,t){return this.then(e,e,t)}};var P,E,I,L,M,D,R,O,B,F;return M=[],D=t.setTimeout,L="function"==typeof setImmediate?setImmediate.bind(t):"object"==typeof process&&process.nextTick?process.nextTick:"object"==typeof vertx?vertx.runOnLoop:function(e){D(e,0)},R=Function.prototype,O=R.call,I=R.bind?O.bind(O):function(e,t){return e.apply(t,E.call(arguments,2))},B=[],E=B.slice,P=B.reduce||function(e){var t,i,a,n,r;if(r=0,t=Object(this),n=t.length>>>0,i=arguments,i.length<=1)for(;;){if(r in t){a=t[r++];break}if(++r>=n)throw new TypeError}else a=i[1];for(;n>r;++r)r in t&&(a=e(a,t[r],r,t));return a},e})}(function(e){this.when=e()},this),Whiskers("modules.sweepstakes",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,384,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="bound'),i.s(i.f("noCode",e,t,1),e,t,0,38,46,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" no-code")}),e.pop()),i.b('"> <div class="container"> <div class="header module_header sweeps"> <h2>'),i.b(i.v(i.f("title",e,t,0))),i.b("</h2> </div> "),i.b(i.rp("<sweeps_code0",e,t,"")),i.b(" "),i.b(i.rp("<sweeps_tos1",e,t,"")),i.b(" "),i.b(i.rp("<sweeps_complete2",e,t,"")),i.b(' <div class="sweeps_error"></div> <div class="sweep_legal"> '),i.s(i.d("metadata.short_rules",e,t,1),e,t,0,290,321,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("<p>"),i.b(i.v(i.d("metadata.short_rules",e,t,0))),i.b("</p>")}),e.pop()),i.b(" "),i.b(i.t(i.f("rich_text",e,t,0))),i.b(" </div> </div> </div> ")}),e.pop()),a.fl()},partials:{"<sweeps_code0":{name:"sweeps_code",partials:{},subs:{}},"<sweeps_tos1":{name:"sweeps_tos",partials:{},subs:{}},"<sweeps_complete2":{name:"sweeps_complete",partials:{},subs:{}}},subs:{}}),Whiskers("partials.sweeps_code",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="sweeps_code"> <p class="sweep_desc">'),a.b(a.v(a.f("description",e,t,0))),a.b('</p> <div class="sweep_form"> <div class="denied_txt"> <span class="try_again">Try Again!</span> <span class="hint">Hint: '),a.s(a.f("metadata",e,t,1),e,t,0,198,223,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.v(i.f("codeword_hint_message",e,t,0)))}),e.pop()),a.b('</span> </div> <form> <input class="code_form" type="text" name="code" maxlength="20" required placeholder="Enter Codeword"></input> </form> <button class="button blue large code">Enter</button> </div> </div>'),a.fl()},partials:{},subs:{}}),Whiskers("partials.sweeps_tos",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="sweeps_tos"> <p class="terms">'),a.b(a.v(a.f("legal_text",e,t,0))),a.b('</p> <div class="sweep_form"> <div class="tos_check"> <p class="tos">I agree to the above Terms and Conditions</p> <span class="vote checkbox" title="'),a.b(a.v(a.f("text",e,t,0))),a.b('"> <span class="check"></span> </span> </div> <button type="submit" class="button blue large tos disabled">Enter</button> </div> </div>'),a.fl()},partials:{},subs:{}}),Whiskers("partials.sweeps_complete",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="sweeps_complete module_header"> <h2 class="sweep_desc complete">'),a.s(a.f("metadata",e,t,1),e,t,0,89,108,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.v(i.f("success_message",e,t,0)))}),e.pop()),a.b("</h2> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e.jQuery,o=e._,l=t.ModuleView.extend({breakpoints:n,template:r.modules.sweepstakes,sweeps_error:"",user_code:"",initialize:function(){this.options.guest.retain()},render:function(){var e=o.extend({},this.model);this.$el.html(this.template.render(e,{sweeps_tos:r.partials.sweeps_tos,sweeps_code:r.partials.sweeps_code,sweeps_complete:r.partials.sweeps_complete})),this.$el.polyfillPlaceholder()},codeWords:function(){var e=this,t=this.options.guest.login();t.then(function(){e.user_code=e.$("input.code_form").val();var t={sweeps_id:e.model.get("data")[0].sweep_id,entered_code:e.user_code};e.guestCanEnter()?(e.$("button.code").text("Verify..."),s.ajax({type:"POST",url:"/_sweeps/sweeps_code",processData:!1,data:JSON.stringify(t),contentType:"application/json",success:function(t){"false"===t?(e.$(".denied_txt").addClass("active"),e.$("button.code").text("Submit")):(e.$(".sweeps_code").remove(),e.$(".sweeps_tos").fadeIn(500))},error:function(){e.showError()}})):e.showError()})},checkboxChecking:function(){this.$(".checkbox").hasClass("checked")?(this.$(".button.tos").addClass("disabled").removeClass("compelte"),this.$(".checkbox").removeClass("checked")):(this.$(".button.tos").removeClass("disabled").addClass("compelte"),this.$(".checkbox").addClass("checked"))},sweepsTerms:function(){var e=this,t={sweeps_id:this.model.get("data")[0].sweep_id,disid:this.options.guest.current.profile.swid.replace("{","").replace("}",""),entered_code:e.user_code};this.$("button.tos").text("Verify..."),s.ajax({type:"POST",url:"/_sweeps/sweeps_info",processData:!1,data:JSON.stringify(t),contentType:"application/json",success:function(){e.$(".sweeps_complete").fadeIn(500),e.$(".container").addClass("finished"),e.$(".header.sweeps").css("visibility","hidden"),e.$(".sweeps_tos").remove()},error:function(t){409===t.status&&(e.sweeps_error="too_many"),e.showError()}})},events:{"click span.checkbox":"checkboxChecking","click .button.code":"codeWords","keypress .code_form":function(t){13===e.event.keyCode&&(this.codeWords(),t.preventDefault())},"click .button.tos.compelte":"sweepsTerms"},guestCanEnter:function(){var e=this,t=parseInt(e.model.get("data")[0].metadata.min_age,10)||0,i=parseInt(e.model.get("data")[0].metadata.max_age,10),a=new Date(e.options.guest.current.profile.dateOfBirth),n=new Date,r=new Date,s=i?new Date:null;return r.setFullYear(n.getFullYear()-t),s&&s.setFullYear(n.getFullYear()-i-1),a>r?(e.sweeps_error="min_age_gate",!1):s&&s>a?(e.sweeps_error="max_age_gate",!1):!0},showError:function(){var e,t=this;switch(t.sweeps_error){case"min_age_gate":e=t.model.get("data")[0].metadata.min_age_message;break;case"max_age_gate":e=t.model.get("data")[0].metadata.max_age_message;break;case"too_many":e="Maximum submissions exceeded. Please try again later.";break;default:e="There was an error entering the sweepstakes. Please try again."}e="<h2>"+e+"</h2>",t.$(".sweeps_code").remove(),t.$(".header.sweeps").css("visibility","hidden"),t.$(".sweeps_error").html(e).fadeIn(500)},destroy:function(){this.options.guest&&this.options.guest.release()}});l.register("sweepstakes",{})}(this),Whiskers("modules.header",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <div class="header module_header"> '),a.s(a.f("title",e,t,1),e,t,0,65,83,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("<h2>"),i.b(i.v(i.f("title",e,t,0))),i.b("</h2>")}),e.pop()),a.b(" "),a.s(a.f("desc",e,t,1),e,t,0,103,120,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("<h3>"),i.b(i.v(i.f("desc",e,t,0))),i.b("</h3>")}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e._,n=t.ModuleView.extend({style_classes:["full-height"],template:i.modules.header,render:function(){var e=a.first(this.model.get("data")),t=a.extend({data:e?e:null},this.model);this.$el.html(this.template.render(t))}});n.register("header",{})}(this),Whiskers("modules.trailer",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <div class="container"> '),a.s(a.f("data",e,t,1),e,t,0,53,999,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="video-container trailer-box '),i.s(i.d("style_options.full_width",e,t,1),e,t,0,123,133,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("full-width")}),e.pop()),i.b('"> <div class="scaler"></div> '),i.s(i.f("expired",e,t,1),e,t,1,0,0,"")||(i.b(' <div id="'),i.b(i.v(i.f("player_id",e,t,0))),i.b('" class="player video trailer-box"> <noscript> <div class="player_error">'),i.b(i.v(i.d("translations.no_javascript",e,t,0))),i.b("</div> </noscript> </div> ")),i.b(" "),i.s(i.f("expired",e,t,1),e,t,0,381,446,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="orphan"><p>'),i.b(i.v(i.d("translations.video_expired",e,t,0))),i.b("</p></div> ")}),e.pop()),i.b(' <div class="card embed"> <div class="card_header"> <p class="btn_replay skip-text-styles">'),i.b(i.v(i.d("translations.replay",e,t,0))),i.b('</p> <p class="btn_watch skip-text-styles">'),i.b(i.v(i.d("translations.watch_on",e,t,0))),i.b('</p> </div> <div class="suggested"> <ul> '),i.s(i.f("suggested",e,t,1),e,t,0,695,818,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(" <li>"),i.b(i.rp("<entity_container0",e,t,"")),i.b("</li> ")}),e.pop()),i.b(' </ul> </div> </div> </div> <div class="module_header details"> <h2><a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" title="'),i.b(i.v(i.f("title",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b('</a></h2> <p class="desc">'),i.b(i.v(i.f("description",e,t,0))),i.b("</p> </div> ")}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{"<entity_container0":{name:"entity_container",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Disney,i=t.Style.breakpoints,a=i.midHigh.toString(),n=e.Grill,r=e.Whiskers,s=e.$,o=e._;n.ModuleView.register("trailer",{breakpoints:a,template:r.modules.trailer,assets:{scripts:["//a.dilcdn.com/a/videoplayer-cd2ca21be539.js"]},initialize:function(){var t=this,i=this.model.get("style_options");i&&i.full_width&&(this.style_classes=["full-height","full-width"]),t.centerSuggested=o.throttle(function(){var i=t.$el.find(".card.embed .card_header"),a=t.$el.find(".card.embed ul"),n=a.find("li");if(s(e).width()<=1008){var r=(a.outerHeight()-i.outerHeight()-n.outerHeight())/2;a.css("margin-top",r>0?r:0)}else a.css("margin-top",4)},100),s(e).on("resize."+t.cid,t.centerSuggested),this.player_id="player_trailer"+this.model.get("ref").replace("-","")},render:function(){var e=o.extend({},this.options.ads.helpers(),this.model,{player_id:this.player_id});this.$el.html(this.template.render(e,{suggested:this.model.get("suggested"),item:r.entities.item,entity_container:r.entities.entity_container}))},ready:function(){this.$el.find(".card.embed .suggested li:nth-child(n+3)").addClass("li-nth-child-np3"),this.centerSuggested();var e=o.first(this.model.get("data")),i=this.model.get("autoplay")?!0:!1;this.player=new t.MatterhornVideoPlayer(this.player_id,{video:e,autoPlay:i,clickToPlay:!0,ads:{enabled:!this.options.cds&&!this.options.noAds,context:this.options.ads},translations:this.model.get("translations")})},resize:function(){this.render(),this.options.ads.restore(),this.ready()},remove:function(){this.player&&(this.player.destroy(),this.player=null),s(e).off("resize."+this.cid),n.ModuleView.prototype.remove.call(this)}})}(this),Whiskers("modules.trifecta",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> '),a.s(a.f("header_data",e,t,1),e,t,0,36,54,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="container"> '),a.s(a.f("data",e,t,1),e,t,0,104,467,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="item"> <div class="logo-container"> <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('"> <span class="logo-box"> <img src="'),i.b(i.v(i.f("logo",e,t,0))),i.b('" class="logo" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> </span> </a> </div> <div class="description-container"> <p class="desc">'),i.b(i.v(i.f("short_desc",e,t,0))),i.b('</p> </div> <div class="btn"> <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" class="button small blue" role="button">'),i.b(i.v(i.d("translations.watch_now",e,t,0))),i.b("</a> </div> </div> ")}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Disney,a=i.Style.breakpoints,n=a.midHigh.toString(),r=e.Whiskers,s=e._;t.ModuleView.register("trifecta",{template:r.modules.trifecta,required_template_sets:["entities"],breakpoints:n,render:function(){var e=s.extend({},this.model);this.$el.html(this.template.render(e,this.ctx_additions()))},resize:function(){this.render(),this.options.ads.restore()}})}(this),Whiskers("modules.ugc_consent",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> '),a.s(a.f("header_data",e,t,1),e,t,0,36,54,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.rp("<module_header0",e,t,""))}),e.pop()),a.b(' <div class="content-wrapper"> <div class="content ugc-response"> '),a.s(a.f("response",e,t,1),e,t,0,149,300,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" <h3>"),i.b(i.v(i.d("message.header",e,t,0))),i.b('</h3> <p class="description">'),i.b(i.v(i.d("message.body",e,t,0))),i.b("</p> "),i.s(i.f("url",e,t,1),e,t,0,230,291,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="checkout">Checkout with Paypal</a> ')}),e.pop()),i.b(" ")}),e.pop()),a.b(" </div> </div> </div>"),a.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}}},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e.$,n=e._;t.ModuleView.register("ugc_consent",{style_classes:["module","ugc-consent"],required_template_sets:["module_header"],template:i.modules.ugc_consent,initialize:function(){var t=this,i="http://a.dilcdn.com/sa/ugc/wisp-client/ugcAPI-browser.js",n=this.model.get("cellophane_host")+"/ugc/kidsascreators/v1",r={Authorization:this.model.get("cellophane_auth_key")};a.getScript(i).done(function(){e.ugcAPI.discover(n,{headers:r}).then(function(e){var i=t.getQueryParams();"mlc"===i.type?t.approveOrDenyMLC(e,i):"hlc"===i.type&&e.campaigns.get({id:i.cid}).then(function(a){t.approveHLC(e,a,i)})})})},render:function(){},handleResponse:function(e,t,i,a){var n=i?"succeed_":"fail_",r=n+e+"_"+t,s=r+"_header",o=r+"_body",l=this.model.get("translations")||{},c=this.model.get("text_options")||{},d=c[s]||l[s]||"Oops",u=c[o]||l[o]||"There was an error processing your request.";this.safeRender(d,u,a)},safeRender:function(e,t,i){var a=n.extend(this.model.toJSON(),{response:{message:{header:e,body:t},url:i}});this.$el.html(this.template.render(a,this.ctx_additions()))},approveHLC:function(e,t,i){var a=this,n=i.action;if("approve"===n){var r=t.submissions.buildURL(i.aid);e.submission(r).paypalLink().then(function(e){a.handleResponse(n,i.type,!0,e.paypalLink)})}else"verify"===n&&e.events.verifyPayment({campaignID:i.cid,submissionID:i.aid}).then(function(){a.handleResponse(n,i.type,!0)},function(){a.handleResponse(n,i.type,!1)})},approveOrDenyMLC:function(e,t){var i=this,a=t.action;if(e.events[a]){var r=n.extend({campaignID:t.cid,submissionID:t.aid},"approve"===a?{key:t.k}:null);e.events[a](r).then(function(){i.handleResponse(a,t.type,!0)},function(){i.handleResponse(a,t.type,!1)})}else this.handleResponse()},getQueryParams:function(){var t={},i=e.window.location.search.substring(1),a=i.split("&");return n.each(a,function(e){e=e.split("="),e[0]&&e[1]&&(t[e[0]]=e[1])}),t}})}(this),/*
 * jQuery UI Widget 1.10.3+amd
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,t){var i=0,a=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,a=0;null!=(i=t[a]);a++)try{e(i).triggerHandler("remove")}catch(r){}n(t)},e.widget=function(t,i,a){var n,r,s,o,l={},c=t.split(".")[0];t=t.split(".")[1],n=c+"-"+t,a||(a=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[c]=e[c]||{},r=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,r,{version:a.version,_proto:e.extend({},a),_childConstructors:[]}),o=new i,o.options=e.widget.extend({},o.options),e.each(a,function(t,a){return e.isFunction(a)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=n,t=a.apply(this,arguments),this._super=i,this._superApply=r,t}}()):void(l[t]=a)}),s.prototype=e.widget.extend(o,{widgetEventPrefix:r?o.widgetEventPrefix:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:n}),r?(e.each(r._childConstructors,function(t,i){var a=i.prototype;e.widget(a.namespace+"."+a.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(i){for(var n,r,s=a.call(arguments,1),o=0,l=s.length;l>o;o++)for(n in s[o])r=s[o][n],s[o].hasOwnProperty(n)&&r!==t&&(i[n]=e.isPlainObject(r)?e.isPlainObject(i[n])?e.widget.extend({},i[n],r):e.widget.extend({},r):r);return i},e.widget.bridge=function(i,n){var r=n.prototype.widgetFullName||i;e.fn[i]=function(s){var o="string"==typeof s,l=a.call(arguments,1),c=this;return s=!o&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,this.each(o?function(){var a,n=e.data(this,r);return n?e.isFunction(n[s])&&"_"!==s.charAt(0)?(a=n[s].apply(n,l),a!==n&&a!==t?(c=a&&a.jquery?c.pushStack(a.get()):a,!1):void 0):e.error("no such method '"+s+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+s+"'")}:function(){var t=e.data(this,r);t?t.option(s||{})._init():e.data(this,r,new n(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,a){a=e(a||this.defaultElement||this)[0],this.element=e(a),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),a!==this&&(e.data(a,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===a&&this.destroy()}}),this.document=e(a.style?a.ownerDocument:a.document||a),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,a){var n,r,s,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},n=i.split("."),i=n.shift(),n.length){for(r=o[i]=e.widget.extend({},this.options[i]),s=0;s<n.length-1;s++)r[n[s]]=r[n[s]]||{},r=r[n[s]];if(i=n.pop(),a===t)return r[i]===t?null:r[i];r[i]=a}else{if(a===t)return this.options[i]===t?null:this.options[i];o[i]=a}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,a){var n,r=this;"boolean"!=typeof t&&(a=i,i=t,t=!1),a?(i=n=e(i),this.bindings=this.bindings.add(i)):(a=i,i=this.element,n=this.widget()),e.each(a,function(a,s){function o(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var l=a.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,d=l[2];d?n.delegate(d,c,o):i.bind(c,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?a[e]:e).apply(a,arguments)}var a=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,a){var n,r,s=this.options[t];if(a=a||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(n in r)n in i||(i[n]=r[n]);return this.element.trigger(i,a),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(a))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(a,n,r){"string"==typeof n&&(n={effect:n});var s,o=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),s=!e.isEmptyObject(n),n.complete=r,n.delay&&a.delay(n.delay),s&&e.effects&&e.effects.effect[o]?a[t](n):o!==t&&a[o]?a[o](n.duration,n.easing,r):a.queue(function(i){e(this)[t](),r&&r.call(a[0]),i()})}})}),Whiskers("modules.user_upload",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b(" "),a.s(a.f("style_options",e,t,1),e,t,0,74,1061,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <style type="text/css"> '),i.s(i.f("header_color",e,t,1),e,t,0,116,180,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.user_upload .stunt-info h1{ color: "),i.b(i.v(i.f("header_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("button_color",e,t,1),e,t,0,215,533,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.user_upload .button{ background-color: "),i.b(i.v(i.f("button_color",e,t,0))),i.b('; position: relative; overflow: hidden; } .module.user_upload .button:hover{ opacity: 0.9; } .module.user_upload .button:before{ content: ""; background-color: rgba(0, 0, 0, 0.08); z-index: -1; position: absolute; top: 0; left: 0; right: 0; bottom: 0; } ')}),e.pop()),i.b(" "),i.s(i.f("button_text_color",e,t,1),e,t,0,573,635,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.user_upload .button{ color: "),i.b(i.v(i.f("button_text_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("tips_link_color",e,t,1),e,t,0,678,755,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .module.user_upload .stunt-info .tips-button{ color: "),i.b(i.v(i.f("tips_link_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("progress_color",e,t,1),e,t,0,795,881,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .progress-slices .slice, .progress-slices:before{ border-color: "),i.b(i.v(i.f("progress_color",e,t,0))),i.b(";} ")}),e.pop()),i.b(" "),i.s(i.f("progress_wheel_bg_color",e,t,1),e,t,0,929,1023,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" .progress-slices, .progress-slices .slice.cover{ border-color: "),i.b(i.v(i.f("progress_wheel_bg_color",e,t,0))),i.b(";} ")}),e.pop()),i.b(" </style> ")}),e.pop()),a.b(' <div class="'),a.b(a.v(a.f("type",e,t,0))),a.b(" "),a.b(a.v(a.f("entity_type",e,t,0))),a.b('"> <div class="bound"> '),a.b(' <div class="content-container"> <div class="stunt-info rich-text-enabled'),a.s(a.f("contest_logo",e,t,1),e,t,1,0,0,"")||a.b(" no-logo"),a.b('"> <div class="details-container"> '),a.s(a.f("contest_logo",e,t,1),e,t,0,1336,1522,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("noscript",e,t,1),e,t,1,0,0,"")||(i.b('<img class="contest-logo" data-src="'),i.b(i.v(i.f("contest_logo",e,t,0))),i.b('">')),i.b(" "),i.s(i.f("noscript",e,t,1),e,t,0,1431,1508,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<noscript><img class="contest-logo no-src" src="'),i.b(i.v(i.f("contest_logo",e,t,0))),i.b('"></noscript>')}),e.pop()),i.b(" ")}),e.pop()),a.b(" <h1>"),a.b(a.t(a.f("start_header",e,t,0))),a.b('</h1> <div class="description">'),a.b(a.t(a.f("start_description",e,t,0))),a.b("</div> "),a.s(a.f("has_tips",e,t,1),e,t,0,1636,1688,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <h3 class="tips-button">'),i.b(i.v(i.d("translations.tips",e,t,0))),i.b("</h3> ")}),e.pop()),a.b(' </div> </div> <div class="form-container '),a.b(a.v(a.d("style_options.overlay_color_theme",e,t,0))),a.b('"> <div class="form-mask"> <h3 class="login-notice">'),a.b(a.v(a.d("translations.login",e,t,0))),a.b('</h3> <div class="button blue large disid-button"> '),a.s(a.f("start_button_text",e,t,1),e,t,0,1927,1948,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.v(i.f("start_button_text",e,t,0)))}),e.pop()),a.b(" "),a.s(a.f("start_button_text",e,t,1),e,t,1,0,0,"")||a.b(a.v(a.d("translations.start",e,t,0))),a.b(" </div> "),a.s(a.d("text_options.ie9_text",e,t,1),e,t,0,2071,2122,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<p class="no-fileapi">'),i.b(i.v(i.d("text_options.ie9_text",e,t,0))),i.b("</p>")}),e.pop()),a.b(' </div> <form> <fieldset class="info-fs"> <legend><h3>'),a.b(a.v(a.d("translations.submission_info",e,t,0))),a.b("</h3></legend> "),a.s(a.f("fields",e,t,1),e,t,0,2260,2766,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("select",e,t,1),e,t,1,0,0,"")||(i.b(" "),i.s(i.f("area",e,t,1),e,t,0,2282,2513,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="text-box"> <textarea type='),i.b(i.v(i.f("type",e,t,0))),i.b(' rows="'),i.b(i.v(i.f("numRows",e,t,0))),i.b('" class="has-count '),i.b(i.v(i.f("tag",e,t,0))),i.b('" name='),i.b(i.v(i.f("tag",e,t,0))),i.b(" "),i.s(i.f("label",e,t,1),e,t,0,2398,2419,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("placeholder="),i.b(i.v(i.f("label",e,t,0)))}),e.pop()),i.b(' maxlength="'),i.b(i.v(i.f("maxLength",e,t,0))),i.b('"></textarea> <span class="count-remaining"></span> </div> ')}),e.pop()),i.b(" "),i.s(i.f("area",e,t,1),e,t,1,0,0,"")||(i.b(" <input type="),i.b(i.v(i.f("type",e,t,0))),i.b(" name="),i.b(i.v(i.f("tag",e,t,0))),i.b(' class="'),i.b(i.v(i.f("tag",e,t,0))),i.b('" placeholder="'),i.b(i.v(i.f("label",e,t,0))),i.b('"/> ')),i.b(" ")),i.b(" "),i.s(i.f("select",e,t,1),e,t,0,2642,2754,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" <select name="),i.b(i.v(i.f("tag",e,t,0))),i.b(' class="'),i.b(i.v(i.f("tag",e,t,0))),i.b('"> '),i.s(i.f("options",e,t,1),e,t,0,2693,2731,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <option value="'),i.b(i.v(i.d(".",e,t,0))),i.b('">'),i.b(i.v(i.d(".",e,t,0))),i.b("</option> ")}),e.pop()),i.b(" </select> ")}),e.pop()),i.b(" ")}),e.pop()),a.b(' </fieldset> <div class="file-name-container"> <div class="file-name"></div> <span class="delete-file"></span> </div> <div class="button silver small select-file visible"> '),a.b(a.v(a.f("select_file_button_text",e,t,0))),a.b(' <input type="file" name="file" required /> </div> <div class="button gold small begin-upload"> '),a.b(a.v(a.f("upload_file_button_text",e,t,0))),a.b(' </div> <div class="notification"></div> '),a.s(a.f("form_footnotes",e,t,1),e,t,0,3159,3226,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="footnotes rich-text-enabled">'),i.b(i.t(i.f("form_footnotes",e,t,0))),i.b("</div>")}),e.pop()),a.b(' </form> <div class="progress"> <div class="progress-indicator"> <div class="progress-slices"> <div class="slice slice-1"></div> <div class="slice cover"></div> <div class="slice slice-2"></div> </div> </div> <div class="uploading"> <h3>'),a.b(a.v(a.d("translations.uploading",e,t,0))),a.b('</h3> </div> <div class="thank-you rich-text-enabled"> '),a.s(a.f("thank_you_header",e,t,1),e,t,0,3584,3615,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b("<h3>"),i.b(i.t(i.f("thank_you_header",e,t,0))),i.b("</h3>")}),e.pop()),a.b(" "),a.s(a.f("thank_you_text",e,t,1),e,t,0,3656,3707,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="description">'),i.b(i.t(i.f("thank_you_text",e,t,0))),i.b("</div>")}),e.pop()),a.b(' </div> </div> </div> </div> </div> <div class="tips-bound"> <div class="close-icon close-tips"></div> <div class="bound"> '),a.s(a.f("helpful_tip_header",e,t,1),e,t,0,3872,3937,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<span class="tip-header"><h2>'),i.b(i.t(i.f("helpful_tip_header",e,t,0))),i.b("</h2></span>")}),e.pop()),a.b(' <div class="tips"> <div class="tips-container left"> <h3 class="tips-header"> '),a.s(a.f("dos_header",e,t,1),e,t,0,4054,4070,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.t(i.f("dos_header",e,t,0)))}),e.pop()),a.b(" "),a.s(a.f("dos_header",e,t,1),e,t,1,0,0,"")||a.b(a.v(a.d("translations.do",e,t,0))),a.b(" </h3> "),a.s(a.f("dos",e,t,1),e,t,0,4150,4196,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="rich-text-enabled">'),i.b(i.t(i.f("dos",e,t,0))),i.b("</div>")}),e.pop()),a.b(' </div> <div class="tips-container right"> <h3 class="tips-header"> '),a.s(a.f("donts_header",e,t,1),e,t,0,4289,4307,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.t(i.f("donts_header",e,t,0)))}),e.pop()),a.b(" "),a.s(a.f("donts_header",e,t,1),e,t,1,0,0,"")||a.b(a.v(a.d("translations.do",e,t,0))),a.b(" </h3> "),a.s(a.f("donts",e,t,1),e,t,0,4395,4443,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<div class="rich-text-enabled">'),i.b(i.t(i.f("donts",e,t,0))),i.b("</div>")}),e.pop()),a.b(' </div> <div class="button silver small close-button close-tips">'),a.b(a.v(a.d("translations.close_button",e,t,0))),a.b("</div> </div> "),a.s(a.f("helpful_tip_footnote",e,t,1),e,t,0,4586,4641,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b('<p class="tips-footnote">'),i.b(i.t(i.f("helpful_tip_footnote",e,t,0))),i.b("</p>")}),e.pop()),a.b(" </div> </div> </div>"),a.fl()},partials:{},subs:{}}),Whiskers("partials.character_countdown",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b(' <textarea type="text" rows="'),a.s(a.f("rows",e,t,1),e,t,0,99,107,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(i.v(i.f("rows",e,t,0)))}),e.pop()),a.s(a.f("rows",e,t,1),e,t,1,0,0,"")||a.b("1"),a.b('" class="has-count" name="'),a.b(a.v(a.f("tag",e,t,0))),a.b('" placeholder="'),a.b(a.v(a.f("label",e,t,0))),a.b('" maxlength="'),a.b(a.v(a.f("maxLength",e,t,0))),a.b('"'),a.s(a.f("required",e,t,1),e,t,0,232,241,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" required")}),e.pop()),a.b(" /> "),a.b(' <div class="count-bg"></div> <span class="count-remaining"></span>'),a.fl()},partials:{},subs:{}}),/*
 * Copyright <%= DateTime.now.year %> Disney
 * All Rights Reserved
 *
 * jQuery UI Widget 1.10.3+amd
 * Copyright 2012 jQuery Foundation
 * MIT License
 */
function(e){"use strict";var t,i,a=e.Grill,n=e.Disney,r=e.Whiskers,s=e.Backbone,o=e.Tracker,l=e._,c=e.jQuery,d=n.Style.breakpoints,u=d.midHigh.toString();a.ModuleView.register("user_upload",{breakpoints:u,template:r.modules.user_upload,progressConfig:{step_pct:5,min_millis:800},events:{"click .disid-button":function(){this.handleGetStartedClick()},"click .begin-upload":function(){this.beginUpload()},"click .tips-button":function(){this.handleTipsClick()},"click .close-tips":function(){this.handleTipsClose()},"click .delete-file":function(){this.handleFileNameClick()},'change input[type="file"]':function(e){this.updateSelectedFile(e)},"change select":function(){this.updateSelect()}},initialize:function(){var t=this,a=100/this.progressConfig.step_pct,n=this.progressConfig.min_millis/a,r=l.first(this.model.get("data")).campaign_id,s="http://a.dilcdn.com/sa/ugc/wisp-client/ugcAPI-browser.js",o=this.model.get("cellophane_host")+"/ugc/kidsascreators/v1",d={Authorization:this.model.get("cellophane_auth_key")};l.extend(this.progressConfig,{num_steps:a,min_interval:n}),this.options.guest.retain(),l.bindAll(this),c.getScript(s).done(function(){e.ugcAPI.discover(o,{headers:d}).then(function(e){e.campaigns.get({id:r}).then(function(e){i=e,t.safeRender(e)})})})},parseCampaign:function(){var e=[],t={integer:"number",string:"text"},a=i.submissionMetadata;return l.each(a.properties,function(i,n){e.push({label:i.title,type:t[i.type],tag:n,required:l.contains(a.required,n),options:i["enum"],select:!!i["enum"],area:"caption"===n,maxLength:i.maxLength||140,numRows:i.maxLength>200?5:3})}),e},safeRender:function(){var e=this,i=this.template,a=l.first(this.model.get("data"));t=this.parseCampaign();var n=e.generateRenderContext(a);e.$el.html(i.render(n)),e.countdown(),e.options.guest.refresh().then(e.revealForm)},render:function(){i?this.safeRender():this.$el.html("")},updateSelect:function(){this.$("select").each(function(){var e=c(this),t=e.find("option:selected"),i=0===t.index();e.toggleClass("empty",i&&""===e.val())})},updateSelectedFile:function(e){if(this.activeFile=e&&e.currentTarget,this.resetAlert(),this.activeFile){var t=this.activeFile.files[0],i=t.name;this.$(".file-name-container").addClass("visible"),this.$(".file-name").text(i),this.$(".select-file").removeClass("visible"),this.$(".begin-upload").addClass("visible"),this.$(".footnotes").addClass("visible")}else this.$('form input[type="file"]')[0].value=null,this.$(".file-name-container").removeClass("visible"),this.$(".file-name").text(""),this.$(".select-file").addClass("visible"),this.$(".begin-upload").removeClass("visible"),this.$(".footnotes").removeClass("visible")},revealForm:function(t){this.authz=t.tokens.access,o.event({eventCategory:"ugcUpload",action:"form_visible",label:e.location.href}),c(".user_upload .form-mask").fadeOut(150),c(".user_upload .form-container form, .form-container").addClass("visible"),this.$(":input:visible:first").focus()},uploadFile:function(){var a,n=this,r=this.$("form"),s=r.find('input[type="file"]')[0].files[0],l={},c={Authorization:this.model.get("cellophane_auth_key")+",DisneyID token="+this.authz};if(t.forEach(function(e){var t=r.find('[name="'+e.tag+'"]').val();l[e.tag]=t,e.required&&!t.length&&(a=e.label)}),a)return void this.showAlert(a+" is required!");var d={filename:s.name,metadata:l};o.event({eventCategory:"ugcUpload",action:"start",label:e.location.href}),this.showProgress(),i.submissions.create(s,d,{headers:c}).then(function(){o.event({eventCategory:"ugcUpload",action:"success",label:e.location.href}),n.handleUploadSuccess()},function(t){o.event({eventCategory:"ugcUpload",action:"failed",label:e.location.href}),n.handleUploadFailure(t.statusCode)})},beginUpload:function(){this.$(".uploading").addClass("visible"),this.uploadFile()},showProgress:function(){this.resetProgressIndicator(),this.$("form").addClass("hide"),this.$(".progress").addClass("visible")},hideProgress:function(){this.$(".progress").removeClass("visible"),this.$("form").delay(1e3).removeClass("hide"),this.resetProgressIndicator()},updateProgressIndicator:function(e,t){var i=this.progressConfig,a=Math.floor(t/i.min_interval),n=Math.min(a*i.step_pct,100),r=Math.min(e,n);this.updateProgressIndicatorProperties("true",r),100===r&&this.$(".progress-indicator").attr("data-loading","false")},updateProgressIndicatorProperties:function(e,t){var i=this.$(".progress-indicator");i.attr("data-loading",e),i.attr("data-progress",t)},resetProgressIndicator:function(){var e=this.$(".progress-indicator");e.attr("data-loading","false"),e.attr("data-progress","0"),e.removeClass("upload-success")},handleUploadSuccess:function(){var t,i=this,a=parseInt(this.$(".progress-indicator").attr("data-progress"),10),n=this.progressConfig;100===a?this.revealSuccess():t=e.setInterval(function(){a+=n.step_pct,100===a?(i.updateProgressIndicatorProperties("false",a),i.revealSuccess(),e.clearInterval(t),i.$(".progress-indicator").attr("data-loading","false")):i.updateProgressIndicatorProperties("true",a)},n.min_interval)},revealSuccess:function(){this.$(".progress-indicator").addClass("upload-success"),this.$(".thank-you").addClass("visible"),this.$(".uploading").removeClass("visible")},handleUploadFailure:function(e){var t="error_"+e,i="Oops, something went wrong. Please try again later.",a=this.model.get("translations")||{},n=this.model.get("text_options")||{},r=n[t]||a[t]||i;this.$(".uploading").removeClass("visible"),this.revealError(r)},revealError:function(e){this.hideProgress(),this.showAlert(e),this.resetProgressIndicator()},showAlert:function(e){this.$(".notification").removeClass("notice").addClass("alert").stop(!0).hide().text(e).slideDown(500)},resetAlert:function(){this.$(".notification").addClass("notice").removeClass("alert").hide()},handleFileNameClick:function(){this.updateSelectedFile(null)},handleTipsClick:function(){c(".tips-bound").addClass("visible"),c(".modal-overlay").addClass("ugc-show")},handleTipsClose:function(){c(".tips-bound").removeClass("visible"),c(".modal-overlay").removeClass("ugc-show")},handleGetStartedClick:function(){c.when(this.options.guest.login()).then(this.revealForm)},countdown:function(){var e=this.$(".has-count"),t=e.attr("maxlength"),i=e.siblings(".count-remaining");i.html(t),n.FormElements.characterCountdown.onReady(e,t,i)},generateRenderContext:function(e){var i,a=this.model.toJSON(),n=s.Resize.width();l.extend(a,a.data[0]);var r=!l.isEmpty(a.dos)||!l.isEmpty(a.donts),o=this.model.get(n<d.midHigh?"start_background_mobile_image":"start_background_desktop_image");return l.extend(a,{fields:t,has_tips:r,character_countdown:i,background_image:o},e),a},destroy:function(){this.options.guest&&this.options.guest.release()}})}(this),Whiskers("modules.voting",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="bound"> <h3 class="voting-title">'),a.b(a.v(a.f("title",e,t,0))),a.b('</h3> <h2 class="voting-question">'),a.b(a.v(a.d("header_data.desc",e,t,0))),a.b('</h2> <ul class="voting-items"> '),a.s(a.f("randData",e,t,1),e,t,0,153,744,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li data-id="'),i.b(i.v(i.f("id",e,t,0))),i.b('"> <div class="item-container"> <div class="thumb" style="background-image: url('),i.b(i.v(i.f("thumb",e,t,0))),i.b(');"> <span class="thumb-sizer"></span> </div> <div class="details"> <div class="title">'),i.b(i.v(i.f("title",e,t,0))),i.b('</div> <div class="description">'),i.b(i.v(i.f("description",e,t,0))),i.b('</div> </div> <div class="btn-container vote-container clicon"> <div class="vote-btn"> <div class="vote-btn-checkmark"></div> <div class="vote-btn-title">'),i.b(i.v(i.d("translations.vote",e,t,0))),i.b('</div> </div> </div> <div class="btn-container share-vote">'),i.b(i.rp("<socialLinkPartial0",e,t,"")),i.b('</div> </div> <div class="notification"></div> <span class="bg-fill"></span> </li> ')}),e.pop()),a.b(" </ul> </div>"),a.fl()},partials:{"<socialLinkPartial0":{name:"socialLinkPartial",partials:{},subs:{}}},subs:{}}),Whiskers("modules.voting_player",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div id="voting-video"> <div class="aspect"> <!-- Orphan video markup --> '),a.s(a.f("expired",e,t,1),e,t,1,0,0,"")||a.b(' <div id="voting-video-player" class="voting-video-player"></div> '),a.b(" "),a.s(a.f("expired",e,t,1),e,t,0,177,242,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="orphan"><p>'),i.b(i.v(i.d("translations.video_expired",e,t,0))),i.b("</p></div> ")}),e.pop()),a.b(" <!-- /Orphan video markup --> </div> </div>"),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Backbone,a=e.Disney,n=a.Utilities,r=e.Modernizr,s=e.Whiskers,o=e.jQuery,l=e._,c=a.Style.breakpoints;t.ModuleView.register("voting",{template:s.modules.voting,assets:{scripts:["//a.dilcdn.com/a/videoplayer-cd2ca21be539.js"]},events:{"click .vote-container":function(e){this.$voteItem=o(e.currentTarget).closest("li"),this.handleVoteClick()},"click .thumb":function(e){var t=o(e.currentTarget),i=t.closest("li"),a=i.data("id");this.$voteItem&&this.$voteItem.data("id")===a||(this.$(".thumb").removeClass("active"),t.addClass("active"),this.$voteItem=i,this.initVideoPlayer(this.$voteItem))}},initialize:function(){this.options.guest.retain()},render:function(){var e=this.model.get("data"),t=l.shuffle(e);this.model.set("randData",t);var i=l.extend({shareOverrides:{href:o("meta[property='og:url']").attr("content"),title:o("meta[property='og:title']").attr("content")}},this.model);this.$el.html(this.template.render(i,{socialLinkPartial:s.partials.social_btn}))},handleVoteClick:function(){var e=this;o.when(this.options.guest.login()).then(function(t){e.makeVoteRequest(t)})},makeVoteRequest:function(e){var t=this,i=t.model.get("translations"),a=i.error_default,n={swid:e.profile.swid,accessToken:e.tokens.access,eventID:this.model.get("campaign_id"),voteOptionID:this.$voteItem.data("id")};o.ajax({url:t.model.get("cellophane_host")+"/ugc/content/v1/vote",headers:{Authorization:t.model.get("cellophane_auth_key")},type:"POST",data:n,dataType:"json"}).done(function(e){e.data&&e.data._id?t.animateVoteSuccess():t.animateVoteFail(a)}).fail(function(e){409===e.status&&(a=i.error_maxnum),t.animateVoteFail(a)})},animateVoteSuccess:function(){this.$(".selected").removeClass("selected"),this.$voteItem.addClass("selected")},animateVoteFail:function(e){this.$(".alert").removeClass("alert"),this.$voteItem.addClass("alert").find(".notification").text(e)},destroy:function(){this.options.guest&&this.options.guest.release()},initVideoPlayer:function(e){var t=e.data("id"),a=this.model.data.findWhere({id:t});if(this.playerView&&this.playerView.remove(),this.playerView=new d({model:a}),e.find(".thumb-sizer").html(this.playerView.render()),this.playerView.init(),r.mobile){var s=this,o=s.playerView.$el.find("video")[0];o.play(),i.Resize.width()<c.midHigh&&(n.toggleFullScreen(o,!0),n.onFullScreenChange(function(){n.isFullScreen()||(o.pause(),s.playerView&&(s.playerView.remove(),s.playerView=null,s.$voteItem=null),n.offFullScreenChange())}))}}});var d=t.ModuleView.register("video-player",{className:"voting-video-container",template:s.modules.voting_player,render:function(){return this.$el.html(this.template.render()),this.el},init:function(){var e=this;this.player=new a.MatterhornVideoPlayer("voting-video-player",{video:e.model.attributes,autoPlay:!0,clickToPlay:!0,showTitle:!0,ads:{enabled:!1,context:!1}})},remove:function(){this.$(".voting-video-container").remove(),this.$el.closest(".thumb").removeClass("active"),this.player.destroy(),this.player=null,t.BunView.prototype.remove.call(this)}})}(this),Whiskers("modules.voting_multi",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("style_options",e,t,1),e,t,0,18,2340,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <style type="text/css"> '),i.s(i.f("color_settings",e,t,1),e,t,0,62,1460,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("base_color",e,t,1),e,t,0,78,725,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .voting-category .item{ background-color: "),i.b(i.v(i.f("base_color",e,t,0))),i.b("; } "),i.b(" #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .voting-category .item.voted{ background-color: transparent; } #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.blue:not(.next-button), #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.all-categories-button, #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .entity-container.voted .title, #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .entity-container.voted .desc, #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .entity-container.error .title, #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .entity-container.error .desc, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .category-link.selected, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .category-link.item:hover, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .category-link.item:active{ color: "),i.b(i.v(i.f("base_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("accent_color",e,t,1),e,t,0,758,1260,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.blue, #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.all-categories-button, #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .voting-category:not(.landing-page) .item .aspect:before, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.blue:hover, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.blue:active, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .category-link.selected, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .category-link.item:hover, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .category-link.item:active{ background-color: "),i.b(i.v(i.f("accent_color",e,t,0))),i.b("; } #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .next-button .next-text{ color: "),i.b(i.v(i.f("accent_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("error_modal",e,t,1),e,t,0,1294,1443,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("background_color",e,t,1),e,t,0,1316,1421,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .voting-category:not(.landing-page) .item:after{ background-color: "),i.b(i.v(i.f("background_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("next_button",e,t,1),e,t,0,1496,1726,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("background_color",e,t,1),e,t,0,1518,1704,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.next-button, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.next-button:hover, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.next-button:active{ background-color: "),i.b(i.v(i.f("background_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" "),i.s(i.f("vote_again_button",e,t,1),e,t,0,1765,1969,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.vote-again-button, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.vote-again-button:hover, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .button.vote-again-button:active{ background-color: "),i.b(i.v(i.f("background_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" "),i.s(i.f("message_color",e,t,1),e,t,0,2010,2312,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("background_color",e,t,1),e,t,0,2032,2290,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .end-card .message-wrapper p{ border-color: "),i.b(i.v(i.f("background_color",e,t,0))),i.b("; } #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .social-link-btn, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .social-link-btn:hover, html.no-touch #ref-"),i.b(i.v(i.f("ref",e,t,0))),i.b(" .social-link-btn:active{ background-color: "),i.b(i.v(i.f("background_color",e,t,0))),i.b("; } ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" </style> ")}),e.pop()),a.b(' <div class="bound'),a.s(a.f("enable_all_categories",e,t,1),e,t,0,2402,2425,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" all-categories-enabled")}),e.pop()),a.b(' "> <div class="voting-wrapper'),a.s(a.f("show_desc",e,t,1),e,t,0,2495,2505,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" show-desc")}),e.pop()),a.b('"> '),a.b(" "),a.s(a.f("data",e,t,1),e,t,0,2550,5655,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("no_list",e,t,1),e,t,0,2563,3721,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="voting-category active thumbs-loaded" data-id="'),i.b(i.v(i.f("display_id",e,t,0))),i.b('" data-category-slug="'),i.b(i.v(i.f("ref_title_slug",e,t,0))),i.b('"'),i.s(i.f("fallback",e,t,1),e,t,0,2691,2712,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-fallback="true"')}),e.pop()),i.b('> <div class="category-header module_header"> <h2>'),i.b(i.v(i.f("title",e,t,0))),i.b("</h2> <p>"),i.b(i.v(i.f("short_desc",e,t,0))),i.b('</p> </div> <div class="cols-'),i.b(i.v(i.f("cols",e,t,0))),i.b(" col-container "),i.b(i.v(i.f("layoutType",e,t,0))),i.b('"> '),i.s(i.f("list_items",e,t,1),e,t,0,2891,3691,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(' <span class="col item '),i.s(i.f("lastRow",e,t,1),e,t,0,3042,3050,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("last-row")}),e.pop()),i.b(" "),i.s(i.f("widthClass",e,t,1),e,t,0,3078,3092,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("widthClass",e,t,0)))}),e.pop()),i.b(" "),i.s(i.f("category",e,t,1),e,t,0,3121,3135,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" category-link")}),e.pop()),i.b(" "),i.s(i.d("style_options.color_settings",e,t,1),e,t,0,3182,3205,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("text-"),i.b(i.v(i.f("text_lightness",e,t,0)))}),e.pop()),i.b(" "),i.s(i.f("voted",e,t,1),e,t,0,3249,3255,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" voted")}),e.pop()),i.b('" data-id="'),i.b(i.v(i.f("id",e,t,0))),i.b('" data-category="'),i.b(i.v(i.f("ref_title_slug",e,t,0))),i.b('"'),i.s(i.f("fallback",e,t,1),e,t,0,3331,3352,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-fallback="true"')}),e.pop()),i.b("> "),i.b(i.rp("<entity_container0",e,t,"")),i.b(" "),i.s(i.f("display_interactive_elements",e,t,1),e,t,0,3422,3649,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="modal-message '),i.s(i.d("style_options.error_modal",e,t,1),e,t,0,3479,3502,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("text-"),i.b(i.v(i.f("text_lightness",e,t,0)))}),e.pop()),i.b('"> <h4 class="title">'),i.b(i.v(i.d("translations.error",e,t,0))),i.b('</h4><p class="message">'),i.b(i.v(i.d("translations.error_message_generic",e,t,0))),i.b("</p> </div> ")}),e.pop()),i.b(" </span> ")}),e.pop()),i.b(" </div> </div> ")}),e.pop()),i.b(" "),i.s(i.f("listCollection",e,t,1),e,t,0,3753,5635,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("endcard",e,t,1),e,t,1,0,0,"")||(i.b(' <div class="voting-category '),i.s(i.f("active",e,t,1),e,t,0,3806,3812,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("active")}),e.pop()),i.s(i.f("landing",e,t,1),e,t,0,3835,3848,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" landing-page")}),e.pop()),i.s(i.f("thumbs_loaded",e,t,1),e,t,1,0,0,"")||i.b(" lazy-deferred"),i.b('" data-id="'),i.b(i.v(i.f("display_id",e,t,0))),i.b('" data-category-slug="'),i.b(i.v(i.f("ref_title_slug",e,t,0))),i.b('"'),i.s(i.f("fallback",e,t,1),e,t,0,3989,4010,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-fallback="true"')}),e.pop()),i.b('> <div class="category-header module_header"> <h2>'),i.b(i.v(i.f("title",e,t,0))),i.b("</h2> <p>"),i.b(i.v(i.f("short_desc",e,t,0))),i.b('</p> </div> <div class="cols-'),i.b(i.v(i.f("cols",e,t,0))),i.b(" col-container "),i.b(i.v(i.f("layoutType",e,t,0))),i.b('"> '),i.s(i.f("listCollection",e,t,1),e,t,0,4193,4966,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" "),i.b(' <span class="col item '),i.s(i.f("lastRow",e,t,1),e,t,0,4344,4352,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("last-row")}),e.pop()),i.b(" "),i.s(i.f("widthClass",e,t,1),e,t,0,4380,4394,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(i.v(i.f("widthClass",e,t,0)))}),e.pop()),i.b(" "),i.s(i.f("category",e,t,1),e,t,0,4423,4437,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" category-link")}),e.pop()),i.b(" "),i.s(i.d("style_options.color_settings",e,t,1),e,t,0,4484,4507,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("text-"),i.b(i.v(i.f("text_lightness",e,t,0)))}),e.pop()),i.b('" data-id="'),i.b(i.v(i.f("id",e,t,0))),i.b('" data-category="'),i.b(i.v(i.f("ref_title_slug",e,t,0))),i.b('"'),i.s(i.f("fallback",e,t,1),e,t,0,4606,4627,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' data-fallback="true"')}),e.pop()),i.b("> "),i.b(i.rp("<entity_container1",e,t,"")),i.b(" "),i.s(i.f("display_interactive_elements",e,t,1),e,t,0,4697,4924,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="modal-message '),i.s(i.d("style_options.error_modal",e,t,1),e,t,0,4754,4777,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("text-"),i.b(i.v(i.f("text_lightness",e,t,0)))}),e.pop()),i.b('"> <h4 class="title">'),i.b(i.v(i.d("translations.error",e,t,0))),i.b('</h4><p class="message">'),i.b(i.v(i.d("translations.error_message_generic",e,t,0))),i.b("</p> </div> ")}),e.pop()),i.b(" </span> ")}),e.pop()),i.b(" </div> </div> ")),i.b(" "),i.s(i.f("endcard",e,t,1),e,t,0,5025,5622,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="voting-category end-card '),i.s(i.f("active",e,t,1),e,t,0,5074,5080,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("active")}),e.pop()),i.b('" data-id="'),i.b(i.v(i.f("display_id",e,t,0))),i.b('"> <div class="content-wrapper content-center content-middle"> '),i.s(i.f("title",e,t,1),e,t,0,5189,5207,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("<h2>"),i.b(i.v(i.f("title",e,t,0))),i.b("</h2>")}),e.pop()),i.b(' <div class="message-wrapper"> '),i.s(i.f("thank_you_message",e,t,1),e,t,0,5270,5314,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<p class="message">'),i.b(i.v(i.f("thank_you_message",e,t,0))),i.b("</p>")}),e.pop()),i.b(' <div class="vote-again-button button large '),i.s(i.d("style_options.vote_again_button",e,t,1),e,t,0,5416,5439,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("text-"),i.b(i.v(i.f("text_lightness",e,t,0)))}),e.pop()),i.b('"> '),i.b(i.v(i.d("translations.vote_again",e,t,0))),i.b(" </div> </div> "),i.s(i.f("include_social",e,t,1),e,t,0,5539,5588,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<div class="social-wrapper">'),i.b(i.rp("<social_btn2",e,t,"")),i.b("</div>")}),e.pop()),i.b(" </div> </div> ")}),e.pop()),i.b(" ")}),e.pop()),i.b(" ")}),e.pop()),a.b(" "),a.s(a.f("display_interactive_elements",e,t,1),e,t,0,5698,6242,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" "),i.s(i.f("enable_all_categories",e,t,1),e,t,0,5725,5812,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="all-categories-button button large">'),i.b(i.v(i.d("translations.all_categories",e,t,0))),i.b("</div> ")}),e.pop()),i.b(" "),i.s(i.f("single_category",e,t,1),e,t,1,0,0,"")||(i.b(' <div class="next-button-wrapper"> '),i.b(' <div class="next-button button large '),i.s(i.d("style_options.next_button",e,t,1),e,t,0,6039,6062,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("text-"),i.b(i.v(i.f("text_lightness",e,t,0)))}),e.pop()),i.b('"> <span class="next-text">'),i.b(i.v(i.d("translations.next_category",e,t,0))),i.b('</span> <span class="next-title">'),i.b(i.v(i.f("current_title",e,t,0))),i.b("</span> </div> </div> ")),i.b(" ")}),e.pop()),a.b(" </div> </div>"),a.fl()},partials:{"<entity_container0":{name:"entity_container",partials:{},subs:{}},"<entity_container1":{name:"entity_container",partials:{},subs:{}},"<social_btn2":{name:"social_btn",partials:{},subs:{}}},subs:{}}),function(e){"use strict";function t(e){d.fn.extend({replaceChildText:function(e,t){var i=this.find(e);return i.text(t),this},replaceVoteText:function(e){return this.replaceChildText(".cta-button",e)},replaceNextTitle:function(e){return this.replaceChildText(".next-title",e)},animateVoteSuccess:function(){return this.addClass("voted").replaceVoteText(e.voted)},animateVoteFail:function(){var e=this;return this.one("transitionend",function(){u.delay(function(){e.removeClass("error")},2e3)}),this.addClass("error")},resetVoteState:function(){return this.removeClass("voted").replaceVoteText(e.vote)},activateCategory:function(e){var t=this.addClass("active");return t.hasClass("lazy-deferred")&&!t.hasClass("end-card")&&t.enableLazyLoad().loadLazyImages(),t.on("transitionend",function(i){if(2===i.eventPhase&&(i.stopPropagation(),"max-height"===i.originalEvent.propertyName)){t.off("transitionend");var a={type:"categoryTransitioned",categoryID:e.nextCategory.get("display_id"),nextButtonText:e.afterNextDesc};t.trigger(a)}}),t},deactivateCategory:function(){return this.removeClass("active")},getNextCategory:function(e){var t=".voting-category:not(.landing-page)"+(e?":not(.end-card)":""),i=this.next(t);return i.length<1&&(i=this.siblings(t).first()),i}})}function i(e){e.unset("active")}function a(e){return e.toLowerCase().replace(/[^a-z0-9_:, \-]/gi,"").replace(/\s+/g,"_")}function n(e,t){var i=e.get,a=i?e.get("list_items")||e.get("data"):e.list_items;a?(u.each(a,function(e){n(e,t)}),i?e.set({listCollection:new l.LazyCollection(a),display_id:e.id}):(e.listCollection=new l.LazyCollection(a),e.display_id=e.id)):e.entity_config&&(u.extend(e,{cta_button_title:t||"VOTE",href:!0,short_desc:e.short_desc||"",thumb_data:e.thumb_images&&e.thumb_images.thumb_4x3||e.thumbnail_image&&e.thumbnail_image.thumb_4x3||e.thumb_data}),u.extend(e.entity_config,{aspect_ratio:"4x3",title_overlay:!1,details_visibility:"show",thumb_outline:!0,text_alignment:"center",rounded_corners:"default",skip_hover:!0,show_ptitle:!0}))}var r=e.Disney,s=e.Grill,o=e.Whiskers,l=e.Backbone,c=e.Tracker,d=e.jQuery,u=e._,h=r.Style.breakpoints,f=u.values(h),p=s.ModuleView.extend({style_classes:["grid-view","full-width-mob"],required_template_sets:["module_header","entities"],breakpoints:f.join(" "),template:o.modules.voting_multi,included_components:{social_btn:o.partials.social_btn},infiniteVote:!0,skipEndCard:!1,campaignID:"",events:{"click .next-button":function(){this.trackButtonClick("Next Category"),this.jumpToCategory("next")},"click .all-categories-button":function(){this.trackButtonClick("All Categories"),this.jumpToCategory("landing")},"click .vote-again-button":function(){this.trackButtonClick("Vote Again"),this.jumpToCategory(this.initialCategoryID)},"click .item:not(.category-link)":function(e){e.preventDefault();var t=d(e.currentTarget).closest(".item");t.hasClass("voted")||t.hasClass("error")||this.handleVoteClick(t)},"click .item.category-link":function(e){var t=d(e.currentTarget),i=t.data("id");t.addClass("selected"),this.skipEndCard=!0,this.trackCategoryItem(t),this.jumpToCategory(i),this.model.get("enable_endcard")&&this.reIndexEndCard(i),this.skipEndCard=!1},categoryTransitioned:function(e){this.infiniteVote&&this.resetVoteItems(),this.replaceNextButtonText(e.nextButtonText),this.updateHash(e.categoryID),this.$(".category-link.selected").removeClass("selected")}},initialize:function(){if(this.dataValid=this.validateData(),t(this.model.get("translations")),this.dataValid){var i=this.model,a=i.get("data_structure"),r="mega_list"===a?u.first(i.data.models):i,s=i.get("translations"),o=i.get("config_options")||{},l=o.endcard_config,c=!!o.skip_category_page,d=!!o.show_desc;o.shuffle_content&&this.shuffleData(),this.campaignID=o.campaign_id,i.set({show_desc:d,enable_endcard:!!l,enable_all_categories:!l&&"single_category"!==a&&"no_list"!==a}),"no_list"!==a?n(r,s.vote):(this.model.set("listCollection",i.data.models),r.set("listCollection",i.data),n(r,s.vote));var h,f,p=r.get("listCollection"),m=p.at(0);if("single_category"!==a&&"no_list"!==a){var g=this.addLandingPage(r);m=c?p.at(1):g}if(m.set("fallback",!0),l&&(this.endCardModel=this.generateEndCard()),e.location.hash){var v=/(#)([a-z0-9]*)/,b=v.exec(e.location.hash),y=b&&b[2];h=p.findWhere({display_id:y})}h=h||m,f=p.indexOf(h),this.initialCategoryID=h.id,"no_list"!==a&&this.activateCategoryModel(h),p.add(this.endCardModel,{at:f});var k=r.get("list_items"),w=[];u.each(k,function(e){"list"!==e.attributes.entity_type&&w.push(e)}),u.each(w,function(e){var t=e.attributes?e.attributes:e,i=t.thumb_images&&t.thumb_images.thumb_4x3||t.thumbnail_image&&t.thumbnail_image.thumb_4x3||t.thumb_data||{src:""};u.extend(e,{thumb_data:i,thumb:i.src,short_desc:e.short_desc||"",href:e.href||!0,cta_button_title:s.vote||"VOTE"}),e.set("entity_config",u.extend(e.get("entity_config"),{aspect_ratio:"4x3",skip_hover:!0,allow_details_visibility:"show",details_visibility:"show",allow_title_overlay:!1,title_overlay:!1}))}),r.set("list_items",w),this.masterCollection=p,i.data.models=[r]}},render:function(){if(this.dataValid){var t=this.cols(),i=this.model.get("data_structure"),a=this.cols(!0),n=e.location,r=u.extend(this.model,{display_interactive_elements:!0,single_category:"no_list"===i||"single_category"===i,no_list:"no_list"===i,shareOverrides:{href:n.protocol+"//"+n.hostname+n.pathname},cols:function(){return this.get("landing")?a:t},layoutType:function(){return t>1||this.get("landing")?"grid-layout":"list-layout"}});this.$el.html(this.template.render(r,this.ctx_additions())),this.$nextButton=this.$(".next-button-wrapper"),this.$endCard=this.$(".end-card");var s=this.getTargetElements();this.replaceNextButtonText(s.nextDesc)}},cols:function(e){var t=l.Resize.width(),i=t>h.midHigh;return e?t>h.max?4:i?3:2:i?3:1},validateData:function(){var e=this.model,t=e.data.models,i=u.first(t),a=i&&i.get("list_items"),n=t.length>1?"multiple_objects":a[0]&&a[0].list_items?"mega_list":"single_category";return!a&&e.data.length>0&&(n="no_list",this.model.set("list_items",e.data.models)),e.set("data_structure",n),!0},shuffleData:function(){var e=this.model.get("data"),t=this.model.get("data_structure"),i=function(e){e.list_items=u.shuffle(e.list_items)};switch(t){case"multiple_objects":u.each(e,i),this.model.set("data",u.shuffle(e));break;case"mega_list":u.each(e[0],i),this.model.set("data",e);break;case"no_list":case"single_category":u.shuffle(e)}},addLandingPage:function(e){var t,i=this.model,a=e.get("list_items")||e.get("data");u.each(a,function(e){u.extend(e,{category:!0})}),t=new l.LazyCollection(a);var n=new l.Model({title:i.get("title"),short_desc:i.get("desc"),listCollection:t,display_id:"",landing:!0});return e.get("listCollection").unshift(n),n},generateEndCard:function(){var e=this.model,t=e.get("translations"),i=e.get("config_options"),n=i&&i.endcard_config,r=!!n,s=!this.options.cds&&n&&n.enable_social,o=e.get("style_options"),c=o&&o.message_color&&o.message_color.text_lightness,d=e.get("text_options"),u=d&&d.thank_you_messaging,h=u&&u.heading,f=u&&u.paragraph_text,p=a(h||t.vote_again),m=new l.Model({display_id:p,endcard:!0,enable_endcard:r,include_social:s,social_btn_text_lightness:c,title:""!==h&&h,thank_you_message:""!==f&&f});return m},reIndexEndCard:function(e){var t=this.masterCollection,i=t.findWhere({display_id:e}),a=this.$(".voting-category[data-id="+e+"]");t.remove(this.endCardModel);var n=this.$endCard.detach(),r=t.indexOf(i);t.add(this.endCardModel,{at:r}),a.before(n)},jumpToCategory:function(e){var t,i=this.masterCollection,a=this.model.get("data_structure");switch(e){case"next":t=this.getTargetElements();break;case"landing":t=this.getTargetElements(this.$(".voting-category.landing-page"));break;case"endcard":t=this.getTargetElements(this.$(".voting-category.end-card"));break;default:var n,r=i.findWhere({display_id:e});n=this.$(r?".voting-category[data-id="+e+"]":".voting-category[data-fallback='true']"),t=this.getTargetElements(n)}"single_category"!==a&&this.transitionCategory(t)},transitionCategory:function(e){i(e.active),this.activateCategoryModel(e.nextCategory),e.$current.deactivateCategory(),e.$next.activateCategory(e)},updateHash:function(t){e.location.replace("#"+t)},replaceNextButtonText:function(e){var t=this.$nextButton;t.toggleClass("hidden",!e),t.replaceNextTitle(e?e:"")},activateCategoryModel:function(e){var t=e.get("landing"),i=e.get("ref_title_slug");e.set({active:!0,thumbs_loaded:!0}),t?this.trackCategoryPage("Splash"):this.trackCategoryPage("Nominees",i)},getTargetElements:function(e){var t=this.$(".voting-category.active"),i=e||t.getNextCategory(this.skipEndCard),a=i.getNextCategory(this.skipEndCard),n=this.masterCollection,r=n.findWhere({active:!0}),s=i.data("id"),o=n.findWhere({display_id:s}),l=a.data("id"),c=n.findWhere({display_id:l}),d={$current:t,$next:i,active:r,nextCategory:o,nextDesc:o&&o.get("short_desc"),afterNextCategory:c,afterNextDesc:c&&c.get("short_desc")};return d},handleVoteClick:function(e){this.makeVoteRequest(e),this.trackVoteItem(e)},makeVoteRequest:function(e){var t=this,i=e.parents(".voting-category"),a=e.data("id"),n=i.data("category-slug"),s={};""===n||"single_category"===t.model.get("data_structure")?s[a]="":s[n+"|"+a]="",s._portal=r.portal,d.ajax({timeout:3e3,url:this.model.get("cellophane_host")+"/ugc/content/v1/campaigns/"+this.campaignID+"/submit",headers:{Authorization:this.model.get("cellophane_auth_key")},type:"POST",data:s,dataType:"json"}).done(function(){e.one("transitionend",function(){t.jumpToCategory("next")
}).animateVoteSuccess(),t.recordVotedItem(a)}).fail(function(){e.animateVoteFail()})},recordVotedItem:function(e){var t=this,i=t.model.get("list_items")||[],a=t.model.get("translations").voted||"VOTED",n=u.find(i,function(t){return t.id===e})||{};n.voted=!0,n.cta_button_title=a},resetVoteItems:function(){this.$(".item.voted").resetVoteState()},trackCategoryPage:function(e,t){if(c){var i={engagementType:"mattVote_category"+e+"_view",action:"Vote Category "+e+" (Page Load)"};t&&(i.engagementMeta=t),c.event(i)}},trackCategoryItem:function(e){var t=e.data("category");c&&c.event({engagementType:"mattVote_categorySplash_selectCategory",engagementMeta:t,action:"Vote Category Selection (Click)"})},trackVoteItem:function(e){var t=e.data("category"),i=a(e.find(".entity-container .title").text()),n=t+"/"+i;c&&c.event({engagementType:"mattVote_categoryNominees_vote",engagementMeta:n,action:"Vote Button (Click)"})},trackButtonClick:function(e){var t=this.$(".voting-category.active .item").data("category"),i=(e.charAt(0).toLowerCase()+e.slice(1)).replace(/\s+/g,"");c&&c.event({engagementType:"mattVote_categoryNominees_"+i+"Button",engagementMeta:t,action:'"'+e+'" Button (Click)'})}});p.register("voting_multi",{}),p.register("voting_single",{})}(this),function(e){"use strict";var t,i=e.Disney,a=e.Grill,n=e.Backbone,r=e._,s=e.jQuery,o=e.Whiskers,l=e.Math,c=e.sessionStorage,d=e.JSON,u=a.ModuleView.extend({style_classes:["full-width","full-height","skip-top-border"],required_template_sets:["module_header","entities"],template:o.modules.watch,assets:{scripts:["//a.dilcdn.com/a/videoplayer-cd2ca21be539.js"]},initialize:function(){var t=this,a=this.model.collection&&this.model.collection.style,n=a&&a.video_player_skin_override;if(n&&"matterhorn"!==n){var o=i.Style.AssetPaths.supported_videoplayer_skins;r.extend(this.playerConfig,{skinUrl:o[n]}),this.skinClass=n}this.hasPlaylist=!!/[&?]playlist=([^&]+)/.exec(e.location.search),t.h=s(e).on("resize."+t.cid,r.throttle(function(){var i=s(e).height();i!==t.h&&(t.h=i,t.layout())},100)).height()},render:function(){var e=r.first(this.model.get("data")),i=this.hidePromoLink?null:e.contentToolbarPromoLink,a=r.extend({tags:e.tags,contenttype:e.contenttype,upNext:this.upNext(),contentToolbarPromoLink:i,cds:this.options.cds,skinClass:this.skinClass,playlist_below:this.playlist_below,message_below:this.message_below,hasPlaylist:this.hasPlaylist},this.options.ads.helpers(),this.model.toJSON());this.$el.html(this.template.render(a,this.ctx_additions())),t=a.data[0],this.layout()},ready:function(){var t,a=this,n=a.options,s=r.first(a.model.get("data")),o=a.model.get("translations");if(a.loadContentSideBarView(),a.loadItemsWithinModule&&e.location.hash){var l=/(idx\/)([a-z0-9]*)/,c=l.exec(e.location.hash);c&&c[2]&&c[2]!==s.id&&(t=c[2],a.player=null)}r.extend(this.playerConfig,{video:s,ads:{enabled:!n.cds&&!n.noAds,context:n.ads},translations:o}),"undefined"==typeof t&&(this.player=new i.MatterhornVideoPlayer("player",this.playerConfig)),this.hasPlaylist&&(this.watchPlaylist=new i.WatchPlaylistView({el:this.$("#playlist-holder"),model:this.model,videoPlayer:this.player,cdsMode:n.cds,keepPlayListOpenOnLoad:a.keepPlayListOpenOnLoad,loadItemsWithinModule:a.loadItemsWithinModule,itemToPlayOnLoad:t})),a.postReady&&a.postReady()},loadContentSideBarView:function(){this.loadContentToolBarView()},loadContentToolBarView:function(){var e=this,t=e.options,a=e.$("#meta"),n=e.model.get("data")[0].not_embeddable,r=e.model.get("translations"),s=[{share_type:"share",share_text:r.share,output_label:r.quick_link}];n!==!0&&s.unshift({share_type:"embed",share_text:r.embed,output_label:r.embed}),e.$(".module_header").addClass("hide"),e.tb=new i.ContentToolbarView({el:a,template:e.toolbar_template,use_deprecated_social:e.use_deprecated_social,model:e.model,socialLinks:s,cdsMode:t.cds,ads:t.ads})},upNext:function(){var e=r.first(this.model.get("data")),t=c&&d.parse(c.getItem("videoHistoryOnDisneyVideo")||"[]"),i=e.next||[],a=[];r.each(i,function(e){a.push(e.id)});var n=r.first(r.difference(a,t)),s=r.find(i,function(e){return e.id===n});s||(s=r.first(i)),t.push(e.id),t.length>10&&t.shift();try{c.setItem("videoHistoryOnDisneyVideo",d.stringify(t))}catch(o){}return s},layout:function(){var e=this.$("#video_wrapper .bound");e.css("maxWidth",l.min(1024,l.max(320,l.ceil((this.h-120)/.5625))))},remove:function(){this.removePlayer(),a.BunView.prototype.remove.call(this),s(e).off("resize."+this.cid),this.tb.remove(),this.watchPlaylist&&this.watchPlaylist.remove()},removePlayer:function(){this.player&&(this.player.destroy(),this.player=null)}});u.register("watch",{toolbar_template:o.shared.contenttoolbar,use_deprecated_social:!0,playlist_below:!1,message_below:!1,playerConfig:{autoPlay:!0,clickToPlay:!1}}),u.register("watch_2",{toolbar_template:o.shared.contenttoolbar2,use_deprecated_social:!1,playlist_below:!0,message_below:!0,playerConfig:{autoPlay:!0,clickToPlay:!1}}),u.register("watch2_inline",{className:"bun module full-width full-height watch_2",toolbar_template:o.shared.contenttoolbar2,use_deprecated_social:!1,playlist_below:!0,message_below:!0,playerConfig:{autoPlay:!0,clickToPlay:!1,showEndCard:!1},loadItemsWithinModule:!0,keepPlayListOpenOnLoad:!0,hidePromoLink:!0,catalogEntityType:"Game",loadContentSideBarView:function(){var e=this,t=e.options,n=e.model.get("header_data"),s=r.last(e.model.get("data")),o=e.catalogEntityType&&s.type===e.catalogEntityType,l=e.model.get("translations"),c=e.$("#meta");if(e.loadItemsWithinModule&&o){var d=new a.Module({data:[s],translations:l});this.tb=new i.CatalogFloatView({el:c,model:d,cdsMode:t.cds,ads:t.ads}),n&&c.addClass("with-header")}else e.loadContentToolBarView()},postReady:function(){var e=this;e.setupImageAnimationControls(),e.listenTo(n,"loadNextItem",e.loadNextItem,e)},loadNextItem:function(t){var a=this,n=a.$(".image-controls-wrap");if(a.removePlayer(),a.imgTimer&&e.clearTimeout(a.imgTimer),"Video"===t.type){n.addClass("hide");var o=r.find(a.model.get("data"),function(e){return e.id===t.id});if("undefined"==typeof o)return a.watchPlaylist.updatePlayer(null),void a.watchPlaylist.loadNextPlaylistItem(t.id);r.extend(a.playerConfig,{video:o,showEndCard:!1}),a.player=new i.MatterhornVideoPlayer("player",a.playerConfig),a.watchPlaylist.updatePlayer(a.player)}else"Image"===t.type&&(a.watchPlaylist.updatePlayer(null),n.removeClass("hide").addClass("play"),a.$("#player").empty().append(s("<img>",{src:t.image,alt:t.seo_title,id:t.id,width:"100%"})),a.imgTimer=e.setTimeout(function(){a.watchPlaylist.loadNextPlaylistItem(t.id)},5e3));e.location.replace("#idx/"+t.id)},setupImageAnimationControls:function(){var t=this,i=t.$("#player");t.$(".image-controls-wrap").click(function(){var a=s(this);a.toggleClass("play"),t.imgTimer&&e.clearTimeout(t.imgTimer),a.hasClass("play")&&(t.imgTimer=e.setTimeout(function(){t.watchPlaylist.loadNextPlaylistItem(i.find("img").attr("id"))},5e3))})}})}(this),Whiskers("modules.watch_message",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("data",e,t,1),e,t,0,9,100,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <div class="bound"> '),i.s(i.f("watch_message",e,t,1),e,t,0,48,74,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("<h4>"),i.b(i.v(i.f("watch_message",e,t,0))),i.b("</h4>")}),e.pop()),i.b(" </div> ")}),e.pop()),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e._,a=e.Whiskers,n=t.ModuleView.extend({style_classes:["custom-padding"],render:function(){var e=i.first(this.model.get("data")),t=i.extend({data:e});this.$el.html(a.modules.watch_message.render(t))}});n.register("watch_message",{})}(this),Whiskers("modules.watch_playlist",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.b('<div class="watch-playlist slider-view pagination-styles dark"> <div class="bound"> <div class="hider"></div> <div class="slides peek-'),a.b(a.v(a.f("rpp",e,t,0))),a.b(' peeking"> <div class="peek left"></div> <div class="peek"></div> <ol class="slider-list peek-'),a.b(a.v(a.f("rpp",e,t,0))),a.b('"> '),a.s(a.f("pages",e,t,1),e,t,0,255,1081,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(' <li class="slider-page"> <ul class="col-container cols-'),i.b(i.v(i.f("rpp",e,t,0))),i.b(' rows-1"> '),i.s(i.f("models",e,t,1),e,t,0,339,1057,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <li class="col item"> <a href="'),i.b(i.v(i.f("href",e,t,0))),i.b('" id="'),i.b(i.v(i.f("id",e,t,0))),i.b('" class="entity-container ratio-16x9" data-next="'),i.b(i.v(i.f("nextItem",e,t,0))),i.b('"> <div class="thumb-box entity-box"> '),i.s(i.f("vType",e,t,1),e,t,0,500,622,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <span class="thumb-play-btn-wrap"> <span class="thumb-play-btn-bg"> </span> <span class="thumb-play-btn"></span> </span> ')}),e.pop()),i.b(' <div class="aspect"> <div class="now-playing-title"> <h3 class="overlay-title" aria-hidden="true">'),i.b(i.v(i.f("now_playing",e,t,0))),i.b('</h3> </div> <div class="thumbnail"> <img src="'),i.b(i.v(i.f("thumb",e,t,0))),i.b('" class="thumb" alt="'),i.b(i.v(i.f("title",e,t,0))),i.b('"> '),i.s(i.f("badge",e,t,1),e,t,0,845,887,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<img src="'),i.b(i.v(i.f("badge",e,t,0))),i.b('" class="badge" alt="">')}),e.pop()),i.b(' </div> </div> <div class="hover-title"> <div class="text-hidden"><h3 class="skip-text-styles" aria-hidden="true">'),i.b(i.v(i.f("title",e,t,0))),i.b("</h3></div> </div> </div> </a> </li> ")}),e.pop()),i.b(" </ul> </li> ")}),e.pop()),a.b(' </ol> <div class="count"> <p><span class="title">'),a.b(a.v(a.f("playlistTitle",e,t,0))),a.b(' &nbsp;|&nbsp; </span> <span class="item-index">'),a.b(a.v(a.f("currentIndex",e,t,0))),a.b("</span> "),a.b(a.v(a.d("translations.of",e,t,0))),a.b(" "),a.b(a.v(a.f("totolItems",e,t,0))),a.b('</p> </div> </div> </div> </div> <div class="pulldown-bar"><div class="arrow up"></div></div>'),a.fl()},partials:{},subs:{}}),function(e){"use strict";function t(e,t,i){for(var a=i?"&":"?",n=[],r=[],s=0,o=0;o<e.length;o++)if(e[o].href=e[o].href+a+"playlist="+t,(r=e[o].images)&&r.length>0){for(var l=0;l<r.length;l++)r[l].order=++s,r[l].type="Image",r[l].href=e[o].href+"#image/"+r[l].id,r[l].nextItem=e[o].href;n=n.concat(r)}else e[o].nextItem=e[o+1]?e[o+1].href+a+"playlist="+t:"",e[o].order=++s,n.push(e[o]);return n}function i(e,t,i){var a=e,n=t.id,r=(t.order||t.get("order"))-1;if(u.each(a.$(".slider-list li a .active"),function(e){a.$(e).removeClass("active")}),n){var s=a.$("#"+n);s.find(".thumb-box").addClass("active"),s.find(".thumbnail").addClass("active"),s.find(".now-playing-title").addClass("active"),a.$(".item-index").text(t.order)}if(i&&r>=0){var o=a.rpp(),l=Math.floor(r/o);a.$(".slides ol").swipeasaurus("slide",l)}}function a(t){t&&(e.location.href=t)}var n=e.Disney,r=n.Style.breakpoints,s=[r.midLow,r.midHigh],o=e.Backbone,l=e.jQuery,c=e.Whiskers,d=n.Cookie,u=e._,h=!1,f=null,p=o.Resize.width,m="manual-play";n.WatchPlaylistView=o.View.extend({videoPlayer:null,breakpoints:s.join(" "),events:{"click .pulldown-bar":function(){this.showPlaylist()},"click .hider":function(){this.showPlaylist()},"click .watch-playlist .slides":function(e){e.stopPropagation()}},showPlaylist:function(){f||(h?(h=!1,l("#playlist-holder").addClass("closed").removeClass("open"),l(".hider").fadeIn()):(h=!0,l("#playlist-holder").addClass("open").removeClass("closed"),l(".hider").fadeOut()))},initialize:function(){this.videoPlayer=this.options.videoPlayer||null,this.loadItemsWithinModule=this.options.loadItemsWithinModule||!1,this.init()},render:function(){var t=this,a=this.rpp(),n=this.options.keepPlayListOpenOnLoad||!1,s=this.model.get("translations"),o=t.options.itemToPlayOnLoad||t.model.get("data")[0].id,d=u.indexOf(u.pluck(this.listData.models,"id"),o);0>d&&(d=0);var h=t.listData.models[d],m=Math.floor(d/a),g={cds:this.options.cdsMode,rpp:a,currentTitle:h.get("title"),currentIndex:h.get("order"),totolItems:t.listData.length,playlistTitle:t.playlistTitle,pages:t.listData.pages(a,{nest:1}),translations:s};this.$el.html(c.modules.watch_playlist.render(g)),this.$(".slides ol").swipeasaurus({arrows:!0,loop:!1,right:.2/(a+.2),index:m}),t.$(".slides ol").delegate("a","click",function(e){var i=this;return i&&t.loadSelectedPlaylistItem(e.currentTarget,i),!1}),i(this,h),l(".hider").fadeOut(),!n&&p()>=r.midHigh&&(f=e.setTimeout(this.closePlaylist,5e3)),this.videoPlayer&&this.videoPlayer.adPattern.setPlaylistLoaded(!0),this.playlistLoaded=!0},closePlaylist:function(){f&&(e.clearTimeout(f),f=null),l("#playlist-holder").addClass("closed").removeClass("open"),l(".hider").fadeIn()},init:function(){var i=/(?:\?|^|&)playlist=([0-9a-f]+)/,a=this,r=i.exec(e.location.search);if(a.pageUrl=/[^\/]+?:\/\/[^#]+/.exec(e.location.href),r){r=r[1];var s=this.options.cdsMode?"?cds":"";l.ajax((n.ajaxBase||"/")+"lists/"+r+".json"+s,{dataType:"json",cache:!0}).then(function(e){a.playlistTitle=e.title,a.adTime=e.adTime,a.adPattern=e.adPattern,a.videoPlayer&&(a.videoPlayer.adPattern.setPlaylistAdTime(e.adTime),a.videoPlayer.adPattern.setPlaylistAdPattern(e.adPattern),a.videoPlayer.messageBus.addMessageListener("playComplete",u.bind(a.loadNextPlaylistItem,a))),a.vpListWithGalleryImages=t(e.data,r,a.options.cdsMode),a.listData=new o.LazyCollection(a.vpListWithGalleryImages),a.render(),a.options.itemToPlayOnLoad&&a.loadPlaylistItem(a.options.itemToPlayOnLoad,!1,!0),a.videoPlayer&&a.configureEndCard(a.videoPlayer)})}},rpp:function(){var e=p()>=r.midHigh;return e?4:2},isPlaylistLoaded:function(){return this.playlistLoaded},configureEndCard:function(){var e=l(".card"),t="#"+this.videoPlayer.config.video.id,i=l(t).attr("data-next");i?this.videoPlayer.config.showEndCard=!1:(this.videoPlayer.config.showEndCard=!0,e.find(".countdown_intro").css("display","none"),e.find(".btn_next").css("display","none"),e.find(".priority").removeClass("priority"),e.find(".btn_replay").css("left","410px"),d.set(m,"ON"),this.videoPlayer.endCard.replay=function(){var e=u.first(l(".item")),t=l(e).find("a").attr("href");a(t)})},loadNextPlaylistItem:function(){var e=this.videoPlayer&&this.videoPlayer.config.video&&this.videoPlayer.config.video.id||arguments&&arguments[0];if(this.loadItemsWithinModule)this.loadPlaylistItem(e,!0);else if(e){var t=this.$("#"+e).attr("data-next");a(t)}},loadSelectedPlaylistItem:function(t,i){var n=this.$(t),r=n.attr("id");if(this.loadItemsWithinModule)this.loadPlaylistItem(r,!1,!0);else{if(e.Tracker){var s=l.trim(n.find("img").attr("alt")||n.text()),o=n.attr("href"),c=this.$(".slides ol a").index(n),d=["stream","playlist",c,"link"].join("/"),u=[d,s].join("/");e.Tracker.link({linkName:u,linkPosition:d,href:o})}a(i)}},loadPlaylistItem:function(t,a,n){var r=this,s=u.find(r.vpListWithGalleryImages,function(e){return e.id===t});if("undefined"==typeof s&&(s=u.first(r.vpListWithGalleryImages),a=!1),a&&(s=r.vpListWithGalleryImages[s.order]||r.vpListWithGalleryImages[0]),n&&e.Tracker){var l=s.title||s.seo_title,c=r.pageUrl+"#idx/"+s.id,d=s.order-1,h=["stream","playlist",d,"link"].join("/"),f=[h,l].join("/");e.Tracker.link({linkName:f,linkPosition:h,href:c})}i(this,s,!0),o.trigger("loadNextItem",s)},updatePlayer:function(e){var t=this;t.videoPlayer=e,t.videoPlayer&&(t.videoPlayer.adPattern.setPlaylistAdTime(t.adTime),t.videoPlayer.adPattern.setPlaylistAdPattern(t.adPattern),t.videoPlayer.messageBus.addMessageListener("playComplete",u.bind(t.loadNextPlaylistItem,t)))}})}(this),Whiskers("modules.weather",{code:function(e,t,i){"use strict";var a=this;return a.b(i=i||""),a.s(a.f("time_config",e,t,1),e,t,0,16,459,"{{ }}")&&(a.rs(e,t,function(e,t,i){i.b(" <div class='weather-elements "),i.b(i.v(i.f("time_category",e,t,0))),i.b(" "),i.b(i.v(i.f("time",e,t,0))),i.b("'> "),i.s(i.f("afternoon",e,t,1),e,t,0,89,212,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(' <div class="rainbow"> <span class="arc arc1"></span> <span class="arc arc2"></span> <span class="arc arc3"></span> </div> ')}),e.pop()),i.b(' <div class="moving-element moving-element1"></div> <div class="moving-element moving-element2"></div> <div class="container"> <div class="glow"></div> <div class="element-featured'),i.s(i.f("midnight",e,t,1),e,t,0,419,423,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b(" el2")}),e.pop()),i.b('"></div> </div> </div> ')}),e.pop()),a.fl()},partials:{},subs:{}}),function(e){"use strict";var t=e.Grill,i=e.Whiskers,a=e.Disney,n=a.Style.breakpoints,r=e.Backbone,s=e.jQuery,o=e._;s(function(){a.topper_nav.on("ready",function(){var e=s(".module.junior_weather"),t=s("#takeover-area .overlay.default .main-image");e.insertBefore(t)})}),t.ModuleView.register("junior_weather",{template:i.modules.weather,render:function(){var e=this.getCurrentTime(),t={time_category:"daytime",time:e};switch(e){case"night":t.time_category="nighttime";break;case"midnight":t.time_category="nighttime",t.midnight=!0;break;case"afternoon":t.afternoon=!0}var i=o.extend({time_config:t},this.model);this.$el.html(this.template.render(i)),this.setTakeoverStyles(e)},ready:function(){var e=this,t=r.Resize.width()>=n.chromeMax,i=e.$(".weather-elements .container");t&&(o.delay(function(){i.addClass("visible")},1600),i.one("transitionend",function(t){var i=t.originalEvent.propertyName;("right"===i||"left"===i||"opacity"===i||"bottom"===i)&&o.delay(function(){e.setAnimation()},2e3)}))},setTakeoverStyles:function(e){var t=this.model.get("style_options"),i=t&&t.image_assets,n=i&&i.default_background.desktop,r=i&&i.day.desktop,s=i&&i.night.desktop,o=t&&t[e]&&t[e].main_background_color,l=t&&t[e]&&t[e].top_gradient_color,c={pushdown_safety_color:o,main_background_color:o,top_gradient:{color:l,color_stop:"15%"},main_image:n};c.repeating_image="night"===e||"midnight"===e?s:r,a.Style.applyTakeoverStyles(c,!1,!0)},getCurrentTime:function(){var t,i=e.location.search.split("?"),a={},n=["midnight","morning","afternoon","evening","night"];if(s.each(i,function(e,t){var i=t.split("=");i.length>1&&(a[i[0]]=i[1])}),a.time&&o.contains(n,a.time))t=a.time;else{var r=!isNaN(a.time)&&a.time||(new Date).getHours();t=this.convertHours(r)}return t},convertHours:function(e){return e>=0&&5>e?"midnight":e>=5&&11>e?"morning":e>=11&&17>e?"afternoon":e>=17&&21>e?"evening":e>=21&&24>=e?"night":"afternoon"},moveElements:function(e,t,i){var a=9e4,n=a+Math.floor(a*Math.random());e.addClass("move"),e.on("transitionend",function(a){a.stopPropagation(),"right"===a.originalEvent.propertyName&&(s(a.currentTarget).removeClass("move"),e.off("transitionend"),o.delay(i.moveElements,n,e,t,i))})},setAnimation:function(){var e=this,t=e.$(".moving-element1"),i=e.$(".moving-element2"),a=e.getCurrentTime();e.moveElements(t,a,e),o.delay(e.moveElements,15e3,i,a,e),"afternoon"===a&&e.$(".rainbow").addClass("visible")}})}(this);