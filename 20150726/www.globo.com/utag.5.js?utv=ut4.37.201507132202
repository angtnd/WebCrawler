//tealium universal tag - utag.5 ut4.0.201507131740, Copyright 2015 Tealium.com Inc. All Rights Reserved.
!function(){function t(t,o){t=t||"",o=o||{};for(var u in e)e.hasOwnProperty(u)&&(o.autoFix&&(o["fix_"+u]=!0),o.fix=o.fix||o["fix_"+u]);var c=[],f=document.createElement("div"),g=function(t){return"string"==typeof t&&-1!==t.indexOf("&")?(f.innerHTML=t,f.textContent||f.innerText||t):t},l=function(e){t+=e},m=function(e){t=e+t},p={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},T={comment:function(){var e=t.indexOf("-->");return e>=0?{content:t.substr(4,e),length:e+3}:void 0},endTag:function(){var e=t.match(a);return e?{tagName:e[1],length:e[0].length}:void 0},atomicTag:function(){var e=T.startTag();if(e){var n=t.slice(e.length);if(n.match(new RegExp("</\\s*"+e.tagName+"\\s*>","i"))){var a=n.match(new RegExp("([\\s\\S]*?)</\\s*"+e.tagName+"\\s*>","i"));if(a)return{tagName:e.tagName,attrs:e.attrs,content:a[1],length:a[0].length+e.length}}}},startTag:function(){var e=t.indexOf(">");if(-1===e)return null;var a=t.match(n);if(a){var i={},o={},u=a[2];return a[2].replace(r,function(t,e){if(arguments[2]||arguments[3]||arguments[4]||arguments[5])if(arguments[5])i[arguments[5]]="",o[e]=!0;else{var n=arguments[2]||arguments[3]||arguments[4]||s.test(e)&&e||"";i[e]=g(n)}else i[e]=null;u=u.replace(t,"")}),{tagName:a[1],attrs:i,booleanAttrs:o,rest:u,unary:!!a[3],length:a[0].length}}},chars:function(){var e=t.indexOf("<");return{length:e>=0?e:t.length}}},v=function(){for(var e in p)if(p[e].test(t)){i&&console.log("suspected "+e);var n=T[e]();return n?(i&&console.log("parsed "+e,n),n.type=n.type||e,n.text=t.substr(0,n.length),t=t.slice(n.length),n):null}},h=function(t){for(var e;e=v();)if(t[e.type]&&t[e.type](e)===!1)return},d=function(){var e=t;return t="",e},N=function(){return t};return o.fix&&!function(){var e=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,n=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,a=[];a.last=function(){return this[this.length-1]},a.lastTagNameEq=function(t){var e=this.last();return e&&e.tagName&&e.tagName.toUpperCase()===t.toUpperCase()},a.containsTagName=function(t){for(var e,n=0;e=this[n];n++)if(e.tagName===t)return!0;return!1};var r=function(t){return t&&"startTag"===t.type&&(t.unary=e.test(t.tagName)||t.unary,t.html5Unary=!/\/>$/.test(t.text)),t},s=v,i=function(){var e=t,n=r(s());return t=e,n},u=function(){var t=a.pop();m("</"+t.tagName+">")},c={startTag:function(t){var e=t.tagName;"TR"===e.toUpperCase()&&a.lastTagNameEq("TABLE")?(m("<TBODY>"),g()):o.fix_selfClose&&n.test(e)&&a.containsTagName(e)?a.lastTagNameEq(e)?u():(m("</"+t.tagName+">"),g()):t.unary||a.push(t)},endTag:function(t){var e=a.last();e?o.fix_tagSoup&&!a.lastTagNameEq(t.tagName)?u():a.pop():o.fix_tagSoup&&f()}},f=function(){s(),g()},g=function(){var t=i();t&&c[t.type]&&c[t.type](t)};v=function(){return g(),r(s())}}(),{append:l,readToken:v,readTokens:h,clear:d,rest:N,stack:c}}var e=function(){var t,e={},n=this.document.createElement("div");return t="<P><I></P></I>",n.innerHTML=t,e.tagSoup=n.innerHTML!==t,n.innerHTML="<P><i><P></P></i></P>",e.selfClose=2===n.childNodes.length,e}(),n=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,a=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,r=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,s=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,i=!1;t.supports=e,t.tokenToString=function(t){var e={comment:function(t){return"<!--"+t.content},endTag:function(t){return"</"+t.tagName+">"},atomicTag:function(t){return i&&console.log(t),e.startTag(t)+t.content+e.endTag(t)},startTag:function(t){var e="<"+t.tagName;for(var n in t.attrs){e+=" "+n;var a=t.attrs[n];("undefined"==typeof t.booleanAttrs||"undefined"==typeof t.booleanAttrs[n])&&(e+='="'+(a?a.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"')}return t.rest&&(e+=t.rest),e+(t.unary&&!t.html5Unary?"/>":">")},chars:function(t){return t.text}};return e[t.type](t)},t.escapeAttributes=function(t){var e={};for(var n in t){var a=t[n];e[n]=a&&a.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var o in e)t.browserHasFlaw=t.browserHasFlaw||!e[o]&&o;this.htmlParser=t}();!function(){function t(){}function e(t){return t!==l&&null!==t}function r(t){return"function"==typeof t}function n(t,e,r){var n,i=t&&t.length||0;for(n=0;i>n;n++)e.call(r,t[n],n)}function i(t,e,r){var n;for(n in t)t.hasOwnProperty(n)&&e.call(r,n,t[n])}function o(t,e){return i(e,function(e,r){t[e]=r}),t}function s(t,r){return t=t||{},i(r,function(r,n){e(t[r])||(t[r]=n)}),t}function a(t){try{return d.call(t)}catch(e){var r=[];return n(t,function(t){r.push(t)}),r}}function u(t){return t&&"tagName"in t?!!~t.tagName.toLowerCase().indexOf("script"):!1}function c(t){return t&&"tagName"in t?!!~t.tagName.toLowerCase().indexOf("style"):!1}var p={afterAsync:t,afterDequeue:t,afterStreamStart:t,afterWrite:t,autoFix:!0,beforeEnqueue:t,beforeWriteToken:function(t){return t},beforeWrite:function(t){return t},done:t,error:function(t){throw t},releaseAsync:!1},h=this,l=void 0;if(!h.postscribe){var f=!1,d=Array.prototype.slice,y=function(t){return t[t.length-1]},m=function(){function t(t,r,n){var i=p+r;if(2===arguments.length){var o=t.getAttribute(i);return e(o)?String(o):o}e(n)&&""!==n?t.setAttribute(i,n):t.removeAttribute(i)}function s(e,r){var n=e.ownerDocument;o(this,{root:e,options:r,win:n.defaultView||n.parentWindow,doc:n,parser:htmlParser("",{autoFix:r.autoFix}),actuals:[e],proxyHistory:"",proxyRoot:n.createElement(e.nodeName),scriptStack:[],writeQueue:[]}),t(this.proxyRoot,"proxyof",0)}var p="data-ps-";return s.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var t;!this.deferredRemote&&this.writeQueue.length;)t=this.writeQueue.shift(),r(t)?this.callFunction(t):this.writeImpl(t)},s.prototype.callFunction=function(t){var e={type:"function",value:t.name||t.toString()};this.onScriptStart(e),t.call(this.win,this.doc),this.onScriptDone(e)},s.prototype.writeImpl=function(t){this.parser.append(t);for(var e,r,n,i=[];(e=this.parser.readToken())&&!(r=u(e))&&!(n=c(e));)e=this.options.beforeWriteToken(e),e&&i.push(e);this.writeStaticTokens(i),r&&this.handleScriptToken(e),n&&this.handleStyleToken(e)},s.prototype.writeStaticTokens=function(t){var e=this.buildChunk(t);if(e.actual)return e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,f&&(e.proxyInnerHTML=this.proxyRoot.innerHTML),this.walkChunk(),f&&(e.actualInnerHTML=this.root.innerHTML),e},s.prototype.buildChunk=function(t){var e=this.actuals.length,r=[],i=[],o=[];return n(t,function(t){var n=htmlParser.tokenToString(t);if(r.push(n),t.attrs){if(!/^noscript$/i.test(t.tagName)){var s=e++;i.push(n.replace(/(\/?>)/," "+p+"id="+s+" $1")),"ps-script"!==t.attrs.id&&"ps-style"!==t.attrs.id&&o.push("atomicTag"===t.type?"":"<"+t.tagName+" "+p+"proxyof="+s+(t.unary?" />":">"))}}else i.push(n),o.push("endTag"===t.type?n:"")}),{tokens:t,raw:r.join(""),actual:i.join(""),proxy:o.join("")}},s.prototype.walkChunk=function(){for(var r,n=[this.proxyRoot];e(r=n.shift());){var i=1===r.nodeType,o=i&&t(r,"proxyof");if(!o){i&&(this.actuals[t(r,"id")]=r,t(r,"id",null));var s=r.parentNode&&t(r.parentNode,"proxyof");s&&this.actuals[s].appendChild(r)}n.unshift.apply(n,a(r.childNodes))}},s.prototype.handleScriptToken=function(t){var e=this.parser.clear();if(e&&this.writeQueue.unshift(e),t.src=t.attrs.src||t.attrs.SRC,t=this.options.beforeWriteToken(t)){t.src&&this.scriptStack.length?this.deferredRemote=t:this.onScriptStart(t);var r=this;this.writeScriptToken(t,function(){r.onScriptDone(t)})}},s.prototype.handleStyleToken=function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.type=t.attrs.type||t.attrs.TYPE||"text/css",t=this.options.beforeWriteToken(t),t&&this.writeStyleToken(t),e&&this.write()},s.prototype.writeStyleToken=function(t){var e=this.buildStyle(t);this.insertStyle(e),t.content&&(e.styleSheet&&!e.sheet?e.styleSheet.cssText=t.content:e.appendChild(this.doc.createTextNode(t.content)))},s.prototype.buildStyle=function(t){var e=this.doc.createElement(t.tagName);return e.setAttribute("type",t.type),i(t.attrs,function(t,r){e.setAttribute(t,r)}),e},s.prototype.insertStyle=function(t){this.writeImpl('<span id="ps-style"/>');var e=this.doc.getElementById("ps-style");e.parentNode.replaceChild(t,e)},s.prototype.onScriptStart=function(t){t.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(t)},s.prototype.onScriptDone=function(t){return t!==this.scriptStack[0]?void this.options.error({message:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,t.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=null)))},s.prototype.writeScriptToken=function(t,e){var r=this.buildScript(t),n=this.shouldRelease(r),i=this.options.afterAsync;t.src&&(r.src=t.src,this.scriptLoadHandler(r,n?i:function(){e(),i()}));try{this.insertScript(r),(!t.src||n)&&e()}catch(o){this.options.error(o),e()}},s.prototype.buildScript=function(t){var e=this.doc.createElement(t.tagName);return i(t.attrs,function(t,r){e.setAttribute(t,r)}),t.content&&(e.text=t.content),e},s.prototype.insertScript=function(t){this.writeImpl('<span id="ps-script"/>');var e=this.doc.getElementById("ps-script");e.parentNode.replaceChild(t,e)},s.prototype.scriptLoadHandler=function(t,e){function r(){t=t.onload=t.onreadystatechange=t.onerror=null}function n(){r(),e()}function i(t){r(),s(t),e()}var s=this.options.error;o(t,{onload:function(){n()},onreadystatechange:function(){/^(loaded|complete)$/.test(t.readyState)&&n()},onerror:function(){i({message:"remote script failed "+t.src})}})},s.prototype.shouldRelease=function(t){var e=/^script$/i.test(t.nodeName);return!e||!!(this.options.releaseAsync&&t.src&&t.hasAttribute("async"))},s}();h.postscribe=function(){function e(){var t,e=c.shift();e&&(t=y(e),t.afterDequeue(),e.stream=n.apply(null,e),t.afterStreamStart())}function n(r,n,s){function c(t){t=s.beforeWrite(t),l.write(t),s.afterWrite(t)}l=new m(r,s),l.id=u++,l.name=s.name||l.id,i.streams[l.name]=l;var p=r.ownerDocument,h={close:p.close,open:p.open,write:p.write,writeln:p.writeln};o(p,{close:t,open:t,write:function(){return c(a(arguments).join(""))},writeln:function(){return c(a(arguments).join("")+"\n")}});var f=l.win.onerror||t;return l.win.onerror=function(t,e,r){s.error({msg:t+" - "+e+":"+r}),f.apply(l.win,arguments)},l.write(n,function(){o(p,h),l.win.onerror=f,s.done(),l=null,e()}),l}function i(n,i,o){r(o)&&(o={done:o}),o=s(o,p),n=/^#/.test(n)?h.document.getElementById(n.substr(1)):n.jquery?n[0]:n;var a=[n,i,o];return n.postscribe={cancel:function(){a.stream?a.stream.abort():a[1]=t}},o.beforeEnqueue(a),c.push(a),l||e(),n.postscribe}var u=0,c=[],l=null;return o(i,{streams:{},queue:c,WriteStream:m})}()}}();try{(function(url,i){var self=utag.o[i].sender[url]={};self.ev={"view":1,"link":1};self.map={"ad_site_page":"site_page","ad_positions_available":"positions","ad_positions_list":"ads","ad_query":"query_string"};self.send=function(timeoutKey,headers){if(self.ev[timeoutKey]||self.ev.all!==undefined){var c;var j;var keys;var k;var i;self.data={"ad_server":"//ads.globo.com/RealMedia/ads/adstream_jx.ads/","site_page":"","ads":"","positions":"","query_string":""};for(j in utag.loader.GV(self.map)){if(headers[j]!==undefined&&headers[j]!==""){keys=self.map[j].split(",");k=0;for(;k<keys.length;k++){self.data[keys[k]]=headers[j];}}}
if(self.data.ad_server&&(self.data.site_page&&(self.data.ads&&self.data.ads instanceof Array))){var id=0;for(;id<self.data.ads.length;id++){var args=self.data.ads[id];if(args.id&&(args.height&&(args.width&&args.position))){var oEl=document.getElementById(args.id);if(oEl){var random=(""+Math.random()).substring(2,11);var requestString=self.data.ad_server+self.data.site_page+"/1"+random;if(self.data.positions){requestString+="@"+self.data.positions+"!"+args.position;}else{requestString+="@"+args.position;}
if(self.data.query_string){requestString+="?"+self.data.query_string;}
postscribe(oEl,'<script language="javascript" type="text/javascript" src="'+requestString+'"><\/script>');}}}}}};utag.o[i].loader.LOAD(url);})("5","globo.home");}catch(error$$2){utag.DB(error$$2);};