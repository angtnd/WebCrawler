/* bump_cloud_build:smp-external-feedback@bbc.co.uk */
define("mp/modules/policies",[],function(){var e={iplayer:{guidanceCleared:!1,siteID:"iPlayer",defaultUiClass:"iplayer",mediasetClass:"pc",ui:{cta:{iplayer:!0}}},news:{ui:{colour:"#bb1919",alternateColour:"#bb1919",cta:{mode:"default"}},preferPlainOverDash:!0,guidanceCleared:!0,siteID:"News",defaultUiClass:"news",mediasetClass:"journalism",preferHtmlOnMobile:!0},sport:{ui:{colour:"#eed71c",foreColour:"#000000",alternateColour:"#0087ff",alternateForeColour:"#ffffff"},siteID:"Sport",defaultUiClass:"sport",guidanceCleared:!0,mediasetClass:"journalism"},generic:{ui:{colour:"#ebebeb",foreColour:"#101010"},guidanceCleared:!0,mediasetClass:"journalism"},background:{noTracking:!0,backgroundPlayer:!0,mediasetClass:"journalism",responsive:!0,loop:!0,muted:!0,autoplay:!0,includeAppClickHandler:!1,ui:{controls:{enabled:!1},errorDialog:{enabled:!1},buffer:{enabled:!1},cta:{enabled:!1},fullscreen:{enabled:!1,dblclick:!1},poster:{availableWhenPaused:!0,availableWhenSettingUp:!0},displayCover:!0,hideDefaultErrors:!0}}};return e});define("mp/classes/errors/error",[],function(){function e(e,t,a){var n="en";if(e){n=e.locale();if(e.overrideError)var o=e.overrideError[t]}t=i[t]||t;if(window.embeddedMedia.language){var r=window.embeddedMedia.language.t(t,n,o);if(r!=t)return r}return a||"Unknown Error"}function t(t,i,a){a||(a={});this._c=t;this._s=a.severity||"critical";this._d=e(i,t+"",a.description||a.detail);return this}var i={6003:"errorUnsupported",6005:"6004",6010:"errorFlashPlayerNotInstalled",6012:"errorUnsupported",6014:"contentNotAvailableHtml"};t.prototype={code:function(){return this._c},description:function(){return this._d},detail:function(){return""},severity:function(){return this._s},responsibility:function(){return"client"}};return t});define("mp/classes/settings",["jquery-1.9","mp/modules/policies","mp/classes/errors/error"],function(e,t,i){function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*new Date%16|0,i="x"==e?t:3&t|8;return i.toString(16)}).toUpperCase()}function n(e){e&&e.getFullYear||(e=new Date);var t=Math.floor(1.25*e.getFullYear()),i=e.valueOf(),a=new Date(i);a.setMonth(2);a.setDate(31-(t+4)%7);a.setUTCHours(1);a.setUTCMinutes(0);a.setUTCSeconds(0);var n=new Date(i);n.setMonth(9);n.setDate(31-(t+1)%7);n.setUTCHours(1);n.setUTCMinutes(0);n.setUTCSeconds(0);return e>a&&n>e}function o(t,i,a){if("playlistObject"==i||"today"==i)t[i]=a;else{var n="object"==typeof a;n?"object"==typeof d[i]&&e.extend(!0,t[i],a):t[i]=a}}function r(e,t,i){if(e){var a=0;t&&t.width&&(a=t.width());(0===a||isNaN(a))&&(a=768);i&&i.densityMultiplier&&(a*=i.densityMultiplier);for(var n=c.length-1;n>0&&!(a/c[n]>.98);n--);var o=c[n]+"x"+p[n];return e.replace("{recipe}",o).replace("$recipe",o)}}var s="true"=="true",l={locale:{lang:"en",path:"//emp.bbci.co.uk/emp/translations/1.0.18/{lang}.xml"},subtitles:{supportLiveSubtitles:!s},thumbnail:{enabled:!1},colour:"#f54997",foreColour:"#ffffff",alternateColour:"#f54997",alternateForeColour:"#ffffff"},d={container:{},playlist:"",startTime:0,volume:.7,overrideHoldingImage:"",product:"iplayer",today:new Date,guidance:{},mediator:{},mediaProfile:"",includeAppClickHandler:!0,plugins:{player:{width:"640px",height:"360px",poster:""},toLoad:[]},configVars:{},quality:"medium",uiClass:"",customIStatsURL:"",enableStatsReporting:!0,customRdotBaseURL:"http://r.bbci.co.uk/e",autoplay:!1,enableRdotReporting:!0,enableSonarReporting:!0,enableBarbReporting:!0,statsObject:{},embedPageURL:location.href,forceGuidance:"",aaampGuidance:"",appName:"",appType:"",counterName:"smp.player.page",siteID:"",significantTime:10,playerType:"",daxSessionID:a(),blacklistedPlugins:["eavis"],suppressType:[],suppressItemKind:[],sessionID:"",overrideError:{},overrideErrorLink:{},pageType:"",parentSection:0,edition:"",uniqueID:0,ui:{},webcastData:{},allowMainlineProfiles:!0,liveEnvironment:s,hdVpids:"b06qc9md,b06qc9nc,b06qjzg2,b06qk163,b06rht8j,b06rjl2r,b06s1tvp,b06s1x59,b06srnjk,b06srnrp,b06trfvn,b06trhkk,b06t4nd8",optinPids:"p03cchwf"},c=[320,384,432,480,512,608,640,688,720,768,800,832,976,1024,1376,1920],p=[180,216,243,270,288,342,360,387,405,432,450,468,549,576,774,1080],u=function(e){return this.init(e)};u.prototype={set:function(){var t=this;if(2===arguments.length){var i=arguments[0],a=arguments[1];o(t,i,a)}else"object"==typeof arguments[0]&&e.each(arguments[0],function(e,i){o(t,e,i)});for(i in t.webcastData)if(t.webcastData.hasOwnProperty(i)){var r=t.webcastData[i];"[object Date]"===Object.prototype.toString.call(r)&&(t.webcastData[i]=r.getTime()/1e3)}t.isBSTime=n(t.today);return t},init:function(i){var a=this;a.reset();"object"!=typeof i&&(i={});var n=i.product||d.product,r=t[n]||t.generic;e.each(r,function(e,t){o(a,e,t)});a.ui=e.extend(!0,{},l,r.ui);var s=document.cookie+"";s.match(/NO-SA=1/)&&(a.noTracking=!0);s.indexOf(/bumpForceAlternate=true/)>-1&&(a.playerType="alternate");s.indexOf("ckps_smpj2OptIn=true")>-1&&(a.smpj2OptIn=!0);"weather"==i.appName&&(i.edition=i.pageType=null);return a.set(i)},reset:function(){var t=this,i=e.extend(!0,{},d);e.each(i,function(e,i){t[e]=i});return t},validate:function(){var e=this;if(!e.container||void 0===e.container.get(0)||0===e.container.length)throw"Error 6009 DOM element not found"},dispatch:function(t){var a=this,n=e.Event("error");n.errorData=new i(t,a);a.trigger(n)},trigger:function(e){var t=this;t.container&&"function"==typeof t.container.trigger&&t.container.trigger(e)},locale:function(){return this.ui.locale.lang},playingAudio:function(){var e=this;if(e.willPlayAudio)return!0;if(e.playlistObject&&e.playlistObject.items&&e.playlistObject.items[0]){var t=e.playlistObject.items[0].kind;return"radioProgramme"==t||"audio"==t}return!0},posterUrl:function(e){var t=this.playlistObject&&this.playlistObject.holdingImageURL||this.plugins.player.poster||this.overrideHoldingImage;return r(t,e,this.ui.poster)},doHdVersionCheck:function(){var e=this;if("medium"==e.quality&&e.playlistObject){var t=e.playlistObject.items;if(t&&t.length>0)for(var i=0;t.length>i;i++)if(t[i]&&(e.hdVpids+"").indexOf(t[i].vpid)!==-1){e.quality="hd";break}}e.statsObject&&e.statsObject.parentPID&&(e.hdVpids+"").indexOf(e.statsObject.parentPID+"")!==-1&&(e.quality="hd")}};return u});define("mp/modules/device",[],function(){function e(){var e=window.embeddedMedia.demi,n=e.ua,o=/ edge\//.test(n),r=/chrome/.test(n)&&!o,s=/windows phone/.test(n),l=function(){var e=/mac/.test(n),t={win:/windows/.test(n)&&!/windows phone/.test(n),mac:e&&!/like mac os x/.test(n),macsafari:/safari/.test(n)&&e&&!r&&!o&&!s,linux:/linux/.test(n),unix:/x11/.test(n),ios:/like mac os x/.test(n),android:/android/.test(n)&&!o,blackberry:/blackberry/.test(n)||/playbook/.test(n)||/bb10/.test(n),playbook:/playbook/.test(n),winphone:s,kindleSilk:/silk/.test(n)};for(var i in t)t[i]&&(t.name=i);if(t.win)/nt 5\./.test(n)?t.win="xp":/nt 6\.0/.test(n)?t.win="vista":/nt 6\.1/.test(n)?t.win="7":/nt 6\.2/.test(n)&&(t.win="8");else if(t.mac){n.match(/os x 10.(\d+)/g);t.mac=["cheetah","puma","jaguar","panther","tiger","leopard","snow leopard","lion","mountain lion"][parseInt(RegExp.$1,10)]||t.mac;n.match(/version\/[^\d]*(([\d|\.]+\d))/);t.safariVersion=parseFloat(RegExp.$1)}else if(t.ios){n.match(/os (\d+)/g);t.ios=parseInt(RegExp.$1,10)||t.ios}else if(t.android){n.match(/android[^\d]*(([\d|\.]+\d))/);t.androidVersion=parseFloat(RegExp.$1)}else t.winphone&&(/windows phone 8.0/.test(n)?t.winphone="windows phone 8.0":/windows phone 8.1/.test(n)&&(t.winphone="windows phone 8.1"));return t}(),d=e.isMobileDevice||e.isTabletDevice||l.ios||l.android||l.blackberry||l.winphone||l.kindleSilk,c=/fb_iab/.test(n)||/twitterandroid/.test(n)||/bbc_app/.test(n),p=window.MediaSource,u={connection:{mobile:e.isMobileNetwork},isTabletDevice:e.isTabletDevice,isMobileDevice:e.isMobileDevice,isMobileOrTablet:d,hasTouchScreen:d,hasStylus:e.hasStylus,os:l,hasHlsVodSupport:l.ios,hasMseSupport:p,supportsFlash:!0};if(u.os.blackberry&&!i){i=!0;n.match(/version\/\d+.(\d+.\d+)/);var m=parseFloat(RegExp.$1);m>3&&t.push("blackberry")}if(u.os.winphone&&0===a){n.match(/windows phone (\d+.\d+)/);a=parseFloat(RegExp.$1);a>=10&&t.push("winphone")}u.windowsPhone10=a>=10;for(var f=0;t.length>f;f++)u.os[t[f]]&&(u.hasHlsVodSupport=!0);u.allowHlsVod=function(){if(!u.hasHlsVodSupport&&(u.os.androidVersion>=4.1||!u.os.android&&!u.os.win)){t.push(u.os.name);u.hasHlsVodSupport=!0}};u.htmlAudio=u.os.androidVersion>=4.1||u.os.kindleSilk;u.useOpaque=r||/trident/.test(n)&&!u.isMobileOrTablet;u.waitForLoad=u.os.winphone||8===document.documentMode||9===document.documentMode;u.supportsFlash=!u.isMobileOrTablet;u.smpj2Compatible=u.hasMseSupport;u.supportsSvg=u.os.ios&&u.os.ios>=8||u.os.androidVersion>=4.4&&r;u.supportsSvgJ2=u.supportsSvg||u.smpj2Compatible;u.supportChromecast=r&&!o;u.requiresWindowOpenSMPAirLaunch=c;return u}var t=[],i=!1,a=0;return{get:e}});define("mp/modules/html5",[],function(){function e(e){var t=document.createElement(e);return!(!t||!t.canPlayType)}return{media:{audio:e("audio"),video:e("video")},audio:{},video:{}}});define("mp/classes/settingsbuilder",["jquery-1.9","mp/modules/device"],function(e,t){var i={mediasets:{pc:{flash:{desktop:"pc",cellular:"mobile-cellular-baseline",mobile:"mobile-phone-baseline",tablet:"mobile-tablet-baseline"},html5:{desktop:"apple-ipad-hls",cellular:"apple-iphone4-ipad-hls-3g",mobile:"apple-iphone4-hls",tablet:"apple-ipad-hls"},j2:{desktop:"pc",cellular:"mobile-cellular-main",mobile:"mobile-phone-main",tablet:"mobile-tablet-main"}},journalism:{flash:{desktop:"journalism-pc",cellular:"journalism-flash-3g",mobile:"journalism-flash-3g",tablet:"journalism-flash-3g"},html5:{desktop:"journalism-http-tablet",cellular:"journalism-http-3g",mobile:"journalism-http-mobile",tablet:"journalism-http-tablet"},j2:{desktop:"journalism-http-tablet",cellular:"journalism-http-3g",mobile:"journalism-http-mobile",tablet:"journalism-http-tablet"}}},mediaSet:function(e,i){if(e.mediator.overrideMediaSet)return e.mediator.overrideMediaSet;var a=e.mediaProfile;"pc"!=a&&"journalism"!=a&&(a=e.mediasetClass);"pc"!=a&&(a="journalism");e.mediasets=this.mediasets[a];var n=t.get(),o=e.mediasets[i||"flash"];return n.isMobileOrTablet?n.connection.mobile?o.cellular:n.isTabletDevice?o.tablet:o.mobile:o.desktop},mediatorHref:function(t,i,a){a||(a="{protocol}://{host}/mediaselector/5/select/version/2.0/mediaset/{mediaset}/vpid/{id}");var n={href:a,protocol:(location.protocol+"").substr(0,5),host:"open.live.bbc.co.uk",mediaset:i};e.extend(!0,n,t.mediator);var o=n.href;"https"!=n.protocol&&(n.protocol="http");e.each(n,function(e,t){o=o.replace("{"+e+"}",t)});return o}};return i});define("mp/classes/embedPopup",["jquery-1.9"],function(e){var t={show:function(i){t._embedBox&&t.close(!0);var a=i._settings;window.embeddedMedia.opened();var n={width:"100%",height:"100%",margin:"0px",position:"fixed","z-index":1e3,top:"0px",left:"0px","background-color":"#000000",zoom:1,filter:"alpha(opacity=50)",opacity:.5};t._background=e('<div id="embedBackground"></div>').css(n).appendTo(document.body);var o={"-webkit-box-orient":"horizontal","-webkit-box-pack":"center","-webkit-box-align":"center","-moz-box-orient":"horizontal","-moz-box-pack":"center","-moz-box-align":"center",display:"box","box-orient":"horizontal","box-pack":"center","box-align":"center",position:"fixed",width:"400px",height:"160px",bottom:"0",left:"0",top:"0",right:"0",margin:"auto","vertical-align":"middle","text-align":"center",color:"white","font-size":"22px","z-index":1001,"background-color":"#262626","font-family":"Arial, sans-serif"};t._embedBox=e('<div id="embedBox" role="alertdialog" aria-labelledby="embedMediaTitle" aria-describedby="embedMediaDescription"></div>').css(o).appendTo(document.body);var r=a.locale(),s=window.embeddedMedia.language,l=s.t("embedTitle",r),d=s.t("embedDescription",r),c=s.t("embedTerms",r),p=s.t("embedClose",r),u=e('<span id="embedMediaTitle" style="position:absolute;left:0px;margin-left:10%;margin-top:6%">'+l+'</span><span id="embedMediaDescription" style="display:none" aria-hidden="true">'+d+"</span>");u.appendTo(t._embedBox);var m={position:"absolute",width:"80%",height:"30px",top:"50%",left:0,"margin-top":"-15px","margin-left":"10%","font-size":"14px",color:"#848484"},f=encodeURIComponent(a.product),h=encodeURIComponent(i.playlist.title),g=a.externalEmbedUrl;if(g){for(var b=i.playlist.items,y=0;b.length>y;y++){var v=b[y].kind;if("programme"==v||"radioProgramme"==v){g=g.replace("{vpid}",b[y].identifier);break}}g=g.replace("{lang}",r)}else{if(i.playlist.url)var w=i.playlist.url;else a.playlistObject&&(w=a.playlistObject.legacyPlaylist);if(w){g="http://emp.bbc.co.uk/emp/embed/smpEmbed.html?playlist="+encodeURIComponent(w)+"&title="+h+"&product="+f;"en"!=r&&(g+="&lang="+r)}}if(g){var k='<iframe width="400" height="500" frameborder="0" src="'+g+'"></iframe>',P=e('<input type="text" id="embedText" />').css(m).appendTo(t._embedBox);e("#embedText")[0].value=k;var x={position:"absolute",bottom:0,left:0,"margin-bottom":"6%","margin-left":"10%","font-size":"0.6em",color:"#ffffff","text-decoration":"none"},_=e('<a target="_blank" href="http://www.bbc.co.uk/terms/additional_emp.shtml">'+c+"</a> ");_.css(x).appendTo(t._embedBox);P.click(function(){e(this).select()});setTimeout(function(){P.focus()},100);var C={position:"absolute",right:"0px","font-size":"0.8em",top:"0px","margin-top":"10px","margin-right":"10px",color:"#ffffff","text-decoration":"none",cursor:"pointer"},T=e('<a aria-label="'+p+'" href="#">x</a> ');T.css(C).appendTo(t._embedBox);T.click(function(e){e.preventDefault&&e.preventDefault();e.returnValue=!1;t.close()});t._tabList=[P,_,T];t._currentTab=0;var I=function(e){e=e||window.event;var i=e.keyCode||e.which;27===i&&t.close();if(9==i||13==i){e.preventDefault&&e.preventDefault();e.returnValue=!1;if(9==i){var a=t._tabList.length-1;t._currentTab=e.shiftKey?0===t._currentTab?a:t._currentTab-1:t._currentTab===a?0:t._currentTab+1;setTimeout(function(){t._tabList[t._currentTab].focus()},200)}else this.click()}};for(y=0;t._tabList.length>y;y++)t._tabList[y].keydown(I)}else t.close()},close:function(e){var t=this;e||window.embeddedMedia.closed();if(t._background){t._background.remove();t._background=void 0}if(t._embedBox){t._embedBox.remove();t._embedBox=void 0}}};return t});define("mp/classes/players/player",[],function(){function e(){this.includePoster=!0;this._volume=1;return this}e.prototype={name:function(){return this._name},setPoster:function(e,t){this.doPoster(e,t)},uiDefaults:function(e){var t=this._settings,i=t.ui;if(!t.guidanceCleared){i.guidance||(i.guidance={});i.guidance.pinRequired!==!1&&(i.guidance.pinRequired=!0)}if(e.isMobileOrTablet){i.controls||(i.controls={volumeSlider:!1});if(e.os&&e.os.blackberry){i.guidance||(i.guidance={});i.guidance.useFlashGuidance=!1}i.controls.popout=!1;i.controls.volumeSlider||(i.controls.volumeSlider=!1);t.volume=1}if(1!=window.devicePixelRatio&&!e.connection.mobile&&!t.lowBandwidth){i.poster||(i.poster={});i.poster.densityMultiplier||(i.poster.densityMultiplier=window.devicePixelRatio)}e.supportsSvg&&i.useHighResIcons!==!1&&(i.useHighResIcons=!0);try{var a=/[; ]ckps_smpSettings=([^\s;]*)/gim;a.test(" "+document.cookie);if(RegExp.$1){var n=JSON.parse(decodeURIComponent(RegExp.$1));if(n.controls){i.controls||(i.controls={});i.controls.timeout=n.controls.timeout;i.controls.sizeAdjust=n.controls.sizeAdjust;i.controls.spaceControlsPlayback|=n.controls.spaceControlsPlayback;i.controls.activeStartsAt=n.controls.activeStartsAt;i.controls.chromecastMode=n.controls.chromecastMode}if(n.subtitles){i.subtitles||(i.subtitles={});i.subtitles.contrast=n.subtitles.contrast;i.subtitles.supportLiveSubtitles|=n.subtitles.supportLiveSubtitles}}}catch(o){}},destroy:function(){this._container&&this._container.empty()},call:function(){},play:function(e){this.call("play",e)},stop:function(){this.call("stop")},suspend:function(){},pause:function(){this.call("pause")},next:function(){this.call("next")},pauseAt:function(e){if(e){e=e instanceof Array?e:[e];this.call("pauseAt",e)}},muted:function(e){"undefined"!=typeof e&&this.call("muted",e);return this._muted},volume:function(e){"number"==typeof e&&this.call("volume",e);return this._volume},duration:function(){return this._duration},ended:function(){return this._ended},seeking:function(){return this._seeking},paused:function(){return this._paused},kind:function(){return this._kind},mediaItem:function(){return this._mediaItem},loadedPlaylist:function(){return this.playlist},currentTime:function(e){"number"==typeof e&&this.call("currentTime",e);return this._currentTime},showSubtitles:function(e){this.call("showSubtitles",e)},setData:function(){},updateQuality:function(e){this.call("updateQuality",e)},webcastData:function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];"[object Date]"===Object.prototype.toString.call(i)&&(e[t]=i.getTime()/1e3)}},loadPluginWithCheck:function(e,t,i){for(var a=this._settings.blacklistedPlugins,n=0;a.length>n;n++)if((e+"").indexOf(a[n])>-1)return;this.call(i||"loadPlugin",t)},loadPlaylist:function(){},updateUiConfig:function(){}};return e});define("mp/classes/chromecastprovider",[],function(){function e(){}function t(e){this.errorState(e)}function i(e){this.currentSession=null;this.mediaSession=null;this.smp=e;this.isCasting=!1;this.isAvailable=!1;this.ccId="";this.cancelRequest=!1;this.interrupted=!1;var t=document.createElement("script");t.type="text/javascript";t.charset="utf-8";t.async=!0;t.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js";document.getElementsByTagName("head")[0].appendChild(t);a.call(this)}function a(){function i(e){r.currentSession=e;r.isAvailable=!0;r.dispatchToPlayer({detail:"Receivers available"});if(r.smp.playlist&&(r.smp._playing||!r.smp._paused)){for(var t=r.smp.playlist.items,i=0;t.length>i;i++){var a=t[i].kind;if("programme"===a||"radioProgramme"===a||"audio"===a){s=t[i].identifier;break}}r.dispatchToPlayer({state:"ATTEMPTING_CAST",id:r.ccId});r.requestCast(s)}}function n(e){r.smp.sonar.action(e,"ccAvailable");if("available"==e){r.isAvailable=!0;r.dispatchToPlayer({detail:"Receivers available"})}else{r.isAvailable=!1;r.isCasting=!1;r.dispatchToPlayer({detail:"Receivers not available"})}}function o(){r.smp._playing&&r.smp.pause()}var r=this,s="";if(chrome.cast&&chrome.cast.isAvailable){var l="5E81F6DB";if("sport"==r.smp._settings.product)l="F4ABD101";else for(var d=r.smp.playlist?r.smp.playlist.items:[],c=0;d.length>c;c++){var p=d[c].kind;if("radioProgramme"==p||"audio"==p){l="8A14322F";break}}var u=new chrome.cast.SessionRequest(l),m=new chrome.cast.ApiConfig(u,i.bind(r),n.bind(r));chrome.cast.initialize(m,e,t.bind(r));chrome.cast.addReceiverActionListener(o)}else setTimeout(a.bind(r),1e3)}i.prototype={requestCast:function(e){var i=this;if(i.currentSession)i.launchProg(e);else{var a=function(t){i.currentSession=t;i.launchProg(e)};chrome.cast.requestSession(a.bind(i),t.bind(i))}},requestStop:function(){chrome.cast.requestSession(e,e)},launchProg:function(e){var t=this;t.currentSession.addUpdateListener(t.onSessionUpdate.bind(t));t.ccId=t.currentSession.receiver.friendlyName;t.dispatchToPlayer({state:"CONNECTING",id:t.ccId});for(var i=t.smp.playlist.holdingImageURL||t.smp.playlist.posterImg,a=t.smp.playlist.links||[],n=0;a.length>n;n++)"holdingrecipe"===a[n].rel&&(i=a[n].href);t.loadMedia(e,t.smp.playlist.title,t.smp.playlist.summary,i)},loadMedia:function(e,i,a,n){var o=this;if(null==o.currentSession)o.errorState("There is no active media playback");else{var r,s=function(e){o.interrupted=!1;o.mediaSession=e;o.mediaSession.addUpdateListener(o.onMediaStatusUpdate.bind(o))},l=new chrome.cast.media.GenericMediaMetadata,d="";if(n){r=new chrome.cast.Image(n.indexOf("{recipe}")===-1&&n.indexOf("$recipe")===-1&&o.smp._settings.castPlaceholderImage?o.smp._settings.castPlaceholderImage:n.replace("{recipe}","1280x720").replace("$recipe","1280x720"));r.height=720;r.width=1280;l.images=[r];l.title=i;var c=n.split("/");d=c[c.length-1].split(".")[0]}for(var p="",u=o.smp.playlist.items,m=0;u.length>m;m++)if("programme"===u[m].kind||"radioProgramme"===u[m].kind||"audio"===u[m].kind){p=u[m].group;break}var f=new chrome.cast.media.MediaInfo(e,"video/mp4");f.metadata=l;f.customData={base_image_url:"http://ichef.bbci.co.uk/programmeimages/"+d+"/",secondary_title:a,original_pid:p,sender:"smp",image_identifier:d};var h=new chrome.cast.media.LoadRequest(f);h.currentTime=o.smp.currentTime();h.currentTime>=o.smp.duration()-5&&(h.currentTime=0);o.currentSession.loadMedia(h,s.bind(o),t.bind(o))}},stopCast:function(){function e(){i.dispatchToPlayer({state:"STOPPED"})}var i=this;i.cancelRequest=!0;i.isCasting=!1;"stopped"==i.currentSession.status?e():i.currentSession.stop(e.bind(i),t.bind(i))},stopMedia:function(){function e(){i.isCasting=!1;i.dispatchToPlayer({state:"STOPPED"})}var i=this;i.mediaSession.stop(new chrome.cast.media.StopRequest,e.bind(i),t.bind(i))},interrupt:function(){var e=this;e.isCasting=!1;e.interrupted=!0;e.dispatchToPlayer({state:"INTERRUPT"});e.stopMedia()},pause:function(){var i=this;null==i.mediaSession?i.errorState("There is no active media playback"):i.mediaSession.pause(new chrome.cast.media.PauseRequest,e,t.bind(i))},seekTo:function(i){var a=this;if(null==a.mediaSession)a.errorState("There is no active media playback");else{var n=new chrome.cast.media.SeekRequest;n.currentTime=i;a.mediaSession.seek(n,e,t.bind(a))}},play:function(){var i=this;null==i.mediaSession?i.errorState("There is no active media playback"):i.mediaSession.play(new chrome.cast.media.PlayRequest,e,t.bind(i))},setVolume:function(i){var a=this;null==a.mediaSession?a.errorState("There is no active media playback"):0===i?a.currentSession.setReceiverMuted(!0,e,t.bind(a)):a.currentSession.setReceiverVolumeLevel(i,e,t.bind(a))},subtitlesOn:function(){var i=this;i.currentSession.sendMessage("urn:x-cast:uk.co.bbc.cast","subtitlesOn",e,t.bind(i))},subtitlesOff:function(){var i=this;i.currentSession.sendMessage("urn:x-cast:uk.co.bbc.cast","subtitlesOff",e,t.bind(i))},onMediaStatusUpdate:function(e){var t=this;if(e){if(t.mediaSession&&!t.interrupted){t.isCasting=!0;t.dispatchToPlayer({state:t.mediaSession.playerState,currentTime:t.mediaSession.currentTime,id:t.ccId,subtitlesEnabled:t.mediaSession.customData.subtitlesEnabled,floatVolume:t.currentSession.receiver.volume.level,castDuration:t.mediaSession.media.duration})}}else if("IDLE"==t.mediaSession.playerState&&!t.interrupted){t.isCasting=!1;var i="IDLE";"FINISHED"==t.mediaSession.idleReason&&(i="FINISHED");t.dispatchToPlayer({state:i})}},onSessionUpdate:function(e){var t=this;if(e){if(t.currentSession&&!t.cancelRequest){var i=t.currentSession.receiver.volume.level;t.currentSession.receiver.volume.muted&&(i=0);t.dispatchToPlayer(t.mediaSession?{state:t.mediaSession.playerState,currentTime:t.mediaSession.currentTime,id:t.ccId,subtitlesEnabled:t.mediaSession.customData.subtitlesEnabled,floatVolume:i}:{floatVolume:i})}}else{t.stopCast();t.currentSession=null}},errorState:function(e){var t=this;t.smp.sonar.action("error","ccError",{detail:e.description||e});t.dispatchToPlayer({state:"ERROR",detail:e})},dispatchToPlayer:function(e){var t=this;e.available=t.isAvailable;e.casting=t.isCasting;t.smp.call("ccInfo",e)}};return i});define("mp/classes/players/flash/smp-flash",["jquery-1.9","swfobject-2","mp/modules/device","mp/classes/settingsbuilder","mp/classes/embedPopup","mp/classes/players/player","mp/classes/errors/error","mp/classes/chromecastprovider"],function(e,t,i,a,n,o,r,s){function l(e){return e.getUTCFullYear()+"/"+d(e.getUTCMonth()+1)+"/"+d(e.getUTCDate())+" 00:00:00 UTC"}function d(e){return 10>e?"0"+e:e}function c(e,t){return function(){window.embeddedMedia.handle(e,t)}}function p(){var t=window.embeddedMedia,i=0;return function(a,o){var s=t.playerInstances[a];if(s&&a==s._container.attr("id"))if(s._swf){var l=e.Event(o.type),d=o.data;d&&d.callType&&(d=d.data);if("object"==typeof d){for(var p in d)if("type"!=p){l[p]=d[p];"currentDuration"==p&&(l.duration=d[p])}}else l.eventData=d;switch(o.type){case"ccRequest":s.castProvider.requestCast(o.data.mediatorIdentifer);break;case"ccPlay":s.castProvider.play();break;case"ccPause":s.castProvider.pause();break;case"ccSeek":s.castProvider.seekTo(o.data.seekTime);break;case"ccVolume":s.castProvider.setVolume(o.data.floatVolume);break;case"ccCancel":s.castProvider.requestStop();break;case"ccInterrupt":s.castProvider.interrupt();break;case"ccSubsOn":s.castProvider.subtitlesOn();break;case"ccSubsOff":s.castProvider.subtitlesOff();break;case"initialised":s._container.trigger(e.Event("smpFlashLoaded"));if(20>s._initAttempts){s._initAttempts++;try{s.initialised()}catch(u){setTimeout(c(a,o),100);return}}else{s.call("showError",window.embeddedMedia.language.t("6004",s._settings.locale()));s._settings.dispatch(6005);s._initAttempts=0}break;case"loadedmetadata":s._duration=d.duration;break;case"canplay":s._currentTime=d.resumeTime;break;case"timeupdate":s._currentTime=d.currentTime;s._duration=l.duration;if(Math.abs(s._currentTime-s._lastSignificant)>s._settings.significantTime){var m=e.Event("significanttimeupdate");for(p in d)"type"!=p&&(m[p]=d[p]);s._lastSignificant=s._currentTime;m.duration=s._duration;s._container.trigger(m)}break;case"seeked":s._seeking=!1;break;case"seeking":s._seeking=!0;break;case"playlistEnded":case"ended":s._playing=!1;s._ended=!0;break;case"volumechange":l.volume=d;s._volume=d;l.muted=s._muted=0===d;s._settings.set("volume",d);break;case"pause":s._paused=!0;break;case"info":s._currentTime=d.playheadTime;break;case"playlistLoaded":s._seeking=!1;s._paused=!0;s._ended=!1;s._playing=!1;l.url=d.url;s.playlist=d.playlist;break;case"mediaItemChanged":s._kind=l.kind;s._mediaItem=o.data;break;case"playing":s._playing=!0;s._paused=!1;s._ended=!1;s._kind=l.kind;break;case"guidanceshow":if(s._settings.guidanceCleared)s.call("updateGuidance",s._settings.guidance);else{s._restoreFocus=!0;s._gCalled=!0;s._lockClicked=o.data.lockClicked;t.parentalGuidance.show(o.data,s._settings.ui.colour,s._settings.locale())}break;case"linkRequest":"managePIN"===d.type||"PGinfo"===d.type?window.open("http://www.bbc.co.uk/iplayer/guidance","pg"):"playlistRedirect"==d.type&&window.open(d.url,"_top");break;case"verify":t.parentalGuidance.verify(d,function(e){s.call("verified",e)});break;case"setPIN":t.parentalGuidance.setPIN(d.PIN);break;case"setGuidanceSkipped":t.parentalGuidance.setAgeConfirmation(d.skipped);break;case"guidanceLocked":t.parentalGuidance.setLocked(d.locked,!0);break;case"error":o.data&&(l.errorData=new r(o.data.code,s._settings,o.data));break;case"screenReaderAlert":var f=d;if("string"!=typeof f)return!1;var h=e("<div role='alert' style='width: 1px; position: absolute; left: -2500px; overflow: hidden;'><p>"+f+"</p></div>").appendTo(e("body"));h.hide();h.show();window.setTimeout(function(){h.remove()},2500);break;case"focusOnFlash":case"focusAfterFlash":case"focusBeforeFlash":s[o.type]();break;case"embed":if(s.playlist){s._restoreFocus=!0;n.show(s)}}s._container.trigger(l)}else i++<20?setTimeout(c(a,o),100):s._settings.dispatch(6e3)}}function u(){this.type="flash";this._name="smp-flash";this._volume=0;this._currentTime=0;this._lastSignificant=0;this._duration=0;this._kind="";this._pluginsToLoad=[];this._initAttempts=0;this.includePoster=!1;this.castProvider=null;return this}var m=u.prototype=new o;m.compatibility=function(e){var a=i.get();return!e.dashPlaybackOnly&&(!e.backgroundPlayer||a.useOpaque)&&!a.os.kindleSilk&&t.hasFlashPlayerVersion(i.isMobileOrTablet?"11.0":"10.0")};m.embed=function(t,a){var n=i.get(),o=this;o._settings=t;o._container=t.container;for(var r=0;t.plugins.toLoad.length>r;r++){var s=t.plugins.toLoad[r];this.loadPlugin(s,s.data)}this.onLoad=a;var d=this._container.attr("id"),c="//emp.bbci.co.uk/emp/SMPf/1.15.9/StandardMediaPlayerChromelessFlash.swf";"alternate"==t.playerType&&(c="//emp.bbci.co.uk/emp/SMPf/1.15.9/StandardMediaPlayerChromelessFlash.swf");var p=this.name()+"SWF"+d,u={domId:d,jsCallbackMethod:"window.embeddedMedia.handle",forceGuidance:t.forceGuidance,today:l(t.today),isBSTime:t.isBSTime,waitOnPluginLoad:t.waitOnPluginLoad,uxHighlightColour:t.ui.colour,uxHighlightForeColour:t.ui.foreColour,customRdotBaseURL:t.customRdotBaseURL,enableRdotReporting:t.enableRdotReporting&&"https:"!=location.protocol,noTracking:t.noTracking,isTouchScreen:n.hasTouchScreen,embedReferer:document.referrer||"",embedPageUrl:t.embedPageURL,enableSonarReporting:t.enableSonarReporting,bumpVersion:window.embeddedMedia.version,daxSessionID:t.daxSessionID,appName:t.appName,appType:t.appType};if(t.ui.locale){t.ui.locale.lang&&(u.lang=t.ui.locale.lang);t.ui.locale.path&&(u.localePath=t.ui.locale.path)}var f={quality:"high",bgcolor:"000000",allowFullScreen:!0,allowScriptAccess:"always"};n.useOpaque&&(f.wmode="opaque");var h={position:"relative","z-index":"1",height:"100%",width:"100%","padding-bottom":0};t.superResponsive&&(h["padding-bottom"]="56.25%");"background"==t.product&&(h.visibility="hidden");var g,b,y,v,w;g=e("<div />").css(h);if(!t.backgroundPlayer){var k={"z-index":1e6,position:"fixed",top:"-9999px",left:"100px","max-width":"600px","background-color":"#ffffff",color:"#000000","border-style":"solid","border-width":"1px",padding:"8px 8px"},P="font-weight:bold; font-size : 0.9em; font-family: arial; color:black",x=t.locale();w=e('<div id="'+d+'jumpMediaPlayer"><a style="'+P+'" id="'+d+'jumpMediaPlayerLink" href="">'+window.embeddedMedia.language.t("jumpMediaPlayer",x)+"</a></div>").css(k).appendTo(g);y=e('<div id="'+d+'beforeFlash"><a style="'+P+'" id="'+d+'beforeFlashLink" href="http://www.bbc.co.uk/faqs/online/mp_accessibility_help">'+window.embeddedMedia.language.t("mediaPlayerHelp",x)+"</a></div>").css(k).appendTo(g);var _=function(){e(this).css({top:"100px"})},C=function(){e(this).css({top:"-9999px"})};w.focusin(_);w.focusout(C);y.focusin(_);y.focusout(C);w.keydown(function(e){var t=e.keyCode||e.which;if(13===t||32===t){e.preventDefault&&e.preventDefault();o.focusAfterFlash()}});y.keydown(function(e){var t=e.keyCode||e.which;if(9===t&&!e.shiftKey){e.preventDefault&&e.preventDefault();e.returnValue=!1;setTimeout(function(){if(o._swf){y.blur();o._swf.focusOnFirst();o._swf.tabIndex=0;o._swf.focus()}},200)}});o.focusBeforeFlash=function(){var e=document.getElementById(d+"beforeFlashLink");e&&setTimeout(function(){e.focus()},10)}}b=e("<div/>").css({position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px"}).appendTo(g);e("<div/>").attr({id:p}).appendTo(b);if(!t.backgroundPlayer){v=e('<div id="'+d+'afterFlash" style="z-index: 1000000;position:fixed;top: 10px;left : -999px;background-color: #ffffff;color: #000000;border-style:solid;border-width:1px;padding: 8px 8px"><a id="'+d+'returnToMediaPlayerLink" href="#afterFlash">'+window.embeddedMedia.language.t("outOfMediaPlayer",x)+"</a></div>").appendTo(g);v.keydown(function(e){var t=e.keyCode||e.which;if(13===t||32===t||9===t&&e.shiftKey){e.preventDefault&&e.preventDefault();e.returnValue=!1;setTimeout(function(){if(o._swf){9===t?o._swf.focusOnLast():o._swf.focusOnFirst();o._swf.tabIndex=0;o._swf.focus()}},200)}})}o.focusAfterFlash=function(){var e=document.getElementById(d+"returnToMediaPlayerLink");e&&setTimeout(function(){e.focus()},10)};o.focusOnFlash=function(){setTimeout(function(){if(o._swf){o._swf.tabIndex=0;o._swf.focus()}},10)};o.wrapper=g;o._container.empty().append(g);o.attachListeners();o.embeddingProperties=[c,p,"100%","100%","10.2",!1,u,f,{},function(e){if(e&&e.success&&e.ref){o._swf=e.ref;o.onLoad(o,m.capability());window.chrome&&window.chrome.runtime&&g[0].addEventListener("mousedown",function(){"Adobe Flash Player"==e.ref.title&&o.play()})}else o._settings.dispatch(6e3)}];o.embedIt()};m.embedIt=function(){t.embedSWF.apply(t,this.embeddingProperties)};m.attachListeners=function(){window.embeddedMedia.handle=p(this._settings.domid,this)};m.hide=function(e){e?this._swf.style.visibility="hidden":this.wrapper[0].style.left="-9000px"};m.show=function(e){this._swf.style.visibility="visible";this.wrapper[0].style.left="0px";e&&this.play()};m.initialised=function(){var e=this,t=i.get();e.uiDefaults(t);e._lastSignificant=e._settings.startTime;e.call("setUIOptions",e._settings.ui);e._volume=e._settings.volume;e.call("volume",e._volume);
e._muted=e._settings.muted;e.call("muted",e._muted);for(var a=0;e._pluginsToLoad.length>a;a++){var n=e._pluginsToLoad[a];e.setData(n.data);n.swf&&e.loadPluginWithCheck(n.swf,n.swf)}e.ready=!0;e.call("updateGuidance",e._settings.guidance);e.loadPlaylist();var o=window.embeddedMedia,r=!1;o.openCallbacks.push(function(){e.hide();if(e._playing&&!e.paused()){r=!0;e.pause()}});o.closedCallbacks.push(function(){e.show(r);r=!1;if(e._restoreFocus){e._restoreFocus=!1;e.focusOnFlash();e._swf.focusOnFirst()}});var l=o.parentalGuidance;l.closedCallbacks.push(function(t){e.call("guidanceClosed",t);if(e._gCalled){e._gCalled=!1;if(t&&!e._lockClicked){var i=e._settings.startTime;isNaN(i)&&(i=0);e.currentTime(i)}}});l.updateCallbacks.push(function(t){var i=e._settings;t.noPin=i.guidanceCleared;i.guidance=t;e.call("updateGuidance",t)});t.supportChromecast&&e._settings.allowCasting&&"false"!="true"&&(e.castProvider=new s(e));"background"==e._settings.product&&(e.wrapper.visibility="")};m.queuePlaylist=function(e,t){var i=this;if(i._swf){t.statsInfo=t.statsObject;i.call("queuePlaylistObject",{playlist:e,options:t})}};m.loadPlaylist=function(){var e=this;if(e._swf){var t={},n=e._settings;e._volume=n.volume;var o=a.mediaSet(n);"pc"==o&&n.doHdVersionCheck(n);t.playlistUrl=n.playlist;t.embedPageURL=n.embedPageURL;t.customIStatsURL=n.customIStatsURL;t.noTracking=n.noTracking;t.counterName=n.counterName;t.appName=n.appName;t.appType=n.appType;t.quality=n.quality;t.loop=n.loop;t.enableStatsReporting=n.enableStatsReporting;t.siteID=n.siteID;t.overrideHoldingImage=n.overrideHoldingImage;t.overrideCtaDuration=n.overrideCtaDuration;t.enableSonarReporting=n.enableSonarReporting;t.enableBarbReporting=n.enableBarbReporting;t.bumpVersion=window.embeddedMedia.version;t.liveEnvironment=n.liveEnvironment;t.bbcstore="false"=="true";t.statsInfo=n.statsObject;t.daxSessionID=n.daxSessionID;t.suppressItemKind=n.suppressItemKind;t.startTime=n.startTime;t.sessionID=n.sessionID;t.unreliableTimecodes=n.unreliableTimecodes;t.pageType=n.pageType;t.parentSection=n.parentSection;t.edition=n.edition;t.uniqueId=n.uniqueID;n.sessionID="";"number"==typeof n.bitrateFloor&&(t.bitrateFloor=n.bitrateFloor);"number"==typeof n.bitrateCeiling&&(t.bitrateCeiling=n.bitrateCeiling);"number"==typeof n.limitQuality?t.limitQuality=n.limitQuality:n.lowBandwidth&&(t.limitQuality=1);t.autoPlay=n.autoplay;t.promptGuidanceWhenAutoplay=n.promptGuidanceWhenAutoplay;t.noInPlaybackGuidanceMessage=n.noInPlaybackGuidanceMessage;t.enableStageVideo=!(n.disableStageVideo||i.os&&"xp"==i.os.win&&n.superResponsive);t.mediationUrl=a.mediatorHref(n,o);n.mediator.saml&&(t.samlMediationUrl=a.mediatorHref(n,o,"https://{saml}/saml/mediaselector/5/select/version/2.0/mediaset/{mediaset}/vpid/{id}"));n.mediator.fck&&(t.forceConnectionSupplier=n.mediator.fck);e.playlist=null;e._mediaItem=null;if(n.playlistObject){e.call("setPlaylistObject",{playlist:n.playlistObject,options:t});n.playlistObject.embedRights&&!n.externalEmbedUrl&&e.updateUiConfig({embed:{enabled:!1}})}else e.call("setPlaylistOptions",t);var r=n.webcastData;r&&(r.accurateStartTime||r.scheduledStartTime||r.accurateEndTime||r.scheduledEndTime)&&e.webcastData(n.webcastData)}};m.call=function(e,t){if(this._swf.call){this.hasCalledSwf=!0;this._swf.call(e,t)}else!this.hasCalledSwf||"setPlaylistOptions"!=e&&"setPlaylistObject"!=e||this.embedIt()};m.loadPlugin=function(e,t){if(e&&e.swf)if(this.ready){this.setData(t);this.loadPluginWithCheck(e.swf,e.swf)}else this._pluginsToLoad.push({swf:e.swf,data:t})};m.updateUiConfig=function(e){this.call("setUIOptions",e)};m.setData=function(e){if(e)if(e instanceof Array)for(var t=0;e.length>t;t++)this.call("setData",e[t]);else this.call("setData",e)};m.setPoster=function(e,t){e&&this.call("setPoster",{url:e,effect:t})};m.dispatchEvent=function(e,t){e&&this.call(e,t)};m.webcastData=function(e){if(e){o.prototype.webcastData.call(this,e);this.call("webcastData",e)}};m.suspend=function(){this.call("stop")};m.capability=function(){var e=i.get();return{markers:!0,queuedPlaylist:!0,inPage:!0,chromecast:e.supportChromecast,overlay:e.useOpaque}};return u});define("mp/classes/players/app",["jquery-1.9","mp/modules/device","mp/classes/players/player"],function(e,t,i){function a(e,t){for(var i=0;e.length>i;i++){var a=e[i];if(t(a))return a}return null}function n(e){return!!e&&(void 0===e.kind||null===e.kind||""===e.kind||"programme"===e.kind||"radioProgramme"===e.kind||"audio"===e.kind)}function o(e){return!!e&&("radioProgramme"===e.kind||"audio"===e.kind)}function r(e,t){if(!e)return"00:00";if(isNaN(e)||0>e||e>36e4)return"";var i=Math.floor(e/60),a=Math.floor(i/60);i=Math.floor(i%60);var n=Math.floor(e%60);10>i&&(i="0"+i);10>n&&(n="0"+n);var o=[i,n];(a>0||t)&&o.unshift(a);t&&o.pop();return o.join(":")}function s(){var t=this,i=t._settings,s=i.ui.miniMode&&i.ui.miniMode.enabled;t._createdUI=e.extend(!0,{},i.ui);var p=!1,u=null;if(i.overrideCtaDuration)u=i.overrideCtaDuration;else if(i.playlistObject&&i.playlistObject.items){var f=a(i.playlistObject.items,n);if(f){p=o(f);f.duration&&(u=r(f.duration,!1))}}if(!t.hasPlaylist())return!0;var g=(i.ui.colour+"").replace("0x","#"),b=t.css;i.superResponsive&&(b["padding-bottom"]="56.25%");t.wrapper||(t.wrapper=e("<div />").css(b));s?t.wrapper.addClass("minimode"):t.wrapper.removeClass("minimode");if(!i.backgroundPlayer){var y=window.embeddedMedia.players.length,v=e('<a id="cta'+y+'" class="p_cta"/>').attr({title:window.embeddedMedia.language.t("aaampPlay",i.locale())}),w=t._ctaClassName=i.ui[t.classStr]||i.ui.CTAcss;t.incGuidance=!0;var k=null;if(u&&i.ui.cta&&"duration"===i.ui.cta.mode){k=document.createElement("span");k.className="p_ctaDuration";k.textContent=u;v.append(k)}if(w){t.incGuidance=!1;v[0].className=w}else{m=i.ui.useHighResIcons;var P=l(i,m,p),x=i.ui.cta&&i.ui.cta.iplayer,_=i.ui.cta&&i.ui.cta.extra,C=d(m,k,s,p,x,_),T=i.ui.cta||{},I='url("'+h+P+'")';void 0!==T.custom&&(I='url("'+T.custom+'")');v.css({backgroundImage:I,backgroundPosition:C.ctaBackgroundPosition,backgroundRepeat:"no-repeat",backgroundColor:"#000000",backgroundSize:C.ctaBackgroundSize,opacity:.8,margin:0,width:C.ctaSize,height:C.ctaSize,display:"block",position:"absolute",bottom:"-0.5px"});if(k){var S=s?"6px":"8px",E=s?"60px":"80px";e(k).css({"font-size":"0.75em","font-family":"helvetica, Arial, sans-serif","text-align":"center",position:"absolute",bottom:S,left:"0px",width:E,color:"#fff"})}t._container.on("mousedown touchstart mouseover",function(){e(v).css({backgroundColor:g,opacity:1})});t._container.on("touchmove mouseup touchend mouseout",function(){e(v).css({backgroundColor:"#000000",opacity:.8})})}if(i.includeAppClickHandler){var M,O=!1,D=function(){O=!1},L=function(){if(""===t.wrapper[0].style.display&&!O){t.sonar&&setTimeout(function(){i.trigger(e.Event("userPlay"));t.sonar.action("click","play",{mediaplayer_name:t.daxname,mediaplayer_type:"video"})},50);t.play();O=!0;clearTimeout(M);M=setTimeout(D,100)}};e(v).attr("tabIndex",0).on("keyup",function(e){(32==e.keyCode||13==e.keyCode)&&L()});t._container.on("click",L)}t.wrapper.append(v);t._container.empty().append(t.wrapper);if(t.incGuidance){var A=i.playlistObject&&i.playlistObject.guidance||i.forceGuidance||i[t._guidance];if(A){t.guidanceWrapper=c(A);t.wrapper.append(t.guidanceWrapper.div)}}return!1}t._container.empty().append(t.wrapper)}function l(e,t,i){var a=e.ui.cta,n="cta_play.png";a&&(a.iplayer?n=t?i?"svg/white/play-iplayer-audio.svg":"svg/white/play-iplayer.svg":i?"cta_play_audio_iplayer.png":"cta_play_iplayer.png":a.extra?n=t?"svg/white/play-extra.svg":"cta_play_extra.png":t?n=i?"svg/white/audio.svg":"svg/white/play.svg":i&&(n="cta_play_audio.png"));return n}function d(e,t,i,a,n,o){var r={ctaSize:i?"60px":"80px",ctaBackgroundSize:"52px 52px",ctaBackgroundPosition:"50% "+(t?"38%":"50%")};if(e){r.ctaBackgroundSize="60px 60px";t&&(r.ctaBackgroundPosition="10px 5px");if(i)if(a)if(n){t&&(r.ctaBackgroundPosition="6px 0px");r.ctaBackgroundSize="49px 49px"}else if(o){t&&(r.ctaBackgroundPosition="10px 4px");r.ctaBackgroundSize="40px 40px"}else{t&&(r.ctaBackgroundPosition="7px 1px");r.ctaBackgroundSize="45px 45px"}else{t&&(r.ctaBackgroundPosition="10px 4px");r.ctaBackgroundSize="40px 40px"}else if(a&&!o){t&&(r.ctaBackgroundPosition="9px 4px");r.ctaBackgroundSize="62px 62px"}}else if(i)if(n){r.ctaBackgroundSize=a?"23px 23px":"27px 27px";t&&(r.ctaBackgroundPosition="50% 31%")}else if(o){r.ctaBackgroundSize="35px 35px";t&&(r.ctaBackgroundPosition="50% 34%")}else if(a){r.ctaBackgroundSize="22px 22px";t&&(r.ctaBackgroundPosition="50% 34%")}else r.ctaBackgroundSize="35px 35px";else a&&!o?r.ctaBackgroundSize="28px 28px":n&&(r.ctaBackgroundSize="36px 36px");return r}function c(e){var t=document.createElement("div"),i=window.embeddedMedia.players.length;t.id="p_guidance"+i;var a=document.createElement("div");a.id="p_guidanceBox"+i;a.className="p_guidanceBox";var n=document.createElement("span"),o="display:inline-block;margin:auto;border-radius:50%;height:15px;width:15px;background-color:red;position: relative; top:-2px;";if(m){n.id="p_guidanceG"+i;n.style.backgroundImage='url("'+h+'svg/guidance.svg")';n.setAttribute("aria-labelledby","p_guidanceText"+i);o="width:15px;height:15px;display:inline-block;position: relative; top: 2px; margin-right: -2px;"}else{n.id="p_guidanceG"+i;var r=document.createElement("span");r.id="p_guidanceGText"+i;n.appendChild(r);r.textContent="G";r.setAttribute("aria-labelledby","p_guidanceText"+i)}a.appendChild(n);var s=document.createElement("span");s.id="p_guidanceText"+i;s.textContent=e;a.appendChild(s);t.appendChild(a);var l=document.createElement("style"),d=document.getElementsByTagName("head")[0];d.appendChild(l);var c=l.sheet?l.sheet:l.styleSheet;p(c,"#p_guidance"+i,"position:absolute;left: 80px;height:80px;bottom:-0.5px;background-color: rgba(0, 0, 0, 0.7);margin-right:80px;margin-top: -40px;display:table; padding-right:30px;  font-family:helvetica, Arial, sans-serif;line-height:1",0);p(c,".minimode #p_guidance"+i,"left: 61px;height:60px;",1);p(c,"#p_guidanceBox"+i,"color:#ffffff;font-size:12px;font-weight:bold;padding-left:8px;display:table-cell;vertical-align:middle;",2);p(c,"#p_guidanceG"+i,o,3);p(c,"#p_guidanceGText"+i,"position:relative;left:3px;top:1px;line-height:normal;",4);p(c,"#p_guidanceText"+i,"margin-left:5px;",5);return{text:s,div:t}}function p(e,t,i,a){e.insertRule?e.insertRule(t+"{"+i+"}",a):e.addRule&&e.addRule(t,i,a)}function u(e){this._name=e;return this}var m,f={position:"relative","z-index":1,height:"100%",width:"100%",cursor:"pointer","padding-bottom":0},h="//emp.bbci.co.uk/emp/assets/2.0.12/",g=u.prototype=new i;g.createCta=s;g.css=f;g.embed=function(e,i){var a=this;a._settings=e;a._container=e.container;a.uiDefaults(t.get());a.ctaNeedsCreating=a.createCta();a.extraEmbed&&a.extraEmbed();i(a,a.capability);a.processPlaylist(null,!0);e.trigger("initialised");a.processPlaylist()};g.show=function(e){this.wrapper.children().show();e&&this.play()};g.hide=function(){this.wrapper.children().hide()};g.setLocation=function(i){var a=this._settings;if(a.insideIframe){var n=e.Event("navigateTo");n.href=i;a.trigger(n)}else{try{var o=""===top.location.href&&!1}catch(r){o=!0}t.requiresWindowOpenSMPAirLaunch||o?window.open(i):top.location=i}};g.hasPlaylist=function(){var e=this._settings;return e.playlist||e.playlistObject};g.updateUiConfig=function(){var e=this,t=e._createdUI,i=e._settings.ui,a=!1,n=t.miniMode&&t.miniMode.enabled,o=i.miniMode&&i.miniMode.enabled;if(n!=o)a=!0;else if(t.colour!=i.colour)a=!0;else{var r=i[e.classStr]||i.CTAcss;e._ctaClassName!=r&&(a=!0)}if(a){this.wrapper&&this.wrapper.empty();this.createCta()}};g.processPlaylist=function(t,i){var a=this,n=a._settings,o=t||n.playlistObject;if(o){a.playlist=e.extend(!0,{},o);var r=a.playlist.items;if(r)for(var s=r.length-1;s>=0;s--){var l=r[s];a.filterPlaylist&&("ident"==l.kind||"advert"==l.kind)&&r.splice(s,1);if(l.versionID)l.vpid=l.versionID;else if(l.serviceID){l.vpid=l.serviceID;l.live=!0;a.playlist.simulcast!==!1&&(a.playlist.simulcast=!0)}l.identifier=l.vpid}if(!i){var d=e.Event("playlistLoaded");d.playlist=a.playlist;n.trigger(d)}}else a.playlist=null};g.next=function(){var t=this,i=t.playlist;if(i)if(i.items&&i.items.length>1)i.items.shift();else if(i.queuedPlaylist){t.processPlaylist(i.queuedPlaylist);var a=t._settings;a.playlist="";a.playlistObject=i.queuedPlaylist;a.webcastData={};a.overrideHoldingImage=null;a.statsObject.parentPID=void 0;a.statsObject.parentPIDType=void 0;a.statsObject.episodePID=void 0;a.statsObject.clipPID=void 0;a.statsObject.playlistLabels=void 0;i.queuedOptions&&e.extend(!0,a,i.queuedOptions);t._statsObject=e.extend(!0,{},a.statsObject)}};g.loadPlaylist=function(){var e=this,t=e._settings;if(e.ctaNeedsCreating)setTimeout(function(){e.ctaNeedsCreating=e.createCta()},100);else if(e.incGuidance){var i=t.playlistObject&&t.playlistObject.guidance||t.forceGuidance||t[e._guidance];if(i)if(e.guidanceWrapper){e.guidanceWrapper.div.style.display="";e.guidanceWrapper.text.textContent=i}else{e.guidanceWrapper=c(i);e.wrapper.append(e.guidanceWrapper.div)}else if(e.guidanceWrapper){e.guidanceWrapper.div.style.display="none";e.guidanceWrapper.text.textContent=""}}e.processPlaylist();t.autoplay&&e.play();e.resetContainer&&e.resetContainer();e.includePoster&&t.playlistObject&&e.setPoster(t.playlistObject.holdingImageURL)};return u});define("mp/classes/players/flash/smp-flash-noembed",["mp/classes/players/app","swfobject-2","mp/modules/device"],function(e,t,i){function a(){this._settings.delayEmbed=!1;this._settings.autoplay=!0;this._settings.promptGuidanceWhenAutoplay=!0;this._settings.noInPlaybackGuidanceMessage=!0;this._container.unbind("click");this._container.empty();this.reloadScope._loadOptions.call(this.reloadScope,this.reloadScope._loadOptionsArg,!0)}function n(e){return!e.dashPlaybackOnly&&!e.autoplay&&e.delayEmbed===!0&&t.hasFlashPlayerVersion(i.isMobileOrTablet?"10.2":"10.0")}function o(){this.compatibility=n;this.daxname="SMPFLASHNOEMBED";this._name="smp-flash-noembed";return this}o.prototype=new e("smp-flash-noembed");o.prototype.play=a;o.prototype.capability={overlay:!0};return o});define("mp/classes/xd",[],function(){var e=function(e){var t=this,i=document.getElementById(e);t._receiveKey=e;i&&i.contentWindow&&(t._postElement=i.contentWindow);t._listeners={};t.post({initXD:{receiveKey:t._receiveKey}});t.receive(function(e){if(e.data){var i=e.data.type,a=e.data.data,n=t._listeners[i];if(n)for(var o=0;n.length>o;o++){var r=n[o];r.call(t,a)}}})};e.prototype={_receiveKey:"",_postElement:null,_listeners:{},post:function(e){var t=this;e&&t._postElement&&t._postElement.postMessage&&t._postElement.postMessage(JSON.stringify(e),"*");return t},receive:function(e){var t=this,i=function(i){if(i.data&&i.data.indexOf&&0===i.data.indexOf("{")){var a={};for(var n in i)a[n]="data"==n?JSON.parse(i[n]):i[n];if(!a.data.receiveKey||a.data.receiveKey!==t._receiveKey)return!1;e(a)}};window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent("onmessage",i);return t},on:function(e,t){var i=this,a=function(){setTimeout(function(e){t.apply(i,e)},0,arguments)};this._listeners[e]||(this._listeners[e]=[]);this._listeners[e].push(a);return i},fire:function(e,t){this.post({receiveKey:this._receiveKey,type:e,data:t})}};return e});define("mp/classes/players/apps/smp-air",["jquery-1.9","mp/modules/device","mp/classes/settingsbuilder","mp/classes/players/app"],function(e,t,i,a){function n(e,t){return null==t||""===t?"":"&"+encodeURIComponent(e)+"="+encodeURIComponent(t)}function o(a){var o=a._settings,r="?";o.playlist&&""!==o.playlist&&(r="?playlistUrl="+encodeURIComponent(o.playlist));var s={};s.product=o.product;s.mediaSet=i.mediaSet(o);s.embedPageURL=o.embedPageURL;s.counterName=o.counterName;s.siteID=o.siteID;s.overrideHoldingImage=o.overrideHoldingImage;s.daxSessionID=o.daxSessionID;s.sessionID=o.sessionID;s.unreliableTimecodes=o.unreliableTimecodes;s.appName=o.appName;s.appType=o.appType;s.quality=o.quality;o.startTime>0&&(s.startTime=o.startTime);s.pageType=o.pageType;s.parentSection=o.parentSection;s.edition=o.edition;s.uniqueId=o.uniqueID;o.noTracking&&(s.noTracking=!0);o.sessionID="";"number"==typeof o.limitQuality?s.limitQuality=o.limitQuality:o.lowBandwidth&&(s.limitQuality=1);s.mediatorHost=o.mediator&&o.mediator.host?o.mediator.host:"open.live.bbc.co.uk";s.mediasetClass=o.mediaProfile&&o.mediaProfile.length>0?"pc"===o.mediaProfile?"default":o.mediaProfile:"pc"===o.mediasetClass?"default":o.mediasetClass;s.mediator=i.mediatorHref(o,s.mediaSet);o.mediator.saml&&(s.samlMediationUrl="https://"+o.mediator.saml+"/saml/mediaselector/5/select/version/2.0/mediaset/{mediaset}/vpid/{id}");o.mediator.fck&&(s.forceConnectionSupplier=o.mediator.fck);s.forceGuidance=o.forceGuidance;s.uxHighlightColour=o.ui.colour.toString().replace("#","0x");s.uxFc=o.ui.foreColour.toString().replace("#","0x");s.uxAc=o.ui.alternateColour.toString().replace("#","0x");s.uxAfc=o.ui.alternateForeColour.toString().replace("#","0x");o.ui.locale&&o.ui.locale.lang&&(s.lang=o.ui.locale.lang);if(o.plugins){o.plugins.smpAirPlugins&&(s.pluginSet=o.plugins.smpAirPlugins);o.plugins.smpAirPluginData&&(s.pd=JSON.stringify(o.plugins.smpAirPluginData))}t.get().os.kindleSilk&&o.kindlePolicy?s.policy=o.kindlePolicy:o.policy&&(s.policy=o.policy);if(o.webcastData){o.webcastData.accurateStartTime&&(s.AST=o.webcastData.accurateStartTime);o.webcastData.scheduledEndTime&&(s.SET=o.webcastData.scheduledEndTime);o.webcastData.accurateStartTime&&(s.AET=o.webcastData.accurateEndTime)}s.enableBitrateSwitching=!o.disableBitrateSwitching;s.debug=o.debug;"false"=="true"&&(s.bbcstore=!0);s.allowMainlineProfiles=o.allowMainlineProfiles;s.enableLiveRewind=o.ui.controls&&"undefined"!=typeof o.ui.controls.enableLiveRewind?o.supportLiveRewindOnMobile&&o.ui.controls.enableLiveRewind!==!1:o.supportLiveRewindOnMobile;if(t.get().connection.mobile){s.isCellular=!0;s.startingQuality=10}else s.startingQuality=60;var l=o.statsObject;a.sonar&&a.sonar.forAir(l);s.statsObject=JSON.stringify(l);e.each(s,function(e,t){s.hasOwnProperty(e)&&(r+=n(e,t))});e.each(o.configVars,function(e,t){o.configVars.hasOwnProperty(e)&&(r+=n(e,t))});o.playlistObject&&(r+="&pObj="+encodeURIComponent(JSON.stringify(o.playlistObject)));return r}function r(){return t.get().os.kindleSilk?"http://www.amazon.co.uk/Media-Applications-Technologies-Ltd-Player/dp/B009SQRRCG/ref=sr_1_2?s=mobile-apps&ie=UTF8&qid=1392817067&sr=1-2":"market://details?id=air.uk.co.bbc.android.mediaplayer"}function s(t,i){var a=new Date-i;if(!(a>600||"true"==window.name)){var n=t._settings,o=document.createElement("style"),s=document.getElementsByTagName("head")[0];s.appendChild(o);var l=t._container.width(),d=o.sheet?o.sheet:o.styleSheet;l>300&&!t.launched?d.insertRule("#marketPlacePopup{position:absolute;width:272px;height:93px;padding-top:16px; left:"+Math.floor((l-272)/2)+"px}",0):d.insertRule("#marketPlacePopup{position:fixed;width:272px;height:93px;left:10px;top:60px;padding:10px;margin-left:16px;z-index:100000;background-color:white;height:234px}",0);d.insertRule("#marketPlacePopupHeader,#marketPlacePopupMessage{padding:8px 8px 0;color:#fff;font-size:1.4em;line-height:1.143;background:rgba(0,0,0,0.75)}",1);d.insertRule("#marketPlacePopupHeader{font-size:1.8em;line-height:1.333}",2);d.insertRule("#marketPlacePopupMessage{padding-bottom:6px}",3);d.insertRule(".buttons{width:100%;display:block;margin-top:2px}",4);d.insertRule("#marketPlacePopupInstallButton:hover,#marketPlacePopupCancelButton:hover,#marketPlacePopupInstallButton:focus,#marketPlacePopupCancelButton:focus{background:"+n.ui.colour+"}",5);d.insertRule("#marketPlacePopupInstallButton,#marketPlacePopupCancelButton{width:49%;height:44px;padding:0 16px;line-height:44px;font-size:1.4em;text-transform:uppercase;color:#1c1c1c;background:#dcdcdc}",6);d.insertRule("#marketPlacePopupCancelButton{float:right}",7);var c=n.locale(),p=window.embeddedMedia.language,u=p.t("aaampTitle",c),m=p.t("aaampMsg",c),f=p.t("aaampInstall",c),h=p.t("aaampCancel",c);t._container.trigger(e.Event("showingAppInstallPrompt"));var g=e('<div id="marketPlacePopup"><div id="marketPlacePopupHeader" class="marketPlacePopupHeader">'+u+'</div><div id="marketPlacePopupMessage" class="marketPlacePopupMessage">'+m+'</div><div id="marketPlacePopupButton" class="buttons"><button id="marketPlacePopupInstallButton" class="install">'+f+'</button><button id="marketPlacePopupCancelButton" class="cancel">'+h+"</button></div></div>");t._container.unbind("mousedown touchstart mouseup touchend mousemove touchmove");t.wrapper&&(t.wrapper[0].style.display="none");if(l>300&&!t.launched){t.wrapperPopup||(t.wrapperPopup=e("<div />").css(t.css));t._container.append(t.wrapperPopup);t.wrapperPopup.append(g)}else e(document.body).append(g);t.resetContainer=function(){document.getElementById("marketPlacePopup").parentNode.removeChild(document.getElementById("marketPlacePopup"));setTimeout(function(){t._container.trigger(e.Event("hidingAppInstallPrompt"));t.wrapper&&(t.wrapper[0].style.display="")},250)};e("#marketPlacePopupInstallButton").bind({"mouseup touchend":function(){e("#marketPlacePopupInstallButton").unbind("mouseup touchend");t.sonar.action("install","smpAirPrompt");t.resetContainer();t.setLocation(r());return!1}});e("#marketPlacePopupCancelButton").bind({"mouseup touchend":function(){e("#marketPlacePopupCancelButton").unbind("mouseup touchend");t.sonar.action("cancel","smpAirPrompt");t.resetContainer();return!1}})}}function l(t){if(!m){var i=+new Date;m=e("<iframe />").css({display:"none"}).attr({id:"BBCMediaPlayer",src:"bbcmediaplayer://play/"+o(t)});t.timer=setTimeout(function(){clearTimeout(t.timer);m.remove();m=null;s(t,i)},500);t._container.append(m)}}function d(){var e=this;if(/Chrome/.test(navigator.userAgent)){var t="intent://play/"+o(e)+"#Intent;scheme=bbcmediaplayer;package=air.uk.co.bbc.android.mediaplayer;end";e.setLocation(t)}else l(e);return!1}function c(e){var i=t.get().os;return!e.dashPlaybackOnly&&!i.ios&&!i.winphone&&(i.android||i.kindleSilk)}function p(){function t(){if(void 0!==document.hidden)window.name=document.hidden;else for(var e=["webkit","moz","ms","o"],t=0;e.length>t;t++)void 0!==document[e[t]+"Hidden"]&&(window.name=document[e[t]+"Hidden"])}var i={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange"};for(var a in i)if(i.hasOwnProperty(a)&&a in document){document.addEventListener(i[a],t);break}e(window).blur(function(){window.name="true"});e(window).focus(function(){window.name="false"})}function u(){this.daxname="SMPAIR";this.classStr="aaampCTAcss";this._guidance="aaampGuidance";this.compatibility=c;return this}var m;u.prototype=new a("aaamp",!0);u.prototype.play=d;u.prototype.launch=function(e){var t=e._settings;this._settings=t;this._container=t.container;this.launched=!0;this.sonar=e.sonar;this.play()};u.prototype.destroy=function(){clearTimeout(this.timer)};u.prototype.extraEmbed=p;u.prototype.playlistOptions=o;u.prototype.getMarketPlaceURL=r;u.prototype.hasPlaylist=function(){var e=this._settings;return e.playlist||e.playlistObject};u.prototype.capability={markers:!0};return u});define("mp/classes/players/html5/smp-html5",["jquery-1.9","mp/modules/device","mp/modules/html5","mp/classes/xd","mp/classes/errors/error","mp/classes/settingsbuilder","mp/classes/players/apps/smp-air","mp/classes/embedPopup","mp/classes/players/player","mp/classes/chromecastprovider"],function(e,t,i,a,n,o,r,s,l,d){function c(){this._name="smphtml5";this.type="html";this.requireSonarJS=!0;this._currentTime=0;this._duration=0;this._fullScreen=!1;this._lastSignificant=0;this._kind="";this.pluginsToLoad=[];this.includePoster=!1;this.castProvider=null;return this}function p(t,i){var a,n,o,r,s,l,d=t,c=d.wrapper,p=document.body.style,u=document.documentElement.style;d._pfse=function(){d._fullScreen=!0;if(!l){l=document.createElement("style");document.createTextNode&&l.appendChild(document.createTextNode(""))}document.head.appendChild(l);var t=l.sheet?l.sheet:l.styleSheet;if(t.cssRules&&0===t.cssRules.length){t.insertRule("#"+i+"wrp{z-index:2147483600!important}",0);t.insertRule("div{z-index:auto!important}",1);t.insertRule(".smpPG {z-index:2147483600!important}",2)}a=p.overflow;p.overflow="hidden";n=u.overflow;u.overflow="hidden";e(document.body).bind("touchmove.playerFullscreen",function(e){e.preventDefault()});var m=d.resizePlayer=function(){var e=window.innerWidth,t=window.innerHeight;c.css({position:"fixed",top:0,left:0,height:t+"px",width:e+"px","padding-bottom":0});c[0].style.WebkitTransform="translate3d(0,0,10em)"},f=function(){m();clearTimeout(s);s=setTimeout(m,200)};m();e(window).bind("resize.playerFullscreen orientationchange.playerFullscreen",f);if(!o){for(var h="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",g=document.getElementsByTagName("meta"),b=0;g.length>b;b++)if("viewport"===g[b].name){r=g[b].content;g[b].content=h;o=g[b];break}if(!r){o=document.createElement("meta");o.name="viewport";o.content=h;document.getElementsByTagName("head")[0].appendChild(o)}}};d._pfsx=function(){d._fullScreen=!1;d.resizePlayer=null;clearTimeout(s);l&&document.head.removeChild(l);e(window).unbind("resize.playerFullscreen orientationchange.playerFullscreen");c.css(d.css);c[0].style.WebkitTransform="";p.overflow=a;u.overflow=n;e(document.body).unbind("touchmove.playerFullscreen");if(r){o.content=r;r=null;o=null}else if(o&&o.parentNode){o.content="";o.parentNode.removeChild(o);o=null}}}function u(e){var i=[];e.uiClass&&i.push(e.uiClass);e.defaultUiClass&&i.push(e.defaultUiClass);t.get().hasTouchScreen&&i.push("touch");return i.join(" ")}function m(t){return function(i){var a,o=i.type,l=i.qos,d=e.Event(o);for(var c in i)"type"!=c&&(d[c]=i[c]);switch(o){case"ccRequest":t.castProvider.requestCast(i.data.mediatorIdentifer);break;case"ccCancel":t.castProvider.requestStop();break;case"ccPlay":t.castProvider.play();break;case"ccPause":t.castProvider.pause();break;case"ccStopMedia":t.castProvider.stopMedia();break;case"ccSubsOn":t.castProvider.subtitlesOn();break;case"ccSubsOff":t.castProvider.subtitlesOff();break;case"ccSeek":t.castProvider.seekTo(i.data.seekTime);break;case"ccVolume":t.castProvider.setVolume(i.data.floatVolume);break;case"ccInterrupt":t.castProvider.interrupt();break;case"durationchange":t._duration=i.duration;break;case"initialised":t.initialised();break;case"playInBump":var p=new r;p.launch(t);break;case"timeupdate":t._currentTime=i.currentTime;t._duration=i.duration;if(Math.abs(t._currentTime-t._lastSignificant)>t._settings.significantTime){var u=e.Event("significanttimeupdate");for(c in i)"type"!=c&&(u[c]=i[c]);t._lastSignificant=t._currentTime;t._container.trigger(u)}break;case"volumechange":t._muted=i.muted;t._volume=i.volume;break;case"guidanceShow":t._gCalled=!0;t._lockClicked=i.lockClicked;window.embeddedMedia.parentalGuidance.show(i,t._settings.ui.colour,t._settings.locale());t._fullScreen&&(t.wrapper[0].style.WebkitTransform="");break;case"guidanceLocked":window.embeddedMedia.parentalGuidance.setLocked(!0,!0);break;case"seeked":t._seeking=!1;break;case"seeking":t._seeking=!0;break;case"ended":t._ended=!0;break;case"pause":t._paused=!0;t._ended=d.ended;break;case"mediaItemChanged":t._mediaItem=d.mediaItem;break;case"playing":t._paused=!1;t._ended=!1;t._kind=d.kind;t._mediaItem=d.mediaItem;break;case"linkRequest":var m=i.data;"managePIN"===m.type||"PGinfo"===m.type?window.open("http://www.bbc.co.uk/iplayer/guidance","pg"):"playlistRedirect"===m.type&&window.open(m.url,"_top");break;case"embed":t.playlist&&s.show(t);break;case"playlistLoaded":t._seeking=!1;t._paused=!0;t._ended=!1;t.playlist=i.playlist;break;case"playlistLoading":i.statsObject&&(a=function(){i.statsObject.playlistURL||(i.statsObject.playlistURL=i.url);t._statsObject=i.statsObject});break;case"beforeFullscreenEnter":i.applyPageFullScreen&&t._pfse();break;case"beforeFullscreenExit":i.applyPageFullScreen&&t._pfsx();break;case"error":d.errorData=new n(i.code,t._settings,i);t._settings.smpj2OptIn&&require([h],function(){t.smpj2RatingsDialog||(t.smpj2RatingsDialog=new SMPJ2RatingsDialog(t,"//emp.bbci.co.uk/emp/assets/smpj2optin/2.0.1",!0,l));"critical"==d.errorData.severity()&&(t.noFlashInstalled?t.showErrorDialog(new n(6014,t._settings)):t.smpj2RatingsDialog.handleError(i.code))})}try{t._container.trigger(d)}catch(f){a&&a();throw f}}}function f(i){var a=e.extend(!0,{},i);a._container=null;a.container=null;a.dispatch=null;a.init=null;a.trigger=null;var n=t.get();a.embedReferer=document.referrer||"";a.mobileNetwork=t.get().connection.mobile;a.uiClass=u(a);a.mediatorHref=o.mediatorHref(a,o.mediaSet(a,"j2"),"{protocol}://{host}/mediaselector/5/select/version/2.0/vpid/{id}/format/json/mediaset/{mediaset}/jsfunc/{callback}");a.enableRdotReporting=a.enableRdotReporting&&"https:"!=location.protocol;a.playVideoExternally=!a.preferHtmlOnMobile&&a.preferInlineAudioPlayback&&n.htmlAudio&&a.playingAudio()&&!a.playerWasForced;a.enableConvivaReporting="false"=="true";a.enableStatsReporting="false"!="true"&&a.enableStatsReporting;a.mediator.saml&&(a.samlMediatorHref=o.mediatorHref(a,o.mediaSet(a,"j2"),"https://{saml}/saml/mediaselector/5/select/version/2.0/vpid/{id}/format/json/mediaset/{mediaset}/jsfunc/{callback}"));return a}var h="//emp.bbci.co.uk/emp/assets/smpj2optin/2.0.1/SMPJ2RatingsDialog.js",g=c.prototype=new l;g.compatibility=function(e){var a=t.get(),n=!1;if(e.dashPlaybackOnly){e.likelyPlayDash=!0;n=!e.backgroundPlayer&&a.hasMseSupport}else n=i.media.video&&!e.backgroundPlayer&&(a.hasHlsVodSupport||e.preferHtmlOnDesktop||e.preferHtmlOnMobile&&a.isMobileOrTablet||e.preferInlineAudioPlayback&&a.htmlAudio&&e.playingAudio());if(n){e.preferPlainOverDash=e.preferPlainOverDash&&!e.smpj2OptIn;e.smpj2OptIn=!1}return n};g.embedUrl=function(){var e="//emp.bbc.co.uk/emp/SMPj/2.3.13/iframe.html";document.cookie.match(/html5Debug=true/)&&(e="//emp.bbc.co.uk/emp/SMPj/2.3.13/debug.html");return e};g.embed=function(i,n){var o=this;o.css={"border-bottom":0,"z-index":999,position:"relative",height:"100%",width:"100%","padding-bottom":0};o._settings=i;o._container=i.container;o._container.empty();var r=t.get();r.supportsSvgJ2&&i.ui.useHighResIcons!==!1&&(i.ui.useHighResIcons=!0);o.uiDefaults(r);i.insideIframe&&(i.ui.fullscreen||(i.ui.fullscreen={enabled:!1,dblclick:!1}));i.supportHls=r.hasHlsVodSupport;for(var s=0;i.plugins.toLoad.length>s;s++){var l=i.plugins.toLoad[s];o.loadPlugin(l,l.data)}var d=o.embedUrl();if(location.host.indexOf("bbc.co.uk")!==-1)try{document.domain="bbc.co.uk"}catch(c){}if(location.host.indexOf("bbc.com")!==-1){d=d.replace("bbc.co.uk","bbc.com");try{document.domain="bbc.com"}catch(c){}}0!==location.protocol.indexOf("http")&&(d="http:"+d);o.uniqueId="X"+Math.random();var u=o._container;i.superResponsive&&(o.css["padding-bottom"]="56.25%");var f=o.getId(),h=o.wrapper=e("<div />").css(o.css).attr({id:f+"wrp"}).appendTo(u),g=e("<iframe />").attr({id:f,name:f,frameborder:0,scrolling:"no",src:d,allowfullscreen:""}).css({position:"absolute",left:0,top:0,width:"100%",height:"100%"}).appendTo(h).load(function(){var t=e(this).attr("id");p(o,t);o.xd=new a(t);o.xd.on("jsapi",m(o));"object"!=typeof window.JSON?require(["http://emp.bbci.co.uk/emp/assets/bump-3/json.js"],function(){o.fireBootstrap()}):o.fireBootstrap()});window.addEventListener&&window.addEventListener("pageshow",function(e){if(e.persisted){g.attr("src",function(e,t){return t});o._fullScreen&&o._pfsx()}});n(o,{markers:!0,queuedPlaylist:!0,inPage:!0,overlay:!0})};g.fireBootstrap=function(){var e=this;window.embeddedMedia.playerInstances[e.uniqueId]=e;var t={player:{vars:f(e._settings)},id:e.uniqueId,requireMap:window.bbcRequireMap};try{var i=document.getElementById(e.getId());i.contentWindow.bootstrap(t)}catch(a){e.xd.fire("bootstrap",t)}};g.updateUiConfig=function(e){this.call("updateUiConfig",e)};g.loadPlaylist=function(e){var t=this;if(t.ready){var i=f(t._settings);"pc"==o.mediaSet(i,"j2")&&i.doHdVersionCheck(i);i.nonUserBypass=i.nonUserBypass||e===!0;t.playlist=null;
t._mediaItem=null;t.call("loadPlaylist2",i);i.playlistObject&&i.playlistObject.embedRights&&!i.externalEmbedUrl&&t.updateUiConfig({embed:{enabled:!1}});var a=i.webcastData;a&&(a.accurateStartTime||a.scheduledStartTime||a.accurateEndTime||a.scheduledEndTime)&&t.webcastData(a);i.nonUserBypass=!1}};g.getId=function(){return this._name+"iframe"+this._settings.domid};g.call=function(e,t){try{var i=document.getElementById(this.getId()),a=i.contentWindow.publicApi.api[e];a||(a=i.contentWindow.publicApi[e]);a(t)}catch(n){this.xd.fire("jsapi",{call:e,params:t})}};g.queuePlaylist=function(e,t){var i=this;i.call("queuePlaylist",{playlist:e,options:t})};g.loadPlugin=function(e,t){if(e)if(e.j2){var i={url:e.j2,data:t};if(this.ready){this.setData(i.data);this.loadPluginWithCheck(e.j2,i,"loadPlugin2")}else this.pluginsToLoad.push(i)}else if(e.html){i={url:e.html,data:t};if(this.ready){this.setData(i.data);this.loadPluginWithCheck(e.html,i,"loadPlugin2")}else this.pluginsToLoad.push(i)}};g.setData=function(e){if(e)if(e instanceof Array)for(var t=0;e.length>t;t++)this.call("setData",e[t]);else this.call("setData",e)};g.webcastData=function(e){if(e){l.prototype.webcastData.call(this,e);this.setData({name:"SMP.webcastData",data:e})}};g.setPoster=function(e,t){this.ready&&e&&this.call("setPoster",{url:e,effect:t})};g.dispatchEvent=function(e,t){e&&this.call("dispatch",{type:e,data:t},!0)};g.show=function(e){this.wrapper[0].firstChild.style.width="100%";this._settings.tryPlayAfterInHtml&&e&&this.play(!0)};g.hide=function(){this.wrapper[0].firstChild.style.width="0%"};g.getHandleJSAPI=function(){return m(this)};g.suspend=function(){this.call("suspend")};g.initialised=function(){var e=this,i=e._settings,a=t.get();e.ready=!0;e.volume(i.volume);e.muted(i.muted);e._lastSignificant=i.startTime;for(var n=0;e.pluginsToLoad.length>n;n++){var o=e.pluginsToLoad[n];o.waitOnPluginLoad=i.waitOnPluginLoad;e.setData(o.data);this.loadPluginWithCheck(o.url,o,"loadPlugin2")}(i.playlistObject||i.playlist)&&e.loadPlaylist(!0);window.embeddedMedia.parentalGuidance.closedCallbacks.push(function(t){e.call("guidanceClosed",[t]);if(e.resizePlayer){e.resizePlayer();setTimeout(function(){e.resizePlayer&&e.resizePlayer()},500)}e._gCalled&&t&&!e._lockClicked&&e.play(!0);e._gCalled=!1});window.embeddedMedia.parentalGuidance.updateCallbacks.push(function(t){i.guidance=t;e.call("updateGuidance",t)});a.supportChromecast&&i.allowCasting&&"false"!="true"&&(e.castProvider=new d(e))};return c});define("mp/classes/players/html5/smp-j2oo",["mp/modules/device","mp/modules/html5","mp/classes/settingsbuilder","mp/classes/players/html5/smp-html5"],function(e,t,i,a){function n(){a.apply(this);this._name="smpj2oo";return this}function o(t,a){var n=e.get(),o=(t.siteID+"").toLowerCase(),r=(t.appName+"").toLowerCase(),s=t.playlistObject&&t.playlistObject.items&&t.playlistObject.items[0],l=!1;"false"!="true"&&("iplayer"==o&&"iplayer"==r&&s&&!s.live||(t.counterName+"").match(/^programmes\..*\.episode\..*\.page$/)&&s&&"radioProgramme"==s.kind&&"pc"===i.mediaSet(t))&&(n.hasMseSupport||a)&&(l=!0);return l}var r=n.prototype=new a;r.embedUrl=function(){var e="//emp.bbc.co.uk/emp/SMPj/2.3.13/iframe.html";document.cookie.match(/html5Debug=true/)&&(e="//emp.bbc.co.uk/emp/SMPj/2.3.13/debug.html");return e};r._optInSuitable=o;r.compatibility=function(i){var a=e.get(),n=!i.backgroundPlayer&&(a.hasHlsVodSupport&&!a.windowsPhone10||i.preferHtmlOnDesktop||i.preferHtmlOnMobile&&a.isMobileOrTablet||i.preferInlineAudioPlayback&&a.htmlAudio&&i.playingAudio())&&t.media.video,r="false"!="true"&&i.smpj2OptIn&&o(i,n);if(r){a.os.blackberry||a.os.ios||i.blacklistedPlugins.push("bbci.co.uk/tip/0");i.likelyPlayDash=!0}return r};return n});define("mp/classes/players/apps/wmp",["mp/modules/device","mp/classes/players/app"],function(e,t){function i(){this.daxname="SMPWMP";this.classStr="wmpCTAcss";this._guidance="wmpGuidance";this.compatibility=n;this.filterPlaylist=!0;return this}function a(){var e=this._settings;if(this.playlist)if(e.requestWMP2)window.location="#playIt";else{window.external.notify("echo:"+e.countername);window.external.notify(JSON.stringify(this.playlist))}}function n(t){return!t.dashPlaybackOnly&&t.requestWMP&&e.get().os.winphone&&(t.requestWMP2||window.external&&"notify"in window.external)}i.prototype=new t("wmp",!0);i.prototype.play=a;i.prototype.hasPlaylist=function(){return!!this._settings.playlistObject};return i});define("mp/classes/players/apps/smp-phantom",["mp/classes/players/app","mp/modules/device"],function(e,t){function i(e){return e.phantomPlayer===!0||e.backgroundPlayer&&!t.get().useOpaque}function a(){this.compatibility=i;this.daxname="SMPPHANTOM";this._name="smp-phantom";return this}a.prototype=new e("smp-phantom");a.prototype.play=function(){};return a});define("mp/classes/players/apps/smp-exo",["mp/modules/device","mp/classes/players/app"],function(e,t){function i(){this.daxname="SMPEXO";this.classStr="aaampCTAcss";this._guidance="aaampGuidance";this.compatibility=function(){return!1};return this}function a(){var e=this._settings;if(e.playlistObject){var t="?pObj="+encodeURIComponent(JSON.stringify(e.playlistObject));if(/Chrome/.test(navigator.userAgent)){var i="intent://play/"+t+"#Intent;scheme=bbcmediaplayer;package=bbc.mp;end";this.setLocation(i)}else if("undefined"==this.iframe){this.iframe=$("<iframe />").css({display:"none"}).attr({id:"BBCMediaPlayer",src:"bbcmediaplayer://play/"+t});e.container.append(this.iframe)}}}i.prototype=new t("smp-exo",!0);i.prototype.play=a;i.prototype.hasPlaylist=function(){return!!this._settings.playlistObject};return i});define("mp/modules/players",["mp/classes/players/flash/smp-flash","mp/classes/players/flash/smp-flash-noembed","mp/classes/players/html5/smp-html5","mp/classes/players/html5/smp-j2oo","mp/classes/players/apps/smp-air","mp/classes/players/apps/wmp","mp/classes/players/apps/smp-phantom","mp/classes/players/apps/smp-exo"],function(e,t,i,a,n,o,r,s){return[r,a,e,t,i,n,o,s]});define("mp/classes/decisionengine",["swfobject-2","mp/modules/device","mp/modules/html5","mp/modules/players","mp/classes/players/html5/smp-j2oo"],function(e,t,i,a,n){function o(e){this._settings=e;return this}o.prototype={embed:function(e){var t=this.player;t&&t.embed(this._settings,e);return t},decide:function(){var e=this,i=document.cookie.match(/bbcBumpForcePlayer=(.*?)(?:;|$)/),o=i&&i.length?i[1]:"",r=this._settings,s=t.get();e.name=null;r.attemptHlsPlaybackOnAndroid&&s.allowHlsVod();if(!r.showUnsupportedMessage||""!==o){var l=[];if(r.preferHtmlOnDesktop||r.preferHtmlOnMobile&&s.isMobileOrTablet){for(var d=[],c=0;a.length>c;c++)"html"==a[c]().type?l.push(a[c]):d.push(a[c]);l=l.concat(d)}else l=a.concat();for(c=0;l.length>c;c++){var p=new l[c];if(o==p._name||""===o&&p.compatibility(r)){""!==o&&(r.playerWasForced=!0);e.player=p;e.name=p._name;break}}if(!e.name){var u=new n;if(u._optInSuitable(r,!1)){r.smpj2OptIn=!0;if(u.compatibility(r)){u.noFlashInstalled=!0;e.player=u;e.name=u._name}}}return e.player}},deviceData:function(){return{device:t.get(),html5:i,flash:{flashPlayerVersion:e.getFlashPlayerVersion()}}}};return o});define("mp/classes/rdotreporting",[],function(){var e,t="http://r.bbci.co.uk/e",i={};return{init:function(a,n){i={};e=a&&"https:"!=location.protocol;n&&""!==n&&(t=n.replace(/\/*$/g,""))},error:function(i,a){if(e){var n=(a.embedPageURL+"").replace(/\W+/gim,"~"),o=encodeURIComponent(a.counterName),r=[t,"mediaplayout","-","bumpv3",window.embeddedMedia.version,"-","-",n,o,"-~-","-~-","err",i].join("/"),s=new Image;s.src=r;return r}}}});define("mp/libs/securehash",["mp/libs/securehash"],function(){var e=0;return{generateHash:function(t){function i(e){return n(a(o(e)))}function a(e){return s(l(r(e),8*e.length))}function n(t){try{}catch(i){e=0}for(var a,n=e?"0123456789ABCDEF":"0123456789abcdef",o="",r=0;t.length>r;r++){a=t.charCodeAt(r);o+=n.charAt(a>>>4&15)+n.charAt(15&a)}return o}function o(e){for(var t,i,a="",n=-1;++n<e.length;){t=e.charCodeAt(n);i=e.length>n+1?e.charCodeAt(n+1):0;if(t>=55296&&56319>=t&&i>=56320&&57343>=i){t=65536+((1023&t)<<10)+(1023&i);n++}127>=t?a+=String.fromCharCode(t):2047>=t?a+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?a+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(a+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t))}return a}function r(e){for(var t=Array(e.length>>2),i=0;t.length>i;i++)t[i]=0;for(var i=0;8*e.length>i;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<24-i%32;return t}function s(e){for(var t="",i=0;32*e.length>i;i+=8)t+=String.fromCharCode(e[i>>5]>>>24-i%32&255);return t}function l(e,t){e[t>>5]|=128<<24-t%32;e[(t+64>>9<<4)+15]=t;for(var i=Array(80),a=1732584193,n=-271733879,o=-1732584194,r=271733878,s=-1009589776,l=0;e.length>l;l+=16){for(var m=a,f=n,h=o,g=r,b=s,y=0;80>y;y++){i[y]=16>y?e[l+y]:u(i[y-3]^i[y-8]^i[y-14]^i[y-16],1);var v=p(p(u(a,5),d(y,n,o,r)),p(p(s,i[y]),c(y)));s=r;r=o;o=u(n,30);n=a;a=v}a=p(a,m);n=p(n,f);o=p(o,h);r=p(r,g);s=p(s,b)}return Array(a,n,o,r,s)}function d(e,t,i,a){return 20>e?t&i|~t&a:40>e?t^i^a:60>e?t&i|t&a|i&a:t^i^a}function c(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function p(e,t){var i=(65535&e)+(65535&t),a=(e>>16)+(t>>16)+(i>>16);return a<<16|65535&i}function u(e,t){return e<<t|e>>>32-t}return i(t)}}});define("mp/classes/parentalguidance",["mp/libs/securehash"],function(e){function t(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function i(){return!!N}function a(){R="true"==o("pgAgeConfirm");N=o("pgPIN");H="true"==o("pgUnlocked")}function n(e){j=[];R=!1;this.closedCallbacks=[];this.updateCallbacks=[];U=e||{action:function(){}};this.guidance={};a();this._isLocked=i()&&!H;D=window.embeddedMedia.language;this.updateGuidanceState();return this}function o(e){var t=document.cookie,i=t.indexOf("ckps_"+e+"=");if(i==-1)return null;i=t.indexOf("=",i)+1;var a=t.indexOf(";",i);a==-1&&(a=t.length);return unescape(t.substring(i,a))}function r(e,t,i){var a="";if(!i){var n=new Date;n.setTime(n.getTime()+15552e6);a="; expires="+n.toGMTString()}var o="ckps_",r=location.hostname;r.indexOf(".bbc.co.uk")!==-1&&(r=".bbc.co.uk");r.indexOf(".bbc.com")!==-1&&(r=".bbc.com");document.cookie=o+e+"="+escape(t)+a+"; Domain="+r+"; Path=/"}function s(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function l(e,i){j.push(e);e.setAttribute("tabindex","0");e.onkeydown=function(i){i=i||window.event;var a=i.keyCode||i.which;if(9==a||13==a){t(i);if(9==a){var n=j.length-1;A=i.shiftKey?0===A?n:A-1:A===n?0:A+1;setTimeout(function(){j[A].focus()},200)}else setTimeout(function(){e.click()},200)}};if(i){A=j.length-1;e.focus()}}function d(){A=0;j=[];l(M)}function c(e){var t="";if(R){e.style.backgroundPosition="center";t=D.t("pgAriaAgeConfirmCheckBox",O)}else{e.style.backgroundPosition="-30px";t=D.t("pgAriaAgeConfirmCheckBoxUnchecked",O)}e.setAttribute("aria-label",t);e.textContent=e.innerText=t}function p(e,t,i){var a=document.getElementById("pgErrorMessage");if(a)s(a);else{a=document.createElement("div");a.id="pgErrorMessage";var n=a.style;n.width="122%";n.backgroundColor="#d13c2c";n.filter="alpha(opacity=70)";n.opacity=.7;n.marginTop="15px";n.marginBottom="5px";n.left="-25px";n.position="relative"}i?e.insertBefore(a,e.firstChild):e.appendChild(a);var o=document.createElement("div"),r=o.style;r.fontSize="14px";r.position="relative";r.width="90%";r.color="#ffffff";r.fontSize="11px";r.textAlign="center";r.paddingTop=r.paddingBottom=r.left="10px";o.innerHTML=t;a.appendChild(o)}function u(e){if(T)return!1;T=document.createElement("div");T.setAttribute("tabindex","0");T.id="parentalGuidanceBackground";T.className="smpPG";var i=T.style;i.width=i.height="5000px";i.left=i.top="-500px";i.zIndex="2147483600";i.backgroundColor="#333333";i.filter="alpha(opacity=85)";i.opacity=.85;I=document.createElement("div");I.id="guidancePopup";I.setAttribute("role","alertdialog");I.setAttribute("aria-labelledby","pgHeaderTitle");I.className="smpPG";var a=I.style;a.position=i.position="fixed";a.width="290px";if(window.innerHeight>350){a.top="50%";a.marginTop="-175px"}else{a.top="5px";a.marginTop="0px"}a.marginLeft="-145px";a.left="50%";a.lineHeight="normal";a.verticalAlign="middle";a.color="white";a.fontSize="22px";a.zIndex="2147483600";a.backgroundColor="#141414";a.fontFamily="Arial, sans-serif";a.textAlign="left";document.body.appendChild(T);document.body.appendChild(I);I.onkeydown=function(t){t=t||window.event;var i=t.keyCode||t.which;27===i&&e.close(!1)};var n=document.createElement("div");n.id="guidanceContainer";n.style.paddingRight=n.style.paddingLeft="26px";I.appendChild(n);var o=document.createElement("div");o.id="pgHeaderTitle";o.style.height="42px";o.style.position="relative";n.appendChild(o);var r=document.createElement("span");r.innerHTML=D.t("pgHeader",O);r.id="pgHeader";r.style.position="absolute";r.style.left=r.style.bottom="0px";r.style.fontSize="18px";r.style.color="#ffffff";o.appendChild(r);S=document.createElement("div");S.id="guidanceBody";S.style.position="relative";S.style.width="100%";n.appendChild(S);E=document.createElement("div");E.id="guidanceFooter";var s=E.style;s.width="100%";s.height="42px";s.bottom="0px";s.display="table";s.textAlign="center";I.appendChild(E);M=document.createElement("a");M.setAttribute("aria-label",D.t("pgClose",O));M.id="pgExit";var l=M.style;M.title=D.t("pgClose",O);l.position="absolute";l.right=l.top="12px";l.cursor="pointer";l.width=l.height="15px";l.backgroundImage="url(//emp.bbci.co.uk/emp/assets/2.0.12/cross.png)";l.backgroundRepeat="no-repeat";I.appendChild(M);var d=!1;setTimeout(function(){d=!0},500);M.onclick=function(i){if(d){i=i||window.event;t(i);U.action("click",this.id);e.close(!1)}};return!0}function m(e){var t=document.createElement("div"),i=t.style;i.marginTop="-1px";i.position="absolute";i.opacity="0.2";i.filter="alpha(opacity=20)";i.width="100%";i.height="1px";i.backgroundColor="#ffffff";e.appendChild(t)}function f(e,t){function i(){if(d){U.action("click",a.id);c()}}var a=document.createElement("a");a.id=t.id;a.innerHTML=t.text;a.setAttribute("aria-label",t.text+" button");var n=a.style;n.cursor="pointer";try{n.display="table-cell"}catch(o){n.display="block"}n.verticalAlign="middle";n.width=n.height="100%";n.fontSize="18px";n.color="#ffffff";E.appendChild(a);var r=function(){n.backgroundColor=L},s=function(){n.backgroundColor=""},d=!1;setTimeout(function(){d=!0},500);var c=t.clickFunction;a.onclick=i;a.onmouseover=a.onfocus=r;a.onmouseout=a.onblur=s;l(a,t.focus);return a}function h(e,t,i){s(E);m(E);var a=f(e,t);if(i){a.style.width="50%";a.style.borderRightColor="#aaaaaa";a.style.borderRightWidth="1px";a.styleborderRightStyle="solid";f(e,i);var n=document.createElement("div");n.style.left="50%";n.style.position="absolute";n.style.opacity="0.2";n.style.filter="alpha(opacity=20)";n.style.width="1px";n.style.height=E.style.height;n.style.backgroundColor="#ffffff";E.appendChild(n)}}function g(e,t){s(S);d();var i=document.createElement("div");i.id="guidanceMessage";var a=i.style;a.marginTop="15px";a.marginBottom="5px";a.width="100%";a.position="relative";a.fontSize="13px";S.appendChild(i);var n=document.createElement("div");n.id="guidanceG";var o=n.style;o.display="inline-block";o.margin="auto";o.borderRadius="50%";o.width=o.height="15px";o.backgroundColor="red";o.position="relative";o.top="-2px";o.fontSize="12px";i.appendChild(n);var r=document.createElement("span");r.innerHTML="G";var u=r.style;u.lineHeight="normal";u.position="relative";u.left="2px";u.top="1px";u.color="#ffffff";n.appendChild(r);var m=document.createElement("span");m.id="guidanceText";m.innerHTML=t;u=m.style;u.left="0px";u.top="16px";u.marginLeft="5px";u.lineHeight="16px";u.color="#868686";i.appendChild(m);var f=document.createElement("div");f.id="ageConfirm";var g=f.style;g.width="100%";g.height="57px";g.position="relative";g.fontSize="14px";g.color="#ffffff";S.appendChild(f);var y=document.createElement("button");y.id="ageConfirmCheck";var v=y.style;v.background="url(//emp.bbci.co.uk/emp/assets/2.0.12/tick.png) no-repeat center";v.backgroundPosition="-30px";v.position="absolute";v.left="0px";v.top="16px";v.height=v.width="25px";v.verticalAlign="middle";v.cursor="pointer";v.backgroundColor="#ffffff";v.borderWidth="0";v.textIndent="-9999px";v.whiteSpace="nowrap";v.overflow="hidden";f.appendChild(y);l(y,!0);c(y);var w=document.createElement("span");w.innerHTML=D.t("pgAgeConfirmation",O);w.style.position="relative";w.style.top="20px";w.style.marginLeft="35px";f.appendChild(w);var k=!1;setTimeout(function(){k=!0},500);y.onclick=function(){if(k){R=!R;c(y)}};var P=function(){R?b(e):p(i,D.t("pgPasswordValidationError",O),!1)};h(e,{id:"pgAgeContinue",text:D.t("pgContinue",O),clickFunction:P})}function b(e){s(S);d();var t=document.createElement("div");t.setAttribute("role","alertdialog");t.setAttribute("aria-labelledby","pgInfoHeader");t.setAttribute("aria-describedby","pgInfo");t.style.marginBottom="24px";S.appendChild(t);var i=document.createElement("div");i.id="pgInfoHeader";i.innerHTML=D.t("pgTurnOnParentalGuidance",O);i.style.marginTop="16px";i.style.height="24px";i.style.fontSize="14px";t.appendChild(i);if(B)var a="pgInfo",n="pgUnlock";else{var o=e._intent;if("download"==o){a="pgInfoPlusDownload";n="pgDownload"}else if("play"==o){a="pgInfoPlusPlay";n="toolTipPlay"}else{a="pgInfo";n=o}}var r='<a id="pgLink" target="_blank" style="color:#ffffff; text-decoration:none;" href="http://www.bbc.co.uk/iplayer/guidance">'+D.t("pgHeader",O)+"</a> "+D.t(a,O),c=document.createElement("div");c.id="pgInfo";c.innerHTML=r;c.style.fontSize="13px";c.style.color="#868686";t.appendChild(c);var p=c.getElementsByTagName("p");if(p)for(var u=0;p.length>u;u++){p[u].style.color="#868686";p[u].style.fontSize="13px"}var m=document.getElementById("pgLink"),f=!1;setTimeout(function(){f=!0},500);m.onclick=function(){return f};l(m,!0);var g=function(){if(f){e.storeAgeConfirmation();w(e)}},b=function(){if(f){e.storeAgeConfirmation();e.close(!0)}},y={id:"pgTurnOn",text:D.t("pgTurnOn",O),clickFunction:g},v={id:"toolTipPlay",text:D.t(n,O),clickFunction:b};h(e,y,B?null:v)}function y(e){var t=document.createElement("div");t.id="pinEntry";t.style.width="100%";t.style.height="40px";t.style.marginBottom="25px";e.appendChild(t);var i=document.createElement("input"),a=i.style;i.setAttribute("maxlength",4);a.letterSpacing="5px";a.display="block";a.width=a.height="100%";a.padding="0px";a.resize="none";a.color="#868686";a.fontSize="30px";a.textAlign="center";i.setAttribute("type","password");i.pattern="[0-9]*";t.appendChild(i);return i}function v(e,t){var i=!1,a=function(e){e=e||window.event;var a=e.keyCode||e.which;13===a&&i&&setTimeout(t,300)};setTimeout(function(){i=!0},400);e.addEventListener?e.addEventListener("keyup",a):e.onkeyup=a}function w(e){s(S);d();var t=document.createElement("div");t.id="activatePIN";t.style.marginTop="16px";t.style.fontSize="14px";t.style.color="#ffffff";S.appendChild(t);var i=document.createElement("span");i.innerHTML=D.t("pgEnterPIN",O);i.style.fontSize="14px";i.style.color="#ffffff";t.appendChild(i);var a=document.createElement("div");a.innerHTML="<span>"+D.t("pgActivateInfo",O)+"</span>";a.style.marginTop="10px";a.style.marginBottom="24px";a.style.fontSize="13px";a.style.color="#868686";S.appendChild(a);var n=y(S);n.setAttribute("aria-label",D.t("pgAriaPINEntryDescription",O)+"."+D.t("pgAriaPINPrompt",O));l(n,!0);var o=function(){if(/^\d{4}$/.test(n.value)){e.setPIN(n.value);e.setLocked(B);e.close(!B)}else{n.value="";p(a,D.t("pgPINValidationError",O),!1);n.focus()}},r=_(e._intent,"pgActivate");v(n,o);h(e,{id:"pgActivate",text:D.t(r,O),clickFunction:o})}function k(e,t){var i=document.createElement("div");i.style.marginBottom="20px";i.style.width="100%";i.style.height="15px";e.appendChild(i);var a=document.createElement("a");a.setAttribute("target","_blank");a.setAttribute("href","http://www.bbc.co.uk/iplayer/guidance");a.innerHTML=t;a.style.color="#ffffff";a.style.textDecoration="underline";a.style.width="100%";a.style.fontSize="14px";a.style.position="absolute";a.style.bottom="0px";a.style.textAlign="center";i.appendChild(a);return a}function P(e){s(S);d();var t=document.createElement("div"),i=document.createElement("div"),a=document.createElement("span");t.id="enterPIN";a.innerHTML=D.t("pgEnterPINPrompt",O);t.style.marginTop=t.style.paddingBottom="16px";t.style.width="100%";t.style.position="relative";t.style.fontSize=a.style.fontSize="14px";t.style.color=a.style.color="#ffffff";S.appendChild(t);t.appendChild(i);i.appendChild(a);var n=y(S);n.setAttribute("aria-label",D.t("pgAriaPINEntryDescription",O)+"."+D.t("pgEnterPINPrompt",O));l(n,!0);var o=k(S,D.t("pgManageYourPIN",O));l(o);o.onclick=function(){return c};var c=!1;setTimeout(function(){c=!0},500);var u=function(){if(c)if(e.verifyPIN(n.value)){B&&r("pgUnlocked","true");e.setLocked(!1);e.close(!0)}else{n.value="";p(a,D.t("pgIncorrectPIN",O),!1);n.focus()}};v(n,u);var m=_(e._intent,"pgUnlock");h(e,{id:"pgTurnOff",text:D.t(m,O),clickFunction:u})}function x(){G++;clearTimeout(F);F=setTimeout(C,100)}function _(e,t){return B?t:"download"==e?"pgDownload":"play"==e?"toolTipPlay":e}function C(){if(T){var e=T.style;e.left=e.top="-500px";e.height=e.width="5000px"}if(I){var t=Math.floor(window.innerWidth/2-I.offsetWidth/2);(0>t||G>0)&&(t=0);I.style.left=t+"px";var i=window.innerHeight-I.offsetHeight;if(window.innerHeight>=I.offsetHeight){var a=Math.floor(i/2);(G>0||5>a)&&(a=5)}else a=2;I.style.marginTop=I.style.marginLeft="0px";I.style.top=a+"px"}}var T,I,S,E,M,O,D,L,A,j,R,B,N,H,U,F,G=0;n.prototype={show:function(e,n,o){var r=this;O=o;L=(n+"").replace("0x","#");a();if(e){B=e.lockClicked;r._intent=e.intent||"play"}window.embeddedMedia.opened();var s=R&&(!i()||!r._isLocked);if(!s||B){if(u(r)){i()?P(r):B&&s?b(r):g(r,e.guidance);document.body.addEventListener&&document.body.addEventListener("touchmove",t);G=0;if(window.addEventListener){window.addEventListener("resize",C);window.addEventListener("orientationchange",x)}}}else r.close(!0)},close:function(e,i){var a=this;document.body.removeEventListener&&document.body.removeEventListener("touchmove",t);if(window.removeEventListener){window.removeEventListener("resize",C);window.removeEventListener("orientationchange",x)}if(T){T.parentNode.removeChild(T);T=void 0}if(I){I.parentNode.removeChild(I);I=void 0}if(!i){window.embeddedMedia.closed();for(var n=0;a.closedCallbacks.length>n;n++)a.closedCallbacks[n](e)}},setPIN:function(t){N=e.generateHash("smpembed"+t);r("pgPIN",N)},setLocked:function(e,t){if(t){r("pgUnlocked",e?"":"true");H=!e}this._isLocked=e;this.updateGuidanceState()},verify:function(e,t){var i=this.verifyPIN(e.verifyPIN);if(i){this.setLocked(!1);e.lockClicked&&r("pgUnlocked","true")}t(i)},verifyPIN:function(t){return e.generateHash("smpembed"+t)===N},setAgeConfirmation:function(e){R=e;this.storeAgeConfirmation()},storeAgeConfirmation:function(){r("pgAgeConfirm",R);this.setLocked(!0)},updateGuidanceState:function(){var e=this.guidance;e.isGuidanceLocked=this._isLocked&&i()&&!H;e.hasGuidancePIN=i();e.guidanceSkipped=R&&!i();e.guidancePINPassed=!this._isLocked&&i();e.canPlay=e.guidanceSkipped||e.hasGuidancePIN&&e.guidancePINPassed||H;for(var t=0;this.updateCallbacks.length>t;t++)this.updateCallbacks[t](e)}};return n});define("mp/classes/sonarreporter",[],function(){function e(){var e=this;this.hashedIdentity=null;this.duration=0;this.isLive=!1;this.smpLabels={};this.smpMediaLabels={};this.hasPlayed=!1;this.hasSetMediaItem=!1;return e}function t(e){var t=l(e,{}),i={},a=f.ManagedLabels;for(var n in a)if(a.hasOwnProperty(n)){var o=a[n];if(t.hasOwnProperty(o)){i[o]=t[o];delete t[o]}}var r={};r.managedLabels=i;r.otherLabels=t;return r}function i(e,t){for(var i in e)e.hasOwnProperty(i)&&t.echo.addLabel(i,e[i])}function a(e,t){for(var i in e)e.hasOwnProperty(i)&&t.echo.addManagedLabel(i,e[i])}function n(e,t){if(e)for(var i in e)e.hasOwnProperty(i)&&t.echo.removeLabel(i)}function o(e,t){if(e.hasOwnProperty("bbcHashedIdentity")&&t.hashedIdentity!=e.bbcHashedIdentity){var i=t.hashedIdentity=e.bbcHashedIdentity;null===i||""===i?t.echo.setLoggedOutOfBBCId():t.echo.setLoggedInToBBCId(i)}}function r(e,n){if(e){var o=t(e);a(o.managedLabels,n);i(o.otherLabels,n)}}function s(e,o){n(o.managedPlaylistLabels,o);n(o.playlistLabels,o);if(e){var r=t(e);o.managedPlaylistLabels=r.managedLabels;o.playlistLabels=r.otherLabels;a(r.managedLabels,o);i(r.otherLabels,o)}else{o.managedPlaylistLabels={};o.playlistLabels={}}}function l(e,t){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function d(e){var t=!1,i=e.counterName+"";i.indexOf("iplayer.tv.episode")>=0&&(t=!0);i.indexOf("iplayer.tv.channels.simulcast")>=0&&(t=!0);return e.enableBarbReporting&&t}function c(e,t){if(e.media){var a=t.suppliers,n=t.encoding;if(a){e.media.setCDN(a);e.smpMediaLabels[P]=a;i(e.smpMediaLabels,e)}n&&e.media.setCodec(n)}}function p(e,t){t||(t={connections:[]});e.hasPlayed&&e.end();e.isAdvertOrIdent=t.kind&&("ident"==t.kind||"advert"==t.kind);e.durationSet=!1;e.isLive=t.isLive;var a=e.isLive?f.MediaConsumptionMode.LIVE:f.MediaConsumptionMode.ON_DEMAND,n="audio"==t.type?f.AvType.AUDIO:f.AvType.VIDEO,o=e.media=new u(n,a),r=t.identifier,s=t.versionID,l=t.serviceID;if(r){if(!s&&!l){o.setVpId(r);e.isLive?o.setServiceId(r):o.setVersionId(r)}}else{var d=e.player.player._statsObject||{};if(d.playlistURL){var c=(d.playlistURL+"").replace(/\W+/gim,"-");o.setVpId(c)}}s&&o.setVersionId(s);l&&o.setServiceId(l);if(e.parentPID){e.parentPIDType==f.PIPsType.EPISODE&&o.setEpisodeId(e.parentPID);e.parentPIDType==f.PIPsType.CLIP&&o.setClipId(e.parentPID)}e.episodePID&&o.setEpisodeId(e.episodePID);e.clipPID&&o.setClipId(e.clipPID);try{e.echo.setMedia(o);e.hasSetMediaItem=!0}catch(p){e.hasSetMediaItem=!1}e.smpMediaLabels[b]=t.rewindWindow>0&&e.isLive?"1":"0";e.smpMediaLabels[y]=e.isLive?"1":"0";e.smpMediaLabels[v]="audio"==t.type?"audio":"video";i(e.smpMediaLabels,e)}var u,m,f,h,g,b="bbc_smp_lr",y="bbc_smp_lod",v="bbc_smp_med",w="bbc_smp_bv",k="connection_type",P="bbc_smp_cdn";e.prototype={initComplete:function(e){var t=this;if(m&&!t.echo){var i=e._settings,a=e.name().replace(/-/gm,""),n=i.appName&&""!==i.appName?i.appName:a,o=i.appType&&""!==i.appType?i.appType:f.ApplicationType.WEB,r={},s=e.player._statsObject||{};r[h.ECHO_TRACE]=s.trace;s.deviceId&&(r[h.ECHO_DEVICE_ID]=s.deviceId);r[h.BARB_ENABLED]=d(i);r[h.BARB_DEBUG]=!1;r[h.BARB_SITE_CODE]=i.liveEnvironment?"bbcdotcom":"bbcdotcomtest";var l=s.echoProfile||"public_service";r[h.REPORTING_PROFILE]=l;if("public_service"!==(l+"").toLowerCase()){t.ssc=r[h.USE_SSC]=!0;r[h.SSC_HOSTNAME]=".com"}s.x_ns_site&&(r[h.COMSCORE_SITE]=s.x_ns_site);var c=t.echo=new m(n,o,r);t.processNewSettings();c.setPlayerName(a);c.setPlayerDelegate({getPosition:function(){return t.currentTime()},getTimestamp:function(){return t.currentTime(!0)}})}},report:function(e){var t=this;if(t.hasSetMediaItem){var i=t.currentTime();t.echo["av"+e+"Event"](i)}},pause:function(){this.report("Pause")},end:function(){this.report("End")},seek:function(){this.report("Seek")},playResume:function(){this.report("Play")},buffering:function(){this.report("Buffer")},action:function(e,t,i){var a=this;a.echo&&a.echo.userActionEvent(e,t,l(i,{}))},newPlayer:function(e,t){var i=this;i.player=e;if(t||i.boundEvents){i.boundEvents=!0;var a=t?"bind":"unbind";e[a]("changingsrc durationchange info initialised mediaItemChanged playing playlistLoaded playlistLoading seeking SonarEndEvent SonarPauseEvent SonarPlayEvent SonarResumeEvent SonarSeekEvent SonarUserActionEvent volumechange uiinfo bitrateChanged",{sonarReporter:i},i.eventHandler);i.initComplete(e)}},init:function(){var e=this,t={},i="8.0.1";t["echo-"+i]="//static.bbci.co.uk/echoclient/modules/echo-"+i;if(require.config){require.config({paths:t});require(["echo-"+i],function(t){if(t){u=t.Media;m=t.EchoClient;f=t.Enums;h=t.ConfigKeys;g=t.Environment;if(u&&m&&f&&h&&g){var i=e.player;if(i){i._settings.liveEnvironment||t.Debug.enable();e.initComplete(i)}}}})}},eventHandler:function(e){var t=e.data.sonarReporter;if(t.echo)switch(e.type){case"bitrateChanged":"video"==e.streamType&&t.mediaBitrate(e.newBitrate);break;case"changingsrc":c(t,e);break;case"durationchange":if(t.media&&!t.isLive&&e.duration>0&&!t.durationSet&&!t.isAdvertOrIdent){t.echo.setMediaLength(1e3*e.duration);t.durationSet=!0}break;case"initialised":t.echo.setPlayerVersion((e.version+"").replace(/[^\d\.]/gim,""));break;case"mediaItemChanged":t.hasPlayed=!1;p(t,e.mediaItem);break;case"playing":t.hasPlayed=!0;break;case"playlistLoaded":t.processNewSettings();break;case"playlistLoading":t.hasPlayed&&t.end();break;case"seeking":t.seek();break;case"SonarEndEvent":case"SonarPauseEvent":t.pause();break;case"SonarPlayEvent":case"SonarResumeEvent":t.playResume();break;case"SonarSeekEvent":t.player.paused()||t.playResume();break;case"SonarUserActionEvent":t.action(e.actionType,e.controlId,e.labels);break;case"volumechange":t.echo.setPlayerVolume(e.muted?0:e.volume);break;case"uiinfo":t.echo.setPlayerIsSubtitled(!!e.subtitles)}},volume:function(e){var t=this;e&&t.echo.setPlayerVolume(e)},mediaBitrate:function(e){e&&this.echo.setMediaBitrate(e)},forAir:function(e){e=e||{};if(!this.ssc&&!e.deviceId){var t=(document.cookie+"").match(/\bs1=[^;]+\b/gim);t&&(e.deviceId=t[0].replace("s1=",""))}return e},processNewSettings:function(){var e=this,t=e.player._settings,a=e.player.player._statsObject||{};e.echo.setCounterName(t.counterName);e.smpLabels[w]=window.embeddedMedia.version.toLowerCase();e.smpLabels[k]=window.embeddedMedia.demi.isMobileNetwork?"3g":"wifi";e.parentPID=a.parentPID;e.parentPIDType=f.PIPsType.EPISODE;e.episodePID=a.episodePID;e.clipPID=a.clipPID;r(a.sessionLabels,e);s(a.playlistLabels,e);o(a,e);(a.parentPIDType+"").indexOf("clip")!=-1&&(e.parentPIDType=f.PIPsType.CLIP);i(e.smpLabels,e)},currentTime:function(e){var t=this,i=Math.round(1e3*t.player.currentTime());return e?1e3*60*60*24*365>i?0:i:t.isLive?0:i}};return e});define("mp/classes/language",[],function(){function e(e){if(a[e])for(;a[e].length>0;)a[e].pop()()}function t(e){if(2>l.length)return!0;for(var t=0;l.length>t;t++)if(l[t]==e)return!0;return!1}var i={en:{pgHeader:"Parental Guidance Lock",pgAgeConfirmation:"I am aged 16 or over",pgClose:"Close pop up",pgContinue:"Continue",pgPasswordValidationError:"Please confirm your age before continuing",pgAriaAgeConfirmCheckBox:"Age confirmation check box. Checked.",pgAriaAgeConfirmCheckBoxUnchecked:"Age confirmation check box. Check to confirm you are sixteen or over.",pgTurnOnParentalGuidance:"Turn on the Parental Guidance Lock?",pgInfoPlusDownload:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose âTurn Onâ. To continue without Parental Guidance choose âDownloadâ.</p>",pgInfoPlusPlay:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose âTurn Onâ. To continue without Parental Guidance choose âPlayâ.</p>",pgInfo:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.",pgTurnOn:"Turn On",toolTipPlay:"Play",pgEnterPIN:"Please enter a four-digit PIN",pgActivateInfo:"You will need your PIN to play Guidance-labelled content",pgPINValidationError:"Your PIN must be four digits",pgAriaPINEntryDescription:"PIN entry text field",pgAriaPINPrompt:"Please enter a valid four-digit PIN",pgEnterPINPrompt:"Please enter your four-digit PIN to continue",pgManageYourPIN:"Manage your PIN",pgUnlock:"Unlock",pgIncorrectPIN:"Incorrect PIN. Please try again",pgDownload:"Download",pgActivate:"Activate",6000:"Unable to embed player",errorUnsupported:"Your device is not currently supported",6004:"Player failed to initialise",errorFlashPlayerNotInstalled:"You need to install Flash Player to play this content.",downloadFlash:"Download Flash Player now",contentNotAvailableHtml:"This content cannot be played in our HTML5 Player",embedTitle:"Embed This Media",embedDescription:"Copy the code below to share this content on your own site. Press escape to close",embedTerms:"Terms and conditions",embedClose:"Close",aaampTitle:"BBC Media Player",aaampMsg:"To play BBC Programmes you need to install the BBC Media Player application from your app store",aaampInstall:"Install",aaampCancel:"cancel",aaampPlay:"click to play",jumpMediaPlayer:"Jump media player",mediaPlayerHelp:"Media player help",outOfMediaPlayer:"Out of media player. Press enter to return or tab to continue."}},a={},n={},o={},r=5e3,s={"en-GB":"en","en-gb":"en","cy-GB":"cy","cy-gb":"cy","gd-GB":"gd","gd-gb":"gd","ga-GB":"ga","ga-gb":"ga","ru-uk":"ru",zh:"zh-hans"},l="cy,gd,ga,fr,ar,az,ha,hi,id,ky,es,so,sw,tr,ur,fa,ru,uk,vi,si,rw,ps,ne,my,zh-hans,zh-hant,uz,tg,pt,ta,bn,jp,pi".split(","),d={add:function(t,a){clearTimeout(o[t]);
i[t]=a;e(t)},load:function(l,d){s[l]&&(l=s[l]);if(l&&/^[\-a-zA-Z]{1,8}$/.test(l)&&!i[l]&&t(l)){if(d){a[l]||(a[l]=[]);a[l].push(d)}if(!n[l]){n[l]=!0;var c=document.createElement("script");c.type="text/javascript";c.charset="utf-8";c.async=!0;c.src="//emp.bbci.co.uk/emp/translations/1.0.18/language."+l+".js";document.getElementsByTagName("head")[0].appendChild(c);clearTimeout(o[l]);o[l]=setTimeout(function(){e(l)},r)}}else d&&d()},t:function(e,t,a){s[t]&&(t=s[t]);if(a){if("string"==typeof a)return a;if(a[t])return a[t]}return i[t]&&i[t][e]?i[t][e]:i.en[e]||e}};return d});define("mp/modules/helpers",["mp/classes/language"],function(e){return{addEmbeddedMedia:function(){if(window.embeddedMedia){window.embeddedMedia.playerInstances||(window.embeddedMedia.playerInstances={});window.embeddedMedia.players||(window.embeddedMedia.players=[]);if(!window.embeddedMedia.playerInitFunctions){window.embeddedMedia.playerInitFunctions=[];window.embeddedMedia.playersToInit=0}}else window.embeddedMedia={players:[],playerInstances:{},playersToInit:0,playerInitFunctions:[]};var t=window.embeddedMedia;if(!t.openCallbacks){t.openCallbacks=[];t.closedCallbacks=[];t.opened=function(){for(var e=0;t.openCallbacks.length>e;e++)t.openCallbacks[e]()};t.closed=function(){for(var e=0;t.closedCallbacks.length>e;e++)t.closedCallbacks[e]()}}t.addPlayer||(t.addPlayer=function(e,i){t.playerInstances[e]=i;t.players.push(i)});t.language||(t.language=e);if(!t.demi){t.demi={loading:!0,loadingNetwork:!0,loadingScript:!0,isTabletDevice:!1,isMobileDevice:!1,hasTouchScreen:!1,hasStylus:!1,callbacks:[],ua:window.navigator.userAgent.toLowerCase()};if(window.orb&&window.orb.fig&&window.orb.fig.device){var i=window.orb.fig.device;if(i.isMobile||i.isTablet){t.demi.isMobileDevice=i.isMobile();t.demi.isTabletDevice=i.isTablet();t.demi.hasTouchScreen=i.isMobile()||i.isTablet();t.demi.loadingScript=!1}}}return t}}});define("mp/classes/player",["jquery-1.9","mp/classes/settings","mp/classes/decisionengine","mp/classes/errors/error","mp/modules/device","mp/classes/rdotreporting","mp/classes/parentalguidance","mp/classes/players/player","mp/classes/sonarreporter","mp/modules/helpers"],function(e,t,i,a,n,o,r,s,l,d){function c(e,t){if("string"==typeof e){if(e.match(x))return t?e:e.replace("px","");if(e.match(P))return e}return null==e||isNaN(Number(e))?void 0:Number(e)+(t?"px":"")}function p(e,t,i){t=t&&"width"===t?"width":"height";var a,n=e._settings,o=n.container,r="width"===t?"height":"width",s=c(e["_"+r]||n.plugins.player[r]);void 0!==s&&(a=s.match(P)?s:String(isNaN(s)?o[t]():Math.ceil("height"===r?s*_:s/_)));return a+(i?"px":"")}function u(e,t,i,a,n){i=i&&"width"===i?"width":"height";if("undefined"!=typeof t){t+="";var o="width"===i?"height":"width",r=e._settings,s=r.container,l=t,d=l.match(x),m=c(l);if(void 0!==m){e["_"+i]=l;r.plugins.player[i]=m}else{m=p(e,i);if(void 0!==m){e["_"+i]="0";r.plugins.player[i]=m}}if(void 0!==m){a=a||null!==l.match(P);a||s.css(i,m+"px");if(!n&&void 0===e["_"+o]){var h=p(e,o,d);u(e,h,o,a,!0)}f(e)}}return e["_"+i]}function m(t){var i={position:"relative","z-index":"1",height:"100%",width:"100%","padding-bottom":0};t.superResponsive&&(i["padding-bottom"]="56.25%");if(!t.responsive&&!t.superResponsive){t.container.css("width",c(t.plugins.player.width,!0));t.container.css("height",c(t.plugins.player.height,!0))}return e("<div />").css(i)}function f(e){var t=e._settings,i=t.container,a=t.posterUrl(i);if(a&&e.player.includePoster){var n="contain";(t.ui.displayCover||Math.abs(16/9-i.width()/i.height())<.2)&&(n="cover");i.css({"background-image":"url("+a+")","background-repeat":"no-repeat","background-position":"center center","background-size":n,"background-color":"black",overflow:"hidden"})}else i.css("background-image","");"html"==e.type&&i.css("overflow","")}function h(e){var t=window.embeddedMedia.demi;if(!e||!t.loadingNetwork&&!t.loadingScript){t.loading=!1;for(var i=0;t.callbacks.length>i;i++)t.callbacks[i]()}}function g(e,t){var i="https:"==location.protocol?"https":"http",a=i+"://"+(e&&e.mediator&&e.mediator.host?e.mediator.host:"open.live.bbc.co.uk")+"/wurfldemi/";w=setTimeout(h,C);b(a+"network.jsonp?callback=bumpDemiNetwork");t&&b(a+"useragent.jsonp?callback=bumpDemiScript&ua="+encodeURIComponent(window.navigator.userAgent))}function b(e){var t=document.createElement("script");t.type="text/javascript";t.charset="utf-8";t.async=!0;t.src=e;document.getElementsByTagName("head")[0].appendChild(t)}function y(a,c){var p=d.addEmbeddedMedia();p.version=this.bumpVersion="3.15.1";p.playersToInit++;if(!p.demiKickedOff){p.demiKickedOff=!0;g(c,p.demi.loadingScript)}v=n.get();this.bumpRevision="1740098";this.player=new s;this.player.fake=!0;this.supportsMarkers=!1;this.capability={markers:!1,queuedPlaylist:!1,inPage:!1,chromecast:!1,overlay:!1};c.container=a;c.domid=a.attr("id");var u=this._settings=new t(c);o.init(u.enableRdotReporting,u.customRdotBaseURL);if(u.enableSonarReporting&&!u.noTracking){this._sonarReporter=new l;this._sonarReporter.init()}p.parentalGuidance||(p.parentalGuidance=new r(this._sonarReporter));u.guidance=p.parentalGuidance.guidance;v.preferHtmlAudio&&"undefined"==typeof c.preferInlineAudioPlayback&&(u.preferInlineAudioPlayback=!0);var m=p.parentalGuidance;m.closedCallbacks.push(function(){var t=e.Event("guidanceClosed");t.guidance=u.guidance;u.container.trigger(t)});m.updateCallbacks.push(function(t){var i=e.Event("guidanceUpdated");t.noPin=u.guidanceCleared;u.guidance=t;i.guidance=u.guidance;u.container.trigger(i)});this._decisionEngine=new i(u);return this}var v,w,k,P=new RegExp("^([0-9\\.]+)%$","gi"),x=new RegExp("^([0-9\\.]+)px$","gi"),_=16/9,C=1e4;window.bumpDemiNetwork=function(e){clearTimeout(w);var t=d.addEmbeddedMedia().demi;t.isMobileNetwork=e&&e.is_mobile_network;t.loadingNetwork=!1;h(!0)};window.bumpDemiScript=function(e){clearTimeout(k);var t=d.addEmbeddedMedia().demi;if(e){t.isTabletDevice="tablet"===e.type;t.isMobileDevice="mobile"===e.type;t.hasTouchScreen="touchScreen"===e.navigation;t.hasStylus="stylus"===e.navigation;v=n.get()}t.loadingScript=!1;h(!0)};y.prototype={showGuidance:function(e,t,i,a){var n={lockClicked:i};n.title=e?e:"";n.guidance=t?t:"";n.intent=a?a:"play";var o=window.embeddedMedia.parentalGuidance,r=this._settings;r.guidanceCleared||o.show(n,r.ui.colour,r.locale())},lockGuidance:function(){this._settings.guidance.hasGuidancePIN===!0?window.embeddedMedia.parentalGuidance.setLocked(!0,!0):this.unlockGuidance()},unlockGuidance:function(){this.showGuidance("","",!0)},name:function(){return this._decisionEngine.name||"no-player"},decide:function(){this._decisionEngine.decide();return this.name()},settings:function(){return this._settings.set.apply(this._settings,e.makeArray(arguments))},deviceData:function(){return this._decisionEngine.deviceData()},poster:function(e){if("string"==typeof e){this._settings.set({plugins:{player:{poster:e}}});f(this)}return this._settings.plugins.player.poster},play:function(e){this.player.play(e!==!1)},autoplay:function(e){"boolean"==typeof e&&(this._settings.autoplay=e);return this._settings.autoplay},pause:function(){this.player.pause()},suspend:function(){this.player.suspend()},next:function(){this.player.next()},currentTime:function(e){return this.player.currentTime(e)},showSubtitles:function(e){return this.player.showSubtitles(e)},duration:function(){return this.player.duration()},muted:function(e){return this.player.muted(e)},queuePlaylist:function(e,t){var i=this,a=i.player;a.queuePlaylist(e,t)},loadPlaylist:function(t,i,a,n){var o=this,r=o.player,s=o._settings;s.autoplay=!1;s.playlist="";s.playlistObject=null;s.webcastData={};s.overrideHoldingImage=null;s.overrideCtaDuration=null;s.statsObject.parentPID=void 0;s.statsObject.parentPIDType=void 0;s.statsObject.episodePID=void 0;s.statsObject.clipPID=void 0;s.statsObject.playlistLabels=void 0;t&&("string"!=typeof t?s.playlistObject=t:s.playlist=t);s.statsObject.playlistURL||(s.statsObject.playlistURL=s.playlist||void 0);s.startTime=0;if("object"==typeof i)o.settings(i);else{o.autoplay(i);s.overrideHoldingImage=a||s.overrideHoldingImage}r._settings=s;r._statsObject=e.extend(!0,{},s.statsObject);if(r.includePoster){var l=function(){o.poster(s.overrideHoldingImage)};s.autoplay?setTimeout(l,100):l()}if(n){n.startTime&&(r._lastSignificant=s.startTime=n.startTime);"boolean"==typeof n.promptGuidanceWhenAutoplay&&(s.promptGuidanceWhenAutoplay=n.promptGuidanceWhenAutoplay)}r.loadPlaylist(o)},kind:function(){return this.player.kind()},stop:function(){return this.player.stop()},loadPlugin:function(e,t){if(this.player.loadPlugin)this.player.loadPlugin(e,t);else if(e){e.data=t;this._settings.plugins.toLoad.push(e)}},updateUiConfig:function(t){var i=this._settings,a=i.locale();e.extend(!0,i.ui,t);a!=i.locale()&&window.embeddedMedia.language.load(i.locale());this.player.updateUiConfig(t)},updateQuality:function(e){var t=this._settings;t.set(e);this.player.updateQuality(e)},setData:function(e){this._settings.plugins.smpAirPluginData=e;this.player.setData(e)},setPoster:function(e,t){this.player.setPoster(e,t)},dispatchEvent:function(e,t){this.player.dispatchEvent(e,t)},pauseAt:function(e){this.player.pauseAt(e)},webcastData:function(e){this._settings.webcastData=e;this.player.webcastData(e)},volume:function(e){var t=this.player.volume(e);return t},paused:function(){return this.player.paused()},ended:function(){return this.player.ended()},seeking:function(){return this.player.seeking()},mediaItem:function(){return this.player.mediaItem()},playlist:function(){return this.player.loadedPlaylist()},width:function(e){return u(this,e,"width")},height:function(e){return u(this,e,"height")},bind:function(){var t=this._settings.container;t.bind.apply(t,e.makeArray(arguments));return this},unbind:function(){var t=this._settings.container;t.unbind.apply(t,e.makeArray(arguments));return this},_loadOptions:function(t,i){var n=this;this._loadOptionsArg=t;var r,s=n.player,l=n._settings;if("string"==typeof t)r=l.playlist=t;else if("object"==typeof t){l.set(t);r=t.playlist}if(s.fake||i){n._decisionEngine._settings=l;l.validate();v.isMobileOrTablet||l.statsObject&&l.statsObject.parentPID&&(l.optinPids+"").indexOf(l.statsObject.parentPID+"")!==-1&&(l.smpj2OptIn=!0);n.decide();var d=n._decisionEngine.name;if(d){var p=function(t,i){window.embeddedMedia.addPlayer(l.domid,t);n.player=t;t.showErrorDialog=n.showErrorDialog;t.doPoster=function(e){"string"==typeof e&&l.set({plugins:{player:{poster:e}}});f(n)};l.statsObject.playlistURL||(l.statsObject.playlistURL=l.playlist||void 0);t._statsObject=e.extend(!0,{},l.statsObject);f(n);if(n._sonarReporter){n._sonarReporter.newPlayer(n,t.requireSonarJS);t.sonar=n._sonarReporter}if(i){e.extend(n.capability,i);n.supportsMarkers=n.capability.markers}("smp-flash-noembed"==t.name()||"smpj2oo"==t.name())&&(t.reloadScope=n)},u=window.innerHeight;isNaN(u)&&(u=1e3);var m=function(){n.addInitialisationListener();n._decisionEngine.embed(p);if(!l.responsive&&!l.superResponsive){l.container.css("width",c(l.plugins.player.width,!0));l.container.css("height",c(l.plugins.player.height,!0))}};if(l.container.offset().top<u||1==window.embeddedMedia.playersToInit||l.delayEmbed===!0||i){m();window.embeddedMedia.playersToInit--}else window.embeddedMedia.playerInitFunctions.push(m);if(window.embeddedMedia.playerInitFunctions.length==window.embeddedMedia.playersToInit)for(var h=0;window.embeddedMedia.playerInitFunctions.length>h;h++){var g=1e3*(h+2);setTimeout(window.embeddedMedia.playerInitFunctions[h],g)}}else{var b=e.Event("error");f(n);var y=6003;l.dashPlaybackOnly?y=6012:v.supportsFlash&&!l.showUnsupportedMessage&&(y=6010);b.errorData=new a(y,l);l.ui.hideDefaultErrors||this.showErrorDialog(b.errorData);l.container.trigger(b);o.error(b.errorData.code(),l)}return this}s.loadPlaylist(r,l.autoplay,l.overrideHoldingImage)},load:function(t){var i=this,a=function(){window.embeddedMedia.language.load(i._settings.locale(),function(){i._loadOptions(t)});return i},n=function(){window.embeddedMedia.demi.loading?window.embeddedMedia.demi.callbacks.push(a):a();return i};if(v.waitForLoad){if("complete"===document.readyState||"interactive"===document.readyState)return n();e(document).ready(n);return i}if(window.embeddedMedia.demi.loading){window.embeddedMedia.demi.callbacks.push(a);return i}return a()},reset:function(){return this},addInitialisationListener:function(){var t=this._settings,i=t.container,n=setTimeout(function(){var n=e.Event("error");n.errorData=new a(6004,t);i&&i.trigger(n);o.error(n.errorData.code(),t)},15e3);i.bind("initialised smpFlashLoaded",function(){clearTimeout(n)})},showErrorDialog:function(e){var t=this._settings,i=t.container,a=t.ui.miniMode&&t.ui.miniMode.enabled||!1;i.empty();var n=document.createElement("div");n.style.position="absolute";n.style.top=n.style.left=n.style.bottom=n.style.right="0px";var o=document.createElement("div"),r=o.style;r.position="absolute";if(a){r.width="150px";r.height="80px";r.fontSize="16px"}else{r.width="320px";r.height="160px";r.fontSize="18px";if(v.os.winphone)r.top=r.left=r.marginLeft=r.marginTop=0;else{r.top=r.left="50%";r.marginLeft="-160px";r.marginTop="-80px"}}r.verticalAlign="middle";r.textAlign="center";r.color="white";r.backgroundColor="#252525";var s=document.createElement("div"),l=s.style;l.position="absolute";l.display="block";l.top=l.left=l.right=a?"8px":"20px";s.innerHTML=e.description();if(6010==e.code()&&!a||6014==e.code()&&!a){var d=document.createElement("div"),c=d.style;c.position="absolute";c.bottom="20px";c.right=c.left="10px";var p=window.embeddedMedia.language.t("downloadFlash",t.locale(),t.overrideErrorLink.linkTitle),u=t.overrideErrorLink.link||"http://get.adobe.com/flashplayer";d.innerHTML='<a href="'+u+'" target="_blank" style="color:white;display:inline-block;font-size:14px;background-color : black;text-decoration:none;padding:10px;">'+p+"</a>";o.appendChild(d)}o.appendChild(s);i.append(m(t).append(o))}};return y});define("bump-3",["jquery-1.9","mp/classes/player"],function(e,t){var i={};if("function"!=typeof e.fn.player){var a={getPlayer:function(){var t=e(e(this).get(0)),a=t.attr("id");return i[a]},player:function(a){var n=e(e(this).get(0)),o=n.attr("id");if("undefined"==typeof i[o]||i[o].settings().container[0]!=n[0]){if(!o){var r="bbcMediaPlayer",s=0;do o=r+s++;while(document.getElementById(o));n.attr("id",o)}i[o]=new t(n,a)}else i[o].settings(a);return i[o]}};e.fn.extend(a)}if("function"!=typeof e.players){var n={players:function(){return i}};e.extend(n)}return e});