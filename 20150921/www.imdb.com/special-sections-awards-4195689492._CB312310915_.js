!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("underscore"),f=d(e),g=a("backbone"),h=d(g);!function(a,b){f["default"].viewIterate=function(a,b){var c=a.length?a.length-1:-1;f["default"].each(a,f["default"].wrap(b,function(a,b,d,e){a(b,c===d,0===d)}))};var c=h["default"].Model.extend({DUMMY_POSTER_TITLE:"//ia.media-imdb.com/images/G/01/imdb/images/nopicture/140x209/film-4001654135._CB379388890_.png",DUMMY_POSTER_NAME:"//ia.media-imdb.com/images/G/01/imdb/images/nopicture/medium/name-2135195744._CB379389549_.png",_cropImage:function(a){return a.replace(/\._[^\.]+\.([a-z]+)$/,"._SL105_CR21,0,71,105_AL_.$1")},parse:function(a,b){var c={id:[],forWhat:[],winner:1===a.winner,nominatedFor:b.nominatedFor,winnersOnly:b.winnersOnly,itemTemplate:b.itemTemplate};c.refMarker=[b.baseRef,b.widgetRef].join("_");var d=a.first[0];if(d)if(c.id.push(d.tconst||d.nconst),c.title=d.display,c.url=d.url,d.primary)c.poster=this._cropImage(d.primary.url);else{var e=1==a.title_first?!0:!1;c.poster=this._cropImage(e?this.DUMMY_POSTER_TITLE:this.DUMMY_POSTER_NAME)}return a.second&&(c.byWhom=[],c.forWhat=[],f["default"].each(a.second,function(a){a.nconst&&(c.id.push(a.nconst),c.byWhom.push({url:a.url,display:a.text_name||a.display})),a.tconst&&(c.id.push(a.tconst),c.forWhat.push({url:a.url,display:a.text_name||a.display}))})),c.id=c.id.join(":"),c}}),d=h["default"].Collection.extend({model:c}),e=h["default"].Model.extend({idAttribute:"name",parse:function(a,b){var c={parse:!0,silent:!1,nominatedFor:a.name,baseRef:b.baseRef,widgetRef:b.widgetRef,winnersOnly:b.winnersOnly,itemTemplate:b.itemTemplate};return this.template=b.categoryTemplate,this.nominees?this.nominees.set(a.nominees,c):this.nominees=new d(a.nominees,c),delete a.nominees,a}});b.Categories=h["default"].Collection.extend({model:e,url:"//d11zmuckn52zap.cloudfront.net/oscars/awards_json",sync:function(a,b,c){return c.dataType="jsonp",c.jsonpCallback="jQuery_SpecialSections_jsonp_parse",c.cache=!0,h["default"].sync(a,b,c)},parse:function(a){return a.categories}});var g=h["default"].View.extend({initialize:function(){this.collection&&this.collectionAdd&&this.collection.bind("add",f["default"].bind(this.collectionAdd,this))},collectionAdd:function(a){new this.childView({model:a}).renderTo(this)},renderTo:function(a){return a.$el.append(this.render().el),this},render:function(){if(this.template){var b=f["default"].template(a("#"+this.template).text());this.$el.html(b(f["default"].extend(this.model.attributes,{model:this.model})))}return this.collection&&this.collectionAdd&&this.collection.each(f["default"].bind(this.collectionAdd,this)),this}}),i=g.extend({className:"nominee",initialize:function(a){f["default"].bindAll(this,"render"),this.model.on("change",this.render,this),this.template=this.model.get("itemTemplate")},render:function(){return!this.model.get("winnersOnly")||this.model.get("winner")?g.prototype.render.call(this):void this.$el.remove()}}),j=g.extend({className:"nominationsCategory",childView:i,initialize:function(a){this.collection=this.model.nominees,g.prototype.initialize.call(this,arguments),this.template=this.model.template},collectionAdd:function(a){var b,c=new this.childView({model:a}).render();c&&(b=this.$el.find(".list"),b.append(c.el))}});b.MasterView=g.extend({childView:j,initialize:function(a){this.lastNumCategories=parseInt(a.lastNumCategories,10),this.winnersOnly=a.winnersOnly},render:function(){var a,b,c;return g.prototype.render.call(this),this.$el.find(".nominee:empty").remove(),this.winnersOnly&&(c=this.$el.find(".list.detail:empty")),this.lastNumCategories?(c&&c.closest(".nominationsCategory").remove(),a=this.$el.find(".nominationsCategory"),b=a.size()-this.lastNumCategories,b>0&&a.slice(0,b).remove()):c&&(c.append("Not yet announced").addClass("notAnnounced"),c.closest(".nominationsCategory").children(".nominatedFor").removeClass("hidden")),this},renderTo:function(a){return a.$el.html(this.render().el),this}})}(jQuery,window)},{backbone:3,underscore:"underscore"}],2:[function(a,b,c){"use strict";a("../app/consumersite/special-sections-awards")},{"../app/consumersite/special-sections-awards":1}],3:[function(a,b,c){(function(b){!function(d){var e="object"==typeof self&&self.self==self&&self||"object"==typeof b&&b.global==b&&b;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(a,b,c){e.Backbone=d(e,c,a,b)});else if("undefined"!=typeof c){var f,g=a("underscore");try{f=a("jquery")}catch(h){}d(e,c,g,f)}else e.Backbone=d(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(a,b,c,d){var e=a.Backbone,f=[],g=f.slice;b.VERSION="1.2.0",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={},i=/\s+/,j=function(a,b,d,e,f){var g,h=0;if(d&&"object"==typeof d)for(g=c.keys(d);h<g.length;h++)b=a(b,g[h],d[g[h]],f);else if(d&&i.test(d))for(g=d.split(i);h<g.length;h++)b=a(b,g[h],e,f);else b=a(b,d,e,f);return b};h.on=function(a,b,c){return k(this,a,b,c)};var k=function(a,b,c,d,e){if(a._events=j(l,a._events||{},b,c,{context:d,ctx:a,listening:e}),e){var f=a._listeners||(a._listeners={});f[e.id]=e}return a};h.listenTo=function(a,b,d){if(!a)return this;var e=a._listenId||(a._listenId=c.uniqueId("l")),f=this._listeningTo||(this._listeningTo={}),g=f[e];if(!g){var h=this._listenId||(this._listenId=c.uniqueId("l"));g=f[e]={obj:a,objId:e,id:h,listeningTo:f,count:0}}return k(a,b,d,this,g),this};var l=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]),f=d.context,g=d.ctx,h=d.listening;h&&h.count++,e.push({callback:c,context:f,ctx:f||g,listening:h})}return a};h.off=function(a,b,c){return this._events?(this._events=j(m,this._events,a,b,{context:c,listeners:this._listeners}),this):this},h.stopListening=function(a,b,d){var e=this._listeningTo;if(!e)return this;for(var f=a?[a._listenId]:c.keys(e),g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(b,d,this)}return c.isEmpty(e)&&(this._listeningTo=void 0),this};var m=function(a,b,d,e){if(a){var f,g=0,h=e.context,i=e.listeners;if(b||d||h){for(var j=b?[b]:c.keys(a);g<j.length;g++){b=j[g];var k=a[b];if(!k)break;for(var l=[],m=0;m<k.length;m++){var n=k[m];d&&d!==n.callback&&d!==n.callback._callback||h&&h!==n.context?l.push(n):(f=n.listening,f&&0===--f.count&&(delete i[f.id],delete f.listeningTo[f.objId]))}l.length?a[b]=l:delete a[b]}return c.size(a)?a:void 0}for(var o=c.keys(i);g<o.length;g++)f=i[o[g]],delete i[f.id],delete f.listeningTo[f.objId]}};h.once=function(a,b,d){var e=j(n,{},a,b,c.bind(this.off,this));return this.on(e,void 0,d)},h.listenToOnce=function(a,b,d){var e=j(n,{},b,d,c.bind(this.stopListening,this,a));return this.listenTo(a,e)};var n=function(a,b,d,e){if(d){var f=a[b]=c.once(function(){e(b,f),d.apply(this,arguments)});f._callback=d}return a};h.trigger=function(a){if(!this._events)return this;for(var b=Math.max(0,arguments.length-1),c=Array(b),d=0;b>d;d++)c[d]=arguments[d+1];return j(o,this._events,a,void 0,c),this};var o=function(a,b,c,d){if(a){var e=a[b],f=a.all;e&&f&&(f=f.slice()),e&&p(e,d),f&&p(f,[b].concat(d))}return a},p=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},q=function(a,b,d){switch(a){case 1:return function(){return c[b](this[d])};case 2:return function(a){return c[b](this[d],a)};case 3:return function(a,e){return c[b](this[d],a,e)};case 4:return function(a,e,f){return c[b](this[d],a,e,f)};default:return function(){var a=g.call(arguments);return a.unshift(this[d]),c[b].apply(c,a)}}},r=function(a,b,d){c.each(b,function(b,e){c[e]&&(a.prototype[e]=q(b,e,d))})};h.bind=h.on,h.unbind=h.off,c.extend(b,h);var s=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId(this.cidPrefix),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(s.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!c.iteratee(a,this)(this.attributes)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0;m<h.length;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d.call(a.context,b,c,a),void b.trigger("sync",b,c,a)):!1},O(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h,i=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),h=d.wait,e&&!h){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&h&&(this.attributes=c.extend({},i,e)),void 0===d.parse&&(d.parse=!0);var j=this,k=d.success;return d.success=function(a){j.attributes=i;var b=d.parse?j.parse(a,d):a;return h&&(b=c.extend(e||{},b)),c.isObject(b)&&!j.set(b,d)?!1:(k&&k.call(d.context,j,a,d),void j.trigger("sync",j,a,d))},O(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"!==f||d.attrs||(d.attrs=e),g=this.sync(f,this,d),e&&h&&(this.attributes=i),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=a.wait,f=function(){b.stopListening(),b.trigger("destroy",b,b.collection,a)};a.success=function(c){e&&f(),d&&d.call(a.context,b,c,a),b.isNew()||b.trigger("sync",b,c,a)};var g=!1;return this.isNew()?c.defer(a.success):(O(this,a),g=this.sync("delete",this,a)),e||f(),g},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||N();if(this.isNew())return a;var b=this.id||this.attributes[this.idAttribute];return a.replace(/([^\/])$/,"$1/")+encodeURIComponent(b)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var t={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r(s,t,"attributes");var u=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},v={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1};c.extend(u.prototype,h,{model:s,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,w))},remove:function(a,b){var d,e=!c.isArray(a);return a=e?[a]:c.clone(a),b||(b={}),d=this._removeModels(a,b),!b.silent&&d&&this.trigger("update",this,b),e?a[0]:a},set:function(a,b){b=c.defaults({},b,v),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:a.slice();var e,f,g,h,i,j=b.at;null!=j&&(j=+j),0>j&&(j+=this.length+1);for(var k=this.comparator&&null==j&&b.sort!==!1,l=c.isString(this.comparator)?this.comparator:null,m=[],n=[],o={},p=b.add,q=b.merge,r=b.remove,s=!k&&p&&r?[]:!1,t=!1,u=0;u<a.length;u++){if(g=a[u],h=this.get(g))r&&(o[h.cid]=!0),q&&g!==h&&(g=this._isModel(g)?g.attributes:g,b.parse&&(g=h.parse(g,b)),h.set(g,b),k&&!i&&h.hasChanged(l)&&(i=!0)),a[u]=h;else if(p){if(f=a[u]=this._prepareModel(g,b),!f)continue;m.push(f),this._addReference(f,b)}f=h||f,f&&(e=this.modelId(f.attributes),!s||!f.isNew()&&o[e]||(s.push(f),t=t||!this.models[u]||f.cid!==this.models[u].cid),o[e]=!0)}if(r){for(var u=0;u<this.length;u++)o[(f=this.models[u]).cid]||n.push(f);n.length&&this._removeModels(n,b)}if(m.length||t)if(k&&(i=!0),this.length+=m.length,null!=j)for(var u=0;u<m.length;u++)this.models.splice(j+u,0,m[u]);else{s&&(this.models.length=0);for(var w=s||m,u=0;u<w.length;u++)this.models.push(w[u])}if(i&&this.sort({silent:!0}),!b.silent){for(var x=null!=j?c.clone(b):b,u=0;u<m.length;u++)null!=j&&(x.index=j+u),(f=m[u]).trigger("add",f,this,x);(i||t)&&this.trigger("sort",this,b),(m.length||n.length)&&this.trigger("update",this,b)}return d?a[0]:a},reset:function(a,b){b=b?c.clone(b):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){if(null==a)return void 0;var b=this.modelId(this._isModel(a)?a.attributes:a);return this._byId[a]||this._byId[b]||this._byId[a.cid]},at:function(a){return 0>a&&(a+=this.length),this.models[a]},where:function(a,b){var d=c.matches(a);return this[b?"find":"filter"](function(a){return d(a.attributes)})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b.call(a.context,d,c,a),d.trigger("sync",d,c,a)},O(this,a),this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};var d=b.wait;if(!(a=this._prepareModel(a,b)))return!1;d||this.add(a,b);var e=this,f=b.success;return b.success=function(a,b,c){d&&e.add(a,c),f&&f.call(c.context,a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(this._isModel(a))return a.collection||(a.collection=this),a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_removeModels:function(a,b){for(var c,d,e,f=!1,c=0,g=0;c<a.length;c++){var e=a[c]=this.get(a[c]);if(e){var h=this.modelId(e.attributes);null!=h&&delete this._byId[h],delete this._byId[e.cid];var d=this.indexOf(e);this.models.splice(d,1),this.length--,b.silent||(b.index=d,e.trigger("remove",e,this,b)),a[g++]=e,this._removeReference(e,b),f=!0}}return a.length!==g&&(a=a.slice(0,g)),f},_isModel:function(a){return a instanceof s},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if("add"!==a&&"remove"!==a||c===this){if("destroy"===a&&this.remove(b,d),"change"===a){var e=this.modelId(b.previousAttributes()),f=this.modelId(b.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b))}this.trigger.apply(this,arguments)}}});var x={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:2,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};r(u,x,"models");var y=["groupBy","countBy","sortBy","indexBy"];c.each(y,function(a){c[a]&&(u.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)})});var z=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,B)),this._ensureElement(),this.initialize.apply(this,arguments)},A=/^(\S+)\s*(.*)$/,B=["model","collection","el","id","attributes","className","tagName","events"];c.extend(z.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0]},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(A);this.delegate(e[1],e[2],c.bind(d,this))}}return this},delegate:function(a,b,c){this.$el.on(a+".delegateEvents"+this.cid,b,c)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){this.$el.off(a+".delegateEvents"+this.cid,b,c)},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"));else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className")),this.setElement(this._createElement(c.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}}),b.sync=function(a,d,e){var f=C[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||N()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.error;e.error=function(a,b,c){e.textStatus=b,e.errorThrown=c,i&&i.call(e.context,a,b,c)};var j=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,j,e),j};var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var D=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,F=/(\(\?)?:\w+/g,G=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(D.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g,d)!==!1&&(f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g))}),this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(H,"\\$&").replace(E,"(?:$1)?").replace(F,function(a,b){return b?a:"([^/?]+)"}).replace(G,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var I=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},J=/^[#\/]|\s+$/g,K=/^\/+|\/+$/g,L=/#.*$/;I.started=!1,c.extend(I.prototype,h,{interval:50,atRoot:function(){var a=this.location.pathname.replace(/[^\/]$/,"$&/");return a===this.root&&!this.getSearch()},matchRoot:function(){var a=this.decodeFragment(this.location.pathname),b=a.slice(0,this.root.length-1)+"/";return b===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){return null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(J,"")},start:function(a){if(I.started)throw new Error("Backbone.history has already been started");if(I.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(K,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var b=this.root.slice(0,-1)||"/";return this.location.replace(b+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){var d=document.createElement("iframe");d.src="javascript:0",d.style.display="none",d.tabIndex=-1;var e=document.body;this.iframe=e.insertBefore(d,e.firstChild).contentWindow,this.iframe.document.open().close(),this.iframe.location.hash="#"+this.fragment}var f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};return this._usePushState?f("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe.frameElement),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),I.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe)),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return this.matchRoot()?(a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})):!1},navigate:function(a,b){if(!I.started)return!1;b&&b!==!0||(b={trigger:!!b}),a=this.getFragment(a||"");var c=this.root;(""===a||"?"===a.charAt(0))&&(c=c.slice(0,-1)||"/");var d=c+a;if(a=this.decodeFragment(a.replace(L,"")),this.fragment!==a){if(this.fragment=a,this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe)&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new I;var M=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};s.extend=u.extend=D.extend=z.extend=I.extend=M;var N=function(){throw new Error('A "url" property or function must be specified')},O=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b),a.trigger("error",a,d,b)}};return b})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:"jquery",underscore:"underscore"}]},{},[2]);