define("modules/custom-html-iframe",["jquery","underscore","common/logger"],function(a,b,c){var d=['<iframe scrolling="no" frameborder="0" width="100%" allowTransparency="true"','marginheight="0" style="border: 0px none; vertical-align: bottom;">',"</iframe>"].join(""),e=["<!DOCTYPE html>",'<!--[if lt IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7 main-html-body">',"<![endif]-->",'<!--[if IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8 main-html-body"> <![endif]-->','<!--[if IE 8]> <html class="no-js lt-ie10 lt-ie9 main-html-body"> <![endif]-->','<!--[if IE 9]> <html class="no-js lt-ie10 main-html-body"> <![endif]-->','<!--[if gt IE 9]><!--> <html class="no-js main-html-body"> <!--<![endif]-->',"</html>"].join(""),f=['<meta charset="utf-8">','<meta http-equiv="X-UA-Compatible" content="IE=edge">','<meta name="viewport" content="width=device-width, initial-scale=1">'].join(""),g={_getWindow:function(){return window},getStylesheets:function(a){return a[0].styleSheets},init:function(h){h=b.extend({id:"",html:"",css:"",requires:[],callback:function(){}},h);var i=a(),j=a("html").hasClass("lt-ie9"),k=1e3,l=0,m=50,n=100,o=function(){a("link").each(function(){return this.href.indexOf("fonts.walmart.com")>-1?(i=a(this).clone(),!1):void 0})};a("html").hasClass("wf-active")&&o(),a(h.el).each(function(){var o,p=a(d),q=this,r=b.unescape(h.html),s=a(h.css),t=0,u=0,v=h.css.match(/<link/g),w=new a.Deferred,x=[];p.attr("id",h.id),p.one("load",function(){var d=p[0].contentDocument;d.open(),d.write(e),d.close();var q,y=p.contents(),z=y.find("body"),A=function(){p.height(j?p[0].contentWindow.document.body.scrollHeight:z.height())},B=function(a,b){try{o.item(a).cssRules,b.resolve()}catch(d){m>l?(l++,"SecurityError"!==d.name?setTimeout(function(){B(a,b)},n):b.resolve()):(c.log.debug(d,{message:"Unable to load all stylesheets for iframe"}),b.reject())}return b.promise()};if(y.find("head").attr("id",h.id).append('<base target="_parent">').append(f).append(s).append(i).parent().css("height","auto").find("body").css({"background-color":"transparent",height:"auto"}).html(r),y.find("head link").each(function(){a(this).attr("href",a(this).attr("href")+"?"+h.id)}),t=z.find("img").length,t>0?z.find("img").each(function(b,c){a(c).load(function(){u++,u>=t&&w.resolve()})}):setTimeout(function(){w.resolve()},k),x.push(w.promise()),null!==v){o=g.getStylesheets(y);for(var C=0,D=v.length;D>C;C++)x.push(B(C,new a.Deferred))}a.when.apply(a,x).always(function(){A()}),q=a(y),h.callback(q),b.isEmpty(h.requires)||g.loadRequires(q,h.requires)}),p.appendTo(q)})},loadRequires:function(a,c){require(c,function(){var c=b.toArray(arguments);b.each(c,function(b){b.init(a)})})}};return g});
//# sourceMappingURL=http://dev.walmart.com:9873/js-dist-atlas/modules/custom-html-iframe.map