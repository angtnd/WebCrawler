__d("widget.movinglink.movinglink",["common.js.widget","common.js.events","common.js.animation","widget.canlash.imageloader"],function(l,m,h,e){e("common.js.widget");var i=e("common.js.events"),j=e("common.js.animation"),k=e("widget.canlash.imageloader");$.widget("hao123.movinglink",{_create:function(){var a=this,b=a.options,c=b.anim;k({def:HAO.httpsTrans(c.def.imgurl),hover:HAO.httpsTrans(c.hover.imgurl),stop:HAO.httpsTrans(c.stop.imgurl)},function(){a._initAnims();a._initMove();a.bindEvent();var d=
{},f=b.move.width,g=c.stop.width;f>g+c.stop.left?(d.$el=a.$animBox,d.width=f):(d.$el=a.$animStop,d.width=g);a.visibleOpt=d})},type:$("body").hasClass("width-nr")?"narrow":"wide",_initAnim:function(a,b){a.css({position:"absolute",top:+b.top,left:+b.left,width:+b.width,height:+b.height,backgroundImage:"url("+HAO.httpsTrans(b.imgurl)+")"}).hide();b.pos=b.pos.split(",");b.perFrameDuration=b.duration/b.pos.length;return j().changePosition(a[0],b.pos)},_initAnims:function(){var a=this.options.anim,b=this.$animBox;
this.$animDefault=$('[data-hook="anim-default"]',b);this.$animHover=$('[data-hook="anim-hover"]',b);this.$animStop=$('[data-hook="anim-stop"]',b);this.animDefault=this._initAnim(this.$animDefault,a.def);this.animHover=this._initAnim(this.$animHover,a.hover);this.animStop=this._initAnim(this.$animStop,a.stop);this._startAnim(this.$animDefault,this.animDefault,a.def.perFrameDuration,!0)},_startAnim:function(a,b,c,d){a.show();b.start(c);d&&b.repeat()},_pauseAnim:function(a,b){b.pause();a.hide()},_disposeAnim:function(a,
b){b.dispose();a.hide()},_getMoveOpt:function(){var a=this,b=parseInt(a.options.move.stopoffsetleft,10)||0,c=a.$animBox.width(),d=a.moveDuration,f=1190-c+b,g=990-c+b,e=a.moveDuration/f*g;a._getMoveOpt=function(){var b,c;"narrow"===a.type?(b=e-a.moveTime,c=g):(b=d-a.moveTime,c=f);0>b&&(b=0);return{duration:b,left:c}};return a._getMoveOpt()},_startMove:function(a){var b=this;b.moveStartTime=new Date;var c=b._getMoveOpt();c.duration?a.animate({left:c.left},c.duration,"linear",function(){b._endMove(a)}):
a.css("left",c.left)},_endMove:function(a){this.moveTime=this.moveDuration;a.off("mouseenter mouseleave");this._disposeAnim(this.$animDefault,this.animDefault);this._disposeAnim(this.$animHover,this.animHover);this._startAnim(this.$animStop,this.animStop,this.options.anim.stop.perFrameDuration);this._handleVisible()},_pauseMove:function(a){this.moveTime+=new Date-this.moveStartTime;a.stop()},_initMove:function(){var a=this.options.move;this.moveDuration=a.duration;this.moveTime=0;this.$animBox=$('[data-hook="anim-box"]',
this.element);this._startMove(this.$animBox.css({top:+a.top,left:+a.left,width:+a.width,height:+a.height}))},_handleVisible:function(){var a=this.options,b=parseInt(a.move.hideexpand,10);if(this.moveDuration===a.move.duration){a=$(window).width();this.$animBox.show();var c=this.visibleOpt,d=+c.width,c=c.$el.css("width",d),d=c.offset().left+d;a<d&&(a=d-a,a>b?this.$animBox.hide():c.css("width","-="+a))}},bindEvent:function(){var a=this,b=a.options.anim;a.$animBox.hover(function(){a._pauseAnim(a.$animDefault,
a.animDefault);a._startAnim(a.$animHover,a.animHover,b.hover.perFrameDuration,!0);a._pauseMove(a.$animBox)},function(){a._pauseAnim(a.$animHover,a.animHover);a._startAnim(a.$animDefault,a.animDefault,b.def.perFrameDuration,!0);a._startMove(a.$animBox)});i.on("wideversion.viewportchange",function(b){b!==a.type&&(a.type=b);a._pauseMove(a.$animBox);a._startMove(a.$animBox);a._handleVisible()});$(window).on("resize",function(){a._handleVisible()})},destroy:function(){$.Widget.prototype.destroy.call(this)}});
return h});window.js_hTjaFWWFPX&&window.js_hTjaFWWFPX(!0);
