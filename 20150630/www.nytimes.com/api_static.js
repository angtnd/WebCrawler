var DYO=DYO||{},DY=DY||{};DYO=function(){function escapeContServerVariationSet(e){for(var t=experiments[e].variations.slice(0),n=0;n<t.length;n++)t[n].id=t[n].id,"undefined"!=typeof t[n].name&&null!=t[n].name&&"undefined"==typeof t[n].__name_escaped_flag&&(t[n].name=escape(t[n].name),t[n].__name_escaped_flag=!0),"undefined"!=typeof t[n].weight&&DYO.StringUtils.isN(t[n].weight)||(t[n].weight=null);return t}function escapeClientVariationSet(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=new Object;r.id=escape(DYJSON.stringify(e[n].id)),"undefined"!=typeof e[n].name&&null!=e[n].name&&(r.name=escape(e[n].name)),"undefined"!=typeof e[n].weight&&DYO.StringUtils.isN(e[n].weight)&&(r.weight=e[n].weight),t.push(r)}return t}function generateHash(e){var t=e.slice(0);t.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0});var n="";for(var r in t)t.hasOwnProperty(r)&&(n+=t[r].id,n+=DYO.ExpUtils.verSep);var i=hashCode(n),o=""+i;return o}function checkArrMatch(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&e[n]==t[r])return!0;return!1}function expNameToId(e){for(var t in experiments)if(experiments.hasOwnProperty(t)&&experiments[t].name.toLowerCase()==e.toLowerCase())return t;return null}function varNameToId(e,t){if(experimentExists(e))for(var n=0;n<experiments[e].variations.length;n++)if(experiments[e].variations[n].name.toLowerCase()==t.toLowerCase())return experiments[e].variations[n].id;return null}function setForceCalculationOption(e){return("undefined"==typeof e||null==e)&&(e=[]),null!=e&&(e[OPTION_FORCE_CALCULATION]=!0),e}function getForceCalculationOption(e){var t=!1;return null!=e&&"undefined"!=typeof e[OPTION_FORCE_CALCULATION]&&null!=e[OPTION_FORCE_CALCULATION]&&(t=e[OPTION_FORCE_CALCULATION]),t}function setDebug(e){debug=e,DYO.d=debug}function experimentExists(e){return"undefined"!=typeof experiments[e]&&null!=experiments[e]}function checkAudience(e){if(experiments[e].audiences.length>0){var t=[];if("undefined"==typeof DY||"undefined"==typeof DY.aud)return!0;if(t=DY.aud.split("."),!(t.length>0))return!1;checkArrMatch(experiments[e].audiences,t)}return!0}function calculateDist(e){var t=!1;if(checkAudience(e)){var n=Math.floor(1e3*Math.random());t=n<10*experiments[e].traffic?!0:!1}else t=!1;return t}function setMultipleVariations(e,t,n,r,i){var o=[],a=getCurrentVersionDataStr(e),s=experiments[e],u=DYO.Props.isControlGroupChoose(s,a,t),l=DYO.Props.MANUAL_MECHANISM,c=[DYO.ExpUtils.SUB_MECHANISM_NA],d="undefined"!=typeof i&&null!=i&&"undefined"!=typeof i.varArr&&null!=i.varArr&&i.varArr.length>=r;if(r>n.length||0>=r);else if(u){var p=!0;if(s.controlGroup.method==DYO.Props.CGM_RANDOM&&null!=n&&n.length>0)o=DYO.Chooser.equalDecisions(n,r);else if(s.controlGroup.method==DYO.Props.CGM_PRESET_VARS&&"undefined"!=typeof s.controlGroup.varIds)for(var f=""+s.controlGroup.varIds,m=f.split(DYO.ExpUtils.variSep),g=0;g<m.length&&r>g;g++){var h=m[g],v=h.split(DYO.ExpUtils.verSep);o.push(v.length>1?{id:v[0],name:v[1]}:{id:v[0]})}else p=!1;p&&(l=DYO.Props.CONTROL_GROUP_MECHANISM,c=[d?DYO.ExpUtils.SUB_MECHANISM_CG_WITH_PREDICT:DYO.ExpUtils.SUB_MECHANISM_CG_WITHOUT_PREDICT])}else if(d)o=i.varArr,l=DYO.Props.PREDICT_MECHANISM,"undefined"!=typeof i.smechArr&&null!=i.smechArr&&i.smechArr.length>0&&(c=i.smechArr);else if(null!=n&&n.length>0&&null==n[0].weight)o=DYO.Chooser.equalDecisions(n,r),l=DYO.Props.MANUAL_MECHANISM;else{if(1>=r){var y=DYO.Chooser.weightedDecision(n);null!=y&&null!=y.loc&&o.push(n[y.loc])}else null!=n&&n.length>0&&(o=DYO.Chooser.wRandomChoose(n,r));l=DYO.Props.getMechanismRepresentingWeights(s);var D=DYO.Props.getSubMechanismRepresentingWeights(s);null!=D&&(c=[D])}t=DYO.Props.resetVersionDataMechanism(t,l,c);for(var x=new Array,O=new Array,g=0;r>g&&g<o.length;g++){var w="undefined"!=typeof o[g].name&&null!=o[g].name;x[g]={id:DYJSON.parse(unescape(o[g].id)),name:w?unescape(o[g].name):""},O[g]=o[g].id+(w?DYO.ExpUtils.verSep+o[g].name:"")}return setVariations(e,t,O),x}function calculateMultipleProgVariation(e,t){var n=DYO.Props.expProgVersionData(experiments[e]),r=experiments[e].variations.slice(0),i=[];if(calculateDist(e)){var o=getProgPredictionDecisions(e,n,r,t);i=setMultipleVariations(e,n,r,t,o)}else setVariation(e,n,DYO.ExpUtils.notInExp),log("out of experiment");return i}function calculateMultipleContVariation(e,t,n,r){var i=DYO.Props.expContVersionData(experiments[e],n),o=t.slice(0),a=[];if(calculateDist(e)){experiments[e].variations.length>0&&DYO.Props.verifyClientIdsOfServerAndClientSynced(experiments[e],n)&&t.length==experiments[e].variations.length&&(o=escapeContServerVariationSet(e));var s=getContPredictionDecisions(e,i,o,n,r);a=setMultipleVariations(e,i,o,r,s)}else setVariation(e,i,DYO.ExpUtils.notInExp),log("out of experiment");return a}function getProgPredictionDecisions(e,t,n,r){return getPredictionDecisions(e,t,n,r)}function getContPredictionDecisions(e,t,n,r,i){return DYO.Props.verifyClientIdsOfServerAndClientSynced(experiments[e],r)?getPredictionDecisions(e,t,n,i):void 0}function getPredictionDecisions(e,t,n,r){var i=DYO.Predict.getPrediction(e,DYO.Props.getVersionId(t));return"undefined"!=typeof i&&null!=i&&"undefined"!=typeof i.varIdArr&&null!=i.varIdArr&&i.varIdArr.length>=r?(i.varArr=orderVariationsByPrediction(i.varIdArr,n,r),i):null}function orderVariationsByPrediction(e,t,n){for(var r=[],i=0,o=0;o<e.length;o++)for(var a=0;a<t.length;a++){var s=t[a];if(e[o]==s.id){if(r.push(s),i++,i==n)return r;break}}return r}function cleanupExperiments(){experimentTree={},cleanupTreeAndStore(DYO.ExpUtils.storageKey,experimentTree,!1);var e={};cleanupTreeAndStore(DYO.ExpUtils.storageAttKey,e,!0),DYO.StorageUtils.remove("_dye_vil",["localStorage"])}function cleanupTreeAndStore(e,t,n){try{var r=getStoredExperiments(e);if("undefined"!=typeof r&&""!=r&&null!=r){for(var i=r.split(DYO.ExpUtils.expSep),o=0;o<i.length;o++)try{var a=i[o].split(DYO.ExpUtils.dataSep);if("undefined"!=typeof experiments[a[0]]){var s=a[1].split(DYO.ExpUtils.verSep);if(DYO.Props.isStoredVersionValidDuringCleanup(experiments[a[0]],s))if(n&&4==a.length){var u=(new Date).getTime(),l=""+DYO.Seqs.sesLoadSeq+DYO.ExpUtils.verSep+u;t[a[0]]=i[o]+DYO.ExpUtils.dataSep+l}else if(n&&a.length>4){var c=a[4].split(DYO.ExpUtils.verSep);DYO.Props.isStoredAttributionValidDuringCleanup(experiments[a[0]],s,c)&&(t[a[0]]=i[o])}else t[a[0]]=i[o]}}catch(d){log("error cleaning experiment "+i[o])}storeExperiments(e,t)}}catch(d){log("error cleaning experiments")}}function storeExperiments(e,t){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(t[r]);DYO.StorageUtils.set(e,n.join(DYO.ExpUtils.expSep),["localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain()})}function getStoredExperiments(e){var t=DYO.StorageUtils.get(e,["localStorage"]);return t}function emptyMethod(){}function forceChooseVariation(e,t){return t=setForceCalculationOption(t),chooseVariation(e,t)}function chooseVariation(e,t){var n=chooseMultipleVariations(e,1,t);if(null!=n&&n.length>0&&null!=n[0].id){"number"!=typeof e&&(e=expNameToId(e));for(var r=0;r<experiments[e].variations.length;r++)if(experiments[e].variations[r].id==n[0].id)return r}return 0}function forceChooseMultipleVariations(e,t,n){return n=setForceCalculationOption(n),chooseMultipleVariations(e,t,n)}function chooseMultipleVariations(e,t,n){var r=[],i=getForceCalculationOption(n);if("number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)?(r=i?null:getDynamicVariations(e,DYO.Props.expProgVersionData(experiments[e])),(null==r||r.length!=t)&&(r=calculateMultipleProgVariation(e,t)),varRimpSelectedVariations(e,r)):log("non existing experiment"),null!=r&&null!=experiments[e]&&experiments[e].autoExecuteAction)for(var o=0;o<r.length;++o)if(null!=r[o]&&null!=r[o].id){var a=r[o].id;executeVariation(parseInt(e),a)}return r}function forceChooseMultipleDynamicVariations(e,t,n,r){return r=setForceCalculationOption(r),chooseMultipleDynamicVariations(e,t,n,r)}function chooseMultipleDynamicVariations(e,t,n,r){var i=getForceCalculationOption(r);null!=r&&"undefined"!=typeof r[OPTION_EXP_DEFAULT]&&null!=r[OPTION_EXP_DEFAULT];var o=[];if("number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)){t=escapeClientVariationSet(t);var a;if(null!=r&&"undefined"!=typeof r[OPTION_VARIATION_SET_ID]&&null!=r[OPTION_VARIATION_SET_ID]&&0!=r[OPTION_VARIATION_SET_ID].length){var s=""+r[OPTION_VARIATION_SET_ID];a=s}else a=generateHash(t);var u=DYO.Props.expContVersionData(experiments[e],a);o=i?null:getDynamicVariations(e,u),(null==o||o.length!=n)&&(o=calculateMultipleContVariation(e,t,a,n)),varRimpSelectedVariations(e,o)}else log("non existing experiment");return o}function forceChooseDynamicVariation(e,t,n){return n=setForceCalculationOption(n),chooseDynamicVariation(e,t,n)}function chooseDynamicVariation(e,t,n){var r=chooseMultipleDynamicVariations(e,t,1,n);return null!=r&&r.length>0?r[0]:null}function reportExperimentEvent(e){try{"number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)&&DY.API("experiment",{name:experiments[e].name})}catch(t){}}function getServerVariations(e){return"number"!=typeof e&&(e=expNameToId(e)),experiments[e].variations}function getDynamicVariations(e,t){var n=null,r=null,i=experimentTree[e];if(null!=i){var o=i.split(DYO.ExpUtils.dataSep),a=o[1],s=a.split(DYO.ExpUtils.verSep),u=t.split(DYO.ExpUtils.verSep);if(DYO.Props.isStoredVersionValidForChoose(experiments[e],s,u)){r=o[2],n=new Array;var l=new Array;if(r.length>0){r=r.split(DYO.ExpUtils.variSep);for(var c=0;c<r.length;c++){var d=r[c].split(DYO.ExpUtils.verSep);d.length>0&&d[0].length>0&&(n[c]={id:DYJSON.parse(unescape(d[0])),name:"undefined"!=typeof d[1]?unescape(d[1]):""},l.push(n[c].id))}}if(DYO.Props.isAttributionStoredOnGet(experiments[e])){var p=DYO.Props.getCurrentAttributionProps(experiments[e]);DYO.ExpUtils.attributeVariationsExplicitly(DYO.ExpUtils.DECISION_EVENT,e,a,l,p)}}}return n}function getVariationData(e){var t=e,n=null;"number"!=typeof e&&(e=expNameToId(e));var r=experimentTree[e];if(null==r)return{code:0,exp:t,msg:"experiment "+e+" is not defined"};var i=r.split(DYO.ExpUtils.dataSep),o=i[2].split(DYO.ExpUtils.verSep);n=o[0];var a=o[1];if(n==DYO.ExpUtils.notInExp)return{code:0,exp:t,msg:"user not in experiment"};for(var s=0;s<experiments[e].variations.length;s++)if(experiments[e].variations[s].id==n)return 0==experiments[e].type&&(a=experiments[e].variations[s].name),{code:1,exp:t,value:experiments[e].variations[s]};return{code:0,exp:t,msg:"error getting variation data, check the experiment settings"}}function getVariationProperties(e){var t=e,n=null;"number"!=typeof e&&(e=expNameToId(e));var r=experimentTree[e];if(null==r)return{code:0,exp:t,msg:"experiment "+e+" is not defined"};var i=r.split(DYO.ExpUtils.dataSep),o=i[2].split(DYO.ExpUtils.verSep);n=o[0];var a=o[1];if(n==DYO.ExpUtils.notInExp)return{code:0,exp:t,msg:"user not in experiment"};for(var s=0;s<experiments[e].variations.length;s++)if(experiments[e].variations[s].id==n)return 0==experiments[e].type&&(a=experiments[e].variations[s].name),experiments[e].variations[s].props;return{code:0,exp:t,msg:"error getting variation data, check the experiment settings"}}function getCurrentVersionDataStr(e){try{if("number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)&&null!=experimentTree[e]){var t=experimentTree[e],n=t.split(DYO.ExpUtils.dataSep);if(null!=n&&n.length>1){var r=n[1];return r}}}catch(i){log("error in getCurrentVersionDataStr")}return null}function externalSetVariation(e,t){var n=e,r=t;if("number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)){if("number"!=typeof t&&(t=varNameToId(e,t)),null==t)return{code:0,exp:n,variation:r,msg:"Variation is not defined"};var i=DYO.Props.expManualSetVersionData(experiments[e]);return setVariation(e,i,t),{code:1,exp:n,variation:r,msg:"variation "+t+" is set for experiment "+e}}return{code:0,exp:n,variation:r,msg:"experiment "+e+" is not defined"}}function externalSetVariationByPosition(e,t){var n=e;if("number"!=typeof e&&(e=expNameToId(e)),experimentExists(e)){var r=new Array;if("undefined"==typeof experiments[e].variations[t])return{code:0,exp:n,pos:t,msg:"no variation in position "+t};r[0]=experiments[e].variations[t].id;var i=DYO.Props.expManualSetVersionData(experiments[e]);return setVariations(e,i,r),{code:1,exp:n,pos:t,msg:"variation at position "+t+"is set for experiment "+e}}return{code:0,exp:n,pos:t,msg:"experiment "+e+" is not defined"}}function setVariation(e,t,n){var r=new Array;r[0]=n,setVariations(e,t,r)}function setVariations(e,t,n){if(!experimentExists(e))return void log("ignoring non-existent experiment");var r=DYO.Props.expCompleteVersionData(experiments[e],t),i=DYO.Props.getAttributionMethodForGet(experiments[e]);if(experimentTree[e]=e+DYO.ExpUtils.dataSep+r+DYO.ExpUtils.dataSep+n.toString()+DYO.ExpUtils.dataSep+i,storeExperiments(DYO.ExpUtils.storageKey,experimentTree),DYO.Props.isAttributionStoredOnGet(experiments[e])){var o=DYO.Props.getCurrentAttributionProps(experiments[e]);DYO.ExpUtils.attributeVariationsExplicitly(DYO.ExpUtils.DECISION_EVENT,e,r,n,o)}}function varRimpSelectedVariations(e,t){if(experimentExists(e)&&null!=t&&DYO.Props.isVarRimpOnGet(experiments[e])&&t.length>0){for(var n=[],r=0;r<t.length;++r)null!=t[r]&&null!=t[r].id&&n.push(t[r].id);var i=getCurrentVersionDataStr(e),o=DYO.Props.getCurrentAttributionProps(e),a=function(){"undefined"!=typeof window.DY.ServerUtil.logVariation_new&&window.DY.ServerUtil.logVariation_new("ri",e,n,o,i)};window.DY.API("callback",a)}}function varCVariations(e,t){if(experimentExists(e)&&null!=t&&t.length>0){for(var n=[],r=0;r<t.length;++r)null!=t[r]&&null!=t[r].id&&n.push(t[r].id);var i=getCurrentVersionDataStr(e),o=DYO.Props.getCurrentAttributionProps(e),a=function(){"undefined"!=typeof window.DY.ServerUtil.logVariation_new&&window.DY.ServerUtil.logVariation_new("c",e,n,o,i)};window.DY.API("callback",a)}}function executeVariation(expId,variationId){var e=expId,v=variationId,jsExec=!1,htmlExec=!1;if("number"!=typeof expId&&(expId=expNameToId(expId)),experimentExists(expId)){if("number"!=typeof variationId&&(variationId=varNameToId(expId,variationId)),null==variationId)return{code:0,exp:e,variation:v,msg:"Variation is not defined"};for(var i=0;i<experiments[expId].variations.length;i++)if(experiments[expId].variations[i].id==variationId){var execScript=experiments[expId].variations[i].script,htmlInsert=experiments[expId].variations[i].html,htmlInsertPos=experiments[expId].variations[i].htmlPos;if("undefined"!=typeof execScript&&""!=execScript){try{eval("(function(){"+execScript+"})();")}catch(e){}jsExec=!0}if("undefined"!=typeof htmlInsert&&""!=htmlInsert&&""!=htmlInsertPos){var div=document.createElement("div");div.innerHTML=htmlInsert;var contDiv=document.getElementById(htmlInsertPos);contDiv&&(contDiv.insertBefore(div,contDiv.firstChild),htmlExec=!0)}}return{code:1,exp:e,variation:v,msg:"executed "+(jsExec&&htmlExec?"javascript and html insertion":jsExec?"javascript":htmlExec?"html insertion":"nothing")+" for variation "+variationId+" in experiment "+expId}}return{code:0,exp:e,variation:v,msg:"experiment "+expId+" is not defined"}}function makeSmartImage(e,t){function n(){"undefined"!=typeof $dy&&"undefined"!=typeof $dy(window)&&"undefined"!=typeof DY&&"undefined"!=typeof DY.AdDetection?DY.AdDetection.markExpUnit(u,r,s.id,!1,!1,m):setTimeout(n,100)}try{var r=e;"number"!=typeof r&&(r=parseInt(expNameToId(r)));var i=chooseVariation(r,null);if(!experimentExists(r))return{code:0,exp:r,msg:"experiment "+r+" is not defined"};var o=experiments[r].elementWidth;("undefined"==typeof o||null==o)&&(o=0);var a=experiments[r].elementHeight;("undefined"==typeof a||null==a)&&(a=0);var s=experiments[r].variations[i];if("undefined"==typeof s||"undefined"==typeof s.props||"undefined"==typeof s.props.image_url)return{code:0,exp:r,v:s.id,msg:"experiment "+r+" has no image variation "+s.id};var u=document.createElement("div");u.className="dy_unit dy_image_"+r;var l='<img src="'+s.props.image_url+'" width="'+o+'" height="'+a+'" style="border:none;" />';"undefined"!=typeof s.props.image_click_url&&null!=s.props.image_click_url&&""!=s.props.image_click_url&&(l='<a href="'+s.props.image_click_url+'" target="'+(s.props.image_click_url_target||"_top")+'">'+l+"</a>"),u.innerHTML=l;var c=!0;if("undefined"!=typeof t&&""!=t){var d=document.getElementById(t);"undefined"!=typeof d&&null!=d&&(d.appendChild(u),c=!1)}if(c){var p=document.getElementsByTagName("script"),f=p[p.length-1];f.parentElement.appendChild(u)}var m=getCurrentVersionDataStr(r);return n(),{code:1,exp:r,msg:"executing make smart image on experiment "+r}}catch(g){return{code:0,exp:e,msg:"error while executing make smart image on experiment "+e}}}function makeSmartSlider(e,t){function n(){"undefined"!=typeof DY&&"undefined"!=typeof DY.AdDetection&&"undefined"!=typeof $dy&&"undefined"!=typeof $dy(window)&&"undefined"!=typeof $dy.renderSmartCarousel?$dy.renderSmartCarousel(c,{expId:r,width:i,height:o,scrollSpeed:a,versionDataStr:l},u):setTimeout(n,100)}try{var r=e;if("number"!=typeof r&&(r=parseInt(expNameToId(r))),!experimentExists(r))return{code:0,exp:r,msg:"experiment "+r+"is not defined"};var i=experiments[r].elementWidth;("undefined"==typeof i||null==i)&&(i=0);var o=experiments[r].elementHeight;("undefined"==typeof o||null==o)&&(o=0);var a=experiments[r].autoScrollSpeed;("undefined"==typeof a||null==a)&&(a=0);var s=experiments[r].slideCount;("undefined"==typeof s||null==s||0==s)&&(s=experiments[r].variations.length);var u=chooseMultipleVariations(r,s,null),l=getCurrentVersionDataStr(r),c=document.createElement("div");c.setAttribute("style","position:relative;max-width:"+i+"px;max-height:"+o+"px;"),c.className="dy_unit dy_slider_"+r;var d=!0;if("undefined"!=typeof t&&""!=t){var p=document.getElementById(t);"undefined"!=typeof p&&null!=p&&(p.appendChild(c),d=!1)}if(d){var f=document.getElementsByTagName("script"),m=f[f.length-1];m.parentElement.appendChild(c)}for(var g=0;g<u.length;g++){for(var h=null,v=0;v<experiments[r].variations.length;v++)if(u[g].id==experiments[r].variations[v].id){h=experiments[r].variations[v].props;break}if("undefined"!=typeof h&&null!=h&&"undefined"!=typeof h.image_url){("undefined"==typeof h.image_click_url||null==h.image_click_url||""==h.image_click_url)&&(h.image_click_url="#");var y=u[g].id;u[g]=h,u[g].id=y}}return n(),{code:1,exp:r,msg:"executing make smart slider on experiment "+r}}catch(D){return{code:0,exp:e,msg:"error while executing make smart slider on experiment "+e}}}function makeSmartContainer(expName,insertionId,asPureHTML){function waitForDy(){"undefined"!=typeof $dy&&"undefined"!=typeof $dy(window)&&"undefined"!=typeof DY&&"undefined"!=typeof DY.AdDetection?DY.AdDetection.markExpUnit(cont,expId,varElem.id,!1,!1,versionDataStr):setTimeout(waitForDy,100)}try{var expId=expName;"number"!=typeof expId&&(expId=parseInt(expNameToId(expId))),asPureHTML!==!0&&(asPureHTML=!1);var varPos=chooseVariation(expId,null);if(!experimentExists(expId))return{code:0,exp:expId,msg:"experiment "+expId+" is not defined"};var width=experiments[expId].elementWidth;("undefined"==typeof width||null==width)&&(width=0);var height=experiments[expId].elementHeight;("undefined"==typeof height||null==height)&&(height=0);var varElem=experiments[expId].variations[varPos];if("undefined"==typeof varElem||"undefined"==typeof varElem.props||"undefined"==typeof varElem.props.html_code)return{code:0,exp:expId,v:varElem.id,msg:"experiment "+expId+" has no container variation "+varElem.id};var cont,source=null;if(asPureHTML)cont=document.createElement("div"),cont.className="dy_unit dy_container_"+expId,cont.innerHTML="<style type='text/css'>"+decodeURIComponent(varElem.props.css_code)+"</style>"+decodeURIComponent(varElem.props.html_code);else{cont=document.createElement("iframe"),cont.className="dy_unit dy_container_"+expId,cont.setAttribute("scrolling","no"),cont.setAttribute("style","overflow:hidden;background-color:#ffffff;border:0;width:"+width+"px;height:"+height+"px;"),cont.setAttribute("width",width),cont.setAttribute("height",height);var bodyStyle="margin:0;position: absolute;";bodyStyle+="width:"+width+"px;",bodyStyle+="height:"+height+"px;",source='<!DOCTYPE html><html><head><style type="text/css">',source+=decodeURIComponent(varElem.props.css_code),source+='</style></head><body style="'+bodyStyle+'">',source+=decodeURIComponent(varElem.props.html_code),source+='<script type="text/javascript">',source+=decodeURIComponent(varElem.props.js_code),source+="</script></body></html>"}var notAdded=!0;if("undefined"!=typeof insertionId&&""!=insertionId){var insertionPoint=document.getElementById(insertionId);"undefined"!=typeof insertionPoint&&null!=insertionPoint&&(insertionPoint.appendChild(cont),notAdded=!1)}if(notAdded){var arrScripts=document.getElementsByTagName("script"),currScript=arrScripts[arrScripts.length-1];currScript.parentElement.appendChild(cont)}asPureHTML?eval("try{(function(){"+decodeURIComponent(varElem.props.js_code)+"})();}catch(e){}"):null!=source&&(cont.contentWindow.document.open(),cont.contentWindow.document.write(source),cont.contentWindow.document.close());var versionDataStr=getCurrentVersionDataStr(expId);return waitForDy(),{code:1,exp:expId,msg:"executing make smart image on experiment "+expId}}catch(exception){return{code:0,exp:expName,msg:"error while executing make smart image on experiment "+expName}}}function setupServerExperiments(){if(debug&&log("DYO setupServerExperiments"),"undefined"!=typeof DYExps&&"undefined"!=typeof DYExps.oexps){debug&&log("actually using DYExps in DYO"),DYO.section=DYExps.section,DYO.oexps=experiments=DYExps.oexps,DYO.otags=smartTags=DYExps.otags,DYO.ready=!0;var e=18e5;"undefined"!=typeof DYExps.expSesMs&&DYO.StringUtils.isN(DYExps.expSesMs)&&(e=DYExps.expSesMs),DYO.Seqs.loadSequences(e),cleanupExperiments(),DYO.exps=experimentTree,"undefined"!=typeof window.DY.ssae&&window.DY.ssae||"undefined"!=typeof DYO.executeSmartActions&&(window.DY.ssae=!0,DYO.executeSmartActions(!0))}}function enableCookies(){DYO.StorageUtils.forceCookies();var e=function(){"undefined"!=typeof window.DY&&"undefined"!=typeof window.DY.StorageUtils&&"undefined"!==window.DY.StorageUtils.forceCookies&&window.DY.StorageUtils.forceCookies()};window.DY.API("callback",e)}var experimentTree={},debug=!1,OPTION_VARIATION_SET_ID="variationSetId",OPTION_EXP_DEFAULT="expDefault",OPTION_FORCE_CALCULATION="isForceCalculation",experiments={},smartTags={},hashCode=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n),t=(t<<5)-t+r;t&=t}return t},log=function(e){debug&&console.log(e)};return{chooseVariation:chooseVariation,forceChooseVariation:forceChooseVariation,chooseMultipleVariations:chooseMultipleVariations,forceChooseMultipleVariations:forceChooseMultipleVariations,OPTION_EXP_DEFAULT:OPTION_EXP_DEFAULT,OPTION_VARIATION_SET_ID:OPTION_VARIATION_SET_ID,OPTION_FORCE_CALCULATION:OPTION_FORCE_CALCULATION,chooseDynamicVariation:chooseDynamicVariation,forceChooseDynamicVariation:forceChooseDynamicVariation,chooseMultipleDynamicVariation:chooseMultipleDynamicVariations,chooseMultipleDynamicVariations:chooseMultipleDynamicVariations,forceChooseMultipleDynamicVariations:forceChooseMultipleDynamicVariations,getDynamicVariations:getDynamicVariations,getServerVariations:getServerVariations,setVariation:externalSetVariation,setVariationByPosition:externalSetVariationByPosition,setVariations:setVariations,getVariationData:getVariationData,getVariationProperties:getVariationProperties,getCurrentVersionDataStr:getCurrentVersionDataStr,reportExperimentEvent:reportExperimentEvent,storeAttributeVariations:emptyMethod,exps:experimentTree,execute:executeVariation,oexps:experiments,otags:smartTags,varNameToId:varNameToId,expNameToId:expNameToId,sd:setDebug,d:debug,log:log,smartImage:makeSmartImage,smartSlider:makeSmartSlider,smartContainer:makeSmartContainer,setupServerExperiments:setupServerExperiments,enableCookies:enableCookies,ready:!1,removeFromVariationsIgnoreList:emptyMethod,cleanupExperiments:cleanupExperiments,generateHash:generateHash}}(),"undefined"==typeof Object.keys&&(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),DYO.ExpUtils=function(){function e(e,r,i,o,a){try{if("undefined"!=typeof i&&null!=i&&i.length>0&&"undefined"!=typeof a&&null!=a&&"undefined"!=typeof a.method){if(a.method==D&&e!==S)return;if(a.method==x&&e!==Y)return;if(a.method==O&&e!==I)return;if(a.method==w&&e!==I)return;var s=DYO.StorageUtils.get(f,["localStorage"]),u=new Array;"undefined"!=typeof s&&""!=s&&null!=s&&(u=s.split(m));for(var l=!1,c=0;c<u.length;c++){var d=u[c].split(g);if(r==d[0]){if(a.method==x&&i==d[1]){var p=d[2].split(v),h=t(p.concat(o));u[c]=n(r,i,h,a)}else u[c]=n(r,i,o,a);l=!0;break}}l||(u.push(n(r,i,o,a)),l=!0),DYO.StorageUtils.set(f,u.join(m),["localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain()})}}catch(y){}}function t(e){for(var t=e.concat(),n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)t[n]===t[r]&&t.splice(r--,1);return t}function n(e,t,n,i){var o=r(i),s=e+g+t+g+n.join(v)+g+a+g+o;return s}function r(e){var t=(new Date).getTime(),n=""+e.sesLoadSeq+h+t;return n}var i="0",o="1",a="2",s="0",u="1",l="2",c="3",d="4",p="_dyexps",f="_dy_att_exps",m="##",g="|",h=":",v=",",y="-1",D="0",x="1",O="2",w="3",S="get",Y="ri",I="c";return{expSep:m,dataSep:g,verSep:h,variSep:v,notInExp:y,storageKey:p,storageAttKey:f,SELECTION_AND_ATTRIBUTION:i,SELECTION:o,ATTRIBUTION:a,SUB_MECHANISM_NA:s,SUB_MECHANISM_CG_WITH_PREDICT:u,SUB_MECHANISM_CG_WITHOUT_PREDICT:l,SUB_MECHANISM_REWEIGHT_EXPLORE:c,SUB_MECHANISM_REWEIGHT_KICK_IN:d,IMPLICIT_ATTRIBUTION:D,ATTRIBUTION_AFTER_RI:x,ATTRIBUTION_AFTER_C:O,EXPLICIT_ATTRIBUTION:w,DECISION_EVENT:S,IMPRESSION_EVENT:Y,CONVERSION_EVENT:I,attributeVariationsExplicitly:e}}(),/*
 Copyright 2013 Daniel Wirtz <dcode@dcode.io>
 Copyright 2009 The Closure Library Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS-IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */
function(e){"use strict";var t=function(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n};t.isLong=function(e){return(e&&e instanceof t)===!0};var n={},r={};t.fromInt=function(e,i){var o,a;return i?(e>>>=0,e>=0&&256>e&&(a=r[e])?a:(o=new t(e,0>(0|e)?-1:0,!0),e>=0&&256>e&&(r[e]=o),o)):(e=0|e,e>=-128&&128>e&&(a=n[e])?a:(o=new t(e,0>e?-1:0,!1),e>=-128&&128>e&&(n[e]=o),o))},t.fromNumber=function(e,n){return n=!!n,isNaN(e)||!isFinite(e)?t.ZERO:!n&&-u>=e?t.MIN_VALUE:!n&&e+1>=u?t.MAX_VALUE:n&&e>=s?t.MAX_UNSIGNED_VALUE:0>e?t.fromNumber(-e,n).negate():new t(e%a|0,e/a|0,n)},t.fromBits=function(e,n,r){return new t(e,n,r)},t.fromString=function(e,n,r){if(0===e.length)throw Error("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof n&&(r=n,n=!1),r=r||10,2>r||r>36)throw Error("radix out of range: "+r);var i;if((i=e.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+e);if(0===i)return t.fromString(e.substring(1),n,r).negate();for(var o=t.fromNumber(Math.pow(r,8)),a=t.ZERO,s=0;s<e.length;s+=8){var u=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+u),r);if(8>u){var c=t.fromNumber(Math.pow(r,u));a=a.multiply(c).add(t.fromNumber(l))}else a=a.multiply(o),a=a.add(t.fromNumber(l))}return a.unsigned=n,a},t.fromValue=function(e){return"number"==typeof e?t.fromNumber(e):"string"==typeof e?t.fromString(e):t.isLong(e)?e:new t(e.low,e.high,e.unsigned)};var i=65536,o=1<<24,a=i*i,s=a*a,u=s/2,l=t.fromInt(o);t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*a+(this.low>>>0):this.high*a+(this.low>>>0)},t.prototype.toString=function(e){if(e=e||10,2>e||e>36)throw RangeError("radix out of range: "+e);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(t.MIN_VALUE)){var r=t.fromNumber(e),i=this.div(r);return n=i.multiply(r).subtract(this),i.toString(e)+n.toInt().toString(e)}return"-"+this.negate().toString(e)}var o=t.fromNumber(Math.pow(e,6),this.unsigned);n=this;for(var a="";;){var s=n.div(o),u=n.subtract(s.multiply(o)).toInt()>>>0,l=u.toString(e);if(n=s,n.isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(t.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,n=31;n>0&&0==(e&1<<n);n--);return 0!=this.high?n+33:n+1},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isOdd=function(){return 1===(1&this.low)},t.prototype.isEven=function(){return 0===(1&this.low)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},t.prototype.notEquals=function(e){return t.isLong(e)||(e=t.fromValue(e)),!this.equals(e)},t.prototype.lessThan=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.compare(e)<0},t.prototype.lessThanOrEqual=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.compare(e)<=0},t.prototype.greaterThan=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.compare(e)>0},t.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},t.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.subtract(e).isNegative()?-1:1},t.prototype.negate=function(){return!this.unsigned&&this.equals(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=65535&e.low,c=0,d=0,p=0,f=0;return f+=o+l,p+=f>>>16,f&=65535,p+=i+u,d+=p>>>16,p&=65535,d+=r+s,c+=d>>>16,d&=65535,c+=n+a,c&=65535,t.fromBits(p<<16|f,c<<16|d,this.unsigned)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.negate())},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())return t.ZERO;if(this.equals(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.equals(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(l)&&e.lessThan(l))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,u=e.low>>>16,c=65535&e.low,d=0,p=0,f=0,m=0;return m+=o*c,f+=m>>>16,m&=65535,f+=i*c,p+=f>>>16,f&=65535,f+=o*u,p+=f>>>16,f&=65535,p+=r*c,d+=p>>>16,p&=65535,p+=i*u,d+=p>>>16,p&=65535,p+=o*s,d+=p>>>16,p&=65535,d+=n*c+r*u+i*s+o*a,d&=65535,t.fromBits(f<<16|m,d<<16|p,this.unsigned)},t.prototype.div=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw new Error("division by zero");if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,r,i;if(this.equals(t.MIN_VALUE)){if(e.equals(t.ONE)||e.equals(t.NEG_ONE))return t.MIN_VALUE;if(e.equals(t.MIN_VALUE))return t.ONE;var o=this.shiftRight(1);return n=o.div(e).shiftLeft(1),n.equals(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(r=this.subtract(e.multiply(n)),i=n.add(r.div(e)))}if(e.equals(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(i=t.ZERO,r=this;r.greaterThanOrEqual(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),s=48>=a?1:Math.pow(2,a-48),u=t.fromNumber(n),l=u.multiply(e);l.isNegative()||l.greaterThan(r);)n-=s,u=t.fromNumber(n,this.unsigned),l=u.multiply(e);u.isZero()&&(u=t.ONE),i=i.add(u),r=r.subtract(l)}return i},t.prototype.modulo=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.subtract(this.div(e).multiply(e))},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),0===(e&=63)?this:32>e?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),0===(e&=63)?this:32>e?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,0===e)return this;var n=this.high;if(32>e){var r=this.low;return t.fromBits(r>>>e|n<<32-e,n>>>e,this.unsigned)}return 32===e?t.fromBits(n,0,this.unsigned):t.fromBits(n>>>e-32,0,this.unsigned)},t.prototype.toSigned=function(){return this.unsigned?new t(this.low,this.high,!1):this},t.prototype.toUnsigned=function(){return this.unsigned?this:new t(this.low,this.high,!0)},e.Long=t}(DYO),DYO.Predict=function(){function e(e,t){return e+c+t}function t(t,n,r){var i=e(n,r);if("undefined"!=typeof t&&null!=t){if(t.hasOwnProperty(i)){var o=t[i];return o}return f}return p}function n(){var t={};if("undefined"!=typeof DY.prd&&null!=DY.prd){for(var n=0;n<DY.prd.length;n++){var r=DY.prd[n],i=e(r.expId,r.verId);t[i]=r.vars}return t}}function r(){var t={};if("undefined"!=typeof DY.prd&&null!=DY.prd){for(var n=0;n<DY.prd.length;n++){var r=DY.prd[n],i=e(r.expId,r.verId),o=m(r.vars,r.smech);t[i]=o}return t}}function i(e,n){var i=r(),o=t(i,e,n);return o==p?void 0:o==f?[]:o}function o(e,n){var r=window.DYO.StorageUtils.get(l,["localStorage"]);if("undefined"!=typeof r&&null!=r&&""!=r){var i=window.DYO.StringUtils.pkv(r),o=t(i,e,n);if(o==p)return null;if(o==f){var a=m([],null);return a}var s=window.DYO.StringUtils.pkv(o),a=m(null,null);return"undefined"!=typeof s.varIdArr&&null!=s.varIdArr&&s.varIdArr.length>0&&(a.varIdArr=s.varIdArr.split(d)),"undefined"!=typeof s.smechArr&&null!=s.smechArr&&s.smechArr.length>0&&(a.smechArr=s.smechArr.split(d)),a}return null}function a(){try{var e=r();if("undefined"!=typeof e&&null!=e){var t=window.DYO.StringUtils.skv(e);window.DYO.StorageUtils.set(l,t,["localStorage"])}else window.DYO.StorageUtils.remove(l,["localStorage"]);var i=n();if("undefined"!=typeof i&&null!=i){var o=window.DYO.StringUtils.skv(i);window.DYO.StorageUtils.set(u,o,["localStorage"])}else window.DYO.StorageUtils.remove(u,["localStorage"])}catch(a){}}function s(e,t){try{var n=i(e,t);return null==n?o(e,t):n}catch(r){}}var u="_dyprd",l="_dyprdobj",c="|",d=",",p="NP",f="NE",m=function(e,t){var n=new Object;return n.varIdArr="undefined"!=typeof e?e:null,n.smechArr="undefined"!=typeof t?t:null,n.toString=function(){return DYO.StringUtils.skv({varIdArr:this.varIdArr,smechArr:this.smechArr})},n};return{updatePredictStorage:a,getPrediction:s}}(),document.dyQuerySelectorAll||("function"==typeof document.querySelectorAll?document.dyQuerySelectorAll=function(){return document.querySelectorAll.apply(document,arguments)}:function(e,t){e=document,t=e.createStyleSheet(),e.dyQuerySelectorAll=function(n,r,i,o,a){for(a=e.all,r=[],n=n.replace(/\[for\b/gi,"[htmlFor").split(","),i=n.length;i--;){for(t.addRule(n[i],"k:v"),o=a.length;o--;)a[o].currentStyle.k&&r.push(a[o]);t.removeRule(0)}return r}}()),document.dyQuerySelector||(document.dyQuerySelector="function"==typeof document.querySelector?function(){return document.querySelector.apply(document,arguments)}:function(e){return document.dyQuerySelectorAll(e)[0]||null}),DYO.StorageUtils=function(e){function t(e,t){try{for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}catch(r){return!1}}function n(t){return t!==e&&null!==t}function r(){try{var e=document.domain.split(".");return e.length<=2||/^([0-9]+\.){3}[0-9]+$/.test(document.domain)?document.domain:/[-\w]+\.(?:[-\w]+\.xn--[-\w]+|[-\w]{3,}|[-\w]+\.[-\w]{2})$/i.exec(document.domain)[0]}catch(t){return document.domain}}function i(){return null==h&&(h="undefined"!=typeof DY&&"undefined"!=typeof DY.sst&&DY.sst?!1:!0),h}function o(e,r,i){if(!n(r))return null;"string"==typeof r&&(r=[r]),(c||!u("localStorage"))&&(t(r,"cookieStorage")||t(r,"memoryStorage")||r.push("cookieStorage"));for(var o=0;o<r.length;o++){var a=p[r[o]].getItem(e,i);if(n(a))return a}return null}function a(e,r,i,o){if(n(i)){"string"==typeof i&&(i=[i]),(c||!u("localStorage"))&&(t(i,"cookieStorage")||t(i,"memoryStorage")||i.push("cookieStorage"));for(var a=0;a<i.length;a++)p[i[a]].setItem(e,r,o)}}function s(e,r,i){if(!n(r))return null;"string"==typeof r&&(r=[r]),(c||!u("localStorage"))&&(t(r,"cookieStorage")||t(r,"memoryStorage")||r.push("cookieStorage"));for(var o=0;o<r.length;o++)p[r[o]].removeItem(e,i)}function u(e){return f[e]}function l(e){c=e}var c=!1,d=30,p={},f={},m={},g=function(){function e(){}return{getItem:e,setItem:e,removeItem:e}}(),h=null;return p.localStorage=function(){if(!i())return f.localStorage=!1,g;try{return window.localStorage.setItem("dy_______test","1"),window.localStorage.getItem("dy_______test"),window.localStorage.removeItem("dy_______test"),f.localStorage=!0,window.localStorage}catch(e){return f.localStorage=!1,g}}(),p.sessionStorage=function(){if(!i())return f.sessionStorage=!1,g;try{return window.sessionStorage.setItem("dy_______test","1"),window.sessionStorage.getItem("dy_______test"),window.sessionStorage.removeItem("dy_______test"),f.sessionStorage=!0,window.sessionStorage}catch(e){return f.sessionStorage=!1,g}}(),p.memoryStorage=function(){function e(e){return m[e]}function t(e,t){return m[e]=t}function n(e){delete m[e]}return f.memoryStorage=!0,{getItem:function(t){return e(t)},setItem:function(e,n){return t(e,n)},removeItem:function(e){return n(e)}}}(),p.cookieStorage=function(){function e(){try{var e=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")?!0:!1),e}catch(t){return!1}}function t(e,t){var r=document.cookie.match(o(e));return n(r)?t?decodeURIComponent(r[1]):r[1]:void 0}function r(e,t,n,r,i){var o=new Date;o.setDate(o.getDate()+n),document.cookie=a(e,t,o.toGMTString(),r,i)}function i(e,r,i){n(t(e))&&(document.cookie=a(e,"","Thu, 01-Jan-1970 00:00:01 GMT",r,i))}if(!e())return f.cookieStorage=!1,g;f.cookieStorage=!0;var o=function(e){return new RegExp("(?:^|;)\\s?"+e+"=(.*?)(?:;|$)","i")},a=function(e,t,n,r,i){return e+"="+encodeURIComponent(t)+(n?";expires="+n:"")+(r?";path="+r:"")+(i?";domain="+i:";domain="+document.domain)};return{getItem:function(e,r){return r=r||{},n(r.unescape)||(r.unescape=!0),t(e,r.unescape)},setItem:function(e,t,n){n=n||{};var o=0===n.expire?0:n.expire||d,a=n.path||"/",s=n.domain||document.domain;try{n.domain&&n.domain!==document.domain&&i(e,a,document.domain)}catch(u){}return r(e,t,o,a,s)},removeItem:function(e,t){t=t||{};var n=t.path||"/",r=t.domain||document.domain;try{t.domain&&t.domain!==document.domain&&i(e,n,document.domain)}catch(o){}return i(e,n,r)}}}(),{get:o,set:a,remove:s,enabled:u,getSecondLevelDomain:r,forceCookies:l}}(),DYO.StringUtils=function(){function e(e){for(var t=e.split("."),n={},r=0;r<t.length;r++){var i=t[r].split("@");n[i[0]]="nu"==i[1]?null:i[1].replace(/\%1\%/g,"@").replace(/\%0\%/g,".")}return n}function t(e){var t=[];for(var n in e)t.push(n+"@"+(null==e[n]?"nu":e[n].toString().replace(/\./g,"%0%").replace(/\@/g,"%1%")));return t.join(".")}function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}return{pkv:e,skv:t,isN:n}}();var DYO=DYO||{};DYO.Chooser=function(){function e(e,t){for(var n=s(e),r=[],i=Object.keys(e).length,o=0;t>o&&i>o;o++)r.push(u(n));return r}function t(e,t,n){this.value=e.slice(0),this.weight=t,this.id=n}function n(e,r,i,o,a,s){if(!(r.length-i<o)){if(!(o>0)){var u=new t(a,s,e.length);return void e.push(u)}for(var l=i;l<r.length+1-o;++l)a.push(r[l]),n(e,r,l+1,o-1,a,s*r[l].weight),a.pop(r[l])}}function r(e){var t=Math.floor(Math.random()*e.length),n={opt:e[t].id,loc:t};return n}function i(e,t){for(var n=[],i=0;t>i&&e.length>0;i++){var o=r(e);null!=o&&null!=o.loc&&(n.push(e[o.loc]),e.splice(o.loc,1))}return n}function o(e){for(var t=0,n=e[t].id,i=0,o=[],a=0;a<e.length;a++)o.push(e[a].weight+i),i+=e[a].weight;if(0>=i)return r(e);for(var s=Math.floor(Math.random()*i+1),a=0;a<o.length;a++)if(s<o[a]){n=e[a].id,t=a;break}return{opt:n,loc:t}}var a=function(e,t,n){var r=new Object;return r.value=e,r.weight=t,r.totalWeight=n,r},s=function(e){var t,n=[void 0];for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],t=null==i.weight?0:i.weight;n.push(a(i,t,t))}for(var o=n.length-1;o>1;o--)n[o>>1].totalWeight+=n[o].totalWeight;return n},u=function(e){for(var t=e[1].totalWeight*Math.random(),n=1;t>e[n].weight;)t-=e[n].weight,n<<=1,t>e[n].totalWeight&&(t-=e[n].totalWeight,n+=1);var r=e[n].weight,i=e[n].value;for(e[n].weight=0;0!==n;)e[n].totalWeight-=r,n>>=1;return i},l=function(t,r){var i=[4e4,4e4,256,64,32,24,20,18,18],a=r<t.length-r?r:t.length-r;if(a>=i.length||t.length>i[a])return e(t,r);var s=[],u=[];if(n(s,t,0,r,u,1),s.length>0){var l=o(s);if(l.loc>=0&&l.loc<s.length)return s[l.loc].value}return[]},c=function(t,n){for(var r=[],o=[],a=0;a<t.length;a++)null==t[a].weight||t[a].weight<=0?r.push(t[a]):o.push(t[a]);var s=[];if(r.length>0&&o.length<n){var u=n-o.length;s=i(r,u)}var c=n-s.length,d=l(o,c);return null==d?[]:(d=e(d,d.length),d.length<n&&s.length>0&&(d=d.concat(s)),d)};return{wRandomChoose:c,equalDecisions:i,weightedDecision:o,wRandomOrderedNoReplacement:e,wRandomOrderlessNoReplacement:l}}();var DYO=DYO||{};DYO.Props=function(){function e(e,t){return e.length>=3&&t.length>=3&&e[2]==t[2]||e.length>=3&&e[2]==F||t.length>=3&&t[2]==F}function t(e,t){return e.length>=5&&t.length>=5&&e[4]==t[4]}function n(e,t){return e.length>=6&&t.length>=6&&e[5]==t[5]}function r(e,t){var n="undefined"!=typeof e.calcExpirationPeriodMs&&DYO.StringUtils.isN(e.calcExpirationPeriodMs)&&e.calcExpirationPeriodMs>=0;if(n){var r=(new Date).getTime();if(t.length<4||!DYO.StringUtils.isN(t[3])||parseFloat(t[3])+e.calcExpirationPeriodMs<r)return!1}return!0}function i(e,t){return e.version==t[0]}function o(e,t){return e.length>1&&t.length>1&&e[1]==t[1]}function a(e){var t="undefined"!=typeof e.isIgnoreReweightInc&&e.isIgnoreReweightInc;return t}function s(e){var t="undefined"!=typeof e&&null!=e&&"undefined"!=typeof e.stickiness&&e.stickiness==k;return t}function u(e,t,n,r){var i=e.version,o=(new Date).getTime(),a=i+DYO.ExpUtils.verSep+t+DYO.ExpUtils.verSep+n+DYO.ExpUtils.verSep+o+DYO.ExpUtils.verSep+DYO.Seqs.loadSeq+DYO.ExpUtils.verSep+DYO.Seqs.sesLoadSeq+DYO.ExpUtils.verSep+r+DYO.ExpUtils.verSep+c([DYO.ExpUtils.SUB_MECHANISM_NA]);return a}function l(e){var t=null==e?[]:e.split(DYO.ExpUtils.verSep);return t.length<7?null:t[6]}function c(e){var t="undefined"==typeof e||null==e?[]:e;return t.join(H)}function d(e){if("undefined"!=typeof e&&null!=e&&"undefined"==typeof e.attributionMethod&&"undefined"!=typeof e.isExplicitlyAttributed&&e.isExplicitlyAttributed)return DYO.ExpUtils.ATTRIBUTION_AFTER_C;var t="undefined"==typeof e||null==e||"undefined"==typeof e.attributionMethod||e.attributionMethod!=DYO.ExpUtils.ATTRIBUTION_AFTER_RI&&e.attributionMethod!=DYO.ExpUtils.ATTRIBUTION_AFTER_C&&e.attributionMethod!=DYO.ExpUtils.EXPLICIT_ATTRIBUTION?DYO.ExpUtils.IMPLICIT_ATTRIBUTION:e.attributionMethod;return t}function p(e){var t="undefined"!=typeof e.attributionTtlS&&DYO.StringUtils.isN(e.attributionTtlS)&&(e.attributionTtlS>=0||e.attributionTtlS==G);return t}function f(e,t){try{return i(e,t)&&r(e,t)}catch(n){return!1}}function m(e,t,n){try{if(!i(e,t))return!1;if(!p(e))return!0;if(e.attributionTtlS==G){var r=n[0]==DYO.Seqs.sesLoadSeq;return r}var o=(new Date).getTime();return n.length<2||!DYO.StringUtils.isN(n[1])||parseFloat(n[0])+1e3*e.attributionTtlS<o?!1:!0}catch(a){return!1}}function g(e,t,a){try{return i(e,t)&&r(e,t)&&o(t,a)&&(!s(e)&&!D(e)||n(t,a))}catch(u){return!0}}function h(n,r,i){try{return g(n,r,i)&&(!s(n)||t(r,i))&&(a(n)||e(r,i))}catch(o){return!1}}function v(e,t,n){if("undefined"==typeof e.controlGroup||null==e.controlGroup||"undefined"==typeof e.controlGroup.share||"undefined"==typeof e.controlGroup.method||E(e)==R||!DYO.StringUtils.isN(e.controlGroup.share))return!1;var r=null==t||!g(e,t.split(DYO.ExpUtils.verSep),n.split(DYO.ExpUtils.verSep)),i=!1;if(r){var o=parseFloat(e.controlGroup.share);Math.floor(100*Math.random())<o&&(i=!0)}else i=y(t);return i}function y(e){return l(e)==M}function D(e){var t="undefined"!=typeof e&&null!=e&&"undefined"!=typeof e.stickiness&&e.stickiness==V;return t}function x(e){var t=d(e);return t==DYO.ExpUtils.ATTRIBUTION_AFTER_RI||t==DYO.ExpUtils.ATTRIBUTION_AFTER_C||t==DYO.ExpUtils.EXPLICIT_ATTRIBUTION}function O(e){var t="undefined"!=typeof e&&null!=e&&"undefined"!=typeof e.isVarRimpOnGet&&e.isVarRimpOnGet;return t}function w(e){return p(e)||x(e)?DYO.ExpUtils.SELECTION:DYO.ExpUtils.SELECTION_AND_ATTRIBUTION}function S(e){var t=d(e);return p(e)&&t==DYO.ExpUtils.IMPLICIT_ATTRIBUTION}function Y(e){var t=d(e),n=DYO.Seqs.sesLoadSeq;return{method:t,sesLoadSeq:n}}function I(e,t){return e.versionHash==t}function E(e){return null!=e&&"undefined"!=typeof e.weightMechanism?e.weightMechanism:DYO.Props.REWEIGHT_MECHANISM}function b(e){return null!=e&&"undefined"!=typeof e.weightSubMechanism?e.weightSubMechanism:null}function _(e,t,n){var r=e.split(DYO.ExpUtils.verSep);return r[6]=t,r[7]=c(n),r.join(DYO.ExpUtils.verSep)}function C(e){return u(e,U,null==e.reweightId?0:e.reweightId,R)}function T(e,t){return u(e,t,null==e.reweightId?0:e.reweightId,R)}function N(e){return u(e,U,F,R)}function A(e){return e.split(DYO.ExpUtils.verSep)[0]}function P(e,t){var n=null;if(null==t)n=N(e);else{"number"==typeof t&&(t=""+t);var r=t.split(DYO.ExpUtils.verSep);r.length<=1?(n=N(e),DYO.log("setting dont-care-weight due to version-data being without reweight-id data")):2==r.length?(n=T(e,r[1]),DYO.log("setting dont-care-weight due to version-data being without reweight-id data")):3==r.length?n=u(e,r[1],r[2],R):r.length<=7?(n=t,4==r.length&&(n=n+DYO.ExpUtils.verSep+DYO.Seqs.loadSeq),r.length<=5&&(n=n+DYO.ExpUtils.verSep+DYO.Seqs.sesLoadSeq),r.length<=6&&(n=n+DYO.ExpUtils.verSep+R),r.length<=7&&(n=n+DYO.ExpUtils.verSep+c([DYO.ExpUtils.SUB_MECHANISM_NA]))):n=t}return n}var U="",V="1",k="2",M="0",R="1",L="2",j="3",q="0",B="1",H=".",F="__dontcareweight",G=-1;return{DONT_CARE_WEIGHT:F,CONTROL_GROUP_MECHANISM:M,MANUAL_MECHANISM:R,REWEIGHT_MECHANISM:L,PREDICT_MECHANISM:j,isStoredVersionValidDuringCleanup:f,isStoredVersionValidForChoose:h,isStoredAttributionValidDuringCleanup:m,isExplicitlyAttributed:x,isVarRimpOnGet:O,getAttributionMethodForGet:w,verifyClientIdsOfServerAndClientSynced:I,expProgVersionData:C,expContVersionData:T,expManualSetVersionData:N,getVersionId:A,expCompleteVersionData:P,resetVersionDataMechanism:_,getMechanismRepresentingWeights:E,getSubMechanismRepresentingWeights:b,isControlGroupChoose:v,isCurrentlyInControlGroup:y,isAttributionStoredOnGet:S,getCurrentAttributionProps:Y,CGM_PRESET_VARS:q,CGM_RANDOM:B,subMechanismsArrToStr:c,getVersionDataMechanism:l,isSameReweight:e}}();var DYO=DYO||{};DYO.Seqs=function(){function e(e){try{n=1+Math.floor(9999*Math.random()),r=n;var i=DYO.StorageUtils.get(t,["localStorage"]),o=(new Date).getTime();if(null!=i){var a=i.split(DYO.ExpUtils.verSep);a.length>=2&&DYO.StringUtils.isN(a[1])&&parseFloat(a[1])+e>=o&&(r=a[0])}DYO.StorageUtils.set(t,""+r+DYO.ExpUtils.verSep+o,["localStorage"])}catch(s){DYO.log("error setting up load sequences")}finally{try{DYO.Seqs.loadSeq=n,DYO.Seqs.sesLoadSeq=r}catch(u){}}}var t="_dy_ses_load_seq",n=0,r=0;return{loadSequences:e,loadSeq:n,sesLoadSeq:r}}(),DYO.setupServerExperiments(),DYO.ServeTagUtils=function(){function e(e){for(var e in DYO.otags)for(var t=DYO.otags[e],n=0;n<t.rules.length;n++)if(1!=t.rules[n].smartObject.objectType){var r=t.rules[n].smartObject.variations;for(var i in r)if(("image"==r[i].renderType||"flash"==r[i].renderType)&&"undefined"!=typeof r[i].imageLink&&null!=r[i].imageLink&&""!=r[i].imageLink){for(var o,a=t.rules[n].smartObject.experiment,s=0;s<DYO.oexps[experiment].variations.length;s++)if(DYO.oexps[experiment].variations[s].name==i){o=DYO.oexps[experiment].variations[s].id;break}r[i].doNotMarkUnit=!0,r[i].imageLink="http://px.dynamicyield.com/var?t=c&e="+a+"&va=%5B"+o+"%5D&_="+Math.random()+"&red="+encodeURIComponent(r[i].imageLink)}}}return{updateImageVariations:e}}(),DYO.PageEvents=function(){function e(e,n){function r(){if(!o){for(var e=0;e<a.length;e++)if("undefined"!=typeof a[e])return;n(i.cleanAudRules),o=!0}}for(var i=t(e),o=!1,a=i.pageEventAudRules,s=0;s<a.length;s++)for(var u=0;u<a[s].conds.length;u++)!function(){function e(){delete a[n],r()}function t(){var t=a[n];e(),a[n]=t}var n=s,i=a[s].conds[u];switch(i.selectMethod){case"LeavePage":DY.API("sub",{on:"dy-mouse-leave-doc",callback:t});break;case"SiteEvent":DY.API("sub",{on:"dy-event-"+i.selectParameter,callback:e});break;case"TimeOnPage":setTimeout(e,1e3*parseInt(i.selectParameter))}}();r()}function t(e){for(var t=[],n=[],r=0;r<e.length;r++)"_PageEvent"===e[r].condType?t.push(e[r]):n.push(e[r]);return{pageEventAudRules:t,cleanAudRules:n}}return{executeWithPageEvents:e}}(),DYO.waitForElement=function(e,t,n,r,i){function o(){var a=document.dyQuerySelectorAll(e);a.length>=n?t(a):0!==i--&&setTimeout(o,r)}"undefined"==typeof n&&(n=1),"undefined"==typeof r&&(r=100),"undefined"==typeof i&&(i=-1),o()},DYO.safeEval=function(code){try{return eval(code)}catch(e){return null}},function(){function removeHttp(e){return e.substr(e.indexOf("://")+3)}function matchNow(e,t,n){function r(e){return 60*e.getHours()+e.getMinutes()}try{switch(e){case"_Referrer":var i=removeHttp(document.referrer.toLowerCase());i=i.replace(/\#.*/,""),t.includeUrlParams||"undefined"==typeof t.includeUrlParams||(i=i.replace(/\?.*/,""));var o=t.selectParameter.toLowerCase();switch(t.selectMethod){case"equals":return i==o;case"not_equals":return i!=o;case"contains":return-1!=i.indexOf(o);case"regexp":var a=new RegExp(o);return a.test(i);default:return!1}case"_CurrentPage":var s=removeHttp(location.href.toLowerCase());s=s.replace(/\#.*/,""),t.includeUrlParams||"undefined"==typeof t.includeUrlParams||(s=s.replace(/\?.*/,""));var o=t.selectParameter.toLowerCase();switch(t.selectMethod){case"equals":return s==o;case"not_equals":return s!=o;case"contains":return-1!=s.indexOf(o);case"regexp":var u=new RegExp(o);return u.test(s);default:return!1}case"Audience":case"_Audience":var l=-1!=("."+(window.DY&&window.DY.aud||"")+"."+Cookies.loadCHCCookies().auds.join(".")+"."+Cookies.loadSessionCookies().sauds.join(".")+".").indexOf("."+t.parameter+".");switch(t.hitCountMethod){case">=":return l;case"<":return!l;default:return!1}case"_Country":switch(t.selectMethod){case"equals":return"undefined"!=typeof window.DY.geoCode&&window.DY.geoCode===t.selectParameter;case"not_equals":return window.DY.geoCode!==t.selectParameter;default:return!1}case"_Continent":switch(t.selectMethod){case"equals":return"undefined"!=typeof window.DY.geoCont&&window.DY.geoCont===t.selectParameter;case"not_equals":return window.DY.geoCont!==t.selectParameter;default:return!1}case"_Region":switch(t.selectMethod){case"equals":return"undefined"!=typeof window.DY.geoRegionCode&&window.DY.geoRegionCode===t.selectParameter;case"not_equals":return window.DY.geoRegionCode!==t.selectParameter;default:return!1}case"_City":switch(t.selectMethod){case"equals":return"undefined"!=typeof window.DY.geoCity&&window.DY.geoCity===t.selectParameter;case"not_equals":return window.DY.geoCity!==t.selectParameter;default:return!1}case"_Browser":var c=navigator.userAgent.toLowerCase(),d=function(e){return null!=/msie ([0-9]{1,}[\.0-9]{0,})/.exec(c)?parseInt(RegExp.$1)==e:/trident/.test(c)&&null!=/rv\:([0-9]{1,}[\.0-9]{0,})/.exec(c)?parseInt(RegExp.$1)==e:!1};switch(t.parameter){case 12:return/chrome/.test(c);case 13:return d(6);case 14:return d(7);case 15:return d(8);case 16:return d(9);case 17:return d(10);case 18:return/firefox/.test(c);case 33:return window.opera?!0:!1;case 34:return/safari/.test(c)&&!/chrome/.test(c);case 36:return!/chrome|firefox|safari|msie|trident/.test(c)&&!window.opera;case 39:return d(11);default:return!1}case"_ScreenSize":var p=window.innerWidth,f="equals"===t.selectMethod;switch(t.parameter){case 26:return getCorrectValueAccordingToCondition(p>1366,f);case 27:return getCorrectValueAccordingToCondition(1366>=p&&p>1024,f);case 28:return getCorrectValueAccordingToCondition(1024>=p,f);default:return!1}case"_OSDeviceName":var c=navigator.userAgent.toLowerCase(),m=navigator.platform.toLowerCase(),f="equals"===t.selectMethod;switch(t.parameter){case 0:return getCorrectValueAccordingToCondition(/iphone|ipod|blackberry|android|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|sonyericsson|symbian|treo mini/.test(c)||/silk|ipad|android|kindle/.test(c),f);case 1:return getCorrectValueAccordingToCondition(/iphone|ipod/.test(c),f);case 2:return getCorrectValueAccordingToCondition(/silk|ipad|android|kindle/.test(c)&&(!/android/.test(c)||screen.width>1024),f);case 3:return getCorrectValueAccordingToCondition(/android/.test(c)&&screen.width<=1024,f);case 4:return getCorrectValueAccordingToCondition(/win/.test(m)||/win/.test(c),f);case 5:return getCorrectValueAccordingToCondition((/mac/.test(m)||/mac/.test(c))&&!/iphone|ipod|ipad/.test(c),f);case 35:return getCorrectValueAccordingToCondition(/linux/.test(m)||/linux/.test(c),f);default:return!1}case"_Date":var g=new Date,h=0;switch("undefined"!=typeof t.parameter&&1==t.parameter&&(h=60*(new Date).getTimezoneOffset()*1e3),t.selectMethod){case"after":return g>=new Date(1e3*parseInt(t.selectParameter)+h);case"before":return g<=new Date(1e3*parseInt(t.selectParameter2)+h);case"between":return g>=new Date(1e3*parseInt(t.selectParameter)+h)&&g<=new Date(1e3*parseInt(t.selectParameter2)+h);default:return!1}case"_WeekDay":var g=new Date;return"undefined"!=typeof t.selectParameter&&1==t.selectParameter?g.getDay()===t.parameter:(g.setTime(g.getTime()+60*g.getTimezoneOffset()*1e3+60*t.timeZoneOffset*60*1e3),t.parameter==g.getDay());case"_TimeOfDay":var g=r(new Date),h=0;"undefined"!=typeof t.parameter&&1==t.parameter&&(h=60*(new Date).getTimezoneOffset()*1e3);var v=r(new Date(1e3*parseInt(t.selectParameter)+h)),y=r(new Date(1e3*parseInt(t.selectParameter2)+h));return y>=g&&g>=v;case"_Evaluator":var D,o=t.selectParameter;switch(D=DYO.safeEval(t.jsCode),t.selectMethod){case"equals":return D==o;case"not_equals":return D!=o;case"contains":return"string"==typeof D&&-1!=D.indexOf(o);default:return!1}case"_HasCustomUserData":return"undefined"!=typeof window.DY.cud&&"undefined"!=typeof window.DY.cud[t.parameter]&&(n.cud=window.DY.cud[t.parameter]||!0);case"_VisitorType":var x=null!=DYO.StorageUtils.get("_dyfs",["cookieStorage","sessionStorage"])?!0:null==DYO.StorageUtils.get("_dyid",["cookieStorage","sessionStorage"]);return t.parameter?x:!x;case"_CookieParam":if(!(t.selectParameter&&t.selectParameter2&&t.selectMethod))return!1;var O=DYO.StorageUtils.get(t.selectParameter,["cookieStorage","sessionStorage"]);if(!O)return"not_equals"===t.selectMethod||"Not_exists"===t.selectMethod;var w=t.selectParameter2;switch(t.selectMethod){case"equals":return O==w;case"not_equals":return O!=w;case"contains":return-1!=O.indexOf(w);case"regexp":var u=new RegExp(w);return u.test(O);case"pair_bigger":return!isNaN(w)&&!isNaN(O)&&Number(O)>Number(w);case"pair_smaller":return!isNaN(w)&&!isNaN(O)&&Number(O)<Number(w);case"pair_eq_bigger":return!isNaN(w)&&!isNaN(O)&&Number(O)>=Number(w);case"pair_eq_smaller":return!isNaN(w)&&!isNaN(O)&&Number(O)<=Number(w);case"Exists":return O&&""!=O;default:return!1}case"_URLParam":if(!(t.selectParameter&&t.selectParameter2&&t.selectMethod))return!1;var S=location.search.split(t.selectParameter+"=")[1],w=t.selectParameter2;if(!S)return"not_equals"===t.selectMethod||"Not_exists"===t.selectMethod;switch(t.selectMethod){case"equals":return S==w;case"not_equals":return S!=w;case"contains":return-1!=S.indexOf(w);case"regexp":var u=new RegExp(w);return u.test(S);case"pair_bigger":return!isNaN(w)&&!isNaN(S)&&Number(S)>Number(w);case"pair_smaller":return!isNaN(w)&&!isNaN(S)&&Number(S)<Number(w);case"pair_eq_bigger":return!isNaN(w)&&!isNaN(S)&&Number(S)>=Number(w);case"pair_eq_smaller":return!isNaN(w)&&!isNaN(S)&&Number(S)<=Number(w);case"Exists":return O&&""!=O;default:return!1}case"_Random":return 100*Math.random()<parseFloat(t.selectParameter);default:return!1}}catch(Y){return!1}}function referrerMatching(e){var t=document.referrer;switch(t=null!=t&&"undefined"!=typeof t&&""!=t?t.split("/")[2]:"",t=t.toLowerCase(),e.selectMethod){case"equals":case"not_equals":t==e.selectParameter.toLowerCase()&&chcValue++;break;case"contains":-1!=t.indexOf(e.selectParameter.toLowerCase())&&chcValue++}}function getCorrectValueAccordingToCondition(e,t){return t?e:!e}function isInAudience(e,t,n,r){var i={};if("undefined"==typeof t||"undefined"==typeof n){var o=Cookies.loadCHCCookies();t=o.tchc,n=o.chc}if("undefined"==typeof r&&(r=Cookies.loadSessionCookies().schc),"number"==typeof e){for(var a in DY.audienceRules)if("undefined"!=typeof DY.audienceRules[a]&&"undefined"!=typeof DY.audienceRules[a].audience&&DY.audienceRules[a].audience==e){e=DY.audienceRules[a];break}if("number"==typeof e)return!1}for(var s=!0,u=0;u<e.rule.length;u++)if("undefined"!=typeof e.rule[u]&&"undefined"!=typeof e.rule[u].condType&&"undefined"!=typeof e.rule[u].conds){for(var l=!1,c=0;c<e.rule[u].conds.length;c++){var d=e.rule[u].conds[c];if("_"===e.rule[u].condType.charAt(0)||"Audience"===e.rule[u].condType)l=matchNow(e.rule[u].condType,d,i);else{if("undefined"==typeof d||"undefined"==typeof d.id||"undefined"==typeof d.hitCountMethod||"undefined"==typeof d.hitCount)continue;
var p=e.session?r[d.id]||0:(parseInt(n[d.id])||0)+parseInt(t[d.id]||0);switch("Referrer"==e.rule[u].condType&&referrerMatching(d)&&p++,d.hitCountMethod){case"=":l=p==d.hitCount;break;case">=":l=p>=d.hitCount;break;case"<=":l=p<=d.hitCount;break;case">":l=p>d.hitCount;break;case"<":l=p<d.hitCount;break;default:l=!1}}if(l)break}if(!l){s=!1;break}}if(s&&"undefined"!=typeof i.cud){var f=new Array;for(k in i.cud)f.push({paramName:k,paramValue:i.cud[k]});DYO.setRemoteParameters(f)}return s}function loadExternalResources(e){var t,n=document.getElementsByTagName("head")[0];if(e&&e.css)for(var r=0;r<e.css.length;r++)t=document.createElement("link"),t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e.css[r]),n.appendChild(t);if(e&&e.js)for(var r=0;r<e.js.length;r++)t=document.createElement("script"),t.setAttribute("type","text/javascript"),t.setAttribute("src",e.js[r]),n.appendChild(t)}function compileExternalResources(e){var t=[];if(e&&e.css)for(var n=0;n<e.css.length;n++)t.push('<link rel="stylesheet" type="text/css" href="'+e.css[n]+'" />');if(e&&e.js)for(var n=0;n<e.js.length;n++)t.push('<script type="text/javascript" src="'+e.js[n]+'"></script>');return t.join("\n")}function renderVariation(tagId,object,unitClass,varName,asPureHTML){if("undefined"==typeof object.variations[varName])throw{type:"invalid position",vari:varName};var variation=object.variations[varName],element,callback;Params.initParams(variation.params);var htmlCode=Params.searchAndReplace("html",variation.htmlCode),cssCode=Params.searchAndReplace("css",variation.cssCode),jsCode=Params.searchAndReplace("js",variation.jsCode),externalResources={};try{externalResources=DYJSON.parse(decodeURIComponent(variation.resources))}catch(e){}var userAgent=navigator.userAgent.toLowerCase(),oldBrowser=!1;switch(parseFloat((userAgent.match(/msie ([0-9]{1,}[\.0-9]{0,})/)||[])[1])<9&&(oldBrowser=!0),styleCode='<style type="text/css">',styleCode+=cssCode,styleCode+="</style>",variation.renderType){case"html":if(asPureHTML)element=document.createElement("div"),element.className=unitClass,element.innerHTML=oldBrowser?htmlCode+styleCode:styleCode+htmlCode,loadExternalResources(externalResources),callback=function(){eval("try{(function(){"+jsCode+"\n})();}catch(e){}")};else{element=document.createElement("iframe"),element.className=unitClass,element.setAttribute("scrolling","no"),element.setAttribute("marginwidth","0"),element.setAttribute("marginheight","0"),element.setAttribute("vspace","0"),element.setAttribute("hspace","0"),element.setAttribute("frameborder","0"),element.setAttribute("frameBorder","0"),element.setAttribute("style","overflow:hidden;background-color:#ffffff;border:0;width:"+object.width+"px;height:"+object.height+"px;"),element.setAttribute("width",object.width),element.setAttribute("height",object.height);var bodyStyle="margin:0;position: absolute;";bodyStyle+="width:"+object.width+"px;",bodyStyle+="height:"+object.height+"px;";var source="<!DOCTYPE html><html><head>";source+=compileExternalResources(externalResources),oldBrowser||(source+=styleCode),source+='</head><body style="'+bodyStyle+'">',source+=htmlCode,source+='<script type="text/javascript">',source+=jsCode,source+="</script>",oldBrowser&&(source+=styleCode),source+="</body></html>",callback=function(){element.contentWindow.document.open(),element.contentWindow.document.write(source),element.contentWindow.document.close()}}break;case"image":element=document.createElement("div"),element.className=unitClass;var imgHtml='<img src="'+variation.imageUrl+'" width="'+object.width+'" height="'+object.height+'" style="border:none;z-index:10000;" />',imgLink=variation.imageLink;"undefined"!=typeof variation.imageLink&&null!=variation.imageLink&&""!=variation.imageLink&&("undefined"!=typeof DYO.redirects[tagId]&&""!=DYO.redirects[tagId]&&(imgLink=DYO.redirects[tagId]+imgLink),imgHtml='<a href="'+imgLink+'" target="'+variation.imageLinkTarget+'">'+imgHtml+"</a>"),element.innerHTML=imgHtml,callback=function(){};break;case"flash":var hasLinkThrough=!1,clickTAG="";element=document.createElement("div"),element.className=unitClass;var flashLink=variation.imageLink;"undefined"!=typeof variation.imageLink&&null!=variation.imageLink&&""!=variation.imageLink&&(hasLinkThrough=!0),hasLinkThrough&&("undefined"!=typeof DYO.redirects[tagId]&&""!=DYO.redirects[tagId]&&(flashLink=DYO.redirects[tagId]+flashLink),clickTAG="clickTAG="+escape(flashLink));var flashHtml='  <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+object.width+'" height="'+object.height+'" id="dyFlashContent">    <param name="movie" value="'+variation.imageUrl+"?"+clickTAG+'">    <param name="wmode" value="transparent">    <param name="quality" value="autohigh">    <!--[if !IE]>-->    <object type="application/x-shockwave-flash" data="'+variation.imageUrl+"?"+clickTAG+'" width="'+object.width+'" height="'+object.height+'">';flashHtml+="undefined"!=typeof variation.backupImageUrl&&""!=variation.backupImageUrl?'    <img src="'+variation.backupImageUrl+'" alt="Get Adobe Flash player" />':'      <a href="//www.adobe.com/go/getflashplayer">        <img src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />      </a>',flashHtml+="      <!--[if !IE]>-->    </object>    <!--<![endif]-->  </object>",hasLinkThrough&&(flashHtml='<a href="'+flashLink+'" target="'+variation.imageLinkTarget+'">'+flashHtml+"</a>"),element.innerHTML=flashHtml,callback=function(){};break;default:throw{code:0,tag:tagId,msg:'unsupported render type "'+variation.renderType+'" for Smart Tag '+tagId+" in Smart Object "+object.id+' in variation "'+varName+'"'}}return{element:element,callback:callback}}function waitForGeoCode(e){function t(){"undefined"==typeof window.DY.geoCode?setTimeout(t,100):e()}if(window.DY=window.DY||{},"undefined"!=typeof window.DY.geoCode)return e();var n=DYO.StorageUtils.get("_dy_geo",["cookieStorage","sessionStorage"]);if(null!==n){var r=n.split(".");return window.DY.geoCode=r[0],r.length>1&&(window.DY.geoCont=r[1],window.DY.geoRegionCode=r[2],window.DY.geoCity=r[3]),e()}if(n=DYO.StorageUtils.get("DYGEO",["cookieStorage","sessionStorage"]),null!==n){var r=n.split(".");return window.DY.geoCode=r[0],r.length>1&&(window.DY.geoCont=r[1],window.DY.geoRegionCode=r[2],window.DY.geoCity=r[3]),e()}if(!geoCodeRequestPending){geoCodeRequestPending=!0;var i=document.createElement("script");i.type="text/javascript",i.src="//px.dynamicyield.com/geo?jsonp";var o=document.getElementsByTagName("script"),a=o[o.length-1];a.parentElement.appendChild(i)}t()}function isDyReady(){return window.DY&&window.DY.Audiences&&window.DY.Audiences.getUserAudiences()&&!0}function waitOnceForDyReady(e,t){"undefined"==typeof t&&(t=20),isDyReady()?e():0==t?setTimeout(e,100):setTimeout(function(){waitOnceForDyReady(e,t-1)},100)}function callForForceFetchSmartTag(e,t){try{var n;window.XDomainRequest?(n=new XDomainRequest,n.CacheControl="no-cache",n.onerror=function(){},n.ontimeout=function(){},n.onprogress=function(){}):n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){4===n.readyState&&t&&t(n)},n.open("GET",e,!0),n.send()}catch(r){}}function executeSmartAction(e,t,n){var r=(DYO.StorageUtils.get("_dy_sact",["cookieStorage","localStorage"])||"").split("*"),i={};if(function(){for(var e=0;e<r.length;e++){var t=r[e].split(".");if(2===t.length){var n=parseInt(t[0]);if(!isNaN(n)){var o=parseInt(t[1]);if(!isNaN(o)){var a;try{a=DYO.otags[n].rules[0].smartObject.frequency}catch(s){a=0/0}o+a>(new Date).getTime()/1e3&&(i[n]=o)}}}}}(),"undefined"==typeof i[e]&&isInAudience({rule:t.ruleDisjs,session:!0})){var o="dy_unit dy_smart_object_"+t.smartObject.id;if(t.smartObject.objectType==DYO.ACTION_TYPES.OVERLAY&&!n.value)return;var a=DYO.chooseMultipleVariations(t.smartObject.experiment,1)[0],s=DYO.getCurrentVersionDataStr(t.smartObject.experiment),u=t.smartObject.variations[a.name],l=null;if("undefined"!=typeof u.isDoNothingCg&&u.isDoNothingCg){i[e]=parseInt((new Date).getTime()/1e3);var c=t.smartObject.experiment,d=a.id,p=s,f=DYO.Props.getCurrentAttributionProps(DYO.oexps[c]);l=function(){"undefined"==typeof window.DY.ServerUtil.logVariation_new?window.DY.ServerUtil.logVariation("ri",c,[d],!1,!1,p):window.DY.ServerUtil.logVariation_new("ri",c,[d],f,p)}}else switch(Params.initParams(u.params),t.smartObject.objectType){case DYO.ACTION_TYPES.OVERLAY:!function(){try{if(n.value){n.value=!1;var r=renderVariation(e,t.smartObject,o,a.name,!0,!0),u={position:t.smartObject.position,background:t.smartObject.background,opacity:t.smartObject.opacity,delay:t.smartObject.delay,duration:t.smartObject.duration,closing:t.smartObject.closing},c=t.smartObject.experiment,d=a.id,p=s,f=DYO.Props.getCurrentAttributionProps(DYO.oexps[c]),m=r.callback;r.callback=function(){"undefined"==typeof window.DY.AdDetection.markExpUnit_new?window.DY.AdDetection.markExpUnit(r.element,c,d,!1,!1,p):window.DY.AdDetection.markExpUnit_new(r.element,c,d,!1,p,void 0,f),m()},l=function(){window.DY.WindowActions.overlay(r,u)},i[e]=parseInt((new Date).getTime()/1e3)}}catch(g){n.value||(n.value=!0)}}();break;case DYO.ACTION_TYPES.NOTIFICATION:!function(){try{var n=renderVariation(e,t.smartObject,o,a.name,!0,!0),r={position:t.smartObject.position,delay:t.smartObject.delay,duration:t.smartObject.duration},u=t.smartObject.experiment,c=a.id,d=s,p=DYO.Props.getCurrentAttributionProps(DYO.oexps[u]),f=n.callback;n.callback=function(){"undefined"==typeof window.DY.AdDetection.markExpUnit_new?window.DY.AdDetection.markExpUnit(n.element,u,c,!1,!1,d):window.DY.AdDetection.markExpUnit_new(n.element,u,c,!1,d,void 0,p),f()},l=function(){window.DY.WindowActions.notify(n,r)},i[e]=parseInt((new Date).getTime()/1e3)}catch(m){}}();break;case DYO.ACTION_TYPES.JAVASCRIPT:!function(){try{var n=t.smartObject.experiment,r=a.id,o=s,c=DYO.Props.getCurrentAttributionProps(DYO.oexps[n]),d={};try{d=DYJSON.parse(decodeURIComponent(u.resources))}catch(p){}loadExternalResources(d),DYO.safeEval("(function(){"+Params.searchAndReplace("js",u.jsCode)+"\n})();"),i[e]=parseInt((new Date).getTime()/1e3)}catch(f){}l=function(){"undefined"==typeof window.DY.ServerUtil.logVariation_new?window.DY.ServerUtil.logVariation("ri",n,[r],!1,!1,o):window.DY.ServerUtil.logVariation_new("ri",n,[r],c,o)}}()}null!=l&&window.DY.API("callback",l)}r=[];for(var e in i)r.push(e+"."+i[e]);r.length>0?DYO.StorageUtils.set("_dy_sact",r.join("*"),["cookieStorage","localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain(),expire:365}):DYO.StorageUtils.remove("_dy_sact",["cookieStorage","localStorage"],{domain:DYO.StorageUtils.getSecondLevelDomain()})}function loadBookmarklet(){document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(document.createElement("script")).src="//api.dynamicyield.com/preview/bookmarklet.js"})}var geoCodeRequestPending=!1,Cookies=function(){function e(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}function t(t){for(var n=e(t.split(".")),r={},i=0;i<n.length;i++){var o=n[i].split("@");r[o[0]]="nu"==o[1]?null:o[1]}return r}function n(){var n=DYO.StorageUtils.get(i,["cookieStorage","localStorage"]);return null==n?{sauds:[],schc:{},saudCache:{}}:(n=n.split("*"),{auds:e(n[0].split(".")),tchc:t(n[1]),chc:t(n[2]),audCache:t(n[3])})}function r(){var n=DYO.StorageUtils.get(o,["cookieStorage","sessionStorage"]);return null==n?{sauds:[],schc:{},saudCache:{}}:(n=n.split("*"),{sauds:e(n[0].split(".")),schc:t(n[1]),saudCache:t(n[2])})}var i="_dyaud_nchc",o="_dyaud_sess";return{loadCHCCookies:n,loadSessionCookies:r}}(),Params=function(){function e(e,t,n){i[e][t]=n}function t(e){o={html:{},css:{},js:{}},"undefined"!=typeof e&&null!=e&&""!=e&&(o=DYJSON.parse(decodeURIComponent(e)))}function n(e,t){t=decodeURIComponent(t);for(var n in o[e])if(o[e].hasOwnProperty(n)){var a=i[e][n],s="";s=null!=a&&"undefined"!=typeof a&&""!=a?a:unescape(o[e][n].value);var u=new RegExp(r(n),"gm");t=t.replace(u,s.replace("$","$$$$"))}return t}function r(e){return"\\$(ext|img|image|select|unique|)\\{\\s*"+e.replace(/\ /g,"\\ ")+"(?:\\s*,\\s*(?:\\d+|{[^}]+})\\s*)?\\s*\\}"}var i={html:{},css:{},js:{}},o={html:{},css:{},js:{}};return{initParams:t,searchAndReplace:n,setParam:e}}();DYO.setRemoteParameters=function(e){try{for(var t=0;t<e.length;t++)"undefined"!=typeof e[t]&&"undefined"!=typeof e[t].paramName&&("undefined"==typeof e[t].paramType?(DYO.setRemoteParameter("html",e[t].paramName,e[t].paramValue),DYO.setRemoteParameter("css",e[t].paramName,e[t].paramValue),DYO.setRemoteParameter("js",e[t].paramName,e[t].paramValue)):DYO.setRemoteParameter(e[t].paramType,e[t].paramName,e[t].paramValue))}catch(n){}},DYO.setRemoteParameter=Params.setParam,DYO.getTagVariationProperties=function(e){var t=e;if("number"!=typeof t){for(var n in DYO.otags)if(DYO.otags[n].name==t){t=parseInt(n);break}"number"!=typeof t&&(t=parseInt(t))}var r=DYO.otags[t];if("undefined"==typeof r||null==r)return{code:0,tag:e,msg:"Smart Tag "+e+" not found"};var i=null;for(var o in r.rules)if(null==r.rules[o].ruleDisjs||isInAudience({rule:r.rules[o].ruleDisjs,session:!0})){i=r.rules[o].smartObject;break}if(null==i)throw{code:0,tag:e,msg:"no rule matched for Smart Tag "+e};var a=DYO.getVariationData(i.experiment);if("undefined"!=typeof a.value&&null!=a.value){var s=a.value.name,u=a.value.name,l=r.rules[o].smartObject.variations[a.value.name];return{code:1,tag:e,variation:{id:s,name:u,display:l}}}return{code:0,tag:e,msg:"no variation found for tag"}},DYO.redirects={},DYO.addRedirect=function(e,t){try{if("number"!=typeof e){for(var n in DYO.otags)if(DYO.otags[n].name==e){e=parseInt(n);break}"number"!=typeof e&&(e=parseInt(e))}DYO.redirects[e]=t,DYO.setRemoteParameter("html","rdclick",t),DYO.setRemoteParameter("css","rdclick",t),DYO.setRemoteParameter("js","rdclick",t)}catch(r){return{code:0,tag:e,msg:"error while executing add redirect on tag "+e,ex:r}}},DYO.smartTag=function(e,t,n,r){DYO.smartObject(e,{target:t,inline:n,afterRenderCallback:r})},DYO.smartObject=function(tagId,props){try{if("object"!=typeof props&&(props={}),props.inline!==!0&&(props.inline=!1),"number"!=typeof tagId){for(var id in DYO.otags)if(DYO.otags[id].name==tagId){tagId=parseInt(id);break}"number"!=typeof tagId&&(tagId=parseInt(tagId))}var tag=DYO.otags[tagId];if("undefined"==typeof tag||null==tag||"tag"!==tag.subType)return{code:0,tag:tagId,msg:"Smart Tag "+tagId+" not found"};if(tag.autoArchived){if(url="//st.dynamicyield.com/ffst?&smt="+tagId,null!=tag.smartObjects){url+="&exps=";for(var key in tag.smartObjects)expId=tag.smartObjects[key].experiment,url+=expId+",";url=url.substring(0,url.length-1)}return void callForForceFetchSmartTag(url,function(data){try{eval(data.response)}catch(error){console.log("Error when trying to force fetch an auto archived smart tag. smtId: "+tagId)}DYO.otags[tagId]=DYExps.otags[tagId];for(var expId in DYExps.oexps)DYO.oexps[expId]=DYExps.oexps[expId];void 0==DYO.otags[tagId].autoArchived&&DYO.smartObject(tagId,props)})}var noInsertionPoint=!0,insertionPoint;if("undefined"!=typeof props.target&&""!=props.target&&(insertionPoint=document.getElementById(props.target),"undefined"!=typeof insertionPoint&&null!=insertionPoint&&(noInsertionPoint=!1)),noInsertionPoint){var arrScripts=document.getElementsByTagName("script"),currScript=arrScripts[arrScripts.length-1];insertionPoint=currScript.parentElement}var waitForDyReady=function(e){return e()};return"undefined"!=typeof tag.hasAudRule&&tag.hasAudRule&&(waitForDyReady=waitOnceForDyReady),waitForDyReady(function(){waitForGeoCode(function(){function e(){"undefined"==typeof window.DY||"undefined"==typeof window.DY.AdDetection||"undefined"==typeof $dy||"undefined"==typeof $dy(window)||1===t.objectType&&"undefined"==typeof $dy.renderSmartTagSlider?setTimeout(e,100):o()}for(var t=null,n=0;n<tag.rules.length;n++)if(null==tag.rules[n].ruleDisjs||isInAudience({rule:tag.rules[n].ruleDisjs,session:!0})){t=tag.rules[n].smartObject;break}if(null==t)throw{code:0,tag:tagId,msg:"no rule matched for Smart Tag "+tagId};var r,i,o,a=t.slideCount;("undefined"==typeof a||null==a||0==a)&&(a=Object.keys(t.variations).length);var s=t.autoScrollSpeed;("undefined"==typeof s||null==s||0==s)&&(s=0);var u="dy_unit dy_smart_object_"+t.id,l=new Array;if(t.objectType)if("undefined"==typeof t.pinnedVariation)l=DYO.chooseMultipleVariations(t.experiment,a);else if(a>1){if(l=DYO.getDynamicVariations(t.experiment,DYO.Props.expProgVersionData(DYO.oexps[t.experiment])),null==l||l.length!=a||l[0].id!=t.pinnedVariation.id){l=DYO.chooseMultipleVariations(t.experiment,a-1),l.unshift(t.pinnedVariation);for(var c=new Array,d=0;d<l.length;d++)c.push(l[d].id+":"+l[d].name);DYO.setVariations(t.experiment,DYO.Props.expProgVersionData(DYO.oexps[t.experiment]),c)}}else{if(l=DYO.getDynamicVariations(t.experiment,DYO.Props.expProgVersionData(DYO.oexps[t.experiment])),null==l||1!=l.length||l[0].id!=t.pinnedVariation.id){var c=new Array;c.push(t.pinnedVariation.id+":"+t.pinnedVariation.name),DYO.setVariations(t.experiment,DYO.Props.expProgVersionData(DYO.oexps[t.experiment]),c)}l=new Array,l.push(t.pinnedVariation)}try{switch(t.objectType){case 0:var p=DYO.chooseVariation(t.experiment);if("undefined"==typeof DYO.oexps[t.experiment]||"undefined"==typeof DYO.oexps[t.experiment].variations[p])throw{type:"invalid position",vari:p};var f=DYO.oexps[t.experiment].variations[p].name,m=renderVariation(tagId,t,u,f,props.inline);r=m.element,i=m.callback;var g=DYO.getCurrentVersionDataStr(t.experiment),h=DYO.Props.getCurrentAttributionProps(DYO.oexps[t.experiment]);o=function(){var e=t.experiment,n=DYO.oexps[t.experiment].variations[p].id;t.variations[f].doNotMarkUnit!==!0?"undefined"==typeof window.DY.AdDetection.markExpUnit_new?window.DY.AdDetection.markExpUnit(r,e,n,!1,!1,g):window.DY.AdDetection.markExpUnit_new(r,e,n,!1,g,void 0,h):"undefined"==typeof window.DY.ServerUtil.logVariation_new?window.DY.ServerUtil.logVariation("ri",e,[n],!1,!1,g):window.DY.ServerUtil.logVariation_new("ri",e,[n],h,g)};break;case 1:r=document.createElement("div"),r.className=u,i=function(){};for(var v=function(){},y=[],D=0;D<l.length;D++){var m=renderVariation(tagId,t,"",l[D].name,props.inline);!function(){var e=v,t=m.callback;v=function(){e(),t()}}(),y.push({element:m.element,variation:l[D].id})}var g=DYO.getCurrentVersionDataStr(t.experiment),h=DYO.Props.getCurrentAttributionProps(DYO.oexps[t.experiment]);o=function(){$dy.renderSmartTagSlider(r,{expId:t.experiment,width:t.width,height:t.height,scrollSpeed:s,versionDataStr:g,attributionProps:h},y),v()};break;case 2:r=document.createElement("div"),i=function(){};for(var x=[],D=0;D<l.length;D++){var m=renderVariation(tagId,t,u+"_"+l[D].id,l[D].name,props.inline);if(r.appendChild(m.element),function(){var e=i,t=m.callback;i=function(){e(),t()}}(),x.push({element:m.element,variation:l[D]}),D+1<l.length){var O=document.createElement("div");O.innerHTML=decodeURIComponent(t.htmlSeparator);for(var w=0;w<O.childNodes.length;w++)r.appendChild(O.childNodes[w])}}var g=DYO.getCurrentVersionDataStr(t.experiment),h=DYO.Props.getCurrentAttributionProps(DYO.oexps[t.experiment]);o=function(){for(var e=0;e<x.length;e++){var n=t.experiment;t.variations[x[e].variation.name].doNotMarkUnit!==!0?"undefined"==typeof window.DY.AdDetection.markExpUnit_new?window.DY.AdDetection.markExpUnit(x[e].element,n,x[e].variation.id,!0,!1,g,e):window.DY.AdDetection.markExpUnit_new(x[e].element,n,x[e].variation.id,!0,g,e,h):"undefined"==typeof window.DY.ServerUtil.logVariation_new?window.DY.ServerUtil.logVariation("ri",n,[x[e].variation.id],!1,!1,g):window.DY.ServerUtil.logVariation_new("ri",n,[x[e].variation.id],h,g)}window.DY.AdDetection.ne()};break;default:throw{code:0,tag:tagId,msg:'unsupported object type "'+t.objectType+'" for Smart Tag '+tagId+" in Smart Object "+t.id}}}catch(S){throw"invalid position"==S.type?{code:0,tag:tagId,msg:'invalid variation position "'+S.vari+'" for Smart Tag '+tagId+" in Smart Object "+t.id}:S}noInsertionPoint||(insertionPoint.innerHTML=""),insertionPoint.appendChild(r),i(),"function"==typeof props.afterRenderCallback&&props.afterRenderCallback(),e()})}),{code:1,tag:tagId,msg:"executing make Smart Tag on tag "+tagId}}catch(e){return{code:0,tag:tagId,msg:"error while executing make Smart Tag on tag "+tagId,ex:e}}},DYO.ACTION_TYPES={OVERLAY:3,NOTIFICATION:4,JAVASCRIPT:5},DYO.executeSmartActions=function(e){try{e&&window.DY.API("sub",{on:"dy-pageview",callback:function(){DYO.executeSmartActions(!1)}})}catch(t){}try{var n={value:!0};for(var r in DYO.otags)try{if("action"!==DYO.otags[r].subType)continue;if(!e&&DYO.otags[r].isSPACompat!==!0)continue;!function(){var e=r,t=DYO.otags[r].rules[0];DYO.PageEvents.executeWithPageEvents(t.ruleDisjs,function(r){t.ruleDisjs=r;for(var i=function(e){return e()},o=0;o<r.length;o++)if("_Country"===r[o].condType||"_Continent"===r[o].condType||"_Region"===r[o].condType||"_City"===r[o].condType){i=waitForGeoCode;break}i(function(){executeSmartAction(e,t,n)})})}()}catch(t){DYO.d&&console.log({code:0,actionId:r,msg:"error while executing Smart Action "+r,ex:t})}return{code:1,msg:"executed Smart Actions"}}catch(t){return{code:0,msg:"error while executing Smart Actions",ex:t}}return{code:1,msg:"executed Smart Actions"}},DYO.renderSmartObjectVariation=function(e,t,n,r,i){try{if(i=i||{},"number"!=typeof e){for(var o in DYO.otags)if(DYO.otags[o].name==e){e=parseInt(o);break}"number"!=typeof e&&(e=parseInt(e))}var a=DYO.otags[e];if("undefined"==typeof a||null==a)return{code:0,tag:e,msg:"Smart Tag "+e+" not found"};var s=a.rules[n].smartObject,u="";switch(s.objectType){case 0:case 3:case 4:case 5:u="dy_unit dy_smart_object_"+s.id;break;case 1:u="";break;case 2:u="dy_unit dy_smart_object_"+s.id;break;default:throw{code:0,tag:e,msg:'unsupported object type "'+s.objectType+'" for Smart Tag '+e+" in Smart Object "+s.id}}var l=renderVariation(e,s,u,r.id,i.inline);return{el:l.element,cb:l.callback}}catch(c){return{code:0,tag:e,msg:"error while executing make Smart Tag on tag "+e,ex:c}}},DYO.smartPlacement=function(e,t){try{var n;if(!t.target)throw"Illegal call to smartPlacement, no target is defined";for(var r in DYO.otags)for(var i=0;i<DYO.otags[r].placements.length;i++)if(DYO.otags[r].placements[i]==e){n=parseInt(r);break}if(!n)throw"Couldn't find object id for placement: "+e;DYO.smartObject(n,t)}catch(o){return{code:0,placement:e,msg:"error while executing placement on placement id: "+e,ex:o}}};try{-1!==location.href.indexOf("__dy__open_bookmarklet=true")&&loadBookmarklet()}catch(ignore){}}(),"object"!=typeof DYJSON&&(DYJSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toDYJSON&&(u=u.toDYJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)a[n]=str(n,u)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toDYJSON&&(Date.prototype.toDYJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toDYJSON=Number.prototype.toDYJSON=Boolean.prototype.toDYJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof DYJSON.stringify&&(DYJSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"undefined"!=typeof JSON&&"function"==typeof JSON.parse&&(DYJSON.parse=JSON.parse),"function"!=typeof DYJSON.parse&&(DYJSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),"undefined"!=typeof window.DY.ssae&&window.DY.ssae||DYO.ready===!0&&(window.DY.ssae=!0,DYO.executeSmartActions(!0));