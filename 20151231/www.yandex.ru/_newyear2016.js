!function(c){if("undefined"==typeof c.ya&&(c.ya={}),"undefined"==typeof c.ya.speechkit&&(c.ya.speechkit={}),c.ya.speechkit.AudioContext=window.AudioContext||window.webkitAudioContext,"undefined"==typeof c.ya.speechkit.settings){var b=document.createElement("script");b.type="text/javascript",b.src="https://yastatic.net/covers/newyear2016/_settings.js",document.head.appendChild(b)}c.ya.speechkit.FORMAT={PCM8:{format:"pcm",sampleRate:8000,mime:"audio/x-pcm;bit=16;rate=8000",bufferSize:1024},PCM16:{format:"pcm",sampleRate:16000,mime:"audio/x-pcm;bit=16;rate=16000",bufferSize:2048},PCM44:{format:"pcm",sampleRate:44100,mime:"audio/x-pcm;bit=16;rate=44100",bufferSize:4096}},c.ya.speechkit._stream=null,c.ya.speechkit._extend=function(e,d){var f,h=Object.prototype.toString,g="[object Array]";e=e||{};for(f in d){d.hasOwnProperty(f)&&("object"==typeof d[f]?(e[f]=h.call(d[f])===g?[]:{},c.ya.speechkit._extend(e[f],d[f])):("undefined"!=typeof d[f]||"undefined"==typeof e[f])&&(e[f]=d[f]))}return e};var a=function(){return c.ya.speechkit._stream?this instanceof a?(this.worker=c.ya.speechkit.newWorker(),this.recording=!1,this.paused=!1,this.lastDataOnPause=0,this.nullsArray=[],this.currCallback=null,this.buffCallback=null,this.startCallback=null,void (this.worker.onmessage=function(f){if("int16stream"==f.data.command){var d=f.data.buffer;this.startCallback&&this.startCallback(d)}else{"getBuffers"==f.data.command&&this.buffCallback?this.buffCallback(f.data.blob):"clear"==f.data.command&&this.currCallback?this.currCallback():this.currCallback&&this.currCallback(f.data.blob)}}.bind(this))):new a:null};a.prototype={_createNode:function(d){c.ya.speechkit.audiocontext||(c.ya.speechkit.audiocontext=new c.ya.speechkit.AudioContext),this.audioInput=c.ya.speechkit.audiocontext.createMediaStreamSource(c.ya.speechkit._stream),c.ya.speechkit.audiocontext.createScriptProcessor?this.node=c.ya.speechkit.audiocontext.createScriptProcessor(d.bufferSize,2,2):this.node=c.ya.speechkit.audiocontext.createJavaScriptNode(d.bufferSize,2,2),this.audioInput.connect(this.node),this.node.onaudioprocess=function(f){this.recording&&(this.paused?Number(new Date)-this.lastDataOnPause>2000&&(this.lastDataOnPause=Number(new Date),this.worker.postMessage({command:"record",buffer:[this.nullsArray,this.nullsArray]})):this.worker.postMessage({command:"record",buffer:[f.inputBuffer.getChannelData(0),f.inputBuffer.getChannelData(1)]}))}.bind(this),this.node.connect(c.ya.speechkit.audiocontext.destination)},pause:function(){this.paused=!0,this.lastDataOnPause=Number(new Date)},getAudioContext:function(){return c.ya.speechkit.audiocontext},getAnalyserNode:function(){c.ya.speechkit.audiocontext||(c.ya.speechkit.audiocontext=new c.ya.speechkit.AudioContext);var d=c.ya.speechkit.audiocontext.createAnalyser();return d.fftSize=2048,this.audioInput.connect(d),d},isPaused:function(){return this.paused},start:function(e,d){var f=this;if(!c.ya.speechkit._stream){return c.ya.speechkit.initRecorder(function(){f.start(e,d)},console.log)}if(this.node||this._createNode(d),this.isPaused()){return void (this.paused=!1)}"undefined"!=typeof e?this.startCallback=e:this.startCallback=null,this.worker.postMessage({command:"init",config:{sampleRate:c.ya.speechkit.audiocontext.sampleRate,format:d||c.ya.speechkit.FORMAT.PCM16,channels:this.channelCount}}),this.nullsArray=[];for(var h=(d||c.ya.speechkit.FORMAT.PCM16).bufferSize,g=0;h>g;g++){this.nullsArray.push(0)}this.clear(function(){this.recording=!0}.bind(this))},stop:function(e,d){this.recording=!1,this.node&&this.node.disconnect(),this.node=null,c.ya.speechkit._stream&&"undefined"!=typeof c.ya.speechkit._stream.stop&&c.ya.speechkit._stream.stop(),c.ya.speechkit._stream=null,"undefined"!=typeof c.ya.speechkit.audiocontext&&null!==c.ya.speechkit.audiocontext&&"undefined"!=typeof c.ya.speechkit.audiocontext.close&&(c.ya.speechkit.audiocontext.close(),c.ya.speechkit.audiocontext=null),"undefined"!=typeof e&&this.exportWav(function(f){e(f)},d||2)},isRecording:function(){return this.recording},clear:function(d){"undefined"!=typeof d?this.currCallback=d:this.currCallback=null,this.worker.postMessage({command:"clear"})},getBuffers:function(d){"undefined"!=typeof d?this.buffCallback=d:this.buffCallback=null,this.worker.postMessage({command:"getBuffers"})},exportWav:function(h,f){"undefined"!=typeof h?this.currCallback=h:this.currCallback=null;var d="audio/wav";if(!this.currCallback){throw new Error("Callback not set")}var g="export"+(2!=f&&"Mono"||"")+"WAV";this.worker.postMessage({command:g,type:d})}},c.ya.speechkit.Recorder=a,c.ya.speechkit.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.webkitGetUserMedia,c.ya.speechkit.mediaDevices=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices:c.ya.speechkit.getUserMedia?{getUserMedia:function(d){return new Promise(function(e,f){c.ya.speechkit.getUserMedia.call(navigator,d,e,f)})}}:null,c.ya.speechkit._stream=null,c.ya.speechkit.audiocontext=null,c.ya.speechkit.initRecorder=function(e,d){var f=function(g){c.ya.speechkit._stream=null,"undefined"!=typeof d&&d(g)};c.ya.speechkit.mediaDevices?c.ya.speechkit.mediaDevices.getUserMedia({audio:!0}).then(function(g){c.ya.speechkit._stream=g,"undefined"!=typeof e&&e()})["catch"](function(g){f(g.message||g.name||g)}):f("Your browser doesn't support Web Audio API. Please, use Yandex.Browser: https://browser.yandex.ru")},c.ya.speechkit.isLanguageSupported=function(d){return c.ya.speechkit.settings.langWhitelist.indexOf(d)>=0?c.ya.speechkit.isSupported():c.ya.speechkit.isWebAudioSupported()},c.ya.speechkit.isSupported=function(){var d=navigator.userAgent.toLowerCase();return null!==c.ya.speechkit.mediaDevices&&(/mozilla|firefox/.test(d)&&!/yabrowser/.test(d)||!/iphone|ipod|ipad|android|blackberry/.test(d))},c.ya.speechkit.isWebAudioSupported=function(){var d=navigator.userAgent.toLowerCase();return"undefined"!=typeof c.webkitSpeechRecognition&&/chrome/.test(d)&&!/firefox|yabrowser|opera|opr/.test(d)}}(this),function(c){function b(j){var f=window.URL||window.webkitURL,d=window.Blob,g=window.Worker;if(!(f&&d&&g&&j)){return null}var k=new d([j],{type:"application/javascript"}),h=new g(f.createObjectURL(k));return h}"undefined"==typeof c.ya&&(c.ya={}),"undefined"==typeof c.ya.speechkit&&(c.ya.speechkit={});var a="function iirFilter (sampleRate, cutoff, resonance, type) {    var    self    = this,            f  = [0.0, 0.0, 0.0, 0.0],            freq, damp,            prevCut, prevReso,            sin    = Math.sin,            min    = Math.min,            pow    = Math.pow;    self.cutoff = cutoff || 20000;    self.resonance = resonance || 0.1;    self.samplerate = sampleRate || 44100;    self.type = type || 0;    function calcCoeff () {            freq = 2 * sin(Math.PI * min(0.25, self.cutoff / (self.samplerate * 2)));            damp = min(2 * (1 - pow(self.resonance, 0.25)), min(2, 2 / freq - freq * 0.5));    }    self.pushSample = function (sample) {            if (prevCut !== self.cutoff || prevReso !== self.resonance){                    calcCoeff();                    prevCut = self.cutoff;                    prevReso = self.resonance;            }            f[3] = sample - damp * f[2];            f[0] = f[0] + freq * f[2];            f[1] = f[3] - f[0];            f[2] = freq * f[1] + f[2];            f[3] = sample - damp * f[2];            f[0] = f[0] + freq * f[2];            f[1] = f[3] - f[0];            f[2] = freq * f[1] + f[2];            return f[self.type];    };    self.getMix = function (type) {            return f[type || self.type];    };}var speex_loaded = false;var recLength = 0;var recBuffersL = [];var recBuffersR = [];var sampleRate;var outSampleRate;var tmp_buf = 0;var need_buf_size = 4096;var speex_converter = null;    this.onmessage = function (e) {    switch (e.data.command) {    case 'init':        init(e.data.config);        break;    case 'record':        record(e.data.buffer);        break;    case 'exportWAV':        exportWAV(e.data.type);        break;    case 'exportMonoWAV':        exportMonoWAV(e.data.type);        break;    case 'getBuffers':        getBuffers();        break;    case 'clear':        clear();        break;    }};    function init(config) {    sampleRate = config.sampleRate;    outSampleRate = config.format.sampleRate || sampleRate;    need_buf_size = config.format.bufferSize || 4096;    speex_converter = null;    /*if (config.format.format == 'speex') {        if (!speex_loaded) {            importScripts('./speex.min.js');            speex_loaded = true;        }        need_buf_size /= 16;        speex_converter = new SpeexConverter(outSampleRate);    }*/}var resample = function (inbuf) {    var speed = 1.0 * sampleRate / outSampleRate;    var l = Math.ceil(inbuf.length / speed);    var result = new Float32Array(l);    var bin = 0;    var num = 0;    var indexIn = 0;    var indexOut = 0;    for (indexOut = 1, indexIn = speed; indexOut < l - 1; indexIn += speed, indexOut++) {        var pos = Math.floor(indexIn);        var dt = indexIn - pos;        var second = (pos + 1 < inbuf.length) ? pos + 1 : inbuf.length - 1;         result[indexOut] = inbuf[pos] * (1 - dt) + inbuf[second] * dt;    }    result[0] = inbuf[0];    result[l - 1] = inbuf[inbuf.length - 1];    return result;};    function record(inputBuffer) {    if (outSampleRate == sampleRate) {        recBuffersL.push(inputBuffer[0]);        recBuffersR.push(inputBuffer[1]);        recLength += inputBuffer[0].length;            var samples = inputBuffer[0];        var buffer = new ArrayBuffer(samples.length * 2);        var view = new DataView(buffer);        floatTo16BitPCM(view, 0, samples);        this.postMessage({command: 'int16stream', buffer: buffer});    } else {        var filter0 = new iirFilter(outSampleRate, outSampleRate * 0.125, 0.0);         var filter1 = new iirFilter(outSampleRate, outSampleRate * 0.125, 0.0);         for (var i =0; i < inputBuffer[0].length; i++) {             inputBuffer[0][i] = filter0.pushSample(inputBuffer[0][i]);             inputBuffer[1][i] = filter1.pushSample(inputBuffer[1][i]);         }        var resin0 = resample(inputBuffer[0], outSampleRate, sampleRate);        var resin1 = resample(inputBuffer[1], outSampleRate, sampleRate);            recBuffersL.push(resin0);        recBuffersR.push(resin1);        recLength += resin0.length;            var result = new Int16Array(resin0.length);            for (var i = 0 ; i < resin0.length ; i++) {            result[i] = Math.floor(Math.min(Math.max((resin0[i] + resin1[i]) * 0.5, -1.0), 1.0) * 16383);        }            if (speex_converter) {            result = speex_converter.convert(result);        } else {            result = result.buffer;        }            if (!tmp_buf) {            tmp_buf = result;        } else {            var tmp = new DataView(new ArrayBuffer(tmp_buf.byteLength + result.byteLength));            tmp_buf = new DataView(tmp_buf);            result = new DataView(result);                for (i = 0; i < tmp_buf.byteLength; i++) {                tmp.setUint8(i, tmp_buf.getUint8(i));            }                for (i = 0; i < result.byteLength; i++) {                tmp.setUint8(i + tmp_buf.byteLength, result.getUint8(i));            }                tmp_buf = tmp.buffer;        }            if (tmp_buf.byteLength >= need_buf_size) {            this.postMessage({command: 'int16stream', buffer: tmp_buf});            tmp_buf = false;        }    }}    function exportWAV(type) {    var bufferL = mergeBuffers(recBuffersL, recLength);    var bufferR = mergeBuffers(recBuffersR, recLength);    var interleaved = interleave(bufferL, bufferR);    var dataview = encodeWAV(interleaved);    var audioBlob = new Blob([dataview], {type: type});        this.postMessage({command: 'exportWAV', blob: audioBlob});}    function exportMonoWAV(type) {    var bufferL = mergeBuffers(recBuffersL, recLength);    var dataview = encodeWAV(bufferL, true);    var audioBlob = new Blob([dataview], {type: type});        this.postMessage({command: 'exportMonoWAV', blob: audioBlob});}    function getBuffers() {    var buffers = [];    buffers.push(mergeBuffers(recBuffersL, recLength));    buffers.push(mergeBuffers(recBuffersR, recLength));    this.postMessage({command: 'getBuffers', blob: buffers});}    function clear() {    recLength = 0;    recBuffersL = [];    recBuffersR = [];    if (speex_converter) {        speex_converter.clear();    }    this.postMessage({command: 'clear'});}    function mergeBuffers(recBuffers, recLength) {    var result = new Float32Array(recLength);    var offset = 0;    for (var i = 0; i < recBuffers.length; i++){        result.set(recBuffers[i], offset);        offset += recBuffers[i].length;    }    return result;}    function interleave(inputL, inputR) {    var length = inputL.length + inputR.length;    var result = new Float32Array(length);        var index = 0;    var inputIndex = 0;        while (index < length){        result[index++] = inputL[inputIndex];        result[index++] = inputR[inputIndex];        inputIndex++;    }    return result;}    function floatTo16BitPCM(output, offset, input) {    for (var i = 0; i < input.length; i++, offset += 2){        var s = Math.max(-1, Math.min(1, input[i]));        output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);    }}    function writeString(view, offset, string) {    for (var i = 0; i < string.length; i++){        view.setUint8(offset + i, string.charCodeAt(i));    }}    function encodeWAV(samples, mono) {    var buffer = new ArrayBuffer(44 + samples.length * 2);    var view = new DataView(buffer);        /* RIFF identifier */    writeString(view, 0, 'RIFF');    /* file length */    view.setUint32(4, 32 + samples.length * 2, true);    /* RIFF type */    writeString(view, 8, 'WAVE');    /* format chunk identifier */    writeString(view, 12, 'fmt ');    /* format chunk length */    view.setUint32(16, 16, true);    /* sample format (raw) */    view.setUint16(20, 1, true);    /* channel count */    view.setUint16(22, mono ? 1 : 2, true);    /* sample rate */    view.setUint32(24, outSampleRate, true);    /* block align (channel count * bytes per sample) */    var block_align = mono ? 2 : 4;    /* byte rate (sample rate * block align) */    view.setUint32(28, outSampleRate * block_align, true);    /* block align (channel count * bytes per sample) */    view.setUint16(32, block_align, true);    /* bits per sample */    view.setUint16(34, 16, true);    /* data chunk identifier */    writeString(view, 36, 'data');    /* data chunk length */    view.setUint32(40, samples.length * 2, true);        floatTo16BitPCM(view, 44, samples);        return view;} ";c.ya.speechkit.newWorker=function(){return b(a)}}(this),function(b){"undefined"==typeof b.ya&&(b.ya={}),"undefined"==typeof b.ya.speechkit&&(b.ya.speechkit={});var a=function(c){return this instanceof b.ya.speechkit.Recognizer?(this.options=b.ya.speechkit._extend({apikey:b.ya.speechkit.settings.apikey,uuid:b.ya.speechkit.settings.uuid,applicationName:b.ya.speechkit.settings.applicationName,url:b.ya.speechkit.settings.websocketProtocol+b.ya.speechkit.settings.asrUrl,onInit:function(){},onResult:function(){},onError:function(){},punctuation:!0,allowStrongLanguage:!1},c),this.options.key=this.options.apikey,this.options.format=this.options.format.mime,this.sessionId=null,this.socket=null,this.buffered=[],void (this.totaldata=0)):new b.ya.speechkit.Recognizer(c)};a.prototype={_sendRaw:function(c){this.socket&&this.socket.send(c)},_sendJson:function(c){this._sendRaw(JSON.stringify({type:"message",data:c}))},start:function(){this.sessionId=null;try{this.socket=new WebSocket(this.options.url)}catch(c){return this.options.onError("Error on socket creation: "+c),void this.options.stopCallback()}this.socket.onopen=function(){this._sendJson(this.options)}.bind(this),this.socket.onmessage=function(f){var d=JSON.parse(f.data);"InitResponse"==d.type?(this.sessionId=d.data.sessionId,this.options.onInit(d.data.sessionId,d.data.code)):"AddDataResponse"==d.type?(this.options.onResult(d.data.text,d.data.uttr,d.data.merge,d.data.words),"undefined"!=typeof d.data.close&&d.data.close&&this.close()):"Error"==d.type?(this.options.onError("Session "+this.sessionId+": "+d.data),this.close()):(this.options.onError("Session "+this.sessionId+": "+d),this.close())}.bind(this),this.socket.onerror=function(d){this.options.onError("Socket error: "+d.message)}.bind(this),this.socket.onclose=function(d){}.bind(this)},addData:function(d){if(this.totaldata+=d.byteLength,!this.sessionId){return void this.buffered.push(d)}for(var c=0;c<this.buffered.length;c++){this._sendRaw(new Blob([this.buffered[c]],{type:this.options.format})),this.totaldata+=this.buffered[c].byteLength}this.buffered=[],this._sendRaw(new Blob([d],{type:this.options.format}))},finish:function(){this._sendJson({command:"finish"})},close:function(){this.options.onInit=function(){},this.options.onResult=this.options.onInit,this.options.onError=this.options.onInit,this.socket&&(this.socket.close(),this.options.stopCallback()),this.socket=null}},b.ya.speechkit.Recognizer=a}(this),function(c){function b(){}"undefined"==typeof c.ya&&(c.ya={}),"undefined"==typeof c.ya.speechkit&&(c.ya.speechkit={}),c.ya.speechkit._defaultOptions=function(){return{initCallback:b,errorCallback:b,dataCallback:b,infoCallback:b,stopCallback:b,punctuation:!1,allowStrongLanguage:!1,model:c.ya.speechkit.settings.model,applicationName:c.ya.speechkit.settings.applicationName,lang:c.ya.speechkit.settings.lang,format:c.ya.speechkit.FORMAT.PCM16,url:c.ya.speechkit.settings.websocketProtocol+c.ya.speechkit.settings.asrUrl,vad:!1,speechStart:b,speechEnd:b}};var a=function(){return this instanceof c.ya.speechkit.SpeechRecognition?(this.send=0,this.send_bytes=0,this.proc=0,this.recorder=null,this.recognizer=null,void (this.vad=null)):new c.ya.speechkit.SpeechRecognition};a.prototype={start:function(e){if(this.options=c.ya.speechkit._extend(c.ya.speechkit._extend({},c.ya.speechkit._defaultOptions()),e),c.ya.speechkit.settings.langWhitelist.indexOf(this.options.lang)>=0){null!==c.ya.speechkit._stream?this._onstart():c.ya.speechkit.initRecorder(this._onstart.bind(this),this.options.errorCallback)}else{var d=this.options.errorCallback;this.recorder=c.ya.speechkit.WebAudioRecognition(c.ya.speechkit._extend(this.options,{errorCallback:function(f){this.recorder=null,d(f)}.bind(this)})),this.recorder.start()}},_onstart:function(){this.recorder&&this.recorder.isPaused()&&this.recorder.start(),this.recognizer||(this.send=0,this.send_bytes=0,this.proc=0,this.recorder||(this.recorder=new c.ya.speechkit.Recorder,this.options.vad&&(this.vad=new c.ya.speechkit.Vad({recorder:this.recorder,speechStart:this.options.speechStart,speechEnd:this.options.speechEnd}))),this.recognizer=new c.ya.speechkit.Recognizer(c.ya.speechkit._extend(this.options,{onInit:function(f,d){this.recorder.start(function(g){this.options.vad&&this.vad&&this.vad.update(),this.send++,this.send_bytes+=g.byteLength,this.options.infoCallback({send_bytes:this.send_bytes,format:this.options.format,send_packages:this.send,processed:this.proc}),this.recognizer.addData(g)}.bind(this),this.options.format),this.options.initCallback(f,d,"yandex")}.bind(this),onResult:function(h,f,d,g){this.proc+=d,this.options.dataCallback(h,f,d,g)}.bind(this),onError:function(d){this.recorder&&this.recorder.stop(function(){this.recorder=null}.bind(this)),this.recognizer&&(this.recognizer.close(),this.recognizer=null),this.options.errorCallback(d)}.bind(this)})),this.recognizer.start())},stop:function(){this.recognizer&&this.recognizer.finish(),this.recorder&&this.recorder.stop(function(){this.recognizer=null,this.recorder=null}.bind(this))},abort:function(){this.recognizer&&this.recognizer.close(),this.recorder&&this.recorder.stop(function(){this.recognizer=null,this.recorder=null}.bind(this))},pause:function(){this.recorder&&this.recorder.pause()},isPaused:function(){return !this.recorder||this.recorder.isPaused()}},ya.speechkit.SpeechRecognition=a,c.ya.speechkit.recognize=function(e){var d=new c.ya.speechkit.SpeechRecognition,f=c.ya.speechkit._extend(c.ya.speechkit._extend({},c.ya.speechkit._defaultOptions()),e);f.doneCallback=e.doneCallback,f.dataCallback=function(h,g,i){g&&(f.doneCallback&&f.doneCallback(h),d.stop())},f.stopCallback=function(){d=null},d.start(f)}}(this),function(a){"undefined"==typeof a.ya&&(a.ya={}),"undefined"==typeof a.ya.speechkit&&(a.ya.speechkit={}),a.ya.speechkit.Spotter=function(){return this instanceof a.ya.speechkit.Spotter?(this.send=0,this.send_bytes=0,this.proc=0,this.recorder=null,this.recognizer=null,void (this.vad=null)):new a.ya.speechkit.Spotter},a.ya.speechkit.Spotter.prototype={start:function(b){this.options=a.ya.speechkit._extend(a.ya.speechkit._extend({phrases:[]},a.ya.speechkit._defaultOptions()),b),null!==a.ya.speechkit._stream?this._onstart():a.ya.speechkit.initRecorder(this._onstart.bind(this),this.options.errorCallback)},_onstart:function(){var b=this;this.recorder&&this.recorder.isPaused()&&this.recorder.start(),this.recognizer||(this.send=0,this.send_bytes=0,this.proc=0,this.recorder||(this.recorder=new a.ya.speechkit.Recorder,this.options.vad&&(this.vad=new a.ya.speechkit.Vad({recorder:this.recorder,speechStart:this.options.speechStart,speechEnd:this.options.speechEnd}))),this.recognizer=new a.ya.speechkit.Recognizer(a.ya.speechkit._extend(this.options,{onInit:function(d,c){b.recorder.start(function(f){b.options.vad&&b.vad&&b.vad.update(),b.send++,b.send_bytes+=f.byteLength,b.options.infoCallback({send_bytes:b.send_bytes,format:b.options.format,send_packages:b.send,processed:b.proc}),b.recognizer.addData(f)},b.options.format),b.options.initCallback(d,c)},onResult:function(f,c,d){b.proc+=d,b.options.dataCallback(f,c,d)},onError:function(c){b.recorder.stop(function(){}),b.recognizer.close(),b.recognizer=null,b.options.errorCallback(c)},format:this.options.format,phrases:this.options.phrases,url:a.ya.speechkit.settings.websocketProtocol+a.ya.speechkit.settings.spotterUrl})),this.recognizer.start())},stop:function(){this.recognizer&&this.recognizer.close(),this.recorder.stop(function(){this.recognizer=null,this.options.stopCallback()}.bind(this))},pause:function(){this.recorder.pause()},isPaused:function(){return !this.recorder||this.recorder.isPaused()}}}(this),function(c){"undefined"==typeof c.ya&&(c.ya={}),"undefined"==typeof c.ya.speechkit&&(c.ya.speechkit={});var b=null;c.ya.speechkit.play=function(g,f){var d=new Audio(g);d.volume=1,d.onended=f||function(){},d.play()};var a=function(d){if(!(this instanceof c.ya.speechkit.Tts)){return new c.ya.speechkit.Tts(d)}this.options=c.ya.speechkit._extend({apikey:c.ya.speechkit.settings.apikey,uuid:c.ya.speechkit.settings.uuid,url:c.ya.speechkit.settings.websocketProtocol+c.ya.speechkit.settings.ttsStreamUrl,infoCallback:function(){},errorCallback:function(f){console.log(f)}},d),this.sessionId=null,this.socket=null,this.buffered=[]};a.prototype={_sendRaw:function(d){this.socket&&this.socket.send(d)},_sendJson:function(d){this._sendRaw(JSON.stringify({type:"message",data:d}))},say:function(e,d,f){this.speak(e,c.ya.speechkit._extend(this.options,c.ya.speechkit._extend({dataCallback:function(g){var h=URL.createObjectURL(g);c.ya.speechkit.play(h,d)}},f)))},speak:function(f,e){var g=c.ya.speechkit._extend(c.ya.speechkit._extend({text:f},this.options),e);try{this.socket=new WebSocket(g.url)}catch(j){return void g.errorCallback("Error on socket creation: "+j)}var h=c.ya.speechkit.audiocontext||new c.ya.speechkit.AudioContext;c.ya.speechkit.audiocontext=h,this.socket.onopen=function(){this._sendJson(g)}.bind(this);var d=[];this.socket.binaryType="arraybuffer",this.socket.onmessage=function(m){var l={};if(m.data&&"{"==m.data[0]){try{l=JSON.parse(m.data)}catch(k){l={type:"Audio",data:m.data}}}else{l={type:"Audio",data:m.data}}"InitResponse"==l.type?this.sessionId=l.data.sessionId:"Error"==l.type?(g.errorCallback("Session "+this.sessionId+": "+l.data),this.socket.close()):"Phonemes"==l.type?g.infoCallback(l.data):"Audio"==l.type?d.push(l.data):(g.errorCallback("Session "+this.sessionId+": "+l),this.socket.close())}.bind(this),this.socket.onerror=function(i){g.errorCallback("Socket error: "+i.message)}.bind(this),this.socket.onclose=function(l){g.changeCallback&&(d[0]=g.changeCallback(d[0]));var k=Array.prototype.concat.apply([],d),o=new Blob(k,{type:"audio/x-wav"});if("undefined"!=typeof g.dataCallback){g.dataCallback(o)}else{var m=URL.createObjectURL(o);c.ya.speechkit.play(m,g.stopCallback)}}.bind(this)},speakers:function(d){return new Promise(function(e,f){if(b){e(b)}else{var g=new XMLHttpRequest;g.open("GET",this.options.url.replace("wss://","https://").replace("ws://","http://").replace("ttssocket.ws","speakers?engine=ytcp&lang="+(d||""))),g.onreadystatechange=function(){if(4==this.readyState){if(200==this.status){try{b=JSON.parse(this.responseText),e(b)}catch(h){f(h.message)}}else{f("Can't get speakers list!")}}},g.send()}}.bind(this))}},c.ya.speechkit.Tts=a}(this),function(b){"undefined"==typeof b.ya&&(b.ya={}),"undefined"==typeof b.ya.speechkit&&(b.ya.speechkit={});var a=function(c){return this instanceof b.ya.speechkit.WebAudioRecognition?(this.recognition=null,this.recorder=null,void (this.options=b.ya.speechkit._extend(b.ya.speechkit._extend(b.ya.speechkit._defaultOptions(),c),{format:b.ya.speechkit.FORMAT.PCM44}))):new b.ya.speechkit.WebAudioRecognition(c)};a.prototype={_onstart:function(){this.send=0,this.send_bytes=0,this.recognition=b.ya.speechkit._extend(this.recognition,{interim_transcript:"",lang:this.options.lang,onend:this.stop.bind(this),onresult:function(f){this.interim_transcript="";for(var d=[],c=f.resultIndex;c<f.results.length;++c){f.results[c].isFinal?(d.push({0:{transcript:f.results[c][0].transcript,confidence:f.results[c][0].confidence}}),this.backref.options.dataCallback(f.results[c][0].transcript,!0,1),this.interim_transcript=""):this.interim_transcript+=f.results[c][0].transcript}d.length&&this.backref.recognizer._sendJson(d),this.backref.options.dataCallback(this.interim_transcript,!1,1)},continuous:!0,interimResults:!0,maxAlternatives:5,errorCallback:this.options.errorCallback,onerror:function(c){this.errorCallback(c.error)}}),this.recognition.backref=this,this.recorder=new b.ya.speechkit.Recorder,this.recognizer=new b.ya.speechkit.Recognizer(b.ya.speechkit._extend(this.options,{url:this.options.url.replace("asrsocket.ws","logsocket.ws"),samplerate:this.options.format.sampleRate,onInit:function(d,c){this.recorder.start(function(f){this.options.vad&&this.vad&&this.vad.update(),this.send++,this.send_bytes+=f.byteLength,this.options.infoCallback({send_bytes:this.send_bytes,format:this.options.format,send_packages:this.send,processed:this.proc}),this.recognizer.addData(f)}.bind(this),this.options.format),this.recognition.onstart=this.options.initCallback.bind(this,d,c,"native"),this.recognition.start()}.bind(this),onResult:function(){},onError:function(c){this.recorder.stop(function(){}),this.recognizer.close(),this.recognizer=null,this.options.errorCallback(c)}.bind(this)})),this.recognizer.start()},start:function(){"undefined"!=typeof b.webkitSpeechRecognition?(this.recognition=new b.webkitSpeechRecognition,null!==b.ya.speechkit._stream?this._onstart():b.ya.speechkit.initRecorder(this._onstart.bind(this),this.options.errorCallback)):this.options.errorCallback("Your browser doesn't implement Web Speech API")},stop:function(c){this.recognition&&(this.recognition.onend=function(){},this.recognition.stop()),this.recorder&&this.recorder.stop(),this.recognizer&&this.recognizer.close(),this.options.stopCallback(),"undefined"!=typeof c&&"[object Function]"==Object.prototype.toString.call(c)&&c()},pause:function(){},isPaused:function(){return !1},getAnalyserNode:function(){return this.recorder?this.recorder.getAnalyserNode():void 0}},b.ya.speechkit.WebAudioRecognition=a}(this),function(a){"undefined"==typeof a.ya&&(a.ya={}),"undefined"==typeof a.ya.speechkit&&(a.ya.speechkit={}),a.ya.speechkit.SpeakerId=function(){return this instanceof a.ya.speechkit.SpeakerId?void (a.ya.speechkit._recorderInited||a.ya.speechkit.initRecorder(this.onInited.bind(this),function(b){alert("Failed to init recorder: "+b)})):new a.ya.speechkit.SpeakerId},a.ya.speechkit.SpeakerId.prototype={onInited:function(){this.recorder=new a.ya.speechkit.Recorder},startRecord:function(){console.log("Start recording..."),this.recorder.start(function(b){console.log("Recorder callback, recorded data length: "+b.byteLength)},a.ya.speechkit.FORMAT.PCM8)},completeRecordAndRegister:function(c,b,d,e){console.log("completeRecordAndRegister"),this.recorder.stop(function(g){console.log("Wav is ready:"),console.log(g);var f=new FormData;f.append("name",c),f.append("text",d),f.append("audio",g),f.append("keepPrev",b?"true":"false");var h=new XMLHttpRequest;h.open("POST",a.ya.speechkit.settings.voicelabUrl+"register_voice"),h.onreadystatechange=function(){4==this.readyState&&(200==this.status?(console.log(this.responseText),e(this.responseText)):e("Failed to register data, could not access "+a.ya.speechkit.settings.voicelabUrl+" Check out developer tools -> console for more details."))},h.send(f)})},completeRecordAndIdentify:function(b){console.log("Indentify"),this.recorder.stop(function(c){console.log("Wav is ready:"),console.log(c);var d=new FormData;d.append("audio",c);var e=new XMLHttpRequest;e.open("POST",a.ya.speechkit.settings.voicelabUrl+"detect_voice"),e.onreadystatechange=function(){if(4==this.readyState){if(200==this.status){console.log(this.responseText);var f={};try{f=JSON.parse(this.responseText)}catch(g){return void b(!1,"Failed to find user, internal server error: "+g)}b(!0,f)}else{b(!1,"Failed to find user, could not access "+a.ya.speechkit.settings.voicelabUrl+" Check out developer tools -> console for more details.")}}},e.send(d)},1)},feedback:function(c,b){console.log("Post feedback");var d=new FormData;d.append("requestId",c),d.append("feedback",b);var e=new XMLHttpRequest;e.open("POST",a.ya.speechkit.settings.voicelabUrl+"postFeedback"),e.onreadystatechange=function(){4==this.readyState&&console.log(this.responseText)},e.send(d)}}}(this),function(a){"undefined"==typeof a.ya&&(a.ya={}),"undefined"==typeof a.ya.speechkit&&(a.ya.speechkit={}),a.ya.speechkit.Equalizer=function(c,b){this.recorder=b,this.element=document.getElementById(c),this.element.style.textAlign="center",this.element.innerText="",this.graf=document.createElement("canvas"),this.graf.style.width="100%",this.graf.style.height="100%",this.graf.width=1000,this.element.appendChild(this.graf),navigator.cancelAnimationFrame||(navigator.cancelAnimationFrame=navigator.webkitCancelAnimationFrame||navigator.mozCancelAnimationFrame),navigator.requestAnimationFrame||(navigator.requestAnimationFrame=navigator.webkitRequestAnimationFrame||navigator.mozRequestAnimationFrame),this.refID=null,this.startDrawRealtime()},a.ya.speechkit.Equalizer.prototype={destroy:function(){this.stopDrawRealtime(),this.element.removeChild(this.graf)},stopDrawRealtime:function(){window.cancelAnimationFrame(this.rafID),this.rafID=null},startDrawRealtime:function(){function c(q){if(!b.analyserNode){if(!b.recorder){return}b.analyserNode=b.recorder.getAnalyserNode(),b.context=b.recorder.context}var A=b.graf.width,k=b.graf.height,e=b.graf.getContext("2d"),y=2,j=1,x=Math.round(A/y),g=new Uint8Array(b.analyserNode.frequencyBinCount);b.analyserNode.getByteFrequencyData(g),e.clearRect(0,0,A,k),e.fillStyle="#F6D565",e.lineCap="round";for(var t=b.analyserNode.frequencyBinCount/x,z=0;x>z;++z){for(var m=0,w=Math.floor(z*t),v=0;t>v;v++){m+=g[w+v]}m=m/t/2,e.fillStyle="hsl( "+Math.round(60*z/x)+", 100%, 50%)",e.fillRect(z*y,k,j,-m)}b.rafID=window.requestAnimationFrame(c)}var b=this;this.rafID=window.requestAnimationFrame(c)}}}(this),function(a){"undefined"==typeof a.ya&&(a.ya={}),"undefined"==typeof a.ya.speechkit&&(a.ya.speechkit={}),a.ya.speechkit._mic_on='<svg version="1.1" id="Layer_1"  xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  x="0px" y="0px" viewBox="0 0 112 112" enable-background="new 0 0 112 112" xml:space="preserve"> <g id="tuts" sketch:type="MSPage"> <g id="mic_ff" sketch:type="MSLayerGroup"> <g sketch:type="MSShapeGroup"> <circle id="path-1" fill="rgb(255, 204, 0)" cx="56" cy="56" r="56"/> </g> <g id="speechkit_vector-9" transform="translate(39.000000, 32.000000)"  sketch:type="MSShapeGroup" opacity="0.9"> <path id="Shape" d="M17,4c2.8,0,5,2.3,5,5.2v15.6c0,2.9-2.2,5.2-5,5.2s-5-2.3-5-5.2V9.2C12,6.3,14.2,4,17,4 M17,0 c-5,0-9,4.1-9,9.2v15.6c0,5.1,4,9.2,9,9.2s9-4.1,9-9.2V9.2C26,4.1,22,0,17,0L17,0z"/> <path id="Shape_1_"  d="M34,23v1.1C34,34,26.4,42,17,42S0,34,0,24.1V23h4v0.1C4,31.3,9.8,38,17,38s13-6.7,13-14.9V23H34z"/> <rect id="Rectangle-311" x="15" y="41" width="4" height="10"/> </g> </g> </g> </svg>',a.ya.speechkit._mic_off='<svg version="1.1" id="Layer_1"  xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  x="0px" y="0px" viewBox="0 0 112 112" enable-background="new 0 0 112 112" xml:space="preserve"> <g id="tuts" sketch:type="MSPage"> <g id="mic_ff" sketch:type="MSLayerGroup"> <g id="speechkit_vector-9" transform="translate(39.000000, 32.000000)"  sketch:type="MSShapeGroup" opacity="0.9"> <path id="Shape" d="M17,4c2.8,0,5,2.3,5,5.2v15.6c0,2.9-2.2,5.2-5,5.2s-5-2.3-5-5.2V9.2C12,6.3,14.2,4,17,4 M17,0 c-5,0-9,4.1-9,9.2v15.6c0,5.1,4,9.2,9,9.2s9-4.1,9-9.2V9.2C26,4.1,22,0,17,0L17,0z"/> <path id="Shape_1_"  d="M34,23v1.1C34,34,26.4,42,17,42S0,34,0,24.1V23h4v0.1C4,31.3,9.8,38,17,38s13-6.7,13-14.9V23H34z"/> <rect id="Rectangle-311" x="15" y="41" width="4" height="10"/> </g> </g> </g> </svg>',a.ya.speechkit.Textline=function(c,b){if(!(this instanceof a.ya.speechkit.Textline)){return new a.ya.speechkit.Textline(c,b)}var d=document.getElementById(c);"INPUT"!=d.tagName?(this.element=d,this.textinput=document.createElement("input"),this.textinput.style.height="100%",this.textinput.style.width="100%"):(this.textinput=d,this.element=null),this.textinput.style.backgroundImage="url('data:image/svg+xml;utf8,"+a.ya.speechkit._mic_off+"')",this.textinput.style.backgroundRepeat="no-repeat",this.textinput.style.backgroundPosition="right center",this.element&&this.element.appendChild(this.textinput),this.dict=null,this.final_result="";var e=this;return this.textinput.onmousemove=function(g){var f=e.textinput.getBoundingClientRect();g.clientX-f.x>f.width-f.height?e.textinput.style.cursor="pointer":e.textinput.style.cursor="text"},b=b||{},b.dataCallback=function(h,f,g){e.textinput.value=h,f&&(b.onInputFinished&&(e.final_result=h,b.onInputFinished(h)),e.dict.abort())},b.initCallback=function(){e.textinput.style.backgroundImage="url('data:image/svg+xml;utf8,"+ya.speechkit._mic_on+"')"},b.stopCallback=function(){e.textinput.style.backgroundImage="url('data:image/svg+xml;utf8,"+ya.speechkit._mic_off+"')",e.dict=null},this.textinput.onmousedown=function(g){var f=e.textinput.getBoundingClientRect();g.clientX<=f.width-f.height||(e.dict||(e.dict=new ya.speechkit.SpeechRecognition),e.dict.isPaused()?e.dict.start(b):e.dict.stop())},{destroy:function(){e.dict&&e.dict.stop(),e.textinput.style.backgroundImage="",e.textinput.onmousedown=function(){},e.textinput.onmousemove=function(){},e.element&&e.element.removeChild(e.textinput)},value:function(){return e.final_result}}}}(this);this.home=this.home||{};(function(g){var i="newyear2016";try{var G=function(L){var e={websocketProtocol:"wss://",asrUrl:"webasr.yandex.net/asrsocket.ws",spotterUrl:"webasr.yandex.net/spottersocket.ws",ttsUrl:"https://tts.voicetech.yandex.net",ttsStreamUrl:"webasr.yandex.net/ttssocket.ws",lang:L.lang||"ru-RU",langWhitelist:["ru-RU","tr-TR","en-US","en-GB","uk-UA","ru","tr","en","uk","en-EN"],model:"freeform",applicationName:"jsapi",apikey:"f2469bd8-50d8-4ed8-a773-865a81eb9352",uuid:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(O){var N=Math.random()*16|0;var M=O==="x"?N:(N&3|8);return M.toString(16)})};return e};var x=null,I=null;var c=function(){if(x){x.stop();return true}return false};var p=function(e,M){if(I){clearTimeout(I);I=null}x=new window.ya.speechkit.SpeechRecognition();var L=window.ya.speechkit._extend(window.ya.speechkit._extend({},window.ya.speechkit._defaultOptions()),e);L.doneCallback=e.doneCallback;L.dataCallback=function(O,N,P){if(N){if(L.doneCallback){L.doneCallback(O)}x.stop()}};L.errorCallback=function(N){e.errorCallback(N)};L.stopCallback=function(){x=null;e.endCallback()};x.start(L);I=setTimeout(function(){c();I=null},M.recognizeTimeout||10000)};var h=function(N,M){var O={mic:"1036",speak:"1037",button:"1038"},e=O[N],L=String(Math.random()).substr(2,12);M=M||"";new Image().src="https://yandex.ru/clck/click/dtype=stred/pid=1/cid=72202/reqid="+window.Lego.params.msid+"/path=690.1033/vars=143=28.15.689,287=213,"+e+"=0/skuuid="+M+"/slots=/rnd="+L+"/*"};var v=false,f=function(){if(v){console.log.apply(console,arguments)}};var d=0;var j=function(M,L){for(var e in L){if(L.hasOwnProperty(e)){if(L[e].texts&&L[e].texts.indexOf(M)>-1){return e}}}return null};var t=function(){if(d===1){c();s();return false}else{if(d>1){f("action: ignore");return false}}d=1;A();return true};var s=function(){if(d===1){f("action: cancel");d=0}};var y=function(U,P,Q,T){d=2;f("action run:",U);U=U||"";U=U.toLowerCase().replace(/\s+$/,"").replace(/^\s/,"");var S=U.split(" ")[0],M=false;if(P.tree.indexOf(S)>-1){f("first word matched:",S);M=true;U=U.replace(S+" ","")}var N=0,R=function(){--N;if(!N){d=0;T();return}};var e=j(U,P.imgActions),O=j(U,P.speechActions);if(O&&(M||P.speechActions[O].notree)){N++;n(O,P,Q,R)}else{if(e&&(M||P.imgActions[e].notree)){N++;B(e,P,Q,R)}}if(!N){var L=Math.random();if(L<P.promoEdge){f("action: not matched, going to show promo",U);N++;n("promo",P,Q,R)}else{f("action: not matched, don't understand",U);N++;B("empty",P,Q,function(){n("promo",P,Q,R)})}}};var B=function(M,Q,L,R){f("action img: start",M);var e=new Image(),O=$(".covers-logo__img").attr("src"),P=O.replace("/logo.png","/action_"+M+".gif"),N=M.indexOf("intro")===0;if(!N){P+="?rnd="+String(Math.random()).substr(2,12)}e.onload=function(){var S=$('<div class="covers__newyear2016_logo_img_action covers__newyear2016_logo_img_action_'+M+'"></div>'),T=$('<img src="'+P+'"></img>');S.append(T);f("gif url:",P);$(".covers-logo").append(S);if(N){$(".covers-logo__img").fadeOut(300)}if(M!=="speech"){setTimeout(function(){f("action img: finished",M);S.remove();R()},Q.imgActions[M].delay)}};e.onerror=function(){f("action img: load error",M);R()};e.src=P};var r={whoami:function(L,e){return $(".domik2 .username:first").text()+(e.texts.askme||"")||e.texts.loginplease},whereami:function(L,e){return $(".news .content-tabs__head-item:eq(1) .content-tabs__link").text()||""},getcurrentyear:function(L,e){return new Date().getFullYear()+"Ð¹"}};var n=function(e,O,P,V){if(O.disabledTTS){setTimeout(function(){f("action speech: disabled",e);V()},0);return}f("action speech: start",e);var T=P.Tts({speakers:O.ttsSpeakers||[["omazh",1],["jane",1]],emotions:O.ttsEmotions||[["good",1]],genders:O.ttsGenders||[["female",1]],speed:O.ttsSpeed||1,lang:O.lang||"ru-RU"});var W=false,S=false,L=setTimeout(function(){if(W){f("action speech: ignore timeout",e);return}f("action speech: timeout",e);try{if(T.socket){S=true;T.socket.close()}}catch(X){}V()},O.speechActionTimeout),M=function(){if(S){return}if(L){clearTimeout(L)}f("action speech: finished",e);$(".covers__newyear2016_logo_img_action_speech").remove();V()};var U="";if(O.randomSpeechSample&&O.randomSpeechSample[e]){var N=O.randomSpeechSample[e],R=O.texts[N].length,Q=Math.floor(Math.random()*R);U=O.texts[N][Q]}else{U=O.randomSample||r[e](U,O)}if(!U){setTimeout(function(){M()},0);return}f("action speech: text is",U);h("speak",P.settings.uuid);T.speak(U,{changeCallback:function(X){var Y=new DataView(X);Y.setUint8(24,32);Y.setUint8(25,78);Y.setUint8(28,64);Y.setUint8(29,156);return Y.buffer},infoCallback:function(){if(!W){B("speech",O,P,function(){});W=true}},stopCallback:function(){M()},errorCallback:function(){M()}})};var b=0,F=function(N){var M=g.localStorage.getItem("newyear2016introCount");if(M){M=parseInt(M,10);if(isNaN(M)){M=0}}else{M=0}var e;if(M<N.introCount){u(N);M++;g.localStorage.setItem("newyear2016introCount",M);e=7000}else{E(N);e=500}var L=$(".covers__"+i+"_button");if(!L.length){L=$(".covers__"+i+"_mic")}setTimeout(function(){L.fadeIn(300)},e)},u=function(e){b=1;B(e.introName||"intro",e,null,function(){J()})},E=function(e){b=1;B("introshort",e,null,function(){J()})},J=function(){if(b===1){b=2;a.show();f("intro loaded")}},A=function(){if(b===1){$(".covers__newyear2016_logo_img_action_intro").remove();J()}};var a,k=function(e){a=$('<div class="covers__'+i+'_logo_def"></div>');a.hide();$(".covers-logo").append(a)},K=function(M){var e=window.ya&&window.ya.speechkit?window.ya.speechkit:null;var N=$(".i-ua_browser_touch").length;if(!N&&window.Promise&&e.isSupported()&&!M.disabledASR){e.settings=G(M);var L=$('<div class="covers__'+i+'_mic"></div>');L.click(function(){g.coversAPI.sendStats("mic.click");if(!t()){return}var O=function(){L.removeClass("covers__"+i+"_mic_active");L.removeClass("covers__"+i+"_mic_invisible");L.show()};p({utteranceSilence:20,doneCallback:function(P){f("You've said: "+P);L.hide();y(P,M,e,function(){O()})},initCallback:function(){h("mic",e.settings.uuid);f("You may speak now");L.addClass("covers__"+i+"_mic_active")},errorCallback:function(P){f("Something gone wrong: "+P);O();s();if(P==="PermissionDeniedError"||P.toLowerCase().indexOf("permission")>-1){D(M,true)}},endCallback:function(){if(d!==2){f("Stop");O();s()}}},M)});$(".covers-logo").append(L);L.hide()}else{D(M,false)}};var D=function(N,M){var e=$('<div class="covers__'+i+'_button"></div>');var L=function(){var P=[],Q="";for(var O in N.imgActions){if(N.imgActions.hasOwnProperty(O)&&N.imgActions[O].texts){P.push(N.imgActions[O].texts[0])}}Q=N.tree[0]+" "+P[Math.floor(Math.random()*P.length)];f("fallback:",Q);e.hide();y(Q,N,null,function(){e.show()})};e.click(function(){g.coversAPI.sendStats("button.click");if(!t()){return}h("button");L()});if(M){L();$(".covers__"+i+"_mic").hide()}else{e.hide()}$(".covers-logo").append(e)};var m=false,l=function(){if(m){$(".covers__"+i+"_share").fadeIn(200);return}var e=$("#covers-share");e.addClass("covers__"+i+"_share");$(".covers-logo").append(e);e.fadeIn(200);m=true},q=function(){$(".covers__"+i+"_share").fadeOut(200)};var z=0;var C=function C(e,L){if(z===2){L({status:1});return}else{if(z===1){L({status:0,error:"loading"});return}}z=1;k(e);K(e.settings);F(e.settings);$(".covers-logo").unbind("click");setTimeout(function(){z=2;L({status:1})},0)};var w=function w(e,L){$("body").addClass("covers__"+i);L({status:1})};var o=function o(e,L){$("body").removeClass("covers__"+i);L({status:1})};if(!g.covers){g.covers={}}g.covers[i]={load:C,start:w,stop:o}}catch(H){}})(this.home);