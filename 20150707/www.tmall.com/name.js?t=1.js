KISSY.add("fp/index",function(e,i,t,n,o,r,a,s,l,d,f){var u=window.g_config||{};var c={};var p;var m=false;var v=e.unparam(location.search.slice(1));return{_initBG:function(){var e=i.all(".j_LazyShowBG");var t=/&lt;/gi;var n=/&gt;/gi;e.each(function(e){var i=e.one("textarea");if(!i)return;i&&e.html(i.html().replace(t,"<").replace(n,">"))});e.fadeIn(.2)},_initIs1111:function(){var e=u._startTime?new Date(u._startTime):new Date;if(e.getFullYear()===2014&&e.getDate()===11&&e.getMonth()===10){m=true;return true}return false},callComplete:function(){if(e.isArray(u.smartComplete)){for(var i=0,t=u.smartComplete;i<t;i++){var n=u.smartComplete[i];e.isFunction(n)&&n()}}},init:function(t){var m=this;m.config=e.merge(c,t);r.config({numLev:u.numLev||13,url:u.trackUrl||"http://www.tmall.com/code-tracker"});m._initIs1111();f.init();if(!u.disableHpScroll){s.init()}if(!u.disableWebpTest){o.isSupportWebp({needFlag:true})}if(!u.disableWebp){l.init()}r.sendTrack(24,"Fp.init","\u9996\u9875\u521d\u59cb\u5316\uff0c\u6ce8\u518cSmartLazy");var g="";if(!u.disableAppGuide){g=",fp/mods/app-guide"}o.smartLazy(function(){r.sendTrack(24,"Fp.smartLazy","\u89e6\u53d1smartLazy\uff0c\u5f00\u59cb\u52a0\u8f7d\u6240\u6709\u4e1a\u52a1\u903b\u8f91\u811a\u672c");e.use("fp/mods/category,fp/mods/brand,fp/mods/lazyload,fp/mods/exposure,fp/mods/header,fp/mods/floor-anim"+g+",fp/css/second-screen.css",function(e,i,t,o,a,s,l,d){r.sendTrack(24,"Fp.bizLoad","\u52a0\u8f7d\u6240\u6709\u4e1a\u52a1\u903b\u8f91\u811a\u672c\u5b8c\u6210");i.init();setTimeout(function(){s.init();var i=u.doodleStart||v["doodleStart"]||14155488e5;var t=u.doodleEnd||v["doodleEnd"]||14157216e5;var n=u._startTime||u.forceTime||+new Date;if(!u.disableDoodle&&(n>=i&&n<t||u.forceDoodle||v["forceDoodle"])){e.use("fp/mods/doodle-count",function(e,i){i.init()})}if(u.useFloatLayer){e.use("fp/mods/float-layer",function(e,i){i.init()})}},200);setTimeout(function(){t.init();a.init();m._initBG()},800);o.init();setTimeout(function(){l.init();m.callComplete();if(n.ie<7||u.disableNewBrand)return;e.use("fp/mods/new-brand",function(e,i){i.init()})},2e3)});setTimeout(function(){if(n.ie<7||u.disableFixedSearch)return;e.use("fp/mods/fixed-search",function(e,i){i.init()})},3e3)});a.init(u.TDConfig||{isImmediately:true,quickResponsive:true,delay:0,quickResponsiveDelay:0});if(!u.disableGuide){d.init()}e.fpSlideList=[];e.fpSlideInfoList=[];i(window).on("scroll",e.buffer(function(){if(!e.isScrolling){e.isScrolling=true;var i=e.fpSlideList;if(i.length>0){for(var t=0,n=i.length;t<n;t++){}}}clearTimeout(p);p=setTimeout(function(){e.isScrolling=false;var i=e.fpSlideList;var t=e.fpSlideInfoList,n;if(i.length>0){for(var o=0,r=i.length;o<r;o++){n=t[o];if(n.top+n.height>=window.scrollY&&n.top<=window.scrollY+window.innerHeight){i[o].play()}}}},500)},400))}}},{requires:["node","dom","ua","fp/mods/util","mui/code-tracker","fp/mods/targeted-delivery","fp/mods/hp-scroll","fp/mods/webp","fp/mods/app-guide","fp/mods/market-ald"]});/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:29
*/
KISSY.add("node/base",["dom","event/dom"],function(b,e){function c(f,m,g){if(!(this instanceof c))return new c(f,m,g);if(f)if("string"===typeof f){if(f=h.create(f,m,g),f.nodeType===k.DOCUMENT_FRAGMENT_NODE)return d.apply(this,a(f.childNodes)),this}else{if(b.isArray(f)||j(f))return d.apply(this,a(f)),this}else return this;this[0]=f;this.length=1;return this}var h=e("dom"),i=e("event/dom"),g=Array.prototype,l=g.slice,k=h.NodeType,d=g.push,a=b.makeArray,j=h.isDomNodeList;c.prototype={constructor:c,isNodeList:!0,
length:0,item:function(f){return"number"===typeof f?f>=this.length?null:new c(this[f]):new c(f)},add:function(f,a,b){"number"===typeof a&&(b=a,a=void 0);f=c.all(f,a).getDOMNodes();a=new c(this);void 0===b?d.apply(a,f):(b=[b,0],b.push.apply(b,f),g.splice.apply(a,b));return a},slice:function(){return new c(l.apply(this,arguments))},getDOMNodes:function(){return l.call(this)},each:function(a,d){var k=this;b.each(k,function(b,j){b=new c(b);return a.call(d||b,b,j,k)});return k},getDOMNode:function(){return this[0]},
end:function(){return this.__parent||this},filter:function(a){return new c(h.filter(this,a))},all:function(a){a=0<this.length?c.all(a,this):new c;a.__parent=this;return a},one:function(a){a=this.all(a);if(a=a.length?a.slice(0,1):null)a.__parent=this;return a}};b.mix(c,{all:function(a,d){return"string"===typeof a&&(a=b.trim(a))&&3<=a.length&&b.startsWith(a,"<")&&b.endsWith(a,">")?(d&&(d.getDOMNode&&(d=d[0]),d=d.ownerDocument||d),new c(a,void 0,d)):new c(h.query(a,d))},one:function(a,d){var b=c.all(a,
d);return b.length?b.slice(0,1):null}});c.NodeType=k;c.KeyCode=i.KeyCode;c.Gesture=i.Gesture;c.REPLACE_HISTORY=i.REPLACE_HISTORY;return c});
KISSY.add("node/attach",["dom","event/dom","./base"],function(b,e){function c(d,a,b){b.unshift(a);d=h[d].apply(h,b);return void 0===d?a:d}var h=e("dom"),i=e("event/dom"),g=e("./base"),l=g.prototype,k=b.makeArray;g.KeyCode=i.KeyCode;b.each("nodeName,isCustomDomain,getEmptyIframeSrc,equals,contains,index,scrollTop,scrollLeft,height,width,innerHeight,innerWidth,outerHeight,outerWidth,addStyleSheet,appendTo,prependTo,insertBefore,before,after,insertAfter,test,hasClass,addClass,removeClass,replaceClass,toggleClass,removeAttr,hasAttr,hasProp,scrollIntoView,remove,empty,removeData,hasData,unselectable,wrap,wrapAll,replaceWith,wrapInner,unwrap".split(","),function(d){l[d]=
function(){var a=k(arguments);return c(d,this,a)}});b.each("getWindow,getDocument,filter,first,last,parent,closest,next,prev,clone,siblings,contents,children".split(","),function(d){l[d]=function(){var a=k(arguments);a.unshift(this);a=h[d].apply(h,a);return a===void 0?this:a===null?null:new g(a)}});b.each({attr:1,text:0,css:1,style:1,val:0,prop:1,offset:0,html:0,outerHTML:0,outerHtml:0,data:1},function(d,a){l[a]=function(){var j;j=k(arguments);void 0===j[d]&&!b.isObject(j[0])?(j.unshift(this),j=h[a].apply(h,
j)):j=c(a,this,j);return j}});b.each(["on","detach","delegate","undelegate"],function(d){l[d]=function(){var a=k(arguments);a.unshift(this);i[d].apply(i,a);return this}});b.each(["fire","fireHandler"],function(d){l[d]=function(){var a=k(arguments);a.unshift(this);return i[d].apply(i,a)}})});
KISSY.add("node/override",["dom","./base","./attach"],function(b,e){var c=e("dom"),h=e("./base");e("./attach");var i=h.prototype;b.each(["append","prepend","before","after"],function(b){i[b]=function(e){"object"!==typeof e&&(e=c.create(e+""));if(e)c[b](e,this);return this}});b.each(["wrap","wrapAll","replaceWith","wrapInner"],function(b){var c=i[b];i[b]=function(b){"string"===typeof b&&(b=h.all(b,this[0].ownerDocument));return c.call(this,b)}})});
KISSY.add("node/anim",["./base","dom","anim"],function(b,e){function c(b,d,a){for(var c=[],f={},a=a||0;a<d;a++)c.push.apply(c,l[a]);for(a=0;a<c.length;a++)f[c[a]]=b;return f}var h=e("./base"),i=e("dom"),g=e("anim"),l=[["height","margin-top","margin-bottom","padding-top","padding-bottom"],["width","margin-left","margin-right","padding-left","padding-right"],["opacity"]];b.augment(h,{animate:function(){var c=b.makeArray(arguments);b.each(this,function(d){var a=b.clone(c),e=a[0];e.to?(e.node=d,(new g(e)).run()):
g.apply(void 0,[d].concat(a)).run()});return this},stop:function(c,d,a){b.each(this,function(b){g.stop(b,c,d,a)});return this},pause:function(c,d){b.each(this,function(a){g.pause(a,d)});return this},resume:function(c,d){b.each(this,function(a){g.resume(a,d)});return this},isRunning:function(){for(var b=0;b<this.length;b++)if(g.isRunning(this[b]))return!0;return!1},isPaused:function(){for(var b=0;b<this.length;b++)if(g.isPaused(this[b]))return!0;return!1}});b.each({show:c("show",3),hide:c("hide",3),
toggle:c("toggle",3),fadeIn:c("show",3,2),fadeOut:c("hide",3,2),fadeToggle:c("toggle",3,2),slideDown:c("show",1),slideUp:c("hide",1),slideToggle:c("toggle",1)},function(c,d){h.prototype[d]=function(a,e,f){if(i[d]&&!a)i[d](this);else b.each(this,function(b){(new g(b,c,a,f,e)).run()});return this}})});
KISSY.add("node",["node/base","node/attach","node/override","node/anim"],function(b,e){var c=e("node/base");e("node/attach");e("node/override");e("node/anim");b.mix(b,{Node:c,NodeList:c,one:c.one,all:c.all});return c});
/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:15
*/
KISSY.add("anim",["anim/base","anim/timer","anim/transition?"],function(b,g){function a(a,e,d,f,c){if(a.node)c=a;else{"string"===typeof e?(e=b.unparam(""+e,";",":"),b.each(e,function(c,a){var d=b.trim(a);d&&(e[d]=b.trim(c));(!d||d!==a)&&delete e[a]})):e=b.clone(e);if(b.isPlainObject(d))c=b.clone(d);else if(c={complete:c},d&&(c.duration=d),f)c.easing=f;c.node=a;c.to=e}c=b.merge(k,c,{useTransition:b.config("anim/useTransition")});return c.useTransition&&h?new h(c):new i(c)}var j=g("anim/base"),i=g("anim/timer"),
h=g("anim/transition?"),f=j.Utils,k={duration:1,easing:"linear"};b.each(["pause","resume"],function(b){a[b]=function(a,d){return null===d||"string"===typeof d||!1===d?f.pauseOrResumeQueue(a,d,b):f.pauseOrResumeQueue(a,void 0,b)}});a.isRunning=f.isElRunning;a.isPaused=f.isElPaused;a.stop=f.stopEl;a.Easing=i.Easing;b.Anim=a;a.Q=j.Q;return a});
/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:15
*/
KISSY.add("anim/base/queue",["dom"],function(c,i){function h(a,b,c){var b=b||f,j,m=d.data(a,g);!m&&!c&&d.data(a,g,m={});m&&(j=m[b],!j&&!c&&(j=m[b]=[]));return j}var d=i("dom"),g=c.guid("ks-queue-"+c.now()+"-"),f=c.guid("ks-queue-"+c.now()+"-"),a;return a={queueCollectionKey:g,queue:function(a,c,d){a=h(a,c);a.push(d);return a},remove:function(e,b,d){var j=h(e,b,1);j&&(d=c.indexOf(d,j),-1<d&&j.splice(d,1));j&&!j.length&&a.clearQueue(e,b);return j},clearQueues:function(a){d.removeData(a,g)},clearQueue:function(a,
b){var b=b||f,l=d.data(a,g);l&&delete l[b];c.isEmptyObject(l)&&d.removeData(a,g)},dequeue:function(c,b){var d=h(c,b,1);d&&(d.shift(),d.length||a.clearQueue(c,b));return d}}});
KISSY.add("anim/base/utils",["./queue","dom"],function(c,i){var h=i("./queue"),d=i("dom"),g=c.guid("ks-anim-unqueued-"+c.now()+"-"),f=c.guid("ks-anim-paused-"+c.now()+"-");return{saveRunningAnim:function(a){var e=a.node,b=d.data(e,g);b||d.data(e,g,b={});b[c.stamp(a)]=a},removeRunningAnim:function(a){var e=a.node,b=d.data(e,g);b&&(delete b[c.stamp(a)],c.isEmptyObject(b)&&d.removeData(e,g))},isAnimPaused:function(a){var e=d.data(a.node,f);return e?!!e[c.stamp(a)]:0},removePausedAnim:function(a){var e=
a.node,b=d.data(e,f);b&&(delete b[c.stamp(a)],c.isEmptyObject(b)&&d.removeData(e,f))},savePausedAnim:function(a){var e=a.node,b=d.data(e,f);b||d.data(e,f,b={});b[c.stamp(a)]=a},isAnimRunning:function(a){var e=d.data(a.node,g);return e?!!e[c.stamp(a)]:0},isElPaused:function(a){return(a=d.data(a,f))&&!c.isEmptyObject(a)},isElRunning:function(a){return(a=d.data(a,g))&&!c.isEmptyObject(a)},pauseOrResumeQueue:function(a,e,b){a=d.data(a,"resume"===b?f:g);a=c.merge(a);c.each(a,function(a){if(void 0===e||
a.config.queue===e)a[b]()})},stopEl:function(a,e,b,f){b&&(void 0===f?h.clearQueues(a):!1!==f&&h.clearQueue(a,f));a=d.data(a,g);a=c.merge(a);c.each(a,function(a){(void 0===f||a.config.queue===f)&&a.stop(e)})}}});
KISSY.add("anim/base",["dom","./base/utils","./base/queue","promise"],function(c,i){function h(j){h.superclass.constructor.call(this);a.Defer(this);this.config=j;var b=j.node;c.isPlainObject(b)||(b=d.get(j.node));this.node=this.el=b;this._backupProps={};this._propsData={}}var d=i("dom"),g=i("./base/utils"),f=i("./base/queue"),a=i("promise"),e=d.NodeType,b=c.noop,l={toggle:1,hide:1,show:1};c.extend(h,a,{on:function(a,c){"complete"===a?this.then(c):"end"===a?this.fin(c):"step"===a&&this.progress(c);
return this},prepareFx:b,runInternal:function(){var a=this,b=a.config,f=a.node,h,i=a._backupProps,o=a._propsData,k=b.to,r=b.delay||0,p=b.duration;g.saveRunningAnim(a);c.each(k,function(a,d){c.isPlainObject(a)||(a={value:a});o[d]=c.mix({delay:r,easing:b.easing,frame:b.frame,duration:p},a)});if(f.nodeType===e.ELEMENT_NODE){if(k.width||k.height)k=f.style,c.mix(i,{overflow:k.overflow,"overflow-x":k.overflowX,"overflow-y":k.overflowY}),k.overflow="hidden","inline"===d.css(f,"display")&&"none"===d.css(f,
"float")&&(10>c.UA.ieMode?k.zoom=1:k.display="inline-block");var q,n;n="none"===d.css(f,"display");c.each(o,function(c,b){h=c.value;if(l[h]){if("hide"===h&&n||"show"===h&&!n)return a.stop(!0),q=!1;i[b]=d.style(f,b);"toggle"===h&&(h=n?"show":"hide");"hide"===h?(c.value=0,i.display="none"):(c.value=d.css(f,b),d.css(f,b,0),d.show(f))}});if(!1===q)return}a.startTime=c.now();c.isEmptyObject(o)?(a.__totalTime=1E3*p,a.__waitTimeout=setTimeout(function(){a.stop(!0)},a.__totalTime)):(a.prepareFx(),a.doStart())},
isRunning:function(){return g.isAnimRunning(this)},isPaused:function(){return g.isAnimPaused(this)},pause:function(){this.isRunning()&&(this._runTime=c.now()-this.startTime,this.__totalTime-=this._runTime,g.removeRunningAnim(this),g.savePausedAnim(this),this.__waitTimeout?clearTimeout(this.__waitTimeout):this.doStop());return this},doStop:b,doStart:b,resume:function(){var a=this;a.isPaused()&&(a.startTime=c.now()-a._runTime,g.removePausedAnim(a),g.saveRunningAnim(a),a.__waitTimeout?a.__waitTimeout=
setTimeout(function(){a.stop(!0)},a.__totalTime):(a.beforeResume(),a.doStart()));return a},beforeResume:b,run:function(){var a;a=this.config.queue;!1===a?this.runInternal():(a=f.queue(this.node,a,this),1===a.length&&this.runInternal());return this},stop:function(a){var b=this.node,e=this.config.queue;if(this.isResolved()||this.isRejected())return this;this.__waitTimeout&&(clearTimeout(this.__waitTimeout),this.__waitTimeout=0);if(!this.isRunning()&&!this.isPaused())return!1!==e&&f.remove(b,e,this),
this;this.doStop(a);g.removeRunningAnim(this);g.removePausedAnim(this);var h=this.defer;if(a){var i,a=this.config.complete;c.isEmptyObject(i=this._backupProps)||d.css(this.node,i);a&&a.call(this);h.resolve([this])}else h.reject([this]);!1!==e&&(b=f.dequeue(b,e))&&b[0]&&b[0].runInternal();return this}});h.Utils=g;h.Q=f;return h});
/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:30
*/
KISSY.add("promise",[],function(k){function u(a){"undefined"!==typeof console&&console.error&&console.error(a)}function p(a,b,d){if(a instanceof g)q(function(){d.call(a,a[e])});else{var l=a[e],c=a[i];c?c.push([b,d]):m(l)?p(l,b,d):b&&q(function(){b.call(a,l)})}}function f(a){if(!(this instanceof f))return new f(a);this.promise=a||new c;this.promise.defer=this}function m(a){return a&&a instanceof c}function c(a){this[e]=a;void 0===a&&(this[i]=[],this[n]=[])}function g(a){if(a instanceof g)return a;
c.apply(this,arguments);return this}function j(a,b,d){function l(a){try{return b?b.call(this,a):a}catch(d){return u(d.stack||d),new g(d)}}function e(a){try{return d?d.call(this,a):new g(a)}catch(b){return u(b.stack||b),new g(b)}}function o(a){h||a instanceof c||(h=1,r.resolve(l.call(this,a)))}var r=new f,h=0;a instanceof c?p(a,o,function(a){h||(h=1,r.resolve(e.call(this,a)))}):o(a);return r.promise}function s(a){return!t(a)&&m(a)&&void 0===a[i]&&(!m(a[e])||s(a[e]))}function t(a){return m(a)&&void 0===
a[i]&&a[e]instanceof g}var e="__promise_value",q=k.setImmediate,n="__promise_progress_listeners",i="__promise_pendings";f.prototype={constructor:f,resolve:function(a){var b=this.promise,d;if(!(d=b[i]))return null;b[e]=a;d=[].concat(d);b[i]=void 0;b[n]=void 0;k.each(d,function(a){p(b,a[0],a[1])});return a},reject:function(a){return this.resolve(new g(a))},notify:function(a){k.each(this.promise[n],function(b){q(function(){b(a)})})}};c.prototype={constructor:c,then:function(a,b,d){d&&this.progress(d);
return j(this,a,b)},progress:function(a){this[n]&&this[n].push(a);return this},fail:function(a){return j(this,0,a)},fin:function(a){return j(this,function(b){return a(b,!0)},function(b){return a(b,!1)})},done:function(a,b){(a||b?this.then(a,b):this).fail(function(a){setTimeout(function(){throw a;},0)})},isResolved:function(){return s(this)},isRejected:function(){return t(this)}};k.extend(g,c);KISSY.Defer=f;KISSY.Promise=c;c.Defer=f;k.mix(c,{when:j,isPromise:m,isResolved:s,isRejected:t,all:function(a){var b=
a.length;if(!b)return null;for(var d=new f,c=0;c<a.length;c++)(function(c,o){j(c,function(c){a[o]=c;0===--b&&d.resolve(a)},function(a){d.reject(a)})})(a[c],c);return d.promise},async:function(a){return function(){function b(a,b){var h;try{h=e[a](b)}catch(f){return new g(f)}return h.done?h.value:j(h.value,d,c)}function d(a){return b("next",a)}function c(a){return b("throw",a)}var e=a.apply(this,arguments);return d()}}});return c});
/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:15
*/
KISSY.add("anim/timer/easing",[],function(){function j(a){return a}function e(a,b,n,f){var d=3*a-3*n+1,c=3*n-6*a,h=3*a,l=3*b-3*f+1,i=3*f-6*b,j=3*b;return function(a){a:{for(var b=a,f,n,k=0;8>k;k++){n=((d*b+c)*b+h)*b-a;if(m(n)<o){a=b;break a}f=(3*d*b+2*c)*b+h;if(m(f)<o)break;b-=n/f}f=1;k=0;for(b=a;f>k;){n=((d*b+c)*b+h)*b-a;if(m(n)<o)break;0<n?f=b:k=b;b=(f+k)/2}a=b}return((l*a+i)*a+j)*a}}var g=Math.PI,h=Math.pow,b=Math.sin,c=parseFloat,l=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,i={swing:function(a){return-Math.cos(a*
g)/2+0.5},easeNone:j,linear:j,easeIn:function(a){return a*a},ease:e(0.25,0.1,0.25,1),"ease-in":e(0.42,0,1,1),"ease-out":e(0,0,0.58,1),"ease-in-out":e(0.42,0,0.58,1),"ease-out-in":e(0,0.42,1,0.58),toFn:function(a){var b;return(b=a.match(l))?e(c(b[1]),c(b[2]),c(b[3]),c(b[4])):i[a]||j},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(h(2,10*(a-=1))*b(2*(a-0.075)*g/0.3))},elasticOut:function(a){return 0===a||1===a?a:h(2,-10*a)*b(2*(a-0.075)*g/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*h(2,10*(a-=1))*b(2*(a-0.1125)*g/0.45):0.5*h(2,-10*(a-=1))*b(2*(a-0.1125)*g/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var b,
n=(b=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(n*a-b):0.5*((a-=2)*a*(n*a+b)+2)},bounceIn:function(a){return 1-i.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*i.bounceIn(2*a):0.5*i.bounceOut(2*a-1)+0.5}},o=1.0E-6,m=Math.abs;return i});
KISSY.add("anim/timer/manager",[],function(j){var e=j.stamp,g,h;g=function(b){return setTimeout(b,15)};h=function(b){clearTimeout(b)};return{runnings:{},timer:null,start:function(b){var c=e(b);this.runnings[c]||(this.runnings[c]=b,this.startTimer())},stop:function(b){this.notRun(b)},notRun:function(b){delete this.runnings[e(b)];j.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(b){this.notRun(b)},resume:function(b){this.start(b)},startTimer:function(){var b=this;b.timer||(b.timer=g(function l(){b.runFrames()?
b.stopTimer():b.timer=g(l)}))},stopTimer:function(){var b=this.timer;b&&(h(b),this.timer=0)},runFrames:function(){var b,c,h=this.runnings;for(b in h)h[b].frame();for(b in h){c=0;break}return void 0===c}}});
KISSY.add("anim/timer/fx",["dom"],function(j,e){function g(b){j.mix(this,b);this.pos=0;this.unit=this.unit||""}var h=e("dom");g.prototype={isCustomFx:0,constructor:g,load:function(b){j.mix(this,b);this.pos=0;this.unit=this.unit||""},frame:function(b){if(1!==this.pos){var c=this.anim,g=this.prop,i=c.node,e=this.from,m=this.propData,a=this.to;if(void 0===b)var k=j.now(),b=m.duration,k=k-c.startTime-m.delay,b=0>=k?0:k>=b?1:m.easing(k/b);this.pos=b;e===a||0===b||(this.val=e=this.interpolate(e,a,this.pos),
m.frame?m.frame.call(this,c,this):this.isCustomFx||(void 0===e?(this.pos=1,e=a):e+=this.unit,this.val=e,"attr"===this.type?h.attr(i,g,e,1):h.css(i,g,e)))}},interpolate:function(b,c,h){if("number"===typeof b&&"number"===typeof c)return Math.round(1E5*(b+(c-b)*h))/1E5},cur:function(){var b=this.prop,c,e,g=this.anim.node;if(this.isCustomFx)return g[b]||0;if(!(c=this.type))c=this.type=(!g.style||null==g.style[b])&&null!=h.attr(g,b,void 0,1)?"attr":"css";b="attr"===c?h.attr(g,b,void 0,1):h.css(g,b);return isNaN(e=
parseFloat(b))?!b||"auto"===b?0:b:e}};g.Factories={};g.FxTypes={};g.getFx=function(b){var c=g,h,e;if(h=b.fxType)c=g.FxTypes[h];else if(!b.isCustomFx&&(e=g.Factories[b.prop]))c=e;return new c(b)};return g});
KISSY.add("anim/timer/short-hand",[],function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/timer/color",["./fx","./short-hand"],function(j,e){function g(b){var b=b+"",f;if(f=b.match(m))return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])];if(f=b.match(a))return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),parseInt(f[4])];if(f=b.match(k)){for(b=1;b<f.length;b++)2>f[b].length&&(f[b]+=f[b]);return[parseInt(f[1],l),parseInt(f[2],l),parseInt(f[3],l)]}return o[b=b.toLowerCase()]?o[b]:[255,255,255]}function h(){h.superclass.constructor.apply(this,arguments)}var b=e("./fx"),c=e("./short-hand"),
l=16,i=Math.floor,o={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},m=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,k=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;c.background.push("backgroundColor");
c.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];c.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");c.borderBottom.push("borderBottomColor");c.borderLeft.push("borderLeftColor");c.borderRight.push("borderRightColor");c.borderTop.push("borderTopColor");j.extend(h,b,{load:function(){h.superclass.load.apply(this,arguments);this.from&&(this.from=g(this.from));this.to&&(this.to=g(this.to))},interpolate:function(a,b,d){var k=
h.superclass.interpolate;if(3===a.length&&3===b.length)return"rgb("+[i(k(a[0],b[0],d)),i(k(a[1],b[1],d)),i(k(a[2],b[2],d))].join(", ")+")";if(4===a.length||4===b.length)return"rgba("+[i(k(a[0],b[0],d)),i(k(a[1],b[1],d)),i(k(a[2],b[2],d)),i(k(a[3]||1,b[3]||1,d))].join(", ")+")"}});j.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){b.Factories[a]=h});return b.FxTypes.color=h});
KISSY.add("anim/timer/transform",["dom","./fx"],function(j,e){function g(a){a=a.split(/,/);return a=j.map(a,function(a){return b(a)})}function h(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function b(a){return Math.round(1E5*parseFloat(a))/1E5}function c(a){for(var a=a.split(")"),k=j.trim,n=-1,f=a.length-1,d,e,c=h();++n<f;)switch(d=a[n].split("("),e=k(d[0]),d=d[1],e){case "translateX":case "translateY":case "scaleX":case "scaleY":c[e]=b(d);break;case "rotate":case "skewX":case "skewY":var i=
b(d);j.endsWith(d,"deg")||(i=180*i/Math.PI);c[e]=i;break;case "translate":case "translate3d":d=d.split(",");c.translateX=b(d[0]);c.translateY=b(d[1]||0);break;case "scale":d=d.split(",");c.scaleX=b(d[0]);c.scaleY=b(d[1]||d[0]);break;case "matrix":return a=d,a=g(a),f=n=k=void 0,e=a[0],c=a[1],d=a[2],i=a[3],e*i-c*d?(k=Math.sqrt(e*e+c*c),f=(e*d+c*i)/(e*i-d*c),n=(e*i-c*d)/k,e*i<c*d&&(f=-f,k=-k)):k=n=f=0,{translateX:b(a[4]),translateY:b(a[5]),rotate:b(180*Math.atan2(c,e)/Math.PI),skewX:b(180*Math.atan(f)/
Math.PI),skewY:0,scaleX:b(k),scaleY:b(n)}}return c}function l(){l.superclass.constructor.apply(this,arguments)}var i=e("dom"),o=e("./fx"),m=j.Features.isTransform3dSupported()?"translate3d({translateX}px,{translateY}px,0)":"translate({translateX}px,{translateY}px)";j.extend(l,o,{load:function(){l.superclass.load.apply(this,arguments);this.from=(this.from=i.style(this.anim.node,"transform")||this.from)&&"none"!==this.from?c(this.from):h();this.to=this.to?c(this.to):h()},interpolate:function(a,b,c){var f=
l.superclass.interpolate,d={};d.translateX=f(a.translateX,b.translateX,c);d.translateY=f(a.translateY,b.translateY,c);d.rotate=f(a.rotate,b.rotate,c);d.skewX=f(a.skewX,b.skewX,c);d.skewY=f(a.skewY,b.skewY,c);d.scaleX=f(a.scaleX,b.scaleX,c);d.scaleY=f(a.scaleY,b.scaleY,c);return j.substitute(m+" rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",d)}});return o.Factories.transform=l});
KISSY.add("anim/timer","dom,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color,./timer/transform".split(","),function(j,e){function g(){var a;g.superclass.constructor.apply(this,arguments);j.each(a=this.to,function(b,c){var d=m(c);if(c!==d){a[d]=a[c];delete a[c]}})}var h=e("dom"),b=e("./base"),c=e("./timer/easing"),l=e("./timer/manager"),i=e("./timer/fx"),o=e("./timer/short-hand");e("./timer/color");e("./timer/transform");var m=h._camelCase,a=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;
j.extend(g,b,{prepareFx:function(){var b=this.node,e=this._propsData;j.each(e,function(a){a.duration=a.duration*1E3;a.delay=a.delay*1E3;if(typeof a.easing==="string")a.easing=c.toFn(a.easing)});j.each(o,function(a,c){var d,f=e[c],g;if(f){g=f.value;d={};j.each(a,function(a){d[a]=h.css(b,a)});h.css(b,c,g);j.each(d,function(a,c){c in e||(e[c]=j.merge(f,{value:h.css(b,c)}));h.css(b,c,a)});delete e[c]}});var f,d,g,l,m,p,r,u=0,q;j.isPlainObject(b)&&(u=1);for(f in e){d=e[f];g=d.value;p={isCustomFx:u,prop:f,
anim:this,fxType:d.fxType,type:d.type,propData:d};r=i.getFx(p);l=g;m=r.cur();g=g+"";q="";if(g=g.match(a)){l=parseFloat(g[2]);if((q=g[3])&&q!=="px"&&m){var s=0,t=l;do{++t;h.css(b,f,t+q);s=r.cur()}while(s===0);m=t/s*m;h.css(b,f,m+q)}g[1]&&(l=(g[1]==="-="?-1:1)*l+m)}p.from=m;p.to=l;p.unit=q;r.load(p);d.fx=r}},frame:function(){var a,b=1,c,d=this._propsData;for(a in d){c=d[a];c=c.fx;c.frame();if(this.isRejected()||this.isResolved())return;b=b&c.pos===1}d=j.now();a=this.config.duration*1E3;d=Math.max(0,
this.startTime+a-d);this.defer.notify([this,1-(d/a||0),d]);b&&this.stop(b)},doStop:function(a){var b,c=this._propsData;l.stop(this);if(a)for(b in c){a=c[b];(a=a.fx)&&a.frame(1)}},doStart:function(){l.start(this)}});g.Easing=c;g.Fx=i;return g});
/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:15
*/
KISSY.add("anim/transition",["dom","event/dom","./base"],function(g,h){function p(c){var b="";g.each(c,function(c,a){b&&(b+=",");b+=a+" "+c.duration+"s "+c.easing+" "+c.delay+"s"});return b}function k(){k.superclass.constructor.apply(this,arguments)}var i=h("dom"),m=h("event/dom"),q=h("./base"),l=g.Features,n=l.getVendorCssPropPrefix("transition"),r=/([A-Z]|^ms)/g,o=n?n.toLowerCase()+"TransitionEnd":"transitionend webkitTransitionEnd",j=l.getVendorCssPropName("transition");g.extend(k,q,{doStart:function(){var c=
this,b=c.node,d=b.style,a=c._propsData,f=d[j],e,h={};if(e=a.transform)delete a.transform,a[l.getVendorCssPropName("transform").replace(r,"-$1").toLowerCase()]=e;g.each(a,function(a,d){var e=a.value,f=i.css(b,d);"number"===typeof e&&(f=parseFloat(f));f===e&&setTimeout(function(){c._onTransitionEnd({originalEvent:{propertyName:d}})},0);h[d]=e});-1!==f.indexOf("none")?f="":f&&(f+=",");d[j]=f+p(a);m.on(b,o,c._onTransitionEnd,c);i.css(b,h)},beforeResume:function(){var c=this._propsData,b=g.merge(c),d=
this._runTime/1E3;g.each(b,function(a,b){var e=d;a.delay>=e?a.delay-=e:(e-=a.delay,a.delay=0,a.duration>=e?a.duration-=e:delete c[b])})},_onTransitionEnd:function(c){var c=c.originalEvent,b=1,d=this._propsData;d[c.propertyName]&&1!==d[c.propertyName].pos&&(d[c.propertyName].pos=1,g.each(d,function(a){if(1!==a.pos)return b=0,!1}),b&&this.stop(!0))},doStop:function(c){var b=this.node,d=b.style,a=this._propsData,f=[],e={};m.detach(b,o,this._onTransitionEnd,this);g.each(a,function(a,d){c||(e[d]=i.css(b,
d));f.push(d)});a=g.trim(d[j].replace(RegExp("(^|,)\\s*(?:"+f.join("|")+")\\s+[^,]+","gi"),"$1")).replace(/^,|,,|,$/g,"")||"none";d[j]=a;i.css(b,e)}});return k});
KISSY.add("fp/mods/util",function(e,t){var n=e.unparam(document.location.search.substring(1));var a="debug"in n;var i=window.g_config||{};var o=window["mmstat"]=new Image;var r={smartLazy:function(t,n){if(window.TB&&TB.globalToolFn&&e.isFunction(TB.globalToolFn.smartLazy)){TB.globalToolFn.smartLazy(t,n||i.smartLazyDelay||4e3)}else{t&&t()}},mmstat:function(e){var t=this;if(!e)return;t.send("//gm.mmstat.com/"+e)},send:function(e){if(!e)return;o.src=e},log:function(){if(!a)return;console&&console.log(arguments)},randomInt:function(e,t){return Math.round(Math.random()*(t-e))+e},dateParse:function(e){console.log(e);var t=e.match(/\d+/g);if(t[0].length<4){t=[(new Date).getFullYear()].concat(t)}return+new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]||0)},addQueryString:function(t,n){if(!t)return"";var a=e.param(n);if(~t.indexOf("?")){t=t.replace("?","?"+a+"&")}else{t+="?"+a}return t},cdnNearest:function(){var e={general:[{w:970,h:970},{w:960,h:960},{w:790,h:420},{w:760,h:760},{w:728,h:728},{w:720,h:720},{w:670,h:670},{w:660,h:440},{w:640,h:640},{w:640,h:480},{w:600,h:600},{w:580,h:580},{w:570,h:570},{w:560,h:840},{w:560,h:560},{w:560,h:370},{w:540,h:540},{w:500,h:1e3},{w:500,h:450},{w:490,h:490},{w:490,h:330},{w:485,h:175},{w:480,h:480},{w:480,h:420},{w:468,h:468},{w:460,h:460},{w:430,h:430},{w:420,h:280},{w:400,h:400},{w:400,h:152},{w:360,h:360},{w:350,h:1e3},{w:350,h:350},{w:336,h:336},{w:320,h:480},{w:320,h:320},{w:315,h:315},{w:310,h:310},{w:300,h:1e3},{w:300,h:300},{w:290,h:290},{w:280,h:410},{w:270,h:270},{w:270,h:180},{w:264,h:100},{w:250,h:250},{w:250,h:225},{w:240,h:240},{w:234,h:234},{w:230,h:230},{w:230,h:87},{w:220,h:330},{w:220,h:220},{w:210,h:1e3},{w:210,h:210},{w:210,h:140},{w:200,h:200},{w:190,h:190},{w:190,h:43},{w:180,h:230},{w:180,h:180},{w:180,h:180},{w:170,h:170},{w:170,h:120},{w:160,h:240},{w:160,h:180},{w:160,h:160},{w:160,h:90},{w:150,h:200},{w:145,h:145},{w:140,h:100},{w:130,h:130},{w:128,h:128},{w:125,h:125},{w:120,h:160},{w:120,h:120},{w:120,h:90},{w:115,h:100},{w:110,h:110},{w:110,h:90},{w:100,h:1e3},{w:100,h:150},{w:100,h:100},{w:96,h:54},{w:90,h:135},{w:90,h:90},{w:90,h:60},{w:90,h:45},{w:88,h:88},{w:81,h:65},{w:80,h:1e3},{w:80,h:80},{w:80,h:60},{w:80,h:40},{w:75,h:100},{w:72,h:72},{w:70,h:1e3},{w:70,h:70},{w:64,h:64},{w:60,h:90},{w:60,h:60},{w:60,h:30},{w:50,h:50},{w:48,h:48},{w:40,h:40},{w:36,h:36},{w:32,h:32},{w:30,h:30},{w:24,h:24},{w:20,h:20},{w:16,h:16}],ignoreHeight:[{w:790,h:1e4},{w:620,h:1e4},{w:580,h:1e4},{w:570,h:1e4},{w:450,h:1e4},{w:290,h:1e4},{w:240,h:1e4},{w:220,h:1e4},{w:170,h:1e4},{w:150,h:1e4},{w:110,h:1e4}],ignoreWidth:[{w:1e4,h:500},{w:1e4,h:340},{w:1e4,h:220},{w:1e4,h:170}]};var t={};function n(e,t){return Math.min(Math.abs(e.w-t.w),Math.abs(e.h-t.h))}function a(e,t){return Math.abs(e.w-t.w)+Math.abs(e.h-t.h)}return function(i){if(!i||!i.w&&!i.h)return;var o={w:0,h:0};if(i&&(i.ignoreWidth||i.ignoreHeight)){var r=i.ignoreWidth?i.h:i.w,s=i.ignoreWidth?"h":"w",d=i.ignoreWidth?e.ignoreWidth:e.ignoreHeight,l=1e6;for(var c=0;c<d.length;c++){var u=d[c],f=u[s];if(f>=r&&f-r<l){l=f-r;o=u}}}else{var p=e.general,m=i.w+"_"+i.h,l=1e6,v=1e6;if(t[m])return t[m];for(var c=0;c<p.length;c++){var h=p[c];if(h.w>=i.w&&h.h>=i.h){var g=n(h,i),y=a(h,i);if(g<=l){l=g;v=y;o=h}else if(g==l){if(y<v){v=y;o=h}}}else if(h.w<i.w){break}else{continue}}}if(o.w&&o.h){t[m]=o;return o}else{return null}}}(),getOptimalPic:function(){return function(e,t,n){var a=this;if(!e)return"";if(window.devicePixelRatio===2||e.indexOf(".gif")>0){return e}else{return e+(i.optimal||"_q75.jpg")}}}(),isSupportWebp:function(e){var n=new Image;n.onload=function(){t.sendTrack(24,"Fp.isSupportWebp","\u68c0\u6d4bWebp\u662f\u5426\u652f\u6301");if(e&&e.needFlag){window["fpSupportWebp"]=true;window["WEBP_SUFFIX"]="_.webp"}e&&e.cb&&e.cb(n.width>0&&n.height>0)};n.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA=="}};return r},{requires:["mui/code-tracker"]});KISSY.add("mui/code-tracker/code-tracker",function(n){var e=n.unparam(document.location.search.substring(1));var o="disableSampling"in e;var a="debug"in e;var t=window.g_config||{};var r=window["mmstat"]=new Image;function c(e){var o=this;o.configData=n.merge(c.Config,e)}c.Config={numLev:13,url:document.location.href};n.augment(c,{config:function(e){var o=this;return o.configData=n.merge(o.configData,e)},send:function(n){if(!n)return;r.src=n},sendTrack:function(e,r,c,i){var d=this;var m=d.configData.numLev;var s=n.now()-(i||t&&t.startTime||0);e=Math.max(e,m+4);var u=Math.round(Math.pow(2,e-m));if(!o&&Math.floor(Math.random()*u)>0){return}var g=["[u"+d.configData.url+"]","[t"+s+"]","[c"+r+"]","[r"+u+"]"].join("")+(c||"");var f="",l;try{l=/_nk_=([^;]+)/.exec(document.cookie);if(l){f=decodeURIComponent(l[1])}}catch(v){}if(a){n.log({name:r,time:s+"ms",sampling:"1/"+u,desc:c})}d.send("//gm.mmstat.com/jstracker.2?"+["type=9","id=jstracker","v=0.01","nick="+encodeURIComponent(f),"islogin=0","msg="+encodeURIComponent(g),"file="+encodeURIComponent(d.configData.url),"line="+u,"scrolltop="+(document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0),"screen="+screen.width+"x"+screen.height,"t="+(new Date).valueOf()].join("&"))}});var i=new c;var d=function(){};n.mix(c,{configData:i.configData,config:i.config,send:i.send,sendTrack:i.sendTrack,saveTrack:d,getTrack:d,printTrack:d});window.CodeTracker=window.CodeTracker||c;return c});KISSY.add("fp/mods/targeted-delivery",function(e,t,a,n){var i="//delta.taobao.com/home/delivery/AllContentByPage.do?resourceIds=",o="tt-1141523-37076",r="tt-1141523-37078",s="tt-1141523-37080",d="tt-1141523-37081",l={},c=true,u=0,f=0,p=false,m,v=window.g_config||{};l[o]=t.one("#J_TDFirst");l[r]=t.one("#J_TDThird");l[s]=t.one("#J_TDFifth");var h=function(){var e=KISSY.clone(window.__content_results),a=false,i=false;for(var r=0,s=e.length;r<s;r++){if(e[r].id===o){a=true}if(e[r].id&&e[r].id!==d){T(e[r])}else if(e[r].id&&e[r].id===d){if(e[r].img&&e[r].img!==""&&e[r].href&&e[r].href!==""&&e[r].text&&e[r].text!==""){var c=t.one(".j_TDXiaoJiao");c.one(".j_XiaojiaoPic").attr({src:n.get(e[r].img)}).attr({alt:e[r].text});c.one(".j_XiaojiaoLink").attr({href:e[r].href});c.removeClass(".td-loading");i=true}}}if(a===false){_(l[o])}if(i===false){w()}};var g=function(){_(l[o]);w()};var y=function(a){var n=false;if(c===false){if(document.readyState==="complete"){m=e.later(function(){n=true;a()},u)}else{t(window).on("load",function(){m=e.later(function(){n=true;a()},u)})}}else{m=e.later(function(){n=true;a()},u)}if(p===true){var i=e.buffer(function(){if(n===false){m&&m.cancel&&m.cancel();e.later(function(){n=true;a()},f)}t(document.body).detach("mousemove keydown mousedown",i);t(window).detach("scroll",i)},100);t(document.body).on("mousemove keydown mousedown",i);t(window).on("scroll",i)}};var _=function(e){var a=e.one(".j_DajiaoLink").attr("data-href");if(a&&a!==""){e.one(".j_DajiaoLink").attr({href:e.one(".j_DajiaoLink").attr("data-href")})}var i=e.one(".j_MainBanner");if(i.attr("data-src")&&i.attr("data-src")!==""){i.on("load",function(){e.css({background:e.attr("data-bg")})});i.attr({src:n.get(i.attr("data-src"))})}t.all(".td-loading").removeClass("td-loading");e.one(".j_BannerContainer").addClass("banner-exposure")},w=function(){var e=t.one(".j_TDXiaoJiao");var a=e.one(".j_XiaojiaoPic").attr("data-src");if(a&&a!==""){e.one(".j_XiaojiaoPic").attr({src:n.get(a)})}var i=e.one(".j_XiaojiaoLink").attr("data-href");if(i&&i!==""){e.one(".j_XiaojiaoLink").attr({href:i})}},b=function(e){var t=["id","color","href","text","textImg","img"];for(var a=0,n=t.length;a<n;a++){var i=e[t[a]];if(!i){return false}}return true},T=function(e){if(b(e)===false){if(e.id===o){_(l[e.id])}return}var i=l[e.id];if(!i)return;i.one(".j_DajiaoLink").attr({href:e.href});if(e.id===o){i.one(".j_MainBanner").on("load",function(){i.css({background:e.color})});i.one(".j_MainBanner").attr({src:n.get(e.img)}).attr({alt:e.text}).attr({"data-src":""});i.one(".j_TextBanner").attr({"data-src":""});if(a.ie<7){i.one(".j_TextBanner").css({filter:'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+e.textImg+"\"),sizingMethod='noscale'"})}else{i.one(".j_TextBanner").css({background:"url('"+n.get(e.textImg)+"') no-repeat center center"})}t.all(".td-loading").removeClass("td-loading");i.one(".j_BannerContainer").addClass("banner-exposure")}else{i.one(".j_MainBanner").on("load",function(){i.css({background:e.color})});i.one(".j_MainBanner").attr({"data-src":n.get(e.img)}).attr({alt:e.text});i.one(".j_TextBanner").attr({"data-src":n.get(e.textImg)})}};return{init:function(a){var n=this;n.cfg=a;if(a&&a["isImmediately"]!==undefined){c=a["isImmediately"]}if(a&&e.isNumber(a["delay"])){u=a["delay"]}if(a&&a["quickResponsive"]){p=a["quickResponsive"]}if(a&&a["quickResponsiveDelay"]){f=a["quickResponsiveDelay"]}if(!t.one(l[o])&&!t.one(".j_TDXiaoJiao")){return}e.getScript(i+o+","+r+","+s+","+d,{success:function(){y(h)},error:function(){y(g)},timeout:1,charset:"gbk"})}}},{requires:["node","ua","fp/mods/webp"]});KISSY.add("fp/mods/webp",function(e){var n=false;var t=false;var a=false;var i=false;var r=[];var o="";var s=0;var d=7;var c=window.g_config||{};var l=/\.webp$/;return{init:function(){var e=this;e._testJPG();e._testPNG();e._testAlpha();i=true},hasSuffix:function(e){return l.test(e)},_loadDone:function(e,n){s|=e;this._checkDone(n)},_testJPG:function(e){var t=this;var a=new Image;a.onload=function(){n=true;r.push("jpg");r.push("jpeg");t._loadDone(1,e)};a.onerror=function(){t._loadDone(1,e)};a.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"},_testPNG:function(e){var n=this;var a=new Image;a.onload=function(){t=true;r.push("png");n._loadDone(2,e)};a.onerror=function(){n._loadDone(2,e)};a.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA=="},_testAlpha:function(e){var n=this;var t=new Image;t.onload=function(){a=true;n._loadDone(4,e)};t.onerror=function(){n._loadDone(4,e)};t.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA=="},_checkDone:function(i){var r=this;if(s===d){if(r["canAddSuffixReg"]===undefined){r._generateReg()}if(i&&i.__webp__hadExec===undefined){i.__webp__hadExec=true;e.isFunction(i)&&i({jpg:n,png:t,alpha:a})}}else{return false}},_generateReg:function(){o=r.join("|");if(r.length>0){this["canAddSuffixReg"]=new RegExp(o+"$","i");this["transformReg"]=new RegExp("(."+o+')s*"',"gi")}},isSupport:function(e){var n=this;if(n._checkDone(e)===false){n._testJPG(e);n._testPNG(e);n._testAlpha(e)}},get:function(e,n){var a=this;if(s===d){if(a.canAddSuffixReg&&a.canAddSuffixReg.test(e)){if(t||t===false&&e.indexOf(".png")<0){return e+(n?n:"_.webp")}}}return e},transform:function(e,n){if(s===d){if(this.transformReg!==undefined){e=e.replace(this.transformReg,"$1"+(n?n:"_.webp")+'"');if(t===false){e=e.replace(new RegExp("(\\.png_.+?\\.(?:jpg|jpeg))"+(n?n:"_\\.webp"),"gi"),"$1")}}}return e}}},{requires:[]});KISSY.add("fp/mods/hp-scroll",function(e,t,n){var a=true;var i=false;var r=false;var o={init:function(){a=s();if(!a){this.delegateScroll()}var t=this;e.ready(function(){t.start()})},delegateScroll:function(){var e=n.on;n.on=function(t,n,a,r){var o=a;if(/mouseenter | mouseleave/.test(n)){a=function(e){if(i){return}else{o(e)}}}e(t,n,a,r)}},start:function(){var o;n.on(window,"scroll touchmove",e.buffer(function(){if(!i){i=true;if(!r&&a){t.css("body",{pointerEvents:"none"});r=true}}clearTimeout(o);o=setTimeout(function(){i=false;if(a){t.css("body",{pointerEvents:""});r=false}},300)},150));n.on("body","click tap",function(e){if(!e.synthetic&&i){clearTimeout(o);i=false;if(a){t.css("body",{pointerEvents:""});r=false;var n={x:event.clientX,y:event.clientY};d(n,e.type)}}})}};function s(){var e=t.create("<div></div>");t.css(e,{pointerEvents:"auto"});return t.css(e,"pointerEvents")==="auto"}function d(e,t){var a=document.elementFromPoint(e.x,e.y);n.fire(a,t,{synthetic:true})}return o},{requires:["dom","event"]});KISSY.add("fp/mods/app-guide",function(e,i){var o=e.Env.mods;if(!o["mui/app-guide/main"]){e.config({modules:{"mui/app-guide/config":{path:"mui/app-guide/1.0.0/js/config.js"},"mui/app-guide/main":{requires:["node","dom","event","mui/app-guide/config","mui/app-guide/model","mui/app-guide/tpl","mui/app-guide/css/app-guide.css"],path:"mui/app-guide/1.0.0/js/main.js"},"mui/app-guide/model":{requires:["io","json","mui/storage","mui/app-guide/config"],path:"mui/app-guide/1.0.0/js/model.js"},"mui/app-guide/tpl":{requires:["xtemplate"],path:"mui/app-guide/1.0.0/js/tpl.js"},"mui/app-guide/css/app-guide.css":{path:"mui/app-guide/1.0.0/css/app-guide.css"}}});if(!o["mui/smart-banner"]){e.config({modules:{"mui/smart-banner":{path:"mui/smartbanner/1.1.3/smart-banner.js",requires:["dom","event","base","cookie"]}}})}}return{init:function(){var e=i('<div class="j_AppGuideCon"></div>');i(document.body).prepend(e);KISSY.use("mui/app-guide/main",function(e,i){var o=new i({container:".j_AppGuideCon",type:"big-head"});o.show()})}}},{requires:["node"]});KISSY.add("fp/mods/market-ald",function(e,t,n,a){var i=["{{#each data}}",'   <a href="{{url}}">{{title}}</a>',"{{/each}}"].join("");var r={init:function(){var t=e.one("#J_CategoryMarketList");if(!t)return;a.marketAld(function(e){t.html(new n(i).render(e))})}};return r},{requires:["node","xtemplate","fp/mods/model"]});/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:32
*/
KISSY.add("xtemplate",["xtemplate/runtime","xtemplate/compiler"],function(g,h){function b(a,c){c=g.merge(k,c);if("string"===typeof a){var e=a,f=c,d;if(!f.cache||!(d=i[e]))d=j.compileToFn(e,f),f.cache&&(i[e]=d);a=d}b.superclass.constructor.call(this,a,c)}var a=h("xtemplate/runtime"),j=h("xtemplate/compiler"),i=b.cache={},k={cache:!0};g.extend(b,a,{},{compiler:j,Scope:a.Scope,RunTime:a,addCommand:a.addCommand,removeCommand:a.removeCommand});return b});
/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:31
*/
KISSY.add("xtemplate/runtime/scope",[],function(g){function l(e,f){this.data=e||{};this.affix=f;this.root=this}l.prototype={isScope:1,setParent:function(e){this.parent=e;this.root=e.root},getParent:function(){return this.parent},getRoot:function(){return this.root},set:function(e,f){this.affix||(this.affix={});this.affix[e]=f},setData:function(e){this.data=e},getData:function(){return this.data},mix:function(e){this.affix||(this.affix={});g.mix(this.affix,e)},has:function(e){var f=this.data,i=this.affix;
return i&&e in i?!0:"object"===typeof f&&e in f},get:function(e){var f=this.data,i=this.affix;if(i&&e in i)return i[e];if("object"===typeof f&&e in f)return f[e]},resolve:function(e,f){"."===e&&(e="this");var i=e.split("."),d=this,b,c,a,g,k;if("root"===i[0])i.shift(),d=d.root;else if(f)for(;d&&f--;)d=d.parent;var h=0;for(b=i.length;d;){k=1;a=d;for(c=0;c<b;c++)if(g=i[c],"this"===g)h=1;else if(a===d)if(d.has(g))a=d.get(g),h=1;else{k=0;break}else{if(null==a||"object"!==typeof a||!(g in a)){k=0;break}a=
a[g]}if(k)return a&&a.isScope&&(a=a.data),"function"===typeof a&&(a=a.call(this.data)),[a];if(h)break;d=d.parent}return!1}};return l});
KISSY.add("xtemplate/runtime/commands",["path","./scope"],function(g,l){var e,f=l("path"),i=l("./scope");return e={"debugger":g.noop,each:function(d,b){var c=b.params,a=c[0],e=c[2]||"xindex",c=c[1],f="",h,j,m;if(a)if(j=new i,g.isArray(a)){h=a.length;for(var n=0;n<h;n++)j.data=a[n],m=j.affix={xcount:h},m[e]=n,c&&(m[c]=a[n]),j.setParent(d),f+=b.fn(j)}else for(h in a)j.data=a[h],m=j.affix={},m[e]=h,c&&(m[c]=a[h]),j.setParent(d),f+=b.fn(j);else b.inverse&&(f=b.inverse(d));return f},"with":function(d,
b){var c=b.params[0],a="";c?(c=new i(c),c.setParent(d),a=b.fn(c)):b.inverse&&(a=b.inverse(d));return a},"if":function(d,b){var c="";b.params[0]?b.fn&&(c=b.fn(d)):b.inverse&&(c=b.inverse(d));return c},set:function(d,b){d.mix(b.hash);return""},include:function(d,b){var c=b.params;if(!c||1!==c.length)return"";if(b.hash){var a=new i(b.hash);a.setParent(d);d=a}a=this.config.name;c=c[0];if("."===c.charAt(0)){if("unspecified"===a)return"";c=f.resolve(a,"../",c)}a=this.config.loader.call(this,c);b=g.merge(this.config);
b.name=c;b.commands=this.config.commands;b.macros=this.config.macros;return this.invokeEngine(a,d,b)},macro:function(d,b){var c=b.params,a=c[0],e=c.slice(1),c=this.config.macros;if(b.fn)c[a]||(c[a]={paramNames:e,fn:b.fn});else{var f={},a=c[a];g.each(a.paramNames,function(c,j){f[c]=e[j]});c=new i(f);return a.fn.call(this,c)}return""},parse:function(d,b){return e.include.call(this,new i,b)}}});
KISSY.add("xtemplate/runtime",["./runtime/commands","./runtime/scope"],function(g,l){function e(){}function f(j,c){for(var a=c.split("."),b=j,e=a.length,d=0;d<e&&!(b=b[a[d]],!b);d++);return b}function i(j,c,a,b){var d;if(b=f(j.config.commands,b)){try{d=b.call(j,c,a)}catch(e){}return{find:!0,value:d}}return{find:!1}}function d(j,c,a,b,d){var f,j=j.config.silent?e:g.error,c=c.resolve(a,b);!1===c?j('can not find property: "'+a+'" at line '+d,"warn"):f=c[0];return f}function b(j,a){this.tpl=j;a=g.merge(h,
a);a.commands=g.merge(a.commands,c);a.utils=k;a.macros=a.macros||{};this.config=a}var c=l("./runtime/commands"),a=l("./runtime/scope"),p=g.escapeHtml,k={runBlockCommand:function(a,c,b,d,i){var h=a.config,l=h.silent?e:g.error,h=h.commands,o=f(h,d);if(!o)if(!b.params&&!b.hash){var k=c.resolve(d);!1===k?(l('can not find property: "'+d+'" at line '+i),k=""):k=k[0];o=h["if"];g.isArray(k)?o=h.each:"object"===typeof k&&(o=h["with"]);b.params=[k]}else return"";var q;try{q=o.call(a,c,b)}catch(p){}return q},
renderOutput:function(a,c){void 0===a&&(a="");return c&&a?p(a):a},getProperty:function(a,c,b,e,f){return d(a,c,b,e,f)},runInlineCommand:function(a,c,b,d,e){var f="",a=i(a,c,b,d,e);a.find&&(f=a.value);return f},getPropertyOrRunCommand:function(a,c,b,e,f,g){var h,k=b.hash||b.params,b=i(a,c,b,e,g,k);b.find?h=b.value:k||(h=d(a,c,e,f,g));return h}},h={silent:!0,name:"unspecified",loader:function(a){return g.require(a)}};g.mix(b,{commands:c,utils:k,addCommand:function(a,b){c[a]=b},removeCommand:function(a){delete c[a]}});
b.prototype={constructor:b,invokeEngine:function(a,b,c){return(new this.constructor(a,c)).render(b,!0)},removeCommand:function(a){delete this.config.commands[a]},addCommand:function(a,b){this.config.commands[a]=b},render:function(b){var c=b;if(!c||!c.isScope)c=new a(b);return this.tpl(c,g)}};b.Scope=a;return b});
/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:31
*/
KISSY.add("xtemplate/compiler/parser",[],function(l,a){var c={},b=KISSY,e=function(a){this.rules=[];b.mix(this,a);this.resetInput(this.input)};e.prototype={constructor:function(a){this.rules=[];b.mix(this,a);this.resetInput(this.input)},resetInput:function(a){b.mix(this,{input:a,matched:"",stateStack:[e.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},genShortId:function(a){a+="__gen";a in this||(this[a]=-1);var a=this[a]+=1,d="";do d=String.fromCharCode(97+
a%26)+d,a=Math.floor(a/26)-1;while(0<=a);return d},getCurrentRules:function(){var a=this.stateStack[this.stateStack.length-1],d=[],a=this.mapState(a);b.each(this.rules,function(i){var c=i.state||i[3];c?b.inArray(a,c)&&d.push(i):a===e.STATIC.INITIAL&&d.push(i)});return d},pushState:function(a){this.stateStack.push(a)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var a=e.STATIC.DEBUG_CONTEXT_LIMIT,d=this.matched,c=this.match,
b=this.input,d=d.slice(0,d.length-c.length),d=(d.length>a?"...":"")+d.slice(-a).replace(/\n/," "),c=c+b,c=c.slice(0,a)+(c.length>a?"...":"");return d+c+"\n"+Array(d.length+1).join("-")+"^"},mapSymbol:function(a){var c=this.symbolMap;return!c?a:c[a]||(c[a]=this.genShortId("symbol"))},mapReverseSymbol:function(a){var c=this.symbolMap,e,b=this.reverseSymbolMap;if(!b&&c)for(e in b=this.reverseSymbolMap={},c)b[c[e]]=e;return b?b[a]:a},mapState:function(a){var c=this.stateMap;return!c?a:c[a]||(c[a]=this.genShortId("state"))},
lex:function(){var c=this.input,d,i,m,g=this.getCurrentRules();this.match=this.text="";if(!c)return this.mapSymbol(e.STATIC.END_TAG);for(d=0;d<g.length;d++){i=g[d];var n=i.token||i[0];m=i.action||i[2]||a;if(i=c.match(i.regexp||i[1])){if(d=i[0].match(/\n.*/g))this.lineNumber+=d.length;b.mix(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:d?d[d.length-1].length-1:this.lastColumn+i[0].length});d=this.match=i[0];this.matches=i;this.text=d;this.matched+=
d;m=m&&m.call(this);m=m===a?n:this.mapSymbol(m);this.input=c=c.slice(d.length);return m?m:this.lex()}}return a}};e.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var g=new e({rules:[[0,/^[\s\S]*?(?={{)/,function(){var a=this.text,c,e=0;if(c=a.match(/\\+$/))e=c[0].length;e%2?(this.pushState("et"),a=a.slice(0,-1)):this.pushState("t");e&&(a=a.replace(/\\+$/g,function(a){return Array(a.length/2+1).join("\\")}));this.text=a;return"CONTENT"}],["b",/^[\s\S]+/,0],["b",/^[\s\S]{2,}?(?:(?={{)|$)/,
function(){this.popState()},["et"]],["c",/^{{(?:#|@|\^)/,0,["t"]],["d",/^{{\//,0,["t"]],["e",/^{{\s*else\s*}}/,function(){this.popState()},["t"]],[0,/^{{![\s\S]*?}}/,function(){this.popState()},["t"]],["b",/^{{%([\s\S]*?)%}}/,function(){this.text=this.matches[1]||"";this.popState()},["t"]],["f",/^{{{?/,0,["t"]],["g",/^\s+/,0,["t"]],["h",/^}}}?/,function(){this.popState()},["t"]],["i",/^\(/,0,["t"]],["j",/^\)/,0,["t"]],["k",/^\|\|/,0,["t"]],["l",/^&&/,0,["t"]],["m",/^===/,0,["t"]],["n",/^!==/,0,["t"]],
["o",/^>=/,0,["t"]],["p",/^<=/,0,["t"]],["q",/^>/,0,["t"]],["r",/^</,0,["t"]],["s",/^\+/,0,["t"]],["t",/^-/,0,["t"]],["u",/^\*/,0,["t"]],["v",/^\//,0,["t"]],["w",/^%/,0,["t"]],["x",/^!/,0,["t"]],["y",/^"(\\[\s\S]|[^\\"])*"/,function(){this.text=this.text.slice(1,-1).replace(/\\"/g,'"')},["t"]],["y",/^'(\\[\s\S]|[^\\'])*'/,function(){this.text=this.text.slice(1,-1).replace(/\\'/g,"'")},["t"]],["z",/^true/,0,["t"]],["z",/^false/,0,["t"]],["aa",/^\d+(?:\.\d+)?(?:e-?\d+)?/i,0,["t"]],["ab",/^=/,0,["t"]],
["ac",/^\.(?=})/,0,["t"]],["ac",/^\.\./,function(){this.pushState("ws")},["t"]],["ad",/^\//,function(){this.popState()},["ws"]],["ad",/^\./,0,["t"]],["ae",/^\[/,0,["t"]],["af",/^\]/,0,["t"]],["ac",/^[a-zA-Z0-9_$]+/,0,["t"]],["ag",/^./,0,["t"]]]});c.lexer=g;g.symbolMap={$EOF:"a",CONTENT:"b",OPEN_BLOCK:"c",OPEN_CLOSE_BLOCK:"d",INVERSE:"e",OPEN_TPL:"f",SPACE:"g",CLOSE:"h",LPAREN:"i",RPAREN:"j",OR:"k",AND:"l",LOGIC_EQUALS:"m",LOGIC_NOT_EQUALS:"n",GE:"o",LE:"p",GT:"q",LT:"r",PLUS:"s",MINUS:"t",MULTIPLY:"u",
DIVIDE:"v",MODULUS:"w",NOT:"x",STRING:"y",BOOLEAN:"z",NUMBER:"aa",EQUALS:"ab",ID:"ac",SEP:"ad",REF_START:"ae",REF_END:"af",INVALID:"ag",$START:"ah",program:"ai",statements:"aj",statement:"ak",openBlock:"al",closeBlock:"am",tpl:"an",inBlockTpl:"ao",path:"ap",inTpl:"aq",Expression:"ar",params:"as",hash:"at",param:"au",ConditionalOrExpression:"av",ConditionalAndExpression:"aw",EqualityExpression:"ax",RelationalExpression:"ay",AdditiveExpression:"az",MultiplicativeExpression:"ba",UnaryExpression:"bb",
PrimaryExpression:"bc",hashSegments:"bd",hashSegment:"be",pathSegments:"bf"};c.productions=[["ah",["ai"]],["ai",["aj","e","aj"],function(){return new this.yy.ProgramNode(this.lexer.lineNumber,this.$1,this.$3)}],["ai",["aj"],function(){return new this.yy.ProgramNode(this.lexer.lineNumber,this.$1)}],["aj",["ak"],function(){return[this.$1]}],["aj",["aj","ak"],function(){this.$1.push(this.$2)}],["ak",["al","ai","am"],function(){return new this.yy.BlockNode(this.lexer.lineNumber,this.$1,this.$2,this.$3)}],
["ak",["an"]],["ak",["b"],function(){return new this.yy.ContentNode(this.lexer.lineNumber,this.$1)}],["ao",["ap"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1)}],["ao",["aq"]],["al",["c","ao","h"],function(){"^"===this.$1.charAt(this.$1.length-1)&&(this.$2.isInverted=1);return this.$2}],["am",["d","ap","h"],function(){return this.$2}],["an",["f","aq","h"],function(){3===this.$1.length&&(this.$2.escaped=!1);return this.$2}],["an",["f","ar","h"],function(){var a=new this.yy.TplExpressionNode(this.lexer.lineNumber,
this.$2);3===this.$1.length&&(a.escaped=!1);return a}],["aq",["ap","g","as","g","at"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,this.$3,this.$5)}],["aq",["ap","g","as"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,this.$3)}],["aq",["ap","g","at"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,null,this.$3)}],["as",["as","g","au"],function(){this.$1.push(this.$3)}],["as",["au"],function(){return[this.$1]}],["au",["ar"]],["ar",["av"]],
["av",["aw"]],["av",["av","k","aw"],function(){return new this.yy.ConditionalOrExpression(this.$1,this.$3)}],["aw",["ax"]],["aw",["aw","l","ax"],function(){return new this.yy.ConditionalAndExpression(this.$1,this.$3)}],["ax",["ay"]],["ax",["ax","m","ay"],function(){return new this.yy.EqualityExpression(this.$1,"===",this.$3)}],["ax",["ax","n","ay"],function(){return new this.yy.EqualityExpression(this.$1,"!==",this.$3)}],["ay",["az"]],["ay",["ay","r","az"],function(){return new this.yy.RelationalExpression(this.$1,
"<",this.$3)}],["ay",["ay","q","az"],function(){return new this.yy.RelationalExpression(this.$1,">",this.$3)}],["ay",["ay","p","az"],function(){return new this.yy.RelationalExpression(this.$1,"<=",this.$3)}],["ay",["ay","o","az"],function(){return new this.yy.RelationalExpression(this.$1,">=",this.$3)}],["az",["ba"]],["az",["az","s","ba"],function(){return new this.yy.AdditiveExpression(this.$1,"+",this.$3)}],["az",["az","t","ba"],function(){return new this.yy.AdditiveExpression(this.$1,"-",this.$3)}],
["ba",["bb"]],["ba",["ba","u","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"*",this.$3)}],["ba",["ba","v","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"/",this.$3)}],["ba",["ba","w","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"%",this.$3)}],["bb",["x","bb"],function(){return new this.yy.UnaryExpression(this.$1,this.$2)}],["bb",["t","bb"],function(){return new this.yy.UnaryExpression(this.$1,this.$2)}],["bb",["bc"]],["bc",["y"],
function(){return new this.yy.StringNode(this.lexer.lineNumber,this.$1)}],["bc",["aa"],function(){return new this.yy.NumberNode(this.lexer.lineNumber,this.$1)}],["bc",["z"],function(){return new this.yy.BooleanNode(this.lexer.lineNumber,this.$1)}],["bc",["ap"]],["bc",["i","ar","j"],function(){return this.$2}],["at",["bd"],function(){return new this.yy.HashNode(this.lexer.lineNumber,this.$1)}],["bd",["bd","g","be"],function(){this.$1.push(this.$3)}],["bd",["be"],function(){return[this.$1]}],["be",
["ac","ab","ar"],function(){return[this.$1,this.$3]}],["ap",["bf"],function(){return new this.yy.IdNode(this.lexer.lineNumber,this.$1)}],["bf",["bf","ad","ac"],function(){this.$1.push(this.$3)}],["bf",["bf","ae","ar","af"],function(){this.$1.push(this.$3)}],["bf",["bf","ad","aa"],function(){this.$1.push(this.$3)}],["bf",["ac"],function(){return[this.$1]}]];c.table={gotos:{"0":{ai:4,aj:5,ak:6,al:7,an:8},2:{ao:10,aq:11,ap:12,bf:13},3:{aq:20,ar:21,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:30,
bf:13},5:{ak:32,al:7,an:8},7:{ai:33,aj:5,ak:6,al:7,an:8},14:{ar:38,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},15:{bb:40,bc:29,ap:39,bf:13},16:{bb:41,bc:29,ap:39,bf:13},31:{aj:57,ak:6,al:7,an:8},33:{am:59},35:{as:61,au:62,ar:63,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,at:64,bd:65,be:66,ap:39,bf:13},37:{ar:69,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},44:{aw:71,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},45:{ax:72,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},
46:{ay:73,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},47:{ay:74,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},48:{az:75,ba:27,bb:28,bc:29,ap:39,bf:13},49:{az:76,ba:27,bb:28,bc:29,ap:39,bf:13},50:{az:77,ba:27,bb:28,bc:29,ap:39,bf:13},51:{az:78,ba:27,bb:28,bc:29,ap:39,bf:13},52:{ba:79,bb:28,bc:29,ap:39,bf:13},53:{ba:80,bb:28,bc:29,ap:39,bf:13},54:{bb:81,bc:29,ap:39,bf:13},55:{bb:82,bc:29,ap:39,bf:13},56:{bb:83,bc:29,ap:39,bf:13},57:{ak:32,al:7,an:8},58:{ap:84,bf:13},85:{ar:90,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,
bc:29,ap:39,bf:13},86:{au:91,ar:63,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,at:92,bd:65,be:66,ap:39,bf:13},87:{be:94}},action:{"0":{b:[1,a,1],c:[1,a,2],f:[1,a,3]},1:{a:[2,7],e:[2,7],c:[2,7],f:[2,7],b:[2,7],d:[2,7]},2:{ac:[1,a,9]},3:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},4:{a:[0]},5:{a:[2,2],d:[2,2],b:[1,a,1],c:[1,a,2],e:[1,a,31],f:[1,a,3]},6:{a:[2,3],e:[2,3],c:[2,3],f:[2,3],b:[2,3],d:[2,3]},7:{b:[1,a,1],c:[1,a,2],f:[1,a,3]},8:{a:[2,6],e:[2,6],c:[2,6],
f:[2,6],b:[2,6],d:[2,6]},9:{h:[2,56],g:[2,56],ad:[2,56],ae:[2,56],k:[2,56],l:[2,56],m:[2,56],n:[2,56],o:[2,56],p:[2,56],q:[2,56],r:[2,56],s:[2,56],t:[2,56],u:[2,56],v:[2,56],w:[2,56],j:[2,56],af:[2,56]},10:{h:[1,a,34]},11:{h:[2,9]},12:{h:[2,8],g:[1,a,35]},13:{h:[2,52],g:[2,52],k:[2,52],l:[2,52],m:[2,52],n:[2,52],o:[2,52],p:[2,52],q:[2,52],r:[2,52],s:[2,52],t:[2,52],u:[2,52],v:[2,52],w:[2,52],j:[2,52],af:[2,52],ad:[1,a,36],ae:[1,a,37]},14:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,
a,19],ac:[1,a,9]},15:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},16:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},17:{h:[2,43],k:[2,43],l:[2,43],m:[2,43],n:[2,43],o:[2,43],p:[2,43],q:[2,43],r:[2,43],s:[2,43],t:[2,43],u:[2,43],v:[2,43],w:[2,43],j:[2,43],g:[2,43],af:[2,43]},18:{h:[2,45],k:[2,45],l:[2,45],m:[2,45],n:[2,45],o:[2,45],p:[2,45],q:[2,45],r:[2,45],s:[2,45],t:[2,45],u:[2,45],v:[2,45],w:[2,45],j:[2,45],g:[2,45],af:[2,45]},
19:{h:[2,44],k:[2,44],l:[2,44],m:[2,44],n:[2,44],o:[2,44],p:[2,44],q:[2,44],r:[2,44],s:[2,44],t:[2,44],u:[2,44],v:[2,44],w:[2,44],j:[2,44],g:[2,44],af:[2,44]},20:{h:[1,a,42]},21:{h:[1,a,43]},22:{h:[2,20],j:[2,20],g:[2,20],af:[2,20],k:[1,a,44]},23:{h:[2,21],k:[2,21],j:[2,21],g:[2,21],af:[2,21],l:[1,a,45]},24:{h:[2,23],k:[2,23],l:[2,23],j:[2,23],g:[2,23],af:[2,23],m:[1,a,46],n:[1,a,47]},25:{h:[2,25],k:[2,25],l:[2,25],m:[2,25],n:[2,25],j:[2,25],g:[2,25],af:[2,25],o:[1,a,48],p:[1,a,49],q:[1,a,50],r:[1,
a,51]},26:{h:[2,28],k:[2,28],l:[2,28],m:[2,28],n:[2,28],o:[2,28],p:[2,28],q:[2,28],r:[2,28],j:[2,28],g:[2,28],af:[2,28],s:[1,a,52],t:[1,a,53]},27:{h:[2,33],k:[2,33],l:[2,33],m:[2,33],n:[2,33],o:[2,33],p:[2,33],q:[2,33],r:[2,33],s:[2,33],t:[2,33],j:[2,33],g:[2,33],af:[2,33],u:[1,a,54],v:[1,a,55],w:[1,a,56]},28:{h:[2,36],k:[2,36],l:[2,36],m:[2,36],n:[2,36],o:[2,36],p:[2,36],q:[2,36],r:[2,36],s:[2,36],t:[2,36],u:[2,36],v:[2,36],w:[2,36],j:[2,36],g:[2,36],af:[2,36]},29:{h:[2,42],k:[2,42],l:[2,42],m:[2,
42],n:[2,42],o:[2,42],p:[2,42],q:[2,42],r:[2,42],s:[2,42],t:[2,42],u:[2,42],v:[2,42],w:[2,42],j:[2,42],g:[2,42],af:[2,42]},30:{h:[2,46],k:[2,46],l:[2,46],m:[2,46],n:[2,46],o:[2,46],p:[2,46],q:[2,46],r:[2,46],s:[2,46],t:[2,46],u:[2,46],v:[2,46],w:[2,46],g:[1,a,35]},31:{b:[1,a,1],c:[1,a,2],f:[1,a,3]},32:{a:[2,4],e:[2,4],c:[2,4],f:[2,4],b:[2,4],d:[2,4]},33:{d:[1,a,58]},34:{c:[2,10],f:[2,10],b:[2,10]},35:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,60]},36:{aa:[1,a,67],
ac:[1,a,68]},37:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},38:{j:[1,a,70]},39:{j:[2,46],k:[2,46],l:[2,46],m:[2,46],n:[2,46],o:[2,46],p:[2,46],q:[2,46],r:[2,46],s:[2,46],t:[2,46],u:[2,46],v:[2,46],w:[2,46],h:[2,46],g:[2,46],af:[2,46]},40:{h:[2,41],k:[2,41],l:[2,41],m:[2,41],n:[2,41],o:[2,41],p:[2,41],q:[2,41],r:[2,41],s:[2,41],t:[2,41],u:[2,41],v:[2,41],w:[2,41],j:[2,41],g:[2,41],af:[2,41]},41:{h:[2,40],k:[2,40],l:[2,40],m:[2,40],n:[2,40],o:[2,40],p:[2,40],q:[2,
40],r:[2,40],s:[2,40],t:[2,40],u:[2,40],v:[2,40],w:[2,40],j:[2,40],g:[2,40],af:[2,40]},42:{a:[2,12],e:[2,12],c:[2,12],f:[2,12],b:[2,12],d:[2,12]},43:{a:[2,13],e:[2,13],c:[2,13],f:[2,13],b:[2,13],d:[2,13]},44:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},45:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},46:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},47:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],
z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},48:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},49:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},50:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},51:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},52:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},53:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,
a,18],aa:[1,a,19],ac:[1,a,9]},54:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},55:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},56:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},57:{a:[2,1],d:[2,1],b:[1,a,1],c:[1,a,2],f:[1,a,3]},58:{ac:[1,a,9]},59:{a:[2,5],e:[2,5],c:[2,5],f:[2,5],b:[2,5],d:[2,5]},60:{h:[2,56],g:[2,56],k:[2,56],l:[2,56],m:[2,56],n:[2,56],o:[2,56],p:[2,56],q:[2,56],r:[2,56],s:[2,56],
t:[2,56],u:[2,56],v:[2,56],w:[2,56],ad:[2,56],ae:[2,56],ab:[1,a,85]},61:{h:[2,15],g:[1,a,86]},62:{h:[2,18],g:[2,18]},63:{h:[2,19],g:[2,19]},64:{h:[2,16]},65:{h:[2,48],g:[1,a,87]},66:{h:[2,50],g:[2,50]},67:{h:[2,55],g:[2,55],ad:[2,55],ae:[2,55],k:[2,55],l:[2,55],m:[2,55],n:[2,55],o:[2,55],p:[2,55],q:[2,55],r:[2,55],s:[2,55],t:[2,55],u:[2,55],v:[2,55],w:[2,55],j:[2,55],af:[2,55]},68:{h:[2,53],g:[2,53],ad:[2,53],ae:[2,53],k:[2,53],l:[2,53],m:[2,53],n:[2,53],o:[2,53],p:[2,53],q:[2,53],r:[2,53],s:[2,53],
t:[2,53],u:[2,53],v:[2,53],w:[2,53],j:[2,53],af:[2,53]},69:{af:[1,a,88]},70:{h:[2,47],k:[2,47],l:[2,47],m:[2,47],n:[2,47],o:[2,47],p:[2,47],q:[2,47],r:[2,47],s:[2,47],t:[2,47],u:[2,47],v:[2,47],w:[2,47],j:[2,47],g:[2,47],af:[2,47]},71:{h:[2,22],k:[2,22],j:[2,22],g:[2,22],af:[2,22],l:[1,a,45]},72:{h:[2,24],k:[2,24],l:[2,24],j:[2,24],g:[2,24],af:[2,24],m:[1,a,46],n:[1,a,47]},73:{h:[2,26],k:[2,26],l:[2,26],m:[2,26],n:[2,26],j:[2,26],g:[2,26],af:[2,26],o:[1,a,48],p:[1,a,49],q:[1,a,50],r:[1,a,51]},74:{h:[2,
27],k:[2,27],l:[2,27],m:[2,27],n:[2,27],j:[2,27],g:[2,27],af:[2,27],o:[1,a,48],p:[1,a,49],q:[1,a,50],r:[1,a,51]},75:{h:[2,32],k:[2,32],l:[2,32],m:[2,32],n:[2,32],o:[2,32],p:[2,32],q:[2,32],r:[2,32],j:[2,32],g:[2,32],af:[2,32],s:[1,a,52],t:[1,a,53]},76:{h:[2,31],k:[2,31],l:[2,31],m:[2,31],n:[2,31],o:[2,31],p:[2,31],q:[2,31],r:[2,31],j:[2,31],g:[2,31],af:[2,31],s:[1,a,52],t:[1,a,53]},77:{h:[2,30],k:[2,30],l:[2,30],m:[2,30],n:[2,30],o:[2,30],p:[2,30],q:[2,30],r:[2,30],j:[2,30],g:[2,30],af:[2,30],s:[1,
a,52],t:[1,a,53]},78:{h:[2,29],k:[2,29],l:[2,29],m:[2,29],n:[2,29],o:[2,29],p:[2,29],q:[2,29],r:[2,29],j:[2,29],g:[2,29],af:[2,29],s:[1,a,52],t:[1,a,53]},79:{h:[2,34],k:[2,34],l:[2,34],m:[2,34],n:[2,34],o:[2,34],p:[2,34],q:[2,34],r:[2,34],s:[2,34],t:[2,34],j:[2,34],g:[2,34],af:[2,34],u:[1,a,54],v:[1,a,55],w:[1,a,56]},80:{h:[2,35],k:[2,35],l:[2,35],m:[2,35],n:[2,35],o:[2,35],p:[2,35],q:[2,35],r:[2,35],s:[2,35],t:[2,35],j:[2,35],g:[2,35],af:[2,35],u:[1,a,54],v:[1,a,55],w:[1,a,56]},81:{h:[2,37],k:[2,
37],l:[2,37],m:[2,37],n:[2,37],o:[2,37],p:[2,37],q:[2,37],r:[2,37],s:[2,37],t:[2,37],u:[2,37],v:[2,37],w:[2,37],j:[2,37],g:[2,37],af:[2,37]},82:{h:[2,38],k:[2,38],l:[2,38],m:[2,38],n:[2,38],o:[2,38],p:[2,38],q:[2,38],r:[2,38],s:[2,38],t:[2,38],u:[2,38],v:[2,38],w:[2,38],j:[2,38],g:[2,38],af:[2,38]},83:{h:[2,39],k:[2,39],l:[2,39],m:[2,39],n:[2,39],o:[2,39],p:[2,39],q:[2,39],r:[2,39],s:[2,39],t:[2,39],u:[2,39],v:[2,39],w:[2,39],j:[2,39],g:[2,39],af:[2,39]},84:{h:[1,a,89]},85:{i:[1,a,14],t:[1,a,15],
x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,9]},86:{i:[1,a,14],t:[1,a,15],x:[1,a,16],y:[1,a,17],z:[1,a,18],aa:[1,a,19],ac:[1,a,60]},87:{ac:[1,a,93]},88:{h:[2,54],g:[2,54],ad:[2,54],ae:[2,54],k:[2,54],l:[2,54],m:[2,54],n:[2,54],o:[2,54],p:[2,54],q:[2,54],r:[2,54],s:[2,54],t:[2,54],u:[2,54],v:[2,54],w:[2,54],j:[2,54],af:[2,54]},89:{a:[2,11],e:[2,11],c:[2,11],f:[2,11],b:[2,11],d:[2,11]},90:{h:[2,51],g:[2,51]},91:{h:[2,17],g:[2,17]},92:{h:[2,14]},93:{ab:[1,a,85]},94:{h:[2,49],g:[2,49]}}};c.parse=
function(c){var e=this.lexer,b,g,o=this.table,n=o.gotos,o=o.action,l=this.productions,p=[null],k=[0];for(e.resetInput(c);;){c=k[k.length-1];b||(b=e.lex());if(!b)return!1;g=o[c]&&o[c][b];if(!g){b=[];if(o[c])for(var q in o[c])b.push(this.lexer.mapReverseSymbol(q));e.showDebugInfo();b.join(", ");return!1}switch(g[0]){case 1:k.push(b);p.push(e.text);k.push(g[2]);b=null;break;case 2:var h=l[g[1]],c=h.symbol||h[0];g=h.action||h[2];var f=(h.rhs||h[1]).length,j=0,r,h=p[p.length-f];r=a;for(this.$$=h;j<f;j++)this["$"+
(f-j)]=p[p.length-1-j];g&&(r=g.call(this));h=r!==a?r:this.$$;f&&(k=k.slice(0,-2*f),p=p.slice(0,-1*f));k.push(c);p.push(h);k.push(n[k[k.length-2]][k[k.length-1]]);break;case 0:return h}}return a};return c});
KISSY.add("xtemplate/compiler/ast",[],function(l){var a={ProgramNode:function(a,b,e){this.lineNumber=a;this.statements=b;this.inverse=e}};a.ProgramNode.prototype.type="program";a.BlockNode=function(a,b,e,g){l.equals(b.path.parts,g.parts);this.lineNumber=a;this.tpl=b;this.program=e};a.BlockNode.prototype.type="block";a.TplNode=function(a,b,e,g){this.lineNumber=a;this.path=b;this.params=e;this.hash=g;this.escaped=!0;this.isInverted=!1};a.TplNode.prototype.type="tpl";a.TplExpressionNode=function(a,b){this.lineNumber=
a;this.expression=b;this.escaped=!0};a.TplExpressionNode.prototype.type="tplExpression";a.ContentNode=function(a,b){this.lineNumber=a;this.value=b};a.ContentNode.prototype.type="content";a.UnaryExpression=function(a,b){this.value=b;this.unaryType=a};a.UnaryExpression.prototype.type="unaryExpression";a.MultiplicativeExpression=function(a,b,e){this.op1=a;this.opType=b;this.op2=e};a.MultiplicativeExpression.prototype.type="multiplicativeExpression";a.AdditiveExpression=function(a,b,e){this.op1=a;this.opType=
b;this.op2=e};a.AdditiveExpression.prototype.type="additiveExpression";a.RelationalExpression=function(a,b,e){this.op1=a;this.opType=b;this.op2=e};a.RelationalExpression.prototype.type="relationalExpression";a.EqualityExpression=function(a,b,e){this.op1=a;this.opType=b;this.op2=e};a.EqualityExpression.prototype.type="equalityExpression";a.ConditionalAndExpression=function(a,b){this.op1=a;this.op2=b};a.ConditionalAndExpression.prototype.type="conditionalAndExpression";a.ConditionalOrExpression=function(a,
b){this.op1=a;this.op2=b};a.ConditionalOrExpression.prototype.type="conditionalOrExpression";a.StringNode=function(a,b){this.lineNumber=a;this.value=b};a.StringNode.prototype.type="string";a.NumberNode=function(a,b){this.lineNumber=a;this.value=b};a.NumberNode.prototype.type="number";a.BooleanNode=function(a,b){this.lineNumber=a;this.value=b};a.BooleanNode.prototype.type="boolean";a.HashNode=function(a,b){var e={};this.lineNumber=a;l.each(b,function(a){e[a[0]]=a[1]});this.value=e};a.HashNode.prototype.type=
"hash";a.IdNode=function(a,b){var e=[],g=0;this.lineNumber=a;l.each(b,function(a){".."===a?g++:e.push(a)});this.parts=e;this.string=e.join(".");this.depth=g};a.IdNode.prototype.type="id";return a});
KISSY.add("xtemplate/compiler",["xtemplate/runtime","./compiler/parser","./compiler/ast"],function(l,a){function c(a,h){a=h?b(a,!1):a.replace(/\\/g,"\\\\").replace(/'/g,"\\'");return a=a.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")}function b(a,h){return a.replace(h?i:m,function(a){a.length%2&&(a="\\"+a);return a})}function e(a,h){o.apply(a,h)}function g(a){return a[a.length-1]}var s=a("xtemplate/runtime"),d=a("./compiler/parser");d.yy=a("./compiler/ast");var i=/\\*"/g,m=/\\*'/g,
o=[].push,n=0,t=0,p={genFunction:function(a,h){var f=[];h||f.push("function(scope) {");f.push('var buffer = ""'+(h?",":";"));if(h){f.push("config = this.config,engine = this,moduleWrap, utils = config.utils;");f.push('if (typeof module !== "undefined" && module.kissy) {moduleWrap = module;}');var j="",b,c=s.utils;for(b in c)j+=b+"Util = utils."+b+",";j&&f.push("var "+j.slice(0,j.length-1)+";")}if(a){j=0;for(b=a.length;j<b;j++)e(f,this[a[j].type](a[j]))}f.push("return buffer;");return!h?(f.push("}"),
f):{params:["scope","S","undefined"],source:f}},genIdOrInlineCommand:function(a,h){var f=[],j=a.depth,b,c=a.parts,d="id"+n++;if(0===j){var g=h&&this.genConfig(h);g&&(b=g[0],e(f,g[1]))}c=this.getIdStringFromIdParts(f,c);j||l.startsWith(c,"this.")?f.push("var "+d+' = getPropertyUtil(engine,scope,"'+c+'",'+j+","+a.lineNumber+");"):b?("include"===c&&f.push('if(moduleWrap) {require("'+h.params[0].value+'");'+b+".params[0] = moduleWrap.resolveByName("+b+".params[0]);}"),f.push("var "+d+" = runInlineCommandUtil(engine,scope,"+
b+',"'+c+'",'+a.lineNumber+");")):f.push("var "+d+" = getPropertyOrRunCommandUtil(engine,scope,"+(b||"{}")+',"'+c+'",'+j+","+a.lineNumber+");");return[d,f]},genOpExpression:function(a,h){var f=[],b,c,d=this[a.op1.type](a.op1),i=this[a.op2.type](a.op2);b=d[0];c=i[0];if(b&&c)return e(f,d[1]),e(f,i[1]),f.push(b+h+c),["",f];if(!b&&!c)return e(f,d[1].slice(0,-1)),e(f,i[1].slice(0,-1)),f.push("("+g(d[1])+")"+h+"("+g(i[1])+")"),["",f];if(b&&!c)return e(f,d[1]),e(f,i[1].slice(0,-1)),f.push(b+h+"("+g(i[1])+
")"),["",f];if(!b&&c)return e(f,d[1].slice(0,-1)),e(f,i[1]),f.push("("+g(d[1])+")"+h+c),["",f]},genConfig:function(a){var h=[],b,c,d=this;if(a){c=a.params;a=a.hash;if(c||a)b="config"+n++,h.push("var "+b+" = {};");if(c){var i="params"+n++;h.push("var "+i+" = [];");l.each(c,function(a){a=d[a.type](a);a[0]?(e(h,a[1]),h.push(i+".push("+a[0]+");")):(e(h,a[1].slice(0,-1)),h.push(i+".push("+g(a[1])+");"))});h.push(b+".params="+i+";")}if(a){var k="hash"+n++;h.push("var "+k+" = {};");l.each(a.value,function(a,
b){var q=d[a.type](a);q[0]?(e(h,q[1]),h.push(k+'["'+b+'"] = '+q[0]+";")):(e(h,q[1].slice(0,-1)),h.push(k+'["'+b+'"] = '+g(q[1])+";"))});h.push(b+".hash="+k+";")}}return[b,h]},conditionalOrExpression:function(a){return this.genOpExpression(a,"||")},conditionalAndExpression:function(a){return this.genOpExpression(a,"&&")},relationalExpression:function(a){return this.genOpExpression(a,a.opType)},equalityExpression:function(a){return this.genOpExpression(a,a.opType)},additiveExpression:function(a){return this.genOpExpression(a,
a.opType)},multiplicativeExpression:function(a){return this.genOpExpression(a,a.opType)},unaryExpression:function(a){var b=[],f,c=a.unaryType,a=this[a.value.type](a.value);o.apply(b,a[1]);(f=a[0])?b.push(f+"="+c+f+";"):b[b.length-1]=""+c+g(b);return[f,b]},string:function(a){return["",["'"+c(a.value,!0)+"'"]]},number:function(a){return["",[a.value]]},"boolean":function(a){return["",[a.value]]},id:function(a){var b=[],f=a.depth,c=a.parts,e="id"+n++,c=this.getIdStringFromIdParts(b,c);b.push("var "+e+
' = getPropertyUtil(engine,scope,"'+c+'",'+f+","+a.lineNumber+");");return[e,b]},block:function(a){var b=a.program,c=[],j=a.tpl,d=this.genConfig(j),a=d[0],g=j.path,i=g.string;e(c,d[1]);a||(a=l.guid("config"),c.push("var "+a+" = {};"));c.push(a+".fn="+this.genFunction(b.statements).join("\n")+";");b.inverse&&(b=this.genFunction(b.inverse).join("\n"),c.push(a+".inverse="+b+";"));j.isInverted&&(b="inverse"+n++,c.push("var "+b+"="+a+".fn;"),c.push(a+".fn = "+a+".inverse;"),c.push(a+".inverse = "+b+";"));
if(!j.hash&&!j.params){j=g.parts;for(b=0;b<j.length;b++)if("string"!==typeof j[b]){i=this.getIdStringFromIdParts(c,j);break}}c.push("buffer += runBlockCommandUtil(engine, scope, "+a+', "'+i+'", '+g.lineNumber+");");return c},content:function(a){return["buffer += '"+c(a.value,!1)+"';"]},tpl:function(a){var b=[],c=this.genIdOrInlineCommand(a.path,a);e(b,c[1]);b.push("buffer += renderOutputUtil("+c[0]+","+a.escaped+");");return b},tplExpression:function(a){var b=[],c=a.escaped,d;d=a.expression;a=a.expression.type;
d="id"===a?this.genIdOrInlineCommand(d):this[a](d);d[0]?(e(b,d[1]),d=d[0]):(e(b,d[1].slice(0,-1)),d=g(d[1]));b.push("buffer += renderOutputUtil("+d+","+c+");");return b},getIdStringFromIdParts:function(a,b){var c="",d,g,i,k=!0;for(d=0;d<b.length;d++)g=b[d],i=g.type,k||(c+="."),i?(g=this[i](g),g[0]&&(e(a,g[1]),c+='"+'+g[0]+'+"',k=!0)):(c+=g,k=!1);return c}},k;return k={parse:function(a){return d.parse(a)},compileToStr:function(a){a=this.compile(a);return"function("+a.params.join(",")+"){\n"+a.source.join("\n")+
"}"},compile:function(a){a=this.parse(a);n=0;return p.genFunction(a.statements,!0)},compileToFn:function(a,b){var c=k.compile(a),b=b||{},d="sourceURL="+(b.name?b.name:"xtemplate"+t++)+".js";return Function.apply(null,[].concat(c.params).concat(c.source.join("\n")+"\n//@ "+d+"\n//# "+d))}}});
KISSY.add("fp/mods/model",function(e,t,a,n,i){var r=window.g_config||{};var o=e.unparam(document.location.search.substring(1));var s="__dev__"in o;var d=~document.location.host.indexOf(".demo.");var l=~document.location.host.indexOf(".daily.");var u=s||d||l;var c=u?"daily":"online";var f={ald:"//ald.taobao.com/recommend.htm",addBrand:"//brand.tmall.com/ajax/brandAddToFav.htm",delBrand:"//brand.tmall.com/ajax/brandDelFromFav.htm",addMemberExp:"//tmm.taobao.com/api/exper/tmall_homepage_exper.do",loadRgn:r.sl=="node"?"/wh/tpl/tmall-fp/3.0/helper/load":"//www.tmall.com/tmall-fp/3.0/mods/load.php",getEquityDetail:"//equity.vip.tmall.com/api/get_equity_detail.do"};var p="noCache"in o;var m=window.TB&&TB.Global&&TB.Global.storage||new a;var v={defaultBrandWalRec:function(e,t){var a=this;a.brandWallRec("",e,t)},brandWallRec:function(e,t,a){var n=this;n.load({apiName:"ald",data:{appId:"03289",type:e},timeout:r.timeout||5},function(e){if(e&&e.data&&e.data.length>=24){t&&t(e)}else{a&&a("ERR_SYS")}},a)},getActivity:function(e,t,a){var i=this;i.load({apiName:"ald",data:{appId:e.appId},timeout:r.timeout||3},function(e){if(e&&e.data&&e.data.length>0){n.send(e.exposureParam);t&&t(e)}else{a&&a("ERR_SYS")}},a)},getEquityDetail:function(e,t,a){var n=this;n.load({apiName:"getEquityDetail",data:e,timeout:r.timeout||3},t,a)},addBrand:function(e,t,a){var n=this;n.load({apiName:"addBrand",data:{_tb_token_:TB.userInfo.tbToken,brandId:e}},t,a)},delBrand:function(e,t,a){var n=this;n.load({apiName:"delBrand",data:{_tb_token_:TB.userInfo.tbToken,brandId:e}},function(e){if(e&&e["is_success"]=="T"){t&&t()}else{a&&a()}},a)},loadRgn:function(t,a,n){var o=this;i.sendTrack(22,"Fp.rgnLoad\u3010"+t.path+"\u3011","\u52a0\u8f7d\u533a\u5757\u3010"+t.path+"\u3011");if(p||r[t.path]||r.disableCache){o.loadRgnFromWeb(t,a,n)}else{m.get({k:t.path,success:function(r){if(!r||!e.trim(r.cacheData)){o.loadRgnFromWeb(t,a,n)}else{if(t.lastModifyTime<=r.cacheTime){a&&a(decodeURIComponent(r.cacheData));i.sendTrack(21,"Fp.rgnLoadSuc\u3010"+t.path+"\u3011FromCache","\u4ece\u7f13\u5b58\u52a0\u8f7d\u533a\u5757\u3010"+t.path+"\u3011\u6210\u529f,\u6700\u540e\u4e00\u6b21\u4fee\u6539\u65f6\u95f4\uff1a"+new Date(parseInt(t.lastModifyTime)).toLocaleString())}else{o.loadRgnFromWeb(t,a,n)}}}})}},loadRgnFromWeb:function(t,a,n){var r=this;i.sendTrack(22,"Fp.rgnLoadSuc\u3010"+t.path+"\u3011FromSever","\u4ece\u670d\u52a1\u7aef\u52a0\u8f7d\u533a\u5757\u3010"+t.path+"\u3011\u6210\u529f,\u6700\u540e\u4e00\u6b21\u4fee\u6539\u65f6\u95f4\uff1a"+new Date(parseInt(t.lastModifyTime)).toLocaleString());r.load({apiName:"loadRgn",dataType:"html",data:{path:t.path,t:e.now()}},function(r){r=e.trim(r);if(r){a&&a(r);m.set({k:t.path,v:{cacheData:encodeURIComponent(r),cacheTime:t.lastModifyTime}})}else{i.sendTrack(15,"Fp.rgnLoadFail\u3010"+t.path+"\u3011","\u4ece\u670d\u52a1\u7aef\u52a0\u8f7d\u533a\u5757\u3010"+t.path+"\u3011\u5931\u8d25,\u6700\u540e\u4e00\u6b21\u4fee\u6539\u65f6\u95f4\uff1a"+new Date(parseInt(t.lastModifyTime)).toLocaleString());n&&n("ERR_SYS")}},function(){i.sendTrack(15,"Fp.rgnLoadFail\u3010"+t.path+"\u3011","\u4ece\u670d\u52a1\u7aef\u52a0\u8f7d\u533a\u5757\u3010"+t.path+"\u3011\u5931\u8d25,\u6700\u540e\u4e00\u6b21\u4fee\u6539\u65f6\u95f4\uff1a"+new Date(parseInt(t.lastModifyTime)).toLocaleString());n&&n("ERR_TIMEOUT")})},addMemberExp:function(){var e=this;e.load({apiName:"addMemberExp"},function(){})},marketAld:function(e,t){var a=this;a.load({apiName:"ald",data:{appId:"03460"},timeout:r.timeout||3},function(a){if(a&&a.data&&a.data.length>0){n.send(a.exposureParam);e&&e(a)}else{t&&t("ERR_SYS")}},t)},loadAd:function(t,a){window.tanx_ssp_load_ad=window.tanx_ssp_load_ad||[];var n={};n[t]=function(e){a&&a(e)};window.tanx_ssp_load_ad.push(n);e.getScript("//p.tanx.com/ex?i="+t)},getEnv:function(){return c},isTestEnv:function(){return u},load:function(e,a,n){e.data=e.data||{};t({url:f[e.apiName],data:e.data,dataType:e.dataType||"jsonp",timeout:e.timeout||5,scriptCharset:e.scriptCharset||"gbk",success:function(e){if(!e||e.status==1111){n&&n("ERR_LIMITED")}else{a&&a(e)}},error:function(){n&&n("ERR_TIME_OUT")}})}};return v},{requires:["io","mui/storage","fp/mods/util","mui/code-tracker"]});/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 27 14:25
*/
KISSY.add("io/form-serializer",["dom"],function(d,f){function i(a){return a.replace(h,"\r\n")}var k=f("dom"),g=/^(?:select|textarea)/i,h=/\r?\n/g,a,c=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i;return a={serialize:function(c,e){return d.param(a.getFormData(c),void 0,void 0,e||!1)},getFormData:function(a){var e=[],m={};d.each(k.query(a),function(l){l=l.elements?d.makeArray(l.elements):[l];e.push.apply(e,l)});e=d.filter(e,function(l){return l.name&&
!l.disabled&&(l.checked||g.test(l.nodeName)||c.test(l.type))});d.each(e,function(l){var a=k.val(l),b;null!==a&&(a=d.isArray(a)?d.map(a,i):i(a),(b=m[l.name])?(b&&!d.isArray(b)&&(b=m[l.name]=[b]),b.push.apply(b,d.makeArray(a))):m[l.name]=a)});return m}}});
KISSY.add("io/base",["event/custom","promise"],function(d,f){function i(b){var a=b.context;delete b.context;b=d.mix(d.clone(n),b,{deep:!0});b.context=a||b;var l,j=b.type,g=b.dataType,a=b.uri=m.resolve(b.url);b.uri.setQuery("");"crossDomain"in b||(b.crossDomain=!b.uri.isSameOriginAs(m));j=b.type=j.toUpperCase();b.hasContent=!e.test(j);if(b.processData&&(l=b.data)&&"string"!==typeof l)b.data=d.param(l,void 0,void 0,b.serializeArray);g=b.dataType=d.trim(g||"*").split(c);!("cache"in b)&&d.inArray(g[0],
["script","jsonp"])&&(b.cache=!1);b.hasContent||(b.data&&a.query.add(d.unparam(b.data)),!1===b.cache&&a.query.set("_ksTS",d.now()+"_"+d.guid()));return b}function k(b){var a=this;if(!(a instanceof k))return new k(b);h.call(a);b=i(b);d.mix(a,{responseData:null,config:b||{},timeoutTimer:null,responseText:null,responseXML:null,responseHeadersString:"",responseHeaders:null,requestHeaders:{},readyState:0,state:0,statusText:null,status:0,transport:null});h.Defer(a);var c;k.fire("start",{ajaxConfig:b,io:a});
c=new (l[b.dataType[0]]||l["*"])(a);a.transport=c;b.contentType&&a.setRequestHeader("Content-Type",b.contentType);var n=b.dataType[0],e,j=b.timeout,g=b.context,m=b.headers,f=b.accepts;a.setRequestHeader("Accept",n&&f[n]?f[n]+("*"===n?"":", */*; q=0.01"):f["*"]);for(e in m)a.setRequestHeader(e,m[e]);if(b.beforeSend&&!1===b.beforeSend.call(g,a,b))return a;a.readyState=1;k.fire("send",{ajaxConfig:b,io:a});b.async&&0<j&&(a.timeoutTimer=setTimeout(function(){a.abort("timeout")},1E3*j));try{a.state=1,c.send()}catch(q){2>
a.state&&a._ioReady(-1,q.message||"send error")}return a}var g=f("event/custom"),h=f("promise"),a=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,c=/\s+/,j=function(b){return b},e=/^(?:GET|HEAD)$/,m=new d.Uri((d.Env.host.location||{}).href),a=m&&a.test(m.getScheme()),l={},n={type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!0,serializeArray:!0,processData:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",
"*":"*/*"},converters:{text:{json:d.parseJson,html:j,text:j,xml:d.parseXML}},headers:{"X-Requested-With":"XMLHttpRequest"},contents:{xml:/xml/,html:/html/,json:/json/}};n.converters.html=n.converters.text;d.mix(k,g.Target);d.mix(k,{isLocal:a,setupConfig:function(b){d.mix(n,b,{deep:!0})},setupTransport:function(b,a){l[b]=a},getTransport:function(b){return l[b]},getConfig:function(){return n}});return k});
KISSY.add("io/xhr-transport-base",["./base"],function(d,f){function i(a,n){try{return new (n||h).XMLHttpRequest}catch(b){}}function k(a){var n;a.ifModified&&(n=a.uri,!1===a.cache&&(n=n.clone(),n.query.remove("_ksTS")),n=n.toString());return n}var g=f("./base"),h=d.Env.host,a=7<d.UA.ieMode&&h.XDomainRequest,c={proto:{}},j={},e={};g.__lastModifiedCached=j;g.__eTagCached=e;c.nativeXhr=h.ActiveXObject?function(l,n){var b;if(!m&&l&&a)b=new a;else if(!(b=!g.isLocal&&i(l,n)))a:{try{b=new (n||h).ActiveXObject("Microsoft.XMLHTTP");
break a}catch(c){}b=void 0}return b}:i;c.XDomainRequest_=a;var m=c.supportCORS="withCredentials"in c.nativeXhr();d.mix(c.proto,{sendInternal:function(){var l=this,c=l.io,b=c.config,o=l.nativeXhr,g=b.files,h=g?"post":b.type,f=b.async,i,t=c.mimeType,p=c.requestHeaders||{},c=c._getUrlForSend(),u=k(b),q,v;if(u){if(q=j[u])p["If-Modified-Since"]=q;if(q=e[u])p["If-None-Match"]=q}(i=b.username)?o.open(h,c,f,i,b.password):o.open(h,c,f);h=b.xhrFields||{};"withCredentials"in h&&(m||delete h.withCredentials);
for(v in h)try{o[v]=h[v]}catch(x){}t&&o.overrideMimeType&&o.overrideMimeType(t);!1===p["X-Requested-With"]&&delete p["X-Requested-With"];if("undefined"!==typeof o.setRequestHeader)for(v in p)o.setRequestHeader(v,p[v]);var w=b.hasContent&&b.data||null;g&&(t=w,p={},t&&(p=d.unparam(t)),p=d.mix(p,g),w=new FormData,d.each(p,function(a,l){d.isArray(a)?d.each(a,function(a){w.append(l+(b.serializeArray?"[]":""),a)}):w.append(l,a)}));o.send(w);!f||4===o.readyState?l._callback():a&&o instanceof a?(o.onload=
function(){o.readyState=4;o.status=200;l._callback()},o.onerror=function(){o.readyState=4;o.status=500;l._callback()}):o.onreadystatechange=function(){l._callback()}},abort:function(){this._callback(0,1)},_callback:function(l,c){var b=this.nativeXhr,o=this.io,m,h,f,i,t,p=o.config;try{if(c||4===b.readyState)if(a&&b instanceof a?(b.onerror=d.noop,b.onload=d.noop):b.onreadystatechange=d.noop,c)4!==b.readyState&&b.abort();else{m=k(p);var u=b.status;a&&b instanceof a||(o.responseHeadersString=b.getAllResponseHeaders());
m&&(h=b.getResponseHeader("Last-Modified"),f=b.getResponseHeader("ETag"),h&&(j[m]=h),f&&(e[f]=f));if((t=b.responseXML)&&t.documentElement)o.responseXML=t;var q=o.responseText=b.responseText;if(p.files&&q){var v,x;if(-1!==(v=q.indexOf("<body>")))x=q.lastIndexOf("</body>"),-1===x&&(x=q.length),q=q.slice(v+6,x);o.responseText=d.unEscapeHtml(q)}try{i=b.statusText}catch(w){i=""}!u&&g.isLocal&&!p.crossDomain?u=o.responseText?200:404:1223===u&&(u=204);o._ioReady(u,i)}}catch(A){b.onreadystatechange=d.noop,
c||o._ioReady(-1,A.message||"process error")}}});return c});
KISSY.add("io/xdr-flash-transport",["./base","dom"],function(d,f){function i(a,d,b){m||(m=!0,a='<object id="'+c+'" type="application/x-shockwave-flash" data="'+a+'" width="0" height="0"><param name="movie" value="'+a+'" /><param name="FlashVars" value="yid='+d+"&uid="+b+'&host=KISSY.IO" /><param name="allowScriptAccess" value="always" /></object>',d=e.createElement("div"),h.prepend(d,e.body||e.documentElement),d.innerHTML=a)}function k(a){this.io=a}var g=f("./base"),h=f("dom"),a={},c="io_swf",j,e=
d.Env.host.document,m=!1;d.augment(k,{send:function(){var c=this,e=c.io,b=e.config;i((b.xdr||{}).src||d.Config.base+"io/assets/io.swf",1,1);j?(c._uid=d.guid(),a[c._uid]=c,j.send(e._getUrlForSend(),{id:c._uid,uid:c._uid,method:b.type,data:b.hasContent&&b.data||{}})):setTimeout(function(){c.send()},200)},abort:function(){j.abort(this._uid)},_xdrResponse:function(c,d){var b,e=d.id,m,j=d.c,g=this.io;if(j&&(m=j.responseText))g.responseText=decodeURI(m);switch(c){case "success":b={status:200,statusText:"success"};
delete a[e];break;case "abort":delete a[e];break;case "timeout":case "transport error":case "failure":delete a[e],b={status:"status"in j?j.status:500,statusText:j.statusText||c}}b&&g._ioReady(b.status,b.statusText)}});g.applyTo=function(a,c,b){var a=c.split(".").slice(1),e=g;d.each(a,function(a){e=e[a]});e.apply(null,b)};g.xdrReady=function(){j=e.getElementById(c)};g.xdrResponse=function(c,d){var b=a[d.uid];b&&b._xdrResponse(c,d)};return k});
KISSY.add("io/sub-domain-transport",["event/dom","dom","./xhr-transport-base"],function(d,f){function i(a){var c=a.config;this.io=a;c.crossDomain=!1}function k(){var a=this.io.config.uri.getHostname(),a=j[a];a.ready=1;g.detach(a.iframe,"load",k,this);this.send()}var g=f("event/dom"),h=f("dom"),a=f("./xhr-transport-base"),c=d.Env.host.document,j={};d.augment(i,a.proto,{send:function(){var e=this.io.config,m=e.uri,l=m.getHostname(),n;n=j[l];var b="/sub_domain_proxy.html";e.xdr&&e.xdr.subDomain&&e.xdr.subDomain.proxy&&
(b=e.xdr.subDomain.proxy);n&&n.ready?(this.nativeXhr=a.nativeXhr(0,n.iframe.contentWindow))&&this.sendInternal():(n?e=n.iframe:(n=j[l]={},e=n.iframe=c.createElement("iframe"),h.css(e,{position:"absolute",left:"-9999px",top:"-9999px"}),h.prepend(e,c.body||c.documentElement),n=new d.Uri,n.setScheme(m.getScheme()),n.setPort(m.getPort()),n.setHostname(l),n.setPath(b),e.src=n.toString()),g.on(e,"load",k,this))}});return i});
KISSY.add("io/xhr-transport",["./base","./xhr-transport-base","./xdr-flash-transport","./sub-domain-transport"],function(d,f){function i(e){var m=e.config,l=m.crossDomain,n=m.xdr||{},b=n.subDomain=n.subDomain||{};this.io=e;if(l&&!g.supportCORS){m=m.uri.getHostname();if(c.domain&&d.endsWith(m,c.domain)&&!1!==b.proxy)return new a(e);if("flash"===""+n.use||!j)return new h(e)}this.nativeXhr=g.nativeXhr(l);return this}var k=f("./base"),g=f("./xhr-transport-base"),h=f("./xdr-flash-transport"),a=f("./sub-domain-transport"),
c=d.Env.host.document,j=g.XDomainRequest_;d.augment(i,g.proto,{send:function(){this.sendInternal()}});k.setupTransport("*",i);return k});
KISSY.add("io/script-transport",["./base"],function(d,f){function i(d){if(!d.config.crossDomain)return new (k.getTransport("*"))(d);this.io=d;return this}var k=f("./base");k.setupConfig({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{text:{script:function(g){d.globalEval(g);return g}}}});d.augment(i,{send:function(){var g=this,h=g.io,a=h.config;g.script=d.getScript(h._getUrlForSend(),
{charset:a.scriptCharset,success:function(){g._callback("success")},error:function(){g._callback("error")}})},_callback:function(d,h){var a=this.io;this.script&&(this.script=void 0,h||("error"!==d?a._ioReady(200,"success"):"error"===d&&a._ioReady(500,"script error")))},abort:function(){this._callback(0,1)}});k.setupTransport("script",i);return k});
KISSY.add("io/jsonp",["./base"],function(d,f){var i=f("./base"),k=d.Env.host;i.setupConfig({jsonp:"callback",jsonpCallback:function(){return d.guid("jsonp")}});i.on("start",function(g){var h=g.io,a=h.config,g=a.dataType;if("jsonp"===g[0]){delete a.contentType;var c,j=a.jsonpCallback,e="function"===typeof j?j():j,m=k[e];a.uri.query.set(a.jsonp,e);k[e]=function(a){1<arguments.length&&(a=d.makeArray(arguments));c=[a]};h.fin(function(){k[e]=m;if(void 0===m)try{delete k[e]}catch(a){}else c&&m(c[0])});
h=a.converters;h.script=h.script||{};h.script.json=function(){if(!c)throw Error("not call jsonpCallback: "+e);return c[0]};g.length=2;g[0]="script";g[1]="json"}});return i});
KISSY.add("io/form",["./base","dom","./form-serializer"],function(d,f){var i=f("./base"),k=f("dom"),g=f("./form-serializer"),h=Array.prototype.slice,a=d.Env.host.FormData;i.on("start",function(c){var j,e,c=c.io.config;if(e=c.form){j=k.get(e);e=c.data;for(var m=!1,l={},n=k.query("input",j),b=0,o=n.length;b<o;b++){var f=n[b];if("file"===f.type.toLowerCase()){m=!0;if(!a)break;var i=h.call(f.files,0);l[k.attr(f,"name")]=1<i.length?i:i[0]||null}}m&&a&&(c.files=c.files||{},d.mix(c.files,l),delete c.contentType);
!m||a?(j=g.getFormData(j),c.hasContent?(j=d.param(j,void 0,void 0,c.serializeArray),c.data=e?c.data+("&"+j):j):c.uri.query.add(j)):(e=c.dataType,c=e[0],"*"===c&&(c="text"),e.length=2,e[0]="iframe",e[1]=c)}});return i});
KISSY.add("io/iframe-transport",["dom","./base","event/dom"],function(d,f){function i(a){var c=d.guid("io-iframe"),e=h.getEmptyIframeSrc(),a=a.iframe=h.create("<iframe "+(e?' src="'+e+'" ':"")+' id="'+c+'" name="'+c+'" style="position:absolute;left:-9999px;top:-9999px;"/>');h.prepend(a,j.body||j.documentElement);return a}function k(a,c,e){var b=[],g,f,i,k;d.each(a,function(a,m){g=d.isArray(a);f=d.makeArray(a);for(i=0;i<f.length;i++)k=j.createElement("input"),k.type="hidden",k.name=m+(g&&e?"[]":""),
k.value=f[i],h.append(k,c),b.push(k)});return b}function g(a){this.io=a}var h=f("dom"),a=f("./base"),c=f("event/dom"),j=d.Env.host.document,e=d.clone(a.getConfig().converters.text);e.json=function(a){return d.parseJson(d.unEscapeHtml(a))};a.setupConfig({converters:{iframe:e,text:{iframe:function(a){return a}},xml:{iframe:function(a){return a}}}});d.augment(g,{send:function(){function a(){c.on(f,"load error",e._callback,e);s.submit()}var e=this,j=e.io,b=j.config,g,f,r,z=b.data,s=h.get(b.form);e.attrs=
{target:h.attr(s,"target")||"",action:h.attr(s,"action")||"",encoding:h.attr(s,"encoding"),enctype:h.attr(s,"enctype"),method:h.attr(s,"method")};e.form=s;f=i(j);h.attr(s,{target:f.id,action:j._getUrlForSend(),method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data"});z&&(r=d.unparam(z));r&&(g=k(r,s,b.serializeArray));e.fields=g;6===d.UA.ie?setTimeout(a,0):a()},_callback:function(a){var e=this,j=e.form,b=e.io,a=a.type,g,f=b.iframe;if(f)if("abort"===a&&6===d.UA.ie?setTimeout(function(){h.attr(j,
e.attrs)},0):h.attr(j,e.attrs),h.remove(this.fields),c.detach(f),setTimeout(function(){h.remove(f)},30),b.iframe=null,"load"===a)try{if((g=f.contentWindow.document)&&g.body)b.responseText=h.html(g.body),d.startsWith(b.responseText,"<?xml")&&(b.responseText=void 0);b.responseXML=g&&g.XMLDocument?g.XMLDocument:g;g?b._ioReady(200,"success"):b._ioReady(500,"parser error")}catch(i){b._ioReady(500,"parser error")}else"error"===a&&b._ioReady(500,"error")},abort:function(){this._callback({type:"abort"})}});
a.setupTransport("iframe",g);return a});
KISSY.add("io/methods",["promise","./base"],function(d,f){function i(a){var c=a.responseText,j=a.responseXML,e=a.config,g=e.converters,f,h,b=e.contents,i=e.dataType;if(c||j){for(e=a.mimeType||a.getResponseHeader("Content-Type");"*"===i[0];)i.shift();if(!i.length)for(f in b)if(b[f].test(e)){i[0]!==f&&i.unshift(f);break}i[0]=i[0]||"text";for(f=0;f<i.length;f++)if("text"===i[f]&&void 0!==c){h=c;break}else if("xml"===i[f]&&void 0!==j){h=j;break}if(!h){var k={text:c,xml:j};d.each(["text","xml"],function(a){var b=
i[0];if(g[a]&&g[a][b]&&k[a])return i.unshift(a),h="text"===a?c:j,!1})}}b=i[0];for(e=1;e<i.length;e++){f=i[e];var r=g[b]&&g[b][f];if(!r)throw Error("no covert for "+b+" => "+f);h=r(h);b=f}a.responseData=h}var k=f("promise"),g=f("./base"),h=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg;d.extend(g,k,{setRequestHeader:function(a,c){this.requestHeaders[a]=c;return this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getResponseHeader:function(a){var c,d,a=a.toLowerCase();if(2===
this.state){if(!(d=this.responseHeaders))for(d=this.responseHeaders={};c=h.exec(this.responseHeadersString);)d[c[1].toLowerCase()]=c[2];c=d[a]}return void 0===c?null:c},overrideMimeType:function(a){this.state||(this.mimeType=a);return this},abort:function(a){a=a||"abort";this.transport&&this.transport.abort(a);this._ioReady(0,a);return this},getNativeXhr:function(){var a=this.transport;return a?a.nativeXhr:null},_ioReady:function(a,c){if(2!==this.state){this.state=2;this.readyState=4;var d;if(200<=
a&&300>a||304===a)if(304===a)c="not modified",d=!0;else try{i(this),c="success",d=!0}catch(e){c=e.message||"parser error"}else 0>a&&(a=0);this.status=a;this.statusText=c;var f=this.defer,h=this.config,k;if(k=this.timeoutTimer)clearTimeout(k),this.timeoutTimer=0;k=d?"success":"error";var b,o=[this.responseData,c,this],y=h.context,r={ajaxConfig:h,io:this};(b=h[k])&&b.apply(y,o);(b=h.complete)&&b.apply(y,o);g.fire(k,r);g.fire("complete",r);f[d?"resolve":"reject"](o)}},_getUrlForSend:function(){var a=
this.config,c=a.uri,f=d.Uri.getComponents(a.url).query||"";return c.toString.call(c,a.serializeArray)+(f?(c.query.has()?"&":"?")+f:f)}})});
KISSY.add("io","io/form-serializer,io/base,io/xhr-transport,io/script-transport,io/jsonp,io/form,io/iframe-transport,io/methods".split(","),function(d,f){function i(d,a,c,f,e){if(typeof a==="function"){f=c;c=a;a=void 0}return g({type:e||"get",url:d,data:a,success:c,dataType:f})}var k=f("io/form-serializer"),g=f("io/base");f("io/xhr-transport");f("io/script-transport");f("io/jsonp");f("io/form");f("io/iframe-transport");f("io/methods");d.mix(g,{serialize:k.serialize,get:i,post:function(d,a,c,f){if(typeof a===
"function"){f=c;c=a;a=void 0}return i(d,a,c,f,"post")},jsonp:function(d,a,c){if(typeof a==="function"){c=a;a=void 0}return i(d,a,c,"jsonp")},getScript:d.getScript,getJSON:function(d,a,c){if(typeof a==="function"){c=a;a=void 0}return i(d,a,c,"json")},upload:function(d,a,c,f,e){if(typeof c==="function"){e=f;f=c;c=void 0}return g({url:d,type:"post",dataType:e,form:a,data:c,success:f})}});d.mix(d,{Ajax:g,IO:g,ajax:g,io:g,jsonp:g.jsonp});return g});
KISSY.add("mui/storage/index",function(e,t,n,r,o,a){var i={};var c=0;var u=function(t){var n=this;t=t||{};t.token=+new Date+o.getRndStr(8);var a=t.proxy||r.PROXY;switch(a){case"tmall":a=r.PROXY_TMALL;break;case"taobao":a=r.PROXY_TAOBAO;break;case"common":a=r.PROXY;break}a=o.fm("{0}{1}{2}={3}",a,a.indexOf("?")>-1?"&":"?",r.XD_TOKEN,t.token);t.proxy=a;t.prefix=t.prefix||"";n._opt=e.merge(i,t);n.init()};e.augment(u,{init:function(){var t=this;t.setConf(r.K.CALLBACK_LIST,{});t.setConf(r.K.CACHED_ACTION_LIST,[]);t.setConf(r.K.PROXY_READY,false);var n=t.getConf(r.K.CALLBACK_LIST);var i=t.getConf(r.K.CACHED_ACTION_LIST);var u=document.createElement("iframe");var s=u.style;s.display="none";var f=-1;function d(s){var f=new a({target:u.contentWindow,token:t.getConf(r.K.TOKEN),iframeTimeout:s,timeout:t.getConf(r.K.XD_TIMEOUT),receive:function(e){var t=n[e.c];if(t){t(e.v);try{delete n[e.c]}catch(r){}}}});t.setConf(r.K.XD,f);function d(){t.setConf(r.K.PROXY_READY,true);e.each(i,function(e){f.send(e,"*")});t.setConf(r.K.CACHED_ACTION_LIST,[]);var n=t.getConf(r.K.ONLOAD);n&&n()}if(s){d()}else{if(window.postMessage){var m=false;var l=0;var _=setInterval(function(){++l;o.log(l,m);if(m||l>30){clearInterval(_);d();return}var e="token"+ ++c;n[e]=function(e){m=!!e};f.send({m:"connect",c:e},"*",true)},50)}else{setTimeout(d,600)}}}f=setTimeout(function(){f=0;d(true)},t.getConf(r.K.IFRAME_TIMEOUT)||r.TIMEOUT_STORAGE);function m(e){o.log("storage proxy loaded");clearTimeout(f);if(!f){return}d(false)}if(u.attachEvent){u.attachEvent("onload",m)}else{u.onload=m}u.src=t.getConf(r.K.PROXY);document.body.appendChild(u)},send:function(t){var n=this;var o=n.getConf(r.K.CALLBACK_LIST);var a=n.getConf(r.K.CACHED_ACTION_LIST);var i=n.getConf(r.K.PROXY_READY);var u=n.getConf(r.K.PREFIX);t.p=u;if(e.isFunction(t.success)){var s="token"+ ++c;t.c=s;o[s]=t.success;try{delete t.success}catch(f){}}if(!i){a.push(t);return}var d=n.getConf(r.K.XD);d&&d.send(t)},get:function(e){e=e||{};e.m="get";this.send(e);Math.random()<r.SAM_PV&&o.sendLog(r.ARR.ST_GET)},set:function(e){e=e||{};e.m="set";this.send(e);Math.random()<r.SAM_PV&&o.sendLog(r.ARR.ST_SET)},remove:function(e){e=e||{};e.m="remove";this.send(e);Math.random()<r.SAM_PV&&o.sendLog(r.ARR.ST_RM)},clear:function(e){e=e||{};e.m="clear";this.send(e);Math.random()<r.SAM_PV&&o.sendLog(r.ARR.ST_CL)},getConf:function(e){return this._opt[e]},setConf:function(e,t){this._opt[e]=t}});return u},{requires:["event","json","mui/storage/conf","mui/storage/util","mui/storage/xd"]});KISSY.add("mui/storage/conf",function(){var e=location.href.indexOf("if-debug=1")>-1;var t=location.href.indexOf("if-debug-log=1")>-1;var r="//gm.mmstat.com";var n="//log.mmstat.com/ued.1.1.2?type=9&_gm:id=storage&v=1.1";var i={DEBUG:e,DEBUG_LOG:t,SAM_PV:1/1e3,TIMEOUT_STORAGE:3*1e3,PROXY:e?"//tmsprepub.alicdn.com/go/market/main/mui/storage/stp-1_1_2.php":"//www.tmall.com/go/market/main/mui/storage/stp-1_1_2.php",PROXY_TMALL:e?"//tmsprepub.alicdn.com/go/act/stp-tm-1_1_0.php":"//www.tmall.com/go/act/stp-tm-1_1_0.php",PROXY_TAOBAO:e?"//tmsprepub.alicdn.com/go/act/stp-tb-1_1_0.php":"//www.tmall.com/go/act/stp-tb-1_1_0.php",XD_TOKEN:"__mui_xd_token",UID_FROM:"__mui_xd_from",UID_TO:"__mui_xd_to",M:{G:n+"&t=g",P:n+"&t=p"},ARR:{ST_SET:r+"/tmallbrand.999.5",ST_GET:r+"/tmallbrand.999.6",ST_RM:r+"/tmallbrand.999.7",ST_CL:r+"/tmallbrand.999.8",ST_TMO:r+"/tmallbrand.999.10"},K:{ONLOAD:"onload",PROXY:"proxy",PREFIX:"prefix",XD_TIMEOUT:"xdTimeout",IFRAME_TIMEOUT:"iframeTimeout",IFRAME:"iframe",TOKEN:"token",XD:"xd",CALLBACK_LIST:"callbackList",CACHED_ACTION_LIST:"cachedActionList",PROXY_READY:"proxyReady"}};return i});KISSY.add("mui/storage/util",function(e,t){var n={log:function(){if(!t.DEBUG_LOG){return}if(window.console&&window.console.log&&window.console.log.apply){window.console.log.apply(window.console,arguments)}},fm:function(){if(arguments.length==0){return""}else if(arguments.length==1){return arguments[0]}var e=arguments[0],t;for(t=1;t<arguments.length;++t){var n=new RegExp("\\{"+(t-1)+"\\}","g");e=e.replace(n,arguments[t])}return e}};var r=n;r.sendLog=function(e){r.send(r.fm(t.M.G,encodeURIComponent(location.href)));r.send(e)};r.send=function(e){if(!e){return}var t="__st_"+ +new Date+Math.random();var n=new Image;window[t]=n;n.src=r.fm("{0}{1}r{2}=1",e,e.indexOf("?")>-1?"&":"?",+new Date);n.onload=function(){window[t]=null}};var o="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";r.getRndStr=function(e){var t=[];var n=o.length,r;for(var a=0;a<e;++a){r=o.charAt(Math.floor(Math.random()*n));t.push(r)}return t.join("")};return r},{requires:["mui/storage/conf"]});KISSY.add("mui/storage/xd",function(e,t,n,r,a,i){var o=0;var s=document.domain;var u="receive";var c="token";var f="target";var m="timeout";var d="iframeTimeout";var v=10;var l=10;var g=3*1e3;var _="_name_store_";var p=window;var h=p.postMessage;var O={};var T=[];function I(){if(h){if(p.addEventListener){addEventListener("message",w,false)}else if(p.attachEvent){attachEvent("onmessage",w)}}else{A.onMessage(w)}}var A={uid:0,hid:-1,q:[],tm:0,postMessage:function(e,t,n){var r=++A.uid;var a=A.q;var o={name:+new Date+""+r+"^"+s+"&"+t,uid:r,target:e};a.push(o);if(!A.tm){A.tm=setInterval(function(){var e=A.q;if(e.length===0||e[0].uid===A.hid){return}var t=e[0];A.hid=t.uid;i.setItem(_,name)},l)}},onMessage:function(e){var t="";var n=/^(\d+?)\^(.+?)&(.*?)$/;function r(){var r=i.getItem(_);if(r!==t){A.q.shift();t=r;var a=n.exec(r);if(!a){return}var o={origin:a[2],data:a[3]};e&&e(o)}}setInterval(r,v)}};function w(t){var a={};try{a=n.parse(t.data)}catch(i){return}var o=a[r.XD_TOKEN];e.each(T,function(e){if(o===e.get(c)&&r.UID_FROM in a&&r.UID_TO in a){var t=a[r.UID_TO];if(t){var n=O[t];clearTimeout(n);O[t]=0;if(!n){return}}e.get(u)(a)}})}I();function E(e){var t=this;t._opt=e;T.push(t)}e.augment(E,{send:function(t,i,u){if(!e.isObject(t)){return}var v=this;var l=v.get(f);var _=v.get(m)||g;var p=++o;i=i||"*";t[r.XD_TOKEN]=v.get(c);t[r.UID_TO]=t[r.UID_FROM]||0;t[r.UID_FROM]=u?0:p;var T=n.stringify(t);function I(){h&&A.q.shift();var e={};e.origin="*";var a={};a.c=t.c||"";a[r.XD_TOKEN]=t[r.XD_TOKEN]||"";a[r.UID_FROM]=0;a[r.UID_TO]=0;e.data=n.stringify(a);w(e)}if(!u){O[p]=setTimeout(function(){a.log(s,"timeout",p);O[p]=0;I();Math.random()<r.SAM_PV&&a.sendLog(r.ARR.ST_TMO)},_)}if(v.get(d)){I()}else{if(h){l.postMessage(T,i)}else{A.postMessage(l,T,i)}}},get:function(e){return this._opt[e]},set:function(e,t){this._opt[e]=t}});return E},{requires:["event","json","mui/storage/conf","mui/storage/util","mui/storage/name"]});KISSY.add("mui/storage/name",function(e){var t=window;var n="nameStorage:";var r=/^([^=]+)(?:=(.*))?$/;var o="?";var a="=";var i="&";var u=encodeURIComponent;var c=decodeURIComponent;var f={};var s;var d={};var m={};(function _(e){if(e&&e.indexOf(n)===0){var t=e.split(/[:?]/);t.shift();s=c(t.shift())||"";var o=t.join("");var a=o.split(i);for(var u=0,d,m,l,v=a.length;u<v;u++){d=a[u].match(r);if(!d||!d[1]){continue}m=c(d[1]);l=c(d[2])||"";f[m]=l}}else{s=e||""}})(t.name);m.setItem=function(e,t){if(!e||"undefined"===typeof t){return}f[e]=String(t);l()};m.getItem=function(e){return f.hasOwnProperty(e)?f[e]:null};m.removeItem=function(e){if(!f.hasOwnProperty(e)){return}f[e]=null;delete f[e];l()};m.clear=function(){f={};l()};m.valueOf=function(){return f};m.toString=function(){var e=t.name;return e.indexOf(n)===0?e:n+e};function l(){var e=[];var r=true;var c;for(var d in f){if(!f.hasOwnProperty(d)){continue}r=false;c=f[d]||"";e.push(u(d)+a+u(c))}t.name=r?s:n+u(s)+o+e.join(i)}function v(e,t,n){if(!e){return}if(e.addEventListener){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,function(t){n.call(e,t)})}}v(t,"beforeunload",function(){l()});return m});