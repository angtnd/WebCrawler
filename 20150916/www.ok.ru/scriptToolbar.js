if(typeof window.mailRuToolbarDriver=="undefined"){window.mailRuToolbarDriver=(function(o,B){var j=false;var e,t,s,a,f="portal-headline__projects_open",u={},F,C={},r={mail_cnt:"g_mail_events",my_cnt:"g_my_events",games_cnt:"g_games_events"};function D(d){d.stopPropagation?d.stopPropagation():d.cancelBubble=true;d.preventDefault?d.preventDefault():d.returnValue=false;}function v(d,w,l,m){if(w.addEventListener){w[d?"addEventListener":"removeEventListener"](l,m,false);}else{if(w.attachEvent){w[d?"attachEvent":"detachEvent"]("on"+l,m);}}}function b(l,d){return l.className.match(new RegExp("(\\s|^)"+d+"(\\s|$)"));}function p(l,d){if(!b(l,d)){l.className+=" "+d;}}function q(m,d){if(b(m,d)){var l=new RegExp("(\\s+|^)"+d+"(\\s+|$)");m.className=m.className.replace(l," ");}}function A(d){clearTimeout(F);F=null;D(d);b(a,f)?y():i();}function i(){e=B.getElementById("topPanel");v(1,B,"click",y);if(e){e.style.zIndex=5000;}p(a,f);}function y(){v(0,B,"click",y);if(e){e.style.zIndex=2501;}q(a,f);}function c(){clearTimeout(F);F=null;}function g(){clearTimeout(F);F=setTimeout(y,4000);}function h(l,w,G){var m=B.getElementsByTagName("head")[0];if(C[l]){m.removeChild(C[l]);}var d=o.top.MRG_toolbarUpdateTimeout;if(d>0&&B.getElementById("mailRuToolbar")){if(!o.top[l]){o.top[l]=G;n(l);u[l]=setInterval(function(){h(l,w,G);},d);}C[l]=B.createElement("script");C[l].type="text/javascript";C[l].src=w+"&JSONP_call="+l+"&rnd="+Math.random();m.appendChild(C[l]);}else{o.top[l]=null;n(l);}}var z=function(d,l){var m=B.getElementById(d);if(m){var w="portal-headline__link_ext";if(l){p(m.parentNode,w);m.innerHTML=l;}else{q(m.parentNode,w);}}};var E=function(){if(j){return;}j=true;t=B.getElementById("portal-headline__menulink");s=B.getElementById("portal-headline__menu");a=B.getElementById("portal-headline__box");if(t==null||s==null||a==null){return;}v(1,t,"click",A);v(1,t,"mouseout",g);v(1,t,"mouseover",c);v(1,s,"mouseout",g);v(1,s,"mouseover",c);h("MRG_updateMainToolbar",o.top.MRG_TCL,function(l){for(var m in r){if(r.hasOwnProperty(m)){var w=l&&l.status==="ok"&&l.data&&l.data[m]&&(l.data[m]>0||l.data[m]==="99+")?l.data[m]:null;z(r[m],w);}}});var d="g_wamba_events";if(B.getElementById(d)){h("MRG_updateWambaToolbar",o.top.MRG_TCL_WAMBA,function(l){z(d,l?l.counter:null);});}},n=function(d){if(u[d]!=null){clearTimeout(u[d]);u[d]=null;}},x=function(){j=false;if(F!=null){clearTimeout(F);F=null;}for(var d in u){if(u.hasOwnProperty(d)){n(d);}}},k=function(){x();E();};setTimeout(E,1000);return{bind:E,unbind:x,rebind:k};})(window,document);}