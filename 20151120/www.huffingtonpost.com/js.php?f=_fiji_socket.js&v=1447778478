/* From: production-mt-wfe-58-160-use1 : 16006 */
huff.unit("fiji_socket",function(d){var b=this,c=false,g=30000,e=1,a=20,f={};huff.use("sockjs","conf","jquery",function(j,n,l){var q={};b.init=function(){n.get("websocket/url","websocket/init",function(s,r){if(r){return}var t=new j("http://"+s+"/socket/",undefined,{devel:false,debug:false,protocols_whitelist:[],persist:true,persistentDuration:90});t.onopen=function(){n.set("websocket/sockjs",t);n.set("websocket/open",true);huff.emit("_internal_websocket/open",arguments);l.isEmptyObject(f)&&huff.emit("websocket/open",arguments)};t.onmessage=function(u){var v=JSON.parse(u.data);v.hasOwnProperty("message_type")&&q[v.channel].apply(this,[v]);v.hasOwnProperty("snapshot")&&huff.emit("websocket/snapshot",v,q[v.channel])};t.onerror=function(){g=g*2;window.setTimeout(b.init,g)};t.onclose=function(){n.set("websocket/open",false);n.set("websocket/init",false);n.set("websocket/sockjs",false);huff.emit("websocket/close");if(!c){g=g*4;window.setTimeout(b.init,g)}};n.set("websocket/init",true)})};b.subscribe=function(s,u,r,t){n.get("websocket/open","websocket/sockjs",function(w,x){if(!w){return null}q[s]=t;var v=h("sub",s,u,r);"function"===typeof t&&huff.on("websocket/subscribe"+s+u,function(){t.apply(this,arguments);huff.off("websocket/subscribe"+s+u)});x.send(v)})};b.unsubscribe=function(r,s){n.get("websocket/open",function(u){if(!u){return null}var t=h("unsub",r,s);b.sockjs.send(t)})};b.close=function(){n.get("websocket/open","websocket/sockjs",function(r,s){c=r&&s.close()})};b.onmessage=function(r){huff.on("websocket/message",r)};b.onsnapshot=function(r){huff.on("websocket/snapshot",r)};b.onopen=function(r){huff.on("websocket/open",r)};b.onclose=function(r){huff.on("websocket/close",r)};var h=function(t,s,u,r){return JSON.stringify({action:t,channel:s,id:u,snapshot:r})};var i=function(u){var v=JSON.parse(u);var r=f;if(v&&v.action&&v.action=="sub"){var t=v.channel;var w=v.id;!r.hasOwnProperty(t)&&(r[t]=[]);l.inArray(w,r[t])==-1&&r[t].push(w);huff.emit("websocket/subscribe"+v.channel+v.id,v.channel,v.id)}};var o=function(){var v=f;for(var u in v){for(var t=0,r=v[u].length;t<r;t++){var w=v[u][t];b.subscribe(u,w)}}};var k=function(){n.get("websocket/sockjs",function(s){var r;l(document).bind("mousemove",function(t){n.get("websocket/open",function(u){window.clearTimeout(r);r=window.setTimeout(function(){u&&b.close()},e*1000*60);!c&&b.init()})})})};var m=function(){n.get("websocket/open",function(r){window.setTimeout(function(){if(r){c=true;b.close()}},a*1000*60)})};var p=function(r){huff.on("_internal_websocket/open",r);m()};k();p(o);b.onmessage(i);b.init();d(b)})});

/* From: production-mt-wfe-58-160-use1 : 16006 *//* 10f6c1f264b5eb847f0c98a92b04744272db5366 */