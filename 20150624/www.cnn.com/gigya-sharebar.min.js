!function(e){"use strict";function i(e,i){if("function"==typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: "+e,headline:i}}})}catch(a){}}function a(a,t){e.each(a.providers.split(","),function(n,o){i(o,t.title),e.ajax({url:CNN.SocialConfig.gigya.shareStatsPostURL||"",dataType:"json",type:"POST",data:{actionType:"socialShare",socialType:o||"",headline:t.title||"",shortUrl:a.targetURL||"",url:window.location.href||"",env:CNN.contentModel.env||""}})})}function t(e){var i=v||w;i?(i=n(i,e),o(i,e)):window.console&&window.console.error&&window.console.error("No canonical share widget has been defined")}function n(e,i){var a=e.clone();return i&&i.url&&a.setLinkBack(i.url),a}function o(i,t){var n,o,r,s,l=CNN.msib.cfg.gigya;t=t||{},"undefined"!=typeof t.elem&&"undefined"!=typeof t.elem.data("isshorturl")&&(C=t.elem.data("isshorturl")),o=e("<div>").attr("data-js-gigya-share","wrapper").appendTo("body"),r=d(o),s=C?"never":"whenRequired",n={deviceType:"auto",wrap:!0,operationMode:"simpleShare",containerID:r,userAction:i,moreEnabledProviders:l.primaryProviders+","+l.moreEnabledProviders,shortURLs:s,onSendDone:function(e){a(e,i)}},gigya.socialize.showShareUI(n),window.setTimeout(function(){o.attr("data-js-gigya-share-fade","")},10),window.setTimeout(function(){o.attr("data-js-gigya-share-active","")},300)}function r(i,t){var n,o,r,s,l,c,h=CNN.msib.cfg.gigya;t=t||{},"undefined"!=typeof t.elem&&null!==t.elem&&"function"==typeof t.elem.data&&"undefined"!=typeof t.elem.data("isshorturl")&&(C=t.elem.data("isshorturl")),o=e("<div>"),!Modernizr.mobile||Modernizr.ios&&Modernizr.tablet?o.appendTo(t.elem):(o.appendTo("body"),o.css("z-index","100")),r=d(o),s=C?"never":"whenRequired",n={deviceType:"auto",wrap:!0,operationMode:"simpleShare",containerID:r,userAction:i,moreEnabledProviders:h.primaryProviders+","+h.moreEnabledProviders,shortURLs:s,onSendDone:function(e){a(e,i)},onLoad:function(){l=e(t.elem).offset(),c=e(t.elem).find(e("div.gig-simpleShareUI")),"undefined"!=typeof c&&l.left<320&&(!Modernizr.mobile||Modernizr.ios&&Modernizr.tablet?e(c).css("margin-left","35px"):e(c).css("margin-left","0px")),e("div.gig-simpleShareUI-caption").on("click",function(){return!1}),e("div.gig-simpleShareUI-button").on("click",function(){return e("div.gig-simpleShareUI").hide(),!1})}},gigya.socialize.showShareUI(n),window.setTimeout(function(){o.attr("data-js-gigya-share-fade","")},10),window.setTimeout(function(){o.attr("data-js-gigya-share-active","")},300)}function s(e){var i,a=e.attr("data-canonical"),t=e.attr("data-user-message"),n=e.attr("data-link"),o=e.attr("data-title"),r=e.attr("data-subtitle"),s=e.attr("data-description"),d=e.attr("data-image-src"),l=new gigya.socialize.UserAction;return t&&l.setUserMessage(t),n&&(l.setLinkBack(n),l.addActionLink("Read More",n)),o&&l.setTitle("CNN: "+o),r&&l.setSubtitle(r),s&&l.setDescription(s),d&&(i={type:"image",src:d},n&&(i.href=n),l.addMediaItem(i)),"undefined"!=typeof a&&(v=l),C=e.attr("data-isshorturl"),l}function d(e){var i=e.attr("id");if("undefined"==typeof i||""===i){do i="gigyaShareBar_"+N,N+=1;while(document.getElementById(i));e.attr("id",i)}return i}function l(i,t,n){var o,r,s=CNN.msib.cfg.gigya,l=e("<div>"),c=d(l),h=s.showCounts,g="gigya-sharebar-element";b>3&&(g+=" gigya-element-large"),l.addClass(g).appendTo(t),b+=1,"none"===h&&"Facebook-Like"===i&&(h="right"),o=C?"never":"Facebook"===i?"never":"whenRequired",void 0!==s.providerCfg[i]?(s.providerCfg[i].provider=i,r=[s.providerCfg[i]]):r=i,gigya.socialize.showShareBarUI({deviceType:"auto",operationMode:"simpleShare",containerID:c,showCounts:h,userAction:n,shareButtons:r,moreEnabledProviders:s.moreEnabledProviders,shortURLs:o,useEmailCaptcha:!1,showEmailButton:!0,emailBody:"$userMsg$<br /><br />I thought you'd like this:<br />$URL$<br /><br />$title$<br />$description$<br />",useHTML:!0,onSendDone:function(e){a(e,n)}})}function c(e){var i,a=CNN.msib.cfg.gigya.shareButtons.split(","),t=s(e),n=a.length;for(b=1,"undefined"==typeof w&&(w=t),i=0;n>i;i++)l(a[i],e,t)}function h(e){var i=s(e);e.on("click",function(){o(i,{elem:e})}),e.show()}function g(i){var a,t;i.on("click",function(){t=e(this),a=s(t),r(a,{elem:i})})}function u(i){var a=e(".js-gigya-sharebar"),t=e(".js-gigya-share"),n=e(".js-gigya-share-collection");(a.length||t.length||n.length)&&(y=i,CNN.msib.loadGigya(function(e){p(e,a,t,n)}))}function f(){var i,a,t=e(".js-gigya-sharebar"),n=e(".js-gigya-share"),o=e(".js-gigya-share-collection");if(t&&t.length>0){for(i=0;i<t.length;i++)a=e(t[i]).find("div.share-bar-whatsapp-container"),"undefined"!=typeof a&&e(t[i]).before(e(a));t.html("")}n&&n.length>0&&n.html(""),o&&o.length>0&&o.html(""),(t.length||n.length||o.length)&&CNN.msib.loadGigya(function(e){p(e,t,n,o),m()})}function p(i,a,t,n){return!i&&window.console&&window.console.error?void window.console.error("Gigya not loaded -- share bar disabled."):(a.each(function(){c(e(this))}),t.each(function(){h(e(this))}),void n.each(function(){g(e(this))}))}function m(){var i,a,t=e(".share-bar-whatsapp-container"),n=0,o=0;if(t.length)if(e("html").hasClass("mobile")&&e("html").hasClass("phone"))for(i=e(".gigya-sharebar-element"),a=0;a<i.length;a++)(3===a||5===n)&&(e(i[a]).after(e(t[o])),e(t[o]).show(),n=0,o++),n++;else e(t).hide()}var y,w,v,b,N=0,C=!1;e(window).load(m),e(function(){CNN.msib.onInitialized(u)}),window.CNN=window.CNN||{},CNN.gigyaShareBar=function(){CNN.msib.onInitialized(u)},CNN.share=CNN.share||{},CNN.share.popup=t,CNN.share.reloadShareBar=f}(jQuery);
//# sourceMappingURL=gigya-sharebar.min.js.map