/*! mini-login 2014-11-04 */
KISSY.add("tbc/mini-login/1.5.6/index",function(a,b,c,d,e){function f(){var a='<div id="J_LoginContainer" class="login-container" style="display:none" style="width:'+(D.width+2)+"px;height:"+(D.height+30)+'px">'+'<div class="login-wrapper">'+'<div class="login-hd">\u6dd8\u5b9d\u4f1a\u5458</div>'+'<div class="login-bd">'+'<iframe data-status="0" data-callbacked="0" frameborder="0" width="'+D.width+'" height="'+D.height+'" scrolling="no" id="'+I+'" name="'+J+'" src="about:blank" onload="_TBC_MiniLogin_Check()"></iframe>'+"</div>"+'<div class="login-ft">'+'<a class="login-close J_LoginClose" target="_self" title="\u5173\u95ed\u6b64\u7a97\u53e3" href="javascript:void(0)">\xd7</a>'+"</div>"+"</div>"+"</div>",c=b.create(a);return b.addStyleSheet(F),b.append(c,document.body),g(c),c}function g(a){c.on(a,"click",function(a){var c=a.target;b.hasClass(c,"J_LoginClose")&&m(function(){K.fire("close")})})}function h(a,b){a=a||"m";var c=e.get("_l_g_"),d=e.get("lgc"),f=e.get("sn");return b&&f?!0:"m"===a?!!c:"l"==a?!!d:void 0}function i(a,b){return z&&!h(a)?(b&&j(),!1):(d.getScript(B,function(){"undefined"!=typeof loginIndicator&&(loginIndicator.hasLoggedIn?n():b&&j())}),void 0)}function j(){var a,c,d=b.get("#J_LoginContainer");return p?(o(),void 0):(d||(d=f()),a=b.get("#"+I),c=y.build(A,{redirect_url:D.redirect_url,from:D.from,sub:x?!0:!1}),b.css(d,"display","block"),k(),b.attr(a,"data-status","0"),b.attr(a,"data-callbacked","0"),a.src=c,void 0)}function k(){l(),c.on(window,H,l)}function l(){var c,d,e=b.get("#J_LoginContainer");a.isObject(w)?(c=w.left||0,d=w.top||0):(c=parseInt(b.viewportWidth()/2)-parseInt(e.offsetWidth/2)+"px",d=(G?b.scrollTop():0)+parseInt(b.viewportHeight()/2)-parseInt(e.offsetHeight/2)+"px"),b.css(e,{top:d,left:c})}function m(a){var d=b.get("#J_LoginContainer");return d?(b.css(d,"display","none"),c.remove(window,H,l),a&&a(),void 0):!1}function n(){var a=b.get("#"+I);a&&"1"===b.attr(a,"data-callbacked")||(a&&b.attr(a,"data-callbacked","1"),m(function(){}),u&&u())}function o(){d.getScript(s+"mtb/lib-windvane/"+E+"/windvane.js",function(){try{WindVane.call("TBHDCommon","login",{},function(){u&&u(null)},function(a){u&&u(a)})}catch(a){window.location.assign("http://login.m.taobao.com/login.htm?tpl_redirect_url="+encodeURIComponent(window.location.href))}})}var p,q=a.unparam(location.search.slice(1))._login_daily_,r=q||-1!==location.host.indexOf(".daily."),s=r?"//assets.daily.taobao.net/g/":"//g.alicdn.com/";try{p=!!window.navigator.userAgent.match(/WindVane/i)}catch(t){}var u,v,w,x,y={getServer:function(a){var b,c,d=/\{(.+?)Server\}/i,e=d.exec(a);return e&&e[1]?(b=e[1],c=r?a.replace(d,"daily."+b+".net"):a.replace(d,b+".com")):c=a,c},build:function(b,c){var d=-1!==b.indexOf("?"),e=d?"&":"?";return a.isObject(c)?b+e+a.param(c):b+e+c}},z=/taobao|tmall/.test(location.host),A=y.getServer("https://login.{taobaoServer}/member/login.jhtml?style=mini&is_ignore=false"),B=y.getServer("http://buy.{taobaoServer}/auction/buy.htm?from=itemDetail"),C=window.g_config?g_config.loginCfg:{},D=a.merge({width:328,height:285,redirect_url:(r?"http://www.daily.taobao.net/":"http://www.taobao.com/")+"go/act/loginsuccess/taobao.php"},C||{}),E="1.4.6",F=".login-container{opacity:1;position:fixed;_position:absolute;z-index:100000000;background-color:#fafafa;padding:0;overflow:hidden;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;border:3px solid #D5D5D5;}.login-container .login-wrapper{border:1px solid #aaa}.login-container .login-hd{height:35px;line-height:35px;padding-left:14px;font-weight:700;font-size:14px;margin-bottom:25px;background-color:#f2f2f2;}.login-container .login-ft{background-color:#F5F5F5;}.login-container .login-close{color:#9c9c97;font-family:Tahoma,sans;font-size:22px;position:absolute;right:8px;text-decoration:none;top:0;}",G=6===a.UA.ie,H=G?"scroll resize":"resize",I="J_LoginFrame",J="LoginFrame";window._TBC_MiniLogin_Check=function(){var a=b.get("#"+I),c=!1;if("0"===b.attr(a,"data-status"))b.attr(a,"data-status","1");else{try{href=win.frames[J].location.host,href?/login(?:\.daily)?\.taobao/.test(href)||n():c=!0}catch(d){c=!0}c&&("m"===v?i():h(v)&&n())}};var K,L=function(){};return a.augment(L,c.Target,{check:h,show:function(b,c){a.isFunction(b)?(c=b,type="m"):(b=a.isObject(b)?b:{type:a.isString(b)?b:"m"},type=b.type||"m",w=b.position,x=b.sub,E=b.windvane||E),v=type,u=c,"m"===type?i(type,!0):h(type,b.sub)?u&&u():j()},hide:function(){m()}}),K=new L},{requires:["dom","event","ajax","cookie","ua"]});