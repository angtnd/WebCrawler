!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){"use strict";function BFAttributeParser(config){this.defaultConfig={start:"@",end:";",separator:":",parts:{action:"a",description:"d",location:"l",data:"e"}},this.config=config||this.defaultConfig,this.parse=function(element){var attribute=element.getAttribute("data-bfa");if(null===attribute||""===attribute)return null;var result=this.processAttribute(attribute);return""===result.location&&(result.location=this.findLocation(element.parentElement)),result.action=this.grabDataSource(result.action),result.location=this.grabDataSource(result.location),result.description=this.grabDataSource(result.description),[result.action,result.location,result.description,result.data]},this.processAttribute=function(attribute){var collector=[];for(var part in this.config.parts)if(this.config.parts.hasOwnProperty(part)){var idx=attribute.indexOf(this.config.start+this.config.parts[part]+this.config.separator);idx>-1&&collector.push({part:part,idx:idx})}collector=collector.sort(function(a,b){return a.idx<b.idx?-1:a.idx===b.idx?0:1});for(var result={action:"",location:"",description:"",data:""},i=0;i<collector.length;i++)result[collector[i].part]=i<collector.length-1?attribute.substring(collector[i].idx,collector[i+1].idx):attribute.substring(collector[i].idx);for(var key in result)result.hasOwnProperty(key)&&(result[key]=result[key].replace(this.config.start+this.config.parts[key]+this.config.separator,"").trim(),result[key][result[key].length-1]===this.config.end&&(result[key]=result[key].substring(0,result[key].length-1)));return result.data=this.convertToObject(result.data),result},this.findLocation=function(element){for(;null!==element;){var attr=element.getAttribute("data-bfa");if(null!==attr&&""!==attr){var result=this.processAttribute(attr);if(""===result.location){element=element.parentElement;continue}return result.location}element=element.parentElement}return""},this.convertToObject=function(value){value=value.replace("{","").replace("}","").replace('"',"");for(var obj={},dataRecords=value.split(","),i=0;i<dataRecords.length;i++){var keyValue=dataRecords[i].split(":");if(2===keyValue.length){var key=keyValue[0].trim(),val=keyValue[1].trim();obj[key]=val}}return obj},this.grabDataSource=function(value){if(value.indexOf("source:")>-1){var funcFullName=value.replace("source:","").trim();if(funcFullName&&window){for(var context=window,namespaces=funcFullName.split("."),funcName=namespaces.pop(),i=0;i<namespaces.length;i++)context=context[namespaces[i]];var func=context[funcName];if(func)return func()}}return value}}module.exports=BFAttributeParser},{}],2:[function(require,module){"use strict";function BFDomEventBinder(mapping,executable){this.mapping=mapping,this.parser=new BFAttributeParser,this.init=function(){if(this.mapping)for(var sectionName in this.mapping)this.mapping.hasOwnProperty(sectionName)&&this.processMappingSection(sectionName,this.mapping[sectionName]);else console.warn("** BF data-binder not initialized due to empty mappings.")},this.processMappingSection=function(trackingMethod,sectionMappings){for(var i=0;i<sectionMappings.length;i++){var record=sectionMappings[i].split(" ");if(2===record.length){var eventName=record[0],elementLocator=record[1];this.registerEventFor(elementLocator,eventName,trackingMethod)}}},this.registerEventFor=function(elementLocator,eventName,trackingMethod){for(var elements=this.findElements(elementLocator),i=0;i<elements.length;i++)elements[i].addEventListener(eventName,this.getHandler(trackingMethod),!1)},this.findElements=function(locator){var elements;return elements=locator.indexOf("window")>-1?[window]:document.querySelectorAll(locator)},this.getHandler=function(trackingMethod){var _this=this;return function(){var result=["track",trackingMethod];if(null!==this&&this.getAttribute){var parsed=_this.parser.parse(this);result=result.concat(parsed)}executable&&window[executable]instanceof Function&&window[executable].apply(this,result)}}}var BFAttributeParser=require("./bf_attribute_parser.js");module.exports=BFDomEventBinder},{"./bf_attribute_parser.js":1}],3:[function(require,module){"use strict";function BFEventBinder(mapping,executable){this.mapping=mapping,this.init=function(){if(this.mapping)for(var key in this.mapping)if(this.mapping.hasOwnProperty(key)){if("dom"===key){var domBinder=new BFDomEventBinder(this.mapping[key],executable);domBinder.init()}if("social"===key){var socialMappings=this.mapping[key];if(void 0!==socialMappings.facebook){var fbBinder=new SocialBinders.FacebookBinder(socialMappings.facebook,executable);fbBinder.init()}}}}}var BFDomEventBinder=require("./bf_dom_event_binder.js"),SocialBinders=require("./bf_social_event_binder.js");module.exports=BFEventBinder},{"./bf_dom_event_binder.js":2,"./bf_social_event_binder.js":5}],4:[function(require){"use strict";var BFEventBinder=require("./bf_event_binder.js");!function(mapping){window.binder=new BFEventBinder(mapping,"bfa")}({social:{facebook:["like","unlike"]},dom:{click:["click a[data-bfa]","click .page-nav__action--fb-share","click .page-search__search-button"]}})},{"./bf_event_binder.js":3}],5:[function(require,module){"use strict";function FacebookBinder(mapping,executable){this.mapping=mapping,this.executable=executable,this.parser=new BFAttributeParser,this.init=function(){var _this=this,counter=0,interval=setInterval(function(){counter>=10&&clearInterval(interval),window.FB&&(clearInterval(interval),_this.processMappings()),counter++},1e3)},this.processMappings=function(){if(void 0!==mapping)for(var i=0;i<mapping.length;i++)"like"===mapping[i]&&this.regLikes(),"unlike"===mapping[i]&&this.regUnlikes()},this.regLikes=function(){var _this=this;window.FB.Event.subscribe("edge.create",function(url,element){var result=["track","click"];if(null!==element&&element.getAttribute){var parsed=_this.parser.parse(element);result=result.concat(parsed)}_this.executable&&window[_this.executable]instanceof Function&&window[_this.executable].apply(this,result)})},this.regUnlikes=function(){var _this=this;window.FB.Event.subscribe("edge.remove",function(url,element){var result=["track","click"];if(null!==element&&element.getAttribute){var parsed=_this.parser.parse(element);result=result.concat(parsed)}_this.executable&&window[_this.executable]instanceof Function&&window[_this.executable].apply(this,result)})}}var BFAttributeParser=require("./bf_attribute_parser.js");module.exports={FacebookBinder:FacebookBinder}},{"./bf_attribute_parser.js":1}]},{},[4]);