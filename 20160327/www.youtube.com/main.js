!function(e){"use strict";function t(e,t){this.profileID=e,this.dataPathID=t,this.dynamicContent}t.prototype.getData=function(e,t){Enabler.setProfileId(1071507);var o={};o.Feed_970x250=[{}],o.Feed_970x250[0].uniqueId=8,o.Feed_970x250[0].Frame_1="Thumb-nom-nom!",o.Feed_970x250[0].Frame_1_cue_sec=1.5,o.Feed_970x250[0].Frame_2="Four weeks of the<br>ultimate mobile games",o.Feed_970x250[0].Frame_2_cue_sec=5,o.Feed_970x250[0].Frame_3="Get your<br>thumbs ready!",o.Feed_970x250[0].Frame_3_cue_sec=9.25,o.Feed_970x250[0].Frame_4="Download Agar.io for<br>free and exclusive offers on skins",o.Feed_970x250[0].Frame_4_cue_sec=13,o.Feed_970x250[0].Campaign_Name="Games Festival",o.Feed_970x250[0].Legal="",o.Feed_970x250[0].Game_Name="Agar.io",o.Feed_970x250[0].Copy_CTA="Get it now",o.Feed_970x250[0].ExitURL={},o.Feed_970x250[0].ExitURL.Url="https://play.google.com/store/apps/collection/promotion_3001ee2_games_month_3?utm_source=emea_OO&utm_medium=ytm&utm_content=Mar0416&utm_campaign=GamesMonth&pcampaignid=MKT-AC-emea-de-dsk-OO-ytm-gm-GamesMonth-Mar0416-1-MHGamesMonthW3DskDE%7Cpid_%epid!-cid_%ecid!-aid_%eaid!",o.Feed_970x250[0].IsActive=!0,o.Feed_970x250[0].IsDefault=!1,o.Feed_970x250[0].reportingLabel="Google-Q1-2016-Hats-Youtube-970x250-Agario",o.Feed_970x250[0].videoURL={},o.Feed_970x250[0].videoURL.Type="video",o.Feed_970x250[0].videoURL.Progressive_Url="agario_youtube_masthead.mp4",o.Feed_970x250[0].videoURL.Stream_Url="",o.Feed_970x250[0].imageEndframe={},o.Feed_970x250[0].imageEndframe.Type="file",o.Feed_970x250[0].imageEndframe.Url="AGARIO_endframe_nocopy.jpg",Enabler.setDevDynamicContent(o),this.dynamicContent=dynamicContent.Feed_970x250[0],e()},e.app=e.app||{},e.app.Model=t}(window),function(e){"use strict";function t(){this.container,this.video,this.exitBtn,this.cta,this.ctaIcon,this.legals,this.title,this.frame,this.smallLogo,this.partnerLogo,this.endFrameTitle,this.ctaText,this.content,this.title1,this.title2,this.title3,this.endFrame,this.flipContainer,this.videoContainer,this.bgImage,this.subheading,this.caveat,this.logoPartnerWidth}t.prototype.init=function(){CSSPlugin.defaultTransformPerspective=600;var e=this;e.container=document.querySelector(".container"),e.container.style.visibility="visible",e.exitBtn=document.getElementById("bg-exit"),e.cta=document.getElementById("rolloverBut"),e.ctaIcon=document.getElementById("rolloverIcon"),e.caveat=document.getElementById("caveat"),e.legals=document.getElementById("legals"),e.subheading=document.getElementById("subheader"),e.frame=document.getElementById("frameCopy"),e.smallLogo=document.getElementById("googleLogo"),e.partnerLogo=document.getElementById("partner-logo"),e.endFrameTitle=document.getElementById("end-frame-title1"),e.ctaText=document.getElementById("rolloverText"),e.content=document.getElementById("main"),e.title1=document.getElementById("end-frame-title1"),e.title2=document.getElementById("end-frame-title2"),e.title3=document.getElementById("end-frame-title3"),e.flipContainer=document.getElementById("flipContainer"),e.videoContainer=document.getElementById("video-container"),e.bgImage=document.getElementById("image-container"),e.logoPartnerWidth=document.getElementById("partner-logo").offsetWidth,e.changeLogoTheme("dark")},t.prototype.showCTA=function(){var e=this;TweenLite.fromTo(e.cta,1,{alpha:0},{alpha:1})},t.prototype.setCopy=function(e){var t=this;if(t.partnerLogo.innerHTML=void 0===e.campaignName?"":e.campaignName,t.subheading.innerHTML=void 0===e.subheading?"":e.subheading,t.legals.innerHTML=void 0===e.legals?"":e.legals,t.ctaText.innerHTML=void 0===e.ctaCopy?"":e.ctaCopy,e.campaignName){var o=document.getElementById("partner-logo").offsetWidth-t.logoPartnerWidth,n=document.getElementById("partner-logo").offsetLeft,a=t.smallLogo.offsetLeft;console.log(n),TweenLite.to(t.partnerLogo,0,{left:n-o/2+"px"}),TweenLite.to(t.smallLogo,0,{left:a-o/2+"px"}),t.logoPartnerWidth=document.getElementById("partner-logo").offsetWidth}},t.prototype.showCaveat=function(){var e=this;e.removeClass(e.caveat,"out")},t.prototype.changeLogoTheme=function(e){var t=this;void 0!==t.smallLogo.currentTheme&&t.removeClass(t.smallLogo,t.smallLogo.currentTheme),t.smallLogo.currentTheme=e,t.addClass(t.smallLogo,e),void 0!==t.partnerLogo.currentTheme&&t.removeClass(t.partnerLogo,t.partnerLogo.currentTheme),t.partnerLogo.currentTheme=e,t.addClass(t.partnerLogo,e),void 0!==t.legals.currentTheme&&t.removeClass(t.legals,t.legals.currentTheme),t.legals.currentTheme=e,t.addClass(t.legals,e)},t.prototype.changeCloseButtonTheme=function(e,t){document.getElementById("ytClose_dc").setAttribute("theme",e),document.getElementById("ytClose_dc").setAttribute("shadow",t)},t.prototype.addFrame=function(e,t,o,n){console.log("adding frame "+e);var a=this;if(null!=a.frame){var i=a.frame.firstElementChild;if(i.innerHTML=t,void 0!=a.lastId&&a.removeClass(a.frame,a.lastId),a.lastId=e,a.addClass(a.frame,e),TweenLite.killTweensOf(i),TweenLite.killTweensOf(a.legals),TweenLite.killTweensOf(a.subheading),TweenLite.to(a.legals,1,{alpha:1}),TweenLite.fromTo(a.subheading,1,{alpha:0},{alpha:1}),TweenLite.fromTo(i,.85*o,{alpha:0},{alpha:1}),TweenLite.fromTo(i,1,{alpha:0,delay:n,force3D:!0},{alpha:1,force3D:!0}),n>0){TweenLite.to(a.subheading,1,{delay:n,alpha:0});var d=1.1,r=1;"frame-1"===e&&(r=2),"frame-2"===e&&(d=1.2,r=1.4),"frame-3"===e?(r=2.6,d=1.1,TweenLite.to(i,0,{scale:1,force3D:!0}),TweenLite.to(i,o,{delay:n,right:"49px",force3D:!0,ease:Power2.easeOut}),TweenLite.to(i,r,{delay:n+o+.5,scale:d,force3D:!0,ease:Power2.easeOut}),TweenLite.to(i,.5,{alpha:0,delay:n+o+r,ease:Power2.easeOut})):(TweenLite.to(i,o,{delay:n,scale:d,force3D:!0}),TweenLite.to(i,1,{alpha:0,delay:n+o-r,ease:Power2.easeOut}))}}},t.prototype.toggleLogos=function(){},t.prototype.pauseVideo=function(){var e=this;e.video&&e.video.pause()},t.prototype.removeVideo=function(){var e=this;e.video&&(e.video.pause(),e.video.style.display="none",e.videoContainer.removeChild(e.video),e.video=null)},t.prototype.addVideoElement=function(e){var t=this,o=document.createElement("video");o.setAttribute("class","video"),o.setAttribute("id","video"),o.setAttribute("muted","true"),o.setAttribute("autoplay","true"),o.setAttribute("width","970"),o.setAttribute("height","250"),o.setAttribute("preload","auto"),o.style.opacity="0";var n=document.createElement("source");n.setAttribute("type","video/mp4"),n.setAttribute("src",e),o.appendChild(n),t.videoContainer.appendChild(o),t.video=document.getElementById("video")},t.prototype.addEndFrameBackground=function(e){var t=this;console.log(e),t.bgImage.style.backgroundImage="url('"+e+"')"},t.prototype.showEndFrame=function(e){var t=this;t.logoFinalPosition(),console.log(e.line1),t.addFrame("frame-4",e.line1,0,-1),t.showCTA(),t.toggleLogos(),console.log("View.prototype.showEndFrame")},t.prototype.removeFrame=function(){var e=this;e.frame&&e.smallLogo&&(e.frame=null,e.contet=null)},t.prototype.logoFinalPosition=function(){var e=this;e.removeClass(e.smallLogo,"left"),e.removeClass(e.partnerLogo,"left"),e.removeClass(e.legals,"left")},t.prototype.addFinaleFrame=function(e){var t=this;t.ctaText.innerHTML=e.ctaCopy,TweenLite.to(".flip",1,{alpha:.8,delay:.8}),TweenLite.to(".front",1,{alpha:0,delay:5}),TweenLite.to(".back",1,{alpha:1,delay:6}),TweenLite.set(".back",{rotationX:180}),TweenLite.to(".front",1,{rotationX:-180,delay:3,transformOrigin:"center middle",ease:Back.easeInOut}),TweenLite.to(".back",1,{rotationX:0,delay:3,transformOrigin:"center middle",ease:Back.easeInOut}),console.log("View.prototype.addFinaleFrame")},t.prototype.addClass=function(e,t){if(null===e.className)e.attr("class","name");else{for(var o=e.className.split(" "),n=!1,a=0;a<o.length;a++)o[a]===t&&(n=!0);n||(e.className=o.concat([t]).join(" "))}},t.prototype.removeClass=function(e,t){if(null!==e){if(null!=e.className){for(var o=e.className.split(" "),n=[],a=0;a<o.length;a++)o[a]!=t&&n.push(o[a]);e.className=n.join(" ")}}else console.error("could not add "+t+" to null object")},e.app=e.app||{},e.app.View=t}(window),function(e){"use strict";function t(e,t){this.model=e,this.view=t,this.video=t.video,this.exitBtn=t.exitBtn,this.copy={},this.isFinished=!1}t.prototype.activateEnabler=function(){function e(){Enabler.addEventListener(studio.events.StudioExit,o),Enabler.isPageLoaded()?t():Enabler.addEventListener(studio.events.StudioEvent.PAGE_LOADED,t)}function t(){Enabler.isVisible()?n():Enabler.addEventListener(studio.events.StudioEvent.VISIBLE,n)}function o(){}function n(){a.loadData()}var a=this;Enabler.isInitialized()?e():Enabler.addEventListener(studio.events.StudioEvent.INIT,e)},t.prototype.loadData=function(){var e=this;e.model.getData(function(){e.view.init(),e.view.addVideoElement(e.model.dynamicContent.videoURL.Progressive_Url),e.addEventListeners(),e.addVideoCuePoints()}),e.copy.legals=e.model.dynamicContent.Legal,e.copy.line1=e.model.dynamicContent.Frame_4,e.copy.ctaCopy=e.model.dynamicContent.Copy_CTA,e.copy.campaignName=e.model.dynamicContent.Campaign_Name,e.view.setCopy(e.copy)},t.prototype.addEventListeners=function(){function e(){TweenLite.to("#preloader",.5,{alpha:0}),n.view.addEndFrameBackground(n.model.dynamicContent.imageEndframe.Url),n.isFinished=!0,n.view.removeVideo(),n.view.showEndFrame(n.copy),n.view.changeLogoTheme("dark"),n.view.changeCloseButtonTheme("black",!1),Enabler.exitOverride("Background Exit",n.model.dynamicContent.ExitURL.Url)}function t(){TweenLite.to(n.view.cta,.3,{scale:1,ease:Power2.easeOut})}function o(){TweenLite.to(n.view.cta,.3,{scale:1.05,ease:Power2.easeOut})}var n=this;n.view.exitBtn.addEventListener("mouseover",o,!1),n.view.exitBtn.addEventListener("mouseout",t,!1),n.view.exitBtn.addEventListener("click",e,!1)},t.prototype.addVideoCuePoints=function(){function e(e){}function t(){TweenLite.to(i.view.video,.5,{alpha:1})}function o(){TweenLite.to("#preloader",.5,{alpha:0})}function n(e){}function a(){i.copy.headline=i.model.dynamicContent.Frame_4,TweenLite.to(i.view.video,.5,{alpha:0,onComplete:function(){i.isFinished=!0,i.view.video&&i.view.removeVideo()}})}var i=this;i.view.video.addEventListener("playing",o),i.view.video.addEventListener("ended",a),i.view.video.addEventListener("loadstart",e),i.view.video.addEventListener("seeked",e),i.view.video.addEventListener("canplay",t),i.view.video.addEventListener("progress",n),i.view.video.addEventListener("timeupdate",function(){for(var e in m){var t=parseFloat(e);e+="",t<=this.currentTime&&this.currentTime<=t+.5&&(m[e](),delete m[e])}});var d=i.model.dynamicContent.Frame_1_cue_sec,r=i.model.dynamicContent.Frame_2_cue_sec,l=i.model.dynamicContent.Frame_3_cue_sec,s=i.model.dynamicContent.Frame_4_cue_sec,m={.1:function(){i.view.toggleLogos(),"Agar.io"!=i.model.dynamicContent.Game_Name&&i.view.changeLogoTheme("white")},cA:function(){console.log("frame-1"),i.copy.legals=i.model.dynamicContent.Legal,i.copy.headline=i.model.dynamicContent.Frame_1,i.view.setCopy(i.copy),i.view.addFrame("frame-1",i.model.dynamicContent.Frame_1,4,.8),i.view.addEndFrameBackground(i.model.dynamicContent.imageEndframe.Url)},4.5:function(){i.view.changeLogoTheme("dark"),i.view.changeCloseButtonTheme("black",!1)},cB:function(){i.copy.headline=i.model.dynamicContent.Frame_2,i.view.setCopy(i.copy),i.view.addFrame("frame-2",i.model.dynamicContent.Frame_2,4,.8)},cC:function(){i.copy.headline=i.model.dynamicContent.Frame_3,i.view.setCopy(i.copy),i.view.addFrame("frame-3",i.model.dynamicContent.Frame_3,.1,.1),i.view.logoFinalPosition()},cD:function(){i.copy.headline=i.model.dynamicContent.Frame_4,i.view.setCopy(i.copy),i.view.addFrame("frame-4",i.model.dynamicContent.Frame_4,0,-1),i.view.addFinaleFrame(i.copy),i.view.showCTA()}};m[d]=m.cA,m[r]=m.cB,m[l]=m.cC,m[s]=m.cD},e.app=e.app||{},e.app.Controller=t}(window),function(){"use strict";function e(e,t){this.model=new app.Model,this.view=new app.View,this.controller=new app.Controller(this.model,this.view)}var t=new e(970,250);window.onload=function(){t.controller.activateEnabler()}}();