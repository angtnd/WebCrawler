define("kg/combobox/6.2.3/index",["kg/xtemplate/4.3.0/runtime","attribute","util","io","node","kg/component/6.2.2/control","kg/menu/6.1.2/lib/menu/popupmenu","kg/menu/6.1.2/lib/menu/menuitem"],function(e,t,a){var n,i,s,r,l,u,o,d=e("kg/xtemplate/4.3.0/runtime"),v=e("attribute"),g=e("util"),h=e("io"),f=e("node"),p=e("kg/component/6.2.2/control"),m=e("kg/menu/6.1.2/lib/menu/popupmenu"),C=e("kg/menu/6.1.2/lib/menu/menuitem");n=function(e){var t=d;return e=function(){var e=new t(function a(e){function t(e,t,n){e.data,e.affix;t.data+='\n<div class="',d.line=6;var i;i=p(a,e,{params:["trigger"]},t,["getBaseCssClasses"]);var s=i;t=t.writeEscaped(s),t.data+='">\n    <div class="',d.line=7;var r;r=p(a,e,{params:["trigger-inner"]},t,["getBaseCssClasses"]);var l=r;return t=t.writeEscaped(l),t.data+='">&#x25BC;</div>\n</div>\n',t}function n(e,t,a){e.data,e.affix;return t.data+="\n    disabled\n    ",t}function i(e,t,a){e.data,e.affix;return t.data+="none",t}function s(e,t,a){e.data,e.affix;return t.data+="block",t}function r(e,t,a){e.data,e.affix;return t.data+='\n         style="display:none"\n         ',t}var l,a=this,u=a.root,o=a.buffer,c=a.scope,d=(a.runtime,a.name,a.pos),v=c.data,g=c.affix,h=u.nativeCommands,f=u.utils,p=f.callFn,m=(f.callDataFn,f.callCommand,h.range,h["void"],h.foreach,h.forin,h.each,h["with"],h["if"]);h.set,h.include,h.parse,h.extend,h.block,h.macro,h["debugger"];o.data+='<div class="';var C;C=p(a,c,{params:["invalid-el"]},o,["getBaseCssClasses"]);var b=C;o=o.writeEscaped(b),o.data+='">\n    <div class="',d.line=2;var E;E=p(a,c,{params:["invalid-inner"]},o,["getBaseCssClasses"]);var w=E;o=o.writeEscaped(w),o.data+='"></div>\n</div>\n\n',d.line=5,d.line=5;var x=(l=g.hasTrigger)!==e?l:(l=v.hasTrigger)!==e?l:c.resolveLooseUp(["hasTrigger"]);o=m.call(a,c,{params:[x],fn:t},o),o.data+='\n\n<div class="',d.line=11;var y;y=p(a,c,{params:["input-wrap"]},o,["getBaseCssClasses"]);var I=y;o=o.writeEscaped(I),o.data+='">\n\n    <input id="ks-combobox-input-',d.line=13;var D=(l=g.id)!==e?l:(l=v.id)!==e?l:c.resolveLooseUp(["id"]);o=o.writeEscaped(D),o.data+='"\n           aria-haspopup="true"\n           aria-autocomplete="list"\n           aria-haspopup="true"\n           role="autocomplete"\n           aria-expanded="false"\n\n    ',d.line=20;var B=(l=g.disabled)!==e?l:(l=v.disabled)!==e?l:c.resolveLooseUp(["disabled"]);o=m.call(a,c,{params:[B],fn:n},o),o.data+='\n\n    autocomplete="off"\n    class="',d.line=25;var T;T=p(a,c,{params:["input"]},o,["getBaseCssClasses"]);var V=T;o=o.writeEscaped(V),o.data+='"\n\n    value="',d.line=27;var k=(l=g.value)!==e?l:(l=v.value)!==e?l:c.resolveLooseUp(["value"]);o=o.writeEscaped(k),o.data+='"\n    />\n\n\n    <label for="ks-combobox-input-',d.line=31;var S=(l=g.id)!==e?l:(l=v.id)!==e?l:c.resolveLooseUp(["id"]);o=o.writeEscaped(S),o.data+="\"\n            style='display:",d.line=32;var U=(l=g.value)!==e?l:(l=v.value)!==e?l:c.resolveLooseUp(["value"]);o=m.call(a,c,{params:[U],fn:i,inverse:s},o),o.data+=";'\n    class=\"",d.line=33;var R;R=p(a,c,{params:["placeholder"]},o,["getBaseCssClasses"]);var W=R;o=o.writeEscaped(W),o.data+='">\n    ',d.line=34;var _=(l=g.placeholder)!==e?l:(l=v.placeholder)!==e?l:c.resolveLooseUp(["placeholder"]);o=o.writeEscaped(_),o.data+='\n    </label>\n\n    <div class="',d.line=37;var L;L=p(a,c,{params:["clear"]},o,["getBaseCssClasses"]);var O=L;o=o.writeEscaped(O),o.data+='"\n         unselectable="on"\n         ',d.line=39;var F=(l=g.value)!==e?l:(l=v.value)!==e?l:c.resolveLooseUp(["value"]);o=m.call(a,c,{params:[!F],fn:r},o),o.data+='\n         onmousedown="return false;"><div\n            class="',d.line=43;var N;N=p(a,c,{params:["clear-inner"]},o,["getBaseCssClasses"]);var q=N;return o=o.writeEscaped(q),o.data+='">clear</div></div>\n</div>\n',o});return e.render.apply(e,arguments)}}(),i=function(e){function t(e,t){var a=[],i=0;return e?(n.each(t,function(t){-1!==t.indexOf(e)&&a.push(t),i++}),a):t}var a=v,n=g;return e=a.extend({fetchData:function(e,t,a){var n=this.get("parse"),i=this.get("data");i=n(e,i),t.call(a,i)}},{ATTRS:{data:{value:[]},parse:{value:t}}})}(),s=function(e){var t=h,a=v;return e=a.extend({fetchData:function(e,a,n){var i,s=this,r=s.get("paramName"),l=s.get("parse"),u=s.get("cache"),o=s.get("allowEmpty");if(s.caches=s.caches||{},s.io&&(s.io.abort(),s.io=null),!e&&o!==!0)return a.call(n,[]);if(u&&(i=s.caches[e]))return a.call(n,i);var c=s.get("xhrCfg");c.data=c.data||{},c.data[r]=e,c.success=function(t){l&&(t=l(e,t)),s.setInternal("data",t),u&&(s.caches[e]=t),a.call(n,t)},s.io=t(c)}},{ATTRS:{paramName:{value:"q"},allowEmpty:{},cache:{},parse:{},xhrCfg:{valueFn:function(){return{}}}}})}(),r=function(e){return e=n}(),l=function(e){function t(e){for(var t=0;t<e.length;t++)if(!e[t].get("disabled"))return e[t];return null}function a(){v(this)}function n(){var e=this;setTimeout(function(){h(e)},0)}function i(){var e=this;e.focus(),h(e)}function s(){var e=this;e.setCurrentValue(e.getCurrentValue(),{force:1})}function l(e){var t,r=this,l=r.get("menu");if(!e||l===e.target){var o=r.get("input"),c=l.get("el");t=l.get("contentEl"),o.attr("aria-owns",c.attr("id")),c.on("focusout",a,r),c.on("focusin",n,r),t.on("mouseover",i,r),t.on("mousedown",s,r),r.get("matchElWidth")&&c.getWindow().on("resize",u,r)}}function u(){var e=this,t=e.get("menu");if(t.get("visible")){var a=e.get("el"),n=t.get("el"),i=(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("borderRightWidth"),10)||0);t.set("width",a[0].offsetWidth-i)}}function o(e){var t,a=e.target,n=this;a.isMenuItem&&(t=a.get("textContent"),n.setCurrentValue(t),n._savedValue=t,n.set("collapsed",!0))}function d(e,t){var a=e.$el,n=e.getBaseCssClasses("invalid"),i=e.get("invalidEl");t?(a.addClass(n),i.attr("title",t),i.show()):(a.removeClass(n),i.hide())}function v(e){e._focusoutDismissTimer||(e._focusoutDismissTimer=setTimeout(function(){e._focusoutDismissTimer&&e.set("collapsed",!0)},50))}function h(e){var t=e._focusoutDismissTimer;t&&(clearTimeout(t),e._focusoutDismissTimer=null)}function b(e){this.set("value",e.target.value,{data:{causedByInputEvent:1}})}function E(e){var t,a,n,i=this,s=[],r=i.get("menu");if(e=i.normalizeData(e),r.set("highlightedItem",null),r.removeChildren(!0),e&&e.length){if(r.addChildren(e),s=r.get("children"),t=i.getCurrentValue(),i.get("highlightMatchItem"))for(n=0;n<s.length;n++)if(s[n].get("textContent")===t){s[n].set("highlighted",!0),r.set("highlightedItem",s[n]),a=!0;break}if(!a&&i.get("autoHighlightFirst"))for(n=0;n<s.length;n++)if(!s[n].get("disabled")){s[n].set("highlighted",!0),r.set("highlightedItem",s[n]);break}i.set("collapsed",!1),i.fire("afterRenderData")}else i.set("collapsed",!0)}var w=g,x=f,y=p,I=r,D=m,B=C,T=y.Manager;T.setConstructorByXClass("popupmenu",D),T.setConstructorByXClass("menuitem",B);var V,k=x.Event.KeyCode;return V=y.extend({initializer:function(){this.publish("afterRenderData",{bubbles:!1})},_savedValue:null,bindUI:function(){var e=this,t=e.get("input");t.on("input",b,e),e.on("click",o,e);var a=e.get("menu");a.get("rendered")?l.call(e):a.on("afterRenderUI",l,e)},destructor:function(){var e=this;e.get("menu").destroy(),e.$el.getWindow().detach("resize",u,e)},normalizeData:function(e){var t,a,n,i=this;if(e&&e.length){for(e=e.slice(0,i.get("maxItemCount")),t=i.get("format")?i.get("format").call(i,i.getCurrentValue(),e):[],n=0;n<e.length;n++)a=e[n],c=t[n]=w.mix({content:a,textContent:a,value:a},t[n]);return t}return t},getCurrentValue:function(){return this.get("value")},setCurrentValue:function(e,t){this.set("value",e,t)},_onSetValue:function(e,t){var a,n=this,i=n.get("clearEl");if(t.causedByInputEvent){if(a=n.getCurrentValue(),void 0===a)return void n.set("collapsed",!0);n._savedValue=a,n.sendRequest(a)}else n.get("input").val(e);e&&i?i.show():!e&&i&&i.hide();var s=n.get("placeholderEl");s&&(e?s.hide():s.show())},handleFocusInternal:function(){var e=this;h(e),e.get("invalidEl")&&d(e,!1)},handleBlurInternal:function(e){var t=this;t.callSuper(e),v(t),t.get("invalidEl")&&t.validate(function(e,a){e?t.get("focused")||a!==t.get("value")||d(t,e):d(t,!1)})},handleMouseDownInternal:function(e){var t,a,n,i=this;i.callSuper(e),t=e.target,n=i.get("trigger"),a=i.get("clearEl"),n&&(n[0]===t||n.contains(t))?(i.get("collapsed")?(i.focus(),i.sendRequest("")):i.set("collapsed",!0),e.preventDefault()):a&&(a[0]===t||a.contains(t))&&(i.get("input").val(""),i.setCurrentValue("",{data:{causedByInputEvent:1}}),a.hide())},handleKeyDownInternal:function(e){var a,n,i,s=this,r=e.keyCode,l=s.get("menu");if(input=s.get("input"),a=s.get("updateInputOnDownUp"),l.get("visible")){if(n=l.get("highlightedItem"),a&&n){var u=l.get("children");if(r===k.DOWN&&n===t(u.concat().reverse())||r===k.UP&&n===t(u))return s.setCurrentValue(s._savedValue),n.set("highlighted",!1),!0}return i=l.handleKeyDownInternal(e),n=l.get("highlightedItem"),r===k.ESC?(s.set("collapsed",!0),a&&s.setCurrentValue(s._savedValue),!0):(a&&w.inArray(r,[k.DOWN,k.UP])&&s.setCurrentValue(n.get("textContent")),r===k.TAB&&n&&(n.handleClickInternal(e),s.get("multiple"))?!0:i)}if(r===k.DOWN||r===k.UP){var o=s.getCurrentValue();if(void 0!==o)return s.sendRequest(o),!0}},validate:function(e){var t=this,a=t.get("validator"),n=t.getCurrentValue();a?a(n,function(t){e(t,n)}):e(!1,n)},sendRequest:function(e){var t=this,a=t.get("dataSource");a.fetchData(e,E,t)},getKeyEventTarget:function(){return this.get("input")},_onSetCollapsed:function(e){var t=this,a=t.$el,n=t.get("menu");if(e)n.hide();else if(h(t),!n.get("visible")){if(t.get("matchElWidth")){n.render();var i=n.get("el"),s=(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("borderRightWidth"),10)||0);n.set("width",a[0].offsetWidth-s)}n.show()}this.get("input").attr("aria-expanded",!e)},_onSetDisabled:function(e,t){this.callSuper(e,t),this.get("input").attr("disabled",e)}},{ATTRS:{handleGestureEvents:{value:!0},focusable:{value:!0},allowTextSelection:{value:!0},contentTpl:{value:I},input:{selector:function(){return"."+this.getBaseCssClass("input")}},value:{value:"",sync:0,render:1,parse:function(){return this.get("input").val()}},trigger:{selector:function(){return"."+this.getBaseCssClass("trigger")}},placeholder:{render:1,sync:0,parse:function(){var e=this.get("placeholderEl");return e&&e.html()}},placeholderEl:{selector:function(){return"."+this.getBaseCssClass("placeholder")}},clearEl:{selector:function(){return"."+this.getBaseCssClass("clear")}},validator:{},invalidEl:{selector:function(){return"."+this.getBaseCssClass("invalid-el")}},hasTrigger:{value:!0,sync:0,render:1},menu:{getter:function(e){return e=e||{},e.isControl||(e.xclass=e.xclass||"popupmenu",e=this.createComponent(e),this.setInternal("menu",e)),e},setter:function(e){if(e.isControl){e.setInternal("parent",this);var t={node:this.$el,points:["bl","tl"],overflow:{adjustX:1,adjustY:1}};w.mix(e.get("align"),t,!1)}}},collapsed:{render:1,sync:0,value:!0},dataSource:{},maxItemCount:{value:99999},matchElWidth:{value:!0},format:{},updateInputOnDownUp:{value:!0},autoHighlightFirst:{},highlightMatchItem:{value:!0}},xclass:"combobox"}),e=V,V.version="@VERSION@",e}(),u=function(e){var t=l,a=i,n=s;return t.LocalDataSource=a,t.RemoteDataSource=n,e=t}(),o=function(e){return e=u}(),a.exports=o});define("kg/search-suggest/6.2.3/mods/local-query",["base","json","util","kg/search-suggest/6.2.3/mods/storage"],function(t,e,a){function s(t){s.superclass.constructor.call(this,t||{}),this.initialize()}var i=t("base"),n=t("json"),r=t("util"),o=t("kg/search-suggest/6.2.3/mods/storage"),l="localQuery";r.extend(s,i,{initialize:function(){var t=this,e=t.get("name"),a=t.get("tab"),s=t.get("user");"item"===a&&(a="baobei"),t.storageKey=l+e+a+s,t._getStorage()},checkFlash:function(t){this.storage.read(t)},_setKey:function(t){var e=this,a=t.name||e.get("name"),s=t.tab||e.get("tab"),i=t.user||e.get("user");"item"===s&&(s="baobei"),e.storageKey=l+a+s+i,e.set("tab",s),e.set("name",a),e.set("user",i),this.datalist=null},_save:function(t,e){if(!t.match(/<>'"/)&&!e.match(/<>'"/)){var a=this._getDatalist(),s=encodeURIComponent(t),i={key:s,value:encodeURIComponent(e),time:r.now()};this._deleteItemByValue(a,s),a.unshift(i)}},_deleteItemByValue:function(t,e){for(var a,s=null,i=0;i<t.length;i++)a=t[i].key,a===e&&(s=t.splice(i,1),i--)},_query:function(t){var e,a,s=this._getDatalist(),i=[];return t?(t=encodeURIComponent(t),r.each(s,function(s){e=s.key,a=s.value,(0===e.indexOf(t)||0===a.indexOf(t))&&i.push(s)}),this._distinctByValue(i)):this._distinctByValue(s)},_distinctByValue:function(t){for(var e,a=[],s=0,i=t.length;i>s;s++)e=t[s],e.value.match(/%3C|%3E|[<>'"]/g)||this._hasItemOfValue(a,e.value)||a.push(e);return a},_hasItemOfValue:function(t,e){for(var a=!1,s=t.length-1;s>=0;s--)t[s].value===e&&(a=!0);return a},_cleanBefore:function(t){for(var e,a=this._getDatalist(),s=0,i=a.length-1;i>=0;i--)if(e=a[i],e.time>t){s=i+1;break}a.length=s},_getDatalist:function(){return this.datalist||(this.datalist=this.storage.read()||[]),this.datalist},_getStorage:function(){var t=this.get("storageType");switch(t){case"flashStorage":this.storage=this._initFlashStorage();break;default:this.storage=!1}},_initFlashStorage:function(){var t=this;return{save:function(){return(new o).save(t.storageKey,n.stringify(t.datalist))},read:function(e){var a=(new o).read(t.storageKey,e);if(a){var s=n.parse(a);return s}}}},destructor:function(){this.datalist=null,l=null},save:function(t,e){if(""!==e){var a,s=this.storage.read();s&&(a=s.length);var i=this._save(t,e),n=this.storage.save();return a>300&&(this.datalist=this.datalist.slice(0,a-10),KISSY.log("add_before\n"+n+"\n"+a),n=this.storage.save(),KISSY.log("add_after\n"+n+"\n"+a)),i}},query:function(t){return this._query(t)},deleteItem:function(t){var e=this._getDatalist(),a=e.length;this._deleteItemByValue(e,encodeURIComponent(t));var s=this.storage.save();a>300&&(this.datalist=this.datalist.slice(0,a-10),s=this.storage.save(),KISSY.log("delete\n"+s+"\n"+a))},clearByDay:function(t){var e=r.now()-24*t*3600*1e3;this._cleanBefore(e),this.storage.save()},hasHistory:function(){return this._getDatalist().length>0?!0:!1}},{ATTRS:{name:{value:"default",setter:function(t){return t}},user:{value:"",setter:function(t){return r.fromUnicode(t)}},maxLength:{value:500},storageType:{value:"flashStorage",setter:function(t){return t},getter:function(t){return t}}}}),a.exports=s});define("kg/search-suggest/6.2.3/mods/menu",["node","util"],function(e,t,n){var r=e("node"),o=e("util"),i=r.all,u=function(e){var t=this;t.opts=o.mix(u.defs,e),t.$wrap=i(t.opts.wrap),t.$menu=i(t.opts.menu),t.locs=[],t.rNow=null,t.tOut=null,t.init()};u.defs={wrap:"",menu:"",rows:"",dealy:300,handler:null,tolerance:0},u.prototype.getOffset=function(){var e=this,t=e.opts,n=e.$menu,r=n.offset();e.menuOffset=r,e.upperRight={x:r.left+n.outerWidth(),y:r.top-t.tolerance},e.lowerRight={x:r.left+n.outerWidth(),y:r.top+n.outerHeight()+t.tolerance}},u.prototype.bindEvent=function(){var e,t,n,r=this,o=r.opts,u=r.locs,l=r.rNow,a=r.tOut,s=null,f=function(a){function f(e,t){return(t.y-e.y)/(t.x-e.x)}var c=!!i(a).one(o.cls);r.getOffset(),e=r.menuOffset,t=r.upperRight,n=r.lowerRight;var p=u[u.length-1],y=u[0];if(!l||!p)return 0;if(y.x<e.left||y.x>n.x||y.y<e.top||y.y>n.y)return 0;if(s&&p.x===s.x&&p.y===s.y)return 0;var g=f(p,t),h=f(p,n),d=f(y,t),m=f(y,n);return c&&d>g&&h>m?(s=p,o.dealy):(s=null,0)},c=function(e){l!==e&&(o.handler.enterHandler(e),l=e)},p=function(e,t){t?r.isDelay=!0:r.isDelay=!1;var n=f(t);n?a=setTimeout(function(){p(r.currentTarget,r.currentTarget)},n):(r.isDelay=!1,c(e))},y=function(e){u.push({x:e.pageX,y:e.pageY}),u.length>3&&u.shift()},g=function(){l=null,o.handler.leaveHandler()},h=function(){r.isDelay=!1,l=null,a&&clearTimeout(a)},d=function(e){if(r.currentTarget=e.currentTarget,!r.isDelay){a&&clearTimeout(a);var t=e.relatedTarget,n=i(t).parent(o.rows);p(e.currentTarget,n)}};r.$wrap.on("mousemove",y).on("mouseleave",g),r.$menu.on("mouseleave",h).delegate("mouseenter",o.rows,d)},u.prototype.init=function(){this.getOffset(),this.bindEvent()},n.exports=u});define("kg/search-suggest/6.2.3/tpl/cloud",[],function(a,t,l){l.exports={navi:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="false" class="J_cloud-handle cloud-navi-list" '+a.autoAttr+'> <div class="inner-wrap"> <a class="cloud-img-wrap" href="//'+a.data.url+"?source=suggest&suggest=navi_"+a.index+'_1" target="_self"> <img src="//img.alicdn.com/tps/i1/'+a.data.logo+'_70x70.jpg" /> </a> <p>'+a.data.title+'</p> <a class="cloud-btn-wrap" href="//'+a.data.url+"?source=suggest&suggest=navi_"+a.index+'_1" target="_self"> <span class="cloud-link">'+a.data.button+"</span><i>></i> </a> </div></div>";return t},qrcode:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="false" class="J_cloud-handle cloud-qrcode" '+a.autoAttr+' > <div class="inner-wrap"> <a href="'+a.data.url+'"><img src="'+a.data.image+'"/></a> </div></div>';return t},spu:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="false" class="J_cloud-handle cloud-spu-list" '+a.autoAttr+' > <div class="inner-wrap"> <ul> ',l=a.data;if(l)for(var s,i=-1,e=l.length-1;e>i;)s=l[i+=1],t+=' <li> <a class="cloud-img-wrap cloud-link" href="//'+s.url+"&source=suggest&suggest=spu_"+a.index+"_"+(~~i+1)+'" target="_self"> <img src="//img.alicdn.com/tps/i1/'+s.pic+'_50x50.jpg" /> </a> <a class="cloud-title" title="'+s.title+'" href="//'+s.url+"&source=suggest&suggest=spu_"+a.index+"_"+(~~i+1)+'" target="_self"> <span>'+s.title+'</span> </a> <p class="cloud-price '+(0===~~s.price?"cloud-hidden":"")+'">\u53c2\u8003\u4ef7:<b class="">\uffe5'+s.price+'</b><b class="noprice">\u6682\u65e0</b></p> </li> ';return t+=' </ul> <p class="cloud-total '+a.ishidden+'"> <span class="total">\u5171'+a.count+'\u6b3e\u4ea7\u54c1</span> <a class="more" target="_self" href="//'+a.link+"&source=suggest&suggest=spu_"+a.index+'_more">\u67e5\u770b\u5168\u90e8>></a> </p> </div></div>'},tag:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="true" class="J_cloud-handle cloud-list" '+a.autoAttr+' > <div class="inner-wrap"><h3>'+a.tagTitle+"</h3> <ul> ",l=a.data;if(l)for(var s,i=-1,e=l.length-1;e>i;)s=l[i+=1],t+=' <li><a target="_self" href="'+a.action+"?q="+a.tagTitle+" "+s+"&wq="+a.query+"&source=suggest&suggest=magic_"+a.index+"_"+(~~i+1)+"&tag="+s+a.param+'" class="cloud-link"><span>'+s+"</span></a></li> ";return t+=" </ul> </div></div>"},tag_group:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="true" class="J_cloud-handle cloud-list type-taggroup" '+a.autoAttr+' > <div class="inner-wrap"><h3>'+a.tagTitle+"</h3> <ul> ",l=a.data;if(l)for(var s,i=-1,e=l.length-1;e>i;){s=l[i+=1],t+=' <li  class="tag-group"> <ul> ';var r=s;if(r)for(var u,d=-1,n=r.length-1;n>d;)u=r[d+=1],t+=' <li> <a target="_self" href="'+a.action+"?q="+encodeURIComponent(a.tagTitle+" "+u.title)+"&wq="+a.query+"&source=suggest&suggest=magic_"+a.index+"_"+(~~d+1)+"&tag="+u.title+a.param+'" class="cloud-link '+u.type+'"><span>'+u.title+"</span></a> </li> ";t+=" </ul> </li> "}return t+=" </ul> </div></div>"},topbrand:function(a){var t='<div id="J_CloudList'+a.prefix+'" data-align="false" class="J_cloud-handle cloud-topbrand-list" '+a.autoAttr+' > <div class="inner-wrap"> <h3>\u201c'+a.tagTitle.substr(0,11)+"\u201d\u70ed\u95e8\u54c1\u724c</h3><ul> ",l=a.data;if(l)for(var s,i=-1,e=l.length-1;e>i;)s=l[i+=1],t+=' <li> <a class="cloud-title cloud-link" href="//'+s.url+"&source=suggest&suggest=brandlist_"+a.index+"_"+(~~i+1)+'" target="_self"> <span><i class="cloud-top'+i+'">'+(~~i+1)+"</i>"+s.title+"</span> </a> </li> ";return t+=" </ul> </div></div>"}}});define("kg/search-suggest/6.2.3/mods/bts",["base","kg/search-suggest/6.2.3/mods/utils","util"],function(t,e,s){function u(t){u.superclass.constructor.call(this,t||{})}var i=t("base"),n=t("kg/search-suggest/6.2.3/mods/utils"),r=t("util");r.extend(u,i,{getBucket:function(){var t=this,e=t.getCookieT(),s=t.getTestBucket()||t.retBucket(e,20,-4,4)-0;return s},getTestBucket:function(){var t=location.search,e=t.match(/alg_bts=(\d+)/);return e&&e[1]?e[1]-0:void 0},getCookieT:function(){var t=new n,e=t.getCookie("t");return e},retBucket:function(t,e,s,u){return t?this.countBucket(t,e,s,u):"0"},countBucket:function(t,e,s,u){var i=t.substr(s,u),n=parseInt(i,16),r=n%e+1;return r+""}},{ATTRS:{pluginId:{value:"bts"}}}),s.exports=u});define("kg/uploader/6.2.6/index",["base","util","kg/uploader/6.2.6/logger.js","json","node","io","ua","kg/flash/6.0.8/index","event"],function(e,t,r){var a,i,n,s,u,l,o,d,f,c,p,g=e("base"),v=e("util"),h=e("kg/uploader/6.2.6/logger.js"),m=e("json"),S=e("node"),_=e("io"),R=e("ua"),E=e("kg/flash/6.0.8/index"),b=e("event");a=function(e){"use strict";return e=KISSY||{log:function(){},error:function(){}}}(),i=function(e){"use strict";var t=g,r=v,a=h,i=m,n="",s=t.extend({upload:function(){},stop:function(){},_processResponse:function(e){var t=this,s=t.get("filter"),u={};if(r.isString(e))try{u=i.parse(e),s!=n&&(u=s.call(t,e)),u=t._fromUnicode(u)}catch(l){var o=e+"\uff0c\u8fd4\u56de\u7ed3\u679c\u96c6responseText\u683c\u5f0f\u4e0d\u5408\u6cd5\uff01";a.log(o),t.fire("error",{status:-1,result:{msg:o}})}else r.isObject(e)&&(u=e,s!=n&&(u=s.call(t,e)),u=t._fromUnicode(u));return a.log("\u670d\u52a1\u5668\u7aef\u8f93\u51fa\uff1a"+i.stringify(u)),u},_fromUnicode:function(e){function t(e){r.each(e,function(a,i){r.isObject(e[i])?t(e[i]):e[i]=r.isString(a)&&r.fromUnicode(a)||a})}return r.isObject(e)?(t(e),e):e}},{ATTRS:{action:{value:n},data:{value:{}},filter:{value:n}}});return r.mix(s,{event:{START:"start",STOP:"stop",SUCCESS:"success",ERROR:"error"}}),e=s}(),n=function(e){"use strict";var t=S,r=i,a=_,n=v,s=h,u="",l=t.all,o="[uploader-AjaxType]:",d=r.extend({upload:function(e){var t=this;if(!e)return s.log(o+"upload()\uff0cfileData\u53c2\u6570\u6709\u8bef\uff01"),t;var r=t.get("blobSize");return r>0?t._chunkedUpload(e):t._fullUpload(e),t},stop:function(){var e=this,t=e.get("ajax");return n.isObject(t)?(t.abort(),e.fire(d.event.STOP),e):(s.log(o+"stop()\uff0cio\u503c\u9519\u8bef\uff01"),e)},_getFormData:function(e){return l.isArray(e)?e:n.isObject(e)?(e=[],l.each(e,function(t,r){e.push({name:t,value:r})}),e):e},_setWithCredentials:function(){var e=this,t=e.get("ajaxConfig");return n.mix(t,{xhrFields:{withCredentials:!0}}),t},_setFormData:function(){var e=this;try{e.set("formData",new FormData),e._processData()}catch(t){s.log(o+"something error when reset FormData.")}},_resetFormData:function(){var e=this;e.set("formData",new FormData)},_processData:function(){var e=this,t=e.get("data"),r=e.get("formData");n.each(t,function(e,t){r.append(t,e)}),e.set("formData",r)},_addFileData:function(e){if(!n.isObject(e))return s.log(o+"_addFileData()\uff0cfile\u53c2\u6570\u6709\u8bef\uff01"),!1;var t=this,r=t.get("formData"),a=t.get("fileDataName"),i=e.name;return r.append(a,e,i),t.set("formData",r),r},_chunkedUpload:function(e){function t(){var s=f.call(e,l,l+o,e.type),c=s.size;r._setContentDisposition(e.name),r._setContentRange(l,c,u),r._setFormData(),r._addFileData(s),n.mix(i,{data:r.get("formData")});var p=a(i);p.then(function(e){var a=e[0];l=r._getUploadedBytes(p)||l+c,r.fire(d.event.PROGRESS,{loaded:l,total:u}),u>l?t():r.fire(d.event.SUCCESS,{result:a})},function(t){r._errorHandler(t,e)})}if(!n.isObject(e))return!1;var r=this,i=r.get("ajaxConfig"),s=r.get("action");n.mix(i,{url:s});var u=e.size,l=0,o=r.get("blobSize")||u,f=e.slice||e.webkitSlice||e.mozSlice;t()},_fullUpload:function(e){var t=this,r=t.get("ajaxConfig");t._setFormData(),t._addFileData(e),n.mix(r,{data:t.get("formData"),url:t.get("action")});var i=a(r);return i.then(function(e){var r=e[0];r=t._processResponse(r),t.fire(d.event.SUCCESS,{result:r})},function(r){t._errorHandler(r,e)}),t.set("ajax",i),i},_errorHandler:function(e,t){var r=this,a={},i=e[1];"timeout"==i&&(a.msg="\u8bf7\u6c42\u8d85\u65f6\uff01",a.status="timeout"),r.fire(d.event.ERROR,{status:i,result:a,file:t})},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),r=t&&t.split("-"),a=r&&r.length>1&&parseInt(r[1],10);return a&&a+1},_setContentRange:function(e,t,r){var a="bytes "+e+"-"+(e+t-1)+"/"+r,i=this,n=i.get("ajaxConfig"),s=n.headers;return s["Content-Range"]=a,a},_setContentDisposition:function(e){return this._setRequestHeader("Content-Disposition",'attachment; filename="'+encodeURI(e)+'"')},_setRequestHeader:function(e,t){var r=this,a=r.get("ajaxConfig");return a.headers[e]=t,r.set("ajaxConfig",a),t}},{ATTRS:{formData:{value:u},ajaxConfig:{value:{type:"post",processData:!1,cache:!1,dataType:"json",contentType:!1,timeout:600,headers:{}}},ajax:{value:u},fileDataName:{value:u},form:{value:{}},fileInput:{value:u},blobSize:{value:0},CORS:{value:!1},isUsePostMessage:{value:!1},timeout:{value:600,setter:function(e){var t=this,r=t.get("ajaxConfig");return r.timeout=e,e}}}});return n.mix(d,{event:n.merge(r.event,{PROGRESS:"progress"})}),e=d}(),s=function(e){"use strict";function t(e){var r=this;t.superclass.constructor.call(r,e),r.isHasCrossdomain(),r._init()}var r=i,a="",n="[uploader-FlashType]:",s=v,u=h,l=_;return s.mix(t,{event:s.merge(r.event,{SWF_READY:"swfReady",PROGRESS:"progress"})}),s.extend(t,r,{_init:function(){var e=this,r=e.get("swfUploader");return r?(r.on("contentReady",function(){e.fire(t.event.SWF_READY)},e),r.on("uploadStart",e._uploadStartHandler,e),r.on("uploadProgress",e._uploadProgressHandler,e),r.on("uploadCompleteData",e._uploadCompleteDataHandler,e),void r.on("uploadError",e._uploadErrorHandler,e)):(u.log(n+"swfUploader\u5bf9\u8c61\u4e3a\u7a7a\uff01"),!1)},upload:function(e){var t=this,r=t.get("swfUploader"),a=t.get("action"),i="POST",n=t.get("data"),u=t.get("fileDataName");return u||(u="Filedata"),t.set("uploadingId",e),s.mix(n,{type:"flash"}),r.upload(e,a,i,n,u),t},stop:function(){var e=this,r=e.get("swfUploader"),i=e.get("uploadingId");return i!=a&&(r.cancel(i),e.fire(t.event.STOP,{id:i})),e},_uploadStartHandler:function(e){var r=this;r.fire(t.event.START,{file:e.file})},_uploadProgressHandler:function(e){var r=this;s.mix(e,{loaded:e.bytesLoaded,total:e.bytesTotal}),u.log(n+"\u5df2\u7ecf\u4e0a\u4f20\u5b57\u8282\u6570\u4e3a\uff1a"+e.bytesLoaded),r.fire(t.event.PROGRESS,{loaded:e.loaded,total:e.total})},_uploadCompleteDataHandler:function(e){var r=this,i=r._processResponse(e.data);r.set("uploadingId",a),r.fire(t.event.SUCCESS,{result:i})},_uploadErrorHandler:function(e){var r=this;r.set("uploadingId",a),r.fire(t.event.ERROR,{msg:e.msg})},isHasCrossdomain:function(){var e=location.hostname;l({url:"//"+e+"/crossdomain.xml",dataType:"xml",error:function(){u.log("\u7f3a\u5c11crossdomain.xml\u6587\u4ef6\u6216\u8be5\u6587\u4ef6\u4e0d\u5408\u6cd5\uff01")}})}},{ATTRS:{action:{value:a,getter:function(e){var t=/^http/;if(!t.test(e)&&!/\/\//.test(e)){var r,a=location.href,i=a.split("/");r=s.filter(i,function(e,t){return t<i.length-1}),e=r.join("/")+"/"+e}return e}},swfUploader:{value:a},uploadingId:{value:a}}}),s.mix(t,{event:s.merge(r.event,{PROGRESS:"progress"})}),e=t}(),u=function(e){"use strict";var t=S,r=g,a="",i=v,n=R,s=r.extend({constructor:function(e,r){var a=this;r=i.merge({target:t(e)},r),s.superclass.constructor.call(a,r)},render:function(){var e=this,t=e.get("srcFileInput");if(!t||!t.length)return e;var r=t.clone();r.addClass("file-input"),t.remove(),e.set("srcFileInput",r),e._createInput()},show:function(){var e=this,t=e.get("target");return t.show(),e.fire("afterShow"),s},hide:function(){var e=this,t=e.get("target");return t.hide(),e.fire("afterHide"),s},reset:function(){var e=this,r=e.get("inputContainer");return t(r).remove(),e.set("inputContainer",a),e.set("fileInput",a),e._createInput(),e},_createInput:function(){var e=this,r=e.get("target"),a=e.get("tpl");if(!i.isString(a))return!1;var s=e.get("srcFileInput");if(!s.length)return!1;var u=s.clone();e.set("fileInput",u);var l=t(a);return l.append(u),l.appendTo(r),6==n.ie&&u.css("fontSize","400px"),t(u).on("change",e._changeHandler,e),e.set("inputContainer",l),e._setDisabled(e.get("disabled")),e._setMultiple(e.get("multiple")),l},_changeHandler:function(e){var r=this,n=r.get("fileInput"),s=t(n).val(),u=e.target.files,l=[];return s==a?!1:(u?i.each(u,function(e){i.isObject(e)&&l.push({name:e.name,type:e.type,size:e.size,data:e})}):l.push({name:s.replace(/.*(\/|\\)/,"")}),r.fire("change",{files:l,input:n.getDOMNode()}),void r.reset())},_setDisabled:function(e){var r=this,a=r.get("cls"),n=a.disabled,s=r.get("target"),u=r.get("fileInput");return s.length&&i.isBoolean(e)?(e?(s.addClass(n),t(u).hide()):(s.removeClass(n),t(u).show()),e):!1},_setMultiple:function(e){var t=this,r=t.get("fileInput");return r.length?(e&&r.attr("multiple","multiple")||r.removeAttr("multiple"),e):!1}},{ATTRS:{target:{value:null},fileInput:{value:a},srcFileInput:{value:a},inputContainer:{value:a},tpl:{value:"<div class='file-input-wrapper' style='overflow: hidden;'></div>"},name:{value:"fileInput",setter:function(e){return this.get("fileInput")&&t(this.get("fileInput")).attr("name",e),e}},disabled:{value:!1,setter:function(e){return this._setDisabled(e),e}},multiple:{value:!0,setter:function(e){return this._setMultiple(e),e}},cls:{value:{disabled:"uploader-button-disabled"}}}});return e=s}(),l=function(e){"use strict";function t(e,a,n){e=e.replace(s,""),a=r._normalize(a||{});var u=this,f=s+e,c=function(e){return e.status<1?void u.fire("failed",{data:e}):(i.mix(u,e),void(e.dynamic&&a.src||u.activate()))};a.id=a.id||i.guid(l),t.instances[a.id]=u,a.src&&(a.params.allowscriptaccess="always",a.params.flashvars=i.merge(a.params.flashvars,{jsEntry:d,swfID:a.id})),n?u.__args=[f,a,c]:i.later(r.add,o,!1,r,[f,a,c])}var r=E,a=b,i=v,n=h,s="#",u="1.0.15",l="ks-ajb-",o=100,d="KISSY.AJBridge.eventHandler";return i.mix(t,{version:u,instances:{},eventHandler:function(e,r){var a=t.instances[e];a&&a.__eventHandler(e,r)},augment:function(e,t){i.isString(t)&&(t=[t]),i.isArray(t)&&i.each(t,function(t){e.prototype[t]=function(){try{return this.callSWF(t,i.makeArray(arguments))}catch(e){this.fire("error",{message:e})}}})}}),i.augment(t,a.Target,{init:function(){this.__args&&(r.add.apply(r,this.__args),this.__args=null,delete this.__args)},__eventHandler:function(e,t){var r=this,a=t.type;switch(t.id=e,a){case"log":n.log(t.message);break;default:r.fire(a,t)}},callSWF:function(e,t){var r=this;t=t||[];try{if(r.swf[e])return r.swf[e].apply(r.swf,t)}catch(a){var i="";return 0!==t.length&&(i="'"+t.join("','")+"'"),new Function("self","return self.swf."+e+"("+i+");")(r)}}}),t.augment(t,["activate","getReady","getCoreVersion"]),window.AJBridge=t,e=t}(),o=function(e){"use strict";function t(e){var t=-1;do e/=1024,t++;while(e>99);return Math.max(e,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][t]}var r=g,i="",n="[uploader-queue]:",s=v,u=a,l=r.extend({add:function(e,t){var r=this,a={};if(e.length>0){a=[];var i=r.get("uploader"),n=r.get("files").length,u=i.get("max")>0;s.each(e,function(e,t){if(u){var s=i.get("max");s>=n+t+1&&a.push(r._addFile(e))}else a.push(r._addFile(e))})}else a=r._addFile(e);return t&&t.call(r),a},_addFile:function(e,t){if(!s.isObject(e))return u.log(n+"_addFile()\u53c2\u6570file\u4e0d\u5408\u6cd5\uff01"),!1;var r=this,a=r._setAddFileData(e),i=r.getFileIndex(a.id),o=r.get("fnAdd");return s.isFunction(o)&&(a=o(i,a)),r.fire(l.event.ADD,{index:i,file:a,uploader:r.get("uploader")}),t&&t.call(r,i,a),a},remove:function(e,t){var r,a=this,i=a.get("files");return s.isString(e)&&(e=a.getFileIndex(e)),r=i[e],s.isObject(r)?(i=s.filter(i,function(t,r){return r!==e}),a.set("files",i),a.fire(l.event.REMOVE,{index:e,file:r}),t&&t.call(a,e,r),r):(u.log(n+"remove()\u4e0d\u5b58\u5728index\u4e3a"+e+"\u7684\u6587\u4ef6\u6570\u636e"),!1)},clear:function(){function e(){return t=r.get("files"),t.length?void r.remove(0,function(){e()}):(r.fire(l.event.CLEAR),!1)}var t,r=this;e()},fileStatus:function(e,t,r){if(!s.isNumber(e))return!1;var a,i=this,n=i.getFile(e);return n?(a=n.status,t?a==t?i:(i.updateFile(e,{status:t}),i.fire(l.event.FILE_STATUS,{index:e,status:t,args:r,file:n}),i):a):!1},getFile:function(e){var t,r=this,a=r.get("files");return s.isNumber(e)?t=a[e]:s.each(a,function(r){return r.id==e?(t=r,!0):void 0}),t},getFileIndex:function(e){var t=this,r=t.get("files"),a=-1;return s.each(r,function(t,r){return t.id==e?(a=r,!0):void 0}),a},updateFile:function(e,t){if(!s.isNumber(e))return!1;if(!s.isObject(t))return u.log(n+"updateFile()\u7684data\u53c2\u6570\u6709\u8bef\uff01"),!1;var r=this,a=r.get("files"),i=r.getFile(e);return i?(s.mix(i,t),a[e]=i,r.set("files",a),r.fire(l.event.UPDATE_FILE,{index:e,file:i}),i):!1},getIndexs:function(e){var t,r=this,a=r.get("files"),i=[];return a.length?(s.each(a,function(r,a){s.isObject(r)&&(t=r.status,t==e&&i.push(a))}),i):i},getFiles:function(e){var t=this,r=t.get("files"),a=[];return r.length?(s.each(r,function(t){t&&t.status==e&&a.push(t)}),a):[]},_setAddFileData:function(e){var r=this,a=r.get("files");return s.isObject(e)?(e.id||(e.id=s.guid(l.FILE_ID_PREFIX)),e.size&&(e.textSize=t(e.size)),e.status||(e.status="waiting"),a.push(e),e):(u.log(n+"_updateFileData()\u53c2\u6570file\u4e0d\u5408\u6cd5\uff01"),!1)}},{ATTRS:{fnAdd:{value:i},files:{value:[]},uploader:{value:i}}});return s.mix(l,{event:{ADD:"add",ADD_FILES:"addFiles",REMOVE:"remove",CLEAR:"clear",FILE_STATUS:"statusChange",UPDATE_FILE:"updateFile"},status:{WAITING:"waiting",START:"start",PROGRESS:"progress",SUCCESS:"success",CANCEL:"cancel",ERROR:"error",RESTORE:"restore"},FILE_ID_PREFIX:"file-"}),e=l}(),d=function(e){"use strict";var t=S,r=i,a=v,n="",s=t.all,u="[uploader-iframeType]:",l="ks-uploader-iframe-",o=h,d={tpl:{IFRAME:'<iframe src="javascript:false;" name="{id}" id="{id}" border="no" width="1" height="1" style="display: none;" />',FORM:'<form method="post" enctype="multipart/form-data" action="{action}" target="{target}" style="visibility: hidden;">{hiddenInputs}</form>',HIDDEN_INPUT:'<input type="hidden" name="{name}" value="{value}" />'},event:a.mix(r.event,{CREATE:"create",REMOVE:"remove"})},f=r.extend({upload:function(e){var t,r=this,a=s(e);return a.length?(r.fire(d.event.START,{input:a}),r.set("fileInput",a),r._create(),(t=r.get("form"))?void t.getDOMNode().submit():(o.log(u+"form\u8282\u70b9\u4e0d\u5b58\u5728\uff01"),!1)):!1},stop:function(){var e=this,t=e.get("iframe");return t.attr("src",'javascript:"<html></html>";'),e._remove(),e.fire(d.event.STOP),e.fire(d.event.ERROR,{status:"abort",msg:"\u4e0a\u4f20\u5931\u8d25\uff0c\u539f\u56e0\uff1aabort"}),e},dataToHidden:function(e){if(!a.isObject(e)||a.isEmptyObject(e))return"";var t=this,r=n,i=t.get("tpl"),s=i.HIDDEN_INPUT;if(!a.isString(s))return"";for(var u in e)r+=a.substitute(s,{name:u,value:e[u]});return r},_createIframe:function(){var e,t,r=this,i=l+a.guid(),n=r.get("tpl"),d=n.IFRAME,f=r.get("iframe");return a.isEmptyObject(f)?a.isString(d)?a.isString(i)?(e=a.substitute(n.IFRAME,{id:i}),t=s(e),r.get("domain")||t.on("load",r._iframeLoadHandler,r),s("body").append(t),r.set("id",i),r.set("iframe",t),s("body").data("UPLOAD_TYPE",r),t):(o.log(u+"id\u5fc5\u987b\u5b58\u5728\u4e14\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b\uff01"),!1):(o.log(u+"iframe\u7684\u6a21\u677f\u4e0d\u5408\u6cd5\uff01"),!1):f},handleResult:function(e){var t=this;e=t._processResponse(e),t.fire(d.event.SUCCESS,{result:e}),t._remove()},_iframeLoadHandler:function(e){var t=this,r=e.target,a=d.event.ERROR;try{var i=r.contentDocument||window.frames[r.id].document;if(!i||!i.body)return t.fire(a,{msg:"\u670d\u52a1\u5668\u7aef\u8fd4\u56de\u6570\u636e\u6709\u95ee\u9898\uff01"}),!1;var s=i.body.innerHTML;if(s==n)return!1;t.handleResult(s)}catch(u){o.log(u)}},_createForm:function(){var e,t,r,i=this,n=i.get("id"),l=i.get("tpl"),d=l.FORM,f=i.get("data"),c=i.get("action"),p=i.get("fileInput");return a.isString(d)?a.isString(c)?(e=i.dataToHidden(f),e+=i.dataToHidden({type:"iframe"}),r=a.substitute(d,{action:c,target:n,hiddenInputs:e}),t=s(r).append(p),s("body").append(t),i.set("form",t),t):(o.log(u+"action\u53c2\u6570\u4e0d\u5408\u6cd5\uff01"),!1):(o.log(u+"form\u6a21\u677f\u4e0d\u5408\u6cd5\uff01"),!1)},_create:function(){var e=this,t=e._createIframe(),r=e._createForm();e.fire(d.event.CREATE,{iframe:t,form:r})},_remove:function(){var e=this,t=e.get("form");return t?(t.remove(),e.reset("form"),void e.fire(d.event.REMOVE,{form:t})):!1}},{ATTRS:{tpl:{value:d.tpl},id:{value:l+a.guid()},domain:{value:n},iframe:{value:{}},form:{value:n},fileInput:{value:n}}});return a.mix(f,{event:a.merge(r.event,{PROGRESS:"progress"})}),e=f}(),f=function(e){"use strict";function t(e,r){r=r||{};var i={};a.each(["ds","dsp","btn","hand"],function(e){e in r&&(i[e]=r[e])}),r.params=r.params||{},r.params.flashvars=a.merge(r.params.flashvars,i),t.superclass.constructor.call(this,e,r)}var r=l,a=v;return a.extend(t,r),r.augment(t,["setFileFilters","filter","setAllowMultipleFiles","multifile","browse","upload","uploadAll","cancel","getFile","removeFile","lock","unlock","setBtnMode","useHand","clear"]),t.version="1.0.1",r.Uploader=t,e=r.Uploader}(),c=function(e){"use strict";var t=S,r=g,a=f,i="",n="swf-uploader-wrapper-",s=v,u=r.extend({constructor:function(e,r){var a=this;r=s.merge({target:t(e)},r),u.superclass.constructor.call(a,r)},render:function(){var e,t=this,r=t.get("target"),a=t.get("multiple"),i=t.get("fileFilters");r.css("position","relative"),t.set("swfWrapper",t._createSwfWrapper()),t._setFlashSizeConfig(),e=t._initSwfUploader(),e.on("contentReady",function(){e.isContent||(e.isContent=!0,e.browse(a,i),t._bindBtnEvent(),e.on("fileSelect",t._changeHandler,t),t._setDisabled(t.get("disabled")),t.fire("render"))},t);var n=t.get("srcFileInput");return n&&n.length&&n.remove(),t},_createSwfWrapper:function(){var e=this,r=e.get("target"),a=e.get("tpl"),u=e.get("swfWrapperId")!=i&&e.get("swfWrapperId")||n+s.guid(),l=s.substitute(a,{id:u});return e.set("swfWrapperId",u),t(l).appendTo(r)},_initSwfUploader:function(){var e,t=this,r=t.get("flash"),i=t.get("swfWrapperId");s.mix(r,{id:"swfUploader"+s.guid()});try{e=new a(i,r),t.set("swfUploader",e)}catch(n){}return e},_bindBtnEvent:function(){var e=this,t=u.event,r=e.get("swfUploader");return r?(s.each(t,function(t){r.on(t,function(){e.fire(t)},e)}),e):!1},_setFlashSizeConfig:function(){var e=this,t=e.get("flash"),r=e.get("size");s.isEmptyObject(r)||s.mix(t.attrs,r),e.set("flash",t)},_changeHandler:function(e){var t=this;if(t.get("swfUploader").id==e.id){var r=e.fileList;t.fire("change",{files:r})}},_setDisabled:function(e){var t=this,r=t.get("swfUploader"),a=t.get("cls"),i=a.disabled,n=t.get("target"),u=t.get("swfWrapper");return r&&s.isBoolean(e)?(e?(n.addClass(i),u.css("top","-3000px")):(n.removeClass(i),u.css("top",0)),e):!1},show:function(){var e=this,t=e.get("target");t.show()},hide:function(){var e=this,t=e.get("target");t.hide()}},{ATTRS:{target:{value:i},swfWrapper:{value:i},swfWrapperId:{value:i},tpl:{value:"<div id='{id}' class='uploader-button-swf' style='position: absolute;top:0;left:0;z-index:2000;'></div>"},multiple:{value:!0,setter:function(e){var t=this,r=t.get("swfUploader");return r&&r.multifile(e),e}},fileFilters:{value:[],setter:function(e){var t=this,r=t.get("swfUploader");return s.isObject(e)&&(e=[e]),r&&s.isArray(e)&&s.later(function(){r.filter(e)},800),e}},disabled:{value:!1,setter:function(e){var t=this,r=t.get("swfUploader");return r&&t._setDisabled(e),e}},cls:{value:{disabled:"uploader-button-disabled"}},size:{value:{}},flash:{value:{src:"//g.alicdn.com/kg/uploader/3.0.5/plugins/ajbridge/uploader.swf",id:"swfUploader",params:{bgcolor:"#fff",wmode:"transparent"},attrs:{width:400,height:400},hand:!0,btn:!0}},swfUploader:{value:i},srcFileInput:{value:i}}});return e=u}(),p=function(e){"use strict";var t=S,r=g,i=m,l=R,f=v,p=a,h=d,_=n,E=s,b=u,y=c,F=o,x="[uploader]:",I="",T=t.all,C="text/uploader-files",A=r.extend({constructor:function(e,t){var r=this;A.superclass.constructor.call(r,t),r.set("target",e),r._init()},_init:function(){var e=this,t=e.get("target");if(!t.length)return p.log("\u76ee\u6807\u5143\u7d20\u4e0d\u5b58\u5728\uff01"),!1;var r=e.get("type"),a=e.getUploadType(r);return e._replaceBtn(),e._renderButton(),e._renderQueue(),e._renderUploaderCore(a),e},_replaceBtn:function(){var e=this,t=e.get("target");if(!t.length)return!1;var r=t[0].defaultValue||e.get("text"),a=f.substitute(e.get("btnTpl"),{text:r}),i=T(a).insertAfter(t);return!e.get("name")&&t.attr("name")&&e.set("name",t.attr("name")),e.set("_oldInput",t.clone()),e.set("fileInput",t),e.set("target",i),i},upload:function(e){if(!f.isNumber(e))return!1;var t,r=this,a=r.get("uploadType"),i=r.get("type"),n=r.get("queue"),s=n.get("files")[e];return f.isObject(s)?r.get("curUploadIndex")!=I?(alert("\u7b2c"+r.get("curUploadIndex")+"\u6587\u4ef6\u6b63\u5728\u4e0a\u4f20\uff0c\u8bf7\u4e0a\u4f20\u5b8c\u540e\u518d\u64cd\u4f5c\uff01"),!1):(t=s.input,"flash"==i&&(t=s.input.id),"ajax"==i&&(t=s.data),"error"===s.status?!1:r.get("isAllowUpload")?(r.set("curUploadIndex",e),r.fire(A.event.START,{index:e,file:s}),n.fileStatus(e,A.status.START),void a.upload(t)):!1):(p.log(x+"\u961f\u5217\u4e2d\u7d22\u5f15\u503c\u4e3a"+e+"\u7684\u6587\u4ef6"),!1)},cancel:function(e){var t=this,r=t.get("uploadType"),a=t.get("queue"),i=A.status,n=a.fileStatus(e);return f.isNumber(e)&&n!=i.SUCCESS?(r.stop(),a.fileStatus(e,i.CANCEL)):(r.stop(),t._continueUpload()),t},stop:function(){var e=this;return e.set("uploadFilesStatus",I),e.cancel(),e},uploadFiles:function(e){var t=this;return f.isString(e)||(e=A.status.WAITING),t.set("uploadFilesStatus",e),t._uploaderStatusFile(e),t},_uploaderStatusFile:function(e){var t=this,r=t.get("queue"),a=r.getIndexs(e);return a.length?(t.upload(a[0]),t):(t.set("uploadFilesStatus",I),t.fire(A.event.UPLOAD_FILES),!1)},isSupportAjax:function(){var e=!1;try{FormData&&(e=!0)}catch(t){e=!1}return e},isSupportFlash:function(){var e=l.fpv();return f.isArray(e)&&e.length>0},_renderUploaderCore:function(e){var t=this;if(!e)return!1;var r={action:t.get("action"),data:t.get("data"),dataType:"json"},a=t.get("button");t.get("type")==A.type.FLASH&&f.mix(r,{swfUploader:a.get("swfUploader")}),r.fileDataName=t.get("name"),r.CORS=t.get("CORS"),r.filter=t.get("filter");var i=new e(r),n=e.event;return i.on(n.SUCCESS,t._uploadCompleteHandler,t),i.on(n.ERROR,t._uploadCompleteHandler,t),n.PROGRESS&&i.on(n.PROGRESS,t._uploadProgressHandler,t),i.on(n.STOP,t._uploadStopHanlder,t),t.set("uploadType",i),i},getUploadType:function(e){var t,r=this,a=A.type;return e==a.AUTO&&(e=[a.AJAX,a.IFRAME]),f.isArray(e)&&e.length>0?f.each(e,function(e){return t=r._getType(e),t?!1:void 0}):t=r._getType(e),t},_getType:function(e){var t,r=this,a=A.type,i=r.isSupportAjax(),n=r.isSupportFlash();switch(e){case a.IFRAME:t=h;break;case a.AJAX:t=i&&_||!1;break;case a.FLASH:t=n&&E||!1;break;default:return p.log(x+"type\u53c2\u6570\u4e0d\u5408\u6cd5"),!1}return t&&p.log(x+"\u4f7f\u7528"+e+"\u4e0a\u4f20\u65b9\u5f0f"),r.set("type",e),t},_renderButton:function(){var e,t,r=this,a=r.get("type"),i=r.get("target"),n=r.get("multiple"),s=r.get("disabled"),u=r.get("name"),o={name:u,multiple:n,disabled:s,srcFileInput:r.get("fileInput")};return a==A.type.FLASH?(t=y,f.mix(o,{size:r.get("swfSize")})):t=b,e=new t(i,o),e.on("change",r._select,r),e.render(),r.set("button",e),a==A.type.IFRAME&&l.ie<10&&r.set("multiple",!1),e},_renderQueue:function(){var e=this,t=new F;return t.set("uploader",e),t.on("add",function(t){e.fire(A.event.ADD,t)}),t.on("remove",function(t){e.fire(A.event.REMOVE,t)}),e.set("queue",t),t},_select:function(e){var t=this,r=t.get("queue"),a=t.get("curUploadIndex"),i=e.files;return f.each(i,function(t){t.size||(t.size=0),t.name||(t.name=t.fileName||I),t.input=e.input||t}),i=t._processExceedMultiple(i),t.fire(A.event.SELECT,{files:i}),t.get("isAllowUpload")?void r.add(i,function(){a==I&&t.get("autoUpload")&&t.uploadFiles()}):!1},_processExceedMultiple:function(e){var t=this,r=t.get("multipleLen");return 0>r||!f.isArray(e)||!e.length?e:f.filter(e,function(e,t){return r>t})},_uploadCompleteHandler:function(e){var t,r=this,a=e.result,i=A.event,n=r.get("queue"),s=r.get("curUploadIndex");if(!f.isObject(a))return!1;if(n.updateFile(s,{result:a}),t=Number(a.status),1===t)n.fileStatus(s,A.status.SUCCESS),r._success(a.data),r.fire(i.SUCCESS,{index:s,file:n.getFile(s),result:a});else{var u=a.msg||a.message||I;a.msg=u,n.fileStatus(s,A.status.ERROR,{msg:u,result:a}),r.fire(i.ERROR,{msg:u,status:t,result:a,index:s,file:n.getFile(s)})}r.set("curUploadIndex",I),r.fire(i.COMPLETE,{index:s,file:n.getFile(s),result:a}),r._continueUpload()},_uploadStopHanlder:function(){var e=this,t=e.get("queue"),r=e.get("curUploadIndex");t.fileStatus(r,A.status.CANCEL),e.set("curUploadIndex",I),e.fire(A.event.CANCEL,{index:r})},_continueUpload:function(){var e=this,t=e.get("uploadFilesStatus");t!=I&&e._uploaderStatusFile(t)},_uploadProgressHandler:function(e){var t=this,r=t.get("queue"),a=t.get("curUploadIndex"),i=r.getFile(a);f.mix(e,{file:i}),r.fileStatus(a,A.status.PROGRESS,e),t.fire(A.event.PROGRESS,e)},_success:function(e){if(!f.isObject(e))return!1;var t=this,r=e.url,a=t.get("curUploadIndex"),i=t.get("queue");return f.isString(r)?void i.updateFile(a,{sUrl:r}):!1},theme:function U(e){var t=this,U=t.get("theme");return e?U?(p.log("\u4e0d\u652f\u6301\u91cd\u65b0\u6e32\u67d3\u4e3b\u9898\uff01"),t):(e.set("uploader",t),e.set("queue",t.get("queue")),e.render&&e.render(),t.fire("themeRender",{theme:U,uploader:t}),t.set("theme",e),t):!1},restore:function(e){var t,r=this;if(r.set("hasRestore",!0),e){var a=T(e);if(!a.length)return p.log("restore()\uff1a\u4e0d\u5b58\u5728target\uff01"),!1;t=a.text()}else{var n=r.get("theme");if(!n)return!1;var s=n.get("queueTarget");if(!s||!s.length)return!1;var u=s.all("script");u.each(function(e){T(e).attr("type")==C&&(t=T(e).html())})}if(t=i.parse(t),!t.length)return!1;var l,o=r.get("queue");f.each(t,function(e){e.status=1,l={type:"restore",name:e.name||"",url:e.url||"",result:e};var t=o.add(l),a=t.id,i=o.getFileIndex(a);o.fileStatus(i,"success",{index:i,id:a,file:t}),r.fire("success",{file:t,result:t.result})})}},{ATTRS:{target:{value:I,getter:function(e){return T(e)}},text:{value:"\u4e0a\u4f20\u6587\u4ef6"},fileInput:{value:I},theme:{value:I},btnTpl:{value:"<a href='javascript:void(0)' class='g-u ks-uploader-button'><span class='btn-text'>{text}</span></a>"},button:{value:{}},queue:{value:{}},type:{value:"auto"},multiple:{value:!1,setter:function(e){var t=this,r=t.get("button");return!f.isEmptyObject(r)&&f.isBoolean(e)&&r.set("multiple",e),e}},multipleLen:{value:-1},disabled:{value:!1,setter:function(e){var t=this,r=t.get("button");return!f.isEmptyObject(r)&&f.isBoolean(e)&&r.set("disabled",e),e}},action:{value:I,setter:function(e){var t=this,r=t.get("uploadType");return r&&!f.isEmptyObject(r)&&r.set("action",e),e}},data:{value:{},setter:function(e){if(f.isObject(e)){var t=this,r=t.get("uploadType");r&&!f.isEmptyObject(r)&&r.set("data",e)}return e}},isAllowUpload:{value:!0},autoUpload:{value:!0},filter:{value:I,setter:function(e){var t=this,r=t.get("uploadType");return r&&!f.isEmptyObject(r)&&r.set("filter",e),e}},hasRestore:{value:!1},curUploadIndex:{value:I},curFile:{value:I,getter:function(){var e=this,t=I,r=e.get("curUploadIndex");if(f.isNumber(r)){var a=e.get("queue");t=a.getFile(r)}return t}},uploadType:{value:{}},uploadFilesStatus:{value:I},swfSize:{value:{}},CORS:{value:!1},timeout:{value:600,setter:function(e){var t=this,r=t.get("uploadType");return r&&!f.isEmptyObject(r)&&r.set("timeout",e),e}}}},"Uploader");return f.mix(A,{type:{AUTO:"auto",IFRAME:"iframe",AJAX:"ajax",FLASH:"flash"},event:{SELECT:"select",ADD:"add",START:"start",PROGRESS:"progress",COMPLETE:"complete",SUCCESS:"success",UPLOAD_FILES:"uploadFiles",CANCEL:"cancel",ERROR:"error",REMOVE:"remove",RESTORE:"restore"},status:{WAITING:"waiting",START:"start",PROGRESS:"progress",SUCCESS:"success",CANCEL:"cancel",ERROR:"error"}}),e=A}(),r.exports=p});define("kg/uploader/6.2.6/plugins/auth/auth",["node","base","util"],function(e,t,r){"use strict";function i(e){var t=-1;do e/=1024,t++;while(e>99);return Math.max(e,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][t]}var a=e("node"),s=e("base"),l=e("util"),u="",n=a.all,o="error",g=s.extend({pluginInitializer:function(e){if(!e)return!1;var t=this;t.set("uploader",e),t._useThemeConfig();var r=e.get("queue");t._setSwfButtonExt(),r.on("add",function(e){var r=e.file;if("restore"===r.type)return!0;var i=t.testAllowExt(r);i&&(i=t.testMaxSize(r)),i&&t.testRepeat(r),i&&t.testWidthHeight(r)}),r.on("remove",function(e){var r=e.file,i=r.status;"success"===i&&t.testMax()&&t.testRequired()}),e.on("success",function(){t.testMax()}),e.on("error",function(r){-1===r.status&&"max"===r.rule&&t._maxStopUpload(),e.set("isAllowUpload",!0)})},_useThemeConfig:function(){var e=this,t=e.get("msg");if(!l.isEmptyObject(t))return!1;var r=e.get("uploader"),i=r.get("theme");if(!i)return!1;var t=i.get("authMsg");t&&e.set("msg",t);var a=e.get("allowExts");return a||e.set("allowExts",i.get("allowExts")),e},setAllowExts:function(e){if(!l.isString(e))return!1;var t=[],r=[];return e=e.split(","),l.each(e,function(e){t.push("*."+e),r.push(e.toUpperCase())}),t=t.join(";"),r=r.join(","),{desc:r,ext:t}},testAll:function(){var e=this;return e.testRequire()&&e.testMax()},isUploaderType:function(e){var t=this,r=t.get("uploader"),i=r.get("type");return e===i},testRequired:function(){var e=this,t=e.get("uploader"),r=t.get("queue"),i=r.getFiles("success");return i.length>0},testAllowExt:function(e){function t(e,t){var r,i=!1,a=t.toLowerCase();return l.each(e,function(e){return r=new RegExp("^.+."+e+"$"),r.test(a)?i=!0:void 0}),i}function r(e){var t=e.split(".");return t[t.length-1]}if(!l.isObject(e))return!1;var i=this,a=e.name,s=i.get("allowExts");if(!s)return!0;var u=s.split(","),n=t(u,a);if(!n){var o=r(a),g=i.msg("allowExts");g=l.substitute(g,{ext:o}),i._fireUploaderError("allowExts",[s,g],e)}return n},testMax:function(){var e=this,t=e.get("max");if(t===u)return!0;var r=e.get("uploader"),i=r.get("queue"),a=i.getFiles("success"),s=a.length,n=t>s;if(n)r.set("disabled",!1),r.set("isAllowUpload",!0);else{r.set("disabled",!0),r.set("isAllowUpload",!1);var o=e.msg("max");o=l.substitute(o,{max:t}),e._fireUploaderError("max",[t,o])}return n},testMaxSize:function(e){var t=this,r=e.size,a=t.get("maxSize");if(a===u||!r)return!0;a=1024*a;var s=a>=r;if(!s){var n=t.msg("maxSize");n=l.substitute(n,{maxSize:i(a),size:e.textSize}),t._fireUploaderError("maxSize",[a,n],e)}return s},testRepeat:function(e){if(!l.isObject(e))return!1;var t=this,r=e.name,i=t.get("allowRepeat");if(i===u)return!1;var a=t.get("uploader"),s=a.get("queue"),n=s.getFiles("success"),o=!1;return l.each(n,function(a){return a.name===r?(a.size?a.size===e.size&&t._fireUploaderError("allowRepeat",[i,t.msg("allowRepeat")],e):t._fireUploaderError("allowRepeat",[i,t.msg("allowRepeat")],e),o=!0):void 0}),o},testWidthHeight:function(e){function t(t,s){var l=i.call(r,t,s);if(l){a.set("isAllowUpload",!0);var u=a.get("queue").getFileIndex(e.id);a.upload(u)}else{var n=r.msg("widthHeight");r._fireUploaderError("widthHeight",[i,n],e)}}var r=this,i=r.get("widthHeight");if(i===u)return!0;var a=r.get("uploader");a.set("isAllowUpload",!1);var s=e.data;if(l.isEmptyObject(s)){var o=a.get("target").all("input").getDOMNode();o.select(),o.blur();var g=document.selection.createRange().text,f=n('<img style="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image);width:300px;visibility:hidden;"  />').appendTo("body").getDOMNode();f.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=g;var d=f.offsetWidth,p=f.offsetHeight;t(d,p),n(f).remove()}else{var c=new FileReader;c.onload=function(e){var r=e.target.result,i=new Image;i.onload=function(){var e=i.width,r=i.height;t(e,r)},i.src=r},c.readAsDataURL(s)}},_setSwfButtonExt:function(){var e=this,t=e.get("uploader"),r=e.get("allowExts"),i=t.get("button"),a=e.isUploaderType("flash");return a&&r!==u?(r=e.setAllowExts(r),i&&i.set("fileFilters",r[0]),e):!1},_getExts:function(e){if(!l.isString(e))return!1;var t=e.split(";"),r=[],i=/^\*\./;return l.each(t,function(e){e=e.replace(i,""),r.push(e.toUpperCase())}),l.each(r,function(e){t.push(e)}),t},_fireUploaderError:function(e,t,r){var i=this,a=i.get("uploader"),s=a.get("queue"),u={status:-1,rule:e},n=-1;r&&(n=s.getFileIndex(r.id),l.mix(u,{file:r,index:n})),t&&l.mix(u,{msg:t[1],value:t[0],result:{}}),s.fileStatus(n,"error",u),i.fire(o,u),a.fire("error",u)},_maxStopUpload:function(){var e=this,t=e.get("uploader"),r=t.get("queue"),i=e.get("max"),a=t.get("curUploadIndex");if(a===u||i>a)return!1;var s=r.get("files"),n=r.getFiles("success");n.length>i&&t.stop(),l.each(s,function(e,t){t>a&&r.remove(e.id)}),t.set("curUploadIndex",u)},msg:function(e,t){var r=this;if(!l.isString(e))return r;var i=r.get("msg");return l.isString(t)?(i[e]=t,t):i[e]},_processRuleConfig:function(e,t){var r=this;return l.isString(e)?(l.isArray(t)&&r.msg(e,t[1]),r):r}},{ATTRS:{pluginId:{value:"auth"},uploader:{value:u},required:{value:u},max:{value:u},allowExts:{value:u},maxSize:{value:u},allowRepeat:{value:u},widthHeight:{value:u},msg:{value:{}}}});r.exports=g});define("kg/uploader/6.2.6/plugins/filedrop/filedrop",["node","base","kg/uploader/6.2.6/logger.js","util","ua"],function(e,t,r){"use strict";var o=e("node"),i=e("base"),a=e("kg/uploader/6.2.6/logger.js"),n=e("util"),p=e("ua"),s="",l=function(){return p.webkit>=7||p.firefox>=3.6?"supportDrop":p.ie?"notSupportDropIe":p.webkit<7||p.firefox<3.6?"notSupportDrop":void 0},u=i.extend({pluginInitializer:function(e){var t=this;t.set("mode",l());var r,o=t.get("mode");if(!e)return!1;if(t.set("uploader",e),"flash"===e.get("type"))return a.log("flash\u4e0a\u4f20\u65b9\u5f0f\u4e0d\u652f\u6301\u62d6\u62fd\uff01"),t.set("isSupport",!1),!1;if("supportDrop"!==o)return a.log("\u8be5\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u62d6\u62fd\u4e0a\u4f20\uff01"),t.set("isSupport",!1),!1;var i=e.get("target");t.set("target",i),r=t._createDropArea(),r.on("click",t._clickHandler,t),e.on("afterDisabledChange",function(e){t[e.newVal&&"hide"||"show"]()}),t.fire("render",{buttonTarget:t.get("buttonWrap")})},show:function(){var e=this,t=e.get("dropContainer");t.show()},hide:function(){var e=this,t=e.get("dropContainer");t.hide()},_createDropArea:function(){var e=this,t=o(e.get("target")),r=e.get("mode"),i=n.substitute(e.get("tpl")[r],{name:e.get("name")}),a=o(i),p=a.all(".J_ButtonWrap");return a.appendTo(t),a.on("dragover",function(e){e.stopPropagation(),e.preventDefault()}),a.on("drop",function(t){t.stopPropagation(),t.preventDefault(),e._dropHandler(t)}),e.set("dropContainer",a),e.set("buttonWrap",p),e._setStyle(),a},_setStyle:function(){var e=this,t=e.get("dropContainer");return t.length?(t.parent().css("position","relative"),void t.css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"1000"})):!1},_clickHandler:function(){var e=this,t=e.get("uploader"),r=t.get("button"),o=r.get("fileInput");o.fire("click")},_dropHandler:function(e){var t=this,r=e.originalEvent.dataTransfer.files,o=[],i=t.get("uploader");return r.length&&i!==s?(n.each(r,function(e){n.isObject(e)&&o.push({name:e.name,type:e.type,size:e.size,data:e})}),t.fire("afterdrop",{files:o}),void i._select({files:o})):!1}},{ATTRS:{pluginId:{value:"filedrop"},target:{value:s,getter:function(e){return o(e)}},uploader:{value:s},dropContainer:{value:s},isSupport:{value:!0},tpl:{value:{supportDrop:'<div class="drop-wrapper"></div>',notSupportDropIe:'<div class="drop-wrapper"><p>\u60a8\u7684\u6d4f\u89c8\u5668\u53ea\u652f\u6301\u4f20\u7edf\u7684\u56fe\u7247\u4e0a\u4f20\uff0c</p><p class="suggest J_ButtonWrap">\u63a8\u8350\u4f7f\u7528chrome\u6d4f\u89c8\u5668\u6216firefox\u6d4f\u89c8\u5668</p></div>',notSupportDrop:'<div class="drop-wrapper"><p>\u60a8\u7684\u6d4f\u89c8\u5668\u53ea\u652f\u6301\u4f20\u7edf\u7684\u56fe\u7247\u4e0a\u4f20\uff0c</p><p class="suggest J_ButtonWrap">\u63a8\u8350\u5347\u7ea7\u60a8\u7684\u6d4f\u89c8\u5668</p></div>'}},name:{value:""}}});r.exports=u});define("kg/search-suggest/6.2.3/mods/stat",["cookie","base","util","event","kg/search-suggest/6.2.3/mods/local-query"],function(e,t,s){function i(e){i.superclass.constructor.call(this,e||{})}e("cookie");var a=e("base"),n=e("util"),l=e("event"),r=e("kg/search-suggest/6.2.3/mods/local-query");n.extend(i,a,{pluginInitializer:function(e){var t=this,s=t.get("stat");t.set("caller",e),e.on("beforeSubmit",function(e){var s=e.isInitSearch;t.setStat(s)}),s&&(t.sendTongji(),t.bindSearchTrace())},bindSearchTrace:function(){var e=this;l.delegate("body","click","a",e.initSearchTrace,e)},initSearchTrace:function(e){var t=this,s=e.currentTarget,i=s.getAttribute("trace"),a=s.getAttribute("href");if(i)switch(i){case"relatedSearch":t.saveQuery();break;case"auction":var n=t.stat;n&&-1===a.indexOf("initiative_new")&&s.setAttribute("href",a+"&initiative_new=1")}},sendTongji:function(){var e,t=this,s=t.getStatInst();s.checkFlash({onSuccess:function(){e=s.query("stat")[0],e&&e.value&&(t.stat=e.value,t.send("f_stats_show="+e.value,!0))}})},setStat:function(e,t){var s=this,i=s.get("caller"),a=i.query,n=s.saveQuery(a,e);n&&s.send("lf_aclog=null-null-null-null-0&stats_click="+n,t)},getStatInst:function(){var e=this,t=e.get("caller"),s=t.get("sugConfig"),i=s.tab||"",a=new r({name:"stat",tab:i});return a},saveQuery:function(e,t){var s,i,a=this.getStatInst();return t&&e?(s=encodeURIComponent(e),i="initiative_new:1;q:"+s,a.save("stat",i)):a.deleteItem("stat"),i},send:function(e,t){var s,i,a=this.get("logTypes");t?(a=this.get("tongjiKey"),s=a.logkey,i=a.chksum):(a=this.get("pvKey"),s=a.logkey,i=a.chksum),window.goldlog?goldlog.record(s,"",e,i):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[s,"",e,i]})},renderPlugin:function(){}},{ATTRS:{pluginId:{value:"stat"},tongjiKey:{value:{logkey:"/tongji",chksum:"H51884970"}},pvKey:{value:{logkey:"/search",chksum:"H51884969"}}}}),s.exports=i});define("kg/uploader/6.2.6/theme",["node","base","util"],function(e,t,r){var n,a,i=e("node"),u=e("base"),s=e("util");n=function(e){"use strict";return e=KISSY||{log:function(){},error:function(){}}}(),a=function(e){"use strict";var t=i,r=u,a="",l=t.all,o={BUTTON:"-button",QUEUE:"-queue"},d="text/uploader-theme",c=s,f=n,g=r.extend({render:function(){var e=this,t=e.get("uploader");t.set("theme",e),e._addThemeCssName(),e._tplFormHtml(),e._bind()},_selectHandler:function(){},_addHandler:function(){},_removeHandler:function(){},_waitingHandler:function(){},_startHandler:function(){},_progressHandler:function(){},_successHandler:function(){},_errorHandler:function(){},_restore:function(){var e=this,t=e.get("uploader"),r=t.getPlugin("urlsInput");if(!r)return!1;var n=r.get("autoRestore");if(!n)return!1;var a=t.get("queue"),i=a.get("files");return i.length?(c.each(i,function(r,n){r.status="success",t.fire("add",{file:r,index:n}),e._renderHandler("_successHandler",{file:r,result:r.result}),e._hideStatusDiv(r)}),e):!1},_addThemeCssName:function(){var e=this,t=e.get("name"),r=e.get("queueTarget"),n=e.get("uploader"),i=n.get("target");return r.length?t==a?!1:(r.length&&r.addClass("ks-uploader-queue "+t+o.QUEUE),i.addClass(t+o.BUTTON),e):(f.log("\u4e0d\u5b58\u5728\u5bb9\u5668\u76ee\u6807\uff01"),!1)},_bind:function(){var e=this,t=e.get("uploader"),r=["add","remove","select","start","progress","success","error","complete"];t.on(r[0],function(r){var n=e._appendFileDom(r.file),a=t.get("queue");a.updateFile(r.index,{target:n})}),t.on(r[1],function(t){e._removeFileDom(t.file)}),c.each(r,function(r){t.on(r,function(t){var r="_"+t.type+"Handler";e._renderHandler(r,t)})})},_renderHandler:function(e,t){var r=this,n=r[e];r._setStatusVisibility(t.file),n&&n.call(r,t)},_setStatusVisibility:function(e){var t=this;if(!c.isObject(e)||c.isEmptyObject(e))return t;t._hideStatusDiv(e);var r=e.status,n=e.target;if(!n.length)return!1;var a=n.all("."+r+"-status");a.length&&a.show();var i=["waiting","start","uploading","progress","error","success"];return c.each(i,function(e){n.removeClass(e)}),n.addClass(r),t},_hideStatusDiv:function(e){if(!c.isObject(e))return!1;var t=e.target;t&&t.length&&t.all(".status").hide()},_appendFileDom:function(e){var t,r=this,n=r.get("fileTpl"),a=l(r.get("queueTarget"));return a.length?(t=c.substitute(n,e),l(t).hide().appendTo(a).fadeIn(.4).data("data-file",e)):!1},_removeFileDom:function(e){if(!c.isObject(e))return!1;var t=e.target;return t&&t.length?void t.fadeOut(.4,function(){t.remove()}):!1},_tplFormHtml:function(){var e=this,t=e.get("fileTpl"),r=l(e.get("queueTarget"));if(!r.length)return!1;var n=r.all("script");return n.each(function(r){l(r).attr("type")==d&&(t=l(r).html(),e.set("fileTpl",t))}),t}},{ATTRS:{name:{value:a},use:{value:a},fileTpl:{value:a},authMsg:{value:{}},queueTarget:{value:a,getter:function(e){return l(e)}},queue:{value:a},uploader:{value:a}}});return e=g}(),r.exports=a});