(function(a){a([],function(c){function d(p){if(!Cookies){throw new Error("Could not load the required cookie library.")}Cookies.json=true;this._key=p;this.update=function(q){Cookies.set(this._key,q)};this.clear=function(){Cookies.remove(this._key)};this.get=function(){return Cookies.get(this._key)}}function h(p){this._key=p;this.update=function(q){sessionStorage.setItem(this._key,JSON.stringify(q))};this.clear=function(){sessionStorage.removeItem(this._key)};this.get=function(){var q={};try{q=JSON.parse(sessionStorage.getItem(this._key))}catch(r){this.clear()}return q}}Function.prototype.bind=Function.prototype.bind||function(p){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var q=Array.prototype.slice,r=q.call(arguments,1),s=this,u=function(){},t=function(){return s.apply(this instanceof u?this:p||window,r.concat(q.call(arguments)))};u.prototype=this.prototype;t.prototype=new u();return t};Array.prototype.indexOf=function(q){var p=this.length>>>0;var r=Number(arguments[1])||0;r=(r<0)?Math.ceil(r):Math.floor(r);if(r<0){r+=p}for(;r<p;r++){if(r in this&&this[r]===q){return r}}return -1};function l(p){var q=typeof(p);var s="";var r=false;switch(q){case"string":s="s";break;case"number":s="n";break;case"boolean":s="b";break;default:r=true;break}return{prefix:s,err:r}}function b(s,v,u){var t=v.split("."),r=s,q,p;q=t.length;for(p=0;p<q;p++){if(typeof r[t[p]]=="undefined"){if(p==(q-1)){if(u){r[t[p]]=u}else{r[t[p]]={}}}else{r[t[p]]={}}}r=r[t[p]]}return r}var o={rbracket:/\[\]$/,r20:/%20/g,class2type:{},hasOwn:Object.prototype.hasOwnProperty,noop:function(){},type:function(r){if(r==null){return r+""}var q=({}).toString;var p=typeof r==="object"||typeof r==="function"?o.class2type[q.call(r)]||"object":typeof r;return p},isFunction:function(p){return o.type(p)==="function"},isPlainObject:function(p){if(o.type(p)!=="object"||p.nodeType||o.isWindow(p)){return false}if(p.constructor&&!o.hasOwn.call(p.constructor.prototype,"isPrototypeOf")){return false}return true},isWindow:function(p){return p!=null&&p===p.window},isArray:Array.isArray||function(p){return o.type(p)==="array"},forEach:function(r,q,p){return m(r,function(u,s,t){q(s,u,t)},p)}.bind(o),buildParams:function(r,t,q,s){var p;q=false;if(o.isArray(t)){o.forEach(t,function(w,u){if(q||o.rbracket.test(r)){s(r,u)}else{o.buildParams(r+"["+(typeof u==="object"?w:"")+"]",u,q,s)}})}else{if(!q&&o.type(t)==="object"){for(p in t){o.buildParams(r+"["+p+"]",t[p],q,s)}}else{s(r,t)}}},extend:function(){var y,r,p,q,v,w,u=arguments[0]||{},t=1,s=arguments.length,x=false;if(typeof u==="boolean"){x=u;u=arguments[t]||{};t++}if(typeof u!=="object"&&!o.isFunction(u)){u={}}if(t===s){u=this;t--}for(;t<s;t++){if((y=arguments[t])!=null){for(r in y){p=u[r];q=y[r];if(u===q){continue}if(x&&q&&(o.isPlainObject(q)||(v=o.isArray(q)))){if(v){v=false;w=p&&o.isArray(p)?p:[]}else{w=p&&o.isPlainObject(p)?p:{}}u[r]=o.extend(x,w,q)}else{if(q!==c){u[r]=q}}}}}return u}.bind(o),param:function(p){var t,r=false,q=[],u=function(s,v){v=o.isFunction(v)?v():(v==null?"":v);q[q.length]=encodeURIComponent(s)+"="+encodeURIComponent(v)};if(o.isArray(p)||(p.jFn&&!o.isPlainObject(p))){o.forEach(p,function(){u(this.name,this.value)})}else{for(t in p){o.buildParams(t,p[t],r,u)}}return q.join("&").replace(o.r20,"+")}.bind(o),exportPublic:function(){var q={};var p=this;o.forEach(["param","noop","extend"],function(s,r){q[r]=p[r]});return q},init:function(){var r="Boolean Number String Function Array Date RegExp Object Error".split(" "),q=r.length;while(q--){var p=r[q];o.class2type["[object "+p+"]"]=p.toLowerCase()}return this}};o.init();var i=Array.prototype;var e={nativeKeys:Object.keys,nativeMap:i.map,nativeReduce:i.reduce,has:function(q,p){return q!=null&&Object.prototype.hasOwnProperty.call(q,p)},isObject:function(q){var p=typeof q;return p==="function"||p==="object"&&!!q},keys:function(r){if(!e.isObject(r)){return[]}if(this.nativeKeys){return this.nativeKeys(r)}var q=[];for(var p in r){if(e.has(r,p)){q.push(p)}}return q}.bind(e),foldl:function(t,s,p,r){var q=arguments.length>2;if(t===null){t=[]}if(this.nativeReduce&&t.reduce===this.nativeReduce){if(r){s=_.bind(s,r)}return q?t.reduce(s,p):t.reduce(s)}m(t,function(w,u,v){if(!q){p=w;q=true}else{p=s.call(r,p,w,u,v)}});if(!q){throw new TypeError(reduceError)}return p},map:function(s,r,q){var p=[];if(s===null){return p}if(this.nativeMap&&s.map===this.nativeMap){return s.map(r,q)}m(s,function(v,t,u){p.push(r.call(q,v,t,u))});return p}};function m(u,r,q){if(u==null){return u}if(i.forEach&&u.forEach===i.forEach){u.forEach(r,q)}else{if(u.length===+u.length){for(var p=0,t=u.length;p<t;p++){if(r.call(q,u[p],p,u)==={}){return}}}else{var s=e.keys(u);for(var p=0,t=s.length;p<t;p++){if(r.call(q,u[s[p]],s[p],u)==={}){return}}}}return u}e.each=e.forEach=m;var j={format:function(){var q=arguments[0],p=arguments.length;while(p-->0){q=q.replace(new RegExp("\\{"+(p-1)+"\\}","gm"),arguments[p])}return q}};function g(r,p,q){return function(){var s=arguments;function t(w,v){setTimeout(function(){var x=r.apply(p,s);if(x){x.then(w)["catch"](v)}},10)}var u=q?new q.Promise(t):(t(e.noop,e.noop)|null);return u}}function f(p){var q=p;if(!(/^(http:\/\/|https:\/\/)/.test(q))){q=k()+q}else{q=q.replace(/^(http:\/\/|https:\/\/)/,k())}return q}function k(){return("https:"==document.location.protocol?"https://":"http://")}var n={extendNamespace:b,str:j,keys:e.keys,foldl:e.foldl,each:e.each,map:e.map,getDeferredFunc:g,determineTypePrefix:l,httpScheme:k,ensureProperUrlScheme:f,sessionStorageClass:h,cookieStorageClass:d};o.extend(n,o.exportPublic());return n})}(typeof define==="function"&&define.amd?define:function(d,b){var c="BES.ProTrack.Vortex.Modules.Utils";var a=b();a.extendNamespace(window,c,a)}));(function(a){a(["./utils"],function(f,h){var e={},c=f;function d(i){if(c.keys(e).indexOf(i)==-1){e[i]=[]}var j=e[i];return{writeLine:function(k){j.push(k)},getLines:function(){return[].concat(j)}}}function b(){return c.keys(e)}function g(i){var j=e[i];return j?[].concat(j):[]}return{getLog:d,getExistingLogs:b,getLogLines:g}})}(typeof define==="function"&&define.amd?define:function(e,b){var a=BES.ProTrack.Vortex.Modules.Utils;var d=b(a);var c="BES.ProTrack.Vortex.Modules.Log";a.extendNamespace(window,c,d)}));(function(a){a(["./utils","./log.js"],function(d,v,m){var b="AgentInfo",r=d,o=v?v.getLog("pl_agentinfo.js"):{writeLine:r.noop};var w="",D,j,g,p,f,s,G;try{var E="-";if(screen.width){width=(screen.width)?screen.width:"";height=(screen.height)?screen.height:"";w+=""+width+" x "+height}var B=navigator.appVersion;var C=navigator.userAgent;D=navigator.appName;j=""+parseFloat(navigator.appVersion);var q=parseInt(navigator.appVersion,10);var y,c,h;if((c=C.indexOf("Opera"))!=-1){D="Opera";j=C.substring(c+6);if((c=C.indexOf("Version"))!=-1){j=C.substring(c+8)}}else{if((c=C.indexOf("OPR"))!=-1){D="Opera";j=C.substring(c+4);if((c=C.indexOf("Version"))!=-1){j=C.substring(c+8)}}else{if((c=C.indexOf("MSIE"))!=-1){D="Microsoft Internet Explorer";j=C.substring(c+5)}else{if((c=C.indexOf("Chrome"))!=-1){D="Chrome";j=C.substring(c+7)}else{if((c=C.indexOf("Safari"))!=-1){D="Safari";j=C.substring(c+7);if((c=C.indexOf("Version"))!=-1){j=C.substring(c+8)}}else{if((c=C.indexOf("Firefox"))!=-1){D="Firefox";j=C.substring(c+8)}else{if(C.indexOf("Trident/")!=-1){D="Microsoft Internet Explorer";j=C.substring(C.indexOf("rv:")+3)}else{if((y=C.lastIndexOf(" ")+1)<(c=C.lastIndexOf("/"))){D=C.substring(y,c);j=C.substring(c+1);if(D.toLowerCase()==D.toUpperCase()){D=navigator.appName}}}}}}}}}if((h=j.indexOf(";"))!=-1){j=j.substring(0,h)}if((h=j.indexOf(" "))!=-1){j=j.substring(0,h)}if((h=j.indexOf(")"))!=-1){j=j.substring(0,h)}q=parseInt(""+j,10);if(isNaN(q)){j=""+parseFloat(navigator.appVersion);q=parseInt(navigator.appVersion,10)}g=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(B);s=(navigator.cookieEnabled)?true:false;if(typeof navigator.cookieEnabled=="undefined"&&!s){document.cookie="testcookie";s=(document.cookie.indexOf("testcookie")!=-1)?true:false}p=E;var x=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows Phone",r:/(Windows Phone)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var t in x){var l=x[t];if(l.r.test(C)){p=l.s;break}}f=E;if(/Windows Phone/.test(p)){f=/Windows Phone (.*?);/.exec(C)[1]}else{if(/Windows/.test(p)){f=/Windows (.*)/.exec(p)[1]}}switch(p){case"Mac OS X":f=/Mac OS X (10[\.\_\d]+)/.exec(C)[1];break;case"Android":var k=/Android ([\.\_\d]+)/.exec(C);if(k){f=k[1]}else{var n=/Firefox\//.exec(C);if(n){f=E+"(Firefox does not report)"}}break;case"iOS":f=/OS (\d+)_(\d+)_?(\d+)?/.exec(B);f=f[1]+"."+f[2]+"."+(f[3]|0);break}G="no check";if(typeof swfobject!="undefined"){var i=swfobject.getFlashPlayerVersion();if(i.major>0){G=i.major+"."+i.minor+" r"+i.release}else{G=E}}}catch(A){o.writeLine("Error running agent detection: "+A.toString())}var F={screen:w,browser:D,browserVersion:j,mobile:g,os:p,osVersion:f,cookies:s,flashVersion:G,languages:navigator.languages?navigator.languages.join(","):(navigator.language||navigator.userLanguage),plugins:r.map(navigator.plugins,function(e){return e.name}).join(",")};function z(e){return{process:function(H,u){r.each(F,function(K,J){var I=r.determineTypePrefix(K);if(!I.err){u["_"+I.prefix+J]=K}else{errs[100]=true}});return u}}}z.getName=function(){return b};return z})}(typeof define==="function"&&define.amd?define:function(f,b){var a=BES.ProTrack.Vortex.Modules.Utils;var e=BES.ProTrack.Vortex.Modules.Log;var c=b(a,e);var d="BES.ProTrack.Vortex.Plugins."+c.getName();a.extendNamespace(window,d,c)}));(function(a){a(["./utils"],function(f){if(!JSON){throw new Error("BES.ProTrack.Vortex.Modules.Ajax depends on JSON support.")}if(!f){throw new Error("BES.ProTrack.Vortex.Modules.Ajax depends on Utils module.")}var c=f,e={0:200,1223:204};c.extendNamespace(window,"BES.ProTrack.Vortex.Modules");function d(g){try{var i=new XMLHttpRequest();if(!("withCredentials" in i)){i=new XDomainRequest()}return i}catch(h){}return null}function b(h,m,o,w,j,k){var n,r,q={app_id:m.app_id,eventName:m.eventName},s,v,u,p,g;delete m.app_id;delete m.eventName;s=c.param(q);v=c.param(m);u=s.length+v.length;g=(u<1250)?"GET":"POST";if((Object.prototype.toString.call(window.operamini)==="[object OperaMini]")||(r=d(window))==null){(function(){var i=document.createElement("script");i.type="text/javascript";i.src=h+"?"+s+"&"+v+"&"+Math.ceil(((new Date()).getTime()/1000));document.body.appendChild(i)})();return}if(k){var l=new Image();l.src=h+"?"+s+"&"+v+"&"+Math.ceil(((new Date()).getTime()/1000));l.style.height="1px";l.style.width="1px";document.body.appendChild(l);return}r=d(window);if(typeof g!=="string"&&(g!=="POST"||g!=="GET")){throw"method request must be 'POST' or 'GET'"}if(o&&typeof o!=="function"||(w&&typeof w!=="function")){throw"callbacks must be a function"}var t=function(i){return function(){if(i==="error"){w({status:r.status,statusText:r.statusText})}else{o({status:r.status,statusText:r.statusText,text:typeof r.responseText==="string"?{text:r.responseText}:undefined,headers:r.getAllResponseHeaders?r.getAllResponseHeaders():""})}}};o&&typeof o=="function"&&(r.onload=t());w&&typeof w=="function"&&(r.onerror=t("error"));h+="?"+s;if(g==="GET"){h+="&"+v}r.open(g,h,true);r.withCredentials=true;if(r.setRequestHeader!=undefined){if(j){for(n=0;n<j.length;n++){r.setRequestHeader(j[n].name,j[n].value)}}}r.send(g=="POST"?v:undefined)}return{sendRequest:b}})}(typeof define==="function"&&define.amd?define:function(e,b){var a=BES.ProTrack.Vortex.Modules.Utils;var c=b(a);var d="BES.ProTrack.Vortex.Modules.Ajax";a.extendNamespace(window,d,c)}));(function(a){a(["./utils","./log","./ajax","./pl_ns"],function(l,h,c,b){if(!JSON){throw new Error("BES.ProTrack.Vortex depends on JSON support.")}if(!l){throw new Error("BES.ProTrack.Vortex depends on Utils module.")}if(!c){throw new Error("BES.ProTrack.Vortex depends on Ajax module.")}var o=l,m=c,k=[],n=[],g=h?h.getLog("send.interface.modern.js"):{writeLine:o.noop},f={url:o.httpScheme()+"etahub.com/events",sendPixel:false,activatePlugins:"all",skipActivatePlugins:[],plugins:{}},e=o.extend({},f),j={uniqueId:null},r={appid:null};k=o.foldl(b,function(u,t,s){g.writeLine("Plugin "+t.getName()+" loaded");u.push(t);return u},[]);function d(w,t,v,s){if(!(v&&(typeof(v)==="object"))){var u="You cannot pass non-object as container for generic attributes.";g.writeLine(u);throw new Error(u)}this.asQueryObject=function(){var z={app_id:w,eventName:t};var x={};o.each(v,function(C,B){var F=C+"";var D=B+"";if(!/^[A-Za-z0-9_-]{0,30}$/.test(D)){x[101]=true}else{var A=o.determineTypePrefix(C);if(!A.err){var E=A.prefix;z[E+B]=C}else{x[100]=true}}});if(j.uniqueId){z._suniqueId=j.uniqueId}o.each(s,function(A){A(z)});var y=o.keys(x);if(y.length){z._errors=y.concat(",")}return z}}function q(u,s,t){o.each({appId:u,eventName:s},function(x,w){if(!x){var y=o.str.format("validateEvent: Parameter '{0}' cannot be empty, undefined, or null.",w);g.writeLine(y);throw new Error(y)}})}function p(s,w){var v=[{name:"Content-Type",value:"application/x-www-form-urlencoded"}];var u=s.asQueryObject();function t(y,x){m.sendRequest(e.url,u,y,x,v,e.sendPixel)}g.writeLine(o.str.format("sendEvent: sent event {0}.",JSON.stringify(s)));w=w||o.noop;t(function(x){w(null,x)},function(x){w(x,null)})}function i(A,B,v,u){var z=o.noop,w={};u=u||{};var t=[].slice.call(arguments,i.length);switch(t.length){case 0:break;case 1:if(typeof t[0]=="object"){w=t[0]}else{if(typeof t[0]=="function"){z=t[0]}}break;default:if(typeof t[0]=="object"){w=t[0]}if(typeof t[1]=="function"){z=t[1]}break}var s=o.extend(B,w);g.writeLine("sendEventModern: sending a generic event ");q(A,v,u?u.value:undefined);var y=o.foldl(n,function(F,E){var C=E.instance,D=E.constructor;if((s.activatePlugins==="all"||(s.activatePlugins.indexOf(D.getName())!==-1))&&s.skipActivatePlugins.indexOf(D.getName())==-1){F.push(C.process.bind(E,s))}return F},[]);var x=new d(A,v,u,y);return p(x,z)}return function(u,t){var s=this;e=o.extend(e,t);if(!(u&&typeof(u)=="number")){throw new Error("You must specify an application id.")}r.appid=u;n=o.foldl(k,function(w,v){w[v.getName()]={constructor:v,instance:v(e)};return w},{});s.pl=o.foldl(n,function(v,w){v[w.constructor.getName()]=w.instance;return v},{});s.unique=function(v){j.uniqueId=v};s.sendEvent=o.getDeferredFunc(i.bind(this,u,e),this)}})}(typeof define==="function"&&define.amd?define:function(e,c){if(!BES.ProTrack.Vortex.Modules){throw new Error("Could not load any modules!")}var b=c(BES.ProTrack.Vortex.Modules.Utils,BES.ProTrack.Vortex.Modules.Log,BES.ProTrack.Vortex.Modules.Ajax,BES.ProTrack.Vortex.Plugins||[]);var a=BES.ProTrack.Vortex.Modules.Utils;var d="BES.ProTrack.Vortex.Modules.SendInterface";a.extendNamespace(window,d,b)}));(function(a){a(["./utils","./log","./ajax","./agentinfo","./send.interface"],function(i,g,b,j,l){if(!JSON){throw new Error("BES.ProTrack.Vortex depends on JSON support.")}if(!i){throw new Error("BES.ProTrack.Vortex depends on Utils module.")}if(!b){throw new Error("BES.ProTrack.Vortex depends on Ajax module.")}var m=i,k=b,h=j,f=g?g.getLog("core.js"):{writeLine:m.noop},e={},d=m.extend({},e);if(!l){var c="Cannot find the SendInterface implementation.";f.writeLine(c);throw new Error(c)}if(h){f.writeLine("Found AgentInfo module, enabling Agent detection!")}return function(){var n=arguments[0],o,p;if(typeof n=="object"){o=n}else{p=n;o=arguments[1]}m.extend(d,o||{});if(d.url){d.url=m.ensureProperUrlScheme(d.url)}return new l(p,d)}})}(typeof define==="function"&&define.amd?define:function(e,b){if(!BES.ProTrack.Vortex.Modules){throw new Error("Could not load any modules!")}var d=b(BES.ProTrack.Vortex.Modules.Utils,BES.ProTrack.Vortex.Modules.Log,BES.ProTrack.Vortex.Modules.Ajax,BES.ProTrack.Vortex.Modules.AgentInfo,BES.ProTrack.Vortex.Modules.SendInterface);var a=BES.ProTrack.Vortex.Modules.Utils;var c="BES.ProTrack.Vortex.Class";a.extendNamespace(window,c,d)}));