__d("widget.treasure.config",["common.js.jquery"],function(d,k,i,b){var a=b("common.js.jquery"),e={gameState:{unInit:0,init:1,start:2,end:3,dolottary:4},diamond:{width:20,height:20},images:{duozai:"http://s0.hao123img.com/res/treasure/duozai-kp.png",rule:"http://s0.hao123img.com/res/treasure/treasure-rule.png",tipBox:"http://s0.hao123img.com/res/treasure/treasure-vitualHover.png",pop:"http://s0.hao123img.com/res/treasure/treasure-pop.png",state1:"http://s0.hao123img.com/res/treasure/diamond-state1.png",
state2:"http://s0.hao123img.com/res/treasure/diamond-state2.png"},lottery:{pid:"116",token:"296cd89197bcc8373c2bc8f73a88ad85",lotteryUrl:"http://zhuanla.hao123.com/lucky/draw?callback=?",submitUrl:"http://zhuanla.hao123.com/lucky/update?callback=?",goldUrl:"http://zhuanla.hao123.com/task/addvipcoin?callback=?"},duozai:{width:80,height:172,normal:{interval:100,frames:"-16 30,-16 -172,-16 -344,-16 -516,-16 -688,-16 -860,-96 0".split(",")},onceHover:{interval:200,frames:"-16 0,-16 -172,-16 -344,-16 -516,-16 -688,-16 -860,-96 0".split(",")},
working:{interval:100,frames:"-96 0,-96 -172,-95 -344,-95 -516,-95 -687,-95 -859,-95 -1032".split(",")},jumping:{interval:200,frames:["-45 -5","-45 -139","-45 -273","-45 -407","-45 -5"]}},hot:{width:44,height:47,bottom:-50,finalBottom:123},progressbar:{width:56,height:166,marginLeft:13,top:-175,bottom:{small:450,other:550},score:{zero:166,one:154,two:134,three:114,four:94,five:74,six:54,seven:0}},pointer:{minLeft:135,maxLeft:515}};k.exports={init:function(){this.data=e;return this},get:function(b,
c){var f=this.data||{},l=(b||"").split(".");a.each(l,function(c,a){a&&"undefined"!==typeof f&&(f=f[a])});return"undefined"!==typeof f?f:c},set:function(b,c){var f,l,j;if("undefined"===typeof c)this.data=b;else if(b=a.trim(""+(b||"")))f=b.split("."),l=f.pop(),j=this.data||{},a.each(f,function(c,a){var b=j[a];if("object"===typeof b)j=j[a];else if("undefiend"===typeof b)j=j[a]={};else throw Error("forbidden to set property["+a+"] of ["+b+"] data");}),j[l]=c;return this}}.init();return i});
__d("widget.treasure.diamondSprite",["common.js.jquery","common.js.format","common.js.animation","widget.treasure.config"],function(d,k,i,b){function a(a,c,b){this.ctx=a;this.url=c;this.diamondStore=b||{};this.create()}var e=b("common.js.jquery"),m=b("common.js.format");b("common.js.animation");var d=b("widget.treasure.config"),c=d.get("diamond"),f=d.get("images");a.prototype.create=function(){var a=this.diamondStore,b=this.url,g=this.ctx.text();this.$tpl=e(m('<a class="g-ib treasure-item" target="_blank" alog-text="#{title}" href="#{url}" style="padding: 0;width:#{width}px;height:#{height}px;"></a>',
{width:c.width,height:c.height,url:b,title:g}));a&&a[b]?this.render(a[b]):this.render(1);return this.$tpl};a.prototype.render=function(a){a||(a=1);var c=this.ctx.text(),c=c+"-diamond";switch(a){case 1:this.$tpl.attr({"data-state":1,"data-bg":f.state1.src,"alog-text":c}).css({"background-image":"url("+f.state1.src+")"});break;default:this.$tpl.attr({"data-state":2,"data-bg":f.state2.src,"alog-text":c}).addClass("treasure-diamond").css({"background-image":"url("+f.state2.src+")"})}};k.exports=a;return i});
__d("widget.treasure.duozaiSprite",["common.js.jquery","common.js.format","common.js.animation","widget.treasure.config"],function(d,k,i,b){function a(a){this.game=a;this.onceHoverAnimationDone=this.normalAnimationDone=!1;this.create()}var e=b("common.js.jquery"),m=b("common.js.format"),c=b("common.js.animation"),d=b("widget.treasure.config"),f=d.get("duozai"),l=d.get("hot"),j=d.get("images");a.prototype.create=function(){this.$tpl=e(m('<div class="duozai" style="width:#{width}px;height:#{height}px;background-image:url(#{bgurl});"></div>',
{width:f.width,height:f.height,bgurl:j.duozai.src}));this.$hotTpl=e(m('<div class="duozi-hot" style="width:#{width}px;height:#{height}px;bottom:#{bottom}px;background-image:url(#{bgurl});"></div>',{width:l.width,height:l.height,bottom:l.bottom,bgurl:j.duozai.src}))};a.prototype.show=function(a){this.$tpl.animate({bottom:"41px"},1E3,function(){a&&a()})};a.prototype.playOnceHoverAnimation=function(a){var b=this,j=this.$tpl[0],e=f.onceHover;this.onceHoverAnimation=c().changePosition(j,e.frames).then(function(){b.onceHoverAnimationDone=
!0;a&&a()});this.onceHoverAnimation.start(e.interval)};a.prototype.playNormalAnimation=function(a){var b=this,j=this.$tpl[0],e=f.normal;this.normalAnimation=c().changePosition(j,e.frames).then(function(){b.normalAnimationDone=!0;a&&a()});this.normalAnimation.start(e.interval)};a.prototype.stopNormalAnimation=function(){this.normalAnimation&&this.normalAnimation.dispose();this.normalAnimationDone=!0;this.$tpl.css("background-position","-16px 0")};a.prototype.playWorkingAnimation=function(){var a=this.$tpl[0],
b=f.working;this.normalAnimationDone||this.stopNormalAnimation();this.workingAnimation=c().changePosition(a,b.frames).repeatForever();this.workingAnimation.start(b.interval)};a.prototype.stopWorkingAnimation=function(){this.workingAnimation&&this.workingAnimation.dispose();this.$tpl.css("background-position","-96px 0")};a.prototype.playJumpingAnimation=function(){var a=this,b=this.$tpl[0],j=f.jumping;this.jumpingAnimation=c().changePosition(b,j.frames).then(function(){7==a.game.score&&a.$tpl.css("background-position",
"-45px -407px")});this.jumpingAnimation.start(j.interval)};a.prototype.stopJumpingAnimation=function(){this.jumpingAnimation&&this.jumpingAnimation.dispose();7==this.game.score?this.$tpl.css("background-position","-45px -407px"):this.$tpl.css("background-position","-45px -5px")};k.exports=a;return i});
__d("widget.treasure.progressbarSprite",["common.js.jquery","common.js.format","common.js.animation","common.js.pageEvents","widget.treasure.config"],function(d,k,i,b){function a(a){this.width=c.width;this.height=c.height;this.marginLeft=c.marginLeft;this.score=a||0;this.create()}var e=b("common.js.jquery"),m=b("common.js.format");b("common.js.animation");b("common.js.pageEvents");d=b("widget.treasure.config");d.get("game");var c=d.get("progressbar"),f=d.get("pointer"),l=d.get("images");a.prototype.create=
function(){var a=this.renderScore(this.score);this.$tpl=e(m('<div class="progressbar-box"><div class="pointer js-pointer" style="background: url(#{bgurl})  -344px -11px  no-repeat;"></div><div class="progressbar js-progressbar" style="width:#{width}px;height:#{height}px;background: url(#{bgurl}) -268px -7px no-repeat"></div><a href="#" alog-text="\u9886\u53d6\u5956\u52b1" class="prize-btn js-prize" style="width: 56px;height: 50px;display: none;position: absolute;top: 0;left: 0;cursor:pointer"></a></div>',
{bgurl:l.duozai.src,width:this.width,height:a,marginLeft:this.marginLeft,bottom:this.bottom,top:c.top,left:f.minLeft}));this.$progressbar=e(".js-progressbar",this.$tpl);this.$pointer=e(".js-pointer",this.$tpl);this.$prizeBtn=e(".js-prize",this.$tpl);7==this.score&&this.$prizeBtn.show()};a.prototype.playflyanimation=function(){this.$tpl.fadeIn(1E3)};a.prototype.renderScore=function(a){var b;switch(a){case 0:b=c.score.zero;break;case 1:b=c.score.one;break;case 2:b=c.score.two;break;case 3:b=c.score.three;
break;case 4:b=c.score.four;break;case 5:b=c.score.five;break;case 6:b=c.score.six;break;case 7:b=c.score.seven;break;default:b=c.score.seven}this.$progressbar&&this.$progressbar.animate({height:b},1E3);7==a&&this.$prizeBtn&&this.$prizeBtn.css("display","block");return b};a.prototype.forward=function(a){this.renderScore(a)};a.prototype.back=function(){var a=this.forwardTime;this.$pointer.stop().animate({left:f.minLeft},a,"linear")};a.prototype.reset=function(){this.renderScore(0)};k.exports=a;return i});
__d("widget.treasure.treasure_ajax",["common.js.jquery"],function(d,k,i,b){function a(a){a=document.cookie.match("(?:^|; )"+window.encodeURIComponent(a)+"=([^;]+)");return null===a?void 0:window.decodeURIComponent(a[1])}function e(){var b=a("FLASHID")||a("BAIDUID");if(b)return b.split(":")[0]}var m=b("common.js.jquery");return i={doPost:function(a,b,d){b=b||{};b.c=e();m.getJSON(HAO.httpsTrans(a),b,function(a){d&&d(a)})}}});
__d("widget.treasure.treasure_goodSubmit",["common.js.widget","widget.popup.base"],function(d,k,i,b){b("common.js.widget");b("widget.popup.base");$.widget("hao123.treasure_goodSubmit",$.lottery.popup,{options:{className:"good-confirm-box",isModel:!0},_create:function(){var a=this.element;this._baseCreate();this.element.appendTo($("body"));this.$close=$('[data-hook="good-confirm-close"]',a);this._bindEvent();this._baseShow()},_init:function(){},_bindEvent:function(){var a=this;a.$close.click(function(){a._baseHide();
a.remove();return!1})}});k.exports={pop:function(){$('<div id="treasure-good-confirm" class="treasure-good-confirm" monkey="treasure_good_confirm"><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="good-confirm-close" data-hook="good-confirm-close"></a></div>').treasure_goodSubmit()}};return i});
__d("widget.treasure.treasure_good","common.js.widget,widget.popup.base,widget.canlash.imageloader,widget.treasure.treasure_ajax,widget.treasure.config,widget.treasure.treasure_goodSubmit".split(","),function(d,k,i,b){b("common.js.widget");b("widget.popup.base");b("widget.canlash.imageloader");var a=b("widget.treasure.treasure_ajax"),d=b("widget.treasure.config"),e=b("widget.treasure.treasure_goodSubmit"),m=d.get("lottery").submitUrl;$.widget("hao123.treasure_good",$.lottery.popup,{options:{className:"pop-treasure-good",
isModel:!0},_create:function(){var a=this.element;this._baseCreate();this.element.appendTo($("body"));this.valid=!1;this.$close=$('[data-hook="treasure-good-close"]',a);this.$submit=$('[data-hook="treasure-good-submit"]',a);this.$prize=$('[data-hook="treasure-good-prize"]',a);this.$name=$('[data-hook="prizer-name"]',a);this.$phone=$('[data-hook="prizer-phone"]',a);this.$address=$('[data-hook="prizer-address"]',a);this._bindEvent();this._baseShow()},_init:function(){this._paintPrize()},_paintPrize:function(){this.$prize.text(this.options.prize)},
show:function(){this._baseShow()},_commit:function(){function b(){f._baseHide();e.pop()}var f=this,d=f.options;f._valid();f.valid&&a.doPost(m,d.args,b)},_valid:function(){function a(b,c){b=$.trim(b);switch(c){case "phone":return/^0?1[3|4|5|8][0-9]\d{8}$/.test(b);default:return!!b}}var b=this.$name.val(),e=this.$phone.val(),d=this.$address.val();a(b,"notnull")?a(e,"notnull")?a(e,"phone")?a(d,"notnull")?(this.valid=!0,this.options.args.winfo.address=d,this.options.args.winfo.phone=e,this.options.args.winfo.uname=
b):(this.valid=!1,this.$address.focus()):(this.valid=!1,this.$phone.val("").focus()):(this.valid=!1,this.$phone.focus()):(this.valid=!1,this.$name.focus())},_bindEvent:function(){var a=this;this.$close.click(function(){a._baseHide();a.remove();return!1});this.$submit.click(function(){a._commit();return!1})}});k.exports={pop:function(a,b,e){var d={};d.prize=a;d.args=b;d.gameinstance=e;$('<div id="pop-treasure-good" class="pop-treasure-good" monkey="pop_treasure_good"><div class="treasure-good-prize" data-hook="treasure-good-prize"></div><input class="prizer-name" data-hook="prizer-name"><input class="prizer-phone" data-hook="prizer-phone"><textarea rows="2" cols="20" class="prizer-address" data-hook="prizer-address"></textarea><a href="#" class="treasure-good-submit" data-hook="treasure-good-submit" title="\u63d0\u4ea4"></a><a href="#" title="\u5173\u95ed\u4e2d\u5956\u5f39\u5c42" class="treasure-good-close" data-hook="treasure-good-close"></a></div>').treasure_good(d)}};
return i});
__d("widget.treasure.treasure_virtual",["common.js.widget","widget.popup.base"],function(d,k,i,b){b("common.js.widget");b("widget.popup.base");$.widget("hao123.treasure_virtual",$.lottery.popup,{options:{className:"pop-treasure-virtual",isModel:!0},_create:function(){var a=this.element;this._baseCreate();this.element.appendTo($("body"));this.$close=$('[data-hook="treasure-virtual-close"]',a);this.$submit=$('[data-hook="treasure-virtual-submit"]',a);this.$prize=$('[data-hook="treasure-virtual-prize"]',a);
this.$num=$('[data-hook="treasure-virtual-num"]',a);this.$tip=$('[data-hook="treasure-virtual-tip"]',a);this.$tipBox=$('[data-hook="treasure-virtual-tipBox"]',a);this._bindEvent();this._baseShow()},_init:function(){this._paintPrize()},_paintPrize:function(){var a=this.options;this.$prize.text(a.prize);this.$num.text(a.num)},_bindEvent:function(){var a=this;this.$close.click(function(){a._baseHide();a.remove();return!1});this.$tip.hover(function(){a.$tipBox.show()},function(){a.$tipBox.hide()})}});
k.exports={pop:function(a,b){var d={};d.prize=a;d.num=b;$('<div id="pop-treasure-virtual" class="pop-treasure-virtual" monkey="pop_treasure_virtual"><div class="treasure-virtual-prize" data-hook="treasure-virtual-prize"></div><div class="treasure-virtual-num" data-hook="treasure-virtual-num"></div><div class="treasure-virtual-tip" data-hook="treasure-virtual-tip"></div><div class="treasure-virtual-tipBox" data-hook="treasure-virtual-tipBox"></div><a href="http://life.hao123.com/?from=weekend" class="treasure-virtual-submit" data-hook="treasure-virtual-submit" title="go"></a><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="treasure-virtual-close" data-hook="treasure-virtual-close"></a></div>').treasure_virtual(d)}};
return i});
__d("widget.treasure.treasure_getGold",["common.js.widget","widget.popup.base","widget.treasure.config","widget.treasure.treasure_ajax"],function(d,k,i,b){b("common.js.widget");b("widget.popup.base");var d=b("widget.treasure.config"),a=b("widget.treasure.treasure_ajax"),e=d.get("lottery").goldUrl;$.widget("hao123.treasure_getGold",$.lottery.popup,{options:{className:"gold-confirm-box",isModel:!0},_create:function(){var a=this.element;this._baseCreate();this.element.appendTo($("body"));this.$close=
$('[data-hook="gold-confirm-close"]',a);this.$goVip=$('[data-hook="gold-confirm-vip"]',a);this._bindEvent();this._baseShow()},_init:function(){},_getGold:function(){var b=this;a.doPost(e,{},function(a){0===a.errno?b.remove():(b.$goVip.remove(),b.element.addClass("treasure-gold-empty"))})},_bindEvent:function(){var a=this;a.$close.click(function(){a.remove();return!1});a.$goVip.click(function(){a._getGold()})}});k.exports={pop:function(){$('<div id="treasure-gold-confirm" class="treasure-gold-confirm" monkey="treasure_gold_confirm"><a href="http://vip.hao123.com//?from=weekend" title="\u9886\u53d6\u4f7f\u7528" class="gold-confirm-vip" data-hook="gold-confirm-vip"></a><a href="#" title="\u5173\u95ed\u5f39\u7a97" class="gold-confirm-close" data-hook="gold-confirm-close"></a></div>').treasure_getGold()}};
return i});
__d("widget.treasure.game","common.js.jquery,common.js.format,common.js.events,common.js.log,common.js.JSON,widget.canlash.imageloader,widget.treasure.config,common.js.config,common.js.store,widget.treasure.duozaiSprite,widget.treasure.progressbarSprite,widget.treasure.diamondSprite,widget.treasure.treasure_good,widget.treasure.treasure_virtual,widget.treasure.treasure_ajax,widget.treasure.treasure_getGold,common.js.profile,common.js.pageEvents".split(","),function(d,k,i,b){function a(){this.state=n.unInit;
this.resourceLoaded=!1;this.login=r.get("userinfo").islanding}var e=b("common.js.jquery"),m=b("common.js.format"),c=b("common.js.events"),f=b("common.js.log"),l=b("common.js.JSON"),j=b("widget.canlash.imageloader"),g=b("widget.treasure.config"),r=b("common.js.config"),h=b("common.js.store"),s=b("widget.treasure.duozaiSprite"),t=b("widget.treasure.progressbarSprite"),u=b("widget.treasure.diamondSprite"),v=b("widget.treasure.treasure_good"),w=b("widget.treasure.treasure_virtual"),x=b("widget.treasure.treasure_ajax"),
q=b("widget.treasure.treasure_getGold"),y=b("common.js.profile"),o=b("common.js.pageEvents"),f=b("common.js.log");g.get("game");var n=g.get("gameState"),p=g.get("images");a.prototype.init=function(a,b){this.diamondData=a[1].data;this.updateStore();this.$parent=b||e("body");var c=g.get("lottery.lotteryUrl"),d=g.get("lottery.submitUrl"),f=g.get("lottery.goldUrl");g.set("images.duozai",HAO.httpsTrans(a[0].duozai));g.set("images.rule",HAO.httpsTrans(a[0].rule));g.set("images.state1",HAO.httpsTrans(a[0].state1));
g.set("images.state2",HAO.httpsTrans(a[0].state2));g.set("images.tipBox",HAO.httpsTrans(a[0].tipbox));g.set("images.pop",HAO.httpsTrans(a[0].pop));g.set("lottery.pid",a[0].pid);g.set("lottery.token",a[0].token);g.set("lottery.lotteryUrl",HAO.httpsTrans(c));g.set("lottery.submitUrl",HAO.httpsTrans(d));g.set("lottery.goldUrl",HAO.httpsTrans(f));this.slideState=y.get("slide");this.diamonds=[];this.show=!0;var h=this;this.loadResource(function(a){a&&h.initGameScene()});return!0};a.prototype.updateStore=
function(){h.getAll();var a=h.get("treasure-state"),b=h.get("treasure-score"),c=h.get("treasure-createtime"),d=h.get("treasure-diamonds");this.state=a?a:n.init;this.score=b?b:0;this.diamondStore=d?d:"{}";this.diamondStore=l.parse(this.diamondStore);a=Date.parse(new Date)/1E3;!c||172800<=a-c?this.resetStore():this.createtime=c};a.prototype.resetStore=function(){var a=h.get("treasure-state"),b=h.get("treasure-score"),c=h.get("treasure-createtime"),d=h.get("treasure-diamonds");a&&h.remove("treasure-state");
b&&h.remove("treasure-score");c&&h.remove("treasure-createtime");d&&h.remove("treasure-diamonds")};a.prototype.resetData=function(){this.score=0;this.state=n.unInit;this.createtime=0;this.diamondStore="{}";this.diamondStore=l.parse(this.diamondStore);this.diamonds=[];this.index=!0};a.prototype.loadResource=function(a){if(this.resourceLoaded)a(!0);else{var b=this;j(p,function(c){b.resouceLoaded=c;a(c)})}};a.prototype.initGameScene=function(){var a=this;a.createStage();a.createDuozai(function(){a.$container.css("overflow",
"visible");0==a.score&&a.state!=n.start&&a.state!=n.end?a.duozai.playNormalAnimation(function(){a.createStartBtn();a.createCloseBtn()}):("1"==a.slideState&&1450>parseInt(o.getViewport().width)&&c.done("slidetoolbar.fold"),a.duozai.playNormalAnimation(function(){a.createCloseBtn()}));a.createProgressBar(a.score);a.createTip();a.state!=n.start&&a.state!=n.end||(a.$container.addClass("treasure-gameing"),a.duozai.$tpl.css("bottom",0),a.progressbar.playflyanimation(),a.createDiamonds());a.bindEvent()})};
a.prototype.createStage=function(){this.$container=e('<div class="treasure-game" monkey="treasure-game"></div>').appendTo(this.$parent)};a.prototype.createDuozai=function(a){var b=this;this.duozai=new s(b);this.$container.append(this.duozai.$tpl);b.sendCurrent=function(a){"index"!=a?(b.index=!1,b.$container.hide()):(b.index=!0,b.$container.show())};c.on("goTop.sendCurrent",b.sendCurrent);this.duozai.show(a)};a.prototype.createStartBtn=function(){var a=e(m('<div></div><a class="treasure-start" href="#" title="\u5f00\u59cb\u6e38\u620f" style="background-image:url(#{bgurl})"></a>',
{bgurl:p.duozai.src}));this.$container.append(a);var b=this;a.bind("mousedown",function(){a.addClass("clicked")}).bind("click",function(){a.remove();"1"==b.slideState&&1450>parseInt(o.getViewport().width)&&c.done("slidetoolbar.fold");b.start();return!1}).hover(function(){b.$tip.show()},function(){b.$tip.hide()})};a.prototype.createCloseBtn=function(){var a=this,b=e('<a href="#" alog-text="\u5173\u95ed\u6e38\u620f" class="treasure-close js-close"></a>');a.$container.append(b);a.$closeBtn=b;b.css("background-image",
"url("+p.duozai.src+")");a.$closeBtn.click(function(){a.destroy();return!1})};a.prototype.createDiamonds=function(){var a=this,b={},d=this.diamondData,f=d.length;a.diamonds=[];if(a.state==n.start){for(var g=0;g<f;g++){var i=d[g].url.replace(/(.*)\/$/,"$1");b[i]=d[g]}e("#box-famoussite .famoussite-mainlink").each(function(){var d=this.href.replace(/(.*)\/$/,"$1");if(b[d]){var f=new u(e(this),d,a.diamondStore);e(this).parent().append(f.$tpl);a.diamonds.push(f.$tpl);f.$tpl.click(function(){var b=parseInt(e(this).attr("data-state")),
g=h.get("treasure-score")||0,b=b+1;a.diamondStore[d]=b;h.set("treasure-diamonds",l.stringify(a.diamondStore));f.render(b);2==b&&(6<++g&&(g=7,c.emit("weekend.diamond-clear"),a.state=n.end,h.set("treasure-state",a.state)),a.score=g,h.set("treasure-score",g),a.progressbar.forward(g))})}})}};a.prototype.start=function(){this.resetStore();this.createtime||h.set("treasure-createtime",Date.parse(new Date)/1E3);h.set("treasure-state",n.start);h.set("treasure-score",0);this.score=0;this.state=n.start;this.duozai.stopWorkingAnimation();
this.$tip.hide();this.$container.addClass("treasure-gameing");this.duozai.$tpl.css("bottom",0);this.progressbar.playflyanimation();this.createDiamonds()};a.prototype.createProgressBar=function(a){var b=this;this.progressbar=new t(a);this.$container.append(this.progressbar.$tpl);this.progressbar.$prizeBtn.click(function(){b.state==n.end&&(b.login?(b.restart(),b.doLottery()):e("#loginlink .login").click());return!1})};a.prototype.doLottery=function(){var a={},b=g.get("lottery"),c=a.pid=b.pid,d=a.token=
b.token;x.doPost(b.lotteryUrl,a,function(a){var b=a.errno,a=a.data,f="",e={};e.pid=c;e.token=d;e.winfo={};0===b?0!=parseInt(a.prize_id)?(f=a.prize_name,e.oid=a.oid,0==a.real?w.pop(f,a.data):v.pop(f,e)):q.pop():q.pop()})};a.prototype.bindEvent=function(){var a=this;a.duozai.$tpl.hover(function(){a.$tip.show()},function(){a.$tip.hide()});a.$container.hover(function(){7!=a.score&&(a.duozai.normalAnimationDone&&a.duozai.playWorkingAnimation(),a.state==n.init&&f({page:"index",level:1,type:"auto",k:"weekend-hover"}))},
function(){7!=a.score&&a.duozai.normalAnimationDone&&a.duozai.stopWorkingAnimation()});c.on("weekend.progressbar-forward",function(){a.progressbar.forward()});c.on("weekend.progressbar-reset",function(){a.progressbar.reset()});c.on("weekend.diamond-clear",function(){for(var b=a.diamonds.length,c=0;c<b;c++)a.diamonds[c].remove()});c.on("weekend.diamond-hide",function(){for(var b=a.diamonds.length,c=0;c<b;c++)a.diamonds[c].hide()});c.on("weekend.diamond-show",function(){for(var b=a.diamonds.length,
c=0;c<b;c++)a.diamonds[c].show()});c.on("treasure.createDiamonds",function(){a.createDiamonds()});a.menuChange=function(b){0==b?(a.index=!0,a.$container&&a.$container.show()):(a.index=!1,window.menuChange=!0,a.$container&&a.$container.hide())};a.viewChange=function(b){b=b||o.getViewport();a.index&&(1339>b.width?(a.$container&&a.$container.hide(),c.emit("weekend.diamond-hide")):(a.$container&&a.$container.show(),c.emit("weekend.diamond-show")))};c.on("menus.changed",a.menuChange);o.on("viewport.deferchange",
a.viewChange)};a.prototype.unEvents=function(){c.un("weekend.progressbar-forward");c.un("weekend.progressbar-reset");c.un("weekend.diamond-clear");c.un("weekend.progressbar-hide");c.un("weekend.progressbar-show");c.un("treasure.createDiamonds");this.menuChange&&c.un("menus.changed",this.menuChange);this.viewChange&&o.un("viewport.deferchange",this.viewChange);this.sendCurrent&&c.un("goTop.sendCurrent",this.sendCurrent)};a.prototype.createTip=function(){this.$tip=e(m('<div class="treasure-tip" style="background-image:url(#{bgurl})" ></div>',
{bgurl:p.rule.src}));this.$container.append(this.$tip)};a.prototype.restart=function(){this.destroy();this.initGameScene()};a.prototype.destroy=function(){this.$container.remove();c.emit("weekend.diamond-clear");this.resetStore();this.resetData();this.unEvents()};k.exports=new a;return i});window.js_LlkMMUwCXb&&window.js_LlkMMUwCXb(!0);
