ï»¿<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script>
        storageManage = function (e) {
            try {
                var payload = JSON.parse(e.data);
                switch (payload.method) {
                    case 'set':
                        if (payload.data) {
                            localStorage.setItem(payload.key, payload.data);
                        }
                        break;
                    case 'setsession':
                        if (payload.data) {
                            sessionStorage.setItem(payload.key, payload.data);
                        }
                        break;
                    case 'get':
                        var parent = window.parent;
                        var data = localStorage.getItem(payload.key);
                        parent.postMessage(data, "*");
                        break;
                    case 'getsession':
                        var parent = window.parent;
                        var data = sessionStorage.getItem(payload.key);
                        parent.postMessage(data, "*");
                        break;
                    case 'remove':
                        localStorage.removeItem(payload.key);
                        break;
                }
            }
            catch (e) {  console.log(e.toString());
            }
        };

        if (window.addEventListener) {
            window.addEventListener('message', storageManage);
        } else {
            window.attachEvent('onmessage', storageManage);
        }
    </script>
</head>
<body>
</body>
</html>

